var Wbe=Object.defineProperty;var Gbe=(r,e,i)=>e in r?Wbe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var Xi=(r,e,i)=>(Gbe(r,typeof e!="symbol"?e+"":e,i),i);function Hbe(r,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function IM(r,e){const i=new Set(r.split(","));return n=>i.has(n)}const Nn={},ly=[],Oa=()=>{},Qbe=()=>!1,AO=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),IL=r=>r.startsWith("onUpdate:"),dr=Object.assign,RL=(r,e)=>{const i=r.indexOf(e);i>-1&&r.splice(i,1)},jbe=Object.prototype.hasOwnProperty,yn=(r,e)=>jbe.call(r,e),Gt=Array.isArray,hy=r=>x_(r)==="[object Map]",c0=r=>x_(r)==="[object Set]",Tz=r=>x_(r)==="[object Date]",Ybe=r=>x_(r)==="[object RegExp]",_i=r=>typeof r=="function",Or=r=>typeof r=="string",Sd=r=>typeof r=="symbol",Wn=r=>r!==null&&typeof r=="object",BL=r=>(Wn(r)||_i(r))&&_i(r.then)&&_i(r.catch),KY=Object.prototype.toString,x_=r=>KY.call(r),qbe=r=>x_(r).slice(8,-1),JY=r=>x_(r)==="[object Object]",DL=r=>Or(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,cy=IM(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),RM=r=>{const e=Object.create(null);return i=>e[i]||(e[i]=r(i))},Zbe=/-(\w)/g,qo=RM(r=>r.replace(Zbe,(e,i)=>i?i.toUpperCase():"")),Kbe=/\B([A-Z])/g,cl=RM(r=>r.replace(Kbe,"-$1").toLowerCase()),EO=RM(r=>r.charAt(0).toUpperCase()+r.slice(1)),Ib=RM(r=>r?`on${EO(r)}`:""),ac=(r,e)=>!Object.is(r,e),uy=(r,e)=>{for(let i=0;i<r.length;i++)r[i](e)},eq=(r,e,i,n=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:n,value:i})},jA=r=>{const e=parseFloat(r);return isNaN(e)?r:e},YA=r=>{const e=Or(r)?Number(r):NaN;return isNaN(e)?r:e};let Az;const tq=()=>Az||(Az=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Jbe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",ewe=IM(Jbe);function Up(r){if(Gt(r)){const e={};for(let i=0;i<r.length;i++){const n=r[i],s=Or(n)?rwe(n):Up(n);if(s)for(const o in s)e[o]=s[o]}return e}else if(Or(r)||Wn(r))return r}const twe=/;(?![^(]*\))/g,iwe=/:([^]+)/,nwe=/\/\*[^]*?\*\//g;function rwe(r){const e={};return r.replace(nwe,"").split(twe).forEach(i=>{if(i){const n=i.split(iwe);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function b_(r){let e="";if(Or(r))e=r;else if(Gt(r))for(let i=0;i<r.length;i++){const n=b_(r[i]);n&&(e+=n+" ")}else if(Wn(r))for(const i in r)r[i]&&(e+=i+" ");return e.trim()}function iq(r){if(!r)return null;let{class:e,style:i}=r;return e&&!Or(e)&&(r.class=b_(e)),i&&(r.style=Up(i)),r}const swe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",owe=IM(swe);function nq(r){return!!r||r===""}function awe(r,e){if(r.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<r.length;n++)i=bp(r[n],e[n]);return i}function bp(r,e){if(r===e)return!0;let i=Tz(r),n=Tz(e);if(i||n)return i&&n?r.getTime()===e.getTime():!1;if(i=Sd(r),n=Sd(e),i||n)return r===e;if(i=Gt(r),n=Gt(e),i||n)return i&&n?awe(r,e):!1;if(i=Wn(r),n=Wn(e),i||n){if(!i||!n)return!1;const s=Object.keys(r).length,o=Object.keys(e).length;if(s!==o)return!1;for(const a in r){const l=r.hasOwnProperty(a),c=e.hasOwnProperty(a);if(l&&!c||!l&&c||!bp(r[a],e[a]))return!1}}return String(r)===String(e)}function BM(r,e){return r.findIndex(i=>bp(i,e))}const Cd=r=>Or(r)?r:r==null?"":Gt(r)||Wn(r)&&(r.toString===KY||!_i(r.toString))?JSON.stringify(r,rq,2):String(r),rq=(r,e)=>e&&e.__v_isRef?rq(r,e.value):hy(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s],o)=>(i[D3(n,o)+" =>"]=s,i),{})}:c0(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>D3(i))}:Sd(e)?D3(e):Wn(e)&&!Gt(e)&&!JY(e)?String(e):e,D3=(r,e="")=>{var i;return Sd(r)?`Symbol(${(i=r.description)!=null?i:e})`:r};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nl;class LL{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=nl,!e&&nl&&(this.index=(nl.scopes||(nl.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const i=nl;try{return nl=this,e()}finally{nl=i}}}on(){nl=this}off(){nl=this.parent}stop(e){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function lwe(r){return new LL(r)}function sq(r,e=nl){e&&e.active&&e.effects.push(r)}function DM(){return nl}function NL(r){nl&&nl.cleanups.push(r)}let xg;class Ly{constructor(e,i,n,s){this.fn=e,this.trigger=i,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,sq(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,zp();for(let e=0;e<this._depsLength;e++){const i=this.deps[e];if(i.computed&&(hwe(i.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Xp()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=dp,i=xg;try{return dp=!0,xg=this,this._runnings++,Ez(this),this.fn()}finally{Mz(this),this._runnings--,xg=i,dp=e}}stop(){this.active&&(Ez(this),Mz(this),this.onStop&&this.onStop(),this.active=!1)}}function hwe(r){return r.value}function Ez(r){r._trackId++,r._depsLength=0}function Mz(r){if(r.deps.length>r._depsLength){for(let e=r._depsLength;e<r.deps.length;e++)oq(r.deps[e],r);r.deps.length=r._depsLength}}function oq(r,e){const i=r.get(e);i!==void 0&&e._trackId!==i&&(r.delete(e),r.size===0&&r.cleanup())}function cwe(r,e){r.effect instanceof Ly&&(r=r.effect.fn);const i=new Ly(r,Oa,()=>{i.dirty&&i.run()});e&&(dr(i,e),e.scope&&sq(i,e.scope)),(!e||!e.lazy)&&i.run();const n=i.run.bind(i);return n.effect=i,n}function uwe(r){r.effect.stop()}let dp=!0,n4=0;const aq=[];function zp(){aq.push(dp),dp=!1}function Xp(){const r=aq.pop();dp=r===void 0?!0:r}function VL(){n4++}function FL(){for(n4--;!n4&&r4.length;)r4.shift()()}function lq(r,e,i){if(e.get(r)!==r._trackId){e.set(r,r._trackId);const n=r.deps[r._depsLength];n!==e?(n&&oq(n,r),r.deps[r._depsLength++]=e):r._depsLength++}}const r4=[];function hq(r,e,i){VL();for(const n of r.keys()){let s;n._dirtyLevel<e&&(s??(s=r.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(s??(s=r.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&r4.push(n.scheduler)))}FL()}const cq=(r,e)=>{const i=new Map;return i.cleanup=r,i.computed=e,i},qA=new WeakMap,bg=Symbol(""),s4=Symbol("");function Ba(r,e,i){if(dp&&xg){let n=qA.get(r);n||qA.set(r,n=new Map);let s=n.get(i);s||n.set(i,s=cq(()=>n.delete(i))),lq(xg,s)}}function vd(r,e,i,n,s,o){const a=qA.get(r);if(!a)return;let l=[];if(e==="clear")l=[...a.values()];else if(i==="length"&&Gt(r)){const c=Number(n);a.forEach((u,d)=>{(d==="length"||!Sd(d)&&d>=c)&&l.push(u)})}else switch(i!==void 0&&l.push(a.get(i)),e){case"add":Gt(r)?DL(i)&&l.push(a.get("length")):(l.push(a.get(bg)),hy(r)&&l.push(a.get(s4)));break;case"delete":Gt(r)||(l.push(a.get(bg)),hy(r)&&l.push(a.get(s4)));break;case"set":hy(r)&&l.push(a.get(bg));break}VL();for(const c of l)c&&hq(c,4);FL()}function dwe(r,e){const i=qA.get(r);return i&&i.get(e)}const fwe=IM("__proto__,__v_isRef,__isVue"),uq=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Sd)),Pz=pwe();function pwe(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...i){const n=vn(this);for(let o=0,a=this.length;o<a;o++)Ba(n,"get",o+"");const s=n[e](...i);return s===-1||s===!1?n[e](...i.map(vn)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...i){zp(),VL();const n=vn(this)[e].apply(this,i);return FL(),Xp(),n}}),r}function mwe(r){Sd(r)||(r=String(r));const e=vn(this);return Ba(e,"has",r),e.hasOwnProperty(r)}class dq{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,n){const s=this._isReadonly,o=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return o;if(i==="__v_raw")return n===(s?o?yq:vq:o?gq:mq).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=Gt(e);if(!s){if(a&&yn(Pz,i))return Reflect.get(Pz,i,n);if(i==="hasOwnProperty")return mwe}const l=Reflect.get(e,i,n);return(Sd(i)?uq.has(i):fwe(i))||(s||Ba(e,"get",i),o)?l:ps(l)?a&&DL(i)?l:l.value:Wn(l)?s?Wg(l):u0(l):l}}class fq extends dq{constructor(e=!1){super(!1,e)}set(e,i,n,s){let o=e[i];if(!this._isShallow){const c=Ny(o);if(!lw(n)&&!Ny(n)&&(o=vn(o),n=vn(n)),!Gt(e)&&ps(o)&&!ps(n))return c?!1:(o.value=n,!0)}const a=Gt(e)&&DL(i)?Number(i)<e.length:yn(e,i),l=Reflect.set(e,i,n,s);return e===vn(s)&&(a?ac(n,o)&&vd(e,"set",i,n):vd(e,"add",i,n)),l}deleteProperty(e,i){const n=yn(e,i);e[i];const s=Reflect.deleteProperty(e,i);return s&&n&&vd(e,"delete",i,void 0),s}has(e,i){const n=Reflect.has(e,i);return(!Sd(i)||!uq.has(i))&&Ba(e,"has",i),n}ownKeys(e){return Ba(e,"iterate",Gt(e)?"length":bg),Reflect.ownKeys(e)}}class pq extends dq{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const gwe=new fq,vwe=new pq,ywe=new fq(!0),_we=new pq(!0),$L=r=>r,LM=r=>Reflect.getPrototypeOf(r);function gC(r,e,i=!1,n=!1){r=r.__v_raw;const s=vn(r),o=vn(e);i||(ac(e,o)&&Ba(s,"get",e),Ba(s,"get",o));const{has:a}=LM(s),l=n?$L:i?zL:hw;if(a.call(s,e))return l(r.get(e));if(a.call(s,o))return l(r.get(o));r!==s&&r.get(e)}function vC(r,e=!1){const i=this.__v_raw,n=vn(i),s=vn(r);return e||(ac(r,s)&&Ba(n,"has",r),Ba(n,"has",s)),r===s?i.has(r):i.has(r)||i.has(s)}function yC(r,e=!1){return r=r.__v_raw,!e&&Ba(vn(r),"iterate",bg),Reflect.get(r,"size",r)}function kz(r){r=vn(r);const e=vn(this);return LM(e).has.call(e,r)||(e.add(r),vd(e,"add",r,r)),this}function Iz(r,e){e=vn(e);const i=vn(this),{has:n,get:s}=LM(i);let o=n.call(i,r);o||(r=vn(r),o=n.call(i,r));const a=s.call(i,r);return i.set(r,e),o?ac(e,a)&&vd(i,"set",r,e):vd(i,"add",r,e),this}function Rz(r){const e=vn(this),{has:i,get:n}=LM(e);let s=i.call(e,r);s||(r=vn(r),s=i.call(e,r)),n&&n.call(e,r);const o=e.delete(r);return s&&vd(e,"delete",r,void 0),o}function Bz(){const r=vn(this),e=r.size!==0,i=r.clear();return e&&vd(r,"clear",void 0,void 0),i}function _C(r,e){return function(n,s){const o=this,a=o.__v_raw,l=vn(a),c=e?$L:r?zL:hw;return!r&&Ba(l,"iterate",bg),a.forEach((u,d)=>n.call(s,c(u),c(d),o))}}function xC(r,e,i){return function(...n){const s=this.__v_raw,o=vn(s),a=hy(o),l=r==="entries"||r===Symbol.iterator&&a,c=r==="keys"&&a,u=s[r](...n),d=i?$L:e?zL:hw;return!e&&Ba(o,"iterate",c?s4:bg),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:l?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function ff(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function xwe(){const r={get(o){return gC(this,o)},get size(){return yC(this)},has:vC,add:kz,set:Iz,delete:Rz,clear:Bz,forEach:_C(!1,!1)},e={get(o){return gC(this,o,!1,!0)},get size(){return yC(this)},has:vC,add:kz,set:Iz,delete:Rz,clear:Bz,forEach:_C(!1,!0)},i={get(o){return gC(this,o,!0)},get size(){return yC(this,!0)},has(o){return vC.call(this,o,!0)},add:ff("add"),set:ff("set"),delete:ff("delete"),clear:ff("clear"),forEach:_C(!0,!1)},n={get(o){return gC(this,o,!0,!0)},get size(){return yC(this,!0)},has(o){return vC.call(this,o,!0)},add:ff("add"),set:ff("set"),delete:ff("delete"),clear:ff("clear"),forEach:_C(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=xC(o,!1,!1),i[o]=xC(o,!0,!1),e[o]=xC(o,!1,!0),n[o]=xC(o,!0,!0)}),[r,i,e,n]}const[bwe,wwe,Owe,Swe]=xwe();function NM(r,e){const i=e?r?Swe:Owe:r?wwe:bwe;return(n,s,o)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?n:Reflect.get(yn(i,s)&&s in n?i:n,s,o)}const Cwe={get:NM(!1,!1)},Twe={get:NM(!1,!0)},Awe={get:NM(!0,!1)},Ewe={get:NM(!0,!0)},mq=new WeakMap,gq=new WeakMap,vq=new WeakMap,yq=new WeakMap;function Mwe(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pwe(r){return r.__v_skip||!Object.isExtensible(r)?0:Mwe(qbe(r))}function u0(r){return Ny(r)?r:VM(r,!1,gwe,Cwe,mq)}function _q(r){return VM(r,!1,ywe,Twe,gq)}function Wg(r){return VM(r,!0,vwe,Awe,vq)}function kwe(r){return VM(r,!0,_we,Ewe,yq)}function VM(r,e,i,n,s){if(!Wn(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=s.get(r);if(o)return o;const a=Pwe(r);if(a===0)return r;const l=new Proxy(r,a===2?n:i);return s.set(r,l),l}function dy(r){return Ny(r)?dy(r.__v_raw):!!(r&&r.__v_isReactive)}function Ny(r){return!!(r&&r.__v_isReadonly)}function lw(r){return!!(r&&r.__v_isShallow)}function UL(r){return r?!!r.__v_raw:!1}function vn(r){const e=r&&r.__v_raw;return e?vn(e):r}function xq(r){return Object.isExtensible(r)&&eq(r,"__v_skip",!0),r}const hw=r=>Wn(r)?u0(r):r,zL=r=>Wn(r)?Wg(r):r;class bq{constructor(e,i,n,s){this.getter=e,this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ly(()=>e(this._value),()=>fy(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const e=vn(this);return(!e._cacheable||e.effect.dirty)&&ac(e._value,e._value=e.effect.run())&&fy(e,4),XL(e),e.effect._dirtyLevel>=2&&fy(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Iwe(r,e,i=!1){let n,s;const o=_i(r);return o?(n=r,s=Oa):(n=r.get,s=r.set),new bq(n,s,o||!s,i)}function XL(r){var e;dp&&xg&&(r=vn(r),lq(xg,(e=r.dep)!=null?e:r.dep=cq(()=>r.dep=void 0,r instanceof bq?r:void 0)))}function fy(r,e=4,i){r=vn(r);const n=r.dep;n&&hq(n,e)}function ps(r){return!!(r&&r.__v_isRef===!0)}function lt(r){return wq(r,!1)}function br(r){return wq(r,!0)}function wq(r,e){return ps(r)?r:new Rwe(r,e)}class Rwe{constructor(e,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?e:vn(e),this._value=i?e:hw(e)}get value(){return XL(this),this._value}set value(e){const i=this.__v_isShallow||lw(e)||Ny(e);e=i?e:vn(e),ac(e,this._rawValue)&&(this._rawValue=e,this._value=i?e:hw(e),fy(this,4))}}function Bwe(r){fy(r,4)}function li(r){return ps(r)?r.value:r}function Dwe(r){return _i(r)?r():li(r)}const Lwe={get:(r,e,i)=>li(Reflect.get(r,e,i)),set:(r,e,i,n)=>{const s=r[e];return ps(s)&&!ps(i)?(s.value=i,!0):Reflect.set(r,e,i,n)}};function WL(r){return dy(r)?r:new Proxy(r,Lwe)}class Nwe{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:n}=e(()=>XL(this),()=>fy(this));this._get=i,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function GL(r){return new Nwe(r)}function MO(r){const e=Gt(r)?new Array(r.length):{};for(const i in r)e[i]=Oq(r,i);return e}class Vwe{constructor(e,i,n){this._object=e,this._key=i,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return dwe(vn(this._object),this._key)}}class Fwe{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function $we(r,e,i){return ps(r)?r:_i(r)?new Fwe(r):Wn(r)&&arguments.length>1?Oq(r,e,i):lt(r)}function Oq(r,e,i){const n=r[e];return ps(n)?n:new Vwe(r,e,i)}const Uwe={GET:"get",HAS:"has",ITERATE:"iterate"},zwe={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xwe(r,e){}const Wwe={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},Gwe={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function yd(r,e,i,n){try{return n?r(...n):r()}catch(s){d0(s,e,i)}}function _l(r,e,i,n){if(_i(r)){const s=yd(r,e,i,n);return s&&BL(s)&&s.catch(o=>{d0(o,e,i)}),s}if(Gt(r)){const s=[];for(let o=0;o<r.length;o++)s.push(_l(r[o],e,i,n));return s}}function d0(r,e,i,n=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const a=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](r,a,l)===!1)return}o=o.parent}const c=e.appContext.config.errorHandler;if(c){zp(),yd(c,null,10,[r,a,l]),Xp();return}}Hwe(r,i,s,n)}function Hwe(r,e,i,n=!0){console.error(r)}let cw=!1,o4=!1;const vo=[];let Gc=0;const py=[];let $f=null,ng=0;const Sq=Promise.resolve();let HL=null;function w_(r){const e=HL||Sq;return r?e.then(this?r.bind(this):r):e}function Qwe(r){let e=Gc+1,i=vo.length;for(;e<i;){const n=e+i>>>1,s=vo[n],o=uw(s);o<r||o===r&&s.pre?e=n+1:i=n}return e}function FM(r){(!vo.length||!vo.includes(r,cw&&r.allowRecurse?Gc+1:Gc))&&(r.id==null?vo.push(r):vo.splice(Qwe(r.id),0,r),Cq())}function Cq(){!cw&&!o4&&(o4=!0,HL=Sq.then(Tq))}function jwe(r){const e=vo.indexOf(r);e>Gc&&vo.splice(e,1)}function ZA(r){Gt(r)?py.push(...r):(!$f||!$f.includes(r,r.allowRecurse?ng+1:ng))&&py.push(r),Cq()}function Dz(r,e,i=cw?Gc+1:0){for(;i<vo.length;i++){const n=vo[i];if(n&&n.pre){if(r&&n.id!==r.uid)continue;vo.splice(i,1),i--,n()}}}function KA(r){if(py.length){const e=[...new Set(py)].sort((i,n)=>uw(i)-uw(n));if(py.length=0,$f){$f.push(...e);return}for($f=e,ng=0;ng<$f.length;ng++)$f[ng]();$f=null,ng=0}}const uw=r=>r.id==null?1/0:r.id,Ywe=(r,e)=>{const i=uw(r)-uw(e);if(i===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return i};function Tq(r){o4=!1,cw=!0,vo.sort(Ywe);try{for(Gc=0;Gc<vo.length;Gc++){const e=vo[Gc];e&&e.active!==!1&&yd(e,null,14)}}finally{Gc=0,vo.length=0,KA(),cw=!1,HL=null,(vo.length||py.length)&&Tq()}}let $v,bC=[];function Aq(r,e){var i,n;$v=r,$v?($v.enabled=!0,bC.forEach(({event:s,args:o})=>$v.emit(s,...o)),bC=[]):typeof window<"u"&&window.HTMLElement&&!((n=(i=window.navigator)==null?void 0:i.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{Aq(o,e)}),setTimeout(()=>{$v||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,bC=[])},3e3)):bC=[]}function qwe(r,e,...i){if(r.isUnmounted)return;const n=r.vnode.props||Nn;let s=i;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in n){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:p,trim:m}=n[d]||Nn;m&&(s=i.map(g=>Or(g)?g.trim():g)),p&&(s=i.map(jA))}let l,c=n[l=Ib(e)]||n[l=Ib(qo(e))];!c&&o&&(c=n[l=Ib(cl(e))]),c&&_l(c,r,6,s);const u=n[l+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[l])return;r.emitted[l]=!0,_l(u,r,6,s)}}function Eq(r,e,i=!1){const n=e.emitsCache,s=n.get(r);if(s!==void 0)return s;const o=r.emits;let a={},l=!1;if(!_i(r)){const c=u=>{const d=Eq(u,e,!0);d&&(l=!0,dr(a,d))};!i&&e.mixins.length&&e.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}return!o&&!l?(Wn(r)&&n.set(r,null),null):(Gt(o)?o.forEach(c=>a[c]=null):dr(a,o),Wn(r)&&n.set(r,a),a)}function $M(r,e){return!r||!AO(e)?!1:(e=e.slice(2).replace(/Once$/,""),yn(r,e[0].toLowerCase()+e.slice(1))||yn(r,cl(e))||yn(r,e))}let us=null,UM=null;function dw(r){const e=us;return us=r,UM=r&&r.type.__scopeId||null,e}function O_(r){UM=r}function S_(){UM=null}const Zwe=r=>Je;function Je(r,e=us,i){if(!e||r._n)return r;const n=(...s)=>{n._d&&p4(-1);const o=dw(e);let a;try{a=r(...s)}finally{dw(o),n._d&&p4(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function iA(r){const{type:e,vnode:i,proxy:n,withProxy:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,props:p,data:m,setupState:g,ctx:y,inheritAttrs:_}=r,x=dw(r);let O,S;try{if(i.shapeFlag&4){const C=s||n,M=C;O=hl(u.call(M,C,d,p,g,m,y)),S=l}else{const C=e;O=hl(C.length>1?C(p,{attrs:l,slots:a,emit:c}):C(p,null)),S=e.props?l:Jwe(l)}}catch(C){Db.length=0,d0(C,r,1),O=ke(io)}let w=O;if(S&&_!==!1){const C=Object.keys(S),{shapeFlag:M}=w;C.length&&M&7&&(o&&C.some(IL)&&(S=eOe(S,o)),w=lu(w,S,!1,!0))}return i.dirs&&(w=lu(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&(w.transition=i.transition),O=w,dw(x),O}function Kwe(r,e=!0){let i;for(let n=0;n<r.length;n++){const s=r[n];if(wp(s)){if(s.type!==io||s.children==="v-if"){if(i)return;i=s}}else return}return i}const Jwe=r=>{let e;for(const i in r)(i==="class"||i==="style"||AO(i))&&((e||(e={}))[i]=r[i]);return e},eOe=(r,e)=>{const i={};for(const n in r)(!IL(n)||!(n.slice(9)in e))&&(i[n]=r[n]);return i};function tOe(r,e,i){const{props:n,children:s,component:o}=r,{props:a,children:l,patchFlag:c}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&c>=0){if(c&1024)return!0;if(c&16)return n?Lz(n,a,u):!!a;if(c&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(a[m]!==n[m]&&!$M(u,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?Lz(n,a,u):!0:!!a;return!1}function Lz(r,e,i){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(e[o]!==r[o]&&!$M(i,o))return!0}return!1}function QL({vnode:r,parent:e},i){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=e.vnode).el=i,e=e.parent;else break}}const jL="components",iOe="directives";function St(r,e){return YL(jL,r,!0,e)||r}const Mq=Symbol.for("v-ndc");function Pq(r){return Or(r)?YL(jL,r,!1)||r:r||Mq}function nOe(r){return YL(iOe,r)}function YL(r,e,i=!0,n=!1){const s=us||Os;if(s){const o=s.type;if(r===jL){const l=_4(o,!1);if(l&&(l===e||l===qo(e)||l===EO(qo(e))))return o}const a=Nz(s[r]||o[r],e)||Nz(s.appContext[r],e);return!a&&n?o:a}}function Nz(r,e){return r&&(r[e]||r[qo(e)]||r[EO(qo(e))])}const kq=r=>r.__isSuspense;let a4=0;const rOe={name:"Suspense",__isSuspense:!0,process(r,e,i,n,s,o,a,l,c,u){if(r==null)sOe(e,i,n,s,o,a,l,c,u);else{if(o&&o.deps>0&&!r.suspense.isInFallback){e.suspense=r.suspense,e.suspense.vnode=e,e.el=r.el;return}oOe(r,e,i,n,s,a,l,c,u)}},hydrate:aOe,create:qL,normalize:lOe},Iq=rOe;function fw(r,e){const i=r.props&&r.props[e];_i(i)&&i()}function sOe(r,e,i,n,s,o,a,l,c){const{p:u,o:{createElement:d}}=c,p=d("div"),m=r.suspense=qL(r,s,n,e,p,i,o,a,l,c);u(null,m.pendingBranch=r.ssContent,p,null,n,m,o,a),m.deps>0?(fw(r,"onPending"),fw(r,"onFallback"),u(null,r.ssFallback,e,i,n,null,o,a),my(m,r.ssFallback)):m.resolve(!1,!0)}function oOe(r,e,i,n,s,o,a,l,{p:c,um:u,o:{createElement:d}}){const p=e.suspense=r.suspense;p.vnode=e,e.el=r.el;const m=e.ssContent,g=e.ssFallback,{activeBranch:y,pendingBranch:_,isInFallback:x,isHydrating:O}=p;if(_)p.pendingBranch=m,Yh(m,_)?(c(_,m,p.hiddenContainer,null,s,p,o,a,l),p.deps<=0?p.resolve():x&&(O||(c(y,g,i,n,s,null,o,a,l),my(p,g)))):(p.pendingId=a4++,O?(p.isHydrating=!1,p.activeBranch=_):u(_,s,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),x?(c(null,m,p.hiddenContainer,null,s,p,o,a,l),p.deps<=0?p.resolve():(c(y,g,i,n,s,null,o,a,l),my(p,g))):y&&Yh(m,y)?(c(y,m,i,n,s,p,o,a,l),p.resolve(!0)):(c(null,m,p.hiddenContainer,null,s,p,o,a,l),p.deps<=0&&p.resolve()));else if(y&&Yh(m,y))c(y,m,i,n,s,p,o,a,l),my(p,m);else if(fw(e,"onPending"),p.pendingBranch=m,m.shapeFlag&512?p.pendingId=m.component.suspenseId:p.pendingId=a4++,c(null,m,p.hiddenContainer,null,s,p,o,a,l),p.deps<=0)p.resolve();else{const{timeout:S,pendingId:w}=p;S>0?setTimeout(()=>{p.pendingId===w&&p.fallback(g)},S):S===0&&p.fallback(g)}}function qL(r,e,i,n,s,o,a,l,c,u,d=!1){const{p,m,um:g,n:y,o:{parentNode:_,remove:x}}=u;let O;const S=hOe(r);S&&e&&e.pendingBranch&&(O=e.pendingId,e.deps++);const w=r.props?YA(r.props.timeout):void 0,C=o,M={vnode:r,parent:e,parentComponent:i,namespace:a,container:n,hiddenContainer:s,deps:0,pendingId:a4++,timeout:typeof w=="number"?w:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(P=!1,R=!1){const{vnode:k,activeBranch:I,pendingBranch:A,pendingId:D,effects:V,parentComponent:B,container:L}=M;let F=!1;M.isHydrating?M.isHydrating=!1:P||(F=I&&A.transition&&A.transition.mode==="out-in",F&&(I.transition.afterLeave=()=>{D===M.pendingId&&(m(A,L,o===C?y(I):o,0),ZA(V))}),I&&(_(I.el)!==M.hiddenContainer&&(o=y(I)),g(I,B,M,!0)),F||m(A,L,o,0)),my(M,A),M.pendingBranch=null,M.isInFallback=!1;let $=M.parent,z=!1;for(;$;){if($.pendingBranch){$.effects.push(...V),z=!0;break}$=$.parent}!z&&!F&&ZA(V),M.effects=[],S&&e&&e.pendingBranch&&O===e.pendingId&&(e.deps--,e.deps===0&&!R&&e.resolve()),fw(k,"onResolve")},fallback(P){if(!M.pendingBranch)return;const{vnode:R,activeBranch:k,parentComponent:I,container:A,namespace:D}=M;fw(R,"onFallback");const V=y(k),B=()=>{M.isInFallback&&(p(null,P,A,V,I,null,D,l,c),my(M,P))},L=P.transition&&P.transition.mode==="out-in";L&&(k.transition.afterLeave=B),M.isInFallback=!0,g(k,I,null,!0),L||B()},move(P,R,k){M.activeBranch&&m(M.activeBranch,P,R,k),M.container=P},next(){return M.activeBranch&&y(M.activeBranch)},registerDep(P,R){const k=!!M.pendingBranch;k&&M.deps++;const I=P.vnode.el;P.asyncDep.catch(A=>{d0(A,P,0)}).then(A=>{if(P.isUnmounted||M.isUnmounted||M.pendingId!==P.suspenseId)return;P.asyncResolved=!0;const{vnode:D}=P;v4(P,A,!1),I&&(D.el=I);const V=!I&&P.subTree.el;R(P,D,_(I||P.subTree.el),I?null:y(P.subTree),M,a,c),V&&x(V),QL(P,D.el),k&&--M.deps===0&&M.resolve()})},unmount(P,R){M.isUnmounted=!0,M.activeBranch&&g(M.activeBranch,i,P,R),M.pendingBranch&&g(M.pendingBranch,i,P,R)}};return M}function aOe(r,e,i,n,s,o,a,l,c){const u=e.suspense=qL(e,n,i,r.parentNode,document.createElement("div"),null,s,o,a,l,!0),d=c(r,u.pendingBranch=e.ssContent,i,u,o,a);return u.deps===0&&u.resolve(!1,!0),d}function lOe(r){const{shapeFlag:e,children:i}=r,n=e&32;r.ssContent=Vz(n?i.default:i),r.ssFallback=n?Vz(i.fallback):ke(io)}function Vz(r){let e;if(_i(r)){const i=Qg&&r._c;i&&(r._d=!1,ci()),r=r(),i&&(r._d=!0,e=Sa,mZ())}return Gt(r)&&(r=Kwe(r)),r=hl(r),e&&!r.dynamicChildren&&(r.dynamicChildren=e.filter(i=>i!==r)),r}function Rq(r,e){e&&e.pendingBranch?Gt(r)?e.effects.push(...r):e.effects.push(r):ZA(r)}function my(r,e){r.activeBranch=e;const{vnode:i,parentComponent:n}=r;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;i.el=s,n&&n.subTree===i&&(n.vnode.el=s,QL(n,s))}function hOe(r){const e=r.props&&r.props.suspensible;return e!=null&&e!==!1}const Bq=Symbol.for("v-scx"),Dq=()=>vy(Bq);function _d(r,e){return PO(r,null,e)}function Lq(r,e){return PO(r,null,{flush:"post"})}function Nq(r,e){return PO(r,null,{flush:"sync"})}const wC={};function tn(r,e,i){return PO(r,e,i)}function PO(r,e,{immediate:i,deep:n,flush:s,once:o,onTrack:a,onTrigger:l}=Nn){if(e&&o){const P=e;e=(...R)=>{P(...R),M()}}const c=Os,u=P=>n===!0?P:hg(P,n===!1?1:void 0);let d,p=!1,m=!1;if(ps(r)?(d=()=>r.value,p=lw(r)):dy(r)?(d=()=>u(r),p=!0):Gt(r)?(m=!0,p=r.some(P=>dy(P)||lw(P)),d=()=>r.map(P=>{if(ps(P))return P.value;if(dy(P))return u(P);if(_i(P))return yd(P,c,2)})):_i(r)?e?d=()=>yd(r,c,2):d=()=>(g&&g(),_l(r,c,3,[y])):d=Oa,e&&n){const P=d;d=()=>hg(P())}let g,y=P=>{g=w.onStop=()=>{yd(P,c,4),g=w.onStop=void 0}},_;if(RO)if(y=Oa,e?i&&_l(e,c,3,[d(),m?[]:void 0,y]):d(),s==="sync"){const P=Dq();_=P.__watcherHandles||(P.__watcherHandles=[])}else return Oa;let x=m?new Array(r.length).fill(wC):wC;const O=()=>{if(!(!w.active||!w.dirty))if(e){const P=w.run();(n||p||(m?P.some((R,k)=>ac(R,x[k])):ac(P,x)))&&(g&&g(),_l(e,c,3,[P,x===wC?void 0:m&&x[0]===wC?[]:x,y]),x=P)}else w.run()};O.allowRecurse=!!e;let S;s==="sync"?S=O:s==="post"?S=()=>Zs(O,c&&c.suspense):(O.pre=!0,c&&(O.id=c.uid),S=()=>FM(O));const w=new Ly(d,Oa,S),C=DM(),M=()=>{w.stop(),C&&RL(C.effects,w)};return e?i?O():x=w.run():s==="post"?Zs(w.run.bind(w),c&&c.suspense):w.run(),_&&_.push(M),M}function cOe(r,e,i){const n=this.proxy,s=Or(r)?r.includes(".")?Vq(n,r):()=>n[r]:r.bind(n,n);let o;_i(e)?o=e:(o=e.handler,i=e);const a=jg(this),l=PO(s,o.bind(n),i);return a(),l}function Vq(r,e){const i=e.split(".");return()=>{let n=r;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function hg(r,e=1/0,i){if(e<=0||!Wn(r)||r.__v_skip||(i=i||new Set,i.has(r)))return r;if(i.add(r),e--,ps(r))hg(r.value,e,i);else if(Gt(r))for(let n=0;n<r.length;n++)hg(r[n],e,i);else if(c0(r)||hy(r))r.forEach(n=>{hg(n,e,i)});else if(JY(r))for(const n in r)hg(r[n],e,i);return r}function uOe(r,e){if(us===null)return r;const i=HM(us)||us.proxy,n=r.dirs||(r.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=Nn]=e[s];o&&(_i(o)&&(o={mounted:o,updated:o}),o.deep&&hg(a),n.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return r}function Uc(r,e,i,n){const s=r.dirs,o=e&&e.dirs;for(let a=0;a<s.length;a++){const l=s[a];o&&(l.oldValue=o[a].value);let c=l.dir[n];c&&(zp(),_l(c,i,8,[r.el,l,r,e]),Xp())}}const Uf=Symbol("_leaveCb"),OC=Symbol("_enterCb");function ZL(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return nr(()=>{r.isMounted=!0}),IO(()=>{r.isUnmounting=!0}),r}const Bl=[Function,Array],KL={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bl,onEnter:Bl,onAfterEnter:Bl,onEnterCancelled:Bl,onBeforeLeave:Bl,onLeave:Bl,onAfterLeave:Bl,onLeaveCancelled:Bl,onBeforeAppear:Bl,onAppear:Bl,onAfterAppear:Bl,onAppearCancelled:Bl},dOe={name:"BaseTransition",props:KL,setup(r,{slots:e}){const i=Ol(),n=ZL();return()=>{const s=e.default&&zM(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==io){o=m;break}}const a=vn(r),{mode:l}=a;if(n.isLeaving)return L3(o);const c=Fz(o);if(!c)return L3(o);const u=Vy(c,a,n,i);Gg(c,u);const d=i.subTree,p=d&&Fz(d);if(p&&p.type!==io&&!Yh(c,p)){const m=Vy(p,a,n,i);if(Gg(p,m),l==="out-in"&&c.type!==io)return n.isLeaving=!0,m.afterLeave=()=>{n.isLeaving=!1,i.update.active!==!1&&(i.effect.dirty=!0,i.update())},L3(o);l==="in-out"&&c.type!==io&&(m.delayLeave=(g,y,_)=>{const x=$q(n,p);x[String(p.key)]=p,g[Uf]=()=>{y(),g[Uf]=void 0,delete u.delayedLeave},u.delayedLeave=_})}return o}}},Fq=dOe;function $q(r,e){const{leavingVNodes:i}=r;let n=i.get(e.type);return n||(n=Object.create(null),i.set(e.type,n)),n}function Vy(r,e,i,n){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:_,onAppear:x,onAfterAppear:O,onAppearCancelled:S}=e,w=String(r.key),C=$q(i,r),M=(k,I)=>{k&&_l(k,n,9,I)},P=(k,I)=>{const A=I[1];M(k,I),Gt(k)?k.every(D=>D.length<=1)&&A():k.length<=1&&A()},R={mode:o,persisted:a,beforeEnter(k){let I=l;if(!i.isMounted)if(s)I=_||l;else return;k[Uf]&&k[Uf](!0);const A=C[w];A&&Yh(r,A)&&A.el[Uf]&&A.el[Uf](),M(I,[k])},enter(k){let I=c,A=u,D=d;if(!i.isMounted)if(s)I=x||c,A=O||u,D=S||d;else return;let V=!1;const B=k[OC]=L=>{V||(V=!0,L?M(D,[k]):M(A,[k]),R.delayedLeave&&R.delayedLeave(),k[OC]=void 0)};I?P(I,[k,B]):B()},leave(k,I){const A=String(r.key);if(k[OC]&&k[OC](!0),i.isUnmounting)return I();M(p,[k]);let D=!1;const V=k[Uf]=B=>{D||(D=!0,I(),B?M(y,[k]):M(g,[k]),k[Uf]=void 0,C[A]===r&&delete C[A])};C[A]=r,m?P(m,[k,V]):V()},clone(k){return Vy(k,e,i,n)}};return R}function L3(r){if(kO(r))return r=lu(r),r.children=null,r}function Fz(r){if(!kO(r))return r;const{shapeFlag:e,children:i}=r;if(i){if(e&16)return i[0];if(e&32&&_i(i.default))return i.default()}}function Gg(r,e){r.shapeFlag&6&&r.component?Gg(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function zM(r,e=!1,i){let n=[],s=0;for(let o=0;o<r.length;o++){let a=r[o];const l=i==null?a.key:String(i)+String(a.key!=null?a.key:o);a.type===Fn?(a.patchFlag&128&&s++,n=n.concat(zM(a.children,e,l))):(e||a.type!==io)&&n.push(l!=null?lu(a,{key:l}):a)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Td(r,e){return _i(r)?dr({name:r.name},e,{setup:r}):r}const wg=r=>!!r.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function fOe(r){_i(r)&&(r={loader:r});const{loader:e,loadingComponent:i,errorComponent:n,delay:s=200,timeout:o,suspensible:a=!0,onError:l}=r;let c=null,u,d=0;const p=()=>(d++,c=null,m()),m=()=>{let g;return c||(g=c=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((_,x)=>{l(y,()=>_(p()),()=>x(y),d+1)});throw y}).then(y=>g!==c&&c?c:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),u=y,y)))};return Td({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return u},setup(){const g=Os;if(u)return()=>N3(u,g);const y=S=>{c=null,d0(S,g,13,!n)};if(a&&g.suspense||RO)return m().then(S=>()=>N3(S,g)).catch(S=>(y(S),()=>n?ke(n,{error:S}):null));const _=lt(!1),x=lt(),O=lt(!!s);return s&&setTimeout(()=>{O.value=!1},s),o!=null&&setTimeout(()=>{if(!_.value&&!x.value){const S=new Error(`Async component timed out after ${o}ms.`);y(S),x.value=S}},o),m().then(()=>{_.value=!0,g.parent&&kO(g.parent.vnode)&&(g.parent.effect.dirty=!0,FM(g.parent.update))}).catch(S=>{y(S),x.value=S}),()=>{if(_.value&&u)return N3(u,g);if(x.value&&n)return ke(n,{error:x.value});if(i&&!O.value)return ke(i)}}})}function N3(r,e){const{ref:i,props:n,children:s,ce:o}=e.vnode,a=ke(r,n,s);return a.ref=i,a.ce=o,delete e.vnode.ce,a}const kO=r=>r.type.__isKeepAlive,pOe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(r,{slots:e}){const i=Ol(),n=i.ctx;if(!n.renderer)return()=>{const S=e.default&&e.default();return S&&S.length===1?S[0]:S};const s=new Map,o=new Set;let a=null;const l=i.suspense,{renderer:{p:c,m:u,um:d,o:{createElement:p}}}=n,m=p("div");n.activate=(S,w,C,M,P)=>{const R=S.component;u(S,w,C,0,l),c(R.vnode,S,w,C,R,l,M,S.slotScopeIds,P),Zs(()=>{R.isDeactivated=!1,R.a&&uy(R.a);const k=S.props&&S.props.onVnodeMounted;k&&ya(k,R.parent,S)},l)},n.deactivate=S=>{const w=S.component;u(S,m,null,1,l),Zs(()=>{w.da&&uy(w.da);const C=S.props&&S.props.onVnodeUnmounted;C&&ya(C,w.parent,S),w.isDeactivated=!0},l)};function g(S){V3(S),d(S,i,l,!0)}function y(S){s.forEach((w,C)=>{const M=_4(w.type);M&&(!S||!S(M))&&_(C)})}function _(S){const w=s.get(S);!a||!Yh(w,a)?g(w):a&&V3(a),s.delete(S),o.delete(S)}tn(()=>[r.include,r.exclude],([S,w])=>{S&&y(C=>hb(S,C)),w&&y(C=>!hb(w,C))},{flush:"post",deep:!0});let x=null;const O=()=>{x!=null&&s.set(x,F3(i.subTree))};return nr(O),WM(O),IO(()=>{s.forEach(S=>{const{subTree:w,suspense:C}=i,M=F3(w);if(S.type===M.type&&S.key===M.key){V3(M);const P=M.component.da;P&&Zs(P,C);return}g(S)})}),()=>{if(x=null,!e.default)return null;const S=e.default(),w=S[0];if(S.length>1)return a=null,S;if(!wp(w)||!(w.shapeFlag&4)&&!(w.shapeFlag&128))return a=null,w;let C=F3(w);const M=C.type,P=_4(wg(C)?C.type.__asyncResolved||{}:M),{include:R,exclude:k,max:I}=r;if(R&&(!P||!hb(R,P))||k&&P&&hb(k,P))return a=C,w;const A=C.key==null?M:C.key,D=s.get(A);return C.el&&(C=lu(C),w.shapeFlag&128&&(w.ssContent=C)),x=A,D?(C.el=D.el,C.component=D.component,C.transition&&Gg(C,C.transition),C.shapeFlag|=512,o.delete(A),o.add(A)):(o.add(A),I&&o.size>parseInt(I,10)&&_(o.values().next().value)),C.shapeFlag|=256,a=C,kq(w.type)?w:C}}},mOe=pOe;function hb(r,e){return Gt(r)?r.some(i=>hb(i,e)):Or(r)?r.split(",").includes(e):Ybe(r)?r.test(e):!1}function Uq(r,e){Xq(r,"a",e)}function zq(r,e){Xq(r,"da",e)}function Xq(r,e,i=Os){const n=r.__wdc||(r.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return r()});if(XM(e,n,i),i){let s=i.parent;for(;s&&s.parent;)kO(s.parent.vnode)&&gOe(n,e,i,s),s=s.parent}}function gOe(r,e,i,n){const s=XM(e,r,n,!0);ta(()=>{RL(n[e],s)},i)}function V3(r){r.shapeFlag&=-257,r.shapeFlag&=-513}function F3(r){return r.shapeFlag&128?r.ssContent:r}function XM(r,e,i=Os,n=!1){if(i){const s=i[r]||(i[r]=[]),o=e.__weh||(e.__weh=(...a)=>{if(i.isUnmounted)return;zp();const l=jg(i),c=_l(e,i,r,a);return l(),Xp(),c});return n?s.unshift(o):s.push(o),o}}const Ud=r=>(e,i=Os)=>(!RO||r==="sp")&&XM(r,(...n)=>e(...n),i),Wq=Ud("bm"),nr=Ud("m"),Gq=Ud("bu"),WM=Ud("u"),IO=Ud("bum"),ta=Ud("um"),Hq=Ud("sp"),Qq=Ud("rtg"),jq=Ud("rtc");function Yq(r,e=Os){XM("ec",r,e)}function au(r,e,i,n){let s;const o=i&&i[n];if(Gt(r)||Or(r)){s=new Array(r.length);for(let a=0,l=r.length;a<l;a++)s[a]=e(r[a],a,void 0,o&&o[a])}else if(typeof r=="number"){s=new Array(r);for(let a=0;a<r;a++)s[a]=e(a+1,a,void 0,o&&o[a])}else if(Wn(r))if(r[Symbol.iterator])s=Array.from(r,(a,l)=>e(a,l,void 0,o&&o[l]));else{const a=Object.keys(r);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(r[u],u,l,o&&o[l])}}else s=[];return i&&(i[n]=s),s}function vOe(r,e){for(let i=0;i<e.length;i++){const n=e[i];if(Gt(n))for(let s=0;s<n.length;s++)r[n[s].name]=n[s].fn;else n&&(r[n.name]=n.key?(...s)=>{const o=n.fn(...s);return o&&(o.key=n.key),o}:n.fn)}return r}function qq(r,e,i={},n,s){if(us.isCE||us.parent&&wg(us.parent)&&us.parent.isCE)return e!=="default"&&(i.name=e),ke("slot",i,n&&n());let o=r[e];o&&o._c&&(o._d=!1),ci();const a=o&&Zq(o(i)),l=Es(Fn,{key:i.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&r._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function Zq(r){return r.some(e=>wp(e)?!(e.type===io||e.type===Fn&&!Zq(e.children)):!0)?r:null}function yOe(r,e){const i={};for(const n in r)i[e&&/[A-Z]/.test(n)?`on:${n}`:Ib(n)]=r[n];return i}const l4=r=>r?xZ(r)?HM(r)||r.proxy:l4(r.parent):null,Rb=dr(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>l4(r.parent),$root:r=>l4(r.root),$emit:r=>r.emit,$options:r=>eN(r),$forceUpdate:r=>r.f||(r.f=()=>{r.effect.dirty=!0,FM(r.update)}),$nextTick:r=>r.n||(r.n=w_.bind(r.proxy)),$watch:r=>cOe.bind(r)}),$3=(r,e)=>r!==Nn&&!r.__isScriptSetup&&yn(r,e),h4={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:o,accessCache:a,type:l,appContext:c}=r;let u;if(e[0]!=="$"){const g=a[e];if(g!==void 0)switch(g){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return o[e]}else{if($3(n,e))return a[e]=1,n[e];if(s!==Nn&&yn(s,e))return a[e]=2,s[e];if((u=r.propsOptions[0])&&yn(u,e))return a[e]=3,o[e];if(i!==Nn&&yn(i,e))return a[e]=4,i[e];c4&&(a[e]=0)}}const d=Rb[e];let p,m;if(d)return e==="$attrs"&&Ba(r.attrs,"get",""),d(r);if((p=l.__cssModules)&&(p=p[e]))return p;if(i!==Nn&&yn(i,e))return a[e]=4,i[e];if(m=c.config.globalProperties,yn(m,e))return m[e]},set({_:r},e,i){const{data:n,setupState:s,ctx:o}=r;return $3(s,e)?(s[e]=i,!0):n!==Nn&&yn(n,e)?(n[e]=i,!0):yn(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=i,!0)},has({_:{data:r,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:o}},a){let l;return!!i[a]||r!==Nn&&yn(r,a)||$3(e,a)||(l=o[0])&&yn(l,a)||yn(n,a)||yn(Rb,a)||yn(s.config.globalProperties,a)},defineProperty(r,e,i){return i.get!=null?r._.accessCache[e]=0:yn(i,"value")&&this.set(r,e,i.value,null),Reflect.defineProperty(r,e,i)}},_Oe=dr({},h4,{get(r,e){if(e!==Symbol.unscopables)return h4.get(r,e,r)},has(r,e){return e[0]!=="_"&&!ewe(e)}});function xOe(){return null}function bOe(){return null}function wOe(r){}function OOe(r){}function SOe(){return null}function COe(){}function TOe(r,e){return null}function JL(){return Jq().slots}function Kq(){return Jq().attrs}function Jq(){const r=Ol();return r.setupContext||(r.setupContext=OZ(r))}function pw(r){return Gt(r)?r.reduce((e,i)=>(e[i]=null,e),{}):r}function AOe(r,e){const i=pw(r);for(const n in e){if(n.startsWith("__skip"))continue;let s=i[n];s?Gt(s)||_i(s)?s=i[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=i[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return i}function EOe(r,e){return!r||!e?r||e:Gt(r)&&Gt(e)?r.concat(e):dr({},pw(r),pw(e))}function MOe(r,e){const i={};for(const n in r)e.includes(n)||Object.defineProperty(i,n,{enumerable:!0,get:()=>r[n]});return i}function nA(r){const e=Ol();let i=r();return g4(),BL(i)&&(i=i.catch(n=>{throw jg(e),n})),[i,()=>jg(e)]}let c4=!0;function POe(r){const e=eN(r),i=r.proxy,n=r.ctx;c4=!1,e.beforeCreate&&$z(e.beforeCreate,r,"bc");const{data:s,computed:o,methods:a,watch:l,provide:c,inject:u,created:d,beforeMount:p,mounted:m,beforeUpdate:g,updated:y,activated:_,deactivated:x,beforeDestroy:O,beforeUnmount:S,destroyed:w,unmounted:C,render:M,renderTracked:P,renderTriggered:R,errorCaptured:k,serverPrefetch:I,expose:A,inheritAttrs:D,components:V,directives:B,filters:L}=e;if(u&&kOe(u,n,null),a)for(const z in a){const H=a[z];_i(H)&&(n[z]=H.bind(i))}if(s){const z=s.call(i,i);Wn(z)&&(r.data=u0(z))}if(c4=!0,o)for(const z in o){const H=o[z],K=_i(H)?H.bind(i,i):_i(H.get)?H.get.bind(i,i):Oa,J=!_i(H)&&_i(H.set)?H.set.bind(i):Oa,ne=tr({get:K,set:J});Object.defineProperty(n,z,{enumerable:!0,configurable:!0,get:()=>ne.value,set:be=>ne.value=be})}if(l)for(const z in l)eZ(l[z],n,i,z);if(c){const z=_i(c)?c.call(i):c;Reflect.ownKeys(z).forEach(H=>{mw(H,z[H])})}d&&$z(d,r,"c");function $(z,H){Gt(H)?H.forEach(K=>z(K.bind(i))):H&&z(H.bind(i))}if($(Wq,p),$(nr,m),$(Gq,g),$(WM,y),$(Uq,_),$(zq,x),$(Yq,k),$(jq,P),$(Qq,R),$(IO,S),$(ta,C),$(Hq,I),Gt(A))if(A.length){const z=r.exposed||(r.exposed={});A.forEach(H=>{Object.defineProperty(z,H,{get:()=>i[H],set:K=>i[H]=K})})}else r.exposed||(r.exposed={});M&&r.render===Oa&&(r.render=M),D!=null&&(r.inheritAttrs=D),V&&(r.components=V),B&&(r.directives=B)}function kOe(r,e,i=Oa){Gt(r)&&(r=u4(r));for(const n in r){const s=r[n];let o;Wn(s)?"default"in s?o=vy(s.from||n,s.default,!0):o=vy(s.from||n):o=vy(s),ps(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[n]=o}}function $z(r,e,i){_l(Gt(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,i)}function eZ(r,e,i,n){const s=n.includes(".")?Vq(i,n):()=>i[n];if(Or(r)){const o=e[r];_i(o)&&tn(s,o)}else if(_i(r))tn(s,r.bind(i));else if(Wn(r))if(Gt(r))r.forEach(o=>eZ(o,e,i,n));else{const o=_i(r.handler)?r.handler.bind(i):e[r.handler];_i(o)&&tn(s,o,r)}}function eN(r){const e=r.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=r.appContext,l=o.get(e);let c;return l?c=l:!s.length&&!i&&!n?c=e:(c={},s.length&&s.forEach(u=>JA(c,u,a,!0)),JA(c,e,a)),Wn(e)&&o.set(e,c),c}function JA(r,e,i,n=!1){const{mixins:s,extends:o}=e;o&&JA(r,o,i,!0),s&&s.forEach(a=>JA(r,a,i,!0));for(const a in e)if(!(n&&a==="expose")){const l=IOe[a]||i&&i[a];r[a]=l?l(r[a],e[a]):e[a]}return r}const IOe={data:Uz,props:zz,emits:zz,methods:cb,computed:cb,beforeCreate:zo,created:zo,beforeMount:zo,mounted:zo,beforeUpdate:zo,updated:zo,beforeDestroy:zo,beforeUnmount:zo,destroyed:zo,unmounted:zo,activated:zo,deactivated:zo,errorCaptured:zo,serverPrefetch:zo,components:cb,directives:cb,watch:BOe,provide:Uz,inject:ROe};function Uz(r,e){return e?r?function(){return dr(_i(r)?r.call(this,this):r,_i(e)?e.call(this,this):e)}:e:r}function ROe(r,e){return cb(u4(r),u4(e))}function u4(r){if(Gt(r)){const e={};for(let i=0;i<r.length;i++)e[r[i]]=r[i];return e}return r}function zo(r,e){return r?[...new Set([].concat(r,e))]:e}function cb(r,e){return r?dr(Object.create(null),r,e):e}function zz(r,e){return r?Gt(r)&&Gt(e)?[...new Set([...r,...e])]:dr(Object.create(null),pw(r),pw(e??{})):e}function BOe(r,e){if(!r)return e;if(!e)return r;const i=dr(Object.create(null),r);for(const n in e)i[n]=zo(r[n],e[n]);return i}function tZ(){return{app:null,config:{isNativeTag:Qbe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DOe=0;function LOe(r,e){return function(n,s=null){_i(n)||(n=dr({},n)),s!=null&&!Wn(s)&&(s=null);const o=tZ(),a=new WeakSet;let l=!1;const c=o.app={_uid:DOe++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:TZ,get config(){return o.config},set config(u){},use(u,...d){return a.has(u)||(u&&_i(u.install)?(a.add(u),u.install(c,...d)):_i(u)&&(a.add(u),u(c,...d))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,d){return d?(o.components[u]=d,c):o.components[u]},directive(u,d){return d?(o.directives[u]=d,c):o.directives[u]},mount(u,d,p){if(!l){const m=ke(n,s);return m.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),d&&e?e(m,u):r(m,u,p),l=!0,c._container=u,u.__vue_app__=c,HM(m.component)||m.component.proxy}},unmount(){l&&(r(null,c._container),delete c._container.__vue_app__)},provide(u,d){return o.provides[u]=d,c},runWithContext(u){const d=gy;gy=c;try{return u()}finally{gy=d}}};return c}}let gy=null;function mw(r,e){if(Os){let i=Os.provides;const n=Os.parent&&Os.parent.provides;n===i&&(i=Os.provides=Object.create(n)),i[r]=e}}function vy(r,e,i=!1){const n=Os||us;if(n||gy){const s=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:gy._context.provides;if(s&&r in s)return s[r];if(arguments.length>1)return i&&_i(e)?e.call(n&&n.proxy):e}}function NOe(){return!!(Os||us||gy)}const iZ={},nZ=()=>Object.create(iZ),rZ=r=>Object.getPrototypeOf(r)===iZ;function VOe(r,e,i,n=!1){const s={},o=nZ();r.propsDefaults=Object.create(null),sZ(r,e,s,o);for(const a in r.propsOptions[0])a in s||(s[a]=void 0);i?r.props=n?s:_q(s):r.type.props?r.props=s:r.props=o,r.attrs=o}function FOe(r,e,i,n){const{props:s,attrs:o,vnode:{patchFlag:a}}=r,l=vn(s),[c]=r.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=r.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if($M(r.emitsOptions,m))continue;const g=e[m];if(c)if(yn(o,m))g!==o[m]&&(o[m]=g,u=!0);else{const y=qo(m);s[y]=d4(c,l,y,g,r,!1)}else g!==o[m]&&(o[m]=g,u=!0)}}}else{sZ(r,e,s,o)&&(u=!0);let d;for(const p in l)(!e||!yn(e,p)&&((d=cl(p))===p||!yn(e,d)))&&(c?i&&(i[p]!==void 0||i[d]!==void 0)&&(s[p]=d4(c,l,p,void 0,r,!0)):delete s[p]);if(o!==l)for(const p in o)(!e||!yn(e,p))&&(delete o[p],u=!0)}u&&vd(r.attrs,"set","")}function sZ(r,e,i,n){const[s,o]=r.propsOptions;let a=!1,l;if(e)for(let c in e){if(cy(c))continue;const u=e[c];let d;s&&yn(s,d=qo(c))?!o||!o.includes(d)?i[d]=u:(l||(l={}))[d]=u:$M(r.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,a=!0)}if(o){const c=vn(i),u=l||Nn;for(let d=0;d<o.length;d++){const p=o[d];i[p]=d4(s,c,p,u[p],r,!yn(u,p))}}return a}function d4(r,e,i,n,s,o){const a=r[i];if(a!=null){const l=yn(a,"default");if(l&&n===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&_i(c)){const{propsDefaults:u}=s;if(i in u)n=u[i];else{const d=jg(s);n=u[i]=c.call(null,e),d()}}else n=c}a[0]&&(o&&!l?n=!1:a[1]&&(n===""||n===cl(i))&&(n=!0))}return n}function oZ(r,e,i=!1){const n=e.propsCache,s=n.get(r);if(s)return s;const o=r.props,a={},l=[];let c=!1;if(!_i(r)){const d=p=>{c=!0;const[m,g]=oZ(p,e,!0);dr(a,m),g&&l.push(...g)};!i&&e.mixins.length&&e.mixins.forEach(d),r.extends&&d(r.extends),r.mixins&&r.mixins.forEach(d)}if(!o&&!c)return Wn(r)&&n.set(r,ly),ly;if(Gt(o))for(let d=0;d<o.length;d++){const p=qo(o[d]);Xz(p)&&(a[p]=Nn)}else if(o)for(const d in o){const p=qo(d);if(Xz(p)){const m=o[d],g=a[p]=Gt(m)||_i(m)?{type:m}:dr({},m);if(g){const y=Hz(Boolean,g.type),_=Hz(String,g.type);g[0]=y>-1,g[1]=_<0||y<_,(y>-1||yn(g,"default"))&&l.push(p)}}}const u=[a,l];return Wn(r)&&n.set(r,u),u}function Xz(r){return r[0]!=="$"&&!cy(r)}function Wz(r){return r===null?"null":typeof r=="function"?r.name||"":typeof r=="object"&&r.constructor&&r.constructor.name||""}function Gz(r,e){return Wz(r)===Wz(e)}function Hz(r,e){return Gt(e)?e.findIndex(i=>Gz(i,r)):_i(e)&&Gz(e,r)?0:-1}const aZ=r=>r[0]==="_"||r==="$stable",tN=r=>Gt(r)?r.map(hl):[hl(r)],$Oe=(r,e,i)=>{if(e._n)return e;const n=Je((...s)=>tN(e(...s)),i);return n._c=!1,n},lZ=(r,e,i)=>{const n=r._ctx;for(const s in r){if(aZ(s))continue;const o=r[s];if(_i(o))e[s]=$Oe(s,o,n);else if(o!=null){const a=tN(o);e[s]=()=>a}}},hZ=(r,e)=>{const i=tN(e);r.slots.default=()=>i},UOe=(r,e)=>{const i=r.slots=nZ();if(r.vnode.shapeFlag&32){const n=e._;n?(dr(i,e),eq(i,"_",n,!0)):lZ(e,i)}else e&&hZ(r,e)},zOe=(r,e,i)=>{const{vnode:n,slots:s}=r;let o=!0,a=Nn;if(n.shapeFlag&32){const l=e._;l?i&&l===1?o=!1:(dr(s,e),!i&&l===1&&delete s._):(o=!e.$stable,lZ(e,s)),a=e}else e&&(hZ(r,e),a={default:1});if(o)for(const l in s)!aZ(l)&&a[l]==null&&delete s[l]};function eE(r,e,i,n,s=!1){if(Gt(r)){r.forEach((m,g)=>eE(m,e&&(Gt(e)?e[g]:e),i,n,s));return}if(wg(n)&&!s)return;const o=n.shapeFlag&4?HM(n.component)||n.component.proxy:n.el,a=s?null:o,{i:l,r:c}=r,u=e&&e.r,d=l.refs===Nn?l.refs={}:l.refs,p=l.setupState;if(u!=null&&u!==c&&(Or(u)?(d[u]=null,yn(p,u)&&(p[u]=null)):ps(u)&&(u.value=null)),_i(c))yd(c,l,12,[a,d]);else{const m=Or(c),g=ps(c);if(m||g){const y=()=>{if(r.f){const _=m?yn(p,c)?p[c]:d[c]:c.value;s?Gt(_)&&RL(_,o):Gt(_)?_.includes(o)||_.push(o):m?(d[c]=[o],yn(p,c)&&(p[c]=d[c])):(c.value=[o],r.k&&(d[r.k]=c.value))}else m?(d[c]=a,yn(p,c)&&(p[c]=a)):g&&(c.value=a,r.k&&(d[r.k]=a))};a?(y.id=-1,Zs(y,i)):y()}}}let pf=!1;const XOe=r=>r.namespaceURI.includes("svg")&&r.tagName!=="foreignObject",WOe=r=>r.namespaceURI.includes("MathML"),SC=r=>{if(XOe(r))return"svg";if(WOe(r))return"mathml"},CC=r=>r.nodeType===8;function GOe(r){const{mt:e,p:i,o:{patchProp:n,createText:s,nextSibling:o,parentNode:a,remove:l,insert:c,createComment:u}}=r,d=(w,C)=>{if(!C.hasChildNodes()){i(null,w,C),KA(),C._vnode=w;return}pf=!1,p(C.firstChild,w,null,null,null),KA(),C._vnode=w,pf&&console.error("Hydration completed but contains mismatches.")},p=(w,C,M,P,R,k=!1)=>{k=k||!!C.dynamicChildren;const I=CC(w)&&w.data==="[",A=()=>_(w,C,M,P,R,I),{type:D,ref:V,shapeFlag:B,patchFlag:L}=C;let F=w.nodeType;C.el=w,L===-2&&(k=!1,C.dynamicChildren=null);let $=null;switch(D){case Hg:F!==3?C.children===""?(c(C.el=s(""),a(w),w),$=w):$=A():(w.data!==C.children&&(pf=!0,w.data=C.children),$=o(w));break;case io:S(w)?($=o(w),O(C.el=w.content.firstChild,w,M)):F!==8||I?$=A():$=o(w);break;case Og:if(I&&(w=o(w),F=w.nodeType),F===1||F===3){$=w;const z=!C.children.length;for(let H=0;H<C.staticCount;H++)z&&(C.children+=$.nodeType===1?$.outerHTML:$.data),H===C.staticCount-1&&(C.anchor=$),$=o($);return I?o($):$}else A();break;case Fn:I?$=y(w,C,M,P,R,k):$=A();break;default:if(B&1)(F!==1||C.type.toLowerCase()!==w.tagName.toLowerCase())&&!S(w)?$=A():$=m(w,C,M,P,R,k);else if(B&6){C.slotScopeIds=R;const z=a(w);if(I?$=x(w):CC(w)&&w.data==="teleport start"?$=x(w,w.data,"teleport end"):$=o(w),e(C,z,null,M,P,SC(z),k),wg(C)){let H;I?(H=ke(Fn),H.anchor=$?$.previousSibling:z.lastChild):H=w.nodeType===3?On(""):ke("div"),H.el=w,C.component.subTree=H}}else B&64?F!==8?$=A():$=C.type.hydrate(w,C,M,P,R,k,r,g):B&128&&($=C.type.hydrate(w,C,M,P,SC(a(w)),R,k,r,p))}return V!=null&&eE(V,null,P,C),$},m=(w,C,M,P,R,k)=>{k=k||!!C.dynamicChildren;const{type:I,props:A,patchFlag:D,shapeFlag:V,dirs:B,transition:L}=C,F=I==="input"||I==="option";if(F||D!==-1){B&&Uc(C,null,M,"created");let $=!1;if(S(w)){$=dZ(P,L)&&M&&M.vnode.props&&M.vnode.props.appear;const H=w.content.firstChild;$&&L.beforeEnter(H),O(H,w,M),C.el=w=H}if(V&16&&!(A&&(A.innerHTML||A.textContent))){let H=g(w.firstChild,C,w,M,P,R,k);for(;H;){pf=!0;const K=H;H=H.nextSibling,l(K)}}else V&8&&w.textContent!==C.children&&(pf=!0,w.textContent=C.children);if(A)if(F||!k||D&48)for(const H in A)(F&&(H.endsWith("value")||H==="indeterminate")||AO(H)&&!cy(H)||H[0]===".")&&n(w,H,null,A[H],void 0,void 0,M);else A.onClick&&n(w,"onClick",null,A.onClick,void 0,void 0,M);let z;(z=A&&A.onVnodeBeforeMount)&&ya(z,M,C),B&&Uc(C,null,M,"beforeMount"),((z=A&&A.onVnodeMounted)||B||$)&&Rq(()=>{z&&ya(z,M,C),$&&L.enter(w),B&&Uc(C,null,M,"mounted")},P)}return w.nextSibling},g=(w,C,M,P,R,k,I)=>{I=I||!!C.dynamicChildren;const A=C.children,D=A.length;for(let V=0;V<D;V++){const B=I?A[V]:A[V]=hl(A[V]);if(w)w=p(w,B,P,R,k,I);else{if(B.type===Hg&&!B.children)continue;pf=!0,i(null,B,M,null,P,R,SC(M),k)}}return w},y=(w,C,M,P,R,k)=>{const{slotScopeIds:I}=C;I&&(R=R?R.concat(I):I);const A=a(w),D=g(o(w),C,A,M,P,R,k);return D&&CC(D)&&D.data==="]"?o(C.anchor=D):(pf=!0,c(C.anchor=u("]"),A,D),D)},_=(w,C,M,P,R,k)=>{if(pf=!0,C.el=null,k){const D=x(w);for(;;){const V=o(w);if(V&&V!==D)l(V);else break}}const I=o(w),A=a(w);return l(w),i(null,C,A,I,M,P,SC(A),R),I},x=(w,C="[",M="]")=>{let P=0;for(;w;)if(w=o(w),w&&CC(w)&&(w.data===C&&P++,w.data===M)){if(P===0)return o(w);P--}return w},O=(w,C,M)=>{const P=C.parentNode;P&&P.replaceChild(w,C);let R=M;for(;R;)R.vnode.el===C&&(R.vnode.el=R.subTree.el=w),R=R.parent},S=w=>w.nodeType===1&&w.tagName.toLowerCase()==="template";return[d,p]}const Zs=Rq;function iN(r){return uZ(r)}function cZ(r){return uZ(r,GOe)}function uZ(r,e){const i=tq();i.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:a,createText:l,createComment:c,setText:u,setElementText:d,parentNode:p,nextSibling:m,setScopeId:g=Oa,insertStaticContent:y}=r,_=(j,ee,de,ve=null,Ce=null,Ie=null,te=void 0,q=null,me=!!ee.dynamicChildren)=>{if(j===ee)return;j&&!Yh(j,ee)&&(ve=re(j),be(j,Ce,Ie,!0),j=null),ee.patchFlag===-2&&(me=!1,ee.dynamicChildren=null);const{type:ge,ref:Ae,shapeFlag:Pe}=ee;switch(ge){case Hg:x(j,ee,de,ve);break;case io:O(j,ee,de,ve);break;case Og:j==null&&S(ee,de,ve,te);break;case Fn:V(j,ee,de,ve,Ce,Ie,te,q,me);break;default:Pe&1?M(j,ee,de,ve,Ce,Ie,te,q,me):Pe&6?B(j,ee,de,ve,Ce,Ie,te,q,me):(Pe&64||Pe&128)&&ge.process(j,ee,de,ve,Ce,Ie,te,q,me,G)}Ae!=null&&Ce&&eE(Ae,j&&j.ref,Ie,ee||j,!ee)},x=(j,ee,de,ve)=>{if(j==null)n(ee.el=l(ee.children),de,ve);else{const Ce=ee.el=j.el;ee.children!==j.children&&u(Ce,ee.children)}},O=(j,ee,de,ve)=>{j==null?n(ee.el=c(ee.children||""),de,ve):ee.el=j.el},S=(j,ee,de,ve)=>{[j.el,j.anchor]=y(j.children,ee,de,ve,j.el,j.anchor)},w=({el:j,anchor:ee},de,ve)=>{let Ce;for(;j&&j!==ee;)Ce=m(j),n(j,de,ve),j=Ce;n(ee,de,ve)},C=({el:j,anchor:ee})=>{let de;for(;j&&j!==ee;)de=m(j),s(j),j=de;s(ee)},M=(j,ee,de,ve,Ce,Ie,te,q,me)=>{ee.type==="svg"?te="svg":ee.type==="math"&&(te="mathml"),j==null?P(ee,de,ve,Ce,Ie,te,q,me):I(j,ee,Ce,Ie,te,q,me)},P=(j,ee,de,ve,Ce,Ie,te,q)=>{let me,ge;const{props:Ae,shapeFlag:Pe,transition:je,dirs:$e}=j;if(me=j.el=a(j.type,Ie,Ae&&Ae.is,Ae),Pe&8?d(me,j.children):Pe&16&&k(j.children,me,null,ve,Ce,U3(j,Ie),te,q),$e&&Uc(j,null,ve,"created"),R(me,j,j.scopeId,te,ve),Ae){for(const ft in Ae)ft!=="value"&&!cy(ft)&&o(me,ft,null,Ae[ft],Ie,j.children,ve,Ce,_e);"value"in Ae&&o(me,"value",null,Ae.value,Ie),(ge=Ae.onVnodeBeforeMount)&&ya(ge,ve,j)}$e&&Uc(j,null,ve,"beforeMount");const We=dZ(Ce,je);We&&je.beforeEnter(me),n(me,ee,de),((ge=Ae&&Ae.onVnodeMounted)||We||$e)&&Zs(()=>{ge&&ya(ge,ve,j),We&&je.enter(me),$e&&Uc(j,null,ve,"mounted")},Ce)},R=(j,ee,de,ve,Ce)=>{if(de&&g(j,de),ve)for(let Ie=0;Ie<ve.length;Ie++)g(j,ve[Ie]);if(Ce){let Ie=Ce.subTree;if(ee===Ie){const te=Ce.vnode;R(j,te,te.scopeId,te.slotScopeIds,Ce.parent)}}},k=(j,ee,de,ve,Ce,Ie,te,q,me=0)=>{for(let ge=me;ge<j.length;ge++){const Ae=j[ge]=q?zf(j[ge]):hl(j[ge]);_(null,Ae,ee,de,ve,Ce,Ie,te,q)}},I=(j,ee,de,ve,Ce,Ie,te)=>{const q=ee.el=j.el;let{patchFlag:me,dynamicChildren:ge,dirs:Ae}=ee;me|=j.patchFlag&16;const Pe=j.props||Nn,je=ee.props||Nn;let $e;if(de&&gm(de,!1),($e=je.onVnodeBeforeUpdate)&&ya($e,de,ee,j),Ae&&Uc(ee,j,de,"beforeUpdate"),de&&gm(de,!0),ge?A(j.dynamicChildren,ge,q,de,ve,U3(ee,Ce),Ie):te||H(j,ee,q,null,de,ve,U3(ee,Ce),Ie,!1),me>0){if(me&16)D(q,ee,Pe,je,de,ve,Ce);else if(me&2&&Pe.class!==je.class&&o(q,"class",null,je.class,Ce),me&4&&o(q,"style",Pe.style,je.style,Ce),me&8){const We=ee.dynamicProps;for(let ft=0;ft<We.length;ft++){const Ze=We[ft],dt=Pe[Ze],Ut=je[Ze];(Ut!==dt||Ze==="value")&&o(q,Ze,dt,Ut,Ce,j.children,de,ve,_e)}}me&1&&j.children!==ee.children&&d(q,ee.children)}else!te&&ge==null&&D(q,ee,Pe,je,de,ve,Ce);(($e=je.onVnodeUpdated)||Ae)&&Zs(()=>{$e&&ya($e,de,ee,j),Ae&&Uc(ee,j,de,"updated")},ve)},A=(j,ee,de,ve,Ce,Ie,te)=>{for(let q=0;q<ee.length;q++){const me=j[q],ge=ee[q],Ae=me.el&&(me.type===Fn||!Yh(me,ge)||me.shapeFlag&70)?p(me.el):de;_(me,ge,Ae,null,ve,Ce,Ie,te,!0)}},D=(j,ee,de,ve,Ce,Ie,te)=>{if(de!==ve){if(de!==Nn)for(const q in de)!cy(q)&&!(q in ve)&&o(j,q,de[q],null,te,ee.children,Ce,Ie,_e);for(const q in ve){if(cy(q))continue;const me=ve[q],ge=de[q];me!==ge&&q!=="value"&&o(j,q,ge,me,te,ee.children,Ce,Ie,_e)}"value"in ve&&o(j,"value",de.value,ve.value,te)}},V=(j,ee,de,ve,Ce,Ie,te,q,me)=>{const ge=ee.el=j?j.el:l(""),Ae=ee.anchor=j?j.anchor:l("");let{patchFlag:Pe,dynamicChildren:je,slotScopeIds:$e}=ee;$e&&(q=q?q.concat($e):$e),j==null?(n(ge,de,ve),n(Ae,de,ve),k(ee.children||[],de,Ae,Ce,Ie,te,q,me)):Pe>0&&Pe&64&&je&&j.dynamicChildren?(A(j.dynamicChildren,je,de,Ce,Ie,te,q),(ee.key!=null||Ce&&ee===Ce.subTree)&&nN(j,ee,!0)):H(j,ee,de,Ae,Ce,Ie,te,q,me)},B=(j,ee,de,ve,Ce,Ie,te,q,me)=>{ee.slotScopeIds=q,j==null?ee.shapeFlag&512?Ce.ctx.activate(ee,de,ve,te,me):L(ee,de,ve,Ce,Ie,te,me):F(j,ee,me)},L=(j,ee,de,ve,Ce,Ie,te)=>{const q=j.component=_Z(j,ve,Ce);if(kO(j)&&(q.ctx.renderer=G),bZ(q),q.asyncDep){if(Ce&&Ce.registerDep(q,$),!j.el){const me=q.subTree=ke(io);O(null,me,ee,de)}}else $(q,j,ee,de,Ce,Ie,te)},F=(j,ee,de)=>{const ve=ee.component=j.component;if(tOe(j,ee,de))if(ve.asyncDep&&!ve.asyncResolved){z(ve,ee,de);return}else ve.next=ee,jwe(ve.update),ve.effect.dirty=!0,ve.update();else ee.el=j.el,ve.vnode=ee},$=(j,ee,de,ve,Ce,Ie,te)=>{const q=()=>{if(j.isMounted){let{next:Ae,bu:Pe,u:je,parent:$e,vnode:We}=j;{const zt=fZ(j);if(zt){Ae&&(Ae.el=We.el,z(j,Ae,te)),zt.asyncDep.then(()=>{j.isUnmounted||q()});return}}let ft=Ae,Ze;gm(j,!1),Ae?(Ae.el=We.el,z(j,Ae,te)):Ae=We,Pe&&uy(Pe),(Ze=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&ya(Ze,$e,Ae,We),gm(j,!0);const dt=iA(j),Ut=j.subTree;j.subTree=dt,_(Ut,dt,p(Ut.el),re(Ut),j,Ce,Ie),Ae.el=dt.el,ft===null&&QL(j,dt.el),je&&Zs(je,Ce),(Ze=Ae.props&&Ae.props.onVnodeUpdated)&&Zs(()=>ya(Ze,$e,Ae,We),Ce)}else{let Ae;const{el:Pe,props:je}=ee,{bm:$e,m:We,parent:ft}=j,Ze=wg(ee);if(gm(j,!1),$e&&uy($e),!Ze&&(Ae=je&&je.onVnodeBeforeMount)&&ya(Ae,ft,ee),gm(j,!0),Pe&&he){const dt=()=>{j.subTree=iA(j),he(Pe,j.subTree,j,Ce,null)};Ze?ee.type.__asyncLoader().then(()=>!j.isUnmounted&&dt()):dt()}else{const dt=j.subTree=iA(j);_(null,dt,de,ve,j,Ce,Ie),ee.el=dt.el}if(We&&Zs(We,Ce),!Ze&&(Ae=je&&je.onVnodeMounted)){const dt=ee;Zs(()=>ya(Ae,ft,dt),Ce)}(ee.shapeFlag&256||ft&&wg(ft.vnode)&&ft.vnode.shapeFlag&256)&&j.a&&Zs(j.a,Ce),j.isMounted=!0,ee=de=ve=null}},me=j.effect=new Ly(q,Oa,()=>FM(ge),j.scope),ge=j.update=()=>{me.dirty&&me.run()};ge.id=j.uid,gm(j,!0),ge()},z=(j,ee,de)=>{ee.component=j;const ve=j.vnode.props;j.vnode=ee,j.next=null,FOe(j,ee.props,ve,de),zOe(j,ee.children,de),zp(),Dz(j),Xp()},H=(j,ee,de,ve,Ce,Ie,te,q,me=!1)=>{const ge=j&&j.children,Ae=j?j.shapeFlag:0,Pe=ee.children,{patchFlag:je,shapeFlag:$e}=ee;if(je>0){if(je&128){J(ge,Pe,de,ve,Ce,Ie,te,q,me);return}else if(je&256){K(ge,Pe,de,ve,Ce,Ie,te,q,me);return}}$e&8?(Ae&16&&_e(ge,Ce,Ie),Pe!==ge&&d(de,Pe)):Ae&16?$e&16?J(ge,Pe,de,ve,Ce,Ie,te,q,me):_e(ge,Ce,Ie,!0):(Ae&8&&d(de,""),$e&16&&k(Pe,de,ve,Ce,Ie,te,q,me))},K=(j,ee,de,ve,Ce,Ie,te,q,me)=>{j=j||ly,ee=ee||ly;const ge=j.length,Ae=ee.length,Pe=Math.min(ge,Ae);let je;for(je=0;je<Pe;je++){const $e=ee[je]=me?zf(ee[je]):hl(ee[je]);_(j[je],$e,de,null,Ce,Ie,te,q,me)}ge>Ae?_e(j,Ce,Ie,!0,!1,Pe):k(ee,de,ve,Ce,Ie,te,q,me,Pe)},J=(j,ee,de,ve,Ce,Ie,te,q,me)=>{let ge=0;const Ae=ee.length;let Pe=j.length-1,je=Ae-1;for(;ge<=Pe&&ge<=je;){const $e=j[ge],We=ee[ge]=me?zf(ee[ge]):hl(ee[ge]);if(Yh($e,We))_($e,We,de,null,Ce,Ie,te,q,me);else break;ge++}for(;ge<=Pe&&ge<=je;){const $e=j[Pe],We=ee[je]=me?zf(ee[je]):hl(ee[je]);if(Yh($e,We))_($e,We,de,null,Ce,Ie,te,q,me);else break;Pe--,je--}if(ge>Pe){if(ge<=je){const $e=je+1,We=$e<Ae?ee[$e].el:ve;for(;ge<=je;)_(null,ee[ge]=me?zf(ee[ge]):hl(ee[ge]),de,We,Ce,Ie,te,q,me),ge++}}else if(ge>je)for(;ge<=Pe;)be(j[ge],Ce,Ie,!0),ge++;else{const $e=ge,We=ge,ft=new Map;for(ge=We;ge<=je;ge++){const Ee=ee[ge]=me?zf(ee[ge]):hl(ee[ge]);Ee.key!=null&&ft.set(Ee.key,ge)}let Ze,dt=0;const Ut=je-We+1;let zt=!1,_t=0;const ni=new Array(Ut);for(ge=0;ge<Ut;ge++)ni[ge]=0;for(ge=$e;ge<=Pe;ge++){const Ee=j[ge];if(dt>=Ut){be(Ee,Ce,Ie,!0);continue}let Ue;if(Ee.key!=null)Ue=ft.get(Ee.key);else for(Ze=We;Ze<=je;Ze++)if(ni[Ze-We]===0&&Yh(Ee,ee[Ze])){Ue=Ze;break}Ue===void 0?be(Ee,Ce,Ie,!0):(ni[Ue-We]=ge+1,Ue>=_t?_t=Ue:zt=!0,_(Ee,ee[Ue],de,null,Ce,Ie,te,q,me),dt++)}const Bi=zt?HOe(ni):ly;for(Ze=Bi.length-1,ge=Ut-1;ge>=0;ge--){const Ee=We+ge,Ue=ee[Ee],xe=Ee+1<Ae?ee[Ee+1].el:ve;ni[ge]===0?_(null,Ue,de,xe,Ce,Ie,te,q,me):zt&&(Ze<0||ge!==Bi[Ze]?ne(Ue,de,xe,2):Ze--)}}},ne=(j,ee,de,ve,Ce=null)=>{const{el:Ie,type:te,transition:q,children:me,shapeFlag:ge}=j;if(ge&6){ne(j.component.subTree,ee,de,ve);return}if(ge&128){j.suspense.move(ee,de,ve);return}if(ge&64){te.move(j,ee,de,G);return}if(te===Fn){n(Ie,ee,de);for(let Pe=0;Pe<me.length;Pe++)ne(me[Pe],ee,de,ve);n(j.anchor,ee,de);return}if(te===Og){w(j,ee,de);return}if(ve!==2&&ge&1&&q)if(ve===0)q.beforeEnter(Ie),n(Ie,ee,de),Zs(()=>q.enter(Ie),Ce);else{const{leave:Pe,delayLeave:je,afterLeave:$e}=q,We=()=>n(Ie,ee,de),ft=()=>{Pe(Ie,()=>{We(),$e&&$e()})};je?je(Ie,We,ft):ft()}else n(Ie,ee,de)},be=(j,ee,de,ve=!1,Ce=!1)=>{const{type:Ie,props:te,ref:q,children:me,dynamicChildren:ge,shapeFlag:Ae,patchFlag:Pe,dirs:je}=j;if(q!=null&&eE(q,null,de,j,!0),Ae&256){ee.ctx.deactivate(j);return}const $e=Ae&1&&je,We=!wg(j);let ft;if(We&&(ft=te&&te.onVnodeBeforeUnmount)&&ya(ft,ee,j),Ae&6)ye(j.component,de,ve);else{if(Ae&128){j.suspense.unmount(de,ve);return}$e&&Uc(j,null,ee,"beforeUnmount"),Ae&64?j.type.remove(j,ee,de,Ce,G,ve):ge&&(Ie!==Fn||Pe>0&&Pe&64)?_e(ge,ee,de,!1,!0):(Ie===Fn&&Pe&384||!Ce&&Ae&16)&&_e(me,ee,de),ve&&pe(j)}(We&&(ft=te&&te.onVnodeUnmounted)||$e)&&Zs(()=>{ft&&ya(ft,ee,j),$e&&Uc(j,null,ee,"unmounted")},de)},pe=j=>{const{type:ee,el:de,anchor:ve,transition:Ce}=j;if(ee===Fn){ae(de,ve);return}if(ee===Og){C(j);return}const Ie=()=>{s(de),Ce&&!Ce.persisted&&Ce.afterLeave&&Ce.afterLeave()};if(j.shapeFlag&1&&Ce&&!Ce.persisted){const{leave:te,delayLeave:q}=Ce,me=()=>te(de,Ie);q?q(j.el,Ie,me):me()}else Ie()},ae=(j,ee)=>{let de;for(;j!==ee;)de=m(j),s(j),j=de;s(ee)},ye=(j,ee,de)=>{const{bum:ve,scope:Ce,update:Ie,subTree:te,um:q}=j;ve&&uy(ve),Ce.stop(),Ie&&(Ie.active=!1,be(te,j,ee,de)),q&&Zs(q,ee),Zs(()=>{j.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},_e=(j,ee,de,ve=!1,Ce=!1,Ie=0)=>{for(let te=Ie;te<j.length;te++)be(j[te],ee,de,ve,Ce)},re=j=>j.shapeFlag&6?re(j.component.subTree):j.shapeFlag&128?j.suspense.next():m(j.anchor||j.el);let se=!1;const Q=(j,ee,de)=>{j==null?ee._vnode&&be(ee._vnode,null,null,!0):_(ee._vnode||null,j,ee,null,null,null,de),se||(se=!0,Dz(),KA(),se=!1),ee._vnode=j},G={p:_,um:be,m:ne,r:pe,mt:L,mc:k,pc:H,pbc:A,n:re,o:r};let ie,he;return e&&([ie,he]=e(G)),{render:Q,hydrate:ie,createApp:LOe(Q,ie)}}function U3({type:r,props:e},i){return i==="svg"&&r==="foreignObject"||i==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function gm({effect:r,update:e},i){r.allowRecurse=e.allowRecurse=i}function dZ(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function nN(r,e,i=!1){const n=r.children,s=e.children;if(Gt(n)&&Gt(s))for(let o=0;o<n.length;o++){const a=n[o];let l=s[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[o]=zf(s[o]),l.el=a.el),i||nN(a,l)),l.type===Hg&&(l.el=a.el)}}function HOe(r){const e=r.slice(),i=[0];let n,s,o,a,l;const c=r.length;for(n=0;n<c;n++){const u=r[n];if(u!==0){if(s=i[i.length-1],r[s]<u){e[n]=s,i.push(n);continue}for(o=0,a=i.length-1;o<a;)l=o+a>>1,r[i[l]]<u?o=l+1:a=l;u<r[i[o]]&&(o>0&&(e[n]=i[o-1]),i[o]=n)}}for(o=i.length,a=i[o-1];o-- >0;)i[o]=a,a=e[a];return i}function fZ(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fZ(e)}const QOe=r=>r.__isTeleport,Bb=r=>r&&(r.disabled||r.disabled===""),Qz=r=>typeof SVGElement<"u"&&r instanceof SVGElement,jz=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,f4=(r,e)=>{const i=r&&r.to;return Or(i)?e?e(i):null:i},jOe={name:"Teleport",__isTeleport:!0,process(r,e,i,n,s,o,a,l,c,u){const{mc:d,pc:p,pbc:m,o:{insert:g,querySelector:y,createText:_,createComment:x}}=u,O=Bb(e.props);let{shapeFlag:S,children:w,dynamicChildren:C}=e;if(r==null){const M=e.el=_(""),P=e.anchor=_("");g(M,i,n),g(P,i,n);const R=e.target=f4(e.props,y),k=e.targetAnchor=_("");R&&(g(k,R),a==="svg"||Qz(R)?a="svg":(a==="mathml"||jz(R))&&(a="mathml"));const I=(A,D)=>{S&16&&d(w,A,D,s,o,a,l,c)};O?I(i,P):R&&I(R,k)}else{e.el=r.el;const M=e.anchor=r.anchor,P=e.target=r.target,R=e.targetAnchor=r.targetAnchor,k=Bb(r.props),I=k?i:P,A=k?M:R;if(a==="svg"||Qz(P)?a="svg":(a==="mathml"||jz(P))&&(a="mathml"),C?(m(r.dynamicChildren,C,I,s,o,a,l),nN(r,e,!0)):c||p(r,e,I,A,s,o,a,l,!1),O)k?e.props&&r.props&&e.props.to!==r.props.to&&(e.props.to=r.props.to):TC(e,i,M,u,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const D=e.target=f4(e.props,y);D&&TC(e,D,null,u,0)}else k&&TC(e,P,R,u,1)}pZ(e)},remove(r,e,i,n,{um:s,o:{remove:o}},a){const{shapeFlag:l,children:c,anchor:u,targetAnchor:d,target:p,props:m}=r;if(p&&o(d),a&&o(u),l&16){const g=a||!Bb(m);for(let y=0;y<c.length;y++){const _=c[y];s(_,e,i,g,!!_.dynamicChildren)}}},move:TC,hydrate:YOe};function TC(r,e,i,{o:{insert:n},m:s},o=2){o===0&&n(r.targetAnchor,e,i);const{el:a,anchor:l,shapeFlag:c,children:u,props:d}=r,p=o===2;if(p&&n(a,e,i),(!p||Bb(d))&&c&16)for(let m=0;m<u.length;m++)s(u[m],e,i,2);p&&n(l,e,i)}function YOe(r,e,i,n,s,o,{o:{nextSibling:a,parentNode:l,querySelector:c}},u){const d=e.target=f4(e.props,c);if(d){const p=d._lpa||d.firstChild;if(e.shapeFlag&16)if(Bb(e.props))e.anchor=u(a(r),e,l(r),i,n,s,o),e.targetAnchor=p;else{e.anchor=a(r);let m=p;for(;m;)if(m=a(m),m&&m.nodeType===8&&m.data==="teleport anchor"){e.targetAnchor=m,d._lpa=e.targetAnchor&&a(e.targetAnchor);break}u(p,e,d,i,n,s,o)}pZ(e)}return e.anchor&&a(e.anchor)}const qOe=jOe;function pZ(r){const e=r.ctx;if(e&&e.ut){let i=r.children[0].el;for(;i&&i!==r.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",e.uid),i=i.nextSibling;e.ut()}}const Fn=Symbol.for("v-fgt"),Hg=Symbol.for("v-txt"),io=Symbol.for("v-cmt"),Og=Symbol.for("v-stc"),Db=[];let Sa=null;function ci(r=!1){Db.push(Sa=r?null:[])}function mZ(){Db.pop(),Sa=Db[Db.length-1]||null}let Qg=1;function p4(r){Qg+=r}function gZ(r){return r.dynamicChildren=Qg>0?Sa||ly:null,mZ(),Qg>0&&Sa&&Sa.push(r),r}function pn(r,e,i,n,s,o){return gZ(It(r,e,i,n,s,o,!0))}function Es(r,e,i,n,s){return gZ(ke(r,e,i,n,s,!0))}function wp(r){return r?r.__v_isVNode===!0:!1}function Yh(r,e){return r.type===e.type&&r.key===e.key}function ZOe(r){}const vZ=({key:r})=>r??null,rA=({ref:r,ref_key:e,ref_for:i})=>(typeof r=="number"&&(r=""+r),r!=null?Or(r)||ps(r)||_i(r)?{i:us,r,k:e,f:!!i}:r:null);function It(r,e=null,i=null,n=0,s=null,o=r===Fn?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&vZ(e),ref:e&&rA(e),scopeId:UM,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:us};return l?(sN(c,i),o&128&&r.normalize(c)):i&&(c.shapeFlag|=Or(i)?8:16),Qg>0&&!a&&Sa&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&Sa.push(c),c}const ke=KOe;function KOe(r,e=null,i=null,n=0,s=null,o=!1){if((!r||r===Mq)&&(r=io),wp(r)){const l=lu(r,e,!0);return i&&sN(l,i),Qg>0&&!o&&Sa&&(l.shapeFlag&6?Sa[Sa.indexOf(r)]=l:Sa.push(l)),l.patchFlag|=-2,l}if(oSe(r)&&(r=r.__vccOpts),e){e=rN(e);let{class:l,style:c}=e;l&&!Or(l)&&(e.class=b_(l)),Wn(c)&&(UL(c)&&!Gt(c)&&(c=dr({},c)),e.style=Up(c))}const a=Or(r)?1:kq(r)?128:QOe(r)?64:Wn(r)?4:_i(r)?2:0;return It(r,e,i,n,s,a,o,!0)}function rN(r){return r?UL(r)||rZ(r)?dr({},r):r:null}function lu(r,e,i=!1,n=!1){const{props:s,ref:o,patchFlag:a,children:l,transition:c}=r,u=e?yZ(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:r.type,props:u,key:u&&vZ(u),ref:e&&e.ref?i&&o?Gt(o)?o.concat(rA(e)):[o,rA(e)]:rA(e):o,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:l,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Fn?a===-1?16:a|16:a,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:c,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&lu(r.ssContent),ssFallback:r.ssFallback&&lu(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return c&&n&&(d.transition=c.clone(d)),d}function On(r=" ",e=0){return ke(Hg,null,r,e)}function JOe(r,e){const i=ke(Og,null,r);return i.staticCount=e,i}function GM(r="",e=!1){return e?(ci(),Es(io,null,r)):ke(io,null,r)}function hl(r){return r==null||typeof r=="boolean"?ke(io):Gt(r)?ke(Fn,null,r.slice()):typeof r=="object"?zf(r):ke(Hg,null,String(r))}function zf(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:lu(r)}function sN(r,e){let i=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(Gt(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),sN(r,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!rZ(e)?e._ctx=us:s===3&&us&&(us.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else _i(e)?(e={default:e,_ctx:us},i=32):(e=String(e),n&64?(i=16,e=[On(e)]):i=8);r.children=e,r.shapeFlag|=i}function yZ(...r){const e={};for(let i=0;i<r.length;i++){const n=r[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=b_([e.class,n.class]));else if(s==="style")e.style=Up([e.style,n.style]);else if(AO(s)){const o=e[s],a=n[s];a&&o!==a&&!(Gt(o)&&o.includes(a))&&(e[s]=o?[].concat(o,a):a)}else s!==""&&(e[s]=n[s])}return e}function ya(r,e,i,n=null){_l(r,e,7,[i,n])}const eSe=tZ();let tSe=0;function _Z(r,e,i){const n=r.type,s=(e?e.appContext:r.appContext)||eSe,o={uid:tSe++,vnode:r,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new LL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oZ(n,s),emitsOptions:Eq(n,s),emit:null,emitted:null,propsDefaults:Nn,inheritAttrs:n.inheritAttrs,ctx:Nn,data:Nn,props:Nn,attrs:Nn,slots:Nn,refs:Nn,setupState:Nn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=qwe.bind(null,o),r.ce&&r.ce(o),o}let Os=null;const Ol=()=>Os||us;let tE,m4;{const r=tq(),e=(i,n)=>{let s;return(s=r[i])||(s=r[i]=[]),s.push(n),o=>{s.length>1?s.forEach(a=>a(o)):s[0](o)}};tE=e("__VUE_INSTANCE_SETTERS__",i=>Os=i),m4=e("__VUE_SSR_SETTERS__",i=>RO=i)}const jg=r=>{const e=Os;return tE(r),r.scope.on(),()=>{r.scope.off(),tE(e)}},g4=()=>{Os&&Os.scope.off(),tE(null)};function xZ(r){return r.vnode.shapeFlag&4}let RO=!1;function bZ(r,e=!1){e&&m4(e);const{props:i,children:n}=r.vnode,s=xZ(r);VOe(r,i,s,e),UOe(r,n);const o=s?iSe(r,e):void 0;return e&&m4(!1),o}function iSe(r,e){const i=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,h4);const{setup:n}=i;if(n){const s=r.setupContext=n.length>1?OZ(r):null,o=jg(r);zp();const a=yd(n,r,0,[r.props,s]);if(Xp(),o(),BL(a)){if(a.then(g4,g4),e)return a.then(l=>{v4(r,l,e)}).catch(l=>{d0(l,r,0)});r.asyncDep=a}else v4(r,a,e)}else wZ(r,e)}function v4(r,e,i){_i(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:Wn(e)&&(r.setupState=WL(e)),wZ(r,i)}let iE,y4;function nSe(r){iE=r,y4=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,_Oe))}}const rSe=()=>!iE;function wZ(r,e,i){const n=r.type;if(!r.render){if(!e&&iE&&!n.render){const s=n.template||eN(r).template;if(s){const{isCustomElement:o,compilerOptions:a}=r.appContext.config,{delimiters:l,compilerOptions:c}=n,u=dr(dr({isCustomElement:o,delimiters:l},a),c);n.render=iE(s,u)}}r.render=n.render||Oa,y4&&y4(r)}{const s=jg(r);zp();try{POe(r)}finally{Xp(),s()}}}const sSe={get(r,e){return Ba(r,"get",""),r[e]}};function OZ(r){const e=i=>{r.exposed=i||{}};return{attrs:new Proxy(r.attrs,sSe),slots:r.slots,emit:r.emit,expose:e}}function HM(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(WL(xq(r.exposed)),{get(e,i){if(i in e)return e[i];if(i in Rb)return Rb[i](r)},has(e,i){return i in e||i in Rb}}))}function _4(r,e=!0){return _i(r)?r.displayName||r.name:r.name||e&&r.__name}function oSe(r){return _i(r)&&"__vccOpts"in r}const tr=(r,e)=>Iwe(r,e,RO);function SZ(r,e,i=Nn){const n=Ol(),s=qo(e),o=cl(e),a=GL((c,u)=>{let d;return Nq(()=>{const p=r[e];ac(d,p)&&(d=p,u())}),{get(){return c(),i.get?i.get(d):d},set(p){const m=n.vnode.props;!(m&&(e in m||s in m||o in m)&&(`onUpdate:${e}`in m||`onUpdate:${s}`in m||`onUpdate:${o}`in m))&&ac(p,d)&&(d=p,u()),n.emit(`update:${e}`,i.set?i.set(p):p)}}}),l=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return a[Symbol.iterator]=()=>{let c=0;return{next(){return c<2?{value:c++?r[l]||{}:a,done:!1}:{done:!0}}}},a}function nE(r,e,i){const n=arguments.length;return n===2?Wn(e)&&!Gt(e)?wp(e)?ke(r,null,[e]):ke(r,e):ke(r,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&wp(i)&&(i=[i]),ke(r,e,i))}function aSe(){}function lSe(r,e,i,n){const s=i[n];if(s&&CZ(s,r))return s;const o=e();return o.memo=r.slice(),i[n]=o}function CZ(r,e){const i=r.memo;if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(ac(i[n],e[n]))return!1;return Qg>0&&Sa&&Sa.push(r),!0}const TZ="3.4.27",hSe=Oa,cSe=Gwe,uSe=$v,dSe=Aq,fSe={createComponentInstance:_Z,setupComponent:bZ,renderComponentRoot:iA,setCurrentRenderingInstance:dw,isVNode:wp,normalizeVNode:hl},pSe=fSe,mSe=null,gSe=null,vSe=null;/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ySe="http://www.w3.org/2000/svg",_Se="http://www.w3.org/1998/Math/MathML",Xf=typeof document<"u"?document:null,Yz=Xf&&Xf.createElement("template"),xSe={insert:(r,e,i)=>{e.insertBefore(r,i||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,i,n)=>{const s=e==="svg"?Xf.createElementNS(ySe,r):e==="mathml"?Xf.createElementNS(_Se,r):Xf.createElement(r,i?{is:i}:void 0);return r==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:r=>Xf.createTextNode(r),createComment:r=>Xf.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Xf.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,i,n,s,o){const a=i?i.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===o||!(s=s.nextSibling)););else{Yz.innerHTML=n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r;const l=Yz.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,i)}return[a?a.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},mf="transition",Tx="animation",Fy=Symbol("_vtc"),oN=(r,{slots:e})=>nE(Fq,EZ(r),e);oN.displayName="Transition";const AZ={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},bSe=oN.props=dr({},KL,AZ),vm=(r,e=[])=>{Gt(r)?r.forEach(i=>i(...e)):r&&r(...e)},qz=r=>r?Gt(r)?r.some(e=>e.length>1):r.length>1:!1;function EZ(r){const e={};for(const V in r)V in AZ||(e[V]=r[V]);if(r.css===!1)return e;const{name:i="v",type:n,duration:s,enterFromClass:o=`${i}-enter-from`,enterActiveClass:a=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:c=o,appearActiveClass:u=a,appearToClass:d=l,leaveFromClass:p=`${i}-leave-from`,leaveActiveClass:m=`${i}-leave-active`,leaveToClass:g=`${i}-leave-to`}=r,y=wSe(s),_=y&&y[0],x=y&&y[1],{onBeforeEnter:O,onEnter:S,onEnterCancelled:w,onLeave:C,onLeaveCancelled:M,onBeforeAppear:P=O,onAppear:R=S,onAppearCancelled:k=w}=e,I=(V,B,L)=>{Nf(V,B?d:l),Nf(V,B?u:a),L&&L()},A=(V,B)=>{V._isLeaving=!1,Nf(V,p),Nf(V,g),Nf(V,m),B&&B()},D=V=>(B,L)=>{const F=V?R:S,$=()=>I(B,V,L);vm(F,[B,$]),Zz(()=>{Nf(B,V?c:o),Ku(B,V?d:l),qz(F)||Kz(B,n,_,$)})};return dr(e,{onBeforeEnter(V){vm(O,[V]),Ku(V,o),Ku(V,a)},onBeforeAppear(V){vm(P,[V]),Ku(V,c),Ku(V,u)},onEnter:D(!1),onAppear:D(!0),onLeave(V,B){V._isLeaving=!0;const L=()=>A(V,B);Ku(V,p),Ku(V,m),PZ(),Zz(()=>{V._isLeaving&&(Nf(V,p),Ku(V,g),qz(C)||Kz(V,n,x,L))}),vm(C,[V,L])},onEnterCancelled(V){I(V,!1),vm(w,[V])},onAppearCancelled(V){I(V,!0),vm(k,[V])},onLeaveCancelled(V){A(V),vm(M,[V])}})}function wSe(r){if(r==null)return null;if(Wn(r))return[z3(r.enter),z3(r.leave)];{const e=z3(r);return[e,e]}}function z3(r){return YA(r)}function Ku(r,e){e.split(/\s+/).forEach(i=>i&&r.classList.add(i)),(r[Fy]||(r[Fy]=new Set)).add(e)}function Nf(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const i=r[Fy];i&&(i.delete(e),i.size||(r[Fy]=void 0))}function Zz(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let OSe=0;function Kz(r,e,i,n){const s=r._endId=++OSe,o=()=>{s===r._endId&&n()};if(i)return setTimeout(o,i);const{type:a,timeout:l,propCount:c}=MZ(r,e);if(!a)return n();const u=a+"end";let d=0;const p=()=>{r.removeEventListener(u,m),o()},m=g=>{g.target===r&&++d>=c&&p()};setTimeout(()=>{d<c&&p()},l+1),r.addEventListener(u,m)}function MZ(r,e){const i=window.getComputedStyle(r),n=y=>(i[y]||"").split(", "),s=n(`${mf}Delay`),o=n(`${mf}Duration`),a=Jz(s,o),l=n(`${Tx}Delay`),c=n(`${Tx}Duration`),u=Jz(l,c);let d=null,p=0,m=0;e===mf?a>0&&(d=mf,p=a,m=o.length):e===Tx?u>0&&(d=Tx,p=u,m=c.length):(p=Math.max(a,u),d=p>0?a>u?mf:Tx:null,m=d?d===mf?o.length:c.length:0);const g=d===mf&&/\b(transform|all)(,|$)/.test(n(`${mf}Property`).toString());return{type:d,timeout:p,propCount:m,hasTransform:g}}function Jz(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((i,n)=>e9(i)+e9(r[n])))}function e9(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function PZ(){return document.body.offsetHeight}function SSe(r,e,i){const n=r[Fy];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):i?r.setAttribute("class",e):r.className=e}const rE=Symbol("_vod"),kZ=Symbol("_vsh"),IZ={beforeMount(r,{value:e},{transition:i}){r[rE]=r.style.display==="none"?"":r.style.display,i&&e?i.beforeEnter(r):Ax(r,e)},mounted(r,{value:e},{transition:i}){i&&e&&i.enter(r)},updated(r,{value:e,oldValue:i},{transition:n}){!e!=!i&&(n?e?(n.beforeEnter(r),Ax(r,!0),n.enter(r)):n.leave(r,()=>{Ax(r,!1)}):Ax(r,e))},beforeUnmount(r,{value:e}){Ax(r,e)}};function Ax(r,e){r.style.display=e?r[rE]:"none",r[kZ]=!e}function CSe(){IZ.getSSRProps=({value:r})=>{if(!r)return{style:{display:"none"}}}}const RZ=Symbol("");function TSe(r){const e=Ol();if(!e)return;const i=e.ut=(s=r(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(o=>b4(o,s))},n=()=>{const s=r(e.proxy);x4(e.subTree,s),i(s)};nr(()=>{Lq(n);const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),ta(()=>s.disconnect())})}function x4(r,e){if(r.shapeFlag&128){const i=r.suspense;r=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{x4(i.activeBranch,e)})}for(;r.component;)r=r.component.subTree;if(r.shapeFlag&1&&r.el)b4(r.el,e);else if(r.type===Fn)r.children.forEach(i=>x4(i,e));else if(r.type===Og){let{el:i,anchor:n}=r;for(;i&&(b4(i,e),i!==n);)i=i.nextSibling}}function b4(r,e){if(r.nodeType===1){const i=r.style;let n="";for(const s in e)i.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;i[RZ]=n}}const ASe=/(^|;)\s*display\s*:/;function ESe(r,e,i){const n=r.style,s=Or(i);let o=!1;if(i&&!s){if(e)if(Or(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();i[l]==null&&sA(n,l,"")}else for(const a in e)i[a]==null&&sA(n,a,"");for(const a in i)a==="display"&&(o=!0),sA(n,a,i[a])}else if(s){if(e!==i){const a=n[RZ];a&&(i+=";"+a),n.cssText=i,o=ASe.test(i)}}else e&&r.removeAttribute("style");rE in r&&(r[rE]=o?n.display:"",r[kZ]&&(n.display="none"))}const t9=/\s*!important$/;function sA(r,e,i){if(Gt(i))i.forEach(n=>sA(r,e,n));else if(i==null&&(i=""),e.startsWith("--"))r.setProperty(e,i);else{const n=MSe(r,e);t9.test(i)?r.setProperty(cl(n),i.replace(t9,""),"important"):r[n]=i}}const i9=["Webkit","Moz","ms"],X3={};function MSe(r,e){const i=X3[e];if(i)return i;let n=qo(e);if(n!=="filter"&&n in r)return X3[e]=n;n=EO(n);for(let s=0;s<i9.length;s++){const o=i9[s]+n;if(o in r)return X3[e]=o}return e}const n9="http://www.w3.org/1999/xlink";function PSe(r,e,i,n,s){if(n&&e.startsWith("xlink:"))i==null?r.removeAttributeNS(n9,e.slice(6,e.length)):r.setAttributeNS(n9,e,i);else{const o=owe(e);i==null||o&&!nq(i)?r.removeAttribute(e):r.setAttribute(e,o?"":i)}}function kSe(r,e,i,n,s,o,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,s,o),r[e]=i??"";return}const l=r.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){const u=l==="OPTION"?r.getAttribute("value")||"":r.value,d=i??"";(u!==d||!("_value"in r))&&(r.value=d),i==null&&r.removeAttribute(e),r._value=i;return}let c=!1;if(i===""||i==null){const u=typeof r[e];u==="boolean"?i=nq(i):i==null&&u==="string"?(i="",c=!0):u==="number"&&(i=0,c=!0)}try{r[e]=i}catch{}c&&r.removeAttribute(e)}function ad(r,e,i,n){r.addEventListener(e,i,n)}function ISe(r,e,i,n){r.removeEventListener(e,i,n)}const r9=Symbol("_vei");function RSe(r,e,i,n,s=null){const o=r[r9]||(r[r9]={}),a=o[e];if(n&&a)a.value=n;else{const[l,c]=BSe(e);if(n){const u=o[e]=NSe(n,s);ad(r,l,u,c)}else a&&(ISe(r,l,a,c),o[e]=void 0)}}const s9=/(?:Once|Passive|Capture)$/;function BSe(r){let e;if(s9.test(r)){e={};let n;for(;n=r.match(s9);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):cl(r.slice(2)),e]}let W3=0;const DSe=Promise.resolve(),LSe=()=>W3||(DSe.then(()=>W3=0),W3=Date.now());function NSe(r,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;_l(VSe(n,i.value),e,5,[n])};return i.value=r,i.attached=LSe(),i}function VSe(r,e){if(Gt(e)){const i=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{i.call(r),r._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const o9=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,FSe=(r,e,i,n,s,o,a,l,c)=>{const u=s==="svg";e==="class"?SSe(r,n,u):e==="style"?ESe(r,i,n):AO(e)?IL(e)||RSe(r,e,i,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$Se(r,e,n,u))?kSe(r,e,n,o,a,l,c):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),PSe(r,e,n,u))};function $Se(r,e,i,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in r&&o9(e)&&_i(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=r.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return o9(e)&&Or(i)?!1:e in r}/*! #__NO_SIDE_EFFECTS__ */function BZ(r,e){const i=Td(r);class n extends QM{constructor(o){super(i,o,e)}}return n.def=i,n}/*! #__NO_SIDE_EFFECTS__ */const USe=r=>BZ(r,GZ),zSe=typeof HTMLElement<"u"?HTMLElement:class{};class QM extends zSe{constructor(e,i={},n){super(),this._def=e,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),w_(()=>{this._connected||(aE(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{const{props:o,styles:a}=n;let l;if(o&&!Gt(o))for(const c in o){const u=o[c];(u===Number||u&&u.type===Number)&&(c in this._props&&(this._props[c]=YA(this._props[c])),(l||(l=Object.create(null)))[qo(c)]=!0)}this._numberProps=l,s&&this._resolveProps(n),this._applyStyles(a),this._update()},i=this._def.__asyncLoader;i?i().then(n=>e(n,!0)):e(this._def)}_resolveProps(e){const{props:i}=e,n=Gt(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of n.map(qo))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(o){this._setProp(s,o)}})}_setAttr(e){let i=this.hasAttribute(e)?this.getAttribute(e):void 0;const n=qo(e);this._numberProps&&this._numberProps[n]&&(i=YA(i)),this._setProp(n,i,!1)}_getProp(e){return this._props[e]}_setProp(e,i,n=!0,s=!0){i!==this._props[e]&&(this._props[e]=i,s&&this._instance&&this._update(),n&&(i===!0?this.setAttribute(cl(e),""):typeof i=="string"||typeof i=="number"?this.setAttribute(cl(e),i+""):i||this.removeAttribute(cl(e))))}_update(){aE(this._createVNode(),this.shadowRoot)}_createVNode(){const e=ke(this._def,dr({},this._props));return this._instance||(e.ce=i=>{this._instance=i,i.isCE=!0;const n=(o,a)=>{this.dispatchEvent(new CustomEvent(o,{detail:a}))};i.emit=(o,...a)=>{n(o,a),cl(o)!==o&&n(cl(o),a)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof QM){i.parent=s._instance,i.provides=s._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(i=>{const n=document.createElement("style");n.textContent=i,this.shadowRoot.appendChild(n)})}}function XSe(r="$style"){{const e=Ol();if(!e)return Nn;const i=e.type.__cssModules;if(!i)return Nn;const n=i[r];return n||Nn}}const DZ=new WeakMap,LZ=new WeakMap,sE=Symbol("_moveCb"),a9=Symbol("_enterCb"),NZ={name:"TransitionGroup",props:dr({},bSe,{tag:String,moveClass:String}),setup(r,{slots:e}){const i=Ol(),n=ZL();let s,o;return WM(()=>{if(!s.length)return;const a=r.moveClass||`${r.name||"v"}-move`;if(!YSe(s[0].el,i.vnode.el,a))return;s.forEach(HSe),s.forEach(QSe);const l=s.filter(jSe);PZ(),l.forEach(c=>{const u=c.el,d=u.style;Ku(u,a),d.transform=d.webkitTransform=d.transitionDuration="";const p=u[sE]=m=>{m&&m.target!==u||(!m||/transform$/.test(m.propertyName))&&(u.removeEventListener("transitionend",p),u[sE]=null,Nf(u,a))};u.addEventListener("transitionend",p)})}),()=>{const a=vn(r),l=EZ(a);let c=a.tag||Fn;if(s=[],o)for(let u=0;u<o.length;u++){const d=o[u];d.el&&d.el instanceof Element&&(s.push(d),Gg(d,Vy(d,l,n,i)),DZ.set(d,d.el.getBoundingClientRect()))}o=e.default?zM(e.default()):[];for(let u=0;u<o.length;u++){const d=o[u];d.key!=null&&Gg(d,Vy(d,l,n,i))}return ke(c,null,o)}}},WSe=r=>delete r.mode;NZ.props;const GSe=NZ;function HSe(r){const e=r.el;e[sE]&&e[sE](),e[a9]&&e[a9]()}function QSe(r){LZ.set(r,r.el.getBoundingClientRect())}function jSe(r){const e=DZ.get(r),i=LZ.get(r),n=e.left-i.left,s=e.top-i.top;if(n||s){const o=r.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${s}px)`,o.transitionDuration="0s",r}}function YSe(r,e,i){const n=r.cloneNode(),s=r[Fy];s&&s.forEach(l=>{l.split(/\s+/).forEach(c=>c&&n.classList.remove(c))}),i.split(/\s+/).forEach(l=>l&&n.classList.add(l)),n.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(n);const{hasTransform:a}=MZ(n);return o.removeChild(n),a}const Op=r=>{const e=r.props["onUpdate:modelValue"]||!1;return Gt(e)?i=>uy(e,i):e};function qSe(r){r.target.composing=!0}function l9(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const fh=Symbol("_assign"),oE={created(r,{modifiers:{lazy:e,trim:i,number:n}},s){r[fh]=Op(s);const o=n||s.props&&s.props.type==="number";ad(r,e?"change":"input",a=>{if(a.target.composing)return;let l=r.value;i&&(l=l.trim()),o&&(l=jA(l)),r[fh](l)}),i&&ad(r,"change",()=>{r.value=r.value.trim()}),e||(ad(r,"compositionstart",qSe),ad(r,"compositionend",l9),ad(r,"change",l9))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,modifiers:{lazy:i,trim:n,number:s}},o){if(r[fh]=Op(o),r.composing)return;const a=(s||r.type==="number")&&!/^0\d/.test(r.value)?jA(r.value):r.value,l=e??"";a!==l&&(document.activeElement===r&&r.type!=="range"&&(i||n&&r.value.trim()===l)||(r.value=l))}},aN={deep:!0,created(r,e,i){r[fh]=Op(i),ad(r,"change",()=>{const n=r._modelValue,s=$y(r),o=r.checked,a=r[fh];if(Gt(n)){const l=BM(n,s),c=l!==-1;if(o&&!c)a(n.concat(s));else if(!o&&c){const u=[...n];u.splice(l,1),a(u)}}else if(c0(n)){const l=new Set(n);o?l.add(s):l.delete(s),a(l)}else a(FZ(r,o))})},mounted:h9,beforeUpdate(r,e,i){r[fh]=Op(i),h9(r,e,i)}};function h9(r,{value:e,oldValue:i},n){r._modelValue=e,Gt(e)?r.checked=BM(e,n.props.value)>-1:c0(e)?r.checked=e.has(n.props.value):e!==i&&(r.checked=bp(e,FZ(r,!0)))}const lN={created(r,{value:e},i){r.checked=bp(e,i.props.value),r[fh]=Op(i),ad(r,"change",()=>{r[fh]($y(r))})},beforeUpdate(r,{value:e,oldValue:i},n){r[fh]=Op(n),e!==i&&(r.checked=bp(e,n.props.value))}},VZ={deep:!0,created(r,{value:e,modifiers:{number:i}},n){const s=c0(e);ad(r,"change",()=>{const o=Array.prototype.filter.call(r.options,a=>a.selected).map(a=>i?jA($y(a)):$y(a));r[fh](r.multiple?s?new Set(o):o:o[0]),r._assigning=!0,w_(()=>{r._assigning=!1})}),r[fh]=Op(n)},mounted(r,{value:e,modifiers:{number:i}}){c9(r,e)},beforeUpdate(r,e,i){r[fh]=Op(i)},updated(r,{value:e,modifiers:{number:i}}){r._assigning||c9(r,e)}};function c9(r,e,i){const n=r.multiple,s=Gt(e);if(!(n&&!s&&!c0(e))){for(let o=0,a=r.options.length;o<a;o++){const l=r.options[o],c=$y(l);if(n)if(s){const u=typeof c;u==="string"||u==="number"?l.selected=e.some(d=>String(d)===String(c)):l.selected=BM(e,c)>-1}else l.selected=e.has(c);else if(bp($y(l),e)){r.selectedIndex!==o&&(r.selectedIndex=o);return}}!n&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function $y(r){return"_value"in r?r._value:r.value}function FZ(r,e){const i=e?"_trueValue":"_falseValue";return i in r?r[i]:e}const $Z={created(r,e,i){AC(r,e,i,null,"created")},mounted(r,e,i){AC(r,e,i,null,"mounted")},beforeUpdate(r,e,i,n){AC(r,e,i,n,"beforeUpdate")},updated(r,e,i,n){AC(r,e,i,n,"updated")}};function UZ(r,e){switch(r){case"SELECT":return VZ;case"TEXTAREA":return oE;default:switch(e){case"checkbox":return aN;case"radio":return lN;default:return oE}}}function AC(r,e,i,n,s){const a=UZ(r.tagName,i.props&&i.props.type)[s];a&&a(r,e,i,n)}function ZSe(){oE.getSSRProps=({value:r})=>({value:r}),lN.getSSRProps=({value:r},e)=>{if(e.props&&bp(e.props.value,r))return{checked:!0}},aN.getSSRProps=({value:r},e)=>{if(Gt(r)){if(e.props&&BM(r,e.props.value)>-1)return{checked:!0}}else if(c0(r)){if(e.props&&r.has(e.props.value))return{checked:!0}}else if(r)return{checked:!0}},$Z.getSSRProps=(r,e)=>{if(typeof e.type!="string")return;const i=UZ(e.type.toUpperCase(),e.props&&e.props.type);if(i.getSSRProps)return i.getSSRProps(r,e)}}const KSe=["ctrl","shift","alt","meta"],JSe={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>KSe.some(i=>r[`${i}Key`]&&!e.includes(i))},eCe=(r,e)=>{const i=r._withMods||(r._withMods={}),n=e.join(".");return i[n]||(i[n]=(s,...o)=>{for(let a=0;a<e.length;a++){const l=JSe[e[a]];if(l&&l(s,e))return}return r(s,...o)})},tCe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},iCe=(r,e)=>{const i=r._withKeys||(r._withKeys={}),n=e.join(".");return i[n]||(i[n]=s=>{if(!("key"in s))return;const o=cl(s.key);if(e.some(a=>a===o||tCe[a]===o))return r(s)})},zZ=dr({patchProp:FSe},xSe);let Lb,u9=!1;function XZ(){return Lb||(Lb=iN(zZ))}function WZ(){return Lb=u9?Lb:cZ(zZ),u9=!0,Lb}const aE=(...r)=>{XZ().render(...r)},GZ=(...r)=>{WZ().hydrate(...r)},HZ=(...r)=>{const e=XZ().createApp(...r),{mount:i}=e;return e.mount=n=>{const s=jZ(n);if(!s)return;const o=e._component;!_i(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const a=i(s,!1,QZ(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e},nCe=(...r)=>{const e=WZ().createApp(...r),{mount:i}=e;return e.mount=n=>{const s=jZ(n);if(s)return i(s,!0,QZ(s))},e};function QZ(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function jZ(r){return Or(r)?document.querySelector(r):r}let d9=!1;const rCe=()=>{d9||(d9=!0,ZSe(),CSe())};/**
* vue v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const sCe=()=>{},oCe=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Fq,BaseTransitionPropsValidators:KL,Comment:io,DeprecationTypes:vSe,EffectScope:LL,ErrorCodes:Wwe,ErrorTypeStrings:cSe,Fragment:Fn,KeepAlive:mOe,ReactiveEffect:Ly,Static:Og,Suspense:Iq,Teleport:qOe,Text:Hg,TrackOpTypes:Uwe,Transition:oN,TransitionGroup:GSe,TriggerOpTypes:zwe,VueElement:QM,assertNumber:Xwe,callWithAsyncErrorHandling:_l,callWithErrorHandling:yd,camelize:qo,capitalize:EO,cloneVNode:lu,compatUtils:gSe,compile:sCe,computed:tr,createApp:HZ,createBlock:Es,createCommentVNode:GM,createElementBlock:pn,createElementVNode:It,createHydrationRenderer:cZ,createPropsRestProxy:MOe,createRenderer:iN,createSSRApp:nCe,createSlots:vOe,createStaticVNode:JOe,createTextVNode:On,createVNode:ke,customRef:GL,defineAsyncComponent:fOe,defineComponent:Td,defineCustomElement:BZ,defineEmits:bOe,defineExpose:wOe,defineModel:COe,defineOptions:OOe,defineProps:xOe,defineSSRCustomElement:USe,defineSlots:SOe,devtools:uSe,effect:cwe,effectScope:lwe,getCurrentInstance:Ol,getCurrentScope:DM,getTransitionRawChildren:zM,guardReactiveProps:rN,h:nE,handleError:d0,hasInjectionContext:NOe,hydrate:GZ,initCustomFormatter:aSe,initDirectivesForSSR:rCe,inject:vy,isMemoSame:CZ,isProxy:UL,isReactive:dy,isReadonly:Ny,isRef:ps,isRuntimeOnly:rSe,isShallow:lw,isVNode:wp,markRaw:xq,mergeDefaults:AOe,mergeModels:EOe,mergeProps:yZ,nextTick:w_,normalizeClass:b_,normalizeProps:iq,normalizeStyle:Up,onActivated:Uq,onBeforeMount:Wq,onBeforeUnmount:IO,onBeforeUpdate:Gq,onDeactivated:zq,onErrorCaptured:Yq,onMounted:nr,onRenderTracked:jq,onRenderTriggered:Qq,onScopeDispose:NL,onServerPrefetch:Hq,onUnmounted:ta,onUpdated:WM,openBlock:ci,popScopeId:S_,provide:mw,proxyRefs:WL,pushScopeId:O_,queuePostFlushCb:ZA,reactive:u0,readonly:Wg,ref:lt,registerRuntimeCompiler:nSe,render:aE,renderList:au,renderSlot:qq,resolveComponent:St,resolveDirective:nOe,resolveDynamicComponent:Pq,resolveFilter:mSe,resolveTransitionHooks:Vy,setBlockTracking:p4,setDevtoolsHook:dSe,setTransitionHooks:Gg,shallowReactive:_q,shallowReadonly:kwe,shallowRef:br,ssrContextKey:Bq,ssrUtils:pSe,stop:uwe,toDisplayString:Cd,toHandlerKey:Ib,toHandlers:yOe,toRaw:vn,toRef:$we,toRefs:MO,toValue:Dwe,transformVNodeArgs:ZOe,triggerRef:Bwe,unref:li,useAttrs:Kq,useCssModule:XSe,useCssVars:TSe,useModel:SZ,useSSRContext:Dq,useSlots:JL,useTransitionState:ZL,vModelCheckbox:aN,vModelDynamic:$Z,vModelRadio:lN,vModelSelect:VZ,vModelText:oE,vShow:IZ,version:TZ,warn:hSe,watch:tn,watchEffect:_d,watchPostEffect:Lq,watchSyncEffect:Nq,withAsyncContext:nA,withCtx:Je,withDefaults:TOe,withDirectives:uOe,withKeys:iCe,withMemo:lSe,withModifiers:eCe,withScopeId:Zwe},Symbol.toStringTag,{value:"Module"})),zd=(r,e)=>{const i=r.__vccOpts||r;for(const[n,s]of e)i[n]=s;return i},aCe={class:"app-item"},lCe={__name:"AppItem",props:{routeData:{id:"",title:"",comp:null,desc:""}},setup(r){const e=r;function i(){location.hash=e.routeData.id}return(n,s)=>{const o=St("Icon"),a=St("Button");return ci(),pn("div",aCe,[ke(a,{type:"success",size:"large",onClick:i},{default:Je(()=>[ke(o,{type:"md-eye"}),On(" "+Cd(r.routeData.title),1)]),_:1})])}}},hCe=zd(lCe,[["__scopeId","data-v-3a83e4c7"]]);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const C_="164",Ym={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},YZ=0,w4=1,qZ=2,cCe=3,uCe=0,hN=1,cN=2,Vc=3,Ad=0,wo=1,ba=2,xd=0,Sg=1,lE=2,O4=3,S4=4,ZZ=5,Yf=100,KZ=101,JZ=102,eK=103,tK=104,iK=200,nK=201,rK=202,sK=203,hE=204,cE=205,oK=206,aK=207,lK=208,hK=209,cK=210,uK=211,dK=212,fK=213,pK=214,mK=0,gK=1,vK=2,gw=3,yK=4,_K=5,xK=6,bK=7,BO=0,wK=1,OK=2,bd=0,SK=1,CK=2,TK=3,uN=4,AK=5,EK=6,MK=7,C4="attached",PK="detached",jM=300,Ed=301,Sp=302,Uy=303,vw=304,T_=306,Cp=1e3,jo=1001,zy=1002,Ss=1003,YM=1004,dCe=1004,cg=1005,fCe=1005,qr=1006,yy=1007,pCe=1007,qh=1008,mCe=1008,lc=1009,kK=1010,IK=1011,dN=1012,fN=1013,Yg=1014,rh=1015,A_=1016,pN=1017,mN=1018,E_=1020,RK=35902,BK=1021,DK=1022,Ca=1023,LK=1024,NK=1025,Cg=1026,Xy=1027,gN=1028,vN=1029,VK=1030,yN=1031,_N=1033,oA=33776,aA=33777,lA=33778,hA=33779,T4=35840,A4=35841,E4=35842,M4=35843,P4=36196,k4=37492,I4=37496,R4=37808,B4=37809,D4=37810,L4=37811,N4=37812,V4=37813,F4=37814,$4=37815,U4=37816,z4=37817,X4=37818,W4=37819,G4=37820,H4=37821,cA=36492,Q4=36494,j4=36495,FK=36283,Y4=36284,q4=36285,Z4=36286,$K=2200,UK=2201,zK=2202,Wy=2300,Gy=2301,uA=2302,ug=2400,dg=2401,yw=2402,qM=2500,xN=2501,gCe=0,vCe=1,yCe=2,XK=3200,WK=3201,Wp=0,GK=1,ld="",al="srgb",Xd="srgb-linear",ZM="display-p3",DO="display-p3-linear",_w="linear",Jn="srgb",xw="rec709",bw="p3",_Ce=0,qm=7680,xCe=7681,bCe=7682,wCe=7683,OCe=34055,SCe=34056,CCe=5386,TCe=512,ACe=513,ECe=514,MCe=515,PCe=516,kCe=517,ICe=518,K4=519,HK=512,QK=513,jK=514,bN=515,YK=516,qK=517,ZK=518,KK=519,ww=35044,RCe=35048,BCe=35040,DCe=35045,LCe=35049,NCe=35041,VCe=35046,FCe=35050,$Ce=35042,UCe="100",J4="300 es",Yc=2e3,Ow=2001;class yu{addEventListener(e,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(i)===-1&&n[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(i);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let o=0,a=s.length;o<a;o++)s[o].call(this,e);e.target=null}}}const fo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let f9=1234567;const Tg=Math.PI/180,Hy=180/Math.PI;function xl(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(fo[r&255]+fo[r>>8&255]+fo[r>>16&255]+fo[r>>24&255]+"-"+fo[e&255]+fo[e>>8&255]+"-"+fo[e>>16&15|64]+fo[e>>24&255]+"-"+fo[i&63|128]+fo[i>>8&255]+"-"+fo[i>>16&255]+fo[i>>24&255]+fo[n&255]+fo[n>>8&255]+fo[n>>16&255]+fo[n>>24&255]).toLowerCase()}function Ur(r,e,i){return Math.max(e,Math.min(i,r))}function wN(r,e){return(r%e+e)%e}function zCe(r,e,i,n,s){return n+(r-e)*(s-n)/(i-e)}function XCe(r,e,i){return r!==e?(i-r)/(e-r):0}function Nb(r,e,i){return(1-i)*r+i*e}function WCe(r,e,i,n){return Nb(r,e,1-Math.exp(-i*n))}function GCe(r,e=1){return e-Math.abs(wN(r,e*2)-e)}function HCe(r,e,i){return r<=e?0:r>=i?1:(r=(r-e)/(i-e),r*r*(3-2*r))}function QCe(r,e,i){return r<=e?0:r>=i?1:(r=(r-e)/(i-e),r*r*r*(r*(r*6-15)+10))}function jCe(r,e){return r+Math.floor(Math.random()*(e-r+1))}function YCe(r,e){return r+Math.random()*(e-r)}function qCe(r){return r*(.5-Math.random())}function ZCe(r){r!==void 0&&(f9=r);let e=f9+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function KCe(r){return r*Tg}function JCe(r){return r*Hy}function e2e(r){return(r&r-1)===0&&r!==0}function t2e(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function i2e(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function n2e(r,e,i,n,s){const o=Math.cos,a=Math.sin,l=o(i/2),c=a(i/2),u=o((e+n)/2),d=a((e+n)/2),p=o((e-n)/2),m=a((e-n)/2),g=o((n-e)/2),y=a((n-e)/2);switch(s){case"XYX":r.set(l*d,c*p,c*m,l*u);break;case"YZY":r.set(c*m,l*d,c*p,l*u);break;case"ZXZ":r.set(c*p,c*m,l*d,l*u);break;case"XZX":r.set(l*d,c*y,c*g,l*u);break;case"YXY":r.set(c*g,l*d,c*y,l*u);break;case"ZYZ":r.set(c*y,c*g,l*d,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Go(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function zi(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const yo={DEG2RAD:Tg,RAD2DEG:Hy,generateUUID:xl,clamp:Ur,euclideanModulo:wN,mapLinear:zCe,inverseLerp:XCe,lerp:Nb,damp:WCe,pingpong:GCe,smoothstep:HCe,smootherstep:QCe,randInt:jCe,randFloat:YCe,randFloatSpread:qCe,seededRandom:ZCe,degToRad:KCe,radToDeg:JCe,isPowerOfTwo:e2e,ceilPowerOfTwo:t2e,floorPowerOfTwo:i2e,setQuaternionFromProperEuler:n2e,normalize:zi,denormalize:Go};class Ge{constructor(e=0,i=0){Ge.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,i){return this.x=e,this.y=i,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const i=this.x,n=this.y,s=e.elements;return this.x=s[0]*i+s[3]*n+s[6],this.y=s[1]*i+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this}clampLength(e,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(i,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(e)/i;return Math.acos(Ur(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,n=this.y-e.y;return i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this}lerpVectors(e,i,n){return this.x=e.x+(i.x-e.x)*n,this.y=e.y+(i.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this}rotateAround(e,i){const n=Math.cos(i),s=Math.sin(i),o=this.x-e.x,a=this.y-e.y;return this.x=o*n-a*s+e.x,this.y=o*s+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Fi{constructor(e,i,n,s,o,a,l,c,u){Fi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,i,n,s,o,a,l,c,u)}set(e,i,n,s,o,a,l,c,u){const d=this.elements;return d[0]=e,d[1]=s,d[2]=l,d[3]=i,d[4]=o,d[5]=c,d[6]=n,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const i=this.elements,n=e.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this}extractBasis(e,i,n){return e.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const i=e.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const n=e.elements,s=i.elements,o=this.elements,a=n[0],l=n[3],c=n[6],u=n[1],d=n[4],p=n[7],m=n[2],g=n[5],y=n[8],_=s[0],x=s[3],O=s[6],S=s[1],w=s[4],C=s[7],M=s[2],P=s[5],R=s[8];return o[0]=a*_+l*S+c*M,o[3]=a*x+l*w+c*P,o[6]=a*O+l*C+c*R,o[1]=u*_+d*S+p*M,o[4]=u*x+d*w+p*P,o[7]=u*O+d*C+p*R,o[2]=m*_+g*S+y*M,o[5]=m*x+g*w+y*P,o[8]=m*O+g*C+y*R,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=e,i[4]*=e,i[7]*=e,i[2]*=e,i[5]*=e,i[8]*=e,this}determinant(){const e=this.elements,i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return i*a*d-i*l*u-n*o*d+n*l*c+s*o*u-s*a*c}invert(){const e=this.elements,i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],p=d*a-l*u,m=l*c-d*o,g=u*o-a*c,y=i*p+n*m+s*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/y;return e[0]=p*_,e[1]=(s*u-d*n)*_,e[2]=(l*n-s*a)*_,e[3]=m*_,e[4]=(d*i-s*c)*_,e[5]=(s*o-l*i)*_,e[6]=g*_,e[7]=(n*c-u*i)*_,e[8]=(a*i-n*o)*_,this}transpose(){let e;const i=this.elements;return e=i[1],i[1]=i[3],i[3]=e,e=i[2],i[2]=i[6],i[6]=e,e=i[5],i[5]=i[7],i[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const i=this.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this}setUvTransform(e,i,n,s,o,a,l){const c=Math.cos(o),u=Math.sin(o);return this.set(n*c,n*u,-n*(c*a+u*l)+a+e,-s*u,s*c,-s*(-u*a+c*l)+l+i,0,0,1),this}scale(e,i){return this.premultiply(G3.makeScale(e,i)),this}rotate(e){return this.premultiply(G3.makeRotation(-e)),this}translate(e,i){return this.premultiply(G3.makeTranslation(e,i)),this}makeTranslation(e,i){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,i,0,0,1),this}makeRotation(e){const i=Math.cos(e),n=Math.sin(e);return this.set(i,-n,0,n,i,0,0,0,1),this}makeScale(e,i){return this.set(e,0,0,0,i,0,0,0,1),this}equals(e){const i=this.elements,n=e.elements;for(let s=0;s<9;s++)if(i[s]!==n[s])return!1;return!0}fromArray(e,i=0){for(let n=0;n<9;n++)this.elements[n]=e[n+i];return this}toArray(e=[],i=0){const n=this.elements;return e[i]=n[0],e[i+1]=n[1],e[i+2]=n[2],e[i+3]=n[3],e[i+4]=n[4],e[i+5]=n[5],e[i+6]=n[6],e[i+7]=n[7],e[i+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const G3=new Fi;function JK(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const r2e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Zv(r,e){return new r2e[r](e)}function Sw(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function eJ(){const r=Sw("canvas");return r.style.display="block",r}const p9={};function tJ(r){r in p9||(p9[r]=!0,console.warn(r))}const m9=new Fi().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),g9=new Fi().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),EC={[Xd]:{transfer:_w,primaries:xw,toReference:r=>r,fromReference:r=>r},[al]:{transfer:Jn,primaries:xw,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[DO]:{transfer:_w,primaries:bw,toReference:r=>r.applyMatrix3(g9),fromReference:r=>r.applyMatrix3(m9)},[ZM]:{transfer:Jn,primaries:bw,toReference:r=>r.convertSRGBToLinear().applyMatrix3(g9),fromReference:r=>r.applyMatrix3(m9).convertLinearToSRGB()}},s2e=new Set([Xd,DO]),Ln={enabled:!0,_workingColorSpace:Xd,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!s2e.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,i){if(this.enabled===!1||e===i||!e||!i)return r;const n=EC[e].toReference,s=EC[i].fromReference;return s(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return EC[r].primaries},getTransfer:function(r){return r===ld?_w:EC[r].transfer}};function _y(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function H3(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let H0;class iJ{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{H0===void 0&&(H0=Sw("canvas")),H0.width=e.width,H0.height=e.height;const n=H0.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),i=H0}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const i=Sw("canvas");i.width=e.width,i.height=e.height;const n=i.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),o=s.data;for(let a=0;a<o.length;a++)o[a]=_y(o[a]/255)*255;return n.putImageData(s,0,0),i}else if(e.data){const i=e.data.slice(0);for(let n=0;n<i.length;n++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[n]=Math.floor(_y(i[n]/255)*255):i[n]=_y(i[n]);return{data:i,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let o2e=0;class fg{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:o2e++}),this.uuid=xl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let a=0,l=s.length;a<l;a++)s[a].isDataTexture?o.push(Q3(s[a].image)):o.push(Q3(s[a]))}else o=Q3(s);n.url=o}return i||(e.images[this.uuid]=n),n}}function Q3(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?iJ.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let a2e=0,Xr=class dA extends yu{constructor(e=dA.DEFAULT_IMAGE,i=dA.DEFAULT_MAPPING,n=jo,s=jo,o=qr,a=qh,l=Ca,c=lc,u=dA.DEFAULT_ANISOTROPY,d=ld){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:a2e++}),this.uuid=xl(),this.name="",this.source=new fg(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),i||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jM)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Cp:e.x=e.x-Math.floor(e.x);break;case jo:e.x=e.x<0?0:1;break;case zy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Cp:e.y=e.y-Math.floor(e.y);break;case jo:e.y=e.y<0?0:1;break;case zy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Xr.DEFAULT_IMAGE=null;Xr.DEFAULT_MAPPING=jM;Xr.DEFAULT_ANISOTROPY=1;class ji{constructor(e=0,i=0,n=0,s=1){ji.prototype.isVector4=!0,this.x=e,this.y=i,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,i,n,s){return this.x=e,this.y=i,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this.w=e.w+i.w,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this.w+=e.w*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this.w=e.w-i.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const i=this.x,n=this.y,s=this.z,o=this.w,a=e.elements;return this.x=a[0]*i+a[4]*n+a[8]*s+a[12]*o,this.y=a[1]*i+a[5]*n+a[9]*s+a[13]*o,this.z=a[2]*i+a[6]*n+a[10]*s+a[14]*o,this.w=a[3]*i+a[7]*n+a[11]*s+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const i=Math.sqrt(1-e.w*e.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/i,this.y=e.y/i,this.z=e.z/i),this}setAxisAngleFromRotationMatrix(e){let i,n,s,o;const c=e.elements,u=c[0],d=c[4],p=c[8],m=c[1],g=c[5],y=c[9],_=c[2],x=c[6],O=c[10];if(Math.abs(d-m)<.01&&Math.abs(p-_)<.01&&Math.abs(y-x)<.01){if(Math.abs(d+m)<.1&&Math.abs(p+_)<.1&&Math.abs(y+x)<.1&&Math.abs(u+g+O-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const w=(u+1)/2,C=(g+1)/2,M=(O+1)/2,P=(d+m)/4,R=(p+_)/4,k=(y+x)/4;return w>C&&w>M?w<.01?(n=0,s=.707106781,o=.707106781):(n=Math.sqrt(w),s=P/n,o=R/n):C>M?C<.01?(n=.707106781,s=0,o=.707106781):(s=Math.sqrt(C),n=P/s,o=k/s):M<.01?(n=.707106781,s=.707106781,o=0):(o=Math.sqrt(M),n=R/o,s=k/o),this.set(n,s,o,i),this}let S=Math.sqrt((x-y)*(x-y)+(p-_)*(p-_)+(m-d)*(m-d));return Math.abs(S)<.001&&(S=1),this.x=(x-y)/S,this.y=(p-_)/S,this.z=(m-d)/S,this.w=Math.acos((u+g+O-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this.w=Math.max(e.w,Math.min(i.w,this.w)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this.w=Math.max(e,Math.min(i,this.w)),this}clampLength(e,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(i,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this.w+=(e.w-this.w)*i,this}lerpVectors(e,i,n){return this.x=e.x+(i.x-e.x)*n,this.y=e.y+(i.y-e.y)*n,this.z=e.z+(i.z-e.z)*n,this.w=e.w+(i.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this.w=e[i+3],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e[i+3]=this.w,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this.w=e.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nJ extends yu{constructor(e=1,i=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=i,this.depth=1,this.scissor=new ji(0,0,e,i),this.scissorTest=!1,this.viewport=new ji(0,0,e,i);const s={width:e,height:i,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:qr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const o=new Xr(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);o.flipY=!1,o.generateMipmaps=n.generateMipmaps,o.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let l=0;l<a;l++)this.textures[l]=o.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,i,n=1){if(this.width!==e||this.height!==i||this.depth!==n){this.width=e,this.height=i,this.depth=n;for(let s=0,o=this.textures.length;s<o;s++)this.textures[s].image.width=e,this.textures[s].image.height=i,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,s=e.textures.length;n<s;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const i=Object.assign({},e.texture.image);return this.texture.source=new fg(i),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class yh extends nJ{constructor(e=1,i=1,n={}){super(e,i,n),this.isWebGLRenderTarget=!0}}class KM extends Xr{constructor(e=null,i=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:i,height:n,depth:s},this.magFilter=Ss,this.minFilter=Ss,this.wrapR=jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class l2e extends yh{constructor(e=1,i=1,n=1,s={}){super(e,i,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new KM(null,e,i,n),this.texture.isRenderTargetTexture=!0}}class ON extends Xr{constructor(e=null,i=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:i,height:n,depth:s},this.magFilter=Ss,this.minFilter=Ss,this.wrapR=jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class h2e extends yh{constructor(e=1,i=1,n=1,s={}){super(e,i,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new ON(null,e,i,n),this.texture.isRenderTargetTexture=!0}}class ds{constructor(e=0,i=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=i,this._z=n,this._w=s}static slerpFlat(e,i,n,s,o,a,l){let c=n[s+0],u=n[s+1],d=n[s+2],p=n[s+3];const m=o[a+0],g=o[a+1],y=o[a+2],_=o[a+3];if(l===0){e[i+0]=c,e[i+1]=u,e[i+2]=d,e[i+3]=p;return}if(l===1){e[i+0]=m,e[i+1]=g,e[i+2]=y,e[i+3]=_;return}if(p!==_||c!==m||u!==g||d!==y){let x=1-l;const O=c*m+u*g+d*y+p*_,S=O>=0?1:-1,w=1-O*O;if(w>Number.EPSILON){const M=Math.sqrt(w),P=Math.atan2(M,O*S);x=Math.sin(x*P)/M,l=Math.sin(l*P)/M}const C=l*S;if(c=c*x+m*C,u=u*x+g*C,d=d*x+y*C,p=p*x+_*C,x===1-l){const M=1/Math.sqrt(c*c+u*u+d*d+p*p);c*=M,u*=M,d*=M,p*=M}}e[i]=c,e[i+1]=u,e[i+2]=d,e[i+3]=p}static multiplyQuaternionsFlat(e,i,n,s,o,a){const l=n[s],c=n[s+1],u=n[s+2],d=n[s+3],p=o[a],m=o[a+1],g=o[a+2],y=o[a+3];return e[i]=l*y+d*p+c*g-u*m,e[i+1]=c*y+d*m+u*p-l*g,e[i+2]=u*y+d*g+l*m-c*p,e[i+3]=d*y-l*p-c*m-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,i,n,s){return this._x=e,this._y=i,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,i=!0){const n=e._x,s=e._y,o=e._z,a=e._order,l=Math.cos,c=Math.sin,u=l(n/2),d=l(s/2),p=l(o/2),m=c(n/2),g=c(s/2),y=c(o/2);switch(a){case"XYZ":this._x=m*d*p+u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p-m*g*y;break;case"YXZ":this._x=m*d*p+u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p+m*g*y;break;case"ZXY":this._x=m*d*p-u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p-m*g*y;break;case"ZYX":this._x=m*d*p-u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p+m*g*y;break;case"YZX":this._x=m*d*p+u*g*y,this._y=u*g*p+m*d*y,this._z=u*d*y-m*g*p,this._w=u*d*p-m*g*y;break;case"XZY":this._x=m*d*p-u*g*y,this._y=u*g*p-m*d*y,this._z=u*d*y+m*g*p,this._w=u*d*p+m*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,i){const n=i/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const i=e.elements,n=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],u=i[2],d=i[6],p=i[10],m=n+l+p;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-c)*g,this._y=(o-u)*g,this._z=(a-s)*g}else if(n>l&&n>p){const g=2*Math.sqrt(1+n-l-p);this._w=(d-c)/g,this._x=.25*g,this._y=(s+a)/g,this._z=(o+u)/g}else if(l>p){const g=2*Math.sqrt(1+l-n-p);this._w=(o-u)/g,this._x=(s+a)/g,this._y=.25*g,this._z=(c+d)/g}else{const g=2*Math.sqrt(1+p-n-l);this._w=(a-s)/g,this._x=(o+u)/g,this._y=(c+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,i){let n=e.dot(i)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*i.z-e.z*i.y,this._y=e.z*i.x-e.x*i.z,this._z=e.x*i.y-e.y*i.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ur(this.dot(e),-1,1)))}rotateTowards(e,i){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,i/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,i){const n=e._x,s=e._y,o=e._z,a=e._w,l=i._x,c=i._y,u=i._z,d=i._w;return this._x=n*d+a*l+s*u-o*c,this._y=s*d+a*c+o*l-n*u,this._z=o*d+a*u+n*c-s*l,this._w=a*d-n*l-s*c-o*u,this._onChangeCallback(),this}slerp(e,i){if(i===0)return this;if(i===1)return this.copy(e);const n=this._x,s=this._y,o=this._z,a=this._w;let l=a*e._w+n*e._x+s*e._y+o*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=n,this._y=s,this._z=o,this;const c=1-l*l;if(c<=Number.EPSILON){const g=1-i;return this._w=g*a+i*this._w,this._x=g*n+i*this._x,this._y=g*s+i*this._y,this._z=g*o+i*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,l),p=Math.sin((1-i)*d)/u,m=Math.sin(i*d)/u;return this._w=a*p+this._w*m,this._x=n*p+this._x*m,this._y=s*p+this._y*m,this._z=o*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,i,n){return this.copy(e).slerp(i,n)}random(){const e=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(i),o*Math.cos(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,i=0){return this._x=e[i],this._y=e[i+1],this._z=e[i+2],this._w=e[i+3],this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._w,e}fromBufferAttribute(e,i){return this._x=e.getX(i),this._y=e.getY(i),this._z=e.getZ(i),this._w=e.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,i=0,n=0){le.prototype.isVector3=!0,this.x=e,this.y=i,this.z=n}set(e,i,n){return n===void 0&&(n=this.z),this.x=e,this.y=i,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,i){return this.x=e.x*i.x,this.y=e.y*i.y,this.z=e.z*i.z,this}applyEuler(e){return this.applyQuaternion(v9.setFromEuler(e))}applyAxisAngle(e,i){return this.applyQuaternion(v9.setFromAxisAngle(e,i))}applyMatrix3(e){const i=this.x,n=this.y,s=this.z,o=e.elements;return this.x=o[0]*i+o[3]*n+o[6]*s,this.y=o[1]*i+o[4]*n+o[7]*s,this.z=o[2]*i+o[5]*n+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const i=this.x,n=this.y,s=this.z,o=e.elements,a=1/(o[3]*i+o[7]*n+o[11]*s+o[15]);return this.x=(o[0]*i+o[4]*n+o[8]*s+o[12])*a,this.y=(o[1]*i+o[5]*n+o[9]*s+o[13])*a,this.z=(o[2]*i+o[6]*n+o[10]*s+o[14])*a,this}applyQuaternion(e){const i=this.x,n=this.y,s=this.z,o=e.x,a=e.y,l=e.z,c=e.w,u=2*(a*s-l*n),d=2*(l*i-o*s),p=2*(o*n-a*i);return this.x=i+c*u+a*p-l*d,this.y=n+c*d+l*u-o*p,this.z=s+c*p+o*d-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const i=this.x,n=this.y,s=this.z,o=e.elements;return this.x=o[0]*i+o[4]*n+o[8]*s,this.y=o[1]*i+o[5]*n+o[9]*s,this.z=o[2]*i+o[6]*n+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this}clampLength(e,i){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(i,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this}lerpVectors(e,i,n){return this.x=e.x+(i.x-e.x)*n,this.y=e.y+(i.y-e.y)*n,this.z=e.z+(i.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,i){const n=e.x,s=e.y,o=e.z,a=i.x,l=i.y,c=i.z;return this.x=s*c-o*l,this.y=o*a-n*c,this.z=n*l-s*a,this}projectOnVector(e){const i=e.lengthSq();if(i===0)return this.set(0,0,0);const n=e.dot(this)/i;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return j3.copy(this).projectOnVector(e),this.sub(j3)}reflect(e){return this.sub(j3.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;const n=this.dot(e)/i;return Math.acos(Ur(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const i=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return i*i+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,i,n){const s=Math.sin(i)*e;return this.x=s*Math.sin(n),this.y=Math.cos(i)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,i,n){return this.x=e*Math.sin(i),this.y=n,this.z=e*Math.cos(i),this}setFromMatrixPosition(e){const i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(e){const i=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=i,this.y=n,this.z=s,this}setFromMatrixColumn(e,i){return this.fromArray(e.elements,i*4)}setFromMatrix3Column(e,i){return this.fromArray(e.elements,i*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,i=Math.random()*2-1,n=Math.sqrt(1-i*i);return this.x=n*Math.cos(e),this.y=i,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const j3=new le,v9=new ds;class so{constructor(e=new le(1/0,1/0,1/0),i=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromArray(e){this.makeEmpty();for(let i=0,n=e.length;i<n;i+=3)this.expandByPoint(Dh.fromArray(e,i));return this}setFromBufferAttribute(e){this.makeEmpty();for(let i=0,n=e.count;i<n;i++)this.expandByPoint(Dh.fromBufferAttribute(e,i));return this}setFromPoints(e){this.makeEmpty();for(let i=0,n=e.length;i<n;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){const n=Dh.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,i=!1){return this.makeEmpty(),this.expandByObject(e,i)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,i=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const o=n.getAttribute("position");if(i===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=o.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,Dh):Dh.fromBufferAttribute(o,a),Dh.applyMatrix4(e.matrixWorld),this.expandByPoint(Dh);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),MC.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),MC.copy(n.boundingBox)),MC.applyMatrix4(e.matrixWorld),this.union(MC)}const s=e.children;for(let o=0,a=s.length;o<a;o++)this.expandByObject(s[o],i);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Dh),Dh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let i,n;return e.normal.x>0?(i=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(i=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(i+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(i+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(i+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(i+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),i<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ex),PC.subVectors(this.max,Ex),Q0.subVectors(e.a,Ex),j0.subVectors(e.b,Ex),Y0.subVectors(e.c,Ex),gf.subVectors(j0,Q0),vf.subVectors(Y0,j0),ym.subVectors(Q0,Y0);let i=[0,-gf.z,gf.y,0,-vf.z,vf.y,0,-ym.z,ym.y,gf.z,0,-gf.x,vf.z,0,-vf.x,ym.z,0,-ym.x,-gf.y,gf.x,0,-vf.y,vf.x,0,-ym.y,ym.x,0];return!Y3(i,Q0,j0,Y0,PC)||(i=[1,0,0,0,1,0,0,0,1],!Y3(i,Q0,j0,Y0,PC))?!1:(kC.crossVectors(gf,vf),i=[kC.x,kC.y,kC.z],Y3(i,Q0,j0,Y0,PC))}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dh).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Dh).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ru[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ru[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ru[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ru[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ru[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ru[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ru[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ru[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ru),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ru=[new le,new le,new le,new le,new le,new le,new le,new le],Dh=new le,MC=new so,Q0=new le,j0=new le,Y0=new le,gf=new le,vf=new le,ym=new le,Ex=new le,PC=new le,kC=new le,_m=new le;function Y3(r,e,i,n,s){for(let o=0,a=r.length-3;o<=a;o+=3){_m.fromArray(r,o);const l=s.x*Math.abs(_m.x)+s.y*Math.abs(_m.y)+s.z*Math.abs(_m.z),c=e.dot(_m),u=i.dot(_m),d=n.dot(_m);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>l)return!1}return!0}const c2e=new so,Mx=new le,q3=new le;class oo{constructor(e=new le,i=-1){this.isSphere=!0,this.center=e,this.radius=i}set(e,i){return this.center.copy(e),this.radius=i,this}setFromPoints(e,i){const n=this.center;i!==void 0?n.copy(i):c2e.setFromPoints(e).getCenter(n);let s=0;for(let o=0,a=e.length;o<a;o++)s=Math.max(s,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const i=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=i*i}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,i){const n=this.center.distanceToSquared(e);return i.copy(e),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Mx.subVectors(e,this.center);const i=Mx.lengthSq();if(i>this.radius*this.radius){const n=Math.sqrt(i),s=(n-this.radius)*.5;this.center.addScaledVector(Mx,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(q3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Mx.copy(e.center).add(q3)),this.expandByPoint(Mx.copy(e.center).sub(q3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Bu=new le,Z3=new le,IC=new le,yf=new le,K3=new le,RC=new le,J3=new le;class f0{constructor(e=new le,i=new le(0,0,-1)){this.origin=e,this.direction=i}set(e,i){return this.origin.copy(e),this.direction.copy(i),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,i){return i.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bu)),this}closestPointToPoint(e,i){i.subVectors(e,this.origin);const n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const i=Bu.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(Bu.copy(this.origin).addScaledVector(this.direction,i),Bu.distanceToSquared(e))}distanceSqToSegment(e,i,n,s){Z3.copy(e).add(i).multiplyScalar(.5),IC.copy(i).sub(e).normalize(),yf.copy(this.origin).sub(Z3);const o=e.distanceTo(i)*.5,a=-this.direction.dot(IC),l=yf.dot(this.direction),c=-yf.dot(IC),u=yf.lengthSq(),d=Math.abs(1-a*a);let p,m,g,y;if(d>0)if(p=a*c-l,m=a*l-c,y=o*d,p>=0)if(m>=-y)if(m<=y){const _=1/d;p*=_,m*=_,g=p*(p+a*m+2*l)+m*(a*p+m+2*c)+u}else m=o,p=Math.max(0,-(a*m+l)),g=-p*p+m*(m+2*c)+u;else m=-o,p=Math.max(0,-(a*m+l)),g=-p*p+m*(m+2*c)+u;else m<=-y?(p=Math.max(0,-(-a*o+l)),m=p>0?-o:Math.min(Math.max(-o,-c),o),g=-p*p+m*(m+2*c)+u):m<=y?(p=0,m=Math.min(Math.max(-o,-c),o),g=m*(m+2*c)+u):(p=Math.max(0,-(a*o+l)),m=p>0?o:Math.min(Math.max(-o,-c),o),g=-p*p+m*(m+2*c)+u);else m=a>0?-o:o,p=Math.max(0,-(a*m+l)),g=-p*p+m*(m+2*c)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,p),s&&s.copy(Z3).addScaledVector(IC,m),g}intersectSphere(e,i){Bu.subVectors(e.center,this.origin);const n=Bu.dot(this.direction),s=Bu.dot(Bu)-n*n,o=e.radius*e.radius;if(s>o)return null;const a=Math.sqrt(o-s),l=n-a,c=n+a;return c<0?null:l<0?this.at(c,i):this.at(l,i)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const i=e.normal.dot(this.direction);if(i===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/i;return n>=0?n:null}intersectPlane(e,i){const n=this.distanceToPlane(e);return n===null?null:this.at(n,i)}intersectsPlane(e){const i=e.distanceToPoint(this.origin);return i===0||e.normal.dot(this.direction)*i<0}intersectBox(e,i){let n,s,o,a,l,c;const u=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,m=this.origin;return u>=0?(n=(e.min.x-m.x)*u,s=(e.max.x-m.x)*u):(n=(e.max.x-m.x)*u,s=(e.min.x-m.x)*u),d>=0?(o=(e.min.y-m.y)*d,a=(e.max.y-m.y)*d):(o=(e.max.y-m.y)*d,a=(e.min.y-m.y)*d),n>a||o>s||((o>n||isNaN(n))&&(n=o),(a<s||isNaN(s))&&(s=a),p>=0?(l=(e.min.z-m.z)*p,c=(e.max.z-m.z)*p):(l=(e.max.z-m.z)*p,c=(e.min.z-m.z)*p),n>c||l>s)||((l>n||n!==n)&&(n=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(n>=0?n:s,i)}intersectsBox(e){return this.intersectBox(e,Bu)!==null}intersectTriangle(e,i,n,s,o){K3.subVectors(i,e),RC.subVectors(n,e),J3.crossVectors(K3,RC);let a=this.direction.dot(J3),l;if(a>0){if(s)return null;l=1}else if(a<0)l=-1,a=-a;else return null;yf.subVectors(this.origin,e);const c=l*this.direction.dot(RC.crossVectors(yf,RC));if(c<0)return null;const u=l*this.direction.dot(K3.cross(yf));if(u<0||c+u>a)return null;const d=-l*yf.dot(J3);return d<0?null:this.at(d/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wt{constructor(e,i,n,s,o,a,l,c,u,d,p,m,g,y,_,x){wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,i,n,s,o,a,l,c,u,d,p,m,g,y,_,x)}set(e,i,n,s,o,a,l,c,u,d,p,m,g,y,_,x){const O=this.elements;return O[0]=e,O[4]=i,O[8]=n,O[12]=s,O[1]=o,O[5]=a,O[9]=l,O[13]=c,O[2]=u,O[6]=d,O[10]=p,O[14]=m,O[3]=g,O[7]=y,O[11]=_,O[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wt().fromArray(this.elements)}copy(e){const i=this.elements,n=e.elements;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this}copyPosition(e){const i=this.elements,n=e.elements;return i[12]=n[12],i[13]=n[13],i[14]=n[14],this}setFromMatrix3(e){const i=e.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(e,i,n){return e.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,i,n){return this.set(e.x,i.x,n.x,0,e.y,i.y,n.y,0,e.z,i.z,n.z,0,0,0,0,1),this}extractRotation(e){const i=this.elements,n=e.elements,s=1/q0.setFromMatrixColumn(e,0).length(),o=1/q0.setFromMatrixColumn(e,1).length(),a=1/q0.setFromMatrixColumn(e,2).length();return i[0]=n[0]*s,i[1]=n[1]*s,i[2]=n[2]*s,i[3]=0,i[4]=n[4]*o,i[5]=n[5]*o,i[6]=n[6]*o,i[7]=0,i[8]=n[8]*a,i[9]=n[9]*a,i[10]=n[10]*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(e){const i=this.elements,n=e.x,s=e.y,o=e.z,a=Math.cos(n),l=Math.sin(n),c=Math.cos(s),u=Math.sin(s),d=Math.cos(o),p=Math.sin(o);if(e.order==="XYZ"){const m=a*d,g=a*p,y=l*d,_=l*p;i[0]=c*d,i[4]=-c*p,i[8]=u,i[1]=g+y*u,i[5]=m-_*u,i[9]=-l*c,i[2]=_-m*u,i[6]=y+g*u,i[10]=a*c}else if(e.order==="YXZ"){const m=c*d,g=c*p,y=u*d,_=u*p;i[0]=m+_*l,i[4]=y*l-g,i[8]=a*u,i[1]=a*p,i[5]=a*d,i[9]=-l,i[2]=g*l-y,i[6]=_+m*l,i[10]=a*c}else if(e.order==="ZXY"){const m=c*d,g=c*p,y=u*d,_=u*p;i[0]=m-_*l,i[4]=-a*p,i[8]=y+g*l,i[1]=g+y*l,i[5]=a*d,i[9]=_-m*l,i[2]=-a*u,i[6]=l,i[10]=a*c}else if(e.order==="ZYX"){const m=a*d,g=a*p,y=l*d,_=l*p;i[0]=c*d,i[4]=y*u-g,i[8]=m*u+_,i[1]=c*p,i[5]=_*u+m,i[9]=g*u-y,i[2]=-u,i[6]=l*c,i[10]=a*c}else if(e.order==="YZX"){const m=a*c,g=a*u,y=l*c,_=l*u;i[0]=c*d,i[4]=_-m*p,i[8]=y*p+g,i[1]=p,i[5]=a*d,i[9]=-l*d,i[2]=-u*d,i[6]=g*p+y,i[10]=m-_*p}else if(e.order==="XZY"){const m=a*c,g=a*u,y=l*c,_=l*u;i[0]=c*d,i[4]=-p,i[8]=u*d,i[1]=m*p+_,i[5]=a*d,i[9]=g*p-y,i[2]=y*p-g,i[6]=l*d,i[10]=_*p+m}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(e){return this.compose(u2e,e,d2e)}lookAt(e,i,n){const s=this.elements;return Ha.subVectors(e,i),Ha.lengthSq()===0&&(Ha.z=1),Ha.normalize(),_f.crossVectors(n,Ha),_f.lengthSq()===0&&(Math.abs(n.z)===1?Ha.x+=1e-4:Ha.z+=1e-4,Ha.normalize(),_f.crossVectors(n,Ha)),_f.normalize(),BC.crossVectors(Ha,_f),s[0]=_f.x,s[4]=BC.x,s[8]=Ha.x,s[1]=_f.y,s[5]=BC.y,s[9]=Ha.y,s[2]=_f.z,s[6]=BC.z,s[10]=Ha.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){const n=e.elements,s=i.elements,o=this.elements,a=n[0],l=n[4],c=n[8],u=n[12],d=n[1],p=n[5],m=n[9],g=n[13],y=n[2],_=n[6],x=n[10],O=n[14],S=n[3],w=n[7],C=n[11],M=n[15],P=s[0],R=s[4],k=s[8],I=s[12],A=s[1],D=s[5],V=s[9],B=s[13],L=s[2],F=s[6],$=s[10],z=s[14],H=s[3],K=s[7],J=s[11],ne=s[15];return o[0]=a*P+l*A+c*L+u*H,o[4]=a*R+l*D+c*F+u*K,o[8]=a*k+l*V+c*$+u*J,o[12]=a*I+l*B+c*z+u*ne,o[1]=d*P+p*A+m*L+g*H,o[5]=d*R+p*D+m*F+g*K,o[9]=d*k+p*V+m*$+g*J,o[13]=d*I+p*B+m*z+g*ne,o[2]=y*P+_*A+x*L+O*H,o[6]=y*R+_*D+x*F+O*K,o[10]=y*k+_*V+x*$+O*J,o[14]=y*I+_*B+x*z+O*ne,o[3]=S*P+w*A+C*L+M*H,o[7]=S*R+w*D+C*F+M*K,o[11]=S*k+w*V+C*$+M*J,o[15]=S*I+w*B+C*z+M*ne,this}multiplyScalar(e){const i=this.elements;return i[0]*=e,i[4]*=e,i[8]*=e,i[12]*=e,i[1]*=e,i[5]*=e,i[9]*=e,i[13]*=e,i[2]*=e,i[6]*=e,i[10]*=e,i[14]*=e,i[3]*=e,i[7]*=e,i[11]*=e,i[15]*=e,this}determinant(){const e=this.elements,i=e[0],n=e[4],s=e[8],o=e[12],a=e[1],l=e[5],c=e[9],u=e[13],d=e[2],p=e[6],m=e[10],g=e[14],y=e[3],_=e[7],x=e[11],O=e[15];return y*(+o*c*p-s*u*p-o*l*m+n*u*m+s*l*g-n*c*g)+_*(+i*c*g-i*u*m+o*a*m-s*a*g+s*u*d-o*c*d)+x*(+i*u*p-i*l*g-o*a*p+n*a*g+o*l*d-n*u*d)+O*(-s*l*d-i*c*p+i*l*m+s*a*p-n*a*m+n*c*d)}transpose(){const e=this.elements;let i;return i=e[1],e[1]=e[4],e[4]=i,i=e[2],e[2]=e[8],e[8]=i,i=e[6],e[6]=e[9],e[9]=i,i=e[3],e[3]=e[12],e[12]=i,i=e[7],e[7]=e[13],e[13]=i,i=e[11],e[11]=e[14],e[14]=i,this}setPosition(e,i,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=i,s[14]=n),this}invert(){const e=this.elements,i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],p=e[9],m=e[10],g=e[11],y=e[12],_=e[13],x=e[14],O=e[15],S=p*x*u-_*m*u+_*c*g-l*x*g-p*c*O+l*m*O,w=y*m*u-d*x*u-y*c*g+a*x*g+d*c*O-a*m*O,C=d*_*u-y*p*u+y*l*g-a*_*g-d*l*O+a*p*O,M=y*p*c-d*_*c-y*l*m+a*_*m+d*l*x-a*p*x,P=i*S+n*w+s*C+o*M;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/P;return e[0]=S*R,e[1]=(_*m*o-p*x*o-_*s*g+n*x*g+p*s*O-n*m*O)*R,e[2]=(l*x*o-_*c*o+_*s*u-n*x*u-l*s*O+n*c*O)*R,e[3]=(p*c*o-l*m*o-p*s*u+n*m*u+l*s*g-n*c*g)*R,e[4]=w*R,e[5]=(d*x*o-y*m*o+y*s*g-i*x*g-d*s*O+i*m*O)*R,e[6]=(y*c*o-a*x*o-y*s*u+i*x*u+a*s*O-i*c*O)*R,e[7]=(a*m*o-d*c*o+d*s*u-i*m*u-a*s*g+i*c*g)*R,e[8]=C*R,e[9]=(y*p*o-d*_*o-y*n*g+i*_*g+d*n*O-i*p*O)*R,e[10]=(a*_*o-y*l*o+y*n*u-i*_*u-a*n*O+i*l*O)*R,e[11]=(d*l*o-a*p*o-d*n*u+i*p*u+a*n*g-i*l*g)*R,e[12]=M*R,e[13]=(d*_*s-y*p*s+y*n*m-i*_*m-d*n*x+i*p*x)*R,e[14]=(y*l*s-a*_*s-y*n*c+i*_*c+a*n*x-i*l*x)*R,e[15]=(a*p*s-d*l*s+d*n*c-i*p*c-a*n*m+i*l*m)*R,this}scale(e){const i=this.elements,n=e.x,s=e.y,o=e.z;return i[0]*=n,i[4]*=s,i[8]*=o,i[1]*=n,i[5]*=s,i[9]*=o,i[2]*=n,i[6]*=s,i[10]*=o,i[3]*=n,i[7]*=s,i[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(i,n,s))}makeTranslation(e,i,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,i,0,0,1,n,0,0,0,1),this}makeRotationX(e){const i=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1),this}makeRotationY(e){const i=Math.cos(e),n=Math.sin(e);return this.set(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1),this}makeRotationZ(e){const i=Math.cos(e),n=Math.sin(e);return this.set(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,i){const n=Math.cos(i),s=Math.sin(i),o=1-n,a=e.x,l=e.y,c=e.z,u=o*a,d=o*l;return this.set(u*a+n,u*l-s*c,u*c+s*l,0,u*l+s*c,d*l+n,d*c-s*a,0,u*c-s*l,d*c+s*a,o*c*c+n,0,0,0,0,1),this}makeScale(e,i,n){return this.set(e,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,i,n,s,o,a){return this.set(1,n,o,0,e,1,a,0,i,s,1,0,0,0,0,1),this}compose(e,i,n){const s=this.elements,o=i._x,a=i._y,l=i._z,c=i._w,u=o+o,d=a+a,p=l+l,m=o*u,g=o*d,y=o*p,_=a*d,x=a*p,O=l*p,S=c*u,w=c*d,C=c*p,M=n.x,P=n.y,R=n.z;return s[0]=(1-(_+O))*M,s[1]=(g+C)*M,s[2]=(y-w)*M,s[3]=0,s[4]=(g-C)*P,s[5]=(1-(m+O))*P,s[6]=(x+S)*P,s[7]=0,s[8]=(y+w)*R,s[9]=(x-S)*R,s[10]=(1-(m+_))*R,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,i,n){const s=this.elements;let o=q0.set(s[0],s[1],s[2]).length();const a=q0.set(s[4],s[5],s[6]).length(),l=q0.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Lh.copy(this);const u=1/o,d=1/a,p=1/l;return Lh.elements[0]*=u,Lh.elements[1]*=u,Lh.elements[2]*=u,Lh.elements[4]*=d,Lh.elements[5]*=d,Lh.elements[6]*=d,Lh.elements[8]*=p,Lh.elements[9]*=p,Lh.elements[10]*=p,i.setFromRotationMatrix(Lh),n.x=o,n.y=a,n.z=l,this}makePerspective(e,i,n,s,o,a,l=Yc){const c=this.elements,u=2*o/(i-e),d=2*o/(n-s),p=(i+e)/(i-e),m=(n+s)/(n-s);let g,y;if(l===Yc)g=-(a+o)/(a-o),y=-2*a*o/(a-o);else if(l===Ow)g=-a/(a-o),y=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=d,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,i,n,s,o,a,l=Yc){const c=this.elements,u=1/(i-e),d=1/(n-s),p=1/(a-o),m=(i+e)*u,g=(n+s)*d;let y,_;if(l===Yc)y=(a+o)*p,_=-2*p;else if(l===Ow)y=o*p,_=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-g,c[2]=0,c[6]=0,c[10]=_,c[14]=-y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const i=this.elements,n=e.elements;for(let s=0;s<16;s++)if(i[s]!==n[s])return!1;return!0}fromArray(e,i=0){for(let n=0;n<16;n++)this.elements[n]=e[n+i];return this}toArray(e=[],i=0){const n=this.elements;return e[i]=n[0],e[i+1]=n[1],e[i+2]=n[2],e[i+3]=n[3],e[i+4]=n[4],e[i+5]=n[5],e[i+6]=n[6],e[i+7]=n[7],e[i+8]=n[8],e[i+9]=n[9],e[i+10]=n[10],e[i+11]=n[11],e[i+12]=n[12],e[i+13]=n[13],e[i+14]=n[14],e[i+15]=n[15],e}}const q0=new le,Lh=new wt,u2e=new le(0,0,0),d2e=new le(1,1,1),_f=new le,BC=new le,Ha=new le,y9=new wt,_9=new ds;class Cs{constructor(e=0,i=0,n=0,s=Cs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,n,s=this._order){return this._x=e,this._y=i,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,n=!0){const s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],p=s[2],m=s[6],g=s[10];switch(i){case"XYZ":this._y=Math.asin(Ur(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ur(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ur(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Ur(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Ur(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-Ur(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,n){return y9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(y9,i,n)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return _9.setFromEuler(this),this.setFromQuaternion(_9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cs.DEFAULT_ORDER="XYZ";class JM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let f2e=0;const x9=new le,Z0=new ds,Du=new wt,DC=new le,Px=new le,p2e=new le,m2e=new ds,b9=new le(1,0,0),w9=new le(0,1,0),O9=new le(0,0,1),S9={type:"added"},g2e={type:"removed"},K0={type:"childadded",child:null},eI={type:"childremoved",child:null};class dn extends yu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:f2e++}),this.uuid=xl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dn.DEFAULT_UP.clone();const e=new le,i=new Cs,n=new ds,s=new le(1,1,1);function o(){n.setFromEuler(i,!1)}function a(){i.setFromQuaternion(n,void 0,!1)}i._onChange(o),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new wt},normalMatrix:{value:new Fi}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new JM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Z0.setFromAxisAngle(e,i),this.quaternion.multiply(Z0),this}rotateOnWorldAxis(e,i){return Z0.setFromAxisAngle(e,i),this.quaternion.premultiply(Z0),this}rotateX(e){return this.rotateOnAxis(b9,e)}rotateY(e){return this.rotateOnAxis(w9,e)}rotateZ(e){return this.rotateOnAxis(O9,e)}translateOnAxis(e,i){return x9.copy(e).applyQuaternion(this.quaternion),this.position.add(x9.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(b9,e)}translateY(e){return this.translateOnAxis(w9,e)}translateZ(e){return this.translateOnAxis(O9,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Du.copy(this.matrixWorld).invert())}lookAt(e,i,n){e.isVector3?DC.copy(e):DC.set(e,i,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Px.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Du.lookAt(Px,DC,this.up):Du.lookAt(DC,Px,this.up),this.quaternion.setFromRotationMatrix(Du),s&&(Du.extractRotation(s.matrixWorld),Z0.setFromRotationMatrix(Du),this.quaternion.premultiply(Z0.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(S9),K0.child=e,this.dispatchEvent(K0),K0.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(g2e),eI.child=e,this.dispatchEvent(eI),eI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Du.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Du.multiply(e.parent.matrixWorld)),e.applyMatrix4(Du),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(S9),K0.child=e,this.dispatchEvent(K0),K0.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,n=[]){this[e]===i&&n.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,i,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Px,e,p2e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Px,m2e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);const i=this.children;for(let n=0,s=i.length;n<s;n++)i[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const i=this.children;for(let n=0,s=i.length;n<s;n++)i[n].traverseVisible(e)}traverseAncestors(e){const i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const i=this.children;for(let n=0,s=i.length;n<s;n++){const o=i[n];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,i){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const i=e===void 0||typeof e=="string",n={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const p=c[u];o(e.shapes,p)}else o(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(e.materials,this.material[c]));s.material=l}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(o(e.animations,c))}}if(i){const l=a(e.geometries),c=a(e.materials),u=a(e.textures),d=a(e.images),p=a(e.shapes),m=a(e.skeletons),g=a(e.animations),y=a(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),d.length>0&&(n.images=d),p.length>0&&(n.shapes=p),m.length>0&&(n.skeletons=m),g.length>0&&(n.animations=g),y.length>0&&(n.nodes=y)}return n.object=s,n;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}dn.DEFAULT_UP=new le(0,1,0);dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Nh=new le,Lu=new le,tI=new le,Nu=new le,J0=new le,ev=new le,C9=new le,iI=new le,nI=new le,rI=new le;class wa{constructor(e=new le,i=new le,n=new le){this.a=e,this.b=i,this.c=n}static getNormal(e,i,n,s){s.subVectors(n,i),Nh.subVectors(e,i),s.cross(Nh);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,i,n,s,o){Nh.subVectors(s,i),Lu.subVectors(n,i),tI.subVectors(e,i);const a=Nh.dot(Nh),l=Nh.dot(Lu),c=Nh.dot(tI),u=Lu.dot(Lu),d=Lu.dot(tI),p=a*u-l*l;if(p===0)return o.set(0,0,0),null;const m=1/p,g=(u*c-l*d)*m,y=(a*d-l*c)*m;return o.set(1-g-y,y,g)}static containsPoint(e,i,n,s){return this.getBarycoord(e,i,n,s,Nu)===null?!1:Nu.x>=0&&Nu.y>=0&&Nu.x+Nu.y<=1}static getInterpolation(e,i,n,s,o,a,l,c){return this.getBarycoord(e,i,n,s,Nu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,Nu.x),c.addScaledVector(a,Nu.y),c.addScaledVector(l,Nu.z),c)}static isFrontFacing(e,i,n,s){return Nh.subVectors(n,i),Lu.subVectors(e,i),Nh.cross(Lu).dot(s)<0}set(e,i,n){return this.a.copy(e),this.b.copy(i),this.c.copy(n),this}setFromPointsAndIndices(e,i,n,s){return this.a.copy(e[i]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,i,n,s){return this.a.fromBufferAttribute(e,i),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Nh.subVectors(this.c,this.b),Lu.subVectors(this.a,this.b),Nh.cross(Lu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return wa.getBarycoord(e,this.a,this.b,this.c,i)}getInterpolation(e,i,n,s,o){return wa.getInterpolation(e,this.a,this.b,this.c,i,n,s,o)}containsPoint(e){return wa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,i){const n=this.a,s=this.b,o=this.c;let a,l;J0.subVectors(s,n),ev.subVectors(o,n),iI.subVectors(e,n);const c=J0.dot(iI),u=ev.dot(iI);if(c<=0&&u<=0)return i.copy(n);nI.subVectors(e,s);const d=J0.dot(nI),p=ev.dot(nI);if(d>=0&&p<=d)return i.copy(s);const m=c*p-d*u;if(m<=0&&c>=0&&d<=0)return a=c/(c-d),i.copy(n).addScaledVector(J0,a);rI.subVectors(e,o);const g=J0.dot(rI),y=ev.dot(rI);if(y>=0&&g<=y)return i.copy(o);const _=g*u-c*y;if(_<=0&&u>=0&&y<=0)return l=u/(u-y),i.copy(n).addScaledVector(ev,l);const x=d*y-g*p;if(x<=0&&p-d>=0&&g-y>=0)return C9.subVectors(o,s),l=(p-d)/(p-d+(g-y)),i.copy(s).addScaledVector(C9,l);const O=1/(x+_+m);return a=_*O,l=m*O,i.copy(n).addScaledVector(J0,a).addScaledVector(ev,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xf={h:0,s:0,l:0},LC={h:0,s:0,l:0};function sI(r,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?r+(e-r)*6*i:i<1/2?e:i<2/3?r+(e-r)*6*(2/3-i):r}let ut=class{constructor(e,i,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,i,n)}set(e,i,n){if(i===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,i,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=al){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ln.toWorkingColorSpace(this,i),this}setRGB(e,i,n,s=Ln.workingColorSpace){return this.r=e,this.g=i,this.b=n,Ln.toWorkingColorSpace(this,s),this}setHSL(e,i,n,s=Ln.workingColorSpace){if(e=wN(e,1),i=Ur(i,0,1),n=Ur(n,0,1),i===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+i):n+i-n*i,a=2*n-o;this.r=sI(a,o,e+1/3),this.g=sI(a,o,e),this.b=sI(a,o,e-1/3)}return Ln.toWorkingColorSpace(this,s),this}setStyle(e,i=al){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=s[1],l=s[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,i);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,i);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,i);if(a===6)return this.setHex(parseInt(o,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e,i=al){const n=rJ[e.toLowerCase()];return n!==void 0?this.setHex(n,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=_y(e.r),this.g=_y(e.g),this.b=_y(e.b),this}copyLinearToSRGB(e){return this.r=H3(e.r),this.g=H3(e.g),this.b=H3(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=al){return Ln.fromWorkingColorSpace(po.copy(this),e),Math.round(Ur(po.r*255,0,255))*65536+Math.round(Ur(po.g*255,0,255))*256+Math.round(Ur(po.b*255,0,255))}getHexString(e=al){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=Ln.workingColorSpace){Ln.fromWorkingColorSpace(po.copy(this),i);const n=po.r,s=po.g,o=po.b,a=Math.max(n,s,o),l=Math.min(n,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const p=a-l;switch(u=d<=.5?p/(a+l):p/(2-a-l),a){case n:c=(s-o)/p+(s<o?6:0);break;case s:c=(o-n)/p+2;break;case o:c=(n-s)/p+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,i=Ln.workingColorSpace){return Ln.fromWorkingColorSpace(po.copy(this),i),e.r=po.r,e.g=po.g,e.b=po.b,e}getStyle(e=al){Ln.fromWorkingColorSpace(po.copy(this),e);const i=po.r,n=po.g,s=po.b;return e!==al?`color(${e} ${i.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,i,n){return this.getHSL(xf),this.setHSL(xf.h+e,xf.s+i,xf.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,n){return this.r=e.r+(i.r-e.r)*n,this.g=e.g+(i.g-e.g)*n,this.b=e.b+(i.b-e.b)*n,this}lerpHSL(e,i){this.getHSL(xf),e.getHSL(LC);const n=Nb(xf.h,LC.h,i),s=Nb(xf.s,LC.s,i),o=Nb(xf.l,LC.l,i);return this.setHSL(n,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const i=this.r,n=this.g,s=this.b,o=e.elements;return this.r=o[0]*i+o[3]*n+o[6]*s,this.g=o[1]*i+o[4]*n+o[7]*s,this.b=o[2]*i+o[5]*n+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const po=new ut;ut.NAMES=rJ;let v2e=0;class Eo extends yu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:v2e++}),this.uuid=xl(),this.name="",this.type="Material",this.blending=Sg,this.side=Ad,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=hE,this.blendDst=cE,this.blendEquation=Yf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ut(0,0,0),this.blendAlpha=0,this.depthFunc=gw,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=K4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qm,this.stencilZFail=qm,this.stencilZPass=qm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const i in e){const n=e[i];if(n===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const s=this[i];if(s===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[i]=n}}toJSON(e){const i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Sg&&(n.blending=this.blending),this.side!==Ad&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==hE&&(n.blendSrc=this.blendSrc),this.blendDst!==cE&&(n.blendDst=this.blendDst),this.blendEquation!==Yf&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==gw&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==K4&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==qm&&(n.stencilFail=this.stencilFail),this.stencilZFail!==qm&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==qm&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(i){const o=s(e.textures),a=s(e.images);o.length>0&&(n.textures=o),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const i=e.clippingPlanes;let n=null;if(i!==null){const s=i.length;n=new Array(s);for(let o=0;o!==s;++o)n[o]=i[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class dc extends Eo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cs,this.combine=BO,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hd=y2e();function y2e(){const r=new ArrayBuffer(4),e=new Float32Array(r),i=new Uint32Array(r),n=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(n[c]=0,n[c|256]=32768,s[c]=24,s[c|256]=24):u<-14?(n[c]=1024>>-u-14,n[c|256]=1024>>-u-14|32768,s[c]=-u-1,s[c|256]=-u-1):u<=15?(n[c]=u+15<<10,n[c|256]=u+15<<10|32768,s[c]=13,s[c|256]=13):u<128?(n[c]=31744,n[c|256]=64512,s[c]=24,s[c|256]=24):(n[c]=31744,n[c|256]=64512,s[c]=13,s[c|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,o[c]=u|d}for(let c=1024;c<2048;++c)o[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:i,baseTable:n,shiftTable:s,mantissaTable:o,exponentTable:a,offsetTable:l}}function ua(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Ur(r,-65504,65504),hd.floatView[0]=r;const e=hd.uint32View[0],i=e>>23&511;return hd.baseTable[i]+((e&8388607)>>hd.shiftTable[i])}function ub(r){const e=r>>10;return hd.uint32View[0]=hd.mantissaTable[hd.offsetTable[e]+(r&1023)]+hd.exponentTable[e],hd.floatView[0]}const _2e={toHalfFloat:ua,fromHalfFloat:ub},es=new le,NC=new Ge;class un{constructor(e,i,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=e!==void 0?e.length/i:0,this.normalized=n,this.usage=ww,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=rh,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return tJ("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,i,n){e*=this.itemSize,n*=i.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=i.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let i=0,n=this.count;i<n;i++)NC.fromBufferAttribute(this,i),NC.applyMatrix3(e),this.setXY(i,NC.x,NC.y);else if(this.itemSize===3)for(let i=0,n=this.count;i<n;i++)es.fromBufferAttribute(this,i),es.applyMatrix3(e),this.setXYZ(i,es.x,es.y,es.z);return this}applyMatrix4(e){for(let i=0,n=this.count;i<n;i++)es.fromBufferAttribute(this,i),es.applyMatrix4(e),this.setXYZ(i,es.x,es.y,es.z);return this}applyNormalMatrix(e){for(let i=0,n=this.count;i<n;i++)es.fromBufferAttribute(this,i),es.applyNormalMatrix(e),this.setXYZ(i,es.x,es.y,es.z);return this}transformDirection(e){for(let i=0,n=this.count;i<n;i++)es.fromBufferAttribute(this,i),es.transformDirection(e),this.setXYZ(i,es.x,es.y,es.z);return this}set(e,i=0){return this.array.set(e,i),this}getComponent(e,i){let n=this.array[e*this.itemSize+i];return this.normalized&&(n=Go(n,this.array)),n}setComponent(e,i,n){return this.normalized&&(n=zi(n,this.array)),this.array[e*this.itemSize+i]=n,this}getX(e){let i=this.array[e*this.itemSize];return this.normalized&&(i=Go(i,this.array)),i}setX(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize]=i,this}getY(e){let i=this.array[e*this.itemSize+1];return this.normalized&&(i=Go(i,this.array)),i}setY(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize+1]=i,this}getZ(e){let i=this.array[e*this.itemSize+2];return this.normalized&&(i=Go(i,this.array)),i}setZ(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize+2]=i,this}getW(e){let i=this.array[e*this.itemSize+3];return this.normalized&&(i=Go(i,this.array)),i}setW(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize+3]=i,this}setXY(e,i,n){return e*=this.itemSize,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array)),this.array[e+0]=i,this.array[e+1]=n,this}setXYZ(e,i,n,s){return e*=this.itemSize,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array),s=zi(s,this.array)),this.array[e+0]=i,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,i,n,s,o){return e*=this.itemSize,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array),s=zi(s,this.array),o=zi(o,this.array)),this.array[e+0]=i,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ww&&(e.usage=this.usage),e}}class x2e extends un{constructor(e,i,n){super(new Int8Array(e),i,n)}}class b2e extends un{constructor(e,i,n){super(new Uint8Array(e),i,n)}}class w2e extends un{constructor(e,i,n){super(new Uint8ClampedArray(e),i,n)}}class O2e extends un{constructor(e,i,n){super(new Int16Array(e),i,n)}}class eP extends un{constructor(e,i,n){super(new Uint16Array(e),i,n)}}class S2e extends un{constructor(e,i,n){super(new Int32Array(e),i,n)}}class SN extends un{constructor(e,i,n){super(new Uint32Array(e),i,n)}}class C2e extends un{constructor(e,i,n){super(new Uint16Array(e),i,n),this.isFloat16BufferAttribute=!0}getX(e){let i=ub(this.array[e*this.itemSize]);return this.normalized&&(i=Go(i,this.array)),i}setX(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize]=ua(i),this}getY(e){let i=ub(this.array[e*this.itemSize+1]);return this.normalized&&(i=Go(i,this.array)),i}setY(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize+1]=ua(i),this}getZ(e){let i=ub(this.array[e*this.itemSize+2]);return this.normalized&&(i=Go(i,this.array)),i}setZ(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize+2]=ua(i),this}getW(e){let i=ub(this.array[e*this.itemSize+3]);return this.normalized&&(i=Go(i,this.array)),i}setW(e,i){return this.normalized&&(i=zi(i,this.array)),this.array[e*this.itemSize+3]=ua(i),this}setXY(e,i,n){return e*=this.itemSize,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array)),this.array[e+0]=ua(i),this.array[e+1]=ua(n),this}setXYZ(e,i,n,s){return e*=this.itemSize,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array),s=zi(s,this.array)),this.array[e+0]=ua(i),this.array[e+1]=ua(n),this.array[e+2]=ua(s),this}setXYZW(e,i,n,s,o){return e*=this.itemSize,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array),s=zi(s,this.array),o=zi(o,this.array)),this.array[e+0]=ua(i),this.array[e+1]=ua(n),this.array[e+2]=ua(s),this.array[e+3]=ua(o),this}}class $t extends un{constructor(e,i,n){super(new Float32Array(e),i,n)}}let T2e=0;const Dl=new wt,oI=new dn,tv=new le,Qa=new so,kx=new so,Ls=new le;class Ai extends yu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:T2e++}),this.uuid=xl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(JK(e)?SN:eP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,i){return this.attributes[e]=i,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,i,n=0){this.groups.push({start:e,count:i,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}applyMatrix4(e){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(e),i.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new Fi().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dl.makeRotationFromQuaternion(e),this.applyMatrix4(Dl),this}rotateX(e){return Dl.makeRotationX(e),this.applyMatrix4(Dl),this}rotateY(e){return Dl.makeRotationY(e),this.applyMatrix4(Dl),this}rotateZ(e){return Dl.makeRotationZ(e),this.applyMatrix4(Dl),this}translate(e,i,n){return Dl.makeTranslation(e,i,n),this.applyMatrix4(Dl),this}scale(e,i,n){return Dl.makeScale(e,i,n),this.applyMatrix4(Dl),this}lookAt(e){return oI.lookAt(e),oI.updateMatrix(),this.applyMatrix4(oI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tv).negate(),this.translate(tv.x,tv.y,tv.z),this}setFromPoints(e){const i=[];for(let n=0,s=e.length;n<s;n++){const o=e[n];i.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new $t(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new so);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),i)for(let n=0,s=i.length;n<s;n++){const o=i[n];Qa.setFromBufferAttribute(o),this.morphTargetsRelative?(Ls.addVectors(this.boundingBox.min,Qa.min),this.boundingBox.expandByPoint(Ls),Ls.addVectors(this.boundingBox.max,Qa.max),this.boundingBox.expandByPoint(Ls)):(this.boundingBox.expandByPoint(Qa.min),this.boundingBox.expandByPoint(Qa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oo);const e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new le,1/0);return}if(e){const n=this.boundingSphere.center;if(Qa.setFromBufferAttribute(e),i)for(let o=0,a=i.length;o<a;o++){const l=i[o];kx.setFromBufferAttribute(l),this.morphTargetsRelative?(Ls.addVectors(Qa.min,kx.min),Qa.expandByPoint(Ls),Ls.addVectors(Qa.max,kx.max),Qa.expandByPoint(Ls)):(Qa.expandByPoint(kx.min),Qa.expandByPoint(kx.max))}Qa.getCenter(n);let s=0;for(let o=0,a=e.count;o<a;o++)Ls.fromBufferAttribute(e,o),s=Math.max(s,n.distanceToSquared(Ls));if(i)for(let o=0,a=i.length;o<a;o++){const l=i[o],c=this.morphTargetsRelative;for(let u=0,d=l.count;u<d;u++)Ls.fromBufferAttribute(l,u),c&&(tv.fromBufferAttribute(e,u),Ls.add(tv)),s=Math.max(s,n.distanceToSquared(Ls))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,i=this.attributes;if(e===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=i.position,s=i.normal,o=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new un(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),l=[],c=[];for(let k=0;k<n.count;k++)l[k]=new le,c[k]=new le;const u=new le,d=new le,p=new le,m=new Ge,g=new Ge,y=new Ge,_=new le,x=new le;function O(k,I,A){u.fromBufferAttribute(n,k),d.fromBufferAttribute(n,I),p.fromBufferAttribute(n,A),m.fromBufferAttribute(o,k),g.fromBufferAttribute(o,I),y.fromBufferAttribute(o,A),d.sub(u),p.sub(u),g.sub(m),y.sub(m);const D=1/(g.x*y.y-y.x*g.y);isFinite(D)&&(_.copy(d).multiplyScalar(y.y).addScaledVector(p,-g.y).multiplyScalar(D),x.copy(p).multiplyScalar(g.x).addScaledVector(d,-y.x).multiplyScalar(D),l[k].add(_),l[I].add(_),l[A].add(_),c[k].add(x),c[I].add(x),c[A].add(x))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let k=0,I=S.length;k<I;++k){const A=S[k],D=A.start,V=A.count;for(let B=D,L=D+V;B<L;B+=3)O(e.getX(B+0),e.getX(B+1),e.getX(B+2))}const w=new le,C=new le,M=new le,P=new le;function R(k){M.fromBufferAttribute(s,k),P.copy(M);const I=l[k];w.copy(I),w.sub(M.multiplyScalar(M.dot(I))).normalize(),C.crossVectors(P,I);const D=C.dot(c[k])<0?-1:1;a.setXYZW(k,w.x,w.y,w.z,D)}for(let k=0,I=S.length;k<I;++k){const A=S[k],D=A.start,V=A.count;for(let B=D,L=D+V;B<L;B+=3)R(e.getX(B+0)),R(e.getX(B+1)),R(e.getX(B+2))}}computeVertexNormals(){const e=this.index,i=this.getAttribute("position");if(i!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new un(new Float32Array(i.count*3),3),this.setAttribute("normal",n);else for(let m=0,g=n.count;m<g;m++)n.setXYZ(m,0,0,0);const s=new le,o=new le,a=new le,l=new le,c=new le,u=new le,d=new le,p=new le;if(e)for(let m=0,g=e.count;m<g;m+=3){const y=e.getX(m+0),_=e.getX(m+1),x=e.getX(m+2);s.fromBufferAttribute(i,y),o.fromBufferAttribute(i,_),a.fromBufferAttribute(i,x),d.subVectors(a,o),p.subVectors(s,o),d.cross(p),l.fromBufferAttribute(n,y),c.fromBufferAttribute(n,_),u.fromBufferAttribute(n,x),l.add(d),c.add(d),u.add(d),n.setXYZ(y,l.x,l.y,l.z),n.setXYZ(_,c.x,c.y,c.z),n.setXYZ(x,u.x,u.y,u.z)}else for(let m=0,g=i.count;m<g;m+=3)s.fromBufferAttribute(i,m+0),o.fromBufferAttribute(i,m+1),a.fromBufferAttribute(i,m+2),d.subVectors(a,o),p.subVectors(s,o),d.cross(p),n.setXYZ(m+0,d.x,d.y,d.z),n.setXYZ(m+1,d.x,d.y,d.z),n.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let i=0,n=e.count;i<n;i++)Ls.fromBufferAttribute(e,i),Ls.normalize(),e.setXYZ(i,Ls.x,Ls.y,Ls.z)}toNonIndexed(){function e(l,c){const u=l.array,d=l.itemSize,p=l.normalized,m=new u.constructor(c.length*d);let g=0,y=0;for(let _=0,x=c.length;_<x;_++){l.isInterleavedBufferAttribute?g=c[_]*l.data.stride+l.offset:g=c[_]*d;for(let O=0;O<d;O++)m[y++]=u[g++]}return new un(m,d,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new Ai,n=this.index.array,s=this.attributes;for(const l in s){const c=s[l],u=e(c,n);i.setAttribute(l,u)}const o=this.morphAttributes;for(const l in o){const c=[],u=o[l];for(let d=0,p=u.length;d<p;d++){const m=u[d],g=e(m,n);c.push(g)}i.morphAttributes[l]=c}i.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const u=a[l];i.addGroup(u.start,u.count,u.materialIndex)}return i}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const i=this.index;i!==null&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const n=this.attributes;for(const c in n){const u=n[c];e.data.attributes[c]=u.toJSON(e.data)}const s={};let o=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let p=0,m=u.length;p<m;p++){const g=u[p];d.push(g.toJSON(e.data))}d.length>0&&(s[c]=d,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(i));const s=e.attributes;for(const u in s){const d=s[u];this.setAttribute(u,d.clone(i))}const o=e.morphAttributes;for(const u in o){const d=[],p=o[u];for(let m=0,g=p.length;m<g;m++)d.push(p[m].clone(i));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,d=a.length;u<d;u++){const p=a[u];this.addGroup(p.start,p.count,p.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const T9=new wt,xm=new f0,VC=new oo,A9=new le,iv=new le,nv=new le,rv=new le,aI=new le,FC=new le,$C=new Ge,UC=new Ge,zC=new Ge,E9=new le,M9=new le,P9=new le,XC=new le,WC=new le;let Un=class extends dn{constructor(e=new Ai,i=new dc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,n=Object.keys(i);if(n.length>0){const s=i[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const l=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}getVertexPosition(e,i){const n=this.geometry,s=n.attributes.position,o=n.morphAttributes.position,a=n.morphTargetsRelative;i.fromBufferAttribute(s,e);const l=this.morphTargetInfluences;if(o&&l){FC.set(0,0,0);for(let c=0,u=o.length;c<u;c++){const d=l[c],p=o[c];d!==0&&(aI.fromBufferAttribute(p,e),a?FC.addScaledVector(aI,d):FC.addScaledVector(aI.sub(i),d))}i.add(FC)}return i}raycast(e,i){const n=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),VC.copy(n.boundingSphere),VC.applyMatrix4(o),xm.copy(e.ray).recast(e.near),!(VC.containsPoint(xm.origin)===!1&&(xm.intersectSphere(VC,A9)===null||xm.origin.distanceToSquared(A9)>(e.far-e.near)**2))&&(T9.copy(o).invert(),xm.copy(e.ray).applyMatrix4(T9),!(n.boundingBox!==null&&xm.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,i,xm)))}_computeIntersections(e,i,n){let s;const o=this.geometry,a=this.material,l=o.index,c=o.attributes.position,u=o.attributes.uv,d=o.attributes.uv1,p=o.attributes.normal,m=o.groups,g=o.drawRange;if(l!==null)if(Array.isArray(a))for(let y=0,_=m.length;y<_;y++){const x=m[y],O=a[x.materialIndex],S=Math.max(x.start,g.start),w=Math.min(l.count,Math.min(x.start+x.count,g.start+g.count));for(let C=S,M=w;C<M;C+=3){const P=l.getX(C),R=l.getX(C+1),k=l.getX(C+2);s=GC(this,O,e,n,u,d,p,P,R,k),s&&(s.faceIndex=Math.floor(C/3),s.face.materialIndex=x.materialIndex,i.push(s))}}else{const y=Math.max(0,g.start),_=Math.min(l.count,g.start+g.count);for(let x=y,O=_;x<O;x+=3){const S=l.getX(x),w=l.getX(x+1),C=l.getX(x+2);s=GC(this,a,e,n,u,d,p,S,w,C),s&&(s.faceIndex=Math.floor(x/3),i.push(s))}}else if(c!==void 0)if(Array.isArray(a))for(let y=0,_=m.length;y<_;y++){const x=m[y],O=a[x.materialIndex],S=Math.max(x.start,g.start),w=Math.min(c.count,Math.min(x.start+x.count,g.start+g.count));for(let C=S,M=w;C<M;C+=3){const P=C,R=C+1,k=C+2;s=GC(this,O,e,n,u,d,p,P,R,k),s&&(s.faceIndex=Math.floor(C/3),s.face.materialIndex=x.materialIndex,i.push(s))}}else{const y=Math.max(0,g.start),_=Math.min(c.count,g.start+g.count);for(let x=y,O=_;x<O;x+=3){const S=x,w=x+1,C=x+2;s=GC(this,a,e,n,u,d,p,S,w,C),s&&(s.faceIndex=Math.floor(x/3),i.push(s))}}}};function A2e(r,e,i,n,s,o,a,l){let c;if(e.side===wo?c=n.intersectTriangle(a,o,s,!0,l):c=n.intersectTriangle(s,o,a,e.side===Ad,l),c===null)return null;WC.copy(l),WC.applyMatrix4(r.matrixWorld);const u=i.ray.origin.distanceTo(WC);return u<i.near||u>i.far?null:{distance:u,point:WC.clone(),object:r}}function GC(r,e,i,n,s,o,a,l,c,u){r.getVertexPosition(l,iv),r.getVertexPosition(c,nv),r.getVertexPosition(u,rv);const d=A2e(r,e,i,n,iv,nv,rv,XC);if(d){s&&($C.fromBufferAttribute(s,l),UC.fromBufferAttribute(s,c),zC.fromBufferAttribute(s,u),d.uv=wa.getInterpolation(XC,iv,nv,rv,$C,UC,zC,new Ge)),o&&($C.fromBufferAttribute(o,l),UC.fromBufferAttribute(o,c),zC.fromBufferAttribute(o,u),d.uv1=wa.getInterpolation(XC,iv,nv,rv,$C,UC,zC,new Ge)),a&&(E9.fromBufferAttribute(a,l),M9.fromBufferAttribute(a,c),P9.fromBufferAttribute(a,u),d.normal=wa.getInterpolation(XC,iv,nv,rv,E9,M9,P9,new le),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const p={a:l,b:c,c:u,normal:new le,materialIndex:0};wa.getNormal(iv,nv,rv,p.normal),d.face=p}return d}class Gp extends Ai{constructor(e=1,i=1,n=1,s=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:i,depth:n,widthSegments:s,heightSegments:o,depthSegments:a};const l=this;s=Math.floor(s),o=Math.floor(o),a=Math.floor(a);const c=[],u=[],d=[],p=[];let m=0,g=0;y("z","y","x",-1,-1,n,i,e,a,o,0),y("z","y","x",1,-1,n,i,-e,a,o,1),y("x","z","y",1,1,e,n,i,s,a,2),y("x","z","y",1,-1,e,n,-i,s,a,3),y("x","y","z",1,-1,e,i,n,s,o,4),y("x","y","z",-1,-1,e,i,-n,s,o,5),this.setIndex(c),this.setAttribute("position",new $t(u,3)),this.setAttribute("normal",new $t(d,3)),this.setAttribute("uv",new $t(p,2));function y(_,x,O,S,w,C,M,P,R,k,I){const A=C/R,D=M/k,V=C/2,B=M/2,L=P/2,F=R+1,$=k+1;let z=0,H=0;const K=new le;for(let J=0;J<$;J++){const ne=J*D-B;for(let be=0;be<F;be++){const pe=be*A-V;K[_]=pe*S,K[x]=ne*w,K[O]=L,u.push(K.x,K.y,K.z),K[_]=0,K[x]=0,K[O]=P>0?1:-1,d.push(K.x,K.y,K.z),p.push(be/R),p.push(1-J/k),z+=1}}for(let J=0;J<k;J++)for(let ne=0;ne<R;ne++){const be=m+ne+F*J,pe=m+ne+F*(J+1),ae=m+(ne+1)+F*(J+1),ye=m+(ne+1)+F*J;c.push(be,pe,ye),c.push(pe,ae,ye),H+=6}l.addGroup(g,H,I),g+=H,m+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qy(r){const e={};for(const i in r){e[i]={};for(const n in r[i]){const s=r[i][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][n]=null):e[i][n]=s.clone():Array.isArray(s)?e[i][n]=s.slice():e[i][n]=s}}return e}function Xo(r){const e={};for(let i=0;i<r.length;i++){const n=Qy(r[i]);for(const s in n)e[s]=n[s]}return e}function E2e(r){const e=[];for(let i=0;i<r.length;i++)e.push(r[i].clone());return e}function sJ(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ln.workingColorSpace}const LO={clone:Qy,merge:Xo};var M2e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,P2e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ea extends Eo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=M2e,this.fragmentShader=P2e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qy(e.uniforms),this.uniformsGroups=E2e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const i=super.toJSON(e);i.glslVersion=this.glslVersion,i.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?i.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?i.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?i.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?i.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?i.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?i.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?i.uniforms[s]={type:"m4",value:a.toArray()}:i.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(i.extensions=n),i}}class NO extends dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt,this.projectionMatrixInverse=new wt,this.coordinateSystem=Yc}copy(e,i){return super.copy(e,i),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,i){super.updateWorldMatrix(e,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const bf=new le,k9=new Ge,I9=new Ge;class $n extends NO{constructor(e=50,i=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const i=.5*this.getFilmHeight()/e;this.fov=Hy*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Hy*2*Math.atan(Math.tan(Tg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,i,n){bf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(bf.x,bf.y).multiplyScalar(-e/bf.z),bf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(bf.x,bf.y).multiplyScalar(-e/bf.z)}getViewSize(e,i){return this.getViewBounds(e,k9,I9),i.subVectors(I9,k9)}setViewOffset(e,i,n,s,o,a){this.aspect=e/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=n,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let i=e*Math.tan(Tg*.5*this.fov)/this.zoom,n=2*i,s=this.aspect*n,o=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;o+=a.offsetX*s/c,i-=a.offsetY*n/u,s*=a.width/c,n*=a.height/u}const l=this.filmOffset;l!==0&&(o+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,i,i-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const sv=-90,ov=1;class oJ extends dn{constructor(e,i,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new $n(sv,ov,e,i);s.layers=this.layers,this.add(s);const o=new $n(sv,ov,e,i);o.layers=this.layers,this.add(o);const a=new $n(sv,ov,e,i);a.layers=this.layers,this.add(a);const l=new $n(sv,ov,e,i);l.layers=this.layers,this.add(l);const c=new $n(sv,ov,e,i);c.layers=this.layers,this.add(c);const u=new $n(sv,ov,e,i);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,i=this.children.concat(),[n,s,o,a,l,c]=i;for(const u of i)this.remove(u);if(e===Yc)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Ow)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of i)this.add(u),u.updateMatrixWorld()}update(e,i){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,a,l,c,u,d]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(i,o),e.setRenderTarget(n,1,s),e.render(i,a),e.setRenderTarget(n,2,s),e.render(i,l),e.setRenderTarget(n,3,s),e.render(i,c),e.setRenderTarget(n,4,s),e.render(i,u),n.texture.generateMipmaps=_,e.setRenderTarget(n,5,s),e.render(i,d),e.setRenderTarget(p,m,g),e.xr.enabled=y,n.texture.needsPMREMUpdate=!0}}class VO extends Xr{constructor(e,i,n,s,o,a,l,c,u,d){e=e!==void 0?e:[],i=i!==void 0?i:Ed,super(e,i,n,s,o,a,l,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class aJ extends yh{constructor(e=1,i={}){super(e,e,i),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new VO(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:qr}fromEquirectangularTexture(e,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Gp(5,5,5),o=new ea({name:"CubemapFromEquirect",uniforms:Qy(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:wo,blending:xd});o.uniforms.tEquirect.value=i;const a=new Un(s,o),l=i.minFilter;return i.minFilter===qh&&(i.minFilter=qr),new oJ(1,10,this).update(e,a),i.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,i,n,s){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(i,n,s);e.setRenderTarget(o)}}const lI=new le,k2e=new le,I2e=new Fi;class Qh{constructor(e=new le(1,0,0),i=0){this.isPlane=!0,this.normal=e,this.constant=i}set(e,i){return this.normal.copy(e),this.constant=i,this}setComponents(e,i,n,s){return this.normal.set(e,i,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,i){return this.normal.copy(e),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(e,i,n){const s=lI.subVectors(n,i).cross(k2e.subVectors(e,i)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,i){return i.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,i){const n=e.delta(lI),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:i.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const i=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return i<0&&n>0||n<0&&i>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,i){const n=i||I2e.getNormalMatrix(e),s=this.coplanarPoint(lI).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bm=new oo,HC=new le;class FO{constructor(e=new Qh,i=new Qh,n=new Qh,s=new Qh,o=new Qh,a=new Qh){this.planes=[e,i,n,s,o,a]}set(e,i,n,s,o,a){const l=this.planes;return l[0].copy(e),l[1].copy(i),l[2].copy(n),l[3].copy(s),l[4].copy(o),l[5].copy(a),this}copy(e){const i=this.planes;for(let n=0;n<6;n++)i[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,i=Yc){const n=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],d=s[5],p=s[6],m=s[7],g=s[8],y=s[9],_=s[10],x=s[11],O=s[12],S=s[13],w=s[14],C=s[15];if(n[0].setComponents(c-o,m-u,x-g,C-O).normalize(),n[1].setComponents(c+o,m+u,x+g,C+O).normalize(),n[2].setComponents(c+a,m+d,x+y,C+S).normalize(),n[3].setComponents(c-a,m-d,x-y,C-S).normalize(),n[4].setComponents(c-l,m-p,x-_,C-w).normalize(),i===Yc)n[5].setComponents(c+l,m+p,x+_,C+w).normalize();else if(i===Ow)n[5].setComponents(l,p,_,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),bm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const i=e.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),bm.copy(i.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(bm)}intersectsSprite(e){return bm.center.set(0,0,0),bm.radius=.7071067811865476,bm.applyMatrix4(e.matrixWorld),this.intersectsSphere(bm)}intersectsSphere(e){const i=this.planes,n=e.center,s=-e.radius;for(let o=0;o<6;o++)if(i[o].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const i=this.planes;for(let n=0;n<6;n++){const s=i[n];if(HC.x=s.normal.x>0?e.max.x:e.min.x,HC.y=s.normal.y>0?e.max.y:e.min.y,HC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(HC)<0)return!1}return!0}containsPoint(e){const i=this.planes;for(let n=0;n<6;n++)if(i[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function lJ(){let r=null,e=!1,i=null,n=null;function s(o,a){i(o,a),n=r.requestAnimationFrame(s)}return{start:function(){e!==!0&&i!==null&&(n=r.requestAnimationFrame(s),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){i=o},setContext:function(o){r=o}}}function R2e(r){const e=new WeakMap;function i(l,c){const u=l.array,d=l.usage,p=u.byteLength,m=r.createBuffer();r.bindBuffer(c,m),r.bufferData(c,u,d),l.onUploadCallback();let g;if(u instanceof Float32Array)g=r.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?g=r.HALF_FLOAT:g=r.UNSIGNED_SHORT;else if(u instanceof Int16Array)g=r.SHORT;else if(u instanceof Uint32Array)g=r.UNSIGNED_INT;else if(u instanceof Int32Array)g=r.INT;else if(u instanceof Int8Array)g=r.BYTE;else if(u instanceof Uint8Array)g=r.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)g=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:g,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:p}}function n(l,c,u){const d=c.array,p=c._updateRange,m=c.updateRanges;if(r.bindBuffer(u,l),p.count===-1&&m.length===0&&r.bufferSubData(u,0,d),m.length!==0){for(let g=0,y=m.length;g<y;g++){const _=m[g];r.bufferSubData(u,_.start*d.BYTES_PER_ELEMENT,d,_.start,_.count)}c.clearUpdateRanges()}p.count!==-1&&(r.bufferSubData(u,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count),p.count=-1),c.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function o(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(r.deleteBuffer(c.buffer),e.delete(l))}function a(l,c){if(l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);if(u===void 0)e.set(l,i(l,c));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,l,c),u.version=l.version}}return{get:s,remove:o,update:a}}let M_=class hJ extends Ai{constructor(e=1,i=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:i,widthSegments:n,heightSegments:s};const o=e/2,a=i/2,l=Math.floor(n),c=Math.floor(s),u=l+1,d=c+1,p=e/l,m=i/c,g=[],y=[],_=[],x=[];for(let O=0;O<d;O++){const S=O*m-a;for(let w=0;w<u;w++){const C=w*p-o;y.push(C,-S,0),_.push(0,0,1),x.push(w/l),x.push(1-O/c)}}for(let O=0;O<c;O++)for(let S=0;S<l;S++){const w=S+u*O,C=S+u*(O+1),M=S+1+u*(O+1),P=S+1+u*O;g.push(w,C,P),g.push(C,M,P)}this.setIndex(g),this.setAttribute("position",new $t(y,3)),this.setAttribute("normal",new $t(_,3)),this.setAttribute("uv",new $t(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hJ(e.width,e.height,e.widthSegments,e.heightSegments)}};var B2e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,D2e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,L2e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,N2e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,V2e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,F2e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$2e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,U2e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,z2e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,X2e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,W2e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,G2e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,H2e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Q2e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,j2e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Y2e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,q2e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Z2e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,K2e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,J2e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,eTe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,tTe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,iTe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,nTe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,rTe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,sTe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,oTe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,aTe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,lTe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,hTe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,cTe="gl_FragColor = linearToOutputTexel( gl_FragColor );",uTe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,dTe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,fTe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,pTe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mTe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,gTe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vTe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yTe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_Te=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xTe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,bTe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,wTe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,OTe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,STe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,CTe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,TTe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ATe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,ETe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,MTe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,PTe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,kTe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,ITe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,RTe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,BTe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,DTe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,LTe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,NTe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,VTe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,FTe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,$Te=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,UTe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,zTe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,XTe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WTe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,GTe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,HTe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,QTe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jTe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,YTe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,qTe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,ZTe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,KTe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,JTe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eAe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tAe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,iAe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nAe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rAe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,sAe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,oAe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,aAe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,lAe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,hAe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cAe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uAe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dAe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fAe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,pAe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,mAe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,gAe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vAe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yAe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_Ae=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xAe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,bAe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,wAe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,OAe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SAe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,CAe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TAe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,AAe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,EAe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,MAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,PAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,IAe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const RAe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,BAe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,LAe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VAe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,FAe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$Ae=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,UAe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zAe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,XAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,WAe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GAe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HAe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QAe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jAe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YAe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qAe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZAe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,KAe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JAe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,eEe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,tEe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iEe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nEe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rEe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sEe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oEe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aEe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,lEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hEe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cEe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,uEe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dEe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Wi={alphahash_fragment:B2e,alphahash_pars_fragment:D2e,alphamap_fragment:L2e,alphamap_pars_fragment:N2e,alphatest_fragment:V2e,alphatest_pars_fragment:F2e,aomap_fragment:$2e,aomap_pars_fragment:U2e,batching_pars_vertex:z2e,batching_vertex:X2e,begin_vertex:W2e,beginnormal_vertex:G2e,bsdfs:H2e,iridescence_fragment:Q2e,bumpmap_pars_fragment:j2e,clipping_planes_fragment:Y2e,clipping_planes_pars_fragment:q2e,clipping_planes_pars_vertex:Z2e,clipping_planes_vertex:K2e,color_fragment:J2e,color_pars_fragment:eTe,color_pars_vertex:tTe,color_vertex:iTe,common:nTe,cube_uv_reflection_fragment:rTe,defaultnormal_vertex:sTe,displacementmap_pars_vertex:oTe,displacementmap_vertex:aTe,emissivemap_fragment:lTe,emissivemap_pars_fragment:hTe,colorspace_fragment:cTe,colorspace_pars_fragment:uTe,envmap_fragment:dTe,envmap_common_pars_fragment:fTe,envmap_pars_fragment:pTe,envmap_pars_vertex:mTe,envmap_physical_pars_fragment:TTe,envmap_vertex:gTe,fog_vertex:vTe,fog_pars_vertex:yTe,fog_fragment:_Te,fog_pars_fragment:xTe,gradientmap_pars_fragment:bTe,lightmap_pars_fragment:wTe,lights_lambert_fragment:OTe,lights_lambert_pars_fragment:STe,lights_pars_begin:CTe,lights_toon_fragment:ATe,lights_toon_pars_fragment:ETe,lights_phong_fragment:MTe,lights_phong_pars_fragment:PTe,lights_physical_fragment:kTe,lights_physical_pars_fragment:ITe,lights_fragment_begin:RTe,lights_fragment_maps:BTe,lights_fragment_end:DTe,logdepthbuf_fragment:LTe,logdepthbuf_pars_fragment:NTe,logdepthbuf_pars_vertex:VTe,logdepthbuf_vertex:FTe,map_fragment:$Te,map_pars_fragment:UTe,map_particle_fragment:zTe,map_particle_pars_fragment:XTe,metalnessmap_fragment:WTe,metalnessmap_pars_fragment:GTe,morphinstance_vertex:HTe,morphcolor_vertex:QTe,morphnormal_vertex:jTe,morphtarget_pars_vertex:YTe,morphtarget_vertex:qTe,normal_fragment_begin:ZTe,normal_fragment_maps:KTe,normal_pars_fragment:JTe,normal_pars_vertex:eAe,normal_vertex:tAe,normalmap_pars_fragment:iAe,clearcoat_normal_fragment_begin:nAe,clearcoat_normal_fragment_maps:rAe,clearcoat_pars_fragment:sAe,iridescence_pars_fragment:oAe,opaque_fragment:aAe,packing:lAe,premultiplied_alpha_fragment:hAe,project_vertex:cAe,dithering_fragment:uAe,dithering_pars_fragment:dAe,roughnessmap_fragment:fAe,roughnessmap_pars_fragment:pAe,shadowmap_pars_fragment:mAe,shadowmap_pars_vertex:gAe,shadowmap_vertex:vAe,shadowmask_pars_fragment:yAe,skinbase_vertex:_Ae,skinning_pars_vertex:xAe,skinning_vertex:bAe,skinnormal_vertex:wAe,specularmap_fragment:OAe,specularmap_pars_fragment:SAe,tonemapping_fragment:CAe,tonemapping_pars_fragment:TAe,transmission_fragment:AAe,transmission_pars_fragment:EAe,uv_pars_fragment:MAe,uv_pars_vertex:PAe,uv_vertex:kAe,worldpos_vertex:IAe,background_vert:RAe,background_frag:BAe,backgroundCube_vert:DAe,backgroundCube_frag:LAe,cube_vert:NAe,cube_frag:VAe,depth_vert:FAe,depth_frag:$Ae,distanceRGBA_vert:UAe,distanceRGBA_frag:zAe,equirect_vert:XAe,equirect_frag:WAe,linedashed_vert:GAe,linedashed_frag:HAe,meshbasic_vert:QAe,meshbasic_frag:jAe,meshlambert_vert:YAe,meshlambert_frag:qAe,meshmatcap_vert:ZAe,meshmatcap_frag:KAe,meshnormal_vert:JAe,meshnormal_frag:eEe,meshphong_vert:tEe,meshphong_frag:iEe,meshphysical_vert:nEe,meshphysical_frag:rEe,meshtoon_vert:sEe,meshtoon_frag:oEe,points_vert:aEe,points_frag:lEe,shadow_vert:hEe,shadow_frag:cEe,sprite_vert:uEe,sprite_frag:dEe},mt={common:{diffuse:{value:new ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Fi},alphaMap:{value:null},alphaMapTransform:{value:new Fi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Fi}},envmap:{envMap:{value:null},envMapRotation:{value:new Fi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Fi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Fi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Fi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Fi},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Fi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Fi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Fi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Fi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Fi},alphaTest:{value:0},uvTransform:{value:new Fi}},sprite:{diffuse:{value:new ut(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Fi},alphaMap:{value:null},alphaMapTransform:{value:new Fi},alphaTest:{value:0}}},Zl={basic:{uniforms:Xo([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.fog]),vertexShader:Wi.meshbasic_vert,fragmentShader:Wi.meshbasic_frag},lambert:{uniforms:Xo([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new ut(0)}}]),vertexShader:Wi.meshlambert_vert,fragmentShader:Wi.meshlambert_frag},phong:{uniforms:Xo([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new ut(0)},specular:{value:new ut(1118481)},shininess:{value:30}}]),vertexShader:Wi.meshphong_vert,fragmentShader:Wi.meshphong_frag},standard:{uniforms:Xo([mt.common,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.roughnessmap,mt.metalnessmap,mt.fog,mt.lights,{emissive:{value:new ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag},toon:{uniforms:Xo([mt.common,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.gradientmap,mt.fog,mt.lights,{emissive:{value:new ut(0)}}]),vertexShader:Wi.meshtoon_vert,fragmentShader:Wi.meshtoon_frag},matcap:{uniforms:Xo([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,{matcap:{value:null}}]),vertexShader:Wi.meshmatcap_vert,fragmentShader:Wi.meshmatcap_frag},points:{uniforms:Xo([mt.points,mt.fog]),vertexShader:Wi.points_vert,fragmentShader:Wi.points_frag},dashed:{uniforms:Xo([mt.common,mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wi.linedashed_vert,fragmentShader:Wi.linedashed_frag},depth:{uniforms:Xo([mt.common,mt.displacementmap]),vertexShader:Wi.depth_vert,fragmentShader:Wi.depth_frag},normal:{uniforms:Xo([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,{opacity:{value:1}}]),vertexShader:Wi.meshnormal_vert,fragmentShader:Wi.meshnormal_frag},sprite:{uniforms:Xo([mt.sprite,mt.fog]),vertexShader:Wi.sprite_vert,fragmentShader:Wi.sprite_frag},background:{uniforms:{uvTransform:{value:new Fi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wi.background_vert,fragmentShader:Wi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Fi}},vertexShader:Wi.backgroundCube_vert,fragmentShader:Wi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wi.cube_vert,fragmentShader:Wi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wi.equirect_vert,fragmentShader:Wi.equirect_frag},distanceRGBA:{uniforms:Xo([mt.common,mt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wi.distanceRGBA_vert,fragmentShader:Wi.distanceRGBA_frag},shadow:{uniforms:Xo([mt.lights,mt.fog,{color:{value:new ut(0)},opacity:{value:1}}]),vertexShader:Wi.shadow_vert,fragmentShader:Wi.shadow_frag}};Zl.physical={uniforms:Xo([Zl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Fi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Fi},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Fi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Fi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Fi},sheen:{value:0},sheenColor:{value:new ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Fi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Fi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Fi},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Fi},attenuationDistance:{value:0},attenuationColor:{value:new ut(0)},specularColor:{value:new ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Fi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Fi},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Fi}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag};const QC={r:0,b:0,g:0},wm=new Cs,fEe=new wt;function pEe(r,e,i,n,s,o,a){const l=new ut(0);let c=o===!0?0:1,u,d,p=null,m=0,g=null;function y(S){let w=S.isScene===!0?S.background:null;return w&&w.isTexture&&(w=(S.backgroundBlurriness>0?i:e).get(w)),w}function _(S){let w=!1;const C=y(S);C===null?O(l,c):C&&C.isColor&&(O(C,1),w=!0);const M=r.xr.getEnvironmentBlendMode();M==="additive"?n.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(r.autoClear||w)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil)}function x(S,w){const C=y(w);C&&(C.isCubeTexture||C.mapping===T_)?(d===void 0&&(d=new Un(new Gp(1,1,1),new ea({name:"BackgroundCubeMaterial",uniforms:Qy(Zl.backgroundCube.uniforms),vertexShader:Zl.backgroundCube.vertexShader,fragmentShader:Zl.backgroundCube.fragmentShader,side:wo,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(M,P,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),wm.copy(w.backgroundRotation),wm.x*=-1,wm.y*=-1,wm.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(wm.y*=-1,wm.z*=-1),d.material.uniforms.envMap.value=C,d.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(fEe.makeRotationFromEuler(wm)),d.material.toneMapped=Ln.getTransfer(C.colorSpace)!==Jn,(p!==C||m!==C.version||g!==r.toneMapping)&&(d.material.needsUpdate=!0,p=C,m=C.version,g=r.toneMapping),d.layers.enableAll(),S.unshift(d,d.geometry,d.material,0,0,null)):C&&C.isTexture&&(u===void 0&&(u=new Un(new M_(2,2),new ea({name:"BackgroundMaterial",uniforms:Qy(Zl.background.uniforms),vertexShader:Zl.background.vertexShader,fragmentShader:Zl.background.fragmentShader,side:Ad,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),u.material.uniforms.t2D.value=C,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=Ln.getTransfer(C.colorSpace)!==Jn,C.matrixAutoUpdate===!0&&C.updateMatrix(),u.material.uniforms.uvTransform.value.copy(C.matrix),(p!==C||m!==C.version||g!==r.toneMapping)&&(u.material.needsUpdate=!0,p=C,m=C.version,g=r.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function O(S,w){S.getRGB(QC,sJ(r)),n.buffers.color.setClear(QC.r,QC.g,QC.b,w,a)}return{getClearColor:function(){return l},setClearColor:function(S,w=1){l.set(S),c=w,O(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(S){c=S,O(l,c)},render:_,addToRenderList:x}}function mEe(r,e){const i=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},s=m(null);let o=s,a=!1;function l(A,D,V,B,L){let F=!1;const $=p(B,V,D);o!==$&&(o=$,u(o.object)),F=g(A,B,V,L),F&&y(A,B,V,L),L!==null&&e.update(L,r.ELEMENT_ARRAY_BUFFER),(F||a)&&(a=!1,C(A,D,V,B),L!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(L).buffer))}function c(){return r.createVertexArray()}function u(A){return r.bindVertexArray(A)}function d(A){return r.deleteVertexArray(A)}function p(A,D,V){const B=V.wireframe===!0;let L=n[A.id];L===void 0&&(L={},n[A.id]=L);let F=L[D.id];F===void 0&&(F={},L[D.id]=F);let $=F[B];return $===void 0&&($=m(c()),F[B]=$),$}function m(A){const D=[],V=[],B=[];for(let L=0;L<i;L++)D[L]=0,V[L]=0,B[L]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:V,attributeDivisors:B,object:A,attributes:{},index:null}}function g(A,D,V,B){const L=o.attributes,F=D.attributes;let $=0;const z=V.getAttributes();for(const H in z)if(z[H].location>=0){const J=L[H];let ne=F[H];if(ne===void 0&&(H==="instanceMatrix"&&A.instanceMatrix&&(ne=A.instanceMatrix),H==="instanceColor"&&A.instanceColor&&(ne=A.instanceColor)),J===void 0||J.attribute!==ne||ne&&J.data!==ne.data)return!0;$++}return o.attributesNum!==$||o.index!==B}function y(A,D,V,B){const L={},F=D.attributes;let $=0;const z=V.getAttributes();for(const H in z)if(z[H].location>=0){let J=F[H];J===void 0&&(H==="instanceMatrix"&&A.instanceMatrix&&(J=A.instanceMatrix),H==="instanceColor"&&A.instanceColor&&(J=A.instanceColor));const ne={};ne.attribute=J,J&&J.data&&(ne.data=J.data),L[H]=ne,$++}o.attributes=L,o.attributesNum=$,o.index=B}function _(){const A=o.newAttributes;for(let D=0,V=A.length;D<V;D++)A[D]=0}function x(A){O(A,0)}function O(A,D){const V=o.newAttributes,B=o.enabledAttributes,L=o.attributeDivisors;V[A]=1,B[A]===0&&(r.enableVertexAttribArray(A),B[A]=1),L[A]!==D&&(r.vertexAttribDivisor(A,D),L[A]=D)}function S(){const A=o.newAttributes,D=o.enabledAttributes;for(let V=0,B=D.length;V<B;V++)D[V]!==A[V]&&(r.disableVertexAttribArray(V),D[V]=0)}function w(A,D,V,B,L,F,$){$===!0?r.vertexAttribIPointer(A,D,V,L,F):r.vertexAttribPointer(A,D,V,B,L,F)}function C(A,D,V,B){_();const L=B.attributes,F=V.getAttributes(),$=D.defaultAttributeValues;for(const z in F){const H=F[z];if(H.location>=0){let K=L[z];if(K===void 0&&(z==="instanceMatrix"&&A.instanceMatrix&&(K=A.instanceMatrix),z==="instanceColor"&&A.instanceColor&&(K=A.instanceColor)),K!==void 0){const J=K.normalized,ne=K.itemSize,be=e.get(K);if(be===void 0)continue;const pe=be.buffer,ae=be.type,ye=be.bytesPerElement,_e=ae===r.INT||ae===r.UNSIGNED_INT||K.gpuType===fN;if(K.isInterleavedBufferAttribute){const re=K.data,se=re.stride,Q=K.offset;if(re.isInstancedInterleavedBuffer){for(let G=0;G<H.locationSize;G++)O(H.location+G,re.meshPerAttribute);A.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let G=0;G<H.locationSize;G++)x(H.location+G);r.bindBuffer(r.ARRAY_BUFFER,pe);for(let G=0;G<H.locationSize;G++)w(H.location+G,ne/H.locationSize,ae,J,se*ye,(Q+ne/H.locationSize*G)*ye,_e)}else{if(K.isInstancedBufferAttribute){for(let re=0;re<H.locationSize;re++)O(H.location+re,K.meshPerAttribute);A.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let re=0;re<H.locationSize;re++)x(H.location+re);r.bindBuffer(r.ARRAY_BUFFER,pe);for(let re=0;re<H.locationSize;re++)w(H.location+re,ne/H.locationSize,ae,J,ne*ye,ne/H.locationSize*re*ye,_e)}}else if($!==void 0){const J=$[z];if(J!==void 0)switch(J.length){case 2:r.vertexAttrib2fv(H.location,J);break;case 3:r.vertexAttrib3fv(H.location,J);break;case 4:r.vertexAttrib4fv(H.location,J);break;default:r.vertexAttrib1fv(H.location,J)}}}}S()}function M(){k();for(const A in n){const D=n[A];for(const V in D){const B=D[V];for(const L in B)d(B[L].object),delete B[L];delete D[V]}delete n[A]}}function P(A){if(n[A.id]===void 0)return;const D=n[A.id];for(const V in D){const B=D[V];for(const L in B)d(B[L].object),delete B[L];delete D[V]}delete n[A.id]}function R(A){for(const D in n){const V=n[D];if(V[A.id]===void 0)continue;const B=V[A.id];for(const L in B)d(B[L].object),delete B[L];delete V[A.id]}}function k(){I(),a=!0,o!==s&&(o=s,u(o.object))}function I(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:k,resetDefaultState:I,dispose:M,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:_,enableAttribute:x,disableUnusedAttributes:S}}function gEe(r,e,i){let n;function s(u){n=u}function o(u,d){r.drawArrays(n,u,d),i.update(d,n,1)}function a(u,d,p){p!==0&&(r.drawArraysInstanced(n,u,d,p),i.update(d,n,p))}function l(u,d,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<p;g++)this.render(u[g],d[g]);else{m.multiDrawArraysWEBGL(n,u,0,d,0,p);let g=0;for(let y=0;y<p;y++)g+=d[y];i.update(g,n,1)}}function c(u,d,p,m){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<u.length;y++)a(u[y],d[y],m[y]);else{g.multiDrawArraysInstancedWEBGL(n,u,0,d,0,m,0,p);let y=0;for(let _=0;_<p;_++)y+=d[_];for(let _=0;_<m.length;_++)i.update(y,n,m[_])}}this.setMode=s,this.render=o,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function vEe(r,e,i,n){let s;function o(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");s=r.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(P){return!(P!==Ca&&n.convert(P)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(P){const R=P===A_&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==lc&&n.convert(P)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==rh&&!R)}function c(P){if(P==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=i.precision!==void 0?i.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const p=i.logarithmicDepthBuffer===!0,m=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),g=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=r.getParameter(r.MAX_TEXTURE_SIZE),_=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),x=r.getParameter(r.MAX_VERTEX_ATTRIBS),O=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),S=r.getParameter(r.MAX_VARYING_VECTORS),w=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),C=g>0,M=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:p,maxTextures:m,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:_,maxAttributes:x,maxVertexUniforms:O,maxVaryings:S,maxFragmentUniforms:w,vertexTextures:C,maxSamples:M}}function yEe(r){const e=this;let i=null,n=0,s=!1,o=!1;const a=new Qh,l=new Fi,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||n!==0||s;return s=m,n=p.length,g},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,m){i=d(p,m,0)},this.setState=function(p,m,g){const y=p.clippingPlanes,_=p.clipIntersection,x=p.clipShadows,O=r.get(p);if(!s||y===null||y.length===0||o&&!x)o?d(null):u();else{const S=o?0:n,w=S*4;let C=O.clippingState||null;c.value=C,C=d(y,m,w,g);for(let M=0;M!==w;++M)C[M]=i[M];O.clippingState=C,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function u(){c.value!==i&&(c.value=i,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(p,m,g,y){const _=p!==null?p.length:0;let x=null;if(_!==0){if(x=c.value,y!==!0||x===null){const O=g+_*4,S=m.matrixWorldInverse;l.getNormalMatrix(S),(x===null||x.length<O)&&(x=new Float32Array(O));for(let w=0,C=g;w!==_;++w,C+=4)a.copy(p[w]).applyMatrix4(S,l),a.normal.toArray(x,C),x[C+3]=a.constant}c.value=x,c.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,x}}function _Ee(r){let e=new WeakMap;function i(a,l){return l===Uy?a.mapping=Ed:l===vw&&(a.mapping=Sp),a}function n(a){if(a&&a.isTexture){const l=a.mapping;if(l===Uy||l===vw)if(e.has(a)){const c=e.get(a).texture;return i(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new aJ(c.height);return u.fromEquirectangularTexture(r,a),e.set(a,u),a.addEventListener("dispose",s),i(u.texture,a.mapping)}else return null}}return a}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap}return{get:n,dispose:o}}class sh extends NO{constructor(e=-1,i=1,n=1,s=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=i,this.top=n,this.bottom=s,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,i,n,s,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=n,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=n-e,a=n+e,l=s+i,c=s-i;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,a=o+u*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(o,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const i=super.toJSON(e);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}const Kv=4,R9=[.125,.215,.35,.446,.526,.582],rg=20,hI=new sh,B9=new ut;let cI=null,uI=0,dI=0,fI=!1;const Zm=(1+Math.sqrt(5))/2,av=1/Zm,D9=[new le(-Zm,av,0),new le(Zm,av,0),new le(-av,0,Zm),new le(av,0,Zm),new le(0,Zm,-av),new le(0,Zm,av),new le(-1,1,-1),new le(1,1,-1),new le(-1,1,1),new le(1,1,1)];class e5{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,i=0,n=.1,s=100){cI=this._renderer.getRenderTarget(),uI=this._renderer.getActiveCubeFace(),dI=this._renderer.getActiveMipmapLevel(),fI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,s,o),i>0&&this._blur(o,0,0,i),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,i=null){return this._fromTexture(e,i)}fromCubemap(e,i=null){return this._fromTexture(e,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=V9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=N9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cI,uI,dI),this._renderer.xr.enabled=fI,e.scissorTest=!1,jC(e,0,0,e.width,e.height)}_fromTexture(e,i){e.mapping===Ed||e.mapping===Sp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cI=this._renderer.getRenderTarget(),uI=this._renderer.getActiveCubeFace(),dI=this._renderer.getActiveMipmapLevel(),fI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=i||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,n={magFilter:qr,minFilter:qr,generateMipmaps:!1,type:A_,format:Ca,colorSpace:Xd,depthBuffer:!1},s=L9(e,i,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=L9(e,i,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=xEe(o)),this._blurMaterial=bEe(o,e,i)}return s}_compileMaterial(e){const i=new Un(this._lodPlanes[0],e);this._renderer.compile(i,hI)}_sceneToCubeUV(e,i,n,s){const l=new $n(90,1,i,n),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,m=d.toneMapping;d.getClearColor(B9),d.toneMapping=bd,d.autoClear=!1;const g=new dc({name:"PMREM.Background",side:wo,depthWrite:!1,depthTest:!1}),y=new Un(new Gp,g);let _=!1;const x=e.background;x?x.isColor&&(g.color.copy(x),e.background=null,_=!0):(g.color.copy(B9),_=!0);for(let O=0;O<6;O++){const S=O%3;S===0?(l.up.set(0,c[O],0),l.lookAt(u[O],0,0)):S===1?(l.up.set(0,0,c[O]),l.lookAt(0,u[O],0)):(l.up.set(0,c[O],0),l.lookAt(0,0,u[O]));const w=this._cubeSize;jC(s,S*w,O>2?w:0,w,w),d.setRenderTarget(s),_&&d.render(y,l),d.render(e,l)}y.geometry.dispose(),y.material.dispose(),d.toneMapping=m,d.autoClear=p,e.background=x}_textureToCubeUV(e,i){const n=this._renderer,s=e.mapping===Ed||e.mapping===Sp;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=V9()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=N9());const o=s?this._cubemapMaterial:this._equirectMaterial,a=new Un(this._lodPlanes[0],o),l=o.uniforms;l.envMap.value=e;const c=this._cubeSize;jC(i,0,0,3*c,2*c),n.setRenderTarget(i),n.render(a,hI)}_applyPMREM(e){const i=this._renderer,n=i.autoClear;i.autoClear=!1;const s=this._lodPlanes.length;for(let o=1;o<s;o++){const a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),l=D9[(s-o-1)%D9.length];this._blur(e,o-1,o,a,l)}i.autoClear=n}_blur(e,i,n,s,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,i,n,s,"latitudinal",o),this._halfBlur(a,e,n,n,s,"longitudinal",o)}_halfBlur(e,i,n,s,o,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,p=new Un(this._lodPlanes[s],u),m=u.uniforms,g=this._sizeLods[n]-1,y=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*rg-1),_=o/y,x=isFinite(o)?1+Math.floor(d*_):rg;x>rg&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${rg}`);const O=[];let S=0;for(let R=0;R<rg;++R){const k=R/_,I=Math.exp(-k*k/2);O.push(I),R===0?S+=I:R<x&&(S+=2*I)}for(let R=0;R<O.length;R++)O[R]=O[R]/S;m.envMap.value=e.texture,m.samples.value=x,m.weights.value=O,m.latitudinal.value=a==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:w}=this;m.dTheta.value=y,m.mipInt.value=w-n;const C=this._sizeLods[s],M=3*C*(s>w-Kv?s-w+Kv:0),P=4*(this._cubeSize-C);jC(i,M,P,3*C,2*C),c.setRenderTarget(i),c.render(p,hI)}}function xEe(r){const e=[],i=[],n=[];let s=r;const o=r-Kv+1+R9.length;for(let a=0;a<o;a++){const l=Math.pow(2,s);i.push(l);let c=1/l;a>r-Kv?c=R9[a-r+Kv-1]:a===0&&(c=0),n.push(c);const u=1/(l-2),d=-u,p=1+u,m=[d,d,p,d,p,p,d,d,p,p,d,p],g=6,y=6,_=3,x=2,O=1,S=new Float32Array(_*y*g),w=new Float32Array(x*y*g),C=new Float32Array(O*y*g);for(let P=0;P<g;P++){const R=P%3*2/3-1,k=P>2?0:-1,I=[R,k,0,R+2/3,k,0,R+2/3,k+1,0,R,k,0,R+2/3,k+1,0,R,k+1,0];S.set(I,_*y*P),w.set(m,x*y*P);const A=[P,P,P,P,P,P];C.set(A,O*y*P)}const M=new Ai;M.setAttribute("position",new un(S,_)),M.setAttribute("uv",new un(w,x)),M.setAttribute("faceIndex",new un(C,O)),e.push(M),s>Kv&&s--}return{lodPlanes:e,sizeLods:i,sigmas:n}}function L9(r,e,i){const n=new yh(r,e,i);return n.texture.mapping=T_,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function jC(r,e,i,n,s){r.viewport.set(e,i,n,s),r.scissor.set(e,i,n,s)}function bEe(r,e,i){const n=new Float32Array(rg),s=new le(0,1,0);return new ea({name:"SphericalGaussianBlur",defines:{n:rg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:CN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xd,depthTest:!1,depthWrite:!1})}function N9(){return new ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:CN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xd,depthTest:!1,depthWrite:!1})}function V9(){return new ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:CN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xd,depthTest:!1,depthWrite:!1})}function CN(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function wEe(r){let e=new WeakMap,i=null;function n(l){if(l&&l.isTexture){const c=l.mapping,u=c===Uy||c===vw,d=c===Ed||c===Sp;if(u||d){let p=e.get(l);const m=p!==void 0?p.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==m)return i===null&&(i=new e5(r)),p=u?i.fromEquirectangular(l,p):i.fromCubemap(l,p),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),p.texture;if(p!==void 0)return p.texture;{const g=l.image;return u&&g&&g.height>0||d&&g&&s(g)?(i===null&&(i=new e5(r)),p=u?i.fromEquirectangular(l):i.fromCubemap(l),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),l.addEventListener("dispose",o),p.texture):null}}}return l}function s(l){let c=0;const u=6;for(let d=0;d<u;d++)l[d]!==void 0&&c++;return c===u}function o(l){const c=l.target;c.removeEventListener("dispose",o);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:n,dispose:a}}function OEe(r){const e={};function i(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(n)}return e[n]=s,s}return{has:function(n){return i(n)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(n){const s=i(n);return s===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function SEe(r,e,i,n){const s={},o=new WeakMap;function a(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const y in m.attributes)e.remove(m.attributes[y]);for(const y in m.morphAttributes){const _=m.morphAttributes[y];for(let x=0,O=_.length;x<O;x++)e.remove(_[x])}m.removeEventListener("dispose",a),delete s[m.id];const g=o.get(m);g&&(e.remove(g),o.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,i.memory.geometries--}function l(p,m){return s[m.id]===!0||(m.addEventListener("dispose",a),s[m.id]=!0,i.memory.geometries++),m}function c(p){const m=p.attributes;for(const y in m)e.update(m[y],r.ARRAY_BUFFER);const g=p.morphAttributes;for(const y in g){const _=g[y];for(let x=0,O=_.length;x<O;x++)e.update(_[x],r.ARRAY_BUFFER)}}function u(p){const m=[],g=p.index,y=p.attributes.position;let _=0;if(g!==null){const S=g.array;_=g.version;for(let w=0,C=S.length;w<C;w+=3){const M=S[w+0],P=S[w+1],R=S[w+2];m.push(M,P,P,R,R,M)}}else if(y!==void 0){const S=y.array;_=y.version;for(let w=0,C=S.length/3-1;w<C;w+=3){const M=w+0,P=w+1,R=w+2;m.push(M,P,P,R,R,M)}}else return;const x=new(JK(m)?SN:eP)(m,1);x.version=_;const O=o.get(p);O&&e.remove(O),o.set(p,x)}function d(p){const m=o.get(p);if(m){const g=p.index;g!==null&&m.version<g.version&&u(p)}else u(p);return o.get(p)}return{get:l,update:c,getWireframeAttribute:d}}function CEe(r,e,i){let n;function s(m){n=m}let o,a;function l(m){o=m.type,a=m.bytesPerElement}function c(m,g){r.drawElements(n,g,o,m*a),i.update(g,n,1)}function u(m,g,y){y!==0&&(r.drawElementsInstanced(n,g,o,m*a,y),i.update(g,n,y))}function d(m,g,y){if(y===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let x=0;x<y;x++)this.render(m[x]/a,g[x]);else{_.multiDrawElementsWEBGL(n,g,0,o,m,0,y);let x=0;for(let O=0;O<y;O++)x+=g[O];i.update(x,n,1)}}function p(m,g,y,_){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let O=0;O<m.length;O++)u(m[O]/a,g[O],_[O]);else{x.multiDrawElementsInstancedWEBGL(n,g,0,o,m,0,_,0,y);let O=0;for(let S=0;S<y;S++)O+=g[S];for(let S=0;S<_.length;S++)i.update(O,n,_[S])}}this.setMode=s,this.setIndex=l,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=p}function TEe(r){const e={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,a,l){switch(i.calls++,a){case r.TRIANGLES:i.triangles+=l*(o/3);break;case r.LINES:i.lines+=l*(o/2);break;case r.LINE_STRIP:i.lines+=l*(o-1);break;case r.LINE_LOOP:i.lines+=l*o;break;case r.POINTS:i.points+=l*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:e,render:i,programs:null,autoReset:!0,reset:s,update:n}}function AEe(r,e,i){const n=new WeakMap,s=new ji;function o(a,l,c){const u=a.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=d!==void 0?d.length:0;let m=n.get(l);if(m===void 0||m.count!==p){let A=function(){k.dispose(),n.delete(l),l.removeEventListener("dispose",A)};var g=A;m!==void 0&&m.texture.dispose();const y=l.morphAttributes.position!==void 0,_=l.morphAttributes.normal!==void 0,x=l.morphAttributes.color!==void 0,O=l.morphAttributes.position||[],S=l.morphAttributes.normal||[],w=l.morphAttributes.color||[];let C=0;y===!0&&(C=1),_===!0&&(C=2),x===!0&&(C=3);let M=l.attributes.position.count*C,P=1;M>e.maxTextureSize&&(P=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const R=new Float32Array(M*P*4*p),k=new KM(R,M,P,p);k.type=rh,k.needsUpdate=!0;const I=C*4;for(let D=0;D<p;D++){const V=O[D],B=S[D],L=w[D],F=M*P*4*D;for(let $=0;$<V.count;$++){const z=$*I;y===!0&&(s.fromBufferAttribute(V,$),R[F+z+0]=s.x,R[F+z+1]=s.y,R[F+z+2]=s.z,R[F+z+3]=0),_===!0&&(s.fromBufferAttribute(B,$),R[F+z+4]=s.x,R[F+z+5]=s.y,R[F+z+6]=s.z,R[F+z+7]=0),x===!0&&(s.fromBufferAttribute(L,$),R[F+z+8]=s.x,R[F+z+9]=s.y,R[F+z+10]=s.z,R[F+z+11]=L.itemSize===4?s.w:1)}}m={count:p,texture:k,size:new Ge(M,P)},n.set(l,m),l.addEventListener("dispose",A)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(r,"morphTexture",a.morphTexture,i);else{let y=0;for(let x=0;x<u.length;x++)y+=u[x];const _=l.morphTargetsRelative?1:1-y;c.getUniforms().setValue(r,"morphTargetBaseInfluence",_),c.getUniforms().setValue(r,"morphTargetInfluences",u)}c.getUniforms().setValue(r,"morphTargetsTexture",m.texture,i),c.getUniforms().setValue(r,"morphTargetsTextureSize",m.size)}return{update:o}}function EEe(r,e,i,n){let s=new WeakMap;function o(c){const u=n.render.frame,d=c.geometry,p=e.get(c,d);if(s.get(p)!==u&&(e.update(p),s.set(p,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),s.get(c)!==u&&(i.update(c.instanceMatrix,r.ARRAY_BUFFER),c.instanceColor!==null&&i.update(c.instanceColor,r.ARRAY_BUFFER),s.set(c,u))),c.isSkinnedMesh){const m=c.skeleton;s.get(m)!==u&&(m.update(),s.set(m,u))}return p}function a(){s=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),i.remove(u.instanceMatrix),u.instanceColor!==null&&i.remove(u.instanceColor)}return{update:o,dispose:a}}class TN extends Xr{constructor(e,i,n,s,o,a,l,c,u,d){if(d=d!==void 0?d:Cg,d!==Cg&&d!==Xy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&d===Cg&&(n=Yg),n===void 0&&d===Xy&&(n=E_),super(null,s,o,a,l,c,d,n,u),this.isDepthTexture=!0,this.image={width:e,height:i},this.magFilter=l!==void 0?l:Ss,this.minFilter=c!==void 0?c:Ss,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const i=super.toJSON(e);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}const cJ=new Xr,uJ=new TN(1,1);uJ.compareFunction=bN;const dJ=new KM,fJ=new ON,pJ=new VO,F9=[],$9=[],U9=new Float32Array(16),z9=new Float32Array(9),X9=new Float32Array(4);function P_(r,e,i){const n=r[0];if(n<=0||n>0)return r;const s=e*i;let o=F9[s];if(o===void 0&&(o=new Float32Array(s),F9[s]=o),e!==0){n.toArray(o,0);for(let a=1,l=0;a!==e;++a)l+=i,r[a].toArray(o,l)}return o}function Ps(r,e){if(r.length!==e.length)return!1;for(let i=0,n=r.length;i<n;i++)if(r[i]!==e[i])return!1;return!0}function ks(r,e){for(let i=0,n=e.length;i<n;i++)r[i]=e[i]}function tP(r,e){let i=$9[e];i===void 0&&(i=new Int32Array(e),$9[e]=i);for(let n=0;n!==e;++n)i[n]=r.allocateTextureUnit();return i}function MEe(r,e){const i=this.cache;i[0]!==e&&(r.uniform1f(this.addr,e),i[0]=e)}function PEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Ps(i,e))return;r.uniform2fv(this.addr,e),ks(i,e)}}function kEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(e.r!==void 0)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Ps(i,e))return;r.uniform3fv(this.addr,e),ks(i,e)}}function IEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Ps(i,e))return;r.uniform4fv(this.addr,e),ks(i,e)}}function REe(r,e){const i=this.cache,n=e.elements;if(n===void 0){if(Ps(i,e))return;r.uniformMatrix2fv(this.addr,!1,e),ks(i,e)}else{if(Ps(i,n))return;X9.set(n),r.uniformMatrix2fv(this.addr,!1,X9),ks(i,n)}}function BEe(r,e){const i=this.cache,n=e.elements;if(n===void 0){if(Ps(i,e))return;r.uniformMatrix3fv(this.addr,!1,e),ks(i,e)}else{if(Ps(i,n))return;z9.set(n),r.uniformMatrix3fv(this.addr,!1,z9),ks(i,n)}}function DEe(r,e){const i=this.cache,n=e.elements;if(n===void 0){if(Ps(i,e))return;r.uniformMatrix4fv(this.addr,!1,e),ks(i,e)}else{if(Ps(i,n))return;U9.set(n),r.uniformMatrix4fv(this.addr,!1,U9),ks(i,n)}}function LEe(r,e){const i=this.cache;i[0]!==e&&(r.uniform1i(this.addr,e),i[0]=e)}function NEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Ps(i,e))return;r.uniform2iv(this.addr,e),ks(i,e)}}function VEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Ps(i,e))return;r.uniform3iv(this.addr,e),ks(i,e)}}function FEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Ps(i,e))return;r.uniform4iv(this.addr,e),ks(i,e)}}function $Ee(r,e){const i=this.cache;i[0]!==e&&(r.uniform1ui(this.addr,e),i[0]=e)}function UEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Ps(i,e))return;r.uniform2uiv(this.addr,e),ks(i,e)}}function zEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Ps(i,e))return;r.uniform3uiv(this.addr,e),ks(i,e)}}function XEe(r,e){const i=this.cache;if(e.x!==void 0)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Ps(i,e))return;r.uniform4uiv(this.addr,e),ks(i,e)}}function WEe(r,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s);const o=this.type===r.SAMPLER_2D_SHADOW?uJ:cJ;i.setTexture2D(e||o,s)}function GEe(r,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s),i.setTexture3D(e||fJ,s)}function HEe(r,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s),i.setTextureCube(e||pJ,s)}function QEe(r,e,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s),i.setTexture2DArray(e||dJ,s)}function jEe(r){switch(r){case 5126:return MEe;case 35664:return PEe;case 35665:return kEe;case 35666:return IEe;case 35674:return REe;case 35675:return BEe;case 35676:return DEe;case 5124:case 35670:return LEe;case 35667:case 35671:return NEe;case 35668:case 35672:return VEe;case 35669:case 35673:return FEe;case 5125:return $Ee;case 36294:return UEe;case 36295:return zEe;case 36296:return XEe;case 35678:case 36198:case 36298:case 36306:case 35682:return WEe;case 35679:case 36299:case 36307:return GEe;case 35680:case 36300:case 36308:case 36293:return HEe;case 36289:case 36303:case 36311:case 36292:return QEe}}function YEe(r,e){r.uniform1fv(this.addr,e)}function qEe(r,e){const i=P_(e,this.size,2);r.uniform2fv(this.addr,i)}function ZEe(r,e){const i=P_(e,this.size,3);r.uniform3fv(this.addr,i)}function KEe(r,e){const i=P_(e,this.size,4);r.uniform4fv(this.addr,i)}function JEe(r,e){const i=P_(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,i)}function eMe(r,e){const i=P_(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,i)}function tMe(r,e){const i=P_(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,i)}function iMe(r,e){r.uniform1iv(this.addr,e)}function nMe(r,e){r.uniform2iv(this.addr,e)}function rMe(r,e){r.uniform3iv(this.addr,e)}function sMe(r,e){r.uniform4iv(this.addr,e)}function oMe(r,e){r.uniform1uiv(this.addr,e)}function aMe(r,e){r.uniform2uiv(this.addr,e)}function lMe(r,e){r.uniform3uiv(this.addr,e)}function hMe(r,e){r.uniform4uiv(this.addr,e)}function cMe(r,e,i){const n=this.cache,s=e.length,o=tP(i,s);Ps(n,o)||(r.uniform1iv(this.addr,o),ks(n,o));for(let a=0;a!==s;++a)i.setTexture2D(e[a]||cJ,o[a])}function uMe(r,e,i){const n=this.cache,s=e.length,o=tP(i,s);Ps(n,o)||(r.uniform1iv(this.addr,o),ks(n,o));for(let a=0;a!==s;++a)i.setTexture3D(e[a]||fJ,o[a])}function dMe(r,e,i){const n=this.cache,s=e.length,o=tP(i,s);Ps(n,o)||(r.uniform1iv(this.addr,o),ks(n,o));for(let a=0;a!==s;++a)i.setTextureCube(e[a]||pJ,o[a])}function fMe(r,e,i){const n=this.cache,s=e.length,o=tP(i,s);Ps(n,o)||(r.uniform1iv(this.addr,o),ks(n,o));for(let a=0;a!==s;++a)i.setTexture2DArray(e[a]||dJ,o[a])}function pMe(r){switch(r){case 5126:return YEe;case 35664:return qEe;case 35665:return ZEe;case 35666:return KEe;case 35674:return JEe;case 35675:return eMe;case 35676:return tMe;case 5124:case 35670:return iMe;case 35667:case 35671:return nMe;case 35668:case 35672:return rMe;case 35669:case 35673:return sMe;case 5125:return oMe;case 36294:return aMe;case 36295:return lMe;case 36296:return hMe;case 35678:case 36198:case 36298:case 36306:case 35682:return cMe;case 35679:case 36299:case 36307:return uMe;case 35680:case 36300:case 36308:case 36293:return dMe;case 36289:case 36303:case 36311:case 36292:return fMe}}class mMe{constructor(e,i,n){this.id=e,this.addr=n,this.cache=[],this.type=i.type,this.setValue=jEe(i.type)}}class gMe{constructor(e,i,n){this.id=e,this.addr=n,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=pMe(i.type)}}class vMe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,i,n){const s=this.seq;for(let o=0,a=s.length;o!==a;++o){const l=s[o];l.setValue(e,i[l.id],n)}}}const pI=/(\w+)(\])?(\[|\.)?/g;function W9(r,e){r.seq.push(e),r.map[e.id]=e}function yMe(r,e,i){const n=r.name,s=n.length;for(pI.lastIndex=0;;){const o=pI.exec(n),a=pI.lastIndex;let l=o[1];const c=o[2]==="]",u=o[3];if(c&&(l=l|0),u===void 0||u==="["&&a+2===s){W9(i,u===void 0?new mMe(l,r,e):new gMe(l,r,e));break}else{let p=i.map[l];p===void 0&&(p=new vMe(l),W9(i,p)),i=p}}}class fA{constructor(e,i){this.seq=[],this.map={};const n=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const o=e.getActiveUniform(i,s),a=e.getUniformLocation(i,o.name);yMe(o,a,this)}}setValue(e,i,n,s){const o=this.map[i];o!==void 0&&o.setValue(e,n,s)}setOptional(e,i,n){const s=i[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,i,n,s){for(let o=0,a=i.length;o!==a;++o){const l=i[o],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,s)}}static seqWithValue(e,i){const n=[];for(let s=0,o=e.length;s!==o;++s){const a=e[s];a.id in i&&n.push(a)}return n}}function G9(r,e,i){const n=r.createShader(e);return r.shaderSource(n,i),r.compileShader(n),n}const _Me=37297;let xMe=0;function bMe(r,e){const i=r.split(`
`),n=[],s=Math.max(e-6,0),o=Math.min(e+6,i.length);for(let a=s;a<o;a++){const l=a+1;n.push(`${l===e?">":" "} ${l}: ${i[a]}`)}return n.join(`
`)}function wMe(r){const e=Ln.getPrimaries(Ln.workingColorSpace),i=Ln.getPrimaries(r);let n;switch(e===i?n="":e===bw&&i===xw?n="LinearDisplayP3ToLinearSRGB":e===xw&&i===bw&&(n="LinearSRGBToLinearDisplayP3"),r){case Xd:case DO:return[n,"LinearTransferOETF"];case al:case ZM:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function H9(r,e,i){const n=r.getShaderParameter(e,r.COMPILE_STATUS),s=r.getShaderInfoLog(e).trim();if(n&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return i.toUpperCase()+`

`+s+`

`+bMe(r.getShaderSource(e),a)}else return s}function OMe(r,e){const i=wMe(e);return`vec4 ${r}( vec4 value ) { return ${i[0]}( ${i[1]}( value ) ); }`}function SMe(r,e){let i;switch(e){case SK:i="Linear";break;case CK:i="Reinhard";break;case TK:i="OptimizedCineon";break;case uN:i="ACESFilmic";break;case EK:i="AgX";break;case MK:i="Neutral";break;case AK:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+r+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function CMe(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(db).join(`
`)}function TMe(r){const e=[];for(const i in r){const n=r[i];n!==!1&&e.push("#define "+i+" "+n)}return e.join(`
`)}function AMe(r,e){const i={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const o=r.getActiveAttrib(e,s),a=o.name;let l=1;o.type===r.FLOAT_MAT2&&(l=2),o.type===r.FLOAT_MAT3&&(l=3),o.type===r.FLOAT_MAT4&&(l=4),i[a]={type:o.type,location:r.getAttribLocation(e,a),locationSize:l}}return i}function db(r){return r!==""}function Q9(r,e){const i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function j9(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const EMe=/^[ \t]*#include +<([\w\d./]+)>/gm;function t5(r){return r.replace(EMe,PMe)}const MMe=new Map;function PMe(r,e){let i=Wi[e];if(i===void 0){const n=MMe.get(e);if(n!==void 0)i=Wi[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return t5(i)}const kMe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Y9(r){return r.replace(kMe,IMe)}function IMe(r,e,i,n){let s="";for(let o=parseInt(e);o<parseInt(i);o++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function q9(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function RMe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===hN?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===cN?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Vc&&(e="SHADOWMAP_TYPE_VSM"),e}function BMe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ed:case Sp:e="ENVMAP_TYPE_CUBE";break;case T_:e="ENVMAP_TYPE_CUBE_UV";break}return e}function DMe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Sp:e="ENVMAP_MODE_REFRACTION";break}return e}function LMe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case BO:e="ENVMAP_BLENDING_MULTIPLY";break;case wK:e="ENVMAP_BLENDING_MIX";break;case OK:e="ENVMAP_BLENDING_ADD";break}return e}function NMe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const i=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:n,maxMip:i}}function VMe(r,e,i,n){const s=r.getContext(),o=i.defines;let a=i.vertexShader,l=i.fragmentShader;const c=RMe(i),u=BMe(i),d=DMe(i),p=LMe(i),m=NMe(i),g=CMe(i),y=TMe(o),_=s.createProgram();let x,O,S=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(x=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y].filter(db).join(`
`),x.length>0&&(x+=`
`),O=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y].filter(db).join(`
`),O.length>0&&(O+=`
`)):(x=[q9(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(db).join(`
`),O=[q9(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,y,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.envMap?"#define "+d:"",i.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==bd?"#define TONE_MAPPING":"",i.toneMapping!==bd?Wi.tonemapping_pars_fragment:"",i.toneMapping!==bd?SMe("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Wi.colorspace_pars_fragment,OMe("linearToOutputTexel",i.outputColorSpace),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(db).join(`
`)),a=t5(a),a=Q9(a,i),a=j9(a,i),l=t5(l),l=Q9(l,i),l=j9(l,i),a=Y9(a),l=Y9(l),i.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,O=["#define varying in",i.glslVersion===J4?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===J4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+O);const w=S+x+a,C=S+O+l,M=G9(s,s.VERTEX_SHADER,w),P=G9(s,s.FRAGMENT_SHADER,C);s.attachShader(_,M),s.attachShader(_,P),i.index0AttributeName!==void 0?s.bindAttribLocation(_,0,i.index0AttributeName):i.morphTargets===!0&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_);function R(D){if(r.debug.checkShaderErrors){const V=s.getProgramInfoLog(_).trim(),B=s.getShaderInfoLog(M).trim(),L=s.getShaderInfoLog(P).trim();let F=!0,$=!0;if(s.getProgramParameter(_,s.LINK_STATUS)===!1)if(F=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(s,_,M,P);else{const z=H9(s,M,"vertex"),H=H9(s,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(_,s.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+V+`
`+z+`
`+H)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(B===""||L==="")&&($=!1);$&&(D.diagnostics={runnable:F,programLog:V,vertexShader:{log:B,prefix:x},fragmentShader:{log:L,prefix:O}})}s.deleteShader(M),s.deleteShader(P),k=new fA(s,_),I=AMe(s,_)}let k;this.getUniforms=function(){return k===void 0&&R(this),k};let I;this.getAttributes=function(){return I===void 0&&R(this),I};let A=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=s.getProgramParameter(_,_Me)),A},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(_),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=xMe++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=M,this.fragmentShader=P,this}let FMe=0;class $Me{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(i),o=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const i=this.materialCache.get(e);for(const n of i)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const i=this.materialCache;let n=i.get(e);return n===void 0&&(n=new Set,i.set(e,n)),n}_getShaderStage(e){const i=this.shaderCache;let n=i.get(e);return n===void 0&&(n=new UMe(e),i.set(e,n)),n}}class UMe{constructor(e){this.id=FMe++,this.code=e,this.usedTimes=0}}function zMe(r,e,i,n,s,o,a){const l=new JM,c=new $Me,u=new Set,d=[],p=s.logarithmicDepthBuffer,m=s.vertexTextures;let g=s.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(I){return u.add(I),I===0?"uv":`uv${I}`}function x(I,A,D,V,B){const L=V.fog,F=B.geometry,$=I.isMeshStandardMaterial?V.environment:null,z=(I.isMeshStandardMaterial?i:e).get(I.envMap||$),H=z&&z.mapping===T_?z.image.height:null,K=y[I.type];I.precision!==null&&(g=s.getMaxPrecision(I.precision),g!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",g,"instead."));const J=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,ne=J!==void 0?J.length:0;let be=0;F.morphAttributes.position!==void 0&&(be=1),F.morphAttributes.normal!==void 0&&(be=2),F.morphAttributes.color!==void 0&&(be=3);let pe,ae,ye,_e;if(K){const Qi=Zl[K];pe=Qi.vertexShader,ae=Qi.fragmentShader}else pe=I.vertexShader,ae=I.fragmentShader,c.update(I),ye=c.getVertexShaderID(I),_e=c.getFragmentShaderID(I);const re=r.getRenderTarget(),se=B.isInstancedMesh===!0,Q=B.isBatchedMesh===!0,G=!!I.map,ie=!!I.matcap,he=!!z,j=!!I.aoMap,ee=!!I.lightMap,de=!!I.bumpMap,ve=!!I.normalMap,Ce=!!I.displacementMap,Ie=!!I.emissiveMap,te=!!I.metalnessMap,q=!!I.roughnessMap,me=I.anisotropy>0,ge=I.clearcoat>0,Ae=I.dispersion>0,Pe=I.iridescence>0,je=I.sheen>0,$e=I.transmission>0,We=me&&!!I.anisotropyMap,ft=ge&&!!I.clearcoatMap,Ze=ge&&!!I.clearcoatNormalMap,dt=ge&&!!I.clearcoatRoughnessMap,Ut=Pe&&!!I.iridescenceMap,zt=Pe&&!!I.iridescenceThicknessMap,_t=je&&!!I.sheenColorMap,ni=je&&!!I.sheenRoughnessMap,Bi=!!I.specularMap,Ee=!!I.specularColorMap,Ue=!!I.specularIntensityMap,xe=$e&&!!I.transmissionMap,ze=$e&&!!I.thicknessMap,Qe=!!I.gradientMap,ct=!!I.alphaMap,xt=I.alphaTest>0,Ki=!!I.alphaHash,Ji=!!I.extensions;let gn=bd;I.toneMapped&&(re===null||re.isXRRenderTarget===!0)&&(gn=r.toneMapping);const pr={shaderID:K,shaderType:I.type,shaderName:I.name,vertexShader:pe,fragmentShader:ae,defines:I.defines,customVertexShaderID:ye,customFragmentShaderID:_e,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:g,batching:Q,instancing:se,instancingColor:se&&B.instanceColor!==null,instancingMorph:se&&B.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:re===null?r.outputColorSpace:re.isXRRenderTarget===!0?re.texture.colorSpace:Xd,alphaToCoverage:!!I.alphaToCoverage,map:G,matcap:ie,envMap:he,envMapMode:he&&z.mapping,envMapCubeUVHeight:H,aoMap:j,lightMap:ee,bumpMap:de,normalMap:ve,displacementMap:m&&Ce,emissiveMap:Ie,normalMapObjectSpace:ve&&I.normalMapType===GK,normalMapTangentSpace:ve&&I.normalMapType===Wp,metalnessMap:te,roughnessMap:q,anisotropy:me,anisotropyMap:We,clearcoat:ge,clearcoatMap:ft,clearcoatNormalMap:Ze,clearcoatRoughnessMap:dt,dispersion:Ae,iridescence:Pe,iridescenceMap:Ut,iridescenceThicknessMap:zt,sheen:je,sheenColorMap:_t,sheenRoughnessMap:ni,specularMap:Bi,specularColorMap:Ee,specularIntensityMap:Ue,transmission:$e,transmissionMap:xe,thicknessMap:ze,gradientMap:Qe,opaque:I.transparent===!1&&I.blending===Sg&&I.alphaToCoverage===!1,alphaMap:ct,alphaTest:xt,alphaHash:Ki,combine:I.combine,mapUv:G&&_(I.map.channel),aoMapUv:j&&_(I.aoMap.channel),lightMapUv:ee&&_(I.lightMap.channel),bumpMapUv:de&&_(I.bumpMap.channel),normalMapUv:ve&&_(I.normalMap.channel),displacementMapUv:Ce&&_(I.displacementMap.channel),emissiveMapUv:Ie&&_(I.emissiveMap.channel),metalnessMapUv:te&&_(I.metalnessMap.channel),roughnessMapUv:q&&_(I.roughnessMap.channel),anisotropyMapUv:We&&_(I.anisotropyMap.channel),clearcoatMapUv:ft&&_(I.clearcoatMap.channel),clearcoatNormalMapUv:Ze&&_(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:dt&&_(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Ut&&_(I.iridescenceMap.channel),iridescenceThicknessMapUv:zt&&_(I.iridescenceThicknessMap.channel),sheenColorMapUv:_t&&_(I.sheenColorMap.channel),sheenRoughnessMapUv:ni&&_(I.sheenRoughnessMap.channel),specularMapUv:Bi&&_(I.specularMap.channel),specularColorMapUv:Ee&&_(I.specularColorMap.channel),specularIntensityMapUv:Ue&&_(I.specularIntensityMap.channel),transmissionMapUv:xe&&_(I.transmissionMap.channel),thicknessMapUv:ze&&_(I.thicknessMap.channel),alphaMapUv:ct&&_(I.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(ve||me),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,pointsUvs:B.isPoints===!0&&!!F.attributes.uv&&(G||ct),fog:!!L,useFog:I.fog===!0,fogExp2:!!L&&L.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:B.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:be,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:r.shadowMap.enabled&&D.length>0,shadowMapType:r.shadowMap.type,toneMapping:gn,useLegacyLights:r._useLegacyLights,decodeVideoTexture:G&&I.map.isVideoTexture===!0&&Ln.getTransfer(I.map.colorSpace)===Jn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===ba,flipSided:I.side===wo,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Ji&&I.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Ji&&I.extensions.multiDraw===!0&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return pr.vertexUv1s=u.has(1),pr.vertexUv2s=u.has(2),pr.vertexUv3s=u.has(3),u.clear(),pr}function O(I){const A=[];if(I.shaderID?A.push(I.shaderID):(A.push(I.customVertexShaderID),A.push(I.customFragmentShaderID)),I.defines!==void 0)for(const D in I.defines)A.push(D),A.push(I.defines[D]);return I.isRawShaderMaterial===!1&&(S(A,I),w(A,I),A.push(r.outputColorSpace)),A.push(I.customProgramCacheKey),A.join()}function S(I,A){I.push(A.precision),I.push(A.outputColorSpace),I.push(A.envMapMode),I.push(A.envMapCubeUVHeight),I.push(A.mapUv),I.push(A.alphaMapUv),I.push(A.lightMapUv),I.push(A.aoMapUv),I.push(A.bumpMapUv),I.push(A.normalMapUv),I.push(A.displacementMapUv),I.push(A.emissiveMapUv),I.push(A.metalnessMapUv),I.push(A.roughnessMapUv),I.push(A.anisotropyMapUv),I.push(A.clearcoatMapUv),I.push(A.clearcoatNormalMapUv),I.push(A.clearcoatRoughnessMapUv),I.push(A.iridescenceMapUv),I.push(A.iridescenceThicknessMapUv),I.push(A.sheenColorMapUv),I.push(A.sheenRoughnessMapUv),I.push(A.specularMapUv),I.push(A.specularColorMapUv),I.push(A.specularIntensityMapUv),I.push(A.transmissionMapUv),I.push(A.thicknessMapUv),I.push(A.combine),I.push(A.fogExp2),I.push(A.sizeAttenuation),I.push(A.morphTargetsCount),I.push(A.morphAttributeCount),I.push(A.numDirLights),I.push(A.numPointLights),I.push(A.numSpotLights),I.push(A.numSpotLightMaps),I.push(A.numHemiLights),I.push(A.numRectAreaLights),I.push(A.numDirLightShadows),I.push(A.numPointLightShadows),I.push(A.numSpotLightShadows),I.push(A.numSpotLightShadowsWithMaps),I.push(A.numLightProbes),I.push(A.shadowMapType),I.push(A.toneMapping),I.push(A.numClippingPlanes),I.push(A.numClipIntersection),I.push(A.depthPacking)}function w(I,A){l.disableAll(),A.supportsVertexTextures&&l.enable(0),A.instancing&&l.enable(1),A.instancingColor&&l.enable(2),A.instancingMorph&&l.enable(3),A.matcap&&l.enable(4),A.envMap&&l.enable(5),A.normalMapObjectSpace&&l.enable(6),A.normalMapTangentSpace&&l.enable(7),A.clearcoat&&l.enable(8),A.iridescence&&l.enable(9),A.alphaTest&&l.enable(10),A.vertexColors&&l.enable(11),A.vertexAlphas&&l.enable(12),A.vertexUv1s&&l.enable(13),A.vertexUv2s&&l.enable(14),A.vertexUv3s&&l.enable(15),A.vertexTangents&&l.enable(16),A.anisotropy&&l.enable(17),A.alphaHash&&l.enable(18),A.batching&&l.enable(19),A.dispersion&&l.enable(20),I.push(l.mask),l.disableAll(),A.fog&&l.enable(0),A.useFog&&l.enable(1),A.flatShading&&l.enable(2),A.logarithmicDepthBuffer&&l.enable(3),A.skinning&&l.enable(4),A.morphTargets&&l.enable(5),A.morphNormals&&l.enable(6),A.morphColors&&l.enable(7),A.premultipliedAlpha&&l.enable(8),A.shadowMapEnabled&&l.enable(9),A.useLegacyLights&&l.enable(10),A.doubleSided&&l.enable(11),A.flipSided&&l.enable(12),A.useDepthPacking&&l.enable(13),A.dithering&&l.enable(14),A.transmission&&l.enable(15),A.sheen&&l.enable(16),A.opaque&&l.enable(17),A.pointsUvs&&l.enable(18),A.decodeVideoTexture&&l.enable(19),A.alphaToCoverage&&l.enable(20),I.push(l.mask)}function C(I){const A=y[I.type];let D;if(A){const V=Zl[A];D=LO.clone(V.uniforms)}else D=I.uniforms;return D}function M(I,A){let D;for(let V=0,B=d.length;V<B;V++){const L=d[V];if(L.cacheKey===A){D=L,++D.usedTimes;break}}return D===void 0&&(D=new VMe(r,A,I,o),d.push(D)),D}function P(I){if(--I.usedTimes===0){const A=d.indexOf(I);d[A]=d[d.length-1],d.pop(),I.destroy()}}function R(I){c.remove(I)}function k(){c.dispose()}return{getParameters:x,getProgramCacheKey:O,getUniforms:C,acquireProgram:M,releaseProgram:P,releaseShaderCache:R,programs:d,dispose:k}}function XMe(){let r=new WeakMap;function e(o){let a=r.get(o);return a===void 0&&(a={},r.set(o,a)),a}function i(o){r.delete(o)}function n(o,a,l){r.get(o)[a]=l}function s(){r=new WeakMap}return{get:e,remove:i,update:n,dispose:s}}function WMe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function Z9(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function K9(){const r=[];let e=0;const i=[],n=[],s=[];function o(){e=0,i.length=0,n.length=0,s.length=0}function a(p,m,g,y,_,x){let O=r[e];return O===void 0?(O={id:p.id,object:p,geometry:m,material:g,groupOrder:y,renderOrder:p.renderOrder,z:_,group:x},r[e]=O):(O.id=p.id,O.object=p,O.geometry=m,O.material=g,O.groupOrder=y,O.renderOrder=p.renderOrder,O.z=_,O.group=x),e++,O}function l(p,m,g,y,_,x){const O=a(p,m,g,y,_,x);g.transmission>0?n.push(O):g.transparent===!0?s.push(O):i.push(O)}function c(p,m,g,y,_,x){const O=a(p,m,g,y,_,x);g.transmission>0?n.unshift(O):g.transparent===!0?s.unshift(O):i.unshift(O)}function u(p,m){i.length>1&&i.sort(p||WMe),n.length>1&&n.sort(m||Z9),s.length>1&&s.sort(m||Z9)}function d(){for(let p=e,m=r.length;p<m;p++){const g=r[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:i,transmissive:n,transparent:s,init:o,push:l,unshift:c,finish:d,sort:u}}function GMe(){let r=new WeakMap;function e(n,s){const o=r.get(n);let a;return o===void 0?(a=new K9,r.set(n,[a])):s>=o.length?(a=new K9,o.push(a)):a=o[s],a}function i(){r=new WeakMap}return{get:e,dispose:i}}function HMe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new le,color:new ut};break;case"SpotLight":i={position:new le,direction:new le,color:new ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new le,color:new ut,distance:0,decay:0};break;case"HemisphereLight":i={direction:new le,skyColor:new ut,groundColor:new ut};break;case"RectAreaLight":i={color:new ut,position:new le,halfWidth:new le,halfHeight:new le};break}return r[e.id]=i,i}}}function QMe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let i;switch(e.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=i,i}}}let jMe=0;function YMe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function qMe(r){const e=new HMe,i=QMe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new le);const s=new le,o=new wt,a=new wt;function l(u,d){let p=0,m=0,g=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let y=0,_=0,x=0,O=0,S=0,w=0,C=0,M=0,P=0,R=0,k=0;u.sort(YMe);const I=d===!0?Math.PI:1;for(let D=0,V=u.length;D<V;D++){const B=u[D],L=B.color,F=B.intensity,$=B.distance,z=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)p+=L.r*F*I,m+=L.g*F*I,g+=L.b*F*I;else if(B.isLightProbe){for(let H=0;H<9;H++)n.probe[H].addScaledVector(B.sh.coefficients[H],F);k++}else if(B.isDirectionalLight){const H=e.get(B);if(H.color.copy(B.color).multiplyScalar(B.intensity*I),B.castShadow){const K=B.shadow,J=i.get(B);J.shadowBias=K.bias,J.shadowNormalBias=K.normalBias,J.shadowRadius=K.radius,J.shadowMapSize=K.mapSize,n.directionalShadow[y]=J,n.directionalShadowMap[y]=z,n.directionalShadowMatrix[y]=B.shadow.matrix,w++}n.directional[y]=H,y++}else if(B.isSpotLight){const H=e.get(B);H.position.setFromMatrixPosition(B.matrixWorld),H.color.copy(L).multiplyScalar(F*I),H.distance=$,H.coneCos=Math.cos(B.angle),H.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),H.decay=B.decay,n.spot[x]=H;const K=B.shadow;if(B.map&&(n.spotLightMap[P]=B.map,P++,K.updateMatrices(B),B.castShadow&&R++),n.spotLightMatrix[x]=K.matrix,B.castShadow){const J=i.get(B);J.shadowBias=K.bias,J.shadowNormalBias=K.normalBias,J.shadowRadius=K.radius,J.shadowMapSize=K.mapSize,n.spotShadow[x]=J,n.spotShadowMap[x]=z,M++}x++}else if(B.isRectAreaLight){const H=e.get(B);H.color.copy(L).multiplyScalar(F),H.halfWidth.set(B.width*.5,0,0),H.halfHeight.set(0,B.height*.5,0),n.rectArea[O]=H,O++}else if(B.isPointLight){const H=e.get(B);if(H.color.copy(B.color).multiplyScalar(B.intensity*I),H.distance=B.distance,H.decay=B.decay,B.castShadow){const K=B.shadow,J=i.get(B);J.shadowBias=K.bias,J.shadowNormalBias=K.normalBias,J.shadowRadius=K.radius,J.shadowMapSize=K.mapSize,J.shadowCameraNear=K.camera.near,J.shadowCameraFar=K.camera.far,n.pointShadow[_]=J,n.pointShadowMap[_]=z,n.pointShadowMatrix[_]=B.shadow.matrix,C++}n.point[_]=H,_++}else if(B.isHemisphereLight){const H=e.get(B);H.skyColor.copy(B.color).multiplyScalar(F*I),H.groundColor.copy(B.groundColor).multiplyScalar(F*I),n.hemi[S]=H,S++}}O>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=mt.LTC_FLOAT_1,n.rectAreaLTC2=mt.LTC_FLOAT_2):(n.rectAreaLTC1=mt.LTC_HALF_1,n.rectAreaLTC2=mt.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=m,n.ambient[2]=g;const A=n.hash;(A.directionalLength!==y||A.pointLength!==_||A.spotLength!==x||A.rectAreaLength!==O||A.hemiLength!==S||A.numDirectionalShadows!==w||A.numPointShadows!==C||A.numSpotShadows!==M||A.numSpotMaps!==P||A.numLightProbes!==k)&&(n.directional.length=y,n.spot.length=x,n.rectArea.length=O,n.point.length=_,n.hemi.length=S,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=C,n.pointShadowMap.length=C,n.spotShadow.length=M,n.spotShadowMap.length=M,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=C,n.spotLightMatrix.length=M+P-R,n.spotLightMap.length=P,n.numSpotLightShadowsWithMaps=R,n.numLightProbes=k,A.directionalLength=y,A.pointLength=_,A.spotLength=x,A.rectAreaLength=O,A.hemiLength=S,A.numDirectionalShadows=w,A.numPointShadows=C,A.numSpotShadows=M,A.numSpotMaps=P,A.numLightProbes=k,n.version=jMe++)}function c(u,d){let p=0,m=0,g=0,y=0,_=0;const x=d.matrixWorldInverse;for(let O=0,S=u.length;O<S;O++){const w=u[O];if(w.isDirectionalLight){const C=n.directional[p];C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(x),p++}else if(w.isSpotLight){const C=n.spot[g];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(x),C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(x),g++}else if(w.isRectAreaLight){const C=n.rectArea[y];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(x),a.identity(),o.copy(w.matrixWorld),o.premultiply(x),a.extractRotation(o),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),y++}else if(w.isPointLight){const C=n.point[m];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(x),m++}else if(w.isHemisphereLight){const C=n.hemi[_];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(x),_++}}}return{setup:l,setupView:c,state:n}}function J9(r){const e=new qMe(r),i=[],n=[];function s(d){u.camera=d,i.length=0,n.length=0}function o(d){i.push(d)}function a(d){n.push(d)}function l(d){e.setup(i,d)}function c(d){e.setupView(i,d)}const u={lightsArray:i,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:u,setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function ZMe(r){let e=new WeakMap;function i(s,o=0){const a=e.get(s);let l;return a===void 0?(l=new J9(r),e.set(s,[l])):o>=a.length?(l=new J9(r),a.push(l)):l=a[o],l}function n(){e=new WeakMap}return{get:i,dispose:n}}class AN extends Eo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=XK,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class EN extends Eo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const KMe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,JMe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ePe(r,e,i){let n=new FO;const s=new Ge,o=new Ge,a=new ji,l=new AN({depthPacking:WK}),c=new EN,u={},d=i.maxTextureSize,p={[Ad]:wo,[wo]:Ad,[ba]:ba},m=new ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:KMe,fragmentShader:JMe}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const y=new Ai;y.setAttribute("position",new un(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Un(y,m),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hN;let O=this.type;this.render=function(P,R,k){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||P.length===0)return;const I=r.getRenderTarget(),A=r.getActiveCubeFace(),D=r.getActiveMipmapLevel(),V=r.state;V.setBlending(xd),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const B=O!==Vc&&this.type===Vc,L=O===Vc&&this.type!==Vc;for(let F=0,$=P.length;F<$;F++){const z=P[F],H=z.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;s.copy(H.mapSize);const K=H.getFrameExtents();if(s.multiply(K),o.copy(H.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(o.x=Math.floor(d/K.x),s.x=o.x*K.x,H.mapSize.x=o.x),s.y>d&&(o.y=Math.floor(d/K.y),s.y=o.y*K.y,H.mapSize.y=o.y)),H.map===null||B===!0||L===!0){const ne=this.type!==Vc?{minFilter:Ss,magFilter:Ss}:{};H.map!==null&&H.map.dispose(),H.map=new yh(s.x,s.y,ne),H.map.texture.name=z.name+".shadowMap",H.camera.updateProjectionMatrix()}r.setRenderTarget(H.map),r.clear();const J=H.getViewportCount();for(let ne=0;ne<J;ne++){const be=H.getViewport(ne);a.set(o.x*be.x,o.y*be.y,o.x*be.z,o.y*be.w),V.viewport(a),H.updateMatrices(z,ne),n=H.getFrustum(),C(R,k,H.camera,z,this.type)}H.isPointLightShadow!==!0&&this.type===Vc&&S(H,k),H.needsUpdate=!1}O=this.type,x.needsUpdate=!1,r.setRenderTarget(I,A,D)};function S(P,R){const k=e.update(_);m.defines.VSM_SAMPLES!==P.blurSamples&&(m.defines.VSM_SAMPLES=P.blurSamples,g.defines.VSM_SAMPLES=P.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new yh(s.x,s.y)),m.uniforms.shadow_pass.value=P.map.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,r.setRenderTarget(P.mapPass),r.clear(),r.renderBufferDirect(R,null,k,m,_,null),g.uniforms.shadow_pass.value=P.mapPass.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,r.setRenderTarget(P.map),r.clear(),r.renderBufferDirect(R,null,k,g,_,null)}function w(P,R,k,I){let A=null;const D=k.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(D!==void 0)A=D;else if(A=k.isPointLight===!0?c:l,r.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const V=A.uuid,B=R.uuid;let L=u[V];L===void 0&&(L={},u[V]=L);let F=L[B];F===void 0&&(F=A.clone(),L[B]=F,R.addEventListener("dispose",M)),A=F}if(A.visible=R.visible,A.wireframe=R.wireframe,I===Vc?A.side=R.shadowSide!==null?R.shadowSide:R.side:A.side=R.shadowSide!==null?R.shadowSide:p[R.side],A.alphaMap=R.alphaMap,A.alphaTest=R.alphaTest,A.map=R.map,A.clipShadows=R.clipShadows,A.clippingPlanes=R.clippingPlanes,A.clipIntersection=R.clipIntersection,A.displacementMap=R.displacementMap,A.displacementScale=R.displacementScale,A.displacementBias=R.displacementBias,A.wireframeLinewidth=R.wireframeLinewidth,A.linewidth=R.linewidth,k.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const V=r.properties.get(A);V.light=k}return A}function C(P,R,k,I,A){if(P.visible===!1)return;if(P.layers.test(R.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&A===Vc)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,P.matrixWorld);const B=e.update(P),L=P.material;if(Array.isArray(L)){const F=B.groups;for(let $=0,z=F.length;$<z;$++){const H=F[$],K=L[H.materialIndex];if(K&&K.visible){const J=w(P,K,I,A);P.onBeforeShadow(r,P,R,k,B,J,H),r.renderBufferDirect(k,null,B,J,P,H),P.onAfterShadow(r,P,R,k,B,J,H)}}}else if(L.visible){const F=w(P,L,I,A);P.onBeforeShadow(r,P,R,k,B,F,null),r.renderBufferDirect(k,null,B,F,P,null),P.onAfterShadow(r,P,R,k,B,F,null)}}const V=P.children;for(let B=0,L=V.length;B<L;B++)C(V[B],R,k,I,A)}function M(P){P.target.removeEventListener("dispose",M);for(const k in u){const I=u[k],A=P.target.uuid;A in I&&(I[A].dispose(),delete I[A])}}}function tPe(r){function e(){let xe=!1;const ze=new ji;let Qe=null;const ct=new ji(0,0,0,0);return{setMask:function(xt){Qe!==xt&&!xe&&(r.colorMask(xt,xt,xt,xt),Qe=xt)},setLocked:function(xt){xe=xt},setClear:function(xt,Ki,Ji,gn,pr){pr===!0&&(xt*=gn,Ki*=gn,Ji*=gn),ze.set(xt,Ki,Ji,gn),ct.equals(ze)===!1&&(r.clearColor(xt,Ki,Ji,gn),ct.copy(ze))},reset:function(){xe=!1,Qe=null,ct.set(-1,0,0,0)}}}function i(){let xe=!1,ze=null,Qe=null,ct=null;return{setTest:function(xt){xt?_e(r.DEPTH_TEST):re(r.DEPTH_TEST)},setMask:function(xt){ze!==xt&&!xe&&(r.depthMask(xt),ze=xt)},setFunc:function(xt){if(Qe!==xt){switch(xt){case mK:r.depthFunc(r.NEVER);break;case gK:r.depthFunc(r.ALWAYS);break;case vK:r.depthFunc(r.LESS);break;case gw:r.depthFunc(r.LEQUAL);break;case yK:r.depthFunc(r.EQUAL);break;case _K:r.depthFunc(r.GEQUAL);break;case xK:r.depthFunc(r.GREATER);break;case bK:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Qe=xt}},setLocked:function(xt){xe=xt},setClear:function(xt){ct!==xt&&(r.clearDepth(xt),ct=xt)},reset:function(){xe=!1,ze=null,Qe=null,ct=null}}}function n(){let xe=!1,ze=null,Qe=null,ct=null,xt=null,Ki=null,Ji=null,gn=null,pr=null;return{setTest:function(Qi){xe||(Qi?_e(r.STENCIL_TEST):re(r.STENCIL_TEST))},setMask:function(Qi){ze!==Qi&&!xe&&(r.stencilMask(Qi),ze=Qi)},setFunc:function(Qi,Is,Sr){(Qe!==Qi||ct!==Is||xt!==Sr)&&(r.stencilFunc(Qi,Is,Sr),Qe=Qi,ct=Is,xt=Sr)},setOp:function(Qi,Is,Sr){(Ki!==Qi||Ji!==Is||gn!==Sr)&&(r.stencilOp(Qi,Is,Sr),Ki=Qi,Ji=Is,gn=Sr)},setLocked:function(Qi){xe=Qi},setClear:function(Qi){pr!==Qi&&(r.clearStencil(Qi),pr=Qi)},reset:function(){xe=!1,ze=null,Qe=null,ct=null,xt=null,Ki=null,Ji=null,gn=null,pr=null}}}const s=new e,o=new i,a=new n,l=new WeakMap,c=new WeakMap;let u={},d={},p=new WeakMap,m=[],g=null,y=!1,_=null,x=null,O=null,S=null,w=null,C=null,M=null,P=new ut(0,0,0),R=0,k=!1,I=null,A=null,D=null,V=null,B=null;const L=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,$=0;const z=r.getParameter(r.VERSION);z.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(z)[1]),F=$>=1):z.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),F=$>=2);let H=null,K={};const J=r.getParameter(r.SCISSOR_BOX),ne=r.getParameter(r.VIEWPORT),be=new ji().fromArray(J),pe=new ji().fromArray(ne);function ae(xe,ze,Qe,ct){const xt=new Uint8Array(4),Ki=r.createTexture();r.bindTexture(xe,Ki),r.texParameteri(xe,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(xe,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Ji=0;Ji<Qe;Ji++)xe===r.TEXTURE_3D||xe===r.TEXTURE_2D_ARRAY?r.texImage3D(ze,0,r.RGBA,1,1,ct,0,r.RGBA,r.UNSIGNED_BYTE,xt):r.texImage2D(ze+Ji,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,xt);return Ki}const ye={};ye[r.TEXTURE_2D]=ae(r.TEXTURE_2D,r.TEXTURE_2D,1),ye[r.TEXTURE_CUBE_MAP]=ae(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),ye[r.TEXTURE_2D_ARRAY]=ae(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),ye[r.TEXTURE_3D]=ae(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),_e(r.DEPTH_TEST),o.setFunc(gw),de(!1),ve(w4),_e(r.CULL_FACE),j(xd);function _e(xe){u[xe]!==!0&&(r.enable(xe),u[xe]=!0)}function re(xe){u[xe]!==!1&&(r.disable(xe),u[xe]=!1)}function se(xe,ze){return d[xe]!==ze?(r.bindFramebuffer(xe,ze),d[xe]=ze,xe===r.DRAW_FRAMEBUFFER&&(d[r.FRAMEBUFFER]=ze),xe===r.FRAMEBUFFER&&(d[r.DRAW_FRAMEBUFFER]=ze),!0):!1}function Q(xe,ze){let Qe=m,ct=!1;if(xe){Qe=p.get(ze),Qe===void 0&&(Qe=[],p.set(ze,Qe));const xt=xe.textures;if(Qe.length!==xt.length||Qe[0]!==r.COLOR_ATTACHMENT0){for(let Ki=0,Ji=xt.length;Ki<Ji;Ki++)Qe[Ki]=r.COLOR_ATTACHMENT0+Ki;Qe.length=xt.length,ct=!0}}else Qe[0]!==r.BACK&&(Qe[0]=r.BACK,ct=!0);ct&&r.drawBuffers(Qe)}function G(xe){return g!==xe?(r.useProgram(xe),g=xe,!0):!1}const ie={[Yf]:r.FUNC_ADD,[KZ]:r.FUNC_SUBTRACT,[JZ]:r.FUNC_REVERSE_SUBTRACT};ie[eK]=r.MIN,ie[tK]=r.MAX;const he={[iK]:r.ZERO,[nK]:r.ONE,[rK]:r.SRC_COLOR,[hE]:r.SRC_ALPHA,[cK]:r.SRC_ALPHA_SATURATE,[lK]:r.DST_COLOR,[oK]:r.DST_ALPHA,[sK]:r.ONE_MINUS_SRC_COLOR,[cE]:r.ONE_MINUS_SRC_ALPHA,[hK]:r.ONE_MINUS_DST_COLOR,[aK]:r.ONE_MINUS_DST_ALPHA,[uK]:r.CONSTANT_COLOR,[dK]:r.ONE_MINUS_CONSTANT_COLOR,[fK]:r.CONSTANT_ALPHA,[pK]:r.ONE_MINUS_CONSTANT_ALPHA};function j(xe,ze,Qe,ct,xt,Ki,Ji,gn,pr,Qi){if(xe===xd){y===!0&&(re(r.BLEND),y=!1);return}if(y===!1&&(_e(r.BLEND),y=!0),xe!==ZZ){if(xe!==_||Qi!==k){if((x!==Yf||w!==Yf)&&(r.blendEquation(r.FUNC_ADD),x=Yf,w=Yf),Qi)switch(xe){case Sg:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case lE:r.blendFunc(r.ONE,r.ONE);break;case O4:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case S4:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}else switch(xe){case Sg:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case lE:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case O4:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case S4:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}O=null,S=null,C=null,M=null,P.set(0,0,0),R=0,_=xe,k=Qi}return}xt=xt||ze,Ki=Ki||Qe,Ji=Ji||ct,(ze!==x||xt!==w)&&(r.blendEquationSeparate(ie[ze],ie[xt]),x=ze,w=xt),(Qe!==O||ct!==S||Ki!==C||Ji!==M)&&(r.blendFuncSeparate(he[Qe],he[ct],he[Ki],he[Ji]),O=Qe,S=ct,C=Ki,M=Ji),(gn.equals(P)===!1||pr!==R)&&(r.blendColor(gn.r,gn.g,gn.b,pr),P.copy(gn),R=pr),_=xe,k=!1}function ee(xe,ze){xe.side===ba?re(r.CULL_FACE):_e(r.CULL_FACE);let Qe=xe.side===wo;ze&&(Qe=!Qe),de(Qe),xe.blending===Sg&&xe.transparent===!1?j(xd):j(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.blendColor,xe.blendAlpha,xe.premultipliedAlpha),o.setFunc(xe.depthFunc),o.setTest(xe.depthTest),o.setMask(xe.depthWrite),s.setMask(xe.colorWrite);const ct=xe.stencilWrite;a.setTest(ct),ct&&(a.setMask(xe.stencilWriteMask),a.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),a.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),Ie(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),xe.alphaToCoverage===!0?_e(r.SAMPLE_ALPHA_TO_COVERAGE):re(r.SAMPLE_ALPHA_TO_COVERAGE)}function de(xe){I!==xe&&(xe?r.frontFace(r.CW):r.frontFace(r.CCW),I=xe)}function ve(xe){xe!==YZ?(_e(r.CULL_FACE),xe!==A&&(xe===w4?r.cullFace(r.BACK):xe===qZ?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):re(r.CULL_FACE),A=xe}function Ce(xe){xe!==D&&(F&&r.lineWidth(xe),D=xe)}function Ie(xe,ze,Qe){xe?(_e(r.POLYGON_OFFSET_FILL),(V!==ze||B!==Qe)&&(r.polygonOffset(ze,Qe),V=ze,B=Qe)):re(r.POLYGON_OFFSET_FILL)}function te(xe){xe?_e(r.SCISSOR_TEST):re(r.SCISSOR_TEST)}function q(xe){xe===void 0&&(xe=r.TEXTURE0+L-1),H!==xe&&(r.activeTexture(xe),H=xe)}function me(xe,ze,Qe){Qe===void 0&&(H===null?Qe=r.TEXTURE0+L-1:Qe=H);let ct=K[Qe];ct===void 0&&(ct={type:void 0,texture:void 0},K[Qe]=ct),(ct.type!==xe||ct.texture!==ze)&&(H!==Qe&&(r.activeTexture(Qe),H=Qe),r.bindTexture(xe,ze||ye[xe]),ct.type=xe,ct.texture=ze)}function ge(){const xe=K[H];xe!==void 0&&xe.type!==void 0&&(r.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)}function Ae(){try{r.compressedTexImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Pe(){try{r.compressedTexImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function je(){try{r.texSubImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function $e(){try{r.texSubImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function We(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ft(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ze(){try{r.texStorage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function dt(){try{r.texStorage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ut(){try{r.texImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function zt(){try{r.texImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function _t(xe){be.equals(xe)===!1&&(r.scissor(xe.x,xe.y,xe.z,xe.w),be.copy(xe))}function ni(xe){pe.equals(xe)===!1&&(r.viewport(xe.x,xe.y,xe.z,xe.w),pe.copy(xe))}function Bi(xe,ze){let Qe=c.get(ze);Qe===void 0&&(Qe=new WeakMap,c.set(ze,Qe));let ct=Qe.get(xe);ct===void 0&&(ct=r.getUniformBlockIndex(ze,xe.name),Qe.set(xe,ct))}function Ee(xe,ze){const ct=c.get(ze).get(xe);l.get(ze)!==ct&&(r.uniformBlockBinding(ze,ct,xe.__bindingPointIndex),l.set(ze,ct))}function Ue(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),u={},H=null,K={},d={},p=new WeakMap,m=[],g=null,y=!1,_=null,x=null,O=null,S=null,w=null,C=null,M=null,P=new ut(0,0,0),R=0,k=!1,I=null,A=null,D=null,V=null,B=null,be.set(0,0,r.canvas.width,r.canvas.height),pe.set(0,0,r.canvas.width,r.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:_e,disable:re,bindFramebuffer:se,drawBuffers:Q,useProgram:G,setBlending:j,setMaterial:ee,setFlipSided:de,setCullFace:ve,setLineWidth:Ce,setPolygonOffset:Ie,setScissorTest:te,activeTexture:q,bindTexture:me,unbindTexture:ge,compressedTexImage2D:Ae,compressedTexImage3D:Pe,texImage2D:Ut,texImage3D:zt,updateUBOMapping:Bi,uniformBlockBinding:Ee,texStorage2D:Ze,texStorage3D:dt,texSubImage2D:je,texSubImage3D:$e,compressedTexSubImage2D:We,compressedTexSubImage3D:ft,scissor:_t,viewport:ni,reset:Ue}}function iPe(r,e,i,n,s,o,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ge,d=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(te,q){return g?new OffscreenCanvas(te,q):Sw("canvas")}function _(te,q,me){let ge=1;const Ae=Ie(te);if((Ae.width>me||Ae.height>me)&&(ge=me/Math.max(Ae.width,Ae.height)),ge<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const Pe=Math.floor(ge*Ae.width),je=Math.floor(ge*Ae.height);p===void 0&&(p=y(Pe,je));const $e=q?y(Pe,je):p;return $e.width=Pe,$e.height=je,$e.getContext("2d").drawImage(te,0,0,Pe,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+Pe+"x"+je+")."),$e}else return"data"in te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),te;return te}function x(te){return te.generateMipmaps&&te.minFilter!==Ss&&te.minFilter!==qr}function O(te){r.generateMipmap(te)}function S(te,q,me,ge,Ae=!1){if(te!==null){if(r[te]!==void 0)return r[te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Pe=q;if(q===r.RED&&(me===r.FLOAT&&(Pe=r.R32F),me===r.HALF_FLOAT&&(Pe=r.R16F),me===r.UNSIGNED_BYTE&&(Pe=r.R8)),q===r.RED_INTEGER&&(me===r.UNSIGNED_BYTE&&(Pe=r.R8UI),me===r.UNSIGNED_SHORT&&(Pe=r.R16UI),me===r.UNSIGNED_INT&&(Pe=r.R32UI),me===r.BYTE&&(Pe=r.R8I),me===r.SHORT&&(Pe=r.R16I),me===r.INT&&(Pe=r.R32I)),q===r.RG&&(me===r.FLOAT&&(Pe=r.RG32F),me===r.HALF_FLOAT&&(Pe=r.RG16F),me===r.UNSIGNED_BYTE&&(Pe=r.RG8)),q===r.RG_INTEGER&&(me===r.UNSIGNED_BYTE&&(Pe=r.RG8UI),me===r.UNSIGNED_SHORT&&(Pe=r.RG16UI),me===r.UNSIGNED_INT&&(Pe=r.RG32UI),me===r.BYTE&&(Pe=r.RG8I),me===r.SHORT&&(Pe=r.RG16I),me===r.INT&&(Pe=r.RG32I)),q===r.RGB&&me===r.UNSIGNED_INT_5_9_9_9_REV&&(Pe=r.RGB9_E5),q===r.RGBA){const je=Ae?_w:Ln.getTransfer(ge);me===r.FLOAT&&(Pe=r.RGBA32F),me===r.HALF_FLOAT&&(Pe=r.RGBA16F),me===r.UNSIGNED_BYTE&&(Pe=je===Jn?r.SRGB8_ALPHA8:r.RGBA8),me===r.UNSIGNED_SHORT_4_4_4_4&&(Pe=r.RGBA4),me===r.UNSIGNED_SHORT_5_5_5_1&&(Pe=r.RGB5_A1)}return(Pe===r.R16F||Pe===r.R32F||Pe===r.RG16F||Pe===r.RG32F||Pe===r.RGBA16F||Pe===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function w(te,q){return x(te)===!0||te.isFramebufferTexture&&te.minFilter!==Ss&&te.minFilter!==qr?Math.log2(Math.max(q.width,q.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?q.mipmaps.length:1}function C(te){const q=te.target;q.removeEventListener("dispose",C),P(q),q.isVideoTexture&&d.delete(q)}function M(te){const q=te.target;q.removeEventListener("dispose",M),k(q)}function P(te){const q=n.get(te);if(q.__webglInit===void 0)return;const me=te.source,ge=m.get(me);if(ge){const Ae=ge[q.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&R(te),Object.keys(ge).length===0&&m.delete(me)}n.remove(te)}function R(te){const q=n.get(te);r.deleteTexture(q.__webglTexture);const me=te.source,ge=m.get(me);delete ge[q.__cacheKey],a.memory.textures--}function k(te){const q=n.get(te);if(te.depthTexture&&te.depthTexture.dispose(),te.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(q.__webglFramebuffer[ge]))for(let Ae=0;Ae<q.__webglFramebuffer[ge].length;Ae++)r.deleteFramebuffer(q.__webglFramebuffer[ge][Ae]);else r.deleteFramebuffer(q.__webglFramebuffer[ge]);q.__webglDepthbuffer&&r.deleteRenderbuffer(q.__webglDepthbuffer[ge])}else{if(Array.isArray(q.__webglFramebuffer))for(let ge=0;ge<q.__webglFramebuffer.length;ge++)r.deleteFramebuffer(q.__webglFramebuffer[ge]);else r.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&r.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&r.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let ge=0;ge<q.__webglColorRenderbuffer.length;ge++)q.__webglColorRenderbuffer[ge]&&r.deleteRenderbuffer(q.__webglColorRenderbuffer[ge]);q.__webglDepthRenderbuffer&&r.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const me=te.textures;for(let ge=0,Ae=me.length;ge<Ae;ge++){const Pe=n.get(me[ge]);Pe.__webglTexture&&(r.deleteTexture(Pe.__webglTexture),a.memory.textures--),n.remove(me[ge])}n.remove(te)}let I=0;function A(){I=0}function D(){const te=I;return te>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+s.maxTextures),I+=1,te}function V(te){const q=[];return q.push(te.wrapS),q.push(te.wrapT),q.push(te.wrapR||0),q.push(te.magFilter),q.push(te.minFilter),q.push(te.anisotropy),q.push(te.internalFormat),q.push(te.format),q.push(te.type),q.push(te.generateMipmaps),q.push(te.premultiplyAlpha),q.push(te.flipY),q.push(te.unpackAlignment),q.push(te.colorSpace),q.join()}function B(te,q){const me=n.get(te);if(te.isVideoTexture&&ve(te),te.isRenderTargetTexture===!1&&te.version>0&&me.__version!==te.version){const ge=te.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(me,te,q);return}}i.bindTexture(r.TEXTURE_2D,me.__webglTexture,r.TEXTURE0+q)}function L(te,q){const me=n.get(te);if(te.version>0&&me.__version!==te.version){be(me,te,q);return}i.bindTexture(r.TEXTURE_2D_ARRAY,me.__webglTexture,r.TEXTURE0+q)}function F(te,q){const me=n.get(te);if(te.version>0&&me.__version!==te.version){be(me,te,q);return}i.bindTexture(r.TEXTURE_3D,me.__webglTexture,r.TEXTURE0+q)}function $(te,q){const me=n.get(te);if(te.version>0&&me.__version!==te.version){pe(me,te,q);return}i.bindTexture(r.TEXTURE_CUBE_MAP,me.__webglTexture,r.TEXTURE0+q)}const z={[Cp]:r.REPEAT,[jo]:r.CLAMP_TO_EDGE,[zy]:r.MIRRORED_REPEAT},H={[Ss]:r.NEAREST,[YM]:r.NEAREST_MIPMAP_NEAREST,[cg]:r.NEAREST_MIPMAP_LINEAR,[qr]:r.LINEAR,[yy]:r.LINEAR_MIPMAP_NEAREST,[qh]:r.LINEAR_MIPMAP_LINEAR},K={[HK]:r.NEVER,[KK]:r.ALWAYS,[QK]:r.LESS,[bN]:r.LEQUAL,[jK]:r.EQUAL,[ZK]:r.GEQUAL,[YK]:r.GREATER,[qK]:r.NOTEQUAL};function J(te,q){if(q.type===rh&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===qr||q.magFilter===yy||q.magFilter===cg||q.magFilter===qh||q.minFilter===qr||q.minFilter===yy||q.minFilter===cg||q.minFilter===qh)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(te,r.TEXTURE_WRAP_S,z[q.wrapS]),r.texParameteri(te,r.TEXTURE_WRAP_T,z[q.wrapT]),(te===r.TEXTURE_3D||te===r.TEXTURE_2D_ARRAY)&&r.texParameteri(te,r.TEXTURE_WRAP_R,z[q.wrapR]),r.texParameteri(te,r.TEXTURE_MAG_FILTER,H[q.magFilter]),r.texParameteri(te,r.TEXTURE_MIN_FILTER,H[q.minFilter]),q.compareFunction&&(r.texParameteri(te,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(te,r.TEXTURE_COMPARE_FUNC,K[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===Ss||q.minFilter!==cg&&q.minFilter!==qh||q.type===rh&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||n.get(q).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");r.texParameterf(te,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,s.getMaxAnisotropy())),n.get(q).__currentAnisotropy=q.anisotropy}}}function ne(te,q){let me=!1;te.__webglInit===void 0&&(te.__webglInit=!0,q.addEventListener("dispose",C));const ge=q.source;let Ae=m.get(ge);Ae===void 0&&(Ae={},m.set(ge,Ae));const Pe=V(q);if(Pe!==te.__cacheKey){Ae[Pe]===void 0&&(Ae[Pe]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,me=!0),Ae[Pe].usedTimes++;const je=Ae[te.__cacheKey];je!==void 0&&(Ae[te.__cacheKey].usedTimes--,je.usedTimes===0&&R(q)),te.__cacheKey=Pe,te.__webglTexture=Ae[Pe].texture}return me}function be(te,q,me){let ge=r.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(ge=r.TEXTURE_2D_ARRAY),q.isData3DTexture&&(ge=r.TEXTURE_3D);const Ae=ne(te,q),Pe=q.source;i.bindTexture(ge,te.__webglTexture,r.TEXTURE0+me);const je=n.get(Pe);if(Pe.version!==je.__version||Ae===!0){i.activeTexture(r.TEXTURE0+me);const $e=Ln.getPrimaries(Ln.workingColorSpace),We=q.colorSpace===ld?null:Ln.getPrimaries(q.colorSpace),ft=q.colorSpace===ld||$e===We?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,q.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,q.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);let Ze=_(q.image,!1,s.maxTextureSize);Ze=Ce(q,Ze);const dt=o.convert(q.format,q.colorSpace),Ut=o.convert(q.type);let zt=S(q.internalFormat,dt,Ut,q.colorSpace,q.isVideoTexture);J(ge,q);let _t;const ni=q.mipmaps,Bi=q.isVideoTexture!==!0,Ee=je.__version===void 0||Ae===!0,Ue=Pe.dataReady,xe=w(q,Ze);if(q.isDepthTexture)zt=r.DEPTH_COMPONENT16,q.type===rh?zt=r.DEPTH_COMPONENT32F:q.type===Yg?zt=r.DEPTH_COMPONENT24:q.type===E_&&(zt=r.DEPTH24_STENCIL8),Ee&&(Bi?i.texStorage2D(r.TEXTURE_2D,1,zt,Ze.width,Ze.height):i.texImage2D(r.TEXTURE_2D,0,zt,Ze.width,Ze.height,0,dt,Ut,null));else if(q.isDataTexture)if(ni.length>0){Bi&&Ee&&i.texStorage2D(r.TEXTURE_2D,xe,zt,ni[0].width,ni[0].height);for(let ze=0,Qe=ni.length;ze<Qe;ze++)_t=ni[ze],Bi?Ue&&i.texSubImage2D(r.TEXTURE_2D,ze,0,0,_t.width,_t.height,dt,Ut,_t.data):i.texImage2D(r.TEXTURE_2D,ze,zt,_t.width,_t.height,0,dt,Ut,_t.data);q.generateMipmaps=!1}else Bi?(Ee&&i.texStorage2D(r.TEXTURE_2D,xe,zt,Ze.width,Ze.height),Ue&&i.texSubImage2D(r.TEXTURE_2D,0,0,0,Ze.width,Ze.height,dt,Ut,Ze.data)):i.texImage2D(r.TEXTURE_2D,0,zt,Ze.width,Ze.height,0,dt,Ut,Ze.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){Bi&&Ee&&i.texStorage3D(r.TEXTURE_2D_ARRAY,xe,zt,ni[0].width,ni[0].height,Ze.depth);for(let ze=0,Qe=ni.length;ze<Qe;ze++)_t=ni[ze],q.format!==Ca?dt!==null?Bi?Ue&&i.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,ze,0,0,0,_t.width,_t.height,Ze.depth,dt,_t.data,0,0):i.compressedTexImage3D(r.TEXTURE_2D_ARRAY,ze,zt,_t.width,_t.height,Ze.depth,0,_t.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Bi?Ue&&i.texSubImage3D(r.TEXTURE_2D_ARRAY,ze,0,0,0,_t.width,_t.height,Ze.depth,dt,Ut,_t.data):i.texImage3D(r.TEXTURE_2D_ARRAY,ze,zt,_t.width,_t.height,Ze.depth,0,dt,Ut,_t.data)}else{Bi&&Ee&&i.texStorage2D(r.TEXTURE_2D,xe,zt,ni[0].width,ni[0].height);for(let ze=0,Qe=ni.length;ze<Qe;ze++)_t=ni[ze],q.format!==Ca?dt!==null?Bi?Ue&&i.compressedTexSubImage2D(r.TEXTURE_2D,ze,0,0,_t.width,_t.height,dt,_t.data):i.compressedTexImage2D(r.TEXTURE_2D,ze,zt,_t.width,_t.height,0,_t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Bi?Ue&&i.texSubImage2D(r.TEXTURE_2D,ze,0,0,_t.width,_t.height,dt,Ut,_t.data):i.texImage2D(r.TEXTURE_2D,ze,zt,_t.width,_t.height,0,dt,Ut,_t.data)}else if(q.isDataArrayTexture)Bi?(Ee&&i.texStorage3D(r.TEXTURE_2D_ARRAY,xe,zt,Ze.width,Ze.height,Ze.depth),Ue&&i.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Ze.width,Ze.height,Ze.depth,dt,Ut,Ze.data)):i.texImage3D(r.TEXTURE_2D_ARRAY,0,zt,Ze.width,Ze.height,Ze.depth,0,dt,Ut,Ze.data);else if(q.isData3DTexture)Bi?(Ee&&i.texStorage3D(r.TEXTURE_3D,xe,zt,Ze.width,Ze.height,Ze.depth),Ue&&i.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Ze.width,Ze.height,Ze.depth,dt,Ut,Ze.data)):i.texImage3D(r.TEXTURE_3D,0,zt,Ze.width,Ze.height,Ze.depth,0,dt,Ut,Ze.data);else if(q.isFramebufferTexture){if(Ee)if(Bi)i.texStorage2D(r.TEXTURE_2D,xe,zt,Ze.width,Ze.height);else{let ze=Ze.width,Qe=Ze.height;for(let ct=0;ct<xe;ct++)i.texImage2D(r.TEXTURE_2D,ct,zt,ze,Qe,0,dt,Ut,null),ze>>=1,Qe>>=1}}else if(ni.length>0){if(Bi&&Ee){const ze=Ie(ni[0]);i.texStorage2D(r.TEXTURE_2D,xe,zt,ze.width,ze.height)}for(let ze=0,Qe=ni.length;ze<Qe;ze++)_t=ni[ze],Bi?Ue&&i.texSubImage2D(r.TEXTURE_2D,ze,0,0,dt,Ut,_t):i.texImage2D(r.TEXTURE_2D,ze,zt,dt,Ut,_t);q.generateMipmaps=!1}else if(Bi){if(Ee){const ze=Ie(Ze);i.texStorage2D(r.TEXTURE_2D,xe,zt,ze.width,ze.height)}Ue&&i.texSubImage2D(r.TEXTURE_2D,0,0,0,dt,Ut,Ze)}else i.texImage2D(r.TEXTURE_2D,0,zt,dt,Ut,Ze);x(q)&&O(ge),je.__version=Pe.version,q.onUpdate&&q.onUpdate(q)}te.__version=q.version}function pe(te,q,me){if(q.image.length!==6)return;const ge=ne(te,q),Ae=q.source;i.bindTexture(r.TEXTURE_CUBE_MAP,te.__webglTexture,r.TEXTURE0+me);const Pe=n.get(Ae);if(Ae.version!==Pe.__version||ge===!0){i.activeTexture(r.TEXTURE0+me);const je=Ln.getPrimaries(Ln.workingColorSpace),$e=q.colorSpace===ld?null:Ln.getPrimaries(q.colorSpace),We=q.colorSpace===ld||je===$e?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,q.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,q.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,We);const ft=q.isCompressedTexture||q.image[0].isCompressedTexture,Ze=q.image[0]&&q.image[0].isDataTexture,dt=[];for(let Qe=0;Qe<6;Qe++)!ft&&!Ze?dt[Qe]=_(q.image[Qe],!0,s.maxCubemapSize):dt[Qe]=Ze?q.image[Qe].image:q.image[Qe],dt[Qe]=Ce(q,dt[Qe]);const Ut=dt[0],zt=o.convert(q.format,q.colorSpace),_t=o.convert(q.type),ni=S(q.internalFormat,zt,_t,q.colorSpace),Bi=q.isVideoTexture!==!0,Ee=Pe.__version===void 0||ge===!0,Ue=Ae.dataReady;let xe=w(q,Ut);J(r.TEXTURE_CUBE_MAP,q);let ze;if(ft){Bi&&Ee&&i.texStorage2D(r.TEXTURE_CUBE_MAP,xe,ni,Ut.width,Ut.height);for(let Qe=0;Qe<6;Qe++){ze=dt[Qe].mipmaps;for(let ct=0;ct<ze.length;ct++){const xt=ze[ct];q.format!==Ca?zt!==null?Bi?Ue&&i.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct,0,0,xt.width,xt.height,zt,xt.data):i.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct,ni,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bi?Ue&&i.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct,0,0,xt.width,xt.height,zt,_t,xt.data):i.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct,ni,xt.width,xt.height,0,zt,_t,xt.data)}}}else{if(ze=q.mipmaps,Bi&&Ee){ze.length>0&&xe++;const Qe=Ie(dt[0]);i.texStorage2D(r.TEXTURE_CUBE_MAP,xe,ni,Qe.width,Qe.height)}for(let Qe=0;Qe<6;Qe++)if(Ze){Bi?Ue&&i.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,dt[Qe].width,dt[Qe].height,zt,_t,dt[Qe].data):i.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,ni,dt[Qe].width,dt[Qe].height,0,zt,_t,dt[Qe].data);for(let ct=0;ct<ze.length;ct++){const Ki=ze[ct].image[Qe].image;Bi?Ue&&i.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct+1,0,0,Ki.width,Ki.height,zt,_t,Ki.data):i.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct+1,ni,Ki.width,Ki.height,0,zt,_t,Ki.data)}}else{Bi?Ue&&i.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,0,0,zt,_t,dt[Qe]):i.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0,ni,zt,_t,dt[Qe]);for(let ct=0;ct<ze.length;ct++){const xt=ze[ct];Bi?Ue&&i.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct+1,0,0,zt,_t,xt.image[Qe]):i.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,ct+1,ni,zt,_t,xt.image[Qe])}}}x(q)&&O(r.TEXTURE_CUBE_MAP),Pe.__version=Ae.version,q.onUpdate&&q.onUpdate(q)}te.__version=q.version}function ae(te,q,me,ge,Ae,Pe){const je=o.convert(me.format,me.colorSpace),$e=o.convert(me.type),We=S(me.internalFormat,je,$e,me.colorSpace);if(!n.get(q).__hasExternalTextures){const Ze=Math.max(1,q.width>>Pe),dt=Math.max(1,q.height>>Pe);Ae===r.TEXTURE_3D||Ae===r.TEXTURE_2D_ARRAY?i.texImage3D(Ae,Pe,We,Ze,dt,q.depth,0,je,$e,null):i.texImage2D(Ae,Pe,We,Ze,dt,0,je,$e,null)}i.bindFramebuffer(r.FRAMEBUFFER,te),de(q)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,ge,Ae,n.get(me).__webglTexture,0,ee(q)):(Ae===r.TEXTURE_2D||Ae>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,ge,Ae,n.get(me).__webglTexture,Pe),i.bindFramebuffer(r.FRAMEBUFFER,null)}function ye(te,q,me){if(r.bindRenderbuffer(r.RENDERBUFFER,te),q.depthBuffer&&!q.stencilBuffer){let ge=r.DEPTH_COMPONENT24;if(me||de(q)){const Ae=q.depthTexture;Ae&&Ae.isDepthTexture&&(Ae.type===rh?ge=r.DEPTH_COMPONENT32F:Ae.type===Yg&&(ge=r.DEPTH_COMPONENT24));const Pe=ee(q);de(q)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Pe,ge,q.width,q.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Pe,ge,q.width,q.height)}else r.renderbufferStorage(r.RENDERBUFFER,ge,q.width,q.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,te)}else if(q.depthBuffer&&q.stencilBuffer){const ge=ee(q);me&&de(q)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,ge,r.DEPTH24_STENCIL8,q.width,q.height):de(q)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ge,r.DEPTH24_STENCIL8,q.width,q.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,q.width,q.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,te)}else{const ge=q.textures;for(let Ae=0;Ae<ge.length;Ae++){const Pe=ge[Ae],je=o.convert(Pe.format,Pe.colorSpace),$e=o.convert(Pe.type),We=S(Pe.internalFormat,je,$e,Pe.colorSpace),ft=ee(q);me&&de(q)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,ft,We,q.width,q.height):de(q)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ft,We,q.width,q.height):r.renderbufferStorage(r.RENDERBUFFER,We,q.width,q.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function _e(te,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(r.FRAMEBUFFER,te),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),B(q.depthTexture,0);const ge=n.get(q.depthTexture).__webglTexture,Ae=ee(q);if(q.depthTexture.format===Cg)de(q)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ge,0,Ae):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ge,0);else if(q.depthTexture.format===Xy)de(q)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ge,0,Ae):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ge,0);else throw new Error("Unknown depthTexture format")}function re(te){const q=n.get(te),me=te.isWebGLCubeRenderTarget===!0;if(te.depthTexture&&!q.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");_e(q.__webglFramebuffer,te)}else if(me){q.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)i.bindFramebuffer(r.FRAMEBUFFER,q.__webglFramebuffer[ge]),q.__webglDepthbuffer[ge]=r.createRenderbuffer(),ye(q.__webglDepthbuffer[ge],te,!1)}else i.bindFramebuffer(r.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer=r.createRenderbuffer(),ye(q.__webglDepthbuffer,te,!1);i.bindFramebuffer(r.FRAMEBUFFER,null)}function se(te,q,me){const ge=n.get(te);q!==void 0&&ae(ge.__webglFramebuffer,te,te.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),me!==void 0&&re(te)}function Q(te){const q=te.texture,me=n.get(te),ge=n.get(q);te.addEventListener("dispose",M);const Ae=te.textures,Pe=te.isWebGLCubeRenderTarget===!0,je=Ae.length>1;if(je||(ge.__webglTexture===void 0&&(ge.__webglTexture=r.createTexture()),ge.__version=q.version,a.memory.textures++),Pe){me.__webglFramebuffer=[];for(let $e=0;$e<6;$e++)if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer[$e]=[];for(let We=0;We<q.mipmaps.length;We++)me.__webglFramebuffer[$e][We]=r.createFramebuffer()}else me.__webglFramebuffer[$e]=r.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer=[];for(let $e=0;$e<q.mipmaps.length;$e++)me.__webglFramebuffer[$e]=r.createFramebuffer()}else me.__webglFramebuffer=r.createFramebuffer();if(je)for(let $e=0,We=Ae.length;$e<We;$e++){const ft=n.get(Ae[$e]);ft.__webglTexture===void 0&&(ft.__webglTexture=r.createTexture(),a.memory.textures++)}if(te.samples>0&&de(te)===!1){me.__webglMultisampledFramebuffer=r.createFramebuffer(),me.__webglColorRenderbuffer=[],i.bindFramebuffer(r.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let $e=0;$e<Ae.length;$e++){const We=Ae[$e];me.__webglColorRenderbuffer[$e]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,me.__webglColorRenderbuffer[$e]);const ft=o.convert(We.format,We.colorSpace),Ze=o.convert(We.type),dt=S(We.internalFormat,ft,Ze,We.colorSpace,te.isXRRenderTarget===!0),Ut=ee(te);r.renderbufferStorageMultisample(r.RENDERBUFFER,Ut,dt,te.width,te.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+$e,r.RENDERBUFFER,me.__webglColorRenderbuffer[$e])}r.bindRenderbuffer(r.RENDERBUFFER,null),te.depthBuffer&&(me.__webglDepthRenderbuffer=r.createRenderbuffer(),ye(me.__webglDepthRenderbuffer,te,!0)),i.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Pe){i.bindTexture(r.TEXTURE_CUBE_MAP,ge.__webglTexture),J(r.TEXTURE_CUBE_MAP,q);for(let $e=0;$e<6;$e++)if(q.mipmaps&&q.mipmaps.length>0)for(let We=0;We<q.mipmaps.length;We++)ae(me.__webglFramebuffer[$e][We],te,q,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+$e,We);else ae(me.__webglFramebuffer[$e],te,q,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0);x(q)&&O(r.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(je){for(let $e=0,We=Ae.length;$e<We;$e++){const ft=Ae[$e],Ze=n.get(ft);i.bindTexture(r.TEXTURE_2D,Ze.__webglTexture),J(r.TEXTURE_2D,ft),ae(me.__webglFramebuffer,te,ft,r.COLOR_ATTACHMENT0+$e,r.TEXTURE_2D,0),x(ft)&&O(r.TEXTURE_2D)}i.unbindTexture()}else{let $e=r.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&($e=te.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),i.bindTexture($e,ge.__webglTexture),J($e,q),q.mipmaps&&q.mipmaps.length>0)for(let We=0;We<q.mipmaps.length;We++)ae(me.__webglFramebuffer[We],te,q,r.COLOR_ATTACHMENT0,$e,We);else ae(me.__webglFramebuffer,te,q,r.COLOR_ATTACHMENT0,$e,0);x(q)&&O($e),i.unbindTexture()}te.depthBuffer&&re(te)}function G(te){const q=te.textures;for(let me=0,ge=q.length;me<ge;me++){const Ae=q[me];if(x(Ae)){const Pe=te.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,je=n.get(Ae).__webglTexture;i.bindTexture(Pe,je),O(Pe),i.unbindTexture()}}}const ie=[],he=[];function j(te){if(te.samples>0){if(de(te)===!1){const q=te.textures,me=te.width,ge=te.height;let Ae=r.COLOR_BUFFER_BIT;const Pe=te.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,je=n.get(te),$e=q.length>1;if($e)for(let We=0;We<q.length;We++)i.bindFramebuffer(r.FRAMEBUFFER,je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+We,r.RENDERBUFFER,null),i.bindFramebuffer(r.FRAMEBUFFER,je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+We,r.TEXTURE_2D,null,0);i.bindFramebuffer(r.READ_FRAMEBUFFER,je.__webglMultisampledFramebuffer),i.bindFramebuffer(r.DRAW_FRAMEBUFFER,je.__webglFramebuffer);for(let We=0;We<q.length;We++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(Ae|=r.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(Ae|=r.STENCIL_BUFFER_BIT)),$e){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,je.__webglColorRenderbuffer[We]);const ft=n.get(q[We]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ft,0)}r.blitFramebuffer(0,0,me,ge,0,0,me,ge,Ae,r.NEAREST),c===!0&&(ie.length=0,he.length=0,ie.push(r.COLOR_ATTACHMENT0+We),te.depthBuffer&&te.resolveDepthBuffer===!1&&(ie.push(Pe),he.push(Pe),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,he)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,ie))}if(i.bindFramebuffer(r.READ_FRAMEBUFFER,null),i.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),$e)for(let We=0;We<q.length;We++){i.bindFramebuffer(r.FRAMEBUFFER,je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+We,r.RENDERBUFFER,je.__webglColorRenderbuffer[We]);const ft=n.get(q[We]).__webglTexture;i.bindFramebuffer(r.FRAMEBUFFER,je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+We,r.TEXTURE_2D,ft,0)}i.bindFramebuffer(r.DRAW_FRAMEBUFFER,je.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&c){const q=te.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[q])}}}function ee(te){return Math.min(s.maxSamples,te.samples)}function de(te){const q=n.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function ve(te){const q=a.render.frame;d.get(te)!==q&&(d.set(te,q),te.update())}function Ce(te,q){const me=te.colorSpace,ge=te.format,Ae=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||me!==Xd&&me!==ld&&(Ln.getTransfer(me)===Jn?(ge!==Ca||Ae!==lc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",me)),q}function Ie(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(u.width=te.naturalWidth||te.width,u.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(u.width=te.displayWidth,u.height=te.displayHeight):(u.width=te.width,u.height=te.height),u}this.allocateTextureUnit=D,this.resetTextureUnits=A,this.setTexture2D=B,this.setTexture2DArray=L,this.setTexture3D=F,this.setTextureCube=$,this.rebindTextures=se,this.setupRenderTarget=Q,this.updateRenderTargetMipmap=G,this.updateMultisampleRenderTarget=j,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=de}function mJ(r,e){function i(n,s=ld){let o;const a=Ln.getTransfer(s);if(n===lc)return r.UNSIGNED_BYTE;if(n===pN)return r.UNSIGNED_SHORT_4_4_4_4;if(n===mN)return r.UNSIGNED_SHORT_5_5_5_1;if(n===RK)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===kK)return r.BYTE;if(n===IK)return r.SHORT;if(n===dN)return r.UNSIGNED_SHORT;if(n===fN)return r.INT;if(n===Yg)return r.UNSIGNED_INT;if(n===rh)return r.FLOAT;if(n===A_)return r.HALF_FLOAT;if(n===BK)return r.ALPHA;if(n===DK)return r.RGB;if(n===Ca)return r.RGBA;if(n===LK)return r.LUMINANCE;if(n===NK)return r.LUMINANCE_ALPHA;if(n===Cg)return r.DEPTH_COMPONENT;if(n===Xy)return r.DEPTH_STENCIL;if(n===gN)return r.RED;if(n===vN)return r.RED_INTEGER;if(n===VK)return r.RG;if(n===yN)return r.RG_INTEGER;if(n===_N)return r.RGBA_INTEGER;if(n===oA||n===aA||n===lA||n===hA)if(a===Jn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===oA)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===aA)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===lA)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===hA)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===oA)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===aA)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===lA)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===hA)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===T4||n===A4||n===E4||n===M4)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===T4)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===A4)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===E4)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===M4)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===P4||n===k4||n===I4)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(n===P4||n===k4)return a===Jn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===I4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===R4||n===B4||n===D4||n===L4||n===N4||n===V4||n===F4||n===$4||n===U4||n===z4||n===X4||n===W4||n===G4||n===H4)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(n===R4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===B4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===D4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===L4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===N4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===V4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===F4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===$4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===U4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===z4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===X4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===W4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===G4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===H4)return a===Jn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===cA||n===Q4||n===j4)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(n===cA)return a===Jn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Q4)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===j4)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===FK||n===Y4||n===q4||n===Z4)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(n===cA)return o.COMPRESSED_RED_RGTC1_EXT;if(n===Y4)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===q4)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Z4)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===E_?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:i}}class gJ extends $n{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let cd=class extends dn{constructor(){super(),this.isGroup=!0,this.type="Group"}};const nPe={type:"move"};class mI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new cd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new cd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new cd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const i=this._hand;if(i)for(const n of e.hand.values())this._getHandJoint(i,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,i,n){let s=null,o=null,a=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&i.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const _ of e.hand.values()){const x=i.getJointPose(_,n),O=this._getHandJoint(u,_);x!==null&&(O.matrix.fromArray(x.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.matrixWorldNeedsUpdate=!0,O.jointRadius=x.radius),O.visible=x!==null}const d=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],m=d.position.distanceTo(p.position),g=.02,y=.005;u.inputState.pinching&&m>g+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=g-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=i.getPose(e.gripSpace,n),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(s=i.getPose(e.targetRaySpace,n),s===null&&o!==null&&(s=o),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(nPe)))}return l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,i){if(e.joints[i.jointName]===void 0){const n=new cd;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[i.jointName]=n,e.add(n)}return e.joints[i.jointName]}}const rPe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,sPe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class oPe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,i,n){if(this.texture===null){const s=new Xr,o=e.properties.get(s);o.__webglTexture=i.texture,(i.depthNear!=n.depthNear||i.depthFar!=n.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=s}}render(e,i){if(this.texture!==null){if(this.mesh===null){const n=i.cameras[0].viewport,s=new ea({vertexShader:rPe,fragmentShader:sPe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Un(new M_(20,20),s)}e.render(this.mesh,i)}}reset(){this.texture=null,this.mesh=null}}class aPe extends yu{constructor(e,i){super();const n=this;let s=null,o=1,a=null,l="local-floor",c=1,u=null,d=null,p=null,m=null,g=null,y=null;const _=new oPe,x=i.getContextAttributes();let O=null,S=null;const w=[],C=[],M=new Ge;let P=null;const R=new $n;R.layers.enable(1),R.viewport=new ji;const k=new $n;k.layers.enable(2),k.viewport=new ji;const I=[R,k],A=new gJ;A.layers.enable(1),A.layers.enable(2);let D=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let ye=w[ae];return ye===void 0&&(ye=new mI,w[ae]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(ae){let ye=w[ae];return ye===void 0&&(ye=new mI,w[ae]=ye),ye.getGripSpace()},this.getHand=function(ae){let ye=w[ae];return ye===void 0&&(ye=new mI,w[ae]=ye),ye.getHandSpace()};function B(ae){const ye=C.indexOf(ae.inputSource);if(ye===-1)return;const _e=w[ye];_e!==void 0&&(_e.update(ae.inputSource,ae.frame,u||a),_e.dispatchEvent({type:ae.type,data:ae.inputSource}))}function L(){s.removeEventListener("select",B),s.removeEventListener("selectstart",B),s.removeEventListener("selectend",B),s.removeEventListener("squeeze",B),s.removeEventListener("squeezestart",B),s.removeEventListener("squeezeend",B),s.removeEventListener("end",L),s.removeEventListener("inputsourceschange",F);for(let ae=0;ae<w.length;ae++){const ye=C[ae];ye!==null&&(C[ae]=null,w[ae].disconnect(ye))}D=null,V=null,_.reset(),e.setRenderTarget(O),g=null,m=null,p=null,s=null,S=null,pe.stop(),n.isPresenting=!1,e.setPixelRatio(P),e.setSize(M.width,M.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){o=ae,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){l=ae,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(ae){u=ae},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return s},this.setSession=async function(ae){if(s=ae,s!==null){if(O=e.getRenderTarget(),s.addEventListener("select",B),s.addEventListener("selectstart",B),s.addEventListener("selectend",B),s.addEventListener("squeeze",B),s.addEventListener("squeezestart",B),s.addEventListener("squeezeend",B),s.addEventListener("end",L),s.addEventListener("inputsourceschange",F),x.xrCompatible!==!0&&await i.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(M),s.renderState.layers===void 0){const ye={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(s,i,ye),s.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),S=new yh(g.framebufferWidth,g.framebufferHeight,{format:Ca,type:lc,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let ye=null,_e=null,re=null;x.depth&&(re=x.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,ye=x.stencil?Xy:Cg,_e=x.stencil?E_:Yg);const se={colorFormat:i.RGBA8,depthFormat:re,scaleFactor:o};p=new XRWebGLBinding(s,i),m=p.createProjectionLayer(se),s.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),S=new yh(m.textureWidth,m.textureHeight,{format:Ca,type:lc,depthTexture:new TN(m.textureWidth,m.textureHeight,_e,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await s.requestReferenceSpace(l),pe.setContext(s),pe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function F(ae){for(let ye=0;ye<ae.removed.length;ye++){const _e=ae.removed[ye],re=C.indexOf(_e);re>=0&&(C[re]=null,w[re].disconnect(_e))}for(let ye=0;ye<ae.added.length;ye++){const _e=ae.added[ye];let re=C.indexOf(_e);if(re===-1){for(let Q=0;Q<w.length;Q++)if(Q>=C.length){C.push(_e),re=Q;break}else if(C[Q]===null){C[Q]=_e,re=Q;break}if(re===-1)break}const se=w[re];se&&se.connect(_e)}}const $=new le,z=new le;function H(ae,ye,_e){$.setFromMatrixPosition(ye.matrixWorld),z.setFromMatrixPosition(_e.matrixWorld);const re=$.distanceTo(z),se=ye.projectionMatrix.elements,Q=_e.projectionMatrix.elements,G=se[14]/(se[10]-1),ie=se[14]/(se[10]+1),he=(se[9]+1)/se[5],j=(se[9]-1)/se[5],ee=(se[8]-1)/se[0],de=(Q[8]+1)/Q[0],ve=G*ee,Ce=G*de,Ie=re/(-ee+de),te=Ie*-ee;ye.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(te),ae.translateZ(Ie),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert();const q=G+Ie,me=ie+Ie,ge=ve-te,Ae=Ce+(re-te),Pe=he*ie/me*q,je=j*ie/me*q;ae.projectionMatrix.makePerspective(ge,Ae,Pe,je,q,me),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}function K(ae,ye){ye===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(ye.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(s===null)return;_.texture!==null&&(ae.near=_.depthNear,ae.far=_.depthFar),A.near=k.near=R.near=ae.near,A.far=k.far=R.far=ae.far,(D!==A.near||V!==A.far)&&(s.updateRenderState({depthNear:A.near,depthFar:A.far}),D=A.near,V=A.far,R.near=D,R.far=V,k.near=D,k.far=V,R.updateProjectionMatrix(),k.updateProjectionMatrix(),ae.updateProjectionMatrix());const ye=ae.parent,_e=A.cameras;K(A,ye);for(let re=0;re<_e.length;re++)K(_e[re],ye);_e.length===2?H(A,R,k):A.projectionMatrix.copy(R.projectionMatrix),J(ae,A,ye)};function J(ae,ye,_e){_e===null?ae.matrix.copy(ye.matrixWorld):(ae.matrix.copy(_e.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(ye.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(ye.projectionMatrix),ae.projectionMatrixInverse.copy(ye.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=Hy*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(m===null&&g===null))return c},this.setFoveation=function(ae){c=ae,m!==null&&(m.fixedFoveation=ae),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=ae)},this.hasDepthSensing=function(){return _.texture!==null};let ne=null;function be(ae,ye){if(d=ye.getViewerPose(u||a),y=ye,d!==null){const _e=d.views;g!==null&&(e.setRenderTargetFramebuffer(S,g.framebuffer),e.setRenderTarget(S));let re=!1;_e.length!==A.cameras.length&&(A.cameras.length=0,re=!0);for(let Q=0;Q<_e.length;Q++){const G=_e[Q];let ie=null;if(g!==null)ie=g.getViewport(G);else{const j=p.getViewSubImage(m,G);ie=j.viewport,Q===0&&(e.setRenderTargetTextures(S,j.colorTexture,m.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(S))}let he=I[Q];he===void 0&&(he=new $n,he.layers.enable(Q),he.viewport=new ji,I[Q]=he),he.matrix.fromArray(G.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(G.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(ie.x,ie.y,ie.width,ie.height),Q===0&&(A.matrix.copy(he.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),re===!0&&A.cameras.push(he)}const se=s.enabledFeatures;if(se&&se.includes("depth-sensing")){const Q=p.getDepthInformation(_e[0]);Q&&Q.isValid&&Q.texture&&_.init(e,Q,s.renderState)}}for(let _e=0;_e<w.length;_e++){const re=C[_e],se=w[_e];re!==null&&se!==void 0&&se.update(re,ye,u||a)}_.render(e,A),ne&&ne(ae,ye),ye.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ye}),y=null}const pe=new lJ;pe.setAnimationLoop(be),this.setAnimationLoop=function(ae){ne=ae},this.dispose=function(){}}}const Om=new Cs,lPe=new wt;function hPe(r,e){function i(x,O){x.matrixAutoUpdate===!0&&x.updateMatrix(),O.value.copy(x.matrix)}function n(x,O){O.color.getRGB(x.fogColor.value,sJ(r)),O.isFog?(x.fogNear.value=O.near,x.fogFar.value=O.far):O.isFogExp2&&(x.fogDensity.value=O.density)}function s(x,O,S,w,C){O.isMeshBasicMaterial||O.isMeshLambertMaterial?o(x,O):O.isMeshToonMaterial?(o(x,O),p(x,O)):O.isMeshPhongMaterial?(o(x,O),d(x,O)):O.isMeshStandardMaterial?(o(x,O),m(x,O),O.isMeshPhysicalMaterial&&g(x,O,C)):O.isMeshMatcapMaterial?(o(x,O),y(x,O)):O.isMeshDepthMaterial?o(x,O):O.isMeshDistanceMaterial?(o(x,O),_(x,O)):O.isMeshNormalMaterial?o(x,O):O.isLineBasicMaterial?(a(x,O),O.isLineDashedMaterial&&l(x,O)):O.isPointsMaterial?c(x,O,S,w):O.isSpriteMaterial?u(x,O):O.isShadowMaterial?(x.color.value.copy(O.color),x.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}function o(x,O){x.opacity.value=O.opacity,O.color&&x.diffuse.value.copy(O.color),O.emissive&&x.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&(x.map.value=O.map,i(O.map,x.mapTransform)),O.alphaMap&&(x.alphaMap.value=O.alphaMap,i(O.alphaMap,x.alphaMapTransform)),O.bumpMap&&(x.bumpMap.value=O.bumpMap,i(O.bumpMap,x.bumpMapTransform),x.bumpScale.value=O.bumpScale,O.side===wo&&(x.bumpScale.value*=-1)),O.normalMap&&(x.normalMap.value=O.normalMap,i(O.normalMap,x.normalMapTransform),x.normalScale.value.copy(O.normalScale),O.side===wo&&x.normalScale.value.negate()),O.displacementMap&&(x.displacementMap.value=O.displacementMap,i(O.displacementMap,x.displacementMapTransform),x.displacementScale.value=O.displacementScale,x.displacementBias.value=O.displacementBias),O.emissiveMap&&(x.emissiveMap.value=O.emissiveMap,i(O.emissiveMap,x.emissiveMapTransform)),O.specularMap&&(x.specularMap.value=O.specularMap,i(O.specularMap,x.specularMapTransform)),O.alphaTest>0&&(x.alphaTest.value=O.alphaTest);const S=e.get(O),w=S.envMap,C=S.envMapRotation;if(w&&(x.envMap.value=w,Om.copy(C),Om.x*=-1,Om.y*=-1,Om.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Om.y*=-1,Om.z*=-1),x.envMapRotation.value.setFromMatrix4(lPe.makeRotationFromEuler(Om)),x.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=O.reflectivity,x.ior.value=O.ior,x.refractionRatio.value=O.refractionRatio),O.lightMap){x.lightMap.value=O.lightMap;const M=r._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=O.lightMapIntensity*M,i(O.lightMap,x.lightMapTransform)}O.aoMap&&(x.aoMap.value=O.aoMap,x.aoMapIntensity.value=O.aoMapIntensity,i(O.aoMap,x.aoMapTransform))}function a(x,O){x.diffuse.value.copy(O.color),x.opacity.value=O.opacity,O.map&&(x.map.value=O.map,i(O.map,x.mapTransform))}function l(x,O){x.dashSize.value=O.dashSize,x.totalSize.value=O.dashSize+O.gapSize,x.scale.value=O.scale}function c(x,O,S,w){x.diffuse.value.copy(O.color),x.opacity.value=O.opacity,x.size.value=O.size*S,x.scale.value=w*.5,O.map&&(x.map.value=O.map,i(O.map,x.uvTransform)),O.alphaMap&&(x.alphaMap.value=O.alphaMap,i(O.alphaMap,x.alphaMapTransform)),O.alphaTest>0&&(x.alphaTest.value=O.alphaTest)}function u(x,O){x.diffuse.value.copy(O.color),x.opacity.value=O.opacity,x.rotation.value=O.rotation,O.map&&(x.map.value=O.map,i(O.map,x.mapTransform)),O.alphaMap&&(x.alphaMap.value=O.alphaMap,i(O.alphaMap,x.alphaMapTransform)),O.alphaTest>0&&(x.alphaTest.value=O.alphaTest)}function d(x,O){x.specular.value.copy(O.specular),x.shininess.value=Math.max(O.shininess,1e-4)}function p(x,O){O.gradientMap&&(x.gradientMap.value=O.gradientMap)}function m(x,O){x.metalness.value=O.metalness,O.metalnessMap&&(x.metalnessMap.value=O.metalnessMap,i(O.metalnessMap,x.metalnessMapTransform)),x.roughness.value=O.roughness,O.roughnessMap&&(x.roughnessMap.value=O.roughnessMap,i(O.roughnessMap,x.roughnessMapTransform)),O.envMap&&(x.envMapIntensity.value=O.envMapIntensity)}function g(x,O,S){x.ior.value=O.ior,O.sheen>0&&(x.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),x.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&(x.sheenColorMap.value=O.sheenColorMap,i(O.sheenColorMap,x.sheenColorMapTransform)),O.sheenRoughnessMap&&(x.sheenRoughnessMap.value=O.sheenRoughnessMap,i(O.sheenRoughnessMap,x.sheenRoughnessMapTransform))),O.clearcoat>0&&(x.clearcoat.value=O.clearcoat,x.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&(x.clearcoatMap.value=O.clearcoatMap,i(O.clearcoatMap,x.clearcoatMapTransform)),O.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap,i(O.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),O.clearcoatNormalMap&&(x.clearcoatNormalMap.value=O.clearcoatNormalMap,i(O.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),O.side===wo&&x.clearcoatNormalScale.value.negate())),O.dispersion>0&&(x.dispersion.value=O.dispersion),O.iridescence>0&&(x.iridescence.value=O.iridescence,x.iridescenceIOR.value=O.iridescenceIOR,x.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&(x.iridescenceMap.value=O.iridescenceMap,i(O.iridescenceMap,x.iridescenceMapTransform)),O.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=O.iridescenceThicknessMap,i(O.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),O.transmission>0&&(x.transmission.value=O.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),O.transmissionMap&&(x.transmissionMap.value=O.transmissionMap,i(O.transmissionMap,x.transmissionMapTransform)),x.thickness.value=O.thickness,O.thicknessMap&&(x.thicknessMap.value=O.thicknessMap,i(O.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=O.attenuationDistance,x.attenuationColor.value.copy(O.attenuationColor)),O.anisotropy>0&&(x.anisotropyVector.value.set(O.anisotropy*Math.cos(O.anisotropyRotation),O.anisotropy*Math.sin(O.anisotropyRotation)),O.anisotropyMap&&(x.anisotropyMap.value=O.anisotropyMap,i(O.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=O.specularIntensity,x.specularColor.value.copy(O.specularColor),O.specularColorMap&&(x.specularColorMap.value=O.specularColorMap,i(O.specularColorMap,x.specularColorMapTransform)),O.specularIntensityMap&&(x.specularIntensityMap.value=O.specularIntensityMap,i(O.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,O){O.matcap&&(x.matcap.value=O.matcap)}function _(x,O){const S=e.get(O).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function cPe(r,e,i,n){let s={},o={},a=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function c(S,w){const C=w.program;n.uniformBlockBinding(S,C)}function u(S,w){let C=s[S.id];C===void 0&&(y(S),C=d(S),s[S.id]=C,S.addEventListener("dispose",x));const M=w.program;n.updateUBOMapping(S,M);const P=e.render.frame;o[S.id]!==P&&(m(S),o[S.id]=P)}function d(S){const w=p();S.__bindingPointIndex=w;const C=r.createBuffer(),M=S.__size,P=S.usage;return r.bindBuffer(r.UNIFORM_BUFFER,C),r.bufferData(r.UNIFORM_BUFFER,M,P),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,w,C),C}function p(){for(let S=0;S<l;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(S){const w=s[S.id],C=S.uniforms,M=S.__cache;r.bindBuffer(r.UNIFORM_BUFFER,w);for(let P=0,R=C.length;P<R;P++){const k=Array.isArray(C[P])?C[P]:[C[P]];for(let I=0,A=k.length;I<A;I++){const D=k[I];if(g(D,P,I,M)===!0){const V=D.__offset,B=Array.isArray(D.value)?D.value:[D.value];let L=0;for(let F=0;F<B.length;F++){const $=B[F],z=_($);typeof $=="number"||typeof $=="boolean"?(D.__data[0]=$,r.bufferSubData(r.UNIFORM_BUFFER,V+L,D.__data)):$.isMatrix3?(D.__data[0]=$.elements[0],D.__data[1]=$.elements[1],D.__data[2]=$.elements[2],D.__data[3]=0,D.__data[4]=$.elements[3],D.__data[5]=$.elements[4],D.__data[6]=$.elements[5],D.__data[7]=0,D.__data[8]=$.elements[6],D.__data[9]=$.elements[7],D.__data[10]=$.elements[8],D.__data[11]=0):($.toArray(D.__data,L),L+=z.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,V,D.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function g(S,w,C,M){const P=S.value,R=w+"_"+C;if(M[R]===void 0)return typeof P=="number"||typeof P=="boolean"?M[R]=P:M[R]=P.clone(),!0;{const k=M[R];if(typeof P=="number"||typeof P=="boolean"){if(k!==P)return M[R]=P,!0}else if(k.equals(P)===!1)return k.copy(P),!0}return!1}function y(S){const w=S.uniforms;let C=0;const M=16;for(let R=0,k=w.length;R<k;R++){const I=Array.isArray(w[R])?w[R]:[w[R]];for(let A=0,D=I.length;A<D;A++){const V=I[A],B=Array.isArray(V.value)?V.value:[V.value];for(let L=0,F=B.length;L<F;L++){const $=B[L],z=_($),H=C%M;H!==0&&M-H<z.boundary&&(C+=M-H),V.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=C,C+=z.storage}}}const P=C%M;return P>0&&(C+=M-P),S.__size=C,S.__cache={},this}function _(S){const w={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(w.boundary=4,w.storage=4):S.isVector2?(w.boundary=8,w.storage=8):S.isVector3||S.isColor?(w.boundary=16,w.storage=12):S.isVector4?(w.boundary=16,w.storage=16):S.isMatrix3?(w.boundary=48,w.storage=48):S.isMatrix4?(w.boundary=64,w.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),w}function x(S){const w=S.target;w.removeEventListener("dispose",x);const C=a.indexOf(w.__bindingPointIndex);a.splice(C,1),r.deleteBuffer(s[w.id]),delete s[w.id],delete o[w.id]}function O(){for(const S in s)r.deleteBuffer(s[S]);a=[],s={},o={}}return{bind:c,update:u,dispose:O}}class Vb{constructor(e={}){const{canvas:i=eJ(),context:n=null,depth:s=!0,stencil:o=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let m;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=n.getContextAttributes().alpha}else m=a;const g=new Uint32Array(4),y=new Int32Array(4);let _=null,x=null;const O=[],S=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=al,this._useLegacyLights=!1,this.toneMapping=bd,this.toneMappingExposure=1;const w=this;let C=!1,M=0,P=0,R=null,k=-1,I=null;const A=new ji,D=new ji;let V=null;const B=new ut(0);let L=0,F=i.width,$=i.height,z=1,H=null,K=null;const J=new ji(0,0,F,$),ne=new ji(0,0,F,$);let be=!1;const pe=new FO;let ae=!1,ye=!1;const _e=new wt,re=new le,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Q(){return R===null?z:1}let G=n;function ie(ue,Re){return i.getContext(ue,Re)}try{const ue={alpha:!0,depth:s,stencil:o,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${C_}`),i.addEventListener("webglcontextlost",xe,!1),i.addEventListener("webglcontextrestored",ze,!1),i.addEventListener("webglcontextcreationerror",Qe,!1),G===null){const Re="webgl2";if(G=ie(Re,ue),G===null)throw ie(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}let he,j,ee,de,ve,Ce,Ie,te,q,me,ge,Ae,Pe,je,$e,We,ft,Ze,dt,Ut,zt,_t,ni,Bi;function Ee(){he=new OEe(G),he.init(),_t=new mJ(G,he),j=new vEe(G,he,e,_t),ee=new tPe(G),de=new TEe(G),ve=new XMe,Ce=new iPe(G,he,ee,ve,j,_t,de),Ie=new _Ee(w),te=new wEe(w),q=new R2e(G),ni=new mEe(G,q),me=new SEe(G,q,de,ni),ge=new EEe(G,me,q,de),dt=new AEe(G,j,Ce),We=new yEe(ve),Ae=new zMe(w,Ie,te,he,j,ni,We),Pe=new hPe(w,ve),je=new GMe,$e=new ZMe(he),Ze=new pEe(w,Ie,te,ee,ge,m,c),ft=new ePe(w,ge,j),Bi=new cPe(G,de,j,ee),Ut=new gEe(G,he,de),zt=new CEe(G,he,de),de.programs=Ae.programs,w.capabilities=j,w.extensions=he,w.properties=ve,w.renderLists=je,w.shadowMap=ft,w.state=ee,w.info=de}Ee();const Ue=new aPe(w,G);this.xr=Ue,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const ue=he.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=he.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(ue){ue!==void 0&&(z=ue,this.setSize(F,$,!1))},this.getSize=function(ue){return ue.set(F,$)},this.setSize=function(ue,Re,Xe=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=ue,$=Re,i.width=Math.floor(ue*z),i.height=Math.floor(Re*z),Xe===!0&&(i.style.width=ue+"px",i.style.height=Re+"px"),this.setViewport(0,0,ue,Re)},this.getDrawingBufferSize=function(ue){return ue.set(F*z,$*z).floor()},this.setDrawingBufferSize=function(ue,Re,Xe){F=ue,$=Re,z=Xe,i.width=Math.floor(ue*Xe),i.height=Math.floor(Re*Xe),this.setViewport(0,0,ue,Re)},this.getCurrentViewport=function(ue){return ue.copy(A)},this.getViewport=function(ue){return ue.copy(J)},this.setViewport=function(ue,Re,Xe,Fe){ue.isVector4?J.set(ue.x,ue.y,ue.z,ue.w):J.set(ue,Re,Xe,Fe),ee.viewport(A.copy(J).multiplyScalar(z).round())},this.getScissor=function(ue){return ue.copy(ne)},this.setScissor=function(ue,Re,Xe,Fe){ue.isVector4?ne.set(ue.x,ue.y,ue.z,ue.w):ne.set(ue,Re,Xe,Fe),ee.scissor(D.copy(ne).multiplyScalar(z).round())},this.getScissorTest=function(){return be},this.setScissorTest=function(ue){ee.setScissorTest(be=ue)},this.setOpaqueSort=function(ue){H=ue},this.setTransparentSort=function(ue){K=ue},this.getClearColor=function(ue){return ue.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(ue=!0,Re=!0,Xe=!0){let Fe=0;if(ue){let Ve=!1;if(R!==null){const bt=R.texture.format;Ve=bt===_N||bt===yN||bt===vN}if(Ve){const bt=R.texture.type,Yt=bt===lc||bt===Yg||bt===dN||bt===E_||bt===pN||bt===mN,Jt=Ze.getClearColor(),fi=Ze.getClearAlpha(),Ei=Jt.r,Li=Jt.g,$i=Jt.b;Yt?(g[0]=Ei,g[1]=Li,g[2]=$i,g[3]=fi,G.clearBufferuiv(G.COLOR,0,g)):(y[0]=Ei,y[1]=Li,y[2]=$i,y[3]=fi,G.clearBufferiv(G.COLOR,0,y))}else Fe|=G.COLOR_BUFFER_BIT}Re&&(Fe|=G.DEPTH_BUFFER_BIT),Xe&&(Fe|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(Fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",xe,!1),i.removeEventListener("webglcontextrestored",ze,!1),i.removeEventListener("webglcontextcreationerror",Qe,!1),je.dispose(),$e.dispose(),ve.dispose(),Ie.dispose(),te.dispose(),ge.dispose(),ni.dispose(),Bi.dispose(),Ae.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",Qi),Ue.removeEventListener("sessionend",Is),Sr.stop()};function xe(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function ze(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const ue=de.autoReset,Re=ft.enabled,Xe=ft.autoUpdate,Fe=ft.needsUpdate,Ve=ft.type;Ee(),de.autoReset=ue,ft.enabled=Re,ft.autoUpdate=Xe,ft.needsUpdate=Fe,ft.type=Ve}function Qe(ue){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function ct(ue){const Re=ue.target;Re.removeEventListener("dispose",ct),xt(Re)}function xt(ue){Ki(ue),ve.remove(ue)}function Ki(ue){const Re=ve.get(ue).programs;Re!==void 0&&(Re.forEach(function(Xe){Ae.releaseProgram(Xe)}),ue.isShaderMaterial&&Ae.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,Re,Xe,Fe,Ve,bt){Re===null&&(Re=se);const Yt=Ve.isMesh&&Ve.matrixWorld.determinant()<0,Jt=_k(ue,Re,Xe,Fe,Ve);ee.setMaterial(Fe,Yt);let fi=Xe.index,Ei=1;if(Fe.wireframe===!0){if(fi=me.getWireframeAttribute(Xe),fi===void 0)return;Ei=2}const Li=Xe.drawRange,$i=Xe.attributes.position;let Ui=Li.start*Ei,zn=(Li.start+Li.count)*Ei;bt!==null&&(Ui=Math.max(Ui,bt.start*Ei),zn=Math.min(zn,(bt.start+bt.count)*Ei)),fi!==null?(Ui=Math.max(Ui,0),zn=Math.min(zn,fi.count)):$i!=null&&(Ui=Math.max(Ui,0),zn=Math.min(zn,$i.count));const Ro=zn-Ui;if(Ro<0||Ro===1/0)return;ni.setup(Ve,Fe,Jt,Xe,fi);let Ml,bn=Ut;if(fi!==null&&(Ml=q.get(fi),bn=zt,bn.setIndex(Ml)),Ve.isMesh)Fe.wireframe===!0?(ee.setLineWidth(Fe.wireframeLinewidth*Q()),bn.setMode(G.LINES)):bn.setMode(G.TRIANGLES);else if(Ve.isLine){let Di=Fe.linewidth;Di===void 0&&(Di=1),ee.setLineWidth(Di*Q()),Ve.isLineSegments?bn.setMode(G.LINES):Ve.isLineLoop?bn.setMode(G.LINE_LOOP):bn.setMode(G.LINE_STRIP)}else Ve.isPoints?bn.setMode(G.POINTS):Ve.isSprite&&bn.setMode(G.TRIANGLES);if(Ve.isBatchedMesh)Ve._multiDrawInstances!==null?bn.renderMultiDrawInstances(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount,Ve._multiDrawInstances):bn.renderMultiDraw(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount);else if(Ve.isInstancedMesh)bn.renderInstances(Ui,Ro,Ve.count);else if(Xe.isInstancedBufferGeometry){const Di=Xe._maxInstanceCount!==void 0?Xe._maxInstanceCount:1/0,im=Math.min(Xe.instanceCount,Di);bn.renderInstances(Ui,Ro,im)}else bn.render(Ui,Ro)};function Ji(ue,Re,Xe){ue.transparent===!0&&ue.side===ba&&ue.forceSinglePass===!1?(ue.side=wo,ue.needsUpdate=!0,kn(ue,Re,Xe),ue.side=Ad,ue.needsUpdate=!0,kn(ue,Re,Xe),ue.side=ba):kn(ue,Re,Xe)}this.compile=function(ue,Re,Xe=null){Xe===null&&(Xe=ue),x=$e.get(Xe),x.init(Re),S.push(x),Xe.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Re.layers)&&(x.pushLight(Ve),Ve.castShadow&&x.pushShadow(Ve))}),ue!==Xe&&ue.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Re.layers)&&(x.pushLight(Ve),Ve.castShadow&&x.pushShadow(Ve))}),x.setupLights(w._useLegacyLights);const Fe=new Set;return ue.traverse(function(Ve){const bt=Ve.material;if(bt)if(Array.isArray(bt))for(let Yt=0;Yt<bt.length;Yt++){const Jt=bt[Yt];Ji(Jt,Xe,Ve),Fe.add(Jt)}else Ji(bt,Xe,Ve),Fe.add(bt)}),S.pop(),x=null,Fe},this.compileAsync=function(ue,Re,Xe=null){const Fe=this.compile(ue,Re,Xe);return new Promise(Ve=>{function bt(){if(Fe.forEach(function(Yt){ve.get(Yt).currentProgram.isReady()&&Fe.delete(Yt)}),Fe.size===0){Ve(ue);return}setTimeout(bt,10)}he.get("KHR_parallel_shader_compile")!==null?bt():setTimeout(bt,10)})};let gn=null;function pr(ue){gn&&gn(ue)}function Qi(){Sr.stop()}function Is(){Sr.start()}const Sr=new lJ;Sr.setAnimationLoop(pr),typeof self<"u"&&Sr.setContext(self),this.setAnimationLoop=function(ue){gn=ue,Ue.setAnimationLoop(ue),ue===null?Sr.stop():Sr.start()},Ue.addEventListener("sessionstart",Qi),Ue.addEventListener("sessionend",Is),this.render=function(ue,Re){if(Re!==void 0&&Re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Re.parent===null&&Re.matrixWorldAutoUpdate===!0&&Re.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(Re),Re=Ue.getCamera()),ue.isScene===!0&&ue.onBeforeRender(w,ue,Re,R),x=$e.get(ue,S.length),x.init(Re),S.push(x),_e.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),pe.setFromProjectionMatrix(_e),ye=this.localClippingEnabled,ae=We.init(this.clippingPlanes,ye),_=je.get(ue,O.length),_.init(),O.push(_),z_(ue,Re,0,w.sortObjects),_.finish(),w.sortObjects===!0&&_.sort(H,K);const Xe=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1;Xe&&Ze.addToRenderList(_,ue),this.info.render.frame++,ae===!0&&We.beginShadows();const Fe=x.state.shadowsArray;ft.render(Fe,ue,Re),ae===!0&&We.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ve=_.opaque,bt=_.transmissive;if(x.setupLights(w._useLegacyLights),Re.isArrayCamera){const Yt=Re.cameras;if(bt.length>0)for(let Jt=0,fi=Yt.length;Jt<fi;Jt++){const Ei=Yt[Jt];OS(Ve,bt,ue,Ei)}Xe&&Ze.render(ue);for(let Jt=0,fi=Yt.length;Jt<fi;Jt++){const Ei=Yt[Jt];gs(_,ue,Ei,Ei.viewport)}}else bt.length>0&&OS(Ve,bt,ue,Re),Xe&&Ze.render(ue),gs(_,ue,Re);R!==null&&(Ce.updateMultisampleRenderTarget(R),Ce.updateRenderTargetMipmap(R)),ue.isScene===!0&&ue.onAfterRender(w,ue,Re),ni.resetDefaultState(),k=-1,I=null,S.pop(),S.length>0?(x=S[S.length-1],ae===!0&&We.setGlobalState(w.clippingPlanes,x.state.camera)):x=null,O.pop(),O.length>0?_=O[O.length-1]:_=null};function z_(ue,Re,Xe,Fe){if(ue.visible===!1)return;if(ue.layers.test(Re.layers)){if(ue.isGroup)Xe=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(Re);else if(ue.isLight)x.pushLight(ue),ue.castShadow&&x.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||pe.intersectsSprite(ue)){Fe&&re.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(_e);const Yt=ge.update(ue),Jt=ue.material;Jt.visible&&_.push(ue,Yt,Jt,Xe,re.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(!ue.frustumCulled||pe.intersectsObject(ue))){const Yt=ge.update(ue),Jt=ue.material;if(Fe&&(ue.boundingSphere!==void 0?(ue.boundingSphere===null&&ue.computeBoundingSphere(),re.copy(ue.boundingSphere.center)):(Yt.boundingSphere===null&&Yt.computeBoundingSphere(),re.copy(Yt.boundingSphere.center)),re.applyMatrix4(ue.matrixWorld).applyMatrix4(_e)),Array.isArray(Jt)){const fi=Yt.groups;for(let Ei=0,Li=fi.length;Ei<Li;Ei++){const $i=fi[Ei],Ui=Jt[$i.materialIndex];Ui&&Ui.visible&&_.push(ue,Yt,Ui,Xe,re.z,$i)}}else Jt.visible&&_.push(ue,Yt,Jt,Xe,re.z,null)}}const bt=ue.children;for(let Yt=0,Jt=bt.length;Yt<Jt;Yt++)z_(bt[Yt],Re,Xe,Fe)}function gs(ue,Re,Xe,Fe){const Ve=ue.opaque,bt=ue.transmissive,Yt=ue.transparent;x.setupLightsView(Xe),ae===!0&&We.setGlobalState(w.clippingPlanes,Xe),Fe&&ee.viewport(A.copy(Fe)),Ve.length>0&&tm(Ve,Re,Xe),bt.length>0&&tm(bt,Re,Xe),Yt.length>0&&tm(Yt,Re,Xe),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function OS(ue,Re,Xe,Fe){if((Xe.isScene===!0?Xe.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[Fe.id]===void 0&&(x.state.transmissionRenderTarget[Fe.id]=new yh(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")||he.has("EXT_color_buffer_float")?A_:lc,minFilter:qh,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const bt=x.state.transmissionRenderTarget[Fe.id],Yt=Fe.viewport||A;bt.setSize(Yt.z,Yt.w);const Jt=w.getRenderTarget();w.setRenderTarget(bt),w.getClearColor(B),L=w.getClearAlpha(),L<1&&w.setClearColor(16777215,.5),w.clear();const fi=w.toneMapping;w.toneMapping=bd;const Ei=Fe.viewport;if(Fe.viewport!==void 0&&(Fe.viewport=void 0),x.setupLightsView(Fe),ae===!0&&We.setGlobalState(w.clippingPlanes,Fe),tm(ue,Xe,Fe),Ce.updateMultisampleRenderTarget(bt),Ce.updateRenderTargetMipmap(bt),he.has("WEBGL_multisampled_render_to_texture")===!1){let Li=!1;for(let $i=0,Ui=Re.length;$i<Ui;$i++){const zn=Re[$i],Ro=zn.object,Ml=zn.geometry,bn=zn.material,Di=zn.group;if(bn.side===ba&&Ro.layers.test(Fe.layers)){const im=bn.side;bn.side=wo,bn.needsUpdate=!0,Qd(Ro,Xe,Fe,Ml,bn,Di),bn.side=im,bn.needsUpdate=!0,Li=!0}}Li===!0&&(Ce.updateMultisampleRenderTarget(bt),Ce.updateRenderTargetMipmap(bt))}w.setRenderTarget(Jt),w.setClearColor(B,L),Ei!==void 0&&(Fe.viewport=Ei),w.toneMapping=fi}function tm(ue,Re,Xe){const Fe=Re.isScene===!0?Re.overrideMaterial:null;for(let Ve=0,bt=ue.length;Ve<bt;Ve++){const Yt=ue[Ve],Jt=Yt.object,fi=Yt.geometry,Ei=Fe===null?Yt.material:Fe,Li=Yt.group;Jt.layers.test(Xe.layers)&&Qd(Jt,Re,Xe,fi,Ei,Li)}}function Qd(ue,Re,Xe,Fe,Ve,bt){ue.onBeforeRender(w,Re,Xe,Fe,Ve,bt),ue.modelViewMatrix.multiplyMatrices(Xe.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Ve.onBeforeRender(w,Re,Xe,Fe,ue,bt),Ve.transparent===!0&&Ve.side===ba&&Ve.forceSinglePass===!1?(Ve.side=wo,Ve.needsUpdate=!0,w.renderBufferDirect(Xe,Re,Fe,Ve,ue,bt),Ve.side=Ad,Ve.needsUpdate=!0,w.renderBufferDirect(Xe,Re,Fe,Ve,ue,bt),Ve.side=ba):w.renderBufferDirect(Xe,Re,Fe,Ve,ue,bt),ue.onAfterRender(w,Re,Xe,Fe,Ve,bt)}function kn(ue,Re,Xe){Re.isScene!==!0&&(Re=se);const Fe=ve.get(ue),Ve=x.state.lights,bt=x.state.shadowsArray,Yt=Ve.state.version,Jt=Ae.getParameters(ue,Ve.state,bt,Re,Xe),fi=Ae.getProgramCacheKey(Jt);let Ei=Fe.programs;Fe.environment=ue.isMeshStandardMaterial?Re.environment:null,Fe.fog=Re.fog,Fe.envMap=(ue.isMeshStandardMaterial?te:Ie).get(ue.envMap||Fe.environment),Fe.envMapRotation=Fe.environment!==null&&ue.envMap===null?Re.environmentRotation:ue.envMapRotation,Ei===void 0&&(ue.addEventListener("dispose",ct),Ei=new Map,Fe.programs=Ei);let Li=Ei.get(fi);if(Li!==void 0){if(Fe.currentProgram===Li&&Fe.lightsStateVersion===Yt)return jd(ue,Jt),Li}else Jt.uniforms=Ae.getUniforms(ue),ue.onBuild(Xe,Jt,w),ue.onBeforeCompile(Jt,w),Li=Ae.acquireProgram(Jt,fi),Ei.set(fi,Li),Fe.uniforms=Jt.uniforms;const $i=Fe.uniforms;return(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&($i.clippingPlanes=We.uniform),jd(ue,Jt),Fe.needsLights=bk(ue),Fe.lightsStateVersion=Yt,Fe.needsLights&&($i.ambientLightColor.value=Ve.state.ambient,$i.lightProbe.value=Ve.state.probe,$i.directionalLights.value=Ve.state.directional,$i.directionalLightShadows.value=Ve.state.directionalShadow,$i.spotLights.value=Ve.state.spot,$i.spotLightShadows.value=Ve.state.spotShadow,$i.rectAreaLights.value=Ve.state.rectArea,$i.ltc_1.value=Ve.state.rectAreaLTC1,$i.ltc_2.value=Ve.state.rectAreaLTC2,$i.pointLights.value=Ve.state.point,$i.pointLightShadows.value=Ve.state.pointShadow,$i.hemisphereLights.value=Ve.state.hemi,$i.directionalShadowMap.value=Ve.state.directionalShadowMap,$i.directionalShadowMatrix.value=Ve.state.directionalShadowMatrix,$i.spotShadowMap.value=Ve.state.spotShadowMap,$i.spotLightMatrix.value=Ve.state.spotLightMatrix,$i.spotLightMap.value=Ve.state.spotLightMap,$i.pointShadowMap.value=Ve.state.pointShadowMap,$i.pointShadowMatrix.value=Ve.state.pointShadowMatrix),Fe.currentProgram=Li,Fe.uniformsList=null,Li}function Sh(ue){if(ue.uniformsList===null){const Re=ue.currentProgram.getUniforms();ue.uniformsList=fA.seqWithValue(Re.seq,ue.uniforms)}return ue.uniformsList}function jd(ue,Re){const Xe=ve.get(ue);Xe.outputColorSpace=Re.outputColorSpace,Xe.batching=Re.batching,Xe.instancing=Re.instancing,Xe.instancingColor=Re.instancingColor,Xe.instancingMorph=Re.instancingMorph,Xe.skinning=Re.skinning,Xe.morphTargets=Re.morphTargets,Xe.morphNormals=Re.morphNormals,Xe.morphColors=Re.morphColors,Xe.morphTargetsCount=Re.morphTargetsCount,Xe.numClippingPlanes=Re.numClippingPlanes,Xe.numIntersection=Re.numClipIntersection,Xe.vertexAlphas=Re.vertexAlphas,Xe.vertexTangents=Re.vertexTangents,Xe.toneMapping=Re.toneMapping}function _k(ue,Re,Xe,Fe,Ve){Re.isScene!==!0&&(Re=se),Ce.resetTextureUnits();const bt=Re.fog,Yt=Fe.isMeshStandardMaterial?Re.environment:null,Jt=R===null?w.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:Xd,fi=(Fe.isMeshStandardMaterial?te:Ie).get(Fe.envMap||Yt),Ei=Fe.vertexColors===!0&&!!Xe.attributes.color&&Xe.attributes.color.itemSize===4,Li=!!Xe.attributes.tangent&&(!!Fe.normalMap||Fe.anisotropy>0),$i=!!Xe.morphAttributes.position,Ui=!!Xe.morphAttributes.normal,zn=!!Xe.morphAttributes.color;let Ro=bd;Fe.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(Ro=w.toneMapping);const Ml=Xe.morphAttributes.position||Xe.morphAttributes.normal||Xe.morphAttributes.color,bn=Ml!==void 0?Ml.length:0,Di=ve.get(Fe),im=x.state.lights;if(ae===!0&&(ye===!0||ue!==I)){const ho=ue===I&&Fe.id===k;We.setState(Fe,ue,ho)}let Zn=!1;Fe.version===Di.__version?(Di.needsLights&&Di.lightsStateVersion!==im.state.version||Di.outputColorSpace!==Jt||Ve.isBatchedMesh&&Di.batching===!1||!Ve.isBatchedMesh&&Di.batching===!0||Ve.isInstancedMesh&&Di.instancing===!1||!Ve.isInstancedMesh&&Di.instancing===!0||Ve.isSkinnedMesh&&Di.skinning===!1||!Ve.isSkinnedMesh&&Di.skinning===!0||Ve.isInstancedMesh&&Di.instancingColor===!0&&Ve.instanceColor===null||Ve.isInstancedMesh&&Di.instancingColor===!1&&Ve.instanceColor!==null||Ve.isInstancedMesh&&Di.instancingMorph===!0&&Ve.morphTexture===null||Ve.isInstancedMesh&&Di.instancingMorph===!1&&Ve.morphTexture!==null||Di.envMap!==fi||Fe.fog===!0&&Di.fog!==bt||Di.numClippingPlanes!==void 0&&(Di.numClippingPlanes!==We.numPlanes||Di.numIntersection!==We.numIntersection)||Di.vertexAlphas!==Ei||Di.vertexTangents!==Li||Di.morphTargets!==$i||Di.morphNormals!==Ui||Di.morphColors!==zn||Di.toneMapping!==Ro||Di.morphTargetsCount!==bn)&&(Zn=!0):(Zn=!0,Di.__version=Fe.version);let Bo=Di.currentProgram;Zn===!0&&(Bo=kn(Fe,Re,Ve));let nm=!1,rm=!1,X_=!1;const Cr=Bo.getUniforms(),gc=Di.uniforms;if(ee.useProgram(Bo.program)&&(nm=!0,rm=!0,X_=!0),Fe.id!==k&&(k=Fe.id,rm=!0),nm||I!==ue){Cr.setValue(G,"projectionMatrix",ue.projectionMatrix),Cr.setValue(G,"viewMatrix",ue.matrixWorldInverse);const ho=Cr.map.cameraPosition;ho!==void 0&&ho.setValue(G,re.setFromMatrixPosition(ue.matrixWorld)),j.logarithmicDepthBuffer&&Cr.setValue(G,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),(Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshLambertMaterial||Fe.isMeshBasicMaterial||Fe.isMeshStandardMaterial||Fe.isShaderMaterial)&&Cr.setValue(G,"isOrthographic",ue.isOrthographicCamera===!0),I!==ue&&(I=ue,rm=!0,X_=!0)}if(Ve.isSkinnedMesh){Cr.setOptional(G,Ve,"bindMatrix"),Cr.setOptional(G,Ve,"bindMatrixInverse");const ho=Ve.skeleton;ho&&(ho.boneTexture===null&&ho.computeBoneTexture(),Cr.setValue(G,"boneTexture",ho.boneTexture,Ce))}Ve.isBatchedMesh&&(Cr.setOptional(G,Ve,"batchingTexture"),Cr.setValue(G,"batchingTexture",Ve._matricesTexture,Ce));const W_=Xe.morphAttributes;if((W_.position!==void 0||W_.normal!==void 0||W_.color!==void 0)&&dt.update(Ve,Xe,Bo),(rm||Di.receiveShadow!==Ve.receiveShadow)&&(Di.receiveShadow=Ve.receiveShadow,Cr.setValue(G,"receiveShadow",Ve.receiveShadow)),Fe.isMeshGouraudMaterial&&Fe.envMap!==null&&(gc.envMap.value=fi,gc.flipEnvMap.value=fi.isCubeTexture&&fi.isRenderTargetTexture===!1?-1:1),Fe.isMeshStandardMaterial&&Fe.envMap===null&&Re.environment!==null&&(gc.envMapIntensity.value=Re.environmentIntensity),rm&&(Cr.setValue(G,"toneMappingExposure",w.toneMappingExposure),Di.needsLights&&xk(gc,X_),bt&&Fe.fog===!0&&Pe.refreshFogUniforms(gc,bt),Pe.refreshMaterialUniforms(gc,Fe,z,$,x.state.transmissionRenderTarget[ue.id]),fA.upload(G,Sh(Di),gc,Ce)),Fe.isShaderMaterial&&Fe.uniformsNeedUpdate===!0&&(fA.upload(G,Sh(Di),gc,Ce),Fe.uniformsNeedUpdate=!1),Fe.isSpriteMaterial&&Cr.setValue(G,"center",Ve.center),Cr.setValue(G,"modelViewMatrix",Ve.modelViewMatrix),Cr.setValue(G,"normalMatrix",Ve.normalMatrix),Cr.setValue(G,"modelMatrix",Ve.matrixWorld),Fe.isShaderMaterial||Fe.isRawShaderMaterial){const ho=Fe.uniformsGroups;for(let ra=0,wk=ho.length;ra<wk;ra++){const SS=ho[ra];Bi.update(SS,Bo),Bi.bind(SS,Bo)}}return Bo}function xk(ue,Re){ue.ambientLightColor.needsUpdate=Re,ue.lightProbe.needsUpdate=Re,ue.directionalLights.needsUpdate=Re,ue.directionalLightShadows.needsUpdate=Re,ue.pointLights.needsUpdate=Re,ue.pointLightShadows.needsUpdate=Re,ue.spotLights.needsUpdate=Re,ue.spotLightShadows.needsUpdate=Re,ue.rectAreaLights.needsUpdate=Re,ue.hemisphereLights.needsUpdate=Re}function bk(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(ue,Re,Xe){ve.get(ue.texture).__webglTexture=Re,ve.get(ue.depthTexture).__webglTexture=Xe;const Fe=ve.get(ue);Fe.__hasExternalTextures=!0,Fe.__autoAllocateDepthBuffer=Xe===void 0,Fe.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ue,Re){const Xe=ve.get(ue);Xe.__webglFramebuffer=Re,Xe.__useDefaultFramebuffer=Re===void 0},this.setRenderTarget=function(ue,Re=0,Xe=0){R=ue,M=Re,P=Xe;let Fe=!0,Ve=null,bt=!1,Yt=!1;if(ue){const fi=ve.get(ue);fi.__useDefaultFramebuffer!==void 0?(ee.bindFramebuffer(G.FRAMEBUFFER,null),Fe=!1):fi.__webglFramebuffer===void 0?Ce.setupRenderTarget(ue):fi.__hasExternalTextures&&Ce.rebindTextures(ue,ve.get(ue.texture).__webglTexture,ve.get(ue.depthTexture).__webglTexture);const Ei=ue.texture;(Ei.isData3DTexture||Ei.isDataArrayTexture||Ei.isCompressedArrayTexture)&&(Yt=!0);const Li=ve.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Array.isArray(Li[Re])?Ve=Li[Re][Xe]:Ve=Li[Re],bt=!0):ue.samples>0&&Ce.useMultisampledRTT(ue)===!1?Ve=ve.get(ue).__webglMultisampledFramebuffer:Array.isArray(Li)?Ve=Li[Xe]:Ve=Li,A.copy(ue.viewport),D.copy(ue.scissor),V=ue.scissorTest}else A.copy(J).multiplyScalar(z).floor(),D.copy(ne).multiplyScalar(z).floor(),V=be;if(ee.bindFramebuffer(G.FRAMEBUFFER,Ve)&&Fe&&ee.drawBuffers(ue,Ve),ee.viewport(A),ee.scissor(D),ee.setScissorTest(V),bt){const fi=ve.get(ue.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+Re,fi.__webglTexture,Xe)}else if(Yt){const fi=ve.get(ue.texture),Ei=Re||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,fi.__webglTexture,Xe||0,Ei)}k=-1},this.readRenderTargetPixels=function(ue,Re,Xe,Fe,Ve,bt,Yt){if(!(ue&&ue.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Jt=ve.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&Yt!==void 0&&(Jt=Jt[Yt]),Jt){ee.bindFramebuffer(G.FRAMEBUFFER,Jt);try{const fi=ue.texture,Ei=fi.format,Li=fi.type;if(!j.textureFormatReadable(Ei)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!j.textureTypeReadable(Li)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Re>=0&&Re<=ue.width-Fe&&Xe>=0&&Xe<=ue.height-Ve&&G.readPixels(Re,Xe,Fe,Ve,_t.convert(Ei),_t.convert(Li),bt)}finally{const fi=R!==null?ve.get(R).__webglFramebuffer:null;ee.bindFramebuffer(G.FRAMEBUFFER,fi)}}},this.copyFramebufferToTexture=function(ue,Re,Xe=0){const Fe=Math.pow(2,-Xe),Ve=Math.floor(Re.image.width*Fe),bt=Math.floor(Re.image.height*Fe);Ce.setTexture2D(Re,0),G.copyTexSubImage2D(G.TEXTURE_2D,Xe,0,0,ue.x,ue.y,Ve,bt),ee.unbindTexture()},this.copyTextureToTexture=function(ue,Re,Xe,Fe=0){const Ve=Re.image.width,bt=Re.image.height,Yt=_t.convert(Xe.format),Jt=_t.convert(Xe.type);Ce.setTexture2D(Xe,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,Xe.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Xe.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,Xe.unpackAlignment),Re.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,Fe,ue.x,ue.y,Ve,bt,Yt,Jt,Re.image.data):Re.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,Fe,ue.x,ue.y,Re.mipmaps[0].width,Re.mipmaps[0].height,Yt,Re.mipmaps[0].data):G.texSubImage2D(G.TEXTURE_2D,Fe,ue.x,ue.y,Yt,Jt,Re.image),Fe===0&&Xe.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),ee.unbindTexture()},this.copyTextureToTexture3D=function(ue,Re,Xe,Fe,Ve=0){const bt=ue.max.x-ue.min.x,Yt=ue.max.y-ue.min.y,Jt=ue.max.z-ue.min.z,fi=_t.convert(Fe.format),Ei=_t.convert(Fe.type);let Li;if(Fe.isData3DTexture)Ce.setTexture3D(Fe,0),Li=G.TEXTURE_3D;else if(Fe.isDataArrayTexture||Fe.isCompressedArrayTexture)Ce.setTexture2DArray(Fe,0),Li=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,Fe.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fe.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,Fe.unpackAlignment);const $i=G.getParameter(G.UNPACK_ROW_LENGTH),Ui=G.getParameter(G.UNPACK_IMAGE_HEIGHT),zn=G.getParameter(G.UNPACK_SKIP_PIXELS),Ro=G.getParameter(G.UNPACK_SKIP_ROWS),Ml=G.getParameter(G.UNPACK_SKIP_IMAGES),bn=Xe.isCompressedTexture?Xe.mipmaps[Ve]:Xe.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,bn.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,bn.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,ue.min.x),G.pixelStorei(G.UNPACK_SKIP_ROWS,ue.min.y),G.pixelStorei(G.UNPACK_SKIP_IMAGES,ue.min.z),Xe.isDataTexture||Xe.isData3DTexture?G.texSubImage3D(Li,Ve,Re.x,Re.y,Re.z,bt,Yt,Jt,fi,Ei,bn.data):Fe.isCompressedArrayTexture?G.compressedTexSubImage3D(Li,Ve,Re.x,Re.y,Re.z,bt,Yt,Jt,fi,bn.data):G.texSubImage3D(Li,Ve,Re.x,Re.y,Re.z,bt,Yt,Jt,fi,Ei,bn),G.pixelStorei(G.UNPACK_ROW_LENGTH,$i),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Ui),G.pixelStorei(G.UNPACK_SKIP_PIXELS,zn),G.pixelStorei(G.UNPACK_SKIP_ROWS,Ro),G.pixelStorei(G.UNPACK_SKIP_IMAGES,Ml),Ve===0&&Fe.generateMipmaps&&G.generateMipmap(Li),ee.unbindTexture()},this.initTexture=function(ue){ue.isCubeTexture?Ce.setTextureCube(ue,0):ue.isData3DTexture?Ce.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?Ce.setTexture2DArray(ue,0):Ce.setTexture2D(ue,0),ee.unbindTexture()},this.resetState=function(){M=0,P=0,R=null,ee.reset(),ni.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Yc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const i=this.getContext();i.drawingBufferColorSpace=e===ZM?"display-p3":"srgb",i.unpackColorSpace=Ln.workingColorSpace===DO?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class iP{constructor(e,i=25e-5){this.isFogExp2=!0,this.name="",this.color=new ut(e),this.density=i}clone(){return new iP(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class nP{constructor(e,i=1,n=1e3){this.isFog=!0,this.name="",this.color=new ut(e),this.near=i,this.far=n}clone(){return new nP(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class jy extends dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Cs,this.environmentIntensity=1,this.environmentRotation=new Cs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,i){return super.copy(e,i),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const i=super.toJSON(e);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}class $O{constructor(e,i){this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=e!==void 0?e.length/i:0,this.usage=ww,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=xl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return tJ("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,i){this.updateRanges.push({start:e,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,i,n){e*=this.stride,n*=i.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=i.array[n+s];return this}set(e,i=0){return this.array.set(e,i),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(i,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $o=new le;class Md{constructor(e,i,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let i=0,n=this.data.count;i<n;i++)$o.fromBufferAttribute(this,i),$o.applyMatrix4(e),this.setXYZ(i,$o.x,$o.y,$o.z);return this}applyNormalMatrix(e){for(let i=0,n=this.count;i<n;i++)$o.fromBufferAttribute(this,i),$o.applyNormalMatrix(e),this.setXYZ(i,$o.x,$o.y,$o.z);return this}transformDirection(e){for(let i=0,n=this.count;i<n;i++)$o.fromBufferAttribute(this,i),$o.transformDirection(e),this.setXYZ(i,$o.x,$o.y,$o.z);return this}getComponent(e,i){let n=this.array[e*this.data.stride+this.offset+i];return this.normalized&&(n=Go(n,this.array)),n}setComponent(e,i,n){return this.normalized&&(n=zi(n,this.array)),this.data.array[e*this.data.stride+this.offset+i]=n,this}setX(e,i){return this.normalized&&(i=zi(i,this.array)),this.data.array[e*this.data.stride+this.offset]=i,this}setY(e,i){return this.normalized&&(i=zi(i,this.array)),this.data.array[e*this.data.stride+this.offset+1]=i,this}setZ(e,i){return this.normalized&&(i=zi(i,this.array)),this.data.array[e*this.data.stride+this.offset+2]=i,this}setW(e,i){return this.normalized&&(i=zi(i,this.array)),this.data.array[e*this.data.stride+this.offset+3]=i,this}getX(e){let i=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(i=Go(i,this.array)),i}getY(e){let i=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(i=Go(i,this.array)),i}getZ(e){let i=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(i=Go(i,this.array)),i}getW(e){let i=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(i=Go(i,this.array)),i}setXY(e,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=n,this}setXYZ(e,i,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array),s=zi(s,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,i,n,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(i=zi(i,this.array),n=zi(n,this.array),s=zi(s,this.array),o=zi(o,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[s+o])}return new un(new this.array.constructor(i),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Md(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class MN extends Eo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lv;const Ix=new le,hv=new le,cv=new le,uv=new Ge,Rx=new Ge,vJ=new wt,YC=new le,Bx=new le,qC=new le,e7=new Ge,gI=new Ge,t7=new Ge;let yJ=class extends dn{constructor(e=new MN){if(super(),this.isSprite=!0,this.type="Sprite",lv===void 0){lv=new Ai;const i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new $O(i,5);lv.setIndex([0,1,2,0,2,3]),lv.setAttribute("position",new Md(n,3,0,!1)),lv.setAttribute("uv",new Md(n,2,3,!1))}this.geometry=lv,this.material=e,this.center=new Ge(.5,.5)}raycast(e,i){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hv.setFromMatrixScale(this.matrixWorld),vJ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),cv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&hv.multiplyScalar(-cv.z);const n=this.material.rotation;let s,o;n!==0&&(o=Math.cos(n),s=Math.sin(n));const a=this.center;ZC(YC.set(-.5,-.5,0),cv,a,hv,s,o),ZC(Bx.set(.5,-.5,0),cv,a,hv,s,o),ZC(qC.set(.5,.5,0),cv,a,hv,s,o),e7.set(0,0),gI.set(1,0),t7.set(1,1);let l=e.ray.intersectTriangle(YC,Bx,qC,!1,Ix);if(l===null&&(ZC(Bx.set(-.5,.5,0),cv,a,hv,s,o),gI.set(0,1),l=e.ray.intersectTriangle(YC,qC,Bx,!1,Ix),l===null))return;const c=e.ray.origin.distanceTo(Ix);c<e.near||c>e.far||i.push({distance:c,point:Ix.clone(),uv:wa.getInterpolation(Ix,YC,Bx,qC,e7,gI,t7,new Ge),face:null,object:this})}copy(e,i){return super.copy(e,i),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function ZC(r,e,i,n,s,o){uv.subVectors(r,i).addScalar(.5).multiply(n),s!==void 0?(Rx.x=o*uv.x-s*uv.y,Rx.y=s*uv.x+o*uv.y):Rx.copy(uv),r.copy(e),r.x+=Rx.x,r.y+=Rx.y,r.applyMatrix4(vJ)}const KC=new le,i7=new le;class _J extends dn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const i=e.levels;for(let n=0,s=i.length;n<s;n++){const o=i[n];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,i=0,n=0){i=Math.abs(i);const s=this.levels;let o;for(o=0;o<s.length&&!(i<s[o].distance);o++);return s.splice(o,0,{distance:i,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const i=this.levels;if(i.length>0){let n,s;for(n=1,s=i.length;n<s;n++){let o=i[n].distance;if(i[n].object.visible&&(o-=o*i[n].hysteresis),e<o)break}return i[n-1].object}return null}raycast(e,i){if(this.levels.length>0){KC.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(KC);this.getObjectForDistance(s).raycast(e,i)}}update(e){const i=this.levels;if(i.length>1){KC.setFromMatrixPosition(e.matrixWorld),i7.setFromMatrixPosition(this.matrixWorld);const n=KC.distanceTo(i7)/e.zoom;i[0].object.visible=!0;let s,o;for(s=1,o=i.length;s<o;s++){let a=i[s].distance;if(i[s].object.visible&&(a-=a*i[s].hysteresis),n>=a)i[s-1].object.visible=!1,i[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<o;s++)i[s].object.visible=!1}}toJSON(e){const i=super.toJSON(e);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];const n=this.levels;for(let s=0,o=n.length;s<o;s++){const a=n[s];i.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return i}}const n7=new le,r7=new ji,s7=new ji,uPe=new le,o7=new wt,JC=new le,vI=new oo,a7=new wt,yI=new f0;class PN extends Un{constructor(e,i){super(e,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=C4,this.bindMatrix=new wt,this.bindMatrixInverse=new wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new so),this.boundingBox.makeEmpty();const i=e.getAttribute("position");for(let n=0;n<i.count;n++)this.getVertexPosition(n,JC),this.boundingBox.expandByPoint(JC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new oo),this.boundingSphere.makeEmpty();const i=e.getAttribute("position");for(let n=0;n<i.count;n++)this.getVertexPosition(n,JC),this.boundingSphere.expandByPoint(JC)}copy(e,i){return super.copy(e,i),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,i){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vI.copy(this.boundingSphere),vI.applyMatrix4(s),e.ray.intersectsSphere(vI)!==!1&&(a7.copy(s).invert(),yI.copy(e.ray).applyMatrix4(a7),!(this.boundingBox!==null&&yI.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,i,yI)))}getVertexPosition(e,i){return super.getVertexPosition(e,i),this.applyBoneTransform(e,i),i}bind(e,i){this.skeleton=e,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ji,i=this.geometry.attributes.skinWeight;for(let n=0,s=i.count;n<s;n++){e.fromBufferAttribute(i,n);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),i.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===C4?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===PK?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,i){const n=this.skeleton,s=this.geometry;r7.fromBufferAttribute(s.attributes.skinIndex,e),s7.fromBufferAttribute(s.attributes.skinWeight,e),n7.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let o=0;o<4;o++){const a=s7.getComponent(o);if(a!==0){const l=r7.getComponent(o);o7.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),i.addScaledVector(uPe.copy(n7).applyMatrix4(o7),a)}}return i.applyMatrix4(this.bindMatrixInverse)}}class Cw extends dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class fp extends Xr{constructor(e=null,i=1,n=1,s,o,a,l,c,u=Ss,d=Ss,p,m){super(null,a,l,c,u,d,s,o,p,m),this.isDataTexture=!0,this.image={data:e,width:i,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const l7=new wt,dPe=new wt;class UO{constructor(e=[],i=[]){this.uuid=xl(),this.bones=e.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),i.length===0)this.calculateInverses();else if(e.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,i=this.bones.length;e<i;e++){const n=new wt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,i=this.bones.length;e<i;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,i=this.bones.length;e<i;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,i=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let o=0,a=e.length;o<a;o++){const l=e[o]?e[o].matrixWorld:dPe;l7.multiplyMatrices(l,i[o]),l7.toArray(n,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new UO(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const i=new Float32Array(e*e*4);i.set(this.boneMatrices);const n=new fp(i,e,e,Ca,rh);return n.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=n,this}getBoneByName(e){for(let i=0,n=this.bones.length;i<n;i++){const s=this.bones[i];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,i){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const o=e.bones[n];let a=i[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new Cw),this.bones.push(a),this.boneInverses.push(new wt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const i=this.bones,n=this.boneInverses;for(let s=0,o=i.length;s<o;s++){const a=i[s];e.bones.push(a.uuid);const l=n[s];e.boneInverses.push(l.toArray())}return e}}class Yy extends un{constructor(e,i,n,s=1){super(e,i,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const dv=new wt,h7=new wt,e2=[],c7=new so,fPe=new wt,Dx=new Un,Lx=new oo;class xJ extends Un{constructor(e,i,n){super(e,i),this.isInstancedMesh=!0,this.instanceMatrix=new Yy(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,fPe)}computeBoundingBox(){const e=this.geometry,i=this.count;this.boundingBox===null&&(this.boundingBox=new so),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<i;n++)this.getMatrixAt(n,dv),c7.copy(e.boundingBox).applyMatrix4(dv),this.boundingBox.union(c7)}computeBoundingSphere(){const e=this.geometry,i=this.count;this.boundingSphere===null&&(this.boundingSphere=new oo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<i;n++)this.getMatrixAt(n,dv),Lx.copy(e.boundingSphere).applyMatrix4(dv),this.boundingSphere.union(Lx)}copy(e,i){return super.copy(e,i),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,i){i.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,i){i.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,i){const n=i.morphTargetInfluences,s=this.morphTexture.source.data.data,o=n.length+1,a=e*o+1;for(let l=0;l<n.length;l++)n[l]=s[a+l]}raycast(e,i){const n=this.matrixWorld,s=this.count;if(Dx.geometry=this.geometry,Dx.material=this.material,Dx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Lx.copy(this.boundingSphere),Lx.applyMatrix4(n),e.ray.intersectsSphere(Lx)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,dv),h7.multiplyMatrices(n,dv),Dx.matrixWorld=h7,Dx.raycast(e,e2);for(let a=0,l=e2.length;a<l;a++){const c=e2[a];c.instanceId=o,c.object=this,i.push(c)}e2.length=0}}setColorAt(e,i){this.instanceColor===null&&(this.instanceColor=new Yy(new Float32Array(this.instanceMatrix.count*3),3)),i.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,i){i.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,i){const n=i.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new fp(new Float32Array(s*this.count),s,this.count,gN,rh));const o=this.morphTexture.source.data.data;let a=0;for(let u=0;u<n.length;u++)a+=n[u];const l=this.geometry.morphTargetsRelative?1:1-a,c=s*e;o[c]=l,o.set(n,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function pPe(r,e){return r.z-e.z}function mPe(r,e){return e.z-r.z}class gPe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,i){const n=this.pool,s=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const o=n[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=i}reset(){this.list.length=0,this.index=0}}const fv="batchId",wf=new wt,u7=new wt,vPe=new wt,d7=new wt,_I=new FO,t2=new so,Sm=new oo,Nx=new le,xI=new gPe,mo=new Un,i2=[];function yPe(r,e,i=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const s=r.count;for(let o=0;o<s;o++)for(let a=0;a<n;a++)e.setComponent(o+i,a,r.getComponent(o,a))}else e.array.set(r.array,i*n);e.needsUpdate=!0}class bJ extends Un{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,i,n=i*2,s){super(new Ai,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=i,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const i=new Float32Array(e*e*4),n=new fp(i,e,e,Ca,rh);this._matricesTexture=n}_initializeGeometry(e){const i=this.geometry,n=this._maxVertexCount,s=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in e.attributes){const c=e.getAttribute(l),{array:u,itemSize:d,normalized:p}=c,m=new u.constructor(n*d),g=new un(m,d,p);i.setAttribute(l,g)}if(e.getIndex()!==null){const l=n>65536?new Uint32Array(o):new Uint16Array(o);i.setIndex(new un(l,1))}const a=s>65536?new Uint32Array(n):new Uint16Array(n);i.setAttribute(fv,new un(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(fv))throw new Error(`BatchedMesh: Geometry cannot use attribute "${fv}"`);const i=this.geometry;if(!!e.getIndex()!=!!i.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in i.attributes){if(n===fv)continue;if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),o=i.getAttribute(n);if(s.itemSize!==o.itemSize||s.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new so);const e=this._geometryCount,i=this.boundingBox,n=this._active;i.makeEmpty();for(let s=0;s<e;s++)n[s]!==!1&&(this.getMatrixAt(s,wf),this.getBoundingBoxAt(s,t2).applyMatrix4(wf),i.union(t2))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oo);const e=this._geometryCount,i=this.boundingSphere,n=this._active;i.makeEmpty();for(let s=0;s<e;s++)n[s]!==!1&&(this.getMatrixAt(s,wf),this.getBoundingSphereAt(s,Sm).applyMatrix4(wf),i.union(Sm))}addGeometry(e,i=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const a=this._reservedRanges,l=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(o=a[a.length-1]),i===-1?s.vertexCount=e.getAttribute("position").count:s.vertexCount=i,o===null?s.vertexStart=0:s.vertexStart=o.vertexStart+o.vertexCount;const u=e.getIndex(),d=u!==null;if(d&&(n===-1?s.indexCount=u.count:s.indexCount=n,o===null?s.indexStart=0:s.indexStart=o.indexStart+o.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,m=this._active,g=this._matricesTexture,y=this._matricesTexture.image.data;p.push(!0),m.push(!0);const _=this._geometryCount;this._geometryCount++,vPe.toArray(y,_*16),g.needsUpdate=!0,a.push(s),l.push({start:d?s.indexStart:s.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new so,sphereInitialized:!1,sphere:new oo});const x=this.geometry.getAttribute(fv);for(let O=0;O<s.vertexCount;O++)x.setX(s.vertexStart+O,_);return x.needsUpdate=!0,this.setGeometryAt(_,e),_}setGeometryAt(e,i){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(i);const n=this.geometry,s=n.getIndex()!==null,o=n.getIndex(),a=i.getIndex(),l=this._reservedRanges[e];if(s&&a.count>l.indexCount||i.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,u=l.vertexCount;for(const g in n.attributes){if(g===fv)continue;const y=i.getAttribute(g),_=n.getAttribute(g);yPe(y,_,c);const x=y.itemSize;for(let O=y.count,S=u;O<S;O++){const w=c+O;for(let C=0;C<x;C++)_.setComponent(w,C,0)}_.needsUpdate=!0,_.addUpdateRange(c*x,u*x)}if(s){const g=l.indexStart;for(let y=0;y<a.count;y++)o.setX(g+y,c+a.getX(y));for(let y=a.count,_=l.indexCount;y<_;y++)o.setX(g+y,c);o.needsUpdate=!0,o.addUpdateRange(g,l.indexCount)}const d=this._bounds[e];i.boundingBox!==null?(d.box.copy(i.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,i.boundingSphere!==null?(d.sphere.copy(i.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const p=this._drawRanges[e],m=i.getAttribute("position");return p.count=s?a.count:m.count,this._visibilityChanged=!0,e}deleteGeometry(e){const i=this._active;return e>=i.length||i[e]===!1?this:(i[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,i){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=i,e}getBoundingBoxAt(e,i){if(this._active[e]===!1)return null;const s=this._bounds[e],o=s.box,a=this.geometry;if(s.boxInitialized===!1){o.makeEmpty();const l=a.index,c=a.attributes.position,u=this._drawRanges[e];for(let d=u.start,p=u.start+u.count;d<p;d++){let m=d;l&&(m=l.getX(m)),o.expandByPoint(Nx.fromBufferAttribute(c,m))}s.boxInitialized=!0}return i.copy(o),i}getBoundingSphereAt(e,i){if(this._active[e]===!1)return null;const s=this._bounds[e],o=s.sphere,a=this.geometry;if(s.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,t2),t2.getCenter(o.center);const l=a.index,c=a.attributes.position,u=this._drawRanges[e];let d=0;for(let p=u.start,m=u.start+u.count;p<m;p++){let g=p;l&&(g=l.getX(g)),Nx.fromBufferAttribute(c,g),d=Math.max(d,o.center.distanceToSquared(Nx))}o.radius=Math.sqrt(d),s.sphereInitialized=!0}return i.copy(o),i}setMatrixAt(e,i){const n=this._active,s=this._matricesTexture,o=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||n[e]===!1?this:(i.toArray(o,e*16),s.needsUpdate=!0,this)}getMatrixAt(e,i){const n=this._active,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||n[e]===!1?null:i.fromArray(s,e*16)}setVisibleAt(e,i){const n=this._visibility,s=this._active,o=this._geometryCount;return e>=o||s[e]===!1||n[e]===i?this:(n[e]=i,this._visibilityChanged=!0,this)}getVisibleAt(e){const i=this._visibility,n=this._active,s=this._geometryCount;return e>=s||n[e]===!1?!1:i[e]}raycast(e,i){const n=this._visibility,s=this._active,o=this._drawRanges,a=this._geometryCount,l=this.matrixWorld,c=this.geometry;mo.material=this.material,mo.geometry.index=c.index,mo.geometry.attributes=c.attributes,mo.geometry.boundingBox===null&&(mo.geometry.boundingBox=new so),mo.geometry.boundingSphere===null&&(mo.geometry.boundingSphere=new oo);for(let u=0;u<a;u++){if(!n[u]||!s[u])continue;const d=o[u];mo.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(u,mo.matrixWorld).premultiply(l),this.getBoundingBoxAt(u,mo.geometry.boundingBox),this.getBoundingSphereAt(u,mo.geometry.boundingSphere),mo.raycast(e,i2);for(let p=0,m=i2.length;p<m;p++){const g=i2[p];g.object=this,g.batchId=u,i.push(g)}i2.length=0}mo.material=null,mo.geometry.index=null,mo.geometry.attributes={},mo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(i=>({...i})),this._reservedRanges=e._reservedRanges.map(i=>({...i})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(i=>({boxInitialized:i.boxInitialized,box:i.box.clone(),sphereInitialized:i.sphereInitialized,sphere:i.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,i,n,s,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._active,u=this._visibility,d=this._multiDrawStarts,p=this._multiDrawCounts,m=this._drawRanges,g=this.perObjectFrustumCulled;g&&(d7.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),_I.setFromProjectionMatrix(d7,e.coordinateSystem));let y=0;if(this.sortObjects){u7.copy(this.matrixWorld).invert(),Nx.setFromMatrixPosition(n.matrixWorld).applyMatrix4(u7);for(let O=0,S=u.length;O<S;O++)if(u[O]&&c[O]){this.getMatrixAt(O,wf),this.getBoundingSphereAt(O,Sm).applyMatrix4(wf);let w=!1;if(g&&(w=!_I.intersectsSphere(Sm)),!w){const C=Nx.distanceTo(Sm.center);xI.push(m[O],C)}}const _=xI.list,x=this.customSort;x===null?_.sort(o.transparent?mPe:pPe):x.call(this,_,n);for(let O=0,S=_.length;O<S;O++){const w=_[O];d[y]=w.start*l,p[y]=w.count,y++}xI.reset()}else for(let _=0,x=u.length;_<x;_++)if(u[_]&&c[_]){let O=!1;if(g&&(this.getMatrixAt(_,wf),this.getBoundingSphereAt(_,Sm).applyMatrix4(wf),O=!_I.intersectsSphere(Sm)),!O){const S=m[_];d[y]=S.start*l,p[y]=S.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,i,n,s,o,a){this.onBeforeRender(e,null,s,o,a)}}class Mo extends Eo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const uE=new le,dE=new le,f7=new wt,Vx=new f0,n2=new oo,bI=new le,p7=new le;let Pd=class extends dn{constructor(e=new Ai,i=new Mo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const i=e.attributes.position,n=[0];for(let s=1,o=i.count;s<o;s++)uE.fromBufferAttribute(i,s-1),dE.fromBufferAttribute(i,s),n[s]=n[s-1],n[s]+=uE.distanceTo(dE);e.setAttribute("lineDistance",new $t(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,i){const n=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),n2.copy(n.boundingSphere),n2.applyMatrix4(s),n2.radius+=o,e.ray.intersectsSphere(n2)===!1)return;f7.copy(s).invert(),Vx.copy(e.ray).applyMatrix4(f7);const l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,d=n.index,m=n.attributes.position;if(d!==null){const g=Math.max(0,a.start),y=Math.min(d.count,a.start+a.count);for(let _=g,x=y-1;_<x;_+=u){const O=d.getX(_),S=d.getX(_+1),w=r2(this,e,Vx,c,O,S);w&&i.push(w)}if(this.isLineLoop){const _=d.getX(y-1),x=d.getX(g),O=r2(this,e,Vx,c,_,x);O&&i.push(O)}}else{const g=Math.max(0,a.start),y=Math.min(m.count,a.start+a.count);for(let _=g,x=y-1;_<x;_+=u){const O=r2(this,e,Vx,c,_,_+1);O&&i.push(O)}if(this.isLineLoop){const _=r2(this,e,Vx,c,y-1,g);_&&i.push(_)}}}updateMorphTargets(){const i=this.geometry.morphAttributes,n=Object.keys(i);if(n.length>0){const s=i[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const l=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}};function r2(r,e,i,n,s,o){const a=r.geometry.attributes.position;if(uE.fromBufferAttribute(a,s),dE.fromBufferAttribute(a,o),i.distanceSqToSegment(uE,dE,bI,p7)>n)return;bI.applyMatrix4(r.matrixWorld);const c=e.ray.origin.distanceTo(bI);if(!(c<e.near||c>e.far))return{distance:c,point:p7.clone().applyMatrix4(r.matrixWorld),index:s,face:null,faceIndex:null,object:r}}const m7=new le,g7=new le;class _u extends Pd{constructor(e,i){super(e,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const i=e.attributes.position,n=[];for(let s=0,o=i.count;s<o;s+=2)m7.fromBufferAttribute(i,s),g7.fromBufferAttribute(i,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+m7.distanceTo(g7);e.setAttribute("lineDistance",new $t(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wJ extends Pd{constructor(e,i){super(e,i),this.isLineLoop=!0,this.type="LineLoop"}}class kN extends Eo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const v7=new wt,i5=new f0,s2=new oo,o2=new le;class OJ extends dn{constructor(e=new Ai,i=new kN){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,i){const n=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),s2.copy(n.boundingSphere),s2.applyMatrix4(s),s2.radius+=o,e.ray.intersectsSphere(s2)===!1)return;v7.copy(s).invert(),i5.copy(e.ray).applyMatrix4(v7);const l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=n.index,p=n.attributes.position;if(u!==null){const m=Math.max(0,a.start),g=Math.min(u.count,a.start+a.count);for(let y=m,_=g;y<_;y++){const x=u.getX(y);o2.fromBufferAttribute(p,x),y7(o2,x,c,s,e,i,this)}}else{const m=Math.max(0,a.start),g=Math.min(p.count,a.start+a.count);for(let y=m,_=g;y<_;y++)o2.fromBufferAttribute(p,y),y7(o2,y,c,s,e,i,this)}}updateMorphTargets(){const i=this.geometry.morphAttributes,n=Object.keys(i);if(n.length>0){const s=i[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const l=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}}function y7(r,e,i,n,s,o,a){const l=i5.distanceSqToPoint(r);if(l<i){const c=new le;i5.closestPointToPoint(r,c),c.applyMatrix4(n);const u=s.ray.origin.distanceTo(c);if(u<s.near||u>s.far)return;o.push({distance:u,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:a})}}class _Pe extends Xr{constructor(e,i,n,s,o,a,l,c,u){super(e,i,n,s,o,a,l,c,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:qr,this.magFilter=o!==void 0?o:qr,this.generateMipmaps=!1;const d=this;function p(){d.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class n5 extends Xr{constructor(e,i){super({width:e,height:i}),this.isFramebufferTexture=!0,this.magFilter=Ss,this.minFilter=Ss,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ag extends Xr{constructor(e,i,n,s,o,a,l,c,u,d,p,m){super(null,a,l,c,u,d,s,o,p,m),this.isCompressedTexture=!0,this.image={width:i,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xPe extends Ag{constructor(e,i,n,s,o,a){super(e,i,n,o,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=jo}}class bPe extends Ag{constructor(e,i,n){super(void 0,e[0].width,e[0].height,i,n,Ed),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class wPe extends Xr{constructor(e,i,n,s,o,a,l,c,u){super(e,i,n,s,o,a,l,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,i){const n=this.getUtoTmapping(e);return this.getPoint(n,i)}getPoints(e=5){const i=[];for(let n=0;n<=e;n++)i.push(this.getPoint(n/e));return i}getSpacedPoints(e=5){const i=[];for(let n=0;n<=e;n++)i.push(this.getPointAt(n/e));return i}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const i=[];let n,s=this.getPoint(0),o=0;i.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),o+=n.distanceTo(s),i.push(o),s=n;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,i){const n=this.getLengths();let s=0;const o=n.length;let a;i?a=i:a=e*n[o-1];let l=0,c=o-1,u;for(;l<=c;)if(s=Math.floor(l+(c-l)/2),u=n[s]-a,u<0)l=s+1;else if(u>0)c=s-1;else{c=s;break}if(s=c,n[s]===a)return s/(o-1);const d=n[s],m=n[s+1]-d,g=(a-d)/m;return(s+g)/(o-1)}getTangent(e,i){let s=e-1e-4,o=e+1e-4;s<0&&(s=0),o>1&&(o=1);const a=this.getPoint(s),l=this.getPoint(o),c=i||(a.isVector2?new Ge:new le);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,i){const n=this.getUtoTmapping(e);return this.getTangent(n,i)}computeFrenetFrames(e,i){const n=new le,s=[],o=[],a=[],l=new le,c=new wt;for(let g=0;g<=e;g++){const y=g/e;s[g]=this.getTangentAt(y,new le)}o[0]=new le,a[0]=new le;let u=Number.MAX_VALUE;const d=Math.abs(s[0].x),p=Math.abs(s[0].y),m=Math.abs(s[0].z);d<=u&&(u=d,n.set(1,0,0)),p<=u&&(u=p,n.set(0,1,0)),m<=u&&n.set(0,0,1),l.crossVectors(s[0],n).normalize(),o[0].crossVectors(s[0],l),a[0].crossVectors(s[0],o[0]);for(let g=1;g<=e;g++){if(o[g]=o[g-1].clone(),a[g]=a[g-1].clone(),l.crossVectors(s[g-1],s[g]),l.length()>Number.EPSILON){l.normalize();const y=Math.acos(Ur(s[g-1].dot(s[g]),-1,1));o[g].applyMatrix4(c.makeRotationAxis(l,y))}a[g].crossVectors(s[g],o[g])}if(i===!0){let g=Math.acos(Ur(o[0].dot(o[e]),-1,1));g/=e,s[0].dot(l.crossVectors(o[0],o[e]))>0&&(g=-g);for(let y=1;y<=e;y++)o[y].applyMatrix4(c.makeRotationAxis(s[y],g*y)),a[y].crossVectors(s[y],o[y])}return{tangents:s,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rP extends xh{constructor(e=0,i=0,n=1,s=1,o=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=i,this.xRadius=n,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,i=new Ge){const n=i,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(a?o=0:o=s),this.aClockwise===!0&&!a&&(o===s?o=-s:o=o-s);const l=this.aStartAngle+e*o;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=c-this.aX,g=u-this.aY;c=m*d-g*p+this.aX,u=m*p+g*d+this.aY}return n.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class SJ extends rP{constructor(e,i,n,s,o,a){super(e,i,n,n,s,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function IN(){let r=0,e=0,i=0,n=0;function s(o,a,l,c){r=o,e=l,i=-3*o+3*a-2*l-c,n=2*o-2*a+l+c}return{initCatmullRom:function(o,a,l,c,u){s(a,l,u*(l-o),u*(c-a))},initNonuniformCatmullRom:function(o,a,l,c,u,d,p){let m=(a-o)/u-(l-o)/(u+d)+(l-a)/d,g=(l-a)/d-(c-a)/(d+p)+(c-l)/p;m*=d,g*=d,s(a,l,m,g)},calc:function(o){const a=o*o,l=a*o;return r+e*o+i*a+n*l}}}const a2=new le,wI=new IN,OI=new IN,SI=new IN;class CJ extends xh{constructor(e=[],i=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=i,this.curveType=n,this.tension=s}getPoint(e,i=new le){const n=i,s=this.points,o=s.length,a=(o-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:c===0&&l===o-1&&(l=o-2,c=1);let u,d;this.closed||l>0?u=s[(l-1)%o]:(a2.subVectors(s[0],s[1]).add(s[0]),u=a2);const p=s[l%o],m=s[(l+1)%o];if(this.closed||l+2<o?d=s[(l+2)%o]:(a2.subVectors(s[o-1],s[o-2]).add(s[o-1]),d=a2),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(p),g),_=Math.pow(p.distanceToSquared(m),g),x=Math.pow(m.distanceToSquared(d),g);_<1e-4&&(_=1),y<1e-4&&(y=_),x<1e-4&&(x=_),wI.initNonuniformCatmullRom(u.x,p.x,m.x,d.x,y,_,x),OI.initNonuniformCatmullRom(u.y,p.y,m.y,d.y,y,_,x),SI.initNonuniformCatmullRom(u.z,p.z,m.z,d.z,y,_,x)}else this.curveType==="catmullrom"&&(wI.initCatmullRom(u.x,p.x,m.x,d.x,this.tension),OI.initCatmullRom(u.y,p.y,m.y,d.y,this.tension),SI.initCatmullRom(u.z,p.z,m.z,d.z,this.tension));return n.set(wI.calc(c),OI.calc(c),SI.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let i=0,n=e.points.length;i<n;i++){const s=e.points[i];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,n=this.points.length;i<n;i++){const s=this.points[i];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,n=e.points.length;i<n;i++){const s=e.points[i];this.points.push(new le().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function _7(r,e,i,n,s){const o=(n-e)*.5,a=(s-i)*.5,l=r*r,c=r*l;return(2*i-2*n+o+a)*c+(-3*i+3*n-2*o-a)*l+o*r+i}function OPe(r,e){const i=1-r;return i*i*e}function SPe(r,e){return 2*(1-r)*r*e}function CPe(r,e){return r*r*e}function Fb(r,e,i,n){return OPe(r,e)+SPe(r,i)+CPe(r,n)}function TPe(r,e){const i=1-r;return i*i*i*e}function APe(r,e){const i=1-r;return 3*i*i*r*e}function EPe(r,e){return 3*(1-r)*r*r*e}function MPe(r,e){return r*r*r*e}function $b(r,e,i,n,s){return TPe(r,e)+APe(r,i)+EPe(r,n)+MPe(r,s)}class RN extends xh{constructor(e=new Ge,i=new Ge,n=new Ge,s=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=i,this.v2=n,this.v3=s}getPoint(e,i=new Ge){const n=i,s=this.v0,o=this.v1,a=this.v2,l=this.v3;return n.set($b(e,s.x,o.x,a.x,l.x),$b(e,s.y,o.y,a.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class TJ extends xh{constructor(e=new le,i=new le,n=new le,s=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=i,this.v2=n,this.v3=s}getPoint(e,i=new le){const n=i,s=this.v0,o=this.v1,a=this.v2,l=this.v3;return n.set($b(e,s.x,o.x,a.x,l.x),$b(e,s.y,o.y,a.y,l.y),$b(e,s.z,o.z,a.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class BN extends xh{constructor(e=new Ge,i=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=i}getPoint(e,i=new Ge){const n=i;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new Ge){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AJ extends xh{constructor(e=new le,i=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=i}getPoint(e,i=new le){const n=i;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i=new le){return i.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,i){return this.getTangent(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sP extends xh{constructor(e=new Ge,i=new Ge,n=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=i,this.v2=n}getPoint(e,i=new Ge){const n=i,s=this.v0,o=this.v1,a=this.v2;return n.set(Fb(e,s.x,o.x,a.x),Fb(e,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DN extends xh{constructor(e=new le,i=new le,n=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=i,this.v2=n}getPoint(e,i=new le){const n=i,s=this.v0,o=this.v1,a=this.v2;return n.set(Fb(e,s.x,o.x,a.x),Fb(e,s.y,o.y,a.y),Fb(e,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LN extends xh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,i=new Ge){const n=i,s=this.points,o=(s.length-1)*e,a=Math.floor(o),l=o-a,c=s[a===0?a:a-1],u=s[a],d=s[a>s.length-2?s.length-1:a+1],p=s[a>s.length-3?s.length-1:a+2];return n.set(_7(l,c.x,u.x,d.x,p.x),_7(l,c.y,u.y,d.y,p.y)),n}copy(e){super.copy(e),this.points=[];for(let i=0,n=e.points.length;i<n;i++){const s=e.points[i];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let i=0,n=this.points.length;i<n;i++){const s=this.points[i];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,n=e.points.length;i<n;i++){const s=e.points[i];this.points.push(new Ge().fromArray(s))}return this}}var fE=Object.freeze({__proto__:null,ArcCurve:SJ,CatmullRomCurve3:CJ,CubicBezierCurve:RN,CubicBezierCurve3:TJ,EllipseCurve:rP,LineCurve:BN,LineCurve3:AJ,QuadraticBezierCurve:sP,QuadraticBezierCurve3:DN,SplineCurve:LN});class EJ extends xh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(i)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new fE[n](i,e))}return this}getPoint(e,i){const n=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=n){const a=s[o]-n,l=this.curves[o],c=l.getLength(),u=c===0?0:1-a/c;return l.getPointAt(u,i)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let i=0;for(let n=0,s=this.curves.length;n<s;n++)i+=this.curves[n].getLength(),e.push(i);return this.cacheLengths=e,e}getSpacedPoints(e=40){const i=[];for(let n=0;n<=e;n++)i.push(this.getPoint(n/e));return this.autoClose&&i.push(i[0]),i}getPoints(e=12){const i=[];let n;for(let s=0,o=this.curves;s<o.length;s++){const a=o[s],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(l);for(let u=0;u<c.length;u++){const d=c[u];n&&n.equals(d)||(i.push(d),n=d)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(e){super.copy(e),this.curves=[];for(let i=0,n=e.curves.length;i<n;i++){const s=e.curves[i];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let i=0,n=this.curves.length;i<n;i++){const s=this.curves[i];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let i=0,n=e.curves.length;i<n;i++){const s=e.curves[i];this.curves.push(new fE[s.type]().fromJSON(s))}return this}}let Tw=class extends EJ{constructor(e){super(),this.type="Path",this.currentPoint=new Ge,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let i=1,n=e.length;i<n;i++)this.lineTo(e[i].x,e[i].y);return this}moveTo(e,i){return this.currentPoint.set(e,i),this}lineTo(e,i){const n=new BN(this.currentPoint.clone(),new Ge(e,i));return this.curves.push(n),this.currentPoint.set(e,i),this}quadraticCurveTo(e,i,n,s){const o=new sP(this.currentPoint.clone(),new Ge(e,i),new Ge(n,s));return this.curves.push(o),this.currentPoint.set(n,s),this}bezierCurveTo(e,i,n,s,o,a){const l=new RN(this.currentPoint.clone(),new Ge(e,i),new Ge(n,s),new Ge(o,a));return this.curves.push(l),this.currentPoint.set(o,a),this}splineThru(e){const i=[this.currentPoint.clone()].concat(e),n=new LN(i);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,i,n,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,i+c,n,s,o,a),this}absarc(e,i,n,s,o,a){return this.absellipse(e,i,n,n,s,o,a),this}ellipse(e,i,n,s,o,a,l,c){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,i+d,n,s,o,a,l,c),this}absellipse(e,i,n,s,o,a,l,c){const u=new rP(e,i,n,s,o,a,l,c);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class zO extends Ai{constructor(e=[new Ge(0,-.5),new Ge(.5,0),new Ge(0,.5)],i=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:i,phiStart:n,phiLength:s},i=Math.floor(i),s=Ur(s,0,Math.PI*2);const o=[],a=[],l=[],c=[],u=[],d=1/i,p=new le,m=new Ge,g=new le,y=new le,_=new le;let x=0,O=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,O=e[S+1].y-e[S].y,g.x=O*1,g.y=-x,g.z=O*0,_.copy(g),g.normalize(),c.push(g.x,g.y,g.z);break;case e.length-1:c.push(_.x,_.y,_.z);break;default:x=e[S+1].x-e[S].x,O=e[S+1].y-e[S].y,g.x=O*1,g.y=-x,g.z=O*0,y.copy(g),g.x+=_.x,g.y+=_.y,g.z+=_.z,g.normalize(),c.push(g.x,g.y,g.z),_.copy(y)}for(let S=0;S<=i;S++){const w=n+S*d*s,C=Math.sin(w),M=Math.cos(w);for(let P=0;P<=e.length-1;P++){p.x=e[P].x*C,p.y=e[P].y,p.z=e[P].x*M,a.push(p.x,p.y,p.z),m.x=S/i,m.y=P/(e.length-1),l.push(m.x,m.y);const R=c[3*P+0]*C,k=c[3*P+1],I=c[3*P+0]*M;u.push(R,k,I)}}for(let S=0;S<i;S++)for(let w=0;w<e.length-1;w++){const C=w+S*e.length,M=C,P=C+e.length,R=C+e.length+1,k=C+1;o.push(M,P,k),o.push(R,k,P)}this.setIndex(o),this.setAttribute("position",new $t(a,3)),this.setAttribute("uv",new $t(l,2)),this.setAttribute("normal",new $t(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zO(e.points,e.segments,e.phiStart,e.phiLength)}}class oP extends zO{constructor(e=1,i=1,n=4,s=8){const o=new Tw;o.absarc(0,-i/2,e,Math.PI*1.5,0),o.absarc(0,i/2,e,0,Math.PI*.5),super(o.getPoints(n),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:i,capSegments:n,radialSegments:s}}static fromJSON(e){return new oP(e.radius,e.length,e.capSegments,e.radialSegments)}}class aP extends Ai{constructor(e=1,i=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:i,thetaStart:n,thetaLength:s},i=Math.max(3,i);const o=[],a=[],l=[],c=[],u=new le,d=new Ge;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let p=0,m=3;p<=i;p++,m+=3){const g=n+p/i*s;u.x=e*Math.cos(g),u.y=e*Math.sin(g),a.push(u.x,u.y,u.z),l.push(0,0,1),d.x=(a[m]/e+1)/2,d.y=(a[m+1]/e+1)/2,c.push(d.x,d.y)}for(let p=1;p<=i;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new $t(a,3)),this.setAttribute("normal",new $t(l,3)),this.setAttribute("uv",new $t(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aP(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class k_ extends Ai{constructor(e=1,i=1,n=1,s=32,o=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:i,height:n,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:c};const u=this;s=Math.floor(s),o=Math.floor(o);const d=[],p=[],m=[],g=[];let y=0;const _=[],x=n/2;let O=0;S(),a===!1&&(e>0&&w(!0),i>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new $t(p,3)),this.setAttribute("normal",new $t(m,3)),this.setAttribute("uv",new $t(g,2));function S(){const C=new le,M=new le;let P=0;const R=(i-e)/n;for(let k=0;k<=o;k++){const I=[],A=k/o,D=A*(i-e)+e;for(let V=0;V<=s;V++){const B=V/s,L=B*c+l,F=Math.sin(L),$=Math.cos(L);M.x=D*F,M.y=-A*n+x,M.z=D*$,p.push(M.x,M.y,M.z),C.set(F,R,$).normalize(),m.push(C.x,C.y,C.z),g.push(B,1-A),I.push(y++)}_.push(I)}for(let k=0;k<s;k++)for(let I=0;I<o;I++){const A=_[I][k],D=_[I+1][k],V=_[I+1][k+1],B=_[I][k+1];d.push(A,D,B),d.push(D,V,B),P+=6}u.addGroup(O,P,0),O+=P}function w(C){const M=y,P=new Ge,R=new le;let k=0;const I=C===!0?e:i,A=C===!0?1:-1;for(let V=1;V<=s;V++)p.push(0,x*A,0),m.push(0,A,0),g.push(.5,.5),y++;const D=y;for(let V=0;V<=s;V++){const L=V/s*c+l,F=Math.cos(L),$=Math.sin(L);R.x=I*$,R.y=x*A,R.z=I*F,p.push(R.x,R.y,R.z),m.push(0,A,0),P.x=F*.5+.5,P.y=$*.5*A+.5,g.push(P.x,P.y),y++}for(let V=0;V<s;V++){const B=M+V,L=D+V;C===!0?d.push(L,L+1,B):d.push(L+1,L,B),k+=3}u.addGroup(O,k,C===!0?1:2),O+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lP extends k_{constructor(e=1,i=1,n=32,s=1,o=!1,a=0,l=Math.PI*2){super(0,e,i,n,s,o,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:i,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l}}static fromJSON(e){return new lP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hp extends Ai{constructor(e=[],i=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:i,radius:n,detail:s};const o=[],a=[];l(s),u(n),d(),this.setAttribute("position",new $t(o,3)),this.setAttribute("normal",new $t(o.slice(),3)),this.setAttribute("uv",new $t(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(S){const w=new le,C=new le,M=new le;for(let P=0;P<i.length;P+=3)g(i[P+0],w),g(i[P+1],C),g(i[P+2],M),c(w,C,M,S)}function c(S,w,C,M){const P=M+1,R=[];for(let k=0;k<=P;k++){R[k]=[];const I=S.clone().lerp(C,k/P),A=w.clone().lerp(C,k/P),D=P-k;for(let V=0;V<=D;V++)V===0&&k===P?R[k][V]=I:R[k][V]=I.clone().lerp(A,V/D)}for(let k=0;k<P;k++)for(let I=0;I<2*(P-k)-1;I++){const A=Math.floor(I/2);I%2===0?(m(R[k][A+1]),m(R[k+1][A]),m(R[k][A])):(m(R[k][A+1]),m(R[k+1][A+1]),m(R[k+1][A]))}}function u(S){const w=new le;for(let C=0;C<o.length;C+=3)w.x=o[C+0],w.y=o[C+1],w.z=o[C+2],w.normalize().multiplyScalar(S),o[C+0]=w.x,o[C+1]=w.y,o[C+2]=w.z}function d(){const S=new le;for(let w=0;w<o.length;w+=3){S.x=o[w+0],S.y=o[w+1],S.z=o[w+2];const C=x(S)/2/Math.PI+.5,M=O(S)/Math.PI+.5;a.push(C,1-M)}y(),p()}function p(){for(let S=0;S<a.length;S+=6){const w=a[S+0],C=a[S+2],M=a[S+4],P=Math.max(w,C,M),R=Math.min(w,C,M);P>.9&&R<.1&&(w<.2&&(a[S+0]+=1),C<.2&&(a[S+2]+=1),M<.2&&(a[S+4]+=1))}}function m(S){o.push(S.x,S.y,S.z)}function g(S,w){const C=S*3;w.x=e[C+0],w.y=e[C+1],w.z=e[C+2]}function y(){const S=new le,w=new le,C=new le,M=new le,P=new Ge,R=new Ge,k=new Ge;for(let I=0,A=0;I<o.length;I+=9,A+=6){S.set(o[I+0],o[I+1],o[I+2]),w.set(o[I+3],o[I+4],o[I+5]),C.set(o[I+6],o[I+7],o[I+8]),P.set(a[A+0],a[A+1]),R.set(a[A+2],a[A+3]),k.set(a[A+4],a[A+5]),M.copy(S).add(w).add(C).divideScalar(3);const D=x(M);_(P,A+0,S,D),_(R,A+2,w,D),_(k,A+4,C,D)}}function _(S,w,C,M){M<0&&S.x===1&&(a[w]=S.x-1),C.x===0&&C.z===0&&(a[w]=M/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function O(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hp(e.vertices,e.indices,e.radius,e.details)}}class hP extends Hp{constructor(e=1,i=0){const n=(1+Math.sqrt(5))/2,s=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,e,i),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new hP(e.radius,e.detail)}}const l2=new le,h2=new le,CI=new le,c2=new wa;class MJ extends Ai{constructor(e=null,i=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:i},e!==null){const s=Math.pow(10,4),o=Math.cos(Tg*i),a=e.getIndex(),l=e.getAttribute("position"),c=a?a.count:l.count,u=[0,0,0],d=["a","b","c"],p=new Array(3),m={},g=[];for(let y=0;y<c;y+=3){a?(u[0]=a.getX(y),u[1]=a.getX(y+1),u[2]=a.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:_,b:x,c:O}=c2;if(_.fromBufferAttribute(l,u[0]),x.fromBufferAttribute(l,u[1]),O.fromBufferAttribute(l,u[2]),c2.getNormal(CI),p[0]=`${Math.round(_.x*s)},${Math.round(_.y*s)},${Math.round(_.z*s)}`,p[1]=`${Math.round(x.x*s)},${Math.round(x.y*s)},${Math.round(x.z*s)}`,p[2]=`${Math.round(O.x*s)},${Math.round(O.y*s)},${Math.round(O.z*s)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let S=0;S<3;S++){const w=(S+1)%3,C=p[S],M=p[w],P=c2[d[S]],R=c2[d[w]],k=`${C}_${M}`,I=`${M}_${C}`;I in m&&m[I]?(CI.dot(m[I].normal)<=o&&(g.push(P.x,P.y,P.z),g.push(R.x,R.y,R.z)),m[I]=null):k in m||(m[k]={index0:u[S],index1:u[w],normal:CI.clone()})}}for(const y in m)if(m[y]){const{index0:_,index1:x}=m[y];l2.fromBufferAttribute(l,_),h2.fromBufferAttribute(l,x),g.push(l2.x,l2.y,l2.z),g.push(h2.x,h2.y,h2.z)}this.setAttribute("position",new $t(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Eg=class extends Tw{constructor(e){super(e),this.uuid=xl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const i=[];for(let n=0,s=this.holes.length;n<s;n++)i[n]=this.holes[n].getPoints(e);return i}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let i=0,n=e.holes.length;i<n;i++){const s=e.holes[i];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let i=0,n=this.holes.length;i<n;i++){const s=this.holes[i];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let i=0,n=e.holes.length;i<n;i++){const s=e.holes[i];this.holes.push(new Tw().fromJSON(s))}return this}};const PPe={triangulate:function(r,e,i=2){const n=e&&e.length,s=n?e[0]*i:r.length;let o=PJ(r,0,s,i,!0);const a=[];if(!o||o.next===o.prev)return a;let l,c,u,d,p,m,g;if(n&&(o=DPe(r,e,o,i)),r.length>80*i){l=u=r[0],c=d=r[1];for(let y=i;y<s;y+=i)p=r[y],m=r[y+1],p<l&&(l=p),m<c&&(c=m),p>u&&(u=p),m>d&&(d=m);g=Math.max(u-l,d-c),g=g!==0?32767/g:0}return Aw(o,a,i,l,c,g,0),a}};function PJ(r,e,i,n,s){let o,a;if(s===HPe(r,e,i,n)>0)for(o=e;o<i;o+=n)a=x7(o,r[o],r[o+1],a);else for(o=i-n;o>=e;o-=n)a=x7(o,r[o],r[o+1],a);return a&&cP(a,a.next)&&(Mw(a),a=a.next),a}function qg(r,e){if(!r)return r;e||(e=r);let i=r,n;do if(n=!1,!i.steiner&&(cP(i,i.next)||Er(i.prev,i,i.next)===0)){if(Mw(i),i=e=i.prev,i===i.next)break;n=!0}else i=i.next;while(n||i!==e);return e}function Aw(r,e,i,n,s,o,a){if(!r)return;!a&&o&&$Pe(r,n,s,o);let l=r,c,u;for(;r.prev!==r.next;){if(c=r.prev,u=r.next,o?IPe(r,n,s,o):kPe(r)){e.push(c.i/i|0),e.push(r.i/i|0),e.push(u.i/i|0),Mw(r),r=u.next,l=u.next;continue}if(r=u,r===l){a?a===1?(r=RPe(qg(r),e,i),Aw(r,e,i,n,s,o,2)):a===2&&BPe(r,e,i,n,s,o):Aw(qg(r),e,i,n,s,o,1);break}}}function kPe(r){const e=r.prev,i=r,n=r.next;if(Er(e,i,n)>=0)return!1;const s=e.x,o=i.x,a=n.x,l=e.y,c=i.y,u=n.y,d=s<o?s<a?s:a:o<a?o:a,p=l<c?l<u?l:u:c<u?c:u,m=s>o?s>a?s:a:o>a?o:a,g=l>c?l>u?l:u:c>u?c:u;let y=n.next;for(;y!==e;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&Jv(s,l,o,c,a,u,y.x,y.y)&&Er(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function IPe(r,e,i,n){const s=r.prev,o=r,a=r.next;if(Er(s,o,a)>=0)return!1;const l=s.x,c=o.x,u=a.x,d=s.y,p=o.y,m=a.y,g=l<c?l<u?l:u:c<u?c:u,y=d<p?d<m?d:m:p<m?p:m,_=l>c?l>u?l:u:c>u?c:u,x=d>p?d>m?d:m:p>m?p:m,O=r5(g,y,e,i,n),S=r5(_,x,e,i,n);let w=r.prevZ,C=r.nextZ;for(;w&&w.z>=O&&C&&C.z<=S;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=x&&w!==s&&w!==a&&Jv(l,d,c,p,u,m,w.x,w.y)&&Er(w.prev,w,w.next)>=0||(w=w.prevZ,C.x>=g&&C.x<=_&&C.y>=y&&C.y<=x&&C!==s&&C!==a&&Jv(l,d,c,p,u,m,C.x,C.y)&&Er(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;w&&w.z>=O;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=x&&w!==s&&w!==a&&Jv(l,d,c,p,u,m,w.x,w.y)&&Er(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;C&&C.z<=S;){if(C.x>=g&&C.x<=_&&C.y>=y&&C.y<=x&&C!==s&&C!==a&&Jv(l,d,c,p,u,m,C.x,C.y)&&Er(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function RPe(r,e,i){let n=r;do{const s=n.prev,o=n.next.next;!cP(s,o)&&kJ(s,n,n.next,o)&&Ew(s,o)&&Ew(o,s)&&(e.push(s.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),Mw(n),Mw(n.next),n=r=o),n=n.next}while(n!==r);return qg(n)}function BPe(r,e,i,n,s,o){let a=r;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&XPe(a,l)){let c=IJ(a,l);a=qg(a,a.next),c=qg(c,c.next),Aw(a,e,i,n,s,o,0),Aw(c,e,i,n,s,o,0);return}l=l.next}a=a.next}while(a!==r)}function DPe(r,e,i,n){const s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;o++)l=e[o]*n,c=o<a-1?e[o+1]*n:r.length,u=PJ(r,l,c,n,!1),u===u.next&&(u.steiner=!0),s.push(zPe(u));for(s.sort(LPe),o=0;o<s.length;o++)i=NPe(s[o],i);return i}function LPe(r,e){return r.x-e.x}function NPe(r,e){const i=VPe(r,e);if(!i)return e;const n=IJ(i,r);return qg(n,n.next),qg(i,i.next)}function VPe(r,e){let i=e,n=-1/0,s;const o=r.x,a=r.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const m=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(m<=o&&m>n&&(n=m,s=i.x<i.next.x?i:i.next,m===o))return s}i=i.next}while(i!==e);if(!s)return null;const l=s,c=s.x,u=s.y;let d=1/0,p;i=s;do o>=i.x&&i.x>=c&&o!==i.x&&Jv(a<u?o:n,a,c,u,a<u?n:o,a,i.x,i.y)&&(p=Math.abs(a-i.y)/(o-i.x),Ew(i,r)&&(p<d||p===d&&(i.x>s.x||i.x===s.x&&FPe(s,i)))&&(s=i,d=p)),i=i.next;while(i!==l);return s}function FPe(r,e){return Er(r.prev,r,e.prev)<0&&Er(e.next,r,r.next)<0}function $Pe(r,e,i,n){let s=r;do s.z===0&&(s.z=r5(s.x,s.y,e,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,UPe(s)}function UPe(r){let e,i,n,s,o,a,l,c,u=1;do{for(i=r,r=null,o=null,a=0;i;){for(a++,n=i,l=0,e=0;e<u&&(l++,n=n.nextZ,!!n);e++);for(c=u;l>0||c>0&&n;)l!==0&&(c===0||!n||i.z<=n.z)?(s=i,i=i.nextZ,l--):(s=n,n=n.nextZ,c--),o?o.nextZ=s:r=s,s.prevZ=o,o=s;i=n}o.nextZ=null,u*=2}while(a>1);return r}function r5(r,e,i,n,s){return r=(r-i)*s|0,e=(e-n)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function zPe(r){let e=r,i=r;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==r);return i}function Jv(r,e,i,n,s,o,a,l){return(s-a)*(e-l)>=(r-a)*(o-l)&&(r-a)*(n-l)>=(i-a)*(e-l)&&(i-a)*(o-l)>=(s-a)*(n-l)}function XPe(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!WPe(r,e)&&(Ew(r,e)&&Ew(e,r)&&GPe(r,e)&&(Er(r.prev,r,e.prev)||Er(r,e.prev,e))||cP(r,e)&&Er(r.prev,r,r.next)>0&&Er(e.prev,e,e.next)>0)}function Er(r,e,i){return(e.y-r.y)*(i.x-e.x)-(e.x-r.x)*(i.y-e.y)}function cP(r,e){return r.x===e.x&&r.y===e.y}function kJ(r,e,i,n){const s=d2(Er(r,e,i)),o=d2(Er(r,e,n)),a=d2(Er(i,n,r)),l=d2(Er(i,n,e));return!!(s!==o&&a!==l||s===0&&u2(r,i,e)||o===0&&u2(r,n,e)||a===0&&u2(i,r,n)||l===0&&u2(i,e,n))}function u2(r,e,i){return e.x<=Math.max(r.x,i.x)&&e.x>=Math.min(r.x,i.x)&&e.y<=Math.max(r.y,i.y)&&e.y>=Math.min(r.y,i.y)}function d2(r){return r>0?1:r<0?-1:0}function WPe(r,e){let i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==e.i&&i.next.i!==e.i&&kJ(i,i.next,r,e))return!0;i=i.next}while(i!==r);return!1}function Ew(r,e){return Er(r.prev,r,r.next)<0?Er(r,e,r.next)>=0&&Er(r,r.prev,e)>=0:Er(r,e,r.prev)<0||Er(r,r.next,e)<0}function GPe(r,e){let i=r,n=!1;const s=(r.x+e.x)/2,o=(r.y+e.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&s<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==r);return n}function IJ(r,e){const i=new s5(r.i,r.x,r.y),n=new s5(e.i,e.x,e.y),s=r.next,o=e.prev;return r.next=e,e.prev=r,i.next=s,s.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function x7(r,e,i,n){const s=new s5(r,e,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Mw(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function s5(r,e,i){this.i=r,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function HPe(r,e,i,n){let s=0;for(let o=e,a=i-n;o<i;o+=n)s+=(r[a]-r[o])*(r[o+1]+r[a+1]),a=o;return s}class ru{static area(e){const i=e.length;let n=0;for(let s=i-1,o=0;o<i;s=o++)n+=e[s].x*e[o].y-e[o].x*e[s].y;return n*.5}static isClockWise(e){return ru.area(e)<0}static triangulateShape(e,i){const n=[],s=[],o=[];b7(e),w7(n,e);let a=e.length;i.forEach(b7);for(let c=0;c<i.length;c++)s.push(a),a+=i[c].length,w7(n,i[c]);const l=PPe.triangulate(n,s);for(let c=0;c<l.length;c+=3)o.push(l.slice(c,c+3));return o}}function b7(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function w7(r,e){for(let i=0;i<e.length;i++)r.push(e[i].x),r.push(e[i].y)}class uP extends Ai{constructor(e=new Eg([new Ge(.5,.5),new Ge(-.5,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),i={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:i},e=Array.isArray(e)?e:[e];const n=this,s=[],o=[];for(let l=0,c=e.length;l<c;l++){const u=e[l];a(u)}this.setAttribute("position",new $t(s,3)),this.setAttribute("uv",new $t(o,2)),this.computeVertexNormals();function a(l){const c=[],u=i.curveSegments!==void 0?i.curveSegments:12,d=i.steps!==void 0?i.steps:1,p=i.depth!==void 0?i.depth:1;let m=i.bevelEnabled!==void 0?i.bevelEnabled:!0,g=i.bevelThickness!==void 0?i.bevelThickness:.2,y=i.bevelSize!==void 0?i.bevelSize:g-.1,_=i.bevelOffset!==void 0?i.bevelOffset:0,x=i.bevelSegments!==void 0?i.bevelSegments:3;const O=i.extrudePath,S=i.UVGenerator!==void 0?i.UVGenerator:QPe;let w,C=!1,M,P,R,k;O&&(w=O.getSpacedPoints(d),C=!0,m=!1,M=O.computeFrenetFrames(d,!1),P=new le,R=new le,k=new le),m||(x=0,g=0,y=0,_=0);const I=l.extractPoints(u);let A=I.shape;const D=I.holes;if(!ru.isClockWise(A)){A=A.reverse();for(let he=0,j=D.length;he<j;he++){const ee=D[he];ru.isClockWise(ee)&&(D[he]=ee.reverse())}}const B=ru.triangulateShape(A,D),L=A;for(let he=0,j=D.length;he<j;he++){const ee=D[he];A=A.concat(ee)}function F(he,j,ee){return j||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(j,ee)}const $=A.length,z=B.length;function H(he,j,ee){let de,ve,Ce;const Ie=he.x-j.x,te=he.y-j.y,q=ee.x-he.x,me=ee.y-he.y,ge=Ie*Ie+te*te,Ae=Ie*me-te*q;if(Math.abs(Ae)>Number.EPSILON){const Pe=Math.sqrt(ge),je=Math.sqrt(q*q+me*me),$e=j.x-te/Pe,We=j.y+Ie/Pe,ft=ee.x-me/je,Ze=ee.y+q/je,dt=((ft-$e)*me-(Ze-We)*q)/(Ie*me-te*q);de=$e+Ie*dt-he.x,ve=We+te*dt-he.y;const Ut=de*de+ve*ve;if(Ut<=2)return new Ge(de,ve);Ce=Math.sqrt(Ut/2)}else{let Pe=!1;Ie>Number.EPSILON?q>Number.EPSILON&&(Pe=!0):Ie<-Number.EPSILON?q<-Number.EPSILON&&(Pe=!0):Math.sign(te)===Math.sign(me)&&(Pe=!0),Pe?(de=-te,ve=Ie,Ce=Math.sqrt(ge)):(de=Ie,ve=te,Ce=Math.sqrt(ge/2))}return new Ge(de/Ce,ve/Ce)}const K=[];for(let he=0,j=L.length,ee=j-1,de=he+1;he<j;he++,ee++,de++)ee===j&&(ee=0),de===j&&(de=0),K[he]=H(L[he],L[ee],L[de]);const J=[];let ne,be=K.concat();for(let he=0,j=D.length;he<j;he++){const ee=D[he];ne=[];for(let de=0,ve=ee.length,Ce=ve-1,Ie=de+1;de<ve;de++,Ce++,Ie++)Ce===ve&&(Ce=0),Ie===ve&&(Ie=0),ne[de]=H(ee[de],ee[Ce],ee[Ie]);J.push(ne),be=be.concat(ne)}for(let he=0;he<x;he++){const j=he/x,ee=g*Math.cos(j*Math.PI/2),de=y*Math.sin(j*Math.PI/2)+_;for(let ve=0,Ce=L.length;ve<Ce;ve++){const Ie=F(L[ve],K[ve],de);re(Ie.x,Ie.y,-ee)}for(let ve=0,Ce=D.length;ve<Ce;ve++){const Ie=D[ve];ne=J[ve];for(let te=0,q=Ie.length;te<q;te++){const me=F(Ie[te],ne[te],de);re(me.x,me.y,-ee)}}}const pe=y+_;for(let he=0;he<$;he++){const j=m?F(A[he],be[he],pe):A[he];C?(R.copy(M.normals[0]).multiplyScalar(j.x),P.copy(M.binormals[0]).multiplyScalar(j.y),k.copy(w[0]).add(R).add(P),re(k.x,k.y,k.z)):re(j.x,j.y,0)}for(let he=1;he<=d;he++)for(let j=0;j<$;j++){const ee=m?F(A[j],be[j],pe):A[j];C?(R.copy(M.normals[he]).multiplyScalar(ee.x),P.copy(M.binormals[he]).multiplyScalar(ee.y),k.copy(w[he]).add(R).add(P),re(k.x,k.y,k.z)):re(ee.x,ee.y,p/d*he)}for(let he=x-1;he>=0;he--){const j=he/x,ee=g*Math.cos(j*Math.PI/2),de=y*Math.sin(j*Math.PI/2)+_;for(let ve=0,Ce=L.length;ve<Ce;ve++){const Ie=F(L[ve],K[ve],de);re(Ie.x,Ie.y,p+ee)}for(let ve=0,Ce=D.length;ve<Ce;ve++){const Ie=D[ve];ne=J[ve];for(let te=0,q=Ie.length;te<q;te++){const me=F(Ie[te],ne[te],de);C?re(me.x,me.y+w[d-1].y,w[d-1].x+ee):re(me.x,me.y,p+ee)}}}ae(),ye();function ae(){const he=s.length/3;if(m){let j=0,ee=$*j;for(let de=0;de<z;de++){const ve=B[de];se(ve[2]+ee,ve[1]+ee,ve[0]+ee)}j=d+x*2,ee=$*j;for(let de=0;de<z;de++){const ve=B[de];se(ve[0]+ee,ve[1]+ee,ve[2]+ee)}}else{for(let j=0;j<z;j++){const ee=B[j];se(ee[2],ee[1],ee[0])}for(let j=0;j<z;j++){const ee=B[j];se(ee[0]+$*d,ee[1]+$*d,ee[2]+$*d)}}n.addGroup(he,s.length/3-he,0)}function ye(){const he=s.length/3;let j=0;_e(L,j),j+=L.length;for(let ee=0,de=D.length;ee<de;ee++){const ve=D[ee];_e(ve,j),j+=ve.length}n.addGroup(he,s.length/3-he,1)}function _e(he,j){let ee=he.length;for(;--ee>=0;){const de=ee;let ve=ee-1;ve<0&&(ve=he.length-1);for(let Ce=0,Ie=d+x*2;Ce<Ie;Ce++){const te=$*Ce,q=$*(Ce+1),me=j+de+te,ge=j+ve+te,Ae=j+ve+q,Pe=j+de+q;Q(me,ge,Ae,Pe)}}}function re(he,j,ee){c.push(he),c.push(j),c.push(ee)}function se(he,j,ee){G(he),G(j),G(ee);const de=s.length/3,ve=S.generateTopUV(n,s,de-3,de-2,de-1);ie(ve[0]),ie(ve[1]),ie(ve[2])}function Q(he,j,ee,de){G(he),G(j),G(de),G(j),G(ee),G(de);const ve=s.length/3,Ce=S.generateSideWallUV(n,s,ve-6,ve-3,ve-2,ve-1);ie(Ce[0]),ie(Ce[1]),ie(Ce[3]),ie(Ce[1]),ie(Ce[2]),ie(Ce[3])}function G(he){s.push(c[he*3+0]),s.push(c[he*3+1]),s.push(c[he*3+2])}function ie(he){o.push(he.x),o.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),i=this.parameters.shapes,n=this.parameters.options;return jPe(i,n,e)}static fromJSON(e,i){const n=[];for(let o=0,a=e.shapes.length;o<a;o++){const l=i[e.shapes[o]];n.push(l)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new fE[s.type]().fromJSON(s)),new uP(n,e.options)}}const QPe={generateTopUV:function(r,e,i,n,s){const o=e[i*3],a=e[i*3+1],l=e[n*3],c=e[n*3+1],u=e[s*3],d=e[s*3+1];return[new Ge(o,a),new Ge(l,c),new Ge(u,d)]},generateSideWallUV:function(r,e,i,n,s,o){const a=e[i*3],l=e[i*3+1],c=e[i*3+2],u=e[n*3],d=e[n*3+1],p=e[n*3+2],m=e[s*3],g=e[s*3+1],y=e[s*3+2],_=e[o*3],x=e[o*3+1],O=e[o*3+2];return Math.abs(l-d)<Math.abs(a-u)?[new Ge(a,1-c),new Ge(u,1-p),new Ge(m,1-y),new Ge(_,1-O)]:[new Ge(l,1-c),new Ge(d,1-p),new Ge(g,1-y),new Ge(x,1-O)]}};function jPe(r,e,i){if(i.shapes=[],Array.isArray(r))for(let n=0,s=r.length;n<s;n++){const o=r[n];i.shapes.push(o.uuid)}else i.shapes.push(r.uuid);return i.options=Object.assign({},e),e.extrudePath!==void 0&&(i.options.extrudePath=e.extrudePath.toJSON()),i}class dP extends Hp{constructor(e=1,i=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,i),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new dP(e.radius,e.detail)}}class XO extends Hp{constructor(e=1,i=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,i),this.type="OctahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new XO(e.radius,e.detail)}}class fP extends Ai{constructor(e=.5,i=1,n=32,s=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:i,thetaSegments:n,phiSegments:s,thetaStart:o,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const l=[],c=[],u=[],d=[];let p=e;const m=(i-e)/s,g=new le,y=new Ge;for(let _=0;_<=s;_++){for(let x=0;x<=n;x++){const O=o+x/n*a;g.x=p*Math.cos(O),g.y=p*Math.sin(O),c.push(g.x,g.y,g.z),u.push(0,0,1),y.x=(g.x/i+1)/2,y.y=(g.y/i+1)/2,d.push(y.x,y.y)}p+=m}for(let _=0;_<s;_++){const x=_*(n+1);for(let O=0;O<n;O++){const S=O+x,w=S,C=S+n+1,M=S+n+2,P=S+1;l.push(w,C,P),l.push(C,M,P)}}this.setIndex(l),this.setAttribute("position",new $t(c,3)),this.setAttribute("normal",new $t(u,3)),this.setAttribute("uv",new $t(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fP(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class pP extends Ai{constructor(e=new Eg([new Ge(0,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),i=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:i};const n=[],s=[],o=[],a=[];let l=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(l,c,d),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new $t(s,3)),this.setAttribute("normal",new $t(o,3)),this.setAttribute("uv",new $t(a,2));function u(d){const p=s.length/3,m=d.extractPoints(i);let g=m.shape;const y=m.holes;ru.isClockWise(g)===!1&&(g=g.reverse());for(let x=0,O=y.length;x<O;x++){const S=y[x];ru.isClockWise(S)===!0&&(y[x]=S.reverse())}const _=ru.triangulateShape(g,y);for(let x=0,O=y.length;x<O;x++){const S=y[x];g=g.concat(S)}for(let x=0,O=g.length;x<O;x++){const S=g[x];s.push(S.x,S.y,0),o.push(0,0,1),a.push(S.x,S.y)}for(let x=0,O=_.length;x<O;x++){const S=_[x],w=S[0]+p,C=S[1]+p,M=S[2]+p;n.push(w,C,M),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),i=this.parameters.shapes;return YPe(i,e)}static fromJSON(e,i){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=i[e.shapes[s]];n.push(a)}return new pP(n,e.curveSegments)}}function YPe(r,e){if(e.shapes=[],Array.isArray(r))for(let i=0,n=r.length;i<n;i++){const s=r[i];e.shapes.push(s.uuid)}else e.shapes.push(r.uuid);return e}class WO extends Ai{constructor(e=1,i=32,n=16,s=0,o=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:i,heightSegments:n,phiStart:s,phiLength:o,thetaStart:a,thetaLength:l},i=Math.max(3,Math.floor(i)),n=Math.max(2,Math.floor(n));const c=Math.min(a+l,Math.PI);let u=0;const d=[],p=new le,m=new le,g=[],y=[],_=[],x=[];for(let O=0;O<=n;O++){const S=[],w=O/n;let C=0;O===0&&a===0?C=.5/i:O===n&&c===Math.PI&&(C=-.5/i);for(let M=0;M<=i;M++){const P=M/i;p.x=-e*Math.cos(s+P*o)*Math.sin(a+w*l),p.y=e*Math.cos(a+w*l),p.z=e*Math.sin(s+P*o)*Math.sin(a+w*l),y.push(p.x,p.y,p.z),m.copy(p).normalize(),_.push(m.x,m.y,m.z),x.push(P+C,1-w),S.push(u++)}d.push(S)}for(let O=0;O<n;O++)for(let S=0;S<i;S++){const w=d[O][S+1],C=d[O][S],M=d[O+1][S],P=d[O+1][S+1];(O!==0||a>0)&&g.push(w,C,P),(O!==n-1||c<Math.PI)&&g.push(C,M,P)}this.setIndex(g),this.setAttribute("position",new $t(y,3)),this.setAttribute("normal",new $t(_,3)),this.setAttribute("uv",new $t(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WO(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class mP extends Hp{constructor(e=1,i=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,i),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new mP(e.radius,e.detail)}}class gP extends Ai{constructor(e=1,i=.4,n=12,s=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:i,radialSegments:n,tubularSegments:s,arc:o},n=Math.floor(n),s=Math.floor(s);const a=[],l=[],c=[],u=[],d=new le,p=new le,m=new le;for(let g=0;g<=n;g++)for(let y=0;y<=s;y++){const _=y/s*o,x=g/n*Math.PI*2;p.x=(e+i*Math.cos(x))*Math.cos(_),p.y=(e+i*Math.cos(x))*Math.sin(_),p.z=i*Math.sin(x),l.push(p.x,p.y,p.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),m.subVectors(p,d).normalize(),c.push(m.x,m.y,m.z),u.push(y/s),u.push(g/n)}for(let g=1;g<=n;g++)for(let y=1;y<=s;y++){const _=(s+1)*g+y-1,x=(s+1)*(g-1)+y-1,O=(s+1)*(g-1)+y,S=(s+1)*g+y;a.push(_,x,S),a.push(x,O,S)}this.setIndex(a),this.setAttribute("position",new $t(l,3)),this.setAttribute("normal",new $t(c,3)),this.setAttribute("uv",new $t(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gP(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class vP extends Ai{constructor(e=1,i=.4,n=64,s=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:i,tubularSegments:n,radialSegments:s,p:o,q:a},n=Math.floor(n),s=Math.floor(s);const l=[],c=[],u=[],d=[],p=new le,m=new le,g=new le,y=new le,_=new le,x=new le,O=new le;for(let w=0;w<=n;++w){const C=w/n*o*Math.PI*2;S(C,o,a,e,g),S(C+.01,o,a,e,y),x.subVectors(y,g),O.addVectors(y,g),_.crossVectors(x,O),O.crossVectors(_,x),_.normalize(),O.normalize();for(let M=0;M<=s;++M){const P=M/s*Math.PI*2,R=-i*Math.cos(P),k=i*Math.sin(P);p.x=g.x+(R*O.x+k*_.x),p.y=g.y+(R*O.y+k*_.y),p.z=g.z+(R*O.z+k*_.z),c.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),u.push(m.x,m.y,m.z),d.push(w/n),d.push(M/s)}}for(let w=1;w<=n;w++)for(let C=1;C<=s;C++){const M=(s+1)*(w-1)+(C-1),P=(s+1)*w+(C-1),R=(s+1)*w+C,k=(s+1)*(w-1)+C;l.push(M,P,k),l.push(P,R,k)}this.setIndex(l),this.setAttribute("position",new $t(c,3)),this.setAttribute("normal",new $t(u,3)),this.setAttribute("uv",new $t(d,2));function S(w,C,M,P,R){const k=Math.cos(w),I=Math.sin(w),A=M/C*w,D=Math.cos(A);R.x=P*(2+D)*.5*k,R.y=P*(2+D)*I*.5,R.z=P*Math.sin(A)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vP(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class yP extends Ai{constructor(e=new DN(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),i=64,n=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:i,radius:n,radialSegments:s,closed:o};const a=e.computeFrenetFrames(i,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new le,c=new le,u=new Ge;let d=new le;const p=[],m=[],g=[],y=[];_(),this.setIndex(y),this.setAttribute("position",new $t(p,3)),this.setAttribute("normal",new $t(m,3)),this.setAttribute("uv",new $t(g,2));function _(){for(let w=0;w<i;w++)x(w);x(o===!1?i:0),S(),O()}function x(w){d=e.getPointAt(w/i,d);const C=a.normals[w],M=a.binormals[w];for(let P=0;P<=s;P++){const R=P/s*Math.PI*2,k=Math.sin(R),I=-Math.cos(R);c.x=I*C.x+k*M.x,c.y=I*C.y+k*M.y,c.z=I*C.z+k*M.z,c.normalize(),m.push(c.x,c.y,c.z),l.x=d.x+n*c.x,l.y=d.y+n*c.y,l.z=d.z+n*c.z,p.push(l.x,l.y,l.z)}}function O(){for(let w=1;w<=i;w++)for(let C=1;C<=s;C++){const M=(s+1)*(w-1)+(C-1),P=(s+1)*w+(C-1),R=(s+1)*w+C,k=(s+1)*(w-1)+C;y.push(M,P,k),y.push(P,R,k)}}function S(){for(let w=0;w<=i;w++)for(let C=0;C<=s;C++)u.x=w/i,u.y=C/s,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new yP(new fE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class RJ extends Ai{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const i=[],n=new Set,s=new le,o=new le;if(e.index!==null){const a=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let u=0,d=c.length;u<d;++u){const p=c[u],m=p.start,g=p.count;for(let y=m,_=m+g;y<_;y+=3)for(let x=0;x<3;x++){const O=l.getX(y+x),S=l.getX(y+(x+1)%3);s.fromBufferAttribute(a,O),o.fromBufferAttribute(a,S),O7(s,o,n)===!0&&(i.push(s.x,s.y,s.z),i.push(o.x,o.y,o.z))}}}else{const a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let u=0;u<3;u++){const d=3*l+u,p=3*l+(u+1)%3;s.fromBufferAttribute(a,d),o.fromBufferAttribute(a,p),O7(s,o,n)===!0&&(i.push(s.x,s.y,s.z),i.push(o.x,o.y,o.z))}}this.setAttribute("position",new $t(i,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function O7(r,e,i){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return i.has(n)===!0||i.has(s)===!0?!1:(i.add(n),i.add(s),!0)}var S7=Object.freeze({__proto__:null,BoxGeometry:Gp,CapsuleGeometry:oP,CircleGeometry:aP,ConeGeometry:lP,CylinderGeometry:k_,DodecahedronGeometry:hP,EdgesGeometry:MJ,ExtrudeGeometry:uP,IcosahedronGeometry:dP,LatheGeometry:zO,OctahedronGeometry:XO,PlaneGeometry:M_,PolyhedronGeometry:Hp,RingGeometry:fP,ShapeGeometry:pP,SphereGeometry:WO,TetrahedronGeometry:mP,TorusGeometry:gP,TorusKnotGeometry:vP,TubeGeometry:yP,WireframeGeometry:RJ});class BJ extends Eo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Ub extends ea{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class NN extends Eo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wp,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DJ extends NN{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ur(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ut(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class zb extends Eo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ut(16777215),this.specular=new ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wp,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cs,this.combine=BO,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LJ extends Eo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wp,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class NJ extends Eo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wp,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class VN extends Eo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wp,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cs,this.combine=BO,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VJ extends Eo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wp,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FJ extends Mo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function pg(r,e,i){return!r||!i&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function $J(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function UJ(r){function e(s,o){return r[s]-r[o]}const i=r.length,n=new Array(i);for(let s=0;s!==i;++s)n[s]=s;return n.sort(e),n}function o5(r,e,i){const n=r.length,s=new r.constructor(n);for(let o=0,a=0;a!==n;++o){const l=i[o]*e;for(let c=0;c!==e;++c)s[a++]=r[l+c]}return s}function FN(r,e,i,n){let s=1,o=r[0];for(;o!==void 0&&o[n]===void 0;)o=r[s++];if(o===void 0)return;let a=o[n];if(a!==void 0)if(Array.isArray(a))do a=o[n],a!==void 0&&(e.push(o.time),i.push.apply(i,a)),o=r[s++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[n],a!==void 0&&(e.push(o.time),a.toArray(i,i.length)),o=r[s++];while(o!==void 0);else do a=o[n],a!==void 0&&(e.push(o.time),i.push(a)),o=r[s++];while(o!==void 0)}function qPe(r,e,i,n,s=30){const o=r.clone();o.name=e;const a=[];for(let c=0;c<o.tracks.length;++c){const u=o.tracks[c],d=u.getValueSize(),p=[],m=[];for(let g=0;g<u.times.length;++g){const y=u.times[g]*s;if(!(y<i||y>=n)){p.push(u.times[g]);for(let _=0;_<d;++_)m.push(u.values[g*d+_])}}p.length!==0&&(u.times=pg(p,u.times.constructor),u.values=pg(m,u.values.constructor),a.push(u))}o.tracks=a;let l=1/0;for(let c=0;c<o.tracks.length;++c)l>o.tracks[c].times[0]&&(l=o.tracks[c].times[0]);for(let c=0;c<o.tracks.length;++c)o.tracks[c].shift(-1*l);return o.resetDuration(),o}function ZPe(r,e=0,i=r,n=30){n<=0&&(n=30);const s=i.tracks.length,o=e/n;for(let a=0;a<s;++a){const l=i.tracks[a],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const u=r.tracks.find(function(O){return O.name===l.name&&O.ValueTypeName===c});if(u===void 0)continue;let d=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let m=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const y=l.times.length-1;let _;if(o<=l.times[0]){const O=d,S=p-d;_=l.values.slice(O,S)}else if(o>=l.times[y]){const O=y*p+d,S=O+p-d;_=l.values.slice(O,S)}else{const O=l.createInterpolant(),S=d,w=p-d;O.evaluate(o),_=O.resultBuffer.slice(S,w)}c==="quaternion"&&new ds().fromArray(_).normalize().conjugate().toArray(_);const x=u.times.length;for(let O=0;O<x;++O){const S=O*g+m;if(c==="quaternion")ds.multiplyQuaternionsFlat(u.values,S,_,0,u.values,S);else{const w=g-m*2;for(let C=0;C<w;++C)u.values[S+C]-=_[C]}}}return r.blendMode=xN,r}const KPe={convertArray:pg,isTypedArray:$J,getKeyframeOrder:UJ,sortedArray:o5,flattenJSON:FN,subclip:qPe,makeClipAdditive:ZPe};class GO{constructor(e,i,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new i.constructor(n),this.sampleValues=i,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const i=this.parameterPositions;let n=this._cachedIndex,s=i[n],o=i[n-1];e:{t:{let a;i:{n:if(!(e<s)){for(let l=n+2;;){if(s===void 0){if(e<o)break n;return n=i.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(o=s,s=i[++n],e<s)break t}a=i.length;break i}if(!(e>=o)){const l=i[1];e<l&&(n=2,o=l);for(let c=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(s=o,o=i[--n-1],e>=o)break t}a=n,n=0;break i}break e}for(;n<a;){const l=n+a>>>1;e<i[l]?a=l:n=l+1}if(s=i[n],o=i[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=i.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,s)}return this.interpolate_(n,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const i=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=e*s;for(let a=0;a!==s;++a)i[a]=n[o+a];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zJ extends GO{constructor(e,i,n,s){super(e,i,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ug,endingEnd:ug}}intervalChanged_(e,i,n){const s=this.parameterPositions;let o=e-2,a=e+1,l=s[o],c=s[a];if(l===void 0)switch(this.getSettings_().endingStart){case dg:o=e,l=2*i-n;break;case yw:o=s.length-2,l=i+s[o]-s[o+1];break;default:o=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case dg:a=e,c=2*n-i;break;case yw:a=1,c=n+s[1]-s[0];break;default:a=e-1,c=i}const u=(n-i)*.5,d=this.valueSize;this._weightPrev=u/(i-l),this._weightNext=u/(c-n),this._offsetPrev=o*d,this._offsetNext=a*d}interpolate_(e,i,n,s){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,d=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,y=(n-i)/(s-i),_=y*y,x=_*y,O=-m*x+2*m*_-m*y,S=(1+m)*x+(-1.5-2*m)*_+(-.5+m)*y+1,w=(-1-g)*x+(1.5+g)*_+.5*y,C=g*x-g*_;for(let M=0;M!==l;++M)o[M]=O*a[d+M]+S*a[u+M]+w*a[c+M]+C*a[p+M];return o}}class $N extends GO{constructor(e,i,n,s){super(e,i,n,s)}interpolate_(e,i,n,s){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,d=(n-i)/(s-i),p=1-d;for(let m=0;m!==l;++m)o[m]=a[u+m]*p+a[c+m]*d;return o}}class XJ extends GO{constructor(e,i,n,s){super(e,i,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class fc{constructor(e,i,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=pg(i,this.TimeBufferType),this.values=pg(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const i=e.constructor;let n;if(i.toJSON!==this.toJSON)n=i.toJSON(e);else{n={name:e.name,times:pg(e.times,Array),values:pg(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new XJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $N(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let i;switch(e){case Wy:i=this.InterpolantFactoryMethodDiscrete;break;case Gy:i=this.InterpolantFactoryMethodLinear;break;case uA:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Wy;case this.InterpolantFactoryMethodLinear:return Gy;case this.InterpolantFactoryMethodSmooth:return uA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const i=this.times;for(let n=0,s=i.length;n!==s;++n)i[n]+=e}return this}scale(e){if(e!==1){const i=this.times;for(let n=0,s=i.length;n!==s;++n)i[n]*=e}return this}trim(e,i){const n=this.times,s=n.length;let o=0,a=s-1;for(;o!==s&&n[o]<e;)++o;for(;a!==-1&&n[a]>i;)--a;if(++a,o!==0||a!==s){o>=a&&(a=Math.max(a,1),o=a-1);const l=this.getValueSize();this.times=n.slice(o,a),this.values=this.values.slice(o*l,a*l)}return this}validate(){let e=!0;const i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==o;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),e=!1;break}a=c}if(s!==void 0&&$J(s))for(let l=0,c=s.length;l!==c;++l){const u=s[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),i=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===uA,o=e.length-1;let a=1;for(let l=1;l<o;++l){let c=!1;const u=e[l],d=e[l+1];if(u!==d&&(l!==1||u!==e[0]))if(s)c=!0;else{const p=l*n,m=p-n,g=p+n;for(let y=0;y!==n;++y){const _=i[p+y];if(_!==i[m+y]||_!==i[g+y]){c=!0;break}}}if(c){if(l!==a){e[a]=e[l];const p=l*n,m=a*n;for(let g=0;g!==n;++g)i[m+g]=i[p+g]}++a}}if(o>0){e[a]=e[o];for(let l=o*n,c=a*n,u=0;u!==n;++u)i[c+u]=i[l+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=i.slice(0,a*n)):(this.times=e,this.values=i),this}clone(){const e=this.times.slice(),i=this.values.slice(),n=this.constructor,s=new n(this.name,e,i);return s.createInterpolant=this.createInterpolant,s}}fc.prototype.TimeBufferType=Float32Array;fc.prototype.ValueBufferType=Float32Array;fc.prototype.DefaultInterpolation=Gy;class p0 extends fc{}p0.prototype.ValueTypeName="bool";p0.prototype.ValueBufferType=Array;p0.prototype.DefaultInterpolation=Wy;p0.prototype.InterpolantFactoryMethodLinear=void 0;p0.prototype.InterpolantFactoryMethodSmooth=void 0;class UN extends fc{}UN.prototype.ValueTypeName="color";class qy extends fc{}qy.prototype.ValueTypeName="number";class WJ extends GO{constructor(e,i,n,s){super(e,i,n,s)}interpolate_(e,i,n,s){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(n-i)/(s-i);let u=e*l;for(let d=u+l;u!==d;u+=4)ds.slerpFlat(o,0,a,u-l,a,u,c);return o}}class m0 extends fc{InterpolantFactoryMethodLinear(e){return new WJ(this.times,this.values,this.getValueSize(),e)}}m0.prototype.ValueTypeName="quaternion";m0.prototype.DefaultInterpolation=Gy;m0.prototype.InterpolantFactoryMethodSmooth=void 0;class g0 extends fc{}g0.prototype.ValueTypeName="string";g0.prototype.ValueBufferType=Array;g0.prototype.DefaultInterpolation=Wy;g0.prototype.InterpolantFactoryMethodLinear=void 0;g0.prototype.InterpolantFactoryMethodSmooth=void 0;class Zy extends fc{}Zy.prototype.ValueTypeName="vector";class Ky{constructor(e="",i=-1,n=[],s=qM){this.name=e,this.tracks=n,this.duration=i,this.blendMode=s,this.uuid=xl(),this.duration<0&&this.resetDuration()}static parse(e){const i=[],n=e.tracks,s=1/(e.fps||1);for(let a=0,l=n.length;a!==l;++a)i.push(eke(n[a]).scale(s));const o=new this(e.name,e.duration,i,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const i=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:i,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,a=n.length;o!==a;++o)i.push(fc.toJSON(n[o]));return s}static CreateFromMorphTargetSequence(e,i,n,s){const o=i.length,a=[];for(let l=0;l<o;l++){let c=[],u=[];c.push((l+o-1)%o,l,(l+1)%o),u.push(0,1,0);const d=UJ(c);c=o5(c,1,d),u=o5(u,1,d),!s&&c[0]===0&&(c.push(o),u.push(u[0])),a.push(new qy(".morphTargetInfluences["+i[l].name+"]",c,u).scale(1/n))}return new this(e,-1,a)}static findByName(e,i){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===i)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,i,n){const s={},o=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const u=e[l],d=u.name.match(o);if(d&&d.length>1){const p=d[1];let m=s[p];m||(s[p]=m=[]),m.push(u)}}const a=[];for(const l in s)a.push(this.CreateFromMorphTargetSequence(l,s[l],i,n));return a}static parseAnimation(e,i){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(p,m,g,y,_){if(g.length!==0){const x=[],O=[];FN(g,x,O,y),x.length!==0&&_.push(new p(m,x,O))}},s=[],o=e.name||"default",a=e.fps||30,l=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const m=u[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let y;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(let _=0;_<m[y].morphTargets.length;_++)g[m[y].morphTargets[_]]=-1;for(const _ in g){const x=[],O=[];for(let S=0;S!==m[y].morphTargets.length;++S){const w=m[y];x.push(w.time),O.push(w.morphTarget===_?1:0)}s.push(new qy(".morphTargetInfluence["+_+"]",x,O))}c=g.length*a}else{const g=".bones["+i[p].name+"]";n(Zy,g+".position",m,"pos",s),n(m0,g+".quaternion",m,"rot",s),n(Zy,g+".scale",m,"scl",s)}}return s.length===0?null:new this(o,c,s,l)}resetDuration(){const e=this.tracks;let i=0;for(let n=0,s=e.length;n!==s;++n){const o=this.tracks[n];i=Math.max(i,o.times[o.times.length-1])}return this.duration=i,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let i=0;i<this.tracks.length;i++)e=e&&this.tracks[i].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function JPe(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qy;case"vector":case"vector2":case"vector3":case"vector4":return Zy;case"color":return UN;case"quaternion":return m0;case"bool":case"boolean":return p0;case"string":return g0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function eke(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=JPe(r.type);if(r.times===void 0){const i=[],n=[];FN(r.keys,i,n,"value"),r.times=i,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const ud={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class zN{constructor(e,i,n){const s=this;let o=!1,a=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=n,this.itemStart=function(d){l++,o===!1&&s.onStart!==void 0&&s.onStart(d,a,l),o=!0},this.itemEnd=function(d){a++,s.onProgress!==void 0&&s.onProgress(d,a,l),a===l&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,p){return u.push(d,p),this},this.removeHandler=function(d){const p=u.indexOf(d);return p!==-1&&u.splice(p,2),this},this.getHandler=function(d){for(let p=0,m=u.length;p<m;p+=2){const g=u[p],y=u[p+1];if(g.global&&(g.lastIndex=0),g.test(d))return y}return null}}}const GJ=new zN;let ia=class{constructor(e){this.manager=e!==void 0?e:GJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){const n=this;return new Promise(function(s,o){n.load(e,s,i,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};ia.DEFAULT_MATERIAL_NAME="__DEFAULT";const Vu={};class tke extends Error{constructor(e,i){super(e),this.response=i}}class hu extends ia{constructor(e){super(e)}load(e,i,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=ud.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{i&&i(o),this.manager.itemEnd(e)},0),o;if(Vu[e]!==void 0){Vu[e].push({onLoad:i,onProgress:n,onError:s});return}Vu[e]=[],Vu[e].push({onLoad:i,onProgress:n,onError:s});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Vu[e],p=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),g=m?parseInt(m):0,y=g!==0;let _=0;const x=new ReadableStream({start(O){S();function S(){p.read().then(({done:w,value:C})=>{if(w)O.close();else{_+=C.byteLength;const M=new ProgressEvent("progress",{lengthComputable:y,loaded:_,total:g});for(let P=0,R=d.length;P<R;P++){const k=d[P];k.onProgress&&k.onProgress(M)}O.enqueue(C),S()}})}}});return new Response(x)}else throw new tke(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return u.json();default:if(l===void 0)return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(l),m=p&&p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return u.arrayBuffer().then(y=>g.decode(y))}}}).then(u=>{ud.add(e,u);const d=Vu[e];delete Vu[e];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onLoad&&g.onLoad(u)}}).catch(u=>{const d=Vu[e];if(d===void 0)throw this.manager.itemError(e),u;delete Vu[e];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ike extends ia{constructor(e){super(e)}load(e,i,n,s){const o=this,a=new hu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{i(o.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),o.manager.itemError(e)}},n,s)}parse(e){const i=[];for(let n=0;n<e.length;n++){const s=Ky.parse(e[n]);i.push(s)}return i}}class nke extends ia{constructor(e){super(e)}load(e,i,n,s){const o=this,a=[],l=new Ag,c=new hu(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(o.withCredentials);let u=0;function d(p){c.load(e[p],function(m){const g=o.parse(m,!0);a[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(l.minFilter=qr),l.image=a,l.format=g.format,l.needsUpdate=!0,i&&i(l))},n,s)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)d(p);else c.load(e,function(p){const m=o.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let y=0;y<g;y++){a[y]={mipmaps:[]};for(let _=0;_<m.mipmapCount;_++)a[y].mipmaps.push(m.mipmaps[y*m.mipmapCount+_]),a[y].format=m.format,a[y].width=m.width,a[y].height=m.height}l.image=a}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&&(l.minFilter=qr),l.format=m.format,l.needsUpdate=!0,i&&i(l)},n,s);return l}}class Pw extends ia{constructor(e){super(e)}load(e,i,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=ud.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){i&&i(a),o.manager.itemEnd(e)},0),a;const l=Sw("img");function c(){d(),ud.add(e,this),i&&i(this),o.manager.itemEnd(e)}function u(p){d(),s&&s(p),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),o.manager.itemStart(e),l.src=e,l}}class rke extends ia{constructor(e){super(e)}load(e,i,n,s){const o=new VO;o.colorSpace=al;const a=new Pw(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(u){a.load(e[u],function(d){o.images[u]=d,l++,l===6&&(o.needsUpdate=!0,i&&i(o))},void 0,s)}for(let u=0;u<e.length;++u)c(u);return o}}class ske extends ia{constructor(e){super(e)}load(e,i,n,s){const o=this,a=new fp,l=new hu(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(o.withCredentials),l.load(e,function(c){let u;try{u=o.parse(c)}catch(d){if(s!==void 0)s(d);else{console.error(d);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:jo,a.wrapT=u.wrapT!==void 0?u.wrapT:jo,a.magFilter=u.magFilter!==void 0?u.magFilter:qr,a.minFilter=u.minFilter!==void 0?u.minFilter:qr,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(a.colorSpace=u.colorSpace),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=qh),u.mipmapCount===1&&(a.minFilter=qr),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,i&&i(a,u)},n,s),a}}class _P extends ia{constructor(e){super(e)}load(e,i,n,s){const o=new Xr,a=new Pw(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){o.image=l,o.needsUpdate=!0,i!==void 0&&i(o)},n,s),o}}class Qp extends dn{constructor(e,i=1){super(),this.isLight=!0,this.type="Light",this.color=new ut(e),this.intensity=i}dispose(){}copy(e,i){return super.copy(e,i),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const i=super.toJSON(e);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}}class HJ extends Qp{constructor(e,i,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ut(i)}copy(e,i){return super.copy(e,i),this.groundColor.copy(e.groundColor),this}}const TI=new wt,C7=new le,T7=new le;class XN{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new FO,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new ji(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const i=this.camera,n=this.matrix;C7.setFromMatrixPosition(e.matrixWorld),i.position.copy(C7),T7.setFromMatrixPosition(e.target.matrixWorld),i.lookAt(T7),i.updateMatrixWorld(),TI.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TI),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(TI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oke extends XN{constructor(){super(new $n(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const i=this.camera,n=Hy*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||i.far;(n!==i.fov||s!==i.aspect||o!==i.far)&&(i.fov=n,i.aspect=s,i.far=o,i.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class xP extends Qp{constructor(e,i,n=0,s=Math.PI/3,o=0,a=2){super(e,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.distance=n,this.angle=s,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new oke}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const A7=new wt,Fx=new le,AI=new le;class ake extends XN{constructor(){super(new $n(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new ji(2,1,1,1),new ji(0,1,1,1),new ji(3,1,1,1),new ji(1,1,1,1),new ji(3,0,1,1),new ji(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,i=0){const n=this.camera,s=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),Fx.setFromMatrixPosition(e.matrixWorld),n.position.copy(Fx),AI.copy(n.position),AI.add(this._cubeDirections[i]),n.up.copy(this._cubeUps[i]),n.lookAt(AI),n.updateMatrixWorld(),s.makeTranslation(-Fx.x,-Fx.y,-Fx.z),A7.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(A7)}}class pE extends Qp{constructor(e,i,n=0,s=2){super(e,i),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new ake}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lke extends XN{constructor(){super(new sh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class WN extends Qp{constructor(e,i){super(e,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.shadow=new lke}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class GN extends Qp{constructor(e,i){super(e,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class QJ extends Qp{constructor(e,i,n=10,s=10){super(e,i),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const i=super.toJSON(e);return i.object.width=this.width,i.object.height=this.height,i}}class jJ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let i=0;i<9;i++)this.coefficients[i].copy(e[i]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,i){const n=e.x,s=e.y,o=e.z,a=this.coefficients;return i.copy(a[0]).multiplyScalar(.282095),i.addScaledVector(a[1],.488603*s),i.addScaledVector(a[2],.488603*o),i.addScaledVector(a[3],.488603*n),i.addScaledVector(a[4],1.092548*(n*s)),i.addScaledVector(a[5],1.092548*(s*o)),i.addScaledVector(a[6],.315392*(3*o*o-1)),i.addScaledVector(a[7],1.092548*(n*o)),i.addScaledVector(a[8],.546274*(n*n-s*s)),i}getIrradianceAt(e,i){const n=e.x,s=e.y,o=e.z,a=this.coefficients;return i.copy(a[0]).multiplyScalar(.886227),i.addScaledVector(a[1],2*.511664*s),i.addScaledVector(a[2],2*.511664*o),i.addScaledVector(a[3],2*.511664*n),i.addScaledVector(a[4],2*.429043*n*s),i.addScaledVector(a[5],2*.429043*s*o),i.addScaledVector(a[6],.743125*o*o-.247708),i.addScaledVector(a[7],2*.429043*n*o),i.addScaledVector(a[8],.429043*(n*n-s*s)),i}add(e){for(let i=0;i<9;i++)this.coefficients[i].add(e.coefficients[i]);return this}addScaledSH(e,i){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],i);return this}scale(e){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(e);return this}lerp(e,i){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],i);return this}equals(e){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(e.coefficients[i]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,i=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,i+s*3);return this}toArray(e=[],i=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,i+s*3);return e}static getBasisAt(e,i){const n=e.x,s=e.y,o=e.z;i[0]=.282095,i[1]=.488603*s,i[2]=.488603*o,i[3]=.488603*n,i[4]=1.092548*n*s,i[5]=1.092548*s*o,i[6]=.315392*(3*o*o-1),i[7]=1.092548*n*o,i[8]=.546274*(n*n-s*s)}}class YJ extends Qp{constructor(e=new jJ,i=1){super(void 0,i),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const i=super.toJSON(e);return i.object.sh=this.sh.toArray(),i}}class bP extends ia{constructor(e){super(e),this.textures={}}load(e,i,n,s){const o=this,a=new hu(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{i(o.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),o.manager.itemError(e)}},n,s)}parse(e){const i=this.textures;function n(o){return i[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),i[o]}const s=bP.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const a=e.uniforms[o];switch(s.uniforms[o]={},a.type){case"t":s.uniforms[o].value=n(a.value);break;case"c":s.uniforms[o].value=new ut().setHex(a.value);break;case"v2":s.uniforms[o].value=new Ge().fromArray(a.value);break;case"v3":s.uniforms[o].value=new le().fromArray(a.value);break;case"v4":s.uniforms[o].value=new ji().fromArray(a.value);break;case"m3":s.uniforms[o].value=new Fi().fromArray(a.value);break;case"m4":s.uniforms[o].value=new wt().fromArray(a.value);break;default:s.uniforms[o].value=a.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Ge().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Ge().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const i={ShadowMaterial:BJ,SpriteMaterial:MN,RawShaderMaterial:Ub,ShaderMaterial:ea,PointsMaterial:kN,MeshPhysicalMaterial:DJ,MeshStandardMaterial:NN,MeshPhongMaterial:zb,MeshToonMaterial:LJ,MeshNormalMaterial:NJ,MeshLambertMaterial:VN,MeshDepthMaterial:AN,MeshDistanceMaterial:EN,MeshBasicMaterial:dc,MeshMatcapMaterial:VJ,LineDashedMaterial:FJ,LineBasicMaterial:Mo,Material:Eo};return new i[e]}}class Jy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let i="";for(let n=0,s=e.length;n<s;n++)i+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(e){const i=e.lastIndexOf("/");return i===-1?"./":e.slice(0,i+1)}static resolveURL(e,i){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(e)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:i+e)}}class qJ extends Ai{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ZJ extends ia{constructor(e){super(e)}load(e,i,n,s){const o=this,a=new hu(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(l){try{i(o.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),o.manager.itemError(e)}},n,s)}parse(e){const i={},n={};function s(g,y){if(i[y]!==void 0)return i[y];const x=g.interleavedBuffers[y],O=o(g,x.buffer),S=Zv(x.type,O),w=new $O(S,x.stride);return w.uuid=x.uuid,i[y]=w,w}function o(g,y){if(n[y]!==void 0)return n[y];const x=g.arrayBuffers[y],O=new Uint32Array(x).buffer;return n[y]=O,O}const a=e.isInstancedBufferGeometry?new qJ:new Ai,l=e.data.index;if(l!==void 0){const g=Zv(l.type,l.array);a.setIndex(new un(g,1))}const c=e.data.attributes;for(const g in c){const y=c[g];let _;if(y.isInterleavedBufferAttribute){const x=s(e.data,y.data);_=new Md(x,y.itemSize,y.offset,y.normalized)}else{const x=Zv(y.type,y.array),O=y.isInstancedBufferAttribute?Yy:un;_=new O(x,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),y.usage!==void 0&&_.setUsage(y.usage),a.setAttribute(g,_)}const u=e.data.morphAttributes;if(u)for(const g in u){const y=u[g],_=[];for(let x=0,O=y.length;x<O;x++){const S=y[x];let w;if(S.isInterleavedBufferAttribute){const C=s(e.data,S.data);w=new Md(C,S.itemSize,S.offset,S.normalized)}else{const C=Zv(S.type,S.array);w=new un(C,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),_.push(w)}a.morphAttributes[g]=_}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,y=p.length;g!==y;++g){const _=p[g];a.addGroup(_.start,_.count,_.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new le;m.center!==void 0&&g.fromArray(m.center),a.boundingSphere=new oo(g,m.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class hke extends ia{constructor(e){super(e)}load(e,i,n,s){const o=this,a=this.path===""?Jy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new hu(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(p){s!==void 0&&s(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(u,i)},n,s)}async loadAsync(e,i){const n=this,s=this.path===""?Jy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new hu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(e,i),l=JSON.parse(a),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,i){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),a=this.parseImages(e.images,function(){i!==void 0&&i(u)}),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),u=this.parseObject(e.object,o,c,l,n),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),i!==void 0){let p=!1;for(const m in a)if(a[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&i(u)}return u}async parseAsync(e){const i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),o=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),c}parseShapes(e){const i={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const o=new Eg().fromJSON(e[n]);i[o.uuid]=o}return i}parseSkeletons(e,i){const n={},s={};if(i.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,a=e.length;o<a;o++){const l=new UO().fromJSON(e[o],s);n[l.uuid]=l}return n}parseGeometries(e,i){const n={};if(e!==void 0){const s=new ZJ;for(let o=0,a=e.length;o<a;o++){let l;const c=e[o];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(c);break;default:c.type in S7?l=S7[c.type].fromJSON(c,i):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),n[c.uuid]=l}}return n}parseMaterials(e,i){const n={},s={};if(e!==void 0){const o=new bP;o.setTextures(i);for(let a=0,l=e.length;a<l;a++){const c=e[a];n[c.uuid]===void 0&&(n[c.uuid]=o.parse(c)),s[c.uuid]=n[c.uuid]}}return s}parseAnimations(e){const i={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],o=Ky.parse(s);i[o.uuid]=o}return i}parseImages(e,i){const n=this,s={};let o;function a(c){return n.manager.itemStart(c),o.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const u=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return a(d)}else return c.data?{data:Zv(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new zN(i);o=new Pw(c),o.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const p=e[u],m=p.url;if(Array.isArray(m)){const g=[];for(let y=0,_=m.length;y<_;y++){const x=m[y],O=l(x);O!==null&&(O instanceof HTMLImageElement?g.push(O):g.push(new fp(O.data,O.width,O.height)))}s[p.uuid]=new fg(g)}else{const g=l(p.url);s[p.uuid]=new fg(g)}}}return s}async parseImagesAsync(e){const i=this,n={};let s;async function o(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:i.resourcePath+l;return await s.loadAsync(c)}else return a.data?{data:Zv(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){s=new Pw(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.url;if(Array.isArray(u)){const d=[];for(let p=0,m=u.length;p<m;p++){const g=u[p],y=await o(g);y!==null&&(y instanceof HTMLImageElement?d.push(y):d.push(new fp(y.data,y.width,y.height)))}n[c.uuid]=new fg(d)}else{const d=await o(c.url);n[c.uuid]=new fg(d)}}}return n}parseTextures(e,i){function n(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const s={};if(e!==void 0)for(let o=0,a=e.length;o<a;o++){const l=e[o];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),i[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=i[l.image],u=c.data;let d;Array.isArray(u)?(d=new VO,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new fp:d=new Xr,u&&(d.needsUpdate=!0)),d.source=c,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=n(l.mapping,cke)),l.channel!==void 0&&(d.channel=l.channel),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=n(l.wrap[0],E7),d.wrapT=n(l.wrap[1],E7)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.colorSpace!==void 0&&(d.colorSpace=l.colorSpace),l.minFilter!==void 0&&(d.minFilter=n(l.minFilter,M7)),l.magFilter!==void 0&&(d.magFilter=n(l.magFilter,M7)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(d.compareFunction=l.compareFunction),l.userData!==void 0&&(d.userData=l.userData),s[l.uuid]=d}return s}parseObject(e,i,n,s,o){let a;function l(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),i[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let y=0,_=m.length;y<_;y++){const x=m[y];n[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),g.push(n[x])}return g}return n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),n[m]}}function u(m){return s[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),s[m]}let d,p;switch(e.type){case"Scene":a=new jy,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new ut(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new nP(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new iP(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new $n(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new sh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new GN(e.color,e.intensity);break;case"DirectionalLight":a=new WN(e.color,e.intensity);break;case"PointLight":a=new pE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new QJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new xP(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new HJ(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new YJ().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),p=c(e.material),a=new PN(d,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),p=c(e.material),a=new Un(d,p);break;case"InstancedMesh":d=l(e.geometry),p=c(e.material);const m=e.count,g=e.instanceMatrix,y=e.instanceColor;a=new xJ(d,p,m),a.instanceMatrix=new Yy(new Float32Array(g.array),16),y!==void 0&&(a.instanceColor=new Yy(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":d=l(e.geometry),p=c(e.material),a=new bJ(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=d,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(_=>{const x=new so;x.min.fromArray(_.boxMin),x.max.fromArray(_.boxMax);const O=new oo;return O.radius=_.sphereRadius,O.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:x,sphereInitialized:_.sphereInitialized,sphere:O}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":a=new _J;break;case"Line":a=new Pd(l(e.geometry),c(e.material));break;case"LineLoop":a=new wJ(l(e.geometry),c(e.material));break;case"LineSegments":a=new _u(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new OJ(l(e.geometry),c(e.material));break;case"Sprite":a=new yJ(c(e.material));break;case"Group":a=new cd;break;case"Bone":a=new Cw;break;default:a=new dn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)a.add(this.parseObject(m[g],i,n,s,o))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const y=m[g];a.animations.push(o[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const y=m[g],_=a.getObjectByProperty("uuid",y.object);_!==void 0&&a.addLevel(_,y.distance,y.hysteresis)}}return a}bindSkeletons(e,i){Object.keys(i).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=i[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}}const cke={UVMapping:jM,CubeReflectionMapping:Ed,CubeRefractionMapping:Sp,EquirectangularReflectionMapping:Uy,EquirectangularRefractionMapping:vw,CubeUVReflectionMapping:T_},E7={RepeatWrapping:Cp,ClampToEdgeWrapping:jo,MirroredRepeatWrapping:zy},M7={NearestFilter:Ss,NearestMipmapNearestFilter:YM,NearestMipmapLinearFilter:cg,LinearFilter:qr,LinearMipmapNearestFilter:yy,LinearMipmapLinearFilter:qh};class uke extends ia{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,i,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=ud.get(e);if(a!==void 0){if(o.manager.itemStart(e),a.then){a.then(u=>{i&&i(u),o.manager.itemEnd(e)}).catch(u=>{s&&s(u)});return}return setTimeout(function(){i&&i(a),o.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return ud.add(e,u),i&&i(u),o.manager.itemEnd(e),u}).catch(function(u){s&&s(u),ud.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});ud.add(e,c),o.manager.itemStart(e)}}let f2;class HN{static getContext(){return f2===void 0&&(f2=new(window.AudioContext||window.webkitAudioContext)),f2}static setContext(e){f2=e}}class dke extends ia{constructor(e){super(e)}load(e,i,n,s){const o=this,a=new hu(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const u=c.slice(0);HN.getContext().decodeAudioData(u,function(p){i(p)}).catch(l)}catch(u){l(u)}},n,s);function l(c){s?s(c):console.error(c),o.manager.itemError(e)}}}const P7=new wt,k7=new wt,Cm=new wt;class fke{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new $n,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $n,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const i=this._cache;if(i.focus!==e.focus||i.fov!==e.fov||i.aspect!==e.aspect*this.aspect||i.near!==e.near||i.far!==e.far||i.zoom!==e.zoom||i.eyeSep!==this.eyeSep){i.focus=e.focus,i.fov=e.fov,i.aspect=e.aspect*this.aspect,i.near=e.near,i.far=e.far,i.zoom=e.zoom,i.eyeSep=this.eyeSep,Cm.copy(e.projectionMatrix);const s=i.eyeSep/2,o=s*i.near/i.focus,a=i.near*Math.tan(Tg*i.fov*.5)/i.zoom;let l,c;k7.elements[12]=-s,P7.elements[12]=s,l=-a*i.aspect+o,c=a*i.aspect+o,Cm.elements[0]=2*i.near/(c-l),Cm.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Cm),l=-a*i.aspect-o,c=a*i.aspect-o,Cm.elements[0]=2*i.near/(c-l),Cm.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Cm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(k7),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(P7)}}class QN{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=I7(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=I7();e=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=e}return e}}function I7(){return(typeof performance>"u"?Date:performance).now()}const Tm=new le,R7=new ds,pke=new le,Am=new le;class mke extends dn{constructor(){super(),this.type="AudioListener",this.context=HN.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new QN}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const i=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Tm,R7,pke),Am.set(0,0,-1).applyQuaternion(R7),i.positionX){const s=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(Tm.x,s),i.positionY.linearRampToValueAtTime(Tm.y,s),i.positionZ.linearRampToValueAtTime(Tm.z,s),i.forwardX.linearRampToValueAtTime(Am.x,s),i.forwardY.linearRampToValueAtTime(Am.y,s),i.forwardZ.linearRampToValueAtTime(Am.z,s),i.upX.linearRampToValueAtTime(n.x,s),i.upY.linearRampToValueAtTime(n.y,s),i.upZ.linearRampToValueAtTime(n.z,s)}else i.setPosition(Tm.x,Tm.y,Tm.z),i.setOrientation(Am.x,Am.y,Am.z,n.x,n.y,n.z)}}class KJ extends dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,i=this.filters.length;e<i;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Em=new le,B7=new ds,gke=new le,Mm=new le;class vke extends KJ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,i,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Em,B7,gke),Mm.set(0,0,1).applyQuaternion(B7);const i=this.panner;if(i.positionX){const n=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(Em.x,n),i.positionY.linearRampToValueAtTime(Em.y,n),i.positionZ.linearRampToValueAtTime(Em.z,n),i.orientationX.linearRampToValueAtTime(Mm.x,n),i.orientationY.linearRampToValueAtTime(Mm.y,n),i.orientationZ.linearRampToValueAtTime(Mm.z,n)}else i.setPosition(Em.x,Em.y,Em.z),i.setOrientation(Mm.x,Mm.y,Mm.z)}}class yke{constructor(e,i=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const i=this.getFrequencyData();for(let n=0;n<i.length;n++)e+=i[n];return e/i.length}}class JJ{constructor(e,i,n){this.binding=e,this.valueSize=n;let s,o,a;switch(i){case"quaternion":s=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,i){const n=this.buffer,s=this.valueSize,o=e*s+s;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==s;++l)n[o+l]=n[l];a=i}else{a+=i;const l=i/a;this._mixBufferRegion(n,o,0,l,s)}this.cumulativeWeight=a}accumulateAdditive(e){const i=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const i=this.valueSize,n=this.buffer,s=e*i+i,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const c=i*this._origIndex;this._mixBufferRegion(n,s,c,1-o,i)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*i,1,i);for(let c=i,u=i+i;c!==u;++c)if(n[c]!==n[c+i]){l.setValue(n,s);break}}saveOriginalState(){const e=this.binding,i=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(i,s);for(let o=n,a=s;o!==a;++o)i[o]=i[s+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,i=e+this.valueSize;for(let n=e;n<i;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[i+n]=this.buffer[e+n]}_select(e,i,n,s,o){if(s>=.5)for(let a=0;a!==o;++a)e[i+a]=e[n+a]}_slerp(e,i,n,s){ds.slerpFlat(e,i,e,i,e,n,s)}_slerpAdditive(e,i,n,s,o){const a=this._workIndex*o;ds.multiplyQuaternionsFlat(e,a,e,i,e,n),ds.slerpFlat(e,i,e,i,e,a,s)}_lerp(e,i,n,s,o){const a=1-s;for(let l=0;l!==o;++l){const c=i+l;e[c]=e[c]*a+e[n+l]*s}}_lerpAdditive(e,i,n,s,o){for(let a=0;a!==o;++a){const l=i+a;e[l]=e[l]+e[n+a]*s}}}const jN="\\[\\]\\.:\\/",_ke=new RegExp("["+jN+"]","g"),YN="[^"+jN+"]",xke="[^"+jN.replace("\\.","")+"]",bke=/((?:WC+[\/:])*)/.source.replace("WC",YN),wke=/(WCOD+)?/.source.replace("WCOD",xke),Oke=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YN),Ske=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YN),Cke=new RegExp("^"+bke+wke+Oke+Ske+"$"),Tke=["material","materials","bones","map"];class Ake{constructor(e,i,n){const s=n||Gi.parseTrackName(i);this._targetGroup=e,this._bindings=e.subscribe_(i,s)}getValue(e,i){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,i)}setValue(e,i){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=n.length;s!==o;++s)n[s].setValue(e,i)}bind(){const e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=e.length;i!==n;++i)e[i].bind()}unbind(){const e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=e.length;i!==n;++i)e[i].unbind()}}class Gi{constructor(e,i,n){this.path=i,this.parsedPath=n||Gi.parseTrackName(i),this.node=Gi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,n){return e&&e.isAnimationObjectGroup?new Gi.Composite(e,i,n):new Gi(e,i,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_ke,"")}static parseTrackName(e){const i=Cke.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=n.nodeName.substring(s+1);Tke.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(i);if(n!==void 0)return n}if(e.children){const n=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=n(l.children);if(c)return c}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){const n=this.resolvedProperty;for(let s=0,o=n.length;s!==o;++s)e[i++]=n[s]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){const n=this.resolvedProperty;for(let s=0,o=n.length;s!==o;++s)n[s]=e[i++]}_setValue_array_setNeedsUpdate(e,i){const n=this.resolvedProperty;for(let s=0,o=n.length;s!==o;++s)n[s]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){const n=this.resolvedProperty;for(let s=0,o=n.length;s!==o;++s)n[s]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node;const i=this.parsedPath,n=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(e||(e=Gi.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=i.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[s];if(a===void 0){const u=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gi.Composite=Ake;Gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gi.prototype.GetterByBindingType=[Gi.prototype._getValue_direct,Gi.prototype._getValue_array,Gi.prototype._getValue_arrayElement,Gi.prototype._getValue_toArray];Gi.prototype.SetterByBindingTypeAndVersioning=[[Gi.prototype._setValue_direct,Gi.prototype._setValue_direct_setNeedsUpdate,Gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_array,Gi.prototype._setValue_array_setNeedsUpdate,Gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_arrayElement,Gi.prototype._setValue_arrayElement_setNeedsUpdate,Gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_fromArray,Gi.prototype._setValue_fromArray_setNeedsUpdate,Gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Eke{constructor(){this.isAnimationObjectGroup=!0,this.uuid=xl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){const e=this._objects,i=this._indicesByUUID,n=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length;let l,c=e.length,u=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const m=arguments[d],g=m.uuid;let y=i[g];if(y===void 0){y=c++,i[g]=y,e.push(m);for(let _=0,x=a;_!==x;++_)o[_].push(new Gi(m,n[_],s[_]))}else if(y<u){l=e[y];const _=--u,x=e[_];i[x.uuid]=y,e[y]=x,i[g]=_,e[_]=m;for(let O=0,S=a;O!==S;++O){const w=o[O],C=w[_];let M=w[y];w[y]=C,M===void 0&&(M=new Gi(m,n[O],s[O])),w[_]=M}}else e[y]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,i=this._indicesByUUID,n=this._bindings,s=n.length;let o=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=i[u];if(d!==void 0&&d>=o){const p=o++,m=e[p];i[m.uuid]=d,e[d]=m,i[u]=p,e[p]=c;for(let g=0,y=s;g!==y;++g){const _=n[g],x=_[p],O=_[d];_[d]=x,_[p]=O}}}this.nCachedObjects_=o}uncache(){const e=this._objects,i=this._indicesByUUID,n=this._bindings,s=n.length;let o=this.nCachedObjects_,a=e.length;for(let l=0,c=arguments.length;l!==c;++l){const u=arguments[l],d=u.uuid,p=i[d];if(p!==void 0)if(delete i[d],p<o){const m=--o,g=e[m],y=--a,_=e[y];i[g.uuid]=p,e[p]=g,i[_.uuid]=m,e[m]=_,e.pop();for(let x=0,O=s;x!==O;++x){const S=n[x],w=S[m],C=S[y];S[p]=w,S[m]=C,S.pop()}}else{const m=--a,g=e[m];m>0&&(i[g.uuid]=p),e[p]=g,e.pop();for(let y=0,_=s;y!==_;++y){const x=n[y];x[p]=x[m],x.pop()}}}this.nCachedObjects_=o}subscribe_(e,i){const n=this._bindingsIndicesByPath;let s=n[e];const o=this._bindings;if(s!==void 0)return o[s];const a=this._paths,l=this._parsedPaths,c=this._objects,u=c.length,d=this.nCachedObjects_,p=new Array(u);s=o.length,n[e]=s,a.push(e),l.push(i),o.push(p);for(let m=d,g=c.length;m!==g;++m){const y=c[m];p[m]=new Gi(y,e,i)}return p}unsubscribe_(e){const i=this._bindingsIndicesByPath,n=i[e];if(n!==void 0){const s=this._paths,o=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],u=e[l];i[u]=n,a[n]=c,a.pop(),o[n]=o[l],o.pop(),s[n]=s[l],s.pop()}}}class eee{constructor(e,i,n=null,s=i.blendMode){this._mixer=e,this._clip=i,this._localRoot=n,this.blendMode=s;const o=i.tracks,a=o.length,l=new Array(a),c={endingStart:ug,endingEnd:ug};for(let u=0;u!==a;++u){const d=o[u].createInterpolant(null);l[u]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=UK,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,i){return this.loop=e,this.repetitions=i,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,i,n){if(e.fadeOut(i),this.fadeIn(i),n){const s=this._clip.duration,o=e._clip.duration,a=o/s,l=s/o;e.warp(1,a,i),this.warp(l,1,i)}return this}crossFadeTo(e,i,n){return e.crossFadeFrom(this,i,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,i,n){const s=this._mixer,o=s.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,u=l.sampleValues;return c[0]=o,c[1]=o+n,u[0]=e/a,u[1]=i/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,i,n,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const c=(e-o)*n;c<0||n===0?i=0:(this._startTime=null,i=n*c)}i*=this._updateTimeScale(e);const a=this._updateTime(i),l=this._updateWeight(e);if(l>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case xN:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(a),u[d].accumulateAdditive(l);break;case qM:default:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(a),u[d].accumulate(s,l)}}}_updateWeight(e){let i=0;if(this.enabled){i=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];i*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(e){let i=0;if(!this.paused){i=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];i*=s,e>n.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(e){const i=this._clip.duration,n=this.loop;let s=this.time+e,o=this._loopCount;const a=n===zK;if(e===0)return o===-1?s:a&&(o&1)===1?i-s:s;if(n===$K){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=i)s=i;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=i||s<0){const l=Math.floor(s/i);s-=i*l,o+=Math.abs(l);const c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?i:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(a&&(o&1)===1)return i-s}return s}_setEndings(e,i,n){const s=this._interpolantSettings;n?(s.endingStart=dg,s.endingEnd=dg):(e?s.endingStart=this.zeroSlopeAtStart?dg:ug:s.endingStart=yw,i?s.endingEnd=this.zeroSlopeAtEnd?dg:ug:s.endingEnd=yw)}_scheduleFading(e,i,n){const s=this._mixer,o=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,c[0]=i,l[1]=o+e,c[1]=n,this}}const Mke=new Float32Array(1);class Pke extends yu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,i){const n=e._localRoot||this._root,s=e._clip.tracks,o=s.length,a=e._propertyBindings,l=e._interpolants,c=n.uuid,u=this._bindingsByRootAndName;let d=u[c];d===void 0&&(d={},u[c]=d);for(let p=0;p!==o;++p){const m=s[p],g=m.name;let y=d[g];if(y!==void 0)++y.referenceCount,a[p]=y;else{if(y=a[p],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,c,g));continue}const _=i&&i._propertyBindings[p].binding.parsedPath;y=new JJ(Gi.create(n,g,_),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,c,g),a[p]=y}l[p].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,n)}const i=e._propertyBindings;for(let n=0,s=i.length;n!==s;++n){const o=i[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const i=e._propertyBindings;for(let n=0,s=i.length;n!==s;++n){const o=i[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const i=e._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(e,i,n){const s=this._actions,o=this._actionsByClip;let a=o[i];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[i]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=s.length,s.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const i=this._actions,n=i[i.length-1],s=e._cacheIndex;n._cacheIndex=s,i[s]=n,i.pop(),e._cacheIndex=null;const o=e._clip.uuid,a=this._actionsByClip,l=a[o],c=l.knownActions,u=c[c.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,c[d]=u,c.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],c.length===0&&delete a[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const i=e._propertyBindings;for(let n=0,s=i.length;n!==s;++n){const o=i[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const i=this._actions,n=e._cacheIndex,s=this._nActiveActions++,o=i[s];e._cacheIndex=s,i[s]=e,o._cacheIndex=n,i[n]=o}_takeBackAction(e){const i=this._actions,n=e._cacheIndex,s=--this._nActiveActions,o=i[s];e._cacheIndex=s,i[s]=e,o._cacheIndex=n,i[n]=o}_addInactiveBinding(e,i,n){const s=this._bindingsByRootAndName,o=this._bindings;let a=s[i];a===void 0&&(a={},s[i]=a),a[n]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const i=this._bindings,n=e.binding,s=n.rootNode.uuid,o=n.path,a=this._bindingsByRootAndName,l=a[s],c=i[i.length-1],u=e._cacheIndex;c._cacheIndex=u,i[u]=c,i.pop(),delete l[o],Object.keys(l).length===0&&delete a[s]}_lendBinding(e){const i=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,o=i[s];e._cacheIndex=s,i[s]=e,o._cacheIndex=n,i[n]=o}_takeBackBinding(e){const i=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,o=i[s];e._cacheIndex=s,i[s]=e,o._cacheIndex=n,i[n]=o}_lendControlInterpolant(){const e=this._controlInterpolants,i=this._nActiveControlInterpolants++;let n=e[i];return n===void 0&&(n=new $N(new Float32Array(2),new Float32Array(2),1,Mke),n.__cacheIndex=i,e[i]=n),n}_takeBackControlInterpolant(e){const i=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=i[s];e.__cacheIndex=s,i[s]=e,o.__cacheIndex=n,i[n]=o}clipAction(e,i,n){const s=i||this._root,o=s.uuid;let a=typeof e=="string"?Ky.findByName(s,e):e;const l=a!==null?a.uuid:e,c=this._actionsByClip[l];let u=null;if(n===void 0&&(a!==null?n=a.blendMode:n=qM),c!==void 0){const p=c.actionByRoot[o];if(p!==void 0&&p.blendMode===n)return p;u=c.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const d=new eee(this,a,i,n);return this._bindAction(d,u),this._addInactiveAction(d,l,o),d}existingAction(e,i){const n=i||this._root,s=n.uuid,o=typeof e=="string"?Ky.findByName(n,e):e,a=o?o.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const e=this._actions,i=this._nActiveActions;for(let n=i-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const i=this._actions,n=this._nActiveActions,s=this.time+=e,o=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==n;++u)i[u]._update(s,e,o,a);const l=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)l[u].apply(a);return this}setTime(e){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const i=this._actions,n=e.uuid,s=this._actionsByClip,o=s[n];if(o!==void 0){const a=o.knownActions;for(let l=0,c=a.length;l!==c;++l){const u=a[l];this._deactivateAction(u);const d=u._cacheIndex,p=i[i.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=d,i[d]=p,i.pop(),this._removeInactiveBindingsForAction(u)}delete s[n]}}uncacheRoot(e){const i=e.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,c=l[i];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName,o=s[i];if(o!==void 0)for(const a in o){const l=o[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,i){const n=this.existingAction(e,i);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class wP{constructor(e){this.value=e}clone(){return new wP(this.value.clone===void 0?this.value:this.value.clone())}}let kke=0;class Ike extends yu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:kke++}),this.name="",this.usage=ww,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const i=this.uniforms.indexOf(e);return i!==-1&&this.uniforms.splice(i,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const i=e.uniforms;this.uniforms.length=0;for(let n=0,s=i.length;n<s;n++){const o=Array.isArray(i[n])?i[n]:[i[n]];for(let a=0;a<o.length;a++)this.uniforms.push(o[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Rke extends $O{constructor(e,i,n=1){super(e,i),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const i=super.clone(e);return i.meshPerAttribute=this.meshPerAttribute,i}toJSON(e){const i=super.toJSON(e);return i.isInstancedInterleavedBuffer=!0,i.meshPerAttribute=this.meshPerAttribute,i}}class Bke{constructor(e,i,n,s,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=i,this.itemSize=n,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,i){return this.type=e,this.elementSize=i,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const D7=new wt;class qN{constructor(e,i,n=0,s=1/0){this.ray=new f0(e,i),this.near=n,this.far=s,this.camera=null,this.layers=new JM,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,i){this.ray.set(e,i)}setFromCamera(e,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}setFromXRController(e){return D7.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(D7),this}intersectObject(e,i=!0,n=[]){return a5(e,this,n,i),n.sort(L7),n}intersectObjects(e,i=!0,n=[]){for(let s=0,o=e.length;s<o;s++)a5(e[s],this,n,i);return n.sort(L7),n}}function L7(r,e){return r.distance-e.distance}function a5(r,e,i,n){if(r.layers.test(e.layers)&&r.raycast(e,i),n===!0){const s=r.children;for(let o=0,a=s.length;o<a;o++)a5(s[o],e,i,!0)}}class l5{constructor(e=1,i=0,n=0){return this.radius=e,this.phi=i,this.theta=n,this}set(e,i,n){return this.radius=e,this.phi=i,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,n){return this.radius=Math.sqrt(e*e+i*i+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ur(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Dke{constructor(e=1,i=0,n=0){return this.radius=e,this.theta=i,this.y=n,this}set(e,i,n){return this.radius=e,this.theta=i,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=i,this}clone(){return new this.constructor().copy(this)}}const N7=new Ge;class tee{constructor(e=new Ge(1/0,1/0),i=new Ge(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromPoints(e){this.makeEmpty();for(let i=0,n=e.length;i<n;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){const n=N7.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,N7).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const V7=new le,p2=new le;class iee{constructor(e=new le,i=new le){this.start=e,this.end=i}set(e,i){return this.start.copy(e),this.end.copy(i),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,i){return this.delta(i).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,i){V7.subVectors(e,this.start),p2.subVectors(this.end,this.start);const n=p2.dot(p2);let o=p2.dot(V7)/n;return i&&(o=Ur(o,0,1)),o}closestPointToPoint(e,i,n){const s=this.closestPointToPointParameter(e,i);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const F7=new le;class Lke extends dn{constructor(e,i){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=i,this.type="SpotLightHelper";const n=new Ai,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,c=32;a<c;a++,l++){const u=a/c*Math.PI*2,d=l/c*Math.PI*2;s.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new $t(s,3));const o=new Mo({fog:!1,toneMapped:!1});this.cone=new _u(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),F7.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(F7),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Of=new le,m2=new wt,EI=new wt;class Nke extends _u{constructor(e){const i=nee(e),n=new Ai,s=[],o=[],a=new ut(0,0,1),l=new ut(0,1,0);for(let u=0;u<i.length;u++){const d=i[u];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(a.r,a.g,a.b),o.push(l.r,l.g,l.b))}n.setAttribute("position",new $t(s,3)),n.setAttribute("color",new $t(o,3));const c=new Mo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=i,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const i=this.bones,n=this.geometry,s=n.getAttribute("position");EI.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<i.length;o++){const l=i[o];l.parent&&l.parent.isBone&&(m2.multiplyMatrices(EI,l.matrixWorld),Of.setFromMatrixPosition(m2),s.setXYZ(a,Of.x,Of.y,Of.z),m2.multiplyMatrices(EI,l.parent.matrixWorld),Of.setFromMatrixPosition(m2),s.setXYZ(a+1,Of.x,Of.y,Of.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function nee(r){const e=[];r.isBone===!0&&e.push(r);for(let i=0;i<r.children.length;i++)e.push.apply(e,nee(r.children[i]));return e}class Vke extends Un{constructor(e,i,n){const s=new WO(i,4,2),o=new dc({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Fke=new le,$7=new ut,U7=new ut;class $ke extends dn{constructor(e,i,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new XO(i);s.rotateY(Math.PI*.5),this.material=new dc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),a=new Float32Array(o.count*3);s.setAttribute("color",new un(a,3)),this.add(new Un(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const i=e.geometry.getAttribute("color");$7.copy(this.light.color),U7.copy(this.light.groundColor);for(let n=0,s=i.count;n<s;n++){const o=n<s/2?$7:U7;i.setXYZ(n,o.r,o.g,o.b)}i.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Fke.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Uke extends _u{constructor(e=10,i=10,n=4473924,s=8947848){n=new ut(n),s=new ut(s);const o=i/2,a=e/i,l=e/2,c=[],u=[];for(let m=0,g=0,y=-l;m<=i;m++,y+=a){c.push(-l,0,y,l,0,y),c.push(y,0,-l,y,0,l);const _=m===o?n:s;_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3}const d=new Ai;d.setAttribute("position",new $t(c,3)),d.setAttribute("color",new $t(u,3));const p=new Mo({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class zke extends _u{constructor(e=10,i=16,n=8,s=64,o=4473924,a=8947848){o=new ut(o),a=new ut(a);const l=[],c=[];if(i>1)for(let p=0;p<i;p++){const m=p/i*(Math.PI*2),g=Math.sin(m)*e,y=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,y);const _=p&1?o:a;c.push(_.r,_.g,_.b),c.push(_.r,_.g,_.b)}for(let p=0;p<n;p++){const m=p&1?o:a,g=e-e/n*p;for(let y=0;y<s;y++){let _=y/s*(Math.PI*2),x=Math.sin(_)*g,O=Math.cos(_)*g;l.push(x,0,O),c.push(m.r,m.g,m.b),_=(y+1)/s*(Math.PI*2),x=Math.sin(_)*g,O=Math.cos(_)*g,l.push(x,0,O),c.push(m.r,m.g,m.b)}}const u=new Ai;u.setAttribute("position",new $t(l,3)),u.setAttribute("color",new $t(c,3));const d=new Mo({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const z7=new le,g2=new le,X7=new le;class Xke extends dn{constructor(e,i,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",i===void 0&&(i=1);let s=new Ai;s.setAttribute("position",new $t([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));const o=new Mo({fog:!1,toneMapped:!1});this.lightPlane=new Pd(s,o),this.add(this.lightPlane),s=new Ai,s.setAttribute("position",new $t([0,0,0,0,0,1],3)),this.targetLine=new Pd(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),z7.setFromMatrixPosition(this.light.matrixWorld),g2.setFromMatrixPosition(this.light.target.matrixWorld),X7.subVectors(g2,z7),this.lightPlane.lookAt(g2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(g2),this.targetLine.scale.z=X7.length()}}const v2=new le,Dr=new NO;class Wke extends _u{constructor(e){const i=new Ai,n=new Mo({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(y,_){c(y),c(_)}function c(y){s.push(0,0,0),o.push(0,0,0),a[y]===void 0&&(a[y]=[]),a[y].push(s.length/3-1)}i.setAttribute("position",new $t(s,3)),i.setAttribute("color",new $t(o,3)),super(i,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new ut(16755200),d=new ut(16711680),p=new ut(43775),m=new ut(16777215),g=new ut(3355443);this.setColors(u,d,p,m,g)}setColors(e,i,n,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,i.r,i.g,i.b),l.setXYZ(25,i.r,i.g,i.b),l.setXYZ(26,i.r,i.g,i.b),l.setXYZ(27,i.r,i.g,i.b),l.setXYZ(28,i.r,i.g,i.b),l.setXYZ(29,i.r,i.g,i.b),l.setXYZ(30,i.r,i.g,i.b),l.setXYZ(31,i.r,i.g,i.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,i=this.pointMap,n=1,s=1;Dr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gr("c",i,e,Dr,0,0,-1),Gr("t",i,e,Dr,0,0,1),Gr("n1",i,e,Dr,-n,-s,-1),Gr("n2",i,e,Dr,n,-s,-1),Gr("n3",i,e,Dr,-n,s,-1),Gr("n4",i,e,Dr,n,s,-1),Gr("f1",i,e,Dr,-n,-s,1),Gr("f2",i,e,Dr,n,-s,1),Gr("f3",i,e,Dr,-n,s,1),Gr("f4",i,e,Dr,n,s,1),Gr("u1",i,e,Dr,n*.7,s*1.1,-1),Gr("u2",i,e,Dr,-n*.7,s*1.1,-1),Gr("u3",i,e,Dr,0,s*2,-1),Gr("cf1",i,e,Dr,-n,0,1),Gr("cf2",i,e,Dr,n,0,1),Gr("cf3",i,e,Dr,0,-s,1),Gr("cf4",i,e,Dr,0,s,1),Gr("cn1",i,e,Dr,-n,0,-1),Gr("cn2",i,e,Dr,n,0,-1),Gr("cn3",i,e,Dr,0,-s,-1),Gr("cn4",i,e,Dr,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gr(r,e,i,n,s,o,a){v2.set(s,o,a).unproject(n);const l=e[r];if(l!==void 0){const c=i.getAttribute("position");for(let u=0,d=l.length;u<d;u++)c.setXYZ(l[u],v2.x,v2.y,v2.z)}}const y2=new so;class Gke extends _u{constructor(e,i=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new Ai;o.setIndex(new un(n,1)),o.setAttribute("position",new un(s,3)),super(o,new Mo({color:i,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&y2.setFromObject(this.object),y2.isEmpty())return;const i=y2.min,n=y2.max,s=this.geometry.attributes.position,o=s.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=i.x,o[4]=n.y,o[5]=n.z,o[6]=i.x,o[7]=i.y,o[8]=n.z,o[9]=n.x,o[10]=i.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=i.z,o[15]=i.x,o[16]=n.y,o[17]=i.z,o[18]=i.x,o[19]=i.y,o[20]=i.z,o[21]=n.x,o[22]=i.y,o[23]=i.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,i){return super.copy(e,i),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hke extends _u{constructor(e,i=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Ai;o.setIndex(new un(n,1)),o.setAttribute("position",new $t(s,3)),super(o,new Mo({color:i,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qke extends Pd{constructor(e,i=1,n=16776960){const s=n,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Ai;a.setAttribute("position",new $t(o,3)),a.computeBoundingSphere(),super(a,new Mo({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=i;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Ai;c.setAttribute("position",new $t(l,3)),c.computeBoundingSphere(),this.add(new Un(c,new dc({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const W7=new le;let _2,MI;class jke extends dn{constructor(e=new le(0,0,1),i=new le(0,0,0),n=1,s=16776960,o=n*.2,a=o*.2){super(),this.type="ArrowHelper",_2===void 0&&(_2=new Ai,_2.setAttribute("position",new $t([0,0,0,0,1,0],3)),MI=new k_(0,.5,1,5,1),MI.translate(0,-.5,0)),this.position.copy(i),this.line=new Pd(_2,new Mo({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Un(MI,new dc({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{W7.set(e.z,0,-e.x).normalize();const i=Math.acos(e.y);this.quaternion.setFromAxisAngle(W7,i)}}setLength(e,i=e*.2,n=i*.2){this.line.scale.set(1,Math.max(1e-4,e-i),1),this.line.updateMatrix(),this.cone.scale.set(n,i,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Yke extends _u{constructor(e=1){const i=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Ai;s.setAttribute("position",new $t(i,3)),s.setAttribute("color",new $t(n,3));const o=new Mo({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,i,n){const s=new ut,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(i),s.toArray(o,6),s.toArray(o,9),s.set(n),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ree{constructor(){this.type="ShapePath",this.color=new ut,this.subPaths=[],this.currentPath=null}moveTo(e,i){return this.currentPath=new Tw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,i),this}lineTo(e,i){return this.currentPath.lineTo(e,i),this}quadraticCurveTo(e,i,n,s){return this.currentPath.quadraticCurveTo(e,i,n,s),this}bezierCurveTo(e,i,n,s,o,a){return this.currentPath.bezierCurveTo(e,i,n,s,o,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function i(O){const S=[];for(let w=0,C=O.length;w<C;w++){const M=O[w],P=new Eg;P.curves=M.curves,S.push(P)}return S}function n(O,S){const w=S.length;let C=!1;for(let M=w-1,P=0;P<w;M=P++){let R=S[M],k=S[P],I=k.x-R.x,A=k.y-R.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(R=S[P],I=-I,k=S[M],A=-A),O.y<R.y||O.y>k.y)continue;if(O.y===R.y){if(O.x===R.x)return!0}else{const D=A*(O.x-R.x)-I*(O.y-R.y);if(D===0)return!0;if(D<0)continue;C=!C}}else{if(O.y!==R.y)continue;if(k.x<=O.x&&O.x<=R.x||R.x<=O.x&&O.x<=k.x)return!0}}return C}const s=ru.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,l,c;const u=[];if(o.length===1)return l=o[0],c=new Eg,c.curves=l.curves,u.push(c),u;let d=!s(o[0].getPoints());d=e?!d:d;const p=[],m=[];let g=[],y=0,_;m[y]=void 0,g[y]=[];for(let O=0,S=o.length;O<S;O++)l=o[O],_=l.getPoints(),a=s(_),a=e?!a:a,a?(!d&&m[y]&&y++,m[y]={s:new Eg,p:_},m[y].s.curves=l.curves,d&&y++,g[y]=[]):g[y].push({h:l,p:_[0]});if(!m[0])return i(o);if(m.length>1){let O=!1,S=0;for(let w=0,C=m.length;w<C;w++)p[w]=[];for(let w=0,C=m.length;w<C;w++){const M=g[w];for(let P=0;P<M.length;P++){const R=M[P];let k=!0;for(let I=0;I<m.length;I++)n(R.p,m[I].p)&&(w!==I&&S++,k?(k=!1,p[I].push(R)):O=!0);k&&p[w].push(R)}}S>0&&O===!1&&(g=p)}let x;for(let O=0,S=m.length;O<S;O++){c=m[O].s,u.push(c),x=g[O];for(let w=0,C=x.length;w<C;w++)c.holes.push(x[w].h)}return u}}class qke extends yh{constructor(e=1,i=1,n=1,s={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,i,{...s,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:C_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=C_);const Zke=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:uN,AddEquation:Yf,AddOperation:OK,AdditiveAnimationBlendMode:xN,AdditiveBlending:lE,AgXToneMapping:EK,AlphaFormat:BK,AlwaysCompare:KK,AlwaysDepth:gK,AlwaysStencilFunc:K4,AmbientLight:GN,AnimationAction:eee,AnimationClip:Ky,AnimationLoader:ike,AnimationMixer:Pke,AnimationObjectGroup:Eke,AnimationUtils:KPe,ArcCurve:SJ,ArrayCamera:gJ,ArrowHelper:jke,AttachedBindMode:C4,Audio:KJ,AudioAnalyser:yke,AudioContext:HN,AudioListener:mke,AudioLoader:dke,AxesHelper:Yke,BackSide:wo,BasicDepthPacking:XK,BasicShadowMap:uCe,BatchedMesh:bJ,Bone:Cw,BooleanKeyframeTrack:p0,Box2:tee,Box3:so,Box3Helper:Hke,BoxGeometry:Gp,BoxHelper:Gke,BufferAttribute:un,BufferGeometry:Ai,BufferGeometryLoader:ZJ,ByteType:kK,Cache:ud,Camera:NO,CameraHelper:Wke,CanvasTexture:wPe,CapsuleGeometry:oP,CatmullRomCurve3:CJ,CineonToneMapping:TK,CircleGeometry:aP,ClampToEdgeWrapping:jo,Clock:QN,Color:ut,ColorKeyframeTrack:UN,ColorManagement:Ln,CompressedArrayTexture:xPe,CompressedCubeTexture:bPe,CompressedTexture:Ag,CompressedTextureLoader:nke,ConeGeometry:lP,ConstantAlphaFactor:fK,ConstantColorFactor:uK,CubeCamera:oJ,CubeReflectionMapping:Ed,CubeRefractionMapping:Sp,CubeTexture:VO,CubeTextureLoader:rke,CubeUVReflectionMapping:T_,CubicBezierCurve:RN,CubicBezierCurve3:TJ,CubicInterpolant:zJ,CullFaceBack:w4,CullFaceFront:qZ,CullFaceFrontBack:cCe,CullFaceNone:YZ,Curve:xh,CurvePath:EJ,CustomBlending:ZZ,CustomToneMapping:AK,CylinderGeometry:k_,Cylindrical:Dke,Data3DTexture:ON,DataArrayTexture:KM,DataTexture:fp,DataTextureLoader:ske,DataUtils:_2e,DecrementStencilOp:wCe,DecrementWrapStencilOp:SCe,DefaultLoadingManager:GJ,DepthFormat:Cg,DepthStencilFormat:Xy,DepthTexture:TN,DetachedBindMode:PK,DirectionalLight:WN,DirectionalLightHelper:Xke,DiscreteInterpolant:XJ,DisplayP3ColorSpace:ZM,DodecahedronGeometry:hP,DoubleSide:ba,DstAlphaFactor:oK,DstColorFactor:lK,DynamicCopyUsage:FCe,DynamicDrawUsage:RCe,DynamicReadUsage:LCe,EdgesGeometry:MJ,EllipseCurve:rP,EqualCompare:jK,EqualDepth:yK,EqualStencilFunc:ECe,EquirectangularReflectionMapping:Uy,EquirectangularRefractionMapping:vw,Euler:Cs,EventDispatcher:yu,ExtrudeGeometry:uP,FileLoader:hu,Float16BufferAttribute:C2e,Float32BufferAttribute:$t,FloatType:rh,Fog:nP,FogExp2:iP,FramebufferTexture:n5,FrontSide:Ad,Frustum:FO,GLBufferAttribute:Bke,GLSL1:UCe,GLSL3:J4,GreaterCompare:YK,GreaterDepth:xK,GreaterEqualCompare:ZK,GreaterEqualDepth:_K,GreaterEqualStencilFunc:ICe,GreaterStencilFunc:PCe,GridHelper:Uke,Group:cd,HalfFloatType:A_,HemisphereLight:HJ,HemisphereLightHelper:$ke,IcosahedronGeometry:dP,ImageBitmapLoader:uke,ImageLoader:Pw,ImageUtils:iJ,IncrementStencilOp:bCe,IncrementWrapStencilOp:OCe,InstancedBufferAttribute:Yy,InstancedBufferGeometry:qJ,InstancedInterleavedBuffer:Rke,InstancedMesh:xJ,Int16BufferAttribute:O2e,Int32BufferAttribute:S2e,Int8BufferAttribute:x2e,IntType:fN,InterleavedBuffer:$O,InterleavedBufferAttribute:Md,Interpolant:GO,InterpolateDiscrete:Wy,InterpolateLinear:Gy,InterpolateSmooth:uA,InvertStencilOp:CCe,KeepStencilOp:qm,KeyframeTrack:fc,LOD:_J,LatheGeometry:zO,Layers:JM,LessCompare:QK,LessDepth:vK,LessEqualCompare:bN,LessEqualDepth:gw,LessEqualStencilFunc:MCe,LessStencilFunc:ACe,Light:Qp,LightProbe:YJ,Line:Pd,Line3:iee,LineBasicMaterial:Mo,LineCurve:BN,LineCurve3:AJ,LineDashedMaterial:FJ,LineLoop:wJ,LineSegments:_u,LinearDisplayP3ColorSpace:DO,LinearFilter:qr,LinearInterpolant:$N,LinearMipMapLinearFilter:mCe,LinearMipMapNearestFilter:pCe,LinearMipmapLinearFilter:qh,LinearMipmapNearestFilter:yy,LinearSRGBColorSpace:Xd,LinearToneMapping:SK,LinearTransfer:_w,Loader:ia,LoaderUtils:Jy,LoadingManager:zN,LoopOnce:$K,LoopPingPong:zK,LoopRepeat:UK,LuminanceAlphaFormat:NK,LuminanceFormat:LK,MOUSE:Ym,Material:Eo,MaterialLoader:bP,MathUtils:yo,Matrix3:Fi,Matrix4:wt,MaxEquation:tK,Mesh:Un,MeshBasicMaterial:dc,MeshDepthMaterial:AN,MeshDistanceMaterial:EN,MeshLambertMaterial:VN,MeshMatcapMaterial:VJ,MeshNormalMaterial:NJ,MeshPhongMaterial:zb,MeshPhysicalMaterial:DJ,MeshStandardMaterial:NN,MeshToonMaterial:LJ,MinEquation:eK,MirroredRepeatWrapping:zy,MixOperation:wK,MultiplyBlending:S4,MultiplyOperation:BO,NearestFilter:Ss,NearestMipMapLinearFilter:fCe,NearestMipMapNearestFilter:dCe,NearestMipmapLinearFilter:cg,NearestMipmapNearestFilter:YM,NeutralToneMapping:MK,NeverCompare:HK,NeverDepth:mK,NeverStencilFunc:TCe,NoBlending:xd,NoColorSpace:ld,NoToneMapping:bd,NormalAnimationBlendMode:qM,NormalBlending:Sg,NotEqualCompare:qK,NotEqualDepth:bK,NotEqualStencilFunc:kCe,NumberKeyframeTrack:qy,Object3D:dn,ObjectLoader:hke,ObjectSpaceNormalMap:GK,OctahedronGeometry:XO,OneFactor:nK,OneMinusConstantAlphaFactor:pK,OneMinusConstantColorFactor:dK,OneMinusDstAlphaFactor:aK,OneMinusDstColorFactor:hK,OneMinusSrcAlphaFactor:cE,OneMinusSrcColorFactor:sK,OrthographicCamera:sh,P3Primaries:bw,PCFShadowMap:hN,PCFSoftShadowMap:cN,PMREMGenerator:e5,Path:Tw,PerspectiveCamera:$n,Plane:Qh,PlaneGeometry:M_,PlaneHelper:Qke,PointLight:pE,PointLightHelper:Vke,Points:OJ,PointsMaterial:kN,PolarGridHelper:zke,PolyhedronGeometry:Hp,PositionalAudio:vke,PropertyBinding:Gi,PropertyMixer:JJ,QuadraticBezierCurve:sP,QuadraticBezierCurve3:DN,Quaternion:ds,QuaternionKeyframeTrack:m0,QuaternionLinearInterpolant:WJ,RED_GREEN_RGTC2_Format:q4,RED_RGTC1_Format:FK,REVISION:C_,RGBADepthPacking:WK,RGBAFormat:Ca,RGBAIntegerFormat:_N,RGBA_ASTC_10x10_Format:W4,RGBA_ASTC_10x5_Format:U4,RGBA_ASTC_10x6_Format:z4,RGBA_ASTC_10x8_Format:X4,RGBA_ASTC_12x10_Format:G4,RGBA_ASTC_12x12_Format:H4,RGBA_ASTC_4x4_Format:R4,RGBA_ASTC_5x4_Format:B4,RGBA_ASTC_5x5_Format:D4,RGBA_ASTC_6x5_Format:L4,RGBA_ASTC_6x6_Format:N4,RGBA_ASTC_8x5_Format:V4,RGBA_ASTC_8x6_Format:F4,RGBA_ASTC_8x8_Format:$4,RGBA_BPTC_Format:cA,RGBA_ETC2_EAC_Format:I4,RGBA_PVRTC_2BPPV1_Format:M4,RGBA_PVRTC_4BPPV1_Format:E4,RGBA_S3TC_DXT1_Format:aA,RGBA_S3TC_DXT3_Format:lA,RGBA_S3TC_DXT5_Format:hA,RGBFormat:DK,RGB_BPTC_SIGNED_Format:Q4,RGB_BPTC_UNSIGNED_Format:j4,RGB_ETC1_Format:P4,RGB_ETC2_Format:k4,RGB_PVRTC_2BPPV1_Format:A4,RGB_PVRTC_4BPPV1_Format:T4,RGB_S3TC_DXT1_Format:oA,RGFormat:VK,RGIntegerFormat:yN,RawShaderMaterial:Ub,Ray:f0,Raycaster:qN,Rec709Primaries:xw,RectAreaLight:QJ,RedFormat:gN,RedIntegerFormat:vN,ReinhardToneMapping:CK,RenderTarget:nJ,RepeatWrapping:Cp,ReplaceStencilOp:xCe,ReverseSubtractEquation:JZ,RingGeometry:fP,SIGNED_RED_GREEN_RGTC2_Format:Z4,SIGNED_RED_RGTC1_Format:Y4,SRGBColorSpace:al,SRGBTransfer:Jn,Scene:jy,ShaderChunk:Wi,ShaderLib:Zl,ShaderMaterial:ea,ShadowMaterial:BJ,Shape:Eg,ShapeGeometry:pP,ShapePath:ree,ShapeUtils:ru,ShortType:IK,Skeleton:UO,SkeletonHelper:Nke,SkinnedMesh:PN,Source:fg,Sphere:oo,SphereGeometry:WO,Spherical:l5,SphericalHarmonics3:jJ,SplineCurve:LN,SpotLight:xP,SpotLightHelper:Lke,Sprite:yJ,SpriteMaterial:MN,SrcAlphaFactor:hE,SrcAlphaSaturateFactor:cK,SrcColorFactor:rK,StaticCopyUsage:VCe,StaticDrawUsage:ww,StaticReadUsage:DCe,StereoCamera:fke,StreamCopyUsage:$Ce,StreamDrawUsage:BCe,StreamReadUsage:NCe,StringKeyframeTrack:g0,SubtractEquation:KZ,SubtractiveBlending:O4,TOUCH:nd,TangentSpaceNormalMap:Wp,TetrahedronGeometry:mP,Texture:Xr,TextureLoader:_P,TorusGeometry:gP,TorusKnotGeometry:vP,Triangle:wa,TriangleFanDrawMode:yCe,TriangleStripDrawMode:vCe,TrianglesDrawMode:gCe,TubeGeometry:yP,UVMapping:jM,Uint16BufferAttribute:eP,Uint32BufferAttribute:SN,Uint8BufferAttribute:b2e,Uint8ClampedBufferAttribute:w2e,Uniform:wP,UniformsGroup:Ike,UniformsLib:mt,UniformsUtils:LO,UnsignedByteType:lc,UnsignedInt248Type:E_,UnsignedInt5999Type:RK,UnsignedIntType:Yg,UnsignedShort4444Type:pN,UnsignedShort5551Type:mN,UnsignedShortType:dN,VSMShadowMap:Vc,Vector2:Ge,Vector3:le,Vector4:ji,VectorKeyframeTrack:Zy,VideoTexture:_Pe,WebGL3DRenderTarget:h2e,WebGLArrayRenderTarget:l2e,WebGLCoordinateSystem:Yc,WebGLCubeRenderTarget:aJ,WebGLMultipleRenderTargets:qke,WebGLRenderTarget:yh,WebGLRenderer:Vb,WebGLUtils:mJ,WebGPUCoordinateSystem:Ow,WireframeGeometry:RJ,WrapAroundEnding:yw,ZeroCurvatureEnding:ug,ZeroFactor:iK,ZeroSlopeEnding:dg,ZeroStencilOp:_Ce,createCanvasElement:eJ},Symbol.toStringTag,{value:"Module"}));function kd(r){return DM()?(NL(r),!0):!1}function kw(){const r=new Set,e=s=>{r.delete(s)};return{on:s=>{r.add(s);const o=()=>e(s);return kd(o),{off:o}},off:e,trigger:(...s)=>Promise.all(Array.from(r).map(o=>o(...s)))}}function or(r){return typeof r=="function"?r():li(r)}const h5=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Kke=r=>r!=null,Jke=Object.prototype.toString,e3e=r=>Jke.call(r)==="[object Object]",c5=()=>{};function t3e(r,e){function i(...n){return new Promise((s,o)=>{Promise.resolve(r(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(s).catch(o)})}return i}function i3e(r,e={}){let i,n,s=c5;const o=l=>{clearTimeout(l),s(),s=c5};return l=>{const c=or(r),u=or(e.maxWait);return i&&o(i),c<=0||u!==void 0&&u<=0?(n&&(o(n),n=null),Promise.resolve(l())):new Promise((d,p)=>{s=e.rejectOnCancel?p:d,u&&!n&&(n=setTimeout(()=>{i&&o(i),n=null,d(l())},u)),i=setTimeout(()=>{n&&o(n),n=null,d(l())},c)})}}function n3e(r,e,i=!1){return e.reduce((n,s)=>(s in r&&(!i||r[s]!==void 0)&&(n[s]=r[s]),n),{})}function r3e(r){return Ol()}function s3e(r,e=200,i={}){return t3e(i3e(e,i),r)}function G7(r,e=200,i={}){const n=lt(r.value),s=s3e(()=>{n.value=r.value},e,i);return tn(r,()=>s()),n}function o3e(r,e={}){if(!ps(r))return MO(r);const i=Array.isArray(r.value)?Array.from({length:r.value.length}):{};for(const n in r.value)i[n]=GL(()=>({get(){return r.value[n]},set(s){var o;if((o=or(e.replaceRef))!=null?o:!0)if(Array.isArray(r.value)){const l=[...r.value];l[n]=s,r.value=l}else{const l={...r.value,[n]:s};Object.setPrototypeOf(l,Object.getPrototypeOf(r.value)),r.value=l}else r.value[n]=s}}));return i}function ZN(r,e=!0,i){r3e()?nr(r,i):e?r():w_(r)}function a3e(r,e=1e3,i={}){const{immediate:n=!0,immediateCallback:s=!1}=i;let o=null;const a=lt(!1);function l(){o&&(clearInterval(o),o=null)}function c(){a.value=!1,l()}function u(){const d=or(e);d<=0||(a.value=!0,s&&r(),l(),o=setInterval(r,d))}if(n&&h5&&u(),ps(e)||typeof e=="function"){const d=tn(e,()=>{a.value&&h5&&u()});kd(d)}return kd(c),{isActive:a,pause:c,resume:u}}function Zh(r){var e;const i=or(r);return(e=i==null?void 0:i.$el)!=null?e:i}const Wd=h5?window:void 0;function Iw(...r){let e,i,n,s;if(typeof r[0]=="string"||Array.isArray(r[0])?([i,n,s]=r,e=Wd):[e,i,n,s]=r,!e)return c5;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);const o=[],a=()=>{o.forEach(d=>d()),o.length=0},l=(d,p,m,g)=>(d.addEventListener(p,m,g),()=>d.removeEventListener(p,m,g)),c=tn(()=>[Zh(e),or(s)],([d,p])=>{if(a(),!d)return;const m=e3e(p)?{...p}:p;o.push(...i.flatMap(g=>n.map(y=>l(d,g,y,m))))},{immediate:!0,flush:"post"}),u=()=>{c(),a()};return kd(u),u}function l3e(){const r=lt(!1),e=Ol();return e&&nr(()=>{r.value=!0},e),r}function OP(r){const e=l3e();return tr(()=>(e.value,!!r()))}function h3e(r,e,i={}){const{window:n=Wd,...s}=i;let o;const a=OP(()=>n&&"MutationObserver"in n),l=()=>{o&&(o.disconnect(),o=void 0)},c=tr(()=>{const m=or(r),g=(Array.isArray(m)?m:[m]).map(Zh).filter(Kke);return new Set(g)}),u=tn(()=>c.value,m=>{l(),a.value&&m.size&&(o=new MutationObserver(e),m.forEach(g=>o.observe(g,s)))},{immediate:!0,flush:"post"}),d=()=>o==null?void 0:o.takeRecords(),p=()=>{l(),u()};return kd(p),{isSupported:a,stop:p,takeRecords:d}}function KN(r,e={}){const{immediate:i=!0,fpsLimit:n=void 0,window:s=Wd}=e,o=lt(!1),a=n?1e3/n:null;let l=0,c=null;function u(m){if(!o.value||!s)return;l||(l=m);const g=m-l;if(a&&g<a){c=s.requestAnimationFrame(u);return}l=m,r({delta:g,timestamp:m}),c=s.requestAnimationFrame(u)}function d(){!o.value&&s&&(o.value=!0,l=0,c=s.requestAnimationFrame(u))}function p(){o.value=!1,c!=null&&s&&(s.cancelAnimationFrame(c),c=null)}return i&&d(),kd(p),{isActive:Wg(o),pause:p,resume:d}}function c3e(r,e={}){const{window:i=Wd}=e,n=OP(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let s;const o=lt(!1),a=u=>{o.value=u.matches},l=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",a):s.removeListener(a))},c=_d(()=>{n.value&&(l(),s=i.matchMedia(or(r)),"addEventListener"in s?s.addEventListener("change",a):s.addListener(a),o.value=s.matches)});return kd(()=>{c(),l(),s=void 0}),o}function u3e(r={}){const{window:e=Wd}=r,i=lt(1);if(e){let n=function(){i.value=e.devicePixelRatio,s(),o=e.matchMedia(`(resolution: ${i.value}dppx)`),o.addEventListener("change",n,{once:!0})},s=function(){o==null||o.removeEventListener("change",n)},o;n(),kd(s)}return{pixelRatio:i}}function see(r,e,i={}){const{window:n=Wd,...s}=i;let o;const a=OP(()=>n&&"ResizeObserver"in n),l=()=>{o&&(o.disconnect(),o=void 0)},c=tr(()=>Array.isArray(r)?r.map(p=>Zh(p)):[Zh(r)]),u=tn(c,p=>{if(l(),a.value&&n){o=new ResizeObserver(e);for(const m of p)m&&o.observe(m,s)}},{immediate:!0,flush:"post"}),d=()=>{l(),u()};return kd(d),{isSupported:a,stop:d}}function d3e(r,e={}){const{reset:i=!0,windowResize:n=!0,windowScroll:s=!0,immediate:o=!0}=e,a=lt(0),l=lt(0),c=lt(0),u=lt(0),d=lt(0),p=lt(0),m=lt(0),g=lt(0);function y(){const _=Zh(r);if(!_){i&&(a.value=0,l.value=0,c.value=0,u.value=0,d.value=0,p.value=0,m.value=0,g.value=0);return}const x=_.getBoundingClientRect();a.value=x.height,l.value=x.bottom,c.value=x.left,u.value=x.right,d.value=x.top,p.value=x.width,m.value=x.x,g.value=x.y}return see(r,y),tn(()=>Zh(r),_=>!_&&y()),h3e(r,y,{attributeFilter:["style","class"]}),s&&Iw("scroll",y,{capture:!0,passive:!0}),n&&Iw("resize",y,{passive:!0}),ZN(()=>{o&&y()}),{height:a,bottom:l,left:c,right:u,top:d,width:p,x:m,y:g,update:y}}function f3e(r,e={width:0,height:0},i={}){const{window:n=Wd,box:s="content-box"}=i,o=tr(()=>{var p,m;return(m=(p=Zh(r))==null?void 0:p.namespaceURI)==null?void 0:m.includes("svg")}),a=lt(e.width),l=lt(e.height),{stop:c}=see(r,([p])=>{const m=s==="border-box"?p.borderBoxSize:s==="content-box"?p.contentBoxSize:p.devicePixelContentBoxSize;if(n&&o.value){const g=Zh(r);if(g){const y=g.getBoundingClientRect();a.value=y.width,l.value=y.height}}else if(m){const g=Array.isArray(m)?m:[m];a.value=g.reduce((y,{inlineSize:_})=>y+_,0),l.value=g.reduce((y,{blockSize:_})=>y+_,0)}else a.value=p.contentRect.width,l.value=p.contentRect.height},i);ZN(()=>{const p=Zh(r);p&&(a.value="offsetWidth"in p?p.offsetWidth:e.width,l.value="offsetHeight"in p?p.offsetHeight:e.height)});const u=tn(()=>Zh(r),p=>{a.value=p?e.width:0,l.value=p?e.height:0});function d(){c(),u()}return{width:a,height:l,stop:d}}function p3e(r){var e;const i=lt(0);if(typeof performance>"u")return i;const n=(e=r==null?void 0:r.every)!=null?e:10;let s=performance.now(),o=0;return KN(()=>{if(o+=1,o>=n){const a=performance.now(),l=a-s;i.value=Math.round(1e3/(l/o)),s=a,o=0}}),i}function m3e(r={}){const e=lt(),i=OP(()=>typeof performance<"u"&&"memory"in performance);if(i.value){const{interval:n=1e3}=r;a3e(()=>{e.value=performance.memory},n,{immediate:r.immediate,immediateCallback:r.immediateCallback})}return{isSupported:i,memory:e}}const oee={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},g3e=Object.keys(oee);function v3e(r={}){const{target:e=Wd}=r,i=lt(!1),n=lt(r.initialValue||{});Object.assign(n.value,oee,n.value);const s=o=>{i.value=!0,!(r.pointerTypes&&!r.pointerTypes.includes(o.pointerType))&&(n.value=n3e(o,g3e,!1))};if(e){const o={passive:!0};Iw(e,["pointerdown","pointermove","pointerup"],s,o),Iw(e,"pointerleave",()=>i.value=!1,o)}return{...o3e(n),isInside:i}}function y3e(r={}){const{window:e=Wd,initialWidth:i=Number.POSITIVE_INFINITY,initialHeight:n=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:o=!0}=r,a=lt(i),l=lt(n),c=()=>{e&&(o?(a.value=e.innerWidth,l.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,l.value=e.document.documentElement.clientHeight))};if(c(),ZN(c),Iw("resize",c,{passive:!0}),s){const u=c3e("(orientation: portrait)");tn(u,()=>c())}return{width:a,height:l}}var _3e=Object.defineProperty,x3e=(r,e,i)=>e in r?_3e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,H7=(r,e,i)=>(x3e(r,typeof e!="symbol"?e+"":e,i),i);const b3e="@tresjs/core",w3e="module",O3e="3.9.0",S3e="pnpm@8.15.6",C3e="Declarative ThreeJS using Vue Components",T3e="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",A3e="MIT",E3e=["vue","3d","threejs","three","threejs-vue"],M3e=!1,P3e={".":{types:"./dist/index.d.ts",import:"./dist/tres.js",require:"./dist/tres.umd.cjs"},"./components":{types:"./dist/src/components/index.d.ts"},"./composables":{types:"./dist/src/composables/index.d.ts"},"./types":{types:"./dist/src/types/index.d.ts"},"./utils":{types:"./dist/src/utils/index.d.ts"},"./*":"./*"},k3e="./dist/tres.js",I3e="./dist/tres.js",R3e="./dist/index.d.ts",B3e=["*.d.ts","dist"],D3e={access:"public"},L3e={dev:"cd playground && npm run dev",build:"vite build",playground:"cd playground && npm run dev",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui",release:"release-it",coverage:"vitest run --coverage",lint:"eslint .","lint:fix":"eslint . --fix","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts",prepare:"node .husky/install.mjs"},N3e={three:">=0.133",vue:">=3.3"},V3e={"@alvarosabu/utils":"^3.1.1","@vue/devtools-api":"^6.6.1","@vueuse/core":"^10.7.0"},F3e={"@release-it/conventional-changelog":"^8.0.1","@stackblitz/sdk":"^1.9.0","@tresjs/cientos":"3.8.0","@tresjs/eslint-config":"^1.0.0","@tresjs/eslint-config-vue":"^0.2.1","@types/three":"^0.163.0","@typescript-eslint/eslint-plugin":"^7.7.1","@typescript-eslint/parser":"^7.7.1","@vitejs/plugin-vue":"^5.0.4","@vitest/coverage-c8":"^0.33.0","@vitest/ui":"^1.5.0","@vue/test-utils":"^2.4.3",eslint:"^9.1.1","eslint-plugin-vue":"^9.25.0",esno:"^4.0.0",gsap:"^3.12.3",husky:"^9.0.11",jsdom:"^24.0.0",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^1.1.1","release-it":"^17.2.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.11.0",three:"^0.163.0",unocss:"^0.59.4",unplugin:"^1.10.1","unplugin-vue-components":"^0.26.0",vite:"^5.2.10","vite-plugin-banner":"^0.7.1","vite-plugin-dts":"3.9.0","vite-plugin-inspect":"^0.8.4","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.1.3",vitest:"^1.5.0",vue:"^3.4.24","vue-demi":"^0.14.6"},$3e={name:b3e,type:w3e,version:O3e,packageManager:S3e,description:C3e,author:T3e,license:A3e,keywords:E3e,sideEffects:M3e,exports:P3e,main:k3e,module:I3e,types:R3e,files:B3e,publishConfig:D3e,scripts:L3e,peerDependencies:N3e,dependencies:V3e,devDependencies:F3e},U3e=({sizes:r,scene:e})=>{const i=lt([]),n=tr(()=>i.value[0]),s=l=>{const c=l instanceof NO?l:i.value.find(d=>d.uuid===l);if(!c)return;const u=i.value.filter(({uuid:d})=>d!==c.uuid);i.value=[c,...u]},o=(l,c=!1)=>{i.value.some(({uuid:u})=>u===l.uuid)||(c?s(l):i.value.push(l))},a=l=>{i.value=i.value.filter(({uuid:c})=>c!==l.uuid)};return _d(()=>{r.aspectRatio.value&&i.value.forEach(l=>{l instanceof $n&&(l.aspect=r.aspectRatio.value),(l instanceof $n||l instanceof sh)&&l.updateProjectionMatrix()})}),e.userData.tres__registerCamera=o,e.userData.tres__deregisterCamera=a,ta(()=>{i.value=[]}),{camera:n,cameras:i,registerCamera:o,deregisterCamera:a,setCameraActive:s}},aee=kw(),lee=kw(),JN=kw(),Xb=new QN;let pA=0,mA=0;const{pause:z3e,resume:X3e,isActive:W3e}=KN(()=>{aee.trigger({delta:pA,elapsed:mA,clock:Xb}),lee.trigger({delta:pA,elapsed:mA,clock:Xb}),JN.trigger({delta:pA,elapsed:mA,clock:Xb})},{immediate:!1});JN.on(()=>{pA=Xb.getDelta(),mA=Xb.getElapsedTime()});const v0=()=>({onBeforeLoop:aee.on,onLoop:lee.on,onAfterLoop:JN.on,pause:z3e,resume:X3e,isActive:W3e}),x2="[TresJS ▲ ■ ●] ";function SP(){function r(...n){typeof n[0]=="string"?n[0]=x2+n[0]:n.unshift(x2),console.error(...n)}function e(...n){typeof n[0]=="string"?n[0]=x2+n[0]:n.unshift(x2),console.warn(...n)}function i(n,s){}return{logError:r,logWarning:e,logMessage:i}}function G3e(r){return r instanceof ut?r:Array.isArray(r)?new ut(...r):new ut(r)}class H3e extends Un{constructor(...e){super(...e),H7(this,"type","HightlightMesh"),H7(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const e=(Date.now()-this.createTime)/1e3,i=1+.07*Math.sin(2.5*e);this.scale.set(i,i,i)}}const hee=(r,e)=>{for(const i of Object.keys(e))e[i]instanceof Object&&Object.assign(e[i],hee(r[i],e[i]));return Object.assign(r||{},e),r},Q3e="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",j3e=Y3e(Q3e);function Q7(r){return r&&r.nodeType===1}function b2(r){return r.replace(/-([a-z])/g,(e,i)=>i.toUpperCase())}function Y3e(r,e){const i=Object.create(null),n=r.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return s=>!!i[s]}const q3e=(r,e)=>{const i=new Set,n=[];for(const s of r){const o=e(s);i.has(o)||(i.add(o),n.push(s))}return n},j7=(r,e)=>{if(!e)return;const i=Array.isArray(e)?e:e.match(/([^[.\]])+/g);return i==null?void 0:i.reduce((n,s)=>n&&n[s],r)},Z3e=(r,e,i)=>{const n=Array.isArray(e)?e:e.match(/([^[.\]])+/g);n&&n.reduce((s,o,a)=>(s[o]===void 0&&(s[o]={}),a===n.length-1&&(s[o]=i),s[o]),r)};function cee(r,e){if(Q7(r)&&Q7(e)){const s=r.attributes,o=e.attributes;return s.length!==o.length?!1:Array.from(s).every(({name:a,value:l})=>e.getAttribute(a)===l)}if(r===e)return!0;if(r===null||typeof r!="object"||e===null||typeof e!="object")return!1;const i=Object.keys(r),n=Object.keys(e);if(i.length!==n.length)return!1;for(const s of i)if(!n.includes(s)||!cee(r[s],e[s]))return!1;return!0}function K3e(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let i=0;i<r.length;i++)if(!cee(r[i],e[i]))return!1;return!0}const J3e=Array.isArray;function eIe(r,e,i,n){const s=c=>{if(c.uuid===e)return c;for(const u of c.children){const d=s(u);if(d)return d}},o=s(r);if(!o){console.warn("Object with UUID not found in the scene.");return}let a=o;for(let c=0;c<i.length-1;c++)if(a[i[c]]!==void 0)a=a[i[c]];else{console.warn(`Property path is not valid: ${i.join(".")}`);return}const l=i[i.length-1];a[l]!==void 0?a[l]=n:console.warn(`Property path is not valid: ${i.join(".")}`)}function tIe(r){const e=new dc({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:ba});return new H3e(r.geometry.clone(),e)}const iIe=Number.parseInt(C_.replace("dev","")),w2={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:al,toneMapping:uN,toneMappingExposure:3,shadowMap:{enabled:!0,type:cN}}};function nIe({scene:r,canvas:e,options:i,disableRender:n,contextParts:{sizes:s,camera:o}}){const a=tr(()=>({alpha:or(i.alpha),depth:or(i.depth),canvas:Zh(e),context:or(i.context),stencil:or(i.stencil),antialias:or(i.antialias)===void 0?!0:or(i.antialias),precision:or(i.precision),powerPreference:or(i.powerPreference),premultipliedAlpha:or(i.premultipliedAlpha),preserveDrawingBuffer:or(i.preserveDrawingBuffer),logarithmicDepthBuffer:or(i.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:or(i.failIfMajorPerformanceCaveat)})),l=br(new Vb(a.value));tn(a,()=>{l.value.dispose(),l.value=new Vb(a.value)}),_d(()=>{l.value.setSize(s.width.value,s.height.value)});const{pixelRatio:c}=u3e();_d(()=>{l.value.setPixelRatio(c.value)});const{logError:u}=SP(),d=(()=>{const y=new Vb,_={shadowMap:{enabled:y.shadowMap.enabled,type:y.shadowMap.type},toneMapping:y.toneMapping,toneMappingExposure:y.toneMappingExposure,outputColorSpace:y.outputColorSpace};return y.dispose(),_})();_d(()=>{const y=or(i.preset);y&&(y in w2||u(`Renderer Preset must be one of these: ${Object.keys(w2).join(", ")}`),hee(l.value,w2[y]));const _=(S,w)=>{const C=or(S),M=()=>{if(y)return j7(w2[y],w)};if(C!==void 0)return C;const P=M();return P!==void 0?P:j7(d,w)},x=(S,w)=>Z3e(l.value,w,_(S,w));x(i.shadows,"shadowMap.enabled"),x(i.toneMapping,"toneMapping"),x(i.shadowMapType,"shadowMap.type"),iIe<150&&x(!i.useLegacyLights,"physicallyCorrectLights"),x(i.outputColorSpace,"outputColorSpace"),x(i.toneMappingExposure,"toneMappingExposure");const O=_(i.clearColor,"clearColor");O&&l.value.setClearColor(O?G3e(O):new ut(0))});const{pause:p,resume:m,onLoop:g}=v0();return g(()=>{o.value&&!or(n)&&l.value.render(r,o.value)}),m(),ta(()=>{p(),l.value.dispose(),l.value.forceContextLoss()}),{renderer:l}}const Y7=r=>typeof r=="function",rIe=r=>!!r&&r.constructor===Array;function sIe(r){const e={nodes:{},materials:{}};return r&&r.traverse(i=>{i.name&&(e.nodes[i.name]=i),i.material&&!e.materials[i.material.name]&&(e.materials[i.material.name]=i.material)}),e}async function oIe(r,e,i,n,s){const{logError:o}=SP(),a=new r,l=(Array.isArray(e)?e:[e]).map(c=>new Promise((u,d)=>{a.load(c,p=>{p.scene&&Object.assign(p,sIe(p.scene)),u(p)},n,p=>d(o("[useLoader] - Failed to load resource",p)))}));return rIe(e)?await Promise.all(l):await l[0]}async function aIe(r,e){const i=new _P(e),n=s=>new Promise((o,a)=>{i.load(s,l=>o(l),()=>null,()=>{a(new Error("[useTextures] - Failed to load texture"))})});if(J3e(r)){const s=await Promise.all(r.map(o=>n(o)));return r.length>1?s:s[0]}else{const{map:s,displacementMap:o,normalMap:a,roughnessMap:l,metalnessMap:c,aoMap:u,alphaMap:d,matcap:p}=r;return{map:s?await n(s):null,displacementMap:o?await n(o):null,normalMap:a?await n(a):null,roughnessMap:l?await n(l):null,metalnessMap:c?await n(c):null,aoMap:u?await n(u):null,alphaMap:d?await n(d):null,matcap:p?await n(p):null}}}const lIe=(r,{renderer:e,camera:i,raycaster:n})=>{const s=tr(()=>e.value.domElement),{x:o,y:a}=v3e({target:s}),{width:l,height:c,top:u,left:d}=d3e(s),p=({x:R,y:k})=>{if(s.value)return{x:(R-d.value)/l.value*2-1,y:-((k-u.value)/c.value)*2+1}},m=({x:R,y:k})=>{if(i.value)return n.value.setFromCamera(new Ge(R,k),i.value),n.value.intersectObjects(r.value,!1)},g=R=>{const k=p({x:(R==null?void 0:R.clientX)??o.value,y:(R==null?void 0:R.clientY)??a.value});return k?m(k)||[]:[]},y=tr(()=>g()),_=kw(),x=kw(),O=(R,k)=>{R.trigger({event:k,intersects:g(k)})},S=R=>{O(x,R)};let w;const C=R=>{var k;w=(k=g(R)[0])==null?void 0:k.object},M=R=>{var k;R instanceof PointerEvent&&w===((k=g(R)[0])==null?void 0:k.object)&&O(_,R)},P=R=>x.trigger({event:R,intersects:[]});return s.value.addEventListener("pointerup",M),s.value.addEventListener("pointerdown",C),s.value.addEventListener("pointermove",S),s.value.addEventListener("pointerleave",P),ta(()=>{s!=null&&s.value&&(s.value.removeEventListener("pointerup",M),s.value.removeEventListener("pointerdown",C),s.value.removeEventListener("pointermove",S),s.value.removeEventListener("pointerleave",P))}),{intersects:y,onClick:R=>_.on(R).off,onPointerMove:R=>x.on(R).off}},hIe=({scene:r,contextParts:e})=>{const i=u0({click:new Map,pointerMove:new Map,pointerEnter:new Map,pointerLeave:new Map}),n=lt(new Set),s=m=>{n.value.add(m)},o=m=>{n.value.delete(m)},a=m=>{Object.values(i).forEach(g=>g.delete(m)),o(m)},l=m=>{const{onClick:g,onPointerMove:y,onPointerEnter:_,onPointerLeave:x}=m;g&&i.click.set(m,g),y&&i.pointerMove.set(m,y),_&&i.pointerEnter.set(m,_),x&&i.pointerLeave.set(m,x)};r.userData.tres__registerAtPointerEventHandler=l,r.userData.tres__deregisterAtPointerEventHandler=a,r.userData.tres__registerBlockingObjectAtPointerEventHandler=s,r.userData.tres__deregisterBlockingObjectAtPointerEventHandler=o;const c=tr(()=>q3e([...Array.from(n.value),...Object.values(i).map(m=>Array.from(m.keys())).flat()],({uuid:m})=>m)),{onClick:u,onPointerMove:d}=lIe(c,e);u(({intersects:m,event:g})=>{var y;m.length&&((y=i.click.get(m[0].object))==null||y(m[0],g))});let p;return d(({intersects:m,event:g})=>{var y,_,x,O;const S=(y=m==null?void 0:m[0])==null?void 0:y.object,{pointerLeave:w,pointerEnter:C,pointerMove:M}=i;p&&p!==S&&((_=w.get(p))==null||_(p,g)),S&&(p!==S&&((x=C.get(S))==null||x(m[0],g)),(O=M.get(S))==null||O(m[0],g)),p=S||null}),{registerObject:l,deregisterObject:a}};function uee(r){let e=0;return r.traverse(i=>{if(i.isMesh&&i.geometry){const n=i.geometry,s=n.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,o=n.index?n.index.count*Uint32Array.BYTES_PER_ELEMENT:0,a=n.attributes.normal?n.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,l=n.attributes.uv?n.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,c=s+o+a+l;e+=c}}),e}function cIe(r){return(r/1024).toFixed(2)}const u5=lt({}),eV=r=>Object.assign(u5.value,r);function uIe(r,e,i=10){const n=or(r)?y3e():f3e(tr(()=>or(e).parentElement)),s=Wg(G7(n.width,i)),o=Wg(G7(n.height,i)),a=tr(()=>s.value/o.value);return{height:o,width:s,aspectRatio:a}}function dIe({scene:r,canvas:e,windowSize:i,disableRender:n,rendererOptions:s}){const o=uIe(i,e),a=br(r),{camera:l,cameras:c,registerCamera:u,deregisterCamera:d,setCameraActive:p}=U3e({sizes:o,scene:r}),{renderer:m}=nIe({scene:r,canvas:e,options:s,contextParts:{sizes:o,camera:l},disableRender:n}),g={sizes:o,scene:a,camera:l,cameras:Wg(c),renderer:m,raycaster:br(new qN),controls:lt(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},extend:eV,registerCamera:u,setCameraActive:p,deregisterCamera:d};mw("useTres",g);const y=100,_=p3e({every:y}),{isSupported:x,memory:O}=m3e({interval:y}),S=160;let w=performance.now();const C=({timestamp:k})=>{g.scene.value&&(g.perf.memory.allocatedMem=uee(g.scene.value)),k-w>=y&&(w=k,g.perf.fps.accumulator.push(_.value),g.perf.fps.accumulator.length>S&&g.perf.fps.accumulator.shift(),g.perf.fps.value=_.value,x.value&&O.value&&(g.perf.memory.accumulator.push(O.value.usedJSHeapSize/1024/1024),g.perf.memory.accumulator.length>S&&g.perf.memory.accumulator.shift(),g.perf.memory.currentMem=g.perf.memory.accumulator.reduce((I,A)=>I+A,0)/g.perf.memory.accumulator.length))};let M=0;const P=1,{pause:R}=KN(({delta:k})=>{window.__TRES__DEVTOOLS__&&(C({timestamp:performance.now()}),M+=k,M>=P&&(window.__TRES__DEVTOOLS__.cb(g),M=0))},{immediate:!0});return ta(()=>{R()}),g}function tV(){const r=vy("useTres");if(!r)throw new Error("useTresContext must be used together with useTresContextProvider");return r}let Lr=null;const{logError:q7}=SP(),PI=["onClick","onPointerMove","onPointerEnter","onPointerLeave"],fIe={createElement(r,e,i,n){var s,o;if(n||(n={}),n.args||(n.args=[]),r==="template"||j3e(r))return null;let a=r.replace("Tres",""),l;if(r==="primitive"){(n==null?void 0:n.object)===void 0&&q7("Tres primitives need a prop 'object'");const c=n.object;a=c.type,l=Object.assign(c,{type:a,attach:n.attach,primitive:!0})}else{const c=u5.value[a];c||q7(`${a} is not defined on the THREE namespace. Use extend to add it to the catalog.`),l=new c(...n.args)}return l.isCamera&&(n!=null&&n.position||l.position.set(3,3,3),n!=null&&n.lookAt||l.lookAt(0,0,0)),(n==null?void 0:n.attach)===void 0&&(l.isMaterial?l.attach="material":l.isBufferGeometry&&(l.attach="geometry")),l.isObject3D&&((s=n==null?void 0:n.material)!=null&&s.isMaterial&&(l.userData.tres__materialViaProp=!0),(o=n==null?void 0:n.geometry)!=null&&o.isBufferGeometry&&(l.userData.tres__geometryViaProp=!0)),l.userData={...l.userData,tres__name:a},l},insert(r,e){var i,n,s,o;e&&e.isScene&&(Lr=e);const a=e||Lr;if(r!=null&&r.isObject3D){if(r!=null&&r.isCamera){if(!(Lr!=null&&Lr.userData.tres__registerCamera))throw new Error("could not find tres__registerCamera on scene's userData");(n=Lr==null?void 0:(i=Lr.userData).tres__registerCamera)==null||n.call(i,r)}if(r&&PI.some(l=>r[l])){if(!(Lr!=null&&Lr.userData.tres__registerAtPointerEventHandler))throw new Error("could not find tres__registerAtPointerEventHandler on scene's userData");(o=Lr==null?void 0:(s=Lr.userData).tres__registerAtPointerEventHandler)==null||o.call(s,r)}}r!=null&&r.isObject3D&&a!=null&&a.isObject3D?(a.add(r),r.dispatchEvent({type:"added"})):r!=null&&r.isFog?a.fog=r:typeof(r==null?void 0:r.attach)=="string"&&(r.__previousAttach=r[a==null?void 0:a.attach],a&&(a[r.attach]=r))},remove(r){var e,i;if(r){if(r.isObject3D){const n=r,s=u=>{var d,p;const m=u;u.userData.tres__materialViaProp||((d=m.material)==null||d.dispose(),m.material=void 0),u.userData.tres__geometryViaProp||((p=m.geometry)==null||p.dispose(),m.geometry=void 0)},o=Lr==null?void 0:Lr.userData.tres__deregisterAtPointerEventHandler,a=Lr==null?void 0:Lr.userData.tres__deregisterBlockingObjectAtPointerEventHandler,l=u=>{var d,p;if(!a)throw new Error("could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData");if((p=Lr==null?void 0:(d=Lr.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||p.call(d,u),!o)throw new Error("could not find tres__deregisterAtPointerEventHandler on scene's userData");u&&PI.some(m=>u[m])&&(o==null||o(u))},c=u=>{const d=Lr==null?void 0:Lr.userData.tres__deregisterCamera;if(!d)throw new Error("could not find tres__deregisterCamera on scene's userData");u.isCamera&&(d==null||d(u))};(e=r.removeFromParent)==null||e.call(r),n.traverse(u=>{s(u),c(u),l==null||l(u)}),s(n),c(n),l==null||l(n)}(i=r.dispose)==null||i.call(r)}},patchProp(r,e,i,n){var s,o,a,l;if(r){let c=r,u=e;if(r.isObject3D&&u==="blocks-pointer-events"){n||n===""?(o=Lr==null?void 0:(s=Lr.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||o.call(s,r):(l=Lr==null?void 0:(a=Lr.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||l.call(a,r);return}let d=b2(u),p=c==null?void 0:c[d];if(u==="args"){const g=r,y=i??[],_=n??[],x=r.userData.tres__name||r.type;x&&y.length&&!K3e(y,_)&&(c=Object.assign(g,new u5.value[x](...n)));return}if(c.type==="BufferGeometry"){if(u==="args")return;c.setAttribute(b2(u),new un(...n));return}if(u.includes("-")&&p===void 0){const g=u.split("-");p=g.reduce((y,_)=>y[b2(_)],c),u=g.pop(),d=u.toLowerCase(),p!=null&&p.set||(c=g.reduce((y,_)=>y[b2(_)],c))}let m=n;if(m===""&&(m=!0),Y7(p)){PI.includes(e)||(Array.isArray(m)?r[d](...m):r[d](m));return}!(p!=null&&p.set)&&!Y7(p)?c[d]=m:p.constructor===m.constructor&&p!=null&&p.copy?p==null||p.copy(m):Array.isArray(m)?p.set(...m):!p.isColor&&p.setScalar?p.setScalar(m):p.set(m)}},parentNode(r){return(r==null?void 0:r.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}},{render:pIe}=iN(fIe);eV(Zke);function mIe(){return dee().__VUE_DEVTOOLS_GLOBAL_HOOK__}function dee(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const gIe=typeof Proxy=="function",vIe="devtools-plugin:setup",yIe="plugin:settings:set";let $x,d5;function _Ie(){var r;return $x!==void 0||(typeof window<"u"&&window.performance?($x=!0,d5=window.performance):typeof globalThis<"u"&&!((r=globalThis.perf_hooks)===null||r===void 0)&&r.performance?($x=!0,d5=globalThis.perf_hooks.performance):$x=!1),$x}function xIe(){return _Ie()?d5.now():Date.now()}class bIe{constructor(e,i){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=i;const n={};if(e.settings)for(const a in e.settings){const l=e.settings[a];n[a]=l.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(s),l=JSON.parse(a);Object.assign(o,l)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(s,JSON.stringify(a))}catch{}o=a},now(){return xIe()}},i&&i.on(yIe,(a,l)=>{a===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(a,l)=>this.target?this.target.on[l]:(...c)=>{this.onQueue.push({method:l,args:c})}}),this.proxiedTarget=new Proxy({},{get:(a,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...c)=>(this.targetQueue.push({method:l,args:c,resolve:()=>{}}),this.fallbacks[l](...c)):(...c)=>new Promise(u=>{this.targetQueue.push({method:l,args:c,resolve:u})})})}async setRealTarget(e){this.target=e;for(const i of this.onQueue)this.target.on[i.method](...i.args);for(const i of this.targetQueue)i.resolve(await this.target[i.method](...i.args))}}function wIe(r,e){const i=r,n=dee(),s=mIe(),o=gIe&&i.enableEarlyProxy;if(s&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))s.emit(vIe,r,e);else{const a=o?new bIe(i,s):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:i,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}function OIe(r,e){const i=`▲ ■ ●${r}`;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(i,e):console.log(i)}const fee=r=>{const e={id:r.uuid,label:r.type,children:[],tags:[]};r.name!==""&&e.tags.push({label:r.name,textColor:5750629,backgroundColor:15793395});const i=uee(r);return i>0&&e.tags.push({label:`${cIe(i)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),r.type.includes("Light")&&(e.tags.push({label:`${r.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),e.tags.push({label:`#${r.color.getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),r.type.includes("Camera")&&(e.tags.push({label:`${r.fov}°`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),e.tags.push({label:`x: ${Math.round(r.position.x)} y: ${Math.round(r.position.y)} z: ${Math.round(r.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),e};function pee(r,e){r.children.forEach(i=>{if(i.type==="HightlightMesh")return;const n=fee(i);e.children.push(n),pee(i,n)})}const SIe=[],Ux="tres:inspector",CIe=u0({sceneGraph:null});function TIe(r,e){wIe({id:"dev.esm.tres",label:"TresJS 🪐",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:SIe,app:r},i=>{typeof i.now!="function"&&OIe("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),i.addInspector({id:Ux,label:"TresJS 🪐",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{i.sendInspectorTree(Ux)},1e3),setInterval(()=>{i.notifyComponentUpdate()},5e3),i.on.getInspectorTree(o=>{if(o.inspectorId===Ux){const a=fee(e.scene.value);pee(e.scene.value,a),CIe.sceneGraph=a,o.rootNodes=[a]}});let n=null,s=null;i.on.getInspectorState(o=>{if(o.inspectorId===Ux){const[a]=e.scene.value.getObjectsByProperty("uuid",o.nodeId);if(!a)return;if(s&&n&&n.parent&&s.remove(n),a.isMesh){const l=tIe(a);a.add(l),n=l,s=a}o.state={object:[{key:"uuid",editable:!0,value:a.uuid},{key:"name",editable:!0,value:a.name},{key:"type",editable:!0,value:a.type},{key:"position",editable:!0,value:a.position},{key:"rotation",editable:!0,value:a.rotation},{key:"scale",editable:!0,value:a.scale},{key:"geometry",value:a.geometry},{key:"material",value:a.material},{key:"color",editable:!0,value:a.color},{key:"intensity",editable:!0,value:a.intensity},{key:"castShadow",editable:!0,value:a.castShadow},{key:"receiveShadow",editable:!0,value:a.receiveShadow},{key:"frustumCulled",editable:!0,value:a.frustumCulled},{key:"matrixAutoUpdate",editable:!0,value:a.matrixAutoUpdate},{key:"matrixWorldNeedsUpdate",editable:!0,value:a.matrixWorldNeedsUpdate},{key:"matrixWorld",value:a.matrixWorld},{key:"visible",editable:!0,value:a.visible}]}}}),i.on.editInspectorState(o=>{o.inspectorId===Ux&&eIe(e.scene.value,o.nodeId,o.path,o.state.value)})})}const AIe=["data-scene","data-tres"],iV=Td({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},disableRender:{type:Boolean,default:void 0},context:{},precision:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},logarithmicDepthBuffer:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0}},setup(r,{expose:e}){var i;const n=r,s=JL(),{logWarning:o}=SP(),a=lt(),l=br(new jy),{resume:c}=v0(),u=(i=Ol())==null?void 0:i.appContext.app,d=_=>Td({setup(){var x;const O=(x=Ol())==null?void 0:x.appContext;return O&&(O.app=u),mw("useTres",_),mw("extend",eV),typeof window<"u"&&TIe(O.app,_),()=>nE(Fn,null,s!=null&&s.default?s.default():[])}}),p=_=>{const x=d(_);pIe(nE(x),l.value)},m=(_,x=!1)=>{l.value.children=[],x&&(_.renderer.value.dispose(),_.renderer.value.renderLists.dispose(),_.renderer.value.forceContextLoss()),p(_),c()},g=tr(()=>n.disableRender),y=br(null);return e({context:y,dispose:()=>m(y.value,!0)}),nr(()=>{const _=a;y.value=dIe({scene:l.value,canvas:_,windowSize:n.windowSize,disableRender:g,rendererOptions:n}),hIe({scene:l.value,contextParts:y.value});const{registerCamera:x,camera:O,cameras:S,deregisterCamera:w}=y.value;p(y.value);const C=()=>{const M=new $n(45,window.innerWidth/window.innerHeight,.1,1e3);M.position.set(3,3,3),M.lookAt(0,0,0),x(M);const P=_d(()=>{S.value.length>=2&&(M.removeFromParent(),w(M),P==null||P())})};tn(()=>n.camera,(M,P)=>{M&&x(M),P&&(P.removeFromParent(),w(P))},{immediate:!0}),O.value||(o("No camera found. Creating a default perspective camera. To have full control over a camera, please add one to the scene."),C())}),(_,x)=>(ci(),pn("canvas",{ref_key:"canvas",ref:a,"data-scene":l.value.uuid,class:b_(_.$attrs.class),"data-tres":`tresjs ${li($3e).version}`,style:Up({display:"block",width:"100%",height:"100%",position:_.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",..._.$attrs.style})},null,14,AIe))}}),EIe={install(r){r.component("TresCanvas",iV)}};/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function Ir(r){return r==null}function nV(r){return r!==null&&typeof r=="object"}function f5(r){return r!==null&&typeof r=="object"}function MIe(r,e){if(r.length!==e.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==e[i])return!1;return!0}function Zg(r,e){return Array.from(new Set([...Object.keys(r),...Object.keys(e)])).reduce((n,s)=>{const o=r[s],a=e[s];return f5(o)&&f5(a)?Object.assign(Object.assign({},n),{[s]:Zg(o,a)}):Object.assign(Object.assign({},n),{[s]:s in e?a:o})},{})}function PIe(r){return nV(r)?"target"in r:!1}const kIe={alreadydisposed:()=>"View has been already disposed",invalidparams:r=>`Invalid parameters for '${r.name}'`,nomatchingcontroller:r=>`No matching controller for '${r.key}'`,nomatchingview:r=>`No matching view for '${JSON.stringify(r.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:r=>`Not compatible with  plugin '${r.id}'`,propertynotfound:r=>`Property '${r.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class ul{static alreadyDisposed(){return new ul({type:"alreadydisposed"})}static notBindable(){return new ul({type:"notbindable"})}static notCompatible(e,i){return new ul({type:"notcompatible",context:{id:`${e}.${i}`}})}static propertyNotFound(e){return new ul({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new ul({type:"shouldneverhappen"})}constructor(e){var i;this.message=(i=kIe[e.type](e.context))!==null&&i!==void 0?i:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class mE{constructor(e,i){this.obj_=e,this.key=i}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,i){const n=this.read();if(!mE.isBindable(n))throw ul.notBindable();if(!(e in n))throw ul.propertyNotFound(e);n[e]=i}}class Al{constructor(){this.observers_={}}on(e,i,n){var s;let o=this.observers_[e];return o||(o=this.observers_[e]=[]),o.push({handler:i,key:(s=n==null?void 0:n.key)!==null&&s!==void 0?s:i}),this}off(e,i){const n=this.observers_[e];return n&&(this.observers_[e]=n.filter(s=>s.key!==i)),this}emit(e,i){const n=this.observers_[e];n&&n.forEach(s=>{s.handler(i)})}}class IIe{constructor(e,i){var n;this.constraint_=i==null?void 0:i.constraint,this.equals_=(n=i==null?void 0:i.equals)!==null&&n!==void 0?n:(s,o)=>s===o,this.emitter=new Al,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,i){const n=i??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,s)&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:n,previousRawValue:o,rawValue:s,sender:this}))}}class RIe{constructor(e){this.emitter=new Al,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,i){const n=i??{forceEmit:!1,last:!0},s=this.value_;s===e&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:this.value_,sender:this}))}}class BIe{constructor(e){this.emitter=new Al,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Hs(r,e){const i=e==null?void 0:e.constraint,n=e==null?void 0:e.equals;return!i&&!n?new RIe(r):new IIe(r,e)}function DIe(r){return[new BIe(r),(e,i)=>{r.setRawValue(e,i)}]}class Mn{constructor(e){this.emitter=new Al,this.valMap_=e;for(const i in this.valMap_)this.valMap_[i].emitter.on("change",()=>{this.emitter.emit("change",{key:i,sender:this})})}static createCore(e){return Object.keys(e).reduce((n,s)=>Object.assign(n,{[s]:Hs(e[s])}),{})}static fromObject(e){const i=this.createCore(e);return new Mn(i)}get(e){return this.valMap_[e].rawValue}set(e,i){this.valMap_[e].rawValue=i}value(e){return this.valMap_[e]}}class CP{constructor(e){this.values=Mn.fromObject({max:e.max,min:e.min})}constrain(e){const i=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),i)}}class LIe{constructor(e){this.values=Mn.fromObject({max:e.max,min:e.min})}constrain(e){const i=this.values.get("max"),n=this.values.get("min");let s=e;return Ir(n)||(s=Math.max(s,n)),Ir(i)||(s=Math.min(s,i)),s}}class NIe{constructor(e,i=0){this.step=e,this.origin=i}constrain(e){const i=this.origin%this.step,n=Math.round((e-i)/this.step);return i+n*this.step}}class VIe{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const FIe={"**":(r,e)=>Math.pow(r,e),"*":(r,e)=>r*e,"/":(r,e)=>r/e,"%":(r,e)=>r%e,"+":(r,e)=>r+e,"-":(r,e)=>r-e,"<<":(r,e)=>r<<e,">>":(r,e)=>r>>e,">>>":(r,e)=>r>>>e,"&":(r,e)=>r&e,"^":(r,e)=>r^e,"|":(r,e)=>r|e};class $Ie{constructor(e,i,n){this.left=i,this.operator=e,this.right=n}evaluate(){const e=FIe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const UIe={"+":r=>r,"-":r=>-r,"~":r=>~r};class zIe{constructor(e,i){this.operator=e,this.expression=i}evaluate(){const e=UIe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function rV(r){return(e,i)=>{for(let n=0;n<r.length;n++){const s=r[n](e,i);if(s!=="")return s}return""}}function Rw(r,e){var i;const n=r.substr(e).match(/^\s+/);return(i=n&&n[0])!==null&&i!==void 0?i:""}function XIe(r,e){const i=r.substr(e,1);return i.match(/^[1-9]$/)?i:""}function Bw(r,e){var i;const n=r.substr(e).match(/^[0-9]+/);return(i=n&&n[0])!==null&&i!==void 0?i:""}function WIe(r,e){const i=Bw(r,e);if(i!=="")return i;const n=r.substr(e,1);if(e+=1,n!=="-"&&n!=="+")return"";const s=Bw(r,e);return s===""?"":n+s}function sV(r,e){const i=r.substr(e,1);if(e+=1,i.toLowerCase()!=="e")return"";const n=WIe(r,e);return n===""?"":i+n}function mee(r,e){const i=r.substr(e,1);if(i==="0")return i;const n=XIe(r,e);return e+=n.length,n===""?"":n+Bw(r,e)}function GIe(r,e){const i=mee(r,e);if(e+=i.length,i==="")return"";const n=r.substr(e,1);if(e+=n.length,n!==".")return"";const s=Bw(r,e);return e+=s.length,i+n+s+sV(r,e)}function HIe(r,e){const i=r.substr(e,1);if(e+=i.length,i!==".")return"";const n=Bw(r,e);return e+=n.length,n===""?"":i+n+sV(r,e)}function QIe(r,e){const i=mee(r,e);return e+=i.length,i===""?"":i+sV(r,e)}const jIe=rV([GIe,HIe,QIe]);function YIe(r,e){var i;const n=r.substr(e).match(/^[01]+/);return(i=n&&n[0])!==null&&i!==void 0?i:""}function qIe(r,e){const i=r.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0b")return"";const n=YIe(r,e);return n===""?"":i+n}function ZIe(r,e){var i;const n=r.substr(e).match(/^[0-7]+/);return(i=n&&n[0])!==null&&i!==void 0?i:""}function KIe(r,e){const i=r.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0o")return"";const n=ZIe(r,e);return n===""?"":i+n}function JIe(r,e){var i;const n=r.substr(e).match(/^[0-9a-f]+/i);return(i=n&&n[0])!==null&&i!==void 0?i:""}function eRe(r,e){const i=r.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0x")return"";const n=JIe(r,e);return n===""?"":i+n}const tRe=rV([qIe,KIe,eRe]),iRe=rV([tRe,jIe]);function nRe(r,e){const i=iRe(r,e);return e+=i.length,i===""?null:{evaluable:new VIe(i),cursor:e}}function rRe(r,e){const i=r.substr(e,1);if(e+=i.length,i!=="(")return null;const n=vee(r,e);if(!n)return null;e=n.cursor,e+=Rw(r,e).length;const s=r.substr(e,1);return e+=s.length,s!==")"?null:{evaluable:n.evaluable,cursor:e}}function sRe(r,e){var i;return(i=nRe(r,e))!==null&&i!==void 0?i:rRe(r,e)}function gee(r,e){const i=sRe(r,e);if(i)return i;const n=r.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;const s=gee(r,e);return s?(e=s.cursor,{cursor:e,evaluable:new zIe(n,s.evaluable)}):null}function oRe(r,e,i){i+=Rw(e,i).length;const n=r.filter(s=>e.startsWith(s,i))[0];return n?(i+=n.length,i+=Rw(e,i).length,{cursor:i,operator:n}):null}function aRe(r,e){return(i,n)=>{const s=r(i,n);if(!s)return null;n=s.cursor;let o=s.evaluable;for(;;){const a=oRe(e,i,n);if(!a)break;n=a.cursor;const l=r(i,n);if(!l)return null;n=l.cursor,o=new $Ie(a.operator,o,l.evaluable)}return o?{cursor:n,evaluable:o}:null}}const lRe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((r,e)=>aRe(r,e),gee);function vee(r,e){return e+=Rw(r,e).length,lRe(r,e)}function hRe(r){const e=vee(r,0);return!e||e.cursor+Rw(r,e.cursor).length!==r.length?null:e.evaluable}function Tp(r){var e;const i=hRe(r);return(e=i==null?void 0:i.evaluate())!==null&&e!==void 0?e:null}function yee(r){if(typeof r=="number")return r;if(typeof r=="string"){const e=Tp(r);if(!Ir(e))return e}return 0}function Da(r){return e=>e.toFixed(Math.max(Math.min(r,20),0))}function Bn(r,e,i,n,s){const o=(r-e)/(i-e);return n+o*(s-n)}function Z7(r){return String(r.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ts(r,e,i){return Math.min(Math.max(r,e),i)}function _ee(r,e){return(r%e+e)%e}function cRe(r,e){return Ir(r.step)?Math.max(Z7(e),2):Z7(r.step)}function xee(r){var e;return(e=r.step)!==null&&e!==void 0?e:1}function uRe(r,e){var i;const n=Math.abs((i=r.step)!==null&&i!==void 0?i:e);return n===0?.1:Math.pow(10,Math.floor(Math.log10(n))-1)}function bee(r,e){return Ir(r.step)?null:new NIe(r.step,e)}function wee(r){return!Ir(r.max)&&!Ir(r.min)?new CP({max:r.max,min:r.min}):!Ir(r.max)||!Ir(r.min)?new LIe({max:r.max,min:r.min}):null}function Oee(r,e){var i,n,s;return{formatter:(i=r.format)!==null&&i!==void 0?i:Da(cRe(r,e)),keyScale:(n=r.keyScale)!==null&&n!==void 0?n:xee(r),pointerScale:(s=r.pointerScale)!==null&&s!==void 0?s:uRe(r,e)}}function See(r){return{format:r.optional.function,keyScale:r.optional.number,max:r.optional.number,min:r.optional.number,pointerScale:r.optional.number,step:r.optional.number}}function oV(r){return{constraint:r.constraint,textProps:Mn.fromObject(Oee(r.params,r.initialValue))}}class aV{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class TP{constructor(e){this.target=e}}class Cee extends TP{constructor(e,i,n){super(e),this.value=i,this.last=n??!0}}class dRe extends TP{constructor(e,i){super(e),this.expanded=i}}class fRe extends TP{constructor(e,i){super(e),this.index=i}}class pRe extends TP{constructor(e,i){super(e),this.native=i}}class lV extends aV{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Al,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,i){const n=i.bind(this);return this.emitter_.on(e,s=>{n(s)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const i=this.controller.value;this.emitter_.emit("change",new Cee(this,i.binding.target.read(),e.options.last))}}function mRe(r,e){const n=Object.keys(e).reduce((s,o)=>{if(s===void 0)return;const a=e[o],l=a(r[o]);return l.succeeded?Object.assign(Object.assign({},s),{[o]:l.value}):void 0},{});return n}function gRe(r,e){return r.reduce((i,n)=>{if(i===void 0)return;const s=e(n);if(!(!s.succeeded||s.value===void 0))return[...i,s.value]},[])}function vRe(r){return r===null?!1:typeof r=="object"}function Fu(r){return e=>i=>{if(!e&&i===void 0)return{succeeded:!1,value:void 0};if(e&&i===void 0)return{succeeded:!0,value:void 0};const n=r(i);return n!==void 0?{succeeded:!0,value:n}:{succeeded:!1,value:void 0}}}function K7(r){return{custom:e=>Fu(e)(r),boolean:Fu(e=>typeof e=="boolean"?e:void 0)(r),number:Fu(e=>typeof e=="number"?e:void 0)(r),string:Fu(e=>typeof e=="string"?e:void 0)(r),function:Fu(e=>typeof e=="function"?e:void 0)(r),constant:e=>Fu(i=>i===e?e:void 0)(r),raw:Fu(e=>e)(r),object:e=>Fu(i=>{if(vRe(i))return mRe(i,e)})(r),array:e=>Fu(i=>{if(Array.isArray(i))return gRe(i,e)})(r)}}const p5={optional:K7(!0),required:K7(!1)};function Po(r,e){const i=e(p5),n=p5.required.object(i)(r);return n.succeeded?n.value:void 0}function xu(r,e,i,n){if(e&&!e(r))return!1;const s=Po(r,i);return s?n(s):!1}function bu(r,e){var i;return Zg((i=r==null?void 0:r())!==null&&i!==void 0?i:{},e)}function gA(r){return"value"in r}function yRe(r){if(!nV(r)||!("binding"in r))return!1;const e=r.binding;return PIe(e)}const qc="http://www.w3.org/2000/svg";function gE(r){r.offsetHeight}function _Re(r,e){const i=r.style.transition;r.style.transition="none",e(),r.style.transition=i}function hV(r){return r.ontouchstart!==void 0}function xRe(r){const e=r.ownerDocument.defaultView;return e&&"document"in e?r.getContext("2d",{willReadFrequently:!0}):null}const bRe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function AP(r,e){const i=r.createElementNS(qc,"svg");return i.innerHTML=bRe[e],i}function Tee(r,e,i){r.insertBefore(e,r.children[i])}function cV(r){r.parentElement&&r.parentElement.removeChild(r)}function Aee(r){for(;r.children.length>0;)r.removeChild(r.children[0])}function wRe(r){for(;r.childNodes.length>0;)r.removeChild(r.childNodes[0])}function Eee(r){return r.relatedTarget?r.relatedTarget:"explicitOriginalTarget"in r?r.explicitOriginalTarget:null}function wd(r,e){r.emitter.on("change",i=>{e(i.rawValue)}),e(r.rawValue)}function cu(r,e,i){wd(r.value(e),i)}const ORe="tp";function Pn(r){return(i,n)=>[ORe,"-",r,"v",i?`_${i}`:"",n?`-${n}`:""].join("")}const zx=Pn("lbl");function SRe(r,e){const i=r.createDocumentFragment();return e.split(`
`).map(s=>r.createTextNode(s)).forEach((s,o)=>{o>0&&i.appendChild(r.createElement("br")),i.appendChild(s)}),i}class CRe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(zx()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(zx("l")),cu(i.props,"label",o=>{Ir(o)?this.element.classList.add(zx(void 0,"nol")):(this.element.classList.remove(zx(void 0,"nol")),wRe(n),n.appendChild(SRe(e,o)))}),this.element.appendChild(n),this.labelElement=n;const s=e.createElement("div");s.classList.add(zx("v")),this.element.appendChild(s),this.valueElement=s}}class TRe{constructor(e,i){this.props=i.props,this.valueController=i.valueController,this.viewProps=i.valueController.viewProps,this.view=new CRe(e,{props:i.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return xu(e,null,i=>({label:i.optional.string}),i=>(this.props.set("label",i.label),!0))}exportProps(){return bu(null,{label:this.props.get("label")})}}function ARe(){return["veryfirst","first","last","verylast"]}const J7=Pn(""),eX={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Mee{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const i=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ARe().forEach(n=>{i.classList.remove(J7(void 0,eX[n]))}),this.blade.get("positions").forEach(n=>{i.classList.add(J7(void 0,eX[n]))})}),this.viewProps.handleDispose(()=>{cV(i)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return xu(e,null,i=>({disabled:i.required.boolean,hidden:i.required.boolean}),i=>(this.viewProps.importState(i),!0))}exportState(){return bu(null,Object.assign({},this.viewProps.exportState()))}}class ERe extends aV{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,i){const n=i.bind(this);return this.controller.buttonController.emitter.on(e,o=>{n(new pRe(this,o.nativeEvent))}),this}off(e,i){return this.controller.buttonController.emitter.off(e,i),this}}function MRe(r,e,i){i?r.classList.add(e):r.classList.remove(e)}function I_(r,e){return i=>{MRe(r,e,i)}}function uV(r,e){wd(r,i=>{e.textContent=i??""})}const kI=Pn("btn");class PRe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(kI()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("button");n.classList.add(kI("b")),i.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const s=e.createElement("div");s.classList.add(kI("t")),uV(i.props.value("title"),s),this.buttonElement.appendChild(s)}}class kRe{constructor(e,i){this.emitter=new Al,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new PRe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return xu(e,null,i=>({title:i.optional.string}),i=>(this.props.set("title",i.title),!0))}exportProps(){return bu(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class tX extends Mee{constructor(e,i){const n=new kRe(e,{props:i.buttonProps,viewProps:i.viewProps}),s=new TRe(e,{blade:i.blade,props:i.labelProps,valueController:n});super({blade:i.blade,view:s.view,viewProps:i.viewProps}),this.buttonController=n,this.labelController=s}importState(e){return xu(e,i=>super.importState(i)&&this.buttonController.importProps(i)&&this.labelController.importProps(i),()=>({}),()=>!0)}exportState(){return bu(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Pee{constructor(e){const[i,n]=e.split("-"),s=i.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=n??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const IRe=new Pee("2.0.3");function na(r){return Object.assign({core:IRe},r)}na({id:"button",type:"blade",accept(r){const e=Po(r,i=>({title:i.required.string,view:i.required.constant("button"),label:i.optional.string}));return e?{params:e}:null},controller(r){return new tX(r.document,{blade:r.blade,buttonProps:Mn.fromObject({title:r.params.title}),labelProps:Mn.fromObject({label:r.params.label}),viewProps:r.viewProps})},api(r){return r.controller instanceof tX?new ERe(r.controller):null}});function RRe(r,e){return r.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function BRe(r,e){return r.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function DRe(r,e){return r.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function LRe(r){return nV(r)?"refresh"in r&&typeof r.refresh=="function":!1}function NRe(r,e){if(!mE.isBindable(r))throw ul.notBindable();return new mE(r,e)}class VRe{constructor(e,i){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Al,this.pool_=i,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,i,n){const s=n??{},o=this.controller_.element.ownerDocument,a=this.pool_.createBinding(o,NRe(e,i),s),l=this.pool_.createBindingApi(a);return this.add(l,s.index)}addFolder(e){return BRe(this,e)}addButton(e){return RRe(this,e)}addTab(e){return DRe(this,e)}add(e,i){const n=e.controller;return this.controller_.rack.add(n,i),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const i=this.controller_.element.ownerDocument,n=this.pool_.createBlade(i,e),s=this.pool_.createApi(n);return this.add(s,e.index)}on(e,i){const n=i.bind(this);return this.emitter_.on(e,s=>{n(s)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}refresh(){this.children.forEach(e=>{LRe(e)&&e.refresh()})}onRackValueChange_(e){const i=e.bladeController,n=this.pool_.createApi(i),s=yRe(i.value)?i.value.binding:null;this.emitter_.emit("change",new Cee(n,s?s.target.read():i.value.rawValue,e.options.last))}}class dV extends aV{constructor(e,i){super(e),this.rackApi_=new VRe(e.rackController,i)}refresh(){this.rackApi_.refresh()}}class fV extends Mee{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return xu(e,i=>super.importState(i),i=>({children:i.required.array(i.required.raw)}),i=>this.rackController.rack.children.every((n,s)=>n.importState(i.children[s])))}exportState(){return bu(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function m5(r){return"rackController"in r}class FRe{constructor(e){this.emitter=new Al,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const i of this.allItems())if(e(i))return i;return null}includes(e){return this.cache_.has(e)}add(e,i){if(this.includes(e))throw ul.shouldNeverHappen();const n=i!==void 0?i:this.items_.length;this.items_.splice(n,0,e),this.cache_.add(e);const s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:n,item:e,root:this,target:this})}remove(e){const i=this.items_.indexOf(e);if(i<0)return;this.items_.splice(i,1),this.cache_.delete(e);const n=this.extract_(e);n&&(n.allItems().forEach(s=>{this.cache_.delete(s)}),n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:i,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function $Re(r,e){for(let i=0;i<r.length;i++){const n=r[i];if(gA(n)&&n.value===e)return n}return null}function URe(r){return m5(r)?r.rackController.rack.bcSet_:null}class zRe{constructor(e){var i,n;this.emitter=new Al,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(i=e.blade)!==null&&i!==void 0?i:null,(n=this.blade_)===null||n===void 0||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new FRe(URe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,i){var n;(n=e.parent)===null||n===void 0||n.remove(e),e.parent=this,this.bcSet_.add(e,i)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const i=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:i,sender:this}),!i)return;const n=e.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),gA(n))n.value.emitter.on("change",this.onChildValueChange_);else if(m5(n)){const s=n.rackController.rack;if(s){const o=s.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const i=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:i,sender:this}),!i)return;const n=e.item;if(gA(n))n.value.emitter.off("change",this.onChildValueChange_);else if(m5(n)){const s=n.rackController.rack;if(s){const o=s.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),i=e[0],n=e[e.length-1];this.bcSet_.items.forEach(s=>{const o=[];s===i&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),s===n&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),s.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(i=>i.viewProps.get("disposed")).forEach(i=>{this.bcSet_.remove(i)})}onChildValueChange_(e){const i=$Re(this.find(gA),e.sender);if(!i)throw ul.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:i,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class pV{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const i=new zRe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});i.emitter.on("add",this.onRackAdd_),i.emitter.on("remove",this.onRackRemove_),this.rack=i,this.viewProps.handleDispose(()=>{for(let n=this.rack.children.length-1;n>=0;n--)this.rack.children[n].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Tee(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&cV(e.bladeController.view.element)}}function kee(){return new Mn({positions:Hs([],{equals:MIe})})}class HO extends Mn{constructor(e){super(e)}static create(e){const i={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=Mn.createCore(i);return new HO(n)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ir(e)?`${e}px`:"auto"}bindExpandedClass(e,i){const n=()=>{this.styleExpanded?e.classList.add(i):e.classList.remove(i)};cu(this,"expanded",n),cu(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function XRe(r,e){let i=0;return _Re(e,()=>{r.set("expandedHeight",null),r.set("temporaryExpanded",!0),gE(e),i=e.clientHeight,r.set("temporaryExpanded",null),gE(e)}),i}function iX(r,e){e.style.height=r.styleHeight}function mV(r,e){r.value("expanded").emitter.on("beforechange",()=>{if(r.set("completed",!1),Ir(r.get("expandedHeight"))){const i=XRe(r,e);i>0&&r.set("expandedHeight",i)}r.set("shouldFixHeight",!0),gE(e)}),r.emitter.on("change",()=>{iX(r,e)}),iX(r,e),e.addEventListener("transitionend",i=>{i.propertyName==="height"&&r.cleanUpTransition()})}class WRe extends dV{constructor(e,i){super(e,i),this.emitter_=new Al,this.controller.foldable.value("expanded").emitter.on("change",n=>{this.emitter_.emit("fold",new dRe(this,n.sender.rawValue))}),this.rackApi_.on("change",n=>{this.emitter_.emit("change",n)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,i,n){return this.rackApi_.addBinding(e,i,n)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,i){return this.rackApi_.add(e,i)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,i){const n=i.bind(this);return this.emitter_.on(e,s=>{n(s)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}}const Iee=Pn("cnt");class GRe{constructor(e,i){var n;this.className_=Pn((n=i.viewName)!==null&&n!==void 0?n:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Iee()),i.viewProps.bindClassModifiers(this.element),this.foldable_=i.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),cu(this.foldable_,"completed",I_(this.element,this.className_(void 0,"cpl")));const s=e.createElement("button");s.classList.add(this.className_("b")),cu(i.props,"title",u=>{Ir(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),i.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const a=e.createElement("div");a.classList.add(this.className_("t")),uV(i.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const c=e.createElement("div");c.classList.add(this.className_("c")),this.element.appendChild(c),this.containerElement=c}}class nX extends fV{constructor(e,i){var n;const s=HO.create((n=i.expanded)!==null&&n!==void 0?n:!0),o=new GRe(e,{foldable:s,props:i.props,viewName:i.root?"rot":void 0,viewProps:i.viewProps});super(Object.assign(Object.assign({},i),{rackController:new pV({blade:i.blade,element:o.containerElement,root:i.root,viewProps:i.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=i.props,this.foldable=s,mV(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return xu(e,i=>super.importState(i),i=>({expanded:i.required.boolean,title:i.optional.string}),i=>(this.foldable.set("expanded",i.expanded),this.props.set("title",i.title),!0))}exportState(){return bu(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}na({id:"folder",type:"blade",accept(r){const e=Po(r,i=>({title:i.required.string,view:i.required.constant("folder"),expanded:i.optional.boolean}));return e?{params:e}:null},controller(r){return new nX(r.document,{blade:r.blade,expanded:r.params.expanded,props:Mn.fromObject({title:r.params.title}),viewProps:r.viewProps})},api(r){return r.controller instanceof nX?new WRe(r.controller,r.pool):null}});const HRe=Pn("");function rX(r,e){return I_(r,HRe(void 0,e))}class QO extends Mn{constructor(e){var i;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=DIe(Hs(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(i=this.get("parent"))===null||i===void 0||i.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var i,n,s;const o=e??{};return new QO(Mn.createCore({disabled:(i=o.disabled)!==null&&i!==void 0?i:!1,disposed:!1,hidden:(n=o.hidden)!==null&&n!==void 0?n:!1,parent:(s=o.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){wd(this.globalDisabled_,rX(e,"disabled")),cu(this,"hidden",rX(e,"hidden"))}bindDisabled(e){wd(this.globalDisabled_,i=>{e.disabled=i})}bindTabIndex(e){wd(this.globalDisabled_,i=>{e.tabIndex=i?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",i=>{i&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var i;const n=e.previousRawValue;n==null||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(i=this.get("parent"))===null||i===void 0||i.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const sX=Pn("tbp");class QRe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(sX()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(sX("c")),this.element.appendChild(n),this.containerElement=n}}const Xx=Pn("tbi");class jRe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(Xx()),i.viewProps.bindClassModifiers(this.element),cu(i.props,"selected",o=>{o?this.element.classList.add(Xx(void 0,"sel")):this.element.classList.remove(Xx(void 0,"sel"))});const n=e.createElement("button");n.classList.add(Xx("b")),i.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const s=e.createElement("div");s.classList.add(Xx("t")),uV(i.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class YRe{constructor(e,i){this.emitter=new Al,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new jRe(e,{props:i.props,viewProps:i.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class g5 extends fV{constructor(e,i){const n=new QRe(e,{viewProps:i.viewProps});super(Object.assign(Object.assign({},i),{rackController:new pV({blade:i.blade,element:n.containerElement,viewProps:i.viewProps}),view:n})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new YRe(e,{props:i.itemProps,viewProps:QO.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=i.props,cu(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(e){return xu(e,i=>super.importState(i),i=>({selected:i.required.boolean,title:i.required.string}),i=>(this.ic_.props.set("selected",i.selected),this.ic_.props.set("title",i.title),!0))}exportState(){return bu(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class qRe extends dV{constructor(e,i){super(e,i),this.emitter_=new Al,this.onSelect_=this.onSelect_.bind(this),this.pool_=i,this.rackApi_.on("change",n=>{this.emitter_.emit("change",n)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const i=this.controller.view.element.ownerDocument,n=new g5(i,{blade:kee(),itemProps:Mn.fromObject({selected:!1,title:e.title}),props:Mn.fromObject({selected:!1}),viewProps:QO.create()}),s=this.pool_.createApi(n);return this.rackApi_.add(s,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,i){const n=i.bind(this);return this.emitter_.on(e,s=>{n(s)},{key:i}),this}off(e,i){return this.emitter_.off(e,i),this}onSelect_(e){this.emitter_.emit("select",new fRe(this,e.rawValue))}}class ZRe extends dV{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,i){this.rackApi_.add(e,i)}remove(e){this.rackApi_.remove(e)}addBinding(e,i,n){return this.rackApi_.addBinding(e,i,n)}addBlade(e){return this.rackApi_.addBlade(e)}}const oX=-1;class KRe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Hs(!0),this.selectedIndex=Hs(oX),this.items_=[]}add(e,i){const n=i??this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const i=this.items_.indexOf(e);i<0||(this.items_.splice(i,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=oX,this.empty.rawValue=!0;return}const e=this.items_.findIndex(i=>i.rawValue);e<0?(this.items_.forEach((i,n)=>{i.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((i,n)=>{i.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const i=this.items_.findIndex(n=>n===e.sender);this.items_.forEach((n,s)=>{n.rawValue=s===i}),this.selectedIndex.rawValue=i}else this.keepSelection_()}}const Wx=Pn("tab");class JRe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(Wx(),Iee()),i.viewProps.bindClassModifiers(this.element),wd(i.empty,I_(this.element,Wx(void 0,"nop")));const n=e.createElement("div");n.classList.add(Wx("t")),this.element.appendChild(n),this.itemsElement=n;const s=e.createElement("div");s.classList.add(Wx("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(Wx("c")),this.element.appendChild(o),this.contentsElement=o}}class aX extends fV{constructor(e,i){const n=new KRe,s=new JRe(e,{empty:n.empty,viewProps:i.viewProps});super({blade:i.blade,rackController:new pV({blade:i.blade,element:s.contentsElement,viewProps:i.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=n}add(e,i){this.rackController.rack.add(e,i)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const i=e.bladeController;Tee(this.view.itemsElement,i.itemController.view.element,e.index),i.itemController.viewProps.set("parent",this.viewProps),this.tab.add(i.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const i=e.bladeController;cV(i.itemController.view.element),i.itemController.viewProps.set("parent",null),this.tab.remove(i.props.value("selected"))}}na({id:"tab",type:"blade",accept(r){const e=Po(r,i=>({pages:i.required.array(i.required.object({title:i.required.string})),view:i.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(r){const e=new aX(r.document,{blade:r.blade,viewProps:r.viewProps});return r.params.pages.forEach(i=>{const n=new g5(r.document,{blade:kee(),itemProps:Mn.fromObject({selected:!1,title:i.title}),props:Mn.fromObject({selected:!1}),viewProps:QO.create()});e.add(n)}),e},api(r){return r.controller instanceof aX?new qRe(r.controller,r.pool):r.controller instanceof g5?new ZRe(r.controller,r.pool):null}});class gV extends lV{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class jO{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((i,n)=>n.constrain(i),e)}}function vE(r,e){if(r instanceof e)return r;if(r instanceof jO){const i=r.constraints.reduce((n,s)=>n||(s instanceof e?s:null),null);if(i)return i}return null}class EP{constructor(e){this.values=Mn.fromObject({options:e})}constrain(e){const i=this.values.get("options");return i.length===0||i.filter(s=>s.value===e).length>0?e:i[0].value}}function MP(r){var e;const i=p5;if(Array.isArray(r))return(e=Po({items:r},n=>({items:n.required.array(n.required.object({text:n.required.string,value:n.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof r=="object")return i.required.raw(r).value}function Ree(r){if(Array.isArray(r))return r;const e=[];return Object.keys(r).forEach(i=>{e.push({text:i,value:r[i]})}),e}function vV(r){return Ir(r)?null:new EP(Ree(r))}const II=Pn("lst");class eBe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.props_=i.props,this.element=e.createElement("div"),this.element.classList.add(II()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("select");n.classList.add(II("s")),i.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const s=e.createElement("div");s.classList.add(II("m")),s.appendChild(AP(e,"dropdown")),this.element.appendChild(s),i.value.emitter.on("change",this.onValueChange_),this.value_=i.value,cu(this.props_,"options",o=>{Aee(this.selectElement),o.forEach(a=>{const l=e.createElement("option");l.textContent=a.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(i=>i.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class e_{constructor(e,i){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new eBe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const i=e.currentTarget;this.value.rawValue=this.props.get("options")[i.selectedIndex].value}importProps(e){return xu(e,null,i=>({options:i.required.custom(MP)}),i=>(this.props.set("options",Ree(i.options)),!0))}exportProps(){return bu(null,{options:this.props.get("options")})}}const lX=Pn("pop");class tBe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(lX()),i.viewProps.bindClassModifiers(this.element),wd(i.shows,I_(this.element,lX(void 0,"v")))}}class Bee{constructor(e,i){this.shows=Hs(!1),this.viewProps=i.viewProps,this.view=new tBe(e,{shows:this.shows,viewProps:this.viewProps})}}const hX=Pn("txt");let iBe=class{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(hX()),i.viewProps.bindClassModifiers(this.element),this.props_=i.props,this.props_.emitter.on("change",this.onChange_);const n=e.createElement("input");n.classList.add(hX("i")),n.type="text",i.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,i.value.emitter.on("change",this.onChange_),this.value_=i.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}};class yV{constructor(e,i){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=i.parser,this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new iBe(e,{props:i.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget.value,s=this.parser_(n);Ir(s)||(this.value.rawValue=s),this.view.refresh()}}function nBe(r){return String(r)}function Dee(r){return r==="false"?!1:!!r}function cX(r){return nBe(r)}function rBe(r){return e=>r.reduce((i,n)=>i!==null?i:n(e),null)}const sBe=Da(0);function yE(r){return sBe(r)+"%"}function Lee(r){return String(r)}function v5(r){return r}function R_({primary:r,secondary:e,forward:i,backward:n}){let s=!1;function o(a){s||(s=!0,a(),s=!1)}r.emitter.on("change",a=>{o(()=>{e.setRawValue(i(r.rawValue,e.rawValue),a.options)})}),e.emitter.on("change",a=>{o(()=>{r.setRawValue(n(r.rawValue,e.rawValue),a.options)}),o(()=>{e.setRawValue(i(r.rawValue,e.rawValue),a.options)})}),o(()=>{e.setRawValue(i(r.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ta(r,e){const i=r*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+i:e.downKey?-i:0}function Dw(r){return{altKey:r.altKey,downKey:r.key==="ArrowDown",shiftKey:r.shiftKey,upKey:r.key==="ArrowUp"}}function Id(r){return{altKey:r.altKey,downKey:r.key==="ArrowLeft",shiftKey:r.shiftKey,upKey:r.key==="ArrowRight"}}function oBe(r){return r==="ArrowUp"||r==="ArrowDown"}function Nee(r){return oBe(r)||r==="ArrowLeft"||r==="ArrowRight"}function RI(r,e){var i,n;const s=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:r.pageX-(((i=s&&s.scrollX)!==null&&i!==void 0?i:0)+o.left),y:r.pageY-(((n=s&&s.scrollY)!==null&&n!==void 0?n:0)+o.top)}}class y0{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Al,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const i=this.elem_.getBoundingClientRect();return{bounds:{width:i.width,height:i.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var i;e.preventDefault(),(i=e.currentTarget)===null||i===void 0||i.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(RI(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(RI(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const i=this.elem_.ownerDocument;i.removeEventListener("mousemove",this.onDocumentMouseMove_),i.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(RI(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const i=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-n.left,y:i.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=i}onTouchMove_(e){const i=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-n.left,y:i.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=i}onTouchEnd_(e){var i;const n=(i=e.targetTouches.item(0))!==null&&i!==void 0?i:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-s.left,y:n.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Ll=Pn("txt");class aBe{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Ll(),Ll(void 0,"num")),i.arrayPosition&&this.element.classList.add(Ll(void 0,i.arrayPosition)),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(Ll("i")),n.type="text",i.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=i.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ll()),this.inputElement.classList.add(Ll("i"));const s=e.createElement("div");s.classList.add(Ll("k")),this.element.appendChild(s),this.knobElement=s;const o=e.createElementNS(qc,"svg");o.classList.add(Ll("g")),this.knobElement.appendChild(o);const a=e.createElementNS(qc,"path");a.classList.add(Ll("gb")),o.appendChild(a),this.guideBodyElem_=a;const l=e.createElementNS(qc,"path");l.classList.add(Ll("gh")),o.appendChild(l),this.guideHeadElem_=l;const c=e.createElement("div");c.classList.add(Pn("tt")()),this.knobElement.appendChild(c),this.tooltipElem_=c,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Ll(void 0,"drg"));return}this.element.classList.add(Ll(void 0,"drg"));const i=e.rawValue/this.props_.get("pointerScale"),n=i+(i>0?-1:i<0?1:0),s=Ts(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+s},0 L${n},4 L${n+s},8`,`M ${i},-1 L${i},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${i},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${i}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class YO{constructor(e,i){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=i.parser,this.props=i.props,this.sliderProps_=(n=i.sliderProps)!==null&&n!==void 0?n:null,this.value=i.value,this.viewProps=i.viewProps,this.dragging_=Hs(null),this.view=new aBe(e,{arrayPosition:i.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new y0(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var i,n;const s=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("min"),o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("max");let a=e;return s!==void 0&&(a=Math.max(a,s)),o!==void 0&&(a=Math.min(a,o)),a}onInputChange_(e){const n=e.currentTarget.value,s=this.parser_(n);Ir(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(e){const i=Ta(this.props.get("keyScale"),Dw(e));i!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+i),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ta(this.props.get("keyScale"),Dw(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const i=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+i*this.props.get("pointerScale"))}onPointerMove_(e){const i=this.computeDraggingValue_(e.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const i=this.computeDraggingValue_(e.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const BI=Pn("sld");class lBe{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(BI()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(BI("t")),i.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const s=e.createElement("div");s.classList.add(BI("k")),this.trackElement.appendChild(s),this.knobElement=s,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.update_()}update_(){const e=Ts(Bn(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class hBe{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.props=i.props,this.view=new lBe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new y0(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){e.point&&this.value.setRawValue(Bn(Ts(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),i)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=Ta(this.props.get("keyScale"),Id(e));i!==0&&this.value.setRawValue(this.value.rawValue+i,{forceEmit:!1,last:!1})}onKeyUp_(e){Ta(this.props.get("keyScale"),Id(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const DI=Pn("sldtxt");class cBe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(DI());const n=e.createElement("div");n.classList.add(DI("s")),this.sliderView_=i.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const s=e.createElement("div");s.classList.add(DI("t")),this.textView_=i.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class uX{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.sliderC_=new hBe(e,{props:i.sliderProps,value:i.value,viewProps:this.viewProps}),this.textC_=new YO(e,{parser:i.parser,props:i.textProps,sliderProps:i.sliderProps,value:i.value,viewProps:i.viewProps}),this.view=new cBe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return xu(e,null,i=>({max:i.required.number,min:i.required.number}),i=>{const n=this.sliderC_.props;return n.set("max",i.max),n.set("min",i.min),!0})}exportProps(){const e=this.sliderC_.props;return bu(null,{max:e.get("max"),min:e.get("min")})}}function uBe(r){return{sliderProps:new Mn({keyScale:r.keyScale,max:r.max,min:r.min}),textProps:new Mn({formatter:Hs(r.formatter),keyScale:r.keyScale,pointerScale:Hs(r.pointerScale)})}}const dBe={containerUnitSize:"cnt-usz"};function Vee(r){return`--${dBe[r]}`}function Lw(r){return See(r)}function ip(r){if(f5(r))return Po(r,Lw)}function dd(r,e){if(!r)return;const i=[],n=bee(r,e);n&&i.push(n);const s=wee(r);return s&&i.push(s),new jO(i)}function Fee(r){if(r==="inline"||r==="popup")return r}function qO(r,e){r.write(e)}const O2=Pn("ckb");class fBe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(O2()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("label");n.classList.add(O2("l")),this.element.appendChild(n),this.labelElement=n;const s=e.createElement("input");s.classList.add(O2("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,i.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(O2("w")),this.labelElement.appendChild(o);const a=AP(e,"check");o.appendChild(a),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class pBe{constructor(e,i){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new fBe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const i=e.currentTarget;this.value.rawValue=i.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function mBe(r){const e=[],i=vV(r.options);return i&&e.push(i),new jO(e)}na({id:"input-bool",type:"input",accept:(r,e)=>{if(typeof r!="boolean")return null;const i=Po(e,n=>({options:n.optional.custom(MP),readonly:n.optional.constant(!1)}));return i?{initialValue:r,params:i}:null},binding:{reader:r=>Dee,constraint:r=>mBe(r.params),writer:r=>qO},controller:r=>{const e=r.document,i=r.value,n=r.constraint,s=n&&vE(n,EP);return s?new e_(e,{props:new Mn({options:s.values.value("options")}),value:i,viewProps:r.viewProps}):new pBe(e,{value:i,viewProps:r.viewProps})},api(r){return typeof r.controller.value.rawValue!="boolean"?null:r.controller.valueController instanceof e_?new gV(r.controller):null}});const Pm=Pn("col");class gBe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(Pm()),i.foldable.bindExpandedClass(this.element,Pm(void 0,"expanded")),cu(i.foldable,"completed",I_(this.element,Pm(void 0,"cpl")));const n=e.createElement("div");n.classList.add(Pm("h")),this.element.appendChild(n);const s=e.createElement("div");s.classList.add(Pm("s")),n.appendChild(s),this.swatchElement=s;const o=e.createElement("div");if(o.classList.add(Pm("t")),n.appendChild(o),this.textElement=o,i.pickerLayout==="inline"){const a=e.createElement("div");a.classList.add(Pm("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}function vBe(r,e,i){const n=Ts(r/255,0,1),s=Ts(e/255,0,1),o=Ts(i/255,0,1),a=Math.max(n,s,o),l=Math.min(n,s,o),c=a-l;let u=0,d=0;const p=(l+a)/2;return c!==0&&(d=c/(1-Math.abs(a+l-1)),n===a?u=(s-o)/c:s===a?u=2+(o-n)/c:u=4+(n-s)/c,u=u/6+(u<0?1:0)),[u*360,d*100,p*100]}function yBe(r,e,i){const n=(r%360+360)%360,s=Ts(e/100,0,1),o=Ts(i/100,0,1),a=(1-Math.abs(2*o-1))*s,l=a*(1-Math.abs(n/60%2-1)),c=o-a/2;let u,d,p;return n>=0&&n<60?[u,d,p]=[a,l,0]:n>=60&&n<120?[u,d,p]=[l,a,0]:n>=120&&n<180?[u,d,p]=[0,a,l]:n>=180&&n<240?[u,d,p]=[0,l,a]:n>=240&&n<300?[u,d,p]=[l,0,a]:[u,d,p]=[a,0,l],[(u+c)*255,(d+c)*255,(p+c)*255]}function _Be(r,e,i){const n=Ts(r/255,0,1),s=Ts(e/255,0,1),o=Ts(i/255,0,1),a=Math.max(n,s,o),l=Math.min(n,s,o),c=a-l;let u;c===0?u=0:a===n?u=60*(((s-o)/c%6+6)%6):a===s?u=60*((o-n)/c+2):u=60*((n-s)/c+4);const d=a===0?0:c/a,p=a;return[u,d*100,p*100]}function $ee(r,e,i){const n=_ee(r,360),s=Ts(e/100,0,1),o=Ts(i/100,0,1),a=o*s,l=a*(1-Math.abs(n/60%2-1)),c=o-a;let u,d,p;return n>=0&&n<60?[u,d,p]=[a,l,0]:n>=60&&n<120?[u,d,p]=[l,a,0]:n>=120&&n<180?[u,d,p]=[0,a,l]:n>=180&&n<240?[u,d,p]=[0,l,a]:n>=240&&n<300?[u,d,p]=[l,0,a]:[u,d,p]=[a,0,l],[(u+c)*255,(d+c)*255,(p+c)*255]}function xBe(r,e,i){const n=i+e*(100-Math.abs(2*i-100))/200;return[r,n!==0?e*(100-Math.abs(2*i-100))/n:0,i+e*(100-Math.abs(2*i-100))/(2*100)]}function bBe(r,e,i){const n=100-Math.abs(i*(200-e)/100-100);return[r,n!==0?e*i/n:0,i*(200-e)/(2*100)]}function uu(r){return[r[0],r[1],r[2]]}function PP(r,e){return[r[0],r[1],r[2],e]}const wBe={hsl:{hsl:(r,e,i)=>[r,e,i],hsv:xBe,rgb:yBe},hsv:{hsl:bBe,hsv:(r,e,i)=>[r,e,i],rgb:$ee},rgb:{hsl:vBe,hsv:_Be,rgb:(r,e,i)=>[r,e,i]}};function t_(r,e){return[e==="float"?1:r==="rgb"?255:360,e==="float"?1:r==="rgb"?255:100,e==="float"?1:r==="rgb"?255:100]}function OBe(r,e){return r===e?e:_ee(r,e)}function Uee(r,e,i){var n;const s=t_(e,i);return[e==="rgb"?Ts(r[0],0,s[0]):OBe(r[0],s[0]),Ts(r[1],0,s[1]),Ts(r[2],0,s[2]),Ts((n=r[3])!==null&&n!==void 0?n:1,0,1)]}function dX(r,e,i,n){const s=t_(e,i),o=t_(e,n);return r.map((a,l)=>a/s[l]*o[l])}function zee(r,e,i){const n=dX(r,e.mode,e.type,"int"),s=wBe[e.mode][i.mode](...n);return dX(s,i.mode,"int",i.type)}class Cn{static black(){return new Cn([0,0,0],"rgb")}constructor(e,i){this.type="int",this.mode=i,this.comps_=Uee(e,i,this.type)}getComponents(e){return PP(zee(uu(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Sf=Pn("colp");class SBe{constructor(e,i){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Sf()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Sf("hsv"));const s=e.createElement("div");s.classList.add(Sf("sv")),this.svPaletteView_=i.svPaletteView,s.appendChild(this.svPaletteView_.element),n.appendChild(s);const o=e.createElement("div");o.classList.add(Sf("h")),this.hPaletteView_=i.hPaletteView,o.appendChild(this.hPaletteView_.element),n.appendChild(o),this.element.appendChild(n);const a=e.createElement("div");if(a.classList.add(Sf("rgb")),this.textsView_=i.textsView,a.appendChild(this.textsView_.element),this.element.appendChild(a),i.alphaViews){this.alphaViews_={palette:i.alphaViews.palette,text:i.alphaViews.text};const l=e.createElement("div");l.classList.add(Sf("a"));const c=e.createElement("div");c.classList.add(Sf("ap")),c.appendChild(this.alphaViews_.palette.element),l.appendChild(c);const u=e.createElement("div");u.classList.add(Sf("at")),u.appendChild(this.alphaViews_.text.element),l.appendChild(u),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(i=>i.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function CBe(r){return r==="int"?"int":r==="float"?"float":void 0}function _V(r){return Po(r,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(CBe)}),expanded:e.optional.boolean,picker:e.optional.custom(Fee),readonly:e.optional.constant(!1)}))}function Kg(r){return r?.1:1}function Xee(r){var e;return(e=r.color)===null||e===void 0?void 0:e.type}class xV{constructor(e,i){this.type="float",this.mode=i,this.comps_=Uee(e,i,this.type)}getComponents(e){return PP(zee(uu(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const TBe={int:(r,e)=>new Cn(r,e),float:(r,e)=>new xV(r,e)};function bV(r,e,i){return TBe[i](r,e)}function ABe(r){return r.type==="float"}function EBe(r){return r.type==="int"}function MBe(r){const e=r.getComponents(),i=t_(r.mode,"int");return new Cn([Math.round(Bn(e[0],0,1,0,i[0])),Math.round(Bn(e[1],0,1,0,i[1])),Math.round(Bn(e[2],0,1,0,i[2])),e[3]],r.mode)}function PBe(r){const e=r.getComponents(),i=t_(r.mode,"int");return new xV([Bn(e[0],0,i[0],0,1),Bn(e[1],0,i[1],0,1),Bn(e[2],0,i[2],0,1),e[3]],r.mode)}function Zo(r,e){if(r.type===e)return r;if(EBe(r)&&e==="float")return PBe(r);if(ABe(r)&&e==="int")return MBe(r);throw ul.shouldNeverHappen()}function kBe(r,e){return r.alpha===e.alpha&&r.mode===e.mode&&r.notation===e.notation&&r.type===e.type}function oh(r,e){const i=r.match(/^(.+)%$/);return Math.min(i?parseFloat(i[1])*.01*e:parseFloat(r),e)}const IBe={deg:r=>r,grad:r=>r*360/400,rad:r=>r*360/(2*Math.PI),turn:r=>r*360};function Wee(r){const e=r.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(r);const i=parseFloat(e[1]),n=e[2];return IBe[n](i)}function Gee(r){const e=r.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[oh(e[1],255),oh(e[2],255),oh(e[3],255)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function RBe(r){const e=Gee(r);return e?new Cn(e,"rgb"):null}function Hee(r){const e=r.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[oh(e[1],255),oh(e[2],255),oh(e[3],255),oh(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function BBe(r){const e=Hee(r);return e?new Cn(e,"rgb"):null}function Qee(r){const e=r.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Wee(e[1]),oh(e[2],100),oh(e[3],100)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function DBe(r){const e=Qee(r);return e?new Cn(e,"hsl"):null}function jee(r){const e=r.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Wee(e[1]),oh(e[2],100),oh(e[3],100),oh(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function LBe(r){const e=jee(r);return e?new Cn(e,"hsl"):null}function Yee(r){const e=r.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const i=r.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function NBe(r){const e=Yee(r);return e?new Cn(e,"rgb"):null}function qee(r){const e=r.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Bn(parseInt(e[4]+e[4],16),0,255,0,1)];const i=r.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),Bn(parseInt(i[4],16),0,255,0,1)]:null}function VBe(r){const e=qee(r);return e?new Cn(e,"rgb"):null}function Zee(r){const e=r.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function FBe(r){return e=>{const i=Zee(e);return i?bV(i,"rgb",r):null}}function Kee(r){const e=r.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function $Be(r){return e=>{const i=Kee(e);return i?bV(i,"rgb",r):null}}const UBe=[{parser:Yee,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:qee,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Gee,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Hee,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Qee,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:jee,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Zee,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Kee,result:{alpha:!0,mode:"rgb",notation:"object"}}];function zBe(r){return UBe.reduce((e,{parser:i,result:n})=>e||(i(r)?n:null),null)}function XBe(r,e="int"){const i=zBe(r);return i?i.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},i),{type:"int"}):i.notation==="func"?Object.assign(Object.assign({},i),{type:e}):null:null}function ZO(r){const e=[NBe,VBe,RBe,BBe,DBe,LBe];e.push(FBe("int"),$Be("int"));const i=rBe(e);return n=>{const s=i(n);return s?Zo(s,r):null}}function WBe(r){const e=ZO("int");if(typeof r!="string")return Cn.black();const i=e(r);return i??Cn.black()}function Jee(r){const e=Ts(Math.floor(r),0,255).toString(16);return e.length===1?`0${e}`:e}function wV(r,e="#"){const i=uu(r.getComponents("rgb")).map(Jee).join("");return`${e}${i}`}function OV(r,e="#"){const i=r.getComponents("rgb"),n=[i[0],i[1],i[2],i[3]*255].map(Jee).join("");return`${e}${n}`}function ete(r){const e=Da(0),i=Zo(r,"int");return`rgb(${uu(i.getComponents("rgb")).map(s=>e(s)).join(", ")})`}function vA(r){const e=Da(2),i=Da(0);return`rgba(${Zo(r,"int").getComponents("rgb").map((o,a)=>(a===3?e:i)(o)).join(", ")})`}function GBe(r){const e=[Da(0),yE,yE],i=Zo(r,"int");return`hsl(${uu(i.getComponents("hsl")).map((s,o)=>e[o](s)).join(", ")})`}function HBe(r){const e=[Da(0),yE,yE,Da(2)];return`hsla(${Zo(r,"int").getComponents("hsl").map((s,o)=>e[o](s)).join(", ")})`}function tte(r,e){const i=Da(e==="float"?2:0),n=["r","g","b"],s=Zo(r,e);return`{${uu(s.getComponents("rgb")).map((a,l)=>`${n[l]}: ${i(a)}`).join(", ")}}`}function QBe(r){return e=>tte(e,r)}function ite(r,e){const i=Da(2),n=Da(e==="float"?2:0),s=["r","g","b","a"];return`{${Zo(r,e).getComponents("rgb").map((l,c)=>{const u=c===3?i:n;return`${s[c]}: ${u(l)}`}).join(", ")}}`}function jBe(r){return e=>ite(e,r)}const YBe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:wV},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:OV},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:ete},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:vA},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:GBe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:HBe},...["int","float"].reduce((r,e)=>[...r,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:QBe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:jBe(e)}],[])];function nte(r){return YBe.reduce((e,i)=>e||(kBe(i.format,r)?i.stringifier:null),null)}const Gx=Pn("apl");class qBe{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Gx()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(Gx("b")),this.element.appendChild(n);const s=e.createElement("div");s.classList.add(Gx("c")),n.appendChild(s),this.colorElem_=s;const o=e.createElement("div");o.classList.add(Gx("m")),this.element.appendChild(o),this.markerElem_=o;const a=e.createElement("div");a.classList.add(Gx("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}update_(){const e=this.value.rawValue,i=e.getComponents("rgb"),n=new Cn([i[0],i[1],i[2],0],"rgb"),s=new Cn([i[0],i[1],i[2],255],"rgb"),o=["to right",vA(n),vA(s)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=vA(e);const a=Bn(i[3],0,1,0,100);this.markerElem_.style.left=`${a}%`}onValueChange_(){this.update_()}}class ZBe{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new qBe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new y0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const n=e.point.x/e.bounds.width,s=this.value.rawValue,[o,a,l]=s.getComponents("hsv");this.value.setRawValue(new Cn([o,a,l,n],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=Ta(Kg(!0),Id(e));if(i===0)return;const n=this.value.rawValue,[s,o,a,l]=n.getComponents("hsv");this.value.setRawValue(new Cn([s,o,a,l+i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ta(Kg(!0),Id(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const pv=Pn("coltxt");function KBe(r){const e=r.createElement("select"),i=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(i.reduce((n,s)=>{const o=r.createElement("option");return o.textContent=s.text,o.value=s.value,n.appendChild(o),n},r.createDocumentFragment())),e}class JBe{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(pv()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(pv("m")),this.modeElem_=KBe(e),this.modeElem_.classList.add(pv("ms")),n.appendChild(this.modeSelectElement),i.viewProps.bindDisabled(this.modeElem_);const s=e.createElement("div");s.classList.add(pv("mm")),s.appendChild(AP(e,"dropdown")),n.appendChild(s),this.element.appendChild(n);const o=e.createElement("div");o.classList.add(pv("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=i.inputViews,this.applyInputViews_(),wd(i.mode,a=>{this.modeElem_.value=a})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Aee(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(i=>{const n=e.createElement("div");n.classList.add(pv("c")),n.appendChild(i.element),this.inputsElem_.appendChild(n)})}}function e4e(r){return Da(r==="float"?2:0)}function t4e(r,e,i){const n=t_(r,e)[i];return new CP({min:0,max:n})}function i4e(r,e,i){return new YO(r,{arrayPosition:i===0?"fst":i===2?"lst":"mid",parser:e.parser,props:Mn.fromObject({formatter:e4e(e.colorType),keyScale:Kg(!1),pointerScale:e.colorType==="float"?.01:1}),value:Hs(0,{constraint:t4e(e.colorMode,e.colorType,i)}),viewProps:e.viewProps})}function n4e(r,e){const i={colorMode:e.colorMode,colorType:e.colorType,parser:Tp,viewProps:e.viewProps};return[0,1,2].map(n=>{const s=i4e(r,i,n);return R_({primary:e.value,secondary:s.value,forward(o){return Zo(o,e.colorType).getComponents(e.colorMode)[n]},backward(o,a){const l=e.colorMode,u=Zo(o,e.colorType).getComponents(l);u[n]=a;const d=bV(PP(uu(u),u[3]),l,e.colorType);return Zo(d,"int")}}),s})}function r4e(r,e){const i=new yV(r,{parser:ZO("int"),props:Mn.fromObject({formatter:wV}),value:Hs(Cn.black()),viewProps:e.viewProps});return R_({primary:e.value,secondary:i.value,forward:n=>new Cn(uu(n.getComponents()),n.mode),backward:(n,s)=>new Cn(PP(uu(s.getComponents(n.mode)),n.getComponents()[3]),n.mode)}),[i]}function s4e(r){return r!=="hex"}class o4e{constructor(e,i){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=i.colorType,this.value=i.value,this.viewProps=i.viewProps,this.colorMode=Hs(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new JBe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const i=this.colorMode.rawValue;return s4e(i)?n4e(e,{colorMode:i,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):r4e(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const i=e.currentTarget;this.colorMode.rawValue=i.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(n=>n.view)}}const LI=Pn("hpl");class a4e{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(LI()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const n=e.createElement("div");n.classList.add(LI("c")),this.element.appendChild(n);const s=e.createElement("div");s.classList.add(LI("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=this.value.rawValue,[i]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=ete(new Cn([i,100,100],"hsv"));const n=Bn(i,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class l4e{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new a4e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new y0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const n=Bn(Ts(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),s=this.value.rawValue,[,o,a,l]=s.getComponents("hsv");this.value.setRawValue(new Cn([n,o,a,l],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=Ta(Kg(!1),Id(e));if(i===0)return;const n=this.value.rawValue,[s,o,a,l]=n.getComponents("hsv");this.value.setRawValue(new Cn([s+i,o,a,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ta(Kg(!1),Id(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const NI=Pn("svp"),fX=64;class h4e{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(NI()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const n=e.createElement("canvas");n.height=fX,n.width=fX,n.classList.add(NI("c")),this.element.appendChild(n),this.canvasElement=n;const s=e.createElement("div");s.classList.add(NI("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=xRe(this.canvasElement);if(!e)return;const n=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,o=this.canvasElement.height,a=e.getImageData(0,0,s,o),l=a.data;for(let d=0;d<o;d++)for(let p=0;p<s;p++){const m=Bn(p,0,s,0,100),g=Bn(d,0,o,100,0),y=$ee(n[0],m,g),_=(d*s+p)*4;l[_]=y[0],l[_+1]=y[1],l[_+2]=y[2],l[_+3]=255}e.putImageData(a,0,0);const c=Bn(n[1],0,100,0,100);this.markerElem_.style.left=`${c}%`;const u=Bn(n[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}}class c4e{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new h4e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new y0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const n=Bn(e.point.x,0,e.bounds.width,0,100),s=Bn(e.point.y,0,e.bounds.height,100,0),[o,,,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Cn([o,n,s,a],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Nee(e.key)&&e.preventDefault();const[i,n,s,o]=this.value.rawValue.getComponents("hsv"),a=Kg(!1),l=Ta(a,Id(e)),c=Ta(a,Dw(e));l===0&&c===0||this.value.setRawValue(new Cn([i,n+l,s+c,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const i=Kg(!1),n=Ta(i,Id(e)),s=Ta(i,Dw(e));n===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class u4e{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.hPaletteC_=new l4e(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new c4e(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=i.supportsAlpha?{palette:new ZBe(e,{value:this.value,viewProps:this.viewProps}),text:new YO(e,{parser:Tp,props:Mn.fromObject({pointerScale:.01,keyScale:.1,formatter:Da(2)}),value:Hs(0,{constraint:new CP({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&R_({primary:this.value,secondary:this.alphaIcs_.text.value,forward:n=>n.getComponents()[3],backward:(n,s)=>{const o=n.getComponents();return o[3]=s,new Cn(o,n.mode)}}),this.textsC_=new o4e(e,{colorType:i.colorType,value:this.value,viewProps:this.viewProps}),this.view=new SBe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:i.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const VI=Pn("colsw");class d4e{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.element=e.createElement("div"),this.element.classList.add(VI()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(VI("sw")),this.element.appendChild(n),this.swatchElem_=n;const s=e.createElement("button");s.classList.add(VI("b")),i.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=OV(e)}onValueChange_(){this.update_()}}class f4e{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new d4e(e,{value:this.value,viewProps:this.viewProps})}}class SV{constructor(e,i){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=HO.create(i.expanded),this.swatchC_=new f4e(e,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new yV(e,{parser:i.parser,props:Mn.fromObject({formatter:i.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new gBe(e,{foldable:this.foldable_,pickerLayout:i.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=i.pickerLayout==="popup"?new Bee(e,{viewProps:this.viewProps}):null;const s=new u4e(e,{colorType:i.colorType,supportsAlpha:i.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),R_({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),mV(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const i=this.view.element,n=e.relatedTarget;(!n||!i.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const i=this.popC_.view.element,n=Eee(e);n&&i.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!hV(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function p4e(r){return uu(r.getComponents("rgb")).reduce((e,i)=>e<<8|Math.floor(i)&255,0)}function m4e(r){return r.getComponents("rgb").reduce((e,i,n)=>{const s=Math.floor(n===3?i*255:i)&255;return e<<8|s},0)>>>0}function g4e(r){return new Cn([r>>16&255,r>>8&255,r&255],"rgb")}function v4e(r){return new Cn([r>>24&255,r>>16&255,r>>8&255,Bn(r&255,0,255,0,1)],"rgb")}function y4e(r){return typeof r!="number"?Cn.black():g4e(r)}function _4e(r){return typeof r!="number"?Cn.black():v4e(r)}function yA(r,e){return typeof r!="object"||Ir(r)?!1:e in r&&typeof r[e]=="number"}function rte(r){return yA(r,"r")&&yA(r,"g")&&yA(r,"b")}function ste(r){return rte(r)&&yA(r,"a")}function ote(r){return rte(r)}function CV(r,e){if(r.mode!==e.mode||r.type!==e.type)return!1;const i=r.getComponents(),n=e.getComponents();for(let s=0;s<i.length;s++)if(i[s]!==n[s])return!1;return!0}function pX(r){return"a"in r?[r.r,r.g,r.b,r.a]:[r.r,r.g,r.b]}function x4e(r){const e=nte(r);return e?(i,n)=>{qO(i,e(n))}:null}function b4e(r){const e=r?m4e:p4e;return(i,n)=>{qO(i,e(n))}}function w4e(r,e,i){const s=Zo(e,i).toRgbaObject();r.writeProperty("r",s.r),r.writeProperty("g",s.g),r.writeProperty("b",s.b),r.writeProperty("a",s.a)}function O4e(r,e,i){const s=Zo(e,i).toRgbaObject();r.writeProperty("r",s.r),r.writeProperty("g",s.g),r.writeProperty("b",s.b)}function S4e(r,e){return(i,n)=>{r?w4e(i,n,e):O4e(i,n,e)}}function C4e(r){var e;return!!(!((e=r==null?void 0:r.color)===null||e===void 0)&&e.alpha)}function T4e(r){return r?e=>OV(e,"0x"):e=>wV(e,"0x")}function A4e(r){return"color"in r||r.view==="color"}na({id:"input-color-number",type:"input",accept:(r,e)=>{if(typeof r!="number"||!A4e(e))return null;const i=_V(e);return i?{initialValue:r,params:Object.assign(Object.assign({},i),{supportsAlpha:C4e(e)})}:null},binding:{reader:r=>r.params.supportsAlpha?_4e:y4e,equals:CV,writer:r=>b4e(r.params.supportsAlpha)},controller:r=>{var e,i;return new SV(r.document,{colorType:"int",expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,formatter:T4e(r.params.supportsAlpha),parser:ZO("int"),pickerLayout:(i=r.params.picker)!==null&&i!==void 0?i:"popup",supportsAlpha:r.params.supportsAlpha,value:r.value,viewProps:r.viewProps})}});function E4e(r,e){if(!ote(r))return Zo(Cn.black(),e);if(e==="int"){const i=pX(r);return new Cn(i,"rgb")}if(e==="float"){const i=pX(r);return new xV(i,"rgb")}return Zo(Cn.black(),"int")}function M4e(r){return ste(r)}function P4e(r){return e=>{const i=E4e(e,r);return Zo(i,"int")}}function k4e(r,e){return i=>r?ite(i,e):tte(i,e)}na({id:"input-color-object",type:"input",accept:(r,e)=>{var i;if(!ote(r))return null;const n=_V(e);return n?{initialValue:r,params:Object.assign(Object.assign({},n),{colorType:(i=Xee(e))!==null&&i!==void 0?i:"int"})}:null},binding:{reader:r=>P4e(r.params.colorType),equals:CV,writer:r=>S4e(M4e(r.initialValue),r.params.colorType)},controller:r=>{var e,i;const n=ste(r.initialValue);return new SV(r.document,{colorType:r.params.colorType,expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,formatter:k4e(n,r.params.colorType),parser:ZO("int"),pickerLayout:(i=r.params.picker)!==null&&i!==void 0?i:"popup",supportsAlpha:n,value:r.value,viewProps:r.viewProps})}});na({id:"input-color-string",type:"input",accept:(r,e)=>{if(typeof r!="string"||e.view==="text")return null;const i=XBe(r,Xee(e));if(!i)return null;const n=nte(i);if(!n)return null;const s=_V(e);return s?{initialValue:r,params:Object.assign(Object.assign({},s),{format:i,stringifier:n})}:null},binding:{reader:()=>WBe,equals:CV,writer:r=>{const e=x4e(r.params.format);if(!e)throw ul.notBindable();return e}},controller:r=>{var e,i;return new SV(r.document,{colorType:r.params.format.type,expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,formatter:r.params.stringifier,parser:ZO("int"),pickerLayout:(i=r.params.picker)!==null&&i!==void 0?i:"popup",supportsAlpha:r.params.format.alpha,value:r.value,viewProps:r.viewProps})}});class TV{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const i=this.asm_.toComponents(e).map((n,s)=>{var o,a;return(a=(o=this.components[s])===null||o===void 0?void 0:o.constrain(n))!==null&&a!==void 0?a:n});return this.asm_.fromComponents(i)}}const mX=Pn("pndtxt");class I4e{constructor(e,i){this.textViews=i.textViews,this.element=e.createElement("div"),this.element.classList.add(mX()),this.textViews.forEach(n=>{const s=e.createElement("div");s.classList.add(mX("a")),s.appendChild(n.element),this.element.appendChild(s)})}}function R4e(r,e,i){return new YO(r,{arrayPosition:i===0?"fst":i===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[i].textProps,value:Hs(0,{constraint:e.axes[i].constraint}),viewProps:e.viewProps})}class AV{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.acs_=i.axes.map((n,s)=>R4e(e,i,s)),this.acs_.forEach((n,s)=>{R_({primary:this.value,secondary:n.value,forward:o=>i.assembly.toComponents(o)[s],backward:(o,a)=>{const l=i.assembly.toComponents(o);return l[s]=a,i.assembly.fromComponents(l)}})}),this.view=new I4e(e,{textViews:this.acs_.map(n=>n.view)})}get textControllers(){return this.acs_}}class B4e extends lV{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function D4e(r,e){const i=[],n=bee(r,e);n&&i.push(n);const s=wee(r);s&&i.push(s);const o=vV(r.options);return o&&i.push(o),new jO(i)}na({id:"input-number",type:"input",accept:(r,e)=>{if(typeof r!="number")return null;const i=Po(e,n=>Object.assign(Object.assign({},See(n)),{options:n.optional.custom(MP),readonly:n.optional.constant(!1)}));return i?{initialValue:r,params:i}:null},binding:{reader:r=>yee,constraint:r=>D4e(r.params,r.initialValue),writer:r=>qO},controller:r=>{const e=r.value,i=r.constraint,n=i&&vE(i,EP);if(n)return new e_(r.document,{props:new Mn({options:n.values.value("options")}),value:e,viewProps:r.viewProps});const s=Oee(r.params,e.rawValue),o=i&&vE(i,CP);return o?new uX(r.document,Object.assign(Object.assign({},uBe(Object.assign(Object.assign({},s),{keyScale:Hs(s.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:Tp,value:e,viewProps:r.viewProps})):new YO(r.document,{parser:Tp,props:Mn.fromObject(s),value:e,viewProps:r.viewProps})},api(r){return typeof r.controller.value.rawValue!="number"?null:r.controller.valueController instanceof uX?new B4e(r.controller):r.controller.valueController instanceof e_?new gV(r.controller):null}});class pp{constructor(e=0,i=0){this.x=e,this.y=i}getComponents(){return[this.x,this.y]}static isObject(e){if(Ir(e))return!1;const i=e.x,n=e.y;return!(typeof i!="number"||typeof n!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y}toObject(){return{x:this.x,y:this.y}}}const ate={toComponents:r=>r.getComponents(),fromComponents:r=>new pp(...r)},mv=Pn("p2d");class L4e{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(mv()),i.viewProps.bindClassModifiers(this.element),wd(i.expanded,I_(this.element,mv(void 0,"expanded")));const n=e.createElement("div");n.classList.add(mv("h")),this.element.appendChild(n);const s=e.createElement("button");s.classList.add(mv("b")),s.appendChild(AP(e,"p2dpad")),i.viewProps.bindDisabled(s),n.appendChild(s),this.buttonElement=s;const o=e.createElement("div");if(o.classList.add(mv("t")),n.appendChild(o),this.textElement=o,i.pickerLayout==="inline"){const a=e.createElement("div");a.classList.add(mv("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}const Cf=Pn("p2dp");class N4e{constructor(e,i){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Cf()),i.layout==="popup"&&this.element.classList.add(Cf(void 0,"p")),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(Cf("p")),i.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const s=e.createElementNS(qc,"svg");s.classList.add(Cf("g")),this.padElement.appendChild(s),this.svgElem_=s;const o=e.createElementNS(qc,"line");o.classList.add(Cf("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const a=e.createElementNS(qc,"line");a.classList.add(Cf("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);const l=e.createElementNS(qc,"line");l.classList.add(Cf("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const c=e.createElement("div");c.classList.add(Cf("m")),this.padElement.appendChild(c),this.markerElem_=c,i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,i]=this.value.rawValue.getComponents(),n=this.props_.get("max"),s=Bn(e,-n,+n,0,100),o=Bn(i,-n,+n,0,100),a=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${a}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function gX(r,e,i){return[Ta(e[0],Id(r)),Ta(e[1],Dw(r))*(i?1:-1)]}class V4e{constructor(e,i){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new N4e(e,{layout:i.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new y0(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const n=this.props.get("max"),s=Bn(e.point.x,0,e.bounds.width,-n,+n),o=Bn(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new pp(s,o),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Nee(e.key)&&e.preventDefault();const[i,n]=gX(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));i===0&&n===0||this.value.setRawValue(new pp(this.value.rawValue.x+i,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[i,n]=gX(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));i===0&&n===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class F4e{constructor(e,i){var n,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=HO.create(i.expanded),this.popC_=i.pickerLayout==="popup"?new Bee(e,{viewProps:this.viewProps}):null;const o=new V4e(e,{layout:i.pickerLayout,props:new Mn({invertsY:Hs(i.invertsY),max:Hs(i.max),xKeyScale:i.axes[0].textProps.value("keyScale"),yKeyScale:i.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(a=>{a.addEventListener("blur",this.onPopupChildBlur_),a.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new AV(e,{assembly:ate,axes:i.axes,parser:i.parser,value:this.value,viewProps:this.viewProps}),this.view=new L4e(e,{expanded:this.foldable_.value("expanded"),pickerLayout:i.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(n=this.view.buttonElement)===null||n===void 0||n.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),R_({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:a=>a,backward:(a,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),mV(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const i=this.view.element,n=e.relatedTarget;(!n||!i.contains(n))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const i=this.popC_.view.element,n=Eee(e);n&&i.contains(n)||n&&n===this.view.buttonElement&&!hV(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function $4e(r){return pp.isObject(r)?new pp(r.x,r.y):new pp}function U4e(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y)}function z4e(r,e){return new TV({assembly:ate,components:[dd(Object.assign(Object.assign({},r),r.x),e.x),dd(Object.assign(Object.assign({},r),r.y),e.y)]})}function vX(r,e){var i,n;if(!Ir(r.min)||!Ir(r.max))return Math.max(Math.abs((i=r.min)!==null&&i!==void 0?i:0),Math.abs((n=r.max)!==null&&n!==void 0?n:0));const s=xee(r);return Math.max(Math.abs(s)*10,Math.abs(e)*10)}function X4e(r,e){var i,n;const s=vX(Zg(r,(i=r.x)!==null&&i!==void 0?i:{}),e.x),o=vX(Zg(r,(n=r.y)!==null&&n!==void 0?n:{}),e.y);return Math.max(s,o)}function W4e(r){if(!("y"in r))return!1;const e=r.y;return e&&"inverted"in e?!!e.inverted:!1}na({id:"input-point2d",type:"input",accept:(r,e)=>{if(!pp.isObject(r))return null;const i=Po(e,n=>Object.assign(Object.assign({},Lw(n)),{expanded:n.optional.boolean,picker:n.optional.custom(Fee),readonly:n.optional.constant(!1),x:n.optional.custom(ip),y:n.optional.object(Object.assign(Object.assign({},Lw(n)),{inverted:n.optional.boolean}))}));return i?{initialValue:r,params:i}:null},binding:{reader:()=>$4e,constraint:r=>z4e(r.params,r.initialValue),equals:pp.equals,writer:()=>U4e},controller:r=>{var e,i;const n=r.document,s=r.value,o=r.constraint,a=[r.params.x,r.params.y];return new F4e(n,{axes:s.rawValue.getComponents().map((l,c)=>{var u;return oV({constraint:o.components[c],initialValue:l,params:Zg(r.params,(u=a[c])!==null&&u!==void 0?u:{})})}),expanded:(e=r.params.expanded)!==null&&e!==void 0?e:!1,invertsY:W4e(r.params),max:X4e(r.params,s.rawValue),parser:Tp,pickerLayout:(i=r.params.picker)!==null&&i!==void 0?i:"popup",value:s,viewProps:r.viewProps})}});class xy{constructor(e=0,i=0,n=0){this.x=e,this.y=i,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Ir(e))return!1;const i=e.x,n=e.y,s=e.z;return!(typeof i!="number"||typeof n!="number"||typeof s!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y&&e.z===i.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const lte={toComponents:r=>r.getComponents(),fromComponents:r=>new xy(...r)};function G4e(r){return xy.isObject(r)?new xy(r.x,r.y,r.z):new xy}function H4e(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z)}function Q4e(r,e){return new TV({assembly:lte,components:[dd(Object.assign(Object.assign({},r),r.x),e.x),dd(Object.assign(Object.assign({},r),r.y),e.y),dd(Object.assign(Object.assign({},r),r.z),e.z)]})}na({id:"input-point3d",type:"input",accept:(r,e)=>{if(!xy.isObject(r))return null;const i=Po(e,n=>Object.assign(Object.assign({},Lw(n)),{readonly:n.optional.constant(!1),x:n.optional.custom(ip),y:n.optional.custom(ip),z:n.optional.custom(ip)}));return i?{initialValue:r,params:i}:null},binding:{reader:r=>G4e,constraint:r=>Q4e(r.params,r.initialValue),equals:xy.equals,writer:r=>H4e},controller:r=>{const e=r.value,i=r.constraint,n=[r.params.x,r.params.y,r.params.z];return new AV(r.document,{assembly:lte,axes:e.rawValue.getComponents().map((s,o)=>{var a;return oV({constraint:i.components[o],initialValue:s,params:Zg(r.params,(a=n[o])!==null&&a!==void 0?a:{})})}),parser:Tp,value:e,viewProps:r.viewProps})}});class by{constructor(e=0,i=0,n=0,s=0){this.x=e,this.y=i,this.z=n,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Ir(e))return!1;const i=e.x,n=e.y,s=e.z,o=e.w;return!(typeof i!="number"||typeof n!="number"||typeof s!="number"||typeof o!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y&&e.z===i.z&&e.w===i.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const hte={toComponents:r=>r.getComponents(),fromComponents:r=>new by(...r)};function j4e(r){return by.isObject(r)?new by(r.x,r.y,r.z,r.w):new by}function Y4e(r,e){r.writeProperty("x",e.x),r.writeProperty("y",e.y),r.writeProperty("z",e.z),r.writeProperty("w",e.w)}function q4e(r,e){return new TV({assembly:hte,components:[dd(Object.assign(Object.assign({},r),r.x),e.x),dd(Object.assign(Object.assign({},r),r.y),e.y),dd(Object.assign(Object.assign({},r),r.z),e.z),dd(Object.assign(Object.assign({},r),r.w),e.w)]})}na({id:"input-point4d",type:"input",accept:(r,e)=>{if(!by.isObject(r))return null;const i=Po(e,n=>Object.assign(Object.assign({},Lw(n)),{readonly:n.optional.constant(!1),w:n.optional.custom(ip),x:n.optional.custom(ip),y:n.optional.custom(ip),z:n.optional.custom(ip)}));return i?{initialValue:r,params:i}:null},binding:{reader:r=>j4e,constraint:r=>q4e(r.params,r.initialValue),equals:by.equals,writer:r=>Y4e},controller:r=>{const e=r.value,i=r.constraint,n=[r.params.x,r.params.y,r.params.z,r.params.w];return new AV(r.document,{assembly:hte,axes:e.rawValue.getComponents().map((s,o)=>{var a;return oV({constraint:i.components[o],initialValue:s,params:Zg(r.params,(a=n[o])!==null&&a!==void 0?a:{})})}),parser:Tp,value:e,viewProps:r.viewProps})}});function Z4e(r){const e=[],i=vV(r.options);return i&&e.push(i),new jO(e)}na({id:"input-string",type:"input",accept:(r,e)=>{if(typeof r!="string")return null;const i=Po(e,n=>({readonly:n.optional.constant(!1),options:n.optional.custom(MP)}));return i?{initialValue:r,params:i}:null},binding:{reader:r=>Lee,constraint:r=>Z4e(r.params),writer:r=>qO},controller:r=>{const e=r.document,i=r.value,n=r.constraint,s=n&&vE(n,EP);return s?new e_(e,{props:new Mn({options:s.values.value("options")}),value:i,viewProps:r.viewProps}):new yV(e,{parser:o=>o,props:Mn.fromObject({formatter:v5}),value:i,viewProps:r.viewProps})},api(r){return typeof r.controller.value.rawValue!="string"?null:r.controller.valueController instanceof e_?new gV(r.controller):null}});const kP={monitor:{defaultInterval:200,defaultRows:3}},yX=Pn("mll");class K4e{constructor(e,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=e.createElement("div"),this.element.classList.add(yX()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("textarea");n.classList.add(yX("i")),n.style.height=`calc(var(${Vee("containerUnitSize")}) * ${i.rows})`,n.readOnly=!0,i.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const e=this.textareaElem_,i=e.scrollTop===e.scrollHeight-e.clientHeight,n=[];this.value.rawValue.forEach(s=>{s!==void 0&&n.push(this.formatter_(s))}),e.textContent=n.join(`
`),i&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class EV{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new K4e(e,{formatter:i.formatter,rows:i.rows,value:this.value,viewProps:this.viewProps})}}const _X=Pn("sgl");class J4e{constructor(e,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=e.createElement("div"),this.element.classList.add(_X()),i.viewProps.bindClassModifiers(this.element);const n=e.createElement("input");n.classList.add(_X("i")),n.readOnly=!0,n.type="text",i.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const e=this.value.rawValue,i=e[e.length-1];this.inputElement.value=i!==void 0?this.formatter_(i):""}onValueUpdate_(){this.update_()}}class MV{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new J4e(e,{formatter:i.formatter,value:this.value,viewProps:this.viewProps})}}na({id:"monitor-bool",type:"monitor",accept:(r,e)=>{if(typeof r!="boolean")return null;const i=Po(e,n=>({readonly:n.required.constant(!0),rows:n.optional.number}));return i?{initialValue:r,params:i}:null},binding:{reader:r=>Dee},controller:r=>{var e;return r.value.rawValue.length===1?new MV(r.document,{formatter:cX,value:r.value,viewProps:r.viewProps}):new EV(r.document,{formatter:cX,rows:(e=r.params.rows)!==null&&e!==void 0?e:kP.monitor.defaultRows,value:r.value,viewProps:r.viewProps})}});class e5e extends lV{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Tf=Pn("grl");class t5e{constructor(e,i){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Tf()),i.viewProps.bindClassModifiers(this.element),this.formatter_=i.formatter,this.props_=i.props,this.cursor_=i.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=e.createElementNS(qc,"svg");n.classList.add(Tf("g")),n.style.height=`calc(var(${Vee("containerUnitSize")}) * ${i.rows})`,this.element.appendChild(n),this.svgElem_=n;const s=e.createElementNS(qc,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const o=e.createElement("div");o.classList.add(Tf("t"),Pn("tt")()),this.element.appendChild(o),this.tooltipElem_=o,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:i}=this.element,n=this.value.rawValue.length-1,s=this.props_.get("min"),o=this.props_.get("max"),a=[];this.value.rawValue.forEach((p,m)=>{if(p===void 0)return;const g=Bn(m,0,n,0,e),y=Bn(p,s,o,i,0);a.push([g,y].join(","))}),this.lineElem_.setAttributeNS(null,"points",a.join(" "));const l=this.tooltipElem_,c=this.value.rawValue[this.cursor_.rawValue];if(c===void 0){l.classList.remove(Tf("t","a"));return}const u=Bn(this.cursor_.rawValue,0,n,0,e),d=Bn(c,s,o,i,0);l.style.left=`${u}px`,l.style.top=`${d}px`,l.textContent=`${this.formatter_(c)}`,l.classList.contains(Tf("t","a"))||(l.classList.add(Tf("t","a"),Tf("t","in")),gE(l),l.classList.remove(Tf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class cte{constructor(e,i){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.cursor_=Hs(-1),this.view=new t5e(e,{cursor:this.cursor_,formatter:i.formatter,rows:i.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!hV(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const n=new y0(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return xu(e,null,i=>({max:i.required.number,min:i.required.number}),i=>(this.props.set("max",i.max),this.props.set("min",i.min),!0))}exportProps(){return bu(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:i}=this.view.element;this.cursor_.rawValue=Math.floor(Bn(e.offsetX,0,i,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Bn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function y5(r){return Ir(r.format)?Da(2):r.format}function i5e(r){var e;return r.value.rawValue.length===1?new MV(r.document,{formatter:y5(r.params),value:r.value,viewProps:r.viewProps}):new EV(r.document,{formatter:y5(r.params),rows:(e=r.params.rows)!==null&&e!==void 0?e:kP.monitor.defaultRows,value:r.value,viewProps:r.viewProps})}function n5e(r){var e,i,n;return new cte(r.document,{formatter:y5(r.params),rows:(e=r.params.rows)!==null&&e!==void 0?e:kP.monitor.defaultRows,props:Mn.fromObject({max:(i=r.params.max)!==null&&i!==void 0?i:100,min:(n=r.params.min)!==null&&n!==void 0?n:0}),value:r.value,viewProps:r.viewProps})}function xX(r){return r.view==="graph"}na({id:"monitor-number",type:"monitor",accept:(r,e)=>{if(typeof r!="number")return null;const i=Po(e,n=>({format:n.optional.function,max:n.optional.number,min:n.optional.number,readonly:n.required.constant(!0),rows:n.optional.number,view:n.optional.string}));return i?{initialValue:r,params:i}:null},binding:{defaultBufferSize:r=>xX(r)?64:1,reader:r=>yee},controller:r=>xX(r.params)?n5e(r):i5e(r),api:r=>r.controller.valueController instanceof cte?new e5e(r.controller):null});na({id:"monitor-string",type:"monitor",accept:(r,e)=>{if(typeof r!="string")return null;const i=Po(e,n=>({multiline:n.optional.boolean,readonly:n.required.constant(!0),rows:n.optional.number}));return i?{initialValue:r,params:i}:null},binding:{reader:r=>Lee},controller:r=>{var e;const i=r.value;return i.rawValue.length>1||r.params.multiline?new EV(r.document,{formatter:v5,rows:(e=r.params.rows)!==null&&e!==void 0?e:kP.monitor.defaultRows,value:i,viewProps:r.viewProps}):new MV(r.document,{formatter:v5,value:i,viewProps:r.viewProps})}});new Pee("4.0.3");const r5e=parseInt(C_.replace(/\D+/g,""));var s5e=Object.defineProperty,o5e=(r,e,i)=>e in r?s5e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,a5e=(r,e,i)=>(o5e(r,e+"",i),i);async function bX(r){const e=await r.arrayBuffer(),i=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${r.type||""};base64,${i}`}let S2,FI,gv,C2;function $I(r,e=1/0,i=null){FI||(FI=new M_(2,2,1,1)),gv||(gv=new ea({uniforms:{blitTexture:new wP(r)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),gv.uniforms.blitTexture.value=r,gv.defines.IS_SRGB="colorSpace"in r?r.colorSpace==="srgb":r.encoding===3001,gv.needsUpdate=!0,C2||(C2=new Un(FI,gv),C2.frustrumCulled=!1);const n=new $n,s=new jy;s.add(C2),i||(i=S2=new Vb({antialias:!1})),i.setSize(Math.min(r.image.width,e),Math.min(r.image.height,e)),i.clear(),i.render(s,n);const o=new Xr(i.domElement);return o.minFilter=r.minFilter,o.magFilter=r.magFilter,o.wrapS=r.wrapS,o.wrapT=r.wrapT,o.name=r.name,S2&&(S2.dispose(),S2=null),o}const wX={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class ute{constructor(){this.pluginCallbacks=[],this.register(function(e){return new v5e(e)}),this.register(function(e){return new y5e(e)}),this.register(function(e){return new b5e(e)}),this.register(function(e){return new w5e(e)}),this.register(function(e){return new O5e(e)}),this.register(function(e){return new S5e(e)}),this.register(function(e){return new _5e(e)}),this.register(function(e){return new x5e(e)}),this.register(function(e){return new C5e(e)}),this.register(function(e){return new T5e(e)}),this.register(function(e){return new A5e(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,i,n,s){const o=new g5e,a=[];for(let l=0,c=this.pluginCallbacks.length;l<c;l++)a.push(this.pluginCallbacks[l](o));o.setPlugins(a),o.write(e,i,s).catch(n)}parseAsync(e,i){const n=this;return new Promise(function(s,o){n.parse(e,s,o,i)})}}a5e(ute,"Utils",{insertKeyframe:function(r,e){const i=r.getValueSize(),n=new r.TimeBufferType(r.times.length+1),s=new r.ValueBufferType(r.values.length+i),o=r.createInterpolant(new r.ValueBufferType(i));let a;if(r.times.length===0){n[0]=e;for(let l=0;l<i;l++)s[l]=0;a=0}else if(e<r.times[0]){if(Math.abs(r.times[0]-e)<.001)return 0;n[0]=e,n.set(r.times,1),s.set(o.evaluate(e),0),s.set(r.values,i),a=0}else if(e>r.times[r.times.length-1]){if(Math.abs(r.times[r.times.length-1]-e)<.001)return r.times.length-1;n[n.length-1]=e,n.set(r.times,0),s.set(r.values,0),s.set(o.evaluate(e),r.values.length),a=n.length-1}else for(let l=0;l<r.times.length;l++){if(Math.abs(r.times[l]-e)<.001)return l;if(r.times[l]<e&&r.times[l+1]>e){n.set(r.times.slice(0,l+1),0),n[l+1]=e,n.set(r.times.slice(l+1),l+2),s.set(r.values.slice(0,(l+1)*i),0),s.set(o.evaluate(e),(l+1)*i),s.set(r.values.slice((l+1)*i),(l+2)*i),a=l+1;break}}return r.times=n,r.values=s,a},mergeMorphTargetTracks:function(r,e){const i=[],n={},s=r.tracks;for(let o=0;o<s.length;++o){let a=s[o];const l=Gi.parseTrackName(a.name),c=Gi.findNode(e,l.nodeName);if(l.propertyName!=="morphTargetInfluences"||l.propertyIndex===void 0){i.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(Gy)}const u=c.morphTargetInfluences.length,d=c.morphTargetDictionary[l.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);let p;if(n[c.uuid]===void 0){p=a.clone();const g=new p.ValueBufferType(u*p.times.length);for(let y=0;y<p.times.length;y++)g[y*u+d]=p.values[y];p.name=(l.nodeName||"")+".morphTargetInfluences",p.values=g,n[c.uuid]=p,i.push(p);continue}const m=a.createInterpolant(new a.ValueBufferType(1));p=n[c.uuid];for(let g=0;g<p.times.length;g++)p.values[g*u+d]=m.evaluate(p.times[g]);for(let g=0;g<a.times.length;g++){const y=this.insertKeyframe(p,a.times[g]);p.values[y*u+d]=a.values[g]}}return r.tracks=i,r}});const hn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},UI="KHR_mesh_quantization",pl={};pl[Ss]=hn.NEAREST;pl[YM]=hn.NEAREST_MIPMAP_NEAREST;pl[cg]=hn.NEAREST_MIPMAP_LINEAR;pl[qr]=hn.LINEAR;pl[yy]=hn.LINEAR_MIPMAP_NEAREST;pl[qh]=hn.LINEAR_MIPMAP_LINEAR;pl[jo]=hn.CLAMP_TO_EDGE;pl[Cp]=hn.REPEAT;pl[zy]=hn.MIRRORED_REPEAT;const OX={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},l5e=new ut,SX=12,h5e=1179937895,c5e=2,CX=8,u5e=1313821514,d5e=5130562;function fb(r,e){return r.length===e.length&&r.every(function(i,n){return i===e[n]})}function f5e(r){return new TextEncoder().encode(r).buffer}function p5e(r){return fb(r.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function m5e(r,e,i){const n={min:new Array(r.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(r.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+i;s++)for(let o=0;o<r.itemSize;o++){let a;r.itemSize>4?a=r.array[s*r.itemSize+o]:(o===0?a=r.getX(s):o===1?a=r.getY(s):o===2?a=r.getZ(s):o===3&&(a=r.getW(s)),r.normalized===!0&&(a=yo.normalize(a,r.array))),n.min[o]=Math.min(n.min[o],a),n.max[o]=Math.max(n.max[o],a)}return n}function dte(r){return Math.ceil(r/4)*4}function zI(r,e=0){const i=dte(r.byteLength);if(i!==r.byteLength){const n=new Uint8Array(i);if(n.set(new Uint8Array(r)),e!==0)for(let s=r.byteLength;s<i;s++)n[s]=e;return n.buffer}return r}function TX(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function AX(r,e){if(r.toBlob!==void 0)return new Promise(n=>r.toBlob(n,e));let i;return e==="image/jpeg"?i=.92:e==="image/webp"&&(i=.8),r.convertToBlob({type:e,quality:i})}class g5e{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,i,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const s=this,o=s.buffers,a=s.json;n=s.options;const l=s.extensionsUsed,c=s.extensionsRequired,u=new Blob(o,{type:"application/octet-stream"}),d=Object.keys(l),p=Object.keys(c);d.length>0&&(a.extensionsUsed=d),p.length>0&&(a.extensionsRequired=p),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=u.size),n.binary===!0?u.arrayBuffer().then(m=>{const g=zI(m),y=new DataView(new ArrayBuffer(CX));y.setUint32(0,g.byteLength,!0),y.setUint32(4,d5e,!0);const _=zI(f5e(JSON.stringify(a)),32),x=new DataView(new ArrayBuffer(CX));x.setUint32(0,_.byteLength,!0),x.setUint32(4,u5e,!0);const O=new ArrayBuffer(SX),S=new DataView(O);S.setUint32(0,h5e,!0),S.setUint32(4,c5e,!0);const w=SX+x.byteLength+_.byteLength+y.byteLength+g.byteLength;S.setUint32(8,w,!0),new Blob([O,x,_,y,g],{type:"application/octet-stream"}).arrayBuffer().then(i)}):a.buffers&&a.buffers.length>0?bX(u).then(m=>{a.buffers[0].uri=m,i(a)}):i(a)}serializeUserData(e,i){if(Object.keys(e.userData).length===0)return;const n=this.options,s=this.extensionsUsed;try{const o=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&o.gltfExtensions){i.extensions===void 0&&(i.extensions={});for(const a in o.gltfExtensions)i.extensions[a]=o.gltfExtensions[a],s[a]=!0;delete o.gltfExtensions}Object.keys(o).length>0&&(i.extras=o)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}getUID(e,i=!1){if(this.uids.has(e)===!1){const n=new Map;n.set(!0,this.uid++),n.set(!1,this.uid++),this.uids.set(e,n)}return this.uids.get(e).get(i)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const i=new le;for(let n=0,s=e.count;n<s;n++)if(Math.abs(i.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const i=this.cache;if(i.attributesNormalized.has(e))return i.attributesNormalized.get(e);const n=e.clone(),s=new le;for(let o=0,a=n.count;o<a;o++)s.fromBufferAttribute(n,o),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),n.setXYZ(o,s.x,s.y,s.z);return i.attributesNormalized.set(e,n),n}applyTextureTransform(e,i){let n=!1;const s={};(i.offset.x!==0||i.offset.y!==0)&&(s.offset=i.offset.toArray(),n=!0),i.rotation!==0&&(s.rotation=i.rotation,n=!0),(i.repeat.x!==1||i.repeat.y!==1)&&(s.scale=i.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,i){if(e===i)return e;function n(m){return("colorSpace"in m?m.colorSpace==="srgb":m.encoding===3001)?function(g){return g<.04045?g*.0773993808:Math.pow(g*.9478672986+.0521327014,2.4)}:function(g){return g}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof Ag&&(e=$I(e)),i instanceof Ag&&(i=$I(i));const s=e?e.image:null,o=i?i.image:null,a=Math.max(s?s.width:0,o?o.width:0),l=Math.max(s?s.height:0,o?o.height:0),c=TX();c.width=a,c.height=l;const u=c.getContext("2d");u.fillStyle="#00ffff",u.fillRect(0,0,a,l);const d=u.getImageData(0,0,a,l);if(s){u.drawImage(s,0,0,a,l);const m=n(e),g=u.getImageData(0,0,a,l).data;for(let y=2;y<g.length;y+=4)d.data[y]=m(g[y]/256)*256}if(o){u.drawImage(o,0,0,a,l);const m=n(i),g=u.getImageData(0,0,a,l).data;for(let y=1;y<g.length;y+=4)d.data[y]=m(g[y]/256)*256}u.putImageData(d,0,0);const p=(e||i).clone();return p.source=new Xr(c).source,"colorSpace"in p?p.colorSpace="":p.encoding=3e3,p.channel=(e||i).channel,e&&i&&e.channel!==i.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),p}processBuffer(e){const i=this.json,n=this.buffers;return i.buffers||(i.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,i,n,s,o){const a=this.json;a.bufferViews||(a.bufferViews=[]);let l;switch(i){case hn.BYTE:case hn.UNSIGNED_BYTE:l=1;break;case hn.SHORT:case hn.UNSIGNED_SHORT:l=2;break;default:l=4}const c=dte(s*e.itemSize*l),u=new DataView(new ArrayBuffer(c));let d=0;for(let m=n;m<n+s;m++)for(let g=0;g<e.itemSize;g++){let y;e.itemSize>4?y=e.array[m*e.itemSize+g]:(g===0?y=e.getX(m):g===1?y=e.getY(m):g===2?y=e.getZ(m):g===3&&(y=e.getW(m)),e.normalized===!0&&(y=yo.normalize(y,e.array))),i===hn.FLOAT?u.setFloat32(d,y,!0):i===hn.INT?u.setInt32(d,y,!0):i===hn.UNSIGNED_INT?u.setUint32(d,y,!0):i===hn.SHORT?u.setInt16(d,y,!0):i===hn.UNSIGNED_SHORT?u.setUint16(d,y,!0):i===hn.BYTE?u.setInt8(d,y):i===hn.UNSIGNED_BYTE&&u.setUint8(d,y),d+=l}const p={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:c};return o!==void 0&&(p.target=o),o===hn.ARRAY_BUFFER&&(p.byteStride=e.itemSize*l),this.byteOffset+=c,a.bufferViews.push(p),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const i=this,n=i.json;return n.bufferViews||(n.bufferViews=[]),e.arrayBuffer().then(s=>{const o=zI(s),a={buffer:i.processBuffer(o),byteOffset:i.byteOffset,byteLength:o.byteLength};return i.byteOffset+=o.byteLength,n.bufferViews.push(a)-1})}processAccessor(e,i,n,s){const o=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let l;if(e.array.constructor===Float32Array)l=hn.FLOAT;else if(e.array.constructor===Int32Array)l=hn.INT;else if(e.array.constructor===Uint32Array)l=hn.UNSIGNED_INT;else if(e.array.constructor===Int16Array)l=hn.SHORT;else if(e.array.constructor===Uint16Array)l=hn.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)l=hn.BYTE;else if(e.array.constructor===Uint8Array)l=hn.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(n===void 0&&(n=0),s===void 0&&(s=e.count),s===0)return null;const c=m5e(e,n,s);let u;i!==void 0&&(u=e===i.index?hn.ELEMENT_ARRAY_BUFFER:hn.ARRAY_BUFFER);const d=this.processBufferView(e,l,n,s,u),p={bufferView:d.id,byteOffset:d.byteOffset,componentType:l,count:s,max:c.max,min:c.min,type:a[e.itemSize]};return e.normalized===!0&&(p.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(p)-1}processImage(e,i,n,s="image/png"){if(e!==null){const o=this,a=o.cache,l=o.json,c=o.options,u=o.pending;a.images.has(e)||a.images.set(e,{});const d=a.images.get(e),p=s+":flipY/"+n.toString();if(d[p]!==void 0)return d[p];l.images||(l.images=[]);const m={mimeType:s},g=TX();g.width=Math.min(e.width,c.maxTextureSize),g.height=Math.min(e.height,c.maxTextureSize);const y=g.getContext("2d");if(n===!0&&(y.translate(0,g.height),y.scale(1,-1)),e.data!==void 0){i!==Ca&&console.error("GLTFExporter: Only RGBAFormat is supported.",i),(e.width>c.maxTextureSize||e.height>c.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const x=new Uint8ClampedArray(e.height*e.width*4);for(let O=0;O<x.length;O+=4)x[O+0]=e.data[O+0],x[O+1]=e.data[O+1],x[O+2]=e.data[O+2],x[O+3]=e.data[O+3];y.putImageData(new ImageData(x,e.width,e.height),0,0)}else y.drawImage(e,0,0,g.width,g.height);c.binary===!0?u.push(AX(g,s).then(x=>o.processBufferViewImage(x)).then(x=>{m.bufferView=x})):g.toDataURL!==void 0?m.uri=g.toDataURL(s):u.push(AX(g,s).then(bX).then(x=>{m.uri=x}));const _=l.images.push(m)-1;return d[p]=_,_}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const i=this.json;i.samplers||(i.samplers=[]);const n={magFilter:pl[e.magFilter],minFilter:pl[e.minFilter],wrapS:pl[e.wrapS],wrapT:pl[e.wrapT]};return i.samplers.push(n)-1}processTexture(e){const i=this.options,n=this.cache,s=this.json;if(n.textures.has(e))return n.textures.get(e);s.textures||(s.textures=[]),e instanceof Ag&&(e=$I(e,i.maxTextureSize));let o=e.userData.mimeType;o==="image/webp"&&(o="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,o)};e.name&&(a.name=e.name),this._invokeAll(function(c){c.writeTexture&&c.writeTexture(e,a)});const l=s.textures.push(a)-1;return n.textures.set(e,l),l}processMaterial(e){const i=this.cache,n=this.json;if(i.materials.has(e))return i.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const s={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const o=e.color.toArray().concat([e.opacity]);if(fb(o,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=o),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=.5,s.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const l=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),c={index:this.processTexture(l),channel:l.channel};this.applyTextureTransform(c,l),s.pbrMetallicRoughness.metallicRoughnessTexture=c}if(e.map){const l={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(l,e.map),s.pbrMetallicRoughness.baseColorTexture=l}if(e.emissive){const l=e.emissive;if(Math.max(l.r,l.g,l.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),s.emissiveTexture=c}}if(e.normalMap){const l={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(l.scale=e.normalScale.x),this.applyTextureTransform(l,e.normalMap),s.normalTexture=l}if(e.aoMap){const l={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(l.strength=e.aoMapIntensity),this.applyTextureTransform(l,e.aoMap),s.occlusionTexture=l}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===ba&&(s.doubleSided=!0),e.name!==""&&(s.name=e.name),this.serializeUserData(e,s),this._invokeAll(function(l){l.writeMaterial&&l.writeMaterial(e,s)});const a=n.materials.push(s)-1;return i.materials.set(e,a),a}processMesh(e){const i=this.cache,n=this.json,s=[e.geometry.uuid];if(Array.isArray(e.material))for(let w=0,C=e.material.length;w<C;w++)s.push(e.material[w].uuid);else s.push(e.material.uuid);const o=s.join(":");if(i.meshes.has(o))return i.meshes.get(o);const a=e.geometry;let l;e.isLineSegments?l=hn.LINES:e.isLineLoop?l=hn.LINE_LOOP:e.isLine?l=hn.LINE_STRIP:e.isPoints?l=hn.POINTS:l=e.material.wireframe?hn.LINES:hn.TRIANGLES;const c={},u={},d=[],p=[],m={...r5e>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},g=a.getAttribute("normal");g!==void 0&&!this.isNormalizedNormalAttribute(g)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(g)));let y=null;for(let w in a.attributes){if(w.slice(0,5)==="morph")continue;const C=a.attributes[w];if(w=m[w]||w.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(w)||(w="_"+w),i.attributes.has(this.getUID(C))){u[w]=i.attributes.get(this.getUID(C));continue}y=null;const M=C.array;w==="JOINTS_0"&&!(M instanceof Uint16Array)&&!(M instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),y=new un(new Uint16Array(M),C.itemSize,C.normalized));const P=this.processAccessor(y||C,a);P!==null&&(w.startsWith("_")||this.detectMeshQuantization(w,C),u[w]=P,i.attributes.set(this.getUID(C),P))}if(g!==void 0&&a.setAttribute("normal",g),Object.keys(u).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const w=[],C=[],M={};if(e.morphTargetDictionary!==void 0)for(const P in e.morphTargetDictionary)M[e.morphTargetDictionary[P]]=P;for(let P=0;P<e.morphTargetInfluences.length;++P){const R={};let k=!1;for(const I in a.morphAttributes){if(I!=="position"&&I!=="normal"){k||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),k=!0);continue}const A=a.morphAttributes[I][P],D=I.toUpperCase(),V=a.attributes[I];if(i.attributes.has(this.getUID(A,!0))){R[D]=i.attributes.get(this.getUID(A,!0));continue}const B=A.clone();if(!a.morphTargetsRelative)for(let L=0,F=A.count;L<F;L++)for(let $=0;$<A.itemSize;$++)$===0&&B.setX(L,A.getX(L)-V.getX(L)),$===1&&B.setY(L,A.getY(L)-V.getY(L)),$===2&&B.setZ(L,A.getZ(L)-V.getZ(L)),$===3&&B.setW(L,A.getW(L)-V.getW(L));R[D]=this.processAccessor(B,a),i.attributes.set(this.getUID(V,!0),R[D])}p.push(R),w.push(e.morphTargetInfluences[P]),e.morphTargetDictionary!==void 0&&C.push(M[P])}c.weights=w,C.length>0&&(c.extras={},c.extras.targetNames=C)}const _=Array.isArray(e.material);if(_&&a.groups.length===0)return null;const x=_?e.material:[e.material],O=_?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let w=0,C=O.length;w<C;w++){const M={mode:l,attributes:u};if(this.serializeUserData(a,M),p.length>0&&(M.targets=p),a.index!==null){let R=this.getUID(a.index);(O[w].start!==void 0||O[w].count!==void 0)&&(R+=":"+O[w].start+":"+O[w].count),i.attributes.has(R)?M.indices=i.attributes.get(R):(M.indices=this.processAccessor(a.index,a,O[w].start,O[w].count),i.attributes.set(R,M.indices)),M.indices===null&&delete M.indices}const P=this.processMaterial(x[O[w].materialIndex]);P!==null&&(M.material=P),d.push(M)}c.primitives=d,n.meshes||(n.meshes=[]),this._invokeAll(function(w){w.writeMesh&&w.writeMesh(e,c)});const S=n.meshes.push(c)-1;return i.meshes.set(o,S),S}detectMeshQuantization(e,i){if(this.extensionsUsed[UI])return;let n;switch(i.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}i.normalized&&(n+=" normalized");const s=e.split("_",1)[0];wX[s]&&wX[s].includes(n)&&(this.extensionsUsed[UI]=!0,this.extensionsRequired[UI]=!0)}processCamera(e){const i=this.json;i.cameras||(i.cameras=[]);const n=e.isOrthographicCamera,s={type:n?"orthographic":"perspective"};return n?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:yo.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),i.cameras.push(s)-1}processAnimation(e,i){const n=this.json,s=this.nodeMap;n.animations||(n.animations=[]),e=ute.Utils.mergeMorphTargetTracks(e.clone(),i);const o=e.tracks,a=[],l=[];for(let c=0;c<o.length;++c){const u=o[c],d=Gi.parseTrackName(u.name);let p=Gi.findNode(i,d.nodeName);const m=OX[d.propertyName];if(d.objectName==="bones"&&(p.isSkinnedMesh===!0?p=p.skeleton.getBoneByName(d.objectIndex):p=void 0),!p||!m)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;const g=1;let y=u.values.length/u.times.length;m===OX.morphTargetInfluences&&(y/=p.morphTargetInfluences.length);let _;u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(_="CUBICSPLINE",y/=3):u.getInterpolation()===Wy?_="STEP":_="LINEAR",l.push({input:this.processAccessor(new un(u.times,g)),output:this.processAccessor(new un(u.values,y)),interpolation:_}),a.push({sampler:l.length-1,target:{node:s.get(p),path:m}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:l,channels:a}),n.animations.length-1}processSkin(e){const i=this.json,n=this.nodeMap,s=i.nodes[n.get(e)],o=e.skeleton;if(o===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const l=[],c=new Float32Array(o.bones.length*16),u=new wt;for(let d=0;d<o.bones.length;++d)l.push(n.get(o.bones[d])),u.copy(o.boneInverses[d]),u.multiply(e.bindMatrix).toArray(c,d*16);return i.skins===void 0&&(i.skins=[]),i.skins.push({inverseBindMatrices:this.processAccessor(new un(c,16)),joints:l,skeleton:n.get(a)}),s.skin=i.skins.length-1}processNode(e){const i=this.json,n=this.options,s=this.nodeMap;i.nodes||(i.nodes=[]);const o={};if(n.trs){const l=e.quaternion.toArray(),c=e.position.toArray(),u=e.scale.toArray();fb(l,[0,0,0,1])||(o.rotation=l),fb(c,[0,0,0])||(o.translation=c),fb(u,[1,1,1])||(o.scale=u)}else e.matrixAutoUpdate&&e.updateMatrix(),p5e(e.matrix)===!1&&(o.matrix=e.matrix.elements);if(e.name!==""&&(o.name=String(e.name)),this.serializeUserData(e,o),e.isMesh||e.isLine||e.isPoints){const l=this.processMesh(e);l!==null&&(o.mesh=l)}else e.isCamera&&(o.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const l=[];for(let c=0,u=e.children.length;c<u;c++){const d=e.children[c];if(d.visible||n.onlyVisible===!1){const p=this.processNode(d);p!==null&&l.push(p)}}l.length>0&&(o.children=l)}this._invokeAll(function(l){l.writeNode&&l.writeNode(e,o)});const a=i.nodes.push(o)-1;return s.set(e,a),a}processScene(e){const i=this.json,n=this.options;i.scenes||(i.scenes=[],i.scene=0);const s={};e.name!==""&&(s.name=e.name),i.scenes.push(s);const o=[];for(let a=0,l=e.children.length;a<l;a++){const c=e.children[a];if(c.visible||n.onlyVisible===!1){const u=this.processNode(c);u!==null&&o.push(u)}}o.length>0&&(s.nodes=o),this.serializeUserData(e,s)}processObjects(e){const i=new jy;i.name="AuxScene";for(let n=0;n<e.length;n++)i.children.push(e[n]);this.processScene(i)}processInput(e){const i=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(s){s.beforeParse&&s.beforeParse(e)});const n=[];for(let s=0;s<e.length;s++)e[s]instanceof jy?this.processScene(e[s]):n.push(e[s]);n.length>0&&this.processObjects(n);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<i.animations.length;++s)this.processAnimation(i.animations[s],e[0]);this._invokeAll(function(s){s.afterParse&&s.afterParse(e)})}_invokeAll(e){for(let i=0,n=this.plugins.length;i<n;i++)e(this.plugins[i])}}class v5e{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,i){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const n=this.writer,s=n.json,o=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),o[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},o[this.name]=!0);const l=s.extensions[this.name].lights;l.push(a),i.extensions=i.extensions||{},i.extensions[this.name]={light:l.length-1}}}let y5e=class{constructor(r){this.writer=r,this.name="KHR_materials_unlit"}writeMaterial(r,e){if(!r.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},i[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}},_5e=class{constructor(r){this.writer=r,this.name="KHR_materials_clearcoat"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.clearcoat===0)return;const i=this.writer,n=i.extensionsUsed,s={};if(s.clearcoatFactor=r.clearcoat,r.clearcoatMap){const o={index:i.processTexture(r.clearcoatMap),texCoord:r.clearcoatMap.channel};i.applyTextureTransform(o,r.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=r.clearcoatRoughness,r.clearcoatRoughnessMap){const o={index:i.processTexture(r.clearcoatRoughnessMap),texCoord:r.clearcoatRoughnessMap.channel};i.applyTextureTransform(o,r.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(r.clearcoatNormalMap){const o={index:i.processTexture(r.clearcoatNormalMap),texCoord:r.clearcoatNormalMap.channel};i.applyTextureTransform(o,r.clearcoatNormalMap),s.clearcoatNormalTexture=o}e.extensions=e.extensions||{},e.extensions[this.name]=s,n[this.name]=!0}},x5e=class{constructor(r){this.writer=r,this.name="KHR_materials_iridescence"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.iridescence===0)return;const i=this.writer,n=i.extensionsUsed,s={};if(s.iridescenceFactor=r.iridescence,r.iridescenceMap){const o={index:i.processTexture(r.iridescenceMap),texCoord:r.iridescenceMap.channel};i.applyTextureTransform(o,r.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=r.iridescenceIOR,s.iridescenceThicknessMinimum=r.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=r.iridescenceThicknessRange[1],r.iridescenceThicknessMap){const o={index:i.processTexture(r.iridescenceThicknessMap),texCoord:r.iridescenceThicknessMap.channel};i.applyTextureTransform(o,r.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}e.extensions=e.extensions||{},e.extensions[this.name]=s,n[this.name]=!0}},b5e=class{constructor(r){this.writer=r,this.name="KHR_materials_transmission"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.transmission===0)return;const i=this.writer,n=i.extensionsUsed,s={};if(s.transmissionFactor=r.transmission,r.transmissionMap){const o={index:i.processTexture(r.transmissionMap),texCoord:r.transmissionMap.channel};i.applyTextureTransform(o,r.transmissionMap),s.transmissionTexture=o}e.extensions=e.extensions||{},e.extensions[this.name]=s,n[this.name]=!0}},w5e=class{constructor(r){this.writer=r,this.name="KHR_materials_volume"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.transmission===0)return;const i=this.writer,n=i.extensionsUsed,s={};if(s.thicknessFactor=r.thickness,r.thicknessMap){const o={index:i.processTexture(r.thicknessMap),texCoord:r.thicknessMap.channel};i.applyTextureTransform(o,r.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=r.attenuationDistance,s.attenuationColor=r.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,n[this.name]=!0}},O5e=class{constructor(r){this.writer=r,this.name="KHR_materials_ior"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.ior===1.5)return;const i=this.writer.extensionsUsed,n={};n.ior=r.ior,e.extensions=e.extensions||{},e.extensions[this.name]=n,i[this.name]=!0}},S5e=class{constructor(r){this.writer=r,this.name="KHR_materials_specular"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.specularIntensity===1&&r.specularColor.equals(l5e)&&!r.specularIntensityMap&&!r.specularColorTexture)return;const i=this.writer,n=i.extensionsUsed,s={};if(r.specularIntensityMap){const o={index:i.processTexture(r.specularIntensityMap),texCoord:r.specularIntensityMap.channel};i.applyTextureTransform(o,r.specularIntensityMap),s.specularTexture=o}if(r.specularColorMap){const o={index:i.processTexture(r.specularColorMap),texCoord:r.specularColorMap.channel};i.applyTextureTransform(o,r.specularColorMap),s.specularColorTexture=o}s.specularFactor=r.specularIntensity,s.specularColorFactor=r.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,n[this.name]=!0}},C5e=class{constructor(r){this.writer=r,this.name="KHR_materials_sheen"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.sheen==0)return;const i=this.writer,n=i.extensionsUsed,s={};if(r.sheenRoughnessMap){const o={index:i.processTexture(r.sheenRoughnessMap),texCoord:r.sheenRoughnessMap.channel};i.applyTextureTransform(o,r.sheenRoughnessMap),s.sheenRoughnessTexture=o}if(r.sheenColorMap){const o={index:i.processTexture(r.sheenColorMap),texCoord:r.sheenColorMap.channel};i.applyTextureTransform(o,r.sheenColorMap),s.sheenColorTexture=o}s.sheenRoughnessFactor=r.sheenRoughness,s.sheenColorFactor=r.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,n[this.name]=!0}},T5e=class{constructor(r){this.writer=r,this.name="KHR_materials_anisotropy"}writeMaterial(r,e){if(!r.isMeshPhysicalMaterial||r.anisotropy==0)return;const i=this.writer,n=i.extensionsUsed,s={};if(r.anisotropyMap){const o={index:i.processTexture(r.anisotropyMap)};i.applyTextureTransform(o,r.anisotropyMap),s.anisotropyTexture=o}s.anisotropyStrength=r.anisotropy,s.anisotropyRotation=r.anisotropyRotation,e.extensions=e.extensions||{},e.extensions[this.name]=s,n[this.name]=!0}},A5e=class{constructor(r){this.writer=r,this.name="KHR_materials_emissive_strength"}writeMaterial(r,e){if(!r.isMeshStandardMaterial||r.emissiveIntensity===1)return;const i=this.writer.extensionsUsed,n={};n.emissiveStrength=r.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=n,i[this.name]=!0}};var Jl=Uint8Array,Mg=Uint16Array,_5=Uint32Array,fte=new Jl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pte=new Jl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E5e=new Jl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mte=function(r,e){for(var i=new Mg(31),n=0;n<31;++n)i[n]=e+=1<<r[n-1];for(var s=new _5(i[30]),n=1;n<30;++n)for(var o=i[n];o<i[n+1];++o)s[o]=o-i[n]<<5|n;return[i,s]},gte=mte(fte,2),vte=gte[0],M5e=gte[1];vte[28]=258,M5e[258]=28;var P5e=mte(pte,0),k5e=P5e[0],yte=new Mg(32768);for(var cr=0;cr<32768;++cr){var Af=(cr&43690)>>>1|(cr&21845)<<1;Af=(Af&52428)>>>2|(Af&13107)<<2,Af=(Af&61680)>>>4|(Af&3855)<<4,yte[cr]=((Af&65280)>>>8|(Af&255)<<8)>>>1}var Wb=function(r,e,i){for(var n=r.length,s=0,o=new Mg(e);s<n;++s)++o[r[s]-1];var a=new Mg(e);for(s=0;s<e;++s)a[s]=a[s-1]+o[s-1]<<1;var l;{l=new Mg(1<<e);var c=15-e;for(s=0;s<n;++s)if(r[s])for(var u=s<<4|r[s],d=e-r[s],p=a[r[s]-1]++<<d,m=p|(1<<d)-1;p<=m;++p)l[yte[p]>>>c]=u}return l},KO=new Jl(288);for(var cr=0;cr<144;++cr)KO[cr]=8;for(var cr=144;cr<256;++cr)KO[cr]=9;for(var cr=256;cr<280;++cr)KO[cr]=7;for(var cr=280;cr<288;++cr)KO[cr]=8;var _te=new Jl(32);for(var cr=0;cr<32;++cr)_te[cr]=5;var I5e=Wb(KO,9),R5e=Wb(_te,5),XI=function(r){for(var e=r[0],i=1;i<r.length;++i)r[i]>e&&(e=r[i]);return e},Vh=function(r,e,i){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&i},WI=function(r,e){var i=e/8|0;return(r[i]|r[i+1]<<8|r[i+2]<<16)>>(e&7)},B5e=function(r){return(r/8|0)+(r&7&&1)},D5e=function(r,e,i){(i==null||i>r.length)&&(i=r.length);var n=new(r instanceof Mg?Mg:r instanceof _5?_5:Jl)(i-e);return n.set(r.subarray(e,i)),n},L5e=function(r,e,i){var n=r.length;if(!n||i&&!i.l&&n<5)return e||new Jl(0);var s=!e||i,o=!i||i.i;i||(i={}),e||(e=new Jl(n*3));var a=function(_e){var re=e.length;if(_e>re){var se=new Jl(Math.max(re*2,_e));se.set(e),e=se}},l=i.f||0,c=i.p||0,u=i.b||0,d=i.l,p=i.d,m=i.m,g=i.n,y=n*8;do{if(!d){i.f=l=Vh(r,c,1);var _=Vh(r,c+1,3);if(c+=3,_)if(_==1)d=I5e,p=R5e,m=9,g=5;else if(_==2){var x=Vh(r,c,31)+257,O=Vh(r,c+10,15)+4,S=x+Vh(r,c+5,31)+1;c+=14;for(var w=new Jl(S),C=new Jl(19),M=0;M<O;++M)C[E5e[M]]=Vh(r,c+M*3,7);c+=O*3;for(var P=XI(C),R=(1<<P)-1,k=Wb(C,P),M=0;M<S;){var I=k[Vh(r,c,R)];c+=I&15;var A=I>>>4;if(A<16)w[M++]=A;else{var D=0,V=0;for(A==16?(V=3+Vh(r,c,3),c+=2,D=w[M-1]):A==17?(V=3+Vh(r,c,7),c+=3):A==18&&(V=11+Vh(r,c,127),c+=7);V--;)w[M++]=D}}var B=w.subarray(0,x),L=w.subarray(x);m=XI(B),g=XI(L),d=Wb(B,m),p=Wb(L,g)}else throw"invalid block type";else{var A=B5e(c)+4,F=r[A-4]|r[A-3]<<8,$=A+F;if($>n){if(o)throw"unexpected EOF";break}s&&a(u+F),e.set(r.subarray(A,$),u),i.b=u+=F,i.p=c=$*8;continue}if(c>y){if(o)throw"unexpected EOF";break}}s&&a(u+131072);for(var z=(1<<m)-1,H=(1<<g)-1,K=c;;K=c){var D=d[WI(r,c)&z],J=D>>>4;if(c+=D&15,c>y){if(o)throw"unexpected EOF";break}if(!D)throw"invalid length/literal";if(J<256)e[u++]=J;else if(J==256){K=c,d=null;break}else{var ne=J-254;if(J>264){var M=J-257,be=fte[M];ne=Vh(r,c,(1<<be)-1)+vte[M],c+=be}var pe=p[WI(r,c)&H],ae=pe>>>4;if(!pe)throw"invalid distance";c+=pe&15;var L=k5e[ae];if(ae>3){var be=pte[ae];L+=WI(r,c)&(1<<be)-1,c+=be}if(c>y){if(o)throw"unexpected EOF";break}s&&a(u+131072);for(var ye=u+ne;u<ye;u+=4)e[u]=e[u-L],e[u+1]=e[u+1-L],e[u+2]=e[u+2-L],e[u+3]=e[u+3-L];u=ye}}i.l=d,i.p=K,i.b=u,d&&(l=1,i.m=m,i.d=p,i.n=g)}while(!l);return u==e.length?e:D5e(e,0,u)},N5e=new Jl(0),V5e=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function F5e(r,e){return L5e((V5e(r),r.subarray(2,-4)),e)}var $5e=typeof TextDecoder<"u"&&new TextDecoder,U5e=0;try{$5e.decode(N5e,{stream:!0}),U5e=1}catch{}new wa;new le;new Cs(0,0,0,"YXZ");new le;var z5e=Object.defineProperty,X5e=(r,e,i)=>e in r?z5e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,wi=(r,e,i)=>(X5e(r,typeof e!="symbol"?e+"":e,i),i);const T2=new f0,EX=new Qh,W5e=Math.cos(70*(Math.PI/180)),MX=(r,e)=>(r%e+e)%e;class G5e extends yu{constructor(e,i){super(),wi(this,"object"),wi(this,"domElement"),wi(this,"enabled",!0),wi(this,"target",new le),wi(this,"minDistance",0),wi(this,"maxDistance",1/0),wi(this,"minZoom",0),wi(this,"maxZoom",1/0),wi(this,"minPolarAngle",0),wi(this,"maxPolarAngle",Math.PI),wi(this,"minAzimuthAngle",-1/0),wi(this,"maxAzimuthAngle",1/0),wi(this,"enableDamping",!1),wi(this,"dampingFactor",.05),wi(this,"enableZoom",!0),wi(this,"zoomSpeed",1),wi(this,"enableRotate",!0),wi(this,"rotateSpeed",1),wi(this,"enablePan",!0),wi(this,"panSpeed",1),wi(this,"screenSpacePanning",!0),wi(this,"keyPanSpeed",7),wi(this,"zoomToCursor",!1),wi(this,"autoRotate",!1),wi(this,"autoRotateSpeed",2),wi(this,"reverseOrbit",!1),wi(this,"reverseHorizontalOrbit",!1),wi(this,"reverseVerticalOrbit",!1),wi(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),wi(this,"mouseButtons",{LEFT:Ym.ROTATE,MIDDLE:Ym.DOLLY,RIGHT:Ym.PAN}),wi(this,"touches",{ONE:nd.ROTATE,TWO:nd.DOLLY_PAN}),wi(this,"target0"),wi(this,"position0"),wi(this,"zoom0"),wi(this,"_domElementKeyEvents",null),wi(this,"getPolarAngle"),wi(this,"getAzimuthalAngle"),wi(this,"setPolarAngle"),wi(this,"setAzimuthalAngle"),wi(this,"getDistance"),wi(this,"listenToKeyEvents"),wi(this,"stopListenToKeyEvents"),wi(this,"saveState"),wi(this,"reset"),wi(this,"update"),wi(this,"connect"),wi(this,"dispose"),this.object=e,this.domElement=i,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=Ee=>{let Ue=MX(Ee,2*Math.PI),xe=d.phi;xe<0&&(xe+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let ze=Math.abs(Ue-xe);2*Math.PI-ze<ze&&(Ue<xe?Ue+=2*Math.PI:xe+=2*Math.PI),p.phi=Ue-xe,n.update()},this.setAzimuthalAngle=Ee=>{let Ue=MX(Ee,2*Math.PI),xe=d.theta;xe<0&&(xe+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let ze=Math.abs(Ue-xe);2*Math.PI-ze<ze&&(Ue<xe?Ue+=2*Math.PI:xe+=2*Math.PI),p.theta=Ue-xe,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=Ee=>{Ee.addEventListener("keydown",ft),this._domElementKeyEvents=Ee},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),c=l.NONE},this.update=(()=>{const Ee=new le,Ue=new le(0,1,0),xe=new ds().setFromUnitVectors(e.up,Ue),ze=xe.clone().invert(),Qe=new le,ct=new ds,xt=2*Math.PI;return function(){const Ki=n.object.position;xe.setFromUnitVectors(e.up,Ue),ze.copy(xe).invert(),Ee.copy(Ki).sub(n.target),Ee.applyQuaternion(xe),d.setFromVector3(Ee),n.autoRotate&&c===l.NONE&&L(V()),n.enableDamping?(d.theta+=p.theta*n.dampingFactor,d.phi+=p.phi*n.dampingFactor):(d.theta+=p.theta,d.phi+=p.phi);let Ji=n.minAzimuthAngle,gn=n.maxAzimuthAngle;isFinite(Ji)&&isFinite(gn)&&(Ji<-Math.PI?Ji+=xt:Ji>Math.PI&&(Ji-=xt),gn<-Math.PI?gn+=xt:gn>Math.PI&&(gn-=xt),Ji<=gn?d.theta=Math.max(Ji,Math.min(gn,d.theta)):d.theta=d.theta>(Ji+gn)/2?Math.max(Ji,d.theta):Math.min(gn,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),n.zoomToCursor&&I||n.object.isOrthographicCamera?d.radius=be(d.radius):d.radius=be(d.radius*m),Ee.setFromSpherical(d),Ee.applyQuaternion(ze),Ki.copy(n.target).add(Ee),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),g.set(0,0,0));let pr=!1;if(n.zoomToCursor&&I){let Qi=null;if(n.object instanceof $n&&n.object.isPerspectiveCamera){const Is=Ee.length();Qi=be(Is*m);const Sr=Is-Qi;n.object.position.addScaledVector(R,Sr),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Is=new le(k.x,k.y,0);Is.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix(),pr=!0;const Sr=new le(k.x,k.y,0);Sr.unproject(n.object),n.object.position.sub(Sr).add(Is),n.object.updateMatrixWorld(),Qi=Ee.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Qi!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Qi).add(n.object.position):(T2.origin.copy(n.object.position),T2.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(T2.direction))<W5e?e.lookAt(n.target):(EX.setFromNormalAndCoplanarPoint(n.object.up,n.target),T2.intersectPlane(EX,n.target))))}else n.object instanceof sh&&n.object.isOrthographicCamera&&(pr=m!==1,pr&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix()));return m=1,I=!1,pr||Qe.distanceToSquared(n.object.position)>u||8*(1-ct.dot(n.object.quaternion))>u?(n.dispatchEvent(s),Qe.copy(n.object.position),ct.copy(n.object.quaternion),pr=!1,!0):!1}})(),this.connect=Ee=>{Ee===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=Ee,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Ut),n.domElement.addEventListener("pointerdown",me),n.domElement.addEventListener("pointercancel",Pe),n.domElement.addEventListener("wheel",We,{passive:!0})},this.dispose=()=>{var Ee,Ue,xe,ze,Qe,ct;n.domElement&&(n.domElement.style.touchAction="auto"),(Ee=n.domElement)==null||Ee.removeEventListener("contextmenu",Ut),(Ue=n.domElement)==null||Ue.removeEventListener("pointerdown",me),(xe=n.domElement)==null||xe.removeEventListener("pointercancel",Pe),(ze=n.domElement)==null||ze.removeEventListener("wheel",We),(Qe=n.domElement)==null||Qe.ownerDocument.removeEventListener("pointermove",ge),(ct=n.domElement)==null||ct.ownerDocument.removeEventListener("pointerup",Ae),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ft)};const n=this,s={type:"change"},o={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const u=1e-6,d=new l5,p=new l5;let m=1;const g=new le,y=new Ge,_=new Ge,x=new Ge,O=new Ge,S=new Ge,w=new Ge,C=new Ge,M=new Ge,P=new Ge,R=new le,k=new Ge;let I=!1;const A=[],D={};function V(){return 2*Math.PI/60/60*n.autoRotateSpeed}function B(){return Math.pow(.95,n.zoomSpeed)}function L(Ee){n.reverseOrbit||n.reverseHorizontalOrbit?p.theta+=Ee:p.theta-=Ee}function F(Ee){n.reverseOrbit||n.reverseVerticalOrbit?p.phi+=Ee:p.phi-=Ee}const $=(()=>{const Ee=new le;return function(Ue,xe){Ee.setFromMatrixColumn(xe,0),Ee.multiplyScalar(-Ue),g.add(Ee)}})(),z=(()=>{const Ee=new le;return function(Ue,xe){n.screenSpacePanning===!0?Ee.setFromMatrixColumn(xe,1):(Ee.setFromMatrixColumn(xe,0),Ee.crossVectors(n.object.up,Ee)),Ee.multiplyScalar(Ue),g.add(Ee)}})(),H=(()=>{const Ee=new le;return function(Ue,xe){const ze=n.domElement;if(ze&&n.object instanceof $n&&n.object.isPerspectiveCamera){const Qe=n.object.position;Ee.copy(Qe).sub(n.target);let ct=Ee.length();ct*=Math.tan(n.object.fov/2*Math.PI/180),$(2*Ue*ct/ze.clientHeight,n.object.matrix),z(2*xe*ct/ze.clientHeight,n.object.matrix)}else ze&&n.object instanceof sh&&n.object.isOrthographicCamera?($(Ue*(n.object.right-n.object.left)/n.object.zoom/ze.clientWidth,n.object.matrix),z(xe*(n.object.top-n.object.bottom)/n.object.zoom/ze.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function K(Ee){n.object instanceof $n&&n.object.isPerspectiveCamera||n.object instanceof sh&&n.object.isOrthographicCamera?m/=Ee:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function J(Ee){n.object instanceof $n&&n.object.isPerspectiveCamera||n.object instanceof sh&&n.object.isOrthographicCamera?m*=Ee:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ne(Ee){if(!n.zoomToCursor||!n.domElement)return;I=!0;const Ue=n.domElement.getBoundingClientRect(),xe=Ee.clientX-Ue.left,ze=Ee.clientY-Ue.top,Qe=Ue.width,ct=Ue.height;k.x=xe/Qe*2-1,k.y=-(ze/ct)*2+1,R.set(k.x,k.y,1).unproject(n.object).sub(n.object.position).normalize()}function be(Ee){return Math.max(n.minDistance,Math.min(n.maxDistance,Ee))}function pe(Ee){y.set(Ee.clientX,Ee.clientY)}function ae(Ee){ne(Ee),C.set(Ee.clientX,Ee.clientY)}function ye(Ee){O.set(Ee.clientX,Ee.clientY)}function _e(Ee){_.set(Ee.clientX,Ee.clientY),x.subVectors(_,y).multiplyScalar(n.rotateSpeed);const Ue=n.domElement;Ue&&(L(2*Math.PI*x.x/Ue.clientHeight),F(2*Math.PI*x.y/Ue.clientHeight)),y.copy(_),n.update()}function re(Ee){M.set(Ee.clientX,Ee.clientY),P.subVectors(M,C),P.y>0?K(B()):P.y<0&&J(B()),C.copy(M),n.update()}function se(Ee){S.set(Ee.clientX,Ee.clientY),w.subVectors(S,O).multiplyScalar(n.panSpeed),H(w.x,w.y),O.copy(S),n.update()}function Q(Ee){ne(Ee),Ee.deltaY<0?J(B()):Ee.deltaY>0&&K(B()),n.update()}function G(Ee){let Ue=!1;switch(Ee.code){case n.keys.UP:H(0,n.keyPanSpeed),Ue=!0;break;case n.keys.BOTTOM:H(0,-n.keyPanSpeed),Ue=!0;break;case n.keys.LEFT:H(n.keyPanSpeed,0),Ue=!0;break;case n.keys.RIGHT:H(-n.keyPanSpeed,0),Ue=!0;break}Ue&&(Ee.preventDefault(),n.update())}function ie(){if(A.length==1)y.set(A[0].pageX,A[0].pageY);else{const Ee=.5*(A[0].pageX+A[1].pageX),Ue=.5*(A[0].pageY+A[1].pageY);y.set(Ee,Ue)}}function he(){if(A.length==1)O.set(A[0].pageX,A[0].pageY);else{const Ee=.5*(A[0].pageX+A[1].pageX),Ue=.5*(A[0].pageY+A[1].pageY);O.set(Ee,Ue)}}function j(){const Ee=A[0].pageX-A[1].pageX,Ue=A[0].pageY-A[1].pageY,xe=Math.sqrt(Ee*Ee+Ue*Ue);C.set(0,xe)}function ee(){n.enableZoom&&j(),n.enablePan&&he()}function de(){n.enableZoom&&j(),n.enableRotate&&ie()}function ve(Ee){if(A.length==1)_.set(Ee.pageX,Ee.pageY);else{const xe=Bi(Ee),ze=.5*(Ee.pageX+xe.x),Qe=.5*(Ee.pageY+xe.y);_.set(ze,Qe)}x.subVectors(_,y).multiplyScalar(n.rotateSpeed);const Ue=n.domElement;Ue&&(L(2*Math.PI*x.x/Ue.clientHeight),F(2*Math.PI*x.y/Ue.clientHeight)),y.copy(_)}function Ce(Ee){if(A.length==1)S.set(Ee.pageX,Ee.pageY);else{const Ue=Bi(Ee),xe=.5*(Ee.pageX+Ue.x),ze=.5*(Ee.pageY+Ue.y);S.set(xe,ze)}w.subVectors(S,O).multiplyScalar(n.panSpeed),H(w.x,w.y),O.copy(S)}function Ie(Ee){const Ue=Bi(Ee),xe=Ee.pageX-Ue.x,ze=Ee.pageY-Ue.y,Qe=Math.sqrt(xe*xe+ze*ze);M.set(0,Qe),P.set(0,Math.pow(M.y/C.y,n.zoomSpeed)),K(P.y),C.copy(M)}function te(Ee){n.enableZoom&&Ie(Ee),n.enablePan&&Ce(Ee)}function q(Ee){n.enableZoom&&Ie(Ee),n.enableRotate&&ve(Ee)}function me(Ee){var Ue,xe;n.enabled!==!1&&(A.length===0&&((Ue=n.domElement)==null||Ue.ownerDocument.addEventListener("pointermove",ge),(xe=n.domElement)==null||xe.ownerDocument.addEventListener("pointerup",Ae)),zt(Ee),Ee.pointerType==="touch"?Ze(Ee):je(Ee))}function ge(Ee){n.enabled!==!1&&(Ee.pointerType==="touch"?dt(Ee):$e(Ee))}function Ae(Ee){var Ue,xe,ze;_t(Ee),A.length===0&&((Ue=n.domElement)==null||Ue.releasePointerCapture(Ee.pointerId),(xe=n.domElement)==null||xe.ownerDocument.removeEventListener("pointermove",ge),(ze=n.domElement)==null||ze.ownerDocument.removeEventListener("pointerup",Ae)),n.dispatchEvent(a),c=l.NONE}function Pe(Ee){_t(Ee)}function je(Ee){let Ue;switch(Ee.button){case 0:Ue=n.mouseButtons.LEFT;break;case 1:Ue=n.mouseButtons.MIDDLE;break;case 2:Ue=n.mouseButtons.RIGHT;break;default:Ue=-1}switch(Ue){case Ym.DOLLY:if(n.enableZoom===!1)return;ae(Ee),c=l.DOLLY;break;case Ym.ROTATE:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(n.enablePan===!1)return;ye(Ee),c=l.PAN}else{if(n.enableRotate===!1)return;pe(Ee),c=l.ROTATE}break;case Ym.PAN:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(n.enableRotate===!1)return;pe(Ee),c=l.ROTATE}else{if(n.enablePan===!1)return;ye(Ee),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(o)}function $e(Ee){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;_e(Ee);break;case l.DOLLY:if(n.enableZoom===!1)return;re(Ee);break;case l.PAN:if(n.enablePan===!1)return;se(Ee);break}}function We(Ee){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(n.dispatchEvent(o),Q(Ee),n.dispatchEvent(a))}function ft(Ee){n.enabled===!1||n.enablePan===!1||G(Ee)}function Ze(Ee){switch(ni(Ee),A.length){case 1:switch(n.touches.ONE){case nd.ROTATE:if(n.enableRotate===!1)return;ie(),c=l.TOUCH_ROTATE;break;case nd.PAN:if(n.enablePan===!1)return;he(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case nd.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ee(),c=l.TOUCH_DOLLY_PAN;break;case nd.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;de(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(o)}function dt(Ee){switch(ni(Ee),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;ve(Ee),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;Ce(Ee),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;te(Ee),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;q(Ee),n.update();break;default:c=l.NONE}}function Ut(Ee){n.enabled!==!1&&Ee.preventDefault()}function zt(Ee){A.push(Ee)}function _t(Ee){delete D[Ee.pointerId];for(let Ue=0;Ue<A.length;Ue++)if(A[Ue].pointerId==Ee.pointerId){A.splice(Ue,1);return}}function ni(Ee){let Ue=D[Ee.pointerId];Ue===void 0&&(Ue=new Ge,D[Ee.pointerId]=Ue),Ue.set(Ee.pageX,Ee.pageY)}function Bi(Ee){const Ue=Ee.pointerId===A[0].pointerId?A[1]:A[0];return D[Ue.pointerId]}i!==void 0&&this.connect(i),this.update()}}new wt;new le;function xte(r,e,i){const n=i.length-r-1;if(e>=i[n])return n-1;if(e<=i[r])return r;let s=r,o=n,a=Math.floor((s+o)/2);for(;e<i[a]||e>=i[a+1];)e<i[a]?o=a:s=a,a=Math.floor((s+o)/2);return a}function H5e(r,e,i,n){const s=[],o=[],a=[];s[0]=1;for(let l=1;l<=i;++l){o[l]=e-n[r+1-l],a[l]=n[r+l]-e;let c=0;for(let u=0;u<l;++u){const d=a[u+1],p=o[l-u],m=s[u]/(d+p);s[u]=c+d*m,c=p*m}s[l]=c}return s}function Q5e(r,e,i,n){const s=xte(r,n,e),o=H5e(s,n,r,e),a=new ji(0,0,0,0);for(let l=0;l<=r;++l){const c=i[s-r+l],u=o[l],d=c.w*u;a.x+=c.x*d,a.y+=c.y*d,a.z+=c.z*d,a.w+=c.w*u}return a}function j5e(r,e,i,n,s){const o=[];for(let p=0;p<=i;++p)o[p]=0;const a=[];for(let p=0;p<=n;++p)a[p]=o.slice(0);const l=[];for(let p=0;p<=i;++p)l[p]=o.slice(0);l[0][0]=1;const c=o.slice(0),u=o.slice(0);for(let p=1;p<=i;++p){c[p]=e-s[r+1-p],u[p]=s[r+p]-e;let m=0;for(let g=0;g<p;++g){const y=u[g+1],_=c[p-g];l[p][g]=y+_;const x=l[g][p-1]/l[p][g];l[g][p]=m+y*x,m=_*x}l[p][p]=m}for(let p=0;p<=i;++p)a[0][p]=l[p][i];for(let p=0;p<=i;++p){let m=0,g=1;const y=[];for(let _=0;_<=i;++_)y[_]=o.slice(0);y[0][0]=1;for(let _=1;_<=n;++_){let x=0;const O=p-_,S=i-_;p>=_&&(y[g][0]=y[m][0]/l[S+1][O],x=y[g][0]*l[O][S]);const w=O>=-1?1:-O,C=p-1<=S?_-1:i-p;for(let P=w;P<=C;++P)y[g][P]=(y[m][P]-y[m][P-1])/l[S+1][O+P],x+=y[g][P]*l[O+P][S];p<=S&&(y[g][_]=-y[m][_-1]/l[S+1][p],x+=y[g][_]*l[p][S]),a[_][p]=x;const M=m;m=g,g=M}}let d=i;for(let p=1;p<=n;++p){for(let m=0;m<=i;++m)a[p][m]*=d;d*=i-p}return a}function Y5e(r,e,i,n,s){const o=s<r?s:r,a=[],l=xte(r,n,e),c=j5e(l,n,r,o,e),u=[];for(let d=0;d<i.length;++d){const p=i[d].clone(),m=p.w;p.x*=m,p.y*=m,p.z*=m,u[d]=p}for(let d=0;d<=o;++d){const p=u[l-r].clone().multiplyScalar(c[d][0]);for(let m=1;m<=r;++m)p.add(u[l-r+m].clone().multiplyScalar(c[d][m]));a[d]=p}for(let d=o+1;d<=s+1;++d)a[d]=new ji(0,0,0);return a}function q5e(r,e){let i=1;for(let s=2;s<=r;++s)i*=s;let n=1;for(let s=2;s<=e;++s)n*=s;for(let s=2;s<=r-e;++s)n*=s;return i/n}function Z5e(r){const e=r.length,i=[],n=[];for(let o=0;o<e;++o){const a=r[o];i[o]=new le(a.x,a.y,a.z),n[o]=a.w}const s=[];for(let o=0;o<e;++o){const a=i[o].clone();for(let l=1;l<=o;++l)a.sub(s[o-l].clone().multiplyScalar(q5e(o,l)*n[l]));s[o]=a.divideScalar(n[0])}return s}function K5e(r,e,i,n,s){const o=Y5e(r,e,i,n,s);return Z5e(o)}class PX extends xh{constructor(e,i,n,s,o){super(),this.degree=e,this.knots=i,this.controlPoints=[],this.startKnot=s||0,this.endKnot=o||this.knots.length-1;for(let a=0;a<n.length;++a){const l=n[a];this.controlPoints[a]=new ji(l.x,l.y,l.z,l.w)}}getPoint(e,i){const n=i||new le,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=Q5e(this.degree,this.knots,this.controlPoints,s);return o.w!=1&&o.divideScalar(o.w),n.set(o.x,o.y,o.z)}getTangent(e,i){const n=i||new le,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=K5e(this.degree,this.knots,this.controlPoints,s,1);return n.copy(o[1]).normalize(),n}}let en,Hr,fa;class J5e extends ia{constructor(e){super(e)}load(e,i,n,s){const o=this,a=o.path===""?Jy.extractUrlBase(e):o.path,l=new hu(this.manager);l.setPath(o.path),l.setResponseType("arraybuffer"),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(c){try{i(o.parse(c,a))}catch(u){s?s(u):console.error(u),o.manager.itemError(e)}},n,s)}parse(e,i){if(sDe(e))en=new rDe().parse(e);else{const s=Ste(e);if(!oDe(s))throw new Error("THREE.FBXLoader: Unknown format.");if(IX(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+IX(s));en=new nDe().parse(s)}const n=new _P(this.manager).setPath(this.resourcePath||i).setCrossOrigin(this.crossOrigin);return new eDe(n,this.manager).parse(en)}}class eDe{constructor(e,i){this.textureLoader=e,this.manager=i}parse(){Hr=this.parseConnections();const e=this.parseImages(),i=this.parseTextures(e),n=this.parseMaterials(i),s=this.parseDeformers(),o=new tDe().parse(s);return this.parseScene(s,o,n),fa}parseConnections(){const e=new Map;return"Connections"in en&&en.Connections.connections.forEach(function(i){const n=i[0],s=i[1],o=i[2];e.has(n)||e.set(n,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(n).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:n,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},i={};if("Video"in en.Objects){const n=en.Objects.Video;for(const s in n){const o=n[s],a=parseInt(s);if(e[a]=o.RelativeFilename||o.Filename,"Content"in o){const l=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,c=typeof o.Content=="string"&&o.Content!=="";if(l||c){const u=this.parseImage(n[s]);i[o.RelativeFilename||o.Filename]=u}}}}for(const n in e){const s=e[n];i[s]!==void 0?e[n]=i[s]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const i=e.Content,n=e.RelativeFilename||e.Filename,s=n.slice(n.lastIndexOf(".")+1).toLowerCase();let o;switch(s){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof i=="string")return"data:"+o+";base64,"+i;{const a=new Uint8Array(i);return window.URL.createObjectURL(new Blob([a],{type:o}))}}parseTextures(e){const i=new Map;if("Texture"in en.Objects){const n=en.Objects.Texture;for(const s in n){const o=this.parseTexture(n[s],e);i.set(parseInt(s),o)}}return i}parseTexture(e,i){const n=this.loadTexture(e,i);n.ID=e.id,n.name=e.attrName;const s=e.WrapModeU,o=e.WrapModeV,a=s!==void 0?s.value:0,l=o!==void 0?o.value:0;if(n.wrapS=a===0?Cp:jo,n.wrapT=l===0?Cp:jo,"Scaling"in e){const c=e.Scaling.value;n.repeat.x=c[0],n.repeat.y=c[1]}return n}loadTexture(e,i){let n;const s=this.textureLoader.path,o=Hr.get(e.id).children;o!==void 0&&o.length>0&&i[o[0].ID]!==void 0&&(n=i[o[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const l=e.FileName.slice(-3).toLowerCase();if(l==="tga"){const c=this.manager.getHandler(".tga");c===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new Xr):(c.setPath(this.textureLoader.path),a=c.load(n))}else l==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new Xr):a=this.textureLoader.load(n);return this.textureLoader.setPath(s),a}parseMaterials(e){const i=new Map;if("Material"in en.Objects){const n=en.Objects.Material;for(const s in n){const o=this.parseMaterial(n[s],e);o!==null&&i.set(parseInt(s),o)}}return i}parseMaterial(e,i){const n=e.id,s=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!Hr.has(n))return null;const a=this.parseParameters(e,i,n);let l;switch(o.toLowerCase()){case"phong":l=new zb;break;case"lambert":l=new VN;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),l=new zb;break}return l.setValues(a),l.name=s,l}parseParameters(e,i,n){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new ut().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=new ut().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new ut().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=new ut().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new ut().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new ut().fromArray(e.SpecularColor.value));const o=this;return Hr.get(n).children.forEach(function(a){const l=a.relationship;switch(l){case"Bump":s.bumpMap=o.getTexture(i,a.ID);break;case"Maya|TEX_ao_map":s.aoMap=o.getTexture(i,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=o.getTexture(i,a.ID),s.map!==void 0&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=o.getTexture(i,a.ID);break;case"EmissiveColor":s.emissiveMap=o.getTexture(i,a.ID),s.emissiveMap!==void 0&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=o.getTexture(i,a.ID);break;case"ReflectionColor":s.envMap=o.getTexture(i,a.ID),s.envMap!==void 0&&(s.envMap.mapping=Uy,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=o.getTexture(i,a.ID),s.specularMap!==void 0&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=o.getTexture(i,a.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",l);break}}),s}getTexture(e,i){return"LayeredTexture"in en.Objects&&i in en.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),i=Hr.get(i).children[0].ID),e.get(i)}parseDeformers(){const e={},i={};if("Deformer"in en.Objects){const n=en.Objects.Deformer;for(const s in n){const o=n[s],a=Hr.get(parseInt(s));if(o.attrType==="Skin"){const l=this.parseSkeleton(a,n);l.ID=s,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=a.parents[0].ID,e[s]=l}else if(o.attrType==="BlendShape"){const l={id:s};l.rawTargets=this.parseMorphTargets(a,n),l.id=s,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),i[s]=l}}}return{skeletons:e,morphTargets:i}}parseSkeleton(e,i){const n=[];return e.children.forEach(function(s){const o=i[s.ID];if(o.attrType!=="Cluster")return;const a={ID:s.ID,indices:[],weights:[],transformLink:new wt().fromArray(o.TransformLink.a)};"Indexes"in o&&(a.indices=o.Indexes.a,a.weights=o.Weights.a),n.push(a)}),{rawBones:n,bones:[]}}parseMorphTargets(e,i){const n=[];for(let s=0;s<e.children.length;s++){const o=e.children[s],a=i[o.ID],l={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;l.geoID=Hr.get(parseInt(o.ID)).children.filter(function(c){return c.relationship===void 0})[0].ID,n.push(l)}return n}parseScene(e,i,n){fa=new cd;const s=this.parseModels(e.skeletons,i,n),o=en.Objects.Model,a=this;s.forEach(function(c){const u=o[c.ID];a.setLookAtProperties(c,u),Hr.get(c.ID).parents.forEach(function(d){const p=s.get(d.ID);p!==void 0&&p.add(c)}),c.parent===null&&fa.add(c)}),this.bindSkeleton(e.skeletons,i,s),this.createAmbientLight(),fa.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);const u=wte(c.userData.transformData);c.applyMatrix4(u),c.updateWorldMatrix()}});const l=new iDe().parse();fa.children.length===1&&fa.children[0].isGroup&&(fa.children[0].animations=l,fa=fa.children[0]),fa.animations=l}parseModels(e,i,n){const s=new Map,o=en.Objects.Model;for(const a in o){const l=parseInt(a),c=o[a],u=Hr.get(l);let d=this.buildSkeleton(u,e,l,c.attrName);if(!d){switch(c.attrType){case"Camera":d=this.createCamera(u);break;case"Light":d=this.createLight(u);break;case"Mesh":d=this.createMesh(u,i,n);break;case"NurbsCurve":d=this.createCurve(u,i);break;case"LimbNode":case"Root":d=new Cw;break;case"Null":default:d=new cd;break}d.name=c.attrName?Gi.sanitizeNodeName(c.attrName):"",d.ID=l}this.getTransformData(d,c),s.set(l,d)}return s}buildSkeleton(e,i,n,s){let o=null;return e.parents.forEach(function(a){for(const l in i){const c=i[l];c.rawBones.forEach(function(u,d){if(u.ID===a.ID){const p=o;o=new Cw,o.matrixWorld.copy(u.transformLink),o.name=s?Gi.sanitizeNodeName(s):"",o.ID=n,c.bones[d]=o,p!==null&&o.add(p)}})}}),o}createCamera(e){let i,n;if(e.children.forEach(function(s){const o=en.Objects.NodeAttribute[s.ID];o!==void 0&&(n=o)}),n===void 0)i=new dn;else{let s=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(s=1);let o=1;n.NearPlane!==void 0&&(o=n.NearPlane.value/1e3);let a=1e3;n.FarPlane!==void 0&&(a=n.FarPlane.value/1e3);let l=window.innerWidth,c=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(l=n.AspectWidth.value,c=n.AspectHeight.value);const u=l/c;let d=45;n.FieldOfView!==void 0&&(d=n.FieldOfView.value);const p=n.FocalLength?n.FocalLength.value:null;switch(s){case 0:i=new $n(d,u,o,a),p!==null&&i.setFocalLength(p);break;case 1:i=new sh(-l/2,l/2,c/2,-c/2,o,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),i=new dn;break}}return i}createLight(e){let i,n;if(e.children.forEach(function(s){const o=en.Objects.NodeAttribute[s.ID];o!==void 0&&(n=o)}),n===void 0)i=new dn;else{let s;n.LightType===void 0?s=0:s=n.LightType.value;let o=16777215;n.Color!==void 0&&(o=new ut().fromArray(n.Color.value));let a=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(a=0);let l=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?l=0:l=n.FarAttenuationEnd.value);const c=1;switch(s){case 0:i=new pE(o,a,l,c);break;case 1:i=new WN(o,a);break;case 2:let u=Math.PI/3;n.InnerAngle!==void 0&&(u=yo.degToRad(n.InnerAngle.value));let d=0;n.OuterAngle!==void 0&&(d=yo.degToRad(n.OuterAngle.value),d=Math.max(d,1)),i=new xP(o,a,l,u,d,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),i=new pE(o,a);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(i.castShadow=!0)}return i}createMesh(e,i,n){let s,o=null,a=null;const l=[];return e.children.forEach(function(c){i.has(c.ID)&&(o=i.get(c.ID)),n.has(c.ID)&&l.push(n.get(c.ID))}),l.length>1?a=l:l.length>0?a=l[0]:(a=new zb({color:13421772}),l.push(a)),"color"in o.attributes&&l.forEach(function(c){c.vertexColors=!0}),o.FBX_Deformer?(s=new PN(o,a),s.normalizeSkinWeights()):s=new Un(o,a),s}createCurve(e,i){const n=e.children.reduce(function(o,a){return i.has(a.ID)&&(o=i.get(a.ID)),o},null),s=new Mo({color:3342591,linewidth:1});return new Pd(n,s)}getTransformData(e,i){const n={};"InheritType"in i&&(n.inheritType=parseInt(i.InheritType.value)),"RotationOrder"in i?n.eulerOrder=Ote(i.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in i&&(n.translation=i.Lcl_Translation.value),"PreRotation"in i&&(n.preRotation=i.PreRotation.value),"Lcl_Rotation"in i&&(n.rotation=i.Lcl_Rotation.value),"PostRotation"in i&&(n.postRotation=i.PostRotation.value),"Lcl_Scaling"in i&&(n.scale=i.Lcl_Scaling.value),"ScalingOffset"in i&&(n.scalingOffset=i.ScalingOffset.value),"ScalingPivot"in i&&(n.scalingPivot=i.ScalingPivot.value),"RotationOffset"in i&&(n.rotationOffset=i.RotationOffset.value),"RotationPivot"in i&&(n.rotationPivot=i.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,i){"LookAtProperty"in i&&Hr.get(e.ID).children.forEach(function(n){if(n.relationship==="LookAtProperty"){const s=en.Objects.Model[n.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),fa.add(e.target)):e.lookAt(new le().fromArray(o))}}})}bindSkeleton(e,i,n){const s=this.parsePoseNodes();for(const o in e){const a=e[o];Hr.get(parseInt(a.ID)).parents.forEach(function(l){if(i.has(l.ID)){const c=l.ID;Hr.get(c).parents.forEach(function(u){n.has(u.ID)&&n.get(u.ID).bind(new UO(a.bones),s[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in en.Objects){const i=en.Objects.Pose;for(const n in i)if(i[n].attrType==="BindPose"&&i[n].NbPoseNodes>0){const s=i[n].PoseNode;Array.isArray(s)?s.forEach(function(o){e[o.Node]=new wt().fromArray(o.Matrix.a)}):e[s.Node]=new wt().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in en&&"AmbientColor"in en.GlobalSettings){const e=en.GlobalSettings.AmbientColor.value,i=e[0],n=e[1],s=e[2];if(i!==0||n!==0||s!==0){const o=new ut(i,n,s);fa.add(new GN(o,1))}}}}class tDe{parse(e){const i=new Map;if("Geometry"in en.Objects){const n=en.Objects.Geometry;for(const s in n){const o=Hr.get(parseInt(s)),a=this.parseGeometry(o,n[s],e);i.set(parseInt(s),a)}}return i}parseGeometry(e,i,n){switch(i.attrType){case"Mesh":return this.parseMeshGeometry(e,i,n);case"NurbsCurve":return this.parseNurbsGeometry(i)}}parseMeshGeometry(e,i,n){const s=n.skeletons,o=[],a=e.parents.map(function(p){return en.Objects.Model[p.ID]});if(a.length===0)return;const l=e.children.reduce(function(p,m){return s[m.ID]!==void 0&&(p=s[m.ID]),p},null);e.children.forEach(function(p){n.morphTargets[p.ID]!==void 0&&o.push(n.morphTargets[p.ID])});const c=a[0],u={};"RotationOrder"in c&&(u.eulerOrder=Ote(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);const d=wte(u);return this.genGeometry(i,l,o,d)}genGeometry(e,i,n,s){const o=new Ai;e.attrName&&(o.name=e.attrName);const a=this.parseGeoNode(e,i),l=this.genBuffers(a),c=new $t(l.vertex,3);if(c.applyMatrix4(s),o.setAttribute("position",c),l.colors.length>0&&o.setAttribute("color",new $t(l.colors,3)),i&&(o.setAttribute("skinIndex",new eP(l.weightsIndices,4)),o.setAttribute("skinWeight",new $t(l.vertexWeights,4)),o.FBX_Deformer=i),l.normal.length>0){const u=new Fi().getNormalMatrix(s),d=new $t(l.normal,3);d.applyNormalMatrix(u),o.setAttribute("normal",d)}if(l.uvs.forEach(function(u,d){let p="uv"+(d+1).toString();d===0&&(p="uv"),o.setAttribute(p,new $t(l.uvs[d],2))}),a.material&&a.material.mappingType!=="AllSame"){let u=l.materialIndex[0],d=0;if(l.materialIndex.forEach(function(p,m){p!==u&&(o.addGroup(d,m-d,u),u=p,d=m)}),o.groups.length>0){const p=o.groups[o.groups.length-1],m=p.start+p.count;m!==l.materialIndex.length&&o.addGroup(m,l.materialIndex.length-m,u)}o.groups.length===0&&o.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(o,e,n,s),o}parseGeoNode(e,i){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return n.weightTable={},i!==null&&(n.skeleton=i,i.rawBones.forEach(function(s,o){s.indices.forEach(function(a,l){n.weightTable[a]===void 0&&(n.weightTable[a]=[]),n.weightTable[a].push({id:o,weight:s.weights[l]})})})),n}genBuffers(e){const i={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,s=0,o=!1,a=[],l=[],c=[],u=[],d=[],p=[];const m=this;return e.vertexIndices.forEach(function(g,y){let _,x=!1;g<0&&(g=g^-1,x=!0);let O=[],S=[];if(a.push(g*3,g*3+1,g*3+2),e.color){const w=A2(y,n,g,e.color);c.push(w[0],w[1],w[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(w){S.push(w.weight),O.push(w.id)}),S.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const w=[0,0,0,0],C=[0,0,0,0];S.forEach(function(M,P){let R=M,k=O[P];C.forEach(function(I,A,D){if(R>I){D[A]=R,R=I;const V=w[A];w[A]=k,k=V}})}),O=w,S=C}for(;S.length<4;)S.push(0),O.push(0);for(let w=0;w<4;++w)d.push(S[w]),p.push(O[w])}if(e.normal){const w=A2(y,n,g,e.normal);l.push(w[0],w[1],w[2])}e.material&&e.material.mappingType!=="AllSame"&&(_=A2(y,n,g,e.material)[0]),e.uv&&e.uv.forEach(function(w,C){const M=A2(y,n,g,w);u[C]===void 0&&(u[C]=[]),u[C].push(M[0]),u[C].push(M[1])}),s++,x&&(m.genFace(i,e,a,_,l,c,u,d,p,s),n++,s=0,a=[],l=[],c=[],u=[],d=[],p=[])}),i}genFace(e,i,n,s,o,a,l,c,u,d){for(let p=2;p<d;p++)e.vertex.push(i.vertexPositions[n[0]]),e.vertex.push(i.vertexPositions[n[1]]),e.vertex.push(i.vertexPositions[n[2]]),e.vertex.push(i.vertexPositions[n[(p-1)*3]]),e.vertex.push(i.vertexPositions[n[(p-1)*3+1]]),e.vertex.push(i.vertexPositions[n[(p-1)*3+2]]),e.vertex.push(i.vertexPositions[n[p*3]]),e.vertex.push(i.vertexPositions[n[p*3+1]]),e.vertex.push(i.vertexPositions[n[p*3+2]]),i.skeleton&&(e.vertexWeights.push(c[0]),e.vertexWeights.push(c[1]),e.vertexWeights.push(c[2]),e.vertexWeights.push(c[3]),e.vertexWeights.push(c[(p-1)*4]),e.vertexWeights.push(c[(p-1)*4+1]),e.vertexWeights.push(c[(p-1)*4+2]),e.vertexWeights.push(c[(p-1)*4+3]),e.vertexWeights.push(c[p*4]),e.vertexWeights.push(c[p*4+1]),e.vertexWeights.push(c[p*4+2]),e.vertexWeights.push(c[p*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(p-1)*4]),e.weightsIndices.push(u[(p-1)*4+1]),e.weightsIndices.push(u[(p-1)*4+2]),e.weightsIndices.push(u[(p-1)*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3])),i.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(p-1)*3]),e.colors.push(a[(p-1)*3+1]),e.colors.push(a[(p-1)*3+2]),e.colors.push(a[p*3]),e.colors.push(a[p*3+1]),e.colors.push(a[p*3+2])),i.material&&i.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),i.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[(p-1)*3]),e.normal.push(o[(p-1)*3+1]),e.normal.push(o[(p-1)*3+2]),e.normal.push(o[p*3]),e.normal.push(o[p*3+1]),e.normal.push(o[p*3+2])),i.uv&&i.uv.forEach(function(m,g){e.uvs[g]===void 0&&(e.uvs[g]=[]),e.uvs[g].push(l[g][0]),e.uvs[g].push(l[g][1]),e.uvs[g].push(l[g][(p-1)*2]),e.uvs[g].push(l[g][(p-1)*2+1]),e.uvs[g].push(l[g][p*2]),e.uvs[g].push(l[g][p*2+1])})}addMorphTargets(e,i,n,s){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;n.forEach(function(a){a.rawTargets.forEach(function(l){const c=en.Objects.Geometry[l.geoID];c!==void 0&&o.genMorphGeometry(e,i,c,s,l.name)})})}genMorphGeometry(e,i,n,s,o){const a=i.PolygonVertexIndex!==void 0?i.PolygonVertexIndex.a:[],l=n.Vertices!==void 0?n.Vertices.a:[],c=n.Indexes!==void 0?n.Indexes.a:[],u=e.attributes.position.count*3,d=new Float32Array(u);for(let y=0;y<c.length;y++){const _=c[y]*3;d[_]=l[y*3],d[_+1]=l[y*3+1],d[_+2]=l[y*3+2]}const p={vertexIndices:a,vertexPositions:d},m=this.genBuffers(p),g=new $t(m.vertex,3);g.name=o||n.attrName,g.applyMatrix4(s),e.morphAttributes.position.push(g)}parseNormals(e){const i=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Normals.a;let o=[];return n==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:o,mappingType:i,referenceType:n}}parseUVs(e){const i=e.MappingInformationType,n=e.ReferenceInformationType,s=e.UV.a;let o=[];return n==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:s,indices:o,mappingType:i,referenceType:n}}parseVertexColors(e){const i=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Colors.a;let o=[];return n==="IndexToDirect"&&(o=e.ColorIndex.a),{dataSize:4,buffer:s,indices:o,mappingType:i,referenceType:n}}parseMaterialIndices(e){const i=e.MappingInformationType,n=e.ReferenceInformationType;if(i==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const s=e.Materials.a,o=[];for(let a=0;a<s.length;++a)o.push(a);return{dataSize:1,buffer:s,indices:o,mappingType:i,referenceType:n}}parseNurbsGeometry(e){if(PX===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Ai;const i=parseInt(e.Order);if(isNaN(i))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Ai;const n=i-1,s=e.KnotVector.a,o=[],a=e.Points.a;for(let d=0,p=a.length;d<p;d+=4)o.push(new ji().fromArray(a,d));let l,c;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){l=n,c=s.length-1-l;for(let d=0;d<n;++d)o.push(o[d])}const u=new PX(n,s,o,l,c).getPoints(o.length*12);return new Ai().setFromPoints(u)}}class iDe{parse(){const e=[],i=this.parseClips();if(i!==void 0)for(const n in i){const s=i[n],o=this.addClip(s);e.push(o)}return e}parseClips(){if(en.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const i=this.parseAnimationLayers(e);return this.parseAnimStacks(i)}parseAnimationCurveNodes(){const e=en.Objects.AnimationCurveNode,i=new Map;for(const n in e){const s=e[n];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:s.id,attr:s.attrName,curves:{}};i.set(o.id,o)}}return i}parseAnimationCurves(e){const i=en.Objects.AnimationCurve;for(const n in i){const s={id:i[n].id,times:i[n].KeyTime.a.map(aDe),values:i[n].KeyValueFloat.a},o=Hr.get(s.id);if(o!==void 0){const a=o.parents[0].ID,l=o.parents[0].relationship;l.match(/X/)?e.get(a).curves.x=s:l.match(/Y/)?e.get(a).curves.y=s:l.match(/Z/)?e.get(a).curves.z=s:l.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=s)}}}parseAnimationLayers(e){const i=en.Objects.AnimationLayer,n=new Map;for(const s in i){const o=[],a=Hr.get(parseInt(s));a!==void 0&&(a.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(o[c]===void 0){const d=Hr.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(d!==void 0){const p=en.Objects.Model[d.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const m={modelName:p.attrName?Gi.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};fa.traverse(function(g){g.ID===p.id&&(m.transform=g.matrix,g.userData.transformData&&(m.eulerOrder=g.userData.transformData.eulerOrder))}),m.transform||(m.transform=new wt),"PreRotation"in p&&(m.preRotation=p.PreRotation.value),"PostRotation"in p&&(m.postRotation=p.PostRotation.value),o[c]=m}}o[c]&&(o[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(o[c]===void 0){const d=Hr.get(l.ID).parents.filter(function(x){return x.relationship!==void 0})[0].ID,p=Hr.get(d).parents[0].ID,m=Hr.get(p).parents[0].ID,g=Hr.get(m).parents[0].ID,y=en.Objects.Model[g],_={modelName:y.attrName?Gi.sanitizeNodeName(y.attrName):"",morphName:en.Objects.Deformer[d].attrName};o[c]=_}o[c][u.attr]=u}}}),n.set(parseInt(s),o))}return n}parseAnimStacks(e){const i=en.Objects.AnimationStack,n={};for(const s in i){const o=Hr.get(parseInt(s)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(o[0].ID);n[s]={name:i[s].attrName,layer:a}}return n}addClip(e){let i=[];const n=this;return e.layer.forEach(function(s){i=i.concat(n.generateTracks(s))}),new Ky(e.name,-1,i)}generateTracks(e){const i=[];let n=new le,s=new ds,o=new le;if(e.transform&&e.transform.decompose(n,s,o),n=n.toArray(),s=new Cs().setFromQuaternion(s,e.eulerOrder).toArray(),o=o.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");a!==void 0&&i.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&i.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");a!==void 0&&i.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&i.push(a)}return i}generateVectorTrack(e,i,n,s){const o=this.getTimesForAllAxes(i),a=this.getKeyframeTrackValues(o,i,n);return new Zy(e+"."+s,o,a)}generateRotationTrack(e,i,n,s,o,a){i.x!==void 0&&(this.interpolateRotations(i.x),i.x.values=i.x.values.map(yo.degToRad)),i.y!==void 0&&(this.interpolateRotations(i.y),i.y.values=i.y.values.map(yo.degToRad)),i.z!==void 0&&(this.interpolateRotations(i.z),i.z.values=i.z.values.map(yo.degToRad));const l=this.getTimesForAllAxes(i),c=this.getKeyframeTrackValues(l,i,n);s!==void 0&&(s=s.map(yo.degToRad),s.push(a),s=new Cs().fromArray(s),s=new ds().setFromEuler(s)),o!==void 0&&(o=o.map(yo.degToRad),o.push(a),o=new Cs().fromArray(o),o=new ds().setFromEuler(o).invert());const u=new ds,d=new Cs,p=[];for(let m=0;m<c.length;m+=3)d.set(c[m],c[m+1],c[m+2],a),u.setFromEuler(d),s!==void 0&&u.premultiply(s),o!==void 0&&u.multiply(o),u.toArray(p,m/3*4);return new m0(e+".quaternion",l,p)}generateMorphTrack(e){const i=e.DeformPercent.curves.morph,n=i.values.map(function(o){return o/100}),s=fa.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new qy(e.modelName+".morphTargetInfluences["+s+"]",i.times,n)}getTimesForAllAxes(e){let i=[];if(e.x!==void 0&&(i=i.concat(e.x.times)),e.y!==void 0&&(i=i.concat(e.y.times)),e.z!==void 0&&(i=i.concat(e.z.times)),i=i.sort(function(n,s){return n-s}),i.length>1){let n=1,s=i[0];for(let o=1;o<i.length;o++){const a=i[o];a!==s&&(i[n]=a,s=a,n++)}i=i.slice(0,n)}return i}getKeyframeTrackValues(e,i,n){const s=n,o=[];let a=-1,l=-1,c=-1;return e.forEach(function(u){if(i.x&&(a=i.x.times.indexOf(u)),i.y&&(l=i.y.times.indexOf(u)),i.z&&(c=i.z.times.indexOf(u)),a!==-1){const d=i.x.values[a];o.push(d),s[0]=d}else o.push(s[0]);if(l!==-1){const d=i.y.values[l];o.push(d),s[1]=d}else o.push(s[1]);if(c!==-1){const d=i.z.values[c];o.push(d),s[2]=d}else o.push(s[2])}),o}interpolateRotations(e){for(let i=1;i<e.values.length;i++){const n=e.values[i-1],s=e.values[i]-n,o=Math.abs(s);if(o>=180){const a=o/180,l=s/a;let c=n+l;const u=e.times[i-1],d=(e.times[i]-u)/a;let p=u+d;const m=[],g=[];for(;p<e.times[i];)m.push(p),p+=d,g.push(c),c+=l;e.times=RX(e.times,i,m),e.values=RX(e.values,i,g)}}}}class nDe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,i){this.currentProp=e,this.currentPropName=i}parse(e){this.currentIndent=0,this.allNodes=new bte,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const i=this,n=e.split(/[\r\n]+/);return n.forEach(function(s,o){const a=s.match(/^[\s\t]*;/),l=s.match(/^[\s\t]*$/);if(a||l)return;const c=s.match("^\\t{"+i.currentIndent+"}(\\w+):(.*){",""),u=s.match("^\\t{"+i.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),d=s.match("^\\t{"+(i.currentIndent-1)+"}}");c?i.parseNodeBegin(s,c):u?i.parseNodeProperty(s,u,n[++o]):d?i.popStack():s.match(/^[^\s\t}]/)&&i.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,i){const n=i[1].trim().replace(/^"/,"").replace(/"$/,""),s=i[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:n},a=this.parseNodeAttr(s),l=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,o):n in l?(n==="PoseNode"?l.PoseNode.push(o):l[n].id!==void 0&&(l[n]={},l[n][l[n].id]=l[n]),a.id!==""&&(l[n][a.id]=o)):typeof a.id=="number"?(l[n]={},l[n][a.id]=o):n!=="Properties70"&&(n==="PoseNode"?l[n]=[o]:l[n]=o),typeof a.id=="number"&&(o.id=a.id),a.name!==""&&(o.attrName=a.name),a.type!==""&&(o.attrType=a.type),this.pushStack(o)}parseNodeAttr(e){let i=e[0];e[0]!==""&&(i=parseInt(e[0]),isNaN(i)&&(i=e[0]));let n="",s="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:i,name:n,type:s}}parseNodeProperty(e,i,n){let s=i[1].replace(/^"/,"").replace(/"$/,"").trim(),o=i[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&o===","&&(o=n.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,s,o);return}if(s==="C"){const l=o.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let d=o.split(",").slice(3);d=d.map(function(p){return p.trim().replace(/^"/,"")}),s="connections",o=[c,u],hDe(o,d),a[s]===void 0&&(a[s]=[])}s==="Node"&&(a.id=o),s in a&&Array.isArray(a[s])?a[s].push(o):s!=="a"?a[s]=o:a.a=o,this.setCurrentProp(a,s),s==="a"&&o.slice(-1)!==","&&(a.a=HI(o))}parseNodePropertyContinued(e){const i=this.getCurrentNode();i.a+=e,e.slice(-1)!==","&&(i.a=HI(i.a))}parseNodeSpecialProperty(e,i,n){const s=n.split('",').map(function(d){return d.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=s[0],a=s[1],l=s[2],c=s[3];let u=s[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=HI(u);break}this.getPrevNode()[o]={type:a,type2:l,flag:c,value:u},this.setCurrentProp(this.getPrevNode(),o)}}class rDe{parse(e){const i=new kX(e);i.skip(23);const n=i.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const s=new bte;for(;!this.endOfContent(i);){const o=this.parseNode(i,n);o!==null&&s.add(o.name,o)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,i){const n={},s=i>=7500?e.getUint64():e.getUint32(),o=i>=7500?e.getUint64():e.getUint32();i>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),l=e.getString(a);if(s===0)return null;const c=[];for(let m=0;m<o;m++)c.push(this.parseProperty(e));const u=c.length>0?c[0]:"",d=c.length>1?c[1]:"",p=c.length>2?c[2]:"";for(n.singleProperty=o===1&&e.getOffset()===s;s>e.getOffset();){const m=this.parseNode(e,i);m!==null&&this.parseSubNode(l,n,m)}return n.propertyList=c,typeof u=="number"&&(n.id=u),d!==""&&(n.attrName=d),p!==""&&(n.attrType=p),l!==""&&(n.name=l),n}parseSubNode(e,i,n){if(n.singleProperty===!0){const s=n.propertyList[0];Array.isArray(s)?(i[n.name]=n,n.a=s):i[n.name]=s}else if(e==="Connections"&&n.name==="C"){const s=[];n.propertyList.forEach(function(o,a){a!==0&&s.push(o)}),i.connections===void 0&&(i.connections=[]),i.connections.push(s)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){i[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let s=n.propertyList[0],o=n.propertyList[1];const a=n.propertyList[2],l=n.propertyList[3];let c;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?c=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:c=n.propertyList[4],i[s]={type:o,type2:a,flag:l,value:c}}else i[n.name]===void 0?typeof n.id=="number"?(i[n.name]={},i[n.name][n.id]=n):i[n.name]=n:n.name==="PoseNode"?(Array.isArray(i[n.name])||(i[n.name]=[i[n.name]]),i[n.name].push(n)):i[n.name][n.id]===void 0&&(i[n.name][n.id]=n)}parseProperty(e){const i=e.getString(1);let n;switch(i){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(o===0)switch(i){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const l=F5e(new Uint8Array(e.getArrayBuffer(a))),c=new kX(l.buffer);switch(i){case"b":case"c":return c.getBooleanArray(s);case"d":return c.getFloat64Array(s);case"f":return c.getFloat32Array(s);case"i":return c.getInt32Array(s);case"l":return c.getInt64Array(s)}default:throw new Error("THREE.FBXLoader: Unknown property type "+i)}}}class kX{constructor(e,i){this.dv=new DataView(e),this.offset=0,this.littleEndian=i!==void 0?i:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const i=[];for(let n=0;n<e;n++)i.push(this.getBoolean());return i}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const i=[];for(let n=0;n<e;n++)i.push(this.getInt32());return i}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,i;return this.littleEndian?(e=this.getUint32(),i=this.getUint32()):(i=this.getUint32(),e=this.getUint32()),i&2147483648?(i=~i&4294967295,e=~e&4294967295,e===4294967295&&(i=i+1&4294967295),e=e+1&4294967295,-(i*4294967296+e)):i*4294967296+e}getInt64Array(e){const i=[];for(let n=0;n<e;n++)i.push(this.getInt64());return i}getUint64(){let e,i;return this.littleEndian?(e=this.getUint32(),i=this.getUint32()):(i=this.getUint32(),e=this.getUint32()),i*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const i=[];for(let n=0;n<e;n++)i.push(this.getFloat32());return i}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const i=[];for(let n=0;n<e;n++)i.push(this.getFloat64());return i}getArrayBuffer(e){const i=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,i}getString(e){let i=[];for(let s=0;s<e;s++)i[s]=this.getUint8();const n=i.indexOf(0);return n>=0&&(i=i.slice(0,n)),Jy.decodeText(new Uint8Array(i))}}class bte{add(e,i){this[e]=i}}function sDe(r){const e="Kaydara FBX Binary  \0";return r.byteLength>=e.length&&e===Ste(r,0,e.length)}function oDe(r){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let i=0;function n(s){const o=r[s-1];return r=r.slice(i+s),i++,o}for(let s=0;s<e.length;++s)if(n(1)===e[s])return!1;return!0}function IX(r){const e=/FBXVersion: (\d+)/,i=r.match(e);if(i)return parseInt(i[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function aDe(r){return r/46186158e3}const lDe=[];function A2(r,e,i,n){let s;switch(n.mappingType){case"ByPolygonVertex":s=r;break;case"ByPolygon":s=e;break;case"ByVertice":s=i;break;case"AllSame":s=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(s=n.indices[s]);const o=s*n.dataSize,a=o+n.dataSize;return cDe(lDe,n.buffer,o,a)}const GI=new Cs,vv=new le;function wte(r){const e=new wt,i=new wt,n=new wt,s=new wt,o=new wt,a=new wt,l=new wt,c=new wt,u=new wt,d=new wt,p=new wt,m=new wt,g=r.inheritType?r.inheritType:0;if(r.translation&&e.setPosition(vv.fromArray(r.translation)),r.preRotation){const A=r.preRotation.map(yo.degToRad);A.push(r.eulerOrder),i.makeRotationFromEuler(GI.fromArray(A))}if(r.rotation){const A=r.rotation.map(yo.degToRad);A.push(r.eulerOrder),n.makeRotationFromEuler(GI.fromArray(A))}if(r.postRotation){const A=r.postRotation.map(yo.degToRad);A.push(r.eulerOrder),s.makeRotationFromEuler(GI.fromArray(A)),s.invert()}r.scale&&o.scale(vv.fromArray(r.scale)),r.scalingOffset&&l.setPosition(vv.fromArray(r.scalingOffset)),r.scalingPivot&&a.setPosition(vv.fromArray(r.scalingPivot)),r.rotationOffset&&c.setPosition(vv.fromArray(r.rotationOffset)),r.rotationPivot&&u.setPosition(vv.fromArray(r.rotationPivot)),r.parentMatrixWorld&&(p.copy(r.parentMatrix),d.copy(r.parentMatrixWorld));const y=i.clone().multiply(n).multiply(s),_=new wt;_.extractRotation(d);const x=new wt;x.copyPosition(d);const O=x.clone().invert().multiply(d),S=_.clone().invert().multiply(O),w=o,C=new wt;if(g===0)C.copy(_).multiply(y).multiply(S).multiply(w);else if(g===1)C.copy(_).multiply(S).multiply(y).multiply(w);else{const A=new wt().scale(new le().setFromMatrixScale(p)).clone().invert(),D=S.clone().multiply(A);C.copy(_).multiply(y).multiply(D).multiply(w)}const M=u.clone().invert(),P=a.clone().invert();let R=e.clone().multiply(c).multiply(u).multiply(i).multiply(n).multiply(s).multiply(M).multiply(l).multiply(a).multiply(o).multiply(P);const k=new wt().copyPosition(R),I=d.clone().multiply(k);return m.copyPosition(I),R=m.clone().multiply(C),R.premultiply(d.invert()),R}function Ote(r){r=r||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return r===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[r]}function HI(r){return r.split(",").map(function(e){return parseFloat(e)})}function Ste(r,e,i){return e===void 0&&(e=0),i===void 0&&(i=r.byteLength),Jy.decodeText(new Uint8Array(r,e,i))}function hDe(r,e){for(let i=0,n=r.length,s=e.length;i<s;i++,n++)r[n]=e[i]}function cDe(r,e,i,n){for(let s=i,o=0;s<n;s++,o++)r[o]=e[s];return r}function RX(r,e,i){return r.slice(0,e).concat(i).concat(r.slice(e))}var uDe=Object.defineProperty,dDe=(r,e,i)=>e in r?uDe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,PV=(r,e,i)=>(dDe(r,typeof e!="symbol"?e+"":e,i),i);class Cte{constructor(e){PV(this,"data"),this.data=e}generateShapes(e,i=100,n){const s=[],o={letterSpacing:0,lineHeight:1,...n},a=fDe(e,i,this.data,o);for(let l=0,c=a.length;l<c;l++)Array.prototype.push.apply(s,a[l].toShapes(!1));return s}}PV(Cte,"isFont");PV(Cte,"type");function fDe(r,e,i,n){const s=Array.from(r),o=e/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,l=[];let c=0,u=0;for(let d=0;d<s.length;d++){const p=s[d];if(p===`
`)c=0,u-=a*n.lineHeight;else{const m=pDe(p,o,c,u,i);m&&(c+=m.offsetX+n.letterSpacing,l.push(m.path))}}return l}function pDe(r,e,i,n,s){const o=s.glyphs[r]||s.glyphs["?"];if(!o){console.error('THREE.Font: character "'+r+'" does not exists in font family '+s.familyName+".");return}const a=new ree;let l,c,u,d,p,m,g,y;if(o.o){const _=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let x=0,O=_.length;x<O;)switch(_[x++]){case"m":l=parseInt(_[x++])*e+i,c=parseInt(_[x++])*e+n,a.moveTo(l,c);break;case"l":l=parseInt(_[x++])*e+i,c=parseInt(_[x++])*e+n,a.lineTo(l,c);break;case"q":u=parseInt(_[x++])*e+i,d=parseInt(_[x++])*e+n,p=parseInt(_[x++])*e+i,m=parseInt(_[x++])*e+n,a.quadraticCurveTo(p,m,u,d);break;case"b":u=parseInt(_[x++])*e+i,d=parseInt(_[x++])*e+n,p=parseInt(_[x++])*e+i,m=parseInt(_[x++])*e+n,g=parseInt(_[x++])*e+i,y=parseInt(_[x++])*e+n,a.bezierCurveTo(p,m,g,y,u,d);break}}return{offsetX:o.ha*e,path:a}}class Nw extends Un{constructor(e,i={}){super(e),this.isReflector=!0,this.type="Reflector",this.camera=new $n;const n=this,s=i.color!==void 0?new ut(i.color):new ut(8355711),o=i.textureWidth||512,a=i.textureHeight||512,l=i.clipBias||0,c=i.shader||Nw.ReflectorShader,u=i.multisample!==void 0?i.multisample:4,d=new Qh,p=new le,m=new le,g=new le,y=new wt,_=new le(0,0,-1),x=new ji,O=new le,S=new le,w=new ji,C=new wt,M=this.camera,P=new yh(o,a,{samples:u,type:A_}),R=new ea({name:c.name!==void 0?c.name:"unspecified",uniforms:LO.clone(c.uniforms),fragmentShader:c.fragmentShader,vertexShader:c.vertexShader});R.uniforms.tDiffuse.value=P.texture,R.uniforms.color.value=s,R.uniforms.textureMatrix.value=C,this.material=R,this.onBeforeRender=function(k,I,A){if(m.setFromMatrixPosition(n.matrixWorld),g.setFromMatrixPosition(A.matrixWorld),y.extractRotation(n.matrixWorld),p.set(0,0,1),p.applyMatrix4(y),O.subVectors(m,g),O.dot(p)>0)return;O.reflect(p).negate(),O.add(m),y.extractRotation(A.matrixWorld),_.set(0,0,-1),_.applyMatrix4(y),_.add(g),S.subVectors(m,_),S.reflect(p).negate(),S.add(m),M.position.copy(O),M.up.set(0,1,0),M.up.applyMatrix4(y),M.up.reflect(p),M.lookAt(S),M.far=A.far,M.updateMatrixWorld(),M.projectionMatrix.copy(A.projectionMatrix),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(M.projectionMatrix),C.multiply(M.matrixWorldInverse),C.multiply(n.matrixWorld),d.setFromNormalAndCoplanarPoint(p,m),d.applyMatrix4(M.matrixWorldInverse),x.set(d.normal.x,d.normal.y,d.normal.z,d.constant);const D=M.projectionMatrix;w.x=(Math.sign(x.x)+D.elements[8])/D.elements[0],w.y=(Math.sign(x.y)+D.elements[9])/D.elements[5],w.z=-1,w.w=(1+D.elements[10])/D.elements[14],x.multiplyScalar(2/x.dot(w)),D.elements[2]=x.x,D.elements[6]=x.y,D.elements[10]=x.z+1-l,D.elements[14]=x.w,n.visible=!1;const V=k.getRenderTarget(),B=k.xr.enabled,L=k.shadowMap.autoUpdate;k.xr.enabled=!1,k.shadowMap.autoUpdate=!1,k.setRenderTarget(P),k.state.buffers.depth.setMask(!0),k.autoClear===!1&&k.clear(),k.render(I,M),k.xr.enabled=B,k.shadowMap.autoUpdate=L,k.setRenderTarget(V);const F=A.viewport;F!==void 0&&k.state.viewport(F),n.visible=!0},this.getRenderTarget=function(){return P},this.dispose=function(){P.dispose(),n.material.dispose()}}}Nw.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const mDe=["args","material-uniforms-color-value"],gDe=It("TresPlaneGeometry",{args:[5,5]},null,-1);Nw.ReflectorShader;function vDe(r){return DM()?(NL(r),!0):!1}function Tte(r){return typeof r=="function"?r():li(r)}const yDe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const _De=Object.prototype.toString,xDe=r=>_De.call(r)==="[object Object]",bDe=()=>{};function wDe(r){var e;const i=Tte(r);return(e=i==null?void 0:i.$el)!=null?e:i}const ODe=yDe?window:void 0;function QI(...r){let e,i,n,s;if(typeof r[0]=="string"||Array.isArray(r[0])?([i,n,s]=r,e=ODe):[e,i,n,s]=r,!e)return bDe;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);const o=[],a=()=>{o.forEach(d=>d()),o.length=0},l=(d,p,m,g)=>(d.addEventListener(p,m,g),()=>d.removeEventListener(p,m,g)),c=tn(()=>[wDe(e),Tte(s)],([d,p])=>{if(a(),!d)return;const m=xDe(p)?{...p}:p;o.push(...i.flatMap(g=>n.map(y=>l(d,g,y,m))))},{immediate:!0,flush:"post"}),u=()=>{c(),a()};return vDe(u),u}class _E extends Un{constructor(){super(_E.Geometry,new dc({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new le,i=new le,n=new n5(16,16),s=new n5(16,16);let o=lc;const a=_E.Geometry,l=new Ub({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),c=new Ub({uniforms:{map:{value:n},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),u=new Un(a,l),d=[],p=Ate.Shader,m=new Ub({name:p.name,uniforms:{map:{value:null},occlusionMap:{value:s},color:{value:new ut(16777215)},scale:{value:new Ge},screenPosition:{value:new le}},vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:lE,transparent:!0,depthWrite:!1}),g=new Un(a,m);this.addElement=function(S){d.push(S)};const y=new Ge,_=new Ge,x=new tee,O=new ji;this.onBeforeRender=function(S,w,C){S.getCurrentViewport(O);const M=S.getRenderTarget(),P=M!==null?M.texture.type:lc;o!==P&&(n.dispose(),s.dispose(),n.type=s.type=P,o=P);const R=O.w/O.z,k=O.z/2,I=O.w/2;let A=16/O.w;if(y.set(A*R,A),x.min.set(O.x,O.y),x.max.set(O.x+(O.z-16),O.y+(O.w-16)),i.setFromMatrixPosition(this.matrixWorld),i.applyMatrix4(C.matrixWorldInverse),!(i.z>0)&&(e.copy(i).applyMatrix4(C.projectionMatrix),_.x=O.x+e.x*k+k-8,_.y=O.y+e.y*I+I-8,x.containsPoint(_))){S.copyFramebufferToTexture(_,n);let D=l.uniforms;D.scale.value=y,D.screenPosition.value=e,S.renderBufferDirect(C,null,a,l,u,null),S.copyFramebufferToTexture(_,s),D=c.uniforms,D.scale.value=y,D.screenPosition.value=e,S.renderBufferDirect(C,null,a,c,u,null);const V=-e.x*2,B=-e.y*2;for(let L=0,F=d.length;L<F;L++){const $=d[L],z=m.uniforms;z.color.value.copy($.color),z.map.value=$.texture,z.screenPosition.value.x=e.x+V*$.distance,z.screenPosition.value.y=e.y+B*$.distance,A=$.size/O.w;const H=O.w/O.z;z.scale.value.set(A*H,A),m.uniformsNeedUpdate=!0,S.renderBufferDirect(C,null,a,m,g,null)}}},this.dispose=function(){l.dispose(),c.dispose(),m.dispose(),n.dispose(),s.dispose();for(let S=0,w=d.length;S<w;S++)d[S].texture.dispose()}}}class Ate{constructor(e,i=1,n=0,s=new ut(16777215)){this.texture=e,this.size=i,this.distance=n,this.color=s}}Ate.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};_E.Geometry=function(){const r=new Ai,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),i=new $O(e,5);return r.setIndex([0,1,2,0,2,3]),r.setAttribute("position",new Md(i,3,0,!1)),r.setAttribute("uv",new Md(i,2,3,!1)),r}();yo.clamp;yo.lerp;async function SDe(r){return await oIe(J5e,r)}const CDe=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","args"],IP=Td({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number.NEGATIVE_INFINITY},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number.POSITIVE_INFINITY},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{default:()=>({ONE:nd.ROTATE,TWO:nd.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start","end"],setup(r,{expose:e,emit:i}){const n=r,s=i,{makeDefault:o,autoRotate:a,autoRotateSpeed:l,enableDamping:c,dampingFactor:u,enablePan:d,keyPanSpeed:p,maxAzimuthAngle:m,minAzimuthAngle:g,maxPolarAngle:y,minPolarAngle:_,minDistance:x,maxDistance:O,minZoom:S,maxZoom:w,enableZoom:C,zoomSpeed:M,enableRotate:P,touches:R,rotateSpeed:k,target:I}=MO(n),{camera:A,renderer:D,extend:V,controls:B}=tV(),L=lt(null);V({OrbitControls:G5e}),tn(L,z=>{F(),z&&o.value?B.value=z:B.value=null});function F(){QI(L.value,"change",()=>s("change",L.value)),QI(L.value,"start",()=>s("start",L.value)),QI(L.value,"end",()=>s("end",L.value))}const{onLoop:$}=v0();return $(()=>{L.value&&(c.value||a.value)&&L.value.update()}),ta(()=>{L.value&&L.value.dispose()}),e({value:L}),(z,H)=>(z.camera||li(A))&&(z.domElement||li(D))?(ci(),pn("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:L,target:li(I),"auto-rotate":li(a),"auto-rotate-speed":li(l),"enable-damping":li(c),"damping-factor":li(u),"enable-pan":li(d),"key-pan-speed":li(p),keys:z.keys,"max-azimuth-angle":li(m),"min-azimuth-angle":li(g),"max-polar-angle":li(y),"min-polar-angle":li(_),"min-distance":li(x),"max-distance":li(O),"min-zoom":li(S),"max-zoom":li(w),touches:li(R),"enable-zoom":li(C),"zoom-speed":li(M),"enable-rotate":li(P),"rotate-speed":li(k),args:[z.camera||li(A),z.domElement||li(D).domElement]},null,8,CDe)):GM("",!0)}});var jI;/Mac/.test((jI=globalThis==null?void 0:globalThis.navigator)===null||jI===void 0?void 0:jI.platform);var TDe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E2(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ADe={exports:{}};(function(r,e){(function(i){r.exports=i()})(function(){return function i(n,s,o){function a(u,d){if(!s[u]){if(!n[u]){var p=typeof E2=="function"&&E2;if(!d&&p)return p(u,!0);if(l)return l(u,!0);throw new Error("Cannot find module '"+u+"'")}d=s[u]={exports:{}},n[u][0].call(d.exports,function(m){var g=n[u][1][m];return a(g||m)},d,d.exports,i,n,s,o)}return s[u].exports}for(var l=typeof E2=="function"&&E2,c=0;c<o.length;c++)a(o[c]);return a}({1:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){var y=i("crypto");function _(P,R){R=S(P,R);var k;return(k=R.algorithm!=="passthrough"?y.createHash(R.algorithm):new M).write===void 0&&(k.write=k.update,k.end=k.update),C(R,k).dispatch(P),k.update||k.end(""),k.digest?k.digest(R.encoding==="buffer"?void 0:R.encoding):(P=k.read(),R.encoding!=="buffer"?P.toString(R.encoding):P)}(s=n.exports=_).sha1=function(P){return _(P)},s.keys=function(P){return _(P,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(P){return _(P,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(P){return _(P,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=y.getHashes?y.getHashes().slice():["sha1","md5"],O=(x.push("passthrough"),["buffer","hex","binary","base64"]);function S(P,R){var k={};if(k.algorithm=(R=R||{}).algorithm||"sha1",k.encoding=R.encoding||"hex",k.excludeValues=!!R.excludeValues,k.algorithm=k.algorithm.toLowerCase(),k.encoding=k.encoding.toLowerCase(),k.ignoreUnknown=R.ignoreUnknown===!0,k.respectType=R.respectType!==!1,k.respectFunctionNames=R.respectFunctionNames!==!1,k.respectFunctionProperties=R.respectFunctionProperties!==!1,k.unorderedArrays=R.unorderedArrays===!0,k.unorderedSets=R.unorderedSets!==!1,k.unorderedObjects=R.unorderedObjects!==!1,k.replacer=R.replacer||void 0,k.excludeKeys=R.excludeKeys||void 0,P===void 0)throw new Error("Object argument required.");for(var I=0;I<x.length;++I)x[I].toLowerCase()===k.algorithm.toLowerCase()&&(k.algorithm=x[I]);if(x.indexOf(k.algorithm)===-1)throw new Error('Algorithm "'+k.algorithm+'"  not supported. supported values: '+x.join(", "));if(O.indexOf(k.encoding)===-1&&k.algorithm!=="passthrough")throw new Error('Encoding "'+k.encoding+'"  not supported. supported values: '+O.join(", "));return k}function w(P){if(typeof P=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(P))!=null}function C(P,R,k){k=k||[];function I(A){return R.update?R.update(A,"utf8"):R.write(A,"utf8")}return{dispatch:function(A){return this["_"+((A=P.replacer?P.replacer(A):A)===null?"null":typeof A)](A)},_object:function(A){var D,V=Object.prototype.toString.call(A),B=/\[object (.*)\]/i.exec(V);if(B=(B=B?B[1]:"unknown:["+V+"]").toLowerCase(),0<=(V=k.indexOf(A)))return this.dispatch("[CIRCULAR:"+V+"]");if(k.push(A),l!==void 0&&l.isBuffer&&l.isBuffer(A))return I("buffer:"),I(A);if(B==="object"||B==="function"||B==="asyncfunction")return V=Object.keys(A),P.unorderedObjects&&(V=V.sort()),P.respectType===!1||w(A)||V.splice(0,0,"prototype","__proto__","constructor"),P.excludeKeys&&(V=V.filter(function(L){return!P.excludeKeys(L)})),I("object:"+V.length+":"),D=this,V.forEach(function(L){D.dispatch(L),I(":"),P.excludeValues||D.dispatch(A[L]),I(",")});if(!this["_"+B]){if(P.ignoreUnknown)return I("["+B+"]");throw new Error('Unknown object type "'+B+'"')}this["_"+B](A)},_array:function(A,L){L=L!==void 0?L:P.unorderedArrays!==!1;var V=this;if(I("array:"+A.length+":"),!L||A.length<=1)return A.forEach(function(F){return V.dispatch(F)});var B=[],L=A.map(function(F){var $=new M,z=k.slice();return C(P,$,z).dispatch(F),B=B.concat(z.slice(k.length)),$.read().toString()});return k=k.concat(B),L.sort(),this._array(L,!1)},_date:function(A){return I("date:"+A.toJSON())},_symbol:function(A){return I("symbol:"+A.toString())},_error:function(A){return I("error:"+A.toString())},_boolean:function(A){return I("bool:"+A.toString())},_string:function(A){I("string:"+A.length+":"),I(A.toString())},_function:function(A){I("fn:"),w(A)?this.dispatch("[native]"):this.dispatch(A.toString()),P.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(A.name)),P.respectFunctionProperties&&this._object(A)},_number:function(A){return I("number:"+A.toString())},_xml:function(A){return I("xml:"+A.toString())},_null:function(){return I("Null")},_undefined:function(){return I("Undefined")},_regexp:function(A){return I("regex:"+A.toString())},_uint8array:function(A){return I("uint8array:"),this.dispatch(Array.prototype.slice.call(A))},_uint8clampedarray:function(A){return I("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(A))},_int8array:function(A){return I("int8array:"),this.dispatch(Array.prototype.slice.call(A))},_uint16array:function(A){return I("uint16array:"),this.dispatch(Array.prototype.slice.call(A))},_int16array:function(A){return I("int16array:"),this.dispatch(Array.prototype.slice.call(A))},_uint32array:function(A){return I("uint32array:"),this.dispatch(Array.prototype.slice.call(A))},_int32array:function(A){return I("int32array:"),this.dispatch(Array.prototype.slice.call(A))},_float32array:function(A){return I("float32array:"),this.dispatch(Array.prototype.slice.call(A))},_float64array:function(A){return I("float64array:"),this.dispatch(Array.prototype.slice.call(A))},_arraybuffer:function(A){return I("arraybuffer:"),this.dispatch(new Uint8Array(A))},_url:function(A){return I("url:"+A.toString())},_map:function(A){return I("map:"),A=Array.from(A),this._array(A,P.unorderedSets!==!1)},_set:function(A){return I("set:"),A=Array.from(A),this._array(A,P.unorderedSets!==!1)},_file:function(A){return I("file:"),this.dispatch([A.name,A.size,A.type,A.lastModfied])},_blob:function(){if(P.ignoreUnknown)return I("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return I("domwindow")},_bigint:function(A){return I("bigint:"+A.toString())},_process:function(){return I("process")},_timer:function(){return I("timer")},_pipe:function(){return I("pipe")},_tcp:function(){return I("tcp")},_udp:function(){return I("udp")},_tty:function(){return I("tty")},_statwatcher:function(){return I("statwatcher")},_securecontext:function(){return I("securecontext")},_connection:function(){return I("connection")},_zlib:function(){return I("zlib")},_context:function(){return I("context")},_nodescript:function(){return I("nodescript")},_httpparser:function(){return I("httpparser")},_dataview:function(){return I("dataview")},_signal:function(){return I("signal")},_fsevent:function(){return I("fsevent")},_tlswrap:function(){return I("tlswrap")}}}function M(){return{buf:"",write:function(P){this.buf+=P},end:function(P){this.buf+=P},read:function(){return this.buf}}}s.writeToStream=function(P,R,k){return k===void 0&&(k=R,R={}),C(R=S(P,R),k).dispatch(P)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){(function(y){var _=typeof Uint8Array<"u"?Uint8Array:Array,x=43,O=47,S=48,w=97,C=65,M=45,P=95;function R(k){return k=k.charCodeAt(0),k===x||k===M?62:k===O||k===P?63:k<S?-1:k<S+10?k-S+26+26:k<C+26?k-C:k<w+26?k-w+26:void 0}y.toByteArray=function(k){var I,A;if(0<k.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var D=k.length,D=k.charAt(D-2)==="="?2:k.charAt(D-1)==="="?1:0,V=new _(3*k.length/4-D),B=0<D?k.length-4:k.length,L=0;function F($){V[L++]=$}for(I=0;I<B;I+=4,0)F((16711680&(A=R(k.charAt(I))<<18|R(k.charAt(I+1))<<12|R(k.charAt(I+2))<<6|R(k.charAt(I+3))))>>16),F((65280&A)>>8),F(255&A);return D==2?F(255&(A=R(k.charAt(I))<<2|R(k.charAt(I+1))>>4)):D==1&&(F((A=R(k.charAt(I))<<10|R(k.charAt(I+1))<<4|R(k.charAt(I+2))>>2)>>8&255),F(255&A)),V},y.fromByteArray=function(k){var I,A,D,V,B=k.length%3,L="";function F($){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt($)}for(I=0,D=k.length-B;I<D;I+=3)A=(k[I]<<16)+(k[I+1]<<8)+k[I+2],L+=F((V=A)>>18&63)+F(V>>12&63)+F(V>>6&63)+F(63&V);switch(B){case 1:L=(L+=F((A=k[k.length-1])>>2))+F(A<<4&63)+"==";break;case 2:L=(L=(L+=F((A=(k[k.length-2]<<8)+k[k.length-1])>>10))+F(A>>4&63))+F(A<<2&63)+"="}return L}})(s===void 0?this.base64js={}:s)}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(i,n,s){(function(o,a,x,c,u,d,p,m,g){var y=i("base64-js"),_=i("ieee754");function x(Q,G,ie){if(!(this instanceof x))return new x(Q,G,ie);var he,j,ee,de,ve=typeof Q;if(G==="base64"&&ve=="string")for(Q=(de=Q).trim?de.trim():de.replace(/^\s+|\s+$/g,"");Q.length%4!=0;)Q+="=";if(ve=="number")he=H(Q);else if(ve=="string")he=x.byteLength(Q,G);else{if(ve!="object")throw new Error("First argument needs to be a number, array or string.");he=H(Q.length)}if(x._useTypedArrays?j=x._augment(new Uint8Array(he)):((j=this).length=he,j._isBuffer=!0),x._useTypedArrays&&typeof Q.byteLength=="number")j._set(Q);else if(K(de=Q)||x.isBuffer(de)||de&&typeof de=="object"&&typeof de.length=="number")for(ee=0;ee<he;ee++)x.isBuffer(Q)?j[ee]=Q.readUInt8(ee):j[ee]=Q[ee];else if(ve=="string")j.write(Q,0,G);else if(ve=="number"&&!x._useTypedArrays&&!ie)for(ee=0;ee<he;ee++)j[ee]=0;return j}function O(Q,G,ie,he){return x._charsWritten=pe(function(j){for(var ee=[],de=0;de<j.length;de++)ee.push(255&j.charCodeAt(de));return ee}(G),Q,ie,he)}function S(Q,G,ie,he){return x._charsWritten=pe(function(j){for(var ee,de,ve=[],Ce=0;Ce<j.length;Ce++)de=j.charCodeAt(Ce),ee=de>>8,de=de%256,ve.push(de),ve.push(ee);return ve}(G),Q,ie,he)}function w(Q,G,ie){var he="";ie=Math.min(Q.length,ie);for(var j=G;j<ie;j++)he+=String.fromCharCode(Q[j]);return he}function C(Q,G,ie,ee){ee||(se(typeof ie=="boolean","missing or invalid endian"),se(G!=null,"missing offset"),se(G+1<Q.length,"Trying to read beyond buffer length"));var j,ee=Q.length;if(!(ee<=G))return ie?(j=Q[G],G+1<ee&&(j|=Q[G+1]<<8)):(j=Q[G]<<8,G+1<ee&&(j|=Q[G+1])),j}function M(Q,G,ie,ee){ee||(se(typeof ie=="boolean","missing or invalid endian"),se(G!=null,"missing offset"),se(G+3<Q.length,"Trying to read beyond buffer length"));var j,ee=Q.length;if(!(ee<=G))return ie?(G+2<ee&&(j=Q[G+2]<<16),G+1<ee&&(j|=Q[G+1]<<8),j|=Q[G],G+3<ee&&(j+=Q[G+3]<<24>>>0)):(G+1<ee&&(j=Q[G+1]<<16),G+2<ee&&(j|=Q[G+2]<<8),G+3<ee&&(j|=Q[G+3]),j+=Q[G]<<24>>>0),j}function P(Q,G,ie,he){if(he||(se(typeof ie=="boolean","missing or invalid endian"),se(G!=null,"missing offset"),se(G+1<Q.length,"Trying to read beyond buffer length")),!(Q.length<=G))return he=C(Q,G,ie,!0),32768&he?-1*(65535-he+1):he}function R(Q,G,ie,he){if(he||(se(typeof ie=="boolean","missing or invalid endian"),se(G!=null,"missing offset"),se(G+3<Q.length,"Trying to read beyond buffer length")),!(Q.length<=G))return he=M(Q,G,ie,!0),2147483648&he?-1*(4294967295-he+1):he}function k(Q,G,ie,he){return he||(se(typeof ie=="boolean","missing or invalid endian"),se(G+3<Q.length,"Trying to read beyond buffer length")),_.read(Q,G,ie,23,4)}function I(Q,G,ie,he){return he||(se(typeof ie=="boolean","missing or invalid endian"),se(G+7<Q.length,"Trying to read beyond buffer length")),_.read(Q,G,ie,52,8)}function A(Q,G,ie,he,j){if(j||(se(G!=null,"missing value"),se(typeof he=="boolean","missing or invalid endian"),se(ie!=null,"missing offset"),se(ie+1<Q.length,"trying to write beyond buffer length"),ye(G,65535)),j=Q.length,!(j<=ie))for(var ee=0,de=Math.min(j-ie,2);ee<de;ee++)Q[ie+ee]=(G&255<<8*(he?ee:1-ee))>>>8*(he?ee:1-ee)}function D(Q,G,ie,he,j){if(j||(se(G!=null,"missing value"),se(typeof he=="boolean","missing or invalid endian"),se(ie!=null,"missing offset"),se(ie+3<Q.length,"trying to write beyond buffer length"),ye(G,4294967295)),j=Q.length,!(j<=ie))for(var ee=0,de=Math.min(j-ie,4);ee<de;ee++)Q[ie+ee]=G>>>8*(he?ee:3-ee)&255}function V(Q,G,ie,he,j){j||(se(G!=null,"missing value"),se(typeof he=="boolean","missing or invalid endian"),se(ie!=null,"missing offset"),se(ie+1<Q.length,"Trying to write beyond buffer length"),_e(G,32767,-32768)),Q.length<=ie||A(Q,0<=G?G:65535+G+1,ie,he,j)}function B(Q,G,ie,he,j){j||(se(G!=null,"missing value"),se(typeof he=="boolean","missing or invalid endian"),se(ie!=null,"missing offset"),se(ie+3<Q.length,"Trying to write beyond buffer length"),_e(G,2147483647,-2147483648)),Q.length<=ie||D(Q,0<=G?G:4294967295+G+1,ie,he,j)}function L(Q,G,ie,he,j){j||(se(G!=null,"missing value"),se(typeof he=="boolean","missing or invalid endian"),se(ie!=null,"missing offset"),se(ie+3<Q.length,"Trying to write beyond buffer length"),re(G,34028234663852886e22,-34028234663852886e22)),Q.length<=ie||_.write(Q,G,ie,he,23,4)}function F(Q,G,ie,he,j){j||(se(G!=null,"missing value"),se(typeof he=="boolean","missing or invalid endian"),se(ie!=null,"missing offset"),se(ie+7<Q.length,"Trying to write beyond buffer length"),re(G,17976931348623157e292,-17976931348623157e292)),Q.length<=ie||_.write(Q,G,ie,he,52,8)}s.Buffer=x,s.SlowBuffer=x,s.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var Q=new ArrayBuffer(0),G=new Uint8Array(Q);return G.foo=function(){return 42},G.foo()===42&&typeof G.subarray=="function"}catch{return!1}}(),x.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(Q){return!(Q==null||!Q._isBuffer)},x.byteLength=function(Q,G){var ie;switch(Q+="",G||"utf8"){case"hex":ie=Q.length/2;break;case"utf8":case"utf-8":ie=ne(Q).length;break;case"ascii":case"binary":case"raw":ie=Q.length;break;case"base64":ie=be(Q).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ie=2*Q.length;break;default:throw new Error("Unknown encoding")}return ie},x.concat=function(Q,G){if(se(K(Q),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),Q.length===0)return new x(0);if(Q.length===1)return Q[0];if(typeof G!="number")for(j=G=0;j<Q.length;j++)G+=Q[j].length;for(var ie=new x(G),he=0,j=0;j<Q.length;j++){var ee=Q[j];ee.copy(ie,he),he+=ee.length}return ie},x.prototype.write=function(Q,G,ie,he){isFinite(G)?isFinite(ie)||(he=ie,ie=void 0):(Ce=he,he=G,G=ie,ie=Ce),G=Number(G)||0;var j,ee,de,ve,Ce=this.length-G;switch((!ie||Ce<(ie=Number(ie)))&&(ie=Ce),he=String(he||"utf8").toLowerCase()){case"hex":j=function(Ie,te,q,me){q=Number(q)||0;var ge=Ie.length-q;(!me||ge<(me=Number(me)))&&(me=ge),se((ge=te.length)%2==0,"Invalid hex string"),ge/2<me&&(me=ge/2);for(var Ae=0;Ae<me;Ae++){var Pe=parseInt(te.substr(2*Ae,2),16);se(!isNaN(Pe),"Invalid hex string"),Ie[q+Ae]=Pe}return x._charsWritten=2*Ae,Ae}(this,Q,G,ie);break;case"utf8":case"utf-8":ee=this,de=G,ve=ie,j=x._charsWritten=pe(ne(Q),ee,de,ve);break;case"ascii":case"binary":j=O(this,Q,G,ie);break;case"base64":ee=this,de=G,ve=ie,j=x._charsWritten=pe(be(Q),ee,de,ve);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":j=S(this,Q,G,ie);break;default:throw new Error("Unknown encoding")}return j},x.prototype.toString=function(Q,G,ie){var he,j,ee,de,ve=this;if(Q=String(Q||"utf8").toLowerCase(),G=Number(G)||0,(ie=ie!==void 0?Number(ie):ve.length)===G)return"";switch(Q){case"hex":he=function(Ce,Ie,te){var q=Ce.length;(!Ie||Ie<0)&&(Ie=0),(!te||te<0||q<te)&&(te=q);for(var me="",ge=Ie;ge<te;ge++)me+=J(Ce[ge]);return me}(ve,G,ie);break;case"utf8":case"utf-8":he=function(Ce,Ie,te){var q="",me="";te=Math.min(Ce.length,te);for(var ge=Ie;ge<te;ge++)Ce[ge]<=127?(q+=ae(me)+String.fromCharCode(Ce[ge]),me=""):me+="%"+Ce[ge].toString(16);return q+ae(me)}(ve,G,ie);break;case"ascii":case"binary":he=w(ve,G,ie);break;case"base64":j=ve,de=ie,he=(ee=G)===0&&de===j.length?y.fromByteArray(j):y.fromByteArray(j.slice(ee,de));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":he=function(Ce,Ie,te){for(var q=Ce.slice(Ie,te),me="",ge=0;ge<q.length;ge+=2)me+=String.fromCharCode(q[ge]+256*q[ge+1]);return me}(ve,G,ie);break;default:throw new Error("Unknown encoding")}return he},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(Q,G,ie,he){if(G=G||0,(he=he||he===0?he:this.length)!==(ie=ie||0)&&Q.length!==0&&this.length!==0){se(ie<=he,"sourceEnd < sourceStart"),se(0<=G&&G<Q.length,"targetStart out of bounds"),se(0<=ie&&ie<this.length,"sourceStart out of bounds"),se(0<=he&&he<=this.length,"sourceEnd out of bounds"),he>this.length&&(he=this.length);var j=(he=Q.length-G<he-ie?Q.length-G+ie:he)-ie;if(j<100||!x._useTypedArrays)for(var ee=0;ee<j;ee++)Q[ee+G]=this[ee+ie];else Q._set(this.subarray(ie,ie+j),G)}},x.prototype.slice=function(Q,G){var ie=this.length;if(Q=z(Q,ie,0),G=z(G,ie,ie),x._useTypedArrays)return x._augment(this.subarray(Q,G));for(var he=G-Q,j=new x(he,void 0,!0),ee=0;ee<he;ee++)j[ee]=this[ee+Q];return j},x.prototype.get=function(Q){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(Q)},x.prototype.set=function(Q,G){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(Q,G)},x.prototype.readUInt8=function(Q,G){if(G||(se(Q!=null,"missing offset"),se(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return this[Q]},x.prototype.readUInt16LE=function(Q,G){return C(this,Q,!0,G)},x.prototype.readUInt16BE=function(Q,G){return C(this,Q,!1,G)},x.prototype.readUInt32LE=function(Q,G){return M(this,Q,!0,G)},x.prototype.readUInt32BE=function(Q,G){return M(this,Q,!1,G)},x.prototype.readInt8=function(Q,G){if(G||(se(Q!=null,"missing offset"),se(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return 128&this[Q]?-1*(255-this[Q]+1):this[Q]},x.prototype.readInt16LE=function(Q,G){return P(this,Q,!0,G)},x.prototype.readInt16BE=function(Q,G){return P(this,Q,!1,G)},x.prototype.readInt32LE=function(Q,G){return R(this,Q,!0,G)},x.prototype.readInt32BE=function(Q,G){return R(this,Q,!1,G)},x.prototype.readFloatLE=function(Q,G){return k(this,Q,!0,G)},x.prototype.readFloatBE=function(Q,G){return k(this,Q,!1,G)},x.prototype.readDoubleLE=function(Q,G){return I(this,Q,!0,G)},x.prototype.readDoubleBE=function(Q,G){return I(this,Q,!1,G)},x.prototype.writeUInt8=function(Q,G,ie){ie||(se(Q!=null,"missing value"),se(G!=null,"missing offset"),se(G<this.length,"trying to write beyond buffer length"),ye(Q,255)),G>=this.length||(this[G]=Q)},x.prototype.writeUInt16LE=function(Q,G,ie){A(this,Q,G,!0,ie)},x.prototype.writeUInt16BE=function(Q,G,ie){A(this,Q,G,!1,ie)},x.prototype.writeUInt32LE=function(Q,G,ie){D(this,Q,G,!0,ie)},x.prototype.writeUInt32BE=function(Q,G,ie){D(this,Q,G,!1,ie)},x.prototype.writeInt8=function(Q,G,ie){ie||(se(Q!=null,"missing value"),se(G!=null,"missing offset"),se(G<this.length,"Trying to write beyond buffer length"),_e(Q,127,-128)),G>=this.length||(0<=Q?this.writeUInt8(Q,G,ie):this.writeUInt8(255+Q+1,G,ie))},x.prototype.writeInt16LE=function(Q,G,ie){V(this,Q,G,!0,ie)},x.prototype.writeInt16BE=function(Q,G,ie){V(this,Q,G,!1,ie)},x.prototype.writeInt32LE=function(Q,G,ie){B(this,Q,G,!0,ie)},x.prototype.writeInt32BE=function(Q,G,ie){B(this,Q,G,!1,ie)},x.prototype.writeFloatLE=function(Q,G,ie){L(this,Q,G,!0,ie)},x.prototype.writeFloatBE=function(Q,G,ie){L(this,Q,G,!1,ie)},x.prototype.writeDoubleLE=function(Q,G,ie){F(this,Q,G,!0,ie)},x.prototype.writeDoubleBE=function(Q,G,ie){F(this,Q,G,!1,ie)},x.prototype.fill=function(Q,G,ie){if(G=G||0,ie=ie||this.length,se(typeof(Q=typeof(Q=Q||0)=="string"?Q.charCodeAt(0):Q)=="number"&&!isNaN(Q),"value is not a number"),se(G<=ie,"end < start"),ie!==G&&this.length!==0){se(0<=G&&G<this.length,"start out of bounds"),se(0<=ie&&ie<=this.length,"end out of bounds");for(var he=G;he<ie;he++)this[he]=Q}},x.prototype.inspect=function(){for(var Q=[],G=this.length,ie=0;ie<G;ie++)if(Q[ie]=J(this[ie]),ie===s.INSPECT_MAX_BYTES){Q[ie+1]="...";break}return"<Buffer "+Q.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var Q=new Uint8Array(this.length),G=0,ie=Q.length;G<ie;G+=1)Q[G]=this[G];return Q.buffer};var $=x.prototype;function z(Q,G,ie){return typeof Q!="number"?ie:G<=(Q=~~Q)?G:0<=Q||0<=(Q+=G)?Q:0}function H(Q){return(Q=~~Math.ceil(+Q))<0?0:Q}function K(Q){return(Array.isArray||function(G){return Object.prototype.toString.call(G)==="[object Array]"})(Q)}function J(Q){return Q<16?"0"+Q.toString(16):Q.toString(16)}function ne(Q){for(var G=[],ie=0;ie<Q.length;ie++){var he=Q.charCodeAt(ie);if(he<=127)G.push(Q.charCodeAt(ie));else for(var j=ie,ee=(55296<=he&&he<=57343&&ie++,encodeURIComponent(Q.slice(j,ie+1)).substr(1).split("%")),de=0;de<ee.length;de++)G.push(parseInt(ee[de],16))}return G}function be(Q){return y.toByteArray(Q)}function pe(Q,G,ie,he){for(var j=0;j<he&&!(j+ie>=G.length||j>=Q.length);j++)G[j+ie]=Q[j];return j}function ae(Q){try{return decodeURIComponent(Q)}catch{return"�"}}function ye(Q,G){se(typeof Q=="number","cannot write a non-number as a number"),se(0<=Q,"specified a negative value for writing an unsigned value"),se(Q<=G,"value is larger than maximum value for type"),se(Math.floor(Q)===Q,"value has a fractional component")}function _e(Q,G,ie){se(typeof Q=="number","cannot write a non-number as a number"),se(Q<=G,"value larger than maximum allowed value"),se(ie<=Q,"value smaller than minimum allowed value"),se(Math.floor(Q)===Q,"value has a fractional component")}function re(Q,G,ie){se(typeof Q=="number","cannot write a non-number as a number"),se(Q<=G,"value larger than maximum allowed value"),se(ie<=Q,"value smaller than minimum allowed value")}function se(Q,G){if(!Q)throw new Error(G||"Failed assertion")}x._augment=function(Q){return Q._isBuffer=!0,Q._get=Q.get,Q._set=Q.set,Q.get=$.get,Q.set=$.set,Q.write=$.write,Q.toString=$.toString,Q.toLocaleString=$.toString,Q.toJSON=$.toJSON,Q.copy=$.copy,Q.slice=$.slice,Q.readUInt8=$.readUInt8,Q.readUInt16LE=$.readUInt16LE,Q.readUInt16BE=$.readUInt16BE,Q.readUInt32LE=$.readUInt32LE,Q.readUInt32BE=$.readUInt32BE,Q.readInt8=$.readInt8,Q.readInt16LE=$.readInt16LE,Q.readInt16BE=$.readInt16BE,Q.readInt32LE=$.readInt32LE,Q.readInt32BE=$.readInt32BE,Q.readFloatLE=$.readFloatLE,Q.readFloatBE=$.readFloatBE,Q.readDoubleLE=$.readDoubleLE,Q.readDoubleBE=$.readDoubleBE,Q.writeUInt8=$.writeUInt8,Q.writeUInt16LE=$.writeUInt16LE,Q.writeUInt16BE=$.writeUInt16BE,Q.writeUInt32LE=$.writeUInt32LE,Q.writeUInt32BE=$.writeUInt32BE,Q.writeInt8=$.writeInt8,Q.writeInt16LE=$.writeInt16LE,Q.writeInt16BE=$.writeInt16BE,Q.writeInt32LE=$.writeInt32LE,Q.writeInt32BE=$.writeInt32BE,Q.writeFloatLE=$.writeFloatLE,Q.writeFloatBE=$.writeFloatBE,Q.writeDoubleLE=$.writeDoubleLE,Q.writeDoubleBE=$.writeDoubleBE,Q.fill=$.fill,Q.inspect=$.inspect,Q.toArrayBuffer=$.toArrayBuffer,Q}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(i,n,s){(function(o,a,y,c,u,d,p,m,g){var y=i("buffer").Buffer,_=4,x=new y(_);x.fill(0),n.exports={hash:function(O,S,w,C){for(var M=S(function(A,D){A.length%_!=0&&(V=A.length+(_-A.length%_),A=y.concat([A,x],V));for(var V,B=[],L=D?A.readInt32BE:A.readInt32LE,F=0;F<A.length;F+=_)B.push(L.call(A,F));return B}(O=y.isBuffer(O)?O:new y(O),C),8*O.length),S=C,P=new y(w),R=S?P.writeInt32BE:P.writeInt32LE,k=0;k<M.length;k++)R.call(P,M[k],4*k,!0);return P}}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(i,n,s){(function(o,a,y,c,u,d,p,m,g){var y=i("buffer").Buffer,_=i("./sha"),x=i("./sha256"),O=i("./rng"),S={sha1:_,sha256:x,md5:i("./md5")},w=64,C=new y(w);function M(A,D){var V=S[A=A||"sha1"],B=[];return V||P("algorithm:",A,"is not yet supported"),{update:function(L){return y.isBuffer(L)||(L=new y(L)),B.push(L),L.length,this},digest:function(L){var F=y.concat(B),F=D?function($,z,H){y.isBuffer(z)||(z=new y(z)),y.isBuffer(H)||(H=new y(H)),z.length>w?z=$(z):z.length<w&&(z=y.concat([z,C],w));for(var K=new y(w),J=new y(w),ne=0;ne<w;ne++)K[ne]=54^z[ne],J[ne]=92^z[ne];return H=$(y.concat([K,H])),$(y.concat([J,H]))}(V,D,F):V(F);return B=null,L?F.toString(L):F}}}function P(){var A=[].slice.call(arguments).join(" ");throw new Error([A,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}C.fill(0),s.createHash=function(A){return M(A)},s.createHmac=M,s.randomBytes=function(A,D){if(!D||!D.call)return new y(O(A));try{D.call(this,void 0,new y(O(A)))}catch(V){D(V)}};var R,k=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],I=function(A){s[A]=function(){P("sorry,",A,"is not implemented yet")}};for(R in k)I(k[R])}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){var y=i("./helpers");function _(P,R){P[R>>5]|=128<<R%32,P[14+(R+64>>>9<<4)]=R;for(var k=1732584193,I=-271733879,A=-1732584194,D=271733878,V=0;V<P.length;V+=16){var B=k,L=I,F=A,$=D,k=O(k,I,A,D,P[V+0],7,-680876936),D=O(D,k,I,A,P[V+1],12,-389564586),A=O(A,D,k,I,P[V+2],17,606105819),I=O(I,A,D,k,P[V+3],22,-1044525330);k=O(k,I,A,D,P[V+4],7,-176418897),D=O(D,k,I,A,P[V+5],12,1200080426),A=O(A,D,k,I,P[V+6],17,-1473231341),I=O(I,A,D,k,P[V+7],22,-45705983),k=O(k,I,A,D,P[V+8],7,1770035416),D=O(D,k,I,A,P[V+9],12,-1958414417),A=O(A,D,k,I,P[V+10],17,-42063),I=O(I,A,D,k,P[V+11],22,-1990404162),k=O(k,I,A,D,P[V+12],7,1804603682),D=O(D,k,I,A,P[V+13],12,-40341101),A=O(A,D,k,I,P[V+14],17,-1502002290),k=S(k,I=O(I,A,D,k,P[V+15],22,1236535329),A,D,P[V+1],5,-165796510),D=S(D,k,I,A,P[V+6],9,-1069501632),A=S(A,D,k,I,P[V+11],14,643717713),I=S(I,A,D,k,P[V+0],20,-373897302),k=S(k,I,A,D,P[V+5],5,-701558691),D=S(D,k,I,A,P[V+10],9,38016083),A=S(A,D,k,I,P[V+15],14,-660478335),I=S(I,A,D,k,P[V+4],20,-405537848),k=S(k,I,A,D,P[V+9],5,568446438),D=S(D,k,I,A,P[V+14],9,-1019803690),A=S(A,D,k,I,P[V+3],14,-187363961),I=S(I,A,D,k,P[V+8],20,1163531501),k=S(k,I,A,D,P[V+13],5,-1444681467),D=S(D,k,I,A,P[V+2],9,-51403784),A=S(A,D,k,I,P[V+7],14,1735328473),k=w(k,I=S(I,A,D,k,P[V+12],20,-1926607734),A,D,P[V+5],4,-378558),D=w(D,k,I,A,P[V+8],11,-2022574463),A=w(A,D,k,I,P[V+11],16,1839030562),I=w(I,A,D,k,P[V+14],23,-35309556),k=w(k,I,A,D,P[V+1],4,-1530992060),D=w(D,k,I,A,P[V+4],11,1272893353),A=w(A,D,k,I,P[V+7],16,-155497632),I=w(I,A,D,k,P[V+10],23,-1094730640),k=w(k,I,A,D,P[V+13],4,681279174),D=w(D,k,I,A,P[V+0],11,-358537222),A=w(A,D,k,I,P[V+3],16,-722521979),I=w(I,A,D,k,P[V+6],23,76029189),k=w(k,I,A,D,P[V+9],4,-640364487),D=w(D,k,I,A,P[V+12],11,-421815835),A=w(A,D,k,I,P[V+15],16,530742520),k=C(k,I=w(I,A,D,k,P[V+2],23,-995338651),A,D,P[V+0],6,-198630844),D=C(D,k,I,A,P[V+7],10,1126891415),A=C(A,D,k,I,P[V+14],15,-1416354905),I=C(I,A,D,k,P[V+5],21,-57434055),k=C(k,I,A,D,P[V+12],6,1700485571),D=C(D,k,I,A,P[V+3],10,-1894986606),A=C(A,D,k,I,P[V+10],15,-1051523),I=C(I,A,D,k,P[V+1],21,-2054922799),k=C(k,I,A,D,P[V+8],6,1873313359),D=C(D,k,I,A,P[V+15],10,-30611744),A=C(A,D,k,I,P[V+6],15,-1560198380),I=C(I,A,D,k,P[V+13],21,1309151649),k=C(k,I,A,D,P[V+4],6,-145523070),D=C(D,k,I,A,P[V+11],10,-1120210379),A=C(A,D,k,I,P[V+2],15,718787259),I=C(I,A,D,k,P[V+9],21,-343485551),k=M(k,B),I=M(I,L),A=M(A,F),D=M(D,$)}return Array(k,I,A,D)}function x(P,R,k,I,A,D){return M((R=M(M(R,P),M(I,D)))<<A|R>>>32-A,k)}function O(P,R,k,I,A,D,V){return x(R&k|~R&I,P,R,A,D,V)}function S(P,R,k,I,A,D,V){return x(R&I|k&~I,P,R,A,D,V)}function w(P,R,k,I,A,D,V){return x(R^k^I,P,R,A,D,V)}function C(P,R,k,I,A,D,V){return x(k^(R|~I),P,R,A,D,V)}function M(P,R){var k=(65535&P)+(65535&R);return(P>>16)+(R>>16)+(k>>16)<<16|65535&k}n.exports=function(P){return y.hash(P,_,16)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){n.exports=function(y){for(var _,x=new Array(y),O=0;O<y;O++)!(3&O)&&(_=4294967296*Math.random()),x[O]=_>>>((3&O)<<3)&255;return x}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){var y=i("./helpers");function _(S,w){S[w>>5]|=128<<24-w%32,S[15+(w+64>>9<<4)]=w;for(var C,M,P,R=Array(80),k=1732584193,I=-271733879,A=-1732584194,D=271733878,V=-1009589776,B=0;B<S.length;B+=16){for(var L=k,F=I,$=A,z=D,H=V,K=0;K<80;K++){R[K]=K<16?S[B+K]:O(R[K-3]^R[K-8]^R[K-14]^R[K-16],1);var J=x(x(O(k,5),(J=I,M=A,P=D,(C=K)<20?J&M|~J&P:!(C<40)&&C<60?J&M|J&P|M&P:J^M^P)),x(x(V,R[K]),(C=K)<20?1518500249:C<40?1859775393:C<60?-1894007588:-899497514)),V=D,D=A,A=O(I,30),I=k,k=J}k=x(k,L),I=x(I,F),A=x(A,$),D=x(D,z),V=x(V,H)}return Array(k,I,A,D,V)}function x(S,w){var C=(65535&S)+(65535&w);return(S>>16)+(w>>16)+(C>>16)<<16|65535&C}function O(S,w){return S<<w|S>>>32-w}n.exports=function(S){return y.hash(S,_,20,!0)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){function y(w,C){var M=(65535&w)+(65535&C);return(w>>16)+(C>>16)+(M>>16)<<16|65535&M}function _(w,C){var M,P=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),R=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),k=new Array(64);w[C>>5]|=128<<24-C%32,w[15+(C+64>>9<<4)]=C;for(var I,A,D=0;D<w.length;D+=16){for(var V=R[0],B=R[1],L=R[2],F=R[3],$=R[4],z=R[5],H=R[6],K=R[7],J=0;J<64;J++)k[J]=J<16?w[J+D]:y(y(y((A=k[J-2],O(A,17)^O(A,19)^S(A,10)),k[J-7]),(A=k[J-15],O(A,7)^O(A,18)^S(A,3))),k[J-16]),M=y(y(y(y(K,O(A=$,6)^O(A,11)^O(A,25)),$&z^~$&H),P[J]),k[J]),I=y(O(I=V,2)^O(I,13)^O(I,22),V&B^V&L^B&L),K=H,H=z,z=$,$=y(F,M),F=L,L=B,B=V,V=y(M,I);R[0]=y(V,R[0]),R[1]=y(B,R[1]),R[2]=y(L,R[2]),R[3]=y(F,R[3]),R[4]=y($,R[4]),R[5]=y(z,R[5]),R[6]=y(H,R[6]),R[7]=y(K,R[7])}return R}var x=i("./helpers"),O=function(w,C){return w>>>C|w<<32-C},S=function(w,C){return w>>>C};n.exports=function(w){return x.hash(w,_,32,!0)}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){s.read=function(y,_,x,O,D){var w,C,M=8*D-O-1,P=(1<<M)-1,R=P>>1,k=-7,I=x?D-1:0,A=x?-1:1,D=y[_+I];for(I+=A,w=D&(1<<-k)-1,D>>=-k,k+=M;0<k;w=256*w+y[_+I],I+=A,k-=8);for(C=w&(1<<-k)-1,w>>=-k,k+=O;0<k;C=256*C+y[_+I],I+=A,k-=8);if(w===0)w=1-R;else{if(w===P)return C?NaN:1/0*(D?-1:1);C+=Math.pow(2,O),w-=R}return(D?-1:1)*C*Math.pow(2,w-O)},s.write=function(y,_,x,O,S,V){var C,M,P=8*V-S-1,R=(1<<P)-1,k=R>>1,I=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=O?0:V-1,D=O?1:-1,V=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(M=isNaN(_)?1:0,C=R):(C=Math.floor(Math.log(_)/Math.LN2),_*(O=Math.pow(2,-C))<1&&(C--,O*=2),2<=(_+=1<=C+k?I/O:I*Math.pow(2,1-k))*O&&(C++,O/=2),R<=C+k?(M=0,C=R):1<=C+k?(M=(_*O-1)*Math.pow(2,S),C+=k):(M=_*Math.pow(2,k-1)*Math.pow(2,S),C=0));8<=S;y[x+A]=255&M,A+=D,M/=256,S-=8);for(C=C<<S|M,P+=S;0<P;y[x+A]=255&C,A+=D,C/=256,P-=8);y[x+A-D]|=128*V}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(i,n,s){(function(o,a,l,c,u,d,p,m,g){var y,_,x;function O(){}(o=n.exports={}).nextTick=(_=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,_?function(S){return window.setImmediate(S)}:x?(y=[],window.addEventListener("message",function(S){var w=S.source;w!==window&&w!==null||S.data!=="process-tick"||(S.stopPropagation(),0<y.length&&y.shift()())},!0),function(S){y.push(S),window.postMessage("process-tick","*")}):function(S){setTimeout(S,0)}),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=O,o.addListener=O,o.once=O,o.off=O,o.removeListener=O,o.removeAllListeners=O,o.emit=O,o.binding=function(S){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(S){throw new Error("process.chdir is not supported")}}).call(this,i("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},i("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(ADe);var EDe=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],x5=EDe;x5=x5.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)});x5.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function MDe(r,e){if(typeof r!="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var n=i.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function PDe(r){var e=MDe(r,"string");return typeof e=="symbol"?e:String(e)}function Xn(r,e,i){return e=PDe(e),e in r?Object.defineProperty(r,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[e]=i,r}var Ti={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},la,yv;la={},Xn(la,"".concat(Ti.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(Ti.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),Xn(la,"".concat(Ti.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(Ti.position,`;
  `)}),Xn(la,"".concat(Ti.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(Ti.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),Xn(la,"".concat(Ti.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(Ti.pointSize,`;
    `)}),Xn(la,"".concat(Ti.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(Ti.diffuseColor,`;
  `)}),Xn(la,"".concat(Ti.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(Ti.fragColor,`;
  `)}),Xn(la,"".concat(Ti.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(Ti.emissive,`;
    `)}),Xn(la,"".concat(Ti.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(Ti.roughness,`;
    `)}),Xn(la,"".concat(Ti.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(Ti.metalness,`;
    `)}),Xn(la,"".concat(Ti.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(Ti.ao,`;
    `)}),Xn(la,"".concat(Ti.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(Ti.bump," - (dot(").concat(Ti.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),Xn(la,"".concat(Ti.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(Ti.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(Ti.depthAlpha,`;
    `)});yv={},Xn(yv,"".concat(Ti.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(Ti.position,`, 1.0 );
  `)}),Xn(yv,"".concat(Ti.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(Ti.position,`;
  `)}),Xn(yv,"".concat(Ti.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(Ti.diffuseColor,`;
  `)}),Xn(yv,"".concat(Ti.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(Ti.fragColor,`;
  `)});var ha;ha={},Xn(ha,"".concat(Ti.position),"*"),Xn(ha,"".concat(Ti.positionRaw),"*"),Xn(ha,"".concat(Ti.normal),"*"),Xn(ha,"".concat(Ti.pointSize),["PointsMaterial"]),Xn(ha,"".concat(Ti.diffuseColor),"*"),Xn(ha,"".concat(Ti.fragColor),"*"),Xn(ha,"".concat(Ti.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),Xn(ha,"".concat(Ti.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Xn(ha,"".concat(Ti.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Xn(ha,"".concat(Ti.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),Xn(ha,"".concat(Ti.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),Xn(ha,"".concat(Ti.depthAlpha),"*");new so;new le;mt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ge(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Zl.line={uniforms:LO.merge([mt.common,mt.fog,mt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new le;new le;new ji;new ji;new ji;new le;new wt;new iee;new le;new so;new oo;new ji;const kDe={key:0,args:[0,1,64]},IDe={key:1,args:[.5,1,64]},RDe={key:2},BDe=["tone-mapped","map","side","color"];new ut(16777215);class kV extends Un{constructor(){const e=kV.SkyShader,i=new ea({name:e.name,uniforms:LO.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:wo,depthWrite:!1});super(new Gp(1,1,1),i),this.isSky=!0}}kV.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new le},up:{value:new le(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var DDe={exports:{}};(function(r,e){(function(i,n){r.exports=n()})(TDe,function(){var i=function(){function n(g){return a.appendChild(g.dom),g}function s(g){for(var y=0;y<a.children.length;y++)a.children[y].style.display=y===g?"block":"none";o=g}var o=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(g){g.preventDefault(),s(++o%a.children.length)},!1);var l=(performance||Date).now(),c=l,u=0,d=n(new i.Panel("FPS","#0ff","#002")),p=n(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var m=n(new i.Panel("MB","#f08","#201"));return s(0),{REVISION:16,dom:a,addPanel:n,showPanel:s,begin:function(){l=(performance||Date).now()},end:function(){u++;var g=(performance||Date).now();if(p.update(g-l,200),g>c+1e3&&(d.update(1e3*u/(g-c),100),c=g,u=0,m)){var y=performance.memory;m.update(y.usedJSHeapSize/1048576,y.jsHeapSizeLimit/1048576)}return g},update:function(){l=this.end()},domElement:a,setMode:s}};return i.Panel=function(n,s,o){var a=1/0,l=0,c=Math.round,u=c(window.devicePixelRatio||1),d=80*u,p=48*u,m=3*u,g=2*u,y=3*u,_=15*u,x=74*u,O=30*u,S=document.createElement("canvas");S.width=d,S.height=p,S.style.cssText="width:80px;height:48px";var w=S.getContext("2d");return w.font="bold "+9*u+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=o,w.fillRect(0,0,d,p),w.fillStyle=s,w.fillText(n,m,g),w.fillRect(y,_,x,O),w.fillStyle=o,w.globalAlpha=.9,w.fillRect(y,_,x,O),{dom:S,update:function(C,M){a=Math.min(a,C),l=Math.max(l,C),w.fillStyle=o,w.globalAlpha=1,w.fillRect(0,0,d,_),w.fillStyle=s,w.fillText(c(C)+" "+n+" ("+c(a)+"-"+c(l)+")",m,g),w.drawImage(S,y+u,_,x-u,O,y,_,x-u,O),w.fillRect(y+x-u,_,u,O),w.fillStyle=o,w.globalAlpha=.9,w.fillRect(y+x-u,_,u,c((1-C/M)*O))}}},i})})(DDe);var LDe=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,NDe=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const JO=new le(0,0,0),IV=new le(0,0,0),VDe=new le(0,0,0);function BX(r,e,i){const n=JO.setFromMatrixPosition(r.matrixWorld);n.project(e);const s=i.width/2,o=i.height/2;return[(Number.isNaN(n.x)?0:n.x)*s+s,-(n.y*o)+o]}function FDe(r,e){const i=JO.setFromMatrixPosition(r.matrixWorld),n=IV.setFromMatrixPosition(e.matrixWorld),s=i.sub(n),o=e.getWorldDirection(VDe);return s.angleTo(o)>Math.PI/2}function $De(r,e,i,n){const s=JO.setFromMatrixPosition(r.matrixWorld),o=s.clone();o.project(e),i.setFromCamera(new Ge(o.x,o.y),e);const a=i.intersectObjects(n,!0);if(a.length>0){const l=a[0].distance;return s.distanceTo(i.ray.origin)<l}return!0}function UDe(r,e){if(e instanceof sh)return e.zoom;if(e instanceof $n){const i=JO.setFromMatrixPosition(r.matrixWorld),n=IV.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=i.distanceTo(n);return 1/(2*Math.tan(s/2)*o)}else return 1}function zDe(r,e,i){if(e instanceof $n||e instanceof sh){const n=JO.setFromMatrixPosition(r.matrixWorld),s=IV.setFromMatrixPosition(e.matrixWorld),o=n.distanceTo(s),a=(i[1]-i[0])/(e.far-e.near),l=i[1]-a*e.far;return Math.round(a*o+l)}}const b5=r=>Math.abs(r)<1e-10?0:r;function Ete(r,e,i=""){let n="matrix3d(";for(let s=0;s!==16;s++)n+=b5(e[s]*r.elements[s])+(s!==15?",":")");return i+n}const XDe=(r=>e=>Ete(e,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),WDe=(r=>(e,i)=>Ete(e,r(i),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]),GDe=["geometry","material"];new M_;var Pg=Object.freeze({Linear:Object.freeze({None:function(r){return r},In:function(r){return r},Out:function(r){return r},InOut:function(r){return r}}),Quadratic:Object.freeze({In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}}),Cubic:Object.freeze({In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}}),Quartic:Object.freeze({In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}}),Quintic:Object.freeze({In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}}),Sinusoidal:Object.freeze({In:function(r){return 1-Math.sin((1-r)*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.sin(Math.PI*(.5-r)))}}),Exponential:Object.freeze({In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}}),Circular:Object.freeze({In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}}),Elastic:Object.freeze({In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(r){var e=1.70158;return r===1?1:r*r*((e+1)*r-e)},Out:function(r){var e=1.70158;return r===0?0:--r*r*((e+1)*r+e)+1},InOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)}}),Bounce:Object.freeze({In:function(r){return 1-Pg.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?Pg.Bounce.In(r*2)*.5:Pg.Bounce.Out(r*2-1)*.5+.5}}),generatePow:function(r){return r===void 0&&(r=4),r=r<Number.EPSILON?Number.EPSILON:r,r=r>1e4?1e4:r,{In:function(e){return Math.pow(e,r)},Out:function(e){return 1-Math.pow(1-e,r)},InOut:function(e){return e<.5?Math.pow(e*2,r)/2:(1-Math.pow(2-e*2,r))/2+.5}}}}),pb=function(){return performance.now()},HDe=function(){function r(){this._tweens={},this._tweensAddedDuringUpdate={}}return r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(i){return e._tweens[i]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},r.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},r.prototype.update=function(e,i){e===void 0&&(e=pb()),i===void 0&&(i=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<n.length;s++){var o=this._tweens[n[s]],a=!i;o&&o.update(e,a)===!1&&!i&&delete this._tweens[n[s]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},r}(),ey={Linear:function(r,e){var i=r.length-1,n=i*e,s=Math.floor(n),o=ey.Utils.Linear;return e<0?o(r[0],r[1],n):e>1?o(r[i],r[i-1],i-n):o(r[s],r[s+1>i?i:s+1],n-s)},Bezier:function(r,e){for(var i=0,n=r.length-1,s=Math.pow,o=ey.Utils.Bernstein,a=0;a<=n;a++)i+=s(1-e,n-a)*s(e,a)*r[a]*o(n,a);return i},CatmullRom:function(r,e){var i=r.length-1,n=i*e,s=Math.floor(n),o=ey.Utils.CatmullRom;return r[0]===r[i]?(e<0&&(s=Math.floor(n=i*(1+e))),o(r[(s-1+i)%i],r[s],r[(s+1)%i],r[(s+2)%i],n-s)):e<0?r[0]-(o(r[0],r[0],r[1],r[1],-n)-r[0]):e>1?r[i]-(o(r[i],r[i],r[i-1],r[i-1],n-i)-r[i]):o(r[s?s-1:0],r[s],r[i<s+1?i:s+1],r[i<s+2?i:s+2],n-s)},Utils:{Linear:function(r,e,i){return(e-r)*i+r},Bernstein:function(r,e){var i=ey.Utils.Factorial;return i(r)/i(e)/i(r-e)},Factorial:function(){var r=[1];return function(e){var i=1;if(r[e])return r[e];for(var n=e;n>1;n--)i*=n;return r[e]=i,i}}(),CatmullRom:function(r,e,i,n,s){var o=(i-r)*.5,a=(n-e)*.5,l=s*s,c=s*l;return(2*e-2*i+o+a)*c+(-3*e+3*i-2*o-a)*l+o*s+e}}},QDe=function(){function r(){}return r.nextId=function(){return r._nextId++},r._nextId=0,r}(),w5=new HDe,jDe=function(){function r(e,i){i===void 0&&(i=w5),this._object=e,this._group=i,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Pg.Linear.None,this._interpolationFunction=ey.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=QDe.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return r.prototype.getId=function(){return this._id},r.prototype.isPlaying=function(){return this._isPlaying},r.prototype.isPaused=function(){return this._isPaused},r.prototype.getDuration=function(){return this._duration},r.prototype.to=function(e,i){if(i===void 0&&(i=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=i<0?0:i,this},r.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},r.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},r.prototype.start=function(e,i){if(e===void 0&&(e=pb()),i===void 0&&(i=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||i){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,i)}return this},r.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},r.prototype._setupProperties=function(e,i,n,s,o){for(var a in n){var l=e[a],c=Array.isArray(l),u=c?"array":typeof l,d=!c&&Array.isArray(n[a]);if(!(u==="undefined"||u==="function")){if(d){var p=n[a];if(p.length===0)continue;for(var m=[l],g=0,y=p.length;g<y;g+=1){var _=this._handleRelativeValue(l,p[g]);if(isNaN(_)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(_)}d&&(n[a]=m)}if((u==="object"||c)&&l&&!d){i[a]=c?[]:{};var x=l;for(var O in x)i[a][O]=x[O];s[a]=c?[]:{};var p=n[a];if(!this._isDynamic){var S={};for(var O in p)S[O]=p[O];n[a]=p=S}this._setupProperties(x,i[a],p,s[a],o)}else(typeof i[a]>"u"||o)&&(i[a]=l),c||(i[a]*=1),d?s[a]=n[a].slice().reverse():s[a]=i[a]||0}}},r.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},r.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},r.prototype.pause=function(e){return e===void 0&&(e=pb()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},r.prototype.resume=function(e){return e===void 0&&(e=pb()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},r.prototype.stopChainedTweens=function(){for(var e=0,i=this._chainedTweens.length;e<i;e++)this._chainedTweens[e].stop();return this},r.prototype.group=function(e){return e===void 0&&(e=w5),this._group=e,this},r.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},r.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},r.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},r.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},r.prototype.easing=function(e){return e===void 0&&(e=Pg.Linear.None),this._easingFunction=e,this},r.prototype.interpolation=function(e){return e===void 0&&(e=ey.Linear),this._interpolationFunction=e,this},r.prototype.chain=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this._chainedTweens=e,this},r.prototype.onStart=function(e){return this._onStartCallback=e,this},r.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},r.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},r.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},r.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},r.prototype.onStop=function(e){return this._onStopCallback=e,this},r.prototype.update=function(e,i){var n;if(e===void 0&&(e=pb()),i===void 0&&(i=!0),this._isPaused)return!0;var s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;i&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,a=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),l=this._duration+this._repeat*a,c=this._calculateElapsedPortion(o,a,l),u=this._easingFunction(c),d=this._calculateCompletionStatus(o,a);if(d==="repeat"&&this._processRepetition(o,a),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),d==="about-to-repeat"&&this._processRepetition(o,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,c),d==="repeat"||d==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(d==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,m=this._chainedTweens.length;p<m;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1)}return d!=="completed"},r.prototype._calculateElapsedPortion=function(e,i,n){if(this._duration===0||e>n)return 1;var s=e%i,o=Math.min(s/this._duration,1);return o===0&&e!==0&&e%this._duration===0?1:o},r.prototype._calculateCompletionStatus=function(e,i){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},r.prototype._processRepetition=function(e,i){var n=Math.min(Math.trunc((e-this._duration)/i)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=n);for(var s in this._valuesStartRepeat){var o=this._valuesEnd[s];!this._yoyo&&typeof o=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(o)),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=i*n},r.prototype._updateProperties=function(e,i,n,s){for(var o in n)if(i[o]!==void 0){var a=i[o]||0,l=n[o],c=Array.isArray(e[o]),u=Array.isArray(l),d=!c&&u;d?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},r.prototype._handleRelativeValue=function(e,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?e+parseFloat(i):parseFloat(i)},r.prototype._swapEndStartRepeatValues=function(e){var i=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i},r}(),du=w5;du.getAll.bind(du);du.removeAll.bind(du);du.add.bind(du);du.remove.bind(du);var YDe=du.update.bind(du);class qDe{constructor(){this.TileType={Brick:1,Iron:2,Grass:3,Water:4,Home:9},this.Direction={None:0,Up:1,Right:2,Down:3,Left:4},this.CampType={Player:"Player",Enermy:"Enermy"},this.ObjectType={Tank:"Tank",Bullet:"Bullet"},this.GameState={Prepare:"Prepare",Gaming:"Gaming",Finish:"Finish"},this.maps=this.getMapDatas()}makeTween(e){var i=new jDe(e);return i}makeTweenTankAppear(e,i){e.position.y=-1,this.makeTween(e.position).to({y:0},1e3).easing(Pg.Back.Out).onComplete(i).start()}randInt(e,i){if(i<e)return e;var n=i+1-e;return Math.floor(Math.random()*n)+e}randSplice(e){var i=this.randInt(0,e.length-1);return e.splice(i,1)[0]}formatNum(e,i){if(typeof e=="number")return this.formatNumImpl(e,i);if(e instanceof le)return e.x=this.formatNumImpl(e.x,i),e.y=this.formatNumImpl(e.y,i),e.z=this.formatNumImpl(e.z,i),e}formatNumImpl(e,i){if(i==0)return Math.abs(e)<1e-4?0:e;var n=Math.round(e/i);return i*n}getDirectionRotation(e){return[0,0,-Math.PI/2,Math.PI,Math.PI/2][e]}isEqual(e,i){return Math.abs(e-i)<=1e-4}removeArrayValue(e,i){for(var n=e.indexOf(i);n>=0;)e.splice(n,1),n=e.indexOf(i)}removeArrayValueIf(e,i){for(var n=e.findIndex(i);n>=0;)e.splice(n,1),n=e.indexOf(i)}getMapDatas(){const e=this.getSrcMaps(),i=[];for(let n=0;n<e.length;++n){const s=e[n],o=this.getMapData(s);i.push(o)}return i}getMapData(e){var i=e.split(`
`);i.shift(),i.pop();var n=[];for(let o=0;o<i.length;o++){var s=i[o].trim().split("	").map(l=>parseInt(l)||0);n[o]=s}return n}getDirectionVector(e){var n=[null,new le(0,0,-1),new le(1,0,0),new le(0,0,1),new le(-1,0,0)][e];return n?n.clone():null}getSrcMaps(){return[`第1关
            0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
            0																									0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0										1	1			1	1										0
            0										1	1			1	1										0
            1	1			1	1	1	1											1	1	1	1			1	1
            2	2			1	1	1	1											1	1	1	1			2	2
            0										1	1			1	1										0
            0										1	1	1	1	1	1										0
            0		1	1			1	1			1	1	1	1	1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1				1	1	1	1			1	1			1	1			0
            0											1	9		1											0
            0	0	0	0	0	0	0	0	0	0	0	1			1	0	0	0	0	0	0	0	0	0	0	0
`]}}const gt=new qDe;class ZDe{constructor(){this.Rows=24,this.Cols=26,this.Width=this.Cols*.5,this.Height=this.Rows*.5,this.HalfWidth=this.Width/2,this.HalfHeight=this.Height/2}getRCByIndex(e){let i={};return i.r=Math.floor(e/this.Cols),i.c=e%this.Cols,i}getIndexByRC(e,i){if(typeof e=="object")var{r:e,c:i}=e;return e*this.Cols+i}getIndexByPosition(e){return this.getIndexByRC(getRCByPosition(e))}getPositionByRC(e,i){if(typeof e=="object")var{r:e,c:i}=e;return new le(i*.5-6.25,0,e*.5-5.75)}getRCByPosition(e){let i={};return i.r=Math.floor((e.z+6)/.5),i.c=Math.floor((e.x+6.5)/.5),i}isIndexInBound(e){return e>=0&&e<this.Rows*this.Cols}isRCInBound(e,i){if(typeof e=="object")var{r:e,c:i}=e;return e>=0&&e<this.Rows&&i>=0&&i<this.Cols}isGridInBound(e){return!(e.minR<0||e.minC<0||e.maxR>=this.Rows||e.maxC>=this.Cols)}getStandGrid(e,i){let n={};const s=new le(e.x-i/2,0,e.z-i/2),o=new le(e.x+i/2,0,e.z+i/2),a=this.getRCByPosition(s),l=this.getRCByPosition(o);return n.minR=Math.min(a.r,l.r),n.minC=Math.min(a.c,l.c),n.maxR=Math.max(a.r,l.r),n.maxC=Math.max(a.c,l.c),Number.isInteger(o.x/.5)&&(n.maxC-=1),Number.isInteger(o.z/.5)&&(n.maxR-=1),n}}var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Mte(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),i}var tS=function(e,i,n,s,o){var a=s-e,l=o-i;return a*a+l*l<=n*n},KDe=function(e,i,n,s,o,a){var l=e-s,c=o-i,u=n+a;return l*l+c*c<=u*u},RP=function(e,i,n,s,o,a,l){var c=[o-e,a-i],u=[n-e,s-i],d=YI(u,u),p=YI(c,u),m=p/d;m=m<0?0:m,m=m>1?1:m;var g=[u[0]*m+e-o,u[1]*m+i-a],y=YI(g,g);return y<=l*l};function YI(r,e){return r[0]*e[0]+r[1]*e[1]}var JDe=RP,eLe=function(e,i,n,s,o,a,l){return JDe(s,o,a,l,e,i,n)},RV=function(e,i,n,s,o,a,l){var c=n/2,u=s/2,d=Math.abs(o-(e+n/2)),p=Math.abs(a-(i+s/2));if(d>c+l||p>u+l)return!1;if(d<=c||p<=u)return!0;var m=d-c,g=p-u;return m*m+g*g<=l*l},tLe=RV,iLe=function(e,i,n,s,o,a,l){return tLe(s,o,a,l,e,i,n)};function qI(r,e,i,n){return Math.sqrt(Math.pow(r-i,2)+Math.pow(e-n,2))}var BV=function(e,i,n,s,o,a,l){return l=l||1,Math.abs(qI(e,i,n,s)-(qI(e,i,o,a)+qI(n,s,o,a)))<=l};const nLe=BV;var iS=function(e,i,n,s){var o=e.length,a=!1,l,c;for(l=0,c=o-2;l<o;l+=2)e[l+1]>n!=e[c+1]>n&&i<(e[c]-e[l])*(n-e[l+1])/(e[c+1]-e[l+1])+e[l]&&(a=!a),c=l;if(a)return!0;for(l=0;l<o;l+=2){var u=e[l],d=e[l+1],p,m;if(l===o-2?(p=e[0],m=e[1]):(p=e[l+2],m=e[l+3]),nLe(u,d,p,m,i,n,s))return!0}return!1},rLe=iS,DX=RP,Pte=function(e,i,n,s,o){if(rLe(e,i,n,o))return!0;for(var a=e.length,l=0;l<a-2;l+=2)if(DX(e[l],e[l+1],e[l+2],e[l+3],i,n,s))return!0;return DX(e[0],e[1],e[a-2],e[a-1],i,n,s)},sLe=Pte,oLe=function(e,i,n,s,o){return sLe(s,e,i,n,o)},kte=10,xE,bE,DV;function Ite(){xE=[],bE=[];for(var r=0;r<=kte;r++){var e=4<<r;xE[r]=.5/Math.cos(4*Math.acos(0)/e),bE[r]=.5/(Math.cos(2*Math.acos(0)/e)*Math.cos(2*Math.acos(0)/e))}DV=!0}function Rte(r,e,i,n,s,o,a){for(var l=1;l<=kte;l++){var c=(i+s)*xE[l],u=(n+o)*xE[l],d=r-c,p=e-u;if(d*d+p*p<=a)return!0;var m=s-c,g=o-u;if(d*m+p*g>=0&&d*m+p*g<=m*m+g*g&&(p*m-d*g>=0||a*(m*m+g*g)>=(p*m-d*g)*(p*m-d*g)))return!0;var y=i-c,_=n-u;if(d*y+p*_>=0&&d*y+p*_<=y*y+_*_&&(p*y-d*_<=0||a*(y*y+_*_)>=(p*y-d*_)*(p*y-d*_)))return!0;var x=(i+c)*bE[l],O=(n+u)*bE[l];if((x-r)*(x-r)+(O-e)*(O-e)<a){s=c,o=u;continue}var S=c-x+c,w=u-O+u;if((S-r)*(S-r)+(w-e)*(w-e)<a){i=c,n=u;continue}var C=x-c,M=O-u;if(p*C-d*M<=0||a*(C*C+M*M)>(p*C-d*M)*(p*C-d*M)){if(d*C+p*M>0){if(Math.abs(d*C+p*M)<=C*C+M*M||(r-x)*(i-x)+(e-O)*(n-O)>=0){s=c,o=u;continue}}else if(-(d*C+p*M)<=C*C+M*M||(r-S)*(s-S)+(e-w)*(o-w)>=0){i=c,n=u;continue}}return!1}return!1}function aLe(r,e,i,n,s,o,a,l){DV||Ite();var c=Math.abs(s-r)*l,u=Math.abs(o-e)*a;i*=l,n*=a;var d=a*l;return c*c+(n-u)*(n-u)<=d*d||(i-c)*(i-c)+u*u<=d*d||c*n+u*i<=i*n||(c*n+u*i-i*n)*(c*n+u*i-i*n)<=d*d*(i*i+n*n)&&c*i-u*n>=-n*n&&c*i-u*n<=i*i?!0:(c-i)*(c-i)+(u-n)*(u-n)<=d*d||c<=i&&u-d<=n||u<=n&&c-d<=i?Rte(c,u,i,0,0,n,d*d):!1}function lLe(r,e,i,n,s,o,a){DV||Ite();var l=Math.abs(s-r),c=Math.abs(o-e);return l*l+(n-c)*(n-c)<=a*a||(i-l)*(i-l)+c*c<=a*a||l*n+c*i<=i*n||(l*n+c*i-i*n)*(l*n+c*i-i*n)<=a*a*(i*i+n*n)&&l*i-c*n>=-n*n&&l*i-c*n<=i*i?!0:(l-i)*(l-i)+(c-n)*(c-n)<=a*a||l<=i&&c-a<=n||c<=n&&l-a<=i?Rte(l,c,i,0,0,n,a*a):!1}var Bte={ellipseCircle:lLe,ellipseEllipse:aLe},hLe=Bte,Dte=function(e,i,n,s,o,a,l){return hLe.ellipseCircle(e,i,n,s,o,a,l)},cLe=Dte,uLe=function(e,i,n,s,o,a,l){return cLe(s,o,a,l,e,i,n)},Ef=tS,dLe=RV,Lte=function(e,i,n,s,o,a,l,c){c=c||1;var u=0;if(u+=Ef(e,i,n,s,o)?1:0,u+=Ef(e,i,n,s+a,o)?1:0,u+=Ef(e,i,n,s,o+l)?1:0,u+=Ef(e,i,n,s+a,o+l)?1:0,u===0)return dLe(s,o,a,l,e,i,n);if(u>=1&&u<=3)return!0;if(u===4)return!Ef(e,i,n-c,s,o)||!Ef(e,i,n-c,s+a,o)||!Ef(e,i,n-c,s,o+l)||!Ef(e,i,n-c,s+a,o+l)},fLe=RP,LX=tS,Nte=function(e,i,n,s,o,a,l,c){return c=c||1,fLe(s,o,a,l,e,i,n)&&!(LX(e,i,n-c,s,o)&&LX(e,i,n-c,a,l))},NX=tS,Vte=function(e,i,n,s,o,a){return a=a||1,NX(e,i,n,s,o)&&!NX(e,i,n-a,s,o)},Fte=function(e,i,n,s,o,a,l,c){var u=n-e,d=s-i,p=l-o,m=c-a,g=(-d*(e-o)+u*(i-a))/(-p*d+u*m),y=(p*(i-a)-m*(e-o))/(-p*d+u*m);return g>=0&&g<=1&&y>=0&&y<=1},pLe=iS,mLe=Fte,LV=function(e,i,n,s,o,a){var l=o.length;if(pLe(o,e,i,a))return!0;for(var c=0;c<l;c+=2){var u=(c+2)%l;if(mLe(e,i,n,s,o[c],o[c+1],o[u],o[u+1]))return!0}return!1},gLe=LV,vLe=function(e,i,n,s,o,a){return gLe(i,n,s,o,e,a)},NV=function(e,i){for(var n=e,s=i,o=[n,s],a,l,c,u,d,p,m=0;m<o.length;m++)for(var g=o[m],y=0;y<g.length;y+=2){var _=(y+2)%g.length,x={x:g[_+1]-g[y+1],y:g[y]-g[_]};for(a=l=null,p=0;p<n.length;p+=2)c=x.x*n[p]+x.y*n[p+1],(a===null||c<a)&&(a=c),(l===null||c>l)&&(l=c);for(u=d=null,p=0;p<s.length;p+=2)c=x.x*s[p]+x.y*s[p+1],(u===null||c<u)&&(u=c),(d===null||c>d)&&(d=c);if(l<u||d<a)return!1}return!0},yLe=NV,$te=function(e,i,n,s,o){var a=[i,n,i+s,n,i+s,n+o,i,n+o];return yLe(e,a)},VV=function(e,i,n,s,o,a,l,c){o-=e,l-=e,a-=i,c-=i;var u=Math.pow(l-o,2)/n/n+Math.pow(c-a,2)/s/s,d=2*o*(l-o)/n/n+2*a*(c-a)/s/s,p=o*o/n/n+a*a/s/s-1,m=d*d-4*u*p;if(m===0){var g=-d/2/u;return g>=0&&g<=1}else if(m>0){var y=Math.sqrt(m),_=(-d+y)/2/u,x=(-d-y)/2/u;return _>=0&&_<=1||x>=0&&x<=1}else return!1},_Le=VV,Ute=function(e,i,n,s,o,a,l,c){return _Le(o,a,l,c,e,i,n,s)},xLe=iS,VX=Ute,zte=function(e,i,n,s,o){if(xLe(e,i,n))return!0;for(var a=e.length,l=0;l<a-2;l+=2)if(VX(e[l],e[l+1],e[l+2],e[l+3],i,n,s,o))return!0;return VX(e[0],e[1],e[a-2],e[a-1],i,n,s,o)},BP=function(e,i,n,s,o,a){return o>=e&&o<=e+n&&a>=i&&a<=i+s},bLe=function(e,i,n,s,o,a,l,c){return e<o+l&&e+n>o&&i<a+c&&i+s>a},wLe=function(e,i,n,s,o){const a=Math.atan2(s-i,n-e)-Math.PI/2,l=o/2,c=Math.cos(a)*l,u=Math.sin(a)*l;return[e-c,i-u,n-c,s-u,n+c,s+u,e+c,i+u]};const M2=wLe,OLe=NV,FX=LV,SLe=Fte;var Xte=function(e,i,n,s,o,a,l,c,u,d){return u||d?CLe(e,i,n,s,o,a,l,c,u,d):SLe(e,i,n,s,o,a,l,c)};function CLe(r,e,i,n,s,o,a,l,c,u){if(c&&u)return OLe(M2(r,e,i,n,c),M2(s,o,a,l,u));if(c)return FX(s,o,a,l,M2(r,e,i,n,c));if(u)return FX(r,e,i,n,M2(s,o,a,l,c))}var $X=BP,P2=Xte,Wte=function(e,i,n,s,o,a,l,c){return $X(o,a,l,c,e,i)||$X(o,a,l,c,n,s)?!0:P2(e,i,n,s,o,a,o+l,a)||P2(e,i,n,s,o+l,a,o+l,a+c)||P2(e,i,n,s,o,a+c,o+l,a+c)||P2(e,i,n,s,o,a,o,a+c)},TLe=Wte,ALe=function(e,i,n,s,o,a,l,c){return TLe(o,a,l,c,e,i,n,s)},ELe=$te,MLe=function(e,i,n,s,o){return ELe(o,e,i,n,s)},k2=VV,PLe=BP,Gte=function(e,i,n,s,o,a,l,c){return PLe(o,a,l,c,e,i)||k2(e,i,n,s,o,a,o+l,a)||k2(e,i,n,s,o,a+c,o+l,a+c)||k2(e,i,n,s,o,a,o,a+c)||k2(e,i,n,s,o+l,a,o+l,a+c)},kLe=Gte,ILe=function(e,i,n,s,o,a,l,c){return kLe(o,a,l,c,e,i,n,s)},RLe=Lte,BLe=function(e,i,n,s,o,a,l,c){return RLe(o,a,l,e,i,n,s,c)},DLe=BP,LLe=function(e,i,n,s,o,a){return DLe(n,s,o,a,e,i)},NLe=iS,VLe=function(e,i,n,s){return NLe(n,e,i,s)},FLe=tS,$Le=function(e,i,n,s,o){return FLe(n,s,o,e,i)},ULe=BV,zLe=function(e,i,n,s,o,a){return ULe(n,s,o,a,e,i)},Hte=function(e,i,n,s,o,a){var l=Math.pow(o-e,2)/(n*n),c=Math.pow(a-i,2)/(s*s);return l+c<=1},XLe=Hte,WLe=function(e,i,n,s,o,a){return XLe(n,s,o,a,e,i)},GLe=Vte,HLe=function(e,i,n,s,o,a){return GLe(e,i,n,s,o,a)},QLe=Nte,jLe=function(e,i,n,s,o,a,l,c){return QLe(o,a,l,e,i,n,s,c)},YLe=Bte,qLe=function(e,i,n,s,o,a,l,c){return YLe.ellipseEllipse(e,i,n,s,o,a,l,c)},ZLe=zte,KLe=function(e,i,n,s,o){return ZLe(o,e,i,n,s)},I2={circlePoint:tS,circleCircle:KDe,circleLine:eLe,circleBox:iLe,circlePolygon:oLe,circleEllipse:uLe,circleOutlineBox:Lte,circleOutlineLine:Nte,circleOutlinePoint:Vte,polygonPoint:iS,polygonLine:vLe,polygonPolygon:NV,polygonBox:$te,polygonCircle:Pte,polygonEllipse:zte,boxPoint:BP,boxBox:bLe,boxLine:ALe,boxPolygon:MLe,boxCircle:RV,boxEllipse:ILe,boxCircleOutline:BLe,pointBox:LLe,pointPolygon:VLe,pointCircle:$Le,pointLine:zLe,pointEllipse:WLe,pointCircleOutline:HLe,lineLine:Xte,lineBox:Wte,linePolygon:LV,lineCircle:RP,linePoint:BV,lineEllipse:Ute,lineCircleOutline:jLe,ellipsePoint:Hte,ellipseLine:VV,ellipseBox:Gte,ellipseCircle:Dte,ellipseEllipse:qLe,ellipsePolygon:KLe};const va=class va{constructor(e,i){this.shapeType=e,e==va.Box?this.size=i:e==va.Circle&&(this.radius=i)}get center(){return this._center}set center(e){this._center=e}intersect(e){if(this.shapeType==va.Box&&e.shapeType==va.Box){var i=this.center.x-this.size/2,n=this.center.z-this.size/2,s=this.size,o=this.size,a=e.center.x-e.size/2,l=e.center.z-e.size/2,c=e.size,u=e.size,d=I2.boxBox(i,n,s,o,a,l,c,u);return d}else if(this.shapeType==va.Box&&e.shapeType==va.Circle){var i=this.center.x-this.size/2,n=this.center.z-this.size/2,s=this.size,o=this.size,p=e.center.x,m=e.center.z,g=e.radius,d=I2.boxCircle(i,n,s,o,p,m,g);return d}else if(this.shapeType==va.Circle&&e.shapeType==va.Box){var p=this.center.x,m=this.center.z,g=this.radius,a=e.center.x-e.size/2,l=e.center.z-e.size/2,c=e.size,u=e.size,d=I2.circleBox(p,m,g,i,n,s,o);return d}else if(this.shapeType==va.Circle&&e.shapeType==va.Circle){var i=this.center.x,n=this.center.z,y=this.radius,a=this.center.x,l=this.center.z,_=this.radius,d=I2.circleCircle(i,n,y,a,l,_);return d}}};Xi(va,"Box","Box"),Xi(va,"Circle","Circle");let Ap=va;class JLe{constructor(){this.obj=this.createObject(),this.speed=4,this.power=1,game.timer.tick(this.update.bind(this)),this.shape=new Ap(Ap.Circle,.15)}createObject(){var e=game.ResStore.bullet_player.clone();return e}get CampType(){return gt.CampType.Player}get ObjectType(){return gt.ObjectType.Bullet}get Shape(){return this.shape.center=this.obj.position,this.shape}init(e){this.tank=e;var i=e.position.clone().add(new le(0,.5,0));this.obj.position.copy(i),this.direction=e.getDirection(),this.speed=this.initBulletSpeed(),this.canHitTileTypes=this.initCanHitTileTypes(),this.power=this.initPower()}initBulletSpeed(){return this.tank.starCount<=0?4:8}initPower(){return this.tank.starCount<=2?1:2}initCanHitTileTypes(){var e=[];return e.push(gt.TileType.Home),e.push(gt.TileType.Brick),this.tank.getStarCount()>=3&&e.push(gt.TileType.Iron),e}onRemove(){}update({delta:e,elapsed:i}){var n=this.speed*e,s=gt.getDirectionVector(this.direction).multiplyScalar(n);this.obj.position.add(s)}}class eNe{constructor(){this.obj=this.createObject(),this.moveSpeed=2,this.shootDiff=.1,this.shootAcc=0,this.starCount=1,this.bullets=[],this.shape=new Ap(Ap.Box,1)}getMaxBulletCount(){return this.starCount<=1?1:2}getStarCount(){return this.starCount}createObject(){var e=game.ResStore.tank_player_1.clone();this.lightTarget=new dn,e.add(this.lightTarget),this.lightTarget.position.set(0,.5,-10);var i=new xP(16777215);return i.position.set(0,.5,-.3),i.castShadow=!0,i.target=this.lightTarget,i.angle=Math.PI/4,i.intensity=10,i.penumbra=.2,e.add(i),this.spotLight=i,e}init(){game.onAddController.push(this.onAddController.bind(this)),game.onRemoveController.push(this.onRemoveController.bind(this))}onRemove(){gt.removeArrayValue(game.onAddController,this.onAddController.bind(this)),gt.removeArrayValue(game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e.CampType==gt.CampType.Player&&e.ObjectType==gt.ObjectType.Bullet&&this.bullets.push(e)}onRemoveController(e){e.CampType==gt.CampType.Player&&e.ObjectType==gt.ObjectType.Bullet&&gt.removeArrayValue(this.bullets,e)}get CampType(){return gt.CampType.Player}get ObjectType(){return gt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}ITank_update({delta:e,elapsed:i}){window.game.gameState==gt.GameState.Gaming&&(this.checkMove({delta:e,elapsed:i}),this.checkShoot({delta:e,elapsed:i}))}checkMove({delta:e,elapsed:i}){var n=game.getMoveDirection();if(n){var s=gt.getDirectionRotation(n);s!=this.rotation.y&&(this.rotation.y=s,gt.formatNum(this.position,.25));var o=game.getCanMoveLength(this,n);if(o>0){var a=this.moveSpeed*e;a>o&&(a=o);var l=gt.getDirectionVector(n).multiplyScalar(a);this.position.add(l)}}}getDirection(){return this.rotation.y==0?gt.Direction.Up:this.rotation.y==Math.PI?gt.Direction.Down:this.rotation.y==-Math.PI/2?gt.Direction.Right:this.rotation.y==Math.PI/2?gt.Direction.Left:gt.Direction.Up}shootPressed(){return game.inputs.c||game.inputs.j||game.inputs.f}checkShoot({delta:e,elapsed:i}){this.bullets.length>=this.getMaxBulletCount()||(this.shootAcc+=e,this.shootPressed()&&this.shootAcc>=this.shootDiff&&(this.shootAcc=0,this.doShoot()))}doShoot(){var e=new JLe;game.addController(e),e.init(this)}get position(){return this.obj.position}get rotation(){return this.obj.rotation}}let tNe=class{constructor(){this.delta=0,this.elapsed=0,this.records=[],this.shouldRemoves=[],this.shouldAdds=[]}update({delta:e,elapsed:i}){this.delta=e,this.elapsed=i;for(let s=0;s<this.records.length;++s){var n=this.records[s];n.acc+=e,n.acc>=n.second&&(n.callback({delta:n.acc,elapsed:i}),n.acc=0,n.times&&(n.times-=1,n.times<=0&&this.shouldRemoves.push(n.callback)))}this.checkRemove(),this.checkAdd()}checkAdd(){for(let e=0;e<this.shouldAdds.length;++e)this.records.push(this.shouldAdds[e]);this.shouldAdds.length=0}checkRemove(){for(let i=0;i<this.shouldRemoves.length;++i){var e=n=>n.callback==this.shouldRemoves[i];gt.removeArrayValueIf(this.records,e),gt.removeArrayValueIf(this.shouldAdds,e)}this.shouldRemoves.length=0}tick(e,i){i=i||0;var n={second:i,callback:e,acc:0};this.shouldAdds.push(n)}tickOnce(e,i){i=i||0;var n={second:i,callback:e,acc:0,times:1};this.shouldAdds.push(n)}untick(e){this.shouldRemoves.push(e)}};class ZI{constructor(e,i,n){this.enermyMan=e,this.bornIndex=i,this.tankType=n,this.obj=this.createObject(),this.obj.position.copy(this.getBornPos(this.bornIndex)),this.obj.rotation.y=gt.getDirectionRotation(gt.Direction.Down),this.state=0,this.shape=new Ap(Ap.Box,1),this.moveSpeed=this.getSpeedTemplate(),this.blood=this.getBloodTemplate(),this.direction=this.getRandDirection(),this.moveDirectAcc=0,this.moveDirectMax=3}get position(){return this.obj.position}get rotation(){return this.obj.rotation}createObject(){var e=window.game.ResStore[`enermy${this.tankType+1}`],i=e.clone();return i}getSpeedTemplate(){var e=[2,3,4,2];return e[this.tankType]}getBloodTemplate(){var e=[1,2,1,4];return e[this.tankType]}getRandDirection(){for(var e=[gt.Direction.Up,gt.Direction.Right,gt.Direction.Down,gt.Direction.Left],i=[window.game.getCanMoveLength(this,gt.Direction.Up),window.game.getCanMoveLength(this,gt.Direction.Right),window.game.getCanMoveLength(this,gt.Direction.Down),window.game.getCanMoveLength(this,gt.Direction.Left)],n=i.findIndex(s=>s<=0);n>=0;)e.splice(n,1),i.splice(n,1),n=i.findIndex(s=>s<=0);return e.length>0?gt.randSplice(e):gt.Direction.Down}onAppearFinish(){this.state=1}get CampType(){return gt.CampType.Enermy}get ObjectType(){return gt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new le(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new le(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new le(.25,0,.25))}ITank_update({delta:e}){this.state!=0&&(this.wantChangeDirection&&(this.direction=this.getRandDirection(),this.wantChangeDirection=!1,this.moveDirectAcc=0,this.moveDirectMax=1e3,gt.randInt(1,5)),this.checkMove({delta:e}),this.moveDirectAcc>=this.moveDirectMax&&(this.wantChangeDirection=!0))}checkMove({delta:e}){var i=gt.getDirectionRotation(this.direction);i!=this.rotation.y&&(this.rotation.y=i,gt.formatNum(this.position,.25));var n=game.getCanMoveLength(this,this.direction);if(n>0){var s=this.moveSpeed*e;s>n&&(s=n);var o=gt.getDirectionVector(this.direction).multiplyScalar(s);this.position.add(o),this.moveDirectAcc+=e}else this.wantChangeDirection=!0}}class iNe{constructor(){this.tanks=[],this.bornIndex=0,this.bornTime={},this.totalCount=20,this.destroyCount=0,console.log("EnermyMan")}start(){window.game.timer.tick(this.update.bind(this),1),window.game.onAddController.push(this.onAddController.bind(this)),window.game.onRemoveController.push(this.onRemoveController.bind(this))}dispose(){window.game.timer.untick(this.update.bind(this)),gt.removeArrayValue(window.game.onAddController,this.onAddController.bind(this)),gt.removeArrayValue(window.game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e instanceof ZI&&this.tanks.push(e)}onRemoveController(e){e instanceof ZI&&(gt.removeArrayValue(this.tanks,e),this.destroyCount+=1)}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new le(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new le(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new le(.25,0,.25))}isEmptyBorn(){var e=this.bornTime[this.bornIndex]||0;return Date.now()-e>2e3}update({delta:e,elapsed:i}){for(;this.tanks.length<1&&this.isEmptyBorn();)this.makeEnermy()}makeEnermy(){var e=gt.randInt(0,3),i=new ZI(this,this.bornIndex,e);window.game.addController(i),gt.makeTweenTankAppear(i.obj,i.onAppearFinish.bind(i)),this.bornTime[this.bornIndex]=Date.now(),this.bornIndex+=1,this.bornIndex=this.bornIndex%3}}const{onLoop:nNe}=v0();class rNe{constructor(e){Xi(this,"tick",0);this.scene=e.value.context.scene.value,this.camera=e.value.context.camera.value}startGame(){this.rc=new ZDe,this.inputs={},this.tiles=[],this.player_1=null,this.controllers=[],this.playerBullets=[],this.controllerShouldAdd=[],this.controllerShouldRemove=[],this.ITank_updates=[],this.onAddController=[],this.onRemoveController=[],this.timer=new tNe,nNe(this.update.bind(this));var e=this.ResStore.platform.clone();this.scene.add(e),this.tileRoot=new cd,this.scene.add(this.tileRoot),this.startLevel(0),this.initInput(),e.visible=this.visible,this.tileRoot.visible=this.visible}startLevel(e){for(this.gameState=gt.GameState.Prepare;this.tileRoot.children.length>0;)this.tileRoot.remove(this.tileRoot.children[0]);this.initMap(e),this.initPlayer(),this.enermyMan&&this.enermyMan.dispose(),this.enermyMan=new iNe,this.timer.tickOnce(()=>{this.showPlayerAppear()},1)}initPlayer(){this.player_1&&this.removeController(this.player_1),this.player_1=new eNe,this.addController(this.player_1),this.player_1.position.copy(this.rc.getPositionByRC(22,9).add(new le(-.25,-1,.25))),this.player_1.init()}showPlayerAppear(){gt.makeTween(this.player_1.obj.position).to({y:0},1e3).easing(Pg.Back.Out).onComplete(()=>{this.gameState=gt.GameState.Gaming,this.enermyMan.start()}).start()}run(){this.loadResource()}loadResource(){this.ResStore={};const e=["tank/platform.fbx","tank/tile1.fbx","tank/tile2.fbx","tank/tile9.fbx","tank/enermy1.fbx","tank/enermy2.fbx","tank/enermy3.fbx","tank/enermy4.fbx","tank/bullet_player.fbx","tank/tank_player_1.fbx"];SDe(e).then(i=>{for(let s=0;s<i.length;++s){const o=i[s],a=e[s];this.ResStore[a]=o;var n=a.split("/");n=n[n.length-1],n=n.split("."),n=n[0],this.ResStore[n]=o}this.brickHitMaterial=this.ResStore.tile1.children[0].material.clone(),this.brickHitMaterial.color.setHex(8912896),this.startGame()})}initInput(){document.addEventListener("keydown",e=>{this.inputs[e.key]=1}),document.addEventListener("keyup",e=>{this.inputs[e.key]=0})}initMap(e){var i=gt.maps[e];for(let a=0;a<i.length;a++){const l=i[a];for(let c=0;c<l.length;c++){const u=l[c],d=this.rc.getIndexByRC(a,c);var n=null,s=0;if(u==gt.TileType.Brick){var n=this.ResStore.tile1.clone();this.tileRoot.add(n),n.position.copy(this.rc.getPositionByRC(a,c)),s=1}else if(u==gt.TileType.Iron){var n=this.ResStore.tile2.clone();this.tileRoot.add(n),n.position.copy(this.rc.getPositionByRC(a,c)),s=1}else if(u==gt.TileType.Home){var n=this.ResStore.tile9.clone();this.tileRoot.add(n),n.position.x=c*.5-6,n.position.z=a*.5-5.5,s=2}if(s==1){var o={tileType:u,obj:n,blood:2};this.tiles[d]=o}else if(s==2){var o={tileType:u,obj:n,blood:1};this.tiles[d]=o,this.tiles[this.rc.getIndexByRC(a,c+1)]=o,this.tiles[this.rc.getIndexByRC(a+1,c)]=o,this.tiles[this.rc.getIndexByRC(a+1,c+1)]=o}if(!this.tiles[d]){var o={tileType:u,obj:n};this.tiles[d]=o}}}}getTile(e,i){var n=this.rc.getIndexByRC(e,i);return this.tiles[n]}getTilesByGrid(e){var i=[];for(let s=e.minR;s<=e.maxR;++s)for(let o=e.minC;o<=e.maxC;++o){var n=this.getTile(s,o);n.tileType&&i.push(n)}return i}getMoveDirection(){return this.inputs.w?gt.Direction.Up:this.inputs.s?gt.Direction.Down:this.inputs.a?gt.Direction.Left:this.inputs.d?gt.Direction.Right:gt.Direction.None}getBlockTileRCs(e,i){let n=[];if(i==gt.Direction.Up)for(let o=e.minR;o>=0;--o)for(let a=e.minC;a<=e.maxC;++a){var s=this.getTile(o,a);s.tileType&&n.push({r:o,c:a})}else if(i==gt.Direction.Down)for(let o=e.maxR;o<=this.rc.Rows-1;++o)for(let a=e.minC;a<=e.maxC;++a){var s=this.getTile(o,a);s.tileType&&n.push({r:o,c:a})}else if(i==gt.Direction.Left)for(let o=e.minC;o>=0;--o)for(let a=e.minR;a<=e.maxR;++a){var s=this.getTile(a,o);s.tileType&&n.push({r:a,c:o})}else if(i==gt.Direction.Right)for(let o=e.maxC;o<=this.rc.Cols-1;++o)for(let a=e.minR;a<=e.maxR;++a){var s=this.getTile(a,o);s.tileType&&n.push({r:a,c:o})}return n}getCanMoveLength(e,i){var n=e.position.clone(),s=this.rc.getStandGrid(e.position,1),o=this.getBlockTileRCs(s,i),a=o[0],l=0;if(!a)i==gt.Direction.Up?l=n.z- -5.5:i==gt.Direction.Down?l=5.5-n.z:i==gt.Direction.Left?l=n.x- -6:i==gt.Direction.Right&&(l=6-n.x);else{var c=this.rc.getPositionByRC(a);i==gt.Direction.Up?l=n.z-.5-(c.z+.25):i==gt.Direction.Down?l=c.z-.25-(n.z+.5):i==gt.Direction.Left?l=n.x-.5-(c.x+.25):i==gt.Direction.Right&&(l=c.x-.25-(n.x+.5))}return l}update({delta:e,elapsed:i}){YDe(),this.checkRemoveController(),this.checkAddController();for(let n=0;n<this.ITank_updates.length;n++)this.ITank_updates[n].ITank_update({delta:e,elapsed:i});this.timer.update({delta:e,elapsed:i}),this.checkCollision({delta:e,elapsed:i}),this.checkRemoveController(),this.checkAddController(),this.makeCameraFollow({delta:e,elapsed:i})}makeCameraFollow({delta:e,elapsed:i}){}addController(e){e.obj&&this.tileRoot.add(e.obj),this.controllerShouldAdd.push(e),e.ITank_update&&this.ITank_updates.push(e);for(let n=0;n<this.onAddController.length;++n){var i=this.onAddController[n];i(e)}}checkAddController(){for(let e=0;e<this.controllerShouldAdd.length;e++){const i=this.controllerShouldAdd[e];this.controllers.push(i),i.CampType==gt.CampType.Player&&i.ObjectType==gt.ObjectType.Bullet&&this.playerBullets.push(i)}this.controllerShouldAdd.length=0}removeController(e){this.controllerShouldRemove.push(e),e.ITank_update&&gt.removeArrayValue(this.ITank_updates,e),e.onRemove&&e.onRemove();for(let n=0;n<this.onRemoveController.length;++n){var i=this.onRemoveController[n];i(e)}}checkRemoveController(){for(let e=0;e<this.controllerShouldRemove.length;e++){const i=this.controllerShouldRemove[e];gt.removeArrayValue(this.controllers,i),gt.removeArrayValue(this.playerBullets,i),this.tileRoot.remove(i.obj)}this.controllerShouldRemove.length=0}checkCollision({delta:e,elapsed:i}){for(let n=0;n<this.playerBullets.length;n++){const s=this.playerBullets[n];let o=this.rc.getStandGrid(s.obj.position,.5);if(this.rc.isGridInBound(o)){let a=this.getTilesByGrid(o);a.length>0&&this.onCollisionTiles(a,s)}else this.removeController(s)}for(let n=0;n<this.playerBullets.length;n++){const s=this.playerBullets[n];for(let o=0;o<this.enermyMan.tanks.length;o++){const a=this.enermyMan.tanks[o];if(a.Shape.intersect(s.Shape)){this.onCollisionBulletVsTank(s,a);break}}}}removeTile(e,i){}onCollisionTiles(e,i){this.removeController(i);for(let s=0;s<e.length;++s){var n=e[s];i.canHitTileTypes.indexOf(n.tileType)<0||(n.blood-=i.power,n.tileType==gt.TileType.Brick&&n.blood==1&&(n.obj.children[0].material=this.brickHitMaterial),n.blood<=0&&(n.tileType=0,this.tileRoot.remove(n.obj),n.obj=null))}}onCollisionBulletVsTank(e,i){this.removeController(e),this.removeController(i)}}const sNe=It("TresPerspectiveCamera",{position:[0,20,0],rotation:[0,0,0]},null,-1),oNe=It("TresAmbientLight",{intensity:1},null,-1),aNe=It("TresAxesHelper",null,null,-1),lNe={__name:"TankMain",setup(r){const e=br(null);return tn(e,()=>{window.game=new rNe(e),window.game.run()}),(i,n)=>{const s=St("TresCanvas");return ci(),pn("div",null,[ke(s,{ref_key:"canvasRef",ref:e,"clear-color":"#FDF5E6","window-size":""},{default:Je(()=>[sNe,oNe,aNe,ke(li(IP))]),_:1},512)])}}};var _A={exports:{}},Hx={},KI={},JI={},UX;function qi(){return UX||(UX=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r._registerNode=r.Konva=r.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}r.glob=typeof ph<"u"?ph:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},r.Konva={_global:r.glob,version:"9.3.12",isBrowser:i(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return r.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return r.Konva.DD.isDragging},isTransforming(){var s;return(s=r.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!r.Konva.DD.node},releaseCanvasOnDestroy:!0,document:r.glob.document,_injectGlobal(s){r.glob.Konva=s}};const n=s=>{r.Konva[s.prototype.getClassName()]=s};r._registerNode=n,r.Konva._injectGlobal(r.Konva)}(JI)),JI}var eR={},zX;function Wr(){return zX||(zX=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Util=r.Transform=void 0;const e=qi();class i{constructor(C=[1,0,0,1,0,0]){this.dirty=!1,this.m=C&&C.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(C){C.m[0]=this.m[0],C.m[1]=this.m[1],C.m[2]=this.m[2],C.m[3]=this.m[3],C.m[4]=this.m[4],C.m[5]=this.m[5]}point(C){var M=this.m;return{x:M[0]*C.x+M[2]*C.y+M[4],y:M[1]*C.x+M[3]*C.y+M[5]}}translate(C,M){return this.m[4]+=this.m[0]*C+this.m[2]*M,this.m[5]+=this.m[1]*C+this.m[3]*M,this}scale(C,M){return this.m[0]*=C,this.m[1]*=C,this.m[2]*=M,this.m[3]*=M,this}rotate(C){var M=Math.cos(C),P=Math.sin(C),R=this.m[0]*M+this.m[2]*P,k=this.m[1]*M+this.m[3]*P,I=this.m[0]*-P+this.m[2]*M,A=this.m[1]*-P+this.m[3]*M;return this.m[0]=R,this.m[1]=k,this.m[2]=I,this.m[3]=A,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(C,M){var P=this.m[0]+this.m[2]*M,R=this.m[1]+this.m[3]*M,k=this.m[2]+this.m[0]*C,I=this.m[3]+this.m[1]*C;return this.m[0]=P,this.m[1]=R,this.m[2]=k,this.m[3]=I,this}multiply(C){var M=this.m[0]*C.m[0]+this.m[2]*C.m[1],P=this.m[1]*C.m[0]+this.m[3]*C.m[1],R=this.m[0]*C.m[2]+this.m[2]*C.m[3],k=this.m[1]*C.m[2]+this.m[3]*C.m[3],I=this.m[0]*C.m[4]+this.m[2]*C.m[5]+this.m[4],A=this.m[1]*C.m[4]+this.m[3]*C.m[5]+this.m[5];return this.m[0]=M,this.m[1]=P,this.m[2]=R,this.m[3]=k,this.m[4]=I,this.m[5]=A,this}invert(){var C=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),M=this.m[3]*C,P=-this.m[1]*C,R=-this.m[2]*C,k=this.m[0]*C,I=C*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),A=C*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=M,this.m[1]=P,this.m[2]=R,this.m[3]=k,this.m[4]=I,this.m[5]=A,this}getMatrix(){return this.m}decompose(){var C=this.m[0],M=this.m[1],P=this.m[2],R=this.m[3],k=this.m[4],I=this.m[5],A=C*R-M*P;let D={x:k,y:I,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(C!=0||M!=0){var V=Math.sqrt(C*C+M*M);D.rotation=M>0?Math.acos(C/V):-Math.acos(C/V),D.scaleX=V,D.scaleY=A/V,D.skewX=(C*P+M*R)/A,D.skewY=0}else if(P!=0||R!=0){var B=Math.sqrt(P*P+R*R);D.rotation=Math.PI/2-(R>0?Math.acos(-P/B):-Math.acos(P/B)),D.scaleX=A/B,D.scaleY=B,D.skewX=0,D.skewY=(C*P+M*R)/A}return D.rotation=r.Util._getRotation(D.rotation),D}}r.Transform=i;var n="[object Array]",s="[object Number]",o="[object String]",a="[object Boolean]",l=Math.PI/180,c=180/Math.PI,u="#",d="",p="0",m="Konva warning: ",g="Konva error: ",y="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},x=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,O=[];const S=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};r.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===n},_isNumber(w){return Object.prototype.toString.call(w)===s&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===o},_isBoolean(w){return Object.prototype.toString.call(w)===a},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;var C=w[0];return C==="#"||C==="."||C===C.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){O.push(w),O.length===1&&S(function(){const C=O;O=[],C.forEach(function(M){M()})})},createCanvasElement(){var w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,C){var M=r.Util.createImageElement();M.onload=function(){C(M)},M.src=w},_rgbToHex(w,C,M){return((1<<24)+(w<<16)+(C<<8)+M).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,d);var C=parseInt(w,16);return{r:C>>16&255,g:C>>8&255,b:C&255}},getRandomColor(){for(var w=(Math.random()*16777215<<0).toString(16);w.length<6;)w=p+w;return u+w},getRGB(w){var C;return w in _?(C=_[w],{r:C[0],g:C[1],b:C[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===y?(C=x.exec(w.replace(/ /g,"")),{r:parseInt(C[1],10),g:parseInt(C[2],10),b:parseInt(C[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",r.Util._namedColorToRBA(w)||r.Util._hex3ColorToRGBA(w)||r.Util._hex4ColorToRGBA(w)||r.Util._hex6ColorToRGBA(w)||r.Util._hex8ColorToRGBA(w)||r.Util._rgbColorToRGBA(w)||r.Util._rgbaColorToRGBA(w)||r.Util._hslColorToRGBA(w)},_namedColorToRBA(w){var C=_[w.toLowerCase()];return C?{r:C[0],g:C[1],b:C[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];var C=w.split(/ *, */).map(Number);return{r:C[0],g:C[1],b:C[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];var C=w.split(/ *, */).map((M,P)=>M.slice(-1)==="%"?P===3?parseInt(M)/100:parseInt(M)/100*255:Number(M));return{r:C[0],g:C[1],b:C[2],a:C[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[C,...M]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),P=Number(M[0])/360,R=Number(M[1])/100,k=Number(M[2])/100;let I,A,D;if(R===0)return D=k*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};k<.5?I=k*(1+R):I=k+R-k*R;const V=2*k-I,B=[0,0,0];for(let L=0;L<3;L++)A=P+1/3*-(L-1),A<0&&A++,A>1&&A--,6*A<1?D=V+(I-V)*6*A:2*A<1?D=I:3*A<2?D=V+(I-V)*(2/3-A)*6:D=V,B[L]=D*255;return{r:Math.round(B[0]),g:Math.round(B[1]),b:Math.round(B[2]),a:1}}},haveIntersection(w,C){return!(C.x>w.x+w.width||C.x+C.width<w.x||C.y>w.y+w.height||C.y+C.height<w.y)},cloneObject(w){var C={};for(var M in w)this._isPlainObject(w[M])?C[M]=this.cloneObject(w[M]):this._isArray(w[M])?C[M]=this.cloneArray(w[M]):C[M]=w[M];return C},cloneArray(w){return w.slice(0)},degToRad(w){return w*l},radToDeg(w){return w*c},_degToRad(w){return r.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),r.Util.degToRad(w)},_radToDeg(w){return r.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),r.Util.radToDeg(w)},_getRotation(w){return e.Konva.angleDeg?r.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(g+w)},error(w){console.error(g+w)},warn(w){e.Konva.showWarnings&&console.warn(m+w)},each(w,C){for(var M in w)C(M,w[M])},_inRange(w,C,M){return C<=w&&w<M},_getProjectionToSegment(w,C,M,P,R,k){var I,A,D,V=(w-M)*(w-M)+(C-P)*(C-P);if(V==0)I=w,A=C,D=(R-M)*(R-M)+(k-P)*(k-P);else{var B=((R-w)*(M-w)+(k-C)*(P-C))/V;B<0?(I=w,A=C,D=(w-R)*(w-R)+(C-k)*(C-k)):B>1?(I=M,A=P,D=(M-R)*(M-R)+(P-k)*(P-k)):(I=w+B*(M-w),A=C+B*(P-C),D=(I-R)*(I-R)+(A-k)*(A-k))}return[I,A,D]},_getProjectionToLine(w,C,M){var P=r.Util.cloneObject(w),R=Number.MAX_VALUE;return C.forEach(function(k,I){if(!(!M&&I===C.length-1)){var A=C[(I+1)%C.length],D=r.Util._getProjectionToSegment(k.x,k.y,A.x,A.y,w.x,w.y),V=D[0],B=D[1],L=D[2];L<R&&(P.x=V,P.y=B,R=L)}}),P},_prepareArrayForTween(w,C,M){var P,R=[],k=[];if(w.length>C.length){var I=C;C=w,w=I}for(P=0;P<w.length;P+=2)R.push({x:w[P],y:w[P+1]});for(P=0;P<C.length;P+=2)k.push({x:C[P],y:C[P+1]});var A=[];return k.forEach(function(D){var V=r.Util._getProjectionToLine(D,R,M);A.push(V.x),A.push(V.y)}),A},_prepareToStringify(w){var C;w.visitedByCircularReferenceRemoval=!0;for(var M in w)if(w.hasOwnProperty(M)&&w[M]&&typeof w[M]=="object"){if(C=Object.getOwnPropertyDescriptor(w,M),w[M].visitedByCircularReferenceRemoval||r.Util._isElement(w[M]))if(C.configurable)delete w[M];else return null;else if(r.Util._prepareToStringify(w[M])===null)if(C.configurable)delete w[M];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,C){for(var M in C)w[M]=C[M];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){e.Konva.releaseCanvasOnDestroy&&w.forEach(C=>{C.width=0,C.height=0})},drawRoundedRectPath(w,C,M,P){let R=0,k=0,I=0,A=0;typeof P=="number"?R=k=I=A=Math.min(P,C/2,M/2):(R=Math.min(P[0]||0,C/2,M/2),k=Math.min(P[1]||0,C/2,M/2),A=Math.min(P[2]||0,C/2,M/2),I=Math.min(P[3]||0,C/2,M/2)),w.moveTo(R,0),w.lineTo(C-k,0),w.arc(C-k,k,k,Math.PI*3/2,0,!1),w.lineTo(C,M-A),w.arc(C-A,M-A,A,0,Math.PI/2,!1),w.lineTo(I,M),w.arc(I,M-I,I,Math.PI/2,Math.PI,!1),w.lineTo(0,R),w.arc(R,R,R,Math.PI,Math.PI*3/2,!1)}}}(eR)),eR}var Qx={},tR={},sr={},XX;function nn(){if(XX)return sr;XX=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.getComponentValidator=sr.getBooleanValidator=sr.getNumberArrayValidator=sr.getFunctionValidator=sr.getStringOrGradientValidator=sr.getStringValidator=sr.getNumberOrAutoValidator=sr.getNumberOrArrayOfNumbersValidator=sr.getNumberValidator=sr.alphaComponent=sr.RGBComponent=void 0;const r=qi(),e=Wr();function i(y){return e.Util._isString(y)?'"'+y+'"':Object.prototype.toString.call(y)==="[object Number]"||e.Util._isBoolean(y)?y:Object.prototype.toString.call(y)}function n(y){return y>255?255:y<0?0:Math.round(y)}sr.RGBComponent=n;function s(y){return y>1?1:y<1e-4?1e-4:y}sr.alphaComponent=s;function o(){if(r.Konva.isUnminified)return function(y,_){return e.Util._isNumber(y)||e.Util.warn(i(y)+' is a not valid value for "'+_+'" attribute. The value should be a number.'),y}}sr.getNumberValidator=o;function a(y){if(r.Konva.isUnminified)return function(_,x){let O=e.Util._isNumber(_),S=e.Util._isArray(_)&&_.length==y;return!O&&!S&&e.Util.warn(i(_)+' is a not valid value for "'+x+'" attribute. The value should be a number or Array<number>('+y+")"),_}}sr.getNumberOrArrayOfNumbersValidator=a;function l(){if(r.Konva.isUnminified)return function(y,_){var x=e.Util._isNumber(y),O=y==="auto";return x||O||e.Util.warn(i(y)+' is a not valid value for "'+_+'" attribute. The value should be a number or "auto".'),y}}sr.getNumberOrAutoValidator=l;function c(){if(r.Konva.isUnminified)return function(y,_){return e.Util._isString(y)||e.Util.warn(i(y)+' is a not valid value for "'+_+'" attribute. The value should be a string.'),y}}sr.getStringValidator=c;function u(){if(r.Konva.isUnminified)return function(y,_){const x=e.Util._isString(y),O=Object.prototype.toString.call(y)==="[object CanvasGradient]"||y&&y.addColorStop;return x||O||e.Util.warn(i(y)+' is a not valid value for "'+_+'" attribute. The value should be a string or a native gradient.'),y}}sr.getStringOrGradientValidator=u;function d(){if(r.Konva.isUnminified)return function(y,_){return e.Util._isFunction(y)||e.Util.warn(i(y)+' is a not valid value for "'+_+'" attribute. The value should be a function.'),y}}sr.getFunctionValidator=d;function p(){if(r.Konva.isUnminified)return function(y,_){const x=Int8Array?Object.getPrototypeOf(Int8Array):null;return x&&y instanceof x||(e.Util._isArray(y)?y.forEach(function(O){e.Util._isNumber(O)||e.Util.warn('"'+_+'" attribute has non numeric element '+O+". Make sure that all elements are numbers.")}):e.Util.warn(i(y)+' is a not valid value for "'+_+'" attribute. The value should be a array of numbers.')),y}}sr.getNumberArrayValidator=p;function m(){if(r.Konva.isUnminified)return function(y,_){var x=y===!0||y===!1;return x||e.Util.warn(i(y)+' is a not valid value for "'+_+'" attribute. The value should be a boolean.'),y}}sr.getBooleanValidator=m;function g(y){if(r.Konva.isUnminified)return function(_,x){return _==null||e.Util.isObject(_)||e.Util.warn(i(_)+' is a not valid value for "'+x+'" attribute. The value should be an object with properties '+y),_}}return sr.getComponentValidator=g,sr}var WX;function Zi(){return WX||(WX=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Factory=void 0;const e=Wr(),i=nn();var n="get",s="set";r.Factory={addGetterSetter(o,a,l,c,u){r.Factory.addGetter(o,a,l),r.Factory.addSetter(o,a,c,u),r.Factory.addOverloadedGetterSetter(o,a)},addGetter(o,a,l){var c=n+e.Util._capitalize(a);o.prototype[c]=o.prototype[c]||function(){var u=this.attrs[a];return u===void 0?l:u}},addSetter(o,a,l,c){var u=s+e.Util._capitalize(a);o.prototype[u]||r.Factory.overWriteSetter(o,a,l,c)},overWriteSetter(o,a,l,c){var u=s+e.Util._capitalize(a);o.prototype[u]=function(d){return l&&d!==void 0&&d!==null&&(d=l.call(this,d,a)),this._setAttr(a,d),c&&c.call(this),this}},addComponentsGetterSetter(o,a,l,c,u){var d=l.length,p=e.Util._capitalize,m=n+p(a),g=s+p(a),y,_;o.prototype[m]=function(){var O={};for(y=0;y<d;y++)_=l[y],O[_]=this.getAttr(a+p(_));return O};var x=(0,i.getComponentValidator)(l);o.prototype[g]=function(O){var S=this.attrs[a],w;c&&(O=c.call(this,O)),x&&x.call(this,O,a);for(w in O)O.hasOwnProperty(w)&&this._setAttr(a+p(w),O[w]);return O||l.forEach(C=>{this._setAttr(a+p(C),void 0)}),this._fireChangeEvent(a,S,O),u&&u.call(this),this},r.Factory.addOverloadedGetterSetter(o,a)},addOverloadedGetterSetter(o,a){var l=e.Util._capitalize(a),c=s+l,u=n+l;o.prototype[a]=function(){return arguments.length?(this[c](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(o,a,l,c){e.Util.error("Adding deprecated "+a);var u=n+e.Util._capitalize(a),d=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";o.prototype[u]=function(){e.Util.error(d);var p=this.attrs[a];return p===void 0?l:p},r.Factory.addSetter(o,a,c,function(){e.Util.error(d)}),r.Factory.addOverloadedGetterSetter(o,a)},backCompat(o,a){e.Util.each(a,function(l,c){var u=o.prototype[c],d=n+e.Util._capitalize(l),p=s+e.Util._capitalize(l);function m(){u.apply(this,arguments),e.Util.error('"'+l+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}o.prototype[l]=m,o.prototype[d]=m,o.prototype[p]=m})},afterSetFilter(){this._filterUpToDate=!1}}}(tR)),tR}var $u={},Uu={},GX;function Qte(){if(GX)return Uu;GX=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.HitContext=Uu.SceneContext=Uu.Context=void 0;const r=Wr(),e=qi();function i(O){var S=[],w=O.length,C=r.Util,M,P;for(M=0;M<w;M++)P=O[M],C._isNumber(P)?P=Math.round(P*1e3)/1e3:C._isString(P)||(P=P+""),S.push(P);return S}var n=",",s="(",o=")",a="([",l="])",c=";",u="()",d="=",p=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const g=100;class y{constructor(S){this.canvas=S,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(S){S.fillEnabled()&&this._fill(S)}_fill(S){}strokeShape(S){S.hasStroke()&&this._stroke(S)}_stroke(S){}fillStrokeShape(S){S.attrs.fillAfterStrokeEnabled?(this.strokeShape(S),this.fillShape(S)):(this.fillShape(S),this.strokeShape(S))}getTrace(S,w){var C=this.traceArr,M=C.length,P="",R,k,I,A;for(R=0;R<M;R++)k=C[R],I=k.method,I?(A=k.args,P+=I,S?P+=u:r.Util._isArray(A[0])?P+=a+A.join(n)+l:(w&&(A=A.map(D=>typeof D=="number"?Math.floor(D):D)),P+=s+A.join(n)+o)):(P+=k.property,S||(P+=d+k.val)),P+=c;return P}clearTrace(){this.traceArr=[]}_trace(S){var w=this.traceArr,C;w.push(S),C=w.length,C>=g&&w.shift()}reset(){var S=this.getCanvas().getPixelRatio();this.setTransform(1*S,0,0,1*S,0,0)}getCanvas(){return this.canvas}clear(S){var w=this.getCanvas();S?this.clearRect(S.x||0,S.y||0,S.width||0,S.height||0):this.clearRect(0,0,w.getWidth()/w.pixelRatio,w.getHeight()/w.pixelRatio)}_applyLineCap(S){const w=S.attrs.lineCap;w&&this.setAttr("lineCap",w)}_applyOpacity(S){var w=S.getAbsoluteOpacity();w!==1&&this.setAttr("globalAlpha",w)}_applyLineJoin(S){const w=S.attrs.lineJoin;w&&this.setAttr("lineJoin",w)}setAttr(S,w){this._context[S]=w}arc(S,w,C,M,P,R){this._context.arc(S,w,C,M,P,R)}arcTo(S,w,C,M,P){this._context.arcTo(S,w,C,M,P)}beginPath(){this._context.beginPath()}bezierCurveTo(S,w,C,M,P,R){this._context.bezierCurveTo(S,w,C,M,P,R)}clearRect(S,w,C,M){this._context.clearRect(S,w,C,M)}clip(...S){this._context.clip.apply(this._context,S)}closePath(){this._context.closePath()}createImageData(S,w){var C=arguments;if(C.length===2)return this._context.createImageData(S,w);if(C.length===1)return this._context.createImageData(S)}createLinearGradient(S,w,C,M){return this._context.createLinearGradient(S,w,C,M)}createPattern(S,w){return this._context.createPattern(S,w)}createRadialGradient(S,w,C,M,P,R){return this._context.createRadialGradient(S,w,C,M,P,R)}drawImage(S,w,C,M,P,R,k,I,A){var D=arguments,V=this._context;D.length===3?V.drawImage(S,w,C):D.length===5?V.drawImage(S,w,C,M,P):D.length===9&&V.drawImage(S,w,C,M,P,R,k,I,A)}ellipse(S,w,C,M,P,R,k,I){this._context.ellipse(S,w,C,M,P,R,k,I)}isPointInPath(S,w,C,M){return C?this._context.isPointInPath(C,S,w,M):this._context.isPointInPath(S,w,M)}fill(...S){this._context.fill.apply(this._context,S)}fillRect(S,w,C,M){this._context.fillRect(S,w,C,M)}strokeRect(S,w,C,M){this._context.strokeRect(S,w,C,M)}fillText(S,w,C,M){M?this._context.fillText(S,w,C,M):this._context.fillText(S,w,C)}measureText(S){return this._context.measureText(S)}getImageData(S,w,C,M){return this._context.getImageData(S,w,C,M)}lineTo(S,w){this._context.lineTo(S,w)}moveTo(S,w){this._context.moveTo(S,w)}rect(S,w,C,M){this._context.rect(S,w,C,M)}roundRect(S,w,C,M,P){this._context.roundRect(S,w,C,M,P)}putImageData(S,w,C){this._context.putImageData(S,w,C)}quadraticCurveTo(S,w,C,M){this._context.quadraticCurveTo(S,w,C,M)}restore(){this._context.restore()}rotate(S){this._context.rotate(S)}save(){this._context.save()}scale(S,w){this._context.scale(S,w)}setLineDash(S){this._context.setLineDash?this._context.setLineDash(S):"mozDash"in this._context?this._context.mozDash=S:"webkitLineDash"in this._context&&(this._context.webkitLineDash=S)}getLineDash(){return this._context.getLineDash()}setTransform(S,w,C,M,P,R){this._context.setTransform(S,w,C,M,P,R)}stroke(S){S?this._context.stroke(S):this._context.stroke()}strokeText(S,w,C,M){this._context.strokeText(S,w,C,M)}transform(S,w,C,M,P,R){this._context.transform(S,w,C,M,P,R)}translate(S,w){this._context.translate(S,w)}_enableTrace(){var S=this,w=p.length,C=this.setAttr,M,P,R=function(k){var I=S[k],A;S[k]=function(){return P=i(Array.prototype.slice.call(arguments,0)),A=I.apply(S,arguments),S._trace({method:k,args:P}),A}};for(M=0;M<w;M++)R(p[M]);S.setAttr=function(){C.apply(S,arguments);var k=arguments[0],I=arguments[1];(k==="shadowOffsetX"||k==="shadowOffsetY"||k==="shadowBlur")&&(I=I/this.canvas.getPixelRatio()),S._trace({property:k,val:I})}}_applyGlobalCompositeOperation(S){const w=S.attrs.globalCompositeOperation;var C=!w||w==="source-over";C||this.setAttr("globalCompositeOperation",w)}}Uu.Context=y,m.forEach(function(O){Object.defineProperty(y.prototype,O,{get(){return this._context[O]},set(S){this._context[O]=S}})});class _ extends y{constructor(S,{willReadFrequently:w=!1}={}){super(S),this._context=S._canvas.getContext("2d",{willReadFrequently:w})}_fillColor(S){var w=S.fill();this.setAttr("fillStyle",w),S._fillFunc(this)}_fillPattern(S){this.setAttr("fillStyle",S._getFillPattern()),S._fillFunc(this)}_fillLinearGradient(S){var w=S._getLinearGradient();w&&(this.setAttr("fillStyle",w),S._fillFunc(this))}_fillRadialGradient(S){const w=S._getRadialGradient();w&&(this.setAttr("fillStyle",w),S._fillFunc(this))}_fill(S){const w=S.fill(),C=S.getFillPriority();if(w&&C==="color"){this._fillColor(S);return}const M=S.getFillPatternImage();if(M&&C==="pattern"){this._fillPattern(S);return}const P=S.getFillLinearGradientColorStops();if(P&&C==="linear-gradient"){this._fillLinearGradient(S);return}const R=S.getFillRadialGradientColorStops();if(R&&C==="radial-gradient"){this._fillRadialGradient(S);return}w?this._fillColor(S):M?this._fillPattern(S):P?this._fillLinearGradient(S):R&&this._fillRadialGradient(S)}_strokeLinearGradient(S){const w=S.getStrokeLinearGradientStartPoint(),C=S.getStrokeLinearGradientEndPoint(),M=S.getStrokeLinearGradientColorStops(),P=this.createLinearGradient(w.x,w.y,C.x,C.y);if(M){for(var R=0;R<M.length;R+=2)P.addColorStop(M[R],M[R+1]);this.setAttr("strokeStyle",P)}}_stroke(S){var w=S.dash(),C=S.getStrokeScaleEnabled();if(S.hasStroke()){if(!C){this.save();var M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(S),w&&S.dashEnabled()&&(this.setLineDash(w),this.setAttr("lineDashOffset",S.dashOffset())),this.setAttr("lineWidth",S.strokeWidth()),S.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var P=S.getStrokeLinearGradientColorStops();P?this._strokeLinearGradient(S):this.setAttr("strokeStyle",S.stroke()),S._strokeFunc(this),C||this.restore()}}_applyShadow(S){var w,C,M,P=(w=S.getShadowRGBA())!==null&&w!==void 0?w:"black",R=(C=S.getShadowBlur())!==null&&C!==void 0?C:5,k=(M=S.getShadowOffset())!==null&&M!==void 0?M:{x:0,y:0},I=S.getAbsoluteScale(),A=this.canvas.getPixelRatio(),D=I.x*A,V=I.y*A;this.setAttr("shadowColor",P),this.setAttr("shadowBlur",R*Math.min(Math.abs(D),Math.abs(V))),this.setAttr("shadowOffsetX",k.x*D),this.setAttr("shadowOffsetY",k.y*V)}}Uu.SceneContext=_;class x extends y{constructor(S){super(S),this._context=S._canvas.getContext("2d",{willReadFrequently:!0})}_fill(S){this.save(),this.setAttr("fillStyle",S.colorKey),S._fillFuncHit(this),this.restore()}strokeShape(S){S.hasHitStroke()&&this._stroke(S)}_stroke(S){if(S.hasHitStroke()){const P=S.getStrokeScaleEnabled();if(!P){this.save();var w=this.getCanvas().getPixelRatio();this.setTransform(w,0,0,w,0,0)}this._applyLineCap(S);var C=S.hitStrokeWidth(),M=C==="auto"?S.strokeWidth():C;this.setAttr("lineWidth",M),this.setAttr("strokeStyle",S.colorKey),S._strokeFuncHit(this),P||this.restore()}}}return Uu.HitContext=x,Uu}var HX;function DP(){if(HX)return $u;HX=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.HitCanvas=$u.SceneCanvas=$u.Canvas=void 0;const r=Wr(),e=Qte(),i=qi(),n=Zi(),s=nn();var o;function a(){if(o)return o;var d=r.Util.createCanvasElement(),p=d.getContext("2d");return o=function(){var m=i.Konva._global.devicePixelRatio||1,g=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return m/g}(),r.Util.releaseCanvas(d),o}let l=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var m=p||{},g=m.pixelRatio||i.Konva.pixelRatio||a();this.pixelRatio=g,this._canvas=r.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){var m=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/m,this.getHeight()/m)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";var m=this.pixelRatio,g=this.getContext()._context;g.scale(m,m)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";var m=this.pixelRatio,g=this.getContext()._context;g.scale(m,m)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,m){this.setWidth(p||0),this.setHeight(m||0)}toDataURL(p,m){try{return this._canvas.toDataURL(p,m)}catch{try{return this._canvas.toDataURL()}catch(y){return r.Util.error("Unable to get data URL. "+y.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};$u.Canvas=l,n.Factory.addGetterSetter(l,"pixelRatio",void 0,(0,s.getNumberValidator)());class c extends l{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new e.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}$u.SceneCanvas=c;class u extends l{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(p.width,p.height)}}return $u.HitCanvas=u,$u}var iR={},QX;function FV(){return QX||(QX=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DD=void 0;const e=qi(),i=Wr();r.DD={get isDragging(){var n=!1;return r.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return r.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];r.DD._dragElements.forEach((o,a)=>{const{node:l}=o,c=l.getStage();c.setPointersPositions(n),o.pointerId===void 0&&(o.pointerId=i.Util._getFirstPointerId(n));const u=c._changedPointerPositions.find(m=>m.id===o.pointerId);if(u){if(o.dragStatus!=="dragging"){var d=l.dragDistance(),p=Math.max(Math.abs(u.x-o.startPointerPos.x),Math.abs(u.y-o.startPointerPos.y));if(p<d||(l.startDrag({evt:n}),!l.isDragging()))return}l._setDragPosition(n,o),s.push(l)}}),s.forEach(o=>{o.fire("dragmove",{type:"dragmove",target:o,evt:n},!0)})},_endDragBefore(n){const s=[];r.DD._dragElements.forEach(o=>{const{node:a}=o,l=a.getStage();if(n&&l.setPointersPositions(n),!l._changedPointerPositions.find(d=>d.id===o.pointerId))return;(o.dragStatus==="dragging"||o.dragStatus==="stopped")&&(r.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,o.dragStatus="stopped");const u=o.node.getLayer()||o.node instanceof e.Konva.Stage&&o.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(o=>{o.draw()})},_endDragAfter(n){r.DD._dragElements.forEach((s,o)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&r.DD._dragElements.delete(o)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",r.DD._endDragBefore,!0),window.addEventListener("touchend",r.DD._endDragBefore,!0),window.addEventListener("mousemove",r.DD._drag),window.addEventListener("touchmove",r.DD._drag),window.addEventListener("mouseup",r.DD._endDragAfter,!1),window.addEventListener("touchend",r.DD._endDragAfter,!1))}(iR)),iR}var jX;function Zr(){if(jX)return Qx;jX=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.Node=void 0;const r=Wr(),e=Zi(),i=DP(),n=qi(),s=FV(),o=nn();var a="absoluteOpacity",l="allEventListeners",c="absoluteTransform",u="absoluteScale",d="canvas",p="Change",m="children",g="konva",y="listening",_="mouseenter",x="mouseleave",O="set",S="Shape",w=" ",C="stage",M="transform",P="Stage",R="visible",k=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(w);let I=1;class A{constructor(B){this._id=I++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(B),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(B){(B===M||B===c)&&this._cache.get(B)?this._cache.get(B).dirty=!0:B?this._cache.delete(B):this._cache.clear()}_getCache(B,L){var F=this._cache.get(B),$=B===M||B===c,z=F===void 0||$&&F.dirty===!0;return z&&(F=L.call(this),this._cache.set(B,F)),F}_calculate(B,L,F){if(!this._attachedDepsListeners.get(B)){const $=L.map(z=>z+"Change.konva").join(w);this.on($,()=>{this._clearCache(B)}),this._attachedDepsListeners.set(B,!0)}return this._getCache(B,F)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(B){this._clearCache(B),B===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:B,filter:L,hit:F}=this._cache.get(d);r.Util.releaseCanvas(B,L,F),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(B){var L=B||{},F={};(L.x===void 0||L.y===void 0||L.width===void 0||L.height===void 0)&&(F=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var $=Math.ceil(L.width||F.width),z=Math.ceil(L.height||F.height),H=L.pixelRatio,K=L.x===void 0?Math.floor(F.x):L.x,J=L.y===void 0?Math.floor(F.y):L.y,ne=L.offset||0,be=L.drawBorder||!1,pe=L.hitCanvasPixelRatio||1;if(!$||!z){r.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ae=Math.abs(Math.round(F.x)-K)>.5?1:0,ye=Math.abs(Math.round(F.y)-J)>.5?1:0;$+=ne*2+ae,z+=ne*2+ye,K-=ne,J-=ne;var _e=new i.SceneCanvas({pixelRatio:H,width:$,height:z}),re=new i.SceneCanvas({pixelRatio:H,width:0,height:0,willReadFrequently:!0}),se=new i.HitCanvas({pixelRatio:pe,width:$,height:z}),Q=_e.getContext(),G=se.getContext();return se.isCache=!0,_e.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,L.imageSmoothingEnabled===!1&&(_e.getContext()._context.imageSmoothingEnabled=!1,re.getContext()._context.imageSmoothingEnabled=!1),Q.save(),G.save(),Q.translate(-K,-J),G.translate(-K,-J),this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this.drawScene(_e,this),this.drawHit(se,this),this._isUnderCache=!1,Q.restore(),G.restore(),be&&(Q.save(),Q.beginPath(),Q.rect(0,0,$,z),Q.closePath(),Q.setAttr("strokeStyle","red"),Q.setAttr("lineWidth",5),Q.stroke(),Q.restore()),this._cache.set(d,{scene:_e,filter:re,hit:se,x:K,y:J}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(B){throw new Error('abstract "getClientRect" method call')}_transformedRect(B,L){var F=[{x:B.x,y:B.y},{x:B.x+B.width,y:B.y},{x:B.x+B.width,y:B.y+B.height},{x:B.x,y:B.y+B.height}],$=1/0,z=1/0,H=-1/0,K=-1/0,J=this.getAbsoluteTransform(L);return F.forEach(function(ne){var be=J.point(ne);$===void 0&&($=H=be.x,z=K=be.y),$=Math.min($,be.x),z=Math.min(z,be.y),H=Math.max(H,be.x),K=Math.max(K,be.y)}),{x:$,y:z,width:H-$,height:K-z}}_drawCachedSceneCanvas(B){B.save(),B._applyOpacity(this),B._applyGlobalCompositeOperation(this);const L=this._getCanvasCache();B.translate(L.x,L.y);var F=this._getCachedSceneCanvas(),$=F.pixelRatio;B.drawImage(F._canvas,0,0,F.width/$,F.height/$),B.restore()}_drawCachedHitCanvas(B){var L=this._getCanvasCache(),F=L.hit;B.save(),B.translate(L.x,L.y),B.drawImage(F._canvas,0,0,F.width/F.pixelRatio,F.height/F.pixelRatio),B.restore()}_getCachedSceneCanvas(){var B=this.filters(),L=this._getCanvasCache(),F=L.scene,$=L.filter,z=$.getContext(),H,K,J,ne;if(B){if(!this._filterUpToDate){var be=F.pixelRatio;$.setSize(F.width/F.pixelRatio,F.height/F.pixelRatio);try{for(H=B.length,z.clear(),z.drawImage(F._canvas,0,0,F.getWidth()/be,F.getHeight()/be),K=z.getImageData(0,0,$.getWidth(),$.getHeight()),J=0;J<H;J++){if(ne=B[J],typeof ne!="function"){r.Util.error("Filter should be type of function, but got "+typeof ne+" instead. Please check correct filters");continue}ne.call(this,K),z.putImageData(K,0,0)}}catch(pe){r.Util.error("Unable to apply filter. "+pe.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return $}return F}on(B,L){if(this._cache&&this._cache.delete(l),arguments.length===3)return this._delegate.apply(this,arguments);var F=B.split(w),$=F.length,z,H,K,J,ne;for(z=0;z<$;z++)H=F[z],K=H.split("."),J=K[0],ne=K[1]||"",this.eventListeners[J]||(this.eventListeners[J]=[]),this.eventListeners[J].push({name:ne,handler:L});return this}off(B,L){var F=(B||"").split(w),$=F.length,z,H,K,J,ne,be;if(this._cache&&this._cache.delete(l),!B)for(H in this.eventListeners)this._off(H);for(z=0;z<$;z++)if(K=F[z],J=K.split("."),ne=J[0],be=J[1],ne)this.eventListeners[ne]&&this._off(ne,be,L);else for(H in this.eventListeners)this._off(H,be,L);return this}dispatchEvent(B){var L={target:this,type:B.type,evt:B};return this.fire(B.type,L),this}addEventListener(B,L){return this.on(B,function(F){L.call(this,F.evt)}),this}removeEventListener(B){return this.off(B),this}_delegate(B,L,F){var $=this;this.on(B,function(z){for(var H=z.target.findAncestors(L,!0,$),K=0;K<H.length;K++)z=r.Util.cloneObject(z),z.currentTarget=H[K],F.call(H[K],z)})}remove(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(C),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(y)}_remove(){this._clearCaches();var B=this.getParent();B&&B.children&&(B.children.splice(this.index,1),B._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(B){var L="get"+r.Util._capitalize(B);return r.Util._isFunction(this[L])?this[L]():this.attrs[B]}getAncestors(){for(var B=this.getParent(),L=[];B;)L.push(B),B=B.getParent();return L}getAttrs(){return this.attrs||{}}setAttrs(B){return this._batchTransformChanges(()=>{var L,F;if(!B)return this;for(L in B)L!==m&&(F=O+r.Util._capitalize(L),r.Util._isFunction(this[F])?this[F](B[L]):this._setAttr(L,B[L]))}),this}isListening(){return this._getCache(y,this._isListening)}_isListening(B){if(!this.listening())return!1;const F=this.getParent();return F&&F!==B&&this!==B?F._isListening(B):!0}isVisible(){return this._getCache(R,this._isVisible)}_isVisible(B){if(!this.visible())return!1;const F=this.getParent();return F&&F!==B&&this!==B?F._isVisible(B):!0}shouldDrawHit(B,L=!1){if(B)return this._isVisible(B)&&this._isListening(B);var F=this.getLayer(),$=!1;s.DD._dragElements.forEach(H=>{H.dragStatus==="dragging"&&(H.node.nodeType==="Stage"||H.node.getLayer()===F)&&($=!0)});var z=!L&&!n.Konva.hitOnDragEnabled&&($||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!z}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var B=this.getDepth(),L=this,F=0,$,z,H,K;function J(be){for($=[],z=be.length,H=0;H<z;H++)K=be[H],F++,K.nodeType!==S&&($=$.concat(K.getChildren().slice())),K._id===L._id&&(H=z);$.length>0&&$[0].getDepth()<=B&&J($)}const ne=this.getStage();return L.nodeType!==P&&ne&&J(ne.getChildren()),F}getDepth(){for(var B=0,L=this.parent;L;)B++,L=L.parent;return B}_batchTransformChanges(B){this._batchingTransformChange=!0,B(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(M),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(B){return this._batchTransformChanges(()=>{this.x(B.x),this.y(B.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const B=this.getStage();if(!B)return null;var L=B.getPointerPosition();if(!L)return null;var F=this.getAbsoluteTransform().copy();return F.invert(),F.point(L)}getAbsolutePosition(B){let L=!1,F=this.parent;for(;F;){if(F.isCached()){L=!0;break}F=F.parent}L&&!B&&(B=!0);var $=this.getAbsoluteTransform(B).getMatrix(),z=new r.Transform,H=this.offset();return z.m=$.slice(),z.translate(H.x,H.y),z.getTranslation()}setAbsolutePosition(B){const{x:L,y:F,...$}=this._clearTransform();this.attrs.x=L,this.attrs.y=F,this._clearCache(M);var z=this._getAbsoluteTransform().copy();return z.invert(),z.translate(B.x,B.y),B={x:this.attrs.x+z.getTranslation().x,y:this.attrs.y+z.getTranslation().y},this._setTransform($),this.setPosition({x:B.x,y:B.y}),this._clearCache(M),this._clearSelfAndDescendantCache(c),this}_setTransform(B){var L;for(L in B)this.attrs[L]=B[L]}_clearTransform(){var B={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,B}move(B){var L=B.x,F=B.y,$=this.x(),z=this.y();return L!==void 0&&($+=L),F!==void 0&&(z+=F),this.setPosition({x:$,y:z}),this}_eachAncestorReverse(B,L){var F=[],$=this.getParent(),z,H;if(!(L&&L._id===this._id)){for(F.unshift(this);$&&(!L||$._id!==L._id);)F.unshift($),$=$.parent;for(z=F.length,H=0;H<z;H++)B(F[H])}}rotate(B){return this.rotation(this.rotation()+B),this}moveToTop(){if(!this.parent)return r.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var B=this.index,L=this.parent.getChildren().length;return B<L-1?(this.parent.children.splice(B,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return r.Util.warn("Node has no parent. moveUp function is ignored."),!1;var B=this.index,L=this.parent.getChildren().length;return B<L-1?(this.parent.children.splice(B,1),this.parent.children.splice(B+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return r.Util.warn("Node has no parent. moveDown function is ignored."),!1;var B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.splice(B-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return r.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(B){if(!this.parent)return r.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(B<0||B>=this.parent.children.length)&&r.Util.warn("Unexpected value "+B+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var L=this.index;return this.parent.children.splice(L,1),this.parent.children.splice(B,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var B=this.opacity(),L=this.getParent();return L&&!L._isUnderCache&&(B*=L.getAbsoluteOpacity()),B}moveTo(B){return this.getParent()!==B&&(this._remove(),B.add(this)),this}toObject(){var B=this.getAttrs(),L,F,$,z,H;const K={attrs:{},className:this.getClassName()};for(L in B)F=B[L],H=r.Util.isObject(F)&&!r.Util._isPlainObject(F)&&!r.Util._isArray(F),!H&&($=typeof this[L]=="function"&&this[L],delete B[L],z=$?$.call(this):null,B[L]=F,z!==F&&(K.attrs[L]=F));return r.Util._prepareToStringify(K)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(B,L,F){var $=[];L&&this._isMatch(B)&&$.push(this);for(var z=this.parent;z;){if(z===F)return $;z._isMatch(B)&&$.push(z),z=z.parent}return $}isAncestorOf(B){return!1}findAncestor(B,L,F){return this.findAncestors(B,L,F)[0]}_isMatch(B){if(!B)return!1;if(typeof B=="function")return B(this);var L=B.replace(/ /g,"").split(","),F=L.length,$,z;for($=0;$<F;$++)if(z=L[$],r.Util.isValidSelector(z)||(r.Util.warn('Selector "'+z+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),r.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),r.Util.warn("Konva is awesome, right?")),z.charAt(0)==="#"){if(this.id()===z.slice(1))return!0}else if(z.charAt(0)==="."){if(this.hasName(z.slice(1)))return!0}else if(this.className===z||this.nodeType===z)return!0;return!1}getLayer(){var B=this.getParent();return B?B.getLayer():null}getStage(){return this._getCache(C,this._getStage)}_getStage(){var B=this.getParent();return B?B.getStage():null}fire(B,L={},F){return L.target=L.target||this,F?this._fireAndBubble(B,L):this._fire(B,L),this}getAbsoluteTransform(B){return B?this._getAbsoluteTransform(B):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(B){var L;if(B)return L=new r.Transform,this._eachAncestorReverse(function($){var z=$.transformsEnabled();z==="all"?L.multiply($.getTransform()):z==="position"&&L.translate($.x()-$.offsetX(),$.y()-$.offsetY())},B),L;L=this._cache.get(c)||new r.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(L):L.reset();var F=this.transformsEnabled();if(F==="all")L.multiply(this.getTransform());else if(F==="position"){const $=this.attrs.x||0,z=this.attrs.y||0,H=this.attrs.offsetX||0,K=this.attrs.offsetY||0;L.translate($-H,z-K)}return L.dirty=!1,L}getAbsoluteScale(B){for(var L=this;L;)L._isUnderCache&&(B=L),L=L.getParent();const $=this.getAbsoluteTransform(B).decompose();return{x:$.scaleX,y:$.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(M,this._getTransform)}_getTransform(){var B,L,F=this._cache.get(M)||new r.Transform;F.reset();var $=this.x(),z=this.y(),H=n.Konva.getAngle(this.rotation()),K=(B=this.attrs.scaleX)!==null&&B!==void 0?B:1,J=(L=this.attrs.scaleY)!==null&&L!==void 0?L:1,ne=this.attrs.skewX||0,be=this.attrs.skewY||0,pe=this.attrs.offsetX||0,ae=this.attrs.offsetY||0;return($!==0||z!==0)&&F.translate($,z),H!==0&&F.rotate(H),(ne!==0||be!==0)&&F.skew(ne,be),(K!==1||J!==1)&&F.scale(K,J),(pe!==0||ae!==0)&&F.translate(-1*pe,-1*ae),F.dirty=!1,F}clone(B){var L=r.Util.cloneObject(this.attrs),F,$,z,H,K;for(F in B)L[F]=B[F];var J=new this.constructor(L);for(F in this.eventListeners)for($=this.eventListeners[F],z=$.length,H=0;H<z;H++)K=$[H],K.name.indexOf(g)<0&&(J.eventListeners[F]||(J.eventListeners[F]=[]),J.eventListeners[F].push(K));return J}_toKonvaCanvas(B){B=B||{};var L=this.getClientRect(),F=this.getStage(),$=B.x!==void 0?B.x:Math.floor(L.x),z=B.y!==void 0?B.y:Math.floor(L.y),H=B.pixelRatio||1,K=new i.SceneCanvas({width:B.width||Math.ceil(L.width)||(F?F.width():0),height:B.height||Math.ceil(L.height)||(F?F.height():0),pixelRatio:H}),J=K.getContext();const ne=new i.SceneCanvas({width:K.width/K.pixelRatio+Math.abs($),height:K.height/K.pixelRatio+Math.abs(z),pixelRatio:K.pixelRatio});return B.imageSmoothingEnabled===!1&&(J._context.imageSmoothingEnabled=!1),J.save(),($||z)&&J.translate(-1*$,-1*z),this.drawScene(K,void 0,ne),J.restore(),K}toCanvas(B){return this._toKonvaCanvas(B)._canvas}toDataURL(B){B=B||{};var L=B.mimeType||null,F=B.quality||null,$=this._toKonvaCanvas(B).toDataURL(L,F);return B.callback&&B.callback($),$}toImage(B){return new Promise((L,F)=>{try{const $=B==null?void 0:B.callback;$&&delete B.callback,r.Util._urlToImage(this.toDataURL(B),function(z){L(z),$==null||$(z)})}catch($){F($)}})}toBlob(B){return new Promise((L,F)=>{try{const $=B==null?void 0:B.callback;$&&delete B.callback,this.toCanvas(B).toBlob(z=>{L(z),$==null||$(z)},B==null?void 0:B.mimeType,B==null?void 0:B.quality)}catch($){F($)}})}setSize(B){return this.width(B.width),this.height(B.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(B,L,F){var $=this.eventListeners[B],z,H,K;for(z=0;z<$.length;z++)if(H=$[z].name,K=$[z].handler,(H!=="konva"||L==="konva")&&(!L||H===L)&&(!F||F===K)){if($.splice(z,1),$.length===0){delete this.eventListeners[B];break}z--}}_fireChangeEvent(B,L,F){this._fire(B+p,{oldVal:L,newVal:F})}addName(B){if(!this.hasName(B)){var L=this.name(),F=L?L+" "+B:B;this.name(F)}return this}hasName(B){if(!B)return!1;const L=this.name();if(!L)return!1;var F=(L||"").split(/\s/g);return F.indexOf(B)!==-1}removeName(B){var L=(this.name()||"").split(/\s/g),F=L.indexOf(B);return F!==-1&&(L.splice(F,1),this.name(L.join(" "))),this}setAttr(B,L){var F=this[O+r.Util._capitalize(B)];return r.Util._isFunction(F)?F.call(this,L):this._setAttr(B,L),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const B=this.getLayer()||this.getStage();B==null||B.batchDraw()}}_setAttr(B,L){var F=this.attrs[B];F===L&&!r.Util.isObject(L)||(L==null?delete this.attrs[B]:this.attrs[B]=L,this._shouldFireChangeEvents&&this._fireChangeEvent(B,F,L),this._requestDraw())}_setComponentAttr(B,L,F){var $;F!==void 0&&($=this.attrs[B],$||(this.attrs[B]=this.getAttr(B)),this.attrs[B][L]=F,this._fireChangeEvent(B,$,F))}_fireAndBubble(B,L,F){L&&this.nodeType===S&&(L.target=this);var $=(B===_||B===x)&&(F&&(this===F||this.isAncestorOf&&this.isAncestorOf(F))||this.nodeType==="Stage"&&!F);if(!$){this._fire(B,L);var z=(B===_||B===x)&&F&&F.isAncestorOf&&F.isAncestorOf(this)&&!F.isAncestorOf(this.parent);(L&&!L.cancelBubble||!L)&&this.parent&&this.parent.isListening()&&!z&&(F&&F.parent?this._fireAndBubble.call(this.parent,B,L,F):this._fireAndBubble.call(this.parent,B,L))}}_getProtoListeners(B){var L,F,$;const z=(L=this._cache.get(l))!==null&&L!==void 0?L:{};let H=z==null?void 0:z[B];if(H===void 0){H=[];let K=Object.getPrototypeOf(this);for(;K;){const J=($=(F=K.eventListeners)===null||F===void 0?void 0:F[B])!==null&&$!==void 0?$:[];H.push(...J),K=Object.getPrototypeOf(K)}z[B]=H,this._cache.set(l,z)}return H}_fire(B,L){L=L||{},L.currentTarget=this,L.type=B;const F=this._getProtoListeners(B);if(F)for(var $=0;$<F.length;$++)F[$].handler.call(this,L);const z=this.eventListeners[B];if(z)for(var $=0;$<z.length;$++)z[$].handler.call(this,L)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(B){var L=B?B.pointerId:void 0,F=this.getStage(),$=this.getAbsolutePosition();if(F){var z=F._getPointerById(L)||F._changedPointerPositions[0]||$;s.DD._dragElements.set(this._id,{node:this,startPointerPos:z,offset:{x:z.x-$.x,y:z.y-$.y},dragStatus:"ready",pointerId:L})}}startDrag(B,L=!0){s.DD._dragElements.has(this._id)||this._createDragElement(B);const F=s.DD._dragElements.get(this._id);F.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:B&&B.evt},L)}_setDragPosition(B,L){const F=this.getStage()._getPointerById(L.pointerId);if(F){var $={x:F.x-L.offset.x,y:F.y-L.offset.y},z=this.dragBoundFunc();if(z!==void 0){const H=z.call(this,$,B);H?$=H:r.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==$.x||this._lastPos.y!==$.y)&&(this.setAbsolutePosition($),this._requestDraw()),this._lastPos=$}}stopDrag(B){const L=s.DD._dragElements.get(this._id);L&&(L.dragStatus="stopped"),s.DD._endDragBefore(B),s.DD._endDragAfter(B)}setDraggable(B){this._setAttr("draggable",B),this._dragChange()}isDragging(){const B=s.DD._dragElements.get(this._id);return B?B.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(B){var L=B.evt.button!==void 0,F=!L||n.Konva.dragButtons.indexOf(B.evt.button)>=0;if(F&&!this.isDragging()){var $=!1;s.DD._dragElements.forEach(z=>{this.isAncestorOf(z.node)&&($=!0)}),$||this._createDragElement(B)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var B=this.getStage();if(!B)return;const L=s.DD._dragElements.get(this._id),F=L&&L.dragStatus==="dragging",$=L&&L.dragStatus==="ready";F?this.stopDrag():$&&s.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(B={x:0,y:0}){const L=this.getStage();if(!L)return!1;const F={x:-B.x,y:-B.y,width:L.width()+2*B.x,height:L.height()+2*B.y};return r.Util.haveIntersection(F,this.getClientRect())}static create(B,L){return r.Util._isString(B)&&(B=JSON.parse(B)),this._createNode(B,L)}static _createNode(B,L){var F=A.prototype.getClassName.call(B),$=B.children,z,H,K;L&&(B.attrs.container=L),n.Konva[F]||(r.Util.warn('Can not find a node with class name "'+F+'". Fallback to "Shape".'),F="Shape");const J=n.Konva[F];if(z=new J(B.attrs),$)for(H=$.length,K=0;K<H;K++)z.add(A._createNode($[K]));return z}}Qx.Node=A,A.prototype.nodeType="Node",A.prototype._attrsAffectingSize=[],A.prototype.eventListeners={},A.prototype.on.call(A.prototype,k,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(M),this._clearSelfAndDescendantCache(c)}),A.prototype.on.call(A.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(R)}),A.prototype.on.call(A.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(y)}),A.prototype.on.call(A.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const D=e.Factory.addGetterSetter;return D(A,"zIndex"),D(A,"absolutePosition"),D(A,"position"),D(A,"x",0,(0,o.getNumberValidator)()),D(A,"y",0,(0,o.getNumberValidator)()),D(A,"globalCompositeOperation","source-over",(0,o.getStringValidator)()),D(A,"opacity",1,(0,o.getNumberValidator)()),D(A,"name","",(0,o.getStringValidator)()),D(A,"id","",(0,o.getStringValidator)()),D(A,"rotation",0,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(A,"scale",["x","y"]),D(A,"scaleX",1,(0,o.getNumberValidator)()),D(A,"scaleY",1,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(A,"skew",["x","y"]),D(A,"skewX",0,(0,o.getNumberValidator)()),D(A,"skewY",0,(0,o.getNumberValidator)()),e.Factory.addComponentsGetterSetter(A,"offset",["x","y"]),D(A,"offsetX",0,(0,o.getNumberValidator)()),D(A,"offsetY",0,(0,o.getNumberValidator)()),D(A,"dragDistance",null,(0,o.getNumberValidator)()),D(A,"width",0,(0,o.getNumberValidator)()),D(A,"height",0,(0,o.getNumberValidator)()),D(A,"listening",!0,(0,o.getBooleanValidator)()),D(A,"preventDefault",!0,(0,o.getBooleanValidator)()),D(A,"filters",null,function(V){return this._filterUpToDate=!1,V}),D(A,"visible",!0,(0,o.getBooleanValidator)()),D(A,"transformsEnabled","all",(0,o.getStringValidator)()),D(A,"size"),D(A,"dragBoundFunc"),D(A,"draggable",!1,(0,o.getBooleanValidator)()),e.Factory.backCompat(A,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Qx}var jx={},YX;function LP(){if(YX)return jx;YX=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.Container=void 0;const r=Zi(),e=Zr(),i=nn();class n extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(o){if(!o)return this.children||[];const a=this.children||[];var l=[];return a.forEach(function(c){o(c)&&l.push(c)}),l}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.destroy()}),this.children=[],this._requestDraw(),this}add(...o){if(o.length===0)return this;if(o.length>1){for(var a=0;a<o.length;a++)this.add(o[a]);return this}const l=o[0];return l.getParent()?(l.moveTo(this),this):(this._validateAdd(l),l.index=this.getChildren().length,l.parent=this,l._clearCaches(),this.getChildren().push(l),this._fire("add",{child:l}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(o){return this._generalFind(o,!1)}findOne(o){var a=this._generalFind(o,!0);return a.length>0?a[0]:void 0}_generalFind(o,a){var l=[];return this._descendants(c=>{const u=c._isMatch(o);return u&&l.push(c),!!(u&&a)}),l}_descendants(o){let a=!1;const l=this.getChildren();for(const c of l){if(a=o(c),a)return!0;if(c.hasChildren()&&(a=c._descendants(o),a))return!0}return!1}toObject(){var o=e.Node.prototype.toObject.call(this);return o.children=[],this.getChildren().forEach(a=>{o.children.push(a.toObject())}),o}isAncestorOf(o){for(var a=o.getParent();a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(o){var a=e.Node.prototype.clone.call(this,o);return this.getChildren().forEach(function(l){a.add(l.clone())}),a}getAllIntersections(o){var a=[];return this.find("Shape").forEach(l=>{l.isVisible()&&l.intersects(o)&&a.push(l)}),a}_clearSelfAndDescendantCache(o){var a;super._clearSelfAndDescendantCache(o),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(l){l._clearSelfAndDescendantCache(o)}))}_setChildrenIndices(){var o;(o=this.children)===null||o===void 0||o.forEach(function(a,l){a.index=l}),this._requestDraw()}drawScene(o,a,l){var c=this.getLayer(),u=o||c&&c.getCanvas(),d=u&&u.getContext(),p=this._getCanvasCache(),m=p&&p.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(m){d.save();var y=this.getAbsoluteTransform(a).getMatrix();d.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,a,l);return this}drawHit(o,a){if(!this.shouldDrawHit(a))return this;var l=this.getLayer(),c=o||l&&l.hitCanvas,u=c&&c.getContext(),d=this._getCanvasCache(),p=d&&d.hit;if(p){u.save();var m=this.getAbsoluteTransform(a).getMatrix();u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",c,a);return this}_drawChildren(o,a,l,c){var u,d=a&&a.getContext(),p=this.clipWidth(),m=this.clipHeight(),g=this.clipFunc(),y=typeof p=="number"&&typeof m=="number"||g;const _=l===this;if(y){d.save();var x=this.getAbsoluteTransform(l),O=x.getMatrix();d.transform(O[0],O[1],O[2],O[3],O[4],O[5]),d.beginPath();let M;if(g)M=g.call(this,d,this);else{var S=this.clipX(),w=this.clipY();d.rect(S||0,w||0,p,m)}d.clip.apply(d,M),O=x.copy().invert().getMatrix(),d.transform(O[0],O[1],O[2],O[3],O[4],O[5])}var C=!_&&this.globalCompositeOperation()!=="source-over"&&o==="drawScene";C&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(M){M[o](a,l,c)}),C&&d.restore(),y&&d.restore()}getClientRect(o={}){var a,l=o.skipTransform,c=o.relativeTo,u,d,p,m,g={x:1/0,y:1/0,width:0,height:0},y=this;(a=this.children)===null||a===void 0||a.forEach(function(w){if(w.visible()){var C=w.getClientRect({relativeTo:y,skipShadow:o.skipShadow,skipStroke:o.skipStroke});C.width===0&&C.height===0||(u===void 0?(u=C.x,d=C.y,p=C.x+C.width,m=C.y+C.height):(u=Math.min(u,C.x),d=Math.min(d,C.y),p=Math.max(p,C.x+C.width),m=Math.max(m,C.y+C.height)))}});for(var _=this.find("Shape"),x=!1,O=0;O<_.length;O++){var S=_[O];if(S._isVisible(this)){x=!0;break}}return x&&u!==void 0?g={x:u,y:d,width:p-u,height:m-d}:g={x:0,y:0,width:0,height:0},l?g:this._transformedRect(g,c)}}return jx.Container=n,r.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),r.Factory.addGetterSetter(n,"clipX",void 0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(n,"clipY",void 0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(n,"clipWidth",void 0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(n,"clipHeight",void 0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(n,"clipFunc"),jx}var nR={},ja={},qX;function jte(){if(qX)return ja;qX=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.releaseCapture=ja.setPointerCapture=ja.hasPointerCapture=ja.createEvent=ja.getCapturedShape=void 0;const r=qi(),e=new Map,i=r.Konva._global.PointerEvent!==void 0;function n(c){return e.get(c)}ja.getCapturedShape=n;function s(c){return{evt:c,pointerId:c.pointerId}}ja.createEvent=s;function o(c,u){return e.get(c)===u}ja.hasPointerCapture=o;function a(c,u){l(c),u.getStage()&&(e.set(c,u),i&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}ja.setPointerCapture=a;function l(c,u){const d=e.get(c);if(!d)return;const p=d.getStage();p&&p.content,e.delete(c),i&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return ja.releaseCapture=l,ja}var ZX;function hNe(){return ZX||(ZX=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Stage=r.stages=void 0;const e=Wr(),i=Zi(),n=LP(),s=qi(),o=DP(),a=FV(),l=qi(),c=jte();var u="Stage",d="string",p="px",m="mouseout",g="mouseleave",y="mouseover",_="mouseenter",x="mousemove",O="mousedown",S="mouseup",w="pointermove",C="pointerdown",M="pointerup",P="pointercancel",R="lostpointercapture",k="pointerout",I="pointerleave",A="pointerover",D="pointerenter",V="contextmenu",B="touchstart",L="touchend",F="touchmove",$="touchcancel",z="wheel",H=5,K=[[_,"_pointerenter"],[O,"_pointerdown"],[x,"_pointermove"],[S,"_pointerup"],[g,"_pointerleave"],[B,"_pointerdown"],[F,"_pointermove"],[L,"_pointerup"],[$,"_pointercancel"],[y,"_pointerover"],[z,"_wheel"],[V,"_contextmenu"],[C,"_pointerdown"],[w,"_pointermove"],[M,"_pointerup"],[P,"_pointercancel"],[R,"_lostpointercapture"]];const J={mouse:{[k]:m,[I]:g,[A]:y,[D]:_,[w]:x,[C]:O,[M]:S,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[I]:"touchleave",[A]:"touchover",[D]:"touchenter",[w]:F,[C]:B,[M]:L,[P]:$,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[I]:I,[A]:A,[D]:D,[w]:w,[C]:C,[M]:M,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ne=_e=>_e.indexOf("pointer")>=0?"pointer":_e.indexOf("touch")>=0?"touch":"mouse",be=_e=>{const re=ne(_e);if(re==="pointer")return s.Konva.pointerEventsEnabled&&J.pointer;if(re==="touch")return J.touch;if(re==="mouse")return J.mouse};function pe(_e={}){return(_e.clipFunc||_e.clipWidth||_e.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),_e}const ae="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";r.stages=[];class ye extends n.Container{constructor(re){super(pe(re)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),r.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{pe(this.attrs)}),this._checkVisibility()}_validateAdd(re){const se=re.getType()==="Layer",Q=re.getType()==="FastLayer";se||Q||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const re=this.visible()?"":"none";this.content.style.display=re}setContainer(re){if(typeof re===d){if(re.charAt(0)==="."){var se=re.slice(1);re=document.getElementsByClassName(se)[0]}else{var Q;re.charAt(0)!=="#"?Q=re:Q=re.slice(1),re=document.getElementById(Q)}if(!re)throw"Can not find container in document with id "+Q}return this._setAttr("container",re),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),re.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var re=this.children,se=re.length,Q;for(Q=0;Q<se;Q++)re[Q].clear();return this}clone(re){return re||(re={}),re.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,re)}destroy(){super.destroy();var re=this.content;re&&e.Util._isInDocument(re)&&this.container().removeChild(re);var se=r.stages.indexOf(this);return se>-1&&r.stages.splice(se,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const re=this._pointerPositions[0]||this._changedPointerPositions[0];return re?{x:re.x,y:re.y}:(e.Util.warn(ae),null)}_getPointerById(re){return this._pointerPositions.find(se=>se.id===re)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(re){re=re||{},re.x=re.x||0,re.y=re.y||0,re.width=re.width||this.width(),re.height=re.height||this.height();var se=new o.SceneCanvas({width:re.width,height:re.height,pixelRatio:re.pixelRatio||1}),Q=se.getContext()._context,G=this.children;return(re.x||re.y)&&Q.translate(-1*re.x,-1*re.y),G.forEach(function(ie){if(ie.isVisible()){var he=ie._toKonvaCanvas(re);Q.drawImage(he._canvas,re.x,re.y,he.getWidth()/he.getPixelRatio(),he.getHeight()/he.getPixelRatio())}}),se}getIntersection(re){if(!re)return null;var se=this.children,Q=se.length,G=Q-1,ie;for(ie=G;ie>=0;ie--){const he=se[ie].getIntersection(re);if(he)return he}return null}_resizeDOM(){var re=this.width(),se=this.height();this.content&&(this.content.style.width=re+p,this.content.style.height=se+p),this.bufferCanvas.setSize(re,se),this.bufferHitCanvas.setSize(re,se),this.children.forEach(Q=>{Q.setSize({width:re,height:se}),Q.draw()})}add(re,...se){if(arguments.length>1){for(var Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}super.add(re);var G=this.children.length;return G>H&&e.Util.warn("The stage has "+G+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),re.setSize({width:this.width(),height:this.height()}),re.draw(),s.Konva.isBrowser&&this.content.appendChild(re.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(re){return c.hasPointerCapture(re,this)}setPointerCapture(re){c.setPointerCapture(re,this)}releaseCapture(re){c.releaseCapture(re,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&K.forEach(([re,se])=>{this.content.addEventListener(re,Q=>{this[se](Q)},{passive:!1})})}_pointerenter(re){this.setPointersPositions(re);const se=be(re.type);se&&this._fire(se.pointerenter,{evt:re,target:this,currentTarget:this})}_pointerover(re){this.setPointersPositions(re);const se=be(re.type);se&&this._fire(se.pointerover,{evt:re,target:this,currentTarget:this})}_getTargetShape(re){let se=this[re+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(re){const se=be(re.type),Q=ne(re.type);if(se){this.setPointersPositions(re);var G=this._getTargetShape(Q),ie=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;G&&ie?(G._fireAndBubble(se.pointerout,{evt:re}),G._fireAndBubble(se.pointerleave,{evt:re}),this._fire(se.pointerleave,{evt:re,target:this,currentTarget:this}),this[Q+"targetShape"]=null):ie&&(this._fire(se.pointerleave,{evt:re,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:re,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(re){const se=be(re.type),Q=ne(re.type);if(se){this.setPointersPositions(re);var G=!1;this._changedPointerPositions.forEach(ie=>{var he=this.getIntersection(ie);if(a.DD.justDragged=!1,s.Konva["_"+Q+"ListenClick"]=!0,!he||!he.isListening()){this[Q+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&he.setPointerCapture(ie.id),this[Q+"ClickStartShape"]=he,he._fireAndBubble(se.pointerdown,{evt:re,pointerId:ie.id}),G=!0;const j=re.type.indexOf("touch")>=0;he.preventDefault()&&re.cancelable&&j&&re.preventDefault()}),G||this._fire(se.pointerdown,{evt:re,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(re){const se=be(re.type),Q=ne(re.type);if(!se)return;s.Konva.isDragging()&&a.DD.node.preventDefault()&&re.cancelable&&re.preventDefault(),this.setPointersPositions(re);var G=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;if(!G)return;var ie={};let he=!1;var j=this._getTargetShape(Q);this._changedPointerPositions.forEach(ee=>{const de=c.getCapturedShape(ee.id)||this.getIntersection(ee),ve=ee.id,Ce={evt:re,pointerId:ve};var Ie=j!==de;if(Ie&&j&&(j._fireAndBubble(se.pointerout,{...Ce},de),j._fireAndBubble(se.pointerleave,{...Ce},de)),de){if(ie[de._id])return;ie[de._id]=!0}de&&de.isListening()?(he=!0,Ie&&(de._fireAndBubble(se.pointerover,{...Ce},j),de._fireAndBubble(se.pointerenter,{...Ce},j),this[Q+"targetShape"]=de),de._fireAndBubble(se.pointermove,{...Ce})):j&&(this._fire(se.pointerover,{evt:re,target:this,currentTarget:this,pointerId:ve}),this[Q+"targetShape"]=null)}),he||this._fire(se.pointermove,{evt:re,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(re){const se=be(re.type),Q=ne(re.type);if(!se)return;this.setPointersPositions(re);const G=this[Q+"ClickStartShape"],ie=this[Q+"ClickEndShape"];var he={};let j=!1;this._changedPointerPositions.forEach(ee=>{const de=c.getCapturedShape(ee.id)||this.getIntersection(ee);if(de){if(de.releaseCapture(ee.id),he[de._id])return;he[de._id]=!0}const ve=ee.id,Ce={evt:re,pointerId:ve};let Ie=!1;s.Konva["_"+Q+"InDblClickWindow"]?(Ie=!0,clearTimeout(this[Q+"DblTimeout"])):a.DD.justDragged||(s.Konva["_"+Q+"InDblClickWindow"]=!0,clearTimeout(this[Q+"DblTimeout"])),this[Q+"DblTimeout"]=setTimeout(function(){s.Konva["_"+Q+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),de&&de.isListening()?(j=!0,this[Q+"ClickEndShape"]=de,de._fireAndBubble(se.pointerup,{...Ce}),s.Konva["_"+Q+"ListenClick"]&&G&&G===de&&(de._fireAndBubble(se.pointerclick,{...Ce}),Ie&&ie&&ie===de&&de._fireAndBubble(se.pointerdblclick,{...Ce}))):(this[Q+"ClickEndShape"]=null,s.Konva["_"+Q+"ListenClick"]&&this._fire(se.pointerclick,{evt:re,target:this,currentTarget:this,pointerId:ve}),Ie&&this._fire(se.pointerdblclick,{evt:re,target:this,currentTarget:this,pointerId:ve}))}),j||this._fire(se.pointerup,{evt:re,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+Q+"ListenClick"]=!1,re.cancelable&&Q!=="touch"&&re.preventDefault()}_contextmenu(re){this.setPointersPositions(re);var se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(V,{evt:re}):this._fire(V,{evt:re,target:this,currentTarget:this})}_wheel(re){this.setPointersPositions(re);var se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(z,{evt:re}):this._fire(z,{evt:re,target:this,currentTarget:this})}_pointercancel(re){this.setPointersPositions(re);const se=c.getCapturedShape(re.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(M,c.createEvent(re)),c.releaseCapture(re.pointerId)}_lostpointercapture(re){c.releaseCapture(re.pointerId)}setPointersPositions(re){var se=this._getContentPosition(),Q=null,G=null;re=re||window.event,re.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(re.touches,ie=>{this._pointerPositions.push({id:ie.identifier,x:(ie.clientX-se.left)/se.scaleX,y:(ie.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(re.changedTouches||re.touches,ie=>{this._changedPointerPositions.push({id:ie.identifier,x:(ie.clientX-se.left)/se.scaleX,y:(ie.clientY-se.top)/se.scaleY})})):(Q=(re.clientX-se.left)/se.scaleX,G=(re.clientY-se.top)/se.scaleY,this.pointerPos={x:Q,y:G},this._pointerPositions=[{x:Q,y:G,id:e.Util._getFirstPointerId(re)}],this._changedPointerPositions=[{x:Q,y:G,id:e.Util._getFirstPointerId(re)}])}_setPointerPosition(re){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(re)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var re=this.content.getBoundingClientRect();return{top:re.top,left:re.left,scaleX:re.width/this.content.clientWidth||1,scaleY:re.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!s.Konva.isBrowser){var re=this.container();if(!re)throw"Stage has no container. A container is required.";re.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),re.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(re){re.batchDraw()}),this}}r.Stage=ye,ye.prototype.nodeType=u,(0,l._registerNode)(ye),i.Factory.addGetterSetter(ye,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{r.stages.forEach(_e=>{_e.batchDraw()})})}(nR)),nR}var Yx={},rR={},KX;function js(){return KX||(KX=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Shape=r.shapes=void 0;const e=qi(),i=Wr(),n=Zi(),s=Zr(),o=nn(),a=qi(),l=jte();var c="hasShadow",u="shadowRGBA",d="patternImage",p="linearGradient",m="radialGradient";let g;function y(){return g||(g=i.Util.createCanvasElement().getContext("2d"),g)}r.shapes={};function _(I){const A=this.attrs.fillRule;A?I.fill(A):I.fill()}function x(I){I.stroke()}function O(I){I.fill()}function S(I){I.stroke()}function w(){this._clearCache(c)}function C(){this._clearCache(u)}function M(){this._clearCache(d)}function P(){this._clearCache(p)}function R(){this._clearCache(m)}class k extends s.Node{constructor(A){super(A);let D;for(;D=i.Util.getRandomColor(),!(D&&!(D in r.shapes)););this.colorKey=D,r.shapes[D]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var A=y();const D=A.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const V=new i.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(e.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const B=V.getMatrix(),L=typeof DOMMatrix>"u"?{a:B[0],b:B[1],c:B[2],d:B[3],e:B[4],f:B[5]}:new DOMMatrix(B);D.setTransform(L)}return D}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){var A=this.fillLinearGradientColorStops();if(A){for(var D=y(),V=this.fillLinearGradientStartPoint(),B=this.fillLinearGradientEndPoint(),L=D.createLinearGradient(V.x,V.y,B.x,B.y),F=0;F<A.length;F+=2)L.addColorStop(A[F],A[F+1]);return L}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){var A=this.fillRadialGradientColorStops();if(A){for(var D=y(),V=this.fillRadialGradientStartPoint(),B=this.fillRadialGradientEndPoint(),L=D.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),B.x,B.y,this.fillRadialGradientEndRadius()),F=0;F<A.length;F+=2)L.addColorStop(A[F],A[F+1]);return L}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var A=i.Util.colorToRGBA(this.shadowColor());if(A)return"rgba("+A.r+","+A.g+","+A.b+","+A.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const A=this.hitStrokeWidth();return A==="auto"?this.hasStroke():this.strokeEnabled()&&!!A}intersects(A){var D=this.getStage();if(!D)return!1;const V=D.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(A.x),Math.round(A.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete r.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(A){var D;if(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0?D:!0))return!1;const B=A||this.hasFill(),L=this.hasStroke(),F=this.getAbsoluteOpacity()!==1;if(B&&L&&F)return!0;const $=this.hasShadow(),z=this.shadowForStrokeEnabled();return!!(B&&L&&$&&z)}setStrokeHitEnabled(A){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),A?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var A=this.size();return{x:this._centroid?-A.width/2:0,y:this._centroid?-A.height/2:0,width:A.width,height:A.height}}getClientRect(A={}){let D=!1,V=this.getParent();for(;V;){if(V.isCached()){D=!0;break}V=V.getParent()}const B=A.skipTransform,L=A.relativeTo||D&&this.getStage()||void 0,F=this.getSelfRect(),z=!A.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,H=F.width+z,K=F.height+z,J=!A.skipShadow&&this.hasShadow(),ne=J?this.shadowOffsetX():0,be=J?this.shadowOffsetY():0,pe=H+Math.abs(ne),ae=K+Math.abs(be),ye=J&&this.shadowBlur()||0,_e=pe+ye*2,re=ae+ye*2,se={width:_e,height:re,x:-(z/2+ye)+Math.min(ne,0)+F.x,y:-(z/2+ye)+Math.min(be,0)+F.y};return B?se:this._transformedRect(se,L)}drawScene(A,D,V){var B=this.getLayer(),L=A||B.getCanvas(),F=L.getContext(),$=this._getCanvasCache(),z=this.getSceneFunc(),H=this.hasShadow(),K,J,ne=L.isCache,be=D===this;if(!this.isVisible()&&!be)return this;if($){F.save();var pe=this.getAbsoluteTransform(D).getMatrix();return F.transform(pe[0],pe[1],pe[2],pe[3],pe[4],pe[5]),this._drawCachedSceneCanvas(F),F.restore(),this}if(!z)return this;if(F.save(),this._useBufferCanvas()&&!ne){K=this.getStage();const _e=V||K.bufferCanvas;J=_e.getContext(),J.clear(),J.save(),J._applyLineJoin(this);var ae=this.getAbsoluteTransform(D).getMatrix();J.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]),z.call(this,J,this),J.restore();var ye=_e.pixelRatio;H&&F._applyShadow(this),F._applyOpacity(this),F._applyGlobalCompositeOperation(this),F.drawImage(_e._canvas,0,0,_e.width/ye,_e.height/ye)}else{if(F._applyLineJoin(this),!be){var ae=this.getAbsoluteTransform(D).getMatrix();F.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]),F._applyOpacity(this),F._applyGlobalCompositeOperation(this)}H&&F._applyShadow(this),z.call(this,F,this)}return F.restore(),this}drawHit(A,D,V=!1){if(!this.shouldDrawHit(D,V))return this;var B=this.getLayer(),L=A||B.hitCanvas,F=L&&L.getContext(),$=this.hitFunc()||this.sceneFunc(),z=this._getCanvasCache(),H=z&&z.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),H){F.save();var K=this.getAbsoluteTransform(D).getMatrix();return F.transform(K[0],K[1],K[2],K[3],K[4],K[5]),this._drawCachedHitCanvas(F),F.restore(),this}if(!$)return this;if(F.save(),F._applyLineJoin(this),!(this===D)){var ne=this.getAbsoluteTransform(D).getMatrix();F.transform(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5])}return $.call(this,F,this),F.restore(),this}drawHitFromCache(A=0){var D=this._getCanvasCache(),V=this._getCachedSceneCanvas(),B=D.hit,L=B.getContext(),F=B.getWidth(),$=B.getHeight(),z,H,K,J,ne,be;L.clear(),L.drawImage(V._canvas,0,0,F,$);try{for(z=L.getImageData(0,0,F,$),H=z.data,K=H.length,J=i.Util._hexToRgb(this.colorKey),ne=0;ne<K;ne+=4)be=H[ne+3],be>A?(H[ne]=J.r,H[ne+1]=J.g,H[ne+2]=J.b,H[ne+3]=255):H[ne+3]=0;L.putImageData(z,0,0)}catch(pe){i.Util.error("Unable to draw hit graph from cached scene canvas. "+pe.message)}return this}hasPointerCapture(A){return l.hasPointerCapture(A,this)}setPointerCapture(A){l.setPointerCapture(A,this)}releaseCapture(A){l.releaseCapture(A,this)}}r.Shape=k,k.prototype._fillFunc=_,k.prototype._strokeFunc=x,k.prototype._fillFuncHit=O,k.prototype._strokeFuncHit=S,k.prototype._centroid=!1,k.prototype.nodeType="Shape",(0,a._registerNode)(k),k.prototype.eventListeners={},k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",M),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",R),n.Factory.addGetterSetter(k,"stroke",void 0,(0,o.getStringOrGradientValidator)()),n.Factory.addGetterSetter(k,"strokeWidth",2,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(k,"hitStrokeWidth","auto",(0,o.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(k,"strokeHitEnabled",!0,(0,o.getBooleanValidator)()),n.Factory.addGetterSetter(k,"perfectDrawEnabled",!0,(0,o.getBooleanValidator)()),n.Factory.addGetterSetter(k,"shadowForStrokeEnabled",!0,(0,o.getBooleanValidator)()),n.Factory.addGetterSetter(k,"lineJoin"),n.Factory.addGetterSetter(k,"lineCap"),n.Factory.addGetterSetter(k,"sceneFunc"),n.Factory.addGetterSetter(k,"hitFunc"),n.Factory.addGetterSetter(k,"dash"),n.Factory.addGetterSetter(k,"dashOffset",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"shadowColor",void 0,(0,o.getStringValidator)()),n.Factory.addGetterSetter(k,"shadowBlur",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"shadowOpacity",1,(0,o.getNumberValidator)()),n.Factory.addComponentsGetterSetter(k,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(k,"shadowOffsetX",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"shadowOffsetY",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"fillPatternImage"),n.Factory.addGetterSetter(k,"fill",void 0,(0,o.getStringOrGradientValidator)()),n.Factory.addGetterSetter(k,"fillPatternX",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"fillPatternY",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(k,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(k,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(k,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(k,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(k,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(k,"fillEnabled",!0),n.Factory.addGetterSetter(k,"strokeEnabled",!0),n.Factory.addGetterSetter(k,"shadowEnabled",!0),n.Factory.addGetterSetter(k,"dashEnabled",!0),n.Factory.addGetterSetter(k,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(k,"fillPriority","color"),n.Factory.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(k,"fillPatternOffsetX",0,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"fillPatternOffsetY",0,(0,o.getNumberValidator)()),n.Factory.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(k,"fillPatternScaleX",1,(0,o.getNumberValidator)()),n.Factory.addGetterSetter(k,"fillPatternScaleY",1,(0,o.getNumberValidator)()),n.Factory.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(k,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(k,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(k,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(k,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(k,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(k,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(k,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(k,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(k,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(k,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(k,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(k,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(k,"fillPatternRotation",0),n.Factory.addGetterSetter(k,"fillRule",void 0,(0,o.getStringValidator)()),n.Factory.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(rR)),rR}var JX;function Yte(){if(JX)return Yx;JX=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.Layer=void 0;const r=Wr(),e=LP(),i=Zr(),n=Zi(),s=DP(),o=nn(),a=js(),l=qi();var c="#",u="beforeDraw",d="draw",p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=p.length;let g=class extends e.Container{constructor(_){super(_),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(_){return this.getContext().clear(_),this.getHitCanvas().getContext().clear(_),this}setZIndex(_){super.setZIndex(_);var x=this.getStage();return x&&x.content&&(x.content.removeChild(this.getNativeCanvasElement()),_<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[_+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);var _=this.getStage();return _&&_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var _=i.Node.prototype.moveUp.call(this);if(!_)return!1;var x=this.getStage();return!x||!x.content?!1:(x.content.removeChild(this.getNativeCanvasElement()),this.index<x.children.length-1?x.content.insertBefore(this.getNativeCanvasElement(),x.children[this.index+1].getCanvas()._canvas):x.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){var _=this.getStage();if(_){var x=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),x[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){var _=this.getStage();if(_){var x=_.children;_.content&&(_.content.removeChild(this.getNativeCanvasElement()),_.content.insertBefore(this.getNativeCanvasElement(),x[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var _=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),_&&_.parentNode&&r.Util._isInDocument(_)&&_.parentNode.removeChild(_),this}getStage(){return this.parent}setSize({width:_,height:x}){return this.canvas.setSize(_,x),this.hitCanvas.setSize(_,x),this._setSmoothEnabled(),this}_validateAdd(_){var x=_.getType();x!=="Group"&&x!=="Shape"&&r.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(_){return _=_||{},_.width=_.width||this.getWidth(),_.height=_.height||this.getHeight(),_.x=_.x!==void 0?_.x:this.x(),_.y=_.y!==void 0?_.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,_)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){r.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){r.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,r.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(_){if(!this.isListening()||!this.isVisible())return null;for(var x=1,O=!1;;){for(let S=0;S<m;S++){const w=p[S],C=this._getIntersection({x:_.x+w.x*x,y:_.y+w.y*x}),M=C.shape;if(M)return M;if(O=!!C.antialiased,!C.antialiased)break}if(O)x+=1;else return null}}_getIntersection(_){const x=this.hitCanvas.pixelRatio,O=this.hitCanvas.context.getImageData(Math.round(_.x*x),Math.round(_.y*x),1,1).data,S=O[3];if(S===255){const w=r.Util._rgbToHex(O[0],O[1],O[2]),C=a.shapes[c+w];return C?{shape:C}:{antialiased:!0}}else if(S>0)return{antialiased:!0};return{}}drawScene(_,x){var O=this.getLayer(),S=_||O&&O.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&S.getContext().clear(),e.Container.prototype.drawScene.call(this,S,x),this._fire(d,{node:this}),this}drawHit(_,x){var O=this.getLayer(),S=_||O&&O.hitCanvas;return O&&O.clearBeforeDraw()&&O.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,S,x),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(_){r.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(_)}getHitGraphEnabled(_){return r.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var _=this.parent,x=!!this.hitCanvas._canvas.parentNode;x?_.content.removeChild(this.hitCanvas._canvas):_.content.appendChild(this.hitCanvas._canvas)}}destroy(){return r.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return Yx.Layer=g,g.prototype.nodeType="Layer",(0,l._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,o.getBooleanValidator)()),Yx}var qx={},eW;function cNe(){if(eW)return qx;eW=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.FastLayer=void 0;const r=Wr(),e=Yte(),i=qi();let n=class extends e.Layer{constructor(o){super(o),this.listening(!1),r.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return qx.FastLayer=n,n.prototype.nodeType="FastLayer",(0,i._registerNode)(n),qx}var Zx={},tW;function $V(){if(tW)return Zx;tW=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.Group=void 0;const r=Wr(),e=LP(),i=qi();let n=class extends e.Container{_validateAdd(o){var a=o.getType();a!=="Group"&&a!=="Shape"&&r.Util.throw("You may only add groups and shapes to groups.")}};return Zx.Group=n,n.prototype.nodeType="Group",(0,i._registerNode)(n),Zx}var Kx={},iW;function UV(){if(iW)return Kx;iW=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.Animation=void 0;const r=qi(),e=Wr(),i=function(){return r.glob.performance&&r.glob.performance.now?function(){return r.glob.performance.now()}:function(){return new Date().getTime()}}();class n{constructor(o,a){this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=o,this.setLayers(a)}setLayers(o){let a=[];return o&&(a=Array.isArray(o)?o:[o]),this.layers=a,this}getLayers(){return this.layers}addLayer(o){const a=this.layers,l=a.length;for(let c=0;c<l;c++)if(a[c]._id===o._id)return!1;return this.layers.push(o),!0}isRunning(){const a=n.animations,l=a.length;for(let c=0;c<l;c++)if(a[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),n._addAnimation(this),this}stop(){return n._removeAnimation(this),this}_updateFrameObject(o){this.frame.timeDiff=o-this.frame.lastTime,this.frame.lastTime=o,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(o){this.animations.push(o),this._handleAnimation()}static _removeAnimation(o){const a=o.id,l=this.animations,c=l.length;for(let u=0;u<c;u++)if(l[u].id===a){this.animations.splice(u,1);break}}static _runFrames(){const o={},a=this.animations;for(let l=0;l<a.length;l++){const c=a[l],u=c.layers,d=c.func;c._updateFrameObject(i());const p=u.length;let m;if(d?m=d.call(c,c.frame)!==!1:m=!0,!!m)for(let g=0;g<p;g++){const y=u[g];y._id!==void 0&&(o[y._id]=y)}}for(let l in o)o.hasOwnProperty(l)&&o[l].batchDraw()}static _animationLoop(){const o=n;o.animations.length?(o._runFrames(),e.Util.requestAnimFrame(o._animationLoop)):o.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}}return Kx.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,Kx}var sR={},nW;function uNe(){return nW||(nW=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Easings=r.Tween=void 0;const e=Wr(),i=UV(),n=Zr(),s=qi();var o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,l=2,c=3,u=0,d=["fill","stroke","shadowColor"];class p{constructor(y,_,x,O,S,w,C){this.prop=y,this.propFunc=_,this.begin=O,this._pos=O,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=C,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=S-this.begin,this.pause()}fire(y){var _=this[y];_&&_()}setTime(y){y>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():y<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=y,this.update())}getTime(){return this._time}setPosition(y){this.prevPos=this._pos,this.propFunc(y),this._pos=y}getPosition(y){return y===void 0&&(y=this._time),this.func(y,this.begin,this._change,this.duration)}play(){this.state=l,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(y){this.pause(),this._time=y,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var y=this.getTimer()-this._startTime;this.state===l?this.setTime(y):this.state===c&&this.setTime(this.duration-y)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(y){var _=this,x=y.node,O=x._id,S,w=y.easing||r.Easings.Linear,C=!!y.yoyo,M;typeof y.duration>"u"?S=.3:y.duration===0?S=.001:S=y.duration,this.node=x,this._id=u++;var P=x.getLayer()||(x instanceof s.Konva.Stage?x.getLayers():null);P||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){_.tween.onEnterFrame()},P),this.tween=new p(M,function(R){_._tweenFunc(R)},w,0,1,S*1e3,C),this._addListeners(),m.attrs[O]||(m.attrs[O]={}),m.attrs[O][this._id]||(m.attrs[O][this._id]={}),m.tweens[O]||(m.tweens[O]={});for(M in y)o[M]===void 0&&this._addAttr(M,y[M]);this.reset(),this.onFinish=y.onFinish,this.onReset=y.onReset,this.onUpdate=y.onUpdate}_addAttr(y,_){var x=this.node,O=x._id,S,w,C,M,P,R,k,I;if(C=m.tweens[O][y],C&&delete m.attrs[O][C][y],S=x.getAttr(y),e.Util._isArray(_))if(w=[],P=Math.max(_.length,S.length),y==="points"&&_.length!==S.length&&(_.length>S.length?(k=S,S=e.Util._prepareArrayForTween(S,_,x.closed())):(R=_,_=e.Util._prepareArrayForTween(_,S,x.closed()))),y.indexOf("fill")===0)for(M=0;M<P;M++)if(M%2===0)w.push(_[M]-S[M]);else{var A=e.Util.colorToRGBA(S[M]);I=e.Util.colorToRGBA(_[M]),S[M]=A,w.push({r:I.r-A.r,g:I.g-A.g,b:I.b-A.b,a:I.a-A.a})}else for(M=0;M<P;M++)w.push(_[M]-S[M]);else d.indexOf(y)!==-1?(S=e.Util.colorToRGBA(S),I=e.Util.colorToRGBA(_),w={r:I.r-S.r,g:I.g-S.g,b:I.b-S.b,a:I.a-S.a}):w=_-S;m.attrs[O][this._id][y]={start:S,diff:w,end:_,trueEnd:R,trueStart:k},m.tweens[O][y]=this._id}_tweenFunc(y){var _=this.node,x=m.attrs[_._id][this._id],O,S,w,C,M,P,R,k;for(O in x){if(S=x[O],w=S.start,C=S.diff,k=S.end,e.Util._isArray(w))if(M=[],R=Math.max(w.length,k.length),O.indexOf("fill")===0)for(P=0;P<R;P++)P%2===0?M.push((w[P]||0)+C[P]*y):M.push("rgba("+Math.round(w[P].r+C[P].r*y)+","+Math.round(w[P].g+C[P].g*y)+","+Math.round(w[P].b+C[P].b*y)+","+(w[P].a+C[P].a*y)+")");else for(P=0;P<R;P++)M.push((w[P]||0)+C[P]*y);else d.indexOf(O)!==-1?M="rgba("+Math.round(w.r+C.r*y)+","+Math.round(w.g+C.g*y)+","+Math.round(w.b+C.b*y)+","+(w.a+C.a*y)+")":M=w+C*y;_.setAttr(O,M)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var y=this.node,_=m.attrs[y._id][this._id];_.points&&_.points.trueEnd&&y.setAttr("points",_.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var y=this.node,_=m.attrs[y._id][this._id];_.points&&_.points.trueStart&&y.points(_.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(y){return this.tween.seek(y*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var y=this.node._id,_=this._id,x=m.tweens[y],O;this.pause();for(O in x)delete m.tweens[y][O];delete m.attrs[y][_]}}r.Tween=m,m.attrs={},m.tweens={},n.Node.prototype.to=function(g){var y=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),y&&y()};var _=new m(g);_.play()},r.Easings={BackEaseIn(g,y,_,x){var O=1.70158;return _*(g/=x)*g*((O+1)*g-O)+y},BackEaseOut(g,y,_,x){var O=1.70158;return _*((g=g/x-1)*g*((O+1)*g+O)+1)+y},BackEaseInOut(g,y,_,x){var O=1.70158;return(g/=x/2)<1?_/2*(g*g*(((O*=1.525)+1)*g-O))+y:_/2*((g-=2)*g*(((O*=1.525)+1)*g+O)+2)+y},ElasticEaseIn(g,y,_,x,O,S){var w=0;return g===0?y:(g/=x)===1?y+_:(S||(S=x*.3),!O||O<Math.abs(_)?(O=_,w=S/4):w=S/(2*Math.PI)*Math.asin(_/O),-(O*Math.pow(2,10*(g-=1))*Math.sin((g*x-w)*(2*Math.PI)/S))+y)},ElasticEaseOut(g,y,_,x,O,S){var w=0;return g===0?y:(g/=x)===1?y+_:(S||(S=x*.3),!O||O<Math.abs(_)?(O=_,w=S/4):w=S/(2*Math.PI)*Math.asin(_/O),O*Math.pow(2,-10*g)*Math.sin((g*x-w)*(2*Math.PI)/S)+_+y)},ElasticEaseInOut(g,y,_,x,O,S){var w=0;return g===0?y:(g/=x/2)===2?y+_:(S||(S=x*(.3*1.5)),!O||O<Math.abs(_)?(O=_,w=S/4):w=S/(2*Math.PI)*Math.asin(_/O),g<1?-.5*(O*Math.pow(2,10*(g-=1))*Math.sin((g*x-w)*(2*Math.PI)/S))+y:O*Math.pow(2,-10*(g-=1))*Math.sin((g*x-w)*(2*Math.PI)/S)*.5+_+y)},BounceEaseOut(g,y,_,x){return(g/=x)<1/2.75?_*(7.5625*g*g)+y:g<2/2.75?_*(7.5625*(g-=1.5/2.75)*g+.75)+y:g<2.5/2.75?_*(7.5625*(g-=2.25/2.75)*g+.9375)+y:_*(7.5625*(g-=2.625/2.75)*g+.984375)+y},BounceEaseIn(g,y,_,x){return _-r.Easings.BounceEaseOut(x-g,0,_,x)+y},BounceEaseInOut(g,y,_,x){return g<x/2?r.Easings.BounceEaseIn(g*2,0,_,x)*.5+y:r.Easings.BounceEaseOut(g*2-x,0,_,x)*.5+_*.5+y},EaseIn(g,y,_,x){return _*(g/=x)*g+y},EaseOut(g,y,_,x){return-_*(g/=x)*(g-2)+y},EaseInOut(g,y,_,x){return(g/=x/2)<1?_/2*g*g+y:-_/2*(--g*(g-2)-1)+y},StrongEaseIn(g,y,_,x){return _*(g/=x)*g*g*g*g+y},StrongEaseOut(g,y,_,x){return _*((g=g/x-1)*g*g*g*g+1)+y},StrongEaseInOut(g,y,_,x){return(g/=x/2)<1?_/2*g*g*g*g*g+y:_/2*((g-=2)*g*g*g*g+2)+y},Linear(g,y,_,x){return _*g/x+y}}}(sR)),sR}var rW;function dNe(){return rW||(rW=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Konva=void 0;const e=qi(),i=Wr(),n=Zr(),s=LP(),o=hNe(),a=Yte(),l=cNe(),c=$V(),u=FV(),d=js(),p=UV(),m=uNe(),g=Qte(),y=DP();r.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:s.Container,Stage:o.Stage,stages:o.stages,Layer:a.Layer,FastLayer:l.FastLayer,Group:c.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:p.Animation,Tween:m.Tween,Easings:m.Easings,Context:g.Context,Canvas:y.Canvas}),r.default=r.Konva}(KI)),KI}var Jx={},sW;function fNe(){if(sW)return Jx;sW=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.Arc=void 0;const r=Zi(),e=js(),i=qi(),n=nn(),s=qi();let o=class extends e.Shape{_sceneFunc(l){var c=i.Konva.getAngle(this.angle()),u=this.clockwise();l.beginPath(),l.arc(0,0,this.outerRadius(),0,c,u),l.arc(0,0,this.innerRadius(),c,0,!u),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}getSelfRect(){const l=this.innerRadius(),c=this.outerRadius(),u=this.clockwise(),d=i.Konva.getAngle(u?360-this.angle():this.angle()),p=Math.cos(Math.min(d,Math.PI)),m=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),y=Math.sin(Math.min(d,Math.PI/2)),_=p*(p>0?l:c),x=m*c,O=g*(g>0?l:c),S=y*(y>0?c:l);return{x:_,y:u?-1*S:O,width:x-_,height:S-O}}};return Jx.Arc=o,o.prototype._centroid=!0,o.prototype.className="Arc",o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(o),r.Factory.addGetterSetter(o,"innerRadius",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"outerRadius",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"angle",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"clockwise",!1,(0,n.getBooleanValidator)()),Jx}var e1={},t1={},oW;function qte(){if(oW)return t1;oW=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.Line=void 0;const r=Zi(),e=js(),i=nn(),n=qi();function s(l,c,u,d,p,m,g){var y=Math.sqrt(Math.pow(u-l,2)+Math.pow(d-c,2)),_=Math.sqrt(Math.pow(p-u,2)+Math.pow(m-d,2)),x=g*y/(y+_),O=g*_/(y+_),S=u-x*(p-l),w=d-x*(m-c),C=u+O*(p-l),M=d+O*(m-c);return[S,w,C,M]}function o(l,c){var u=l.length,d=[],p,m;for(p=2;p<u-2;p+=2)m=s(l[p-2],l[p-1],l[p],l[p+1],l[p+2],l[p+3],c),!isNaN(m[0])&&(d.push(m[0]),d.push(m[1]),d.push(l[p]),d.push(l[p+1]),d.push(m[2]),d.push(m[3]));return d}class a extends e.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){var u=this.points(),d=u.length,p=this.tension(),m=this.closed(),g=this.bezier(),y,_,x;if(d){if(c.beginPath(),c.moveTo(u[0],u[1]),p!==0&&d>4){for(y=this.getTensionPoints(),_=y.length,x=m?0:4,m||c.quadraticCurveTo(y[0],y[1],y[2],y[3]);x<_-2;)c.bezierCurveTo(y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]);m||c.quadraticCurveTo(y[_-2],y[_-1],u[d-2],u[d-1])}else if(g)for(x=2;x<d;)c.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<d;x+=2)c.lineTo(u[x],u[x+1]);m?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():o(this.points(),this.tension())}_getTensionPointsClosed(){var c=this.points(),u=c.length,d=this.tension(),p=s(c[u-2],c[u-1],c[0],c[1],c[2],c[3],d),m=s(c[u-4],c[u-3],c[u-2],c[u-1],c[0],c[1],d),g=o(c,d),y=[p[2],p[3]].concat(g).concat([m[0],m[1],c[u-2],c[u-1],m[2],m[3],p[0],p[1],c[0],c[1]]);return y}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();for(var u=c[0],d=c[0],p=c[1],m=c[1],g,y,_=0;_<c.length/2;_++)g=c[_*2],y=c[_*2+1],u=Math.min(u,g),d=Math.max(d,g),p=Math.min(p,y),m=Math.max(m,y);return{x:u,y:p,width:d-u,height:m-p}}}return t1.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,n._registerNode)(a),r.Factory.addGetterSetter(a,"closed",!1),r.Factory.addGetterSetter(a,"bezier",!1),r.Factory.addGetterSetter(a,"tension",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(a,"points",[],(0,i.getNumberArrayValidator)()),t1}var i1={},oR={},aW;function pNe(){return aW||(aW=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.t2length=r.getQuadraticArcLength=r.getCubicArcLength=r.binomialCoefficients=r.cValues=r.tValues=void 0,r.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],r.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],r.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(a,l,c)=>{let u,d,p;u=c/2,d=0;for(let g=0;g<20;g++)p=u*r.tValues[20][g]+u,d+=r.cValues[20][g]*n(a,l,p);return u*d};r.getCubicArcLength=e;const i=(a,l,c)=>{c===void 0&&(c=1);const u=a[0]-2*a[1]+a[2],d=l[0]-2*l[1]+l[2],p=2*a[1]-2*a[0],m=2*l[1]-2*l[0],g=4*(u*u+d*d),y=4*(u*p+d*m),_=p*p+m*m;if(g===0)return c*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(l[2]-l[0],2));const x=y/(2*g),O=_/g,S=c+x,w=O-x*x,C=S*S+w>0?Math.sqrt(S*S+w):0,M=x*x+w>0?Math.sqrt(x*x+w):0,P=x+Math.sqrt(x*x+w)!==0?w*Math.log(Math.abs((S+C)/(x+M))):0;return Math.sqrt(g)/2*(S*C-x*M+P)};r.getQuadraticArcLength=i;function n(a,l,c){const u=s(1,c,a),d=s(1,c,l),p=u*u+d*d;return Math.sqrt(p)}const s=(a,l,c)=>{const u=c.length-1;let d,p;if(u===0)return 0;if(a===0){p=0;for(let m=0;m<=u;m++)p+=r.binomialCoefficients[u][m]*Math.pow(1-l,u-m)*Math.pow(l,m)*c[m];return p}else{d=new Array(u);for(let m=0;m<u;m++)d[m]=u*(c[m+1]-c[m]);return s(a-1,l,d)}},o=(a,l,c)=>{let u=1,d=a/l,p=(a-c(d))/l,m=0;for(;u>.001;){const g=c(d+p),y=Math.abs(a-g)/l;if(y<u)u=y,d+=p;else{const _=c(d-p),x=Math.abs(a-_)/l;x<u?(u=x,d-=p):p/=2}if(m++,m>500)break}return d};r.t2length=o}(oR)),oR}var lW;function zV(){if(lW)return i1;lW=1,Object.defineProperty(i1,"__esModule",{value:!0}),i1.Path=void 0;const r=Zi(),e=js(),i=qi(),n=pNe();let s=class da extends e.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=da.parsePathData(this.data()),this.pathLength=da.getPathLength(this.dataArray)}_sceneFunc(a){var l=this.dataArray;a.beginPath();for(var c=!1,u=0;u<l.length;u++){var d=l[u].command,p=l[u].points;switch(d){case"L":a.lineTo(p[0],p[1]);break;case"M":a.moveTo(p[0],p[1]);break;case"C":a.bezierCurveTo(p[0],p[1],p[2],p[3],p[4],p[5]);break;case"Q":a.quadraticCurveTo(p[0],p[1],p[2],p[3]);break;case"A":var m=p[0],g=p[1],y=p[2],_=p[3],x=p[4],O=p[5],S=p[6],w=p[7],C=y>_?y:_,M=y>_?1:y/_,P=y>_?_/y:1;a.translate(m,g),a.rotate(S),a.scale(M,P),a.arc(0,0,C,x,x+O,1-w),a.scale(1/M,1/P),a.rotate(-S),a.translate(-m,-g);break;case"z":c=!0,a.closePath();break}}!c&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){var a=[];this.dataArray.forEach(function(y){if(y.command==="A"){var _=y.points[4],x=y.points[5],O=y.points[4]+x,S=Math.PI/180;if(Math.abs(_-O)<S&&(S=Math.abs(_-O)),x<0)for(let w=_-S;w>O;w-=S){const C=da.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],w,0);a.push(C.x,C.y)}else for(let w=_+S;w<O;w+=S){const C=da.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],w,0);a.push(C.x,C.y)}}else if(y.command==="C")for(let w=0;w<=1;w+=.01){const C=da.getPointOnCubicBezier(w,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3],y.points[4],y.points[5]);a.push(C.x,C.y)}else a=a.concat(y.points)});for(var l=a[0],c=a[0],u=a[1],d=a[1],p,m,g=0;g<a.length/2;g++)p=a[g*2],m=a[g*2+1],isNaN(p)||(l=Math.min(l,p),c=Math.max(c,p)),isNaN(m)||(u=Math.min(u,m),d=Math.max(d,m));return{x:l,y:u,width:c-l,height:d-u}}getLength(){return this.pathLength}getPointAtLength(a){return da.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,l,c,u){return Math.sqrt((c-a)*(c-a)+(u-l)*(u-l))}static getPathLength(a){let l=0;for(var c=0;c<a.length;++c)l+=a[c].pathLength;return l}static getPointAtLengthOfDataArray(a,l){var c,u=0,d=l.length;if(!d)return null;for(;u<d&&a>l[u].pathLength;)a-=l[u].pathLength,++u;if(u===d)return c=l[u-1].points.slice(-2),{x:c[0],y:c[1]};if(a<.01)return c=l[u].points.slice(0,2),{x:c[0],y:c[1]};var p=l[u],m=p.points;switch(p.command){case"L":return da.getPointOnLine(a,p.start.x,p.start.y,m[0],m[1]);case"C":return da.getPointOnCubicBezier((0,n.t2length)(a,da.getPathLength(l),C=>(0,n.getCubicArcLength)([p.start.x,m[0],m[2],m[4]],[p.start.y,m[1],m[3],m[5]],C)),p.start.x,p.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return da.getPointOnQuadraticBezier((0,n.t2length)(a,da.getPathLength(l),C=>(0,n.getQuadraticArcLength)([p.start.x,m[0],m[2]],[p.start.y,m[1],m[3]],C)),p.start.x,p.start.y,m[0],m[1],m[2],m[3]);case"A":var g=m[0],y=m[1],_=m[2],x=m[3],O=m[4],S=m[5],w=m[6];return O+=S*a/p.pathLength,da.getPointOnEllipticalArc(g,y,_,x,O,w)}return null}static getPointOnLine(a,l,c,u,d,p,m){p=p??l,m=m??c;const g=this.getLineLength(l,c,u,d);if(g<1e-10)return{x:l,y:c};if(u===l)return{x:p,y:m+(d>c?a:-a)};const y=(d-c)/(u-l),_=Math.sqrt(a*a/(1+y*y))*(u<l?-1:1),x=y*_;if(Math.abs(m-c-y*(p-l))<1e-10)return{x:p+_,y:m+x};const O=((p-l)*(u-l)+(m-c)*(d-c))/(g*g),S=l+O*(u-l),w=c+O*(d-c),C=this.getLineLength(p,m,S,w),M=Math.sqrt(a*a-C*C),P=Math.sqrt(M*M/(1+y*y))*(u<l?-1:1),R=y*P;return{x:S+P,y:w+R}}static getPointOnCubicBezier(a,l,c,u,d,p,m,g,y){function _(M){return M*M*M}function x(M){return 3*M*M*(1-M)}function O(M){return 3*M*(1-M)*(1-M)}function S(M){return(1-M)*(1-M)*(1-M)}var w=g*_(a)+p*x(a)+u*O(a)+l*S(a),C=y*_(a)+m*x(a)+d*O(a)+c*S(a);return{x:w,y:C}}static getPointOnQuadraticBezier(a,l,c,u,d,p,m){function g(S){return S*S}function y(S){return 2*S*(1-S)}function _(S){return(1-S)*(1-S)}var x=p*g(a)+u*y(a)+l*_(a),O=m*g(a)+d*y(a)+c*_(a);return{x,y:O}}static getPointOnEllipticalArc(a,l,c,u,d,p){var m=Math.cos(p),g=Math.sin(p),y={x:c*Math.cos(d),y:u*Math.sin(d)};return{x:a+(y.x*m-y.y*g),y:l+(y.x*g+y.y*m)}}static parsePathData(a){if(!a)return[];var l=a,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];l=l.replace(new RegExp(" ","g"),",");for(var u=0;u<c.length;u++)l=l.replace(new RegExp(c[u],"g"),"|"+c[u]);var d=l.split("|"),p=[],m=[],g=0,y=0,_=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,x;for(u=1;u<d.length;u++){var O=d[u],S=O.charAt(0);for(O=O.slice(1),m.length=0;x=_.exec(O);)m.push(x[0]);for(var w=[],C=0,M=m.length;C<M;C++){if(m[C]==="00"){w.push(0,0);continue}var P=parseFloat(m[C]);isNaN(P)?w.push(0):w.push(P)}for(;w.length>0&&!isNaN(w[0]);){var R="",k=[],I=g,A=y,D,V,B,L,F,$,z,H,K,J;switch(S){case"l":g+=w.shift(),y+=w.shift(),R="L",k.push(g,y);break;case"L":g=w.shift(),y=w.shift(),k.push(g,y);break;case"m":var ne=w.shift(),be=w.shift();if(g+=ne,y+=be,R="M",p.length>2&&p[p.length-1].command==="z"){for(var pe=p.length-2;pe>=0;pe--)if(p[pe].command==="M"){g=p[pe].points[0]+ne,y=p[pe].points[1]+be;break}}k.push(g,y),S="l";break;case"M":g=w.shift(),y=w.shift(),R="M",k.push(g,y),S="L";break;case"h":g+=w.shift(),R="L",k.push(g,y);break;case"H":g=w.shift(),R="L",k.push(g,y);break;case"v":y+=w.shift(),R="L",k.push(g,y);break;case"V":y=w.shift(),R="L",k.push(g,y);break;case"C":k.push(w.shift(),w.shift(),w.shift(),w.shift()),g=w.shift(),y=w.shift(),k.push(g,y);break;case"c":k.push(g+w.shift(),y+w.shift(),g+w.shift(),y+w.shift()),g+=w.shift(),y+=w.shift(),R="C",k.push(g,y);break;case"S":V=g,B=y,D=p[p.length-1],D.command==="C"&&(V=g+(g-D.points[2]),B=y+(y-D.points[3])),k.push(V,B,w.shift(),w.shift()),g=w.shift(),y=w.shift(),R="C",k.push(g,y);break;case"s":V=g,B=y,D=p[p.length-1],D.command==="C"&&(V=g+(g-D.points[2]),B=y+(y-D.points[3])),k.push(V,B,g+w.shift(),y+w.shift()),g+=w.shift(),y+=w.shift(),R="C",k.push(g,y);break;case"Q":k.push(w.shift(),w.shift()),g=w.shift(),y=w.shift(),k.push(g,y);break;case"q":k.push(g+w.shift(),y+w.shift()),g+=w.shift(),y+=w.shift(),R="Q",k.push(g,y);break;case"T":V=g,B=y,D=p[p.length-1],D.command==="Q"&&(V=g+(g-D.points[0]),B=y+(y-D.points[1])),g=w.shift(),y=w.shift(),R="Q",k.push(V,B,g,y);break;case"t":V=g,B=y,D=p[p.length-1],D.command==="Q"&&(V=g+(g-D.points[0]),B=y+(y-D.points[1])),g+=w.shift(),y+=w.shift(),R="Q",k.push(V,B,g,y);break;case"A":L=w.shift(),F=w.shift(),$=w.shift(),z=w.shift(),H=w.shift(),K=g,J=y,g=w.shift(),y=w.shift(),R="A",k=this.convertEndpointToCenterParameterization(K,J,g,y,z,H,L,F,$);break;case"a":L=w.shift(),F=w.shift(),$=w.shift(),z=w.shift(),H=w.shift(),K=g,J=y,g+=w.shift(),y+=w.shift(),R="A",k=this.convertEndpointToCenterParameterization(K,J,g,y,z,H,L,F,$);break}p.push({command:R||S,points:k,start:{x:I,y:A},pathLength:this.calcLength(I,A,R||S,k)})}(S==="z"||S==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(a,l,c,u){var d,p,m,g,y=da;switch(c){case"L":return y.getLineLength(a,l,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([a,u[0],u[2],u[4]],[l,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([a,u[0],u[2]],[l,u[1],u[3]],1);case"A":d=0;var _=u[4],x=u[5],O=u[4]+x,S=Math.PI/180;if(Math.abs(_-O)<S&&(S=Math.abs(_-O)),p=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],_,0),x<0)for(g=_-S;g>O;g-=S)m=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=y.getLineLength(p.x,p.y,m.x,m.y),p=m;else for(g=_+S;g<O;g+=S)m=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=y.getLineLength(p.x,p.y,m.x,m.y),p=m;return m=y.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],O,0),d+=y.getLineLength(p.x,p.y,m.x,m.y),d}return 0}static convertEndpointToCenterParameterization(a,l,c,u,d,p,m,g,y){var _=y*(Math.PI/180),x=Math.cos(_)*(a-c)/2+Math.sin(_)*(l-u)/2,O=-1*Math.sin(_)*(a-c)/2+Math.cos(_)*(l-u)/2,S=x*x/(m*m)+O*O/(g*g);S>1&&(m*=Math.sqrt(S),g*=Math.sqrt(S));var w=Math.sqrt((m*m*(g*g)-m*m*(O*O)-g*g*(x*x))/(m*m*(O*O)+g*g*(x*x)));d===p&&(w*=-1),isNaN(w)&&(w=0);var C=w*m*O/g,M=w*-g*x/m,P=(a+c)/2+Math.cos(_)*C-Math.sin(_)*M,R=(l+u)/2+Math.sin(_)*C+Math.cos(_)*M,k=function(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1])},I=function(F,$){return(F[0]*$[0]+F[1]*$[1])/(k(F)*k($))},A=function(F,$){return(F[0]*$[1]<F[1]*$[0]?-1:1)*Math.acos(I(F,$))},D=A([1,0],[(x-C)/m,(O-M)/g]),V=[(x-C)/m,(O-M)/g],B=[(-1*x-C)/m,(-1*O-M)/g],L=A(V,B);return I(V,B)<=-1&&(L=Math.PI),I(V,B)>=1&&(L=0),p===0&&L>0&&(L=L-2*Math.PI),p===1&&L<0&&(L=L+2*Math.PI),[P,R,m,g,D,L,_,p]}};return i1.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(s),r.Factory.addGetterSetter(s,"data"),i1}var hW;function mNe(){if(hW)return e1;hW=1,Object.defineProperty(e1,"__esModule",{value:!0}),e1.Arrow=void 0;const r=Zi(),e=qte(),i=nn(),n=qi(),s=zV();let o=class extends e.Line{_sceneFunc(l){super._sceneFunc(l);var c=Math.PI*2,u=this.points(),d=u,p=this.tension()!==0&&u.length>4;p&&(d=this.getTensionPoints());var m=this.pointerLength(),g=u.length,y,_;if(p){const S=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],w=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",S),C=s.Path.getPointOnQuadraticBezier(Math.min(1,1-m/w),S[0],S[1],S[2],S[3],S[4],S[5]);y=u[g-2]-C.x,_=u[g-1]-C.y}else y=u[g-2]-u[g-4],_=u[g-1]-u[g-3];var x=(Math.atan2(_,y)+c)%c,O=this.pointerWidth();this.pointerAtEnding()&&(l.save(),l.beginPath(),l.translate(u[g-2],u[g-1]),l.rotate(x),l.moveTo(0,0),l.lineTo(-m,O/2),l.lineTo(-m,-O/2),l.closePath(),l.restore(),this.__fillStroke(l)),this.pointerAtBeginning()&&(l.save(),l.beginPath(),l.translate(u[0],u[1]),p?(y=(d[0]+d[2])/2-u[0],_=(d[1]+d[3])/2-u[1]):(y=u[2]-u[0],_=u[3]-u[1]),l.rotate((Math.atan2(-_,-y)+c)%c),l.moveTo(0,0),l.lineTo(-m,O/2),l.lineTo(-m,-O/2),l.closePath(),l.restore(),this.__fillStroke(l))}__fillStroke(l){var c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,l.setLineDash([])),l.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const l=super.getSelfRect(),c=this.pointerWidth()/2;return{x:l.x-c,y:l.y-c,width:l.width+c*2,height:l.height+c*2}}};return e1.Arrow=o,o.prototype.className="Arrow",(0,n._registerNode)(o),r.Factory.addGetterSetter(o,"pointerLength",10,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"pointerWidth",10,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"pointerAtBeginning",!1),r.Factory.addGetterSetter(o,"pointerAtEnding",!0),e1}var n1={},cW;function gNe(){if(cW)return n1;cW=1,Object.defineProperty(n1,"__esModule",{value:!0}),n1.Circle=void 0;const r=Zi(),e=js(),i=nn(),n=qi();class s extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}}return n1.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),r.Factory.addGetterSetter(s,"radius",0,(0,i.getNumberValidator)()),n1}var r1={},uW;function vNe(){if(uW)return r1;uW=1,Object.defineProperty(r1,"__esModule",{value:!0}),r1.Ellipse=void 0;const r=Zi(),e=js(),i=nn(),n=qi();class s extends e.Shape{_sceneFunc(a){var l=this.radiusX(),c=this.radiusY();a.beginPath(),a.save(),l!==c&&a.scale(1,c/l),a.arc(0,0,l,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}}return r1.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),r.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),r.Factory.addGetterSetter(s,"radiusX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(s,"radiusY",0,(0,i.getNumberValidator)()),r1}var s1={},dW;function yNe(){if(dW)return s1;dW=1,Object.defineProperty(s1,"__esModule",{value:!0}),s1.Image=void 0;const r=Wr(),e=Zi(),i=js(),n=qi(),s=nn();class o extends i.Shape{constructor(l){super(l),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const l=this.image();l&&l.complete||l&&l.readyState===4||l&&l.addEventListener&&l.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(l){const c=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),p=this.attrs.image;let m;if(p){const g=this.attrs.cropWidth,y=this.attrs.cropHeight;g&&y?m=[p,this.cropX(),this.cropY(),g,y,0,0,c,u]:m=[p,0,0,c,u]}(this.hasFill()||this.hasStroke()||d)&&(l.beginPath(),d?r.Util.drawRoundedRectPath(l,c,u,d):l.rect(0,0,c,u),l.closePath(),l.fillStrokeShape(this)),p&&(d&&l.clip(),l.drawImage.apply(l,m))}_hitFunc(l){var c=this.width(),u=this.height(),d=this.cornerRadius();l.beginPath(),d?r.Util.drawRoundedRectPath(l,c,u,d):l.rect(0,0,c,u),l.closePath(),l.fillStrokeShape(this)}getWidth(){var l,c;return(l=this.attrs.width)!==null&&l!==void 0?l:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var l,c;return(l=this.attrs.height)!==null&&l!==void 0?l:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(l,c,u=null){var d=r.Util.createImageElement();d.onload=function(){var p=new o({image:d});c(p)},d.onerror=u,d.crossOrigin="Anonymous",d.src=l}}return s1.Image=o,o.prototype.className="Image",(0,n._registerNode)(o),e.Factory.addGetterSetter(o,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(o,"image"),e.Factory.addComponentsGetterSetter(o,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(o,"cropX",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropY",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropWidth",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropHeight",0,(0,s.getNumberValidator)()),s1}var km={},fW;function Zte(){if(fW)return km;fW=1,Object.defineProperty(km,"__esModule",{value:!0}),km.Tag=km.Label=void 0;const r=Zi(),e=js(),i=$V(),n=nn(),s=qi();var o=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",l="none",c="up",u="right",d="down",p="left",m=o.length;let g=class extends i.Group{constructor(x){super(x),this.on("add.konva",function(O){this._addListeners(O.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(x){var O=this,S,w=function(){O._sync()};for(S=0;S<m;S++)x.on(o[S]+a,w)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var x=this.getText(),O=this.getTag(),S,w,C,M,P,R,k;if(x&&O){switch(S=x.width(),w=x.height(),C=O.pointerDirection(),M=O.pointerWidth(),k=O.pointerHeight(),P=0,R=0,C){case c:P=S/2,R=-1*k;break;case u:P=S+M,R=w/2;break;case d:P=S/2,R=w+k;break;case p:P=-1*M,R=w/2;break}O.setAttrs({x:-1*P,y:-1*R,width:S,height:w}),x.setAttrs({x:-1*P,y:-1*R})}}};km.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class y extends e.Shape{_sceneFunc(x){var O=this.width(),S=this.height(),w=this.pointerDirection(),C=this.pointerWidth(),M=this.pointerHeight(),P=this.cornerRadius();let R=0,k=0,I=0,A=0;typeof P=="number"?R=k=I=A=Math.min(P,O/2,S/2):(R=Math.min(P[0]||0,O/2,S/2),k=Math.min(P[1]||0,O/2,S/2),A=Math.min(P[2]||0,O/2,S/2),I=Math.min(P[3]||0,O/2,S/2)),x.beginPath(),x.moveTo(R,0),w===c&&(x.lineTo((O-C)/2,0),x.lineTo(O/2,-1*M),x.lineTo((O+C)/2,0)),x.lineTo(O-k,0),x.arc(O-k,k,k,Math.PI*3/2,0,!1),w===u&&(x.lineTo(O,(S-M)/2),x.lineTo(O+C,S/2),x.lineTo(O,(S+M)/2)),x.lineTo(O,S-A),x.arc(O-A,S-A,A,0,Math.PI/2,!1),w===d&&(x.lineTo((O+C)/2,S),x.lineTo(O/2,S+M),x.lineTo((O-C)/2,S)),x.lineTo(I,S),x.arc(I,S-I,I,Math.PI/2,Math.PI,!1),w===p&&(x.lineTo(0,(S+M)/2),x.lineTo(-1*C,S/2),x.lineTo(0,(S-M)/2)),x.lineTo(0,R),x.arc(R,R,R,Math.PI,Math.PI*3/2,!1),x.closePath(),x.fillStrokeShape(this)}getSelfRect(){var x=0,O=0,S=this.pointerWidth(),w=this.pointerHeight(),C=this.pointerDirection(),M=this.width(),P=this.height();return C===c?(O-=w,P+=w):C===d?P+=w:C===p?(x-=S*1.5,M+=S):C===u&&(M+=S*1.5),{x,y:O,width:M,height:P}}}return km.Tag=y,y.prototype.className="Tag",(0,s._registerNode)(y),r.Factory.addGetterSetter(y,"pointerDirection",l),r.Factory.addGetterSetter(y,"pointerWidth",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(y,"pointerHeight",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(y,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),km}var o1={},pW;function Kte(){if(pW)return o1;pW=1,Object.defineProperty(o1,"__esModule",{value:!0}),o1.Rect=void 0;const r=Zi(),e=js(),i=qi(),n=Wr(),s=nn();let o=class extends e.Shape{_sceneFunc(l){var c=this.cornerRadius(),u=this.width(),d=this.height();l.beginPath(),c?n.Util.drawRoundedRectPath(l,u,d,c):l.rect(0,0,u,d),l.closePath(),l.fillStrokeShape(this)}};return o1.Rect=o,o.prototype.className="Rect",(0,i._registerNode)(o),r.Factory.addGetterSetter(o,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),o1}var a1={},mW;function _Ne(){if(mW)return a1;mW=1,Object.defineProperty(a1,"__esModule",{value:!0}),a1.RegularPolygon=void 0;const r=Zi(),e=js(),i=nn(),n=qi();let s=class extends e.Shape{_sceneFunc(a){const l=this._getPoints();a.beginPath(),a.moveTo(l[0].x,l[0].y);for(var c=1;c<l.length;c++)a.lineTo(l[c].x,l[c].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,l=this.attrs.radius||0,c=[];for(var u=0;u<a;u++)c.push({x:l*Math.sin(u*2*Math.PI/a),y:-1*l*Math.cos(u*2*Math.PI/a)});return c}getSelfRect(){const a=this._getPoints();var l=a[0].x,c=a[0].y,u=a[0].x,d=a[0].y;return a.forEach(p=>{l=Math.min(l,p.x),c=Math.max(c,p.x),u=Math.min(u,p.y),d=Math.max(d,p.y)}),{x:l,y:u,width:c-l,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return a1.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),r.Factory.addGetterSetter(s,"radius",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(s,"sides",0,(0,i.getNumberValidator)()),a1}var l1={},gW;function xNe(){if(gW)return l1;gW=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.Ring=void 0;const r=Zi(),e=js(),i=nn(),n=qi();var s=Math.PI*2;let o=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.innerRadius(),0,s,!1),l.moveTo(this.outerRadius(),0),l.arc(0,0,this.outerRadius(),s,0,!0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}};return l1.Ring=o,o.prototype.className="Ring",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(o),r.Factory.addGetterSetter(o,"innerRadius",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(o,"outerRadius",0,(0,i.getNumberValidator)()),l1}var h1={},vW;function bNe(){if(vW)return h1;vW=1,Object.defineProperty(h1,"__esModule",{value:!0}),h1.Sprite=void 0;const r=Zi(),e=js(),i=UV(),n=nn(),s=qi();class o extends e.Shape{constructor(l){super(l),this._updated=!0,this.anim=new i.Animation(()=>{var c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(l){var c=this.animation(),u=this.frameIndex(),d=u*4,p=this.animations()[c],m=this.frameOffsets(),g=p[d+0],y=p[d+1],_=p[d+2],x=p[d+3],O=this.image();if((this.hasFill()||this.hasStroke())&&(l.beginPath(),l.rect(0,0,_,x),l.closePath(),l.fillStrokeShape(this)),O)if(m){var S=m[c],w=u*2;l.drawImage(O,g,y,_,x,S[w+0],S[w+1],_,x)}else l.drawImage(O,g,y,_,x,0,0,_,x)}_hitFunc(l){var c=this.animation(),u=this.frameIndex(),d=u*4,p=this.animations()[c],m=this.frameOffsets(),g=p[d+2],y=p[d+3];if(l.beginPath(),m){var _=m[c],x=u*2;l.rect(_[x+0],_[x+1],g,y)}else l.rect(0,0,g,y);l.closePath(),l.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var l=this;this.interval=setInterval(function(){l._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var l=this.getLayer();this.anim.setLayers(l),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var l=this.frameIndex(),c=this.animation(),u=this.animations(),d=u[c],p=d.length/4;l<p-1?this.frameIndex(l+1):this.frameIndex(0)}}return h1.Sprite=o,o.prototype.className="Sprite",(0,s._registerNode)(o),r.Factory.addGetterSetter(o,"animation"),r.Factory.addGetterSetter(o,"animations"),r.Factory.addGetterSetter(o,"frameOffsets"),r.Factory.addGetterSetter(o,"image"),r.Factory.addGetterSetter(o,"frameIndex",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"frameRate",17,(0,n.getNumberValidator)()),r.Factory.backCompat(o,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),h1}var c1={},yW;function wNe(){if(yW)return c1;yW=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.Star=void 0;const r=Zi(),e=js(),i=nn(),n=qi();let s=class extends e.Shape{_sceneFunc(a){var l=this.innerRadius(),c=this.outerRadius(),u=this.numPoints();a.beginPath(),a.moveTo(0,0-c);for(var d=1;d<u*2;d++){var p=d%2===0?c:l,m=p*Math.sin(d*Math.PI/u),g=-1*p*Math.cos(d*Math.PI/u);a.lineTo(m,g)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return c1.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),r.Factory.addGetterSetter(s,"numPoints",5,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),c1}var Im={},_W;function Jte(){if(_W)return Im;_W=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.Text=Im.stringToArray=void 0;const r=Wr(),e=Zi(),i=js(),n=qi(),s=nn(),o=qi();function a(be){return Array.from(be)}Im.stringToArray=a;var l="auto",c="center",u="inherit",d="justify",p="Change.konva",m="2d",g="-",y="left",_="text",x="Text",O="top",S="bottom",w="middle",C="normal",M="px ",P=" ",R="right",k="rtl",I="word",A="char",D="none",V="…",B=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],L=B.length;function F(be){return be.split(",").map(pe=>{pe=pe.trim();const ae=pe.indexOf(" ")>=0,ye=pe.indexOf('"')>=0||pe.indexOf("'")>=0;return ae&&!ye&&(pe=`"${pe}"`),pe}).join(", ")}var $;function z(){return $||($=r.Util.createCanvasElement().getContext(m),$)}function H(be){be.fillText(this._partialText,this._partialTextX,this._partialTextY)}function K(be){be.setAttr("miterLimit",2),be.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function J(be){return be=be||{},!be.fillLinearGradientColorStops&&!be.fillRadialGradientColorStops&&!be.fillPatternImage&&(be.fill=be.fill||"black"),be}class ne extends i.Shape{constructor(pe){super(J(pe)),this._partialTextX=0,this._partialTextY=0;for(var ae=0;ae<L;ae++)this.on(B[ae]+p,this._setTextData);this._setTextData()}_sceneFunc(pe){var ae=this.textArr,ye=ae.length;if(this.text()){var _e=this.padding(),re=this.fontSize(),se=this.lineHeight()*re,Q=this.verticalAlign(),G=this.direction(),ie=0,he=this.align(),j=this.getWidth(),ee=this.letterSpacing(),de=this.fill(),ve=this.textDecoration(),Ce=ve.indexOf("underline")!==-1,Ie=ve.indexOf("line-through")!==-1,te;G=G===u?pe.direction:G;var q=se/2,me=w;if(n.Konva._fixTextRendering){var ge=this.measureSize("M");me="alphabetic",q=(ge.fontBoundingBoxAscent-ge.fontBoundingBoxDescent)/2+se/2}var Ae=0,Pe=0;for(G===k&&pe.setAttr("direction",G),pe.setAttr("font",this._getContextFont()),pe.setAttr("textBaseline",me),pe.setAttr("textAlign",y),Q===w?ie=(this.getHeight()-ye*se-_e*2)/2:Q===S&&(ie=this.getHeight()-ye*se-_e*2),pe.translate(_e,ie+_e),te=0;te<ye;te++){var Ae=0,Pe=0,je=ae[te],$e=je.text,We=je.width,ft=je.lastInParagraph,Ze,dt,Ut;if(pe.save(),he===R?Ae+=j-We-_e*2:he===c&&(Ae+=(j-We-_e*2)/2),Ce){pe.save(),pe.beginPath();let Ue=n.Konva._fixTextRendering?Math.round(re/4):Math.round(re/2);const xe=Ae,ze=q+Pe+Ue;pe.moveTo(xe,ze),Ze=$e.split(" ").length-1,dt=Ze===0,Ut=he===d&&!ft?j-_e*2:We,pe.lineTo(xe+Math.round(Ut),ze),pe.lineWidth=re/15;const Qe=this._getLinearGradient();pe.strokeStyle=Qe||de,pe.stroke(),pe.restore()}if(Ie){pe.save(),pe.beginPath();let Ue=n.Konva._fixTextRendering?-Math.round(re/4):0;pe.moveTo(Ae,q+Pe+Ue),Ze=$e.split(" ").length-1,dt=Ze===0,Ut=he===d&&ft&&!dt?j-_e*2:We,pe.lineTo(Ae+Math.round(Ut),q+Pe+Ue),pe.lineWidth=re/15;const xe=this._getLinearGradient();pe.strokeStyle=xe||de,pe.stroke(),pe.restore()}if(G!==k&&(ee!==0||he===d)){Ze=$e.split(" ").length-1;for(var zt=a($e),_t=0;_t<zt.length;_t++){var ni=zt[_t];ni===" "&&!ft&&he===d&&(Ae+=(j-_e*2-We)/Ze),this._partialTextX=Ae,this._partialTextY=q+Pe,this._partialText=ni,pe.fillStrokeShape(this),Ae+=this.measureSize(ni).width+ee}}else ee!==0&&pe.setAttr("letterSpacing",`${ee}px`),this._partialTextX=Ae,this._partialTextY=q+Pe,this._partialText=$e,pe.fillStrokeShape(this);pe.restore(),ye>1&&(q+=se)}}}_hitFunc(pe){var ae=this.getWidth(),ye=this.getHeight();pe.beginPath(),pe.rect(0,0,ae,ye),pe.closePath(),pe.fillStrokeShape(this)}setText(pe){var ae=r.Util._isString(pe)?pe:pe==null?"":pe+"";return this._setAttr(_,ae),this}getWidth(){var pe=this.attrs.width===l||this.attrs.width===void 0;return pe?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var pe=this.attrs.height===l||this.attrs.height===void 0;return pe?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(pe){var ae=z(),ye=this.fontSize(),_e;return ae.save(),ae.font=this._getContextFont(),_e=ae.measureText(pe),ae.restore(),{actualBoundingBoxAscent:_e.actualBoundingBoxAscent,actualBoundingBoxDescent:_e.actualBoundingBoxDescent,actualBoundingBoxLeft:_e.actualBoundingBoxLeft,actualBoundingBoxRight:_e.actualBoundingBoxRight,alphabeticBaseline:_e.alphabeticBaseline,emHeightAscent:_e.emHeightAscent,emHeightDescent:_e.emHeightDescent,fontBoundingBoxAscent:_e.fontBoundingBoxAscent,fontBoundingBoxDescent:_e.fontBoundingBoxDescent,hangingBaseline:_e.hangingBaseline,ideographicBaseline:_e.ideographicBaseline,width:_e.width,height:ye}}_getContextFont(){return this.fontStyle()+P+this.fontVariant()+P+(this.fontSize()+M)+F(this.fontFamily())}_addTextLine(pe){this.align()===d&&(pe=pe.trim());var ye=this._getTextWidth(pe);return this.textArr.push({text:pe,width:ye,lastInParagraph:!1})}_getTextWidth(pe){var ae=this.letterSpacing(),ye=pe.length;return z().measureText(pe).width+(ye?ae*(ye-1):0)}_setTextData(){var pe=this.text().split(`
`),ae=+this.fontSize(),ye=0,_e=this.lineHeight()*ae,re=this.attrs.width,se=this.attrs.height,Q=re!==l&&re!==void 0,G=se!==l&&se!==void 0,ie=this.padding(),he=re-ie*2,j=se-ie*2,ee=0,de=this.wrap(),ve=de!==D,Ce=de!==A&&ve,Ie=this.ellipsis();this.textArr=[],z().font=this._getContextFont();for(var te=Ie?this._getTextWidth(V):0,q=0,me=pe.length;q<me;++q){var ge=pe[q],Ae=this._getTextWidth(ge);if(Q&&Ae>he)for(;ge.length>0;){for(var Pe=0,je=ge.length,$e="",We=0;Pe<je;){var ft=Pe+je>>>1,Ze=ge.slice(0,ft+1),dt=this._getTextWidth(Ze)+te;dt<=he?(Pe=ft+1,$e=Ze,We=dt):je=ft}if($e){if(Ce){var Ut,zt=ge[$e.length],_t=zt===P||zt===g;_t&&We<=he?Ut=$e.length:Ut=Math.max($e.lastIndexOf(P),$e.lastIndexOf(g))+1,Ut>0&&(Pe=Ut,$e=$e.slice(0,Pe),We=this._getTextWidth($e))}$e=$e.trimRight(),this._addTextLine($e),ye=Math.max(ye,We),ee+=_e;var ni=this._shouldHandleEllipsis(ee);if(ni){this._tryToAddEllipsisToLastLine();break}if(ge=ge.slice(Pe),ge=ge.trimLeft(),ge.length>0&&(Ae=this._getTextWidth(ge),Ae<=he)){this._addTextLine(ge),ee+=_e,ye=Math.max(ye,Ae);break}}else break}else this._addTextLine(ge),ee+=_e,ye=Math.max(ye,Ae),this._shouldHandleEllipsis(ee)&&q<me-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),G&&ee+_e>j)break}this.textHeight=ae,this.textWidth=ye}_shouldHandleEllipsis(pe){var ae=+this.fontSize(),ye=this.lineHeight()*ae,_e=this.attrs.height,re=_e!==l&&_e!==void 0,se=this.padding(),Q=_e-se*2,G=this.wrap(),ie=G!==D;return!ie||re&&pe+ye>Q}_tryToAddEllipsisToLastLine(){var pe=this.attrs.width,ae=pe!==l&&pe!==void 0,ye=this.padding(),_e=pe-ye*2,re=this.ellipsis(),se=this.textArr[this.textArr.length-1];if(!(!se||!re)){if(ae){var Q=this._getTextWidth(se.text+V)<_e;Q||(se.text=se.text.slice(0,se.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(se.text+V)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const pe=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ae=this.hasShadow();return pe&&ae?!0:super._useBufferCanvas()}}return Im.Text=ne,ne.prototype._fillFunc=H,ne.prototype._strokeFunc=K,ne.prototype.className=x,ne.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,o._registerNode)(ne),e.Factory.overWriteSetter(ne,"width",(0,s.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(ne,"height",(0,s.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(ne,"direction",u),e.Factory.addGetterSetter(ne,"fontFamily","Arial"),e.Factory.addGetterSetter(ne,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ne,"fontStyle",C),e.Factory.addGetterSetter(ne,"fontVariant",C),e.Factory.addGetterSetter(ne,"padding",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ne,"align",y),e.Factory.addGetterSetter(ne,"verticalAlign",O),e.Factory.addGetterSetter(ne,"lineHeight",1,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ne,"wrap",I),e.Factory.addGetterSetter(ne,"ellipsis",!1,(0,s.getBooleanValidator)()),e.Factory.addGetterSetter(ne,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ne,"text","",(0,s.getStringValidator)()),e.Factory.addGetterSetter(ne,"textDecoration",""),Im}var u1={},xW;function ONe(){if(xW)return u1;xW=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.TextPath=void 0;const r=Wr(),e=Zi(),i=js(),n=zV(),s=Jte(),o=nn(),a=qi();var l="",c="normal";function u(m){m.fillText(this.partialText,0,0)}function d(m){m.strokeText(this.partialText,0,0)}let p=class extends i.Shape{constructor(g){super(g),this.dummyCanvas=r.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const y=this.pathLength;return g-1>y?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();var y=this.textDecoration(),_=this.fill(),x=this.fontSize(),O=this.glyphInfo;y==="underline"&&g.beginPath();for(var S=0;S<O.length;S++){g.save();var w=O[S].p0;g.translate(w.x,w.y),g.rotate(O[S].rotation),this.partialText=O[S].text,g.fillStrokeShape(this),y==="underline"&&(S===0&&g.moveTo(0,x/2+1),g.lineTo(x,x/2+1)),g.restore()}y==="underline"&&(g.strokeStyle=_,g.lineWidth=x/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();var y=this.glyphInfo;if(y.length>=1){var _=y[0].p0;g.moveTo(_.x,_.y)}for(var x=0;x<y.length;x++){var O=y[x].p1;g.lineTo(O.x,O.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){var y=this.dummyCanvas,_=y.getContext("2d");_.save(),_.font=this._getContextFont();var x=_.measureText(g);return _.restore(),{width:x.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:y}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=y,this.glyphInfo=[],!this.attrs.data)return null;const _=this.letterSpacing(),x=this.align(),O=this.kerningFunc(),S=Math.max(this.textWidth+((this.attrs.text||"").length-1)*_,0);let w=0;x==="center"&&(w=Math.max(0,this.pathLength/2-S/2)),x==="right"&&(w=Math.max(0,this.pathLength-S));const C=(0,s.stringToArray)(this.text());let M=w;for(var P=0;P<C.length;P++){const R=this._getPointAtLength(M);if(!R)return;let k=this._getTextSize(C[P]).width+_;if(C[P]===" "&&x==="justify"){const L=this.text().split(" ").length-1;k+=(this.pathLength-S)/L}const I=this._getPointAtLength(M+k);if(!I)return;const A=n.Path.getLineLength(R.x,R.y,I.x,I.y);let D=0;if(O)try{D=O(C[P-1],C[P])*this.fontSize()}catch{D=0}R.x+=D,I.x+=D,this.textWidth+=D;const V=n.Path.getPointOnLine(D+A/2,R.x,R.y,I.x,I.y),B=Math.atan2(I.y-R.y,I.x-R.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:C[P],rotation:B,p0:R,p1:I}),M+=k}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var g=[];this.glyphInfo.forEach(function(P){g.push(P.p0.x),g.push(P.p0.y),g.push(P.p1.x),g.push(P.p1.y)});for(var y=g[0]||0,_=g[0]||0,x=g[1]||0,O=g[1]||0,S,w,C=0;C<g.length/2;C++)S=g[C*2],w=g[C*2+1],y=Math.min(y,S),_=Math.max(_,S),x=Math.min(x,w),O=Math.max(O,w);var M=this.fontSize();return{x:y-M/2,y:x-M/2,width:_-y+M,height:O-x+M}}destroy(){return r.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return u1.TextPath=p,p.prototype._fillFunc=u,p.prototype._strokeFunc=d,p.prototype._fillFuncHit=u,p.prototype._strokeFuncHit=d,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(p),e.Factory.addGetterSetter(p,"data"),e.Factory.addGetterSetter(p,"fontFamily","Arial"),e.Factory.addGetterSetter(p,"fontSize",12,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(p,"fontStyle",c),e.Factory.addGetterSetter(p,"align","left"),e.Factory.addGetterSetter(p,"letterSpacing",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(p,"textBaseline","middle"),e.Factory.addGetterSetter(p,"fontVariant",c),e.Factory.addGetterSetter(p,"text",l),e.Factory.addGetterSetter(p,"textDecoration",null),e.Factory.addGetterSetter(p,"kerningFunc",null),u1}var d1={},bW;function SNe(){if(bW)return d1;bW=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.Transformer=void 0;const r=Wr(),e=Zi(),i=Zr(),n=js(),s=Kte(),o=$V(),a=qi(),l=nn(),c=qi();var u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(I=>I+`.${u}`).join(" "),p="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const y="ontouchstart"in a.Konva._global;function _(I,A,D){if(I==="rotater")return D;A+=r.Util.degToRad(g[I]||0);var V=(r.Util.radToDeg(A)%360+360)%360;return r.Util._inRange(V,315+22.5,360)||r.Util._inRange(V,0,22.5)?"ns-resize":r.Util._inRange(V,45-22.5,45+22.5)?"nesw-resize":r.Util._inRange(V,90-22.5,90+22.5)?"ew-resize":r.Util._inRange(V,135-22.5,135+22.5)?"nwse-resize":r.Util._inRange(V,180-22.5,180+22.5)?"ns-resize":r.Util._inRange(V,225-22.5,225+22.5)?"nesw-resize":r.Util._inRange(V,270-22.5,270+22.5)?"ew-resize":r.Util._inRange(V,315-22.5,315+22.5)?"nwse-resize":(r.Util.error("Transformer has unknown angle for cursor detection: "+V),"pointer")}var x=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],O=1e8;function S(I){return{x:I.x+I.width/2*Math.cos(I.rotation)+I.height/2*Math.sin(-I.rotation),y:I.y+I.height/2*Math.cos(I.rotation)+I.width/2*Math.sin(I.rotation)}}function w(I,A,D){const V=D.x+(I.x-D.x)*Math.cos(A)-(I.y-D.y)*Math.sin(A),B=D.y+(I.x-D.x)*Math.sin(A)+(I.y-D.y)*Math.cos(A);return{...I,rotation:I.rotation+A,x:V,y:B}}function C(I,A){const D=S(I);return w(I,A,D)}function M(I,A,D){let V=A;for(let B=0;B<I.length;B++){const L=a.Konva.getAngle(I[B]),F=Math.abs(L-A)%(Math.PI*2);Math.min(F,Math.PI*2-F)<D&&(V=L)}return V}let P=0,R=class extends o.Group{constructor(A){super(A),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(A){return this.setNode(A),this}setNode(A){return r.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([A])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(A=[]){this._nodes&&this._nodes.length&&this.detach();const D=A.filter(B=>B.isAncestorOf(this)?(r.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=A=D,A.length===1&&this.useSingleNodeRotation()?this.rotation(A[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(B=>{const L=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},F=B._attrsAffectingSize.map($=>$+"Change."+this._getEventNamespace()).join(" ");B.on(F,L),B.on(m.map($=>$+`.${this._getEventNamespace()}`).join(" "),L),B.on(`absoluteTransformChange.${this._getEventNamespace()}`,L),this._proxyDrag(B)}),this._resetTransformCache();var V=!!this.findOne(".top-left");return V&&this.update(),this}_proxyDrag(A){let D;A.on(`dragstart.${this._getEventNamespace()}`,V=>{D=A.getAbsolutePosition(),!this.isDragging()&&A!==this.findOne(".back")&&this.startDrag(V,!1)}),A.on(`dragmove.${this._getEventNamespace()}`,V=>{if(!D)return;const B=A.getAbsolutePosition(),L=B.x-D.x,F=B.y-D.y;this.nodes().forEach($=>{if($===A||$.isDragging())return;const z=$.getAbsolutePosition();$.setAbsolutePosition({x:z.x+L,y:z.y+F}),$.startDrag(V)}),D=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(A=>{A.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(p),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(p,this.__getNodeRect)}__getNodeShape(A,D=this.rotation(),V){var B=A.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),L=A.getAbsoluteScale(V),F=A.getAbsolutePosition(V),$=B.x*L.x-A.offsetX()*L.x,z=B.y*L.y-A.offsetY()*L.y;const H=(a.Konva.getAngle(A.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),K={x:F.x+$*Math.cos(H)+z*Math.sin(-H),y:F.y+z*Math.cos(H)+$*Math.sin(H),width:B.width*L.x,height:B.height*L.y,rotation:H};return w(K,-a.Konva.getAngle(D),{x:0,y:0})}__getNodeRect(){var A=this.getNode();if(!A)return{x:-O,y:-O,width:0,height:0,rotation:0};const D=[];this.nodes().map(H=>{const K=H.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var J=[{x:K.x,y:K.y},{x:K.x+K.width,y:K.y},{x:K.x+K.width,y:K.y+K.height},{x:K.x,y:K.y+K.height}],ne=H.getAbsoluteTransform();J.forEach(function(be){var pe=ne.point(be);D.push(pe)})});const V=new r.Transform;V.rotate(-a.Konva.getAngle(this.rotation()));var B=1/0,L=1/0,F=-1/0,$=-1/0;D.forEach(function(H){var K=V.point(H);B===void 0&&(B=F=K.x,L=$=K.y),B=Math.min(B,K.x),L=Math.min(L,K.y),F=Math.max(F,K.x),$=Math.max($,K.y)}),V.invert();const z=V.point({x:B,y:L});return{x:z.x,y:z.y,width:F-B,height:$-L,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),x.forEach(A=>{this._createAnchor(A)}),this._createAnchor("rotater")}_createAnchor(A){var D=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:A+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:y?10:"auto"}),V=this;D.on("mousedown touchstart",function(B){V._handleMouseDown(B)}),D.on("dragstart",B=>{D.stopDrag(),B.cancelBubble=!0}),D.on("dragend",B=>{B.cancelBubble=!0}),D.on("mouseenter",()=>{var B=a.Konva.getAngle(this.rotation()),L=this.rotateAnchorCursor(),F=_(A,B,L);D.getStage().content&&(D.getStage().content.style.cursor=F),this._cursorChange=!0}),D.on("mouseout",()=>{D.getStage().content&&(D.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(D)}_createBack(){var A=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(D,V){var B=V.getParent(),L=B.padding();D.beginPath(),D.rect(-L,-L,V.width()+L*2,V.height()+L*2),D.moveTo(V.width()/2,-L),B.rotateEnabled()&&B.rotateLineVisible()&&D.lineTo(V.width()/2,-B.rotateAnchorOffset()*r.Util._sign(V.height())-L),D.fillStrokeShape(V)},hitFunc:(D,V)=>{if(this.shouldOverdrawWholeArea()){var B=this.padding();D.beginPath(),D.rect(-B,-B,V.width()+B*2,V.height()+B*2),D.fillStrokeShape(V)}}});this.add(A),this._proxyDrag(A),A.on("dragstart",D=>{D.cancelBubble=!0}),A.on("dragmove",D=>{D.cancelBubble=!0}),A.on("dragend",D=>{D.cancelBubble=!0}),this.on("dragmove",D=>{this.update()})}_handleMouseDown(A){if(!this._transforming){this._movingAnchorName=A.target.name().split(" ")[0];var D=this._getNodeRect(),V=D.width,B=D.height,L=Math.sqrt(Math.pow(V,2)+Math.pow(B,2));this.sin=Math.abs(B/L),this.cos=Math.abs(V/L),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var F=A.target.getAbsolutePosition(),$=A.target.getStage().getPointerPosition();this._anchorDragOffset={x:$.x-F.x,y:$.y-F.y},P++,this._fire("transformstart",{evt:A.evt,target:this.getNode()}),this._nodes.forEach(z=>{z._fire("transformstart",{evt:A.evt,target:z})})}}_handleMouseMove(A){var D,V,B,L=this.findOne("."+this._movingAnchorName),F=L.getStage();F.setPointersPositions(A);const $=F.getPointerPosition();let z={x:$.x-this._anchorDragOffset.x,y:$.y-this._anchorDragOffset.y};const H=L.getAbsolutePosition();this.anchorDragBoundFunc()&&(z=this.anchorDragBoundFunc()(H,z,A)),L.setAbsolutePosition(z);const K=L.getAbsolutePosition();if(!(H.x===K.x&&H.y===K.y)){if(this._movingAnchorName==="rotater"){var J=this._getNodeRect();D=L.x()-J.width/2,V=-L.y()+J.height/2;let Ie=Math.atan2(-V,D)+Math.PI/2;J.height<0&&(Ie-=Math.PI);var ne=a.Konva.getAngle(this.rotation());const te=ne+Ie,q=a.Konva.getAngle(this.rotationSnapTolerance()),ge=M(this.rotationSnaps(),te,q)-J.rotation,Ae=C(J,ge);this._fitNodesInto(Ae,A);return}var be=this.shiftBehavior(),pe;be==="inverted"?pe=this.keepRatio()&&!A.shiftKey:be==="none"?pe=this.keepRatio():pe=this.keepRatio()||A.shiftKey;var se=this.centeredScaling()||A.altKey;if(this._movingAnchorName==="top-left"){if(pe){var ae=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};B=Math.sqrt(Math.pow(ae.x-L.x(),2)+Math.pow(ae.y-L.y(),2));var ye=this.findOne(".top-left").x()>ae.x?-1:1,_e=this.findOne(".top-left").y()>ae.y?-1:1;D=B*this.cos*ye,V=B*this.sin*_e,this.findOne(".top-left").x(ae.x-D),this.findOne(".top-left").y(ae.y-V)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(L.y());else if(this._movingAnchorName==="top-right"){if(pe){var ae=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};B=Math.sqrt(Math.pow(L.x()-ae.x,2)+Math.pow(ae.y-L.y(),2));var ye=this.findOne(".top-right").x()<ae.x?-1:1,_e=this.findOne(".top-right").y()>ae.y?-1:1;D=B*this.cos*ye,V=B*this.sin*_e,this.findOne(".top-right").x(ae.x+D),this.findOne(".top-right").y(ae.y-V)}var re=L.position();this.findOne(".top-left").y(re.y),this.findOne(".bottom-right").x(re.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(L.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(L.x());else if(this._movingAnchorName==="bottom-left"){if(pe){var ae=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};B=Math.sqrt(Math.pow(ae.x-L.x(),2)+Math.pow(L.y()-ae.y,2));var ye=ae.x<L.x()?-1:1,_e=L.y()<ae.y?-1:1;D=B*this.cos*ye,V=B*this.sin*_e,L.x(ae.x-D),L.y(ae.y+V)}re=L.position(),this.findOne(".top-left").x(re.x),this.findOne(".bottom-right").y(re.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(L.y());else if(this._movingAnchorName==="bottom-right"){if(pe){var ae=se?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};B=Math.sqrt(Math.pow(L.x()-ae.x,2)+Math.pow(L.y()-ae.y,2));var ye=this.findOne(".bottom-right").x()<ae.x?-1:1,_e=this.findOne(".bottom-right").y()<ae.y?-1:1;D=B*this.cos*ye,V=B*this.sin*_e,this.findOne(".bottom-right").x(ae.x+D),this.findOne(".bottom-right").y(ae.y+V)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var se=this.centeredScaling()||A.altKey;if(se){var Q=this.findOne(".top-left"),G=this.findOne(".bottom-right"),ie=Q.x(),he=Q.y(),j=this.getWidth()-G.x(),ee=this.getHeight()-G.y();G.move({x:-ie,y:-he}),Q.move({x:j,y:ee})}var de=this.findOne(".top-left").getAbsolutePosition();D=de.x,V=de.y;var ve=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Ce=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:D,y:V,width:ve,height:Ce,rotation:a.Konva.getAngle(this.rotation())},A)}}_handleMouseUp(A){this._removeEvents(A)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(A){var D;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var V=this.getNode();P--,this._fire("transformend",{evt:A,target:V}),(D=this.getLayer())===null||D===void 0||D.batchDraw(),V&&this._nodes.forEach(B=>{var L;B._fire("transformend",{evt:A,target:B}),(L=B.getLayer())===null||L===void 0||L.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(A,D){var V=this._getNodeRect();const B=1;if(r.Util._inRange(A.width,-this.padding()*2-B,B)){this.update();return}if(r.Util._inRange(A.height,-this.padding()*2-B,B)){this.update();return}var L=new r.Transform;if(L.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("left")>=0){const ne=L.point({x:-this.padding()*2,y:0});A.x+=ne.x,A.y+=ne.y,A.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=ne.x,this._anchorDragOffset.y-=ne.y}else if(this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("right")>=0){const ne=L.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=ne.x,this._anchorDragOffset.y-=ne.y,A.width+=this.padding()*2}if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("top")>=0){const ne=L.point({x:0,y:-this.padding()*2});A.x+=ne.x,A.y+=ne.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=ne.x,this._anchorDragOffset.y-=ne.y,A.height+=this.padding()*2}else if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const ne=L.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=ne.x,this._anchorDragOffset.y-=ne.y,A.height+=this.padding()*2}if(this.boundBoxFunc()){const ne=this.boundBoxFunc()(V,A);ne?A=ne:r.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const F=1e7,$=new r.Transform;$.translate(V.x,V.y),$.rotate(V.rotation),$.scale(V.width/F,V.height/F);const z=new r.Transform,H=A.width/F,K=A.height/F;this.flipEnabled()===!1?(z.translate(A.x,A.y),z.rotate(A.rotation),z.translate(A.width<0?A.width:0,A.height<0?A.height:0),z.scale(Math.abs(H),Math.abs(K))):(z.translate(A.x,A.y),z.rotate(A.rotation),z.scale(H,K));const J=z.multiply($.invert());this._nodes.forEach(ne=>{var be;const pe=ne.getParent().getAbsoluteTransform(),ae=ne.getTransform().copy();ae.translate(ne.offsetX(),ne.offsetY());const ye=new r.Transform;ye.multiply(pe.copy().invert()).multiply(J).multiply(pe).multiply(ae);const _e=ye.decompose();ne.setAttrs(_e),(be=ne.getLayer())===null||be===void 0||be.batchDraw()}),this.rotation(r.Util._getRotation(A.rotation)),this._nodes.forEach(ne=>{this._fire("transform",{evt:D,target:ne}),ne._fire("transform",{evt:D,target:ne})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(A,D){this.findOne(A).setAttrs(D)}update(){var A,D=this._getNodeRect();this.rotation(r.Util._getRotation(D.rotation));var V=D.width,B=D.height,L=this.enabledAnchors(),F=this.resizeEnabled(),$=this.padding(),z=this.anchorSize();const H=this.find("._anchor");H.forEach(J=>{J.setAttrs({width:z,height:z,offsetX:z/2,offsetY:z/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:z/2+$,offsetY:z/2+$,visible:F&&L.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:V/2,y:0,offsetY:z/2+$,visible:F&&L.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:V,y:0,offsetX:z/2-$,offsetY:z/2+$,visible:F&&L.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:B/2,offsetX:z/2+$,visible:F&&L.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:V,y:B/2,offsetX:z/2-$,visible:F&&L.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:B,offsetX:z/2+$,offsetY:z/2-$,visible:F&&L.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:V/2,y:B,offsetY:z/2-$,visible:F&&L.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:V,y:B,offsetX:z/2-$,offsetY:z/2-$,visible:F&&L.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:V/2,y:-this.rotateAnchorOffset()*r.Util._sign(B)-$,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:V,height:B,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const K=this.anchorStyleFunc();K&&H.forEach(J=>{K(J)}),(A=this.getLayer())===null||A===void 0||A.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var A=this.findOne("."+this._movingAnchorName);A&&A.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),o.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(A){var D=i.Node.prototype.clone.call(this,A);return D}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};d1.Transformer=R,R.isTransforming=()=>P>0;function k(I){return I instanceof Array||r.Util.warn("enabledAnchors value should be an array"),I instanceof Array&&I.forEach(function(A){x.indexOf(A)===-1&&r.Util.warn("Unknown anchor name: "+A+". Available names are: "+x.join(", "))}),I||[]}return R.prototype.className="Transformer",(0,c._registerNode)(R),e.Factory.addGetterSetter(R,"enabledAnchors",x,k),e.Factory.addGetterSetter(R,"flipEnabled",!0,(0,l.getBooleanValidator)()),e.Factory.addGetterSetter(R,"resizeEnabled",!0),e.Factory.addGetterSetter(R,"anchorSize",10,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateEnabled",!0),e.Factory.addGetterSetter(R,"rotateLineVisible",!0),e.Factory.addGetterSetter(R,"rotationSnaps",[]),e.Factory.addGetterSetter(R,"rotateAnchorOffset",50,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(R,"rotationSnapTolerance",5,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderEnabled",!0),e.Factory.addGetterSetter(R,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"anchorStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"anchorFill","white"),e.Factory.addGetterSetter(R,"anchorCornerRadius",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(R,"borderStrokeWidth",1,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"borderDash"),e.Factory.addGetterSetter(R,"keepRatio",!0),e.Factory.addGetterSetter(R,"shiftBehavior","default"),e.Factory.addGetterSetter(R,"centeredScaling",!1),e.Factory.addGetterSetter(R,"ignoreStroke",!1),e.Factory.addGetterSetter(R,"padding",0,(0,l.getNumberValidator)()),e.Factory.addGetterSetter(R,"node"),e.Factory.addGetterSetter(R,"nodes"),e.Factory.addGetterSetter(R,"boundBoxFunc"),e.Factory.addGetterSetter(R,"anchorDragBoundFunc"),e.Factory.addGetterSetter(R,"anchorStyleFunc"),e.Factory.addGetterSetter(R,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(R,"useSingleNodeRotation",!0),e.Factory.backCompat(R,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),d1}var f1={},wW;function CNe(){if(wW)return f1;wW=1,Object.defineProperty(f1,"__esModule",{value:!0}),f1.Wedge=void 0;const r=Zi(),e=js(),i=qi(),n=nn(),s=qi();let o=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),l.lineTo(0,0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(l){this.radius(l/2)}setHeight(l){this.radius(l/2)}};return f1.Wedge=o,o.prototype.className="Wedge",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),r.Factory.addGetterSetter(o,"radius",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"angle",0,(0,n.getNumberValidator)()),r.Factory.addGetterSetter(o,"clockwise",!1),r.Factory.backCompat(o,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),f1}var p1={},OW;function TNe(){if(OW)return p1;OW=1,Object.defineProperty(p1,"__esModule",{value:!0}),p1.Blur=void 0;const r=Zi(),e=Zr(),i=nn();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(c,u){var d=c.data,p=c.width,m=c.height,g,y,_,x,O,S,w,C,M,P,R,k,I,A,D,V,B,L,F,$,z,H,K,J,ne=u+u+1,be=p-1,pe=m-1,ae=u+1,ye=ae*(ae+1)/2,_e=new n,re=null,se=_e,Q=null,G=null,ie=s[u],he=o[u];for(_=1;_<ne;_++)se=se.next=new n,_===ae&&(re=se);for(se.next=_e,w=S=0,y=0;y<m;y++){for(V=B=L=F=C=M=P=R=0,k=ae*($=d[S]),I=ae*(z=d[S+1]),A=ae*(H=d[S+2]),D=ae*(K=d[S+3]),C+=ye*$,M+=ye*z,P+=ye*H,R+=ye*K,se=_e,_=0;_<ae;_++)se.r=$,se.g=z,se.b=H,se.a=K,se=se.next;for(_=1;_<ae;_++)x=S+((be<_?be:_)<<2),C+=(se.r=$=d[x])*(J=ae-_),M+=(se.g=z=d[x+1])*J,P+=(se.b=H=d[x+2])*J,R+=(se.a=K=d[x+3])*J,V+=$,B+=z,L+=H,F+=K,se=se.next;for(Q=_e,G=re,g=0;g<p;g++)d[S+3]=K=R*ie>>he,K!==0?(K=255/K,d[S]=(C*ie>>he)*K,d[S+1]=(M*ie>>he)*K,d[S+2]=(P*ie>>he)*K):d[S]=d[S+1]=d[S+2]=0,C-=k,M-=I,P-=A,R-=D,k-=Q.r,I-=Q.g,A-=Q.b,D-=Q.a,x=w+((x=g+u+1)<be?x:be)<<2,V+=Q.r=d[x],B+=Q.g=d[x+1],L+=Q.b=d[x+2],F+=Q.a=d[x+3],C+=V,M+=B,P+=L,R+=F,Q=Q.next,k+=$=G.r,I+=z=G.g,A+=H=G.b,D+=K=G.a,V-=$,B-=z,L-=H,F-=K,G=G.next,S+=4;w+=p}for(g=0;g<p;g++){for(B=L=F=V=M=P=R=C=0,S=g<<2,k=ae*($=d[S]),I=ae*(z=d[S+1]),A=ae*(H=d[S+2]),D=ae*(K=d[S+3]),C+=ye*$,M+=ye*z,P+=ye*H,R+=ye*K,se=_e,_=0;_<ae;_++)se.r=$,se.g=z,se.b=H,se.a=K,se=se.next;for(O=p,_=1;_<=u;_++)S=O+g<<2,C+=(se.r=$=d[S])*(J=ae-_),M+=(se.g=z=d[S+1])*J,P+=(se.b=H=d[S+2])*J,R+=(se.a=K=d[S+3])*J,V+=$,B+=z,L+=H,F+=K,se=se.next,_<pe&&(O+=p);for(S=g,Q=_e,G=re,y=0;y<m;y++)x=S<<2,d[x+3]=K=R*ie>>he,K>0?(K=255/K,d[x]=(C*ie>>he)*K,d[x+1]=(M*ie>>he)*K,d[x+2]=(P*ie>>he)*K):d[x]=d[x+1]=d[x+2]=0,C-=k,M-=I,P-=A,R-=D,k-=Q.r,I-=Q.g,A-=Q.b,D-=Q.a,x=g+((x=y+ae)<pe?x:pe)*p<<2,C+=V+=Q.r=d[x],M+=B+=Q.g=d[x+1],P+=L+=Q.b=d[x+2],R+=F+=Q.a=d[x+3],Q=Q.next,k+=$=G.r,I+=z=G.g,A+=H=G.b,D+=K=G.a,V-=$,B-=z,L-=H,F-=K,G=G.next,S+=p}}const l=function(u){var d=Math.round(this.blurRadius());d>0&&a(u,d)};return p1.Blur=l,r.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),p1}var m1={},SW;function ANe(){if(SW)return m1;SW=1,Object.defineProperty(m1,"__esModule",{value:!0}),m1.Brighten=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=this.brightness()*255,a=s.data,l=a.length,c;for(c=0;c<l;c+=4)a[c]+=o,a[c+1]+=o,a[c+2]+=o};return m1.Brighten=n,r.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),m1}var g1={},CW;function ENe(){if(CW)return g1;CW=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.Contrast=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=Math.pow((this.contrast()+100)/100,2),a=s.data,l=a.length,c=150,u=150,d=150,p;for(p=0;p<l;p+=4)c=a[p],u=a[p+1],d=a[p+2],c/=255,c-=.5,c*=o,c+=.5,c*=255,u/=255,u-=.5,u*=o,u+=.5,u*=255,d/=255,d-=.5,d*=o,d+=.5,d*=255,c=c<0?0:c>255?255:c,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,a[p]=c,a[p+1]=u,a[p+2]=d};return g1.Contrast=n,r.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),g1}var v1={},TW;function MNe(){if(TW)return v1;TW=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.Emboss=void 0;const r=Zi(),e=Zr(),i=Wr(),n=nn(),s=function(o){var a=this.embossStrength()*10,l=this.embossWhiteLevel()*255,c=this.embossDirection(),u=this.embossBlend(),d=0,p=0,m=o.data,g=o.width,y=o.height,_=g*4,x=y;switch(c){case"top-left":d=-1,p=-1;break;case"top":d=-1,p=0;break;case"top-right":d=-1,p=1;break;case"right":d=0,p=1;break;case"bottom-right":d=1,p=1;break;case"bottom":d=1,p=0;break;case"bottom-left":d=1,p=-1;break;case"left":d=0,p=-1;break;default:i.Util.error("Unknown emboss direction: "+c)}do{var O=(x-1)*_,S=d;x+S<1&&(S=0),x+S>y&&(S=0);var w=(x-1+S)*g*4,C=g;do{var M=O+(C-1)*4,P=p;C+P<1&&(P=0),C+P>g&&(P=0);var R=w+(C-1+P)*4,k=m[M]-m[R],I=m[M+1]-m[R+1],A=m[M+2]-m[R+2],D=k,V=D>0?D:-D,B=I>0?I:-I,L=A>0?A:-A;if(B>V&&(D=I),L>V&&(D=A),D*=a,u){var F=m[M]+D,$=m[M+1]+D,z=m[M+2]+D;m[M]=F>255?255:F<0?0:F,m[M+1]=$>255?255:$<0?0:$,m[M+2]=z>255?255:z<0?0:z}else{var H=l-D;H<0?H=0:H>255&&(H=255),m[M]=m[M+1]=m[M+2]=H}}while(--C)}while(--x)};return v1.Emboss=s,r.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"embossDirection","top-left",null,r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"embossBlend",!1,null,r.Factory.afterSetFilter),v1}var y1={},AW;function PNe(){if(AW)return y1;AW=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.Enhance=void 0;const r=Zi(),e=Zr(),i=nn();function n(o,a,l,c,u){var d=l-a,p=u-c,m;return d===0?c+p/2:p===0?c:(m=(o-a)/d,m=p*m+c,m)}const s=function(o){var a=o.data,l=a.length,c=a[0],u=c,d,p=a[1],m=p,g,y=a[2],_=y,x,O,S=this.enhance();if(S!==0){for(O=0;O<l;O+=4)d=a[O+0],d<c?c=d:d>u&&(u=d),g=a[O+1],g<p?p=g:g>m&&(m=g),x=a[O+2],x<y?y=x:x>_&&(_=x);u===c&&(u=255,c=0),m===p&&(m=255,p=0),_===y&&(_=255,y=0);var w,C,M,P,R,k,I,A,D;for(S>0?(C=u+S*(255-u),M=c-S*(c-0),R=m+S*(255-m),k=p-S*(p-0),A=_+S*(255-_),D=y-S*(y-0)):(w=(u+c)*.5,C=u+S*(u-w),M=c+S*(c-w),P=(m+p)*.5,R=m+S*(m-P),k=p+S*(p-P),I=(_+y)*.5,A=_+S*(_-I),D=y+S*(y-I)),O=0;O<l;O+=4)a[O+0]=n(a[O+0],c,u,M,C),a[O+1]=n(a[O+1],p,m,k,R),a[O+2]=n(a[O+2],y,_,D,A)}};return y1.Enhance=s,r.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),y1}var _1={},EW;function kNe(){if(EW)return _1;EW=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.Grayscale=void 0;const r=function(e){var i=e.data,n=i.length,s,o;for(s=0;s<n;s+=4)o=.34*i[s]+.5*i[s+1]+.16*i[s+2],i[s]=o,i[s+1]=o,i[s+2]=o};return _1.Grayscale=r,_1}var x1={},MW;function INe(){if(MW)return x1;MW=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.HSL=void 0;const r=Zi(),e=Zr(),i=nn();r.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter);const n=function(s){var o=s.data,a=o.length,l=1,c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,p,m=l*c*Math.cos(u*Math.PI/180),g=l*c*Math.sin(u*Math.PI/180),y=.299*l+.701*m+.167*g,_=.587*l-.587*m+.33*g,x=.114*l-.114*m-.497*g,O=.299*l-.299*m-.328*g,S=.587*l+.413*m+.035*g,w=.114*l-.114*m+.293*g,C=.299*l-.3*m+1.25*g,M=.587*l-.586*m-1.05*g,P=.114*l+.886*m-.2*g,R,k,I,A;for(p=0;p<a;p+=4)R=o[p+0],k=o[p+1],I=o[p+2],A=o[p+3],o[p+0]=y*R+_*k+x*I+d,o[p+1]=O*R+S*k+w*I+d,o[p+2]=C*R+M*k+P*I+d,o[p+3]=A};return x1.HSL=n,x1}var b1={},PW;function RNe(){if(PW)return b1;PW=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.HSV=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=s.data,a=o.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d,p=l*c*Math.cos(u*Math.PI/180),m=l*c*Math.sin(u*Math.PI/180),g=.299*l+.701*p+.167*m,y=.587*l-.587*p+.33*m,_=.114*l-.114*p-.497*m,x=.299*l-.299*p-.328*m,O=.587*l+.413*p+.035*m,S=.114*l-.114*p+.293*m,w=.299*l-.3*p+1.25*m,C=.587*l-.586*p-1.05*m,M=.114*l+.886*p-.2*m,P,R,k,I;for(d=0;d<a;d+=4)P=o[d+0],R=o[d+1],k=o[d+2],I=o[d+3],o[d+0]=g*P+y*R+_*k,o[d+1]=x*P+O*R+S*k,o[d+2]=w*P+C*R+M*k,o[d+3]=I};return b1.HSV=n,r.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),b1}var w1={},kW;function BNe(){if(kW)return w1;kW=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.Invert=void 0;const r=function(e){var i=e.data,n=i.length,s;for(s=0;s<n;s+=4)i[s]=255-i[s],i[s+1]=255-i[s+1],i[s+2]=255-i[s+2]};return w1.Invert=r,w1}var O1={},IW;function DNe(){if(IW)return O1;IW=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.Kaleidoscope=void 0;const r=Zi(),e=Zr(),i=Wr(),n=nn();var s=function(l,c,u){var d=l.data,p=c.data,m=l.width,g=l.height,y=u.polarCenterX||m/2,_=u.polarCenterY||g/2,x,O,S,w=0,C=0,M=0,P=0,R,k=Math.sqrt(y*y+_*_);O=m-y,S=g-_,R=Math.sqrt(O*O+S*S),k=R>k?R:k;var I=g,A=m,D,V,B=360/A*Math.PI/180,L,F;for(V=0;V<A;V+=1)for(L=Math.sin(V*B),F=Math.cos(V*B),D=0;D<I;D+=1)O=Math.floor(y+k*D/I*F),S=Math.floor(_+k*D/I*L),x=(S*m+O)*4,w=d[x+0],C=d[x+1],M=d[x+2],P=d[x+3],x=(V+D*m)*4,p[x+0]=w,p[x+1]=C,p[x+2]=M,p[x+3]=P},o=function(l,c,u){var d=l.data,p=c.data,m=l.width,g=l.height,y=u.polarCenterX||m/2,_=u.polarCenterY||g/2,x,O,S,w,C,M=0,P=0,R=0,k=0,I,A=Math.sqrt(y*y+_*_);O=m-y,S=g-_,I=Math.sqrt(O*O+S*S),A=I>A?I:A;var D=g,V=m,B,L,F=0,$,z;for(O=0;O<m;O+=1)for(S=0;S<g;S+=1)w=O-y,C=S-_,B=Math.sqrt(w*w+C*C)*D/A,L=(Math.atan2(C,w)*180/Math.PI+360+F)%360,L=L*V/360,$=Math.floor(L),z=Math.floor(B),x=(z*m+$)*4,M=d[x+0],P=d[x+1],R=d[x+2],k=d[x+3],x=(S*m+O)*4,p[x+0]=M,p[x+1]=P,p[x+2]=R,p[x+3]=k};const a=function(l){var c=l.width,u=l.height,d,p,m,g,y,_,x,O,S,w,C=Math.round(this.kaleidoscopePower()),M=Math.round(this.kaleidoscopeAngle()),P=Math.floor(c*(M%360)/360);if(!(C<1)){var R=i.Util.createCanvasElement();R.width=c,R.height=u;var k=R.getContext("2d").getImageData(0,0,c,u);i.Util.releaseCanvas(R),s(l,k,{polarCenterX:c/2,polarCenterY:u/2});for(var I=c/Math.pow(2,C);I<=8;)I=I*2,C-=1;I=Math.ceil(I);var A=I,D=0,V=A,B=1;for(P+I>c&&(D=A,V=0,B=-1),p=0;p<u;p+=1)for(d=D;d!==V;d+=B)m=Math.round(d+P)%c,S=(c*p+m)*4,y=k.data[S+0],_=k.data[S+1],x=k.data[S+2],O=k.data[S+3],w=(c*p+d)*4,k.data[w+0]=y,k.data[w+1]=_,k.data[w+2]=x,k.data[w+3]=O;for(p=0;p<u;p+=1)for(A=Math.floor(I),g=0;g<C;g+=1){for(d=0;d<A+1;d+=1)S=(c*p+d)*4,y=k.data[S+0],_=k.data[S+1],x=k.data[S+2],O=k.data[S+3],w=(c*p+A*2-d-1)*4,k.data[w+0]=y,k.data[w+1]=_,k.data[w+2]=x,k.data[w+3]=O;A*=2}o(k,l,{polarRotation:0})}};return O1.Kaleidoscope=a,r.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),O1}var S1={},RW;function LNe(){if(RW)return S1;RW=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.Mask=void 0;const r=Zi(),e=Zr(),i=nn();function n(m,g,y){var _=(y*m.width+g)*4,x=[];return x.push(m.data[_++],m.data[_++],m.data[_++],m.data[_++]),x}function s(m,g){return Math.sqrt(Math.pow(m[0]-g[0],2)+Math.pow(m[1]-g[1],2)+Math.pow(m[2]-g[2],2))}function o(m){for(var g=[0,0,0],y=0;y<m.length;y++)g[0]+=m[y][0],g[1]+=m[y][1],g[2]+=m[y][2];return g[0]/=m.length,g[1]/=m.length,g[2]/=m.length,g}function a(m,g){var y=n(m,0,0),_=n(m,m.width-1,0),x=n(m,0,m.height-1),O=n(m,m.width-1,m.height-1),S=g||10;if(s(y,_)<S&&s(_,O)<S&&s(O,x)<S&&s(x,y)<S){for(var w=o([_,y,O,x]),C=[],M=0;M<m.width*m.height;M++){var P=s(w,[m.data[M*4],m.data[M*4+1],m.data[M*4+2]]);C[M]=P<S?0:255}return C}}function l(m,g){for(var y=0;y<m.width*m.height;y++)m.data[4*y+3]=g[y]}function c(m,g,y){for(var _=[1,1,1,1,0,1,1,1,1],x=Math.round(Math.sqrt(_.length)),O=Math.floor(x/2),S=[],w=0;w<y;w++)for(var C=0;C<g;C++){for(var M=w*g+C,P=0,R=0;R<x;R++)for(var k=0;k<x;k++){var I=w+R-O,A=C+k-O;if(I>=0&&I<y&&A>=0&&A<g){var D=I*g+A,V=_[R*x+k];P+=m[D]*V}}S[M]=P===255*8?255:0}return S}function u(m,g,y){for(var _=[1,1,1,1,1,1,1,1,1],x=Math.round(Math.sqrt(_.length)),O=Math.floor(x/2),S=[],w=0;w<y;w++)for(var C=0;C<g;C++){for(var M=w*g+C,P=0,R=0;R<x;R++)for(var k=0;k<x;k++){var I=w+R-O,A=C+k-O;if(I>=0&&I<y&&A>=0&&A<g){var D=I*g+A,V=_[R*x+k];P+=m[D]*V}}S[M]=P>=255*4?255:0}return S}function d(m,g,y){for(var _=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],x=Math.round(Math.sqrt(_.length)),O=Math.floor(x/2),S=[],w=0;w<y;w++)for(var C=0;C<g;C++){for(var M=w*g+C,P=0,R=0;R<x;R++)for(var k=0;k<x;k++){var I=w+R-O,A=C+k-O;if(I>=0&&I<y&&A>=0&&A<g){var D=I*g+A,V=_[R*x+k];P+=m[D]*V}}S[M]=P}return S}const p=function(m){var g=this.threshold(),y=a(m,g);return y&&(y=c(y,m.width,m.height),y=u(y,m.width,m.height),y=d(y,m.width,m.height),l(m,y)),m};return S1.Mask=p,r.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),S1}var C1={},BW;function NNe(){if(BW)return C1;BW=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.Noise=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=this.noise()*255,a=s.data,l=a.length,c=o/2,u;for(u=0;u<l;u+=4)a[u+0]+=c-2*c*Math.random(),a[u+1]+=c-2*c*Math.random(),a[u+2]+=c-2*c*Math.random()};return C1.Noise=n,r.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),C1}var T1={},DW;function VNe(){if(DW)return T1;DW=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.Pixelate=void 0;const r=Zi(),e=Wr(),i=Zr(),n=nn(),s=function(o){var a=Math.ceil(this.pixelSize()),l=o.width,c=o.height,u,d,p,m,g,y,_,x=Math.ceil(l/a),O=Math.ceil(c/a),S,w,C,M,P,R,k,I=o.data;if(a<=0){e.Util.error("pixelSize value can not be <= 0");return}for(P=0;P<x;P+=1)for(R=0;R<O;R+=1){for(m=0,g=0,y=0,_=0,S=P*a,w=S+a,C=R*a,M=C+a,k=0,u=S;u<w;u+=1)if(!(u>=l))for(d=C;d<M;d+=1)d>=c||(p=(l*d+u)*4,m+=I[p+0],g+=I[p+1],y+=I[p+2],_+=I[p+3],k+=1);for(m=m/k,g=g/k,y=y/k,_=_/k,u=S;u<w;u+=1)if(!(u>=l))for(d=C;d<M;d+=1)d>=c||(p=(l*d+u)*4,I[p+0]=m,I[p+1]=g,I[p+2]=y,I[p+3]=_)}};return T1.Pixelate=s,r.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,n.getNumberValidator)(),r.Factory.afterSetFilter),T1}var A1={},LW;function FNe(){if(LW)return A1;LW=1,Object.defineProperty(A1,"__esModule",{value:!0}),A1.Posterize=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=Math.round(this.levels()*254)+1,a=s.data,l=a.length,c=255/o,u;for(u=0;u<l;u+=1)a[u]=Math.floor(a[u]/c)*c};return A1.Posterize=n,r.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),A1}var E1={},NW;function $Ne(){if(NW)return E1;NW=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.RGB=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=s.data,a=o.length,l=this.red(),c=this.green(),u=this.blue(),d,p;for(d=0;d<a;d+=4)p=(.34*o[d]+.5*o[d+1]+.16*o[d+2])/255,o[d]=p*l,o[d+1]=p*c,o[d+2]=p*u,o[d+3]=o[d+3]};return E1.RGB=n,r.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,r.Factory.afterSetFilter),E1}var M1={},VW;function UNe(){if(VW)return M1;VW=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.RGBA=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=s.data,a=o.length,l=this.red(),c=this.green(),u=this.blue(),d=this.alpha(),p,m;for(p=0;p<a;p+=4)m=1-d,o[p]=l*d+o[p]*m,o[p+1]=c*d+o[p+1]*m,o[p+2]=u*d+o[p+2]*m};return M1.RGBA=n,r.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),r.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,r.Factory.afterSetFilter),r.Factory.addGetterSetter(e.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),M1}var P1={},FW;function zNe(){if(FW)return P1;FW=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.Sepia=void 0;const r=function(e){var i=e.data,n=i.length,s,o,a,l;for(s=0;s<n;s+=4)o=i[s+0],a=i[s+1],l=i[s+2],i[s+0]=Math.min(255,o*.393+a*.769+l*.189),i[s+1]=Math.min(255,o*.349+a*.686+l*.168),i[s+2]=Math.min(255,o*.272+a*.534+l*.131)};return P1.Sepia=r,P1}var k1={},$W;function XNe(){if($W)return k1;$W=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.Solarize=void 0;const r=function(e){var i=e.data,n=e.width,s=e.height,o=n*4,a=s;do{var l=(a-1)*o,c=n;do{var u=l+(c-1)*4,d=i[u],p=i[u+1],m=i[u+2];d>127&&(d=255-d),p>127&&(p=255-p),m>127&&(m=255-m),i[u]=d,i[u+1]=p,i[u+2]=m}while(--c)}while(--a)};return k1.Solarize=r,k1}var I1={},UW;function WNe(){if(UW)return I1;UW=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.Threshold=void 0;const r=Zi(),e=Zr(),i=nn(),n=function(s){var o=this.threshold()*255,a=s.data,l=a.length,c;for(c=0;c<l;c+=1)a[c]=a[c]<o?0:255};return I1.Threshold=n,r.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),r.Factory.afterSetFilter),I1}var zW;function GNe(){if(zW)return Hx;zW=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.Konva=void 0;const r=dNe(),e=fNe(),i=mNe(),n=gNe(),s=vNe(),o=yNe(),a=Zte(),l=qte(),c=zV(),u=Kte(),d=_Ne(),p=xNe(),m=bNe(),g=wNe(),y=Jte(),_=ONe(),x=SNe(),O=CNe(),S=TNe(),w=ANe(),C=ENe(),M=MNe(),P=PNe(),R=kNe(),k=INe(),I=RNe(),A=BNe(),D=DNe(),V=LNe(),B=NNe(),L=VNe(),F=FNe(),$=$Ne(),z=UNe(),H=zNe(),K=XNe(),J=WNe();return Hx.Konva=r.Konva.Util._assign(r.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:o.Image,Label:a.Label,Tag:a.Tag,Line:l.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:p.Ring,Sprite:m.Sprite,Star:g.Star,Text:y.Text,TextPath:_.TextPath,Transformer:x.Transformer,Wedge:O.Wedge,Filters:{Blur:S.Blur,Brighten:w.Brighten,Contrast:C.Contrast,Emboss:M.Emboss,Enhance:P.Enhance,Grayscale:R.Grayscale,HSL:k.HSL,HSV:I.HSV,Invert:A.Invert,Kaleidoscope:D.Kaleidoscope,Mask:V.Mask,Noise:B.Noise,Pixelate:L.Pixelate,Posterize:F.Posterize,RGB:$.RGB,RGBA:z.RGBA,Sepia:H.Sepia,Solarize:K.Solarize,Threshold:J.Threshold}}),Hx}var HNe=_A.exports,XW;function eie(){if(XW)return _A.exports;XW=1,Object.defineProperty(HNe,"__esModule",{value:!0});const r=GNe();return _A.exports=r.Konva,_A.exports}var qf=eie();const QNe=eS(qf),jNe=Hbe({__proto__:null,default:QNe},[qf]);var tie={exports:{}};const iie=Mte(oCe);/*!
 * vue-konva v3.0.1 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(r,e){(function(n,s){r.exports=s(iie,eie())})(ph,function(i,n){return function(s){var o={};function a(l){if(o[l])return o[l].exports;var c=o[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,a),c.l=!0,c.exports}return a.m=s,a.c=o,a.d=function(l,c,u){a.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:u})},a.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},a.t=function(l,c){if(c&1&&(l=a(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var d in l)a.d(u,d,(function(p){return l[p]}).bind(null,d));return u},a.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(c,"a",c),c},a.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},a.p="",a(a.s=2)}([function(s,o){s.exports=i},function(s,o){s.exports=n},function(s,o,a){s.exports=a(3)},function(s,o,a){a.r(o);var l=a(0),c=a(1),u=a.n(c);function d(B){if(!u.a.autoDrawEnabled){var L=B.getLayer()||B.getStage();L&&L.batchDraw()}}var p={key:!0,style:!0,elm:!0,isRootInsert:!0},m=".vue-konva-event";function g(B,L,F,$){L===void 0&&(L={}),F===void 0&&(F={});var z=B.__konvaNode,H={},K=!1;for(var J in F)if(!p[J]){var ne=J.slice(0,2)==="on",be=F[J]!==L[J];if(ne&&be){var pe=J.substr(2).toLowerCase();pe.substr(0,7)==="content"&&(pe="content"+pe.substr(7,1).toUpperCase()+pe.substr(8)),z.off(pe+m,F[J])}var ae=!L.hasOwnProperty(J);ae&&z.setAttr(J,void 0)}for(var ye in L)if(!p[ye]){var _e=ye.slice(0,2)==="on",re=F[ye]!==L[ye];if(_e&&re){var se=ye.substr(2).toLowerCase();se.substr(0,7)==="content"&&(se="content"+se.substr(7,1).toUpperCase()+se.substr(8)),L[ye]&&(z.off(se+m),z.on(se+m,L[ye]))}!_e&&(L[ye]!==F[ye]||$&&L[ye]!==z.getAttr(ye))&&(K=!0,H[ye]=L[ye])}K&&(z.setAttrs(H),d(z))}var y="v";function _(B){function L(F){return F.__konvaNode?F:F.parent?L(F.parent):(console.error("vue-konva error: Can not find parent node"),{})}return L(B.parent)}function x(B){if(B!=null&&B.component)return B.component.__konvaNode||x(B.component.subTree)}function O(B){var L=B.el,F=B.component,$=x(B);if(L!=null&&L.tagName&&F&&!$){var z=L&&L.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+z+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return $}function S(B){var L=[];return B.children&&B.children.forEach(function(F){!F.component&&Array.isArray(F.children)&&F.children.forEach(function($){!$.component&&Array.isArray($.children)?L.push.apply(L,$.children):L.push($)}),F.component&&L.push(F)}),L}function w(B,L){var F=S(B),$=[];F.forEach(function(H){var K=O(H);K&&$.push(K)});var z=!1;$.forEach(function(H,K){H.getZIndex()!==K&&(H.setZIndex(K),z=!0)}),z&&d(L)}function C(){return C=Object.assign||function(B){for(var L=1;L<arguments.length;L++){var F=arguments[L];for(var $ in F)Object.prototype.hasOwnProperty.call(F,$)&&(B[$]=F[$])}return B},C.apply(this,arguments)}var M={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup:function(L,F){var $=F.attrs,z=F.slots,H=F.expose;F.emits;var K=Object(l.getCurrentInstance)(),J=Object(l.reactive)({}),ne=Object(l.ref)(null),be=new window.Konva.Stage({width:L.config.width,height:L.config.height,container:document.createElement("div")});K.__konvaNode=be,ye();function pe(){return K.__konvaNode}function ae(){return K.__konvaNode}function ye(){var _e=J||{},re=C({},$,L.config);g(K,re,_e,L.__useStrictMode),Object.assign(J,re)}return Object(l.onMounted)(function(){ne.value.innerHTML="",be.container(ne.value),ye()}),Object(l.onUpdated)(function(){ye(),w(K.subTree,be)}),Object(l.onBeforeUnmount)(function(){be.destroy()}),Object(l.watch)(function(){return L.config},ye,{deep:!0}),H({getStage:ae,getNode:pe}),function(){var _e;return Object(l.h)("div",{ref:ne},(_e=z.default)===null||_e===void 0?void 0:_e.call(z))}}};function P(){return P=Object.assign||function(B){for(var L=1;L<arguments.length;L++){var F=arguments[L];for(var $ in F)Object.prototype.hasOwnProperty.call(F,$)&&(B[$]=F[$])}return B},P.apply(this,arguments)}var R=".vue-konva-event",k={Group:!0,Layer:!0,FastLayer:!0,Label:!0},I=function(B){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(F,$){var z=$.attrs,H=$.slots,K=$.expose,J=Object(l.getCurrentInstance)(),ne=Object(l.reactive)({}),be=window.Konva[B];if(!be){console.error("vue-konva error: Can not find node "+B);return}var pe=new be;J.__konvaNode=pe,J.vnode.__konvaNode=pe,_e();function ae(){return J.__konvaNode}function ye(){return J.__konvaNode}function _e(){var se={};for(var Q in J.vnode.props)Q.slice(0,2)==="on"&&(se[Q]=J.vnode.props[Q]);var G=ne||{},ie=P({},z,F.config,se);g(J,ie,G,F.__useStrictMode),Object.assign(ne,ie)}Object(l.onMounted)(function(){var se=_(J).__konvaNode;se.add(pe),d(pe)}),Object(l.onUnmounted)(function(){d(pe),pe.destroy(),pe.off(R)}),Object(l.onUpdated)(function(){_e(),w(J.subTree,pe)}),Object(l.watch)(function(){return F.config},_e,{deep:!0}),K({getStage:ye,getNode:ae});var re=k[B];return re?function(){var se;return Object(l.h)("template",{},(se=H.default)===null||se===void 0?void 0:se.call(H))}:function(){return null}}}};typeof window<"u"&&!window.Konva&&a(1);var A=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],D=[{name:"Stage",component:M}].concat(A.map(function(B){return{name:B,component:I(B)}})),V={install:function(L,F){var $=y;F&&F.prefix&&($=F.prefix),D.forEach(function(z){L.component(""+$+z.name,z.component)})}};o.default=V}]).default})})(tie);var YNe=tie.exports;const nie=eS(YNe),NP={__name:"KonvaStage",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(r,{expose:e}){let i=0;function n(){return i+=1,i}let s={};function o(_){return s[_.uuid]}function a(_,x){if(_.uuid==x)return _;if(_.children)for(let S=0;S<_.children.length;S++){const w=_.children[S];var O=a(w,x);if(O)return O}return null}e({getObject:o});const l=SZ(r,"modelValue");function c(_,x,O){var S=jNe[_],w=new S(O);return w.uuid=O.uuid,s[O.uuid]=w,x&&x.add(w),u(w,O),w}function u(_,x){let O=["x","y","width","height","offsetX","offsetY","fill","opacity","stroke","name","rotation","scaleX","scaleY","shadowColor","shadowOffset","shadowBlur","lineJoin","draggable"];for(let S=0;S<O.length;S++){const w=O[S],C=`${w}Change`;_.on(C,M=>{x[w]=M.newVal})}}function d(_,x,O){var S=s[O.uuid];if(S?S.setAttrs(O):S=c(_,x,O),O.children)for(let w=0;w<O.children.length;w++){const C=O.children[w];d(C.type,S,C)}return S}function p(_){if(_.uuid||(_.uuid=n()),_.children)for(let x=0;x<_.children.length;x++){const O=_.children[x];p(O)}}function m(_){var x=a(l.value,_.uuid);if(!x){_.remove();return}var O=[];if(_.getChildren){var S=_.getChildren();for(let C=0;C<S.length;C++){const M=S[C];var w=a(l.value,M.uuid);w||O.push(M)}}for(let C=0;C<O.length;C++)O[C].remove();if(_.getChildren){var S=_.getChildren();for(let M=0;M<S.length;M++){const P=S[M];m(P)}}}function g(_){let x=document.getElementById(l.value.container);var O=l.value.width||x.clientWidth,S=l.value.height||x.clientHeight;_.width(O),_.height(S)}function y(){p(l.value);var _=d("Stage",null,l.value);g(_),m(_)}return tn(l.value,()=>{y()}),nr(()=>{y()}),ta(()=>{}),(_,x)=>null}},bh=r=>(O_("data-v-8a27eec9"),r=r(),S_(),r),qNe=bh(()=>It("h1",null,"坐标系展示",-1)),ZNe=bh(()=>It("div",{class:"mylabel"},"坐标(x,y)",-1)),KNe=bh(()=>It("div",{class:"mylabel"},"全局坐标(x,y)",-1)),JNe=bh(()=>It("div",{class:"mylabel"},"锚点(offset)",-1)),eVe=bh(()=>It("div",{class:"mylabel"},"尺寸(w,h)",-1)),tVe=bh(()=>It("div",{class:"mylabel"},"旋转角度",-1)),iVe=bh(()=>It("div",{class:"mylabel"},"缩放(scale)",-1)),nVe=bh(()=>It("div",{class:"mylabel"},"透明度(0-1)",-1)),rVe=bh(()=>It("div",{class:"mylabel"},"颜色",-1)),sVe=bh(()=>It("div",{class:"mylabel"},"shadowOffset",-1)),oVe=bh(()=>It("div",{class:"mylabel"},"shadowBlur",-1)),aVe=bh(()=>It("div",{class:"mylabel"},"lineJoin",-1)),aR=800,lR=600,lVe={__name:"KonvaMain",setup(r){const e=lt({stageConfig:{width:aR,height:lR,fill:"black"},backgroundConfig:{x:0,y:0,width:aR,height:lR,fill:"#fefae0",stroke:"black",strokeWidth:1},rectConfig:{x:100,y:100,gx:100,gy:100,width:200,height:100,offsetX:0,offsetY:0,fill:"#dda15e",opacity:.8,stroke:"black",name:"rect",rotation:0,scaleX:1,scaleY:1,shadowColor:"#A78EEB",shadowOffset:{x:3,y:3},shadowBlur:3,lineJoin:"miter",draggable:!0}}),i=lt(null),n=lt(null),s=lt(null);function o(){if(i.value){var a=i.value.getNode();e.value.rectConfig.x=a.x(),e.value.rectConfig.y=a.y(),e.value.rectConfig.gx=a.absolutePosition().x,e.value.rectConfig.gy=a.absolutePosition().y,e.value.rectConfig.offsetX=a.offsetX(),e.value.rectConfig.offsetY=a.offsetY(),e.value.rectConfig.width=a.width(),e.value.rectConfig.height=a.height(),e.value.rectConfig.rotation=a.rotation(),e.value.rectConfig.rotation=a.rotation(),e.value.rectConfig.scaleX=a.scaleX(),e.value.rectConfig.scaleY=a.scaleY(),requestAnimationFrame(o)}}return nr(()=>{requestAnimationFrame(o);var a=n.value.getNode(),l=s.value.getNode();a.on("click tap",function(c){var d,p;if(!c.target.hasName("rect")){(d=a.findOne("Transformer"))==null||d.destroy(),l.draw();return}(p=a.findOne("Transformer"))==null||p.destroy();var u=new qf.Transformer;l.add(u),u.nodes([c.target]),l.draw()}),window.stage=a,window.coordConfig=e,window.VueKonva=nie}),(a,l)=>{const c=St("v-rect"),u=St("v-arrow"),d=St("v-layer"),p=St("v-stage"),m=St("Col"),g=St("Divider"),y=St("InputNumber"),_=St("Row"),x=St("Slider"),O=St("ColorPicker"),S=St("Option"),w=St("Select"),C=St("Card");return ci(),pn(Fn,null,[ke(C,null,{title:Je(()=>[qNe]),default:Je(()=>[ke(_,null,{default:Je(()=>[ke(m,null,{default:Je(()=>[It("div",null,[ke(p,{ref_key:"myStageRef",ref:n,config:e.value.stageConfig},{default:Je(()=>[ke(d,{ref_key:"myLayerRef",ref:s},{default:Je(()=>[ke(c,{config:e.value.backgroundConfig},null,8,["config"]),ke(u,{config:{points:[0,0,aR,0],fill:"black",stroke:"black"}},null,8,["config"]),ke(u,{config:{points:[0,0,0,lR],fill:"black",stroke:"black"}},null,8,["config"]),ke(c,{ref_key:"myRectRef",ref:i,config:e.value.rectConfig,__useStrictMode:!0},null,8,["config"])]),_:1},512)]),_:1},8,["config"])])]),_:1}),ke(m,null,{default:Je(()=>[It("div",null,[ke(_,null,{default:Je(()=>[ke(m,null,{default:Je(()=>[ke(g,null,{default:Je(()=>[On("基础")]),_:1}),ke(_,null,{default:Je(()=>[ZNe,ke(y,{modelValue:e.value.rectConfig.x,"onUpdate:modelValue":l[0]||(l[0]=M=>e.value.rectConfig.x=M),step:10},null,8,["modelValue"]),ke(y,{modelValue:e.value.rectConfig.y,"onUpdate:modelValue":l[1]||(l[1]=M=>e.value.rectConfig.y=M),step:10},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[KNe,ke(y,{modelValue:e.value.rectConfig.gx,"onUpdate:modelValue":l[2]||(l[2]=M=>e.value.rectConfig.gx=M),readonly:!0},null,8,["modelValue"]),ke(y,{modelValue:e.value.rectConfig.gy,"onUpdate:modelValue":l[3]||(l[3]=M=>e.value.rectConfig.gy=M),readonly:!0},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[JNe,ke(y,{modelValue:e.value.rectConfig.offsetX,"onUpdate:modelValue":l[4]||(l[4]=M=>e.value.rectConfig.offsetX=M),step:10},null,8,["modelValue"]),ke(y,{modelValue:e.value.rectConfig.offsetY,"onUpdate:modelValue":l[5]||(l[5]=M=>e.value.rectConfig.offsetY=M),step:10},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[eVe,ke(y,{modelValue:e.value.rectConfig.width,"onUpdate:modelValue":l[6]||(l[6]=M=>e.value.rectConfig.width=M),step:10},null,8,["modelValue"]),ke(y,{modelValue:e.value.rectConfig.height,"onUpdate:modelValue":l[7]||(l[7]=M=>e.value.rectConfig.height=M),step:10},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[tVe,ke(y,{modelValue:e.value.rectConfig.rotation,"onUpdate:modelValue":l[8]||(l[8]=M=>e.value.rectConfig.rotation=M),step:10},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[iVe,ke(y,{modelValue:e.value.rectConfig.scaleX,"onUpdate:modelValue":l[9]||(l[9]=M=>e.value.rectConfig.scaleX=M),step:.1},null,8,["modelValue"]),ke(y,{modelValue:e.value.rectConfig.scaleY,"onUpdate:modelValue":l[10]||(l[10]=M=>e.value.rectConfig.scaleY=M),step:.1},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[nVe,ke(x,{modelValue:e.value.rectConfig.opacity,"onUpdate:modelValue":l[11]||(l[11]=M=>e.value.rectConfig.opacity=M),min:0,max:1,step:.05,style:{width:"160px"}},null,8,["modelValue"])]),_:1}),ke(g,null,{default:Je(()=>[On("阴影")]),_:1}),ke(_,null,{default:Je(()=>[rVe,ke(O,{modelValue:e.value.rectConfig.shadowColor,"onUpdate:modelValue":l[12]||(l[12]=M=>e.value.rectConfig.shadowColor=M)},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[sVe,ke(y,{modelValue:e.value.rectConfig.shadowOffsetX,"onUpdate:modelValue":l[13]||(l[13]=M=>e.value.rectConfig.shadowOffsetX=M)},null,8,["modelValue"]),ke(y,{modelValue:e.value.rectConfig.shadowOffsetY,"onUpdate:modelValue":l[14]||(l[14]=M=>e.value.rectConfig.shadowOffsetY=M)},null,8,["modelValue"])]),_:1}),ke(_,null,{default:Je(()=>[oVe,ke(y,{modelValue:e.value.rectConfig.shadowBlur,"onUpdate:modelValue":l[15]||(l[15]=M=>e.value.rectConfig.shadowBlur=M)},null,8,["modelValue"])]),_:1}),ke(g,null,{default:Je(()=>[On("边角")]),_:1}),ke(_,null,{default:Je(()=>[aVe,ke(w,{modelValue:e.value.rectConfig.lineJoin,"onUpdate:modelValue":l[16]||(l[16]=M=>e.value.rectConfig.lineJoin=M),style:{width:"160px"}},{default:Je(()=>[ke(S,{value:"miter"},{default:Je(()=>[On("miter")]),_:1}),ke(S,{value:"bevel"},{default:Je(()=>[On("bevel")]),_:1}),ke(S,{value:"round"},{default:Je(()=>[On("round")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),ke(NP),ke(C)],64)}}},hVe=zd(lVe,[["__scopeId","data-v-8a27eec9"]]),cVe=["src"],R1={__name:"EasyLink",props:{link:String,width:Number,height:Number},setup(r){const e=r,i=lt(null);return nr(()=>{var n=e.width?`${n}px`:"100%",s=e.height?`${s}px`:"100vh";i.value={width:n,height:s}}),(n,s)=>(ci(),pn("iframe",{src:e.link,style:Up(i.value)},null,12,cVe))}},uVe={__name:"GridSquare",setup(r){const e=br(null),i=br(null),n=br(null),s=br(null),o=lt({rows:5,cols:8,boxWidth:100,boxHeight:50,offsetX:-400,offsetY:-125});tn(o.value,()=>{c()});const a=br(null);function l(){var d=n.value.getNode(),p=s.value.getNode(),m=d.getChildren();for(let O=0;O<o.value.rows;O++)for(let S=0;S<o.value.cols;S++){var g=O*o.value.cols+S,y=m[g];y.x(S*o.value.boxWidth+o.value.offsetX),y.y(O*o.value.boxHeight+o.value.offsetY)}var _=p.findOne("#arrowx");_.points([0,0,o.value.boxWidth*o.value.cols+o.value.offsetX,0]);var x=p.findOne("#arrowy");x.points([0,0,0,o.value.boxHeight*o.value.rows+o.value.offsetY])}function c(){var d=i.value.getNode(),p=n.value.getNode(),m=s.value.getNode();p.removeChildren(),m.removeChildren();for(let S=0;S<o.value.rows;S++)for(let w=0;w<o.value.cols;w++){var g=new qf.Group({id:`${S}_${w}`});p.add(g);var y=new qf.Rect({x:0,y:0,width:o.value.boxWidth,height:o.value.boxHeight,stroke:"black",strokeWidth:1,draggable:!0,id:"box"});g.add(y);var _=new qf.Text({text:`(${S},${w})`,x:0,y:0,width:o.value.boxWidth,height:o.value.boxHeight,align:"center",verticalAlign:"middle",id:"text"});g.add(_)}var x=new qf.Arrow({x:0,y:0,points:[0,0,d.width(),0],pointerLength:20,pointerWidth:20,fill:"red",stroke:"red",strokeWidth:4,id:"arrowx"});m.add(x);var O=new qf.Arrow({x:0,y:0,points:[0,0,0,d.height()],pointerLength:20,pointerWidth:20,fill:"green",stroke:"green",strokeWidth:4,id:"arrowy"});m.add(O),l()}nr(()=>{var d=i.value.getNode(),p=n.value.getNode();d.width(e.value.clientWidth),d.height(e.value.clientHeight),d.x(e.value.clientWidth/2),d.y(e.value.clientHeight/2),window.boxConfig=o,window.stage=d,window.layer=p,c(),d.on("wheel",m=>{m.evt.preventDefault();var g=d.scaleX(),y=d.getPointerPosition(),_={x:(y.x-d.x())/g,y:(y.y-d.y())/g};let x=m.evt.deltaY>0?1:-1;m.evt.ctrlKey&&(x=-x);const O=1.1;var S=x<0?g*O:g/O;d.scale({x:S,y:S});var w={x:y.x-_.x*S,y:y.y-_.y*S};d.position(w)}),d.on("mousemove",m=>{var g=d.getPointerPosition(),y=Math.floor((g.y-d.y()-o.value.offsetY)/o.value.boxHeight),_=Math.floor((g.x-d.x()-o.value.offsetX)/o.value.boxWidth),x=`#${y}_${_}`;if(a.value){var O=p.findOne(a.value);u(O,!1)}var O=p.findOne(x);u(O,!0),a.value=x})});function u(d,p){if(d){var m=d.findOne("#box");p?(console.log(m.fill()),m.fill("red")):m.fill(null)}}return(d,p)=>{const m=St("v-layer"),g=St("v-stage"),y=St("Col"),_=St("InputNumber"),x=St("FormItem"),O=St("Form"),S=St("Row");return ci(),Es(S,null,{default:Je(()=>[ke(y,{span:18},{default:Je(()=>[It("div",{class:"boxborder",ref_key:"boxParentRef",ref:e},[ke(g,{ref_key:"boxStageRef",ref:i,config:{width:100,height:100,draggable:!0}},{default:Je(()=>[ke(m,{ref_key:"arrowLayerRef",ref:s},null,512),ke(m,{ref_key:"boxLayerRef",ref:n},null,512)]),_:1},512)],512)]),_:1}),ke(y,{span:6},{default:Je(()=>[ke(O,{"label-width":100},{default:Je(()=>[ke(x,{label:"行 / 列",style:{width:"100%"}},{default:Je(()=>[ke(_,{modelValue:o.value.rows,"onUpdate:modelValue":p[0]||(p[0]=w=>o.value.rows=w)},null,8,["modelValue"]),ke(_,{modelValue:o.value.cols,"onUpdate:modelValue":p[1]||(p[1]=w=>o.value.cols=w)},null,8,["modelValue"])]),_:1}),ke(x,{label:"单元格宽高"},{default:Je(()=>[ke(_,{modelValue:o.value.boxWidth,"onUpdate:modelValue":p[2]||(p[2]=w=>o.value.boxWidth=w)},null,8,["modelValue"]),ke(_,{modelValue:o.value.boxHeight,"onUpdate:modelValue":p[3]||(p[3]=w=>o.value.boxHeight=w)},null,8,["modelValue"])]),_:1}),ke(x,{label:"坐标偏移"},{default:Je(()=>[ke(_,{modelValue:o.value.offsetX,"onUpdate:modelValue":p[4]||(p[4]=w=>o.value.offsetX=w)},null,8,["modelValue"]),ke(_,{modelValue:o.value.offsetY,"onUpdate:modelValue":p[5]||(p[5]=w=>o.value.offsetY=w)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},dVe=zd(uVe,[["__scopeId","data-v-99fbc157"]]),fVe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},pVe={__name:"GridParallelogramH",setup(r){const e=lt(100),i=lt(100),n=lt(60),s=lt(4),o=lt(5),a=tr(()=>{var d=[];const p=e.value,m=i.value,g=n.value*Math.PI/180;for(let y=0;y<s.value;y++)for(let _=0;_<o.value;_++){const x=p*_,O=m*Math.sin(g)*y,S=x+p,w=O,C=S+m*Math.cos(g),M=(y+1)*m*Math.sin(g),P=x+m*Math.cos(g),k={type:"Line",points:[x,O,S,w,C,M,P,M],fill:"#00D2FF",stroke:"black",strokeWidth:1,closed:!0,name:`${y}_${_} line`};d.push(k)}return d}),l=tr(()=>[{type:"Arrow",points:[0,0,e.value*o.value,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,i.value*s.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),c=lt(null),u=lt({container:"container",draggable:!0,x:100,y:600,scaleY:-1,children:[{type:"Layer",children:a},{type:"Layer",children:l}]});return nr(()=>{window.shapes=a;var d=c.value.getObject(u.value),p=null;d.on("mousemove",m=>{p&&p.fill("#00D2FF"),m.target.hasName("line")&&(m.target.fill("red"),p=m.target)})}),(d,p)=>{const m=St("Col"),g=St("InputNumber"),y=St("FormItem"),_=St("Slider"),x=St("Form"),O=St("Row");return ci(),Es(O,null,{default:Je(()=>[ke(m,{span:12},{default:Je(()=>[It("div",fVe,[ke(NP,{ref_key:"stageRef",ref:c,modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=S=>u.value=S)},null,8,["modelValue"])])]),_:1}),ke(m,{span:4},{default:Je(()=>[ke(x,{"label-width":100},{default:Je(()=>[ke(y,{label:"地块横边(px)"},{default:Je(()=>[ke(g,{modelValue:e.value,"onUpdate:modelValue":p[1]||(p[1]=S=>e.value=S)},null,8,["modelValue"])]),_:1}),ke(y,{label:"地块竖边(px)"},{default:Je(()=>[ke(g,{modelValue:i.value,"onUpdate:modelValue":p[2]||(p[2]=S=>i.value=S)},null,8,["modelValue"])]),_:1}),ke(y,{label:"偏转角度"},{default:Je(()=>[ke(_,{modelValue:n.value,"onUpdate:modelValue":p[3]||(p[3]=S=>n.value=S),min:0,max:90},null,8,["modelValue"])]),_:1}),ke(y,{label:"行 / 列"},{default:Je(()=>[ke(g,{modelValue:s.value,"onUpdate:modelValue":p[4]||(p[4]=S=>s.value=S)},null,8,["modelValue"]),ke(g,{modelValue:o.value,"onUpdate:modelValue":p[5]||(p[5]=S=>o.value=S)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},mVe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},gVe={__name:"GridParallelogramV",setup(r){const e=lt(130),i=lt(100),n=lt(60),s=lt(4),o=lt(10),a=tr(()=>{var d=[];const p=e.value,m=i.value;n.value*Math.PI/180;for(let y=0;y<s.value;y++)for(let _=0;_<o.value;_++){let x=null,O,S,w,C,M,P,R,k;O=p*_+p/2,S=m*y,w=O+p/2,C=S+m/2,M=O,P=S+m,R=p*_,k=C,O-=p*Math.floor(_/2),w-=p*Math.floor(_/2),M-=p*Math.floor(_/2),R-=p*Math.floor(_/2),_%2==1&&(O-=p/2,w-=p/2,M-=p/2,R-=p/2,S+=m/2,C+=m/2,P+=m/2,k+=m/2),S*=-1,C*=-1,P*=-1,k*=-1,x={type:"Line",points:[O,S,w,C,M,P,R,k],fill:"#c9ada7",stroke:"black",strokeWidth:1,closed:!0,name:`${y}_${_} line`,id:`${y}_${_}`},d.push(x);var g={type:"Text",text:`(${y},${_})`,x:R,y:C,align:"center",width:p,height:m};d.push(g)}return d}),l=tr(()=>[{type:"Arrow",points:[0,0,e.value*o.value/2,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,-i.value*s.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),c=lt(null),u=lt({container:"container",draggable:!0,x:100,y:600,children:[{type:"Layer",children:a},{type:"Layer",children:l}]});return nr(()=>{window.shapes=a;var d=c.value.getObject(u.value),p=null;d.on("mousemove",m=>{p&&p.fill("#c9ada7"),m.target.hasName("line")&&(m.target.fill("red"),p=m.target)})}),(d,p)=>{const m=St("Col"),g=St("Slider"),y=St("FormItem"),_=St("InputNumber"),x=St("Form"),O=St("Row");return ci(),Es(O,null,{default:Je(()=>[ke(m,{span:12},{default:Je(()=>[It("div",mVe,[ke(NP,{ref_key:"stageRef",ref:c,modelValue:u.value,"onUpdate:modelValue":p[0]||(p[0]=S=>u.value=S)},null,8,["modelValue"])])]),_:1}),ke(m,{span:4},{default:Je(()=>[ke(x,{"label-width":100},{default:Je(()=>[ke(y,{label:"地块主边(px)"},{default:Je(()=>[ke(g,{modelValue:e.value,"onUpdate:modelValue":p[1]||(p[1]=S=>e.value=S),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),ke(y,{label:"地块次边(px)"},{default:Je(()=>[ke(g,{modelValue:i.value,"onUpdate:modelValue":p[2]||(p[2]=S=>i.value=S),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),ke(y,{label:"行 / 列"},{default:Je(()=>[ke(_,{modelValue:s.value,"onUpdate:modelValue":p[3]||(p[3]=S=>s.value=S)},null,8,["modelValue"]),ke(_,{modelValue:o.value,"onUpdate:modelValue":p[4]||(p[4]=S=>o.value=S)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},vVe={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},yVe={__name:"KonvaStageTest",setup(r){const e=lt([{type:"Rect",x:100,y:100,width:200,height:100,fill:"red",draggable:!0}]),i=lt({type:"Stage",container:"container",wheel:!0,children:[{type:"Layer",children:e}]}),n=br(null);function s(o){o=="Rect"?e.value.push({type:"Rect",width:200,height:100,fill:"green",draggable:!0}):o=="Circle"?e.value.push({type:"Circle",radius:80,fill:"green",draggable:!0}):o=="Star"&&e.value.push({type:"Star",innerRadius:40,outerRadius:70,fill:"yellow",stroke:"black",strokeWidth:4,draggable:!0}),console.log(o)}return nr(()=>{var o=n.value.getObject(i.value);o.on("wheel",a=>{a.evt.preventDefault();var l=o.scaleX(),c=o.getPointerPosition(),u={x:(c.x-o.x())/l,y:(c.y-o.y())/l};let d=a.evt.deltaY>0?1:-1;a.evt.ctrlKey&&(d=-d);var p=1.1,m=d<0?l*p:l/p;o.scale({x:m,y:m});var g={x:c.x-u.x*m,y:c.y-u.y*m};o.position(g)})}),(o,a)=>{const l=St("Col"),c=St("Icon"),u=St("Button"),d=St("DropdownItem"),p=St("DropdownMenu"),m=St("Dropdown"),g=St("Space"),y=St("FormItem"),_=St("Divider"),x=St("InputNumber"),O=St("Form"),S=St("Row");return ci(),Es(S,null,{default:Je(()=>[ke(l,{span:12},{default:Je(()=>[It("div",vVe,[ke(NP,{ref_key:"stageRef",ref:n,modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=w=>i.value=w)},null,8,["modelValue"])])]),_:1}),ke(l,{span:12},{default:Je(()=>[ke(O,{"label-width":100},{default:Je(()=>[ke(y,{label:"添加"},{default:Je(()=>[ke(g,null,{default:Je(()=>[ke(m,{onOnClick:s},{list:Je(()=>[ke(p,null,{default:Je(()=>[ke(d,{name:"Rect"},{default:Je(()=>[On("矩形")]),_:1}),ke(d,{name:"Circle"},{default:Je(()=>[On("圆形")]),_:1}),ke(d,{name:"Star"},{default:Je(()=>[On("星形")]),_:1})]),_:1})]),default:Je(()=>[ke(u,{type:"primary"},{default:Je(()=>[On(" 添加图形 "),ke(c,{type:"ios-arrow-down"})]),_:1})]),_:1})]),_:1})]),_:1}),ke(_),(ci(!0),pn(Fn,null,au(e.value,w=>(ci(),Es(y,{label:"x/y"},{default:Je(()=>[ke(x,{modelValue:w.x,"onUpdate:modelValue":C=>w.x=C},null,8,["modelValue","onUpdate:modelValue"]),ke(x,{modelValue:w.y,"onUpdate:modelValue":C=>w.y=C},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}},_Ve=It("h1",null,"三角函数计算器",-1),xVe={__name:"TrigoCalc",setup(r){const e=lt(0),i=lt(0),n=lt(0),s=lt(0),o=lt(0),a=lt(0),l=lt(0);let c=!1;tn(i,()=>{u(i,m=>m)}),tn(n,()=>{u(n,m=>m*180/Math.PI)}),tn(s,()=>{u(s,m=>Math.asin(m))}),tn(o,()=>{u(o,m=>Math.acos(m))}),tn(a,()=>{u(a,m=>Math.atan(m))}),tn(l,()=>{u(l,m=>Math.atan(1/m))});function u(m,g){if(c)return;const y=d(m.value);e.value=g(y)}function d(m){let g=parseFloat(m);return g||(g=0),Math.abs(g)<.001&&(g=0),g}tn(e,p);async function p(){c=!0;const m=e.value*Math.PI/180;i.value=e.value,n.value=m,s.value=Math.sin(m),o.value=Math.cos(m),a.value=Math.tan(m),a.value?l.value=1/a.value:l.value=0,i.value=parseFloat(i.value.toFixed(3)),n.value=parseFloat(n.value.toFixed(3)),s.value=parseFloat(s.value.toFixed(3)),o.value=parseFloat(o.value.toFixed(3)),a.value=parseFloat(a.value.toFixed(3)),l.value=parseFloat(l.value.toFixed(3)),await w_(),c=!1}return nr(()=>{e.value=30}),(m,g)=>{const y=St("Input"),_=St("Col"),x=St("Row");return ci(),Es(x,null,{default:Je(()=>[ke(_,{span:4,offset:10},{default:Je(()=>[_Ve,ke(y,{type:"number",modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=O=>i.value=O)},{prepend:Je(()=>[On("角度")]),_:1},8,["modelValue"]),ke(y,{type:"number",modelValue:n.value,"onUpdate:modelValue":g[1]||(g[1]=O=>n.value=O)},{prepend:Je(()=>[On("弧度")]),_:1},8,["modelValue"]),ke(y,{type:"number",modelValue:s.value,"onUpdate:modelValue":g[2]||(g[2]=O=>s.value=O)},{prepend:Je(()=>[On("正弦")]),_:1},8,["modelValue"]),ke(y,{type:"number",modelValue:o.value,"onUpdate:modelValue":g[3]||(g[3]=O=>o.value=O)},{prepend:Je(()=>[On("余弦")]),_:1},8,["modelValue"]),ke(y,{type:"number",modelValue:a.value,"onUpdate:modelValue":g[4]||(g[4]=O=>a.value=O)},{prepend:Je(()=>[On("正切")]),_:1},8,["modelValue"]),ke(y,{type:"number",modelValue:l.value,"onUpdate:modelValue":g[5]||(g[5]=O=>l.value=O)},{prepend:Je(()=>[On("余切")]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};let Rn=class rie{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,n){[e,i]=i_(this,e,i);let s=[];return this.decompose(0,e,s,2),n.length&&n.decompose(0,n.length,s,3),this.decompose(i,this.length,s,1),Hc.from(s,this.length-(i-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){[e,i]=i_(this,e,i);let n=[];return this.decompose(e,i,n,0),Hc.from(n,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),s=new Gb(this),o=new Gb(e);for(let a=i,l=i;;){if(s.next(a),o.next(a),a=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(l+=s.value.length,s.done||l>=n)return!0}}iter(e=1){return new Gb(this,e)}iterRange(e,i=this.length){return new sie(this,e,i)}iterLines(e,i){let n;if(e==null)n=this.iter();else{i==null&&(i=this.lines+1);let s=this.line(e).from;n=this.iterRange(s,Math.max(s,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new oie(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?rie.empty:e.length<=32?new Qr(e):Hc.from(Qr.split(e,[]))}};class Qr extends Rn{constructor(e,i=bVe(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,n,s){for(let o=0;;o++){let a=this.text[o],l=s+a.length;if((i?n:l)>=e)return new wVe(s,l,n,a);s=l+1,n++}}decompose(e,i,n,s){let o=e<=0&&i>=this.length?this:new Qr(WW(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(s&1){let a=n.pop(),l=xA(o.text,a.text.slice(),0,o.length);if(l.length<=32)n.push(new Qr(l,a.length+o.length));else{let c=l.length>>1;n.push(new Qr(l.slice(0,c)),new Qr(l.slice(c)))}}else n.push(o)}replace(e,i,n){if(!(n instanceof Qr))return super.replace(e,i,n);[e,i]=i_(this,e,i);let s=xA(this.text,xA(n.text,WW(this.text,0,e)),i),o=this.length+n.length-(i-e);return s.length<=32?new Qr(s,o):Hc.from(Qr.split(s,[]),o)}sliceString(e,i=this.length,n=`
`){[e,i]=i_(this,e,i);let s="";for(let o=0,a=0;o<=i&&a<this.text.length;a++){let l=this.text[a],c=o+l.length;o>e&&a&&(s+=n),e<c&&i>o&&(s+=l.slice(Math.max(0,e-o),i-o)),o=c+1}return s}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let n=[],s=-1;for(let o of e)n.push(o),s+=o.length+1,n.length==32&&(i.push(new Qr(n,s)),n=[],s=-1);return s>-1&&i.push(new Qr(n,s)),i}}class Hc extends Rn{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,i,n,s){for(let o=0;;o++){let a=this.children[o],l=s+a.length,c=n+a.lines-1;if((i?c:l)>=e)return a.lineInner(e,i,n,s);s=l+1,n=c+1}}decompose(e,i,n,s){for(let o=0,a=0;a<=i&&o<this.children.length;o++){let l=this.children[o],c=a+l.length;if(e<=c&&i>=a){let u=s&((a<=e?1:0)|(c>=i?2:0));a>=e&&c<=i&&!u?n.push(l):l.decompose(e-a,i-a,n,u)}a=c+1}}replace(e,i,n){if([e,i]=i_(this,e,i),n.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e>=o&&i<=l){let c=a.replace(e-o,i-o,n),u=this.lines-a.lines+c.lines;if(c.lines<u>>4&&c.lines>u>>6){let d=this.children.slice();return d[s]=c,new Hc(d,this.length-(i-e)+n.length)}return super.replace(o,l,c)}o=l+1}return super.replace(e,i,n)}sliceString(e,i=this.length,n=`
`){[e,i]=i_(this,e,i);let s="";for(let o=0,a=0;o<this.children.length&&a<=i;o++){let l=this.children[o],c=a+l.length;a>e&&o&&(s+=n),e<c&&i>a&&(s+=l.sliceString(e-a,i-a,n)),a=c+1}return s}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof Hc))return 0;let n=0,[s,o,a,l]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=i,o+=i){if(s==a||o==l)return n;let c=this.children[s],u=e.children[o];if(c!=u)return n+c.scanIdentical(u,i);n+=c.length+1}}static from(e,i=e.reduce((n,s)=>n+s.length+1,-1)){let n=0;for(let g of e)n+=g.lines;if(n<32){let g=[];for(let y of e)y.flatten(g);return new Qr(g,i)}let s=Math.max(32,n>>5),o=s<<1,a=s>>1,l=[],c=0,u=-1,d=[];function p(g){let y;if(g.lines>o&&g instanceof Hc)for(let _ of g.children)p(_);else g.lines>a&&(c>a||!c)?(m(),l.push(g)):g instanceof Qr&&c&&(y=d[d.length-1])instanceof Qr&&g.lines+y.lines<=32?(c+=g.lines,u+=g.length+1,d[d.length-1]=new Qr(y.text.concat(g.text),y.length+1+g.length)):(c+g.lines>s&&m(),c+=g.lines,u+=g.length+1,d.push(g))}function m(){c!=0&&(l.push(d.length==1?d[0]:Hc.from(d,u)),u=-1,c=d.length=0)}for(let g of e)p(g);return m(),l.length==1?l[0]:new Hc(l,i)}}Rn.empty=new Qr([""],0);function bVe(r){let e=-1;for(let i of r)e+=i.length+1;return e}function xA(r,e,i=0,n=1e9){for(let s=0,o=0,a=!0;o<r.length&&s<=n;o++){let l=r[o],c=s+l.length;c>=i&&(c>n&&(l=l.slice(0,n-s)),s<i&&(l=l.slice(i-s)),a?(e[e.length-1]+=l,a=!1):e.push(l)),s=c+1}return e}function WW(r,e,i){return xA(r,[""],e,i)}class Gb{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof Qr?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,s=this.nodes[n],o=this.offsets[n],a=o>>1,l=s instanceof Qr?s.text.length:s.children.length;if(a==(i>0?l:0)){if(n==0)return this.done=!0,this.value="",this;i>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(i>0?0:1)){if(this.offsets[n]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Qr){let c=s.text[a+(i<0?-1:0)];if(this.offsets[n]+=i,c.length>Math.max(0,e))return this.value=e==0?c:i>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=s.children[a+(i<0?-1:0)];e>c.length?(e-=c.length,this.offsets[n]+=i):(i<0&&this.offsets[n]--,this.nodes.push(c),this.offsets.push(i>0?1:(c instanceof Qr?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class sie{constructor(e,i,n){this.value="",this.done=!1,this.cursor=new Gb(e,i>n?-1:1),this.pos=i>n?e.length:0,this.from=Math.min(i,n),this.to=Math.max(i,n)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let n=i<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*i,this.value=s.length<=n?s:i<0?s.slice(s.length-n):s.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class oie{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:n,value:s}=this.inner.next(e);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Rn.prototype[Symbol.iterator]=function(){return this.iter()},Gb.prototype[Symbol.iterator]=sie.prototype[Symbol.iterator]=oie.prototype[Symbol.iterator]=function(){return this});class wVe{constructor(e,i,n,s){this.from=e,this.to=i,this.number=n,this.text=s}get length(){return this.to-this.from}}function i_(r,e,i){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,i))]}let wy="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<wy.length;r++)wy[r]+=wy[r-1];function OVe(r){for(let e=1;e<wy.length;e+=2)if(wy[e]>r)return wy[e-1]<=r;return!1}function GW(r){return r>=127462&&r<=127487}const HW=8205;function no(r,e,i=!0,n=!0){return(i?aie:SVe)(r,e,n)}function aie(r,e,i){if(e==r.length)return e;e&&lie(r.charCodeAt(e))&&hie(r.charCodeAt(e-1))&&e--;let n=Js(r,e);for(e+=eh(n);e<r.length;){let s=Js(r,e);if(n==HW||s==HW||i&&OVe(s))e+=eh(s),n=s;else if(GW(s)){let o=0,a=e-2;for(;a>=0&&GW(Js(r,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function SVe(r,e,i){for(;e>0;){let n=aie(r,e-2,i);if(n<e)return n;e--}return 0}function lie(r){return r>=56320&&r<57344}function hie(r){return r>=55296&&r<56320}function Js(r,e){let i=r.charCodeAt(e);if(!hie(i)||e+1==r.length)return i;let n=r.charCodeAt(e+1);return lie(n)?(i-55296<<10)+(n-56320)+65536:i}function XV(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function eh(r){return r<65536?1:2}const O5=/\r\n?|\n/;var Ho=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(Ho||(Ho={}));class su{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let n=this.sections[i+1];e+=n<0?this.sections[i]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,n=0,s=0;i<this.sections.length;){let o=this.sections[i++],a=this.sections[i++];a<0?(e(n,s,o),s+=o):s+=a,n+=o}}iterChangedRanges(e,i=!1){S5(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let n=this.sections[i++],s=this.sections[i++];s<0?e.push(n,s):e.push(s,n)}return new su(e)}composeDesc(e){return this.empty?e:e.empty?this:cie(this,e)}mapDesc(e,i=!1){return e.empty?this:C5(this,e,i)}mapPos(e,i=-1,n=Ho.Simple){let s=0,o=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],c=this.sections[a++],u=s+l;if(c<0){if(u>e)return o+(e-s);o+=l}else{if(n!=Ho.Simple&&u>=e&&(n==Ho.TrackDel&&s<e&&u>e||n==Ho.TrackBefore&&s<e||n==Ho.TrackAfter&&u>e))return null;if(u>e||u==e&&i<0&&!l)return e==s||i<0?o:o+c;o+=c}s=u}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,i=e){for(let n=0,s=0;n<this.sections.length&&s<=i;){let o=this.sections[n++],a=this.sections[n++],l=s+o;if(a>=0&&s<=i&&l>=e)return s<e&&l>i?"cover":!0;s=l}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let n=this.sections[i++],s=this.sections[i++];e+=(e?" ":"")+n+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new su(e)}static create(e){return new su(e)}}class ws extends su{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return S5(this,(i,n,s,o,a)=>e=e.replace(s,s+(n-i),a),!1),e}mapDesc(e,i=!1){return C5(this,e,i,!0)}invert(e){let i=this.sections.slice(),n=[];for(let s=0,o=0;s<i.length;s+=2){let a=i[s],l=i[s+1];if(l>=0){i[s]=l,i[s+1]=a;let c=s>>1;for(;n.length<c;)n.push(Rn.empty);n.push(a?e.slice(o,o+a):Rn.empty)}o+=a}return new ws(i,n)}compose(e){return this.empty?e:e.empty?this:cie(this,e,!0)}map(e,i=!1){return e.empty?this:C5(this,e,i,!0)}iterChanges(e,i=!1){S5(this,e,i)}get desc(){return su.create(this.sections)}filter(e){let i=[],n=[],s=[],o=new Vw(this);e:for(let a=0,l=0;;){let c=a==e.length?1e9:e[a++];for(;l<c||l==c&&o.len==0;){if(o.done)break e;let d=Math.min(o.len,c-l);go(s,d,-1);let p=o.ins==-1?-1:o.off==0?o.ins:0;go(i,d,p),p>0&&np(n,i,o.text),o.forward(d),l+=d}let u=e[a++];for(;l<u;){if(o.done)break e;let d=Math.min(o.len,u-l);go(i,d,-1),go(s,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),l+=d}}return{changes:new ws(i,n),filtered:su.create(s)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let n=this.sections[i],s=this.sections[i+1];s<0?e.push(n):s==0?e.push([n]):e.push([n].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,n){let s=[],o=[],a=0,l=null;function c(d=!1){if(!d&&!s.length)return;a<i&&go(s,i-a,-1);let p=new ws(s,o);l=l?l.compose(p.map(l)):p,s=[],o=[],a=0}function u(d){if(Array.isArray(d))for(let p of d)u(p);else if(d instanceof ws){if(d.length!=i)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${i})`);c(),l=l?l.compose(d.map(l)):d}else{let{from:p,to:m=p,insert:g}=d;if(p>m||p<0||m>i)throw new RangeError(`Invalid change range ${p} to ${m} (in doc of length ${i})`);let y=g?typeof g=="string"?Rn.of(g.split(n||O5)):g:Rn.empty,_=y.length;if(p==m&&_==0)return;p<a&&c(),p>a&&go(s,p-a,-1),go(s,m-p,_),np(o,s,y),a=m}}return u(e),c(!l),l}static empty(e){return new ws(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],n=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")i.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)i.push(o[0],0);else{for(;n.length<s;)n.push(Rn.empty);n[s]=Rn.of(o.slice(1)),i.push(o[0],n[s].length)}}}return new ws(i,n)}static createSet(e,i){return new ws(e,i)}}function go(r,e,i,n=!1){if(e==0&&i<=0)return;let s=r.length-2;s>=0&&i<=0&&i==r[s+1]?r[s]+=e:e==0&&r[s]==0?r[s+1]+=i:n?(r[s]+=e,r[s+1]+=i):r.push(e,i)}function np(r,e,i){if(i.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(i);else{for(;r.length<n;)r.push(Rn.empty);r.push(i)}}function S5(r,e,i){let n=r.inserted;for(let s=0,o=0,a=0;a<r.sections.length;){let l=r.sections[a++],c=r.sections[a++];if(c<0)s+=l,o+=l;else{let u=s,d=o,p=Rn.empty;for(;u+=l,d+=c,c&&n&&(p=p.append(n[a-2>>1])),!(i||a==r.sections.length||r.sections[a+1]<0);)l=r.sections[a++],c=r.sections[a++];e(s,u,o,d,p),s=u,o=d}}}function C5(r,e,i,n=!1){let s=[],o=n?[]:null,a=new Vw(r),l=new Vw(e);for(let c=-1;;)if(a.ins==-1&&l.ins==-1){let u=Math.min(a.len,l.len);go(s,u,-1),a.forward(u),l.forward(u)}else if(l.ins>=0&&(a.ins<0||c==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!i))){let u=l.len;for(go(s,l.ins,-1);u;){let d=Math.min(a.len,u);a.ins>=0&&c<a.i&&a.len<=d&&(go(s,0,a.ins),o&&np(o,s,a.text),c=a.i),a.forward(d),u-=d}l.next()}else if(a.ins>=0){let u=0,d=a.len;for(;d;)if(l.ins==-1){let p=Math.min(d,l.len);u+=p,d-=p,l.forward(p)}else if(l.ins==0&&l.len<d)d-=l.len,l.next();else break;go(s,u,c<a.i?a.ins:0),o&&c<a.i&&np(o,s,a.text),c=a.i,a.forward(a.len-d)}else{if(a.done&&l.done)return o?ws.createSet(s,o):su.create(s);throw new Error("Mismatched change set lengths")}}function cie(r,e,i=!1){let n=[],s=i?[]:null,o=new Vw(r),a=new Vw(e);for(let l=!1;;){if(o.done&&a.done)return s?ws.createSet(n,s):su.create(n);if(o.ins==0)go(n,o.len,0,l),o.next();else if(a.len==0&&!a.done)go(n,0,a.ins,l),s&&np(s,n,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,a.len),u=n.length;if(o.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;go(n,c,d,l),s&&d&&np(s,n,a.text)}else a.ins==-1?(go(n,o.off?0:o.len,c,l),s&&np(s,n,o.textBit(c))):(go(n,o.off?0:o.len,a.off?0:a.ins,l),s&&!a.off&&np(s,n,a.text));l=(o.ins>c||a.ins>=0&&a.len>c)&&(l||n.length>u),o.forward2(c),a.forward(c)}}}}class Vw{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?Rn.empty:e[i]}textBit(e){let{inserted:i}=this.set,n=this.i-2>>1;return n>=i.length&&!e?Rn.empty:i[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class mg{constructor(e,i,n){this.from=e,this.to=i,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,i=-1){let n,s;return this.empty?n=s=e.mapPos(this.from,i):(n=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),n==this.from&&s==this.to?this:new mg(n,s,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return nt.range(e,i);let n=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return nt.range(this.anchor,n)}eq(e,i=!1){return this.anchor==e.anchor&&this.head==e.head&&(!i||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return nt.range(e.anchor,e.head)}static create(e,i,n){return new mg(e,i,n)}}class nt{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:nt.create(this.ranges.map(n=>n.map(e,i)),this.mainIndex)}eq(e,i=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new nt([this.main],0)}addRange(e,i=!0){return nt.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let n=this.ranges.slice();return n[i]=e,nt.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new nt(e.ranges.map(i=>mg.fromJSON(i)),e.main)}static single(e,i=e){return new nt([nt.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=n:o.from<n)return nt.normalized(e.slice(),i);n=o.to}return new nt(e,i)}static cursor(e,i=0,n,s){return mg.create(e,e,(i==0?0:i<0?8:16)|(n==null?7:Math.min(6,n))|(s??16777215)<<6)}static range(e,i,n,s){let o=(n??16777215)<<6|(s==null?7:Math.min(6,s));return i<e?mg.create(i,e,48|o):mg.create(e,i,(i>e?8:0)|o)}static normalized(e,i=0){let n=e[i];e.sort((s,o)=>s.from-o.from),i=e.indexOf(n);for(let s=1;s<e.length;s++){let o=e[s],a=e[s-1];if(o.empty?o.from<=a.to:o.from<a.to){let l=a.from,c=Math.max(o.to,a.to);s<=i&&i--,e.splice(--s,2,o.anchor>o.head?nt.range(c,l):nt.range(l,c))}}return new nt(e,i)}}function uie(r,e){for(let i of r.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let WV=0;class Nt{constructor(e,i,n,s,o){this.combine=e,this.compareInput=i,this.compare=n,this.isStatic=s,this.id=WV++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Nt(e.combine||(i=>i),e.compareInput||((i,n)=>i===n),e.compare||(e.combine?(i,n)=>i===n:GV),!!e.static,e.enables)}of(e){return new bA([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new bA(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new bA(e,this,2,i)}from(e,i){return i||(i=n=>n),this.compute([e],n=>i(n.field(e)))}}function GV(r,e){return r==e||r.length==e.length&&r.every((i,n)=>i===e[n])}class bA{constructor(e,i,n,s){this.dependencies=e,this.facet=i,this.type=n,this.value=s,this.id=WV++}dynamicSlot(e){var i;let n=this.value,s=this.facet.compareInput,o=this.id,a=e[o]>>1,l=this.type==2,c=!1,u=!1,d=[];for(let p of this.dependencies)p=="doc"?c=!0:p=="selection"?u=!0:((i=e[p.id])!==null&&i!==void 0?i:1)&1||d.push(e[p.id]);return{create(p){return p.values[a]=n(p),1},update(p,m){if(c&&m.docChanged||u&&(m.docChanged||m.selection)||T5(p,d)){let g=n(p);if(l?!QW(g,p.values[a],s):!s(g,p.values[a]))return p.values[a]=g,1}return 0},reconfigure:(p,m)=>{let g,y=m.config.address[o];if(y!=null){let _=OE(m,y);if(this.dependencies.every(x=>x instanceof Nt?m.facet(x)===p.facet(x):x instanceof lo?m.field(x,!1)==p.field(x,!1):!0)||(l?QW(g=n(p),_,s):s(g=n(p),_)))return p.values[a]=_,0}else g=n(p);return p.values[a]=g,1}}}}function QW(r,e,i){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!i(r[n],e[n]))return!1;return!0}function T5(r,e){let i=!1;for(let n of e)Hb(r,n)&1&&(i=!0);return i}function CVe(r,e,i){let n=i.map(c=>r[c.id]),s=i.map(c=>c.type),o=n.filter(c=>!(c&1)),a=r[e.id]>>1;function l(c){let u=[];for(let d=0;d<n.length;d++){let p=OE(c,n[d]);if(s[d]==2)for(let m of p)u.push(m);else u.push(p)}return e.combine(u)}return{create(c){for(let u of n)Hb(c,u);return c.values[a]=l(c),1},update(c,u){if(!T5(c,o))return 0;let d=l(c);return e.compare(d,c.values[a])?0:(c.values[a]=d,1)},reconfigure(c,u){let d=T5(c,n),p=u.config.facets[e.id],m=u.facet(e);if(p&&!d&&GV(i,p))return c.values[a]=m,0;let g=l(c);return e.compare(g,m)?(c.values[a]=m,0):(c.values[a]=g,1)}}}const jW=Nt.define({static:!0});class lo{constructor(e,i,n,s,o){this.id=e,this.createF=i,this.updateF=n,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let i=new lo(WV++,e.create,e.update,e.compare||((n,s)=>n===s),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(jW).find(n=>n.field==this);return((i==null?void 0:i.create)||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:n=>(n.values[i]=this.create(n),1),update:(n,s)=>{let o=n.values[i],a=this.updateF(o,s);return this.compareF(o,a)?0:(n.values[i]=a,1)},reconfigure:(n,s)=>s.config.address[this.id]!=null?(n.values[i]=s.field(this),0):(n.values[i]=this.create(n),1)}}init(e){return[this,jW.of({field:this,create:e})]}get extension(){return this}}const sg={lowest:4,low:3,default:2,high:1,highest:0};function B1(r){return e=>new die(e,r)}const _0={highest:B1(sg.highest),high:B1(sg.high),default:B1(sg.default),low:B1(sg.low),lowest:B1(sg.lowest)};class die{constructor(e,i){this.inner=e,this.prec=i}}class VP{of(e){return new A5(this,e)}reconfigure(e){return VP.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class A5{constructor(e,i){this.compartment=e,this.inner=i}}class wE{constructor(e,i,n,s,o,a){for(this.base=e,this.compartments=i,this.dynamicSlots=n,this.address=s,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,n){let s=[],o=Object.create(null),a=new Map;for(let m of TVe(e,i,a))m instanceof lo?s.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let l=Object.create(null),c=[],u=[];for(let m of s)l[m.id]=u.length<<1,u.push(g=>m.slot(g));let d=n==null?void 0:n.config.facets;for(let m in o){let g=o[m],y=g[0].facet,_=d&&d[m]||[];if(g.every(x=>x.type==0))if(l[y.id]=c.length<<1|1,GV(_,g))c.push(n.facet(y));else{let x=y.combine(g.map(O=>O.value));c.push(n&&y.compare(x,n.facet(y))?n.facet(y):x)}else{for(let x of g)x.type==0?(l[x.id]=c.length<<1|1,c.push(x.value)):(l[x.id]=u.length<<1,u.push(O=>x.dynamicSlot(O)));l[y.id]=u.length<<1,u.push(x=>CVe(x,y,g))}}let p=u.map(m=>m(l));return new wE(e,a,p,l,c,o)}}function TVe(r,e,i){let n=[[],[],[],[],[]],s=new Map;function o(a,l){let c=s.get(a);if(c!=null){if(c<=l)return;let u=n[c].indexOf(a);u>-1&&n[c].splice(u,1),a instanceof A5&&i.delete(a.compartment)}if(s.set(a,l),Array.isArray(a))for(let u of a)o(u,l);else if(a instanceof A5){if(i.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;i.set(a.compartment,u),o(u,l)}else if(a instanceof die)o(a.inner,a.prec);else if(a instanceof lo)n[l].push(a),a.provides&&o(a.provides,l);else if(a instanceof bA)n[l].push(a),a.facet.extensions&&o(a.facet.extensions,sg.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,l)}}return o(r,sg.default),n.reduce((a,l)=>a.concat(l))}function Hb(r,e){if(e&1)return 2;let i=e>>1,n=r.status[i];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[i]=4;let s=r.computeSlot(r,r.config.dynamicSlots[i]);return r.status[i]=2|s}function OE(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const fie=Nt.define(),E5=Nt.define({combine:r=>r.some(e=>e),static:!0}),pie=Nt.define({combine:r=>r.length?r[0]:void 0,static:!0}),mie=Nt.define(),gie=Nt.define(),vie=Nt.define(),yie=Nt.define({combine:r=>r.length?r[0]:!1});class Gd{constructor(e,i){this.type=e,this.value=i}static define(){return new AVe}}class AVe{of(e){return new Gd(this,e)}}class EVe{constructor(e){this.map=e}of(e){return new Hi(this,e)}}class Hi{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new Hi(this.type,i)}is(e){return this.type==e}static define(e={}){return new EVe(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let n=[];for(let s of e){let o=s.map(i);o&&n.push(o)}return n}}Hi.reconfigure=Hi.define();Hi.appendConfig=Hi.define();class As{constructor(e,i,n,s,o,a){this.startState=e,this.changes=i,this.selection=n,this.effects=s,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,n&&uie(n,i.newLength),o.some(l=>l.type==As.time)||(this.annotations=o.concat(As.time.of(Date.now())))}static create(e,i,n,s,o,a){return new As(e,i,n,s,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(As.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}As.time=Gd.define();As.userEvent=Gd.define();As.addToHistory=Gd.define();As.remote=Gd.define();function MVe(r,e){let i=[];for(let n=0,s=0;;){let o,a;if(n<r.length&&(s==e.length||e[s]>=r[n]))o=r[n++],a=r[n++];else if(s<e.length)o=e[s++],a=e[s++];else return i;!i.length||i[i.length-1]<o?i.push(o,a):i[i.length-1]<a&&(i[i.length-1]=a)}}function _ie(r,e,i){var n;let s,o,a;return i?(s=e.changes,o=ws.empty(e.changes.length),a=r.changes.compose(e.changes)):(s=e.changes.map(r.changes),o=r.changes.mapDesc(e.changes,!0),a=r.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(o):(n=r.selection)===null||n===void 0?void 0:n.map(s),effects:Hi.mapEffects(r.effects,s).concat(Hi.mapEffects(e.effects,o)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function M5(r,e,i){let n=e.selection,s=Oy(e.annotations);return e.userEvent&&(s=s.concat(As.userEvent.of(e.userEvent))),{changes:e.changes instanceof ws?e.changes:ws.of(e.changes||[],i,r.facet(pie)),selection:n&&(n instanceof nt?n:nt.single(n.anchor,n.head)),effects:Oy(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function xie(r,e,i){let n=M5(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(i=!1);let a=!!e[o].sequential;n=_ie(n,M5(r,e[o],a?n.changes.newLength:r.doc.length),a)}let s=As.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return kVe(i?PVe(s):s)}function PVe(r){let e=r.startState,i=!0;for(let s of e.facet(mie)){let o=s(r);if(o===!1){i=!1;break}Array.isArray(o)&&(i=i===!0?o:MVe(i,o))}if(i!==!0){let s,o;if(i===!1)o=r.changes.invertedDesc,s=ws.empty(e.doc.length);else{let a=r.changes.filter(i);s=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}r=As.create(e,s,r.selection&&r.selection.map(o),Hi.mapEffects(r.effects,o),r.annotations,r.scrollIntoView)}let n=e.facet(gie);for(let s=n.length-1;s>=0;s--){let o=n[s](r);o instanceof As?r=o:Array.isArray(o)&&o.length==1&&o[0]instanceof As?r=o[0]:r=xie(e,Oy(o),!1)}return r}function kVe(r){let e=r.startState,i=e.facet(vie),n=r;for(let s=i.length-1;s>=0;s--){let o=i[s](r);o&&Object.keys(o).length&&(n=_ie(n,M5(e,o,r.changes.newLength),!0))}return n==r?r:As.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}const IVe=[];function Oy(r){return r==null?IVe:Array.isArray(r)?r:[r]}var wr=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(wr||(wr={}));const RVe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let P5;try{P5=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function BVe(r){if(P5)return P5.test(r);for(let e=0;e<r.length;e++){let i=r[e];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||RVe.test(i)))return!0}return!1}function DVe(r){return e=>{if(!/\S/.test(e))return wr.Space;if(BVe(e))return wr.Word;for(let i=0;i<r.length;i++)if(e.indexOf(r[i])>-1)return wr.Word;return wr.Other}}class wn{constructor(e,i,n,s,o,a){this.config=e,this.doc=i,this.selection=n,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Hb(this,l<<1);this.computeSlot=null}field(e,i=!0){let n=this.config.address[e.id];if(n==null){if(i)throw new RangeError("Field is not present in this state");return}return Hb(this,n),OE(this,n)}update(...e){return xie(this,e,!0)}applyTransaction(e){let i=this.config,{base:n,compartments:s}=i;for(let l of e.effects)l.is(VP.reconfigure)?(i&&(s=new Map,i.compartments.forEach((c,u)=>s.set(u,c)),i=null),s.set(l.value.compartment,l.value.extension)):l.is(Hi.reconfigure)?(i=null,n=l.value):l.is(Hi.appendConfig)&&(i=null,n=Oy(n).concat(l.value));let o;i?o=e.startState.values.slice():(i=wE.resolve(n,s,this),o=new wn(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(c,u)=>u.reconfigure(c,this),null).values);let a=e.startState.facet(E5)?e.newSelection:e.newSelection.asSingle();new wn(i,e.newDoc,a,o,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:nt.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,n=e(i.ranges[0]),s=this.changes(n.changes),o=[n.range],a=Oy(n.effects);for(let l=1;l<i.ranges.length;l++){let c=e(i.ranges[l]),u=this.changes(c.changes),d=u.map(s);for(let m=0;m<l;m++)o[m]=o[m].map(d);let p=s.mapDesc(u,!0);o.push(c.range.map(p)),s=s.compose(d),a=Hi.mapEffects(a,d).concat(Hi.mapEffects(Oy(c.effects),p))}return{changes:s,selection:nt.create(o,i.mainIndex),effects:a}}changes(e=[]){return e instanceof ws?e:ws.of(e,this.doc.length,this.facet(wn.lineSeparator))}toText(e){return Rn.of(e.split(this.facet(wn.lineSeparator)||O5))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(Hb(this,i),OE(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let s=e[n];s instanceof lo&&this.config.address[s.id]!=null&&(i[n]=s.spec.toJSON(this.field(e[n]),this))}return i}static fromJSON(e,i={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(e,o)){let a=n[o],l=e[o];s.push(a.init(c=>a.spec.fromJSON(l,c)))}}return wn.create({doc:e.doc,selection:nt.fromJSON(e.selection),extensions:i.extensions?s.concat([i.extensions]):s})}static create(e={}){let i=wE.resolve(e.extensions||[],new Map),n=e.doc instanceof Rn?e.doc:Rn.of((e.doc||"").split(i.staticFacet(wn.lineSeparator)||O5)),s=e.selection?e.selection instanceof nt?e.selection:nt.single(e.selection.anchor,e.selection.head):nt.single(0);return uie(s,n.length),i.staticFacet(E5)||(s=s.asSingle()),new wn(i,n,s,i.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(wn.tabSize)}get lineBreak(){return this.facet(wn.lineSeparator)||`
`}get readOnly(){return this.facet(yie)}phrase(e,...i){for(let n of this.facet(wn.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(n,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>i.length?n:i[o-1]})),e}languageDataAt(e,i,n=-1){let s=[];for(let o of this.facet(fie))for(let a of o(this,i,n))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return DVe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:n,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-n,l=e-n;for(;a>0;){let c=no(i,a,!1);if(o(i.slice(c,a))!=wr.Word)break;a=c}for(;l<s;){let c=no(i,l);if(o(i.slice(l,c))!=wr.Word)break;l=c}return a==l?null:nt.range(a+n,l+n)}}wn.allowMultipleSelections=E5;wn.tabSize=Nt.define({combine:r=>r.length?r[0]:4});wn.lineSeparator=pie;wn.readOnly=yie;wn.phrases=Nt.define({compare(r,e){let i=Object.keys(r),n=Object.keys(e);return i.length==n.length&&i.every(s=>r[s]==e[s])}});wn.languageData=fie;wn.changeFilter=mie;wn.transactionFilter=gie;wn.transactionExtender=vie;VP.reconfigure=Hi.define();function wu(r,e,i={}){let n={};for(let s of r)for(let o of Object.keys(s)){let a=s[o],l=n[o];if(l===void 0)n[o]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(i,o))n[o]=i[o](l,a);else throw new Error("Config merge conflict for field "+o)}for(let s in e)n[s]===void 0&&(n[s]=e[s]);return n}class Jg{eq(e){return this==e}range(e,i=e){return k5.create(e,i,this)}}Jg.prototype.startSide=Jg.prototype.endSide=0;Jg.prototype.point=!1;Jg.prototype.mapMode=Ho.TrackDel;let k5=class bie{constructor(e,i,n){this.from=e,this.to=i,this.value=n}static create(e,i,n){return new bie(e,i,n)}};function I5(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class HV{constructor(e,i,n,s){this.from=e,this.to=i,this.value=n,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,i,n,s=0){let o=n?this.to:this.from;for(let a=s,l=o.length;;){if(a==l)return a;let c=a+l>>1,u=o[c]-e||(n?this.value[c].endSide:this.value[c].startSide)-i;if(c==a)return u>=0?a:l;u>=0?l=c:a=c+1}}between(e,i,n,s){for(let o=this.findIndex(i,-1e9,!0),a=this.findIndex(n,1e9,!1,o);o<a;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,i){let n=[],s=[],o=[],a=-1,l=-1;for(let c=0;c<this.value.length;c++){let u=this.value[c],d=this.from[c]+e,p=this.to[c]+e,m,g;if(d==p){let y=i.mapPos(d,u.startSide,u.mapMode);if(y==null||(m=g=y,u.startSide!=u.endSide&&(g=i.mapPos(d,u.endSide),g<m)))continue}else if(m=i.mapPos(d,u.startSide),g=i.mapPos(p,u.endSide),m>g||m==g&&u.startSide>0&&u.endSide<=0)continue;(g-m||u.endSide-u.startSide)<0||(a<0&&(a=m),u.point&&(l=Math.max(l,g-m)),n.push(u),s.push(m-a),o.push(g-a))}return{mapped:n.length?new HV(s,o,n,l):null,pos:a}}}class _n{constructor(e,i,n,s){this.chunkPos=e,this.chunk=i,this.nextLayer=n,this.maxPoint=s}static create(e,i,n,s){return new _n(e,i,n,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:n=!1,filterFrom:s=0,filterTo:o=this.length}=e,a=e.filter;if(i.length==0&&!a)return this;if(n&&(i=i.slice().sort(I5)),this.isEmpty)return i.length?_n.of(i):this;let l=new wie(this,null,-1).goto(0),c=0,u=[],d=new Ep;for(;l.value||c<i.length;)if(c<i.length&&(l.from-i[c].from||l.startSide-i[c].value.startSide)>=0){let p=i[c++];d.addInner(p.from,p.to,p.value)||u.push(p)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==i.length||this.chunkEnd(l.chunkIndex)<i[c].from)&&(!a||s>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&d.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||s>l.to||o<l.from||a(l.from,l.to,l.value))&&(d.addInner(l.from,l.to,l.value)||u.push(k5.create(l.from,l.to,l.value))),l.next());return d.finishInner(this.nextLayer.isEmpty&&!u.length?_n.empty:this.nextLayer.update({add:u,filter:a,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],n=[],s=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],c=this.chunk[a],u=e.touchesRange(l,l+c.length);if(u===!1)s=Math.max(s,c.maxPoint),i.push(c),n.push(e.mapPos(l));else if(u===!0){let{mapped:d,pos:p}=c.map(l,e);d&&(s=Math.max(s,d.maxPoint),i.push(d),n.push(p))}}let o=this.nextLayer.map(e);return i.length==0?o:new _n(n,i,o||_n.empty,s)}between(e,i,n){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],a=this.chunk[s];if(i>=o&&e<=o+a.length&&a.between(o,e-o,i-o,n)===!1)return}this.nextLayer.between(e,i,n)}}iter(e=0){return Fw.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return Fw.from(e).goto(i)}static compare(e,i,n,s,o=-1){let a=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),l=i.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=o),c=YW(a,l,n),u=new D1(a,c,o),d=new D1(l,c,o);n.iterGaps((p,m,g)=>qW(u,p,d,m,g,s)),n.empty&&n.length==0&&qW(u,0,d,0,0,s)}static eq(e,i,n=0,s){s==null&&(s=999999999);let o=e.filter(d=>!d.isEmpty&&i.indexOf(d)<0),a=i.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let l=YW(o,a),c=new D1(o,l,0).goto(n),u=new D1(a,l,0).goto(n);for(;;){if(c.to!=u.to||!R5(c.active,u.active)||c.point&&(!u.point||!c.point.eq(u.point)))return!1;if(c.to>s)return!0;c.next(),u.next()}}static spans(e,i,n,s,o=-1){let a=new D1(e,null,o).goto(i),l=i,c=a.openStart;for(;;){let u=Math.min(a.to,n);if(a.point){let d=a.activeForPoint(a.to),p=a.pointFrom<i?d.length+1:a.point.startSide<0?d.length:Math.min(d.length,c);s.point(l,u,a.point,d,p,a.pointRank),c=Math.min(a.openEnd(u),d.length)}else u>l&&(s.span(l,u,a.active,c),c=a.openEnd(u));if(a.to>n)return c+(a.point&&a.to>n?1:0);l=a.to,a.next()}}static of(e,i=!1){let n=new Ep;for(let s of e instanceof k5?[e]:i?LVe(e):e)n.add(s.from,s.to,s.value);return n.finish()}static join(e){if(!e.length)return _n.empty;let i=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let s=e[n];s!=_n.empty;s=s.nextLayer)i=new _n(s.chunkPos,s.chunk,i,Math.max(s.maxPoint,i.maxPoint));return i}}_n.empty=new _n([],[],null,-1);function LVe(r){if(r.length>1)for(let e=r[0],i=1;i<r.length;i++){let n=r[i];if(I5(e,n)>0)return r.slice().sort(I5);e=n}return r}_n.empty.nextLayer=_n.empty;class Ep{finishChunk(e){this.chunks.push(new HV(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,n){this.addInner(e,i,n)||(this.nextLayer||(this.nextLayer=new Ep)).add(e,i,n)}addInner(e,i,n){let s=e-this.lastTo||n.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=i,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let n=i.value.length-1;return this.last=i.value[n],this.lastFrom=i.from[n]+e,this.lastTo=i.to[n]+e,!0}finish(){return this.finishInner(_n.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=_n.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function YW(r,e,i){let n=new Map;for(let o of r)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&n.set(o.chunk[a],o.chunkPos[a]);let s=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let l=n.get(o.chunk[a]);l!=null&&(i?i.mapPos(l):l)==o.chunkPos[a]&&!(i!=null&&i.touchesRange(l,l+o.chunk[a].length))&&s.add(o.chunk[a])}return s}class wie{constructor(e,i,n,s=0){this.layer=e,this.skip=i,this.minPoint=n,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,n){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!n||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],n=e+i.from[this.rangeIndex];if(this.from=n,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Fw{constructor(e){this.heap=e}static from(e,i=null,n=-1){let s=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=n&&s.push(new wie(a,i,n,o));return s.length==1?s[0]:new Fw(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let n of this.heap)n.goto(e,i);for(let n=this.heap.length>>1;n>=0;n--)hR(this.heap,n);return this.next(),this}forward(e,i){for(let n of this.heap)n.forward(e,i);for(let n=this.heap.length>>1;n>=0;n--)hR(this.heap,n);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),hR(this.heap,0)}}}function hR(r,e){for(let i=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let s=r[n];if(n+1<r.length&&s.compare(r[n+1])>=0&&(s=r[n+1],n++),i.compare(s)<0)break;r[n]=i,r[e]=s,e=n}}class D1{constructor(e,i,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Fw.from(e,i,n)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){R2(this.active,e),R2(this.activeTo,e),R2(this.activeRank,e),this.minActive=ZW(this.active,this.activeTo)}addActive(e){let i=0,{value:n,to:s,rank:o}=this.cursor;for(;i<this.activeRank.length&&(o-this.activeRank[i]||s-this.activeTo[i])>0;)i++;B2(this.active,i,n),B2(this.activeTo,i,s),B2(this.activeRank,i,o),e&&B2(e,i,this.cursor.from),this.minActive=ZW(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),n&&R2(n,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(n),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let s=n.length-1;s>=0&&n[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&i.push(this.active[n]);return i.reverse()}openEnd(e){let i=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)i++;return i}}function qW(r,e,i,n,s,o){r.goto(e),i.goto(n);let a=n+s,l=n,c=n-e;for(;;){let u=r.to+c-i.to||r.endSide-i.endSide,d=u<0?r.to+c:i.to,p=Math.min(d,a);if(r.point||i.point?r.point&&i.point&&(r.point==i.point||r.point.eq(i.point))&&R5(r.activeForPoint(r.to),i.activeForPoint(i.to))||o.comparePoint(l,p,r.point,i.point):p>l&&!R5(r.active,i.active)&&o.compareRange(l,p,r.active,i.active),d>a)break;l=d,u<=0&&r.next(),u>=0&&i.next()}}function R5(r,e){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!=e[i]&&!r[i].eq(e[i]))return!1;return!0}function R2(r,e){for(let i=e,n=r.length-1;i<n;i++)r[i]=r[i+1];r.pop()}function B2(r,e,i){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=i}function ZW(r,e){let i=-1,n=1e9;for(let s=0;s<e.length;s++)(e[s]-n||r[s].endSide-r[i].endSide)<0&&(i=s,n=e[s]);return i}function B_(r,e,i=r.length){let n=0;for(let s=0;s<i;)r.charCodeAt(s)==9?(n+=e-n%e,s++):(n++,s=no(r,s));return n}function B5(r,e,i,n){for(let s=0,o=0;;){if(o>=e)return s;if(s==r.length)break;o+=r.charCodeAt(s)==9?i-o%i:1,s=no(r,s)}return n===!0?-1:r.length}const D5="ͼ",KW=typeof Symbol>"u"?"__"+D5:Symbol.for(D5),L5=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),JW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Mp{constructor(e,i){this.rules=[];let{finish:n}=i||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,l,c,u){let d=[],p=/^@(\w+)\b/.exec(a[0]),m=p&&p[1]=="keyframes";if(p&&l==null)return c.push(a[0]+";");for(let g in l){let y=l[g];if(/&/.test(g))o(g.split(/,\s*/).map(_=>a.map(x=>_.replace(/&/,x))).reduce((_,x)=>_.concat(x)),y,c);else if(y&&typeof y=="object"){if(!p)throw new RangeError("The value of a property ("+g+") should be a primitive value.");o(s(g),y,d,m)}else y!=null&&d.push(g.replace(/_.*/,"").replace(/[A-Z]/g,_=>"-"+_.toLowerCase())+": "+y+";")}(d.length||m)&&c.push((n&&!p&&!u?a.map(n):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)o(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=JW[KW]||1;return JW[KW]=e+1,D5+e.toString(36)}static mount(e,i,n){let s=e[L5],o=n&&n.nonce;s?o&&s.setNonce(o):s=new NVe(e,o),s.mount(Array.isArray(i)?i:[i],e)}}let eG=new Map;class NVe{constructor(e,i){let n=e.ownerDocument||e,s=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=eG.get(n);if(o)return e[L5]=o;this.sheet=new s.CSSStyleSheet,eG.set(n,this)}else this.styleTag=n.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);this.modules=[],e[L5]=this}mount(e,i){let n=this.sheet,s=0,o=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,l),n)for(let u=0;u<l.rules.length;u++)n.insertRule(l.rules[u],s++)}else{for(;o<c;)s+=this.modules[o++].rules.length;s+=l.rules.length,o++}}if(n)i.adoptedStyleSheets.indexOf(this.sheet)<0&&(i.adoptedStyleSheets=[this.sheet,...i.adoptedStyleSheets]);else{let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a;let l=i.head||i;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Pp={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$w={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},VVe=typeof navigator<"u"&&/Mac/.test(navigator.platform),FVe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var eo=0;eo<10;eo++)Pp[48+eo]=Pp[96+eo]=String(eo);for(var eo=1;eo<=24;eo++)Pp[eo+111]="F"+eo;for(var eo=65;eo<=90;eo++)Pp[eo]=String.fromCharCode(eo+32),$w[eo]=String.fromCharCode(eo);for(var cR in Pp)$w.hasOwnProperty(cR)||($w[cR]=Pp[cR]);function $Ve(r){var e=VVe&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||FVe&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",i=!e&&r.key||(r.shiftKey?$w:Pp)[r.keyCode]||r.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function Uw(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function N5(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function UVe(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function wA(r,e){if(!e.anchorNode)return!1;try{return N5(r,e.anchorNode)}catch{return!1}}function zw(r){return r.nodeType==3?t0(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Qb(r,e,i,n){return i?tG(r,e,i,n,-1)||tG(r,e,i,n,1):!1}function e0(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function SE(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function tG(r,e,i,n,s){for(;;){if(r==i&&e==n)return!0;if(e==(s<0?0:Rd(r))){if(r.nodeName=="DIV")return!1;let o=r.parentNode;if(!o||o.nodeType!=1)return!1;e=e0(r)+(s<0?0:1),r=o}else if(r.nodeType==1){if(r=r.childNodes[e+(s<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=s<0?Rd(r):0}else return!1}}function Rd(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function FP(r,e){let i=e?r.left:r.right;return{left:i,right:i,top:r.top,bottom:r.bottom}}function zVe(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function Oie(r,e){let i=e.width/r.offsetWidth,n=e.height/r.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.width-r.offsetWidth)<1)&&(i=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-r.offsetHeight)<1)&&(n=1),{scaleX:i,scaleY:n}}function XVe(r,e,i,n,s,o,a,l){let c=r.ownerDocument,u=c.defaultView||window;for(let d=r,p=!1;d&&!p;)if(d.nodeType==1){let m,g=d==c.body,y=1,_=1;if(g)m=zVe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(p=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let S=d.getBoundingClientRect();({scaleX:y,scaleY:_}=Oie(d,S)),m={left:S.left,right:S.left+d.clientWidth*y,top:S.top,bottom:S.top+d.clientHeight*_}}let x=0,O=0;if(s=="nearest")e.top<m.top?(O=-(m.top-e.top+a),i>0&&e.bottom>m.bottom+O&&(O=e.bottom-m.bottom+O+a)):e.bottom>m.bottom&&(O=e.bottom-m.bottom+a,i<0&&e.top-O<m.top&&(O=-(m.top+O-e.top+a)));else{let S=e.bottom-e.top,w=m.bottom-m.top;O=(s=="center"&&S<=w?e.top+S/2-w/2:s=="start"||s=="center"&&i<0?e.top-a:e.bottom-w+a)-m.top}if(n=="nearest"?e.left<m.left?(x=-(m.left-e.left+o),i>0&&e.right>m.right+x&&(x=e.right-m.right+x+o)):e.right>m.right&&(x=e.right-m.right+o,i<0&&e.left<m.left+x&&(x=-(m.left+x-e.left+o))):x=(n=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:n=="start"==l?e.left-o:e.right-(m.right-m.left)+o)-m.left,x||O)if(g)u.scrollBy(x,O);else{let S=0,w=0;if(O){let C=d.scrollTop;d.scrollTop+=O/_,w=(d.scrollTop-C)*_}if(x){let C=d.scrollLeft;d.scrollLeft+=x/y,S=(d.scrollLeft-C)*y}e={left:e.left-S,top:e.top-w,right:e.right-S,bottom:e.bottom-w},S&&Math.abs(S-x)<1&&(n="nearest"),w&&Math.abs(w-O)<1&&(s="nearest")}if(g)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function WVe(r){let e=r.ownerDocument,i,n;for(let s=r.parentNode;s&&!(s==e.body||i&&n);)if(s.nodeType==1)!n&&s.scrollHeight>s.clientHeight&&(n=s),!i&&s.scrollWidth>s.clientWidth&&(i=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:i,y:n}}class GVe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:n}=e;this.set(i,Math.min(e.anchorOffset,i?Rd(i):0),n,Math.min(e.focusOffset,n?Rd(n):0))}set(e,i,n,s){this.anchorNode=e,this.anchorOffset=i,this.focusNode=n,this.focusOffset=s}}let _v=null;function Sie(r){if(r.setActive)return r.setActive();if(_v)return r.focus(_v);let e=[];for(let i=r;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(r.focus(_v==null?{get preventScroll(){return _v={preventScroll:!0},!0}}:void 0),!_v){_v=!1;for(let i=0;i<e.length;){let n=e[i++],s=e[i++],o=e[i++];n.scrollTop!=s&&(n.scrollTop=s),n.scrollLeft!=o&&(n.scrollLeft=o)}}}let iG;function t0(r,e,i=e){let n=iG||(iG=document.createRange());return n.setEnd(r,i),n.setStart(r,e),n}function Sy(r,e,i,n){let s={key:e,code:e,keyCode:i,which:i,cancelable:!0};n&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=n);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,r.dispatchEvent(o);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,r.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function HVe(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function Cie(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function QVe(r,e){let i=e.focusNode,n=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=n)return!1;for(n=Math.min(n,Rd(i));;)if(n){if(i.nodeType!=1)return!1;let s=i.childNodes[n-1];s.contentEditable=="false"?n--:(i=s,n=Rd(i))}else{if(i==r)return!0;n=e0(i),i=i.parentNode}}function Tie(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function Aie(r,e){for(let i=r,n=e;;){if(i.nodeType==3&&n>0)return{node:i,offset:n};if(i.nodeType==1&&n>0){if(i.contentEditable=="false")return null;i=i.childNodes[n-1],n=Rd(i)}else if(i.parentNode&&!SE(i))n=e0(i),i=i.parentNode;else return null}}function Eie(r,e){for(let i=r,n=e;;){if(i.nodeType==3&&n<i.nodeValue.length)return{node:i,offset:n};if(i.nodeType==1&&n<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[n],n=0}else if(i.parentNode&&!SE(i))n=e0(i)+1,i=i.parentNode;else return null}}class _o{constructor(e,i,n=!0){this.node=e,this.offset=i,this.precise=n}static before(e,i){return new _o(e.parentNode,e0(e),i)}static after(e,i){return new _o(e.parentNode,e0(e)+1,i)}}const QV=[];class qn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let n of this.children){if(n==e)return i;i+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let n=this.dom,s=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=s?s.nextSibling:n.firstChild)){let l=qn.get(o);(!l||!l.parent&&l.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,i),a.flags&=-8}if(o=s?s.nextSibling:n.firstChild,i&&!i.written&&i.node==n&&o!=a.dom&&(i.written=!0),a.dom.parentNode==n)for(;o&&o!=a.dom;)o=nG(o);else n.insertBefore(a.dom,o);s=a.dom}for(o=s?s.nextSibling:n.firstChild,o&&i&&i.node==n&&(i.written=!0);o;)o=nG(o)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,i),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let n;if(e==this.dom)n=this.dom.childNodes[i];else{let s=Rd(e)==0?0:i==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;s==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?s=-1:s=1),e=o}s<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!qn.get(n);)n=n.nextSibling;if(!n)return this.length;for(let s=0,o=0;;s++){let a=this.children[s];if(a.dom==n)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,i,n=0){let s=-1,o=-1,a=-1,l=-1;for(let c=0,u=n,d=n;c<this.children.length;c++){let p=this.children[c],m=u+p.length;if(u<e&&m>i)return p.domBoundsAround(e,i,u);if(m>=e&&s==-1&&(s=c,o=u),u>i&&p.dom.parentNode==this.dom){a=c,l=d;break}d=m,u=m+p.breakAfter}return{from:o,to:l<0?n+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,n=QV){this.markDirty();for(let s=e;s<i;s++){let o=this.children[s];o.parent==this&&n.indexOf(o)<0&&o.destroy()}this.children.splice(e,i-e,...n);for(let s=0;s<n.length;s++)n[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Mie(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,n,s,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}qn.prototype.breakAfter=0;function nG(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class Mie{constructor(e,i,n){this.children=e,this.pos=i,this.i=n,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Pie(r,e,i,n,s,o,a,l,c){let{children:u}=r,d=u.length?u[e]:null,p=o.length?o[o.length-1]:null,m=p?p.breakAfter:a;if(!(e==n&&d&&!a&&!m&&o.length<2&&d.merge(i,s,o.length?p:null,i==0,l,c))){if(n<u.length){let g=u[n];g&&(s<g.length||g.breakAfter&&(p!=null&&p.breakAfter))?(e==n&&(g=g.split(s),s=0),!m&&p&&g.merge(0,s,p,!0,0,c)?o[o.length-1]=g:((s||g.children.length&&!g.children[0].length)&&g.merge(0,s,null,!1,0,c),o.push(g))):g!=null&&g.breakAfter&&(p?p.breakAfter=1:a=1),n++}for(d&&(d.breakAfter=a,i>0&&(!a&&o.length&&d.merge(i,d.length,o[0],!1,l,0)?d.breakAfter=o.shift().breakAfter:(i<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(i,d.length,null,!1,l,0),e++));e<n&&o.length;)if(u[n-1].become(o[o.length-1]))n--,o.pop(),c=o.length?0:l;else if(u[e].become(o[0]))e++,o.shift(),l=o.length?0:c;else break;!o.length&&e&&n<u.length&&!u[e-1].breakAfter&&u[n].merge(0,0,u[e-1],!1,l,c)&&e--,(e<n||o.length)&&r.replaceChildren(e,n,o)}}function kie(r,e,i,n,s,o){let a=r.childCursor(),{i:l,off:c}=a.findPos(i,1),{i:u,off:d}=a.findPos(e,-1),p=e-i;for(let m of n)p+=m.length;r.length+=p,Pie(r,u,d,l,c,n,0,s,o)}let _a=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},V5=typeof document<"u"?document:{documentElement:{style:{}}};const F5=/Edge\/(\d+)/.exec(_a.userAgent),Iie=/MSIE \d/.test(_a.userAgent),$5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_a.userAgent),$P=!!(Iie||$5||F5),rG=!$P&&/gecko\/(\d+)/i.test(_a.userAgent),uR=!$P&&/Chrome\/(\d+)/.exec(_a.userAgent),sG="webkitFontSmoothing"in V5.documentElement.style,Rie=!$P&&/Apple Computer/.test(_a.vendor),oG=Rie&&(/Mobile\/\w+/.test(_a.userAgent)||_a.maxTouchPoints>2);var Ft={mac:oG||/Mac/.test(_a.platform),windows:/Win/.test(_a.platform),linux:/Linux|X11/.test(_a.platform),ie:$P,ie_version:Iie?V5.documentMode||6:$5?+$5[1]:F5?+F5[1]:0,gecko:rG,gecko_version:rG?+(/Firefox\/(\d+)/.exec(_a.userAgent)||[0,0])[1]:0,chrome:!!uR,chrome_version:uR?+uR[1]:0,ios:oG,android:/Android\b/.test(_a.userAgent),webkit:sG,safari:Rie,webkit_version:sG?+(/\bAppleWebKit\/(\d+)/.exec(_a.userAgent)||[0,0])[1]:0,tabSize:V5.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const jVe=256;class hc extends qn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,n){return this.flags&8||n&&(!(n instanceof hc)||this.length-(i-e)+n.length>jVe||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new hc(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new _o(this.dom,e)}domBoundsAround(e,i,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return YVe(this.dom,e,i)}}class Bd extends qn{constructor(e,i=[],n=0){super(),this.mark=e,this.children=i,this.length=n;for(let s of i)s.setParent(this)}setAttrs(e){if(Cie(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,n,s,o,a){return n&&(!(n instanceof Bd&&n.mark.eq(this.mark))||e&&o<=0||i<this.length&&a<=0)?!1:(kie(this,e,i,n?n.children.slice():[],o-1,a-1),this.markDirty(),!0)}split(e){let i=[],n=0,s=-1,o=0;for(let l of this.children){let c=n+l.length;c>e&&i.push(n<e?l.split(e-n):l),s<0&&n>=e&&(s=o),n=c,o++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Bd(this.mark,i,a)}domAtPos(e){return Bie(this,e)}coordsAt(e,i){return Lie(this,e,i)}}function YVe(r,e,i){let n=r.nodeValue.length;e>n&&(e=n);let s=e,o=e,a=0;e==0&&i<0||e==n&&i>=0?Ft.chrome||Ft.gecko||(e?(s--,a=1):o<n&&(o++,a=-1)):i<0?s--:o<n&&o++;let l=t0(r,s,o).getClientRects();if(!l.length)return null;let c=l[(a?a<0:i>=0)?0:l.length-1];return Ft.safari&&!a&&c.width==0&&(c=Array.prototype.find.call(l,u=>u.width)||c),a?FP(c,a<0):c||null}class rp extends qn{static create(e,i,n){return new rp(e,i,n)}constructor(e,i,n){super(),this.widget=e,this.length=i,this.side=n,this.prevWidget=null}split(e){let i=rp.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,i,n,s,o,a){return n&&(!(n instanceof rp)||!this.widget.compare(n.widget)||e>0&&o<=0||i<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-i),!0)}become(e){return e instanceof rp&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Rn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,n=i&&i.state.doc,s=this.posAtStart;return n?n.slice(s,s+this.length):Rn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?_o.before(this.dom):_o.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let n=this.widget.coordsAt(this.dom,e,i);if(n)return n;let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let l=a?s.length-1:0;o=s[l],!(e>0?l==0:l==s.length-1||o.top<o.bottom);l+=a?-1:1);return FP(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class n_ extends qn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof n_&&e.side==this.side}split(){return new n_(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?_o.before(this.dom):_o.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Rn.empty}get isHidden(){return!0}}hc.prototype.children=rp.prototype.children=n_.prototype.children=QV;function Bie(r,e){let i=r.dom,{children:n}=r,s=0;for(let o=0;s<n.length;s++){let a=n[s],l=o+a.length;if(!(l==o&&a.getSide()<=0)){if(e>o&&e<l&&a.dom.parentNode==i)return a.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=s;o>0;o--){let a=n[o-1];if(a.dom.parentNode==i)return a.domAtPos(a.length)}for(let o=s;o<n.length;o++){let a=n[o];if(a.dom.parentNode==i)return a.domAtPos(0)}return new _o(i,0)}function Die(r,e,i){let n,{children:s}=r;i>0&&e instanceof Bd&&s.length&&(n=s[s.length-1])instanceof Bd&&n.mark.eq(e.mark)?Die(n,e.children[0],i-1):(s.push(e),e.setParent(r)),r.length+=e.length}function Lie(r,e,i){let n=null,s=-1,o=null,a=-1;function l(u,d){for(let p=0,m=0;p<u.children.length&&m<=d;p++){let g=u.children[p],y=m+g.length;y>=d&&(g.children.length?l(g,d-m):(!o||o.isHidden&&i>0)&&(y>d||m==y&&g.getSide()>0)?(o=g,a=d-m):(m<d||m==y&&g.getSide()<0&&!g.isHidden)&&(n=g,s=d-m)),m=y}}l(r,e);let c=(i<0?n:o)||n||o;return c?c.coordsAt(Math.max(0,c==n?s:a),i):qVe(r)}function qVe(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let i=zw(e);return i[i.length-1]||null}function U5(r,e){for(let i in r)i=="class"&&e.class?e.class+=" "+r.class:i=="style"&&e.style?e.style+=";"+r.style:e[i]=r[i];return e}const aG=Object.create(null);function CE(r,e,i){if(r==e)return!0;r||(r=aG),e||(e=aG);let n=Object.keys(r),s=Object.keys(e);if(n.length-(i&&n.indexOf(i)>-1?1:0)!=s.length-(i&&s.indexOf(i)>-1?1:0))return!1;for(let o of n)if(o!=i&&(s.indexOf(o)==-1||r[o]!==e[o]))return!1;return!0}function z5(r,e,i){let n=!1;if(e)for(let s in e)i&&s in i||(n=!0,s=="style"?r.style.cssText="":r.removeAttribute(s));if(i)for(let s in i)e&&e[s]==i[s]||(n=!0,s=="style"?r.style.cssText=i[s]:r.setAttribute(s,i[s]));return n}function ZVe(r){let e=Object.create(null);for(let i=0;i<r.attributes.length;i++){let n=r.attributes[i];e[n.name]=n.value}return e}class jp{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ko=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Ko||(Ko={}));class vi extends Jg{constructor(e,i,n,s){super(),this.startSide=e,this.endSide=i,this.widget=n,this.spec=s}get heightRelevant(){return!1}static mark(e){return new nS(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return i+=n&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new kp(e,i,i,n,e.widget||null,!1)}static replace(e){let i=!!e.block,n,s;if(e.isBlockGap)n=-5e8,s=4e8;else{let{start:o,end:a}=Nie(e,i);n=(o?i?-3e8:-1:5e8)-1,s=(a?i?2e8:1:-6e8)+1}return new kp(e,n,s,i,e.widget||null,!0)}static line(e){return new rS(e)}static set(e,i=!1){return _n.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}vi.none=_n.empty;class nS extends vi{constructor(e){let{start:i,end:n}=Nie(e);super(i?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,n;return this==e||e instanceof nS&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&CE(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}nS.prototype.point=!1;class rS extends vi{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof rS&&this.spec.class==e.spec.class&&CE(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}rS.prototype.mapMode=Ho.TrackBefore;rS.prototype.point=!0;class kp extends vi{constructor(e,i,n,s,o,a){super(i,n,o,e),this.block=s,this.isReplace=a,this.mapMode=s?i<=0?Ho.TrackBefore:Ho.TrackAfter:Ho.TrackDel}get type(){return this.startSide!=this.endSide?Ko.WidgetRange:this.startSide<=0?Ko.WidgetBefore:Ko.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof kp&&KVe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}kp.prototype.point=!0;function Nie(r,e=!1){let{inclusiveStart:i,inclusiveEnd:n}=r;return i==null&&(i=r.inclusive),n==null&&(n=r.inclusive),{start:i??e,end:n??e}}function KVe(r,e){return r==e||!!(r&&e&&r.compare(e))}function X5(r,e,i,n=0){let s=i.length-1;s>=0&&i[s]+n>=r?i[s]=Math.max(i[s],e):i.push(r,e)}class ls extends qn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,n,s,o,a){if(n){if(!(n instanceof ls))return!1;this.dom||n.transferDOM(this)}return s&&this.setDeco(n?n.attrs:null),kie(this,e,i,n?n.children.slice():[],o,a),!0}split(e){let i=new ls;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:n,off:s}=this.childPos(e);s&&(i.append(this.children[n].split(s),0),this.children[n].merge(s,this.children[n].length,null,!1,0,0),n++);for(let o=n;o<this.children.length;o++)i.append(this.children[o],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){CE(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){Die(this,e,i)}addLineDeco(e){let i=e.spec.attributes,n=e.spec.class;i&&(this.attrs=U5(i,this.attrs||{})),n&&(this.attrs=U5({class:n},this.attrs||{}))}domAtPos(e){return Bie(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var n;this.dom?this.flags&4&&(Cie(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(z5(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let s=this.dom.lastChild;for(;s&&qn.get(s)instanceof Bd;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((n=qn.get(s))===null||n===void 0?void 0:n.isEditable)==!1&&(!Ft.ios||!this.children.some(o=>o instanceof hc))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let n of this.children){if(!(n instanceof hc)||/[^ -~]/.test(n.text))return null;let s=zw(n.dom);if(s.length!=1)return null;e+=s[0].width,i=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let n=Lie(this,e,i);if(!this.children.length&&n&&this.parent){let{heightOracle:s}=this.parent.view.viewState,o=n.bottom-n.top;if(Math.abs(o-s.lineHeight)<2&&s.textHeight<o){let a=(o-s.textHeight)/2;return{top:n.top+a,bottom:n.bottom-a,left:n.left,right:n.left}}}return n}become(e){return e instanceof ls&&this.children.length==0&&e.children.length==0&&CE(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,i){for(let n=0,s=0;n<e.children.length;n++){let o=e.children[n],a=s+o.length;if(a>=i){if(o instanceof ls)return o;if(a>i)break}s=a+o.breakAfter}return null}}class Od extends qn{constructor(e,i,n){super(),this.widget=e,this.length=i,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,i,n,s,o,a){return n&&(!(n instanceof Od)||!this.widget.compare(n.widget)||e>0&&o<=0||i<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?_o.before(this.dom):_o.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let n=new Od(this.widget,i,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return QV}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Rn.empty}domBoundsAround(){return null}become(e){return e instanceof Od&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){let n=this.widget.coordsAt(this.dom,e,i);return n||(this.widget instanceof W5?null:FP(this.dom.getBoundingClientRect(),this.length?e==0:i<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:i,endSide:n}=this.deco;return i==n?!1:e<0?i<0:n>0}}class W5 extends jp{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class jb{constructor(e,i,n,s){this.doc=e,this.pos=i,this.end=n,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Od&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ls),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(D2(new n_(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Od)&&this.getLine()}buildText(e,i,n){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-n)),this.getLine().append(D2(new hc(this.text.slice(this.textOff,this.textOff+s)),i),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}}span(e,i,n,s){this.buildText(i-e,n,s),this.pos=i,this.openStart<0&&(this.openStart=s)}point(e,i,n,s,o,a){if(this.disallowBlockEffectsFor[a]&&n instanceof kp){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=i-e;if(n instanceof kp)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Od(n.widget||r_.block,l,n));else{let c=rp.create(n.widget||r_.inline,l,l?0:n.startSide),u=this.atCursorPos&&!c.isEditable&&o<=s.length&&(e<i||n.startSide>0),d=!c.isEditable&&(e<i||o>s.length||n.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!u&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),u&&(p.append(D2(new n_(1),s),o),o=s.length+Math.max(0,o-s.length)),p.append(D2(c,s),o),this.atCursorPos=d,this.pendingBuffer=d?e<i||o>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=o)}static build(e,i,n,s,o){let a=new jb(e,i,n,o);return a.openEnd=_n.spans(s,i,n,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function D2(r,e){for(let i of e)r=new Bd(i,[r],r.length);return r}class r_ extends jp{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}r_.inline=new r_("span");r_.block=new r_("div");var ur=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(ur||(ur={}));const i0=ur.LTR,jV=ur.RTL;function Vie(r){let e=[];for(let i=0;i<r.length;i++)e.push(1<<+r[i]);return e}const JVe=Vie("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),e6e=Vie("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),G5=Object.create(null),Sc=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),i=r.charCodeAt(1);G5[e]=i,G5[i]=-e}function Fie(r){return r<=247?JVe[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?e6e[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const t6e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class sp{get dir(){return this.level%2?jV:i0}constructor(e,i,n){this.from=e,this.to=i,this.level=n}side(e,i){return this.dir==i==e?this.to:this.from}forward(e,i){return e==(this.dir==i)}static find(e,i,n,s){let o=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=i&&l.to>=i){if(l.level==n)return a;(o<0||(s!=0?s<0?l.from<i:l.to>i:e[o].level>l.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function $ie(r,e){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++){let n=r[i],s=e[i];if(n.from!=s.from||n.to!=s.to||n.direction!=s.direction||!$ie(n.inner,s.inner))return!1}return!0}const jn=[];function i6e(r,e,i,n,s){for(let o=0;o<=n.length;o++){let a=o?n[o-1].to:e,l=o<n.length?n[o].from:i,c=o?256:s;for(let u=a,d=c,p=c;u<l;u++){let m=Fie(r.charCodeAt(u));m==512?m=d:m==8&&p==4&&(m=16),jn[u]=m==4?2:m,m&7&&(p=m),d=m}for(let u=a,d=c,p=c;u<l;u++){let m=jn[u];if(m==128)u<l-1&&d==jn[u+1]&&d&24?m=jn[u]=d:jn[u]=256;else if(m==64){let g=u+1;for(;g<l&&jn[g]==64;)g++;let y=u&&d==8||g<i&&jn[g]==8?p==1?1:8:256;for(let _=u;_<g;_++)jn[_]=y;u=g-1}else m==8&&p==1&&(jn[u]=1);d=m,m&7&&(p=m)}}}function n6e(r,e,i,n,s){let o=s==1?2:1;for(let a=0,l=0,c=0;a<=n.length;a++){let u=a?n[a-1].to:e,d=a<n.length?n[a].from:i;for(let p=u,m,g,y;p<d;p++)if(g=G5[m=r.charCodeAt(p)])if(g<0){for(let _=l-3;_>=0;_-=3)if(Sc[_+1]==-g){let x=Sc[_+2],O=x&2?s:x&4?x&1?o:s:0;O&&(jn[p]=jn[Sc[_]]=O),l=_;break}}else{if(Sc.length==189)break;Sc[l++]=p,Sc[l++]=m,Sc[l++]=c}else if((y=jn[p])==2||y==1){let _=y==s;c=_?0:1;for(let x=l-3;x>=0;x-=3){let O=Sc[x+2];if(O&2)break;if(_)Sc[x+2]|=2;else{if(O&4)break;Sc[x+2]|=4}}}}}function r6e(r,e,i,n){for(let s=0,o=n;s<=i.length;s++){let a=s?i[s-1].to:r,l=s<i.length?i[s].from:e;for(let c=a;c<l;){let u=jn[c];if(u==256){let d=c+1;for(;;)if(d==l){if(s==i.length)break;d=i[s++].to,l=s<i.length?i[s].from:e}else if(jn[d]==256)d++;else break;let p=o==1,m=(d<e?jn[d]:n)==1,g=p==m?p?1:2:n;for(let y=d,_=s,x=_?i[_-1].to:r;y>c;)y==x&&(y=i[--_].from,x=_?i[_-1].to:r),jn[--y]=g;c=d}else o=u,c++}}}function H5(r,e,i,n,s,o,a){let l=n%2?2:1;if(n%2==s%2)for(let c=e,u=0;c<i;){let d=!0,p=!1;if(u==o.length||c<o[u].from){let _=jn[c];_!=l&&(d=!1,p=_==16)}let m=!d&&l==1?[]:null,g=d?n:n+1,y=c;e:for(;;)if(u<o.length&&y==o[u].from){if(p)break e;let _=o[u];if(!d)for(let x=_.to,O=u+1;;){if(x==i)break e;if(O<o.length&&o[O].from==x)x=o[O++].to;else{if(jn[x]==l)break e;break}}if(u++,m)m.push(_);else{_.from>c&&a.push(new sp(c,_.from,g));let x=_.direction==i0!=!(g%2);Q5(r,x?n+1:n,s,_.inner,_.from,_.to,a),c=_.to}y=_.to}else{if(y==i||(d?jn[y]!=l:jn[y]==l))break;y++}m?H5(r,c,y,n+1,s,m,a):c<y&&a.push(new sp(c,y,g)),c=y}else for(let c=i,u=o.length;c>e;){let d=!0,p=!1;if(!u||c>o[u-1].to){let _=jn[c-1];_!=l&&(d=!1,p=_==16)}let m=!d&&l==1?[]:null,g=d?n:n+1,y=c;e:for(;;)if(u&&y==o[u-1].to){if(p)break e;let _=o[--u];if(!d)for(let x=_.from,O=u;;){if(x==e)break e;if(O&&o[O-1].to==x)x=o[--O].from;else{if(jn[x-1]==l)break e;break}}if(m)m.push(_);else{_.to<c&&a.push(new sp(_.to,c,g));let x=_.direction==i0!=!(g%2);Q5(r,x?n+1:n,s,_.inner,_.from,_.to,a),c=_.from}y=_.from}else{if(y==e||(d?jn[y-1]!=l:jn[y-1]==l))break;y--}m?H5(r,y,c,n+1,s,m,a):y<c&&a.push(new sp(y,c,g)),c=y}}function Q5(r,e,i,n,s,o,a){let l=e%2?2:1;i6e(r,s,o,n,l),n6e(r,s,o,n,l),r6e(s,o,n,l),H5(r,s,o,e,i,n,a)}function s6e(r,e,i){if(!r)return[new sp(0,0,e==jV?1:0)];if(e==i0&&!i.length&&!t6e.test(r))return Uie(r.length);if(i.length)for(;r.length>jn.length;)jn[jn.length]=256;let n=[],s=e==i0?0:1;return Q5(r,s,s,i,0,r.length,n),n}function Uie(r){return[new sp(0,r,0)]}let zie="";function o6e(r,e,i,n,s){var o;let a=n.head-r.from,l=sp.find(e,a,(o=n.bidiLevel)!==null&&o!==void 0?o:-1,n.assoc),c=e[l],u=c.side(s,i);if(a==u){let m=l+=s?1:-1;if(m<0||m>=e.length)return null;c=e[l=m],a=c.side(!s,i),u=c.side(s,i)}let d=no(r.text,a,c.forward(s,i));(d<c.from||d>c.to)&&(d=u),zie=r.text.slice(Math.min(a,d),Math.max(a,d));let p=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return p&&d==u&&p.level+(s?0:1)<c.level?nt.cursor(p.side(!s,i)+r.from,p.forward(s,i)?1:-1,p.level):nt.cursor(d+r.from,c.forward(s,i)?-1:1,c.level)}function a6e(r,e,i){for(let n=e;n<i;n++){let s=Fie(r.charCodeAt(n));if(s==1)return i0;if(s==2||s==4)return jV}return i0}const Xie=Nt.define(),Wie=Nt.define(),Gie=Nt.define(),Hie=Nt.define(),j5=Nt.define(),Qie=Nt.define(),jie=Nt.define(),YV=Nt.define(),qV=Nt.define(),Yie=Nt.define({combine:r=>r.some(e=>e)}),qie=Nt.define({combine:r=>r.some(e=>e)}),Zie=Nt.define();class Cy{constructor(e,i="nearest",n="nearest",s=5,o=5,a=!1){this.range=e,this.y=i,this.x=n,this.yMargin=s,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new Cy(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Cy(nt.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const L2=Hi.define({map:(r,e)=>r.map(e)}),Kie=Hi.define();function Aa(r,e,i){let n=r.facet(Hie);n.length?n[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const Zf=Nt.define({combine:r=>r.length?r[0]:!0});let l6e=0;const mb=Nt.define();class ms{constructor(e,i,n,s,o){this.id=e,this.create=i,this.domEventHandlers=n,this.domEventObservers=s,this.extension=o(this)}static define(e,i){const{eventHandlers:n,eventObservers:s,provide:o,decorations:a}=i||{};return new ms(l6e++,e,n,s,l=>{let c=[mb.of(l)];return a&&c.push(Xw.of(u=>{let d=u.plugin(l);return d?a(d):vi.none})),o&&c.push(o(l)),c})}static fromClass(e,i){return ms.define(n=>new e(n),i)}}class dR{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(n){if(Aa(i.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){Aa(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(n){Aa(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Jie=Nt.define(),ZV=Nt.define(),Xw=Nt.define(),ene=Nt.define(),KV=Nt.define(),tne=Nt.define();function lG(r,e){let i=r.state.facet(tne);if(!i.length)return i;let n=i.map(o=>o instanceof Function?o(r):o),s=[];return _n.spans(n,e.from,e.to,{point(){},span(o,a,l,c){let u=o-e.from,d=a-e.from,p=s;for(let m=l.length-1;m>=0;m--,c--){let g=l[m].spec.bidiIsolate,y;if(g==null&&(g=a6e(e.text,u,d)),c>0&&p.length&&(y=p[p.length-1]).to==u&&y.direction==g)y.to=d,p=y.inner;else{let _={from:u,to:d,direction:g,inner:[]};p.push(_),p=_.inner}}}}),s}const ine=Nt.define();function nne(r){let e=0,i=0,n=0,s=0;for(let o of r.state.facet(ine)){let a=o(r);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(i=Math.max(i,a.right)),a.top!=null&&(n=Math.max(n,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:i,top:n,bottom:s}}const gb=Nt.define();class mh{constructor(e,i,n,s){this.fromA=e,this.toA=i,this.fromB=n,this.toB=s}join(e){return new mh(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,n=this;for(;i>0;i--){let s=e[i-1];if(!(s.fromA>n.toA)){if(s.toA<n.fromA)break;n=n.join(s),e.splice(i-1,1)}}return e.splice(i,0,n),e}static extendWithRanges(e,i){if(i.length==0)return e;let n=[];for(let s=0,o=0,a=0,l=0;;s++){let c=s==e.length?null:e[s],u=a-l,d=c?c.fromB:1e9;for(;o<i.length&&i[o]<d;){let p=i[o],m=i[o+1],g=Math.max(l,p),y=Math.min(d,m);if(g<=y&&new mh(g+u,y+u,g,y).addToSet(n),m>d)break;o+=2}if(!c)return n;new mh(c.fromA,c.toA,c.fromB,c.toB).addToSet(n),a=c.toA,l=c.toB}}}class TE{constructor(e,i,n){this.view=e,this.state=i,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ws.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,a,l,c)=>s.push(new mh(o,a,l,c))),this.changedRanges=s}static create(e,i,n){return new TE(e,i,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class hG extends qn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=vi.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ls],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new mh(0,0,0,e.state.doc.length)],0,null)}update(e){var i;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:d})=>d<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?s=this.domChanged.newSel.head:!m6e(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?c6e(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:d}=this.hasComposition;n=new mh(u,d,e.changes.mapPos(u,-1),e.changes.mapPos(d,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Ft.ie||Ft.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,l=this.updateDeco(),c=f6e(a,l,e.changes);return n=mh.extendWithRanges(n,c),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,n);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Ft.chrome||Ft.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Od&&a.widget instanceof W5&&o.push(a.dom);s.updateGaps(o)}updateChildren(e,i,n){let s=n?n.range.addToSet(e.slice()):e,o=this.childCursor(i);for(let a=s.length-1;;a--){let l=a>=0?s[a]:null;if(!l)break;let{fromA:c,toA:u,fromB:d,toB:p}=l,m,g,y,_;if(n&&n.range.fromB<p&&n.range.toB>d){let C=jb.build(this.view.state.doc,d,n.range.fromB,this.decorations,this.dynamicDecorationMap),M=jb.build(this.view.state.doc,n.range.toB,p,this.decorations,this.dynamicDecorationMap);g=C.breakAtStart,y=C.openStart,_=M.openEnd;let P=this.compositionView(n);M.breakAtStart?P.breakAfter=1:M.content.length&&P.merge(P.length,P.length,M.content[0],!1,M.openStart,0)&&(P.breakAfter=M.content[0].breakAfter,M.content.shift()),C.content.length&&P.merge(0,0,C.content[C.content.length-1],!0,0,C.openEnd)&&C.content.pop(),m=C.content.concat(P).concat(M.content)}else({content:m,breakAtStart:g,openStart:y,openEnd:_}=jb.build(this.view.state.doc,d,p,this.decorations,this.dynamicDecorationMap));let{i:x,off:O}=o.findPos(u,1),{i:S,off:w}=o.findPos(c,-1);Pie(this,S,w,x,O,m,g,y,_)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let i of e.transactions)for(let n of i.effects)n.is(Kie)&&(this.editContextFormatting=n.value)}compositionView(e){let i=new hc(e.text.nodeValue);i.flags|=8;for(let{deco:s}of e.marks)i=new Bd(s,[i],i.length);let n=new ls;return n.append(i,0),n}fixCompositionDOM(e){let i=(o,a)=>{a.flags|=8|(a.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(a);let l=qn.get(o);l&&l!=a&&(l.dom=null),a.setDOM(o)},n=this.childPos(e.range.fromB,1),s=this.children[n.i];i(e.line,s);for(let o=e.marks.length-1;o>=-1;o--)n=s.childPos(n.off,1),s=s.children[n.i],i(o>=0?e.marks[o].node:e.text,s)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,s=n==this.dom,o=!s&&wA(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(s||i||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?c:this.moveToLine(this.domAtPos(l.head));if(Ft.gecko&&l.empty&&!this.hasComposition&&h6e(c)){let p=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(p,c.node.childNodes[c.offset]||null)),c=u=new _o(p,0),a=!0}let d=this.view.observer.selectionRange;(a||!d.focusNode||(!Qb(c.node,c.offset,d.anchorNode,d.anchorOffset)||!Qb(u.node,u.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,l))&&(this.view.observer.ignore(()=>{Ft.android&&Ft.chrome&&this.dom.contains(d.focusNode)&&p6e(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=Uw(this.view.root);if(p)if(l.empty){if(Ft.gecko){let m=u6e(c.node,c.offset);if(m&&m!=3){let g=(m==1?Aie:Eie)(c.node,c.offset);g&&(c=new _o(g.node,g.offset))}}p.collapse(c.node,c.offset),l.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=l.bidiLevel)}else if(p.extend){p.collapse(c.node,c.offset);try{p.extend(u.node,u.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([c,u]=[u,c]),m.setEnd(u.node,u.offset),m.setStart(c.node,c.offset),p.removeAllRanges(),p.addRange(m)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(c,u)),this.impreciseAnchor=c.precise?null:new _o(d.anchorNode,d.anchorOffset),this.impreciseHead=u.precise?null:new _o(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,i){return this.hasComposition&&i.empty&&Qb(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,n=Uw(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!n||!i.empty||!i.assoc||!n.modify)return;let a=ls.find(this,i.head);if(!a)return;let l=a.posAtStart;if(i.head==l||i.head==l+a.length)return;let c=this.coordsAt(i.head,-1),u=this.coordsAt(i.head,1);if(!c||!u||c.bottom>u.top)return;let d=this.domAtPos(i.head+i.assoc);n.collapse(d.node,d.offset),n.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=i.from&&n.collapse(s,o)}moveToLine(e){let i=this.dom,n;if(e.node!=i)return e;for(let s=e.offset;!n&&s<i.childNodes.length;s++){let o=qn.get(i.childNodes[s]);o instanceof ls&&(n=o.domAtPos(0))}for(let s=e.offset-1;!n&&s>=0;s--){let o=qn.get(i.childNodes[s]);o instanceof ls&&(n=o.domAtPos(o.length))}return n?new _o(n.node,n.offset,!0):e}nearest(e){for(let i=e;i;){let n=qn.get(i);if(n&&n.rootView==this)return n;i=i.parentNode}return null}posFromDOM(e,i){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,i)+n.posAtStart}domAtPos(e){let{i,off:n}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let s=this.children[i];if(n<s.length||s instanceof ls)break;i++,n=0}return this.children[i].domAtPos(n)}coordsAt(e,i){let n=null,s=0;for(let o=this.length,a=this.children.length-1;a>=0;a--){let l=this.children[a],c=o-l.breakAfter,u=c-l.length;if(c<e)break;if(u<=e&&(u<e||l.covers(-1))&&(c>e||l.covers(1))&&(!n||l instanceof ls&&!(n instanceof ls&&i>=0)))n=l,s=u;else if(n&&u==e&&c==e&&l instanceof Od&&Math.abs(i)<2){if(l.deco.startSide<0)break;a&&(n=null)}o=u}return n?n.coordsAt(e-s,i):null}coordsForChar(e){let{i,off:n}=this.childPos(e,1),s=this.children[i];if(!(s instanceof ls))return null;for(;s.children.length;){let{i:l,off:c}=s.childPos(n,1);for(;;l++){if(l==s.children.length)return null;if((s=s.children[l]).length)break}n=c}if(!(s instanceof hc))return null;let o=no(s.text,n);if(o==n)return null;let a=t0(s.dom,n,o).getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(l==a.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let i=[],{from:n,to:s}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,c=this.view.textDirection==ur.LTR;for(let u=0,d=0;d<this.children.length;d++){let p=this.children[d],m=u+p.length;if(m>s)break;if(u>=n){let g=p.dom.getBoundingClientRect();if(i.push(g.height),a){let y=p.dom.lastChild,_=y?zw(y):[];if(_.length){let x=_[_.length-1],O=c?x.right-g.left:g.right-x.left;O>l&&(l=O,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=m)}}}u=m+p.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?ur.RTL:ur.LTR}measureTextSize(){for(let o of this.children)if(o instanceof ls){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),i,n,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=zw(e.firstChild)[0];i=e.getBoundingClientRect().height,n=o?o.width/27:7,s=o?o.height:i,e.remove()}),{lineHeight:i,charWidth:n,textHeight:s}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new Mie(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let n=0,s=0;;s++){let o=s==i.viewports.length?null:i.viewports[s],a=o?o.from-1:this.length;if(a>n){let l=(i.lineBlockAt(a).bottom-i.lineBlockAt(n).top)/this.view.scaleY;e.push(vi.replace({widget:new W5(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,a))}if(!o)break;n=o.to+1}return vi.set(e)}updateDeco(){let e=1,i=this.view.state.facet(Xw).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),n=!1,s=this.view.state.facet(ene).map((o,a)=>{let l=typeof o=="function";return l&&(n=!0),l?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=n,i.push(_n.join(s))),this.decorations=[this.editContextFormatting,...i,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(Zie))try{if(u(this.view,e.range,e))return!0}catch(d){Aa(this.view.state,d,"scroll handler")}let{range:i}=e,n=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),s;if(!n)return;!i.empty&&(s=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(n={left:Math.min(n.left,s.left),top:Math.min(n.top,s.top),right:Math.max(n.right,s.right),bottom:Math.max(n.bottom,s.bottom)});let o=nne(this.view),a={left:n.left-o.left,top:n.top-o.top,right:n.right+o.right,bottom:n.bottom+o.bottom},{offsetWidth:l,offsetHeight:c}=this.view.scrollDOM;XVe(this.view.scrollDOM,a,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==ur.LTR)}}function h6e(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function rne(r,e){let i=r.observer.selectionRange;if(!i.focusNode)return null;let n=Aie(i.focusNode,i.focusOffset),s=Eie(i.focusNode,i.focusOffset),o=n||s;if(s&&n&&s.node!=n.node){let l=qn.get(s.node);if(!l||l instanceof hc&&l.text!=s.node.nodeValue)o=s;else if(r.docView.lastCompositionAfterCursor){let c=qn.get(n.node);!c||c instanceof hc&&c.text!=n.node.nodeValue||(o=s)}}if(r.docView.lastCompositionAfterCursor=o!=n,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function c6e(r,e,i){let n=rne(r,i);if(!n)return null;let{node:s,from:o,to:a}=n,l=s.nodeValue;if(/[\n\r]/.test(l)||r.state.doc.sliceString(n.from,n.to)!=l)return null;let c=e.invertedDesc,u=new mh(c.mapPos(o),c.mapPos(a),o,a),d=[];for(let p=s.parentNode;;p=p.parentNode){let m=qn.get(p);if(m instanceof Bd)d.push({node:p,deco:m.mark});else{if(m instanceof ls||p.nodeName=="DIV"&&p.parentNode==r.contentDOM)return{range:u,text:s,marks:d,line:p};if(p!=r.contentDOM)d.push({node:p,deco:new nS({inclusive:!0,attributes:ZVe(p),tagName:p.tagName.toLowerCase()})});else return null}}}function u6e(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let d6e=class{constructor(){this.changes=[]}compareRange(e,i){X5(e,i,this.changes)}comparePoint(e,i){X5(e,i,this.changes)}};function f6e(r,e,i){let n=new d6e;return _n.compare(r,e,i,n),n.changes}function p6e(r,e){for(let i=r;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function m6e(r,e){let i=!1;return e&&r.iterChangedRanges((n,s)=>{n<e.to&&s>e.from&&(i=!0)}),i}function g6e(r,e,i=1){let n=r.charCategorizer(e),s=r.doc.lineAt(e),o=e-s.from;if(s.length==0)return nt.cursor(e);o==0?i=1:o==s.length&&(i=-1);let a=o,l=o;i<0?a=no(s.text,o,!1):l=no(s.text,o);let c=n(s.text.slice(a,l));for(;a>0;){let u=no(s.text,a,!1);if(n(s.text.slice(u,a))!=c)break;a=u}for(;l<s.length;){let u=no(s.text,l);if(n(s.text.slice(l,u))!=c)break;l=u}return nt.range(a+s.from,l+s.from)}function v6e(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function y6e(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function fR(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function cG(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function uG(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Y5(r,e,i){let n,s,o,a,l=!1,c,u,d,p;for(let y=r.firstChild;y;y=y.nextSibling){let _=zw(y);for(let x=0;x<_.length;x++){let O=_[x];s&&fR(s,O)&&(O=cG(uG(O,s.bottom),s.top));let S=v6e(e,O),w=y6e(i,O);if(S==0&&w==0)return y.nodeType==3?dG(y,e,i):Y5(y,e,i);if(!n||a>w||a==w&&o>S){n=y,s=O,o=S,a=w;let C=w?i<O.top?-1:1:S?e<O.left?-1:1:0;l=!C||(C>0?x<_.length-1:x>0)}S==0?i>O.bottom&&(!d||d.bottom<O.bottom)?(c=y,d=O):i<O.top&&(!p||p.top>O.top)&&(u=y,p=O):d&&fR(d,O)?d=uG(d,O.bottom):p&&fR(p,O)&&(p=cG(p,O.top))}}if(d&&d.bottom>=i?(n=c,s=d):p&&p.top<=i&&(n=u,s=p),!n)return{node:r,offset:0};let m=Math.max(s.left,Math.min(s.right,e));if(n.nodeType==3)return dG(n,m,i);if(l&&n.contentEditable!="false")return Y5(n,m,i);let g=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(s.left+s.right)/2?1:0);return{node:r,offset:g}}function dG(r,e,i){let n=r.nodeValue.length,s=-1,o=1e9,a=0;for(let l=0;l<n;l++){let c=t0(r,l,l+1).getClientRects();for(let u=0;u<c.length;u++){let d=c[u];if(d.top==d.bottom)continue;a||(a=e-d.left);let p=(d.top>i?d.top-i:i-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&p<o){let m=e>=(d.left+d.right)/2,g=m;if((Ft.chrome||Ft.gecko)&&t0(r,l).getBoundingClientRect().left==d.right&&(g=!m),p<=0)return{node:r,offset:l+(g?1:0)};s=l+(g?1:0),o=p}}}return{node:r,offset:s>-1?s:a>0?r.nodeValue.length:0}}function sne(r,e,i,n=-1){var s,o;let a=r.contentDOM.getBoundingClientRect(),l=a.top+r.viewState.paddingTop,c,{docHeight:u}=r.viewState,{x:d,y:p}=e,m=p-l;if(m<0)return 0;if(m>u)return r.state.doc.length;for(let C=r.viewState.heightOracle.textHeight/2,M=!1;c=r.elementAtHeight(m),c.type!=Ko.Text;)for(;m=n>0?c.bottom+C:c.top-C,!(m>=0&&m<=u);){if(M)return i?null:0;M=!0,n=-n}p=l+m;let g=c.from;if(g<r.viewport.from)return r.viewport.from==0?0:i?null:fG(r,a,c,d,p);if(g>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:fG(r,a,c,d,p);let y=r.dom.ownerDocument,_=r.root.elementFromPoint?r.root:y,x=_.elementFromPoint(d,p);x&&!r.contentDOM.contains(x)&&(x=null),x||(d=Math.max(a.left+1,Math.min(a.right-1,d)),x=_.elementFromPoint(d,p),x&&!r.contentDOM.contains(x)&&(x=null));let O,S=-1;if(x&&((s=r.docView.nearest(x))===null||s===void 0?void 0:s.isEditable)!=!1){if(y.caretPositionFromPoint){let C=y.caretPositionFromPoint(d,p);C&&({offsetNode:O,offset:S}=C)}else if(y.caretRangeFromPoint){let C=y.caretRangeFromPoint(d,p);C&&({startContainer:O,startOffset:S}=C,(!r.contentDOM.contains(O)||Ft.safari&&_6e(O,S,d)||Ft.chrome&&x6e(O,S,d))&&(O=void 0))}}if(!O||!r.docView.dom.contains(O)){let C=ls.find(r.docView,g);if(!C)return m>c.top+c.height/2?c.to:c.from;({node:O,offset:S}=Y5(C.dom,d,p))}let w=r.docView.nearest(O);if(!w)return null;if(w.isWidget&&((o=w.dom)===null||o===void 0?void 0:o.nodeType)==1){let C=w.dom.getBoundingClientRect();return e.y<C.top||e.y<=C.bottom&&e.x<=(C.left+C.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(O,S)+w.posAtStart}function fG(r,e,i,n,s){let o=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&i.height>r.defaultLineHeight*1.5){let l=r.viewState.heightOracle.textHeight,c=Math.floor((s-i.top-(r.defaultLineHeight-l)*.5)/l);o+=c*r.viewState.heightOracle.lineLength}let a=r.state.sliceDoc(i.from,i.to);return i.from+B5(a,o,r.state.tabSize)}function _6e(r,e,i){let n;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(let s=r.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return t0(r,n-1,n).getBoundingClientRect().left>i}function x6e(r,e,i){if(e!=0)return!1;for(let s=r;;){let o=s.parentNode;if(!o||o.nodeType!=1||o.firstChild!=s)return!1;if(o.classList.contains("cm-line"))break;s=o}let n=r.nodeType==1?r.getBoundingClientRect():t0(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return i-n.left>5}function q5(r,e){let i=r.lineBlockAt(e);if(Array.isArray(i.type)){for(let n of i.type)if(n.to>e||n.to==e&&(n.to==i.to||n.type==Ko.Text))return n}return i}function b6e(r,e,i,n){let s=q5(r,e.head),o=!n||s.type!=Ko.Text||!(r.lineWrapping||s.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let a=r.dom.getBoundingClientRect(),l=r.textDirectionAt(s.from),c=r.posAtCoords({x:i==(l==ur.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(c!=null)return nt.cursor(c,i?-1:1)}return nt.cursor(i?s.to:s.from,i?-1:1)}function pG(r,e,i,n){let s=r.state.doc.lineAt(e.head),o=r.bidiSpans(s),a=r.textDirectionAt(s.from);for(let l=e,c=null;;){let u=o6e(s,o,a,l,i),d=zie;if(!u){if(s.number==(i?r.state.doc.lines:1))return l;d=`
`,s=r.state.doc.line(s.number+(i?1:-1)),o=r.bidiSpans(s),u=r.visualLineSide(s,!i)}if(c){if(!c(d))return l}else{if(!n)return u;c=n(d)}l=u}}function w6e(r,e,i){let n=r.state.charCategorizer(e),s=n(i);return o=>{let a=n(o);return s==wr.Space&&(s=a),s==a}}function O6e(r,e,i,n){let s=e.head,o=i?1:-1;if(s==(i?r.state.doc.length:0))return nt.cursor(s,e.assoc);let a=e.goalColumn,l,c=r.contentDOM.getBoundingClientRect(),u=r.coordsAtPos(s,e.assoc||-1),d=r.documentTop;if(u)a==null&&(a=u.left-c.left),l=o<0?u.top:u.bottom;else{let g=r.viewState.lineBlockAt(s);a==null&&(a=Math.min(c.right-c.left,r.defaultCharacterWidth*(s-g.from))),l=(o<0?g.top:g.bottom)+d}let p=c.left+a,m=n??r.viewState.heightOracle.textHeight>>1;for(let g=0;;g+=10){let y=l+(m+g)*o,_=sne(r,{x:p,y},!1,o);if(y<c.top||y>c.bottom||(o<0?_<s:_>s)){let x=r.docView.coordsForChar(_),O=!x||y<x.top?-1:1;return nt.cursor(_,O,void 0,a)}}}function OA(r,e,i){for(;;){let n=0;for(let s of r)s.between(e-1,e+1,(o,a,l)=>{if(e>o&&e<a){let c=n||i||(e-o<a-e?-1:1);e=c<0?o:a,n=c}});if(!n)return e}}function pR(r,e,i){let n=OA(r.state.facet(KV).map(s=>s(r)),i.from,e.head>i.from?-1:1);return n==i.from?i:nt.cursor(n,n<i.from?1:-1)}const vb="￿";class S6e{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(wn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=vb}readRange(e,i){if(!e)return this;let n=e.parentNode;for(let s=e;;){this.findPointBefore(n,s);let o=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==i)break;let l=qn.get(s),c=qn.get(a);(l&&c?l.breakAfter:(l?l.breakAfter:SE(s))||SE(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>o)&&this.lineBreak(),s=a}return this.findPointBefore(n,i),this}readTextNode(e){let i=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,i.length));for(let n=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,l;if(this.lineSeparator?(o=i.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(l=s.exec(i))&&(o=l.index,a=l[0].length),this.append(i.slice(n,o<0?i.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=a-1);n=o+a}}readNode(e){if(e.cmIgnore)return;let i=qn.get(e),n=i&&i.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let s=n.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==i&&(n.pos=this.text.length)}findPointInside(e,i){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(C6e(e,n.node,n.offset)?i:0))}}function C6e(r,e,i){for(;;){if(!e||i<Rd(e))return!1;if(e==r)return!0;i=e0(e)+1,e=e.parentNode}}class mG{constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}class T6e{constructor(e,i,n,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=i>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,n,0))){let l=o||a?[]:M6e(e),c=new S6e(l,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=P6e(l,this.bounds.from)}else{let l=e.observer.selectionRange,c=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!N5(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!N5(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),d=e.viewport;if((Ft.ios||Ft.chrome)&&e.state.selection.main.empty&&c!=u&&(d.from>0||d.to<e.state.doc.length)){let p=Math.min(c,u),m=Math.max(c,u),g=d.from-p,y=d.to-m;(g==0||g==1||p==0)&&(y==0||y==-1||m==e.state.doc.length)&&(c=0,u=e.state.doc.length)}this.newSel=nt.single(u,c)}}}function one(r,e){let i,{newSel:n}=e,s=r.state.selection.main,o=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:l}=e.bounds,c=s.from,u=null;(o===8||Ft.android&&e.text.length<l-a)&&(c=s.to,u="end");let d=E6e(r.state.doc.sliceString(a,l,vb),e.text,c-a,u);d&&(Ft.chrome&&o==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==vb+vb&&d.toB--,i={from:a+d.from,to:a+d.toA,insert:Rn.of(e.text.slice(d.from,d.toB).split(vb))})}else n&&(!r.hasFocus&&r.state.facet(Zf)||n.main.eq(s))&&(n=null);if(!i&&!n)return!1;if(!i&&e.typeOver&&!s.empty&&n&&n.main.empty?i={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4?i={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,i.from).append(i.insert).append(r.state.doc.slice(i.to,s.to))}:(Ft.mac||Ft.android)&&i&&i.from==i.to&&i.from==s.head-1&&/^\. ?$/.test(i.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&i.insert.length==2&&(n=nt.single(n.main.anchor-1,n.main.head-1)),i={from:s.from,to:s.to,insert:Rn.of([" "])}):Ft.chrome&&i&&i.from==i.to&&i.from==s.head&&i.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=nt.single(n.main.anchor-1,n.main.head-1)),i={from:s.from,to:s.to,insert:Rn.of([" "])}),i)return JV(r,i,n,o);if(n&&!n.main.eq(s)){let a=!1,l="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(a=!0),l=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:a,userEvent:l}),!0}else return!1}function JV(r,e,i,n=-1){if(Ft.ios&&r.inputState.flushIOSKey(e))return!0;let s=r.state.selection.main;if(Ft.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&r.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Sy(r.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Sy(r.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Sy(r.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let a,l=()=>a||(a=A6e(r,e,i));return r.state.facet(Qie).some(c=>c(r,e.from,e.to,o,l))||r.dispatch(l()),!0}function A6e(r,e,i){let n,s=r.state,o=s.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let l=o.from<e.from?s.sliceDoc(o.from,e.from):"",c=o.to>e.to?s.sliceDoc(e.to,o.to):"";n=s.replaceSelection(r.state.toText(l+e.insert.sliceString(0,void 0,r.state.lineBreak)+c))}else{let l=s.changes(e),c=i&&i.main.to<=l.newLength?i.main:void 0;if(s.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let u=r.state.sliceDoc(e.from,e.to),d,p=i&&rne(r,i.main.head);if(p){let y=e.insert.length-(e.to-e.from);d={from:p.from,to:p.to-y}}else d=r.state.doc.lineAt(o.head);let m=o.to-e.to,g=o.to-o.from;n=s.changeByRange(y=>{if(y.from==o.from&&y.to==o.to)return{changes:l,range:c||y.map(l)};let _=y.to-m,x=_-u.length;if(y.to-y.from!=g||r.state.sliceDoc(x,_)!=u||y.to>=d.from&&y.from<=d.to)return{range:y};let O=s.changes({from:x,to:_,insert:e.insert}),S=y.to-o.to;return{changes:O,range:c?nt.range(Math.max(0,c.anchor+S),Math.max(0,c.head+S)):y.map(O)}})}else n={changes:l,selection:c&&s.selection.replaceRange(c)}}let a="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,a+=".compose",r.inputState.compositionFirstChange&&(a+=".start",r.inputState.compositionFirstChange=!1)),s.update(n,{userEvent:a,scrollIntoView:!0})}function E6e(r,e,i,n){let s=Math.min(r.length,e.length),o=0;for(;o<s&&r.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&r.length==e.length)return null;let a=r.length,l=e.length;for(;a>0&&l>0&&r.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(n=="end"){let c=Math.max(0,o-Math.min(a,l));i-=a+c-o}if(a<o&&r.length<e.length){let c=i<=o&&i>=a?o-i:0;o-=c,l=o+(l-a),a=o}else if(l<o){let c=i<=o&&i>=l?o-i:0;o-=c,a=o+(a-l),l=o}return{from:o,toA:a,toB:l}}function M6e(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:o}=r.observer.selectionRange;return i&&(e.push(new mG(i,n)),(s!=i||o!=n)&&e.push(new mG(s,o))),e}function P6e(r,e){if(r.length==0)return null;let i=r[0].pos,n=r.length==2?r[1].pos:i;return i>-1&&n>-1?nt.single(i+e,n+e):null}class k6e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ft.safari&&e.contentDOM.addEventListener("input",()=>null),Ft.gecko&&Q6e(e.contentDOM.ownerDocument)}handleEvent(e){!F6e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,i){let n=this.handlers[e];if(n){for(let s of n.observers)s(this.view,i);for(let s of n.handlers){if(i.defaultPrevented)break;if(s(this.view,i)){i.preventDefault();break}}}}ensureHandlers(e){let i=I6e(e),n=this.handlers,s=this.view.contentDOM;for(let o in i)if(o!="scroll"){let a=!i[o].handlers.length,l=n[o];l&&a!=!l.handlers.length&&(s.removeEventListener(o,this.handleEvent),l=null),l||s.addEventListener(o,this.handleEvent,{passive:a})}for(let o in n)o!="scroll"&&!i[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=i}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&lne.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ft.android&&Ft.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let i;return Ft.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((i=ane.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||R6e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=i||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let i=this.pendingIOSKey;return!i||i.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Sy(this.view.contentDOM,i.key,i.keyCode,i instanceof KeyboardEvent?i:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ft.safari&&!Ft.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function gG(r,e){return(i,n)=>{try{return e.call(r,n,i)}catch(s){Aa(i.state,s)}}}function I6e(r){let e=Object.create(null);function i(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let s=n.spec;if(s&&s.domEventHandlers)for(let o in s.domEventHandlers){let a=s.domEventHandlers[o];a&&i(o).handlers.push(gG(n.value,a))}if(s&&s.domEventObservers)for(let o in s.domEventObservers){let a=s.domEventObservers[o];a&&i(o).observers.push(gG(n.value,a))}}for(let n in cc)i(n).handlers.push(cc[n]);for(let n in _h)i(n).observers.push(_h[n]);return e}const ane=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],R6e="dthko",lne=[16,17,18,20,91,92,224,225],N2=6;function V2(r){return Math.max(0,r)*.7+8}function B6e(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class D6e{constructor(e,i,n,s){this.view=e,this.startEvent=i,this.style=n,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParents=WVe(e.contentDOM),this.atoms=e.state.facet(KV).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(wn.allowMultipleSelections)&&L6e(e,i),this.dragging=V6e(e,i)&&une(i)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&B6e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,n=0,s=0,o=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=nne(this.view);e.clientX-c.left<=s+N2?i=-V2(s-e.clientX):e.clientX+c.right>=a-N2&&(i=V2(e.clientX-a)),e.clientY-c.top<=o+N2?n=-V2(o-e.clientY):e.clientY+c.bottom>=l-N2&&(n=V2(e.clientY-l)),this.setScrollSpeed(i,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:i}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),i&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=i,i=0),(e||i)&&this.view.win.scrollBy(e,i),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let n=0;n<e.ranges.length;n++){let s=e.ranges[n],o=null;if(s.empty){let a=OA(this.atoms,s.from,0);a!=s.from&&(o=nt.cursor(a,-1))}else{let a=OA(this.atoms,s.from,-1),l=OA(this.atoms,s.to,1);(a!=s.from||l!=s.to)&&(o=nt.range(s.from==s.anchor?a:l,s.from==s.head?a:l))}o&&(i||(i=e.ranges.slice()),i[n]=o)}return i?nt.create(i,e.mainIndex):e}select(e){let{view:i}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(i=>i.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function L6e(r,e){let i=r.state.facet(Xie);return i.length?i[0](e):Ft.mac?e.metaKey:e.ctrlKey}function N6e(r,e){let i=r.state.facet(Wie);return i.length?i[0](e):Ft.mac?!e.altKey:!e.ctrlKey}function V6e(r,e){let{main:i}=r.state.selection;if(i.empty)return!1;let n=Uw(r.root);if(!n||n.rangeCount==0)return!0;let s=n.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let a=s[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function F6e(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,n;i!=r.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(n=qn.get(i))&&n.ignoreEvent(e))return!1;return!0}const cc=Object.create(null),_h=Object.create(null),hne=Ft.ie&&Ft.ie_version<15||Ft.ios&&Ft.webkit_version<604;function $6e(r){let e=r.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{r.focus(),i.remove(),cne(r,i.value)},50)}function UP(r,e,i){for(let n of r.facet(e))i=n(i,r);return i}function cne(r,e){e=UP(r.state,YV,e);let{state:i}=r,n,s=1,o=i.toText(e),a=o.lines==i.selection.ranges.length;if(Z5!=null&&i.selection.ranges.every(c=>c.empty)&&Z5==o.toString()){let c=-1;n=i.changeByRange(u=>{let d=i.doc.lineAt(u.from);if(d.from==c)return{range:u};c=d.from;let p=i.toText((a?o.line(s++).text:e)+i.lineBreak);return{changes:{from:d.from,insert:p},range:nt.cursor(u.from+p.length)}})}else a?n=i.changeByRange(c=>{let u=o.line(s++);return{changes:{from:c.from,to:c.to,insert:u.text},range:nt.cursor(c.from+u.length)}}):n=i.replaceSelection(o);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}_h.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};cc.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);_h.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};_h.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};cc.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let n of r.state.facet(Gie))if(i=n(r,e),i)break;if(!i&&e.button==0&&(i=X6e(r,e)),i){let n=!r.hasFocus;r.inputState.startMouseSelection(new D6e(r,e,i,n)),n&&r.observer.ignore(()=>{Sie(r.contentDOM);let o=r.root.activeElement;o&&!o.contains(r.contentDOM)&&o.blur()});let s=r.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function vG(r,e,i,n){if(n==1)return nt.cursor(e,i);if(n==2)return g6e(r.state,e,i);{let s=ls.find(r.docView,e),o=r.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:o.from,l=s?s.posAtEnd:o.to;return l<r.state.doc.length&&l==o.to&&l++,nt.range(a,l)}}let yG=(r,e,i)=>e>=i.top&&e<=i.bottom&&r>=i.left&&r<=i.right;function U6e(r,e,i,n){let s=ls.find(r.docView,e);if(!s)return 1;let o=e-s.posAtStart;if(o==0)return 1;if(o==s.length)return-1;let a=s.coordsAt(o,-1);if(a&&yG(i,n,a))return-1;let l=s.coordsAt(o,1);return l&&yG(i,n,l)?1:a&&a.bottom>=n?-1:1}function _G(r,e){let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:U6e(r,i,e.clientX,e.clientY)}}const z6e=Ft.ie&&Ft.ie_version<=11;let xG=null,bG=0,wG=0;function une(r){if(!z6e)return r.detail;let e=xG,i=wG;return xG=r,wG=Date.now(),bG=!e||i>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(bG+1)%3:1}function X6e(r,e){let i=_G(r,e),n=une(e),s=r.state.selection;return{update(o){o.docChanged&&(i.pos=o.changes.mapPos(i.pos),s=s.map(o.changes))},get(o,a,l){let c=_G(r,o),u,d=vG(r,c.pos,c.bias,n);if(i.pos!=c.pos&&!a){let p=vG(r,i.pos,i.bias,n),m=Math.min(p.from,d.from),g=Math.max(p.to,d.to);d=m<d.from?nt.range(m,g):nt.range(g,m)}return a?s.replaceRange(s.main.extend(d.from,d.to)):l&&n==1&&s.ranges.length>1&&(u=W6e(s,c.pos))?u:l?s.addRange(d):nt.create([d])}}}function W6e(r,e){for(let i=0;i<r.ranges.length;i++){let{from:n,to:s}=r.ranges[i];if(n<=e&&s>=e)return nt.create(r.ranges.slice(0,i).concat(r.ranges.slice(i+1)),r.mainIndex==i?0:r.mainIndex-(r.mainIndex>i?1:0))}return null}cc.dragstart=(r,e)=>{let{selection:{main:i}}=r.state;if(e.target.draggable){let s=r.docView.nearest(e.target);if(s&&s.isWidget){let o=s.posAtStart,a=o+s.length;(o>=i.to||a<=i.from)&&(i=nt.range(o,a))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=i,e.dataTransfer&&(e.dataTransfer.setData("Text",UP(r.state,qV,r.state.sliceDoc(i.from,i.to))),e.dataTransfer.effectAllowed="copyMove"),!1};cc.dragend=r=>(r.inputState.draggedContent=null,!1);function OG(r,e,i,n){if(i=UP(r.state,YV,i),!i)return;let s=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=r.inputState,a=n&&o&&N6e(r,e)?{from:o.from,to:o.to}:null,l={from:s,insert:i},c=r.state.changes(a?[a,l]:l);r.focus(),r.dispatch({changes:c,selection:{anchor:c.mapPos(s,-1),head:c.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),r.inputState.draggedContent=null}cc.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let i=e.dataTransfer.files;if(i&&i.length){let n=Array(i.length),s=0,o=()=>{++s==i.length&&OG(r,e,n.filter(a=>a!=null).join(r.state.lineBreak),!1)};for(let a=0;a<i.length;a++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[a]=l.result),o()},l.readAsText(i[a])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return OG(r,e,n,!0),!0}return!1};cc.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let i=hne?null:e.clipboardData;return i?(cne(r,i.getData("text/plain")||i.getData("text/uri-list")),!0):($6e(r),!1)};function G6e(r,e){let i=r.dom.parentNode;if(!i)return;let n=i.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function H6e(r){let e=[],i=[],n=!1;for(let s of r.selection.ranges)s.empty||(e.push(r.sliceDoc(s.from,s.to)),i.push(s));if(!e.length){let s=-1;for(let{from:o}of r.selection.ranges){let a=r.doc.lineAt(o);a.number>s&&(e.push(a.text),i.push({from:a.from,to:Math.min(r.doc.length,a.to+1)})),s=a.number}n=!0}return{text:UP(r,qV,e.join(r.lineBreak)),ranges:i,linewise:n}}let Z5=null;cc.copy=cc.cut=(r,e)=>{let{text:i,ranges:n,linewise:s}=H6e(r.state);if(!i&&!s)return!1;Z5=s?i:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let o=hne?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",i),!0):(G6e(r,i),!1)};const dne=Gd.define();function fne(r,e){let i=[];for(let n of r.facet(jie)){let s=n(r,e);s&&i.push(s)}return i?r.update({effects:i,annotations:dne.of(!0)}):null}function pne(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let i=fne(r.state,e);i?r.dispatch(i):r.update([])}},10)}_h.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),pne(r)};_h.blur=r=>{r.observer.clearSelectionRange(),pne(r)};_h.compositionstart=_h.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};_h.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,Ft.chrome&&Ft.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};_h.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};cc.beforeinput=(r,e)=>{var i,n;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let o=(i=e.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let l=a[0],c=r.posAtDOM(l.startContainer,l.startOffset),u=r.posAtDOM(l.endContainer,l.endOffset);return JV(r,{from:c,to:u,insert:r.state.toText(o)},null),!0}}let s;if(Ft.chrome&&Ft.android&&(s=ane.find(o=>o.inputType==e.inputType))&&(r.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return Ft.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),Ft.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>_h.compositionend(r,e),20),!1};const SG=new Set;function Q6e(r){SG.has(r)||(SG.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const CG=["pre-wrap","normal","pre-line","break-spaces"];let s_=!1;function TG(){s_=!1}class j6e{constructor(e){this.lineWrapping=e,this.doc=Rn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,i){let n=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((i-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return CG.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let n=0;n<e.length;n++){let s=e[n];s<0?n++:this.heightSamples[Math.floor(s*10)]||(i=!0,this.heightSamples[Math.floor(s*10)]=!0)}return i}refresh(e,i,n,s,o,a){let l=CG.indexOf(e)>-1,c=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=i,this.charWidth=n,this.textHeight=s,this.lineLength=o,c){this.heightSamples={};for(let u=0;u<a.length;u++){let d=a[u];d<0?u++:this.heightSamples[Math.floor(d*10)]=!0}}return c}}class Y6e{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class Qc{constructor(e,i,n,s,o){this.from=e,this.length=i,this.top=n,this.height=s,this._content=o}get type(){return typeof this._content=="number"?Ko.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof kp?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Qc(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var ar=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ar||(ar={}));const SA=.001;class Jo{constructor(e,i,n=2){this.length=e,this.height=i,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>SA&&(s_=!0),this.height=e)}replace(e,i,n){return Jo.of(n)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,n,s){let o=this,a=n.doc;for(let l=s.length-1;l>=0;l--){let{fromA:c,toA:u,fromB:d,toB:p}=s[l],m=o.lineAt(c,ar.ByPosNoHeight,n.setDoc(i),0,0),g=m.to>=u?m:o.lineAt(u,ar.ByPosNoHeight,n,0,0);for(p+=g.to-u,u=g.to;l>0&&m.from<=s[l-1].toA;)c=s[l-1].fromA,d=s[l-1].fromB,l--,c<m.from&&(m=o.lineAt(c,ar.ByPosNoHeight,n,0,0));d+=m.from-c,c=m.from;let y=e6.build(n.setDoc(a),e,d,p);o=AE(o,o.replace(c,u,y))}return o.updateHeight(n,0)}static empty(){return new rl(0,0)}static of(e){if(e.length==1)return e[0];let i=0,n=e.length,s=0,o=0;for(;;)if(i==n)if(s>o*2){let l=e[i-1];l.break?e.splice(--i,1,l.left,null,l.right):e.splice(--i,1,l.left,l.right),n+=1+l.break,s-=l.size}else if(o>s*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,o-=l.size}else break;else if(s<o){let l=e[i++];l&&(s+=l.size)}else{let l=e[--n];l&&(o+=l.size)}let a=0;return e[i-1]==null?(a=1,i--):e[i]==null&&(a=1,n++),new q6e(Jo.of(e.slice(0,i)),a,Jo.of(e.slice(n)))}}function AE(r,e){return r==e?r:(r.constructor!=e.constructor&&(s_=!0),e)}Jo.prototype.size=1;class mne extends Jo{constructor(e,i,n){super(e,i),this.deco=n}blockAt(e,i,n,s){return new Qc(s,this.length,n,this.height,this.deco||0)}lineAt(e,i,n,s,o){return this.blockAt(0,n,s,o)}forEachLine(e,i,n,s,o,a){e<=o+this.length&&i>=o&&a(this.blockAt(0,n,s,o))}updateHeight(e,i=0,n=!1,s){return s&&s.from<=i&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class rl extends mne{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,n,s){return new Qc(s,this.length,n,this.height,this.breaks)}replace(e,i,n){let s=n[0];return n.length==1&&(s instanceof rl||s instanceof Ks&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Ks?s=new rl(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Jo.of(n)}updateHeight(e,i=0,n=!1,s){return s&&s.from<=i&&s.more?this.setHeight(s.heights[s.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ks extends Jo{constructor(e){super(e,0)}heightMetrics(e,i){let n=e.doc.lineAt(i).number,s=e.doc.lineAt(i+this.length).number,o=s-n+1,a,l=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);a=c/o,this.length>o+1&&(l=(this.height-c)/(this.length-o-1))}else a=this.height/o;return{firstLine:n,lastLine:s,perLine:a,perChar:l}}blockAt(e,i,n,s){let{firstLine:o,lastLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);if(i.lineWrapping){let u=s+(e<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),d=i.doc.lineAt(u),p=l+d.length*c,m=Math.max(n,e-p/2);return new Qc(d.from,d.length,m,p,0)}else{let u=Math.max(0,Math.min(a-o,Math.floor((e-n)/l))),{from:d,length:p}=i.doc.line(o+u);return new Qc(d,p,n+l*u,l,0)}}lineAt(e,i,n,s,o){if(i==ar.ByHeight)return this.blockAt(e,n,s,o);if(i==ar.ByPosNoHeight){let{from:g,to:y}=n.doc.lineAt(e);return new Qc(g,y-g,0,0,0)}let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(n,o),u=n.doc.lineAt(e),d=l+u.length*c,p=u.number-a,m=s+l*p+c*(u.from-o-p);return new Qc(u.from,u.length,Math.max(s,Math.min(m,s+this.height-d)),d,0)}forEachLine(e,i,n,s,o,a){e=Math.max(e,o),i=Math.min(i,o+this.length);let{firstLine:l,perLine:c,perChar:u}=this.heightMetrics(n,o);for(let d=e,p=s;d<=i;){let m=n.doc.lineAt(d);if(d==e){let y=m.number-l;p+=c*y+u*(e-o-y)}let g=c+u*m.length;a(new Qc(m.from,m.length,p,g,0)),p+=g,d=m.to+1}}replace(e,i,n){let s=this.length-i;if(s>0){let o=n[n.length-1];o instanceof Ks?n[n.length-1]=new Ks(o.length+s):n.push(null,new Ks(s-1))}if(e>0){let o=n[0];o instanceof Ks?n[0]=new Ks(e+o.length):n.unshift(new Ks(e-1),null)}return Jo.of(n)}decomposeLeft(e,i){i.push(new Ks(e-1),null)}decomposeRight(e,i){i.push(null,new Ks(this.length-e-1))}updateHeight(e,i=0,n=!1,s){let o=i+this.length;if(s&&s.from<=i+this.length&&s.more){let a=[],l=Math.max(i,s.from),c=-1;for(s.from>i&&a.push(new Ks(s.from-i-1).updateHeight(e,i));l<=o&&s.more;){let d=e.doc.lineAt(l).length;a.length&&a.push(null);let p=s.heights[s.index++];c==-1?c=p:Math.abs(p-c)>=SA&&(c=-2);let m=new rl(d,p);m.outdated=!1,a.push(m),l+=d+1}l<=o&&a.push(null,new Ks(o-l).updateHeight(e,l));let u=Jo.of(a);return(c<0||Math.abs(u.height-this.height)>=SA||Math.abs(c-this.heightMetrics(e,i).perLine)>=SA)&&(s_=!0),AE(this,u)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class q6e extends Jo{constructor(e,i,n){super(e.length+i+n.length,e.height+n.height,i|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,i,n,s){let o=n+this.left.height;return e<o?this.left.blockAt(e,i,n,s):this.right.blockAt(e,i,o,s+this.left.length+this.break)}lineAt(e,i,n,s,o){let a=s+this.left.height,l=o+this.left.length+this.break,c=i==ar.ByHeight?e<a:e<l,u=c?this.left.lineAt(e,i,n,s,o):this.right.lineAt(e,i,n,a,l);if(this.break||(c?u.to<l:u.from>l))return u;let d=i==ar.ByPosNoHeight?ar.ByPosNoHeight:ar.ByPos;return c?u.join(this.right.lineAt(l,d,n,a,l)):this.left.lineAt(l,d,n,s,o).join(u)}forEachLine(e,i,n,s,o,a){let l=s+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,i,n,s,o,a),i>=c&&this.right.forEachLine(e,i,n,l,c,a);else{let u=this.lineAt(c,ar.ByPos,n,s,o);e<u.from&&this.left.forEachLine(e,u.from-1,n,s,o,a),u.to>=e&&u.from<=i&&a(u),i>u.to&&this.right.forEachLine(u.to+1,i,n,l,c,a)}}replace(e,i,n){let s=this.left.length+this.break;if(i<s)return this.balanced(this.left.replace(e,i,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,i-s,n));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let l of n)o.push(l);if(e>0&&AG(o,a-1),i<this.length){let l=o.length;this.decomposeRight(i,o),AG(o,l)}return Jo.of(o)}decomposeLeft(e,i){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(n++,e>=n&&i.push(null)),e>n&&this.right.decomposeLeft(e-n,i)}decomposeRight(e,i){let n=this.left.length,s=n+this.break;if(e>=s)return this.right.decomposeRight(e-s,i);e<n&&this.left.decomposeRight(e,i),this.break&&e<s&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?Jo.of(this.break?[e,null,i]:[e,i]):(this.left=AE(this.left,e),this.right=AE(this.right,i),this.setHeight(e.height+i.height),this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,n=!1,s){let{left:o,right:a}=this,l=i+o.length+this.break,c=null;return s&&s.from<=i+o.length&&s.more?c=o=o.updateHeight(e,i,n,s):o.updateHeight(e,i,n),s&&s.from<=l+a.length&&s.more?c=a=a.updateHeight(e,l,n,s):a.updateHeight(e,l,n),c?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function AG(r,e){let i,n;r[e]==null&&(i=r[e-1])instanceof Ks&&(n=r[e+1])instanceof Ks&&r.splice(e-1,3,new Ks(i.length+1+n.length))}const Z6e=5;class e6{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let n=Math.min(i,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof rl?s.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new rl(n-this.pos,-1)),this.writtenTo=n,i>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,n){if(e<i||n.heightRelevant){let s=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=i-e;n.block?this.addBlock(new mne(a,s,n)):(a||o||s>=Z6e)&&this.addLineDeco(s,o,a)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new rl(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let n=new Ks(i-e);return this.oracle.doc.lineAt(e).to==i&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof rl)return e;let i=new rl(0,-1);return this.nodes.push(i),i}addBlock(e){this.enterLine();let i=e.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,i&&i.endSide>0&&(this.covering=e)}addLineDeco(e,i,n){let s=this.ensureLine();s.length+=n,s.collapsed+=n,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=i,this.writtenTo=this.pos=this.pos+n}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof rl)&&!this.isCovered?this.nodes.push(new rl(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let s of this.nodes)s instanceof rl&&s.updateHeight(this.oracle,n),n+=s?s.length:1;return this.nodes}static build(e,i,n,s){let o=new e6(n,e);return _n.spans(i,n,s,o,0),o.finish(n)}}function K6e(r,e,i){let n=new J6e;return _n.compare(r,e,i,n,0),n.changes}class J6e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,n,s){(e<i||n&&n.heightRelevant||s&&s.heightRelevant)&&X5(e,i,this.changes,5)}}function eFe(r,e){let i=r.getBoundingClientRect(),n=r.ownerDocument,s=n.defaultView||window,o=Math.max(0,i.left),a=Math.min(s.innerWidth,i.right),l=Math.max(0,i.top),c=Math.min(s.innerHeight,i.bottom);for(let u=r.parentNode;u&&u!=n.body;)if(u.nodeType==1){let d=u,p=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&p.overflow!="visible"){let m=d.getBoundingClientRect();o=Math.max(o,m.left),a=Math.min(a,m.right),l=Math.max(l,m.top),c=Math.min(u==r.parentNode?s.innerHeight:c,m.bottom)}u=p.position=="absolute"||p.position=="fixed"?d.offsetParent:d.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-i.left,right:Math.max(o,a)-i.left,top:l-(i.top+e),bottom:Math.max(l,c)-(i.top+e)}}function tFe(r,e){let i=r.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class mR{constructor(e,i,n){this.from=e,this.to=i,this.size=n}static same(e,i){if(e.length!=i.length)return!1;for(let n=0;n<e.length;n++){let s=e[n],o=i[n];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,i){return vi.replace({widget:new iFe(this.size*(i?e.scaleY:e.scaleX),i)}).range(this.from,this.to)}}class iFe extends jp{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class EG{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=MG,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ur.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(ZV).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new j6e(i),this.stateDeco=e.facet(Xw).filter(n=>typeof n!="function"),this.heightMap=Jo.empty().applyChanges(this.stateDeco,Rn.empty,this.heightOracle.setDoc(e.doc),[new mh(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=vi.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let n=0;n<=1;n++){let s=n?i.head:i.anchor;if(!e.some(({from:o,to:a})=>s>=o&&s<=a)){let{from:o,to:a}=this.lineBlockAt(s);e.push(new F2(o,a))}}return this.viewports=e.sort((n,s)=>n.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?MG:new t6(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(yb(e,this.scaler))})}update(e,i=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Xw).filter(d=>typeof d!="function");let s=e.changedRanges,o=mh.extendWithRanges(s,K6e(n,this.stateDeco,e?e.changes:ws.empty(this.state.doc.length))),a=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);TG(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||s_)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<c.from||i.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,i));let u=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(qie)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,n=window.getComputedStyle(i),s=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?ur.RTL:ur.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),l=i.getBoundingClientRect(),c=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,d=0;if(l.width&&l.height){let{scaleX:C,scaleY:M}=Oie(i,l);(C>.005&&Math.abs(this.scaleX-C)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=C,this.scaleY=M,u|=8,a=c=!0)}let p=(parseInt(n.paddingTop)||0)*this.scaleY,m=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=m)&&(this.paddingTop=p,this.paddingBottom=m,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=Tie(e.scrollDOM);let y=(this.printing?tFe:eFe)(i,this.paddingTop),_=y.top-this.pixelViewport.top,x=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(c=!0)),!this.inView&&!this.scrollTarget)return 0;let S=l.width;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),c){let C=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(C)&&(a=!0),a||s.lineWrapping&&Math.abs(S-this.contentDOMWidth)>s.charWidth){let{lineHeight:M,charWidth:P,textHeight:R}=e.docView.measureTextSize();a=M>0&&s.refresh(o,M,P,R,S/P,C),a&&(e.docView.minWidth=0,u|=8)}_>0&&x>0?d=Math.max(_,x):_<0&&x<0&&(d=Math.min(_,x)),TG();for(let M of this.viewports){let P=M.from==this.viewport.from?C:e.docView.measureVisibleLineHeights(M);this.heightMap=(a?Jo.empty().applyChanges(this.stateDeco,Rn.empty,this.heightOracle,[new mh(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new Y6e(M.from,P))}s_&&(u|=2)}let w=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),u|=this.updateForViewport()),(u&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,c=new F2(s.lineAt(a-n*1e3,ar.ByHeight,o,0,0).from,s.lineAt(l+(1-n)*1e3,ar.ByHeight,o,0,0).to);if(i){let{head:u}=i.range;if(u<c.from||u>c.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=s.lineAt(u,ar.ByPos,o,0,0),m;i.y=="center"?m=(p.top+p.bottom)/2-d/2:i.y=="start"||i.y=="nearest"&&u<c.from?m=p.top:m=p.bottom-d,c=new F2(s.lineAt(m-1e3/2,ar.ByHeight,o,0,0).from,s.lineAt(m+d+1e3/2,ar.ByHeight,o,0,0).to)}}return c}mapViewport(e,i){let n=i.mapPos(e.from,-1),s=i.mapPos(e.to,1);return new F2(this.heightMap.lineAt(n,ar.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,ar.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},n=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(i,ar.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||s<=a-Math.max(10,Math.min(-n,250)))&&(i==this.state.doc.length||o>=l+Math.max(10,Math.min(n,250)))&&s>a-2*1e3&&o<l+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let n=[];for(let s of e)i.touchesRange(s.from,s.to)||n.push(new mR(i.mapPos(s.from),i.mapPos(s.to),s.size));return n}ensureLineGaps(e,i){let n=this.heightOracle.lineWrapping,s=n?1e4:2e3,o=s>>1,a=s<<1;if(this.defaultTextDirection!=ur.LTR&&!n)return[];let l=[],c=(d,p,m,g)=>{if(p-d<o)return;let y=this.state.selection.main,_=[y.from];y.empty||_.push(y.to);for(let O of _)if(O>d&&O<p){c(d,O-10,m,g),c(O+10,p,m,g);return}let x=rFe(e,O=>O.from>=m.from&&O.to<=m.to&&Math.abs(O.from-d)<o&&Math.abs(O.to-p)<o&&!_.some(S=>O.from<S&&O.to>S));if(!x){if(p<m.to&&i&&n&&i.visibleRanges.some(O=>O.from<=p&&O.to>=p)){let O=i.moveToLineBoundary(nt.cursor(p),!1,!0).head;O>d&&(p=O)}x=new mR(d,p,this.gapSize(m,d,p,g))}l.push(x)},u=d=>{if(d.length<a||d.type!=Ko.Text)return;let p=nFe(d.from,d.to,this.stateDeco);if(p.total<a)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,g,y;if(n){let _=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,O;if(m!=null){let S=U2(p,m),w=((this.visibleBottom-this.visibleTop)/2+_)/d.height;x=S-w,O=S+w}else x=(this.visibleTop-d.top-_)/d.height,O=(this.visibleBottom-d.top+_)/d.height;g=$2(p,x),y=$2(p,O)}else{let _=p.total*this.heightOracle.charWidth,x=s*this.heightOracle.charWidth,O,S;if(m!=null){let w=U2(p,m),C=((this.pixelViewport.right-this.pixelViewport.left)/2+x)/_;O=w-C,S=w+C}else O=(this.pixelViewport.left-x)/_,S=(this.pixelViewport.right+x)/_;g=$2(p,O),y=$2(p,S)}g>d.from&&c(d.from,g,d,p),y<d.to&&c(y,d.to,d,p)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(u):u(d);return l}gapSize(e,i,n,s){let o=U2(s,n)-U2(s,i);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){mR.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=vi.set(e.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];_n.spans(e,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let n=i.length!=this.visibleRanges.length||this.visibleRanges.some((s,o)=>s.from!=i[o].from||s.to!=i[o].to);return this.visibleRanges=i,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||yb(this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(i=>i.top<=e&&i.bottom>=e)||yb(this.heightMap.lineAt(this.scaler.fromDOM(e),ar.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return yb(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class F2{constructor(e,i){this.from=e,this.to=i}}function nFe(r,e,i){let n=[],s=r,o=0;return _n.spans(i,r,e,{span(){},point(a,l){a>s&&(n.push({from:s,to:a}),o+=a-s),s=l}},20),s<e&&(n.push({from:s,to:e}),o+=e-s),{total:o,ranges:n}}function $2({total:r,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let n=Math.floor(r*i);for(let s=0;;s++){let{from:o,to:a}=e[s],l=a-o;if(n<=l)return o+n;n-=l}}function U2(r,e){let i=0;for(let{from:n,to:s}of r.ranges){if(e<=s){i+=e-n;break}i+=s-n}return i/r.total}function rFe(r,e){for(let i of r)if(e(i))return i}const MG={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class t6{constructor(e,i,n){let s=0,o=0,a=0;this.viewports=n.map(({from:l,to:c})=>{let u=i.lineAt(l,ar.ByPos,e,0,0).top,d=i.lineAt(c,ar.ByPos,e,0,0).bottom;return s+=d-u,{from:l,to:c,top:u,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(i.height-s);for(let l of this.viewports)l.domTop=a+(l.top-o)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let i=0,n=0,s=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||e<o.top)return s+(e-n)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);n=o.bottom,s=o.domBottom}}fromDOM(e){for(let i=0,n=0,s=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||e<o.domTop)return n+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);n=o.bottom,s=o.domBottom}}eq(e){return e instanceof t6?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((i,n)=>i.from==e.viewports[n].from&&i.to==e.viewports[n].to):!1}}function yb(r,e){if(e.scale==1)return r;let i=e.toDOM(r.top),n=e.toDOM(r.bottom);return new Qc(r.from,r.length,i,n-i,Array.isArray(r._content)?r._content.map(s=>yb(s,e)):r._content)}const z2=Nt.define({combine:r=>r.join(" ")}),K5=Nt.define({combine:r=>r.indexOf(!0)>-1}),J5=Mp.newName(),gne=Mp.newName(),vne=Mp.newName(),yne={"&light":"."+gne,"&dark":"."+vne};function eD(r,e,i){return new Mp(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,s=>{if(s=="&")return r;if(!i||!i[s])throw new RangeError(`Unsupported selector: ${s}`);return i[s]}):r+" "+n}})}const sFe=eD("."+J5,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},yne),oFe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gR=Ft.ie&&Ft.ie_version<=11;class aFe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new GVe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let n of i)this.queue.push(n);(Ft.ie&&Ft.ie_version<=11||Ft.ios&&e.composing)&&i.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Ft.chrome&&Ft.chrome_version<126)&&(this.editContext=new hFe(e),e.state.facet(Zf)&&(e.contentDOM.editContext=this.editContext.editContext)),gR&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,n)=>i!=e[n]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,s=this.selectionRange;if(n.state.facet(Zf)?n.root.activeElement!=this.dom:!wA(n.dom,s))return;let o=s.anchorNode&&n.docView.nearest(s.anchorNode);if(o&&o.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(Ft.ie&&Ft.ie_version<=11||Ft.android&&Ft.chrome)&&!n.state.selection.main.empty&&s.focusNode&&Qb(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=Uw(e.root);if(!i)return!1;let n=Ft.safari&&e.root.nodeType==11&&UVe(this.dom.ownerDocument)==this.dom&&lFe(this.view,i)||i;if(!n||this.selectionRange.eq(n))return!1;let s=wA(this.dom,n);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&QVe(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let n=this.dom;n;)if(n.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=i)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,oFe),gR&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gR&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var n;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Sy(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,n=-1,s=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(s=!0),i==-1?{from:i,to:n}=a:(i=Math.min(a.from,i),n=Math.max(a.to,n)))}return{from:i,to:n,typeOver:s}}readChange(){let{from:e,to:i,typeOver:n}=this.processRecords(),s=this.selectionChanged&&wA(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new T6e(this.view,e,i,n);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let n=this.view.state,s=one(this.view,i);return this.view.state==n&&(i.domChanged||i.newSel&&!i.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let n=PG(i,e.previousSibling||e.target.previousSibling,-1),s=PG(i,e.nextSibling||e.target.nextSibling,1);return{from:n?i.posAfter(n):i.posAtStart,to:s?i.posBefore(s):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Zf)!=e.state.facet(Zf)&&(e.view.contentDOM.editContext=e.state.facet(Zf)?this.editContext.editContext:null))}destroy(){var e,i,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function PG(r,e,i){for(;e;){let n=qn.get(e);if(n&&n.parent==r)return n;let s=e.parentNode;e=s!=r.dom?s:i>0?e.nextSibling:e.previousSibling}return null}function kG(r,e){let i=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset,a=r.docView.domAtPos(r.state.selection.main.anchor);return Qb(a.node,a.offset,s,o)&&([i,n,s,o]=[s,o,i,n]),{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:o}}function lFe(r,e){if(e.getComposedRanges){let s=e.getComposedRanges(r.root)[0];if(s)return kG(r,s)}let i=null;function n(s){s.preventDefault(),s.stopImmediatePropagation(),i=s.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",n,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",n,!0),i?kG(r,i):null}class hFe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let i=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let{anchor:s}=e.state.selection.main,o={from:this.toEditorPos(n.updateRangeStart),to:this.toEditorPos(n.updateRangeEnd),insert:Rn.of(n.text.split(`
`))};o.from==this.from&&s<this.from?o.from=s:o.to==this.to&&s>this.to&&(o.to=s),!(o.from==o.to&&!o.insert.length)&&(this.pendingContextChange=o,e.state.readOnly||JV(e,o,nt.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=n=>{let s=[],o=null;for(let a=this.toEditorPos(n.rangeStart),l=this.toEditorPos(n.rangeEnd);a<l;a++){let c=e.coordsForChar(a);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,s.push(o)}i.updateCharacterBounds(n.rangeStart,s)},this.handlers.textformatupdate=n=>{let s=[];for(let o of n.getTextFormats()){let a=o.underlineStyle,l=o.underlineThickness;if(a!="None"&&l!="None"){let c=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;s.push(vi.mark({attributes:{style:c}}).range(this.toEditorPos(o.rangeStart),this.toEditorPos(o.rangeEnd)))}}e.dispatch({effects:Kie.of(vi.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let n in this.handlers)i.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let s=Uw(n.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let i=0,n=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,a,l,c,u)=>{if(n)return;let d=u.length-(a-o);if(s&&a>=s.to)if(s.from==o&&s.to==a&&s.insert.eq(u)){s=this.pendingContextChange=null,i+=d,this.to+=d;return}else s=null,this.revertPending(e.state);if(o+=i,a+=i,a<=this.from)this.from+=d,this.to+=d;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+u.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),u.toString()),this.to+=d}i+=d}),s&&!n&&this.revertPending(e.state),!n}update(e){let i=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||i)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:i}=e.selection.main;this.from=Math.max(0,i-1e4),this.to=Math.min(e.doc.length,i+1e4)}revertPending(e){let i=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(i.from),this.toContextPos(i.from+i.insert.length),e.doc.sliceString(i.from,i.to))}setSelection(e){let{main:i}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,i.anchor))),s=this.toContextPos(i.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(n,s)}rangeIsValid(e){let{head:i}=e.selection.main;return!(this.from>0&&i-this.from<500||this.to<e.doc.length&&this.to-i<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Mt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var i;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(s=>s.forEach(o=>n(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||HVe(e.parent)||document,this.viewState=new EG(e.state||wn.create(e)),e.scrollTo&&e.scrollTo.is(L2)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(mb).map(s=>new dR(s));for(let s of this.plugins)s.update(this);this.observer=new aFe(this),this.inputState=new k6e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new hG(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((i=document.fonts)===null||i===void 0)&&i.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let i=e.length==1&&e[0]instanceof As?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,n=!1,s,o=this.state;for(let m of e){if(m.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=m.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,l=0,c=null;e.some(m=>m.annotation(dne))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,c=fne(o,a),c||(l=1));let u=this.observer.delayedAndroidKey,d=null;if(u?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(d=null)):this.observer.clear(),o.facet(wn.phrases)!=this.state.facet(wn.phrases))return this.setState(o);s=TE.create(this,o,e),s.flags|=l;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(p&&(p=p.map(m.changes)),m.scrollIntoView){let{main:g}=m.state.selection;p=new Cy(g.empty?g:nt.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of m.effects)g.is(L2)&&(p=g.value.clip(this.state))}this.viewState.update(s,p),this.bidiCache=EE.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),i=this.docView.update(s),this.state.facet(gb)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(z2)!=s.state.facet(z2)&&(this.viewState.mustMeasureContent=!0),(i||n||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!s.empty)for(let m of this.state.facet(j5))try{m(s)}catch(g){Aa(this.state,g,"update listener")}(c||d)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),d&&!one(this,d)&&u.force&&Sy(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new EG(e),this.plugins=e.facet(mb).map(n=>new dR(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new hG(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(mb),n=e.state.facet(mb);if(i!=n){let s=[];for(let o of n){let a=i.indexOf(o);if(a<0)s.push(new dR(o));else{let l=this.plugins[a];l.mustUpdate=e,s.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);i!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let i=e.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(n){Aa(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,n=this.scrollDOM,s=n.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(Tie(n))o=-1,a=this.viewState.heightMap.height;else{let g=this.viewState.scrollAnchorAt(s);o=g.from,a=g.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];c&4||([this.measureRequests,u]=[u,this.measureRequests]);let d=u.map(g=>{try{return g.read(this)}catch(y){return Aa(this.state,y),IG}}),p=TE.create(this,this.state,[]),m=!1;p.flags|=c,i?i.flags|=c:i=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),m=this.docView.update(p),m&&this.docViewUpdate());for(let g=0;g<u.length;g++)if(d[g]!=IG)try{let y=u[g];y.write&&y.write(d[g],this)}catch(y){Aa(this.state,y)}if(m&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let y=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(y>1||y<-1){s=s+y,n.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let l of this.state.facet(j5))l(i)}get themeClasses(){return J5+" "+(this.state.facet(K5)?vne:gne)+" "+this.state.facet(z2)}updateAttrs(){let e=RG(this,Jie,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Zf)?"true":"false",class:"cm-content",style:`${Ft.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),RG(this,ZV,i);let n=this.observer.ignore(()=>{let s=z5(this.contentDOM,this.contentAttrs,i),o=z5(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=i,n}showAnnouncements(e){let i=!0;for(let n of e)for(let s of n.effects)if(s.is(Mt.announce)){i&&(this.announceDOM.textContent=""),i=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(gb);let e=this.state.facet(Mt.cspNonce);Mp.mount(this.root,this.styleModules.concat(sFe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(n=>n.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,n){return pR(this,e,pG(this,e,i,n))}moveByGroup(e,i){return pR(this,e,pG(this,e,i,n=>w6e(this,e.head,n)))}visualLineSide(e,i){let n=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=n[i?n.length-1:0];return nt.cursor(o.side(i,s)+e.from,o.forward(!i,s)?1:-1)}moveToLineBoundary(e,i,n=!0){return b6e(this,e,i,n)}moveVertically(e,i,n){return pR(this,e,O6e(this,e,i,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),sne(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let n=this.docView.coordsAt(e,i);if(!n||n.left==n.right)return n;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),a=o[sp.find(o,e-s.from,-1,i)];return FP(n,a.dir==ur.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Yie)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>cFe)return Uie(e.length);let i=this.textDirectionAt(e.from),n;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==i&&(o.fresh||$ie(o.isolates,n=lG(this,e))))return o.order;n||(n=lG(this,e));let s=s6e(e.text,i,n);return this.bidiCache.push(new EE(e.from,e.to,i,n,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ft.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Sie(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return L2.of(new Cy(typeof e=="number"?nt.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:i}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return L2.of(new Cy(nt.cursor(n.from),"start","start",n.top-e,i,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ms.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ms.define(()=>({}),{eventObservers:e})}static theme(e,i){let n=Mp.newName(),s=[z2.of(n),gb.of(eD(`.${n}`,e))];return i&&i.dark&&s.push(K5.of(!0)),s}static baseTheme(e){return _0.lowest(gb.of(eD("."+J5,e,yne)))}static findFromDOM(e){var i;let n=e.querySelector(".cm-content"),s=n&&qn.get(n)||qn.get(e);return((i=s==null?void 0:s.rootView)===null||i===void 0?void 0:i.view)||null}}Mt.styleModule=gb;Mt.inputHandler=Qie;Mt.clipboardInputFilter=YV;Mt.clipboardOutputFilter=qV;Mt.scrollHandler=Zie;Mt.focusChangeEffect=jie;Mt.perLineTextDirection=Yie;Mt.exceptionSink=Hie;Mt.updateListener=j5;Mt.editable=Zf;Mt.mouseSelectionStyle=Gie;Mt.dragMovesSelection=Wie;Mt.clickAddsSelectionRange=Xie;Mt.decorations=Xw;Mt.outerDecorations=ene;Mt.atomicRanges=KV;Mt.bidiIsolatedRanges=tne;Mt.scrollMargins=ine;Mt.darkTheme=K5;Mt.cspNonce=Nt.define({combine:r=>r.length?r[0]:""});Mt.contentAttributes=ZV;Mt.editorAttributes=Jie;Mt.lineWrapping=Mt.contentAttributes.of({class:"cm-lineWrapping"});Mt.announce=Hi.define();const cFe=4096,IG={};class EE{constructor(e,i,n,s,o,a){this.from=e,this.to=i,this.dir=n,this.isolates=s,this.fresh=o,this.order=a}static update(e,i){if(i.empty&&!e.some(o=>o.fresh))return e;let n=[],s=e.length?e[e.length-1].dir:ur.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==s&&!i.touchesRange(a.from,a.to)&&n.push(new EE(i.mapPos(a.from,1),i.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return n}}function RG(r,e,i){for(let n=r.state.facet(e),s=n.length-1;s>=0;s--){let o=n[s],a=typeof o=="function"?o(r):o;a&&U5(a,i)}return i}const uFe=Ft.mac?"mac":Ft.windows?"win":Ft.linux?"linux":"key";function dFe(r,e){const i=r.split(/-(?!$)/);let n=i[i.length-1];n=="Space"&&(n=" ");let s,o,a,l;for(let c=0;c<i.length-1;++c){const u=i[c];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))s=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return s&&(n="Alt-"+n),o&&(n="Ctrl-"+n),l&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function X2(r,e,i){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),i!==!1&&e.shiftKey&&(r="Shift-"+r),r}const fFe=_0.default(Mt.domEventHandlers({keydown(r,e){return xne(_ne(e.state),r,e,"editor")}})),i6=Nt.define({enables:fFe}),BG=new WeakMap;function _ne(r){let e=r.facet(i6),i=BG.get(e);return i||BG.set(e,i=gFe(e.reduce((n,s)=>n.concat(s),[]))),i}function pFe(r,e,i){return xne(_ne(r.state),e,r,i)}let Kf=null;const mFe=4e3;function gFe(r,e=uFe){let i=Object.create(null),n=Object.create(null),s=(a,l)=>{let c=n[a];if(c==null)n[a]=l;else if(c!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,l,c,u,d)=>{var p,m;let g=i[a]||(i[a]=Object.create(null)),y=l.split(/ (?!$)/).map(O=>dFe(O,e));for(let O=1;O<y.length;O++){let S=y.slice(0,O).join(" ");s(S,!0),g[S]||(g[S]={preventDefault:!0,stopPropagation:!1,run:[w=>{let C=Kf={view:w,prefix:S,scope:a};return setTimeout(()=>{Kf==C&&(Kf=null)},mFe),!0}]})}let _=y.join(" ");s(_,!1);let x=g[_]||(g[_]={preventDefault:!1,stopPropagation:!1,run:((m=(p=g._any)===null||p===void 0?void 0:p.run)===null||m===void 0?void 0:m.slice())||[]});c&&x.run.push(c),u&&(x.preventDefault=!0),d&&(x.stopPropagation=!0)};for(let a of r){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of l){let d=i[u]||(i[u]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=a;for(let m in d)d[m].run.push(g=>p(g,tD))}let c=a[e]||a.key;if(c)for(let u of l)o(u,c,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(u,"Shift-"+c,a.shift,a.preventDefault,a.stopPropagation)}return i}let tD=null;function xne(r,e,i,n){tD=e;let s=$Ve(e),o=Js(s,0),a=eh(o)==s.length&&s!=" ",l="",c=!1,u=!1,d=!1;Kf&&Kf.view==i&&Kf.scope==n&&(l=Kf.prefix+" ",lne.indexOf(e.keyCode)<0&&(u=!0,Kf=null));let p=new Set,m=x=>{if(x){for(let O of x.run)if(!p.has(O)&&(p.add(O),O(i)))return x.stopPropagation&&(d=!0),!0;x.preventDefault&&(x.stopPropagation&&(d=!0),u=!0)}return!1},g=r[n],y,_;return g&&(m(g[l+X2(s,e,!a)])?c=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ft.windows&&e.ctrlKey&&e.altKey)&&(y=Pp[e.keyCode])&&y!=s?(m(g[l+X2(y,e,!0)])||e.shiftKey&&(_=$w[e.keyCode])!=s&&_!=y&&m(g[l+X2(_,e,!1)]))&&(c=!0):a&&e.shiftKey&&m(g[l+X2(s,e,!0)])&&(c=!0),!c&&m(g._any)&&(c=!0)),u&&(c=!0),c&&d&&e.stopPropagation(),tD=null,c}class sS{constructor(e,i,n,s,o){this.className=e,this.left=i,this.top=n,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,n){if(n.empty){let s=e.coordsAtPos(n.head,n.assoc||1);if(!s)return[];let o=bne(e);return[new sS(i,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return vFe(e,i,n)}}function bne(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==ur.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function DG(r,e,i,n){let s=r.coordsAtPos(e,i*2);if(!s)return n;let o=r.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,l=r.posAtCoords({x:o.left+1,y:a}),c=r.posAtCoords({x:o.right-1,y:a});return l==null||c==null?n:{from:Math.max(n.from,Math.min(l,c)),to:Math.min(n.to,Math.max(l,c))}}function vFe(r,e,i){if(i.to<=r.viewport.from||i.from>=r.viewport.to)return[];let n=Math.max(i.from,r.viewport.from),s=Math.min(i.to,r.viewport.to),o=r.textDirection==ur.LTR,a=r.contentDOM,l=a.getBoundingClientRect(),c=bne(r),u=a.querySelector(".cm-line"),d=u&&window.getComputedStyle(u),p=l.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),m=l.right-(d?parseInt(d.paddingRight):0),g=q5(r,n),y=q5(r,s),_=g.type==Ko.Text?g:null,x=y.type==Ko.Text?y:null;if(_&&(r.lineWrapping||g.widgetLineBreaks)&&(_=DG(r,n,1,_)),x&&(r.lineWrapping||y.widgetLineBreaks)&&(x=DG(r,s,-1,x)),_&&x&&_.from==x.from&&_.to==x.to)return S(w(i.from,i.to,_));{let M=_?w(i.from,null,_):C(g,!1),P=x?w(null,i.to,x):C(y,!0),R=[];return(_||g).to<(x||y).from-(_&&x?1:0)||g.widgetLineBreaks>1&&M.bottom+r.defaultLineHeight/2<P.top?R.push(O(p,M.bottom,m,P.top)):M.bottom<P.top&&r.elementAtHeight((M.bottom+P.top)/2).type==Ko.Text&&(M.bottom=P.top=(M.bottom+P.top)/2),S(M).concat(R).concat(S(P))}function O(M,P,R,k){return new sS(e,M-c.left,P-c.top-.01,R-M,k-P+.01)}function S({top:M,bottom:P,horizontal:R}){let k=[];for(let I=0;I<R.length;I+=2)k.push(O(R[I],M,R[I+1],P));return k}function w(M,P,R){let k=1e9,I=-1e9,A=[];function D(L,F,$,z,H){let K=r.coordsAtPos(L,L==R.to?-2:2),J=r.coordsAtPos($,$==R.from?2:-2);!K||!J||(k=Math.min(K.top,J.top,k),I=Math.max(K.bottom,J.bottom,I),H==ur.LTR?A.push(o&&F?p:K.left,o&&z?m:J.right):A.push(!o&&z?p:J.left,!o&&F?m:K.right))}let V=M??R.from,B=P??R.to;for(let L of r.visibleRanges)if(L.to>V&&L.from<B)for(let F=Math.max(L.from,V),$=Math.min(L.to,B);;){let z=r.state.doc.lineAt(F);for(let H of r.bidiSpans(z)){let K=H.from+z.from,J=H.to+z.from;if(K>=$)break;J>F&&D(Math.max(K,F),M==null&&K<=V,Math.min(J,$),P==null&&J>=B,H.dir)}if(F=z.to+1,F>=$)break}return A.length==0&&D(V,M==null,B,P==null,r.textDirection),{top:k,bottom:I,horizontal:A}}function C(M,P){let R=l.top+(P?M.top:M.bottom);return{top:R,bottom:R,horizontal:[]}}}function yFe(r,e){return r.constructor==e.constructor&&r.eq(e)}class _Fe{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet(CA)!=e.state.facet(CA)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let i=0,n=e.facet(CA);for(;i<n.length&&n[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:i}=this.view;(e!=this.scaleX||i!=this.scaleY)&&(this.scaleX=e,this.scaleY=i,this.dom.style.transform=`scale(${1/e}, ${1/i})`)}draw(e){if(e.length!=this.drawn.length||e.some((i,n)=>!yFe(i,this.drawn[n]))){let i=this.dom.firstChild,n=0;for(let s of e)s.update&&i&&s.constructor&&this.drawn[n].constructor&&s.update(i,this.drawn[n])?(i=i.nextSibling,n++):this.dom.insertBefore(s.draw(),i);for(;i;){let s=i.nextSibling;i.remove(),i=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const CA=Nt.define();function wne(r){return[ms.define(e=>new _Fe(e,r)),CA.of(r)]}const One=!Ft.ios,Ww=Nt.define({combine(r){return wu(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function xFe(r={}){return[Ww.of(r),bFe,wFe,OFe,qie.of(!0)]}function Sne(r){return r.startState.facet(Ww)!=r.state.facet(Ww)}const bFe=wne({above:!0,markers(r){let{state:e}=r,i=e.facet(Ww),n=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty?!o||One:i.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:nt.cursor(s.head,s.head>s.anchor?-1:1);for(let c of sS.forRange(r,a,l))n.push(c)}}return n},update(r,e){r.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=Sne(r);return i&&LG(r.state,e),r.docChanged||r.selectionSet||i},mount(r,e){LG(e.state,r)},class:"cm-cursorLayer"});function LG(r,e){e.style.animationDuration=r.facet(Ww).cursorBlinkRate+"ms"}const wFe=wne({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:sS.forRange(r,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||Sne(r)},class:"cm-selectionLayer"}),iD={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};One&&(iD[".cm-line"].caretColor=iD[".cm-content"].caretColor="transparent !important");const OFe=_0.highest(Mt.theme(iD)),Cne=Hi.define({map(r,e){return r==null?null:e.mapPos(r)}}),_b=lo.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((i,n)=>n.is(Cne)?n.value:i,r)}}),SFe=ms.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let i=r.state.field(_b);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(_b)!=i||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(_b),i=e!=null&&r.coordsAtPos(e);if(!i)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:i.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:i.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:i.bottom-i.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:i}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/i+"px",this.cursor.style.height=r.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(_b)!=r&&this.view.dispatch({effects:Cne.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function CFe(){return[_b,SFe]}function NG(r,e,i,n,s){e.lastIndex=0;for(let o=r.iterRange(i,n),a=i,l;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)s(a+l.index,l)}function TFe(r,e){let i=r.visibleRanges;if(i.length==1&&i[0].from==r.viewport.from&&i[0].to==r.viewport.to)return i;let n=[];for(let{from:s,to:o}of i)s=Math.max(r.state.doc.lineAt(s).from,s-e),o=Math.min(r.state.doc.lineAt(o).to,o+e),n.length&&n[n.length-1].to>=s?n[n.length-1].to=o:n.push({from:s,to:o});return n}class AFe{constructor(e){const{regexp:i,decoration:n,decorate:s,boundary:o,maxLength:a=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,s)this.addMatch=(l,c,u,d)=>s(d,u,u+l[0].length,l,c);else if(typeof n=="function")this.addMatch=(l,c,u,d)=>{let p=n(l,c,u);p&&d(u,u+l[0].length,p)};else if(n)this.addMatch=(l,c,u,d)=>d(u,u+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let i=new Ep,n=i.add.bind(i);for(let{from:s,to:o}of TFe(e,this.maxLength))NG(e.state.doc,this.regexp,s,o,(a,l)=>this.addMatch(l,e,a,n));return i.finish()}updateDeco(e,i){let n=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,a,l,c)=>{c>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),s=Math.max(c,s))}),e.viewportChanged||s-n>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,i.map(e.changes),n,s):i}updateRange(e,i,n,s){for(let o of e.visibleRanges){let a=Math.max(o.from,n),l=Math.min(o.to,s);if(l>a){let c=e.state.doc.lineAt(a),u=c.to<l?e.state.doc.lineAt(l):c,d=Math.max(o.from,c.from),p=Math.min(o.to,u.to);if(this.boundary){for(;a>c.from;a--)if(this.boundary.test(c.text[a-1-c.from])){d=a;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){p=l;break}}let m=[],g,y=(_,x,O)=>m.push(O.range(_,x));if(c==u)for(this.regexp.lastIndex=d-c.from;(g=this.regexp.exec(c.text))&&g.index<p-c.from;)this.addMatch(g,e,g.index+c.from,y);else NG(e.state.doc,this.regexp,d,p,(_,x)=>this.addMatch(x,e,_,y));i=i.update({filterFrom:d,filterTo:p,filter:(_,x)=>_<d||x>p,add:m})}}return i}}const nD=/x/.unicode!=null?"gu":"g",EFe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,nD),MFe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let vR=null;function PFe(){var r;if(vR==null&&typeof document<"u"&&document.body){let e=document.body.style;vR=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return vR||!1}const TA=Nt.define({combine(r){let e=wu(r,{render:null,specialChars:EFe,addSpecialChars:null});return(e.replaceTabs=!PFe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,nD)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,nD)),e}});function kFe(r={}){return[TA.of(r),IFe()]}let VG=null;function IFe(){return VG||(VG=ms.fromClass(class{constructor(r){this.view=r,this.decorations=vi.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(TA)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new AFe({regexp:r.specialChars,decoration:(e,i,n)=>{let{doc:s}=i.state,o=Js(e[0],0);if(o==9){let a=s.lineAt(n),l=i.state.tabSize,c=B_(a.text,l,n-a.from);return vi.replace({widget:new LFe((l-c%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=vi.replace({widget:new DFe(r,o)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(TA);r.startState.facet(TA)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const RFe="•";function BFe(r){return r>=32?RFe:r==10?"␤":String.fromCharCode(9216+r)}class DFe extends jp{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=BFe(this.code),n=e.state.phrase("Control character")+" "+(MFe[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,n,i);if(s)return s;let o=document.createElement("span");return o.textContent=i,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class LFe extends jp{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function NFe(){return FFe}const VFe=vi.line({class:"cm-activeLine"}),FFe=ms.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,i=[];for(let n of r.state.selection.ranges){let s=r.lineBlockAt(n.head);s.from>e&&(i.push(VFe.range(s.from)),e=s.from)}return vi.set(i)}},{decorations:r=>r.decorations}),rD=2e3;function $Fe(r,e,i){let n=Math.min(e.line,i.line),s=Math.max(e.line,i.line),o=[];if(e.off>rD||i.off>rD||e.col<0||i.col<0){let a=Math.min(e.off,i.off),l=Math.max(e.off,i.off);for(let c=n;c<=s;c++){let u=r.doc.line(c);u.length<=l&&o.push(nt.range(u.from+a,u.to+l))}}else{let a=Math.min(e.col,i.col),l=Math.max(e.col,i.col);for(let c=n;c<=s;c++){let u=r.doc.line(c),d=B5(u.text,a,r.tabSize,!0);if(d<0)o.push(nt.cursor(u.to));else{let p=B5(u.text,l,r.tabSize);o.push(nt.range(u.from+d,u.from+p))}}}return o}function UFe(r,e){let i=r.coordsAtPos(r.viewport.from);return i?Math.round(Math.abs((i.left-e)/r.defaultCharacterWidth)):-1}function FG(r,e){let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1),n=r.state.doc.lineAt(i),s=i-n.from,o=s>rD?-1:s==n.length?UFe(r,e.clientX):B_(n.text,r.state.tabSize,i-n.from);return{line:n.number,col:o,off:s}}function zFe(r,e){let i=FG(r,e),n=r.state.selection;return i?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(i.line).from),a=s.state.doc.lineAt(o);i={line:a.number,col:i.col,off:Math.min(i.off,a.length)},n=n.map(s.changes)}},get(s,o,a){let l=FG(r,s);if(!l)return n;let c=$Fe(r.state,i,l);return c.length?a?nt.create(c.concat(n.ranges)):nt.create(c):n}}:null}function XFe(r){let e=i=>i.altKey&&i.button==0;return Mt.mouseSelectionStyle.of((i,n)=>e(n)?zFe(i,n):null)}const WFe={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},GFe={style:"cursor: crosshair"};function HFe(r={}){let[e,i]=WFe[r.key||"Alt"],n=ms.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||i(s))},keyup(s){(s.keyCode==e||!i(s))&&this.set(!1)},mousemove(s){this.set(i(s))}}});return[n,Mt.contentAttributes.of(s=>{var o;return!((o=s.plugin(n))===null||o===void 0)&&o.isDown?GFe:null})]}const L1="-10000px";class Tne{constructor(e,i,n,s){this.facet=i,this.createTooltipView=n,this.removeTooltipView=s,this.input=e.state.facet(i),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=n(a,o))}update(e,i){var n;let s=e.state.facet(this.facet),o=s.filter(c=>c);if(s===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let a=[],l=i?[]:null;for(let c=0;c<o.length;c++){let u=o[c],d=-1;if(u){for(let p=0;p<this.tooltips.length;p++){let m=this.tooltips[p];m&&m.create==u.create&&(d=p)}if(d<0)a[c]=this.createTooltipView(u,c?a[c-1]:null),l&&(l[c]=!!u.above);else{let p=a[c]=this.tooltipViews[d];l&&(l[c]=i[d]),p.update&&p.update(e)}}}for(let c of this.tooltipViews)a.indexOf(c)<0&&(this.removeTooltipView(c),(n=c.destroy)===null||n===void 0||n.call(c));return i&&(l.forEach((c,u)=>i[u]=c),i.length=l.length),this.input=s,this.tooltips=o,this.tooltipViews=a,!0}}function QFe(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const yR=Nt.define({combine:r=>{var e,i,n;return{position:Ft.ios?"absolute":((e=r.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=r.find(s=>s.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((n=r.find(s=>s.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||QFe}}}),$G=new WeakMap,n6=ms.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(yR);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Tne(r,r6,(i,n)=>this.createTooltip(i,n),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let i=e||r.geometryChanged,n=r.state.facet(yR);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;i=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(r,e){let i=r.create(this.view),n=e?e.dom:null;if(i.dom.classList.add("cm-tooltip"),r.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",i.dom.appendChild(s)}return i.dom.style.position=this.position,i.dom.style.top=L1,i.dom.style.left="0px",this.container.insertBefore(i.dom,n),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var r,e,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,i=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ft.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==L1&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,i=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:i}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(yR).tooltipSpace(this.view),scaleX:e,scaleY:i,makeAbsolute:n}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:i,space:n,scaleX:s,scaleY:o}=r,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let c=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:d}=u,p=r.pos[l],m=r.size[l];if(!p||p.bottom<=Math.max(i.top,n.top)||p.top>=Math.min(i.bottom,n.bottom)||p.right<Math.max(i.left,n.left)-.1||p.left>Math.min(i.right,n.right)+.1){d.style.top=L1;continue}let g=c.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,y=g?7:0,_=m.right-m.left,x=(e=$G.get(u))!==null&&e!==void 0?e:m.bottom-m.top,O=u.offset||YFe,S=this.view.textDirection==ur.LTR,w=m.width>n.right-n.left?S?n.left:n.right-m.width:S?Math.max(n.left,Math.min(p.left-(g?14:0)+O.x,n.right-_)):Math.min(Math.max(n.left,p.left-_+(g?14:0)-O.x),n.right-_),C=this.above[l];!c.strictSide&&(C?p.top-(m.bottom-m.top)-O.y<n.top:p.bottom+(m.bottom-m.top)+O.y>n.bottom)&&C==n.bottom-p.bottom>p.top-n.top&&(C=this.above[l]=!C);let M=(C?p.top-n.top:n.bottom-p.bottom)-y;if(M<x&&u.resize!==!1){if(M<this.view.defaultLineHeight){d.style.top=L1;continue}$G.set(u,x),d.style.height=(x=M)/o+"px"}else d.style.height&&(d.style.height="");let P=C?p.top-x-y-O.y:p.bottom+y+O.y,R=w+_;if(u.overlap!==!0)for(let k of a)k.left<R&&k.right>w&&k.top<P+x&&k.bottom>P&&(P=C?k.top-x-2-y:k.bottom+y+2);if(this.position=="absolute"?(d.style.top=(P-r.parent.top)/o+"px",d.style.left=(w-r.parent.left)/s+"px"):(d.style.top=P/o+"px",d.style.left=w/s+"px"),g){let k=p.left+(S?O.x:-O.x)-(w+14-7);g.style.left=k/s+"px"}u.overlap!==!0&&a.push({left:w,top:P,right:R,bottom:P+x}),d.classList.toggle("cm-tooltip-above",C),d.classList.toggle("cm-tooltip-below",!C),u.positioned&&u.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=L1}},{eventObservers:{scroll(){this.maybeMeasure()}}}),jFe=Mt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),YFe={x:0,y:0},r6=Nt.define({enables:[n6,jFe]}),ME=Nt.define({combine:r=>r.reduce((e,i)=>e.concat(i),[])});class zP{static create(e){return new zP(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Tne(e,ME,(i,n)=>this.createHostedView(i,n),i=>i.dom.remove())}createHostedView(e,i){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}passProp(e){let i;for(let n of this.manager.tooltipViews){let s=n[e];if(s!==void 0){if(i===void 0)i=s;else if(i!==s)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const qFe=r6.compute([ME],r=>{let e=r.facet(ME);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.map(i=>{var n;return(n=i.end)!==null&&n!==void 0?n:i.pos})),create:zP.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class ZFe{constructor(e,i,n,s,o){this.view=e,this.source=i,this.field=n,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,n=e.docView.nearest(i.target);if(!n)return;let s,o=1;if(n instanceof rp)s=n.posAtStart;else{if(s=e.posAtCoords(i),s==null)return;let l=e.coordsAtPos(s);if(!l||i.y<l.top||i.y>l.bottom||i.x<l.left-e.defaultCharacterWidth||i.x>l.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(s)).find(d=>d.from<=s&&d.to>=s),u=c&&c.dir==ur.RTL?-1:1;o=i.x<l.left?-u:u}let a=this.source(e,s,o);if(a!=null&&a.then){let l=this.pending={pos:s};a.then(c=>{this.pending==l&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>Aa(e.state,c,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(n6),i=e?e.manager.tooltips.findIndex(n=>n.create==zP.create):-1;return i>-1?e.manager.tooltipViews[i]:null}mousemove(e){var i,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!KFe(o.dom,e)||this.pending){let{pos:a}=s[0]||this.pending,l=(n=(i=s[0])===null||i===void 0?void 0:i.end)!==null&&n!==void 0?n:a;(a==l?this.view.posAtCoords(this.lastMove)!=a:!JFe(this.view,a,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let i=n=>{e.removeEventListener("mouseleave",i),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const W2=4;function KFe(r,e){let{left:i,right:n,top:s,bottom:o}=r.getBoundingClientRect(),a;if(a=r.querySelector(".cm-tooltip-arrow")){let l=a.getBoundingClientRect();s=Math.min(l.top,s),o=Math.max(l.bottom,o)}return e.clientX>=i-W2&&e.clientX<=n+W2&&e.clientY>=s-W2&&e.clientY<=o+W2}function JFe(r,e,i,n,s,o){let a=r.scrollDOM.getBoundingClientRect(),l=r.documentTop+r.documentPadding.top+r.contentHeight;if(a.left>n||a.right<n||a.top>s||Math.min(a.bottom,l)<s)return!1;let c=r.posAtCoords({x:n,y:s},!1);return c>=e&&c<=i}function e$e(r,e={}){let i=Hi.define(),n=lo.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(a=>!e.hideOn(o,a))),o.docChanged)){let a=[];for(let l of s){let c=o.changes.mapPos(l.pos,-1,Ho.TrackDel);if(c!=null){let u=Object.assign(Object.create(null),l);u.pos=c,u.end!=null&&(u.end=o.changes.mapPos(u.end)),a.push(u)}}s=a}for(let a of o.effects)a.is(i)&&(s=a.value),a.is(t$e)&&(s=[]);return s},provide:s=>ME.from(s)});return{active:n,extension:[n,ms.define(s=>new ZFe(s,r,n,i,e.hoverTime||300)),qFe]}}function Ane(r,e){let i=r.plugin(n6);if(!i)return null;let n=i.manager.tooltips.indexOf(e);return n<0?null:i.manager.tooltipViews[n]}const t$e=Hi.define(),UG=Nt.define({combine(r){let e,i;for(let n of r)e=e||n.topContainer,i=i||n.bottomContainer;return{topContainer:e,bottomContainer:i}}});function Gw(r,e){let i=r.plugin(Ene),n=i?i.specs.indexOf(e):-1;return n>-1?i.panels[n]:null}const Ene=ms.fromClass(class{constructor(r){this.input=r.state.facet(Hw),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(r));let e=r.state.facet(UG);this.top=new G2(r,!0,e.topContainer),this.bottom=new G2(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(r){let e=r.state.facet(UG);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new G2(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new G2(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=r.state.facet(Hw);if(i!=this.input){let n=i.filter(c=>c),s=[],o=[],a=[],l=[];for(let c of n){let u=this.specs.indexOf(c),d;u<0?(d=c(r.view),l.push(d)):(d=this.panels[u],d.update&&d.update(r)),s.push(d),(d.top?o:a).push(d)}this.specs=n,this.panels=s,this.top.sync(o),this.bottom.sync(a);for(let c of l)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>Mt.scrollMargins.of(e=>{let i=e.plugin(r);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class G2{constructor(e,i,n){this.view=e,this.top=i,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=zG(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=zG(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function zG(r){let e=r.nextSibling;return r.remove(),e}const Hw=Nt.define({enables:Ene});class Dd extends Jg{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Dd.prototype.elementClass="";Dd.prototype.toDOM=void 0;Dd.prototype.mapMode=Ho.TrackBefore;Dd.prototype.startSide=Dd.prototype.endSide=-1;Dd.prototype.point=!0;const AA=Nt.define(),i$e=Nt.define(),n$e={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>_n.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Yb=Nt.define();function r$e(r){return[Mne(),Yb.of(Object.assign(Object.assign({},n$e),r))]}const XG=Nt.define({combine:r=>r.some(e=>e)});function Mne(r){return[s$e]}const s$e=ms.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(Yb).map(e=>new GG(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(XG),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,i=r.view.viewport,n=Math.min(e.to,i.to)-Math.max(e.from,i.from);this.syncGutters(n<(i.to-i.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(XG)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let i=_n.iter(this.view.state.facet(AA),this.view.viewport.from),n=[],s=this.gutters.map(o=>new o$e(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(o.type)){let a=!0;for(let l of o.type)if(l.type==Ko.Text&&a){sD(i,n,l.from);for(let c of s)c.line(this.view,l,n);a=!1}else if(l.widget)for(let c of s)c.widget(this.view,l)}else if(o.type==Ko.Text){sD(i,n,o.from);for(let a of s)a.line(this.view,o,n)}else if(o.widget)for(let a of s)a.widget(this.view,o);for(let o of s)o.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(Yb),i=r.state.facet(Yb),n=r.docChanged||r.heightChanged||r.viewportChanged||!_n.eq(r.startState.facet(AA),r.state.facet(AA),r.view.viewport.from,r.view.viewport.to);if(e==i)for(let s of this.gutters)s.update(r)&&(n=!0);else{n=!0;let s=[];for(let o of i){let a=e.indexOf(o);a<0?s.push(new GG(this.view,o)):(this.gutters[a].update(r),s.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)this.dom.appendChild(o.dom);this.gutters=s}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>Mt.scrollMargins.of(e=>{let i=e.plugin(r);return!i||i.gutters.length==0||!i.fixed?null:e.textDirection==ur.LTR?{left:i.dom.offsetWidth*e.scaleX}:{right:i.dom.offsetWidth*e.scaleX}})});function WG(r){return Array.isArray(r)?r:[r]}function sD(r,e,i){for(;r.value&&r.from<=i;)r.from==i&&e.push(r.value),r.next()}class o$e{constructor(e,i,n){this.gutter=e,this.height=n,this.i=0,this.cursor=_n.iter(e.markers,i.from)}addElement(e,i,n){let{gutter:s}=this,o=(i.top-this.height)/e.scaleY,a=i.height/e.scaleY;if(this.i==s.elements.length){let l=new Pne(e,a,o,n);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,a,o,n);this.height=i.bottom,this.i++}line(e,i,n){let s=[];sD(this.cursor,s,i.from),n.length&&(s=s.concat(n));let o=this.gutter.config.lineMarker(e,i,s);o&&s.unshift(o);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,i,s)}widget(e,i){let n=this.gutter.config.widgetMarker(e,i.widget,i),s=n?[n]:null;for(let o of e.state.facet(i$e)){let a=o(e,i.widget,i);a&&(s||(s=[])).push(a)}s&&this.addElement(e,i,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let i=e.elements.pop();e.dom.removeChild(i.dom),i.destroy()}}}class GG{constructor(e,i){this.view=e,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in i.domEventHandlers)this.dom.addEventListener(n,s=>{let o=s.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();a=(c.top+c.bottom)/2}else a=s.clientY;let l=e.lineBlockAtHeight(a-e.documentTop);i.domEventHandlers[n](e,l,s)&&s.preventDefault()});this.markers=WG(i.markers(e)),i.initialSpacer&&(this.spacer=new Pne(e,0,0,[i.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let i=this.markers;if(this.markers=WG(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let n=e.view.viewport;return!_n.eq(this.markers,i,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Pne{constructor(e,i,n,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,i,n,s)}update(e,i,n,s){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),a$e(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,i){let n="cm-gutterElement",s=this.dom.firstChild;for(let o=0,a=0;;){let l=a,c=o<i.length?i[o++]:null,u=!1;if(c){let d=c.elementClass;d&&(n+=" "+d);for(let p=a;p<this.markers.length;p++)if(this.markers[p].compare(c)){l=p,u=!0;break}}else l=this.markers.length;for(;a<l;){let d=this.markers[a++];if(d.toDOM){d.destroy(s);let p=s.nextSibling;s.remove(),s=p}}if(!c)break;c.toDOM&&(u?s=s.nextSibling:this.dom.insertBefore(c.toDOM(e),s)),u&&a++}this.dom.className=n,this.markers=i}destroy(){this.setMarkers(null,[])}}function a$e(r,e){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!r[i].compare(e[i]))return!1;return!0}const l$e=Nt.define(),h$e=Nt.define(),ty=Nt.define({combine(r){return wu(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,i){let n=Object.assign({},e);for(let s in i){let o=n[s],a=i[s];n[s]=o?(l,c,u)=>o(l,c,u)||a(l,c,u):a}return n}})}});class _R extends Dd{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function xR(r,e){return r.state.facet(ty).formatNumber(e,r.state)}const c$e=Yb.compute([ty],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(l$e)},lineMarker(e,i,n){return n.some(s=>s.toDOM)?null:new _R(xR(e,e.state.doc.lineAt(i.from).number))},widgetMarker:(e,i,n)=>{for(let s of e.state.facet(h$e)){let o=s(e,i,n);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(ty)!=e.state.facet(ty),initialSpacer(e){return new _R(xR(e,HG(e.state.doc.lines)))},updateSpacer(e,i){let n=xR(i.view,HG(i.view.state.doc.lines));return n==e.number?e:new _R(n)},domEventHandlers:r.facet(ty).domEventHandlers}));function u$e(r={}){return[ty.of(r),Mne(),c$e]}function HG(r){let e=9;for(;e<r;)e=e*10+9;return e}const d$e=new class extends Dd{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},f$e=AA.compute(["selection"],r=>{let e=[],i=-1;for(let n of r.selection.ranges){let s=r.doc.lineAt(n.head).from;s>i&&(i=s,e.push(d$e.range(s)))}return _n.of(e)});function p$e(){return f$e}const kne=1024;let m$e=0;class bR{constructor(e,i){this.from=e,this.to=i}}class Yi{constructor(e={}){this.id=m$e++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=La.match(e)),i=>{let n=e(i);return n===void 0?null:[this,n]}}}Yi.closedBy=new Yi({deserialize:r=>r.split(" ")});Yi.openedBy=new Yi({deserialize:r=>r.split(" ")});Yi.group=new Yi({deserialize:r=>r.split(" ")});Yi.isolate=new Yi({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});Yi.contextHash=new Yi({perNode:!0});Yi.lookAhead=new Yi({perNode:!0});Yi.mounted=new Yi({perNode:!0});class PE{constructor(e,i,n){this.tree=e,this.overlay=i,this.parser=n}static get(e){return e&&e.props&&e.props[Yi.mounted.id]}}const g$e=Object.create(null);class La{constructor(e,i,n,s=0){this.name=e,this.props=i,this.id=n,this.flags=s}static define(e){let i=e.props&&e.props.length?Object.create(null):g$e,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new La(e.name||"",i,e.id,n);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(Yi.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let n in e)for(let s of n.split(" "))i[s]=e[n];return n=>{for(let s=n.prop(Yi.group),o=-1;o<(s?s.length:0);o++){let a=i[o<0?n.name:s[o]];if(a)return a}}}}La.none=new La("",Object.create(null),0,8);class s6{constructor(e){this.types=e;for(let i=0;i<e.length;i++)if(e[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let i=[];for(let n of this.types){let s=null;for(let o of e){let a=o(n);a&&(s||(s=Object.assign({},n.props)),s[a[0].id]=a[1])}i.push(s?new La(n.name,s,n.id,n.flags):n)}return new s6(i)}}const H2=new WeakMap,QG=new WeakMap;var zs;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(zs||(zs={}));class fs{constructor(e,i,n,s,o){if(this.type=e,this.children=i,this.positions=n,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,l]of o)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=PE.get(this);if(e&&!e.overlay)return e.tree.toString();let i="";for(let n of this.children){let s=n.toString();s&&(i&&(i+=","),i+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new aD(this.topNode,e)}cursorAt(e,i=0,n=0){let s=H2.get(this)||this.topNode,o=new aD(s);return o.moveTo(e,i),H2.set(this,o._tree),o}get topNode(){return new Rp(this,0,0,null)}resolve(e,i=0){let n=Qw(H2.get(this)||this.topNode,e,i,!1);return H2.set(this,n),n}resolveInner(e,i=0){let n=Qw(QG.get(this)||this.topNode,e,i,!0);return QG.set(this,n),n}resolveStack(e,i=0){return _$e(this,e,i)}iterate(e){let{enter:i,leave:n,from:s=0,to:o=this.length}=e,a=e.mode||0,l=(a&zs.IncludeAnonymous)>0;for(let c=this.cursor(a|zs.IncludeAnonymous);;){let u=!1;if(c.from<=o&&c.to>=s&&(!l&&c.type.isAnonymous||i(c)!==!1)){if(c.firstChild())continue;u=!0}for(;u&&n&&(l||!c.type.isAnonymous)&&n(c),!c.nextSibling();){if(!c.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:l6(La.none,this.children,this.positions,0,this.children.length,0,this.length,(i,n,s)=>new fs(this.type,i,n,s,this.propValues),e.makeTree||((i,n,s)=>new fs(La.none,i,n,s)))}static build(e){return x$e(e)}}fs.empty=new fs(La.none,[],[],0);class o6{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new o6(this.buffer,this.index)}}class Ip{constructor(e,i,n){this.buffer=e,this.length=i,this.set=n}get type(){return La.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],n=this.buffer[e+3],s=this.set.types[i],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,n==e)return o;let a=[];for(;e<n;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,i,n,s,o){let{buffer:a}=this,l=-1;for(let c=e;c!=i&&!(Ine(o,s,a[c+1],a[c+2])&&(l=c,n>0));c=a[c+3]);return l}slice(e,i,n){let s=this.buffer,o=new Uint16Array(i-e),a=0;for(let l=e,c=0;l<i;){o[c++]=s[l++],o[c++]=s[l++]-n;let u=o[c++]=s[l++]-n;o[c++]=s[l++]-e,a=Math.max(a,u)}return new Ip(o,a,this.set)}}function Ine(r,e,i,n){switch(r){case-2:return i<e;case-1:return n>=e&&i<e;case 0:return i<e&&n>e;case 1:return i<=e&&n>e;case 2:return n>e;case 4:return!0}}function Qw(r,e,i,n){for(var s;r.from==r.to||(i<1?r.from>=e:r.from>e)||(i>-1?r.to<=e:r.to<e);){let a=!n&&r instanceof Rp&&r.index<0?null:r.parent;if(!a)return r;r=a}let o=n?0:zs.IgnoreOverlays;if(n)for(let a=r,l=a.parent;l;a=l,l=a.parent)a instanceof Rp&&a.index<0&&((s=l.enter(e,i,o))===null||s===void 0?void 0:s.from)!=a.from&&(r=l);for(;;){let a=r.enter(e,i,o);if(!a)return r;r=a}}class Rne{cursor(e=0){return new aD(this,e)}getChild(e,i=null,n=null){let s=jG(this,e,i,n);return s.length?s[0]:null}getChildren(e,i=null,n=null){return jG(this,e,i,n)}resolve(e,i=0){return Qw(this,e,i,!1)}resolveInner(e,i=0){return Qw(this,e,i,!0)}matchContext(e){return oD(this,e)}enterUnfinishedNodesBefore(e){let i=this.childBefore(e),n=this;for(;i;){let s=i.lastChild;if(!s||s.to!=i.to)break;s.type.isError&&s.from==s.to?(n=i,i=s.prevSibling):i=s}return n}get node(){return this}get next(){return this.parent}}let Rp=class EA extends Rne{constructor(e,i,n,s){super(),this._tree=e,this.from=i,this.index=n,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,n,s,o=0){for(let a=this;;){for(let{children:l,positions:c}=a._tree,u=i>0?l.length:-1;e!=u;e+=i){let d=l[e],p=c[e]+a.from;if(Ine(s,n,p,p+d.length)){if(d instanceof Ip){if(o&zs.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,i,n-p,s);if(m>-1)return new op(new v$e(a,d,e,p),null,m)}else if(o&zs.IncludeAnonymous||!d.type.isAnonymous||a6(d)){let m;if(!(o&zs.IgnoreMounts)&&(m=PE.get(d))&&!m.overlay)return new EA(m.tree,p,e,a);let g=new EA(d,p,e,a);return o&zs.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(i<0?d.children.length-1:0,i,n,s)}}}if(o&zs.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+i:e=i<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,n=0){let s;if(!(n&zs.IgnoreOverlays)&&(s=PE.get(this._tree))&&s.overlay){let o=e-this.from;for(let{from:a,to:l}of s.overlay)if((i>0?a<=o:a<o)&&(i<0?l>=o:l>o))return new EA(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function jG(r,e,i,n){let s=r.cursor(),o=[];if(!s.firstChild())return o;if(i!=null){for(let a=!1;!a;)if(a=s.type.is(i),!s.nextSibling())return o}for(;;){if(n!=null&&s.type.is(n))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return n==null?o:[]}}function oD(r,e,i=e.length-1){for(let n=r.parent;i>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[i]&&e[i]!=n.name)return!1;i--}}return!0}class v$e{constructor(e,i,n,s){this.parent=e,this.buffer=i,this.index=n,this.start=s}}class op extends Rne{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,n){super(),this.context=e,this._parent=i,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,i,n){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,i-this.context.start,n);return o<0?null:new op(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,n=0){if(n&zs.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return o<0?null:new op(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new op(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new op(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],i=[],{buffer:n}=this.context,s=this.index+4,o=n.buffer[this.index+3];if(o>s){let a=n.buffer[this.index+1];e.push(n.slice(s,o,a)),i.push(0)}return new fs(this.type,e,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Bne(r){if(!r.length)return null;let e=0,i=r[0];for(let o=1;o<r.length;o++){let a=r[o];(a.from>i.from||a.to<i.to)&&(i=a,e=o)}let n=i instanceof Rp&&i.index<0?null:i.parent,s=r.slice();return n?s[e]=n:s.splice(e,1),new y$e(s,i)}class y$e{constructor(e,i){this.heads=e,this.node=i}get next(){return Bne(this.heads)}}function _$e(r,e,i){let n=r.resolveInner(e,i),s=null;for(let o=n instanceof Rp?n:n.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(s||(s=[n])).push(a.resolve(e,i)),o=a}else{let a=PE.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let l=new Rp(a.tree,a.overlay[0].from+o.from,-1,o);(s||(s=[n])).push(Qw(l,e,i,!1))}}return s?Bne(s):n}class aD{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Rp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:n,buffer:s}=this.buffer;return this.type=i||s.set.types[s.buffer[e]],this.from=n+s.buffer[e+1],this.to=n+s.buffer[e+2],!0}yield(e){return e?e instanceof Rp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,n,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,i-this.buffer.start,n);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,n=this.mode){return this.buffer?n&zs.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&zs.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&zs.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,n=this.stack.length-1;if(e<0){let s=n<0?0:this.stack[n]+4;if(this.index!=s)return this.yieldBuf(i.findChild(s,this.index,-1,0,4))}else{let s=i.buffer[this.index+3];if(s<(n<0?i.buffer.length:i.buffer[this.stack[n]+3]))return this.yieldBuf(s)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,n,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:i,parent:n}=s)}else({index:i,_parent:n}=this._tree);for(;n;{index:i,_parent:n}=n)if(i>-1)for(let o=i+e,a=e<0?-1:n._tree.children.length;o!=a;o+=e){let l=n._tree.children[o];if(this.mode&zs.IncludeAnonymous||l instanceof Ip||!l.type.isAnonymous||a6(l))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,n=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;i=a,n=o+1;break e}s=this.stack[--o]}for(let s=n;s<this.stack.length;s++)i=new op(this.buffer,i,this.stack[s]);return this.bufferNode=new op(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let n=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(s=!0)}for(;s&&i&&i(this),s=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,s=!0}}}matchContext(e){if(!this.buffer)return oD(this.node,e);let{buffer:i}=this.buffer,{types:n}=i.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return oD(this.node,e,s);let a=n[i.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function a6(r){return r.children.some(e=>e instanceof Ip||!e.type.isAnonymous||a6(e))}function x$e(r){var e;let{buffer:i,nodeSet:n,maxBufferLength:s=kne,reused:o=[],minRepeatType:a=n.types.length}=r,l=Array.isArray(i)?new o6(i,i.length):i,c=n.types,u=0,d=0;function p(M,P,R,k,I,A){let{id:D,start:V,end:B,size:L}=l,F=d;for(;L<0;)if(l.next(),L==-1){let J=o[D];R.push(J),k.push(V-M);return}else if(L==-3){u=D;return}else if(L==-4){d=D;return}else throw new RangeError(`Unrecognized record size: ${L}`);let $=c[D],z,H,K=V-M;if(B-V<=s&&(H=x(l.pos-P,I))){let J=new Uint16Array(H.size-H.skip),ne=l.pos-H.size,be=J.length;for(;l.pos>ne;)be=O(H.start,J,be);z=new Ip(J,B-H.start,n),K=H.start-M}else{let J=l.pos-L;l.next();let ne=[],be=[],pe=D>=a?D:-1,ae=0,ye=B;for(;l.pos>J;)pe>=0&&l.id==pe&&l.size>=0?(l.end<=ye-s&&(y(ne,be,V,ae,l.end,ye,pe,F),ae=ne.length,ye=l.end),l.next()):A>2500?m(V,J,ne,be):p(V,J,ne,be,pe,A+1);if(pe>=0&&ae>0&&ae<ne.length&&y(ne,be,V,ae,V,ye,pe,F),ne.reverse(),be.reverse(),pe>-1&&ae>0){let _e=g($);z=l6($,ne,be,0,ne.length,0,B-V,_e,_e)}else z=_($,ne,be,B-V,F-B)}R.push(z),k.push(K)}function m(M,P,R,k){let I=[],A=0,D=-1;for(;l.pos>P;){let{id:V,start:B,end:L,size:F}=l;if(F>4)l.next();else{if(D>-1&&B<D)break;D<0&&(D=L-s),I.push(V,B,L),A++,l.next()}}if(A){let V=new Uint16Array(A*4),B=I[I.length-2];for(let L=I.length-3,F=0;L>=0;L-=3)V[F++]=I[L],V[F++]=I[L+1]-B,V[F++]=I[L+2]-B,V[F++]=F;R.push(new Ip(V,I[2]-B,n)),k.push(B-M)}}function g(M){return(P,R,k)=>{let I=0,A=P.length-1,D,V;if(A>=0&&(D=P[A])instanceof fs){if(!A&&D.type==M&&D.length==k)return D;(V=D.prop(Yi.lookAhead))&&(I=R[A]+D.length+V)}return _(M,P,R,k,I)}}function y(M,P,R,k,I,A,D,V){let B=[],L=[];for(;M.length>k;)B.push(M.pop()),L.push(P.pop()+R-I);M.push(_(n.types[D],B,L,A-I,V-A)),P.push(I-R)}function _(M,P,R,k,I=0,A){if(u){let D=[Yi.contextHash,u];A=A?[D].concat(A):[D]}if(I>25){let D=[Yi.lookAhead,I];A=A?[D].concat(A):[D]}return new fs(M,P,R,k,A)}function x(M,P){let R=l.fork(),k=0,I=0,A=0,D=R.end-s,V={size:0,start:0,skip:0};e:for(let B=R.pos-M;R.pos>B;){let L=R.size;if(R.id==P&&L>=0){V.size=k,V.start=I,V.skip=A,A+=4,k+=4,R.next();continue}let F=R.pos-L;if(L<0||F<B||R.start<D)break;let $=R.id>=a?4:0,z=R.start;for(R.next();R.pos>F;){if(R.size<0)if(R.size==-3)$+=4;else break e;else R.id>=a&&($+=4);R.next()}I=z,k+=L,A+=$}return(P<0||k==M)&&(V.size=k,V.start=I,V.skip=A),V.size>4?V:void 0}function O(M,P,R){let{id:k,start:I,end:A,size:D}=l;if(l.next(),D>=0&&k<a){let V=R;if(D>4){let B=l.pos-(D-4);for(;l.pos>B;)R=O(M,P,R)}P[--R]=V,P[--R]=A-M,P[--R]=I-M,P[--R]=k}else D==-3?u=k:D==-4&&(d=k);return R}let S=[],w=[];for(;l.pos>0;)p(r.start||0,r.bufferStart||0,S,w,-1,0);let C=(e=r.length)!==null&&e!==void 0?e:S.length?w[0]+S[0].length:0;return new fs(c[r.topID],S.reverse(),w.reverse(),C)}const YG=new WeakMap;function MA(r,e){if(!r.isAnonymous||e instanceof Ip||e.type!=r)return 1;let i=YG.get(e);if(i==null){i=1;for(let n of e.children){if(n.type!=r||!(n instanceof fs)){i=1;break}i+=MA(r,n)}YG.set(e,i)}return i}function l6(r,e,i,n,s,o,a,l,c){let u=0;for(let y=n;y<s;y++)u+=MA(r,e[y]);let d=Math.ceil(u*1.5/8),p=[],m=[];function g(y,_,x,O,S){for(let w=x;w<O;){let C=w,M=_[w],P=MA(r,y[w]);for(w++;w<O;w++){let R=MA(r,y[w]);if(P+R>=d)break;P+=R}if(w==C+1){if(P>d){let R=y[C];g(R.children,R.positions,0,R.children.length,_[C]+S);continue}p.push(y[C])}else{let R=_[w-1]+y[w-1].length-M;p.push(l6(r,y,_,C,w,M,R,null,c))}m.push(M+S-o)}}return g(e,i,n,s,0),(l||c)(p,m,a)}class kg{constructor(e,i,n,s,o=!1,a=!1){this.from=e,this.to=i,this.tree=n,this.offset=s,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],n=!1){let s=[new kg(0,e.length,e,0,!1,n)];for(let o of i)o.to>e.length&&s.push(o);return s}static applyChanges(e,i,n=128){if(!i.length)return e;let s=[],o=1,a=e.length?e[0]:null;for(let l=0,c=0,u=0;;l++){let d=l<i.length?i[l]:null,p=d?d.fromA:1e9;if(p-c>=n)for(;a&&a.from<p;){let m=a;if(c>=m.from||p<=m.to||u){let g=Math.max(m.from,c)-u,y=Math.min(m.to,p)-u;m=g>=y?null:new kg(g,y,m.tree,m.offset+u,l>0,!!d)}if(m&&s.push(m),a.to>p)break;a=o<e.length?e[o++]:null}if(!d)break;c=d.toA,u=d.toA-d.toB}return s}}class Dne{startParse(e,i,n){return typeof e=="string"&&(e=new b$e(e)),n=n?n.length?n.map(s=>new bR(s.from,s.to)):[new bR(0,0)]:[new bR(0,e.length)],this.createParse(e,i||[],n)}parse(e,i,n){let s=this.startParse(e,i,n);for(;;){let o=s.advance();if(o)return o}}}class b$e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}new Yi({perNode:!0});let w$e=0;class Kl{constructor(e,i,n,s){this.name=e,this.set=i,this.base=n,this.modified=s,this.id=w$e++}toString(){let{name:e}=this;for(let i of this.modified)i.name&&(e=`${i.name}(${e})`);return e}static define(e,i){let n=typeof e=="string"?e:"?";if(e instanceof Kl&&(i=e),i!=null&&i.base)throw new Error("Can not derive from a modified tag");let s=new Kl(n,[],null,[]);if(s.set.push(s),i)for(let o of i.set)s.set.push(o);return s}static defineModifier(e){let i=new kE(e);return n=>n.modified.indexOf(i)>-1?n:kE.get(n.base||n,n.modified.concat(i).sort((s,o)=>s.id-o.id))}}let O$e=0;class kE{constructor(e){this.name=e,this.instances=[],this.id=O$e++}static get(e,i){if(!i.length)return e;let n=i[0].instances.find(l=>l.base==e&&S$e(i,l.modified));if(n)return n;let s=[],o=new Kl(e.name,s,e,i);for(let l of i)l.instances.push(o);let a=C$e(i);for(let l of e.set)if(!l.modified.length)for(let c of a)s.push(kE.get(l,c));return o}}function S$e(r,e){return r.length==e.length&&r.every((i,n)=>i==e[n])}function C$e(r){let e=[[]];for(let i=0;i<r.length;i++)for(let n=0,s=e.length;n<s;n++)e.push(e[n].concat(r[i]));return e.sort((i,n)=>n.length-i.length)}function Lne(r){let e=Object.create(null);for(let i in r){let n=r[i];Array.isArray(n)||(n=[n]);for(let s of i.split(" "))if(s){let o=[],a=2,l=s;for(let p=0;;){if(l=="..."&&p>0&&p+3==s.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+s);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),p+=m[0].length,p==s.length)break;let g=s[p++];if(p==s.length&&g=="!"){a=0;break}if(g!="/")throw new RangeError("Invalid path: "+s);l=s.slice(p)}let c=o.length-1,u=o[c];if(!u)throw new RangeError("Invalid path: "+s);let d=new IE(n,a,c>0?o.slice(0,c):null);e[u]=d.sort(e[u])}}return Nne.add(e)}const Nne=new Yi;class IE{constructor(e,i,n,s){this.tags=e,this.mode=i,this.context=n,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}IE.empty=new IE([],2,null);function Vne(r,e){let i=Object.create(null);for(let o of r)if(!Array.isArray(o.tag))i[o.tag.id]=o.class;else for(let a of o.tag)i[a.id]=o.class;let{scope:n,all:s=null}=e||{};return{style:o=>{let a=s;for(let l of o)for(let c of l.set){let u=i[c.id];if(u){a=a?a+" "+u:u;break}}return a},scope:n}}function T$e(r,e){let i=null;for(let n of r){let s=n.style(e);s&&(i=i?i+" "+s:s)}return i}function A$e(r,e,i,n=0,s=r.length){let o=new E$e(n,Array.isArray(e)?e:[e],i);o.highlightRange(r.cursor(),n,s,"",o.highlighters),o.flush(s)}class E$e{constructor(e,i,n){this.at=e,this.highlighters=i,this.span=n,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,n,s,o){let{type:a,from:l,to:c}=e;if(l>=n||c<=i)return;a.isTop&&(o=this.highlighters.filter(g=>!g.scope||g.scope(a)));let u=s,d=M$e(e)||IE.empty,p=T$e(o,d.tags);if(p&&(u&&(u+=" "),u+=p,d.mode==1&&(s+=(s?" ":"")+p)),this.startSpan(Math.max(i,l),u),d.opaque)return;let m=e.tree&&e.tree.prop(Yi.mounted);if(m&&m.overlay){let g=e.node.enter(m.overlay[0].from+l,1),y=this.highlighters.filter(x=>!x.scope||x.scope(m.tree.type)),_=e.firstChild();for(let x=0,O=l;;x++){let S=x<m.overlay.length?m.overlay[x]:null,w=S?S.from+l:c,C=Math.max(i,O),M=Math.min(n,w);if(C<M&&_)for(;e.from<M&&(this.highlightRange(e,C,M,s,o),this.startSpan(Math.min(M,e.to),u),!(e.to>=w||!e.nextSibling())););if(!S||w>n)break;O=S.to+l,O>i&&(this.highlightRange(g.cursor(),Math.max(i,S.from+l),Math.min(n,O),"",y),this.startSpan(Math.min(n,O),u))}_&&e.parent()}else if(e.firstChild()){m&&(s="");do if(!(e.to<=i)){if(e.from>=n)break;this.highlightRange(e,i,n,s,o),this.startSpan(Math.min(n,e.to),u)}while(e.nextSibling());e.parent()}}}function M$e(r){let e=r.type.prop(Nne);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const yt=Kl.define,Q2=yt(),Wf=yt(),qG=yt(Wf),ZG=yt(Wf),Gf=yt(),j2=yt(Gf),wR=yt(Gf),Rc=yt(),Rm=yt(Rc),Cc=yt(),Tc=yt(),lD=yt(),N1=yt(lD),Y2=yt(),Ye={comment:Q2,lineComment:yt(Q2),blockComment:yt(Q2),docComment:yt(Q2),name:Wf,variableName:yt(Wf),typeName:qG,tagName:yt(qG),propertyName:ZG,attributeName:yt(ZG),className:yt(Wf),labelName:yt(Wf),namespace:yt(Wf),macroName:yt(Wf),literal:Gf,string:j2,docString:yt(j2),character:yt(j2),attributeValue:yt(j2),number:wR,integer:yt(wR),float:yt(wR),bool:yt(Gf),regexp:yt(Gf),escape:yt(Gf),color:yt(Gf),url:yt(Gf),keyword:Cc,self:yt(Cc),null:yt(Cc),atom:yt(Cc),unit:yt(Cc),modifier:yt(Cc),operatorKeyword:yt(Cc),controlKeyword:yt(Cc),definitionKeyword:yt(Cc),moduleKeyword:yt(Cc),operator:Tc,derefOperator:yt(Tc),arithmeticOperator:yt(Tc),logicOperator:yt(Tc),bitwiseOperator:yt(Tc),compareOperator:yt(Tc),updateOperator:yt(Tc),definitionOperator:yt(Tc),typeOperator:yt(Tc),controlOperator:yt(Tc),punctuation:lD,separator:yt(lD),bracket:N1,angleBracket:yt(N1),squareBracket:yt(N1),paren:yt(N1),brace:yt(N1),content:Rc,heading:Rm,heading1:yt(Rm),heading2:yt(Rm),heading3:yt(Rm),heading4:yt(Rm),heading5:yt(Rm),heading6:yt(Rm),contentSeparator:yt(Rc),list:yt(Rc),quote:yt(Rc),emphasis:yt(Rc),strong:yt(Rc),link:yt(Rc),monospace:yt(Rc),strikethrough:yt(Rc),inserted:yt(),deleted:yt(),changed:yt(),invalid:yt(),meta:Y2,documentMeta:yt(Y2),annotation:yt(Y2),processingInstruction:yt(Y2),definition:Kl.defineModifier("definition"),constant:Kl.defineModifier("constant"),function:Kl.defineModifier("function"),standard:Kl.defineModifier("standard"),local:Kl.defineModifier("local"),special:Kl.defineModifier("special")};for(let r in Ye){let e=Ye[r];e instanceof Kl&&(e.name=r)}Vne([{tag:Ye.link,class:"tok-link"},{tag:Ye.heading,class:"tok-heading"},{tag:Ye.emphasis,class:"tok-emphasis"},{tag:Ye.strong,class:"tok-strong"},{tag:Ye.keyword,class:"tok-keyword"},{tag:Ye.atom,class:"tok-atom"},{tag:Ye.bool,class:"tok-bool"},{tag:Ye.url,class:"tok-url"},{tag:Ye.labelName,class:"tok-labelName"},{tag:Ye.inserted,class:"tok-inserted"},{tag:Ye.deleted,class:"tok-deleted"},{tag:Ye.literal,class:"tok-literal"},{tag:Ye.string,class:"tok-string"},{tag:Ye.number,class:"tok-number"},{tag:[Ye.regexp,Ye.escape,Ye.special(Ye.string)],class:"tok-string2"},{tag:Ye.variableName,class:"tok-variableName"},{tag:Ye.local(Ye.variableName),class:"tok-variableName tok-local"},{tag:Ye.definition(Ye.variableName),class:"tok-variableName tok-definition"},{tag:Ye.special(Ye.variableName),class:"tok-variableName2"},{tag:Ye.definition(Ye.propertyName),class:"tok-propertyName tok-definition"},{tag:Ye.typeName,class:"tok-typeName"},{tag:Ye.namespace,class:"tok-namespace"},{tag:Ye.className,class:"tok-className"},{tag:Ye.macroName,class:"tok-macroName"},{tag:Ye.propertyName,class:"tok-propertyName"},{tag:Ye.operator,class:"tok-operator"},{tag:Ye.comment,class:"tok-comment"},{tag:Ye.meta,class:"tok-meta"},{tag:Ye.invalid,class:"tok-invalid"},{tag:Ye.punctuation,class:"tok-punctuation"}]);var OR;const iy=new Yi;function P$e(r){return Nt.define({combine:r?e=>e.concat(r):void 0})}const k$e=new Yi;class Kh{constructor(e,i,n=[],s=""){this.data=e,this.name=s,wn.prototype.hasOwnProperty("tree")||Object.defineProperty(wn.prototype,"tree",{get(){return Co(this)}}),this.parser=i,this.extension=[Bp.of(this),wn.languageData.of((o,a,l)=>{let c=KG(o,a,l),u=c.type.prop(iy);if(!u)return[];let d=o.facet(u),p=c.type.prop(k$e);if(p){let m=c.resolve(a-c.from,l);for(let g of p)if(g.test(m,o)){let y=o.facet(g.facet);return g.type=="replace"?y:y.concat(d)}}return d})].concat(n)}isActiveAt(e,i,n=-1){return KG(e,i,n).type.prop(iy)==this.data}findRegions(e){let i=e.facet(Bp);if((i==null?void 0:i.data)==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let n=[],s=(o,a)=>{if(o.prop(iy)==this.data){n.push({from:a,to:a+o.length});return}let l=o.prop(Yi.mounted);if(l){if(l.tree.prop(iy)==this.data){if(l.overlay)for(let c of l.overlay)n.push({from:c.from+a,to:c.to+a});else n.push({from:a,to:a+o.length});return}else if(l.overlay){let c=n.length;if(s(l.tree,l.overlay[0].from+a),n.length>c)return}}for(let c=0;c<o.children.length;c++){let u=o.children[c];u instanceof fs&&s(u,o.positions[c]+a)}};return s(Co(e),0),n}get allowsNesting(){return!0}}Kh.setState=Hi.define();function KG(r,e,i){let n=r.facet(Bp),s=Co(r).topNode;if(!n||n.allowsNesting)for(let o=s;o;o=o.enter(e,i,zs.ExcludeBuffers))o.type.isTop&&(s=o);return s}class RE extends Kh{constructor(e,i,n){super(e,i,[],n),this.parser=i}static define(e){let i=P$e(e.languageData);return new RE(i,e.parser.configure({props:[iy.add(n=>n.isTop?i:void 0)]}),e.name)}configure(e,i){return new RE(this.data,this.parser.configure(e),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Co(r){let e=r.field(Kh.state,!1);return e?e.tree:fs.empty}class I$e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let n=this.cursorPos-this.string.length;return e<n||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-n,i-n)}}let V1=null;class BE{constructor(e,i,n=[],s,o,a,l,c){this.parser=e,this.state=i,this.fragments=n,this.tree=s,this.treeLen=o,this.viewport=a,this.skipped=l,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,i,n){return new BE(e,i,[],fs.empty,0,n,[],null)}startParse(){return this.parser.startParse(new I$e(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=fs.empty&&this.isDone(i??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(kg.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(i??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(kg.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=V1;V1=this;try{return e()}finally{V1=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=JG(e,i.from,i.to);return e}changes(e,i){let{fragments:n,tree:s,treeLen:o,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((u,d,p,m)=>c.push({fromA:u,toA:d,fromB:p,toB:m})),n=kg.applyChanges(n,c),s=fs.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let d=e.mapPos(u.from,1),p=e.mapPos(u.to,-1);d<p&&l.push({from:d,to:p})}}}return new BE(this.parser,i,n,s,o,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:s,to:o}=this.skipped[n];s<e.to&&o>e.from&&(this.fragments=JG(this.fragments,s,o),this.skipped.splice(n--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends Dne{createParse(i,n,s){let o=s[0].from,a=s[s.length-1].to;return{parsedPos:o,advance(){let c=V1;if(c){for(let u of s)c.tempSkipped.push(u);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=a,new fs(La.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return V1}}function JG(r,e,i){return kg.applyChanges(r,[{fromA:e,toA:i,fromB:e,toB:i}])}class o_{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,n)||i.takeTree(),new o_(i)}static init(e){let i=Math.min(3e3,e.doc.length),n=BE.create(e.facet(Bp).parser,e,{from:0,to:i});return n.work(20,i)||n.takeTree(),new o_(n)}}Kh.state=lo.define({create:o_.init,update(r,e){for(let i of e.effects)if(i.is(Kh.setState))return i.value;return e.startState.facet(Bp)!=e.state.facet(Bp)?o_.init(e.state):r.apply(e)}});let Fne=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Fne=r=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const SR=typeof navigator<"u"&&(!((OR=navigator.scheduling)===null||OR===void 0)&&OR.isInputPending)?()=>navigator.scheduling.isInputPending():null,R$e=ms.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(Kh.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(Kh.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=Fne(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:s}}=this.view,o=n.field(Kh.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!SR?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<s&&n.doc.length>s+1e3,c=o.context.work(()=>SR&&SR()||Date.now()>a,s+(l?0:1e5));this.chunkBudget-=Date.now()-i,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Kh.setState.of(new o_(o.context))})),this.chunkBudget>0&&!(c&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>Aa(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Bp=Nt.define({combine(r){return r.length?r[0]:null},enables:r=>[Kh.state,R$e,Mt.contentAttributes.compute([r],e=>{let i=e.facet(r);return i&&i.name?{"data-language":i.name}:{}})]});class B$e{constructor(e,i=[]){this.language=e,this.support=i,this.extension=[e,i]}}const D$e=Nt.define(),h6=Nt.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function DE(r){let e=r.facet(h6);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function jw(r,e){let i="",n=r.tabSize,s=r.facet(h6)[0];if(s=="	"){for(;e>=n;)i+="	",e-=n;s=" "}for(let o=0;o<e;o++)i+=s;return i}function c6(r,e){r instanceof wn&&(r=new XP(r));for(let n of r.state.facet(D$e)){let s=n(r,e);if(s!==void 0)return s}let i=Co(r.state);return i.length>=e?L$e(r,i,e):null}class XP{constructor(e,i={}){this.state=e,this.options=i,this.unit=DE(e)}lineAt(e,i=1){let n=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=n.from&&s<=n.to?o&&s==e?{text:"",from:e}:(i<0?s<e:s<=e)?{text:n.text.slice(s-n.from),from:s}:{text:n.text.slice(0,s-n.from),from:n.from}:n}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:s}=this.lineAt(e,i);return n.slice(e-s,Math.min(n.length,e+100-s))}column(e,i=1){let{text:n,from:s}=this.lineAt(e,i),o=this.countColumn(n,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(o+=a-this.countColumn(n,n.search(/\S|$/))),o}countColumn(e,i=e.length){return B_(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:n,from:s}=this.lineAt(e,i),o=this.options.overrideIndentation;if(o){let a=o(s);if(a>-1)return a}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const $ne=new Yi;function L$e(r,e,i){let n=e.resolveStack(i),s=n.node.enterUnfinishedNodesBefore(i);if(s!=n.node){let o=[];for(let a=s;a!=n.node;a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)n={node:o[a],next:n}}return Une(n,r,i)}function Une(r,e,i){for(let n=r;n;n=n.next){let s=V$e(n.node);if(s)return s(u6.create(e,i,n))}return 0}function N$e(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function V$e(r){let e=r.type.prop($ne);if(e)return e;let i=r.firstChild,n;if(i&&(n=i.type.prop(Yi.closedBy))){let s=r.lastChild,o=s&&n.indexOf(s.name)>-1;return a=>zne(a,!0,1,void 0,o&&!N$e(a)?s.from:void 0)}return r.parent==null?F$e:null}function F$e(){return 0}class u6 extends XP{constructor(e,i,n){super(e.state,e.options),this.base=e,this.pos=i,this.context=n}get node(){return this.context.node}static create(e,i,n){return new u6(e,i,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(i.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if($$e(n,e))break;i=this.state.doc.lineAt(n.from)}return this.lineIndent(i.from)}continue(){return Une(this.context.next,this.base,this.pos)}}function $$e(r,e){for(let i=e;i;i=i.parent)if(r==i)return!0;return!1}function U$e(r){let e=r.node,i=e.childAfter(e.from),n=e.lastChild;if(!i)return null;let s=r.options.simulateBreak,o=r.state.doc.lineAt(i.from),a=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let l=i.to;;){let c=e.childAfter(l);if(!c||c==n)return null;if(!c.type.isSkipped)return c.from<a?i:null;l=c.to}}function z$e({closing:r,align:e=!0,units:i=1}){return n=>zne(n,e,i,r)}function zne(r,e,i,n,s){let o=r.textAfter,a=o.match(/^\s*/)[0].length,l=n&&o.slice(a,a+n.length)==n||s==r.pos+a,c=e?U$e(r):null;return c?l?r.column(c.from):r.column(c.to):r.baseIndent+(l?0:r.unit*i)}const X$e=r=>r.baseIndent;function CR({except:r,units:e=1}={}){return i=>{let n=r&&r.test(i.textAfter);return i.baseIndent+(n?0:e*i.unit)}}const W$e=200;function G$e(){return wn.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let i=r.newDoc,{head:n}=r.newSelection.main,s=i.lineAt(n);if(n>s.from+W$e)return r;let o=i.sliceString(s.from,n);if(!e.some(u=>u.test(o)))return r;let{state:a}=r,l=-1,c=[];for(let{head:u}of a.selection.ranges){let d=a.doc.lineAt(u);if(d.from==l)continue;l=d.from;let p=c6(a,d.from);if(p==null)continue;let m=/^\s*/.exec(d.text)[0],g=jw(a,p);m!=g&&c.push({from:d.from,to:d.from+m.length,insert:g})}return c.length?[r,{changes:c,sequential:!0}]:r})}const H$e=Nt.define(),Xne=new Yi;function Q$e(r){let e=r.firstChild,i=r.lastChild;return e&&e.to<i.from?{from:e.to,to:i.type.isError?r.to:i.from}:null}function j$e(r,e,i){let n=Co(r);if(n.length<i)return null;let s=n.resolveStack(i,1),o=null;for(let a=s;a;a=a.next){let l=a.node;if(l.to<=i||l.from>i)continue;if(o&&l.from<e)break;let c=l.type.prop(Xne);if(c&&(l.to<n.length-50||n.length==r.doc.length||!Y$e(l))){let u=c(l,r);u&&u.from<=i&&u.from>=e&&u.to>i&&(o=u)}}return o}function Y$e(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function LE(r,e,i){for(let n of r.facet(H$e)){let s=n(r,e,i);if(s)return s}return j$e(r,e,i)}function Wne(r,e){let i=e.mapPos(r.from,1),n=e.mapPos(r.to,-1);return i>=n?void 0:{from:i,to:n}}const WP=Hi.define({map:Wne}),oS=Hi.define({map:Wne});function Gne(r){let e=[];for(let{head:i}of r.state.selection.ranges)e.some(n=>n.from<=i&&n.to>=i)||e.push(r.lineBlockAt(i));return e}const n0=lo.define({create(){return vi.none},update(r,e){r=r.map(e.changes);for(let i of e.effects)if(i.is(WP)&&!q$e(r,i.value.from,i.value.to)){let{preparePlaceholder:n}=e.state.facet(jne),s=n?vi.replace({widget:new nUe(n(e.state,i.value))}):eH;r=r.update({add:[s.range(i.value.from,i.value.to)]})}else i.is(oS)&&(r=r.update({filter:(n,s)=>i.value.from!=n||i.value.to!=s,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:n}=e.selection.main;r.between(n,n,(s,o)=>{s<n&&o>n&&(i=!0)}),i&&(r=r.update({filterFrom:n,filterTo:n,filter:(s,o)=>o<=n||s>=n}))}return r},provide:r=>Mt.decorations.from(r),toJSON(r,e){let i=[];return r.between(0,e.doc.length,(n,s)=>{i.push(n,s)}),i},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<r.length;){let n=r[i++],s=r[i++];if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(eH.range(n,s))}return vi.set(e,!0)}});function NE(r,e,i){var n;let s=null;return(n=r.field(n0,!1))===null||n===void 0||n.between(e,i,(o,a)=>{(!s||s.from>o)&&(s={from:o,to:a})}),s}function q$e(r,e,i){let n=!1;return r.between(e,e,(s,o)=>{s==e&&o==i&&(n=!0)}),n}function Hne(r,e){return r.field(n0,!1)?e:e.concat(Hi.appendConfig.of(Yne()))}const Z$e=r=>{for(let e of Gne(r)){let i=LE(r.state,e.from,e.to);if(i)return r.dispatch({effects:Hne(r.state,[WP.of(i),Qne(r,i)])}),!0}return!1},K$e=r=>{if(!r.state.field(n0,!1))return!1;let e=[];for(let i of Gne(r)){let n=NE(r.state,i.from,i.to);n&&e.push(oS.of(n),Qne(r,n,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function Qne(r,e,i=!0){let n=r.state.doc.lineAt(e.from).number,s=r.state.doc.lineAt(e.to).number;return Mt.announce.of(`${r.state.phrase(i?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${s}.`)}const J$e=r=>{let{state:e}=r,i=[];for(let n=0;n<e.doc.length;){let s=r.lineBlockAt(n),o=LE(e,s.from,s.to);o&&i.push(WP.of(o)),n=(o?r.lineBlockAt(o.to):s).to+1}return i.length&&r.dispatch({effects:Hne(r.state,i)}),!!i.length},eUe=r=>{let e=r.state.field(n0,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,r.state.doc.length,(n,s)=>{i.push(oS.of({from:n,to:s}))}),r.dispatch({effects:i}),!0},tUe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Z$e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:K$e},{key:"Ctrl-Alt-[",run:J$e},{key:"Ctrl-Alt-]",run:eUe}],iUe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},jne=Nt.define({combine(r){return wu(r,iUe)}});function Yne(r){return[n0,oUe]}function qne(r,e){let{state:i}=r,n=i.facet(jne),s=a=>{let l=r.lineBlockAt(r.posAtDOM(a.target)),c=NE(r.state,l.from,l.to);c&&r.dispatch({effects:oS.of(c)}),a.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(r,s,e);let o=document.createElement("span");return o.textContent=n.placeholderText,o.setAttribute("aria-label",i.phrase("folded code")),o.title=i.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const eH=vi.replace({widget:new class extends jp{toDOM(r){return qne(r,null)}}});class nUe extends jp{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return qne(e,this.value)}}const rUe={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class TR extends Dd{constructor(e,i){super(),this.config=e,this.open=i}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=e.state.phrase(this.open?"Fold line":"Unfold line"),i}}function sUe(r={}){let e=Object.assign(Object.assign({},rUe),r),i=new TR(e,!0),n=new TR(e,!1),s=ms.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Bp)!=a.state.facet(Bp)||a.startState.field(n0,!1)!=a.state.field(n0,!1)||Co(a.startState)!=Co(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new Ep;for(let c of a.viewportLineBlocks){let u=NE(a.state,c.from,c.to)?n:LE(a.state,c.from,c.to)?i:null;u&&l.add(c.from,c.from,u)}return l.finish()}}),{domEventHandlers:o}=e;return[s,r$e({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(s))===null||l===void 0?void 0:l.markers)||_n.empty},initialSpacer(){return new TR(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,l,c)=>{if(o.click&&o.click(a,l,c))return!0;let u=NE(a.state,l.from,l.to);if(u)return a.dispatch({effects:oS.of(u)}),!0;let d=LE(a.state,l.from,l.to);return d?(a.dispatch({effects:WP.of(d)}),!0):!1}})}),Yne()]}const oUe=Mt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class GP{constructor(e,i){this.specs=e;let n;function s(l){let c=Mp.newName();return(n||(n=Object.create(null)))["."+c]=l,c}const o=typeof i.all=="string"?i.all:i.all?s(i.all):void 0,a=i.scope;this.scope=a instanceof Kh?l=>l.prop(iy)==a.data:a?l=>l==a:void 0,this.style=Vne(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=n?new Mp(n):null,this.themeType=i.themeType}static define(e,i){return new GP(e,i||{})}}const hD=Nt.define(),Zne=Nt.define({combine(r){return r.length?[r[0]]:null}});function AR(r){let e=r.facet(hD);return e.length?e:r.facet(Zne)}function aUe(r,e){let i=[hUe],n;return r instanceof GP&&(r.module&&i.push(Mt.styleModule.of(r.module)),n=r.themeType),e!=null&&e.fallback?i.push(Zne.of(r)):n?i.push(hD.computeN([Mt.darkTheme],s=>s.facet(Mt.darkTheme)==(n=="dark")?[r]:[])):i.push(hD.of(r)),i}class lUe{constructor(e){this.markCache=Object.create(null),this.tree=Co(e.state),this.decorations=this.buildDeco(e,AR(e.state)),this.decoratedTo=e.viewport.to}update(e){let i=Co(e.state),n=AR(e.state),s=n!=AR(e.startState),{viewport:o}=e.view,a=e.changes.mapPos(this.decoratedTo,1);i.length<o.to&&!s&&i.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(i!=this.tree||e.viewportChanged||s)&&(this.tree=i,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=o.to)}buildDeco(e,i){if(!i||!this.tree.length)return vi.none;let n=new Ep;for(let{from:s,to:o}of e.visibleRanges)A$e(this.tree,i,(a,l,c)=>{n.add(a,l,this.markCache[c]||(this.markCache[c]=vi.mark({class:c})))},s,o);return n.finish()}}const hUe=_0.high(ms.fromClass(lUe,{decorations:r=>r.decorations})),cUe=GP.define([{tag:Ye.meta,color:"#404740"},{tag:Ye.link,textDecoration:"underline"},{tag:Ye.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ye.emphasis,fontStyle:"italic"},{tag:Ye.strong,fontWeight:"bold"},{tag:Ye.strikethrough,textDecoration:"line-through"},{tag:Ye.keyword,color:"#708"},{tag:[Ye.atom,Ye.bool,Ye.url,Ye.contentSeparator,Ye.labelName],color:"#219"},{tag:[Ye.literal,Ye.inserted],color:"#164"},{tag:[Ye.string,Ye.deleted],color:"#a11"},{tag:[Ye.regexp,Ye.escape,Ye.special(Ye.string)],color:"#e40"},{tag:Ye.definition(Ye.variableName),color:"#00f"},{tag:Ye.local(Ye.variableName),color:"#30a"},{tag:[Ye.typeName,Ye.namespace],color:"#085"},{tag:Ye.className,color:"#167"},{tag:[Ye.special(Ye.variableName),Ye.macroName],color:"#256"},{tag:Ye.definition(Ye.propertyName),color:"#00c"},{tag:Ye.comment,color:"#940"},{tag:Ye.invalid,color:"#f00"}]),uUe=Mt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Kne=1e4,Jne="()[]{}",ere=Nt.define({combine(r){return wu(r,{afterCursor:!0,brackets:Jne,maxScanDistance:Kne,renderMatch:pUe})}}),dUe=vi.mark({class:"cm-matchingBracket"}),fUe=vi.mark({class:"cm-nonmatchingBracket"});function pUe(r){let e=[],i=r.matched?dUe:fUe;return e.push(i.range(r.start.from,r.start.to)),r.end&&e.push(i.range(r.end.from,r.end.to)),e}const mUe=lo.define({create(){return vi.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let i=[],n=e.state.facet(ere);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=Zc(e.state,s.head,-1,n)||s.head>0&&Zc(e.state,s.head-1,1,n)||n.afterCursor&&(Zc(e.state,s.head,1,n)||s.head<e.state.doc.length&&Zc(e.state,s.head+1,-1,n));o&&(i=i.concat(n.renderMatch(o,e.state)))}return vi.set(i,!0)},provide:r=>Mt.decorations.from(r)}),gUe=[mUe,uUe];function vUe(r={}){return[ere.of(r),gUe]}const yUe=new Yi;function cD(r,e,i){let n=r.prop(e<0?Yi.openedBy:Yi.closedBy);if(n)return n;if(r.name.length==1){let s=i.indexOf(r.name);if(s>-1&&s%2==(e<0?1:0))return[i[s+e]]}return null}function uD(r){let e=r.type.prop(yUe);return e?e(r.node):r}function Zc(r,e,i,n={}){let s=n.maxScanDistance||Kne,o=n.brackets||Jne,a=Co(r),l=a.resolveInner(e,i);for(let c=l;c;c=c.parent){let u=cD(c.type,i,o);if(u&&c.from<c.to){let d=uD(c);if(d&&(i>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return _Ue(r,e,i,c,d,u,o)}}return xUe(r,e,i,a,l.type,s,o)}function _Ue(r,e,i,n,s,o,a){let l=n.parent,c={from:s.from,to:s.to},u=0,d=l==null?void 0:l.cursor();if(d&&(i<0?d.childBefore(n.from):d.childAfter(n.to)))do if(i<0?d.to<=n.from:d.from>=n.to){if(u==0&&o.indexOf(d.type.name)>-1&&d.from<d.to){let p=uD(d);return{start:c,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(cD(d.type,i,a))u++;else if(cD(d.type,-i,a)){if(u==0){let p=uD(d);return{start:c,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}u--}}while(i<0?d.prevSibling():d.nextSibling());return{start:c,matched:!1}}function xUe(r,e,i,n,s,o,a){let l=i<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),c=a.indexOf(l);if(c<0||c%2==0!=i>0)return null;let u={from:i<0?e-1:e,to:i>0?e+1:e},d=r.doc.iterRange(e,i>0?r.doc.length:0),p=0;for(let m=0;!d.next().done&&m<=o;){let g=d.value;i<0&&(m+=g.length);let y=e+m*i;for(let _=i>0?0:g.length-1,x=i>0?g.length:-1;_!=x;_+=i){let O=a.indexOf(g[_]);if(!(O<0||n.resolveInner(y+_,1).type!=s))if(O%2==0==i>0)p++;else{if(p==1)return{start:u,end:{from:y+_,to:y+_+1},matched:O>>1==c>>1};p--}}i>0&&(m+=g.length)}return d.done?{start:u,matched:!1}:null}const bUe=Object.create(null),tH=[La.none],iH=[],nH=Object.create(null),wUe=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])wUe[r]=OUe(bUe,e);function ER(r,e){iH.indexOf(r)>-1||(iH.push(r),console.warn(e))}function OUe(r,e){let i=[];for(let l of e.split(" ")){let c=[];for(let u of l.split(".")){let d=r[u]||Ye[u];d?typeof d=="function"?c.length?c=c.map(d):ER(u,`Modifier ${u} used at start of tag`):c.length?ER(u,`Tag ${u} used as modifier`):c=Array.isArray(d)?d:[d]:ER(u,`Unknown highlighting tag ${u}`)}for(let u of c)i.push(u)}if(!i.length)return 0;let n=e.replace(/ /g,"_"),s=n+" "+i.map(l=>l.id),o=nH[s];if(o)return o.id;let a=nH[s]=La.define({id:tH.length,name:n,props:[Lne({[n]:i})]});return tH.push(a),a.id}ur.RTL,ur.LTR;const SUe=r=>{let{state:e}=r,i=e.doc.lineAt(e.selection.main.from),n=f6(r.state,i.from);return n.line?CUe(r):n.block?AUe(r):!1};function d6(r,e){return({state:i,dispatch:n})=>{if(i.readOnly)return!1;let s=r(e,i);return s?(n(i.update(s)),!0):!1}}const CUe=d6(PUe,0),TUe=d6(tre,0),AUe=d6((r,e)=>tre(r,e,MUe(e)),0);function f6(r,e){let i=r.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const F1=50;function EUe(r,{open:e,close:i},n,s){let o=r.sliceDoc(n-F1,n),a=r.sliceDoc(s,s+F1),l=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(a)[0].length,u=o.length-l;if(o.slice(u-e.length,u)==e&&a.slice(c,c+i.length)==i)return{open:{pos:n-l,margin:l&&1},close:{pos:s+c,margin:c&&1}};let d,p;s-n<=2*F1?d=p=r.sliceDoc(n,s):(d=r.sliceDoc(n,n+F1),p=r.sliceDoc(s-F1,s));let m=/^\s*/.exec(d)[0].length,g=/\s*$/.exec(p)[0].length,y=p.length-g-i.length;return d.slice(m,m+e.length)==e&&p.slice(y,y+i.length)==i?{open:{pos:n+m+e.length,margin:/\s/.test(d.charAt(m+e.length))?1:0},close:{pos:s-g-i.length,margin:/\s/.test(p.charAt(y-1))?1:0}}:null}function MUe(r){let e=[];for(let i of r.selection.ranges){let n=r.doc.lineAt(i.from),s=i.to<=n.to?n:r.doc.lineAt(i.to),o=e.length-1;o>=0&&e[o].to>n.from?e[o].to=s.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:s.to})}return e}function tre(r,e,i=e.selection.ranges){let n=i.map(o=>f6(e,o.from).block);if(!n.every(o=>o))return null;let s=i.map((o,a)=>EUe(e,n[a],o.from,o.to));if(r!=2&&!s.every(o=>o))return{changes:e.changes(i.map((o,a)=>s[a]?[]:[{from:o.from,insert:n[a].open+" "},{from:o.to,insert:" "+n[a].close}]))};if(r!=1&&s.some(o=>o)){let o=[];for(let a=0,l;a<s.length;a++)if(l=s[a]){let c=n[a],{open:u,close:d}=l;o.push({from:u.pos-c.open.length,to:u.pos+u.margin},{from:d.pos-d.margin,to:d.pos+c.close.length})}return{changes:o}}return null}function PUe(r,e,i=e.selection.ranges){let n=[],s=-1;for(let{from:o,to:a}of i){let l=n.length,c=1e9,u=f6(e,o).line;if(u){for(let d=o;d<=a;){let p=e.doc.lineAt(d);if(p.from>s&&(o==a||a>p.from)){s=p.from;let m=/^\s*/.exec(p.text)[0].length,g=m==p.length,y=p.text.slice(m,m+u.length)==u?m:-1;m<p.text.length&&m<c&&(c=m),n.push({line:p,comment:y,token:u,indent:m,empty:g,single:!1})}d=p.to+1}if(c<1e9)for(let d=l;d<n.length;d++)n[d].indent<n[d].line.text.length&&(n[d].indent=c);n.length==l+1&&(n[l].single=!0)}}if(r!=2&&n.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:c,indent:u,empty:d,single:p}of n)(p||!d)&&o.push({from:l.from+u,insert:c+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(r!=1&&n.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:l,token:c}of n)if(l>=0){let u=a.from+l,d=u+c.length;a.text[d-a.from]==" "&&d++,o.push({from:u,to:d})}return{changes:o}}return null}const dD=Gd.define(),kUe=Gd.define(),IUe=Nt.define(),ire=Nt.define({combine(r){return wu(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(n,s)=>e(n,s)||i(n,s)})}}),nre=lo.define({create(){return Kc.empty},update(r,e){let i=e.state.facet(ire),n=e.annotation(dD);if(n){let c=Ea.fromTransaction(e,n.selection),u=n.side,d=u==0?r.undone:r.done;return c?d=VE(d,d.length,i.minDepth,c):d=ore(d,e.startState.selection),new Kc(u==0?n.rest:d,u==0?d:n.rest)}let s=e.annotation(kUe);if((s=="full"||s=="before")&&(r=r.isolate()),e.annotation(As.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let o=Ea.fromTransaction(e),a=e.annotation(As.time),l=e.annotation(As.userEvent);return o?r=r.addChanges(o,a,l,i,e):e.selection&&(r=r.addSelection(e.startState.selection,a,l,i.newGroupDelay)),(s=="full"||s=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new Kc(r.done.map(Ea.fromJSON),r.undone.map(Ea.fromJSON))}});function RUe(r={}){return[nre,ire.of(r),Mt.domEventHandlers({beforeinput(e,i){let n=e.inputType=="historyUndo"?rre:e.inputType=="historyRedo"?fD:null;return n?(e.preventDefault(),n(i)):!1}})]}function HP(r,e){return function({state:i,dispatch:n}){if(!e&&i.readOnly)return!1;let s=i.field(nre,!1);if(!s)return!1;let o=s.pop(r,i,e);return o?(n(o),!0):!1}}const rre=HP(0,!1),fD=HP(1,!1),BUe=HP(0,!0),DUe=HP(1,!0);class Ea{constructor(e,i,n,s,o){this.changes=e,this.effects=i,this.mapped=n,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new Ea(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Ea(e.changes&&ws.fromJSON(e.changes),[],e.mapped&&su.fromJSON(e.mapped),e.startSelection&&nt.fromJSON(e.startSelection),e.selectionsAfter.map(nt.fromJSON))}static fromTransaction(e,i){let n=ah;for(let s of e.startState.facet(IUe)){let o=s(e);o.length&&(n=n.concat(o))}return!n.length&&e.changes.empty?null:new Ea(e.changes.invert(e.startState.doc),n,void 0,i||e.startState.selection,ah)}static selection(e){return new Ea(void 0,ah,void 0,void 0,e)}}function VE(r,e,i,n){let s=e+1>i+20?e-i-1:0,o=r.slice(s,e);return o.push(n),o}function LUe(r,e){let i=[],n=!1;return r.iterChangedRanges((s,o)=>i.push(s,o)),e.iterChangedRanges((s,o,a,l)=>{for(let c=0;c<i.length;){let u=i[c++],d=i[c++];l>=u&&a<=d&&(n=!0)}}),n}function NUe(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((i,n)=>i.empty!=e.ranges[n].empty).length===0}function sre(r,e){return r.length?e.length?r.concat(e):r:e}const ah=[],VUe=200;function ore(r,e){if(r.length){let i=r[r.length-1],n=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-VUe));return n.length&&n[n.length-1].eq(e)?r:(n.push(e),VE(r,r.length-1,1e9,i.setSelAfter(n)))}else return[Ea.selection([e])]}function FUe(r){let e=r[r.length-1],i=r.slice();return i[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function MR(r,e){if(!r.length)return r;let i=r.length,n=ah;for(;i;){let s=$Ue(r[i-1],e,n);if(s.changes&&!s.changes.empty||s.effects.length){let o=r.slice(0,i);return o[i-1]=s,o}else e=s.mapped,i--,n=s.selectionsAfter}return n.length?[Ea.selection(n)]:ah}function $Ue(r,e,i){let n=sre(r.selectionsAfter.length?r.selectionsAfter.map(l=>l.map(e)):ah,i);if(!r.changes)return Ea.selection(n);let s=r.changes.map(e),o=e.mapDesc(r.changes,!0),a=r.mapped?r.mapped.composeDesc(o):o;return new Ea(s,Hi.mapEffects(r.effects,e),a,r.startSelection.map(o),n)}const UUe=/^(input\.type|delete)($|\.)/;class Kc{constructor(e,i,n=0,s=void 0){this.done=e,this.undone=i,this.prevTime=n,this.prevUserEvent=s}isolate(){return this.prevTime?new Kc(this.done,this.undone):this}addChanges(e,i,n,s,o){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||UUe.test(n))&&(!l.selectionsAfter.length&&i-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,LUe(l.changes,e.changes))||n=="input.type.compose")?a=VE(a,a.length-1,s.minDepth,new Ea(e.changes.compose(l.changes),sre(Hi.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,ah)):a=VE(a,a.length,s.minDepth,e),new Kc(a,ah,i,n)}addSelection(e,i,n,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ah;return o.length>0&&i-this.prevTime<s&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&NUe(o[o.length-1],e)?this:new Kc(ore(this.done,e),this.undone,i,n)}addMapping(e){return new Kc(MR(this.done,e),MR(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,n){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],a=o.selectionsAfter[0]||i.selection;if(n&&o.selectionsAfter.length)return i.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:dD.of({side:e,rest:FUe(s),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=s.length==1?ah:s.slice(0,s.length-1);return o.mapped&&(l=MR(l,o.mapped)),i.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:dD.of({side:e,rest:l,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Kc.empty=new Kc(ah,ah);const zUe=[{key:"Mod-z",run:rre,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fD,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fD,preventDefault:!0},{key:"Mod-u",run:BUe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:DUe,preventDefault:!0}];function D_(r,e){return nt.create(r.ranges.map(e),r.mainIndex)}function Ou(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function pc({state:r,dispatch:e},i){let n=D_(r.selection,i);return n.eq(r.selection,!0)?!1:(e(Ou(r,n)),!0)}function QP(r,e){return nt.cursor(e?r.to:r.from)}function are(r,e){return pc(r,i=>i.empty?r.moveByChar(i,e):QP(i,e))}function ko(r){return r.textDirectionAt(r.state.selection.main.head)==ur.LTR}const lre=r=>are(r,!ko(r)),hre=r=>are(r,ko(r));function cre(r,e){return pc(r,i=>i.empty?r.moveByGroup(i,e):QP(i,e))}const XUe=r=>cre(r,!ko(r)),WUe=r=>cre(r,ko(r));function GUe(r,e,i){if(e.type.prop(i))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function jP(r,e,i){let n=Co(r).resolveInner(e.head),s=i?Yi.closedBy:Yi.openedBy;for(let c=e.head;;){let u=i?n.childAfter(c):n.childBefore(c);if(!u)break;GUe(r,u,s)?n=u:c=i?u.to:u.from}let o=n.type.prop(s),a,l;return o&&(a=i?Zc(r,n.from,1):Zc(r,n.to,-1))&&a.matched?l=i?a.end.to:a.end.from:l=i?n.to:n.from,nt.cursor(l,i?-1:1)}const HUe=r=>pc(r,e=>jP(r.state,e,!ko(r))),QUe=r=>pc(r,e=>jP(r.state,e,ko(r)));function ure(r,e){return pc(r,i=>{if(!i.empty)return QP(i,e);let n=r.moveVertically(i,e);return n.head!=i.head?n:r.moveToLineBoundary(i,e)})}const dre=r=>ure(r,!1),fre=r=>ure(r,!0);function pre(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,i=0,n=0,s;if(e){for(let o of r.state.facet(Mt.scrollMargins)){let a=o(r);a!=null&&a.top&&(i=Math.max(a==null?void 0:a.top,i)),a!=null&&a.bottom&&(n=Math.max(a==null?void 0:a.bottom,n))}s=r.scrollDOM.clientHeight-i-n}else s=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:n,selfScroll:e,height:Math.max(r.defaultLineHeight,s-5)}}function mre(r,e){let i=pre(r),{state:n}=r,s=D_(n.selection,a=>a.empty?r.moveVertically(a,e,i.height):QP(a,e));if(s.eq(n.selection))return!1;let o;if(i.selfScroll){let a=r.coordsAtPos(n.selection.main.head),l=r.scrollDOM.getBoundingClientRect(),c=l.top+i.marginTop,u=l.bottom-i.marginBottom;a&&a.top>c&&a.bottom<u&&(o=Mt.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-c}))}return r.dispatch(Ou(n,s),{effects:o}),!0}const rH=r=>mre(r,!1),pD=r=>mre(r,!0);function Yp(r,e,i){let n=r.lineBlockAt(e.head),s=r.moveToLineBoundary(e,i);if(s.head==e.head&&s.head!=(i?n.to:n.from)&&(s=r.moveToLineBoundary(e,i,!1)),!i&&s.head==n.from&&n.length){let o=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;o&&e.head!=n.from+o&&(s=nt.cursor(n.from+o))}return s}const jUe=r=>pc(r,e=>Yp(r,e,!0)),YUe=r=>pc(r,e=>Yp(r,e,!1)),qUe=r=>pc(r,e=>Yp(r,e,!ko(r))),ZUe=r=>pc(r,e=>Yp(r,e,ko(r))),KUe=r=>pc(r,e=>nt.cursor(r.lineBlockAt(e.head).from,1)),JUe=r=>pc(r,e=>nt.cursor(r.lineBlockAt(e.head).to,-1));function e8e(r,e,i){let n=!1,s=D_(r.selection,o=>{let a=Zc(r,o.head,-1)||Zc(r,o.head,1)||o.head>0&&Zc(r,o.head-1,1)||o.head<r.doc.length&&Zc(r,o.head+1,-1);if(!a||!a.end)return o;n=!0;let l=a.start.from==o.head?a.end.to:a.end.from;return nt.cursor(l)});return n?(e(Ou(r,s)),!0):!1}const t8e=({state:r,dispatch:e})=>e8e(r,e);function wh(r,e){let i=D_(r.state.selection,n=>{let s=e(n);return nt.range(n.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return i.eq(r.state.selection)?!1:(r.dispatch(Ou(r.state,i)),!0)}function gre(r,e){return wh(r,i=>r.moveByChar(i,e))}const vre=r=>gre(r,!ko(r)),yre=r=>gre(r,ko(r));function _re(r,e){return wh(r,i=>r.moveByGroup(i,e))}const i8e=r=>_re(r,!ko(r)),n8e=r=>_re(r,ko(r)),r8e=r=>wh(r,e=>jP(r.state,e,!ko(r))),s8e=r=>wh(r,e=>jP(r.state,e,ko(r)));function xre(r,e){return wh(r,i=>r.moveVertically(i,e))}const bre=r=>xre(r,!1),wre=r=>xre(r,!0);function Ore(r,e){return wh(r,i=>r.moveVertically(i,e,pre(r).height))}const sH=r=>Ore(r,!1),oH=r=>Ore(r,!0),o8e=r=>wh(r,e=>Yp(r,e,!0)),a8e=r=>wh(r,e=>Yp(r,e,!1)),l8e=r=>wh(r,e=>Yp(r,e,!ko(r))),h8e=r=>wh(r,e=>Yp(r,e,ko(r))),c8e=r=>wh(r,e=>nt.cursor(r.lineBlockAt(e.head).from)),u8e=r=>wh(r,e=>nt.cursor(r.lineBlockAt(e.head).to)),aH=({state:r,dispatch:e})=>(e(Ou(r,{anchor:0})),!0),lH=({state:r,dispatch:e})=>(e(Ou(r,{anchor:r.doc.length})),!0),hH=({state:r,dispatch:e})=>(e(Ou(r,{anchor:r.selection.main.anchor,head:0})),!0),cH=({state:r,dispatch:e})=>(e(Ou(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),d8e=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),f8e=({state:r,dispatch:e})=>{let i=YP(r).map(({from:n,to:s})=>nt.range(n,Math.min(s+1,r.doc.length)));return e(r.update({selection:nt.create(i),userEvent:"select"})),!0},p8e=({state:r,dispatch:e})=>{let i=D_(r.selection,n=>{var s;let o=Co(r).resolveStack(n.from,1);for(let a=o;a;a=a.next){let{node:l}=a;if((l.from<n.from&&l.to>=n.to||l.to>n.to&&l.from<=n.from)&&(!((s=l.parent)===null||s===void 0)&&s.parent))return nt.range(l.to,l.from)}return n});return e(Ou(r,i)),!0},m8e=({state:r,dispatch:e})=>{let i=r.selection,n=null;return i.ranges.length>1?n=nt.create([i.main]):i.main.empty||(n=nt.create([nt.cursor(i.main.head)])),n?(e(Ou(r,n)),!0):!1};function aS(r,e){if(r.state.readOnly)return!1;let i="delete.selection",{state:n}=r,s=n.changeByRange(o=>{let{from:a,to:l}=o;if(a==l){let c=e(o);c<a?(i="delete.backward",c=q2(r,c,!1)):c>a&&(i="delete.forward",c=q2(r,c,!0)),a=Math.min(a,c),l=Math.max(l,c)}else a=q2(r,a,!1),l=q2(r,l,!0);return a==l?{range:o}:{changes:{from:a,to:l},range:nt.cursor(a,a<o.head?-1:1)}});return s.changes.empty?!1:(r.dispatch(n.update(s,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?Mt.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function q2(r,e,i){if(r instanceof Mt)for(let n of r.state.facet(Mt.atomicRanges).map(s=>s(r)))n.between(e,e,(s,o)=>{s<e&&o>e&&(e=i?o:s)});return e}const Sre=(r,e,i)=>aS(r,n=>{let s=n.from,{state:o}=r,a=o.doc.lineAt(s),l,c;if(i&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(l=a.text.slice(0,s-a.from))){if(l[l.length-1]=="	")return s-1;let u=B_(l,o.tabSize),d=u%DE(o)||DE(o);for(let p=0;p<d&&l[l.length-1-p]==" ";p++)s--;c=s}else c=no(a.text,s-a.from,e,e)+a.from,c==s&&a.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(c-a.from,s-a.from))&&(c=no(a.text,c-a.from,!1,!1)+a.from);return c}),mD=r=>Sre(r,!1,!0),Cre=r=>Sre(r,!0,!1),Tre=(r,e)=>aS(r,i=>{let n=i.head,{state:s}=r,o=s.doc.lineAt(n),a=s.charCategorizer(n);for(let l=null;;){if(n==(e?o.to:o.from)){n==i.head&&o.number!=(e?s.doc.lines:1)&&(n+=e?1:-1);break}let c=no(o.text,n-o.from,e)+o.from,u=o.text.slice(Math.min(n,c)-o.from,Math.max(n,c)-o.from),d=a(u);if(l!=null&&d!=l)break;(u!=" "||n!=i.head)&&(l=d),n=c}return n}),Are=r=>Tre(r,!1),g8e=r=>Tre(r,!0),v8e=r=>aS(r,e=>{let i=r.lineBlockAt(e.head).to;return e.head<i?i:Math.min(r.state.doc.length,e.head+1)}),y8e=r=>aS(r,e=>{let i=r.moveToLineBoundary(e,!1).head;return e.head>i?i:Math.max(0,e.head-1)}),_8e=r=>aS(r,e=>{let i=r.moveToLineBoundary(e,!0).head;return e.head<i?i:Math.min(r.state.doc.length,e.head+1)}),x8e=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Rn.of(["",""])},range:nt.cursor(n.from)}));return e(r.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},b8e=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let s=n.from,o=r.doc.lineAt(s),a=s==o.from?s-1:no(o.text,s-o.from,!1)+o.from,l=s==o.to?s+1:no(o.text,s-o.from,!0)+o.from;return{changes:{from:a,to:l,insert:r.doc.slice(s,l).append(r.doc.slice(a,s))},range:nt.cursor(l)}});return i.changes.empty?!1:(e(r.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function YP(r){let e=[],i=-1;for(let n of r.selection.ranges){let s=r.doc.lineAt(n.from),o=r.doc.lineAt(n.to);if(!n.empty&&n.to==o.from&&(o=r.doc.lineAt(n.to-1)),i>=s.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(n)}else e.push({from:s.from,to:o.to,ranges:[n]});i=o.number+1}return e}function Ere(r,e,i){if(r.readOnly)return!1;let n=[],s=[];for(let o of YP(r)){if(i?o.to==r.doc.length:o.from==0)continue;let a=r.doc.lineAt(i?o.to+1:o.from-1),l=a.length+1;if(i){n.push({from:o.to,to:a.to},{from:o.from,insert:a.text+r.lineBreak});for(let c of o.ranges)s.push(nt.range(Math.min(r.doc.length,c.anchor+l),Math.min(r.doc.length,c.head+l)))}else{n.push({from:a.from,to:o.from},{from:o.to,insert:r.lineBreak+a.text});for(let c of o.ranges)s.push(nt.range(c.anchor-l,c.head-l))}}return n.length?(e(r.update({changes:n,scrollIntoView:!0,selection:nt.create(s,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const w8e=({state:r,dispatch:e})=>Ere(r,e,!1),O8e=({state:r,dispatch:e})=>Ere(r,e,!0);function Mre(r,e,i){if(r.readOnly)return!1;let n=[];for(let s of YP(r))i?n.push({from:s.from,insert:r.doc.slice(s.from,s.to)+r.lineBreak}):n.push({from:s.to,insert:r.lineBreak+r.doc.slice(s.from,s.to)});return e(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const S8e=({state:r,dispatch:e})=>Mre(r,e,!1),C8e=({state:r,dispatch:e})=>Mre(r,e,!0),T8e=r=>{if(r.state.readOnly)return!1;let{state:e}=r,i=e.changes(YP(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),n=D_(e.selection,s=>{let o;if(r.lineWrapping){let a=r.lineBlockAt(s.head),l=r.coordsAtPos(s.head,s.assoc||1);l&&(o=a.bottom+r.documentTop-l.bottom+r.defaultLineHeight/2)}return r.moveVertically(s,!0,o)}).map(i);return r.dispatch({changes:i,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function A8e(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=Co(r).resolveInner(e),n=i.childBefore(e),s=i.childAfter(e),o;return n&&s&&n.to<=e&&s.from>=e&&(o=n.type.prop(Yi.closedBy))&&o.indexOf(s.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(s.from).from&&!/\S/.test(r.sliceDoc(n.to,s.from))?{from:n.to,to:s.from}:null}const E8e=Pre(!1),M8e=Pre(!0);function Pre(r){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let n=e.changeByRange(s=>{let{from:o,to:a}=s,l=e.doc.lineAt(o),c=!r&&o==a&&A8e(e,o);r&&(o=a=(a<=l.to?l:e.doc.lineAt(a)).to);let u=new XP(e,{simulateBreak:o,simulateDoubleBreak:!!c}),d=c6(u,o);for(d==null&&(d=B_(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;c?{from:o,to:a}=c:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let p=["",jw(e,d)];return c&&p.push(jw(e,u.lineIndent(l.from,-1))),{changes:{from:o,to:a,insert:Rn.of(p)},range:nt.cursor(o+1+p[1].length)}});return i(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function p6(r,e){let i=-1;return r.changeByRange(n=>{let s=[];for(let a=n.from;a<=n.to;){let l=r.doc.lineAt(a);l.number>i&&(n.empty||n.to>l.from)&&(e(l,s,n),i=l.number),a=l.to+1}let o=r.changes(s);return{changes:s,range:nt.range(o.mapPos(n.anchor,1),o.mapPos(n.head,1))}})}const P8e=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=Object.create(null),n=new XP(r,{overrideIndentation:o=>{let a=i[o];return a??-1}}),s=p6(r,(o,a,l)=>{let c=c6(n,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let u=/^\s*/.exec(o.text)[0],d=jw(r,c);(u!=d||l.from<o.from+u.length)&&(i[o.from]=c,a.push({from:o.from,to:o.from+u.length,insert:d}))});return s.changes.empty||e(r.update(s,{userEvent:"indent"})),!0},k8e=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(p6(r,(i,n)=>{n.push({from:i.from,insert:r.facet(h6)})}),{userEvent:"input.indent"})),!0),I8e=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(p6(r,(i,n)=>{let s=/^\s*/.exec(i.text)[0];if(!s)return;let o=B_(s,r.tabSize),a=0,l=jw(r,Math.max(0,o-DE(r)));for(;a<s.length&&a<l.length&&s.charCodeAt(a)==l.charCodeAt(a);)a++;n.push({from:i.from+a,to:i.from+s.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),R8e=r=>(r.setTabFocusMode(),!0),B8e=[{key:"Ctrl-b",run:lre,shift:vre,preventDefault:!0},{key:"Ctrl-f",run:hre,shift:yre},{key:"Ctrl-p",run:dre,shift:bre},{key:"Ctrl-n",run:fre,shift:wre},{key:"Ctrl-a",run:KUe,shift:c8e},{key:"Ctrl-e",run:JUe,shift:u8e},{key:"Ctrl-d",run:Cre},{key:"Ctrl-h",run:mD},{key:"Ctrl-k",run:v8e},{key:"Ctrl-Alt-h",run:Are},{key:"Ctrl-o",run:x8e},{key:"Ctrl-t",run:b8e},{key:"Ctrl-v",run:pD}],D8e=[{key:"ArrowLeft",run:lre,shift:vre,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:XUe,shift:i8e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:qUe,shift:l8e,preventDefault:!0},{key:"ArrowRight",run:hre,shift:yre,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:WUe,shift:n8e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ZUe,shift:h8e,preventDefault:!0},{key:"ArrowUp",run:dre,shift:bre,preventDefault:!0},{mac:"Cmd-ArrowUp",run:aH,shift:hH},{mac:"Ctrl-ArrowUp",run:rH,shift:sH},{key:"ArrowDown",run:fre,shift:wre,preventDefault:!0},{mac:"Cmd-ArrowDown",run:lH,shift:cH},{mac:"Ctrl-ArrowDown",run:pD,shift:oH},{key:"PageUp",run:rH,shift:sH},{key:"PageDown",run:pD,shift:oH},{key:"Home",run:YUe,shift:a8e,preventDefault:!0},{key:"Mod-Home",run:aH,shift:hH},{key:"End",run:jUe,shift:o8e,preventDefault:!0},{key:"Mod-End",run:lH,shift:cH},{key:"Enter",run:E8e},{key:"Mod-a",run:d8e},{key:"Backspace",run:mD,shift:mD},{key:"Delete",run:Cre},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Are},{key:"Mod-Delete",mac:"Alt-Delete",run:g8e},{mac:"Mod-Backspace",run:y8e},{mac:"Mod-Delete",run:_8e}].concat(B8e.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),L8e=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:HUe,shift:r8e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:QUe,shift:s8e},{key:"Alt-ArrowUp",run:w8e},{key:"Shift-Alt-ArrowUp",run:S8e},{key:"Alt-ArrowDown",run:O8e},{key:"Shift-Alt-ArrowDown",run:C8e},{key:"Escape",run:m8e},{key:"Mod-Enter",run:M8e},{key:"Alt-l",mac:"Ctrl-l",run:f8e},{key:"Mod-i",run:p8e,preventDefault:!0},{key:"Mod-[",run:I8e},{key:"Mod-]",run:k8e},{key:"Mod-Alt-\\",run:P8e},{key:"Shift-Mod-k",run:T8e},{key:"Shift-Mod-\\",run:t8e},{key:"Mod-/",run:SUe},{key:"Alt-A",run:TUe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:R8e}].concat(D8e);function er(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var s=i[n];typeof s=="string"?r.setAttribute(n,s):s!=null&&(r[n]=s)}e++}for(;e<arguments.length;e++)kre(r,arguments[e]);return r}function kre(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)kre(r,e[i]);else throw new RangeError("Unsupported child node: "+e)}const uH=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class a_{constructor(e,i,n=0,s=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,s),this.bufferStart=n,this.normalize=o?l=>o(uH(l)):uH,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Js(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=XV(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=eh(e);let s=this.normalize(i);for(let o=0,a=n;;o++){let l=s.charCodeAt(o),c=this.match(l,a,this.bufferPos+this.bufferStart);if(o==s.length-1){if(c)return this.value=c,this;break}a==n&&o<i.length&&i.charCodeAt(o)==l&&a++}}}match(e,i,n){let s=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?s={from:this.matches[o+1],to:n}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:i,to:n}:this.matches.push(1,i)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(a_.prototype[Symbol.iterator]=function(){return this});const Ire={from:-1,to:-1,match:/.*/.exec("")},m6="gm"+(/x/.unicode==null?"":"u");class Rre{constructor(e,i,n,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=Ire,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new Bre(e,i,n,s,o);this.re=new RegExp(i,m6+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=FE(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let n=this.curLineStart+i.index,s=n+i[0].length;if(this.matchPos=FE(this.text,s+(n==s?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<s||n>this.value.to)&&(!this.test||this.test(n,s,i)))return this.value={from:n,to:s,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const PR=new WeakMap;class Ty{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,n){let s=PR.get(e);if(!s||s.from>=n||s.to<=i){let l=new Ty(i,e.sliceString(i,n));return PR.set(e,l),l}if(s.from==i&&s.to==n)return s;let{text:o,from:a}=s;return a>i&&(o=e.sliceString(i,a)+o,a=i),s.to<n&&(o+=e.sliceString(s.to,n)),PR.set(e,new Ty(a,o)),new Ty(i,o.slice(i-a,n-a))}}class Bre{constructor(e,i,n,s,o){this.text=e,this.to=o,this.done=!1,this.value=Ire,this.matchPos=FE(e,s),this.re=new RegExp(i,m6+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=Ty.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let n=this.flat.from+i.index,s=n+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,s,i)))return this.value={from:n,to:s,match:i},this.matchPos=FE(this.text,s+(n==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ty.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Rre.prototype[Symbol.iterator]=Bre.prototype[Symbol.iterator]=function(){return this});function N8e(r){try{return new RegExp(r,m6),!0}catch{return!1}}function FE(r,e){if(e>=r.length)return e;let i=r.lineAt(e),n;for(;e<i.to&&(n=i.text.charCodeAt(e-i.from))>=56320&&n<57344;)e++;return e}function gD(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),i=er("input",{class:"cm-textfield",name:"line",value:e}),n=er("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),r.dispatch({effects:$E.of(!1)}),r.focus()):o.keyCode==13&&(o.preventDefault(),s())},onsubmit:o=>{o.preventDefault(),s()}},er("label",r.state.phrase("Go to line"),": ",i)," ",er("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function s(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!o)return;let{state:a}=r,l=a.doc.lineAt(a.selection.main.head),[,c,u,d,p]=o,m=d?+d.slice(1):0,g=u?+u:l.number;if(u&&p){let x=g/100;c&&(x=x*(c=="-"?-1:1)+l.number/a.doc.lines),g=Math.round(a.doc.lines*x)}else u&&c&&(g=g*(c=="-"?-1:1)+l.number);let y=a.doc.line(Math.max(1,Math.min(a.doc.lines,g))),_=nt.cursor(y.from+Math.max(0,Math.min(m,y.length)));r.dispatch({effects:[$E.of(!1),Mt.scrollIntoView(_.from,{y:"center"})],selection:_}),r.focus()}return{dom:n}}const $E=Hi.define(),dH=lo.define({create(){return!0},update(r,e){for(let i of e.effects)i.is($E)&&(r=i.value);return r},provide:r=>Hw.from(r,e=>e?gD:null)}),V8e=r=>{let e=Gw(r,gD);if(!e){let i=[$E.of(!0)];r.state.field(dH,!1)==null&&i.push(Hi.appendConfig.of([dH,F8e])),r.dispatch({effects:i}),e=Gw(r,gD)}return e&&e.dom.querySelector("input").select(),!0},F8e=Mt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),$8e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},U8e=Nt.define({combine(r){return wu(r,$8e,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function z8e(r){return[Q8e,H8e]}const X8e=vi.mark({class:"cm-selectionMatch"}),W8e=vi.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function fH(r,e,i,n){return(i==0||r(e.sliceDoc(i-1,i))!=wr.Word)&&(n==e.doc.length||r(e.sliceDoc(n,n+1))!=wr.Word)}function G8e(r,e,i,n){return r(e.sliceDoc(i,i+1))==wr.Word&&r(e.sliceDoc(n-1,n))==wr.Word}const H8e=ms.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(U8e),{state:i}=r,n=i.selection;if(n.ranges.length>1)return vi.none;let s=n.main,o,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return vi.none;let c=i.wordAt(s.head);if(!c)return vi.none;a=i.charCategorizer(s.head),o=i.sliceDoc(c.from,c.to)}else{let c=s.to-s.from;if(c<e.minSelectionLength||c>200)return vi.none;if(e.wholeWords){if(o=i.sliceDoc(s.from,s.to),a=i.charCategorizer(s.head),!(fH(a,i,s.from,s.to)&&G8e(a,i,s.from,s.to)))return vi.none}else if(o=i.sliceDoc(s.from,s.to),!o)return vi.none}let l=[];for(let c of r.visibleRanges){let u=new a_(i.doc,o,c.from,c.to);for(;!u.next().done;){let{from:d,to:p}=u.value;if((!a||fH(a,i,d,p))&&(s.empty&&d<=s.from&&p>=s.to?l.push(W8e.range(d,p)):(d>=s.to||p<=s.from)&&l.push(X8e.range(d,p)),l.length>e.maxMatches))return vi.none}}return vi.set(l)}},{decorations:r=>r.decorations}),Q8e=Mt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),j8e=({state:r,dispatch:e})=>{let{selection:i}=r,n=nt.create(i.ranges.map(s=>r.wordAt(s.head)||nt.cursor(s.head)),i.mainIndex);return n.eq(i)?!1:(e(r.update({selection:n})),!0)};function Y8e(r,e){let{main:i,ranges:n}=r.selection,s=r.wordAt(i.head),o=s&&s.from==i.from&&s.to==i.to;for(let a=!1,l=new a_(r.doc,e,n[n.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new a_(r.doc,e,0,Math.max(0,n[n.length-1].from-1)),a=!0}else{if(a&&n.some(c=>c.from==l.value.from))continue;if(o){let c=r.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const q8e=({state:r,dispatch:e})=>{let{ranges:i}=r.selection;if(i.some(o=>o.from===o.to))return j8e({state:r,dispatch:e});let n=r.sliceDoc(i[0].from,i[0].to);if(r.selection.ranges.some(o=>r.sliceDoc(o.from,o.to)!=n))return!1;let s=Y8e(r,n);return s?(e(r.update({selection:r.selection.addRange(nt.range(s.from,s.to),!1),effects:Mt.scrollIntoView(s.to)})),!0):!1},L_=Nt.define({combine(r){return wu(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new lze(e),scrollToMatch:e=>Mt.scrollIntoView(e)})}});class Dre{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||N8e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new eze(this):new K8e(this)}getCursor(e,i=0,n){let s=e.doc?e:wn.create({doc:e});return n==null&&(n=s.doc.length),this.regexp?zv(this,s,i,n):Uv(this,s,i,n)}}class Lre{constructor(e){this.spec=e}}function Uv(r,e,i,n){return new a_(e.doc,r.unquoted,i,n,r.caseSensitive?void 0:s=>s.toLowerCase(),r.wholeWord?Z8e(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Z8e(r,e){return(i,n,s,o)=>((o>i||o+s.length<n)&&(o=Math.max(0,i-2),s=r.sliceString(o,Math.min(r.length,n+2))),(e(UE(s,i-o))!=wr.Word||e(zE(s,i-o))!=wr.Word)&&(e(zE(s,n-o))!=wr.Word||e(UE(s,n-o))!=wr.Word))}class K8e extends Lre{constructor(e){super(e)}nextMatch(e,i,n){let s=Uv(this.spec,e,n,e.doc.length).nextOverlapping();return s.done&&(s=Uv(this.spec,e,0,i).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,i,n){for(let s=n;;){let o=Math.max(i,s-1e4-this.spec.unquoted.length),a=Uv(this.spec,e,o,s),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(o==i)return null;s-=1e4}}prevMatch(e,i,n){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let n=Uv(this.spec,e,0,e.doc.length),s=[];for(;!n.next().done;){if(s.length>=i)return null;s.push(n.value)}return s}highlight(e,i,n,s){let o=Uv(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function zv(r,e,i,n){return new Rre(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?J8e(e.charCategorizer(e.selection.main.head)):void 0},i,n)}function UE(r,e){return r.slice(no(r,e,!1),e)}function zE(r,e){return r.slice(e,no(r,e))}function J8e(r){return(e,i,n)=>!n[0].length||(r(UE(n.input,n.index))!=wr.Word||r(zE(n.input,n.index))!=wr.Word)&&(r(zE(n.input,n.index+n[0].length))!=wr.Word||r(UE(n.input,n.index+n[0].length))!=wr.Word)}class eze extends Lre{nextMatch(e,i,n){let s=zv(this.spec,e,n,e.doc.length).next();return s.done&&(s=zv(this.spec,e,0,i).next()),s.done?null:s.value}prevMatchInRange(e,i,n){for(let s=1;;s++){let o=Math.max(i,n-s*1e4),a=zv(this.spec,e,o,n),l=null;for(;!a.next().done;)l=a.value;if(l&&(o==i||l.from>o+10))return l;if(o==i)return null}}prevMatch(e,i,n){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(i,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:i)}matchAll(e,i){let n=zv(this.spec,e,0,e.doc.length),s=[];for(;!n.next().done;){if(s.length>=i)return null;s.push(n.value)}return s}highlight(e,i,n,s){let o=zv(this.spec,e,Math.max(0,i-250),Math.min(n+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const Yw=Hi.define(),g6=Hi.define(),mp=lo.define({create(r){return new kR(vD(r).create(),null)},update(r,e){for(let i of e.effects)i.is(Yw)?r=new kR(i.value.create(),r.panel):i.is(g6)&&(r=new kR(r.query,i.value?v6:null));return r},provide:r=>Hw.from(r,e=>e.panel)});class kR{constructor(e,i){this.query=e,this.panel=i}}const tze=vi.mark({class:"cm-searchMatch"}),ize=vi.mark({class:"cm-searchMatch cm-searchMatch-selected"}),nze=ms.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(mp))}update(r){let e=r.state.field(mp);(e!=r.startState.field(mp)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return vi.none;let{view:i}=this,n=new Ep;for(let s=0,o=i.visibleRanges,a=o.length;s<a;s++){let{from:l,to:c}=o[s];for(;s<a-1&&c>o[s+1].from-2*250;)c=o[++s].to;r.highlight(i.state,l,c,(u,d)=>{let p=i.state.selection.ranges.some(m=>m.from==u&&m.to==d);n.add(u,d,p?ize:tze)})}return n.finish()}},{decorations:r=>r.decorations});function lS(r){return e=>{let i=e.state.field(mp,!1);return i&&i.query.spec.valid?r(e,i):Fre(e)}}const XE=lS((r,{query:e})=>{let{to:i}=r.state.selection.main,n=e.nextMatch(r.state,i,i);if(!n)return!1;let s=nt.single(n.from,n.to),o=r.state.facet(L_);return r.dispatch({selection:s,effects:[y6(r,n),o.scrollToMatch(s.main,r)],userEvent:"select.search"}),Vre(r),!0}),WE=lS((r,{query:e})=>{let{state:i}=r,{from:n}=i.selection.main,s=e.prevMatch(i,n,n);if(!s)return!1;let o=nt.single(s.from,s.to),a=r.state.facet(L_);return r.dispatch({selection:o,effects:[y6(r,s),a.scrollToMatch(o.main,r)],userEvent:"select.search"}),Vre(r),!0}),rze=lS((r,{query:e})=>{let i=e.matchAll(r.state,1e3);return!i||!i.length?!1:(r.dispatch({selection:nt.create(i.map(n=>nt.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),sze=({state:r,dispatch:e})=>{let i=r.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:n,to:s}=i.main,o=[],a=0;for(let l=new a_(r.doc,r.sliceDoc(n,s));!l.next().done;){if(o.length>1e3)return!1;l.value.from==n&&(a=o.length),o.push(nt.range(l.value.from,l.value.to))}return e(r.update({selection:nt.create(o,a),userEvent:"select.search.matches"})),!0},pH=lS((r,{query:e})=>{let{state:i}=r,{from:n,to:s}=i.selection.main;if(i.readOnly)return!1;let o=e.nextMatch(i,n,n);if(!o)return!1;let a=[],l,c,u=[];if(o.from==n&&o.to==s&&(c=i.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(i,o.from,o.to),u.push(Mt.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(n).number)+"."))),o){let d=a.length==0||a[0].from>=o.to?0:o.to-o.from-c.length;l=nt.single(o.from-d,o.to-d),u.push(y6(r,o)),u.push(i.facet(L_).scrollToMatch(l.main,r))}return r.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),oze=lS((r,{query:e})=>{if(r.state.readOnly)return!1;let i=e.matchAll(r.state,1e9).map(s=>{let{from:o,to:a}=s;return{from:o,to:a,insert:e.getReplacement(s)}});if(!i.length)return!1;let n=r.state.phrase("replaced $ matches",i.length)+".";return r.dispatch({changes:i,effects:Mt.announce.of(n),userEvent:"input.replace.all"}),!0});function v6(r){return r.state.facet(L_).createPanel(r)}function vD(r,e){var i,n,s,o,a;let l=r.selection.main,c=l.empty||l.to>l.from+100?"":r.sliceDoc(l.from,l.to);if(e&&!c)return e;let u=r.facet(L_);return new Dre({search:((i=e==null?void 0:e.literal)!==null&&i!==void 0?i:u.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:u.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:u.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:u.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:u.wholeWord})}function Nre(r){let e=Gw(r,v6);return e&&e.dom.querySelector("[main-field]")}function Vre(r){let e=Nre(r);e&&e==r.root.activeElement&&e.select()}const Fre=r=>{let e=r.state.field(mp,!1);if(e&&e.panel){let i=Nre(r);if(i&&i!=r.root.activeElement){let n=vD(r.state,e.query.spec);n.valid&&r.dispatch({effects:Yw.of(n)}),i.focus(),i.select()}}else r.dispatch({effects:[g6.of(!0),e?Yw.of(vD(r.state,e.query.spec)):Hi.appendConfig.of(cze)]});return!0},$re=r=>{let e=r.state.field(mp,!1);if(!e||!e.panel)return!1;let i=Gw(r,v6);return i&&i.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:g6.of(!1)}),!0},aze=[{key:"Mod-f",run:Fre,scope:"editor search-panel"},{key:"F3",run:XE,shift:WE,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:XE,shift:WE,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:$re,scope:"editor search-panel"},{key:"Mod-Shift-l",run:sze},{key:"Mod-Alt-g",run:V8e},{key:"Mod-d",run:q8e,preventDefault:!0}];class lze{constructor(e){this.view=e;let i=this.query=e.state.field(mp).query.spec;this.commit=this.commit.bind(this),this.searchField=er("input",{value:i.search,placeholder:Ya(e,"Find"),"aria-label":Ya(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=er("input",{value:i.replace,placeholder:Ya(e,"Replace"),"aria-label":Ya(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=er("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=er("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=er("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function n(s,o,a){return er("button",{class:"cm-button",name:s,onclick:o,type:"button"},a)}this.dom=er("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,n("next",()=>XE(e),[Ya(e,"next")]),n("prev",()=>WE(e),[Ya(e,"previous")]),n("select",()=>rze(e),[Ya(e,"all")]),er("label",null,[this.caseField,Ya(e,"match case")]),er("label",null,[this.reField,Ya(e,"regexp")]),er("label",null,[this.wordField,Ya(e,"by word")]),...e.state.readOnly?[]:[er("br"),this.replaceField,n("replace",()=>pH(e),[Ya(e,"replace")]),n("replaceAll",()=>oze(e),[Ya(e,"replace all")])],er("button",{name:"close",onclick:()=>$re(e),"aria-label":Ya(e,"close"),type:"button"},["×"])])}commit(){let e=new Dre({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Yw.of(e)}))}keydown(e){pFe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?WE:XE)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),pH(this.view))}update(e){for(let i of e.transactions)for(let n of i.effects)n.is(Yw)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(L_).top}}function Ya(r,e){return r.state.phrase(e)}const Z2=30,K2=/[\s\.,:;?!]/;function y6(r,{from:e,to:i}){let n=r.state.doc.lineAt(e),s=r.state.doc.lineAt(i).to,o=Math.max(n.from,e-Z2),a=Math.min(s,i+Z2),l=r.state.sliceDoc(o,a);if(o!=n.from){for(let c=0;c<Z2;c++)if(!K2.test(l[c+1])&&K2.test(l[c])){l=l.slice(c);break}}if(a!=s){for(let c=l.length-1;c>l.length-Z2;c--)if(!K2.test(l[c-1])&&K2.test(l[c])){l=l.slice(0,c);break}}return Mt.announce.of(`${r.state.phrase("current match")}. ${l} ${r.state.phrase("on line")} ${n.number}.`)}const hze=Mt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cze=[mp,_0.low(nze),hze];class Ure{constructor(e,i,n,s){this.state=e,this.pos=i,this.explicit=n,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let i=Co(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),n=Math.max(i.from,this.pos-250),s=i.text.slice(n-i.from,this.pos-i.from),o=s.search(zre(e,!1));return o<0?null:{from:n+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,i,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(i),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function mH(r){let e=Object.keys(r).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function uze(r){let e=Object.create(null),i=Object.create(null);for(let{label:s}of r){e[s[0]]=!0;for(let o=1;o<s.length;o++)i[s[o]]=!0}let n=mH(e)+mH(i)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function dze(r){let e=r.map(s=>typeof s=="string"?{label:s}:s),[i,n]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:uze(e);return s=>{let o=s.matchBefore(n);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:i}:null}}class gH{constructor(e,i,n,s){this.completion=e,this.source=i,this.match=n,this.score=s}}function gp(r){return r.selection.main.from}function zre(r,e){var i;let{source:n}=r,s=e&&n[0]!="^",o=n[n.length-1]!="$";return!s&&!o?r:new RegExp(`${s?"^":""}(?:${n})${o?"$":""}`,(i=r.flags)!==null&&i!==void 0?i:r.ignoreCase?"i":"")}const Xre=Gd.define();function fze(r,e,i,n){let{main:s}=r.selection,o=i-s.from,a=n-s.from;return Object.assign(Object.assign({},r.changeByRange(l=>l!=s&&i!=n&&r.sliceDoc(l.from+o,l.from+a)!=r.sliceDoc(i,n)?{range:l}:{changes:{from:l.from+o,to:n==s.from?l.to:l.from+a,insert:e},range:nt.cursor(l.from+o+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const vH=new WeakMap;function pze(r){if(!Array.isArray(r))return r;let e=vH.get(r);return e||vH.set(r,e=dze(r)),e}const GE=Hi.define(),qw=Hi.define();class mze{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let n=Js(e,i),s=eh(n);this.chars.push(n);let o=e.slice(i,i+s),a=o.toUpperCase();this.folded.push(Js(a==o?o.toLowerCase():a,0)),i+=s}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:i,folded:n,any:s,precise:o,byWord:a}=this;if(i.length==1){let S=Js(e,0),w=eh(S),C=w==e.length?0:-100;if(S!=i[0])if(S==n[0])C+=-200;else return null;return this.ret(C,[0,w])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=i.length,u=0;if(l<0){for(let S=0,w=Math.min(e.length,200);S<w&&u<c;){let C=Js(e,S);(C==i[u]||C==n[u])&&(s[u++]=S),S+=eh(C)}if(u<c)return null}let d=0,p=0,m=!1,g=0,y=-1,_=-1,x=/[a-z]/.test(e),O=!0;for(let S=0,w=Math.min(e.length,200),C=0;S<w&&p<c;){let M=Js(e,S);l<0&&(d<c&&M==i[d]&&(o[d++]=S),g<c&&(M==i[g]||M==n[g]?(g==0&&(y=S),_=S+1,g++):g=0));let P,R=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(P=XV(M))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!S||R==1&&x||C==0&&R!=0)&&(i[p]==M||n[p]==M&&(m=!0)?a[p++]=S:a.length&&(O=!1)),C=R,S+=eh(M)}return p==c&&a[0]==0&&O?this.result(-100+(m?-200:0),a,e):g==c&&y==0?this.ret(-200-e.length+(_==e.length?0:-100),[0,_]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):g==c?this.ret(-900-e.length,[y,_]):p==c?this.result(-100+(m?-200:0)+-700+(O?0:-1100),a,e):i.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,i,n){let s=[],o=0;for(let a of i){let l=a+(this.astral?eh(Js(n,a)):1);o&&s[o-1]==a?s[o-1]=l:(s[o++]=a,s[o++]=l)}return this.ret(e-n.length,s)}}class gze{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let i=e.slice(0,this.pattern.length),n=i==this.pattern?0:i.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,i.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const to=Nt.define({combine(r){return wu(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:vze,filterStrict:!1,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>n=>yH(e(n),i(n)),optionClass:(e,i)=>n=>yH(e(n),i(n)),addToOptions:(e,i)=>e.concat(i),filterStrict:(e,i)=>e||i})}});function yH(r,e){return r?e?r+" "+e:r:e}function vze(r,e,i,n,s,o){let a=r.textDirection==ur.RTL,l=a,c=!1,u="top",d,p,m=e.left-s.left,g=s.right-e.right,y=n.right-n.left,_=n.bottom-n.top;if(l&&m<Math.min(y,g)?l=!1:!l&&g<Math.min(y,m)&&(l=!0),y<=(l?m:g))d=Math.max(s.top,Math.min(i.top,s.bottom-_))-e.top,p=Math.min(400,l?m:g);else{c=!0,p=Math.min(400,(a?e.right:s.right-e.left)-30);let S=s.bottom-e.bottom;S>=_||S>e.top?d=i.bottom-e.top:(u="bottom",d=e.bottom-i.top)}let x=(e.bottom-e.top)/o.offsetHeight,O=(e.right-e.left)/o.offsetWidth;return{style:`${u}: ${d/x}px; max-width: ${p/O}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function yze(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(i){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),i.type&&n.classList.add(...i.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(i,n,s,o){let a=document.createElement("span");a.className="cm-completionLabel";let l=i.displayLabel||i.label,c=0;for(let u=0;u<o.length;){let d=o[u++],p=o[u++];d>c&&a.appendChild(document.createTextNode(l.slice(c,d)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(l.slice(d,p))),m.className="cm-completionMatchedText",c=p}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(i){if(!i.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=i.detail,n},position:80}),e.sort((i,n)=>i.position-n.position).map(i=>i.render)}function IR(r,e,i){if(r<=i)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let s=Math.floor(e/i);return{from:s*i,to:(s+1)*i}}let n=Math.floor((r-e)/i);return{from:r-(n+1)*i,to:r-n*i}}class _ze{constructor(e,i,n){this.view=e,this.stateField=i,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let s=e.state.field(i),{options:o,selected:a}=s.open,l=e.state.facet(to);this.optionContent=yze(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=IR(o.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:u}=e.state.field(i).open;for(let d=c.target,p;d&&d!=this.dom;d=d.parentNode)if(d.nodeName=="LI"&&(p=/-(\d+)$/.exec(d.id))&&+p[1]<u.length){this.applyCompletion(e,u[+p[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(to).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:qw.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var i;let n=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=s){let{options:o,selected:a,disabled:l}=n.open;(!s.open||s.open.options!=o)&&(this.range=IR(o.length,a,e.state.facet(to).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),l!=((i=s.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of i.split(" "))n&&this.dom.classList.add(n);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=IR(i.options.length,i.selected,this.view.state.facet(to).maxRenderedOptions),this.showOptions(i.options,e.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:n}=i.options[i.selected],{info:s}=n;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(n);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,n)}).catch(a=>Aa(this.view.state,a,"completion info")):this.addInfoPane(o,n)}}addInfoPane(e,i){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;n.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let n=this.list.firstChild,s=this.range.from;n;n=n.nextSibling,s++)n.nodeName!="LI"||!n.id?s--:s==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),i=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return i&&bze(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return s.top>Math.min(o.bottom,i.bottom)-10||s.bottom<Math.max(o.top,i.top)+10?null:this.view.state.facet(to).positionInfo(this.view,i,s,n,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,n){const s=document.createElement("ul");s.id=i,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let a=n.from;a<n.to;a++){let{completion:l,match:c}=e[a],{section:u}=l;if(u){let m=typeof u=="string"?u:u.name;if(m!=o&&(a>n.from||n.from==0))if(o=m,typeof u!="string"&&u.header)s.appendChild(u.header(u));else{let g=s.appendChild(document.createElement("completion-section"));g.textContent=m}}const d=s.appendChild(document.createElement("li"));d.id=i+"-"+a,d.setAttribute("role","option");let p=this.optionClass(l);p&&(d.className=p);for(let m of this.optionContent){let g=m(l,this.view.state,this.view,c);g&&d.appendChild(g)}}return n.from&&s.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function xze(r,e){return i=>new _ze(i,r,e)}function bze(r,e){let i=r.getBoundingClientRect(),n=e.getBoundingClientRect(),s=i.height/r.offsetHeight;n.top<i.top?r.scrollTop-=(i.top-n.top)/s:n.bottom>i.bottom&&(r.scrollTop+=(n.bottom-i.bottom)/s)}function _H(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function wze(r,e){let i=[],n=null,s=u=>{i.push(u);let{section:d}=u.completion;if(d){n||(n=[]);let p=typeof d=="string"?d:d.name;n.some(m=>m.name==p)||n.push(typeof d=="string"?{name:p}:d)}},o=e.facet(to);for(let u of r)if(u.hasResult()){let d=u.result.getMatch;if(u.result.filter===!1)for(let p of u.result.options)s(new gH(p,u.source,d?d(p):[],1e9-i.length));else{let p=e.sliceDoc(u.from,u.to),m,g=o.filterStrict?new gze(p):new mze(p);for(let y of u.result.options)if(m=g.match(y.label)){let _=y.displayLabel?d?d(y,m.matched):[]:m.matched;s(new gH(y,u.source,_,m.score+(y.boost||0)))}}}if(n){let u=Object.create(null),d=0,p=(m,g)=>{var y,_;return((y=m.rank)!==null&&y!==void 0?y:1e9)-((_=g.rank)!==null&&_!==void 0?_:1e9)||(m.name<g.name?-1:1)};for(let m of n.sort(p))d-=1e5,u[m.name]=d;for(let m of i){let{section:g}=m.completion;g&&(m.score+=u[typeof g=="string"?g:g.name])}}let a=[],l=null,c=o.compareCompletions;for(let u of i.sort((d,p)=>p.score-d.score||c(d.completion,p.completion))){let d=u.completion;!l||l.label!=d.label||l.detail!=d.detail||l.type!=null&&d.type!=null&&l.type!=d.type||l.apply!=d.apply||l.boost!=d.boost?a.push(u):_H(u.completion)>_H(l)&&(a[a.length-1]=u),l=u.completion}return a}class ny{constructor(e,i,n,s,o,a){this.options=e,this.attrs=i,this.tooltip=n,this.timestamp=s,this.selected=o,this.disabled=a}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new ny(this.options,xH(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,n,s,o){let a=wze(e,i);if(!a.length)return s&&e.some(c=>c.state==1)?new ny(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let l=i.facet(to).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let c=s.options[s.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new ny(a,xH(n,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:Eze,above:o.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new ny(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class HE{constructor(e,i,n){this.active=e,this.id=i,this.open=n}static start(){return new HE(Tze,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,n=i.facet(to),o=(n.override||i.languageDataAt("autocomplete",gp(i)).map(pze)).map(l=>(this.active.find(u=>u.source==l)||new dl(l,this.active.some(u=>u.state!=0)?1:0)).update(e,n));o.length==this.active.length&&o.every((l,c)=>l==this.active[c])&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Oze(o,this.active)?a=ny.build(o,i,this.id,a,n):a&&a.disabled&&!o.some(l=>l.state==1)&&(a=null),!a&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new dl(l.source,0):l));for(let l of e.effects)l.is(Hre)&&(a=a&&a.setSelected(l.value,this.id));return o==this.active&&a==this.open?this:new HE(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Sze:Cze}}function Oze(r,e){if(r==e)return!0;for(let i=0,n=0;;){for(;i<r.length&&!r[i].hasResult;)i++;for(;n<e.length&&!e[n].hasResult;)n++;let s=i==r.length,o=n==e.length;if(s||o)return s==o;if(r[i++].result!=e[n++].result)return!1}}const Sze={"aria-autocomplete":"list"},Cze={};function xH(r,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(i["aria-activedescendant"]=r+"-"+e),i}const Tze=[];function Wre(r,e){if(r.isUserEvent("input.complete")){let n=r.annotation(Xre);if(n&&e.activateOnCompletion(n))return 12}let i=r.isUserEvent("input.type");return i&&e.activateOnTyping?5:i?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class dl{constructor(e,i,n=-1){this.source=e,this.state=i,this.explicitPos=n}hasResult(){return!1}update(e,i){let n=Wre(e,i),s=this;(n&8||n&16&&this.touches(e))&&(s=new dl(s.source,0)),n&4&&s.state==0&&(s=new dl(this.source,1)),s=s.updateFor(e,n);for(let o of e.effects)if(o.is(GE))s=new dl(s.source,1,o.value?gp(e.state):-1);else if(o.is(qw))s=new dl(s.source,0);else if(o.is(Gre))for(let a of o.value)a.source==s.source&&(s=a);return s}updateFor(e,i){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new dl(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(gp(e.state))}}class Ay extends dl{constructor(e,i,n,s,o){super(e,2,i),this.result=n,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,i){var n;if(!(i&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=gp(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>a||!s||i&2&&gp(e.startState)==this.from)return new dl(this.source,i&4?1:0);let c=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return Aze(s.validFor,e.state,o,a)?new Ay(this.source,c,s,o,a):s.update&&(s=s.update(s,o,a,new Ure(e.state,l,c>=0)))?new Ay(this.source,c,s,s.from,(n=s.to)!==null&&n!==void 0?n:gp(e.state)):new dl(this.source,1,c)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ay(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new dl(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Aze(r,e,i,n){if(!r)return!1;let s=e.sliceDoc(i,n);return typeof r=="function"?r(s,i,n,e):zre(r,!0).test(s)}const Gre=Hi.define({map(r,e){return r.map(i=>i.map(e))}}),Hre=Hi.define(),xa=lo.define({create(){return HE.start()},update(r,e){return r.update(e)},provide:r=>[r6.from(r,e=>e.tooltip),Mt.contentAttributes.from(r,e=>e.attrs)]});function _6(r,e){const i=e.completion.apply||e.completion.label;let n=r.state.field(xa).active.find(s=>s.source==e.source);return n instanceof Ay?(typeof i=="string"?r.dispatch(Object.assign(Object.assign({},fze(r.state,i,n.from,n.to)),{annotations:Xre.of(e.completion)})):i(r,e.completion,n.from,n.to),!0):!1}const Eze=xze(xa,_6);function J2(r,e="option"){return i=>{let n=i.state.field(xa,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<i.state.facet(to).interactionDelay)return!1;let s=1,o;e=="page"&&(o=Ane(i,n.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=n.open.options,l=n.open.selected>-1?n.open.selected+s*(r?1:-1):r?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),i.dispatch({effects:Hre.of(l)}),!0}}const Mze=r=>{let e=r.state.field(xa,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(to).interactionDelay?!1:_6(r,e.open.options[e.open.selected])},Pze=r=>r.state.field(xa,!1)?(r.dispatch({effects:GE.of(!0)}),!0):!1,kze=r=>{let e=r.state.field(xa,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(r.dispatch({effects:qw.of(null)}),!0)};class Ize{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const Rze=50,Bze=1e3,Dze=ms.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(xa).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(xa),i=r.state.facet(to);if(!r.selectionSet&&!r.docChanged&&r.startState.field(xa)==e)return;let n=r.transactions.some(o=>{let a=Wre(o,i);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(n||a.context.abortOnDocChange&&r.docChanged||a.updates.length+r.transactions.length>Rze&&Date.now()-a.time>Bze){for(let l of a.context.abortListeners)try{l()}catch(c){Aa(this.view.state,c)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(o=>o.effects.some(a=>a.is(GE)))&&(this.pendingStart=!0);let s=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.state==1&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of r.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(xa);for(let i of e.active)i.state==1&&!this.running.some(n=>n.active.source==i.source)&&this.startQuery(i)}startQuery(r){let{state:e}=this.view,i=gp(e),n=new Ure(e,i,r.explicitPos==i,this.view),s=new Ize(r,n);this.running.push(s),Promise.resolve(r.source(n)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:qw.of(null)}),Aa(this.view.state,o)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(to).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(to);for(let n=0;n<this.running.length;n++){let s=this.running[n];if(s.done===void 0)continue;if(this.running.splice(n--,1),s.done){let a=new Ay(s.active.source,s.active.explicitPos,s.done,s.done.from,(r=s.done.to)!==null&&r!==void 0?r:gp(s.updates.length?s.updates[0].startState:this.view.state));for(let l of s.updates)a=a.update(l,i);if(a.hasResult()){e.push(a);continue}}let o=this.view.state.field(xa).active.find(a=>a.source==s.active.source);if(o&&o.state==1)if(s.done==null){let a=new dl(s.active.source,0);for(let l of s.updates)a=a.update(l,i);a.state!=1&&e.push(a)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:Gre.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(xa,!1);if(e&&e.tooltip&&this.view.state.facet(to).closeOnBlur){let i=e.open&&Ane(this.view,e.open.tooltip);(!i||!i.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:qw.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:GE.of(!1)}),20),this.composing=0}}}),Lze=typeof navigator=="object"&&/Win/.test(navigator.platform),Nze=_0.highest(Mt.domEventHandlers({keydown(r,e){let i=e.state.field(xa,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||r.key.length>1||r.ctrlKey&&!(Lze&&r.altKey)||r.metaKey)return!1;let n=i.open.options[i.open.selected],s=i.active.find(a=>a.source==n.source),o=n.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(r.key)>-1&&_6(e,n),!1}})),Vze=Mt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Zw={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},gg=Hi.define({map(r,e){let i=e.mapPos(r,-1,Ho.TrackAfter);return i??void 0}}),x6=new class extends Jg{};x6.startSide=1;x6.endSide=-1;const Qre=lo.define({create(){return _n.empty},update(r,e){if(r=r.map(e.changes),e.selection){let i=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:n=>n>=i.from&&n<=i.to})}for(let i of e.effects)i.is(gg)&&(r=r.update({add:[x6.range(i.value,i.value+1)]}));return r}});function Fze(){return[Uze,Qre]}const RR="()[]{}<>";function jre(r){for(let e=0;e<RR.length;e+=2)if(RR.charCodeAt(e)==r)return RR.charAt(e+1);return XV(r<128?r:r+1)}function Yre(r,e){return r.languageDataAt("closeBrackets",e)[0]||Zw}const $ze=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Uze=Mt.inputHandler.of((r,e,i,n)=>{if(($ze?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let s=r.state.selection.main;if(n.length>2||n.length==2&&eh(Js(n,0))==1||e!=s.from||i!=s.to)return!1;let o=Wze(r.state,n);return o?(r.dispatch(o),!0):!1}),zze=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=Yre(r,r.selection.main.head).brackets||Zw.brackets,s=null,o=r.changeByRange(a=>{if(a.empty){let l=Gze(r.doc,a.head);for(let c of n)if(c==l&&qP(r.doc,a.head)==jre(Js(c,0)))return{changes:{from:a.head-c.length,to:a.head+c.length},range:nt.cursor(a.head-c.length)}}return{range:s=a}});return s||e(r.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},Xze=[{key:"Backspace",run:zze}];function Wze(r,e){let i=Yre(r,r.selection.main.head),n=i.brackets||Zw.brackets;for(let s of n){let o=jre(Js(s,0));if(e==s)return o==s?jze(r,s,n.indexOf(s+s+s)>-1,i):Hze(r,s,o,i.before||Zw.before);if(e==o&&qre(r,r.selection.main.from))return Qze(r,s,o)}return null}function qre(r,e){let i=!1;return r.field(Qre).between(0,r.doc.length,n=>{n==e&&(i=!0)}),i}function qP(r,e){let i=r.sliceString(e,e+2);return i.slice(0,eh(Js(i,0)))}function Gze(r,e){let i=r.sliceString(e-2,e);return eh(Js(i,0))==i.length?i:i.slice(1)}function Hze(r,e,i,n){let s=null,o=r.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:i,from:a.to}],effects:gg.of(a.to+e.length),range:nt.range(a.anchor+e.length,a.head+e.length)};let l=qP(r.doc,a.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+i,from:a.head},effects:gg.of(a.head+e.length),range:nt.cursor(a.head+e.length)}:{range:s=a}});return s?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Qze(r,e,i){let n=null,s=r.changeByRange(o=>o.empty&&qP(r.doc,o.head)==i?{changes:{from:o.head,to:o.head+i.length,insert:i},range:nt.cursor(o.head+i.length)}:n={range:o});return n?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function jze(r,e,i,n){let s=n.stringPrefixes||Zw.stringPrefixes,o=null,a=r.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:gg.of(l.to+e.length),range:nt.range(l.anchor+e.length,l.head+e.length)};let c=l.head,u=qP(r.doc,c),d;if(u==e){if(bH(r,c))return{changes:{insert:e+e,from:c},effects:gg.of(c+e.length),range:nt.cursor(c+e.length)};if(qre(r,c)){let m=i&&r.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:nt.cursor(c+m.length)}}}else{if(i&&r.sliceDoc(c-2*e.length,c)==e+e&&(d=wH(r,c-2*e.length,s))>-1&&bH(r,d))return{changes:{insert:e+e+e+e,from:c},effects:gg.of(c+e.length),range:nt.cursor(c+e.length)};if(r.charCategorizer(c)(u)!=wr.Word&&wH(r,c,s)>-1&&!Yze(r,c,e,s))return{changes:{insert:e+e,from:c},effects:gg.of(c+e.length),range:nt.cursor(c+e.length)}}return{range:o=l}});return o?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function bH(r,e){let i=Co(r).resolveInner(e+1);return i.parent&&i.from==e}function Yze(r,e,i,n){let s=Co(r).resolveInner(e,-1),o=n.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=r.sliceDoc(s.from,Math.min(s.to,s.from+i.length+o)),c=l.indexOf(i);if(!c||c>-1&&n.indexOf(l.slice(0,c))>-1){let d=s.firstChild;for(;d&&d.from==s.from&&d.to-d.from>i.length+c;){if(r.sliceDoc(d.to-i.length,d.to)==i)return!1;d=d.firstChild}return!0}let u=s.to==e&&s.parent;if(!u)break;s=u}return!1}function wH(r,e,i){let n=r.charCategorizer(e);if(n(r.sliceDoc(e-1,e))!=wr.Word)return e;for(let s of i){let o=e-s.length;if(r.sliceDoc(o,e)==s&&n(r.sliceDoc(o-1,o))!=wr.Word)return o}return-1}function qze(r={}){return[Nze,xa,to.of(r),Dze,Zze,Vze]}const Zre=[{key:"Ctrl-Space",run:Pze},{key:"Escape",run:kze},{key:"ArrowDown",run:J2(!0)},{key:"ArrowUp",run:J2(!1)},{key:"PageDown",run:J2(!0,"page")},{key:"PageUp",run:J2(!1,"page")},{key:"Enter",run:Mze}],Zze=_0.highest(i6.computeN([to],r=>r.facet(to).defaultKeymap?[Zre]:[]));class Kze{constructor(e,i,n){this.from=e,this.to=i,this.diagnostic=n}}class og{constructor(e,i,n){this.diagnostics=e,this.panel=i,this.selected=n}static init(e,i,n){let s=e,o=n.facet(Kw).markerFilter;o&&(s=o(s,n));let a=vi.set(s.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?vi.widget({widget:new a9e(l),diagnostic:l}).range(l.from):vi.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new og(a,i,l_(a))}}function l_(r,e=null,i=0){let n=null;return r.between(i,1e9,(s,o,{spec:a})=>{if(!(e&&a.diagnostic!=e))return n=new Kze(s,o,a.diagnostic),!1}),n}function Jze(r,e){let i=e.pos,n=e.end||i,s=r.state.facet(Kw).hideOn(r,i,n);if(s!=null)return s;let o=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(a=>a.is(Kre))||r.changes.touchesRange(o.from,Math.max(o.to,n)))}function e9e(r,e){return r.field(ml,!1)?e:e.concat(Hi.appendConfig.of(c9e))}const Kre=Hi.define(),b6=Hi.define(),Jre=Hi.define(),ml=lo.define({create(){return new og(vi.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let i=r.diagnostics.map(e.changes),n=null,s=r.panel;if(r.selected){let o=e.changes.mapPos(r.selected.from,1);n=l_(i,r.selected.diagnostic,o)||l_(i,null,o)}!i.size&&s&&e.state.facet(Kw).autoPanel&&(s=null),r=new og(i,s,n)}for(let i of e.effects)if(i.is(Kre)){let n=e.state.facet(Kw).autoPanel?i.value.length?Jw.open:null:r.panel;r=og.init(i.value,n,e.state)}else i.is(b6)?r=new og(r.diagnostics,i.value?Jw.open:null,r.selected):i.is(Jre)&&(r=new og(r.diagnostics,r.panel,i.value));return r},provide:r=>[Hw.from(r,e=>e.panel),Mt.decorations.from(r,e=>e.diagnostics)]}),t9e=vi.mark({class:"cm-lintRange cm-lintRange-active"});function i9e(r,e,i){let{diagnostics:n}=r.state.field(ml),s=[],o=2e8,a=0;n.between(e-(i<0?1:0),e+(i>0?1:0),(c,u,{spec:d})=>{e>=c&&e<=u&&(c==u||(e>c||i>0)&&(e<u||i<0))&&(s.push(d.diagnostic),o=Math.min(c,o),a=Math.max(u,a))});let l=r.state.facet(Kw).tooltipFilter;return l&&(s=l(s,r.state)),s.length?{pos:o,end:a,above:r.state.doc.lineAt(o).to<a,create(){return{dom:n9e(r,s)}}}:null}function n9e(r,e){return er("ul",{class:"cm-tooltip-lint"},e.map(i=>tse(r,i,!1)))}const r9e=r=>{let e=r.state.field(ml,!1);(!e||!e.panel)&&r.dispatch({effects:e9e(r.state,[b6.of(!0)])});let i=Gw(r,Jw.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},OH=r=>{let e=r.state.field(ml,!1);return!e||!e.panel?!1:(r.dispatch({effects:b6.of(!1)}),!0)},s9e=r=>{let e=r.state.field(ml,!1);if(!e)return!1;let i=r.state.selection.main,n=e.diagnostics.iter(i.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==i.from&&n.to==i.to)?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},o9e=[{key:"Mod-Shift-m",run:r9e,preventDefault:!0},{key:"F8",run:s9e}],Kw=Nt.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},wu(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,i)=>e?i?n=>e(n)||i(n):e:i}))}});function ese(r){let e=[];if(r)e:for(let{name:i}of r){for(let n=0;n<i.length;n++){let s=i[n];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function tse(r,e,i){var n;let s=i?ese(e.actions):[];return er("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},er("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((o,a)=>{let l=!1,c=m=>{if(m.preventDefault(),l)return;l=!0;let g=l_(r.state.field(ml).diagnostics,e);g&&o.apply(r,g.from,g.to)},{name:u}=o,d=s[a]?u.indexOf(s[a]):-1,p=d<0?u:[u.slice(0,d),er("u",u.slice(d,d+1)),u.slice(d+1)];return er("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${u}${d<0?"":` (access key "${s[a]})"`}.`},p)}),e.source&&er("div",{class:"cm-diagnosticSource"},e.source))}class a9e extends jp{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return er("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class SH{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=tse(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Jw{constructor(e){this.view=e,this.items=[];let i=s=>{if(s.keyCode==27)OH(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=ese(o.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==s.keyCode){let c=l_(this.view.state.field(ml).diagnostics,o);c&&o.actions[l].apply(e,c.from,c.to)}}else return;s.preventDefault()},n=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=er("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:n}),this.dom=er("div",{class:"cm-panel-lint"},this.list,er("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>OH(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(ml).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(ml),n=0,s=!1,o=null;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{let u=-1,d;for(let p=n;p<this.items.length;p++)if(this.items[p].diagnostic==c.diagnostic){u=p;break}u<0?(d=new SH(this.view,c.diagnostic),this.items.splice(n,0,d),s=!0):(d=this.items[u],u>n&&(this.items.splice(n,u-n),s=!0)),i&&d.diagnostic==i.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),o=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new SH(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function i(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)i();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(ml),n=l_(i.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Jre.of(n)})}static open(e){return new Jw(e)}}function l9e(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function eT(r){return l9e(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const h9e=Mt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:eT("#d11")},".cm-lintRange-warning":{backgroundImage:eT("orange")},".cm-lintRange-info":{backgroundImage:eT("#999")},".cm-lintRange-hint":{backgroundImage:eT("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),c9e=[ml,Mt.decorations.compute([ml],r=>{let{selected:e,panel:i}=r.field(ml);return!e||!i||e.from==e.to?vi.none:vi.set([t9e.range(e.from,e.to)])}),e$e(i9e,{hideOn:Jze}),h9e],QE=[u$e(),p$e(),kFe(),RUe(),sUe(),xFe(),CFe(),wn.allowMultipleSelections.of(!0),G$e(),aUe(cUe,{fallback:!0}),vUe(),Fze(),qze(),XFe(),HFe(),NFe(),z8e(),i6.of([...Xze,...L8e,...aze,...zUe,...tUe,...Zre,...o9e])];var CH={};class jE{constructor(e,i,n,s,o,a,l,c,u,d=0,p){this.p=e,this.stack=i,this.state=n,this.reducePos=s,this.pos=o,this.score=a,this.buffer=l,this.bufferBase=c,this.curContext=u,this.lookAhead=d,this.parent=p}toString(){return`[${this.stack.filter((e,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,i,n=0){let s=e.parser.context;return new jE(e,[],i,n,n,0,[],0,s?new TH(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,i){this.stack.push(this.state,i,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var i;let n=e>>19,s=e&65535,{parser:o}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let l=o.dynamicPrecedence(s);if(l&&(this.score+=l),n==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let c=this.stack.length-(n-1)*3-(e&262144?6:0),u=c?this.stack[c-2]:this.p.ranges[0].from,d=this.reducePos-u;d>=2e3&&!(!((i=this.p.parser.nodeSet.types[s])===null||i===void 0)&&i.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=d));let p=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-p;if(s<o.minRepeatTerm||e&131072){let g=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,u,g,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let g=this.stack[c-3];this.state=o.getGoto(g,s,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(s,u)}storeNode(e,i,n,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,l=this.buffer.length;if(l==0&&a.parent&&(l=a.bufferBase-a.parent.bufferBase,a=a.parent),l>0&&a.buffer[l-4]==0&&a.buffer[l-1]>-1){if(i==n)return;if(a.buffer[l-2]>=i){a.buffer[l-2]=n;return}}}if(!o||this.pos==n)this.buffer.push(e,i,n,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let l=!1;for(let c=a;c>0&&this.buffer[c-2]>n;c-=4)if(this.buffer[c-1]>=0){l=!0;break}if(l)for(;a>0&&this.buffer[a-2]>n;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=i,this.buffer[a+2]=n,this.buffer[a+3]=s}}shift(e,i,n,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(i,n),i<=this.p.parser.maxNode&&this.buffer.push(i,n,s,4);else{let o=e,{parser:a}=this.p;(s>this.pos||i<=a.maxNode)&&(this.pos=s,a.stateFlag(o,1)||(this.reducePos=s)),this.pushState(o,n),this.shiftContext(i,n),i<=a.maxNode&&this.buffer.push(i,n,s,4)}}apply(e,i,n,s){e&65536?this.reduce(e):this.shift(e,i,n,s)}useNode(e,i){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(i,s),this.buffer.push(n,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,i=e.buffer.length;for(;i>0&&e.buffer[i-2]>e.reducePos;)i-=4;let n=e.buffer.slice(i),s=e.bufferBase+i;for(;e&&s==e.bufferBase;)e=e.parent;return new jE(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,i){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,i,4),this.storeNode(0,this.pos,i,n?8:4),this.pos=this.reducePos=i,this.score-=190}canShift(e){for(let i=new u9e(this);;){let n=this.p.parser.stateSlot(i.state,4)||this.p.parser.hasAction(i.state,e);if(n==0)return!1;if(!(n&65536))return!0;i.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let i=this.p.parser.nextStates(this.state);if(i.length>8||this.stack.length>=120){let s=[];for(let o=0,a;o<i.length;o+=2)(a=i[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(i[o],a);if(this.stack.length<120)for(let o=0;s.length<8&&o<i.length;o+=2){let a=i[o+1];s.some((l,c)=>c&1&&l==a)||s.push(i[o],a)}i=s}let n=[];for(let s=0;s<i.length&&n.length<4;s+=2){let o=i[s+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(i[s],this.pos),a.reducePos=this.pos,a.score-=200,n.push(a)}return n}forceReduce(){let{parser:e}=this.p,i=e.stateSlot(this.state,5);if(!(i&65536))return!1;if(!e.validAction(this.state,i)){let n=i>>19,s=i&65535,o=this.stack.length-n*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;i=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(i),!0}findForcedReduction(){let{parser:e}=this.p,i=[],n=(s,o)=>{if(!i.includes(s))return i.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let l=(a>>19)-o;if(l>1){let c=a&65535,u=this.stack.length-l*3;if(u>=0&&e.getGoto(this.stack[u],c,!1)>=0)return l<<19|65536|c}}else{let l=n(a,o+1);if(l!=null)return l}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=e.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,i){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(i)))}reduceContext(e,i){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(i)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let i=new TH(this.curContext.tracker,e);i.hash!=this.curContext.hash&&this.emitContext(),this.curContext=i}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class TH{constructor(e,i){this.tracker=e,this.context=i,this.hash=e.strict?e.hash(i):0}}class u9e{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let i=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],i,!0);this.state=s}}class YE{constructor(e,i,n){this.stack=e,this.pos=i,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,i=e.bufferBase+e.buffer.length){return new YE(e,i,i-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new YE(this.stack,this.pos,this.index)}}function tT(r,e=Uint16Array){if(typeof r!="string")return r;let i=null;for(let n=0,s=0;n<r.length;){let o=0;for(;;){let a=r.charCodeAt(n++),l=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,l=!0),o+=c,l)break;o*=46}i?i[s++]=o:i=new e(o)}return i}class PA{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const AH=new PA;class d9e{constructor(e,i){this.input=e,this.ranges=i,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=AH,this.rangeIndex=0,this.pos=this.chunkPos=i[0].from,this.range=i[0],this.end=i[i.length-1].to,this.readNext()}resolveOffset(e,i){let n=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<n.from;){if(!s)return null;let a=this.ranges[--s];o-=n.from-a.to,n=a}for(;i<0?o>n.to:o>=n.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];o+=a.from-n.to,n=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let i of this.ranges)if(i.to>e)return Math.max(e,i.from);return this.end}peek(e){let i=this.chunkOff+e,n,s;if(i>=0&&i<this.chunk.length)n=this.pos+e,s=this.chunk.charCodeAt(i);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(n=o,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let a=this.rangeIndex,l=this.range;for(;l.to<=n;)l=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-n)),s=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),s}acceptToken(e,i=0){let n=i?this.resolveOffset(i,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,i){this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:i}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=i,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),i=this.pos+e.length;this.chunk=i>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,i){if(i?(this.token=i,i.start=e,i.lookAhead=e+1,i.value=i.extended=-1):this.token=AH,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,i){if(e>=this.chunkPos&&i<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,i-this.chunkPos);if(e>=this.chunk2Pos&&i<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,i-this.chunk2Pos);if(e>=this.range.from&&i<=this.range.to)return this.input.read(e,i);let n="";for(let s of this.ranges){if(s.from>=i)break;s.to>e&&(n+=this.input.read(Math.max(s.from,e),Math.min(s.to,i)))}return n}}class Ey{constructor(e,i){this.data=e,this.id=i}token(e,i){let{parser:n}=i.p;f9e(this.data,e,i,this.id,n.data,n.tokenPrecTable)}}Ey.prototype.contextual=Ey.prototype.fallback=Ey.prototype.extend=!1;Ey.prototype.fallback=Ey.prototype.extend=!1;class ise{constructor(e,i={}){this.token=e,this.contextual=!!i.contextual,this.fallback=!!i.fallback,this.extend=!!i.extend}}function f9e(r,e,i,n,s,o){let a=0,l=1<<n,{dialect:c}=i.p.parser;e:for(;l&r[a];){let u=r[a+1];for(let g=a+3;g<u;g+=2)if((r[g+1]&l)>0){let y=r[g];if(c.allows(y)&&(e.token.value==-1||e.token.value==y||p9e(y,e.token.value,s,o))){e.acceptToken(y);break}}let d=e.next,p=0,m=r[a+2];if(e.next<0&&m>p&&r[u+m*3-3]==65535){a=r[u+m*3-1];continue e}for(;p<m;){let g=p+m>>1,y=u+g+(g<<1),_=r[y],x=r[y+1]||65536;if(d<_)m=g;else if(d>=x)p=g+1;else{a=r[y+2],e.advance();continue e}}break}}function EH(r,e,i){for(let n=e,s;(s=r[n])!=65535;n++)if(s==i)return n-e;return-1}function p9e(r,e,i,n){let s=EH(i,n,e);return s<0||EH(i,n,r)<s}const qa=typeof process<"u"&&CH&&/\bparse\b/.test(CH.LOG);let BR=null;function MH(r,e,i){let n=r.cursor(zs.IncludeAnonymous);for(n.moveTo(e);;)if(!(i<0?n.childBefore(e):n.childAfter(e)))for(;;){if((i<0?n.to<e:n.from>e)&&!n.type.isError)return i<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(r.length,Math.max(n.from+1,e+25));if(i<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return i<0?0:r.length}}class m9e{constructor(e,i){this.fragments=e,this.nodeSet=i,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?MH(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?MH(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let i=this.trees.length-1;if(i<0)return this.nextFragment(),null;let n=this.trees[i],s=this.index[i];if(s==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=n.children[s],a=this.start[i]+n.positions[s];if(a>e)return this.nextStart=a,null;if(o instanceof fs){if(a==e){if(a<this.safeFrom)return null;let l=a+o.length;if(l<=this.safeTo){let c=o.prop(Yi.lookAhead);if(!c||l+c<this.fragment.to)return o}}this.index[i]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[i]++,this.nextStart=a+o.length}}}class g9e{constructor(e,i){this.stream=i,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new PA)}getActions(e){let i=0,n=null,{parser:s}=e.p,{tokenizers:o}=s,a=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,c=0;for(let u=0;u<o.length;u++){if(!(1<<u&a))continue;let d=o[u],p=this.tokens[u];if(!(n&&!d.fallback)&&((d.contextual||p.start!=e.pos||p.mask!=a||p.context!=l)&&(this.updateCachedToken(p,d,e),p.mask=a,p.context=l),p.lookAhead>p.end+25&&(c=Math.max(p.lookAhead,c)),p.value!=0)){let m=i;if(p.extended>-1&&(i=this.addActions(e,p.extended,p.end,i)),i=this.addActions(e,p.value,p.end,i),!d.extend&&(n=p,i>m))break}}for(;this.actions.length>i;)this.actions.pop();return c&&e.setLookAhead(c),!n&&e.pos==this.stream.end&&(n=new PA,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,i=this.addActions(e,n.value,n.end,i)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let i=new PA,{pos:n,p:s}=e;return i.start=n,i.end=Math.min(n+1,s.stream.end),i.value=n==s.stream.end?s.parser.eofTerm:0,i}updateCachedToken(e,i,n){let s=this.stream.clipPos(n.pos);if(i.token(this.stream.reset(s,e),n),e.value>-1){let{parser:o}=n.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let l=o.specializers[a](this.stream.read(e.start,e.end),n);if(l>=0&&n.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,i,n,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=i,this.actions[s++]=n,s}addActions(e,i,n,s){let{state:o}=e,{parser:a}=e.p,{data:l}=a;for(let c=0;c<2;c++)for(let u=a.stateSlot(o,c?2:1);;u+=3){if(l[u]==65535)if(l[u+1]==1)u=rd(l,u+2);else{s==0&&l[u+1]==2&&(s=this.putAction(rd(l,u+2),i,n,s));break}l[u]==i&&(s=this.putAction(rd(l,u+1),i,n,s))}return s}}class v9e{constructor(e,i,n,s){this.parser=e,this.input=i,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new d9e(i,s),this.tokens=new g9e(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[jE.start(this,e.top[0],o)],this.fragments=n.length&&this.stream.end-o>e.bufferLength*4?new m9e(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,i=this.minStackPos,n=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let l=e[a];for(;;){if(this.tokens.mainToken=null,l.pos>i)n.push(l);else{if(this.advanceStack(l,n,e))continue;{s||(s=[],o=[]),s.push(l);let c=this.tokens.getMainToken(l);o.push(c.value,c.end)}}break}}if(!n.length){let a=s&&_9e(s);if(a)return qa&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw qa&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,n);if(a)return qa&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(n.length>a)for(n.sort((l,c)=>c.score-l.score);n.length>a;)n.pop();n.some(l=>l.reducePos>i)&&this.recovering--}else if(n.length>1){e:for(let a=0;a<n.length-1;a++){let l=n[a];for(let c=a+1;c<n.length;c++){let u=n[c];if(l.sameState(u)||l.buffer.length>500&&u.buffer.length>500)if((l.score-u.score||l.buffer.length-u.buffer.length)>0)n.splice(c--,1);else{n.splice(a--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let a=1;a<n.length;a++)n[a].pos<this.minStackPos&&(this.minStackPos=n[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,i,n){let s=e.pos,{parser:o}=this,a=qa?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,d=u?e.curContext.hash:0;for(let p=this.fragments.nodeAt(s);p;){let m=this.parser.nodeSet.types[p.type.id]==p.type?o.getGoto(e.state,p.type.id):-1;if(m>-1&&p.length&&(!u||(p.prop(Yi.contextHash)||0)==d))return e.useNode(p,m),qa&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(p.type.id)})`),!0;if(!(p instanceof fs)||p.children.length==0||p.positions[0]>0)break;let g=p.children[0];if(g instanceof fs&&p.positions[0]==0)p=g;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),qa&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let u=0;u<c.length;){let d=c[u++],p=c[u++],m=c[u++],g=u==c.length||!n,y=g?e:e.split(),_=this.tokens.mainToken;if(y.apply(d,p,_?_.start:y.pos,m),qa&&console.log(a+this.stackID(y)+` (via ${d&65536?`reduce of ${o.getName(d&65535)}`:"shift"} for ${o.getName(p)} @ ${s}${y==e?"":", split"})`),g)return!0;y.pos>s?i.push(y):n.push(y)}return!1}advanceFully(e,i){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return PH(e,i),!0}}runRecovery(e,i,n){let s=null,o=!1;for(let a=0;a<e.length;a++){let l=e[a],c=i[a<<1],u=i[(a<<1)+1],d=qa?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),qa&&console.log(d+this.stackID(l)+" (restarted)"),this.advanceFully(l,n))))continue;let p=l.split(),m=d;for(let g=0;p.forceReduce()&&g<10&&(qa&&console.log(m+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,n));g++)qa&&(m=this.stackID(p)+" -> ");for(let g of l.recoverByInsert(c))qa&&console.log(d+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,n);this.stream.end>l.pos?(u==l.pos&&(u++,c=0),l.recoverByDelete(c,u),qa&&console.log(d+this.stackID(l)+` (via recover-delete ${this.parser.getName(c)})`),PH(l,n)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),fs.build({buffer:YE.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let i=(BR||(BR=new WeakMap)).get(e);return i||BR.set(e,i=String.fromCodePoint(this.nextStackID++)),i+e}}function PH(r,e){for(let i=0;i<e.length;i++){let n=e[i];if(n.pos==r.pos&&n.sameState(r)){e[i].score<r.score&&(e[i]=r);return}}e.push(r)}class y9e{constructor(e,i,n){this.source=e,this.flags=i,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}class qE extends Dne{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let i=e.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let l=0;l<e.repeatNodeCount;l++)i.push("");let n=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<i.length;l++)s.push([]);function o(l,c,u){s[l].push([c,c.deserialize(String(u))])}if(e.nodeProps)for(let l of e.nodeProps){let c=l[0];typeof c=="string"&&(c=Yi[c]);for(let u=1;u<l.length;){let d=l[u++];if(d>=0)o(d,c,l[u++]);else{let p=l[u+-d];for(let m=-d;m>0;m--)o(l[u++],c,p);u++}}}this.nodeSet=new s6(i.map((l,c)=>La.define({name:c>=this.minRepeatTerm?void 0:l,id:c,props:s[c],top:n.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=kne;let a=tT(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(kH),this.states=tT(e.states,Uint32Array),this.data=tT(e.stateData),this.goto=tT(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Ey(a,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,i,n){let s=new v9e(this,e,i,n);for(let o of this.wrappers)s=o(s,e,i,n);return s}getGoto(e,i,n=!1){let s=this.goto;if(i>=s[0])return-1;for(let o=s[i+1];;){let a=s[o++],l=a&1,c=s[o++];if(l&&n)return c;for(let u=o+(a>>1);o<u;o++)if(s[o]==e)return c;if(l)return-1}}hasAction(e,i){let n=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),a;;o+=3){if((a=n[o])==65535)if(n[o+1]==1)a=n[o=rd(n,o+2)];else{if(n[o+1]==2)return rd(n,o+2);break}if(a==i||a==0)return rd(n,o+1)}return 0}stateSlot(e,i){return this.states[e*6+i]}stateFlag(e,i){return(this.stateSlot(e,0)&i)>0}validAction(e,i){return!!this.allActions(e,n=>n==i?!0:null)}allActions(e,i){let n=this.stateSlot(e,4),s=n?i(n):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=rd(this.data,o+2);else break;s=i(rd(this.data,o+1))}return s}nextStates(e){let i=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=rd(this.data,n+2);else break;if(!(this.data[n+2]&1)){let s=this.data[n+1];i.some((o,a)=>a&1&&o==s)||i.push(this.data[n],s)}}return i}configure(e){let i=Object.assign(Object.create(qE.prototype),this);if(e.props&&(i.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);i.top=n}return e.tokenizers&&(i.tokenizers=this.tokenizers.map(n=>{let s=e.tokenizers.find(o=>o.from==n);return s?s.to:n})),e.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((n,s)=>{let o=e.specializers.find(l=>l.from==n.external);if(!o)return n;let a=Object.assign(Object.assign({},n),{external:o.to});return i.specializers[s]=kH(a),a})),e.contextTracker&&(i.context=e.contextTracker),e.dialect&&(i.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(i.strict=e.strict),e.wrap&&(i.wrappers=i.wrappers.concat(e.wrap)),e.bufferLength!=null&&(i.bufferLength=e.bufferLength),i}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let i=this.dynamicPrecedences;return i==null?0:i[e]||0}parseDialect(e){let i=Object.keys(this.dialects),n=i.map(()=>!1);if(e)for(let o of e.split(" ")){let a=i.indexOf(o);a>=0&&(n[a]=!0)}let s=null;for(let o=0;o<i.length;o++)if(!n[o])for(let a=this.dialects[i[o]],l;(l=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new y9e(e,n,s)}static deserialize(e){return new qE(e)}}function rd(r,e){return r[e]|r[e+1]<<16}function _9e(r){let e=null;for(let i of r){let n=i.p.stoppedAt;(i.pos==i.p.stream.end||n!=null&&i.pos>n)&&i.p.parser.stateFlag(i.state,2)&&(!e||e.score<i.score)&&(e=i)}return e}function kH(r){if(r.external){let e=r.extend?1:0;return(i,n)=>r.external(i,n)<<1|e}return r.get}const IH=1,x9e=2,b9e=3,w9e=82,O9e=76,S9e=117,C9e=85,T9e=97,A9e=122,E9e=65,M9e=90,P9e=95,yD=48,RH=34,k9e=40,BH=41,I9e=32,DH=62,R9e=new ise(r=>{if(r.next==O9e||r.next==C9e?r.advance():r.next==S9e&&(r.advance(),r.next==yD+8&&r.advance()),r.next!=w9e||(r.advance(),r.next!=RH))return;r.advance();let e="";for(;r.next!=k9e;){if(r.next==I9e||r.next<=13||r.next==BH)return;e+=String.fromCharCode(r.next),r.advance()}for(r.advance();;){if(r.next<0)return r.acceptToken(IH);if(r.next==BH){let i=!0;for(let n=0;i&&n<e.length;n++)r.peek(n+1)!=e.charCodeAt(n)&&(i=!1);if(i&&r.peek(e.length+1)==RH)return r.acceptToken(IH,2+e.length)}r.advance()}}),B9e=new ise(r=>{if(r.next==DH)r.peek(1)==DH&&r.acceptToken(x9e,1);else{let e=!1,i=0;for(;;i++){if(r.next>=E9e&&r.next<=M9e)e=!0;else{if(r.next>=T9e&&r.next<=A9e)return;if(r.next!=P9e&&!(r.next>=yD&&r.next<=yD+9))break}r.advance()}e&&i>1&&r.acceptToken(b9e)}},{extend:!0}),D9e=Lne({"typedef struct union enum class typename decltype auto template operator friend noexcept namespace using requires concept import export module __attribute__ __declspec __based":Ye.definitionKeyword,"extern MsCallModifier MsPointerModifier extern static register thread_local inline const volatile restrict _Atomic mutable constexpr constinit consteval virtual explicit VirtualSpecifier Access":Ye.modifier,"if else switch for while do case default return break continue goto throw try catch":Ye.controlKeyword,"co_return co_yield co_await":Ye.controlKeyword,"new sizeof delete static_assert":Ye.operatorKeyword,"NULL nullptr":Ye.null,this:Ye.self,"True False":Ye.bool,"TypeSize PrimitiveType":Ye.standard(Ye.typeName),TypeIdentifier:Ye.typeName,FieldIdentifier:Ye.propertyName,"CallExpression/FieldExpression/FieldIdentifier":Ye.function(Ye.propertyName),"ModuleName/Identifier":Ye.namespace,PartitionName:Ye.labelName,StatementIdentifier:Ye.labelName,"Identifier DestructorName":Ye.variableName,"CallExpression/Identifier":Ye.function(Ye.variableName),"CallExpression/ScopedIdentifier/Identifier":Ye.function(Ye.variableName),"FunctionDeclarator/Identifier FunctionDeclarator/DestructorName":Ye.function(Ye.definition(Ye.variableName)),NamespaceIdentifier:Ye.namespace,OperatorName:Ye.operator,ArithOp:Ye.arithmeticOperator,LogicOp:Ye.logicOperator,BitOp:Ye.bitwiseOperator,CompareOp:Ye.compareOperator,AssignOp:Ye.definitionOperator,UpdateOp:Ye.updateOperator,LineComment:Ye.lineComment,BlockComment:Ye.blockComment,Number:Ye.number,String:Ye.string,"RawString SystemLibString":Ye.special(Ye.string),CharLiteral:Ye.character,EscapeSequence:Ye.escape,"UserDefinedLiteral/Identifier":Ye.literal,PreProcArg:Ye.meta,"PreprocDirectiveName #include #ifdef #ifndef #if #define #else #endif #elif":Ye.processingInstruction,MacroName:Ye.special(Ye.name),"( )":Ye.paren,"[ ]":Ye.squareBracket,"{ }":Ye.brace,"< >":Ye.angleBracket,". ->":Ye.derefOperator,", ;":Ye.separator}),L9e={__proto__:null,bool:34,char:34,int:34,float:34,double:34,void:34,size_t:34,ssize_t:34,intptr_t:34,uintptr_t:34,charptr_t:34,int8_t:34,int16_t:34,int32_t:34,int64_t:34,uint8_t:34,uint16_t:34,uint32_t:34,uint64_t:34,char8_t:34,char16_t:34,char32_t:34,char64_t:34,const:68,volatile:70,restrict:72,_Atomic:74,mutable:76,constexpr:78,constinit:80,consteval:82,struct:86,__declspec:90,final:148,override:148,public:152,private:152,protected:152,virtual:154,extern:160,static:162,register:164,inline:166,thread_local:168,__attribute__:172,__based:178,__restrict:180,__uptr:180,__sptr:180,_unaligned:180,__unaligned:180,noexcept:194,requires:198,TRUE:784,true:784,FALSE:786,false:786,typename:218,class:220,template:234,throw:248,__cdecl:256,__clrcall:256,__stdcall:256,__fastcall:256,__thiscall:256,__vectorcall:256,try:260,catch:264,export:282,import:286,case:296,default:298,if:308,else:314,switch:318,do:322,while:324,for:330,return:334,break:338,continue:342,goto:346,co_return:350,co_yield:354,using:362,typedef:366,namespace:380,new:398,delete:400,co_await:402,concept:406,enum:410,static_assert:414,friend:422,union:424,explicit:430,operator:444,module:456,signed:518,unsigned:518,long:518,short:518,decltype:528,auto:530,sizeof:566,NULL:572,nullptr:586,this:588},N9e={__proto__:null,"<":131},V9e={__proto__:null,">":135},F9e={__proto__:null,operator:388,new:576,delete:582},$9e=qE.deserialize({version:14,states:"$:|Q!QQVOOP'gOUOOO(XOWO'#CdO,RQUO'#CgO,]QUO'#FjO-sQbO'#CwO.UQUO'#CwO0TQUO'#KZO0[QUO'#CvO0gOpO'#DvO0oQ!dO'#D]OOQR'#JO'#JOO5XQVO'#GUO5fQUO'#JVOOQQ'#JV'#JVO8zQUO'#KmO<eQUO'#KmO>{QVO'#E^O?]QUO'#E^OOQQ'#Ed'#EdOOQQ'#Ee'#EeO?bQVO'#EfO@XQVO'#EiOBUQUO'#FPOBvQUO'#FhOOQR'#Fj'#FjOB{QUO'#FjOOQR'#LQ'#LQOOQR'#LP'#LPOETQVO'#KQOFxQUO'#LVOGVQUO'#KqOGkQUO'#LVOH]QUO'#LXOOQR'#HU'#HUOOQR'#HV'#HVOOQR'#HW'#HWOOQR'#K|'#K|OOQR'#J_'#J_Q!QQVOOOHkQVO'#FOOIWQUO'#EhOI_QUOOOKZQVO'#HgOKkQUO'#HgONVQUO'#KqONaQUO'#KqOOQQ'#Kq'#KqO!!_QUO'#KqOOQQ'#Jq'#JqO!!lQUO'#HxOOQQ'#KZ'#KZO!&^QUO'#KZO!&zQUO'#KQO!(zQVO'#I]O!(zQVO'#I`OCQQUO'#KQOOQQ'#Ip'#IpOOQQ'#KQ'#KQO!,}QUO'#KZOOQR'#KY'#KYO!-UQUO'#DYO!/mQUO'#KnOOQQ'#Kn'#KnO!/tQUO'#KnO!/{QUO'#ETO!0QQUO'#EWO!0VQUO'#FRO8zQUO'#FPO!QQVO'#F^O!0[Q#vO'#F`O!0gQUO'#FkO!0oQUO'#FpO!0tQVO'#FrO!0oQUO'#FuO!3sQUO'#FvO!3xQVO'#FxO!4SQUO'#FzO!4XQUO'#F|O!4^QUO'#GOO!4cQVO'#GQO!(zQVO'#GSO!4jQUO'#GpO!4xQUO'#GYO!(zQVO'#FeO!6VQUO'#FeO!6[QVO'#G`O!6cQUO'#GaO!6nQUO'#GnO!6sQUO'#GrO!6xQUO'#GzO!7jQ&lO'#HiO!:mQUO'#GuO!:}QUO'#HXO!;YQUO'#HZO!;bQUO'#DWO!;bQUO'#HuO!;bQUO'#HvO!;yQUO'#HwO!<[QUO'#H|O!=PQUO'#H}O!>uQVO'#IbO!(zQVO'#IdO!?PQUO'#IgO!?WQVO'#IjP!@}{,UO'#CbP!6n{,UO'#CbP!AY{7[O'#CbP!6n{,UO'#CbP!A_{,UO'#CbP!AjOSO'#IzPOOO)CEn)CEnOOOO'#I|'#I|O!AtOWO,59OOOQR,59O,59OO!(zQVO,59UOOQQ,59W,59WO!(zQVO,5;ROOQR,5<U,5<UO!BPQUO,59YO!(zQVO,5>qOOQR'#IX'#IXOOQR'#IY'#IYOOQR'#IZ'#IZOOQR'#I['#I[O!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!(zQVO,5>rO!DOQVO,5>zOOQQ,5?W,5?WO!EqQVO'#ChO!IjQUO'#CyOOQQ,59c,59cOOQQ,59b,59bOOQQ,5<},5<}O!IwQ&lO,5=mO!?PQUO,5?RO!LkQVO,5?UO!LrQbO,59cO!L}QVO'#FYOOQQ,5?P,5?PO!M_QVO,59VO!MfO`O,5:bO!MkQbO'#D^O!M|QbO'#K^O!N[QbO,59wO!NdQbO'#CwO!NuQUO'#CwO!NzQUO'#KZO# UQUO'#CvOOQR-E<|-E<|O# aQUO,5AoO# hQVO'#EfO@XQVO'#EiOBUQUO,5;kOOQR,5<p,5<pO#$aQUO'#KQO#$hQUO'#KQO!(zQVO'#IUO8zQUO,5;kO#${Q&lO'#HiO#(SQUO'#CsO#*wQbO'#CwO#*|QUO'#CvO#.jQUO'#KZOOQQ-E=T-E=TO#0}QUO,5AXO#1XQUO'#KZO#1cQUO,5AXOOQR,5Ao,5AoOOQQ,5>l,5>lO#3gQUO'#CgO#4]QUO,5>pO#6OQUO'#IeOOQR'#I}'#I}O#6WQUO,5:xO#6tQUO,5:xO#7eQUO,5:xO#8YQUO'#CtO!0QQUO'#ClOOQQ'#JW'#JWO#6tQUO,5:xO#8bQUO,5;QO!4xQUO'#C}O#9kQUO,5;QO#9pQUO,5>QO#:|QUO'#C}O#;dQUO,5>{O#;iQUO'#KwO#<rQUO,5;TO#<zQVO,5;TO#=UQUO,5;TOOQQ,5;T,5;TO#>}QUO'#L[O#?UQUO,5>UO#?ZQbO'#CwO#?fQUO'#GcO#?kQUO'#E^O#@[QUO,5;kO#@sQUO'#K}O#@{QUO,5;rOKkQUO'#HfOBUQUO'#HgO#AQQUO'#KqO!6nQUO'#HjO#AxQUO'#CtO!0tQVO,5<SOOQQ'#Cg'#CgOOQR'#Jh'#JhO#A}QVO,5=`OOQQ,5?Z,5?ZO#DWQbO'#CwO#DcQUO'#GcOOQQ'#Ji'#JiOOQQ-E=g-E=gOGVQUO,5AqOGkQUO,5AqO#DhQUO,5AsO#DsQUO'#G|OOQR,5Aq,5AqO#DhQUO,5AqO#EOQUO'#HOO#EWQUO,5AsOOQR,5As,5AsOOQR,5At,5AtO#EfQVO,5AtOOQR-E=]-E=]O#G`QVO,5;jOOQR,5;j,5;jO#IaQUO'#EjO#JfQUO'#EwO#K]QVO'#ExO#MoQUO'#EvO#MwQUO'#EyO#NvQUO'#EzOOQQ'#Kz'#KzO$ mQUO,5;SO$!sQUO'#EvOOQQ,5;S,5;SO$#pQUO,5;SO$%cQUO,5:yO$'|QVO,5>PO$(WQUO'#E[O$(eQUO,5>ROOQQ,5>S,5>SO$,RQVO'#C{OOQQ-E=o-E=oOOQQ,5>d,5>dOOQQ,59`,59`O$,]QUO,5>wO$.]QUO,5>zO!6nQUO,59tO$.pQUO,5;qO$.}QUO,5<{O!0QQUO,5:oOOQQ,5:r,5:rO$/YQUO,5;mO$/_QUO'#KmOBUQUO,5;kOOQR,5;x,5;xO$0OQUO'#FbO$0^QUO'#FbO$0cQUO,5;zO$3|QVO'#FmO!0tQVO,5<VO!0oQUO,5<VO!0VQUO,5<[O$4TQVO'#GUO$7PQUO,5<^O!0tQVO,5<aO$:gQVO,5<bO$:tQUO,5<dOOQR,5<d,5<dO$;}QUO,5<dOOQR,5<f,5<fOOQR,5<h,5<hOOQQ'#Fi'#FiO$<SQUO,5<jO$<XQUO,5<lOOQR,5<l,5<lO$=_QUO,5<nO$>eQUO,5<rO$>pQUO,5=[O$>uQUO,5=[O!4xQUO,5<tO$>}QUO,5<tO$?cQUO,5<PO$@iQVO,5<PO$BzQUO,5<zOOQR,5<z,5<zOOQR,5<{,5<{O$>uQUO,5<{O$DQQUO,5<{O$D]QUO,5=YO!(zQVO,5=^O!(zQVO,5=fO#NeQUO,5=mOOQQ,5>T,5>TO$FbQUO,5>TO$FlQUO,5>TO$FqQUO,5>TO$FvQUO,5>TO!6nQUO,5>TO$HtQUO'#KZO$H{QUO,5=oO$IWQUO,5=aOKkQUO,5=oO$JQQUO,5=sOOQR,5=s,5=sO$JYQUO,5=sO$LeQVO'#H[OOQQ,5=u,5=uO!;]QUO,5=uO%#`QUO'#KjO%#gQUO'#K[O%#{QUO'#KjO%$VQUO'#DyO%$hQUO'#D|O%'eQUO'#K[OOQQ'#K['#K[O%)WQUO'#K[O%#gQUO'#K[O%)]QUO'#K[OOQQ,59r,59rOOQQ,5>a,5>aOOQQ,5>b,5>bO%)eQUO'#HzO%)mQUO,5>cOOQQ,5>c,5>cO%-XQUO,5>cO%-dQUO,5>hO%1OQVO,5>iO%1VQUO,5>|O# hQVO'#EfO%4]QUO,5>|OOQQ,5>|,5>|O%4|QUO,5?OO%7QQUO,5?RO!<[QUO,5?RO%8|QUO,5?UO%<iQVO,5?UP!A_{,UO,58|P%<p{,UO,58|P%=O{7[O,58|P%=U{,UO,58|PO{O'#Ju'#JuP%=Z{,UO'#LcPOOO'#Lc'#LcP%=a{,UO'#LcPOOO,58|,58|POOO,5?f,5?fP%=fOSO,5?fOOOO-E<z-E<zOOQR1G.j1G.jO%=mQUO1G.pO%>sQUO1G0mOOQQ1G0m1G0mO%@PQUO'#CoO%B`QbO'#CwO%BkQUO'#CrO%BpQUO'#CrO%BuQUO1G.tO#AxQUO'#CqOOQQ1G.t1G.tO%DxQUO1G4]O%FOQUO1G4^O%GqQUO1G4^O%IdQUO1G4^O%KVQUO1G4^O%LxQUO1G4^O%NkQUO1G4^O&!^QUO1G4^O&$PQUO1G4^O&%rQUO1G4^O&'eQUO1G4^O&)WQUO1G4^O&*yQUO'#KPO&,SQUO'#KPO&,[QUO,59SOOQQ,5=P,5=PO&.dQUO,5=PO&.nQUO,5=PO&.sQUO,5=PO&.xQUO,5=PO!6nQUO,5=PO#NeQUO1G3XO&/SQUO1G4mO!<[QUO1G4mO&1OQUO1G4pO&2qQVO1G4pOOQQ1G.}1G.}OOQQ1G.|1G.|OOQQ1G2i1G2iO!IwQ&lO1G3XO&2xQUO'#LOO@XQVO'#EiO&4RQUO'#F]OOQQ'#Ja'#JaO&4WQUO'#FZO&4cQUO'#LOO&4kQUO,5;tO&4pQUO1G.qOOQQ1G.q1G.qOOQR1G/|1G/|O&6cQ!dO'#JPO&6hQbO,59xO&8yQ!eO'#D`O&9QQ!dO'#JRO&9VQbO,5@xO&9VQbO,5@xOOQR1G/c1G/cO&9bQbO1G/cO&9gQ&lO'#GeO&:eQbO,59cOOQR1G7Z1G7ZO#@[QUO1G1VO&:pQUO1G1^OBUQUO1G1VO&=RQUO'#CyO#*wQbO,59cO&@tQUO1G6sOOQR-E<{-E<{O&BWQUO1G0dO#6WQUO1G0dOOQQ-E=U-E=UO#6tQUO1G0dOOQQ1G0l1G0lO&B{QUO,59iOOQQ1G3l1G3lO&CcQUO,59iO&CyQUO,59iO!M_QVO1G4gO!(zQVO'#JYO&DeQUO,5AcOOQQ1G0o1G0oO!(zQVO1G0oO!6nQUO'#JnO&DmQUO,5AvOOQQ1G3p1G3pOOQR1G1V1G1VO&HjQVO'#FOO!M_QVO,5;sOOQQ,5;s,5;sOBUQUO'#JcO&JfQUO,5AiO&JnQVO'#E[OOQR1G1^1G1^O&M]QUO'#L[OOQR1G1n1G1nOOQR-E=f-E=fOOQR1G7]1G7]O#DhQUO1G7]OGVQUO1G7]O#DhQUO1G7_OOQR1G7_1G7_O&MeQUO'#G}O&MmQUO'#LWOOQQ,5=h,5=hO&M{QUO,5=jO&NQQUO,5=kOOQR1G7`1G7`O#EfQVO1G7`O&NVQUO1G7`O' ]QVO,5=kOOQR1G1U1G1UO$.vQUO'#E]O'!RQUO'#E]OOQQ'#Ky'#KyO'!lQUO'#KxO'!wQUO,5;UO'#PQUO'#ElO'#dQUO'#ElO'#wQUO'#EtOOQQ'#J['#J[O'#|QUO,5;cO'$sQUO,5;cO'%nQUO,5;dO'&tQVO,5;dOOQQ,5;d,5;dO''OQVO,5;dO'&tQVO,5;dO''VQUO,5;bO'(SQUO,5;eO'(_QUO'#KpO'(gQUO,5:vO'(lQUO,5;fOOQQ1G0n1G0nOOQQ'#J]'#J]O''VQUO,5;bO!4xQUO'#E}OOQQ,5;b,5;bO')gQUO'#E`O'+aQUO'#E{OHrQUO1G0nO'+fQUO'#EbOOQQ'#JX'#JXO'-OQUO'#KrOOQQ'#Kr'#KrO'-xQUO1G0eO'.pQUO1G3kO'/vQVO1G3kOOQQ1G3k1G3kO'0QQVO1G3kO'0XQUO'#L_O'1eQUO'#KXO'1sQUO'#KWO'2OQUO,59gO'2WQUO1G/`O'2]QUO'#FPOOQR1G1]1G1]OOQR1G2g1G2gO$>uQUO1G2gO'2gQUO1G2gO'2rQUO1G0ZOOQR'#J`'#J`O'2wQVO1G1XO'8pQUO'#FTO'8uQUO1G1VO!6nQUO'#JdO'9TQUO,5;|O$0^QUO,5;|OOQQ'#Fc'#FcOOQQ,5;|,5;|O'9cQUO1G1fOOQR1G1f1G1fO'9kQUO,5<XO$.vQUO'#FWOBUQUO'#FWO'9rQUO,5<XO!(zQVO,5<XO'9zQUO,5<XO':PQVO1G1qO!0tQVO1G1qOOQR1G1v1G1vO'?oQUO1G1xOOQR1G1{1G1{O'?tQUO1G1|OBUQUO1G2]O'@}QVO1G1|O'CcQUO1G1|O'ChQUO'#GWO8zQUO1G2]OOQR1G2O1G2OOOQR1G2U1G2UOOQR1G2W1G2WOOQR1G2Y1G2YO'CmQUO1G2^O!4xQUO1G2^OOQR1G2v1G2vO'CuQUO1G2vO$>}QUO1G2`OOQQ'#Cu'#CuO'CzQUO'#G[O'DuQUO'#G[O'DzQUO'#LRO'EYQUO'#G_OOQQ'#LS'#LSO'EhQUO1G2`O'EmQVO1G1kO'HOQVO'#GUOBUQUO'#FWOOQR'#Je'#JeO'EmQVO1G1kO'HYQUO'#FvOOQR1G2f1G2fO'H_QUO1G2gO'HdQUO'#JgO'2gQUO1G2gO!(zQVO1G2tO'HlQUO1G2xO'IuQUO1G3QO'J{QUO1G3XOOQQ1G3o1G3oO'KaQUO1G3oOOQR1G3Z1G3ZO'KfQUO'#KZO'2]QUO'#LTOGkQUO'#LVOOQR'#Gy'#GyO#DhQUO'#LXOOQR'#HQ'#HQO'KpQUO'#GvO'#wQUO'#GuOOQR1G2{1G2{O'LmQUO1G2{O'MdQUO1G3ZO'MoQUO1G3_O'MtQUO1G3_OOQR1G3_1G3_O'M|QUO'#H]OOQR'#H]'#H]O( VQUO'#H]O!(zQVO'#H`O!(zQVO'#H_OOQR'#LZ'#LZO( [QUO'#LZOOQR'#Jk'#JkO( aQVO,5=vOOQQ,5=v,5=vO( hQUO'#H^O( pQUO'#HZOOQQ1G3a1G3aO( zQUO,5@vOOQQ,5@v,5@vO%)WQUO,5@vO%)]QUO,5@vO%$VQUO,5:eO(%iQUO'#KkO(%wQUO'#KkOOQQ,5:e,5:eOOQQ'#JS'#JSO(&SQUO'#D}O(&^QUO'#KqOGkQUO'#LVO('YQUO'#D}OOQQ'#Hp'#HpOOQQ'#Hr'#HrOOQQ'#Hs'#HsOOQQ'#Kl'#KlOOQQ'#JU'#JUO('dQUO,5:hOOQQ,5:h,5:hO((aQUO'#LVO((nQUO'#HtO()UQUO,5@vO()]QUO'#H{O()hQUO'#L^O()pQUO,5>fO()uQUO'#L]OOQQ1G3}1G3}O(-lQUO1G3}O(-sQUO1G3}O(-zQUO1G4TO(/QQUO1G4TO(/VQUO,5A|O!6nQUO1G4hO!(zQVO'#IiOOQQ1G4m1G4mO(/[QUO1G4mO(1_QVO1G4pPOOO1G.h1G.hP!A_{,UO1G.hP(3_QUO'#LeP(3j{,UO1G.hP(3o{7[O1G.hPO{O-E=s-E=sPOOO,5A},5A}P(3w{,UO,5A}POOO1G5Q1G5QO!(zQVO7+$[O(3|QUO'#CyOOQQ,59^,59^O(4XQbO,59cO(4dQbO,59^OOQQ,59],59]OOQQ7+)w7+)wO!M_QVO'#JtO(4oQUO,5@kOOQQ1G.n1G.nOOQQ1G2k1G2kO(4wQUO1G2kO(4|QUO7+(sOOQQ7+*X7+*XO(7bQUO7+*XO(7iQUO7+*XO(1_QVO7+*[O#NeQUO7+(sO(7vQVO'#JbO(8ZQUO,5AjO(8cQUO,5;vOOQQ'#Co'#CoOOQQ,5;w,5;wO!(zQVO'#F[OOQQ-E=_-E=_O!M_QVO,5;uOOQQ1G1`1G1`OOQQ,5?k,5?kOOQQ-E<}-E<}OOQR'#Dg'#DgOOQR'#Di'#DiOOQR'#Dl'#DlO(9lQ!eO'#K_O(9sQMkO'#K_O(9zQ!eO'#K_OOQR'#K_'#K_OOQR'#JQ'#JQO(:RQ!eO,59zOOQQ,59z,59zO(:YQbO,5?mOOQQ-E=P-E=PO(:hQbO1G6dOOQR7+$}7+$}OOQR7+&q7+&qOOQR7+&x7+&xO'8uQUO7+&qO(:sQUO7+&OO#6WQUO7+&OO(;hQUO1G/TO(<OQUO1G/TO(<jQUO7+*ROOQQ7+*V7+*VO(>]QUO,5?tOOQQ-E=W-E=WO(?fQUO7+&ZOOQQ,5@Y,5@YOOQQ-E=l-E=lO(?kQUO'#LOO@XQVO'#EiO(@wQUO1G1_OOQQ1G1_1G1_O(BQQUO,5?}OOQQ,5?},5?}OOQQ-E=a-E=aO(BfQUO'#KpOOQR7+,w7+,wO#DhQUO7+,wOOQR7+,y7+,yO(BsQUO,5=iO#DsQUO'#JjO(CUQUO,5ArOOQR1G3U1G3UOOQR1G3V1G3VO(CdQUO7+,zOOQR7+,z7+,zO(E[QUO,5:wO(FyQUO'#EwO!(zQVO,5;VO(GlQUO,5:wO(GvQUO'#EpO(HXQUO'#EzOOQQ,5;Z,5;ZO#K]QVO'#ExO(HoQUO,5:wO(HvQUO'#EyO#GgQUO'#JZO(J`QUO,5AdOOQQ1G0p1G0pO(JkQUO,5;WO!<[QUO,5;^O(KUQUO,5;_O(KdQUO,5;WO(MvQUO,5;`OOQQ-E=Y-E=YO(NOQUO1G0}OOQQ1G1O1G1OO(NyQUO1G1OO)!PQVO1G1OO)!WQVO1G1OO)!bQUO1G0|OOQQ1G0|1G0|OOQQ1G1P1G1PO)#_QUO'#JoO)#iQUO,5A[OOQQ1G0b1G0bOOQQ-E=Z-E=ZO)#qQUO,5;iO!<[QUO,5;iO)$nQVO,5:zO)$uQUO,5;gO$ mQUO7+&YOOQQ7+&Y7+&YO!(zQVO'#EfO)$|QUO,5:|OOQQ'#Ks'#KsOOQQ-E=V-E=VOOQQ,5A^,5A^OOQQ'#Jl'#JlO)(qQUO7+&PPOQQ7+&P7+&POOQQ7+)V7+)VO))iQUO7+)VO)*oQVO7+)VOOQQ,5>m,5>mO$)YQVO'#JsO)*vQUO,5@rOOQQ1G/R1G/ROOQQ7+$z7+$zO)+RQUO7+(RO)+WQUO7+(ROOQR7+(R7+(RO$>uQUO7+(ROOQQ7+%u7+%uOOQR-E=^-E=^O!0VQUO,5;oOOQQ,5@O,5@OOOQQ-E=b-E=bO$0^QUO1G1hOOQQ1G1h1G1hOOQR7+'Q7+'QOOQR1G1s1G1sOBUQUO,5;rO)+tQUO,5<YO)+{QUO1G1sO)-UQUO1G1sO!0tQVO7+']O)-ZQVO7+']O)2yQUO7+'dO)3OQVO7+'hO)5dQUO7+'wO)5nQUO7+'hO)6tQVO7+'hOKkQUO7+'wO$>hQUO,5<rO!4xQUO7+'xO)6{QUO7+'xOOQR7+(b7+(bO)7QQUO7+'zO)7VQUO,5<vO'CzQUO,5<vO)7}QUO,5<vO'CzQUO,5<vOOQQ,5<w,5<wO)8`QVO,5<xO'EYQUO'#JfO)8jQUO,5AmO)8rQUO,5<yOOQR7+'z7+'zO)8}QVO7+'VO)5gQUO'#K}OOQR-E=c-E=cO);`QVO,5<bOOQQ,5@R,5@RO!6nQUO,5@ROOQQ-E=e-E=eO)=wQUO7+(`O)>}QUO7+(dO)?SQVO7+(dOOQQ7+(l7+(lOOQQ7+)Z7+)ZO)?[QUO'#KjO)?fQUO'#KjOOQR,5=b,5=bO)?sQUO,5=bO!;bQUO,5=bO!;bQUO,5=bO!;bQUO,5=bOOQR7+(g7+(gOOQR7+(u7+(uOOQR7+(y7+(yOOQR,5=w,5=wO)?xQUO,5=zO)AOQUO,5=yOOQR,5Au,5AuOOQR-E=i-E=iOOQQ1G3b1G3bO)BUQUO,5=xO)BZQVO'#EfOOQQ1G6b1G6bO%)WQUO1G6bO%)]QUO1G6bOOQQ1G0P1G0POOQQ-E=Q-E=QO)DrQUO,5AVO(%iQUO'#JTO)D}QUO,5AVO)D}QUO,5AVO)EVQUO,5:iO8zQUO,5:iOOQQ,5>],5>]O)EaQUO,5AqO)EhQUO'#EVO)FrQUO'#EVO)G]QUO,5:iO)GgQUO'#HlO)GgQUO'#HmOOQQ'#Ko'#KoO)HUQUO'#KoO!(zQVO'#HnOOQQ,5:i,5:iO)HvQUO,5:iO!M_QVO,5:iOOQQ-E=S-E=SOOQQ1G0S1G0SOOQQ,5>`,5>`O)H{QUO1G6bO!(zQVO,5>gO)LjQUO'#JrO)LuQUO,5AxOOQQ1G4Q1G4QO)L}QUO,5AwOOQQ,5Aw,5AwOOQQ7+)i7+)iO*!lQUO7+)iOOQQ7+)o7+)oO*'kQVO1G7hO*)mQUO7+*SO*)rQUO,5?TO**xQUO7+*[POOO7+$S7+$SP*,kQUO'#LfP*,sQUO,5BPP*,x{,UO7+$SPOOO1G7i1G7iO*,}QUO<<GvOOQQ1G.x1G.xOOQQ'#IT'#ITO*.pQUO,5@`OOQQ,5@`,5@`OOQQ-E=r-E=rOOQQ7+(V7+(VOOQQ<<Ms<<MsO*/yQUO<<MsO*1|QUO<<MvO*3oQUO<<L_O*4TQUO,5?|OOQQ,5?|,5?|OOQQ-E=`-E=`OOQQ1G1b1G1bO*5^QUO,5;vO*6dQUO1G1aOOQQ1G1a1G1aOOQR,5@y,5@yO*7mQ!eO,5@yO*7tQMkO,5@yO*7{Q!eO,5@yOOQR-E=O-E=OOOQQ1G/f1G/fO*8SQ!eO'#DwOOQQ1G5X1G5XOOQR<<J]<<J]O*8ZQUO<<IjO*9OQUO7+$oOOQQ<<Iu<<IuO(7vQVO,5;ROOQR<=!c<=!cOOQQ1G3T1G3TOOQQ,5@U,5@UOOQQ-E=h-E=hOOQR<=!f<=!fO*9{QUO1G0cO*:SQUO'#EzO*:dQUO1G0cO*:kQUO'#I}O*<RQUO1G0qO!(zQVO1G0qOOQQ,5;[,5;[OOQQ,5;],5;]OOQQ,5?u,5?uOOQQ-E=X-E=XO!<[QUO1G0xO*=bQUO1G0xOOQQ1G0y1G0yO*=sQUO'#ElOOQQ1G0z1G0zOOQQ7+&j7+&jO*>XQUO7+&jO*?_QVO7+&jOOQQ7+&h7+&hOOQQ,5@Z,5@ZOOQQ-E=m-E=mO*@ZQUO1G1TO*@eQUO1G1TO*AOQUO1G0fOOQQ1G0f1G0fO*BUQUO'#K{O*B^QUO1G1ROOQQ<<It<<ItOOQQ'#Hb'#HbO'+fQUO,5={OOQQ'#Hd'#HdO'+fQUO,5=}OOQQ-E=j-E=jPOQQ<<Ik<<IkPOQQ-E=k-E=kOOQQ<<Lq<<LqO*BcQUO'#LaO*CoQUO'#L`OOQQ,5@_,5@_OOQQ-E=q-E=qOOQR<<Km<<KmO$>uQUO<<KmO*C}QUO<<KmOOQR1G1Z1G1ZOOQQ7+'S7+'SO!M_QVO1G1tO*DSQUO1G1tOOQR7+'_7+'_OOQR<<Jw<<JwO!0tQVO<<JwOOQR<<KO<<KOO*D_QUO<<KSO*EeQVO<<KSOKkQUO<<KcO!M_QVO<<KcO*ElQUO<<KSO!0tQVO<<KSO*FuQUO<<KSO*FzQUO<<KcO*GVQUO<<KdOOQR<<Kd<<KdOOQR<<Kf<<KfO*G[QUO1G2bO)7VQUO1G2bO'CzQUO1G2bO*GmQUO1G2dO*HsQVO1G2dOOQQ1G2d1G2dO*H}QVO1G2dO*IUQUO,5@QOOQQ-E=d-E=dOOQQ1G2e1G2eO*IdQUO1G1|O*JmQVO1G1|O*JtQUO1G1|OOQQ1G5m1G5mOOQR<<Kz<<KzOOQR<<LO<<LOO*JyQVO<<LOO*KUQUO<<LOOOQR1G2|1G2|O*KZQUO1G2|O*KbQUO1G3eOOQR1G3d1G3dOOQQ7++|7++|O%)WQUO7++|O*KmQUO1G6qO*KmQUO1G6qO(%iQUO,5?oO*KuQUO,5?oOOQQ-E=R-E=RO*LQQUO1G0TOOQQ1G0T1G0TO*L[QUO1G0TO!M_QVO1G0TO*LaQUO1G0TOOQQ1G3w1G3wO*LkQUO,5:qO)EhQUO,5:qO*MXQUO,5:qO)EhQUO,5:qO$#uQUO,5:uO*MvQVO,5>VO)GgQUO'#JpO*NQQUO1G0TO*NcQVO1G0TOOQQ1G3u1G3uO*NjQUO,5>WO*NuQUO,5>XO+ dQUO,5>YO+!jQUO1G0TO%)]QUO7++|O+#pQUO1G4ROOQQ,5@^,5@^OOQQ-E=p-E=pOOQQ<<MT<<MTOOQQ<<Mn<<MnO+$yQUO1G4oP+&|QUO'#JvP+'UQUO,5BQPO{O1G7k1G7kPOOO<<Gn<<GnOOQQANC_ANC_OOQR1G6e1G6eO+'^Q!eO,5:cOOQQ,5:c,5:cO+'eQUO1G0mO+(qQUO7+&]O+*QQUO7+&dO+*cQUO,5;WOOQQ<<JU<<JUO+*qQUO7+&oOOQQ7+&Q7+&QO!4xQUO'#J^O++lQUO,5AgOOQQ7+&m7+&mOOQQ1G3g1G3gO++tQUO1G3iOOQQ,5>n,5>nO+/iQUOANAXOOQRANAXANAXO+/nQUO7+'`OOQRAN@cAN@cO+0zQVOAN@nO+1RQUOAN@nO!0tQVOAN@nO+2[QUOAN@nO+2aQUOAN@}O+2lQUOAN@}O+3rQUOAN@}OOQRAN@nAN@nO!M_QVOAN@}OOQRANAOANAOO+3wQUO7+'|O)7VQUO7+'|OOQQ7+(O7+(OO+4YQUO7+(OO+5`QVO7+(OO+5gQVO7+'hO+5nQUOANAjOOQR7+(h7+(hOOQR7+)P7+)PO+5sQUO7+)PO+5xQUO7+)POOQQ<= h<= hO+6QQUO7+,]O+6YQUO1G5ZOOQQ1G5Z1G5ZO+6eQUO7+%oOOQQ7+%o7+%oO+6vQUO7+%oO*NcQVO7+%oOOQQ7+)a7+)aO+6{QUO7+%oO+8RQUO7+%oO!M_QVO7+%oO+8]QUO1G0]O*LkQUO1G0]O)EhQUO1G0]OOQQ1G0a1G0aO+8zQUO1G3qO+:QQVO1G3qOOQQ1G3q1G3qO+:[QVO1G3qO+:cQUO,5@[OOQQ-E=n-E=nOOQQ1G3r1G3rO%)WQUO<= hOOQQ7+*Z7+*ZPOQQ,5@b,5@bPOQQ-E=t-E=tOOQQ1G/}1G/}OOQQ,5?x,5?xOOQQ-E=[-E=[OOQRG26sG26sO+:zQUOG26YO!0tQVOG26YO+<TQUOG26YOOQRG26YG26YO!M_QVOG26iO!0tQVOG26iO+<YQUOG26iO+=`QUOG26iO+=eQUO<<KhOOQQ<<Kj<<KjOOQRG27UG27UOOQR<<Lk<<LkO+=vQUO<<LkOOQQ7+*u7+*uOOQQ<<IZ<<IZO+={QUO<<IZO!M_QVO<<IZO+>QQUO<<IZO+?WQUO<<IZO*NcQVO<<IZOOQQ<<L{<<L{O+?iQUO7+%wO*LkQUO7+%wOOQQ7+)]7+)]O+@WQUO7+)]O+A^QVO7+)]OOQQANESANESO!0tQVOLD+tOOQRLD+tLD+tO+AeQUOLD,TO+BkQUOLD,TOOQRLD,TLD,TO!0tQVOLD,TOOQRANBVANBVOOQQAN>uAN>uO+BpQUOAN>uO+CvQUOAN>uO!M_QVOAN>uO+C{QUO<<IcOOQQ<<Lw<<LwOOQR!$( `!$( `O!0tQVO!$( oOOQR!$( o!$( oOOQQG24aG24aO+DjQUOG24aO+EpQUOG24aOOQR!)9EZ!)9EZOOQQLD){LD){O+EuQUO'#CgO(dQUO'#CgO+IrQUO'#CyO+LcQUO'#CyO!E{QUO'#CyO+M[QUO'#CyO+MoQUO'#CyO,#bQUO'#CyO,#rQUO'#CyO,$PQUO'#CyO,$[QbO,59cO,$gQbO,59cO,$rQbO,59cO,$}QbO'#CwO,%`QbO'#CwO,%qQbO'#CwO,&SQUO'#CgO,(gQUO'#CgO,(tQUO'#CgO,+iQUO'#CgO,.lQUO'#CgO,.|QUO'#CgO,2uQUO'#CgO,2|QUO'#CgO,3|QUO'#CgO,6VQUO,5:xO#?kQUO,5:xO#?kQUO,5:xO#=ZQUO'#L[O,6sQbO'#CwO,7OQbO'#CwO,7ZQbO'#CwO,7fQbO'#CwO#6tQUO'#E^O,7qQUO'#E^O,9OQUO'#HgO,9pQbO'#CwO,9{QbO'#CwO,:WQUO'#CvO,:]QUO'#CvO,:bQUO'#CoO,:pQbO,59cO,:{QbO,59cO,;WQbO,59cO,;cQbO,59cO,;nQbO,59cO,;yQbO,59cO,<UQbO,59cO,6VQUO1G0dO,<aQUO1G0dO#?kQUO1G0dO,7qQUO1G0dO,>nQUO'#KZO,?OQUO'#CyO,?^QbO,59cO,6VQUO7+&OO,<aQUO7+&OO,?iQUO'#EwO,@[QUO'#EzO,@{QUO'#E^O,AQQUO'#GcO,AVQUO'#CvO,A[QUO'#CwO,AaQUO'#CwO,AfQUO'#CvO,AkQUO'#GcO,ApQUO'#KZO,B^QUO'#KZO,BhQUO'#CvO,BsQUO'#CvO,COQUO'#CvO,<aQUO,5:xO,7qQUO,5:xO,7qQUO,5:xO,CZQUO'#KZO,CnQbO'#CwO,CyQUO'#CrO,DOQUO'#E^",stateData:",Dt~O(nOSSOSTOSRPQVPQ'ePQ'gPQ'hPQ'iPQ'jPQ'kPQ'lPQ'mPQ~O*ZOS~OPmO]eOa!]Od!POlTOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!VfO!X!XO!Y!WO!i!YO!opO!r!`O!s!aO!t!aO!u!bO!v!aO!x!cO!{!dO#V#QO#a#VO#b#TO#i#OO#p!xO#t!fO#v!eO$R!gO$T!hO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO${!tO$}!uO%U!yO%_#ZO%`#[O%a#YO%c!zO%e#UO%g!{O%l#SO%o!|O%v!}O%|#PO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(rRO)PYO)SaO)U|O)V{O)WiO)X!ZO)YXO)hcO)idO~OR#bOV#]O'e#^O'g#_O'h#`O'i#`O'j#aO'k#aO'l#_O'm#_O~OX#dO(p#dO(q#fO~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(uZX(v$]X(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)WZX)XZX)jZX~O)WiX!UZX~P(dO]#}O!V#lO!X#{O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO(w#kO(x#kO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O~Od$RO%Y$SO'[$TO'_$UO(y$OO~Ol$VO~O!T$WO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X~Ol$VO~P.ZOl$VO!g$YO)j$YO~OX$ZO)Z$ZO~O!R$[O)X)QP)])QP~OPmO]$eOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!TxO!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~Ol$_O#t$lO(rRO~P0zO](]Xa'yXd(]Xl'yXl(]Xr'yXr(]Xs'yXs(]Xt'yXt(]Xu'yXu(]Xv'yXv(]Xw'yXw(]Xx'yXx(]Xy'yXy(]X{'yX}'yX!V(]X!o(]X!r'yX!r(]X!s'yX!s(]X!t'yX!t(]X!u'yX!u(]X!v'yX!v(]X!x'yX!x(]X!{(]X#a'yX#b'yX%e'yX%l'yX%o(]X%v(]X&m'yX&r'yX&s'yX(r'yX(r(]X)S(]X)U(]X)V(]X~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO&r#WO&s$wO])aXd)aXl)aX!V)aX!{)aX%v)aX(r)aX)S)aX)U)aX)V)aX~O)W$vO~P:nOPmO]eOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO!|%RO(r$xO~P<lO)S%SO~Oa!]Ol$_O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r:}O~P<lOPmO]$eOa%QOl:zO!V$fO!W%_O!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r;OO)S%dO)U%iO)V%iO~O(v%mO~O)W#jO~O(r%nO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OP%oO(oQO~PCQO]%hOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO%o!|O%v!}O)S;`O)U|O)V|O~Ol%rO!o%wO(r$xO~PE_O!TxO#v!eO(v%yO)j%|O])eX!V)eX~O]%hOd!POl%rO!V%kO!{!dO%v!}O(r$xO)S;`O)U|O)V|O~O!TxO#v!eO)W&PO)j&QO~O!U&TO~P!QO]&YO!TxO!V&WO)S&VO)U&ZO)V&ZO~Op&UO~PHrO]&cO!V&bO~OPmO]eOd!PO!VfO!X!XO!Y!WO!i!YO!{!dO#V#QO%_#ZO%`#[O%a#YO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)SaO)U|O)V{O)X!ZO)YXO)hcO)idO~Oa%QOl:zO%v$mO(r$xO~PIgO]%hOd!POl;[O!V%kO!{!dO%v$mO(r$xO)S;`O)U|O)V|O~Op&fO](tX])eX!V(tX!V)eX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!O)eX!U(tX~O!g$YO)j$YO~PL]O!g(tX)j(tX~PL]O](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!g(tX)j(tX!O(tX!U(tX~O])eX!V)eX!O)eX~PNkOa&hO&m!RO]&lXd&lXl&lXr&lXs&lXt&lXu&lXv&lXw&lXx&lXy&lX}&lX!V&lX!r&lX!s&lX!t&lX!u&lX!v&lX!x&lX!{&lX%v&lX&r&lX&s&lX(r&lX)S&lX)U&lX)V&lX)W&lX!O&lX!T&lX!X&lX!Y&lX![&lX!^&lX!_&lX!a&lX!b&lX!c&lX!e&lX!f&lX!h&lX(u&lX(w&lX(x&lX)T&lX)X&lX!g&lX)j&lX!W&lXQ&lX!d&lX(v&lX!U&lX#v&lX~Op&fOl(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~P.ZO!g$YO)j$YO](tX!V(tX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX!h(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)W(tX)X(tX!O(tX!W(tX(v(tX!U(tXQ(tX!d(tX~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O](}Xd(}Xl(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!O(}XQ(}X!d(}X!h(}X)X(}X)j(}X~O]#}O~P!*qO]&lO~O])bXa)bXd)bXl)bXr)bXs)bXt)bXu)bXv)bXw)bXx)bXy)bX{)bX})bX!V)bX!o)bX!r)bX!s)bX!t)bX!u)bX!v)bX!x)bX!{)bX#a)bX#b)bX%e)bX%l)bX%o)bX%v)bX&m)bX&r)bX&s)bX(r)bX)S)bX)U)bX)V)bX~O(oQO~P!-ZO%U&nO~P!-ZO]&oO~O]#}O~O!TxO~O$W&wO(r%nO(v&vO~O]&xOw&zO~O]&xO~OPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#p!xO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O]'PO~O!T$WO)W'RO~P!(zO)W'TO~O)W'UO~O(r'VO~O)W'YO~P!(zOl;^O%U'^O%e'^O(r;PO~Oa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O(v'bO~O)W'dO~P!(zO!TxO(r%nO)j'fO~O(r%nO~O]'iO~O]'jOd%nXl%nX!V%nX!{%nX%v%nX(r%nX)S%nX)U%nX)V%nX~O]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~P8zO]%hOa!TOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V%kO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO!{!dO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO)S;`O)U|O)V|O~Ol;_Op&UO%v$mO(r;QO~P!8jO(r%nO(v'vO)W'wO~O]&cO!T'yO~Ol$oO}!_O!T(QO!l(VO(r$nO(v(PO)PYO~Ol$oO{(^O!T(ZO#b(^O(r$nO~Oa!TOl$oO{#RO#a#VO#b#TO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO~O](`O~OPmOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)YXO)hcO)idO~O](bO)X(cO~P!=UO]#}O~P!<[OPmO]$eOa%QOl:zO!V(iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OY(jO(oQO(r%nO~O'f(mO~OS(qOT(nO*W(pO~O]#}O(n(tO~Q'nXX#dO(p#dO(q(vO~Od)QOl({O&r#WO(r(zO~O!Y'Sa!['Sa!^'Sa!_'Sa!a'Sa!b'Sa!c'Sa!e'Sa!f'Sa!h'Sa(u'Sa)S'Sa)T'Sa)U'Sa)V'Sa)W'Sa)X'Sa!g'Sa)j'Sa!O'Sa!W'Sa(v'Sa!U'SaQ'Sa!d'Sa~OPmOa%QOl:zO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO]'Sa!V'Sa!X'Sa(w'Sa(x'Sa~P!B_O!T$WO!O(sP~P!(zO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!TnX!VnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX(u%WX(w%WX(x%WX)SnX)S%WX)T%WX)UnX)U%WX)VnX)V%WX)W%WX)X%WX)jmX!O%WX~O)WnX!OnX!U%WX~P!E{O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~P8zOPmO]$eOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!V)lO~P!JwOd)oO%Y)pO(y$OO~O!T$WO!V)rO(w)sO!U)rP~P!JwO!T$WO~P!(zO)[)zO~Ol){O]!QX!h!QX)X!QX)]!QX~O])}O!h*OO)X)QX)])QX~O)X*SO)]*RO~Od$RO%Y*TO'[$TO'_$UO(y$OO~Ol*UO~Ol*UO!O(}X~P.ZOl*UO!g$YO)j$YO~O)W*VO~P:nOPmO]$eOa!]Ol$_Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)X!ZO)YXO)hcO)idO~Op&fO~P!&zOp&fO!W(tX(v(tXQ(tX!d(tX~PNkO]'nO!V'oO!X'lO!g'lO%Z'lO%['lO%]'lO%^'lO%_'pO%`'pO%a'lO(x'mO)j'lO)x'qO~O]iXdiXlgXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!TiX!hiX)XiX)jiX!OiX~O!liX(viX)WiX!XiX!YiX![iX!^iX!_iX!aiX!biX!ciX!eiX!fiX(uiX(wiX(xiX)TiX!giX!WiXQiX!diX!UiX#viX#TiX#ViX#piXaiX{iX!oiX#aiX#biX#iiX#tiX${iX%ciX%eiX%kiX%liX%oiX&miX)PiX~P#%yO(y*ZO~Ol*[O~O](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)W(}X!T(}X!X(}X!Y(}X![(}X!^(}X!_(}X!a(}X!b(}X!c(}X!e(}X!f(}X!h(}X(u(}X(w(}X(x(}X)T(}X)X(}X!g(}X)j(}X!O(}X!W(}XQ(}X!d(}X(v(}X!U(}X#v(}X~Ol*[O~P#+ROr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO])aad)aal)aa!V)aa!{)aa%v)aa(r)aa)S)aa)U)aa)V)aaQ)aa!d)aa!h)aa)X)aa)j)aa!O)aa!T)aa(v)aa)W)aa~O&r#WO&s$wO~P#.qOp&fOl(}X~P#+RO&r)aa~P#.qO]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX!OZX~O!WZX(vZX!UZXQZX!dZX~P#1jO]#}O!V#lO!X#{O(w#kO(x#kO~O!Y&xa![&xa!^&xa!_&xa!a&xa!b&xa!c&xa!e&xa!f&xa!g&xa!h&xa(u&xa)S&xa)T&xa)U&xa)V&xa)W&xa)X&xa)j&xa!O&xa!W&xa(v&xa!U&xaQ&xa!d&xa~P#3zOl;hO!T$WO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PKkOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PKkO]&cO!V&bO!O#Qa!T#Qa!h#Qa#v#Qa)W#Qa)j#QaQ#Qa!d#Qa(v#Qa~Op&fO!T$WO~O!O*cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O*cO~O]&cO!O*eO!V&bO~O]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~O!OqXQqX!dqX!hqX)XqX)WqX~P#9{O!O*hO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W)kX~P#3zO!W*kO!h*lO~O!W*kO!h*lO~P!(zO!W*kO~Op&fO!g$YO!h*mO)j$YO](tX!V(tX!W(tX!W*OX!X(tX!Y(tX![(tX!^(tX!_(tX!a(tX!b(tX!c(tX!e(tX!f(tX(u(tX(w(tX(x(tX)S(tX)T(tX)U(tX)V(tX)X(tX~O!h(tX~P#=ZO!W*oO~Od$RO%Y*TO(y:rO~Ol;kO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!|%RO~PBUO]*vO!T*qO!V&bO!h*tO#v!eO)j*rO)W)qX~O!h*tO)W)qX~O)W*wO~Op&fO])eX!T)eX!V)eX!h)eX#v)eX)W)eX)j)eX!O)eXQ)eX!d)eX(v)eX~Op&fO~OP%oO(oQO]%ha!V%ha!X%ha!Y%ha![%ha!^%ha!_%ha!a%ha!b%ha!c%ha!e%ha!f%ha!h%ha(r%ha(u%ha(w%ha(x%ha)S%ha)T%ha)U%ha)V%ha)W%ha)X%ha!g%ha)j%ha!O%ha!W%ha(v%ha!U%haQ%ha!d%ha~Od$RO%Y$SO(y:oO~Ol:wO~O!TxO#v!eO)j%|O~Ol<[O&r#WO(r;gO~O$Z+TO%`+UO~O!TxO#v!eO)W+VO)j+WO~OPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO$Z+TO%_#ZO%`+YO%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O!U+ZO~P!QOa!TOl$oOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#a+aO#b+bO#i+cO%e#UO%l#SO&m!RO&r#WO&s!TO(r$nO)PYO~OQ)lP!d)lP~P#GgO]&YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V&WO)S&VO)U&ZO)V&ZO~O!O#kX!T#kX#v#kX)W#kX)j#kXQ#kX!d#kX!h#kX)X#kX!x#kX(v#kX~P#IkOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!W+iO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S+jO)V$kO)X!ZO)YXO)hcO)idO~O]&cO!V+kO~O]&YO!V&WO)PYO)S&VO)U&ZO)V&ZO)X+nO!O)dP~P8zO]&YO!V&WO)S&VO)U&ZO)V&ZO~O!O#nX!T#nX#v#nX)W#nX)j#nXQ#nX!d#nX!h#nX)X#nX!x#nX(v#nX~P#NeO!TxO])nX!V)nX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O#T+vO#p+wO(x+tO)U+rO)V+rO~O]#jX!T#jX!V#jX!O#jX#v#jX)W#jX)j#jXQ#jX!d#jX!h#jX)X#jX!x#jX(v#jX~P$ xO#V+yO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO])fP!T)fP!V)fP#v)fP(v)fP)j)fP!O)fP!h)fP)W)fP~O!x)fPQ)fP!d)fP~P$#uOPmO]$eOa%QOl:zOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)V$kO)X!ZO)YXO)hcO)idO~O!W,QO)S,RO~P$%pO)PYO)X+nO!O)dP~P8zO]&cO!V&bO!O&Za!T&Za!h&Za#v&Za)W&Za)j&ZaQ&Za!d&Za(v&Za~OPmO]$eOa!]Ol:|Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;RO)S$kO)V$kO)X!ZO)YXO)hcO)idO~OQ(zP!d(zP~P$)YO]#}O!V#lO(w#kO(x#kO!X'Pa!Y'Pa!['Pa!^'Pa!_'Pa!a'Pa!b'Pa!c'Pa!e'Pa!f'Pa!h'Pa(u'Pa)S'Pa)T'Pa)U'Pa)V'Pa)W'Pa)X'Pa!g'Pa)j'Pa!O'Pa!W'Pa(v'Pa!U'PaQ'Pa!d'Pa~O]#}O!V#lO!X#{O(w#kO(x#kO~P!B_O!TxO#t!fO)PYO~P8zO!TxO(r%nO)j,[O~O#x,aO~OQ)aX!d)aX!h)aX)X)aX)j)aX!O)aX!T)aX(v)aX)W)aX~P:nO(v,eO(w,cO)P$UX)W$UX~O(r,fO~O)PYO)W,iO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O(r;SO~P$0kOPmO]$eOa%QOl:zO!TxO!V$fO!X!XO!Y!WO!i!YO#V#QO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:mO)PYO)S$kO)V$kO)WiO)X!ZO)YXO)hcO)idO~O$h,sO~OPmO]$eOa!]Ol:{Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!V$fO!X!XO!Y!WO!i!YO!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO#V#QO#a#VO#b#TO$}!uO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)S$kO)V$kO)X!ZO)YXO)hcO)idO~O${,yO(r:}O)W,wO~P$7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W,{O)X#|O~P#3zO)W,{O~O)W,|O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W,}O)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-OO)X#|O~P#3zOp&fO)PYO)j-QO~O)W-RO~Ol;^O(r;PO~O]-YO!{!dO&r#WO&s$wO(r-UO)S-VO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v-]O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xa!o$Xa!{$Xa#i$Xa#p$Xa#t$Xa#v$Xa$R$Xa$T$Xa$Y$Xa$Z$Xa${$Xa%U$Xa%c$Xa%g$Xa%o$Xa%|$Xa(k$Xa)U$Xa!U$Xa$c$Xa~P$0kO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W-cO)X#|O~P#3zOl-eO!TxO)j,[O~O)j-gO~O]&]a!X&]a!Y&]a![&]a!^&]a!_&]a!a&]a!b&]a!c&]a!e&]a!f&]a!h&]a(u&]a(w&]a(x&]a)T&]a)U&]a)V&]a)W&]a)X&]a!g&]a)j&]a!O&]a!W&]a!T&]a#v&]a(v&]a!U&]aQ&]a!d&]a~O)S-kO!V&]a~P$DbO!O-kO~O!W-kO~O!V-lO)S&]a~P$DbO](}Xd(}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!V(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X~Ol;mO~P$GQO]&cO!V&bO)W-mO~Ol;cO!o-pO#V+yO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO!n-yO(r,fO~O)PYO)W-{O~OPmO]$eOa%QOl:zO!T.QO!V$fO!X!XO!Y!WO!i!YO#V.XO#a.WO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO(x.PO)S$kO)V$kO)W-}O)X!ZO)YXO)hcO)idO~O!U.VO~P$JbO])^Xd)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)W)^X!O)^X!h)^X)X)^X!X)^X!Y)^X![)^X!^)^X!_)^X!a)^X!b)^X!c)^X!e)^X!f)^X(u)^X(w)^X(x)^X)T)^X!g)^X)j)^X!W)^XQ)^X!d)^X#T)^X#V)^X#p)^X#v)^Xa)^X{)^X!o)^X#a)^X#b)^X#i)^X#t)^X${)^X%c)^X%e)^X%k)^X%l)^X%o)^X&m)^X)P)^X!U)^X~Ol*[O~P$LlOl$oO!T(QO!l.^O(r$nO(v(PO)PYO~Op&fOl)^X~P$LlOl$oO!n.cO!o.cO(r$nO)PYO~Ol;dO!U.nO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jO!T(QO!l.^O(v(PO])OXd)OXl)OXr)OXs)OXt)OXu)OXv)OXw)OXx)OXy)OX})OX!V)OX!r)OX!s)OX!t)OX!u)OX!v)OX!x)OX!{)OX%v)OX&r)OX&s)OX(r)OX)S)OX)U)OX)V)OX~O)W)OX!O)OX!X)OX!Y)OX![)OX!^)OX!_)OX!a)OX!b)OX!c)OX!e)OX!f)OX!h)OX(u)OX(w)OX(x)OX)T)OX)X)OX!g)OX)j)OX!W)OXQ)OX!d)OX!U)OX#v)OX~P%%eO!T(QO~O!T(QO(v(PO~O(r%nO!U*QP~O!T(ZO(v.uO]&kad&kal&kar&kas&kat&kau&kav&kaw&kax&kay&ka}&ka!V&ka!r&ka!s&ka!t&ka!u&ka!v&ka!x&ka!{&ka%v&ka&r&ka&s&ka(r&ka)S&ka)U&ka)V&ka)W&ka!O&ka!X&ka!Y&ka![&ka!^&ka!_&ka!a&ka!b&ka!c&ka!e&ka!f&ka!h&ka(u&ka(w&ka(x&ka)T&ka)X&ka!g&ka)j&ka!W&kaQ&ka!d&ka!U&ka#v&ka~Ol$oO!T(ZO(r$nO~O&r#WO&s$wO]&pad&pal&par&pas&pat&pau&pav&paw&pax&pay&pa}&pa!V&pa!r&pa!s&pa!t&pa!u&pa!v&pa!x&pa!{&pa%v&pa(r&pa)S&pa)U&pa)V&pa)W&pa!O&pa!T&pa!X&pa!Y&pa![&pa!^&pa!_&pa!a&pa!b&pa!c&pa!e&pa!f&pa!h&pa(u&pa(w&pa(x&pa)T&pa)X&pa!g&pa)j&pa!W&paQ&pa!d&pa(v&pa!U&pa#v&pa~O&s.zO~P!(zO!Y#qO![#rO!f#zO)S#mO!^'Ua!_'Ua!a'Ua!b'Ua!c'Ua!e'Ua!h'Ua(u'Ua)T'Ua)U'Ua)V'Ua)W'Ua)X'Ua!g'Ua)j'Ua!O'Ua!W'Ua(v'Ua!U'UaQ'Ua!d'Ua~P#3zO!V'dX!X'dX!Y'dX!['dX!^'dX!_'dX!a'dX!b'dX!c'dX!e'dX!f'dX!h'dX(u'dX(w'dX(x'dX)S'dX)T'dX)U'dX)V'dX)X'dX!O'dX~O].|O)W'dX!g'dX)j'dX!W'dX(v'dX!U'dXQ'dX!d'dX~P%2xO!Y#qO![#rO!f#zO)S#mO!^'Wa!_'Wa!a'Wa!b'Wa!c'Wa!e'Wa!h'Wa(u'Wa)T'Wa)U'Wa)V'Wa)W'Wa)X'Wa!g'Wa)j'Wa!O'Wa!W'Wa(v'Wa!U'WaQ'Wa!d'Wa~P#3zO]#}O!T$WO!V.}O&r#WO&s$wO~O!X'Za!Y'Za!['Za!^'Za!_'Za!a'Za!b'Za!c'Za!e'Za!f'Za!h'Za(u'Za(w'Za(x'Za)S'Za)T'Za)U'Za)V'Za)W'Za)X'Za!g'Za)j'Za!O'Za!W'Za(v'Za!U'ZaQ'Za!d'Za~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^a)W'^a!g'^a)j'^a!O'^a!W'^a(v'^a!U'^aQ'^a!d'^a~P#3zOPmO]$eOa%QOl:zO!V$fO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)S$kO)V%]O)X!ZO)YXO)hcO)idO)j%[O~O!W/QO~P%:oOS(qOT(nO]#}O*W(pO~O]/TO'f/UO*W/RO~OS/YOT(nO*W/XO~O]#}O~Q'na!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO(v/[O)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W#Zi!O#Zi~P#3zO]cXlgXpcXpiX!VcX!XcX!YcX![cX!^cX!_cX!acX!bcX!ccX!ecX!fcX!gcX!hcX(ucX(wcX(xcX)ScX)TcX)UcX)VcX)WcX)XcX)jcX!OcX!WcX(vcX!TcX#vcX!UcXQcX!dcX~Od/^O%Y*TO(y/]O~Ol/_O~Ol/`O~Op&fO]bi!Vbi!Xbi!Ybi![bi!^bi!_bi!abi!bbi!cbi!ebi!fbi!gbi!hbi(ubi(wbi(xbi)Sbi)Tbi)Ubi)Vbi)Wbi)Xbi)jbi!Obi!Wbi(vbi!UbiQbi!dbi~O!W/bO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO![#rO)S#mO!Y&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y&zi![&zi!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)S&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)U#nO)V#pO!h&zi(u&zi)T&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)V#pO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!b#yO!c#yO!e#yO!f#zO)S#mO!^&zi!_&zi!a&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!f#zO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO)S#mO!^&zi!_&zi!a&zi!b&zi!c&zi!e&zi!f&zi!h&zi(u&zi)T&zi)U&zi)V&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO!h&zi(u&zi)W&zi)X&zi!g&zi)j&zi!O&zi!W&zi(v&zi!U&ziQ&zi!d&zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/cO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(sX~P#3zO!h/cO!O(sX~O!O/eO~O]%Xap%Xa!X%Xa!Y%Xa![%Xa!^%Xa!_%Xa!a%Xa!b%Xa!c%Xa!e%Xa!f%Xa!h%Xa(u%Xa(w%Xa(x%Xa)T%Xa)U%Xa)V%Xa)W%Xa)X%Xa!g%Xa)j%Xa!O%Xa!W%Xa!T%Xa#v%Xa(v%Xa!U%XaQ%Xa!d%Xa~O)S/fO!V%Xa~P&,aO!O/fO~O!W/fO~O!V/gO)S%Xa~P&,aO!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~P%6oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^i)W'^i!g'^i)j'^i!O'^i!W'^i(v'^i!U'^iQ'^i!d'^i~P#3zO!W/lO~P%:oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h/nO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U)rX~P#3zO(r/qO~O!V/sO(w)sO)j/uO~O!h/nO!U)rX~O!U/vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO)S#mO)T#oO)U#nO)V#pO)X#|O!h_i(u_i)W_i!g_i)j_i!O_i!W_i(v_i!U_iQ_i!d_i~P#3zO!R/wO~Ol){O]!Qa!h!Qa)X!Qa)]!Qa~OP0PO]0OOl0PO!R0PO!T/|O!V/}O!X0PO!Y0PO![0PO!^0PO!_0PO!a0PO!b0PO!c0PO!e0PO!f0PO!g0PO!h0PO!i0PO(oQO(v0PO(w0PO(x0PO)S/yO)T/zO)U/zO)V/{O)W0PO)X0PO)YXO~O!O0SO~P&6yO!R$[O~O!h*OO)X)Qa)])Qa~O)]0WO~O])dO!V)eO!X)bO!g)bO%Z)bO%[)bO%])bO%^)bO%_)fO%`)fO%a)bO(x)cO)j)bO)x)gO~Od)oO%Y*TO(y$OO~O)W0YO~O]nXdnXlmXpnXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!TnX!hnX)XnX!OnXQnX!dnX~O!lnX(vnX)WnX!XnX!YnX![nX!^nX!_nX!anX!bnX!cnX!enX!fnX(unX(wnX(xnX)TnX!gnX)jnX!WnX!UnX#vnX#TnX#VnX#pnXanX{nX!onX#anX#bnX#inX#tnX${nX%cnX%enX%knX%lnX%onX&mnX)PnX~P&:uOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O}!_O!r!aO!s!aO!t!aO!u!aO!v!aO!x!cO~O])aid)ail)ai!V)ai!{)ai%v)ai(r)ai)S)ai)U)ai)V)aiQ)ai!d)ai!h)ai)X)ai)j)ai!O)ai!T)ai&r)ai(v)ai)W)ai~P&?sO]&cO!V&bO!O#Qi!T#Qi!h#Qi#v#Qi)W#Qi)j#QiQ#Qi!d#Qi(v#Qi~O!OqaQqa!dqa!hqa)Xqa)Wqa~P#9{O!OqaQqa!dqa!hqa)Xqa)Wqa~P#IkO]&cO!V+kO!OqaQqa!dqa!hqa)Xqa)Wqa~O!h*iO!W)ka~O!h*mO!W*Oa~OPmOa!]Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O{#RO}!_O!X!XO!Y!WO!i!YO!s!aO!t!aO!v!aO!x!cO#V#QO#a#VO#b#TO#v!eO$Y!vO$Z!wO$`!iO$e!jO$g!kO$h!lO$k!mO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO%_#ZO%`#[O%a#YO%e#UO%l#SO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO)PYO)WiO)X!ZO)YXO)hcO)idO~O]eOd!POlTO!T*qO!U&TO!V0hO!opO!r!`O!u!bO!{!dO#i#OO#p!xO#t!fO$R!gO$T!hO${!tO$}!uO%U!yO%c!zO%g!{O%o!|O%v!}O%|#PO(rRO(w)sO)SaO)U|O)V{O~P&DuO!h*tO)W)qa~OPmO]$eOa!]Ol:|O{#RO!T$WO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O(sP!O)dP~P&?sO!h*mO!W*OX~O]#}O!T$WO~O!h0sO!T)zX#v)zX)j)zX~O)W0uO~O)W0vO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W0xO)X#|O~P#3zO)W0vO~P!?WO]1SOd!POl%bO!V1QO!{!dO%v$mO(r$xO)S0zO)X0}O~O)U1OO)V1OO)j0{OQ#PX!d#PX!h#PX!O#PX~P' dO!h1TOQ)lX!d)lX~OQ1VO!d1VO~O)X1YO)j1XOQ#`X!d#`X!h#`X~P!<[O)X1YO)j1XOQ#`X!d#`X!h#`X~P!;bOp&UO~O!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~P#IkO]&cO!V+kO!O#ka!T#ka#v#ka)W#ka)j#kaQ#ka!d#ka!h#ka)X#ka!x#ka(v#ka~O!W1_O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1_O)S1aO~P$%pO!W1_O~P!(zO]#ja!T#ja!V#ja!O#ja#v#ja)W#ja)j#jaQ#ja!d#ja!h#ja)X#ja!x#ja(v#ja~P$ xO]&cO!O1eO!V+kO~O!h1fO!O)dX~O!O1hO~O]&cO!V+kO!O#na!T#na#v#na)W#na)j#naQ#na!d#na!h#na)X#na!x#na(v#na~O]1lOr#SXs#SXt#SXu#SXv#SXw#SXx#SXy#SX!T#SX!V#SX#T#SX#p#SX(x#SX)U#SX)V#SX!l#SX!x#SX#V#SX#v#SX(v#SX)j#SX!O#SX!h#SX)W#SXQ#SX!d#SX)X#SX~O]1mO~O]1pOl$oO!V$fO#V#QO(r$nO)hcO)idO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!l+zO#T+vO#V+yO#p+wO(x+tO)U+zO)V+zO~O])fX!T)fX!V)fX!x)fX#v)fX(v)fX)j)fX!O)fX!h)fX)W)fXQ)fX!d)fX~P'+}O!x!cO]#Ri!T#Ri!V#Ri#v#Ri(v#Ri)j#Ri!O#Ri!h#Ri)W#RiQ#Ri!d#Ri~O!W1xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W1xO)S1zO~P$%pO!W1xO~P!(zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*RX!d*RX!h*RX~P#3zO)X1{OQ({X!d({X!h({X~O!h1|OQ(zX!d(zX~OQ2OO!d2OO~O!O2PO~O#t$lO)PYO~P8zOl-eO!TxO)j2TO~O!O2UO~O#x,aOP#ui]#uia#uid#uil#uir#uis#uit#uiu#uiv#uiw#uix#uiy#ui{#ui}#ui!T#ui!V#ui!X#ui!Y#ui!i#ui!o#ui!r#ui!s#ui!t#ui!u#ui!v#ui!x#ui!{#ui#V#ui#a#ui#b#ui#i#ui#p#ui#t#ui#v#ui$R#ui$T#ui$Y#ui$Z#ui$`#ui$e#ui$g#ui$h#ui$k#ui$m#ui$o#ui$q#ui$s#ui$u#ui$w#ui${#ui$}#ui%U#ui%_#ui%`#ui%a#ui%c#ui%e#ui%g#ui%l#ui%o#ui%v#ui%|#ui&m#ui&r#ui&s#ui'Q#ui'R#ui'V#ui'Y#ui'a#ui'b#ui(k#ui(o#ui(r#ui)P#ui)S#ui)U#ui)V#ui)W#ui)X#ui)Y#ui)h#ui)i#ui!U#ui$c#ui!n#ui%k#ui~O]&cO~O]&cO!TxO!V&bO#v!eO~O(v2ZO(w,cO)P$Ua)W$Ua~O)PYO)W2]O~O!O2^O~P,]O!O2^O)W#jO~O!O2^O~O$c2cOP$_i]$_ia$_id$_il$_ir$_is$_it$_iu$_iv$_iw$_ix$_iy$_i{$_i}$_i!T$_i!V$_i!X$_i!Y$_i!i$_i!o$_i!r$_i!s$_i!t$_i!u$_i!v$_i!x$_i!{$_i#V$_i#a$_i#b$_i#i$_i#p$_i#t$_i#v$_i$R$_i$T$_i$Y$_i$Z$_i$`$_i$e$_i$g$_i$h$_i$k$_i$m$_i$o$_i$q$_i$s$_i$u$_i$w$_i${$_i$}$_i%U$_i%_$_i%`$_i%a$_i%c$_i%e$_i%g$_i%l$_i%o$_i%v$_i%|$_i&m$_i&r$_i&s$_i'Q$_i'R$_i'V$_i'Y$_i'a$_i'b$_i(k$_i(o$_i(r$_i)P$_i)S$_i)U$_i)V$_i)W$_i)X$_i)Y$_i)h$_i)i$_i!U$_i~O]1pO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W2fO)X#|O~P#3zOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W2iO)X!ZO)YXO)hcO)idO~P&?sO)W2fO~O(r-UO~O)PYO)j2lO~O)W2nO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO(r-UO)S-VO~O)S2sO~O]&cO!V2uO!h2vO)W)uX~O]-YO!{!dO(r-UO)S-VO~O)W2yO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xi!o$Xi!{$Xi#i$Xi#p$Xi#t$Xi#v$Xi$R$Xi$T$Xi$Y$Xi$Z$Xi${$Xi%U$Xi%c$Xi%g$Xi%o$Xi%|$Xi(k$Xi)U$Xi!U$Xi$c$Xi~P$0kOl:{O(r:nO~P0zO]2}O~O)W2SO~O!u3PO(r%nO~O!O3SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h3TO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O3UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO]&cO!V+kO!T%ui#v%ui)W%ui)j%ui~O!W3VO~Ol:yO)W(}X~P$GQOa!TOl$oO{3]O#a#VO#b3[O#t!fO%e#UO%l3^O&m!RO&r#WO&s!TO(r$nO)PYO~P&?sOl;cO!o-pO#i-uO#t!fO${,yO%c!zO%k-tO%o!|O%v!}O(r;TO)PYO~P!8jO]&cO!V&bO)W3`O~O)W3aO~O)PYO)W3aO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W3bO)X#|O~P#3zO)W3bO~O)W3eO~O!U3gO~P$JbOl$oO(r$nO~O]3iO!T'yO~P'+iO!T(QO!l3lO(v(PO])Oad)Oal)Oar)Oas)Oat)Oau)Oav)Oaw)Oax)Oay)Oa})Oa!V)Oa!r)Oa!s)Oa!t)Oa!u)Oa!v)Oa!x)Oa!{)Oa%v)Oa&r)Oa&s)Oa(r)Oa)S)Oa)U)Oa)V)Oa)W)Oa!O)Oa!X)Oa!Y)Oa![)Oa!^)Oa!_)Oa!a)Oa!b)Oa!c)Oa!e)Oa!f)Oa!h)Oa(u)Oa(w)Oa(x)Oa)T)Oa)X)Oa!g)Oa)j)Oa!W)OaQ)Oa!d)Oa!U)Oa#v)Oa~Ol$oO!n.cO!o.cO(r$nO~O!h3pO)X3rO!T)_X~O!o3tO)PYO~P8zO)W3uO~PGVO]3zOl({O!T$WO!{!dO%v$mO&r#WO(r(zO(v4OO)S3wO)U3{O)V3{O~O)W4PO)j4RO~P(&eOl;dO!U4TO!n.pO!o.oO#i-uO${!tO$}!uO%g!{O%k-tO%o!|O%v!}O(r;VO)PYO~P!8jOl;dO%v!}O(r;VO~P!8jO(v4UO~Ol$oO!T(QO(r$nO(v(PO)PYO~O!l3lO~P((sO)j4WO!U&oX!h&oX~O!h4XO!U*QX~O!U4ZO~Oa4]Ol$oO&m!RO(r$nO~O!T(ZO]&kid&kil&kir&kis&kit&kiu&kiv&kiw&kix&kiy&ki}&ki!V&ki!r&ki!s&ki!t&ki!u&ki!v&ki!x&ki!{&ki%v&ki&r&ki&s&ki(r&ki)S&ki)U&ki)V&ki)W&ki!O&ki!X&ki!Y&ki![&ki!^&ki!_&ki!a&ki!b&ki!c&ki!e&ki!f&ki!h&ki(u&ki(w&ki(x&ki)T&ki)X&ki!g&ki)j&ki!W&kiQ&ki!d&ki!U&ki#v&ki~O(v&ki~P(*TO(v.uO~P(*TO!O4`O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O4`O~O!O4aO~O]#}O!T$WO!V'Zi!X'Zi!Y'Zi!['Zi!^'Zi!_'Zi!a'Zi!b'Zi!c'Zi!e'Zi!f'Zi!h'Zi(u'Zi(w'Zi(x'Zi)S'Zi)T'Zi)U'Zi)V'Zi)W'Zi)X'Zi!g'Zi)j'Zi!O'Zi!W'Zi(v'Zi!U'ZiQ'Zi!d'Zi~OPmOa%QOl:zO!X!XO!Y!WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)X!ZO)YXO)hcO)idO]#]ap#]a!T#]a!V#]a)S#]a)U#]a)V#]a~O(r%nO)X4fO!O*YP~O*W4eO~O'f4hO*W4eO~O*W4iO~OlmXpnXp&wX~Od4kO%Y*TO(y/]O~Od4kO%Y*TO(y4lO~O!h/cO!O(sa~O!W4pO~O]&cO!V+kO!T%uq#v%uq)W%uq)j%uq~O]#}O!T$WO!X'Zq!Y'Zq!['Zq!^'Zq!_'Zq!a'Zq!b'Zq!c'Zq!e'Zq!f'Zq!h'Zq(u'Zq(w'Zq(x'Zq)S'Zq)T'Zq)U'Zq)V'Zq)W'Zq)X'Zq!g'Zq)j'Zq!O'Zq!W'Zq(v'Zq!U'ZqQ'Zq!d'Zq~O!V'Zq~P(5bO!V.}O&r#WO&s$wO~P(5bO!T$WO!V)rO(w)sO!U(UX!h(UX~P!JwO!h/nO!U)ra~O!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h*iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!U4|O~P&6yO!W4|O~P&6yO!O4|O~P&6yO!O5RO~P&6yO]5SO!h'ua)X'ua)]'ua~O!h*OO)X)Qi)])Qi~O]&cO!V&bO!O#Qq!T#Qq!h#Qq#v#Qq)W#Qq)j#QqQ#Qq!d#Qq(v#Qq~O!OqiQqi!dqi!hqi)Xqi)Wqi~P#IkO]&cO!V+kO!OqiQqi!dqi!hqi)Xqi)Wqi~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'Tq)W'Tq!g'Tq)j'Tq!O'Tq!W'Tq(v'Tq!U'TqQ'Tq!d'Tq~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!W'|a!h'|a~P#3zO!W5XO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h5YO(u#gO)S#mO)T#oO)U#nO)V#pO)W#jO)X#|O!U)rX~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h#{i)W#{i~P#3zO]*vO!T$WO!V&bO)j*rO!h(Va)W(Va~O!h1fO]'dX!O)dX~P%2xO)X5[O!T%qa!h%qa#v%qa)j%qa~O!h0sO!T)za#v)za)j)za~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W5_O)X#|O~P#3zO]1SOd!POl;[O!V1QO!{!dO%v$mO(r$xO)S;xO)U5aO)V5aO~OQ#Pa!d#Pa!h#Pa!O#Pa~P(DjO]1SOd!POr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V1QO!{!dO!|%RO%v$mO(r$xOQ#kX!d#kX!h#kX!O#kX~Ol%bO)S0zO)U;yO)V;yO~P(ElO]&cOQ#Pa!d#Pa!h#Pa!O#Pa~O!V&bO)j5eO~P(GZO(r%nOQ#dX!d#dX!h#dX!O#dX~O)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P' dO!V+kO~P(GZO]1SOa!TOd!POl;]O{#RO!V1QO!{!dO#a#VO#b#TO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO(r;QO)PYO)S;xO)U5aO)V5aO)X+nO!O)dP~P&?sO!h1TOQ)la!d)la~Op&fO)j5jOQ#`al(}X!d#`a!h#`a)X(}X~P$GQO(r-UOQ#ga!d#ga!h#ga~Op&fO)j5jOQ#`a])^Xd)^Xl)^Xr)^Xs)^Xt)^Xu)^Xv)^Xw)^Xx)^Xy)^X})^X!T)^X!V)^X!d#`a!h#`a!l)^X!r)^X!s)^X!t)^X!u)^X!v)^X!x)^X!{)^X%v)^X&r)^X&s)^X(r)^X(v)^X)S)^X)U)^X)V)^X)X)^X~O#a5mO#b5mO~O]&cO!V+kO!O#ki!T#ki#v#ki)W#ki)j#kiQ#ki!d#ki!h#ki)X#ki!x#ki(v#ki~O!W5oO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W5oO~P!(zO!W5oO)S5qO~P$%pO]#ji!T#ji!V#ji!O#ji#v#ji)W#ji)j#jiQ#ji!d#ji!h#ji)X#ji!x#ji(v#ji~P$ xO)PYO)X5sO~P8zO!h1fO!O)da~O&r#WO&s$wO!T#qa!x#qa#v#qa(v#qa)j#qa!O#qa!h#qa)W#qaQ#qa!d#qa)X#qa~P#NeO!O5xO~P!(zO!O)oP~P!4xO)T6OO)U5|O]#Ua!T#Ua!V#Ua)S#Ua)V#Uar#Uas#Uat#Uau#Uav#Uaw#Uax#Uay#Ua!l#Ua!x#Ua#T#Ua#V#Ua#p#Ua#v#Ua(v#Ua(x#Ua)j#Uaa#Uad#Ual#Ua{#Ua}#Ua!o#Ua!r#Ua!s#Ua!t#Ua!u#Ua!v#Ua!{#Ua#a#Ua#b#Ua#i#Ua#t#Ua${#Ua%c#Ua%e#Ua%k#Ua%l#Ua%o#Ua%v#Ua&m#Ua&r#Ua&s#Ua(r#Ua)P#Ua)W#Ua!O#Ua!h#UaQ#Ua!d#Ua~O!x!cO]#Rq!T#Rq!V#Rq#v#Rq(v#Rq)j#Rq!O#Rq!h#Rq)W#RqQ#Rq!d#Rq~O!W6TO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W6TO~P!(zO!h1|OQ(za!d(za~O)W6YO~Ol-eO!TxO)j6ZO~O]*vO!T$WO!V&bO!h*tO)W)qX~O)j6_O~P)+cO!O6aO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O6aO~O$c6cOP$_q]$_qa$_qd$_ql$_qr$_qs$_qt$_qu$_qv$_qw$_qx$_qy$_q{$_q}$_q!T$_q!V$_q!X$_q!Y$_q!i$_q!o$_q!r$_q!s$_q!t$_q!u$_q!v$_q!x$_q!{$_q#V$_q#a$_q#b$_q#i$_q#p$_q#t$_q#v$_q$R$_q$T$_q$Y$_q$Z$_q$`$_q$e$_q$g$_q$h$_q$k$_q$m$_q$o$_q$q$_q$s$_q$u$_q$w$_q${$_q$}$_q%U$_q%_$_q%`$_q%a$_q%c$_q%e$_q%g$_q%l$_q%o$_q%v$_q%|$_q&m$_q&r$_q&s$_q'Q$_q'R$_q'V$_q'Y$_q'a$_q'b$_q(k$_q(o$_q(r$_q)P$_q)S$_q)U$_q)V$_q)W$_q)X$_q)Y$_q)h$_q)i$_q!U$_q~O)W6dO~OPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)S$kO)V$kO)W6fO)X!ZO)YXO)hcO)idO~P&?sO(v6hO)j*rO~P)+cO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W6fO)X#|O~P#3zO!O6jO~P!(zO)W6nO~O)W6oO~O]-YOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO(r-UO)S-VO~O]&cO!V2uO!h%Oa)W%Oa!O%Oa~O!W6uO)S6vO~P$%pO!h2vO)W)ua~O]&cO!O6yO!V2uO~O!TxO$`!iO$e!jO$g!kO$h!lO$k-bO$m!nO$o!oO$q!pO$s!qO$u!rO$w!sO$}!uO(r:nOd$Xq!o$Xq!{$Xq#i$Xq#p$Xq#t$Xq#v$Xq$R$Xq$T$Xq$Y$Xq$Z$Xq${$Xq%U$Xq%c$Xq%g$Xq%o$Xq%|$Xq(k$Xq)U$Xq!U$Xq$c$Xq~P$0kOPmO]$eOa!]Ol:{O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r:}O)PYO)S$kO)V$kO)W6{O)X!ZO)YXO)hcO)idO~P&?sO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W7OO)X#|O~P#3zO)W7PO~OP7QO(oQO~Ol*[O)W)^X~P$GQOp&fOl(}X)W)^X~P$GQO)W7SO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&Sa~P#3zO!U7UO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO)W7VO~OPmO]$eOa!]Ol:|O{#RO!V$fO!X!XO!Y!WO!i!YO#V#QO#a#VO#b#TO%_#ZO%`#[O%a#YO%e#UO%l#SO%v$mO&m!RO&r#WO&s!TO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r;UO)PYO)S$kO)V$kO)X0nO)YXO)hcO)idO!O)dP~P&?sO!h3pO)X7ZO!T)_a~O!h3pO!T)_a~O)W7`O)j7bO~P(&eO)W7dO~PGVO]3zOl({Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!{!dO!|%RO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~O)S7hO~O]&cO!T*qO!V7jO!h7kO#v!eO(v4OO~O)W7`O)j7mO~P)FwO]3zOl({O!{!dO%v$mO&r#WO(r(zO)S3wO)U3{O)V3{O~Op&fO])cX!T)cX!V)cX!h)cX#v)cX(v)cX)W)cX)j)cX!O)cX~O)W7`O~O!T(QO!l7sO(v(PO])Oid)Oil)Oir)Ois)Oit)Oiu)Oiv)Oiw)Oix)Oiy)Oi})Oi!V)Oi!r)Oi!s)Oi!t)Oi!u)Oi!v)Oi!x)Oi!{)Oi%v)Oi&r)Oi&s)Oi(r)Oi)S)Oi)U)Oi)V)Oi)W)Oi!O)Oi!X)Oi!Y)Oi![)Oi!^)Oi!_)Oi!a)Oi!b)Oi!c)Oi!e)Oi!f)Oi!h)Oi(u)Oi(w)Oi(x)Oi)T)Oi)X)Oi!g)Oi)j)Oi!W)OiQ)Oi!d)Oi!U)Oi#v)Oi~O(r%nO!U(fX!h(fX~O!h4XO!U*Qa~Op&fO]*Pad*Pal*Par*Pas*Pat*Pau*Pav*Paw*Pax*Pay*Pa}*Pa!T*Pa!V*Pa!r*Pa!s*Pa!t*Pa!u*Pa!v*Pa!x*Pa!{*Pa%v*Pa&r*Pa&s*Pa(r*Pa)S*Pa)U*Pa)V*Pa)W*Pa!O*Pa!X*Pa!Y*Pa![*Pa!^*Pa!_*Pa!a*Pa!b*Pa!c*Pa!e*Pa!f*Pa!h*Pa(u*Pa(w*Pa(x*Pa)T*Pa)X*Pa!g*Pa)j*Pa!W*PaQ*Pa!d*Pa(v*Pa!U*Pa#v*Pa~O!T(ZO]&kqd&kql&kqr&kqs&kqt&kqu&kqv&kqw&kqx&kqy&kq}&kq!V&kq!r&kq!s&kq!t&kq!u&kq!v&kq!x&kq!{&kq%v&kq&r&kq&s&kq(r&kq)S&kq)U&kq)V&kq)W&kq!O&kq!X&kq!Y&kq![&kq!^&kq!_&kq!a&kq!b&kq!c&kq!e&kq!f&kq!h&kq(u&kq(w&kq(x&kq)T&kq)X&kq!g&kq)j&kq!W&kqQ&kq!d&kq(v&kq!U&kq#v&kq~OPmOa%QOl:zO!T$WO!i!YO#V#QO%_#ZO%`#[O%a#YO%v$mO'Q!WO'R!WO'V#XO'Y![O'a![O'b![O(oQO(r$xO)YXO)hcO)idO~O]*Ui!V*Ui!X*Ui!Y*Ui![*Ui!^*Ui!_*Ui!a*Ui!b*Ui!c*Ui!e*Ui!f*Ui!h*Ui(u*Ui(w*Ui(x*Ui)S*Ui)T*Ui)U*Ui)V*Ui)W*Ui)X*Ui!g*Ui)j*Ui!O*Ui!W*Ui(v*Ui!U*UiQ*Ui!d*Ui~P*&WO!O7xO~O!W7yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^q)W'^q!g'^q)j'^q!O'^q!W'^q(v'^q!U'^qQ'^q!d'^q~P#3zO!h7zO!O*YX~O!O7|O~O*W7}O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h^y)W^y!g^y)j^y!O^y!W^y(v^y!U^yQ^y!d^y~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O(ha!h(ha~P#3zO]#}O!T$WO!V'Zy!X'Zy!Y'Zy!['Zy!^'Zy!_'Zy!a'Zy!b'Zy!c'Zy!e'Zy!f'Zy!h'Zy(u'Zy(w'Zy(x'Zy)S'Zy)T'Zy)U'Zy)V'Zy)W'Zy)X'Zy!g'Zy)j'Zy!O'Zy!W'Zy(v'Zy!U'ZyQ'Zy!d'Zy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!h'^y)W'^y!g'^y)j'^y!O'^y!W'^y(v'^y!U'^yQ'^y!d'^y~P#3zO]&cO!V+kO!T%uy#v%uy)W%uy)j%uy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua!h(Ua~P#3zO!W4xO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U#}i!h#}i~P#3zO!U8PO~P&6yO!W8PO~P&6yO!O8PO~P&6yO!O8RO~P&6yO]&cO!V&bO!O#Qy!T#Qy!h#Qy#v#Qy)W#Qy)j#QyQ#Qy!d#Qy(v#Qy~O]&cO!V+kO!OqqQqq!dqq!hqq)Xqq)Wqq~O]&cOQ#Pi!d#Pi!h#Pi!O#Pi~O!V+kO~P*9jOQ#nX!d#nX!h#nX!O#nX~P(DjO!V&bO~P*9jOQ(OX](OXd'qXl'qXr(OXs(OXt(OXu(OXv(OXw(OXx(OXy(OX!V(OX!d(OX!h(OX!{'qX%v'qX(r'qX)S(OX)U(OX)V(OX!O(OX~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_i!d#_i!h#_i!O#_i~P#3zO&r#WO&s$wOQ#fi!d#fi!h#fi~O(r-UO)X1YO)j1XOQ#`X!d#`X!h#`X~O!W8WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8WO~P!(zO!T#qi!x#qi#v#qi(v#qi)j#qi!O#qi!h#qi)W#qiQ#qi!d#qi)X#qi~O]&cO!V+kO~P*?fO]&YO!V&WO&r#WO&s$wO)S&VO)U&ZO)V&ZO~P*?fO!O8YO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!h8ZO!O)oX~O!O8]O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ*TX!d*TX!h*TX~P#3zO)X8`OQ*SX!d*SX!h*SX~O)W8bO~O!O$bi!h#{a)W#{a~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W8eO)X#|O~P#3zO!O8gO~P!(zO!O8gO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O8gO~O]&cO!V&bO(v8mO~O)W8nO~O]&cO!V2uO!h%Oi)W%Oi!O%Oi~O!W8qO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W8qO)S8sO~P$%pO!W8qO~P!(zO]&cO!V2uO!h(Ya)W(Ya~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)W8tO)X#|O~P#3zO)W2iO~P!(zO)W8tO~OP%oO!O8uO(oQO~O!O8uO~O)W8vO~P%%eO#T8yO(x.PO)W8wO~O!h3pO!T)_i~O)X8}O!T'wa!h'wa~O)W9PO)j9RO~P)FwO)W9PO~O)W9PO)j9VO~P(&eOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P)GgO]&cO!V7jO!T!ya!h!ya#v!ya(v!ya)W!ya)j!ya!O!ya~O!W9^O)S9_O~P$%pO!T$WO!h7kO(v4OO)W9PO)j9VO~O!T$WO~P#EfO]&cO!O9bO!V7jO~O]&cO!V7jO!T&aa!h&aa#v&aa(v&aa)W&aa)j&aa!O&aa~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O)W&ba~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9PO)X#|O~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U&oi!h&oi~P#3zO!V.}O]']i!T']i!X']i!Y']i![']i!^']i!_']i!a']i!b']i!c']i!e']i!f']i!h']i(u']i(w']i(x']i)S']i)T']i)U']i)V']i)W']i)X']i!g']i)j']i!O']i!W']i(v']i!U']iQ']i!d']i~O(r%nO)X9eO~O!h7zO!O*Ya~O!O9gO~P&6yO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!U(Ua)W#Zi~P#3zO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|OQ#_q!d#_q!h#_q!O#_q~P#3zO&r#WO&s$wOQ#fq!d#fq!h#fq~O)j5jOQ#`a!d#`a!h#`a~O]&cO!V+kO!T#qq!x#qq#v#qq(v#qq)j#qq!O#qq!h#qq)W#qqQ#qq!d#qq)X#qq~O!h8ZO!O)oa~O)U5|O]&Vi!T&Vi!V&Vi)S&Vi)T&Vi)V&Vir&Vis&Vit&Viu&Viv&Viw&Vix&Viy&Vi!l&Vi!x&Vi#T&Vi#V&Vi#p&Vi#v&Vi(v&Vi(x&Vi)j&Via&Vid&Vil&Vi{&Vi}&Vi!o&Vi!r&Vi!s&Vi!t&Vi!u&Vi!v&Vi!{&Vi#a&Vi#b&Vi#i&Vi#t&Vi${&Vi%c&Vi%e&Vi%k&Vi%l&Vi%o&Vi%v&Vi&m&Vi&r&Vi&s&Vi(r&Vi)P&Vi)W&Vi!O&Vi!h&ViQ&Vi!d&Vi~O)W9jO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O!O$bq!h#{i)W#{i~P#3zO!O9lO~P!(zO!O9lO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9lO~O]&cO!V&bO(v9oO~O!O9pO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O9pO~O]&cO!V2uO!h%Oq)W%Oq!O%Oq~O!W9tO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W9tO~P!(zO)W6fO~P!(zO)W9uO~O)W9vO~O(x.PO)W9vO~O!h3pO!T)_q~O)X9xO!T'wi!h'wi~O!T$WO!h7kO(v4OO)W9yO)j9{O~O)W9yO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W9yO)X#|O~P#3zO)W9yO)j:OO~P)FwO]&cO!V7jO!T!yi!h!yi#v!yi(v!yi)W!yi)j!yi!O!yi~O!W:SO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:SO)S:UO~P$%pO!W:SO~P!(zO]&cO!V7jO!T(da!h(da(v(da)W(da)j(da~O!O:WO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO!h#iO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:WO~O!O:]O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:]O~O]&cO!V2uO!h%Oy)W%Oy!O%Oy~O)W:^O~O)W:_O~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:_O)X#|O~P#3zO!T$WO!h7kO(v4OO)W:_O)j:bO~O]&cO!V7jO!T!yq!h!yq#v!yq(v!yq)W!yq)j!yq!O!yq~O!W:dO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!W:dO~P!(zO!O:fO!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)X#|O~P#3zO!O:fO~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:hO)X#|O~P#3zO)W:hO~O]&cO!V7jO!T!yy!h!yy#v!yy(v!yy)W!yy)j!yy!O!yy~O!Y#qO![#rO!^#uO!_#vO!a#xO!b#yO!c#yO!e#yO!f#zO(u#gO)S#mO)T#oO)U#nO)V#pO)W:lO)X#|O~P#3zO)W:lO~O]ZXlgXpZXpiX!TiX!VZX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX(uZX(v$]X(wZX(xZX)SZX)TZX)UZX)VZX)WZX)XZX)jZX~O]%WXlmXpnXp%WX!TnX!V%WX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX!O%WXQ%WX!d%WX~O)W%WX!W%WX(v%WX!U%WX~P+GrO]nX]%WXdnXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!VnX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX!OnX!O%WX!hnX)XnX~O)WnX)jnX~P+JSO]%WXlmXpnXp%WX!V%WX!h%WXQ%WX!d%WX!O%WX~O!T%WX#v%WX)W%WX)j%WX(v%WX~P+LmOQnXQ%WX!TnX!X%WX!Y%WX![%WX!^%WX!_%WX!a%WX!b%WX!c%WX!dnX!d%WX!e%WX!f%WX!gmX!h%WX(u%WX(w%WX(x%WX)S%WX)T%WX)U%WX)V%WX)X%WX)jmX~P+JSO]nX]%WXlmXpnXp%WXrnXsnXtnXunXvnXwnXxnXynX}nX!V%WX!rnX!snX!tnX!unX!vnX!xnX!{nX%vnX&rnX&snX(rnX)SnX)UnX)VnX~O!TnX(vnX)WnX)jnX~P, eOdnX!VnX)W%WX~P, eOlmXpnX)W%WX~Od)oO%Y)pO(y:oO~Od)oO%Y)pO(y:tO~Od)oO%Y)pO(y:pO~Od$RO%Y*TO'[$TO'_$UO(y:oO~Od$RO%Y*TO'[$TO'_$UO(y:qO~Od$RO%Y*TO'[$TO'_$UO(y:sO~O]iXriXsiXtiXuiXviXwiXxiXyiX!OiX!ViX&riX&siX)SiX)UiX)ViXdiX}iX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX~P#1jO]ZXlgXpZXpiX!VZX!hZX)WZX)jZX~O!TZX#vZX(vZX~P,'{OlgXpiX)PiX)WZX)jiX~O]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX!OZX!OiX!hiX)XiX)jiX~O)WZX~P,)VO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX!TiX!VZX!ViX!XZX!YZX![ZX!^ZX!_ZX!aZX!bZX!cZX!eZX!fZX!gZX!hZX!hiX&riX&siX(uZX(wZX(xZX)SZX)SiX)TZX)UZX)UiX)VZX)ViX)XZX)XiX)jZX~OQZXQiX!dZX!diX~P,+pO]iXdiXriXsiXtiXuiXviXwiXxiXyiX}iX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~P#1jO]ZX]iXdiXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!VZX!ViX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX)SiX)UiX)ViX~O)WiX~P,0rOdiX}iX!OZX!OiX!riX!siX!tiX!uiX!viX!xiX!{iX%viX(riX)jiX~P,+pO]ZX]iXlgXpZXpiXriXsiXtiXuiXviXwiXxiXyiX}iX!TiX!VZX!riX!siX!tiX!uiX!viX!xiX!{iX%viX&riX&siX(riX(viX)SiX)UiX)ViX)WiX)jiX~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~PBUOd$RO%Y*TO(y:oO~Od$RO%Y*TO(y:pO~Od$RO%Y*TO(y:vO~Od$RO%Y*TO(y:uO~O]%hOd!POl%bOr!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O!V%kO!{!dO!|%RO%v$mO(r$xO)S;aO)U;bO)V;bO~O]%hOd!POl%bO!V%kO!{!dO%v$mO(r$xO)S;aO)U;bO)V;bO~Od$RO%Y$SO(y:pO~Od$RO%Y$SO(y:tO~Ol:yO~Ol:xO~O]cXlgXpiX!TcX~Od)oO%Y*TO(y:oO~Od)oO%Y*TO(y:pO~Od)oO%Y*TO(y:qO~Od)oO%Y*TO(y:rO~Od)oO%Y*TO(y:sO~Od)oO%Y*TO(y:uO~Od)oO%Y*TO(y:vO~Or!^Os!^Ot!^Ou!^Ov!^Ow!^Ox!^Oy!^O~P,9OO](}Xr(}Xs(}Xt(}Xu(}Xv(}Xw(}Xx(}Xy(}X}(}X!r(}X!s(}X!t(}X!u(}X!v(}X!x(}X!{(}X%v(}X&r(}X&s(}X(r(}X)S(}X)U(}X)V(}X)j(}X~Ol:xO!T(}X(v(}X)W(}X~P,<}O]&wXlmXpnX!T&wX~Od4kO%Y*TO(y;tO~Ol;[O)S;xO)U5aO)V5aO~P(ElOd!POl%bO!{!dO%v$mO(r$xO~O]1SO!V1QO)S0zO)U;yO)V;yOQ#nX!d#nX!h#nX!O#nX~P,?yO)S;YO~Ol;hO~Ol;iO~Ol;jO~Ol;lO~Ol;mO~Ol;nO~Ol;lO!T$WOQ(}X!d(}X!h(}X)X(}X!O(}X)j(}X~P$GQOl;jO!T$WO~P$GQOl;hO!g$YO)j$YO~Ol;jO!g$YO)j$YO~Ol;lO!g$YO)j$YO~Ol;iO!O(}X!h(}X)X(}X)j(}X~P$GQOd/^O%Y*TO(y;tO~Ol;uO~O)S<YO~OV'e'h'i'g(o)Y!R(rST%Z!Y!['jd%[!i'R!f]'f*Z'k(w!^!_'l'm'l~",goto:"%5]*ZPPPPPP*[P*_PP.T4iP7j7j:tP:t>OP>i>{?aFXMX!&]!,sP!3m!4b!5VP!5qPPPPPPPP!6[P!7tPP!9V!:oP!:uPPPPPP!:xP!:xPP!:xPPPPPPPPP!;U!>lP!>oPP!?]!@QPPPPP!@UP>l!AgPP>l!Cn!Eo!E}!Gd!ITP!I`P!Io!Io!MP#!`##v#'S#*^!Eo#*hPP!Eo#*o#*u#*h#*h#*xP#*|#+k#+k#+k#+k!ITP#,U#,g#.|P#/bP#0}P#1R#1Z#2O#2Z#4i#4q#4q#1RP#1RP#4x#5OP#5YPP#5u#6d#7U#5uP#7v#8SP#5uP#5uPP#5u#5uP#5uP#5uP#5uP#5uP#5uP#5uP#8V#5Y#8sP#9YP#9o#9o#9o#9o#9|#1RP#:d#?`#?}PPPPPPPP#@uP#ATP#ATP#Aa#Dn#9OPP#@}#EQP#Ee#Ep#Ev#Ev#@}#FlP#1R#1R#1R#1R#1RP!Io#GW#G_#G_#G_#Gc!Ly#Gm!Ly#Gq!E}!E}!E}#Gt#L^!E}>l>l>l$#V!@Q!@Q!@Q!@Q!@Q!@Q!6[!6[!6[$#jP$%V$%e!6[$%kPP!6[$'y$'|#@l$(P:t7j$+V$-Q$.q$0a7jPP7j$2T7jP7j7jP7jP$5Z7jP7jPP7j$5gPPPPPPPPP*[P$8o$8u$;^$=d$=j$>Q$>[$>g$>v$>|$@[$AZ$Ab$Ai$Ao$Aw$BR$BX$Bd$Bj$Bs$B{$CW$C^$Ch$Cn$Cx$DP$D`$Df$DlP$Dr$Dz$ER$Ea$F}$GT$GZ$Gb$GkPPPPPPPP$Gq$GuPPPPP$Nw$'y$Nz%$S%&[P%&i%&lPPPPPPPPPP%&x%'{%(R%(V%)|%+Z%+|%,T%.d%.jPPP%.t%/P%/S%/Y%0a%0d%0n%0x%0|%2Q%2s%2y#@uP%3d%3t%3w%4X%4e%4i%4o%4u$'y$'|$'|%4x%4{P%5V%5YR#cP'`mO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fU%om%p7QQ&m!`Q(j#]d0P)}/|/}0O0R4}5O5P5S8QR7Q3Tb}Oaewx{!g&S*q&v$i[!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0{1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fS%`f0h#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YS%qm!YS&u!h#PQ']!tQ'g!yQ'h!zQ(j#`Q(k#]Q(l#^Q*x%kQ,W&lQ,]&nQ-S'^Q-d'fQ-k'qS.r(Z4XQ/f)gQ0e*mQ2Q,[Q2X,cQ3O-eQ4b.|Q4f/TQ5f0}Q6[2TQ6}3PQ8a6ZQ9e7zR;Z1Q$|#hS!]$y%Q%T%Z&j&k'Q'X'Z'a'c(a(e(h(w(x)R)S)T)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:iQ&p!dQ(g#ZQ(s#bQ)j$T[*s%e*W0k2`2g2{Q,^&oQ/O(fQ/S(kQ/Z(tS/i)i/PQ0r+QS4q/j/kR8O4r'a![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f'a!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ)O#kS+Q%y0sQ/r)sk3}.g3s3w3z3{7c7e7f7h7k9X9Y:RQ)Q#kk3|.g3s3w3z3{7c7e7f7h7k9X9Y:Rl)P#k.g3s3w3z3{7c7e7f7h7k9X9Y:RT+Q%y0s[UOwx!g&S*qW$`[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.o&|;{af{|!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k$|$}%S%]%h%m&Q&W&b&y&|'O'i'j'u'y(`(i)l)r*`*b*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0]0h0y0{1Q1a1b1l1p1z2c2i2j2u4O4R4W4a5Y5a5e5q6_6c6f6g6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f;`;xQ;|1Sd;}&x'P'b,w-]-^-a2f2z2}W<O&f*v1|3iQ<P#O[<Q!t'^'f,[2T6ZT<]%y0s[VOwx!g&S*qW$a[e$e(bQ$p.u!j$q_!f!u!}#V#Z$S$T$l%U&U&Y&c&m'_(g)j)p+[+a+t,X,k,z-Q-o.d1T1X1f1k1m2l3t5j8Z&^$zaf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fQ'r#O|'|#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[l(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS-n't-wQ3W-tU;s(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;x[<Q!t'^'f,[2T6ZW<R&f*v1|3id<S&x'P'b,w-]-^-a2f2z2}Q<Z1ST<]%y0s!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!v$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$Q%lgnp|#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ'[!tz(O#R#S#T#U'}(P(U(^+y.W.X._.`.q3[3]3^3p5}6P7[f-Z'`-T-V-Y2p2q2s2v6q6r8pQ1W+aQ1Z+bQ2k,yQ3X-tQ4[.uQ5l1YR8V5m!Q!UO[ewx!g$e&S&f&x'P'b(b*q*v,w-]-^-a1|2f2z2}3i!x$t_!f!u!}#O#V#Z$S$T$l%U&U&Y&c&m'_'t(Q(g)j)p+[+a+t,X,k,z-Q-o-w.d.m.o1S1T1X1f1k1m2l3t5j8Z&^%Paf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$S%lgnp|!t#k$g$|$}%S%d%h%i%w%y&s'^'f'u*Y*`*b*t+],[,l,v-_-p.f.g0]0s0y0z1O2T2_2j3s3w3z3{5a6Z6g7c7e7f7h7k9X9Y:R;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y|(O#R#S#T#U'}(P(U(^+b+y.W.X._.`.q3[3]3^3p5}6P7[Q3X-tR4[.u[WOwx!g&S*qW$b[e$e(b#l$p_!f!u!}#R#S#T#U#V#Z$S$T$l%U&U&Y&c&m'_'}(P(U(^(g)j)p+[+a+b+t+y,X,k,z-Q-o-t.W.X._.`.d.q.u1T1X1f1k1m2l3[3]3^3p3t5j5}6P7[8Z![%cg$g%d%i&s*Y*t+],l,v-_0z1O2_;W;X;Y;a;b;o;p;q;r;v;w;y<W<X<YY%snp%w-p.fl(|#k.g3s3w3z3{7c7e7f7h7k9X9Y:RS;e't-wU;f(Q.m.on;{|$|$}%S%h'u*`*b0]0y2j5a6g;`;xQ;|1SQ<P#O[<Q!t'^'f,[2T6Z&^<Taf{!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$f$k%]%m&Q&W&b&y&|'O'i'j'y(`(i)l)r*h*i*l*r+W+Y+h+j+k,P,R,n,q-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z2c2i2u4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fd<U&x'P'b,w-]-^-a2f2z2}W<V&f*v1|3iT<]%y0sp$PT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)m$V*U*[/_:w:x:y;h;i;j;k;l;m;n;up$QT$_$o%b%r({:z:{:|;[;];^;_;c;d<[o)n$V*U*[/_:w:x:y;h;i;j;k;l;m;n;u^&e}!O$i$j%`%j;Zd&i!U$t%P%l'[(O1W1Z3X4[V/a)O)P3}S%Ye$eQ,T&fQ.{(bQ2m-QQ5y1mQ6V1|Q6m2lR9h8Z#}!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Z#[^O[_`wx!f!g!}#O$S$d$l$s$u&S&U&Y&c&m&r&x'P'b't(Q)p*]*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3t_(U#R#S#T+b3[3]3^#}ZO[wx!g!k#R#S#T%m&S&U&Y&c&m&w&x&y&|'O'P'['b't'x'}(P(Q(U*q*v+[+b,X,h,k,q-P-]-^-a-o-t-w-z._.d.m.q1S1T1f2c2k2z2}3[3]3^3i6c6j8g9l9p:W:]:fQ$]YR0T*OR*Q$]e0P)}/|/}0O0R4}5O5P5S8Q'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fe0P)}/|/}0O0R4}5O5P5S8QR5T0T^(T#R#S#T+b3[3]3^Y.]'}(R(U(V7TU3k.Z.^.qS7X3l4VR9c7s^(S#R#S#T+b3[3]3^[.['}(R(T(U(V7TW3j.Z.].^.qU7W3k3l4VS8z7X7sR:V9cT.k(Q.md]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tQ%tnT1u+}1v!jbOaenpwx{|!g#O$|$}%S%h%w&S't'u(Q*`*b*q-p-w.f.m.o0]0y1S2j5a6g;`;xf-W'`-T-V-Y2p2q2s2v6q6r8pj3x.g3s3w3z3{7c7e7f7h7k9X9Y:Rr;zg$g%d%i&s*Y*t,l,v-_2_;W;X;Y;o;q;vi<^+]0z1O;a;b;p;r;w;y<W<X<Y!O&^y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yz&az%O%W%e&d's*W*_,b-x0Z0[0k0|2`2g2{5V5b6l8iS'{#Q.Xn+l&X*g+f+m+p-j/h0_1R1^4t5W5`5u8XQ2W,a^2t-X2r2x6p6w8o9se7i3y7_7g7o7p9U9W9`:Q:cS+^&U1TY+n&Y&c*v1S3iR5s1f#w!POaegnpwx{|!g#O$g$|$}%S%d%h%i%w&S&s't'u(Q*Y*`*b*q*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Y`oOwx!g&S't*q-w#U!Paeg{|#O$g$|$}%S%d%h%i&s'u*Y*`*b*t+],l,v-_0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YU%vnp-pQ*}%wS.e(Q.mT3v.f.oW+r&^+l+s1cV+z&a+{7iQ+x&`U+z&a+{7iQ-w'tT.S'y.U'`![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'W!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fW1r+y.X5}6PR2e,s!WjO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fY%Ve$e(b1p3iQ'S!nS(y#i5YQ,m&xQ,x'PS.O'y.UQ2b,nQ6k2iQ6|2}Q8h6fR9m8e'W![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fX1r+y.X5}6P'ayO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k+y,P,R,n,q,w-]-^-a-g.P.Q.U.X.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q5}6P6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ&`yS't#O-uR1[+cS+^&U1TR5n1[Q1P+]R5g1OR1P+]T+^&U1Tz&[%X&V&Y&Z'k)h*d*f+]+e/m0^0y0z1O1S1j5a5v;x;yQ&]yR1n+x!P&[y%X&V&Y&Z'k)h*d*f+]+e+x/m0^0y0z1O1S1j5a5v;x;yQ+u&^S+|&a7iS1d+l+sQ1t+{R5r1c!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fS%zo.eS&Oq-rQ&_yQ&q!eQ'e!yQ*p%eU*{%v%{3vS+P%x%}Q+q&]Q,Y&mS,Z&n'gQ,r&{S0X*W,bS0o*|*}Q0q+OQ1o+xS2S,]-fQ5U0ZQ5Z0pQ5{1nQ6Y2RQ6]2WQ7n3yQ9S7_R:P9U[uOwx!g&S*qQ,Y&mQ-v'tQ3Y-tR3_-wxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^S%zo.eS&Oq-rQ*p%eU*{%v%{3vS+P%x%}S0X*W,bS0o*|*}Q0q+OQ5U0ZQ5Z0pQ7n3yQ9S7_R:P9UT,_&q,`]uOwx!g&S*q[uOwx!g&S*qQ,Y&mQ,n&xQ,w'PW-`'b-]-a2zQ-v'tQ3Y-tQ3_-wR6{2}[%fg$g,l,v-_2_R0l*t^$XV!U$a$z%P<R<SQ'S!nS)`#}*vS)v$W*qQ)y$YY*s%e*W0k2g2{Q/O(fS/i)i/PS0a*h4aS0j*r6_Q0r+QQ4Q.gQ4n/cS4q/j/kS4v/n5YQ4{/uQ6`2`U7a3s3y4RQ8O4rQ8k6hY9Q7_7b7c7l7mQ9r8mW9z9O9R9U9VQ:Z9oU:a9{9}:OR:j:bS)v$W*qT4v/n5YZ)t$W)u*q/n5YQ&w!hR'x#PS,g&v'vQ2[,eR6^2ZxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fV$h[&|-^!XkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:f!WhO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR'W!q!WkO[wx!g!k%m&S&y&|'O'b*q,q-]-^-a2c2z6c6j8g9l9p:W:]:fR,n&xQ&y!iQ&{!jQ'O!lR,q&zR,o&xxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fX-`'b-]-a2z[uOwx!g&S*qQ,z'PQ-v'tS.k(Q.mR3_-w[uOwx!g&S*qQ,z'PW-`'b-]-a2zT.k(Q.mg-Z'`-T-V-Y2p2q2s2v6q6r8pylOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fb!OOaewx{!g&S*q&|$j[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d%jgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<YQ']!tQ-S'^Q-d'fQ2Q,[Q6[2TR8a6Zj$RT$_%b%r:z:{:|;[;];^;_;c;di)o$V*U:w:x:y;h;i;j;k;l;m;nj$RT$_%b%r:z:{:|;[;];^;_;c;dh)o$V*U:w:x:y;h;i;j;k;l;m;nS/^({<[V4k/_/`;u[uOwx!g&S*qQ-v'tR3_-w[uOwx!g&S*qT.k(Q.m'`!YO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fR7R3T[uOwx!g&S*qQ-v'tS.k(Q.mR3_-w[pOwx!g&S*qQ%wnS-p't-wT.f(Q.mS%{o.eS*|%v3vR0p*}Q+R%yR5]0sS%zo.eS&Oq-rU*{%v%{3vS+P%x%}S0o*|*}Q0q+OQ5Z0pQ7n3yQ9S7_R:P9U`qOwx!g&S(Q*q.mS%xn-pU%}p.f.oQ+O%wT-r't-wS'z#Q.XR.Y'{T.R'y.US.S'y.UQ8x7UR9w8yT5}1q8_R6P1q#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&}![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f#d!Pgnp|#O$g$|$}%S%d%h%i%w&s't'u(Q*Y*`*b*t+],l,v-_-p-w.f.m.o0]0y0z1O1S2_2j5a6g;W;X;Y;`;a;b;o;p;q;r;v;w;x;y<W<X<Yb!QOaewx{!g&S*q&|![[f!W!X!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#{#}$U$W$Y$e$f$k%]%m&Q&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W4a5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fk3|.g3s3w3z3{7c7e7f7h7k9X9Y:RQ4Q.gS7a3s3yU9Q7_7c7lS9z9O9UR:a9}#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR4].uQ(]#US.v([(^S4^.w.xR7w4_Q.s(ZR7u4X#|!TO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o1S1T1X1f1k1m1|2f2l2z2}3i3t5j8Zp$w`$d$s%X&r'`(_(f)i*d-T/k1j5k5v8Uq(}#k%y.g0s3s3w3z3{7c7e7f7h7k9X9Y:RR,U&fR6W1|'X!VO[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:f$q#rS%T%Z'Q'X'Z'a'c(a(e(h(w(x)R)S)U)V)W)X)Y)Z)[)])^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$]#sS%T%Z'Q'X'Z'a'c(h(w(x)R)V)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$Z#tS%T%Z'Q'X'Z'a'c(h(w(x)R)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i$c#wS%T%Z'Q'X'Z'a'c(h(w(x)R)U)V)W)X)^)_)k)q)x+X+g,O,S,j,u-h-i-|.y/p0`0b0g0i0w1`1y2a2h3R3c3d4c4d4j4m4s4u4y4z5d5p5w6U6e6i6s6z7q7r7t8S8T8c8f8j8r9T9[9k9q9|:T:Y:`:i'X![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/[/c/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ/P(fQ/j)iQ4r/kR9d7y']![O[aefwx{!W!X!g!k!n!r!s!v!x#X#Y#[#g#i#l#q#r#s#t#u#v#w#x#y#z#}$U$W$Y$e$f$k%]%m&Q&S&W&b&f&x&y&|'O'P'b'i'j'y(`(b(i)l)r*h*i*l*q*r*v+W+Y+h+j+k,P,R,n,q,w-]-^-a-g.P.Q.U.}/Q/[/c/l/n/s/u0h0{1Q1a1b1l1p1z1|2c2f2i2u2z2}3i4O4R4W5Y5e5q6_6c6f6h6j6t6v6{7b7j7m8e8g8m8s8t9R9V9]9_9l9o9p9{:O:U:W:]:b:fQ#eQR(u#eU$|a;`;xb%Ue$e&f(b-Q1m1|2l8ZQ'_!u!Q*^$|%U'_*`*f+h,P0]0^1b2p6q6t7e8p9X9]:R;W;o;p;v;w<WS*`$}%SQ*f%XS+h&W1QQ,P&bQ0]*bQ0^*dQ1b+kQ2p-VS6q2q2sQ6t2uQ7e3wQ8p6rS9X7f7hQ9]7jQ:R9YQ;W%dS;o;X;YS;p<X<YQ;v;qQ;w;rT<W0z;a[[Owx!g&S*ql$c[&|'}+[,X,h,k-P-^-o-z._.d.ql&|!k%m&y'O,q2c6c6j8g9l9p:W:]:f^'}#R#S#T+b3[3]3^`+[&U&Y&c*v1S1T1f3iS,X&m-tQ,h&wU,k&x'P2}S-P'[2kW-^'b-]-a2zS-o't-wQ-z'xQ._(PS.d(Q.mR.q(UQ)|$[R/x)|Q0R)}Q4}/|Q5O/}Q5P0OY5Q0R4}5O5P8QR8Q5SQ*P$]S0U*P0VR0V*QS.`(P._S3n.`7[R7[3pQ3q.aS7Y3o3rU7^3q7Y8{R8{7ZQ.m(QR4S.m!|_O[wx!f!g!}#O$S$l&S&U&Y&c&m&x'P'b't(Q)p*q*v+[,X,k,w,z-]-^-a-o-t-w.d.m.o1S1T1f2f2z2}3i3tU$r_$u*]U$u`$d&rR*]$sU$}a;`;xd*a$}*b2q6r7f9Y;X;q;r<XQ*b%SQ2q-VQ6r2sQ7f3wQ9Y7hQ;X%dQ;q;YQ;r<YT<X0z;aS+{&a7iR1s+{S*j%Z/pR0c*jQ1U+_R5i1UU+e&V0z;xR1]+eQ+s&^Q1c+lT1i+s1cQ8[5yR9i8[QwOS&Rw&ST&Sx*qQ,`&qR2V,`W)u$W*q/n5YR/t)uU/o)q)v0gR4w/o[*u%e%f*W2`2g2{R0m*uQ,d&uR2Y,dQ-a'bQ2z-]T2|-a2zQ2w-XR6x2wQ-f'gQ2R,]T3Q-f2RS%pm7QR*z%pdnOwx!g&S't(Q*q-w.mR%unQ0t+RR5^0tQ.U'yR3f.UQ1v+}R6Q1vU*n%`*x;ZR0f*nS1g+n0nR5t1gQ7l3yQ9O7_U9a7l9O9}R9}9U$O!SO[_ewx!f!g!u!}#O#V#Z$S$T$e$l%U&S&U&Y&c&f&m&x'P'_'b't(Q(b(g)j)p*q*v+[+a+t,X,k,w,z-Q-]-^-a-o-t-w.d.m.o.u1S1T1X1f1k1m1|2f2l2z2}3i3t5j8ZR&g!SQ4Y.sR7v4YQ1},UR6X1}S/d)_)`R4o/dW(o#a(j(k/SR/W(oQ7{4fR9f7{T)a#}*v!USO[wx!g!k%m&S&y&|'O'b,q-]-^-a2c2z6c6j8g9l9p:W:]:fj$ya{$k%]+j,R1a1z5q6v8s9_:UY%Te$e(b1p3iY%Zf$f(i)l*lQ&j!WQ&k!XQ'Q!nQ'X!rQ'Z!sQ'a!vQ'c!xQ(a#XQ(e#YS(h#[+YQ(w#gQ(x#iQ)R#lQ)S#qQ)T#rQ)U#sQ)V#tQ)W#uQ)X#vQ)Y#wQ)Z#xQ)[#yQ)]#zQ)^#{S)_#}*vQ)k$UQ)q$WQ)x$YQ+X&QS+g&W1QQ,O&bQ,S&fQ,j&xQ,u'PQ-h'iQ-i'jS-|'y.UQ.y(`S/p)r0hS0`*h4aQ0b*iQ0g*qQ0i*rQ0w+WS1`+h+kQ1y,PQ2a,nS2h,w6{Q3R-gQ3c.PQ3d.QQ4c.}Q4d/QQ4j/[Q4m/cQ4s/lQ4u/nQ4y/sQ4z/uQ5d0{Q5p1bQ5w1lQ6U1|S6e2f8tQ6i2iQ6s2uQ6z2}Q7q4OQ7r4RQ7t4WQ8S5YQ8T5eQ8c6_Q8f6fQ8j6hQ8r6tS9T7b7mQ9[7jQ9k8eQ9q8mS9|9R9VQ:T9]Q:Y9oS:`9{:OR:i:bR,V&fd]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3t#r${ae!u$e$|$}%S%U%X%d&W&b&f'_(b*`*b*d*f+h+k,P-Q-V0]0^1Q1b1m1|2l2p2q2s2u3w6q6r6t7e7f7h7j8Z8p9X9Y9]:R;W;X;Y;`;a;o;p;q;r;v;w<W<X<YQ%tnS+d&V+eW+r&^+l+s1cU+z&a+{7iQ1k+tT5c0z;x``Owx!g&S't*q-wS$d[-oQ$s_b%Xe$e&f(b-Q1m1|2l8Z!h&r!f!}#O$S$l&U&Y&c&m&x'P'b(Q)p*v+[,X,k,w,z-]-^-a-t.d.m.o1S1T1f2f2z2}3i3tQ'`!uS(_#V+aQ(f#ZS)i$T(gQ*d%UQ-T'_Q/k)jQ1j+tQ5k1XQ5v1kR8U5jS(W#R3]S(X#S3^V(Y#T+b3[R$^Ye0Q)}/|/}0O0R4}5O5P5S8QW(R#R#S#T+bQ([#US.Z'}(US.a(P._Q.x(^W1r+y.X5}6PQ3Z-tQ3h.WQ3o.`Q4V.qU7T3[3]3^Q7]3pR8|7[Q.b(PR3m._T.l(Q.mdgOwx!g&S&m't*q-t-wU$g[,X-oQ&s!fQ'k!}Q'u#OQ)h$SQ*Y$l`+]&U&Y&c*v1S1T1f3iQ,l&xQ,v'PY-_'b-]-a2z2}S.g(Q.mQ/m)pQ0y+[S2_,k-^S2j,w,zS3s.d.oQ6g2fR7c3td]Owx!g&S't(Q*q-w.m!v^[_`!f!}#O$S$d$l$s$u&U&Y&c&m&r&x'P'b)p*]*v+[,X,k,w,z-]-^-a-o-t.d.o1S1T1f2f2z2}3i3tR%tnQ3y.gQ7_3sQ7g3wQ7o3zQ7p3{Q9U7cU9W7e7f7hQ9`7kS:Q9X9YR:c:RZ+o&Y&c*v1S3ipzOnpwx!g%w&S't(Q*q-p-w.f.m.o[%Oa%d0z;`;a;xU%We%h1SQ%eg^&d{|%i1O5a;b;yQ's#OQ*W$gb*_$|$}%S;W;X;Y<W<X<YQ,b&sQ-x'uQ0Z*Y[0[*`*b;o;p;q;rQ0k*tQ0|+]Q2`,lQ2g,vS2{-_2_U5V0];v;wQ5b0yQ6l2jR8i6gQ+}&aR9Z7iS1q+y.XQ8^5}R8_6P[%^f$f(i)l)r0hR0d*lR+`&UQ+_&UR5h1TS&Xy+xQ*g%XU+f&V0z;xS+m&Y1SW+p&Z1O5a;yQ-j'kQ/h)hS0_*d*fQ1R+]Q1^+eQ4t/mQ5W0^Q5`0yQ5u1jR8X5vR5z1mYvOwx&S*qR&t!gW%gg,l,v-_T*X$g2_T)w$W*q[uOwx!g&S*qQ&}!kQ*y%mQ,p&yQ,t'OQ2d,qQ6b2cQ8d6cQ8l6jQ9n8gQ:X9lQ:[9pQ:e:WQ:g:]R:k:fxlOwx!g!k%m&S&y'O*q,q2c6c6j8g9l9p:W:]:fU$h[&|-^X-`'b-]-a2zQ-['`R2o-TS-X'`-TQ2r-VQ2x-YU6p2p2q2sQ6w2vS8o6q6rR9s8p[rOwx!g&S*qS-q't-wT.h(Q.mR+S%y[sOwx!g&S*qS-s't-wT.i(Q.m[tOwx!g&S*qT.j(Q.mT.T'y.UX%af%k0h1QQ.w([R4_.xR.t(ZR(d#XQ(r#aS/R(j(kR4e/SR/V(lR4g/T",nodeNames:"⚠ RawString > MacroName LineComment BlockComment PreprocDirective #include String EscapeSequence SystemLibString Identifier ArgumentList ( ConditionalExpression AssignmentExpression CallExpression PrimitiveType FieldExpression FieldIdentifier DestructorName TemplateMethod ScopedFieldIdentifier NamespaceIdentifier TemplateType TypeIdentifier ScopedTypeIdentifier ScopedNamespaceIdentifier :: NamespaceIdentifier TypeIdentifier TemplateArgumentList < TypeDescriptor const volatile restrict _Atomic mutable constexpr constinit consteval StructSpecifier struct MsDeclspecModifier __declspec ) Attribute AttributeName Identifier AttributeArgs { } [ ] UpdateOp ArithOp ArithOp ArithOp LogicOp BitOp BitOp BitOp CompareOp CompareOp CompareOp > CompareOp BitOp UpdateOp , Number CharLiteral AttributeArgs VirtualSpecifier BaseClassClause Access virtual FieldDeclarationList FieldDeclaration extern static register inline thread_local AttributeSpecifier __attribute__ PointerDeclarator MsBasedModifier __based MsPointerModifier FunctionDeclarator ParameterList ParameterDeclaration PointerDeclarator FunctionDeclarator Noexcept noexcept RequiresClause requires True False ParenthesizedExpression CommaExpression LambdaExpression LambdaCaptureSpecifier TemplateParameterList OptionalParameterDeclaration TypeParameterDeclaration typename class VariadicParameterDeclaration VariadicDeclarator ReferenceDeclarator OptionalTypeParameterDeclaration VariadicTypeParameterDeclaration TemplateTemplateParameterDeclaration template AbstractFunctionDeclarator AbstractPointerDeclarator AbstractArrayDeclarator AbstractParenthesizedDeclarator AbstractReferenceDeclarator ThrowSpecifier throw TrailingReturnType CompoundStatement FunctionDefinition MsCallModifier TryStatement try CatchClause catch LinkageSpecification Declaration InitDeclarator InitializerList InitializerPair SubscriptDesignator FieldDesignator ExportDeclaration export ImportDeclaration import ModuleName PartitionName HeaderName CaseStatement case default LabeledStatement StatementIdentifier ExpressionStatement IfStatement if ConditionClause Declaration else SwitchStatement switch DoStatement do while WhileStatement ForStatement for ReturnStatement return BreakStatement break ContinueStatement continue GotoStatement goto CoReturnStatement co_return CoYieldStatement co_yield AttributeStatement ForRangeLoop AliasDeclaration using TypeDefinition typedef PointerDeclarator FunctionDeclarator ArrayDeclarator ParenthesizedDeclarator ThrowStatement NamespaceDefinition namespace ScopedIdentifier Identifier OperatorName operator ArithOp BitOp CompareOp LogicOp new delete co_await ConceptDefinition concept UsingDeclaration enum StaticAssertDeclaration static_assert ConcatenatedString TemplateDeclaration FriendDeclaration friend union FunctionDefinition ExplicitFunctionSpecifier explicit FieldInitializerList FieldInitializer DefaultMethodClause DeleteMethodClause FunctionDefinition OperatorCast operator TemplateInstantiation FunctionDefinition FunctionDefinition Declaration ModuleDeclaration module RequiresExpression RequirementList SimpleRequirement TypeRequirement CompoundRequirement ReturnTypeRequirement ConstraintConjuction LogicOp ConstraintDisjunction LogicOp ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator TemplateFunction OperatorName StructuredBindingDeclarator ArrayDeclarator ParenthesizedDeclarator ReferenceDeclarator BitfieldClause FunctionDefinition FunctionDefinition Declaration FunctionDefinition Declaration AccessSpecifier UnionSpecifier ClassSpecifier EnumSpecifier SizedTypeSpecifier TypeSize EnumeratorList Enumerator DependentType Decltype decltype auto PlaceholderTypeSpecifier ParameterPackExpansion ParameterPackExpansion FieldIdentifier PointerExpression SubscriptExpression BinaryExpression ArithOp LogicOp LogicOp BitOp UnaryExpression LogicOp BitOp UpdateExpression CastExpression SizeofExpression sizeof CoAwaitExpression CompoundLiteralExpression NULL NewExpression new NewDeclarator DeleteExpression delete ParameterPackExpansion nullptr this UserDefinedLiteral ParamPack #define PreprocArg #if #ifdef #ifndef #else #endif #elif PreprocDirectiveName Macro Program",maxTerm:425,nodeProps:[["group",-35,1,8,11,14,15,16,18,71,72,100,101,102,104,191,208,229,242,243,270,271,272,277,280,281,282,284,285,286,287,290,292,293,294,295,296,"Expression",-13,17,24,25,26,42,255,256,257,258,262,263,265,266,"Type",-19,126,129,147,150,152,153,158,160,163,164,166,168,170,172,174,176,178,179,188,"Statement"],["isolate",-4,4,5,8,10,""]],propSources:[D9e],skippedNodes:[0,3,4,5,6,7,10,297,298,299,300,301,302,303,304,305,306,347,348],repeatNodeCount:41,tokenData:"&*r7ZR!UOX$eXY({YZ.gZ]$e]^+P^p$epq({qr.}rs0}st2ktu$euv!7dvw!9bwx!;exy!<Yyz!=Tz{!>O{|!?R|}!AV}!O!BQ!O!P!DX!P!Q#+y!Q!R#Az!R![$(x![!]$Ag!]!^$Cc!^!_$D^!_!`%1W!`!a%2X!a!b%5_!b!c$e!c!n%6Y!n!o%7q!o!w%6Y!w!x%7q!x!}%6Y!}#O%:n#O#P%<g#P#Q%Kz#Q#R%Ms#R#S%6Y#S#T$e#T#i%6Y#i#j%Nv#j#o%6Y#o#p&!e#p#q&#`#q#r&%f#r#s&&a#s;'S$e;'S;=`(u<%lO$e&t$nY)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&r%eW)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^&j&SU'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j&kX'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j']V'f&jOY%}YZ%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&j'uP;=`<%l%}&r'{P;=`<%l%^&l(VW(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O&l(rP;=`<%l(O&t(xP;=`<%l$e7Z)Y`)ZW(pQ(n.o'f&j*Z)`OX$eXY({YZ*[Z]$e]^+P^p$epq({qr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e.o*aT(n.oXY*[YZ*[]^*[pq*[#O#P*p.o*sQYZ*[]^*y.o*|PYZ*[4e+[`)ZW(pQ(n.o'f&jOX$eXY+PYZ*[Z]$e]^+P^p$epq+Pqr$ers%^sw$ewx(Ox#O$e#O#P,^#P;'S$e;'S;=`(u<%lO$e4Z,cX'f&jOY%}YZ-OZ]%}]^-{^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4Z-V[(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4Z.QV'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P.nT*W)`(n.oXY*[YZ*[]^*[pq*[#O#P*p3o/[[%^!b'QP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o0_Y%]!b!a,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e6e1YY)ZW(qQ(o/]'f&jOY%^Zr%^rs1xsw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^(U2RW)x!b)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^4e2tf)ZW(pQ'f&jOX$eXY2kZp$epq2kqr$ers%^sw$ewx(Ox!c$e!c!}4Y!}#O$e#O#P&f#P#T$e#T#W4Y#W#X5m#X#Y>u#Y#]4Y#]#^NZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e4eb)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e5xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y7W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e7cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z8q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e8|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^:[#^#o4Y#o;'S$e;'S;=`(u<%lO$e4e:gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#b4Y#b#c;u#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e<Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y=`#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e=mb)ZW(pQ'e.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e?Qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a@f#a#b4Y#b#cHV#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e@qf)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^BV#^#g4Y#g#hEV#h#o4Y#o;'S$e;'S;=`(u<%lO$e4eBbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZCp#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eC}b)ZW(pQ'f&j'l.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eEbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#YFp#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4eF}b)ZW(pQ'j.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eHbd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#XIp#X#o4Y#o;'S$e;'S;=`(u<%lO$e4eI{d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#]4Y#]#^KZ#^#o4Y#o;'S$e;'S;=`(u<%lO$e4eKfd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#ZLt#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4eMRb)ZW(pQ'f&j'k.o'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4eNff)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z! z#Z#b4Y#b#c!.[#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!!Xf)ZW(pQ'g.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!#m#X#b4Y#b#c!(W#c#o4Y#o;'S$e;'S;=`(u<%lO$e4e!#xd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!%W#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!%cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!&q#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!'Ob)ZW(pQ'h.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!(cd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!)q#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!)|d)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!+[#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!+gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#Y4Y#Y#Z!,u#Z#o4Y#o;'S$e;'S;=`(u<%lO$e4e!-Sb)ZW(pQ'i.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e4e!.gd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#V4Y#V#W!/u#W#o4Y#o;'S$e;'S;=`(u<%lO$e4e!0Qd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#`4Y#`#a!1`#a#o4Y#o;'S$e;'S;=`(u<%lO$e4e!1kd)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#i4Y#i#j!2y#j#o4Y#o;'S$e;'S;=`(u<%lO$e4e!3Ud)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#W4Y#W#X!4d#X#o4Y#o;'S$e;'S;=`(u<%lO$e4e!4od)ZW(pQ'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#X4Y#X#Y!5}#Y#o4Y#o;'S$e;'S;=`(u<%lO$e4e!6[b)ZW(pQV.o'f&j'm.oOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![4Y![!c$e!c!}4Y!}#O$e#O#P&f#P#R$e#R#S4Y#S#T$e#T#o4Y#o;'S$e;'S;=`(u<%lO$e3o!7q[)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!8rY!g-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!9o])V,g)ZW(pQ%[!b'f&jOY$eZr$ers%^sv$evw!:hwx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!:uY)U,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2X!;pW)[S(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O6i!<eY)ZW(pQ]6_'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V!=`Y!Oa)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!>][)S,g)ZW(pQ%Z!b'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!?`^)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|!@[|!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!@gY)ZW!X-y(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!AbY!h,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!B__)ZW(pQ%Z!b!Y,g'f&jOY$eZr$ers%^sw$ewx(Ox}$e}!O!@[!O!_$e!_!`!8g!`!a!C^!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o!CiY(x-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Dd^)ZW(pQ'f&j(w,gOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!E`!P!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!Ei[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P!F_!P#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2a!FjY)X,k)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]!Gen)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Icx!Q$e!Q![!GY![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T!IjY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![!JY![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T!Jcn(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Icx!Q(O!Q![!JY![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ljl(pQ!i,g'f&jOY(OZr(Ors%}s{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T!Ni^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![# e![!c(O!c!i# e!i#O(O#O#P&f#P#T(O#T#Z# e#Z;'S(O;'S;=`(o<%lO(O2T# nj(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx!Nbx!Q(O!Q![# e![!c(O!c!h# e!h!i# e!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#Y# e#Y#Z# e#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T##id(pQ!i,g'f&jOY(OZr(Ors%}s!h(O!h!i##`!i!n(O!n!o##`!o!w(O!w!x##`!x#O(O#O#P&f#P#Y(O#Y#Z##`#Z#`(O#`#a##`#a#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]#%Sn)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#'Z`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![#(]![!c$e!c!i#(]!i#O$e#O#P&f#P#T$e#T#Z#(]#Z;'S$e;'S;=`(u<%lO$e2]#(hj)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx!Nbx!Q$e!Q![#(]![!c$e!c!h#(]!h!i#(]!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#Y#(]#Y#Z#(]#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]#*ef)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!h$e!h!i#*Y!i!n$e!n!o#*Y!o!w$e!w!x#*Y!x#O$e#O#P&f#P#Y$e#Y#Z#*Y#Z#`$e#`#a#*Y#a#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e7Z#,W`)ZW(pQ%Z!b![,g'f&jOY$eZr$ers%^sw$ewx(Oxz$ez{#-Y{!P$e!P!Q#:s!Q!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#-c])ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y1e#._TOz#.[z{#.n{;'S#.[;'S;=`#/]<%lO#.[1e#.qVOz#.[z{#.n{!P#.[!P!Q#/W!Q;'S#.[;'S;=`#/]<%lO#.[1e#/]OT1e1e#/`P;=`<%l#.[7X#/jZ)ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7P#0bX'f&jOY#0]YZ#.[Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1SZ'f&jOY#0]YZ#.[Zz#0]z{#0}{!P#0]!P!Q#1u!Q#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#1|UT1e'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}7P#2eZ'f&jOY#0]YZ#0]Z]#0]]^#3W^z#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3]X'f&jOY#0]YZ#0]Zz#0]z{#0}{#O#0]#O#P#2`#P;'S#0];'S;=`#3x<%lO#0]7P#3{P;=`<%l#0]7X#4V])ZW'f&jOY#/cYZ#.[Zw#/cwx#0]xz#/cz{#4O{!P#/c!P!Q#5O!Q#O#/c#O#P#2`#P;'S#/c;'S;=`#5q<%lO#/c7X#5XW)ZWT1e'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^7X#5tP;=`<%l#/c7R#6OZ(pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#6x](pQ'f&jOY#5wYZ#.[Zr#5wrs#0]sz#5wz{#6q{!P#5w!P!Q#7q!Q#O#5w#O#P#2`#P;'S#5w;'S;=`#8d<%lO#5w7R#7zW(pQT1e'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O7R#8gP;=`<%l#5w7Z#8s_)ZW(pQ'f&jOY#-YYZ#.[Zr#-Yrs#/csw#-Ywx#5wxz#-Yz{#8j{!P#-Y!P!Q#9r!Q#O#-Y#O#P#2`#P;'S#-Y;'S;=`#:m<%lO#-Y7Z#9}Y)ZW(pQT1e'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z#:pP;=`<%l#-Y7Z#;OY)ZW(pQS1e'f&jOY#:sZr#:srs#;nsw#:swx#@{x#O#:s#O#P#<z#P;'S#:s;'S;=`#At<%lO#:s7X#;wW)ZWS1e'f&jOY#;nZw#;nwx#<ax#O#;n#O#P#<z#P;'S#;n;'S;=`#@u<%lO#;n7P#<hUS1e'f&jOY#<aZ#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#=RXS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P;'S#<a;'S;=`#>[<%lO#<a7P#=uVS1e'f&jOY#<aYZ%}Z#O#<a#O#P#<z#P;'S#<a;'S;=`#>[<%lO#<a7P#>_P;=`<%l#<a7P#>i]S1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c#f#<a#f#g#?b#g;'S#<a;'S;=`#>[<%lO#<a7P#?iUS1e'f&jOY#<aZ#O#<a#O#P#?{#P;'S#<a;'S;=`#>[<%lO#<a7P#@SZS1e'f&jOY#<aYZ%}Z]#<a]^#=n^#O#<a#O#P#>b#P#b#<a#b#c#<a#c;'S#<a;'S;=`#>[<%lO#<a7X#@xP;=`<%l#;n7R#AUW(pQS1e'f&jOY#@{Zr#@{rs#<as#O#@{#O#P#<z#P;'S#@{;'S;=`#An<%lO#@{7R#AqP;=`<%l#@{7Z#AwP;=`<%l#:s2]#BVt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$+X#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$=`#m;'S$e;'S;=`(u<%lO$e2T#DnY(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#E^![#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O2T#Egp(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#Dgx!O(O!O!P#Gk!P!Q(O!Q![#E^![!g(O!g!h!La!h!i##`!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#X(O#X#Y!La#Y#Z##`#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#Gtn(pQ!i,g'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#I{p(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T#LW^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![#Ir![!c(O!c!i#Ir!i#O(O#O#P&f#P#T(O#T#Z#Ir#Z;'S(O;'S;=`(o<%lO(O2T#M]t(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx#LPx{(O{|!Nb|}(O}!O!Nb!O!Q(O!Q![#Ir![!c(O!c!g#Ir!g!h#MS!h!i#Ir!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X#Ir#X#Y#MS#Y#Z#Ir#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$ xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$$Xp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$&ht)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#LPx{$e{|#'Q|}$e}!O#'Q!O!Q$e!Q![$#|![!c$e!c!g$#|!g!h$&]!h!i$#|!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$#|#X#Y$&]#Y#Z$#|#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$)Tp)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$+b_)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$-`!R![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$,j[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![!GY![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$-kt)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx#Dgx!O$e!O!P$ m!P!Q$e!Q![$(x![!g$e!g!h#$w!h!i#*Y!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#U$e#U#V$/{#V#X$e#X#Y#$w#Y#Z#*Y#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e2]$0U[)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$(x![#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$1T`)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$2br)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2T$4s^(pQ'f&jOY(OZr(Ors%}s!Q(O!Q![$5o![!c(O!c!i$5o!i#O(O#O#P&f#P#T(O#T#Z$5o#Z;'S(O;'S;=`(o<%lO(O2T$5xr(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx!O(O!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2T$8]u(pQ!i,g'f&jOY(OZr(Ors%}sw(Owx$4lx{(O{|!Nb|}(O}!O!Nb!O!P#Gk!P!Q(O!Q![$5o![!c(O!c!g$5o!g!h$8S!h!i$5o!i!n(O!n!o##`!o!r(O!r!s!La!s!w(O!w!x##`!x#O(O#O#P&f#P#T(O#T#X$5o#X#Y$8S#Y#Z$5o#Z#`(O#`#a##`#a#d(O#d#e!La#e#i(O#i#j##`#j;'S(O;'S;=`(o<%lO(O2]$:{u)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx{$e{|#'Q|}$e}!O#'Q!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j;'S$e;'S;=`(u<%lO$e2]$=ic)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!O$e!O!P$,a!P!Q$e!Q!R$>t!R![$2V![!c$e!c!i$2V!i#O$e#O#P&f#P#T$e#T#Z$2V#Z;'S$e;'S;=`(u<%lO$e2]$?Pv)ZW(pQ!i,g'f&jOY$eZr$ers%^sw$ewx$4lx!O$e!O!P$ m!P!Q$e!Q![$2V![!c$e!c!g$2V!g!h$:p!h!i$2V!i!n$e!n!o#*Y!o!r$e!r!s#$w!s!w$e!w!x#*Y!x#O$e#O#P&f#P#T$e#T#U$2V#U#V$2V#V#X$2V#X#Y$:p#Y#Z$2V#Z#`$e#`#a#*Y#a#d$e#d#e#$w#e#i$e#i#j#*Y#j#l$e#l#m$0z#m;'S$e;'S;=`(u<%lO$e4e$Ar[(v-X)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox![$e![!]$Bh!]#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3s$BsYl-})ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e2]$CnY)W,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7V$Dk_p,g%]!b)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!^$Ej!^!_%+w!_!`%.U!`!a%0]!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej*[$Es])ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ejp$FoTO!`$Fl!`!a$GO!a;'S$Fl;'S;=`$GT<%lO$Flp$GTO$Wpp$GWP;=`<%l$Fl*Y$GbZ)ZW'f&jOY$GZYZ$FlZw$GZwx$HTx!`$GZ!`!a%(U!a#O$GZ#O#P$Ib#P;'S$GZ;'S;=`%(y<%lO$GZ*Q$HYX'f&jOY$HTYZ$FlZ!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q$IOU$WpY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}*Q$Ig['f&jOY$HTYZ$HTZ]$HT]^$J]^!`$HT!`!a$NO!a#O$HT#O#P%&n#P;'S$HT;'S;=`%'f;=`<%l%$z<%lO$HT*Q$JbX'f&jOY$HTYZ$J}Z!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT'[$KSX'f&jOY$J}YZ$FlZ!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$KvU$Wp'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}'[$L_Z'f&jOY$J}YZ$J}Z]$J}]^$MQ^!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MVX'f&jOY$J}YZ$J}Z!`$J}!`!a$Ko!a#O$J}#O#P$LY#P;'S$J};'S;=`$Mr<%lO$J}'[$MuP;=`<%l$J}*Q$M{P;=`<%l$HT*Q$NVW$Wp'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`$NtW'f&jOY$NoZ!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`% eUY#t'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%})`% |Y'f&jOY$NoYZ$NoZ]$No]^%!l^#O$No#O#P%#d#P;'S$No;'S;=`%$[;=`<%l%$z<%lO$No)`%!qX'f&jOY$NoYZ%}Z!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%#aP;=`<%l$No)`%#iZ'f&jOY$NoYZ%}Z]$No]^%!l^!`$No!`!a% ^!a#O$No#O#P% w#P;'S$No;'S;=`%#^<%lO$No)`%$_XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$No<%lO%$z#t%$}WOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h<%lO%$z#t%%lOY#t#t%%oRO;'S%$z;'S;=`%%x;=`O%$z#t%%{XOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l%$z<%lO%$z#t%&kP;=`<%l%$z*Q%&sZ'f&jOY$HTYZ$J}Z]$HT]^$J]^!`$HT!`!a$Hu!a#O$HT#O#P$Ib#P;'S$HT;'S;=`$Mx<%lO$HT*Q%'iXOY%$zZ!`%$z!`!a%%g!a#O%$z#O#P%%l#P;'S%$z;'S;=`%&h;=`<%l$HT<%lO%$z*Y%(aW$WpY#t)ZW'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^*Y%(|P;=`<%l$GZ*S%)WZ(pQ'f&jOY%)PYZ$FlZr%)Prs$HTs!`%)P!`!a%)y!a#O%)P#O#P$Ib#P;'S%)P;'S;=`%*n<%lO%)P*S%*UW$WpY#t(pQ'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O*S%*qP;=`<%l%)P*[%+RY$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e*[%+tP;=`<%l$Ej7V%,U^)ZW(pQ%[!b!f,g'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!_$Ej!_!`%-Q!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%-]]!g-y)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%*t!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%.c]%]!b!b,g)ZW(pQ'f&jOY$EjYZ$FlZr$Ejrs$GZsw$Ejwx%)Px!`$Ej!`!a%/[!a#O$Ej#O#P$Ib#P;'S$Ej;'S;=`%+q<%lO$Ej7V%/mY%]!b!b,g$WpY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e)j%0hYY#t)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%1c[)j!c)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`0Q!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%2f]%]!b)ZW(pQ!d,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`%3_!`!a%4[!a#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%3lY%]!b!b,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%4i[)ZW(pQ%[!b!f,g'f&jOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%5jY(uP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z%6ib)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e7Z%8Qb)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e5P%9cW)ZW(o/]'f&jOY%^Zw%^wx%}x#O%^#O#P&f#P;'S%^;'S;=`'x<%lO%^2T%:UW(pQ)Y,g'f&jOY(OZr(Ors%}s#O(O#O#P&f#P;'S(O;'S;=`(o<%lO(O3o%:yZ!V-y)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox!}$e!}#O%;l#O#P&f#P;'S$e;'S;=`(u<%lO$e&u%;wY)PP)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e4e%<la'f&jOY%=qYZ%>[Z]%=q]^%?Z^!Q%=q!Q![%?w![!w%=q!w!x%AX!x#O%=q#O#P%H_#P#i%=q#i#j%Ds#j#l%=q#l#m%IR#m;'S%=q;'S;=`%Kt<%lO%=q&t%=xUXY'f&jOY%}Z#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}4e%>e[XY(n.o'f&jOX%}XY-OYZ*[Z]%}]^-O^p%}pq-Oq#O%}#O#P,^#P;'S%};'S;=`'r<%lO%}4e%?bVXY'f&jOY%}YZ-OZ#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@OWXY'f&jOY%}Z!Q%}!Q![%@h![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%@oWXY'f&jOY%}Z!Q%}!Q![%=q![#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%A^['f&jOY%}Z!Q%}!Q![%BS![!c%}!c!i%BS!i#O%}#O#P&f#P#T%}#T#Z%BS#Z;'S%};'S;=`'r<%lO%}&t%BX['f&jOY%}Z!Q%}!Q![%B}![!c%}!c!i%B}!i#O%}#O#P&f#P#T%}#T#Z%B}#Z;'S%};'S;=`'r<%lO%}&t%CS['f&jOY%}Z!Q%}!Q![%Cx![!c%}!c!i%Cx!i#O%}#O#P&f#P#T%}#T#Z%Cx#Z;'S%};'S;=`'r<%lO%}&t%C}['f&jOY%}Z!Q%}!Q![%Ds![!c%}!c!i%Ds!i#O%}#O#P&f#P#T%}#T#Z%Ds#Z;'S%};'S;=`'r<%lO%}&t%Dx['f&jOY%}Z!Q%}!Q![%En![!c%}!c!i%En!i#O%}#O#P&f#P#T%}#T#Z%En#Z;'S%};'S;=`'r<%lO%}&t%Es['f&jOY%}Z!Q%}!Q![%Fi![!c%}!c!i%Fi!i#O%}#O#P&f#P#T%}#T#Z%Fi#Z;'S%};'S;=`'r<%lO%}&t%Fn['f&jOY%}Z!Q%}!Q![%Gd![!c%}!c!i%Gd!i#O%}#O#P&f#P#T%}#T#Z%Gd#Z;'S%};'S;=`'r<%lO%}&t%Gi['f&jOY%}Z!Q%}!Q![%=q![!c%}!c!i%=q!i#O%}#O#P&f#P#T%}#T#Z%=q#Z;'S%};'S;=`'r<%lO%}&t%HfXXY'f&jOY%}YZ%}Z]%}]^'W^#O%}#O#P&f#P;'S%};'S;=`'r<%lO%}&t%IW['f&jOY%}Z!Q%}!Q![%I|![!c%}!c!i%I|!i#O%}#O#P&f#P#T%}#T#Z%I|#Z;'S%};'S;=`'r<%lO%}&t%JR['f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KO[XY'f&jOY%}Z!Q%}!Q![%Jw![!c%}!c!i%Jw!i#O%}#O#P&f#P#T%}#T#Z%Jw#Z;'S%};'S;=`'r<%lO%}&t%KwP;=`<%l%=q2a%LVZ!W,V)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P#Q%Lx#Q;'S$e;'S;=`(u<%lO$e'Y%MTY)]d)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o%NQ[)ZW(pQ%[!b'f&j!_,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e7Z& Vd)ZW(yS(pQ!R,f(r%y'f&jOY$eZr$ers%9Ysw$ewx%9{x!Q$e!Q!Y%6Y!Y!Z%7q!Z![%6Y![!c$e!c!}%6Y!}#O$e#O#P&f#P#R$e#R#S%6Y#S#T$e#T#o%6Y#o;'S$e;'S;=`(u<%lO$e2]&!pY!T,g)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e3o&#m^)ZW(pQ%[!b'f&j!^,gOY$eZr$ers%^sw$ewx(Ox!_$e!_!`!8g!`#O$e#O#P&f#P#p$e#p#q&$i#q;'S$e;'S;=`(u<%lO$e3o&$vY)T,g%^!b)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e'V&%qY!Ua)ZW(pQ'f&jOY$eZr$ers%^sw$ewx(Ox#O$e#O#P&f#P;'S$e;'S;=`(u<%lO$e(]&&nc)ZW(pQ%[!b'RP'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&(Sc)ZW(pQ'f&jOX$eXY&'yZp$epq&'yqr$ers%^sw$ewx(Ox!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e&y&)jb)ZW(pQdT'f&jOY$eZr$ers%^sw$ewx(Ox!Q$e!Q![&)_![!c$e!c!}&)_!}#O$e#O#P&f#P#R$e#R#S&)_#S#T$e#T#o&)_#o;'S$e;'S;=`(u<%lO$e",tokenizers:[R9e,B9e,0,1,2,3,4,5,6,7,8,9],topRules:{Program:[0,307]},dynamicPrecedences:{87:1,94:1,119:1,184:1,187:-10,240:-10,241:1,244:-1,246:-10,247:1,262:-1,267:2,268:2,306:-10,365:3,417:1,418:3,419:1,420:1},specialized:[{term:356,get:r=>L9e[r]||-1},{term:32,get:r=>N9e[r]||-1},{term:66,get:r=>V9e[r]||-1},{term:363,get:r=>F9e[r]||-1}],tokenPrec:24891}),U9e=RE.define({name:"cpp",parser:$9e.configure({props:[$ne.add({IfStatement:CR({except:/^\s*({|else\b)/}),TryStatement:CR({except:/^\s*({|catch)\b/}),LabeledStatement:X$e,CaseStatement:r=>r.baseIndent+r.unit,BlockComment:()=>null,CompoundStatement:z$e({closing:"}"}),Statement:CR({except:/^{/})}),Xne.add({"DeclarationList CompoundStatement EnumeratorList FieldDeclarationList InitializerList":Q$e,BlockComment(r){return{from:r.from+2,to:r.to-2}}})]}),languageData:{commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\})$/,closeBrackets:{stringPrefixes:["L","u","U","u8","LR","UR","uR","u8R","R"]}}});function ZE(){return new B$e(U9e)}const w6=r=>(O_("data-v-c96e8edb"),r=r(),S_(),r),z9e=w6(()=>It("TresPerspectiveCamera",{position:[0,0,5]},null,-1)),X9e=w6(()=>It("TresAxesHelper",{args:[2]},null,-1)),W9e=w6(()=>It("TresBoxGeometry",{args:[2,2,2]},null,-1)),LH=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,NH=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,G9e={__name:"ShaderFragBase",setup(r){const{onLoop:e}=v0(),i=[{name:"普通渐变",children:[{name:"普通渐变1",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x;
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"普通渐变2",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-st.x-st.y; //写出渐变方程
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"普通渐变3",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = st.x*st.x*st.x-st.y; //写出渐变方程
    c = abs(c);
    gl_FragColor = vec4(c, c, c, 1.0);
}

                `},{name:"普通渐变4",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = (st.x-0.5)*2.0;
    c = abs(c);
    gl_FragColor = vec4(0.0, c, 0.0, 1.0);
}
`},{name:"普通渐变5",frag:`
uniform vec2 u_resolution;
varying vec2 UV;
void main() {
    vec2 st = UV;
    float c = 1.0-distance(st, vec2(0.5))*1.0;
    gl_FragColor = vec4(0.0, c, c, 1.0);
}
`}]},{name:"渐变和切变，可以用于边缘平滑",children:[{name:"渐变和切变1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = distance(st, vec2(0.5))*2.0;
    c = smoothstep(0.8, 0.9, c);
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"渐变和切变2",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.x*st.x-st.y;
    c = abs(c);
    c = smoothstep(0.005, 0.015, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}

`},{name:"颜色混合(颜色渐变)",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    
    float c = st.x*st.y;
    vec3 color = mix(vec3(1.0, 0.0, 0.0), vec3(0.0, 1.0, 0.0), c);
    
    gl_FragColor = vec4(color, 1.0);
}
`}]},{name:"重复图形",children:[{name:"重复图形1",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = floor(st)*0.5;
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"重复图形2",frag:`
uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 c = fract(st);
    
    gl_FragColor = vec4(c, 0.0, 1.0);
}

`},{name:"重复图形3",frag:`

uniform vec2 u_resolution;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st *= 3.0;

    vec2 center = 0.5+floor(st);
    float c = distance(st, center)*2.0;
    
    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]},{name:"简单动画",children:[{name:"平移动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st.x -= fract(u_time*0.2)*2.0-1.0;

    float c = distance(st, vec2(0.5))*2.0;
    c = step(0.5, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"缩放动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    st /= sin(u_time);

    float c = distance(st, vec2(0.0))*2.0;
    c = step(1.0, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`},{name:"旋转动画",frag:`
uniform vec2 u_resolution;
uniform float u_time;

varying vec2 UV;
void main() {
    vec2 st = UV;
    st -= 0.5;
    float theta = mod(u_time, 6.28);
    st = mat2(cos(theta), sin(theta), -sin(theta), cos(theta)) * st; //构造了一个绕Z轴的旋转矩阵

    float c = st.x;
    c = abs(c);
    c = step(0.05, c);

    gl_FragColor = vec4(c, c, c, 1.0);
}
`}]}],n={u_time:{value:0},u_resolution:{value:{x:800,y:600}}};e(({elapsed:m})=>{n.u_time.value=m}),lt(!0);const s=br(null),o=br(null),a=lt(null);let l=null;const c=lt(null);let u=null;nr(()=>{const m=Mt.updateListener.of(y=>{if(y.docChanged){let _=s.value;if(!_)return;_.vertexShader=y.state.doc.toString(),_.needsUpdate=!0}});l=new Mt({doc:"",extensions:[QE,ZE(),m],parent:a.value});const g=Mt.updateListener.of(y=>{if(y.docChanged){let _=s.value;if(!_)return;_.fragmentShader=y.state.doc.toString(),_.needsUpdate=!0}});u=new Mt({doc:"",extensions:[QE,ZE(),g],parent:c.value}),n.u_resolution.value.x=o.value.clientWidth,n.u_resolution.value.y=o.value.clientHeight}),tn(s,()=>{p(0,0)});function d(m){return m.trim()}function p(m,g){let _=i[m].children[g],x=_.vert?_.vert:LH,O=_.frag?_.frag:NH;x=d(x),O=d(O);let S=l,w=S.state.update({changes:{from:0,to:S.state.doc.length,insert:x}});S.dispatch(w),S=u,w=S.state.update({changes:{from:0,to:S.state.doc.length,insert:O}}),S.dispatch(w)}return(m,g)=>{const y=St("Button"),_=St("Card"),x=St("Col"),O=St("Divider"),S=St("Row");return ci(),Es(S,null,{default:Je(()=>[ke(x,{span:4},{default:Je(()=>[(ci(),pn(Fn,null,au(i,(w,C)=>ke(_,null,{title:Je(()=>[It("h3",null,Cd(w.name),1)]),default:Je(()=>[(ci(!0),pn(Fn,null,au(w.children,(M,P)=>(ci(),Es(y,{onClick:R=>p(C,P)},{default:Je(()=>[On(Cd(M.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),ke(x,{span:10},{default:Je(()=>[It("div",{ref_key:"tresCanvasParentRef",ref:o,class:"tresCanvasBorder"},[ke(li(iV),{"clear-color":"#FDF5E6"},{default:Je(()=>[z9e,X9e,It("TresMesh",null,[W9e,It("TresShaderMaterial",{ref_key:"materialRef",ref:s,uniforms:n,vertexShader:LH,fragmentShader:NH},null,512)]),ke(li(IP))]),_:1})],512)]),_:1}),ke(x,{span:10},{default:Je(()=>[ke(O,{orientation:"left"},{default:Je(()=>[On("顶点着色器")]),_:1}),It("div",{ref_key:"codeContainerV",ref:a},null,512),ke(O,{orientation:"left"},{default:Je(()=>[On("片段着色器")]),_:1}),It("div",{ref_key:"codeContainerF",ref:c},null,512)]),_:1})]),_:1})}}},H9e=zd(G9e,[["__scopeId","data-v-c96e8edb"]]),O6=r=>(O_("data-v-53185512"),r=r(),S_(),r),Q9e=O6(()=>It("TresPerspectiveCamera",{position:[0,0,5]},null,-1)),j9e=O6(()=>It("TresAxesHelper",{args:[2]},null,-1)),Y9e=O6(()=>It("TresBoxGeometry",{args:[2,3.6,2]},null,-1)),VH=`
varying vec2 UV;
void main() {
    UV = uv;
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
}
`,FH=`
void main() {
  gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
}
`,q9e={__name:"ShaderImageBase",setup(r){const{onLoop:e}=v0(),i=[{name:"显示图像",children:[{name:"显示图像",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    gl_FragColor = color;
}
`},{name:"图像变色",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float scale = abs(sin(u_time));
    scale *= 1.5;
    color.rgb *= scale;
    gl_FragColor = color;
}
`},{name:"图像置灰",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;
void main() {
    vec4 color = texture2D(u_tex0, UV);
    float gray = color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
    gl_FragColor = vec4(gray, gray, gray, color.a);
}
`},{name:"图像描边",frag:`
varying vec2 UV;
uniform sampler2D u_tex0;
uniform float u_time;

void main() {
    vec4 self = texture2D(u_tex0, UV);

    if(self.a>0.5){
        gl_FragColor = self;
        return;
    }

    float outlineW = abs(sin(u_time))*0.01;
    // outlineW = 0.01;

    int strokeCount = 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x-outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x+outlineW, UV.y)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y-outlineW)).a>0.0 ? 1 : 0;
    strokeCount += texture2D(u_tex0, vec2(UV.x, UV.y+outlineW)).a>0.0 ? 1 : 0;

    if (strokeCount>0){
        self.rgb = vec3(1.0, 0.0, 1.0);
        self.a = 1.0;
    }

    gl_FragColor = self;
}
`}]}],n={u_time:{value:0},u_resolution:{value:{x:800,y:600}},u_tex0:{value:null}};e(({elapsed:m})=>{n.u_time.value=m}),lt(!0);const s=br(null),o=br(null),a=lt(null);let l=null;const c=lt(null);let u=null;nr(()=>{const m=Mt.updateListener.of(y=>{if(y.docChanged){let _=s.value;if(!_)return;_.vertexShader=y.state.doc.toString(),_.needsUpdate=!0}});l=new Mt({doc:"",extensions:[QE,ZE(),m],parent:a.value});const g=Mt.updateListener.of(y=>{if(y.docChanged){let _=s.value;if(!_)return;_.fragmentShader=y.state.doc.toString(),_.needsUpdate=!0}});u=new Mt({doc:"",extensions:[QE,ZE(),g],parent:c.value}),n.u_resolution.value.x=o.value.clientWidth,n.u_resolution.value.y=o.value.clientHeight,aIe({map:"img/img1.png"}).then(y=>{n.u_tex0.value=y.map})}),tn(s,()=>{p(0,0)});function d(m){return m.trim()}function p(m,g){let _=i[m].children[g],x=_.vert?_.vert:VH,O=_.frag?_.frag:FH;x=d(x),O=d(O);let S=l,w=S.state.update({changes:{from:0,to:S.state.doc.length,insert:x}});S.dispatch(w),S=u,w=S.state.update({changes:{from:0,to:S.state.doc.length,insert:O}}),S.dispatch(w)}return(m,g)=>{const y=St("Button"),_=St("Card"),x=St("Col"),O=St("Divider"),S=St("Row");return ci(),Es(S,null,{default:Je(()=>[ke(x,{span:4},{default:Je(()=>[(ci(),pn(Fn,null,au(i,(w,C)=>ke(_,null,{title:Je(()=>[It("h3",null,Cd(w.name),1)]),default:Je(()=>[(ci(!0),pn(Fn,null,au(w.children,(M,P)=>(ci(),Es(y,{onClick:R=>p(C,P)},{default:Je(()=>[On(Cd(M.name),1)]),_:2},1032,["onClick"]))),256))]),_:2},1024)),64))]),_:1}),ke(x,{span:10},{default:Je(()=>[It("div",{ref_key:"tresCanvasParentRef",ref:o,class:"tresCanvasBorder"},[ke(li(iV),{"clear-color":"#FDF5E6"},{default:Je(()=>[Q9e,j9e,It("TresMesh",null,[Y9e,It("TresShaderMaterial",{ref_key:"materialRef",ref:s,uniforms:n,vertexShader:VH,fragmentShader:FH},null,512)]),ke(li(IP))]),_:1})],512)]),_:1}),ke(x,{span:10},{default:Je(()=>[ke(O,{orientation:"left"},{default:Je(()=>[On("顶点着色器")]),_:1}),It("div",{ref_key:"codeContainerV",ref:a},null,512),ke(O,{orientation:"left"},{default:Je(()=>[On("片段着色器")]),_:1}),It("div",{ref_key:"codeContainerF",ref:c},null,512)]),_:1})]),_:1})}}},Z9e=zd(q9e,[["__scopeId","data-v-53185512"]]),K9e=["src"],DR={__name:"ShowVideo",props:{link:String,width:Number,height:Number},setup(r){const e=r,i=lt(null);return nr(()=>{var n=e.width?`${n}px`:"100%",s=e.height?`${s}px`:"100vh";i.value={width:n,height:s}}),(n,s)=>(ci(),pn("video",{src:e.link,style:Up(i.value),controls:"",autoplay:"",loop:""},null,12,K9e))}};var qp=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(qp||{}),S6=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(S6||{}),KE=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(KE||{}),di=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(di||{}),Jh=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Jh||{}),at=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(at||{}),Ig=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(Ig||{}),ti=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(ti||{}),Bt=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(Bt||{}),Jc=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Jc||{}),ou=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(ou||{}),uc=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(uc||{}),Yo=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Yo||{}),jh=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(jh||{}),ZP=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(ZP||{}),gl=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(gl||{}),as=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(as||{}),nse=(r=>(r[r.RED=1]="RED",r[r.GREEN=2]="GREEN",r[r.BLUE=4]="BLUE",r[r.ALPHA=8]="ALPHA",r))(nse||{}),Yr=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(Yr||{}),ic=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(ic||{});const rse={createCanvas:(r,e)=>{const i=document.createElement("canvas");return i.width=r,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},Dt={ADAPTER:rse,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var LR=/iPhone/i,$H=/iPod/i,UH=/iPad/i,zH=/\biOS-universal(?:.+)Mac\b/i,NR=/\bAndroid(?:.+)Mobile\b/i,XH=/Android/i,xv=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,iT=/Silk/i,zu=/Windows Phone/i,WH=/\bWindows(?:.+)ARM\b/i,GH=/BlackBerry/i,HH=/BB10/i,QH=/Opera Mini/i,jH=/\b(CriOS|Chrome)(?:.+)Mobile/i,YH=/Mobile(?:.+)Firefox\b/i,qH=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function J9e(r){return function(e){return e.test(r)}}function ZH(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var i=e.userAgent,n=i.split("[FBAN");typeof n[1]<"u"&&(i=n[0]),n=i.split("Twitter"),typeof n[1]<"u"&&(i=n[0]);var s=J9e(i),o={apple:{phone:s(LR)&&!s(zu),ipod:s($H),tablet:!s(LR)&&(s(UH)||qH(e))&&!s(zu),universal:s(zH),device:(s(LR)||s($H)||s(UH)||s(zH)||qH(e))&&!s(zu)},amazon:{phone:s(xv),tablet:!s(xv)&&s(iT),device:s(xv)||s(iT)},android:{phone:!s(zu)&&s(xv)||!s(zu)&&s(NR),tablet:!s(zu)&&!s(xv)&&!s(NR)&&(s(iT)||s(XH)),device:!s(zu)&&(s(xv)||s(iT)||s(NR)||s(XH))||s(/\bokhttp\b/i)},windows:{phone:s(zu),tablet:s(WH),device:s(zu)||s(WH)},other:{blackberry:s(GH),blackberry10:s(HH),opera:s(QH),firefox:s(YH),chrome:s(jH),device:s(GH)||s(HH)||s(QH)||s(YH)||s(jH)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const e7e=ZH.default??ZH,ec=e7e(globalThis.navigator);Dt.RETINA_PREFIX=/@([0-9\.]+)x/;Dt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var sse={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,p,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,p||c,m),y=i?i+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],g]:c._events[y].push(g):(c._events[y]=g,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)e.call(d,p)&&u.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=i?i+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,g=p.length,y=new Array(g);m<g;m++)y[m]=p[m].fn;return y},l.prototype.listenerCount=function(u){var d=i?i+u:u,p=this._events[d];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,d,p,m,g,y){var _=i?i+u:u;if(!this._events[_])return!1;var x=this._events[_],O=arguments.length,S,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),O){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,p),!0;case 4:return x.fn.call(x.context,d,p,m),!0;case 5:return x.fn.call(x.context,d,p,m,g),!0;case 6:return x.fn.call(x.context,d,p,m,g,y),!0}for(w=1,S=new Array(O-1);w<O;w++)S[w-1]=arguments[w];x.fn.apply(x.context,S)}else{var C=x.length,M;for(w=0;w<C;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),O){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,d);break;case 3:x[w].fn.call(x[w].context,d,p);break;case 4:x[w].fn.call(x[w].context,d,p,m);break;default:if(!S)for(M=1,S=new Array(O-1);M<O;M++)S[M-1]=arguments[M];x[w].fn.apply(x[w].context,S)}}return!0},l.prototype.on=function(u,d,p){return o(this,u,d,p,!1)},l.prototype.once=function(u,d,p){return o(this,u,d,p,!0)},l.prototype.removeListener=function(u,d,p,m){var g=i?i+u:u;if(!this._events[g])return this;if(!d)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===d&&(!m||y.once)&&(!p||y.context===p)&&a(this,g);else{for(var _=0,x=[],O=y.length;_<O;_++)(y[_].fn!==d||m&&!y[_].once||p&&y[_].context!==p)&&x.push(y[_]);x.length?this._events[g]=x.length===1?x[0]:x:a(this,g)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=i?i+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,r.exports=l})(sse);var t7e=sse.exports;const N_=eS(t7e);var C6={exports:{}};C6.exports=KP;C6.exports.default=KP;function KP(r,e,i){i=i||2;var n=e&&e.length,s=n?e[0]*i:r.length,o=ose(r,0,s,i,!0),a=[];if(!o||o.next===o.prev)return a;var l,c,u,d,p,m,g;if(n&&(o=o7e(r,e,o,i)),r.length>80*i){l=u=r[0],c=d=r[1];for(var y=i;y<s;y+=i)p=r[y],m=r[y+1],p<l&&(l=p),m<c&&(c=m),p>u&&(u=p),m>d&&(d=m);g=Math.max(u-l,d-c),g=g!==0?32767/g:0}return eO(o,a,i,l,c,g,0),a}function ose(r,e,i,n,s){var o,a;if(s===bD(r,e,i,n)>0)for(o=e;o<i;o+=n)a=KH(o,r[o],r[o+1],a);else for(o=i-n;o>=e;o-=n)a=KH(o,r[o],r[o+1],a);return a&&JP(a,a.next)&&(iO(a),a=a.next),a}function r0(r,e){if(!r)return r;e||(e=r);var i=r,n;do if(n=!1,!i.steiner&&(JP(i,i.next)||Mr(i.prev,i,i.next)===0)){if(iO(i),i=e=i.prev,i===i.next)break;n=!0}else i=i.next;while(n||i!==e);return e}function eO(r,e,i,n,s,o,a){if(r){!a&&o&&u7e(r,n,s,o);for(var l=r,c,u;r.prev!==r.next;){if(c=r.prev,u=r.next,o?n7e(r,n,s,o):i7e(r)){e.push(c.i/i|0),e.push(r.i/i|0),e.push(u.i/i|0),iO(r),r=u.next,l=u.next;continue}if(r=u,r===l){a?a===1?(r=r7e(r0(r),e,i),eO(r,e,i,n,s,o,2)):a===2&&s7e(r,e,i,n,s,o):eO(r0(r),e,i,n,s,o,1);break}}}}function i7e(r){var e=r.prev,i=r,n=r.next;if(Mr(e,i,n)>=0)return!1;for(var s=e.x,o=i.x,a=n.x,l=e.y,c=i.y,u=n.y,d=s<o?s<a?s:a:o<a?o:a,p=l<c?l<u?l:u:c<u?c:u,m=s>o?s>a?s:a:o>a?o:a,g=l>c?l>u?l:u:c>u?c:u,y=n.next;y!==e;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&ry(s,l,o,c,a,u,y.x,y.y)&&Mr(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function n7e(r,e,i,n){var s=r.prev,o=r,a=r.next;if(Mr(s,o,a)>=0)return!1;for(var l=s.x,c=o.x,u=a.x,d=s.y,p=o.y,m=a.y,g=l<c?l<u?l:u:c<u?c:u,y=d<p?d<m?d:m:p<m?p:m,_=l>c?l>u?l:u:c>u?c:u,x=d>p?d>m?d:m:p>m?p:m,O=_D(g,y,e,i,n),S=_D(_,x,e,i,n),w=r.prevZ,C=r.nextZ;w&&w.z>=O&&C&&C.z<=S;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=x&&w!==s&&w!==a&&ry(l,d,c,p,u,m,w.x,w.y)&&Mr(w.prev,w,w.next)>=0||(w=w.prevZ,C.x>=g&&C.x<=_&&C.y>=y&&C.y<=x&&C!==s&&C!==a&&ry(l,d,c,p,u,m,C.x,C.y)&&Mr(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;w&&w.z>=O;){if(w.x>=g&&w.x<=_&&w.y>=y&&w.y<=x&&w!==s&&w!==a&&ry(l,d,c,p,u,m,w.x,w.y)&&Mr(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;C&&C.z<=S;){if(C.x>=g&&C.x<=_&&C.y>=y&&C.y<=x&&C!==s&&C!==a&&ry(l,d,c,p,u,m,C.x,C.y)&&Mr(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function r7e(r,e,i){var n=r;do{var s=n.prev,o=n.next.next;!JP(s,o)&&ase(s,n,n.next,o)&&tO(s,o)&&tO(o,s)&&(e.push(s.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),iO(n),iO(n.next),n=r=o),n=n.next}while(n!==r);return r0(n)}function s7e(r,e,i,n,s,o){var a=r;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&p7e(a,l)){var c=lse(a,l);a=r0(a,a.next),c=r0(c,c.next),eO(a,e,i,n,s,o,0),eO(c,e,i,n,s,o,0);return}l=l.next}a=a.next}while(a!==r)}function o7e(r,e,i,n){var s=[],o,a,l,c,u;for(o=0,a=e.length;o<a;o++)l=e[o]*n,c=o<a-1?e[o+1]*n:r.length,u=ose(r,l,c,n,!1),u===u.next&&(u.steiner=!0),s.push(f7e(u));for(s.sort(a7e),o=0;o<s.length;o++)i=l7e(s[o],i);return i}function a7e(r,e){return r.x-e.x}function l7e(r,e){var i=h7e(r,e);if(!i)return e;var n=lse(i,r);return r0(n,n.next),r0(i,i.next)}function h7e(r,e){var i=e,n=r.x,s=r.y,o=-1/0,a;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var l=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=n&&l>o&&(o=l,a=i.x<i.next.x?i:i.next,l===n))return a}i=i.next}while(i!==e);if(!a)return null;var c=a,u=a.x,d=a.y,p=1/0,m;i=a;do n>=i.x&&i.x>=u&&n!==i.x&&ry(s<d?n:o,s,u,d,s<d?o:n,s,i.x,i.y)&&(m=Math.abs(s-i.y)/(n-i.x),tO(i,r)&&(m<p||m===p&&(i.x>a.x||i.x===a.x&&c7e(a,i)))&&(a=i,p=m)),i=i.next;while(i!==c);return a}function c7e(r,e){return Mr(r.prev,r,e.prev)<0&&Mr(e.next,r,r.next)<0}function u7e(r,e,i,n){var s=r;do s.z===0&&(s.z=_D(s.x,s.y,e,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,d7e(s)}function d7e(r){var e,i,n,s,o,a,l,c,u=1;do{for(i=r,r=null,o=null,a=0;i;){for(a++,n=i,l=0,e=0;e<u&&(l++,n=n.nextZ,!!n);e++);for(c=u;l>0||c>0&&n;)l!==0&&(c===0||!n||i.z<=n.z)?(s=i,i=i.nextZ,l--):(s=n,n=n.nextZ,c--),o?o.nextZ=s:r=s,s.prevZ=o,o=s;i=n}o.nextZ=null,u*=2}while(a>1);return r}function _D(r,e,i,n,s){return r=(r-i)*s|0,e=(e-n)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function f7e(r){var e=r,i=r;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==r);return i}function ry(r,e,i,n,s,o,a,l){return(s-a)*(e-l)>=(r-a)*(o-l)&&(r-a)*(n-l)>=(i-a)*(e-l)&&(i-a)*(o-l)>=(s-a)*(n-l)}function p7e(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!m7e(r,e)&&(tO(r,e)&&tO(e,r)&&g7e(r,e)&&(Mr(r.prev,r,e.prev)||Mr(r,e.prev,e))||JP(r,e)&&Mr(r.prev,r,r.next)>0&&Mr(e.prev,e,e.next)>0)}function Mr(r,e,i){return(e.y-r.y)*(i.x-e.x)-(e.x-r.x)*(i.y-e.y)}function JP(r,e){return r.x===e.x&&r.y===e.y}function ase(r,e,i,n){var s=rT(Mr(r,e,i)),o=rT(Mr(r,e,n)),a=rT(Mr(i,n,r)),l=rT(Mr(i,n,e));return!!(s!==o&&a!==l||s===0&&nT(r,i,e)||o===0&&nT(r,n,e)||a===0&&nT(i,r,n)||l===0&&nT(i,e,n))}function nT(r,e,i){return e.x<=Math.max(r.x,i.x)&&e.x>=Math.min(r.x,i.x)&&e.y<=Math.max(r.y,i.y)&&e.y>=Math.min(r.y,i.y)}function rT(r){return r>0?1:r<0?-1:0}function m7e(r,e){var i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==e.i&&i.next.i!==e.i&&ase(i,i.next,r,e))return!0;i=i.next}while(i!==r);return!1}function tO(r,e){return Mr(r.prev,r,r.next)<0?Mr(r,e,r.next)>=0&&Mr(r,r.prev,e)>=0:Mr(r,e,r.prev)<0||Mr(r,r.next,e)<0}function g7e(r,e){var i=r,n=!1,s=(r.x+e.x)/2,o=(r.y+e.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&s<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==r);return n}function lse(r,e){var i=new xD(r.i,r.x,r.y),n=new xD(e.i,e.x,e.y),s=r.next,o=e.prev;return r.next=e,e.prev=r,i.next=s,s.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function KH(r,e,i,n){var s=new xD(r,e,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function iO(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function xD(r,e,i){this.i=r,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}KP.deviation=function(r,e,i,n){var s=e&&e.length,o=s?e[0]*i:r.length,a=Math.abs(bD(r,0,o,i));if(s)for(var l=0,c=e.length;l<c;l++){var u=e[l]*i,d=l<c-1?e[l+1]*i:r.length;a-=Math.abs(bD(r,u,d,i))}var p=0;for(l=0;l<n.length;l+=3){var m=n[l]*i,g=n[l+1]*i,y=n[l+2]*i;p+=Math.abs((r[m]-r[y])*(r[g+1]-r[m+1])-(r[m]-r[g])*(r[y+1]-r[m+1]))}return a===0&&p===0?0:Math.abs((p-a)/a)};function bD(r,e,i,n){for(var s=0,o=e,a=i-n;o<i;o+=n)s+=(r[a]-r[o])*(r[o+1]+r[a+1]),a=o;return s}KP.flatten=function(r){for(var e=r[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,s=0;s<r.length;s++){for(var o=0;o<r[s].length;o++)for(var a=0;a<e;a++)i.vertices.push(r[s][o][a]);s>0&&(n+=r[s-1].length,i.holes.push(n))}return i};var v7e=C6.exports;const hse=eS(v7e);var JE={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */JE.exports;(function(r,e){(function(i){var n=e&&!e.nodeType&&e,s=r&&!r.nodeType&&r,o=typeof ph=="object"&&ph;(o.global===o||o.window===o||o.self===o)&&(i=o);var a,l=2147483647,c=36,u=1,d=26,p=38,m=700,g=72,y=128,_="-",x=/^xn--/,O=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=c-u,M=Math.floor,P=String.fromCharCode,R;function k(J){throw new RangeError(w[J])}function I(J,ne){for(var be=J.length,pe=[];be--;)pe[be]=ne(J[be]);return pe}function A(J,ne){var be=J.split("@"),pe="";be.length>1&&(pe=be[0]+"@",J=be[1]),J=J.replace(S,".");var ae=J.split("."),ye=I(ae,ne).join(".");return pe+ye}function D(J){for(var ne=[],be=0,pe=J.length,ae,ye;be<pe;)ae=J.charCodeAt(be++),ae>=55296&&ae<=56319&&be<pe?(ye=J.charCodeAt(be++),(ye&64512)==56320?ne.push(((ae&1023)<<10)+(ye&1023)+65536):(ne.push(ae),be--)):ne.push(ae);return ne}function V(J){return I(J,function(ne){var be="";return ne>65535&&(ne-=65536,be+=P(ne>>>10&1023|55296),ne=56320|ne&1023),be+=P(ne),be}).join("")}function B(J){return J-48<10?J-22:J-65<26?J-65:J-97<26?J-97:c}function L(J,ne){return J+22+75*(J<26)-((ne!=0)<<5)}function F(J,ne,be){var pe=0;for(J=be?M(J/m):J>>1,J+=M(J/ne);J>C*d>>1;pe+=c)J=M(J/C);return M(pe+(C+1)*J/(J+p))}function $(J){var ne=[],be=J.length,pe,ae=0,ye=y,_e=g,re,se,Q,G,ie,he,j,ee,de;for(re=J.lastIndexOf(_),re<0&&(re=0),se=0;se<re;++se)J.charCodeAt(se)>=128&&k("not-basic"),ne.push(J.charCodeAt(se));for(Q=re>0?re+1:0;Q<be;){for(G=ae,ie=1,he=c;Q>=be&&k("invalid-input"),j=B(J.charCodeAt(Q++)),(j>=c||j>M((l-ae)/ie))&&k("overflow"),ae+=j*ie,ee=he<=_e?u:he>=_e+d?d:he-_e,!(j<ee);he+=c)de=c-ee,ie>M(l/de)&&k("overflow"),ie*=de;pe=ne.length+1,_e=F(ae-G,pe,G==0),M(ae/pe)>l-ye&&k("overflow"),ye+=M(ae/pe),ae%=pe,ne.splice(ae++,0,ye)}return V(ne)}function z(J){var ne,be,pe,ae,ye,_e,re,se,Q,G,ie,he=[],j,ee,de,ve;for(J=D(J),j=J.length,ne=y,be=0,ye=g,_e=0;_e<j;++_e)ie=J[_e],ie<128&&he.push(P(ie));for(pe=ae=he.length,ae&&he.push(_);pe<j;){for(re=l,_e=0;_e<j;++_e)ie=J[_e],ie>=ne&&ie<re&&(re=ie);for(ee=pe+1,re-ne>M((l-be)/ee)&&k("overflow"),be+=(re-ne)*ee,ne=re,_e=0;_e<j;++_e)if(ie=J[_e],ie<ne&&++be>l&&k("overflow"),ie==ne){for(se=be,Q=c;G=Q<=ye?u:Q>=ye+d?d:Q-ye,!(se<G);Q+=c)ve=se-G,de=c-G,he.push(P(L(G+ve%de,0))),se=M(ve/de);he.push(P(L(se,0))),ye=F(be,ee,pe==ae),be=0,++pe}++be,++ne}return he.join("")}function H(J){return A(J,function(ne){return x.test(ne)?$(ne.slice(4).toLowerCase()):ne})}function K(J){return A(J,function(ne){return O.test(ne)?"xn--"+z(ne):ne})}if(a={version:"1.4.1",ucs2:{decode:D,encode:V},decode:$,encode:z,toASCII:K,toUnicode:H},n&&s)if(r.exports==n)s.exports=a;else for(R in a)a.hasOwnProperty(R)&&(n[R]=a[R]);else i.punycode=a})(ph)})(JE,JE.exports);var y7e=JE.exports,V_=TypeError;const _7e={},x7e=Object.freeze(Object.defineProperty({__proto__:null,default:_7e},Symbol.toStringTag,{value:"Module"})),b7e=Mte(x7e);var T6=typeof Map=="function"&&Map.prototype,VR=Object.getOwnPropertyDescriptor&&T6?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,eM=T6&&VR&&typeof VR.get=="function"?VR.get:null,JH=T6&&Map.prototype.forEach,A6=typeof Set=="function"&&Set.prototype,FR=Object.getOwnPropertyDescriptor&&A6?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,tM=A6&&FR&&typeof FR.get=="function"?FR.get:null,eQ=A6&&Set.prototype.forEach,w7e=typeof WeakMap=="function"&&WeakMap.prototype,qb=w7e?WeakMap.prototype.has:null,O7e=typeof WeakSet=="function"&&WeakSet.prototype,Zb=O7e?WeakSet.prototype.has:null,S7e=typeof WeakRef=="function"&&WeakRef.prototype,tQ=S7e?WeakRef.prototype.deref:null,C7e=Boolean.prototype.valueOf,T7e=Object.prototype.toString,A7e=Function.prototype.toString,E7e=String.prototype.match,E6=String.prototype.slice,ap=String.prototype.replace,M7e=String.prototype.toUpperCase,iQ=String.prototype.toLowerCase,cse=RegExp.prototype.test,nQ=Array.prototype.concat,Wc=Array.prototype.join,P7e=Array.prototype.slice,rQ=Math.floor,wD=typeof BigInt=="function"?BigInt.prototype.valueOf:null,$R=Object.getOwnPropertySymbols,OD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,h_=typeof Symbol=="function"&&typeof Symbol.iterator=="object",To=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===h_||!0)?Symbol.toStringTag:null,use=Object.prototype.propertyIsEnumerable,sQ=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function oQ(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||cse.call(/e/,e))return e;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-rQ(-r):rQ(r);if(n!==r){var s=String(n),o=E6.call(e,s.length+1);return ap.call(s,i,"$&_")+"."+ap.call(ap.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ap.call(e,i,"$&_")}var SD=b7e,aQ=SD.custom,lQ=pse(aQ)?aQ:null,dse={__proto__:null,double:'"',single:"'"},k7e={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},ek=function r(e,i,n,s){var o=i||{};if(ed(o,"quoteStyle")&&!ed(dse,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ed(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=ed(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ed(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ed(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return gse(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return l?oQ(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return l?oQ(e,u):u}var d=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=d&&d>0&&typeof e=="object")return CD(e)?"[Array]":"[Object]";var p=Y7e(o,n);if(typeof s>"u")s=[];else if(mse(s,e)>=0)return"[Circular]";function m(B,L,F){if(L&&(s=P7e.call(s),s.push(L)),F){var $={depth:o.depth};return ed(o,"quoteStyle")&&($.quoteStyle=o.quoteStyle),r(B,$,n+1,s)}return r(B,o,n+1,s)}if(typeof e=="function"&&!hQ(e)){var g=$7e(e),y=sT(e,m);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(y.length>0?" { "+Wc.call(y,", ")+" }":"")}if(pse(e)){var _=h_?ap.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):OD.call(e);return typeof e=="object"&&!h_?$1(_):_}if(H7e(e)){for(var x="<"+iQ.call(String(e.nodeName)),O=e.attributes||[],S=0;S<O.length;S++)x+=" "+O[S].name+"="+fse(I7e(O[S].value),"double",o);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+iQ.call(String(e.nodeName))+">",x}if(CD(e)){if(e.length===0)return"[]";var w=sT(e,m);return p&&!j7e(w)?"["+TD(w,p)+"]":"[ "+Wc.call(w,", ")+" ]"}if(B7e(e)){var C=sT(e,m);return!("cause"in Error.prototype)&&"cause"in e&&!use.call(e,"cause")?"{ ["+String(e)+"] "+Wc.call(nQ.call("[cause]: "+m(e.cause),C),", ")+" }":C.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Wc.call(C,", ")+" }"}if(typeof e=="object"&&a){if(lQ&&typeof e[lQ]=="function"&&SD)return SD(e,{depth:d-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(U7e(e)){var M=[];return JH&&JH.call(e,function(B,L){M.push(m(L,e,!0)+" => "+m(B,e))}),cQ("Map",eM.call(e),M,p)}if(W7e(e)){var P=[];return eQ&&eQ.call(e,function(B){P.push(m(B,e))}),cQ("Set",tM.call(e),P,p)}if(z7e(e))return UR("WeakMap");if(G7e(e))return UR("WeakSet");if(X7e(e))return UR("WeakRef");if(L7e(e))return $1(m(Number(e)));if(V7e(e))return $1(m(wD.call(e)));if(N7e(e))return $1(C7e.call(e));if(D7e(e))return $1(m(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof ph<"u"&&e===ph)return"{ [object globalThis] }";if(!R7e(e)&&!hQ(e)){var R=sT(e,m),k=sQ?sQ(e)===Object.prototype:e instanceof Object||e.constructor===Object,I=e instanceof Object?"":"null prototype",A=!k&&To&&Object(e)===e&&To in e?E6.call(Zp(e),8,-1):I?"Object":"",D=k||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",V=D+(A||I?"["+Wc.call(nQ.call([],A||[],I||[]),": ")+"] ":"");return R.length===0?V+"{}":p?V+"{"+TD(R,p)+"}":V+"{ "+Wc.call(R,", ")+" }"}return String(e)};function fse(r,e,i){var n=i.quoteStyle||e,s=dse[n];return s+r+s}function I7e(r){return ap.call(String(r),/"/g,"&quot;")}function CD(r){return Zp(r)==="[object Array]"&&(!To||!(typeof r=="object"&&To in r))}function R7e(r){return Zp(r)==="[object Date]"&&(!To||!(typeof r=="object"&&To in r))}function hQ(r){return Zp(r)==="[object RegExp]"&&(!To||!(typeof r=="object"&&To in r))}function B7e(r){return Zp(r)==="[object Error]"&&(!To||!(typeof r=="object"&&To in r))}function D7e(r){return Zp(r)==="[object String]"&&(!To||!(typeof r=="object"&&To in r))}function L7e(r){return Zp(r)==="[object Number]"&&(!To||!(typeof r=="object"&&To in r))}function N7e(r){return Zp(r)==="[object Boolean]"&&(!To||!(typeof r=="object"&&To in r))}function pse(r){if(h_)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!OD)return!1;try{return OD.call(r),!0}catch{}return!1}function V7e(r){if(!r||typeof r!="object"||!wD)return!1;try{return wD.call(r),!0}catch{}return!1}var F7e=Object.prototype.hasOwnProperty||function(r){return r in this};function ed(r,e){return F7e.call(r,e)}function Zp(r){return T7e.call(r)}function $7e(r){if(r.name)return r.name;var e=E7e.call(A7e.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function mse(r,e){if(r.indexOf)return r.indexOf(e);for(var i=0,n=r.length;i<n;i++)if(r[i]===e)return i;return-1}function U7e(r){if(!eM||!r||typeof r!="object")return!1;try{eM.call(r);try{tM.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function z7e(r){if(!qb||!r||typeof r!="object")return!1;try{qb.call(r,qb);try{Zb.call(r,Zb)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function X7e(r){if(!tQ||!r||typeof r!="object")return!1;try{return tQ.call(r),!0}catch{}return!1}function W7e(r){if(!tM||!r||typeof r!="object")return!1;try{tM.call(r);try{eM.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function G7e(r){if(!Zb||!r||typeof r!="object")return!1;try{Zb.call(r,Zb);try{qb.call(r,qb)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function H7e(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function gse(r,e){if(r.length>e.maxStringLength){var i=r.length-e.maxStringLength,n="... "+i+" more character"+(i>1?"s":"");return gse(E6.call(r,0,e.maxStringLength),e)+n}var s=k7e[e.quoteStyle||"single"];s.lastIndex=0;var o=ap.call(ap.call(r,s,"\\$1"),/[\x00-\x1f]/g,Q7e);return fse(o,"single",e)}function Q7e(r){var e=r.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return i?"\\"+i:"\\x"+(e<16?"0":"")+M7e.call(e.toString(16))}function $1(r){return"Object("+r+")"}function UR(r){return r+" { ? }"}function cQ(r,e,i,n){var s=n?TD(i,n):Wc.call(i,", ");return r+" ("+e+") {"+s+"}"}function j7e(r){for(var e=0;e<r.length;e++)if(mse(r[e],`
`)>=0)return!1;return!0}function Y7e(r,e){var i;if(r.indent==="	")i="	";else if(typeof r.indent=="number"&&r.indent>0)i=Wc.call(Array(r.indent+1)," ");else return null;return{base:i,prev:Wc.call(Array(e+1),i)}}function TD(r,e){if(r.length===0)return"";var i=`
`+e.prev+e.base;return i+Wc.call(r,","+i)+`
`+e.prev}function sT(r,e){var i=CD(r),n=[];if(i){n.length=r.length;for(var s=0;s<r.length;s++)n[s]=ed(r,s)?e(r[s],r):""}var o=typeof $R=="function"?$R(r):[],a;if(h_){a={};for(var l=0;l<o.length;l++)a["$"+o[l]]=o[l]}for(var c in r)ed(r,c)&&(i&&String(Number(c))===c&&c<r.length||h_&&a["$"+c]instanceof Symbol||(cse.call(/[^\w$]/,c)?n.push(e(c,r)+": "+e(r[c],r)):n.push(c+": "+e(r[c],r))));if(typeof $R=="function")for(var u=0;u<o.length;u++)use.call(r,o[u])&&n.push("["+e(o[u])+"]: "+e(r[o[u]],r));return n}var q7e=ek,Z7e=V_,tk=function(r,e,i){for(var n=r,s;(s=n.next)!=null;n=s)if(s.key===e)return n.next=s.next,i||(s.next=r.next,r.next=s),s},K7e=function(r,e){if(r){var i=tk(r,e);return i&&i.value}},J7e=function(r,e,i){var n=tk(r,e);n?n.value=i:r.next={key:e,next:r.next,value:i}},eXe=function(r,e){return r?!!tk(r,e):!1},tXe=function(r,e){if(r)return tk(r,e,!0)},iXe=function(){var e,i={assert:function(n){if(!i.has(n))throw new Z7e("Side channel does not contain "+q7e(n))},delete:function(n){var s=e&&e.next,o=tXe(e,n);return o&&s&&s===o&&(e=void 0),!!o},get:function(n){return K7e(e,n)},has:function(n){return eXe(e,n)},set:function(n,s){e||(e={next:void 0}),J7e(e,n,s)}};return i},vse=Object,nXe=Error,rXe=EvalError,sXe=RangeError,oXe=ReferenceError,aXe=SyntaxError,lXe=URIError,hXe=Math.abs,cXe=Math.floor,uXe=Math.max,dXe=Math.min,fXe=Math.pow,pXe=Math.round,mXe=Number.isNaN||function(e){return e!==e},gXe=mXe,vXe=function(e){return gXe(e)||e===0?e:e<0?-1:1},yXe=Object.getOwnPropertyDescriptor,kA=yXe;if(kA)try{kA([],"length")}catch{kA=null}var yse=kA,IA=Object.defineProperty||!1;if(IA)try{IA({},"a",{value:1})}catch{IA=!1}var _Xe=IA,zR,uQ;function xXe(){return uQ||(uQ=1,zR=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},i=Symbol("test"),n=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[i]=s;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==i||!Object.prototype.propertyIsEnumerable.call(e,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,i);if(l.value!==s||l.enumerable!==!0)return!1}return!0}),zR}var XR,dQ;function bXe(){if(dQ)return XR;dQ=1;var r=typeof Symbol<"u"&&Symbol,e=xXe();return XR=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},XR}var WR,fQ;function _se(){return fQ||(fQ=1,WR=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),WR}var GR,pQ;function xse(){if(pQ)return GR;pQ=1;var r=vse;return GR=r.getPrototypeOf||null,GR}var HR,mQ;function wXe(){if(mQ)return HR;mQ=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,i=Math.max,n="[object Function]",s=function(c,u){for(var d=[],p=0;p<c.length;p+=1)d[p]=c[p];for(var m=0;m<u.length;m+=1)d[m+c.length]=u[m];return d},o=function(c,u){for(var d=[],p=u,m=0;p<c.length;p+=1,m+=1)d[m]=c[p];return d},a=function(l,c){for(var u="",d=0;d<l.length;d+=1)u+=l[d],d+1<l.length&&(u+=c);return u};return HR=function(c){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(r+u);for(var d=o(arguments,1),p,m=function(){if(this instanceof p){var O=u.apply(this,s(d,arguments));return Object(O)===O?O:this}return u.apply(c,s(d,arguments))},g=i(0,u.length-d.length),y=[],_=0;_<g;_++)y[_]="$"+_;if(p=Function("binder","return function ("+a(y,",")+"){ return binder.apply(this,arguments); }")(m),u.prototype){var x=function(){};x.prototype=u.prototype,p.prototype=new x,x.prototype=null}return p},HR}var QR,gQ;function ik(){if(gQ)return QR;gQ=1;var r=wXe();return QR=Function.prototype.bind||r,QR}var jR,vQ;function M6(){return vQ||(vQ=1,jR=Function.prototype.call),jR}var YR,yQ;function bse(){return yQ||(yQ=1,YR=Function.prototype.apply),YR}var OXe=typeof Reflect<"u"&&Reflect&&Reflect.apply,SXe=ik(),CXe=bse(),TXe=M6(),AXe=OXe,EXe=AXe||SXe.call(TXe,CXe),MXe=ik(),PXe=V_,kXe=M6(),IXe=EXe,wse=function(e){if(e.length<1||typeof e[0]!="function")throw new PXe("a function is required");return IXe(MXe,kXe,e)},qR,_Q;function RXe(){if(_Q)return qR;_Q=1;var r=wse,e=yse,i;try{i=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var n=!!i&&e&&e(Object.prototype,"__proto__"),s=Object,o=s.getPrototypeOf;return qR=n&&typeof n.get=="function"?r([n.get]):typeof o=="function"?function(l){return o(l==null?l:s(l))}:!1,qR}var ZR,xQ;function BXe(){if(xQ)return ZR;xQ=1;var r=_se(),e=xse(),i=RXe();return ZR=r?function(s){return r(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:i?function(s){return i(s)}:null,ZR}var KR,bQ;function DXe(){if(bQ)return KR;bQ=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,i=ik();return KR=i.call(r,e),KR}var ln,LXe=vse,NXe=nXe,VXe=rXe,FXe=sXe,$Xe=oXe,c_=aXe,My=V_,UXe=lXe,zXe=hXe,XXe=cXe,WXe=uXe,GXe=dXe,HXe=fXe,QXe=pXe,jXe=vXe,Ose=Function,JR=function(r){try{return Ose('"use strict"; return ('+r+").constructor;")()}catch{}},nO=yse,YXe=_Xe,eB=function(){throw new My},qXe=nO?function(){try{return arguments.callee,eB}catch{try{return nO(arguments,"callee").get}catch{return eB}}}():eB,bv=bXe()(),Fs=BXe(),ZXe=xse(),KXe=_se(),Sse=bse(),hS=M6(),Xv={},JXe=typeof Uint8Array>"u"||!Fs?ln:Fs(Uint8Array),Rg={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ln:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ln:ArrayBuffer,"%ArrayIteratorPrototype%":bv&&Fs?Fs([][Symbol.iterator]()):ln,"%AsyncFromSyncIteratorPrototype%":ln,"%AsyncFunction%":Xv,"%AsyncGenerator%":Xv,"%AsyncGeneratorFunction%":Xv,"%AsyncIteratorPrototype%":Xv,"%Atomics%":typeof Atomics>"u"?ln:Atomics,"%BigInt%":typeof BigInt>"u"?ln:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ln:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ln:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ln:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":NXe,"%eval%":eval,"%EvalError%":VXe,"%Float32Array%":typeof Float32Array>"u"?ln:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ln:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ln:FinalizationRegistry,"%Function%":Ose,"%GeneratorFunction%":Xv,"%Int8Array%":typeof Int8Array>"u"?ln:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ln:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ln:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bv&&Fs?Fs(Fs([][Symbol.iterator]())):ln,"%JSON%":typeof JSON=="object"?JSON:ln,"%Map%":typeof Map>"u"?ln:Map,"%MapIteratorPrototype%":typeof Map>"u"||!bv||!Fs?ln:Fs(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":LXe,"%Object.getOwnPropertyDescriptor%":nO,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ln:Promise,"%Proxy%":typeof Proxy>"u"?ln:Proxy,"%RangeError%":FXe,"%ReferenceError%":$Xe,"%Reflect%":typeof Reflect>"u"?ln:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ln:Set,"%SetIteratorPrototype%":typeof Set>"u"||!bv||!Fs?ln:Fs(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ln:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bv&&Fs?Fs(""[Symbol.iterator]()):ln,"%Symbol%":bv?Symbol:ln,"%SyntaxError%":c_,"%ThrowTypeError%":qXe,"%TypedArray%":JXe,"%TypeError%":My,"%Uint8Array%":typeof Uint8Array>"u"?ln:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ln:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ln:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ln:Uint32Array,"%URIError%":UXe,"%WeakMap%":typeof WeakMap>"u"?ln:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ln:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ln:WeakSet,"%Function.prototype.call%":hS,"%Function.prototype.apply%":Sse,"%Object.defineProperty%":YXe,"%Object.getPrototypeOf%":ZXe,"%Math.abs%":zXe,"%Math.floor%":XXe,"%Math.max%":WXe,"%Math.min%":GXe,"%Math.pow%":HXe,"%Math.round%":QXe,"%Math.sign%":jXe,"%Reflect.getPrototypeOf%":KXe};if(Fs)try{null.error}catch(r){var eWe=Fs(Fs(r));Rg["%Error.prototype%"]=eWe}var tWe=function r(e){var i;if(e==="%AsyncFunction%")i=JR("async function () {}");else if(e==="%GeneratorFunction%")i=JR("function* () {}");else if(e==="%AsyncGeneratorFunction%")i=JR("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&Fs&&(i=Fs(s.prototype))}return Rg[e]=i,i},wQ={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},cS=ik(),iM=DXe(),iWe=cS.call(hS,Array.prototype.concat),nWe=cS.call(Sse,Array.prototype.splice),OQ=cS.call(hS,String.prototype.replace),nM=cS.call(hS,String.prototype.slice),rWe=cS.call(hS,RegExp.prototype.exec),sWe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,oWe=/\\(\\)?/g,aWe=function(e){var i=nM(e,0,1),n=nM(e,-1);if(i==="%"&&n!=="%")throw new c_("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&i!=="%")throw new c_("invalid intrinsic syntax, expected opening `%`");var s=[];return OQ(e,sWe,function(o,a,l,c){s[s.length]=l?OQ(c,oWe,"$1"):a||o}),s},lWe=function(e,i){var n=e,s;if(iM(wQ,n)&&(s=wQ[n],n="%"+s[0]+"%"),iM(Rg,n)){var o=Rg[n];if(o===Xv&&(o=tWe(n)),typeof o>"u"&&!i)throw new My("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:o}}throw new c_("intrinsic "+e+" does not exist!")},P6=function(e,i){if(typeof e!="string"||e.length===0)throw new My("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new My('"allowMissing" argument must be a boolean');if(rWe(/^%?[^%]*%?$/,e)===null)throw new c_("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=aWe(e),s=n.length>0?n[0]:"",o=lWe("%"+s+"%",i),a=o.name,l=o.value,c=!1,u=o.alias;u&&(s=u[0],nWe(n,iWe([0,1],u)));for(var d=1,p=!0;d<n.length;d+=1){var m=n[d],g=nM(m,0,1),y=nM(m,-1);if((g==='"'||g==="'"||g==="`"||y==='"'||y==="'"||y==="`")&&g!==y)throw new c_("property names with quotes must have matching quotes");if((m==="constructor"||!p)&&(c=!0),s+="."+m,a="%"+s+"%",iM(Rg,a))l=Rg[a];else if(l!=null){if(!(m in l)){if(!i)throw new My("base intrinsic for "+e+" exists, but the property is not available.");return}if(nO&&d+1>=n.length){var _=nO(l,m);p=!!_,p&&"get"in _&&!("originalValue"in _.get)?l=_.get:l=l[m]}else p=iM(l,m),l=l[m];p&&!c&&(Rg[a]=l)}}return l},Cse=P6,Tse=wse,hWe=Tse([Cse("%String.prototype.indexOf%")]),Ase=function(e,i){var n=Cse(e,!!i);return typeof n=="function"&&hWe(e,".prototype.")>-1?Tse([n]):n},cWe=P6,uS=Ase,uWe=ek,dWe=V_,SQ=cWe("%Map%",!0),fWe=uS("Map.prototype.get",!0),pWe=uS("Map.prototype.set",!0),mWe=uS("Map.prototype.has",!0),gWe=uS("Map.prototype.delete",!0),vWe=uS("Map.prototype.size",!0),Ese=!!SQ&&function(){var e,i={assert:function(n){if(!i.has(n))throw new dWe("Side channel does not contain "+uWe(n))},delete:function(n){if(e){var s=gWe(e,n);return vWe(e)===0&&(e=void 0),s}return!1},get:function(n){if(e)return fWe(e,n)},has:function(n){return e?mWe(e,n):!1},set:function(n,s){e||(e=new SQ),pWe(e,n,s)}};return i},yWe=P6,nk=Ase,_We=ek,oT=Ese,xWe=V_,wv=yWe("%WeakMap%",!0),bWe=nk("WeakMap.prototype.get",!0),wWe=nk("WeakMap.prototype.set",!0),OWe=nk("WeakMap.prototype.has",!0),SWe=nk("WeakMap.prototype.delete",!0),CWe=wv?function(){var e,i,n={assert:function(s){if(!n.has(s))throw new xWe("Side channel does not contain "+_We(s))},delete:function(s){if(wv&&s&&(typeof s=="object"||typeof s=="function")){if(e)return SWe(e,s)}else if(oT&&i)return i.delete(s);return!1},get:function(s){return wv&&s&&(typeof s=="object"||typeof s=="function")&&e?bWe(e,s):i&&i.get(s)},has:function(s){return wv&&s&&(typeof s=="object"||typeof s=="function")&&e?OWe(e,s):!!i&&i.has(s)},set:function(s,o){wv&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new wv),wWe(e,s,o)):oT&&(i||(i=oT()),i.set(s,o))}};return n}:oT,TWe=V_,AWe=ek,EWe=iXe,MWe=Ese,PWe=CWe,kWe=PWe||MWe||EWe,IWe=function(){var e,i={assert:function(n){if(!i.has(n))throw new TWe("Side channel does not contain "+AWe(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,s){e||(e=kWe()),e.set(n,s)}};return i},RWe=String.prototype.replace,BWe=/%20/g,tB={RFC1738:"RFC1738",RFC3986:"RFC3986"},k6={default:tB.RFC3986,formatters:{RFC1738:function(r){return RWe.call(r,BWe,"+")},RFC3986:function(r){return String(r)}},RFC1738:tB.RFC1738,RFC3986:tB.RFC3986},DWe=k6,iB=Object.prototype.hasOwnProperty,ag=Array.isArray,Ac=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),LWe=function(e){for(;e.length>1;){var i=e.pop(),n=i.obj[i.prop];if(ag(n)){for(var s=[],o=0;o<n.length;++o)typeof n[o]<"u"&&s.push(n[o]);i.obj[i.prop]=s}}},Mse=function(e,i){for(var n=i&&i.plainObjects?{__proto__:null}:{},s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},NWe=function r(e,i,n){if(!i)return e;if(typeof i!="object"&&typeof i!="function"){if(ag(e))e.push(i);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!iB.call(Object.prototype,i))&&(e[i]=!0);else return[e,i];return e}if(!e||typeof e!="object")return[e].concat(i);var s=e;return ag(e)&&!ag(i)&&(s=Mse(e,n)),ag(e)&&ag(i)?(i.forEach(function(o,a){if(iB.call(e,a)){var l=e[a];l&&typeof l=="object"&&o&&typeof o=="object"?e[a]=r(l,o,n):e.push(o)}else e[a]=o}),e):Object.keys(i).reduce(function(o,a){var l=i[a];return iB.call(o,a)?o[a]=r(o[a],l,n):o[a]=l,o},s)},VWe=function(e,i){return Object.keys(i).reduce(function(n,s){return n[s]=i[s],n},e)},FWe=function(r,e,i){var n=r.replace(/\+/g," ");if(i==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},nB=1024,$We=function(e,i,n,s,o){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(g){return"%26%23"+parseInt(g.slice(2),16)+"%3B"});for(var l="",c=0;c<a.length;c+=nB){for(var u=a.length>=nB?a.slice(c,c+nB):a,d=[],p=0;p<u.length;++p){var m=u.charCodeAt(p);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||o===DWe.RFC1738&&(m===40||m===41)){d[d.length]=u.charAt(p);continue}if(m<128){d[d.length]=Ac[m];continue}if(m<2048){d[d.length]=Ac[192|m>>6]+Ac[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=Ac[224|m>>12]+Ac[128|m>>6&63]+Ac[128|m&63];continue}p+=1,m=65536+((m&1023)<<10|u.charCodeAt(p)&1023),d[d.length]=Ac[240|m>>18]+Ac[128|m>>12&63]+Ac[128|m>>6&63]+Ac[128|m&63]}l+=d.join("")}return l},UWe=function(e){for(var i=[{obj:{o:e},prop:"o"}],n=[],s=0;s<i.length;++s)for(var o=i[s],a=o.obj[o.prop],l=Object.keys(a),c=0;c<l.length;++c){var u=l[c],d=a[u];typeof d=="object"&&d!==null&&n.indexOf(d)===-1&&(i.push({obj:a,prop:u}),n.push(d))}return LWe(i),e},zWe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},XWe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},WWe=function(e,i){return[].concat(e,i)},GWe=function(e,i){if(ag(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(i(e[s]));return n}return i(e)},Pse={arrayToObject:Mse,assign:VWe,combine:WWe,compact:UWe,decode:FWe,encode:$We,isBuffer:XWe,isRegExp:zWe,maybeMap:GWe,merge:NWe},kse=IWe,RA=Pse,Kb=k6,HWe=Object.prototype.hasOwnProperty,Ise={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,i){return e+"["+i+"]"},repeat:function(e){return e}},zc=Array.isArray,QWe=Array.prototype.push,Rse=function(r,e){QWe.apply(r,zc(e)?e:[e])},jWe=Date.prototype.toISOString,CQ=Kb.default,bs={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:RA.encode,encodeValuesOnly:!1,filter:void 0,format:CQ,formatter:Kb.formatters[CQ],indices:!1,serializeDate:function(e){return jWe.call(e)},skipNulls:!1,strictNullHandling:!1},YWe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},rB={},qWe=function r(e,i,n,s,o,a,l,c,u,d,p,m,g,y,_,x,O,S){for(var w=e,C=S,M=0,P=!1;(C=C.get(rB))!==void 0&&!P;){var R=C.get(e);if(M+=1,typeof R<"u"){if(R===M)throw new RangeError("Cyclic object value");P=!0}typeof C.get(rB)>"u"&&(M=0)}if(typeof d=="function"?w=d(i,w):w instanceof Date?w=g(w):n==="comma"&&zc(w)&&(w=RA.maybeMap(w,function(J){return J instanceof Date?g(J):J})),w===null){if(a)return u&&!x?u(i,bs.encoder,O,"key",y):i;w=""}if(YWe(w)||RA.isBuffer(w)){if(u){var k=x?i:u(i,bs.encoder,O,"key",y);return[_(k)+"="+_(u(w,bs.encoder,O,"value",y))]}return[_(i)+"="+_(String(w))]}var I=[];if(typeof w>"u")return I;var A;if(n==="comma"&&zc(w))x&&u&&(w=RA.maybeMap(w,u)),A=[{value:w.length>0?w.join(",")||null:void 0}];else if(zc(d))A=d;else{var D=Object.keys(w);A=p?D.sort(p):D}var V=c?String(i).replace(/\./g,"%2E"):String(i),B=s&&zc(w)&&w.length===1?V+"[]":V;if(o&&zc(w)&&w.length===0)return B+"[]";for(var L=0;L<A.length;++L){var F=A[L],$=typeof F=="object"&&F&&typeof F.value<"u"?F.value:w[F];if(!(l&&$===null)){var z=m&&c?String(F).replace(/\./g,"%2E"):String(F),H=zc(w)?typeof n=="function"?n(B,z):B:B+(m?"."+z:"["+z+"]");S.set(e,M);var K=kse();K.set(rB,S),Rse(I,r($,H,n,s,o,a,l,c,n==="comma"&&x&&zc(w)?null:u,d,p,m,g,y,_,x,O,K))}}return I},ZWe=function(e){if(!e)return bs;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var i=e.charset||bs.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Kb.default;if(typeof e.format<"u"){if(!HWe.call(Kb.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=Kb.formatters[n],o=bs.filter;(typeof e.filter=="function"||zc(e.filter))&&(o=e.filter);var a;if(e.arrayFormat in Ise?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=bs.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:bs.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:bs.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:bs.allowEmptyArrays,arrayFormat:a,charset:i,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:bs.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?bs.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:bs.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:bs.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:bs.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:bs.encodeValuesOnly,filter:o,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:bs.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:bs.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:bs.strictNullHandling}},KWe=function(r,e){var i=r,n=ZWe(e),s,o;typeof n.filter=="function"?(o=n.filter,i=o("",i)):zc(n.filter)&&(o=n.filter,s=o);var a=[];if(typeof i!="object"||i===null)return"";var l=Ise[n.arrayFormat],c=l==="comma"&&n.commaRoundTrip;s||(s=Object.keys(i)),n.sort&&s.sort(n.sort);for(var u=kse(),d=0;d<s.length;++d){var p=s[d],m=i[p];n.skipNulls&&m===null||Rse(a,qWe(m,p,l,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var g=a.join(n.delimiter),y=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),g.length>0?y+g:""},s0=Pse,AD=Object.prototype.hasOwnProperty,TQ=Array.isArray,Fr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:s0.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},JWe=function(r){return r.replace(/&#(\d+);/g,function(e,i){return String.fromCharCode(parseInt(i,10))})},Bse=function(r,e,i){if(r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1)return r.split(",");if(e.throwOnLimitExceeded&&i>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return r},eGe="utf8=%26%2310003%3B",tGe="utf8=%E2%9C%93",iGe=function(e,i){var n={__proto__:null},s=i.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=i.parameterLimit===1/0?void 0:i.parameterLimit,a=s.split(i.delimiter,i.throwOnLimitExceeded?o+1:o);if(i.throwOnLimitExceeded&&a.length>o)throw new RangeError("Parameter limit exceeded. Only "+o+" parameter"+(o===1?"":"s")+" allowed.");var l=-1,c,u=i.charset;if(i.charsetSentinel)for(c=0;c<a.length;++c)a[c].indexOf("utf8=")===0&&(a[c]===tGe?u="utf-8":a[c]===eGe&&(u="iso-8859-1"),l=c,c=a.length);for(c=0;c<a.length;++c)if(c!==l){var d=a[c],p=d.indexOf("]="),m=p===-1?d.indexOf("="):p+1,g,y;m===-1?(g=i.decoder(d,Fr.decoder,u,"key"),y=i.strictNullHandling?null:""):(g=i.decoder(d.slice(0,m),Fr.decoder,u,"key"),y=s0.maybeMap(Bse(d.slice(m+1),i,TQ(n[g])?n[g].length:0),function(x){return i.decoder(x,Fr.decoder,u,"value")})),y&&i.interpretNumericEntities&&u==="iso-8859-1"&&(y=JWe(String(y))),d.indexOf("[]=")>-1&&(y=TQ(y)?[y]:y);var _=AD.call(n,g);_&&i.duplicates==="combine"?n[g]=s0.combine(n[g],y):(!_||i.duplicates==="last")&&(n[g]=y)}return n},nGe=function(r,e,i,n){var s=0;if(r.length>0&&r[r.length-1]==="[]"){var o=r.slice(0,-1).join("");s=Array.isArray(e)&&e[o]?e[o].length:0}for(var a=n?e:Bse(e,i,s),l=r.length-1;l>=0;--l){var c,u=r[l];if(u==="[]"&&i.parseArrays)c=i.allowEmptyArrays&&(a===""||i.strictNullHandling&&a===null)?[]:s0.combine([],a);else{c=i.plainObjects?{__proto__:null}:{};var d=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,p=i.decodeDotInKeys?d.replace(/%2E/g,"."):d,m=parseInt(p,10);!i.parseArrays&&p===""?c={0:a}:!isNaN(m)&&u!==p&&String(m)===p&&m>=0&&i.parseArrays&&m<=i.arrayLimit?(c=[],c[m]=a):p!=="__proto__"&&(c[p]=a)}a=c}return a},rGe=function(e,i,n,s){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,c=n.depth>0&&a.exec(o),u=c?o.slice(0,c.index):o,d=[];if(u){if(!n.plainObjects&&AD.call(Object.prototype,u)&&!n.allowPrototypes)return;d.push(u)}for(var p=0;n.depth>0&&(c=l.exec(o))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&AD.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(c[1])}if(c){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");d.push("["+o.slice(c.index)+"]")}return nGe(d,i,n,s)}},sGe=function(e){if(!e)return Fr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var i=typeof e.charset>"u"?Fr.charset:e.charset,n=typeof e.duplicates>"u"?Fr.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Fr.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Fr.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Fr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Fr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Fr.arrayLimit,charset:i,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Fr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Fr.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Fr.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Fr.decoder,delimiter:typeof e.delimiter=="string"||s0.isRegExp(e.delimiter)?e.delimiter:Fr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Fr.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Fr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Fr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Fr.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Fr.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Fr.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},oGe=function(r,e){var i=sGe(e);if(r===""||r===null||typeof r>"u")return i.plainObjects?{__proto__:null}:{};for(var n=typeof r=="string"?iGe(r,i):r,s=i.plainObjects?{__proto__:null}:{},o=Object.keys(n),a=0;a<o.length;++a){var l=o[a],c=rGe(l,n[l],i,typeof r=="string");s=s0.merge(s,c,i)}return i.allowSparse===!0?s:s0.compact(s)},aGe=KWe,lGe=oGe,hGe=k6,cGe={formats:hGe,parse:lGe,stringify:aGe},uGe=y7e;function nc(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var dGe=/^([a-z0-9.+-]+:)/i,fGe=/:[0-9]*$/,pGe=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,mGe=["<",">",'"',"`"," ","\r",`
`,"	"],gGe=["{","}","|","\\","^","`"].concat(mGe),ED=["'"].concat(gGe),AQ=["%","/","?",";","#"].concat(ED),EQ=["/","?","#"],vGe=255,MQ=/^[+a-z0-9A-Z_-]{0,63}$/,yGe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_Ge={javascript:!0,"javascript:":!0},MD={javascript:!0,"javascript:":!0},Py={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},PD=cGe;function rk(r,e,i){if(r&&typeof r=="object"&&r instanceof nc)return r;var n=new nc;return n.parse(r,e,i),n}nc.prototype.parse=function(r,e,i){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),s=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(s),a=/\\/g;o[0]=o[0].replace(a,"/"),r=o.join(s);var l=r;if(l=l.trim(),!i&&r.split("#").length===1){var c=pGe.exec(l);if(c)return this.path=l,this.href=l,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=PD.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=dGe.exec(l);if(u){u=u[0];var d=u.toLowerCase();this.protocol=d,l=l.substr(u.length)}if(i||u||l.match(/^\/\/[^@/]+@[^@/]+/)){var p=l.substr(0,2)==="//";p&&!(u&&MD[u])&&(l=l.substr(2),this.slashes=!0)}if(!MD[u]&&(p||u&&!Py[u])){for(var m=-1,g=0;g<EQ.length;g++){var y=l.indexOf(EQ[g]);y!==-1&&(m===-1||y<m)&&(m=y)}var _,x;m===-1?x=l.lastIndexOf("@"):x=l.lastIndexOf("@",m),x!==-1&&(_=l.slice(0,x),l=l.slice(x+1),this.auth=decodeURIComponent(_)),m=-1;for(var g=0;g<AQ.length;g++){var y=l.indexOf(AQ[g]);y!==-1&&(m===-1||y<m)&&(m=y)}m===-1&&(m=l.length),this.host=l.slice(0,m),l=l.slice(m),this.parseHost(),this.hostname=this.hostname||"";var O=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!O)for(var S=this.hostname.split(/\./),g=0,w=S.length;g<w;g++){var C=S[g];if(C&&!C.match(MQ)){for(var M="",P=0,R=C.length;P<R;P++)C.charCodeAt(P)>127?M+="x":M+=C[P];if(!M.match(MQ)){var k=S.slice(0,g),I=S.slice(g+1),A=C.match(yGe);A&&(k.push(A[1]),I.unshift(A[2])),I.length&&(l="/"+I.join(".")+l),this.hostname=k.join(".");break}}}this.hostname.length>vGe?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=uGe.toASCII(this.hostname));var D=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+D,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!_Ge[d])for(var g=0,w=ED.length;g<w;g++){var B=ED[g];if(l.indexOf(B)!==-1){var L=encodeURIComponent(B);L===B&&(L=escape(B)),l=l.split(B).join(L)}}var F=l.indexOf("#");F!==-1&&(this.hash=l.substr(F),l=l.slice(0,F));var $=l.indexOf("?");if($!==-1?(this.search=l.substr($),this.query=l.substr($+1),e&&(this.query=PD.parse(this.query)),l=l.slice(0,$)):e&&(this.search="",this.query={}),l&&(this.pathname=l),Py[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",z=this.search||"";this.path=D+z}return this.href=this.format(),this};function xGe(r){return typeof r=="string"&&(r=rk(r)),r instanceof nc?r.format():nc.prototype.format.call(r)}nc.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=PD.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Py[e])&&s!==!1?(s="//"+(s||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),a&&a.charAt(0)!=="?"&&(a="?"+a),i=i.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),a=a.replace("#","%23"),e+s+i+a+n};function bGe(r,e){return rk(r,!1,!0).resolve(e)}nc.prototype.resolve=function(r){return this.resolveObject(rk(r,!1,!0)).format()};nc.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new nc;e.parse(r,!1,!0),r=e}for(var i=new nc,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];i[o]=this[o]}if(i.hash=r.hash,r.href==="")return i.href=i.format(),i;if(r.slashes&&!r.protocol){for(var a=Object.keys(r),l=0;l<a.length;l++){var c=a[l];c!=="protocol"&&(i[c]=r[c])}return Py[i.protocol]&&i.hostname&&!i.pathname&&(i.pathname="/",i.path=i.pathname),i.href=i.format(),i}if(r.protocol&&r.protocol!==i.protocol){if(!Py[r.protocol]){for(var u=Object.keys(r),d=0;d<u.length;d++){var p=u[d];i[p]=r[p]}return i.href=i.format(),i}if(i.protocol=r.protocol,!r.host&&!MD[r.protocol]){for(var w=(r.pathname||"").split("/");w.length&&!(r.host=w.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),i.pathname=w.join("/")}else i.pathname=r.pathname;if(i.search=r.search,i.query=r.query,i.host=r.host||"",i.auth=r.auth,i.hostname=r.hostname||r.host,i.port=r.port,i.pathname||i.search){var m=i.pathname||"",g=i.search||"";i.path=m+g}return i.slashes=i.slashes||r.slashes,i.href=i.format(),i}var y=i.pathname&&i.pathname.charAt(0)==="/",_=r.host||r.pathname&&r.pathname.charAt(0)==="/",x=_||y||i.host&&r.pathname,O=x,S=i.pathname&&i.pathname.split("/")||[],w=r.pathname&&r.pathname.split("/")||[],C=i.protocol&&!Py[i.protocol];if(C&&(i.hostname="",i.port=null,i.host&&(S[0]===""?S[0]=i.host:S.unshift(i.host)),i.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(w[0]===""?w[0]=r.host:w.unshift(r.host)),r.host=null),x=x&&(w[0]===""||S[0]==="")),_)i.host=r.host||r.host===""?r.host:i.host,i.hostname=r.hostname||r.hostname===""?r.hostname:i.hostname,i.search=r.search,i.query=r.query,S=w;else if(w.length)S||(S=[]),S.pop(),S=S.concat(w),i.search=r.search,i.query=r.query;else if(r.search!=null){if(C){i.host=S.shift(),i.hostname=i.host;var M=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;M&&(i.auth=M.shift(),i.hostname=M.shift(),i.host=i.hostname)}return i.search=r.search,i.query=r.query,(i.pathname!==null||i.search!==null)&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var P=S.slice(-1)[0],R=(i.host||r.host||S.length>1)&&(P==="."||P==="..")||P==="",k=0,I=S.length;I>=0;I--)P=S[I],P==="."?S.splice(I,1):P===".."?(S.splice(I,1),k++):k&&(S.splice(I,1),k--);if(!x&&!O)for(;k--;k)S.unshift("..");x&&S[0]!==""&&(!S[0]||S[0].charAt(0)!=="/")&&S.unshift(""),R&&S.join("/").substr(-1)!=="/"&&S.push("");var A=S[0]===""||S[0]&&S[0].charAt(0)==="/";if(C){i.hostname=A?"":S.length?S.shift():"",i.host=i.hostname;var M=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;M&&(i.auth=M.shift(),i.hostname=M.shift(),i.host=i.hostname)}return x=x||i.host&&S.length,x&&!A&&S.unshift(""),S.length>0?i.pathname=S.join("/"):(i.pathname=null,i.path=null),(i.pathname!==null||i.search!==null)&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=r.auth||i.auth,i.slashes=i.slashes||r.slashes,i.href=i.format(),i};nc.prototype.parseHost=function(){var r=this.host,e=fGe.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};var wGe=rk,OGe=bGe,SGe=xGe;const PQ={};function bi(r,e,i=3){if(PQ[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),PQ[e]=!0}const CGe={get parse(){return bi("7.3.0","utils.url.parse is deprecated, use native URL API instead."),wGe},get format(){return bi("7.3.0","utils.url.format is deprecated, use native URL API instead."),SGe},get resolve(){return bi("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),OGe}};function Fh(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function U1(r){return r.split("?")[0].split("#")[0]}function TGe(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function AGe(r,e,i){return r.replace(new RegExp(TGe(e),"g"),i)}function EGe(r,e){let i="",n=0,s=-1,o=0,a=-1;for(let l=0;l<=r.length;++l){if(l<r.length)a=r.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(s===l-1||o===1))if(s!==l-1&&o===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const c=i.lastIndexOf("/");if(c!==i.length-1){c===-1?(i="",n=0):(i=i.slice(0,c),n=i.length-1-i.lastIndexOf("/")),s=l,o=0;continue}}else if(i.length===2||i.length===1){i="",n=0,s=l,o=0;continue}}}else i.length>0?i+=`/${r.slice(s+1,l)}`:i=r.slice(s+1,l),n=l-s-1;s=l,o=0}else a===46&&o!==-1?++o:o=-1}return i}const Ms={toPosix(r){return AGe(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Fh(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const i=/^[^/:]+:\/{0,2}/.exec(r);return i?i[0]:""},toAbsolute(r,e,i){if(Fh(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const n=U1(this.toPosix(e??Dt.ADAPTER.getBaseUrl())),s=U1(this.toPosix(i??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?Ms.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(Fh(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const i=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const n=r.endsWith("/");return r=EGe(r),r.length>0&&n&&(r+="/"),i?`/${r}`:e+r},isAbsolute(r){return Fh(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let i=0;i<r.length;++i){const n=r[i];if(Fh(n),n.length>0)if(e===void 0)e=n;else{const s=r[i-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(Fh(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const i=e===47;let n=-1,s=!0;const o=this.getProtocol(r),a=r;r=r.slice(o.length);for(let l=r.length-1;l>=1;--l)if(e=r.charCodeAt(l),e===47){if(!s){n=l;break}}else s=!1;return n===-1?i?"/":this.isUrl(a)?o+r:o:i&&n===1?"//":o+r.slice(0,n)},rootname(r){Fh(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const i=r.indexOf("/",e.length);i!==-1?e=r.slice(0,i):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){Fh(r),e&&Fh(e),r=U1(this.toPosix(r));let i=0,n=-1,s=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let a=e.length-1,l=-1;for(o=r.length-1;o>=0;--o){const c=r.charCodeAt(o);if(c===47){if(!s){i=o+1;break}}else l===-1&&(s=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return i===n?n=l:n===-1&&(n=r.length),r.slice(i,n)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===47){if(!s){i=o+1;break}}else n===-1&&(s=!1,n=o+1);return n===-1?"":r.slice(i,n)},extname(r){Fh(r),r=U1(this.toPosix(r));let e=-1,i=0,n=-1,s=!0,o=0;for(let a=r.length-1;a>=0;--a){const l=r.charCodeAt(a);if(l===47){if(!s){i=a+1;break}continue}n===-1&&(s=!1,n=a+1),l===46?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===i+1?"":r.slice(e,n)},parse(r){Fh(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=U1(this.toPosix(r));let i=r.charCodeAt(0);const n=this.isAbsolute(r);let s;e.root=this.rootname(r),n||this.hasProtocol(r)?s=1:s=0;let o=-1,a=0,l=-1,c=!0,u=r.length-1,d=0;for(;u>=s;--u){if(i=r.charCodeAt(u),i===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===46?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||l===-1||d===0||d===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&n?e.base=e.name=r.slice(1,l):e.base=e.name=r.slice(a,l)):(a===0&&n?(e.name=r.slice(1,o),e.base=r.slice(1,l)):(e.name=r.slice(a,o),e.base=r.slice(a,l)),e.ext=r.slice(o,l)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let sB;async function Dse(){return sB??(sB=(async()=>{var o;const r=document.createElement("canvas").getContext("webgl");if(!r)return Yo.UNPACK;const e=await new Promise(a=>{const l=document.createElement("video");l.onloadeddata=()=>a(l),l.onerror=()=>a(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!e)return Yo.UNPACK;const i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);const n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,s),r.deleteFramebuffer(n),r.deleteTexture(i),(o=r.getExtension("WEBGL_lose_context"))==null||o.loseContext(),s[0]<=s[3]?Yo.PMA:Yo.UNPACK})()),sB}function MGe(){bi("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function PGe(){bi("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let oB;function Lse(){return typeof oB>"u"&&(oB=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:Dt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Dt.ADAPTER.getWebGLRenderingContext())return!1;const i=Dt.ADAPTER.createCanvas();let n=i.getContext("webgl",r)||i.getContext("experimental-webgl",r);const s=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,s}catch{return!1}}()),oB}var kGe={grad:.9,turn:360,rad:360/(2*Math.PI)},Xu=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Us=function(r,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*r)/i+0},lh=function(r,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),r>i?i:r>e?r:e},Nse=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},kQ=function(r){return{r:lh(r.r,0,255),g:lh(r.g,0,255),b:lh(r.b,0,255),a:lh(r.a)}},aB=function(r){return{r:Us(r.r),g:Us(r.g),b:Us(r.b),a:Us(r.a,3)}},IGe=/^#([0-9a-f]{3,8})$/i,aT=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},Vse=function(r){var e=r.r,i=r.g,n=r.b,s=r.a,o=Math.max(e,i,n),a=o-Math.min(e,i,n),l=a?o===e?(i-n)/a:o===i?2+(n-e)/a:4+(e-i)/a:0;return{h:60*(l<0?l+6:l),s:o?a/o*100:0,v:o/255*100,a:s}},Fse=function(r){var e=r.h,i=r.s,n=r.v,s=r.a;e=e/360*6,i/=100,n/=100;var o=Math.floor(e),a=n*(1-i),l=n*(1-(e-o)*i),c=n*(1-(1-e+o)*i),u=o%6;return{r:255*[n,l,a,a,c,n][u],g:255*[c,n,n,l,a,a][u],b:255*[a,a,c,n,n,l][u],a:s}},IQ=function(r){return{h:Nse(r.h),s:lh(r.s,0,100),l:lh(r.l,0,100),a:lh(r.a)}},RQ=function(r){return{h:Us(r.h),s:Us(r.s),l:Us(r.l),a:Us(r.a,3)}},BQ=function(r){return Fse((i=(e=r).s,{h:e.h,s:(i*=((n=e.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:e.a}));var e,i,n},Jb=function(r){return{h:(e=Vse(r)).h,s:(s=(200-(i=e.s))*(n=e.v)/100)>0&&s<200?i*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,i,n,s},RGe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,BGe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,DGe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,LGe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kD={string:[[function(r){var e=IGe.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Us(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Us(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=DGe.exec(r)||LGe.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:kQ({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=RGe.exec(r)||BGe.exec(r);if(!e)return null;var i,n,s=IQ({h:(i=e[1],n=e[2],n===void 0&&(n="deg"),Number(i)*(kGe[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return BQ(s)},"hsl"]],object:[[function(r){var e=r.r,i=r.g,n=r.b,s=r.a,o=s===void 0?1:s;return Xu(e)&&Xu(i)&&Xu(n)?kQ({r:Number(e),g:Number(i),b:Number(n),a:Number(o)}):null},"rgb"],[function(r){var e=r.h,i=r.s,n=r.l,s=r.a,o=s===void 0?1:s;if(!Xu(e)||!Xu(i)||!Xu(n))return null;var a=IQ({h:Number(e),s:Number(i),l:Number(n),a:Number(o)});return BQ(a)},"hsl"],[function(r){var e=r.h,i=r.s,n=r.v,s=r.a,o=s===void 0?1:s;if(!Xu(e)||!Xu(i)||!Xu(n))return null;var a=function(l){return{h:Nse(l.h),s:lh(l.s,0,100),v:lh(l.v,0,100),a:lh(l.a)}}({h:Number(e),s:Number(i),v:Number(n),a:Number(o)});return Fse(a)},"hsv"]]},DQ=function(r,e){for(var i=0;i<e.length;i++){var n=e[i][0](r);if(n)return[n,e[i][1]]}return[null,void 0]},NGe=function(r){return typeof r=="string"?DQ(r.trim(),kD.string):typeof r=="object"&&r!==null?DQ(r,kD.object):[null,void 0]},lB=function(r,e){var i=Jb(r);return{h:i.h,s:lh(i.s+100*e,0,100),l:i.l,a:i.a}},hB=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},LQ=function(r,e){var i=Jb(r);return{h:i.h,s:i.s,l:lh(i.l+100*e,0,100),a:i.a}},ID=function(){function r(e){this.parsed=NGe(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Us(hB(this.rgba),2)},r.prototype.isDark=function(){return hB(this.rgba)<.5},r.prototype.isLight=function(){return hB(this.rgba)>=.5},r.prototype.toHex=function(){return e=aB(this.rgba),i=e.r,n=e.g,s=e.b,a=(o=e.a)<1?aT(Us(255*o)):"","#"+aT(i)+aT(n)+aT(s)+a;var e,i,n,s,o,a},r.prototype.toRgb=function(){return aB(this.rgba)},r.prototype.toRgbString=function(){return e=aB(this.rgba),i=e.r,n=e.g,s=e.b,(o=e.a)<1?"rgba("+i+", "+n+", "+s+", "+o+")":"rgb("+i+", "+n+", "+s+")";var e,i,n,s,o},r.prototype.toHsl=function(){return RQ(Jb(this.rgba))},r.prototype.toHslString=function(){return e=RQ(Jb(this.rgba)),i=e.h,n=e.s,s=e.l,(o=e.a)<1?"hsla("+i+", "+n+"%, "+s+"%, "+o+")":"hsl("+i+", "+n+"%, "+s+"%)";var e,i,n,s,o},r.prototype.toHsv=function(){return e=Vse(this.rgba),{h:Us(e.h),s:Us(e.s),v:Us(e.v),a:Us(e.a,3)};var e},r.prototype.invert=function(){return Bc({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Bc(lB(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Bc(lB(this.rgba,-e))},r.prototype.grayscale=function(){return Bc(lB(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Bc(LQ(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Bc(LQ(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Bc({r:(i=this.rgba).r,g:i.g,b:i.b,a:e}):Us(this.rgba.a,3);var i},r.prototype.hue=function(e){var i=Jb(this.rgba);return typeof e=="number"?Bc({h:e,s:i.s,l:i.l,a:i.a}):Us(i.h)},r.prototype.isEqual=function(e){return this.toHex()===Bc(e).toHex()},r}(),Bc=function(r){return r instanceof ID?r:new ID(r)},NQ=[],VGe=function(r){r.forEach(function(e){NQ.indexOf(e)<0&&(e(ID,kD),NQ.push(e))})};function FGe(r,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in i)n[i[s]]=s;var o={};r.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,c,u=n[this.toHex()];if(u)return u;if(a!=null&&a.closest){var d=this.toRgb(),p=1/0,m="black";if(!o.length)for(var g in i)o[g]=new r(i[g]).toRgb();for(var y in i){var _=(l=d,c=o[y],Math.pow(l.r-c.r,2)+Math.pow(l.g-c.g,2)+Math.pow(l.b-c.b,2));_<p&&(p=_,m=y)}return m}},e.string.push([function(a){var l=a.toLowerCase(),c=l==="transparent"?"#0000":i[l];return c?new r(c).toRgb():null},"name"])}VGe([FGe]);const Wv=class BA{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof BA)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,i){const n=typeof e;if(n!==typeof i)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===i;if(Array.isArray(e)&&Array.isArray(i)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(i))return e.length!==i.length?!1:e.every((s,o)=>s===i[o]);if(e!==null&&i!==null){const s=Object.keys(e),o=Object.keys(i);return s.length!==o.length?!1:s.every(a=>e[a]===i[a])}return e===i}toRgba(){const[e,i,n,s]=this._components;return{r:e,g:i,b:n,a:s}}toRgb(){const[e,i,n]=this._components;return{r:e,g:i,b:n}}toRgbaString(){const[e,i,n]=this.toUint8RgbArray();return`rgba(${e},${i},${n},${this.alpha})`}toUint8RgbArray(e){const[i,n,s]=this._components;return e=e??[],e[0]=Math.round(i*255),e[1]=Math.round(n*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[i,n,s]=this._components;return e[0]=i,e[1]=n,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[i,n,s,o]=BA.temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=n,this._components[2]*=s,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(e,i=!0){return i&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,i=!0){if(e===1)return(255<<24)+this._int;if(e===0)return i?0:this._int;let n=this._int>>16&255,s=this._int>>8&255,o=this._int&255;return i&&(n=n*e+.5|0,s=s*e+.5|0,o=o*e+.5|0),(e*255<<24)+(n<<16)+(s<<8)+o}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[i,n,s]=this._components;return this._components[0]=Math.round(i*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[i,n,s,o]=this._components;return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e}normalize(e){let i,n,s,o;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;i=(a>>16&255)/255,n=(a>>8&255)/255,s=(a&255)/255,o=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,n,s,o=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,n,s,o=255]=e,i/=255,n/=255,s/=255,o/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const l=BA.HEX_PATTERN.exec(e);l&&(e=`#${l[2]}`)}const a=Bc(e);a.isValid()&&({r:i,g:n,b:s,a:o}=a.rgba,i/=255,n/=255,s/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=n,this._components[2]=s,this._components[3]=o,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,i,n]=this._components;this._int=(e*255<<16)+(i*255<<8)+(n*255|0)}_clamp(e,i=0,n=1){return typeof e=="number"?Math.min(Math.max(e,i),n):(e.forEach((s,o)=>{e[o]=Math.min(Math.max(s,i),n)}),e)}};Wv.shared=new Wv,Wv.temp=new Wv,Wv.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Sn=Wv;function $Ge(r,e=[]){return bi("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Sn.shared.setValue(r).toRgbArray(e)}function $se(r){return bi("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Sn.shared.setValue(r).toHex()}function UGe(r){return bi("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),Sn.shared.setValue(r).toNumber()}function Use(r){return bi("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Sn.shared.setValue(r).toNumber()}function zGe(){const r=[],e=[];for(let n=0;n<32;n++)r[n]=n,e[n]=n;r[di.NORMAL_NPM]=di.NORMAL,r[di.ADD_NPM]=di.ADD,r[di.SCREEN_NPM]=di.SCREEN,e[di.NORMAL]=di.NORMAL_NPM,e[di.ADD]=di.ADD_NPM,e[di.SCREEN]=di.SCREEN_NPM;const i=[];return i.push(e),i.push(r),i}const I6=zGe();function R6(r,e){return I6[e?1:0][r]}function XGe(r,e,i,n=!0){return bi("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),Sn.shared.setValue(r).premultiply(e,n).toArray(i??new Float32Array(4))}function WGe(r,e){return bi("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),Sn.shared.setValue(r).toPremultiplied(e)}function GGe(r,e,i,n=!0){return bi("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),Sn.shared.setValue(r).premultiply(e,n).toArray(i??new Float32Array(4))}const zse=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Xse(r,e=null){const i=r*6;if(e=e||new Uint16Array(i),e.length!==i)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${i}`);for(let n=0,s=0;n<i;n+=6,s+=4)e[n+0]=s+0,e[n+1]=s+1,e[n+2]=s+2,e[n+3]=s+0,e[n+4]=s+2,e[n+5]=s+3;return e}function sk(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}const HGe={Float32Array,Uint32Array,Int32Array,Uint8Array};function QGe(r,e){let i=0,n=0;const s={};for(let c=0;c<r.length;c++)n+=e[c],i+=r[c].length;const o=new ArrayBuffer(i*4);let a=null,l=0;for(let c=0;c<r.length;c++){const u=e[c],d=r[c],p=sk(d);s[p]||(s[p]=new HGe[p](o)),a=s[p];for(let m=0;m<d.length;m++){const g=(m/u|0)*n+l,y=m%u;a[g+y]=d[m]}l+=u}return new Float32Array(o)}function rO(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function RD(r){return!(r&r-1)&&!!r}function BD(r){let e=(r>65535?1:0)<<4;r>>>=e;let i=(r>255?1:0)<<3;return r>>>=i,e|=i,i=(r>15?1:0)<<2,r>>>=i,e|=i,i=(r>3?1:0)<<1,r>>>=i,e|=i,e|r>>1}function Bg(r,e,i){const n=r.length;let s;if(e>=n||i===0)return;i=e+i>n?n-e:i;const o=n-i;for(s=e;s<o;++s)r[s]=r[s+i];r.length=o}function fd(r){return r===0?0:r<0?-1:1}let jGe=0;function Dp(){return++jGe}const DD=class{constructor(r,e,i,n){this.left=r,this.top=e,this.right=i,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};DD.EMPTY=new DD(0,0,0,0);let LD=DD;const ND={},Wo=Object.create(null),sl=Object.create(null);function YGe(){let r;for(r in Wo)Wo[r].destroy();for(r in sl)sl[r].destroy()}function qGe(){let r;for(r in Wo)delete Wo[r];for(r in sl)delete sl[r]}class Wse{constructor(e,i,n){this._canvas=Dt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||Dt.RESOLUTION,this.resize(e,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,i){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function VQ(r,e,i){for(let n=0,s=4*i*e;n<e;++n,s+=4)if(r[s+3]!==0)return!1;return!0}function FQ(r,e,i,n,s){const o=4*e;for(let a=n,l=n*o+4*i;a<=s;++a,l+=o)if(r[l+3]!==0)return!1;return!0}function Gse(r){const{width:e,height:i}=r,n=r.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const s=n.getImageData(0,0,e,i).data;let o=0,a=0,l=e-1,c=i-1;for(;a<i&&VQ(s,e,a);)++a;if(a===i)return LD.EMPTY;for(;VQ(s,e,c);)--c;for(;FQ(s,e,o,a,c);)++o;for(;FQ(s,e,l,a,c);)--l;return++l,++c,new LD(o,a,l,c)}function Hse(r){const e=Gse(r),{width:i,height:n}=e;let s=null;if(!e.isEmpty()){const o=r.getContext("2d");if(o===null)throw new TypeError("Failed to get canvas 2D context");s=o.getImageData(e.left,e.top,i,n)}return{width:i,height:n,data:s}}function ZGe(r){const e=zse.exec(r);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Qse(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const i=new URL(r,document.baseURI);return i.hostname!==e.hostname||i.port!==e.port||i.protocol!==e.protocol?"anonymous":""}function fu(r,e=1){var n;const i=(n=Dt.RETINA_PREFIX)==null?void 0:n.exec(r);return i?parseFloat(i[1]):e}const KGe=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:sl,BoundingBox:LD,CanvasRenderTarget:Wse,DATA_URI:zse,EventEmitter:N_,ProgramCache:ND,TextureCache:Wo,clearTextureCache:qGe,correctBlendMode:R6,createIndicesForQuads:Xse,decomposeDataUri:ZGe,deprecation:bi,destroyTextureCache:YGe,detectVideoAlphaMode:Dse,determineCrossOrigin:Qse,earcut:hse,getBufferType:sk,getCanvasBoundingBox:Gse,getResolutionOfUrl:fu,hex2rgb:$Ge,hex2string:$se,interleaveTypedArrays:QGe,isMobile:ec,isPow2:RD,isWebGLSupported:Lse,log2:BD,nextPow2:rO,path:Ms,premultiplyBlendMode:I6,premultiplyRgba:XGe,premultiplyTint:WGe,premultiplyTintToRgba:GGe,removeItems:Bg,rgb2hex:Use,sayHello:PGe,sign:fd,skipHello:MGe,string2hex:UGe,trimCanvas:Hse,uid:Dp,url:CGe},Symbol.toStringTag,{value:"Module"}));var Ot=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(Ot||{});const VD=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},$Q=(r,e)=>VD(r).priority??e,Qt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(VD).forEach(e=>{e.type.forEach(i=>{var n,s;return(s=(n=this._removeHandlers)[i])==null?void 0:s.call(n,e)})}),this},add(...r){return r.map(VD).forEach(e=>{e.type.forEach(i=>{var o,a;const n=this._addHandlers,s=this._queue;n[i]?(o=n[i])==null||o.call(n,e):(s[i]=s[i]||[],(a=s[i])==null||a.push(e))})}),this},handle(r,e,i){var a;const n=this._addHandlers,s=this._removeHandlers;if(n[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,s[r]=i;const o=this._queue;return o[r]&&((a=o[r])==null||a.forEach(l=>e(l)),delete o[r]),this},handleByMap(r,e){return this.handle(r,i=>{i.name&&(e[i.name]=i.ref)},i=>{i.name&&delete e[i.name]})},handleByList(r,e,i=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((s,o)=>$Q(o,i)-$Q(s,i)))},n=>{const s=e.indexOf(n.ref);s!==-1&&e.splice(s,1)})}};class rM{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const JGe=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function eHe(r){let e="";for(let i=0;i<r;++i)i>0&&(e+=`
else `),i<r-1&&(e+=`if(test == ${i}.0){}`);return e}function jse(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=JGe.replace(/%forloop%/gi,eHe(r));if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))r=r/2|0;else break}return r}const cB=0,uB=1,dB=2,fB=3,pB=4,mB=5;class mc{constructor(){this.data=0,this.blendMode=di.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<cB)}set blend(e){!!(this.data&1<<cB)!==e&&(this.data^=1<<cB)}get offsets(){return!!(this.data&1<<uB)}set offsets(e){!!(this.data&1<<uB)!==e&&(this.data^=1<<uB)}get culling(){return!!(this.data&1<<dB)}set culling(e){!!(this.data&1<<dB)!==e&&(this.data^=1<<dB)}get depthTest(){return!!(this.data&1<<fB)}set depthTest(e){!!(this.data&1<<fB)!==e&&(this.data^=1<<fB)}get depthMask(){return!!(this.data&1<<mB)}set depthMask(e){!!(this.data&1<<mB)!==e&&(this.data^=1<<mB)}get clockwiseFrontFace(){return!!(this.data&1<<pB)}set clockwiseFrontFace(e){!!(this.data&1<<pB)!==e&&(this.data^=1<<pB)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==di.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new mc;return e.depthTest=!1,e.blend=!0,e}}mc.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const sM=[];function B6(r,e){if(!r)return null;let i="";if(typeof r=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(i=n[1].toLowerCase())}for(let n=sM.length-1;n>=0;--n){const s=sM[n];if(s.test&&s.test(r,i))return new s(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class bl{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,i,n,s,o,a,l,c){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:d}=this;this._aliasCount++;for(let p=0,m=d.length;p<m;p++)d[p][u](e,i,n,s,o,a,l,c);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const i=this.items.indexOf(e);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(bl.prototype,{dispatch:{value:bl.prototype.emit},run:{value:bl.prototype.emit}});class u_{constructor(e=0,i=0){this._width=e,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new bl("setRealSize"),this.onUpdate=new bl("update"),this.onError=new bl("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,i){(e!==this._width||i!==this._height)&&(this._width=e,this._height=i,this.onResize.emit(e,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,i,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,i){return!1}}class dS extends u_{constructor(e,i){const{width:n,height:s}=i||{};if(!n||!s)throw new Error("BufferResource width or height invalid");super(n,s),this.data=e,this.unpackAlignment=i.unpackAlignment??4}upload(e,i,n){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Yo.UNPACK);const o=i.realWidth,a=i.realHeight;return n.width===o&&n.height===a?s.texSubImage2D(i.target,0,0,0,o,a,i.format,n.type,this.data):(n.width=o,n.height=a,s.texImage2D(i.target,0,n.internalFormat,o,a,0,i.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const tHe={scaleMode:Jc.NEAREST,alphaMode:Yo.NPM},FD=class Gv extends N_{constructor(e=null,i=null){super(),i=Object.assign({},Gv.defaultOptions,i);const{alphaMode:n,mipmap:s,anisotropicLevel:o,scaleMode:a,width:l,height:c,wrapMode:u,format:d,type:p,target:m,resolution:g,resourceOptions:y}=i;e&&!(e instanceof u_)&&(e=B6(e,y),e.internal=!0),this.resolution=g||Dt.RESOLUTION,this.width=Math.round((l||0)*this.resolution)/this.resolution,this.height=Math.round((c||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=o,this._wrapMode=u,this._scaleMode=a,this.format=d,this.type=p,this.target=m,this.alphaMode=n,this.uid=Dp(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=l>0&&c>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,i){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this}setSize(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)}setRealSize(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=RD(this.realWidth)&&RD(this.realHeight)}setResolution(e){const i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete sl[this.cacheId],delete Wo[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Gv.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,i,n=Dt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let o=null;if(s)o=e;else{if(!e._pixiId){const l=(i==null?void 0:i.pixiIdPrefix)||"pixiid";e._pixiId=`${l}_${Dp()}`}o=e._pixiId}let a=sl[o];if(s&&n&&!a)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return a||(a=new Gv(e,i),a.cacheId=o,Gv.addToCache(a,o)),a}static fromBuffer(e,i,n,s){e=e||new Float32Array(i*n*4);const o=new dS(e,{width:i,height:n,...s==null?void 0:s.resourceOptions});let a,l;return e instanceof Float32Array?(a=at.RGBA,l=ti.FLOAT):e instanceof Int32Array?(a=at.RGBA_INTEGER,l=ti.INT):e instanceof Uint32Array?(a=at.RGBA_INTEGER,l=ti.UNSIGNED_INT):e instanceof Int16Array?(a=at.RGBA_INTEGER,l=ti.SHORT):e instanceof Uint16Array?(a=at.RGBA_INTEGER,l=ti.UNSIGNED_SHORT):e instanceof Int8Array?(a=at.RGBA,l=ti.BYTE):(a=at.RGBA,l=ti.UNSIGNED_BYTE),o.internal=!0,new Gv(o,Object.assign({},tHe,{type:l,format:a},s))}static addToCache(e,i){i&&(e.textureCacheIds.includes(i)||e.textureCacheIds.push(i),sl[i]&&sl[i]!==e&&console.warn(`BaseTexture added to the cache with an id [${i}] that already had an entry`),sl[i]=e)}static removeFromCache(e){if(typeof e=="string"){const i=sl[e];if(i){const n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete sl[e],i}}else if(e!=null&&e.textureCacheIds){for(let i=0;i<e.textureCacheIds.length;++i)delete sl[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null}};FD.defaultOptions={mipmap:uc.POW2,anisotropicLevel:0,scaleMode:Jc.LINEAR,wrapMode:ou.CLAMP,alphaMode:Yo.UNPACK,target:Ig.TEXTURE_2D,format:at.RGBA,type:ti.UNSIGNED_BYTE},FD._globalBatch=0;let ki=FD;class oM{constructor(){this.texArray=null,this.blend=0,this.type=Jh.TRIANGLES,this.start=0,this.size=0,this.data=null}}let iHe=0;class $r{constructor(e,i=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=i,this.id=iHe++,this.disposeRunner=new bl("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?ic.ELEMENT_ARRAY_BUFFER:ic.ARRAY_BUFFER}get index(){return this.type===ic.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new $r(e)}}class sO{constructor(e,i=0,n=!1,s=ti.FLOAT,o,a,l,c=1){this.buffer=e,this.size=i,this.normalized=n,this.type=s,this.stride=o,this.start=a,this.instance=l,this.divisor=c}destroy(){this.buffer=null}static from(e,i,n,s,o){return new sO(e,i,n,s,o)}}const nHe={Float32Array,Uint32Array,Int32Array,Uint8Array};function rHe(r,e){let i=0,n=0;const s={};for(let c=0;c<r.length;c++)n+=e[c],i+=r[c].length;const o=new ArrayBuffer(i*4);let a=null,l=0;for(let c=0;c<r.length;c++){const u=e[c],d=r[c],p=sk(d);s[p]||(s[p]=new nHe[p](o)),a=s[p];for(let m=0;m<d.length;m++){const g=(m/u|0)*n+l,y=m%u;a[g+y]=d[m]}l+=u}return new Float32Array(o)}const UQ={5126:4,5123:2,5121:1};let sHe=0;const oHe={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class pu{constructor(e=[],i={}){this.buffers=e,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=sHe++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new bl("disposeGeometry"),this.refCount=0}addAttribute(e,i,n=0,s=!1,o,a,l,c=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof $r||(i instanceof Array&&(i=new Float32Array(i)),i=new $r(i));const u=e.split("|");if(u.length>1){for(let p=0;p<u.length;p++)this.addAttribute(u[p],i,n,s,o);return this}let d=this.buffers.indexOf(i);return d===-1&&(this.buffers.push(i),d=this.buffers.length-1),this.attributes[e]=new sO(d,n,s,o,a,l,c),this.instanced=this.instanced||c,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof $r||(e instanceof Array&&(e=new Uint16Array(e)),e=new $r(e)),e.type=ic.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],i=[],n=new $r;let s;for(s in this.attributes){const o=this.attributes[s],a=this.buffers[o.buffer];e.push(a.data),i.push(o.size*UQ[o.type]/4),o.buffer=0}for(n.data=rHe(e,i),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const i=this.attributes[e];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new pu;for(let i=0;i<this.buffers.length;i++)e.buffers[i]=new $r(this.buffers[i].data.slice(0));for(const i in this.attributes){const n=this.attributes[i];e.attributes[i]=new sO(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=ic.ELEMENT_ARRAY_BUFFER),e}static merge(e){const i=new pu,n=[],s=[],o=[];let a;for(let l=0;l<e.length;l++){a=e[l];for(let c=0;c<a.buffers.length;c++)s[c]=s[c]||0,s[c]+=a.buffers[c].data.length,o[c]=0}for(let l=0;l<a.buffers.length;l++)n[l]=new oHe[sk(a.buffers[l].data)](s[l]),i.buffers[l]=new $r(n[l]);for(let l=0;l<e.length;l++){a=e[l];for(let c=0;c<a.buffers.length;c++)n[c].set(a.buffers[c].data,o[c]),o[c]+=a.buffers[c].data.length}if(i.attributes=a.attributes,a.indexBuffer){i.indexBuffer=i.buffers[a.buffers.indexOf(a.indexBuffer)],i.indexBuffer.type=ic.ELEMENT_ARRAY_BUFFER;let l=0,c=0,u=0,d=0;for(let p=0;p<a.buffers.length;p++)if(a.buffers[p]!==a.indexBuffer){d=p;break}for(const p in a.attributes){const m=a.attributes[p];(m.buffer|0)===d&&(c+=m.size*UQ[m.type]/4)}for(let p=0;p<e.length;p++){const m=e[p].indexBuffer.data;for(let g=0;g<m.length;g++)i.indexBuffer.data[g+u]+=l;l+=e[p].buffers[d].data.length/c,u+=m.length}}return i}}class D6 extends pu{constructor(e=!1){super(),this._buffer=new $r(null,e,!1),this._indexBuffer=new $r(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ti.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ti.FLOAT).addAttribute("aColor",this._buffer,4,!0,ti.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ti.FLOAT).addIndex(this._indexBuffer)}}const oO=Math.PI*2,Yse=180/Math.PI,qse=Math.PI/180;var Ws=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Ws||{});class ai{constructor(e=0,i=0){this.x=0,this.y=0,this.x=e,this.y=i}clone(){return new ai(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,i=e){return this.x=e,this.y=i,this}}ai.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const lT=[new ai,new ai,new ai,new ai];class Ri{constructor(e=0,i=0,n=0,s=0){this.x=Number(e),this.y=Number(i),this.width=Number(n),this.height=Number(s),this.type=Ws.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ri(0,0,0,0)}clone(){return new Ri(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,i){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(e,i){if(!i){const k=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=k)return!1;const I=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>I}const n=this.left,s=this.right,o=this.top,a=this.bottom;if(s<=n||a<=o)return!1;const l=lT[0].set(e.left,e.top),c=lT[1].set(e.left,e.bottom),u=lT[2].set(e.right,e.top),d=lT[3].set(e.right,e.bottom);if(u.x<=l.x||c.y<=l.y)return!1;const p=Math.sign(i.a*i.d-i.b*i.c);if(p===0||(i.apply(l,l),i.apply(c,c),i.apply(u,u),i.apply(d,d),Math.max(l.x,c.x,u.x,d.x)<=n||Math.min(l.x,c.x,u.x,d.x)>=s||Math.max(l.y,c.y,u.y,d.y)<=o||Math.min(l.y,c.y,u.y,d.y)>=a))return!1;const m=p*(c.y-l.y),g=p*(l.x-c.x),y=m*n+g*o,_=m*s+g*o,x=m*n+g*a,O=m*s+g*a;if(Math.max(y,_,x,O)<=m*l.x+g*l.y||Math.min(y,_,x,O)>=m*d.x+g*d.y)return!1;const S=p*(l.y-u.y),w=p*(u.x-l.x),C=S*n+w*o,M=S*s+w*o,P=S*n+w*a,R=S*s+w*a;return!(Math.max(C,M,P,R)<=S*l.x+w*l.y||Math.min(C,M,P,R)>=S*d.x+w*d.y)}pad(e=0,i=e){return this.x-=e,this.y-=i,this.width+=e*2,this.height+=i*2,this}fit(e){const i=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.width=Math.max(n-i,0),this.y=s,this.height=Math.max(o-s,0),this}ceil(e=1,i=.001){const n=Math.ceil((this.x+this.width-i)*e)/e,s=Math.ceil((this.y+this.height-i)*e)/e;return this.x=Math.floor((this.x+i)*e)/e,this.y=Math.floor((this.y+i)*e)/e,this.width=n-this.x,this.height=s-this.y,this}enlarge(e){const i=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=i,this.width=n-i,this.y=s,this.height=o-s,this}}Ri.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let ok=class Zse{constructor(e=0,i=0,n=0){this.x=e,this.y=i,this.radius=n,this.type=Ws.CIRC}clone(){return new Zse(this.x,this.y,this.radius)}contains(e,i){if(this.radius<=0)return!1;const n=this.radius*this.radius;let s=this.x-e,o=this.y-i;return s*=s,o*=o,s+o<=n}getBounds(){return new Ri(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};ok.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class fS{constructor(e=0,i=0,n=0,s=0){this.x=e,this.y=i,this.width=n,this.height=s,this.type=Ws.ELIP}clone(){return new fS(this.x,this.y,this.width,this.height)}contains(e,i){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,s=(i-this.y)/this.height;return n*=n,s*=s,n+s<=1}getBounds(){return new Ri(this.x-this.width,this.y-this.height,this.width,this.height)}}fS.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class vp{constructor(...e){let i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){const n=[];for(let s=0,o=i.length;s<o;s++)n.push(i[s].x,i[s].y);i=n}this.points=i,this.type=Ws.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),i=new vp(e);return i.closeStroke=this.closeStroke,i}contains(e,i){let n=!1;const s=this.points.length/2;for(let o=0,a=s-1;o<s;a=o++){const l=this.points[o*2],c=this.points[o*2+1],u=this.points[a*2],d=this.points[a*2+1];c>i!=d>i&&e<(u-l)*((i-c)/(d-c))+l&&(n=!n)}return n}}vp.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class pS{constructor(e=0,i=0,n=0,s=0,o=20){this.x=e,this.y=i,this.width=n,this.height=s,this.radius=o,this.type=Ws.RREC}clone(){return new pS(this.x,this.y,this.width,this.height,this.radius)}contains(e,i){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+n&&i<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let s=e-(this.x+n),o=i-(this.y+n);const a=n*n;if(s*s+o*o<=a||(s=e-(this.x+this.width-n),s*s+o*o<=a)||(o=i-(this.y+this.height-n),s*s+o*o<=a)||(s=e-(this.x+n),s*s+o*o<=a))return!0}return!1}}pS.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class ir{constructor(e=1,i=0,n=0,s=1,o=0,a=0){this.array=null,this.a=e,this.b=i,this.c=n,this.d=s,this.tx=o,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,i,n,s,o,a){return this.a=e,this.b=i,this.c=n,this.d=s,this.tx=o,this.ty=a,this}toArray(e,i){this.array||(this.array=new Float32Array(9));const n=i||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,i){i=i||new ai;const n=e.x,s=e.y;return i.x=this.a*n+this.c*s+this.tx,i.y=this.b*n+this.d*s+this.ty,i}applyInverse(e,i){i=i||new ai;const n=1/(this.a*this.d+this.c*-this.b),s=e.x,o=e.y;return i.x=this.d*n*s+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,i.y=this.a*n*o+-this.b*n*s+(-this.ty*this.a+this.tx*this.b)*n,i}translate(e,i){return this.tx+=e,this.ty+=i,this}scale(e,i){return this.a*=e,this.d*=i,this.c*=e,this.b*=i,this.tx*=e,this.ty*=i,this}rotate(e){const i=Math.cos(e),n=Math.sin(e),s=this.a,o=this.c,a=this.tx;return this.a=s*i-this.b*n,this.b=s*n+this.b*i,this.c=o*i-this.d*n,this.d=o*n+this.d*i,this.tx=a*i-this.ty*n,this.ty=a*n+this.ty*i,this}append(e){const i=this.a,n=this.b,s=this.c,o=this.d;return this.a=e.a*i+e.b*s,this.b=e.a*n+e.b*o,this.c=e.c*i+e.d*s,this.d=e.c*n+e.d*o,this.tx=e.tx*i+e.ty*s+this.tx,this.ty=e.tx*n+e.ty*o+this.ty,this}setTransform(e,i,n,s,o,a,l,c,u){return this.a=Math.cos(l+u)*o,this.b=Math.sin(l+u)*o,this.c=-Math.sin(l-c)*a,this.d=Math.cos(l-c)*a,this.tx=e-(n*this.a+s*this.c),this.ty=i-(n*this.b+s*this.d),this}prepend(e){const i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,s=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this}decompose(e){const i=this.a,n=this.b,s=this.c,o=this.d,a=e.pivot,l=-Math.atan2(-s,o),c=Math.atan2(n,i),u=Math.abs(l+c);return u<1e-5||Math.abs(oO-u)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=c),e.scale.x=Math.sqrt(i*i+n*n),e.scale.y=Math.sqrt(s*s+o*o),e.position.x=this.tx+(a.x*i+a.y*s),e.position.y=this.ty+(a.x*n+a.y*o),e}invert(){const e=this.a,i=this.b,n=this.c,s=this.d,o=this.tx,a=e*s-i*n;return this.a=s/a,this.b=-i/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-s*o)/a,this.ty=-(e*this.ty-i*o)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ir;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new ir}static get TEMP_MATRIX(){return new ir}}ir.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Km=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Jm=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],eg=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],tg=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],$D=[],Kse=[],hT=Math.sign;function aHe(){for(let r=0;r<16;r++){const e=[];$D.push(e);for(let i=0;i<16;i++){const n=hT(Km[r]*Km[i]+eg[r]*Jm[i]),s=hT(Jm[r]*Km[i]+tg[r]*Jm[i]),o=hT(Km[r]*eg[i]+eg[r]*tg[i]),a=hT(Jm[r]*eg[i]+tg[r]*tg[i]);for(let l=0;l<16;l++)if(Km[l]===n&&Jm[l]===s&&eg[l]===o&&tg[l]===a){e.push(l);break}}}for(let r=0;r<16;r++){const e=new ir;e.set(Km[r],Jm[r],eg[r],tg[r],0,0),Kse.push(e)}}aHe();const yr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Km[r],uY:r=>Jm[r],vX:r=>eg[r],vY:r=>tg[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>$D[r][e],sub:(r,e)=>$D[r][yr.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?yr.S:yr.N:Math.abs(e)*2<=Math.abs(r)?r>0?yr.E:yr.W:e>0?r>0?yr.SE:yr.SW:r>0?yr.NE:yr.NW,matrixAppendRotationInv:(r,e,i=0,n=0)=>{const s=Kse[yr.inv(e)];s.tx=i,s.ty=n,r.append(s)}};class eu{constructor(e,i,n=0,s=0){this._x=n,this._y=s,this.cb=e,this.scope=i}clone(e=this.cb,i=this.scope){return new eu(e,i,this._x,this._y)}set(e=0,i=e){return(this._x!==e||this._y!==i)&&(this._x=e,this._y=i,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}eu.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const UD=class{constructor(){this.worldTransform=new ir,this.localTransform=new ir,this.position=new eu(this.onChange,this,0,0),this.scale=new eu(this.onChange,this,1,1),this.pivot=new eu(this.onChange,this,0,0),this.skew=new eu(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const i=r.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};UD.IDENTITY=new UD;let mS=UD;mS.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var lHe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,hHe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function zQ(r,e,i){const n=r.createShader(e);return r.shaderSource(n,i),r.compileShader(n),n}function gB(r){const e=new Array(r);for(let i=0;i<e.length;i++)e[i]=!1;return e}function Jse(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return gB(2*e);case"bvec3":return gB(3*e);case"bvec4":return gB(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Dg=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],cHe={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},uHe={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function dHe(r,e){var n;const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in r.uniforms){const o=e[s];if(!o){((n=r.uniforms[s])==null?void 0:n.group)===!0&&(r.uniforms[s].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const a=r.uniforms[s];let l=!1;for(let c=0;c<Dg.length;c++)if(Dg[c].test(o,a)){i.push(Dg[c].code(s,a)),l=!0;break}if(!l){const c=(o.size===1&&!o.isArray?cHe:uHe)[o.type].replace("location",`ud["${s}"].location`);i.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const eoe={};let Ov=eoe;function toe(){if(Ov===eoe||Ov!=null&&Ov.isContextLost()){const r=Dt.ADAPTER.createCanvas();let e;Dt.PREFER_ENV>=qp.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ov=e}return Ov}let cT;function fHe(){if(!cT){cT=gl.MEDIUM;const r=toe();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(cT=e.precision?gl.HIGH:gl.MEDIUM)}}return cT}function XQ(r,e){const i=r.getShaderSource(e).split(`
`).map((u,d)=>`${d}: ${u}`),n=r.getShaderInfoLog(e),s=n.split(`
`),o={},a=s.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!o[u]?(o[u]=!0,!0):!1),l=[""];a.forEach(u=>{i[u-1]=`%c${i[u-1]}%c`,l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const c=i.join(`
`);l[0]=c,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...l),console.groupEnd()}function pHe(r,e,i,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(i,r.COMPILE_STATUS)||XQ(r,i),r.getShaderParameter(n,r.COMPILE_STATUS)||XQ(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const mHe={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ioe(r){return mHe[r]}let uT=null;const WQ={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function noe(r,e){if(!uT){const i=Object.keys(WQ);uT={};for(let n=0;n<i.length;++n){const s=i[n];uT[r[s]]=WQ[s]}}return uT[e]}function GQ(r,e,i){if(r.substring(0,9)!=="precision"){let n=e;return e===gl.HIGH&&i!==gl.HIGH&&(n=gl.MEDIUM),`precision ${n} float;
${r}`}else if(i!==gl.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let z1;function roe(){if(typeof z1=="boolean")return z1;try{z1=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{z1=!1}return z1}let gHe=0;const dT={},zD=class Hv{constructor(e,i,n="pixi-shader",s={}){this.extra={},this.id=gHe++,this.vertexSrc=e||Hv.defaultVertexSrc,this.fragmentSrc=i||Hv.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),dT[n]?(dT[n]++,n+=`-${dT[n]}`):dT[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=GQ(this.vertexSrc,Hv.defaultVertexPrecision,gl.HIGH),this.fragmentSrc=GQ(this.fragmentSrc,Hv.defaultFragmentPrecision,fHe())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return hHe}static get defaultFragmentSrc(){return lHe}static from(e,i,n){const s=e+i;let o=ND[s];return o||(ND[s]=o=new Hv(e,i,n)),o}};zD.defaultVertexPrecision=gl.HIGH,zD.defaultFragmentPrecision=ec.apple.device?gl.HIGH:gl.MEDIUM;let tu=zD,vHe=0;class gh{constructor(e,i,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=vHe++,this.static=!!i,this.ubo=!!n,e instanceof $r?(this.buffer=e,this.buffer.type=ic.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new $r(new Float32Array(1)),this.buffer.type=ic.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,i,n){if(!this.ubo)this.uniforms[e]=new gh(i,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,i,n){return new gh(e,i,n)}static uboFrom(e,i){return new gh(e,i??!0,!0)}}class vh{constructor(e,i){this.uniformBindCount=0,this.program=e,i?i instanceof gh?this.uniformGroup=i:this.uniformGroup=new gh(i):this.uniformGroup=new gh({}),this.disposeRunner=new bl("disposeShader")}checkUniformExists(e,i){if(i.uniforms[e])return!0;for(const n in i.uniforms){const s=i.uniforms[n];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,i,n){const s=tu.from(e,i);return new vh(s,n)}}class soe{constructor(e,i){if(this.vertexSrc=e,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let o=0;o<e;o++)n[o]=o;this.defaultGroupCache[e]=gh.from({uSamplers:n},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new tu(this.vertexSrc,s)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ir,default:this.defaultGroupCache[e]};return new vh(this.programCache[e],i)}generateSampleSrc(e){let i="";i+=`
`,i+=`
`;for(let n=0;n<e;n++)n>0&&(i+=`
else `),n<e-1&&(i+=`if(vTextureId < ${n}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class aM{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function yHe(){return!ec.apple.device}function _He(r){let e=!0;const i=Dt.ADAPTER.getNavigator();if(ec.tablet||ec.phone){if(ec.apple.device){const n=i.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(ec.android.device){const n=i.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?r:4}class gS{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var xHe=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,bHe=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const xb=class Hh extends gS{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=D6,this.vertexSize=6,this.state=mc.for2d(),this.size=Hh.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??_He(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??yHe(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return bi("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return bHe}static get defaultFragmentTemplate(){return xHe}setShaderGenerator({vertex:e=Hh.defaultVertexSrc,fragment:i=Hh.defaultFragmentTemplate}={}){this.shaderGenerator=new soe(e,i)}contextChange(){const e=this.renderer.gl;Dt.PREFER_ENV===qp.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Hh.defaultMaxTextures),this.maxTextures=jse(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:i}=Hh,n=this.size/4,s=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new oM);for(;i.length<s;)i.push(new aM);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:i}=this,n=Hh._textureArrayPool,s=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count;let l=++ki._globalBatch,c=0,u=n[0],d=0;s.copyBoundTextures(o,i);for(let p=0;p<this._bufferSize;++p){const m=e[p];e[p]=null,m._batchEnabled!==l&&(u.count>=i&&(s.boundArray(u,o,l,i),this.buildDrawCalls(u,d,p),d=p,u=n[++c],++l),m._batchEnabled=l,m.touched=a,u.elements[u.count++]=m)}u.count>0&&(s.boundArray(u,o,l,i),this.buildDrawCalls(u,d,this._bufferSize),++c,++l);for(let p=0;p<o.length;p++)o[p]=null;ki._globalBatch=l}buildDrawCalls(e,i,n){const{_bufferedElements:s,_attributeBuffer:o,_indexBuffer:a,vertexSize:l}=this,c=Hh._drawCallPool;let u=this._dcIndex,d=this._aIndex,p=this._iIndex,m=c[u];m.start=this._iIndex,m.texArray=e;for(let g=i;g<n;++g){const y=s[g],_=y._texture.baseTexture,x=I6[_.alphaMode?1:0][y.blendMode];s[g]=null,i<g&&m.blend!==x&&(m.size=p-m.start,i=g,m=c[++u],m.texArray=e,m.start=p),this.packInterleavedGeometry(y,o,a,d,p),d+=y.vertexData.length/2*l,p+=y.indices.length,m.blend=x}i<n&&(m.size=p-m.start,++u),this._dcIndex=u,this._aIndex=d,this._iIndex=p}bindAndClearTexArray(e){const i=this.renderer.texture;for(let n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:i,_indexBuffer:n}=this;Hh.canUploadSameBuffer?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:i,state:n}=this.renderer,s=Hh._drawCallPool;let o=null;for(let a=0;a<e;a++){const{texArray:l,type:c,size:u,start:d,blend:p}=s[a];o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,n.set(this.state),i.drawElements(c,u,i.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Hh.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const i=rO(Math.ceil(e/8)),n=BD(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new rM(s*this.vertexSize*4)),o}getIndexBuffer(e){const i=rO(Math.ceil(e/12)),n=BD(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(s)),o}packInterleavedGeometry(e,i,n,s,o){const{uint32View:a,float32View:l}=i,c=s/this.vertexSize,u=e.uvs,d=e.indices,p=e.vertexData,m=e._texture.baseTexture._batchLocation,g=Math.min(e.worldAlpha,1),y=Sn.shared.setValue(e._tintRGB).toPremultiplied(g,e._texture.baseTexture.alphaMode>0);for(let _=0;_<p.length;_+=2)l[s++]=p[_],l[s++]=p[_+1],l[s++]=u[_],l[s++]=u[_+1],a[s++]=y,l[s++]=m;for(let _=0;_<d.length;_++)n[o++]=c+d[_]}};xb.defaultBatchSize=4096,xb.extension={name:"batch",type:Ot.RendererPlugin},xb._drawCallPool=[],xb._textureArrayPool=[];let Hf=xb;Qt.add(Hf);var wHe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,OHe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const XD=class bb extends vh{constructor(e,i,n){const s=tu.from(e||bb.defaultVertexSrc,i||bb.defaultFragmentSrc);super(s,n),this.padding=0,this.resolution=bb.defaultResolution,this.multisample=bb.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new mc}apply(e,i,n,s,o){e.applyFilter(this,i,n,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return OHe}static get defaultFragmentSrc(){return wHe}};XD.defaultResolution=1,XD.defaultMultisample=Yr.NONE;let bo=XD;class aO{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Sn(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:i,background:n,backgroundAlpha:s}=e,o=n??i;o!==void 0&&(this.color=o),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}aO.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},aO.extension={type:[Ot.RendererSystem,Ot.CanvasRendererSystem],name:"background"};Qt.add(aO);class L6{constructor(e){this.renderer=e,this.emptyRenderer=new gS(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,i){const{boundTextures:n}=this.renderer.texture;for(let s=i-1;s>=0;--s)e[s]=n[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,i,n,s){const{elements:o,ids:a,count:l}=e;let c=0;for(let u=0;u<l;u++){const d=o[u],p=d._batchLocation;if(p>=0&&p<s&&i[p]===d){a[u]=p;continue}for(;c<s;){const m=i[c];if(m&&m._batchEnabled===n&&m._batchLocation===c){c++;continue}a[u]=c,d._batchLocation=c,i[c]=d;break}}}destroy(){this.renderer=null}}L6.extension={type:Ot.RendererSystem,name:"batch"};Qt.add(L6);let HQ=0;class lO{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=HQ++}init(e){if(e.context)this.initFromContext(e.context);else{const i=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=HQ++,this.renderer.runners.contextChange.emit(e);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const i=this.createContext(this.renderer.view,e);this.initFromContext(i)}createContext(e,i){let n;if(Dt.PREFER_ENV>=qp.WEBGL2&&(n=e.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",i)||e.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,i={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const i=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}lO.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},lO.extension={type:Ot.RendererSystem,name:"context"};Qt.add(lO);class lM{constructor(e,i){if(this.width=Math.round(e),this.height=Math.round(i),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new bl("disposeFramebuffer"),this.multisample=Yr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,i){return this.colorTextures[e]=i||new ki(null,{scaleMode:Jc.NEAREST,resolution:1,mipmap:uc.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new ki(null,{scaleMode:Jc.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:uc.OFF,format:at.DEPTH_COMPONENT,type:ti.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,i){if(e=Math.round(e),i=Math.round(i),!e||!i)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&i===this.height)){this.width=e,this.height=i,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const s=this.colorTextures[n],o=s.resolution;s.setSize(e/o,i/o)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,i/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class N6 extends ki{constructor(e={}){if(typeof e=="number"){const i=arguments[0],n=arguments[1],s=arguments[2],o=arguments[3];e={width:i,height:n,scaleMode:s,resolution:o}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Yr.NONE),super(null,e),this.mipmap=uc.OFF,this.valid=!0,this._clear=new Sn([0,0,0,0]),this.framebuffer=new lM(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class mu extends u_{constructor(e){const i=e,n=i.naturalWidth||i.videoWidth||i.displayWidth||i.width,s=i.naturalHeight||i.videoHeight||i.displayHeight||i.height;super(n,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,i,n){n===void 0&&!i.startsWith("data:")?e.crossOrigin=Qse(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,i,n,s){const o=e.gl,a=i.realWidth,l=i.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Yo.UNPACK),!this.noSubImage&&i.target===o.TEXTURE_2D&&n.width===a&&n.height===l?o.texSubImage2D(o.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=a,n.height=l,o.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),super.update()}dispose(){this.source=null}}class V6 extends mu{constructor(e,i){if(i=i||{},typeof e=="string"){const n=new Image;mu.crossOrigin(n,e,i.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??Dt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((i,n)=>{const s=this.source;this.url=s.src;const o=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?i(this.process()):i(this))};s.complete&&s.src?o():(s.onload=o,s.onerror=a=>{n(a),this.onError.emit(a)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(s=>s.blob()).then(s=>i(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Yo.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,i,n,this.bitmap),!this.preserveBitmap){let s=!0;const o=i._glTextures;for(const a in o){const l=o[a];if(l!==n&&l.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class ak{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,i,n){const s=i.width,o=i.height;if(n){const a=e.width/2/s,l=e.height/2/o,c=e.x/s+a,u=e.y/o+l;n=yr.add(n,yr.NW),this.x0=c+a*yr.uX(n),this.y0=u+l*yr.uY(n),n=yr.add(n,2),this.x1=c+a*yr.uX(n),this.y1=u+l*yr.uY(n),n=yr.add(n,2),this.x2=c+a*yr.uX(n),this.y2=u+l*yr.uY(n),n=yr.add(n,2),this.x3=c+a*yr.uX(n),this.y3=u+l*yr.uY(n)}else this.x0=e.x/s,this.y0=e.y/o,this.x1=(e.x+e.width)/s,this.y1=e.y/o,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/o,this.x3=e.x/s,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}ak.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const QQ=new ak;function fT(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class At extends N_{constructor(e,i,n,s,o,a,l){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new Ri(0,0,1,1)),e instanceof At&&(e=e.baseTexture),this.baseTexture=e,this._frame=i,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=QQ,this.uvMatrix=null,this.orig=n||i,this._rotate=Number(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new ai(a.x,a.y):new ai(0,0),this.defaultBorders=l,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=i:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:i}=this.baseTexture;i!=null&&i.url&&Wo[i.url]&&At.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,At.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new At(this.baseTexture,!this.noFrame&&e,i,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===QQ&&(this._uvs=new ak),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,i={},n=Dt.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let o=null;if(s)o=e;else if(e instanceof ki){if(!e.cacheId){const l=(i==null?void 0:i.pixiIdPrefix)||"pixiid";e.cacheId=`${l}-${Dp()}`,ki.addToCache(e,e.cacheId)}o=e.cacheId}else{if(!e._pixiId){const l=(i==null?void 0:i.pixiIdPrefix)||"pixiid";e._pixiId=`${l}_${Dp()}`}o=e._pixiId}let a=Wo[o];if(s&&n&&!a)throw new Error(`The cacheId "${o}" does not exist in TextureCache.`);return!a&&!(e instanceof ki)?(i.resolution||(i.resolution=fu(e)),a=new At(new ki(e,i)),a.baseTexture.cacheId=o,ki.addToCache(a.baseTexture,o),At.addToCache(a,o)):!a&&e instanceof ki&&(a=new At(e),At.addToCache(a,o)),a}static fromURL(e,i){const n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=At.from(e,Object.assign({resourceOptions:n},i),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(()=>Promise.resolve(s))}static fromBuffer(e,i,n,s){return new At(ki.fromBuffer(e,i,n,s))}static fromLoader(e,i,n,s){const o=new ki(e,Object.assign({scaleMode:ki.defaultOptions.scaleMode,resolution:fu(i)},s)),{resource:a}=o;a instanceof V6&&(a.url=i);const l=new At(o);return n||(n=i),ki.addToCache(l.baseTexture,n),At.addToCache(l,n),n!==i&&(ki.addToCache(l.baseTexture,i),At.addToCache(l,i)),l.baseTexture.valid?Promise.resolve(l):new Promise(c=>{l.baseTexture.once("loaded",()=>c(l))})}static addToCache(e,i){i&&(e.textureCacheIds.includes(i)||e.textureCacheIds.push(i),Wo[i]&&Wo[i]!==e&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),Wo[i]=e)}static removeFromCache(e){if(typeof e=="string"){const i=Wo[e];if(i){const n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete Wo[e],i}}else if(e!=null&&e.textureCacheIds){for(let i=0;i<e.textureCacheIds.length;++i)Wo[e.textureCacheIds[i]]===e&&delete Wo[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:i,y:n,width:s,height:o}=e,a=i+s>this.baseTexture.width,l=n+o>this.baseTexture.height;if(a||l){const c=a&&l?"and":"or",u=`X: ${i} + ${s} = ${i+s} > ${this.baseTexture.width}`,d=`Y: ${n} + ${o} = ${n+o} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${c} ${d}`)}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return At._EMPTY||(At._EMPTY=new At(new ki),fT(At._EMPTY),fT(At._EMPTY.baseTexture)),At._EMPTY}static get WHITE(){if(!At._WHITE){const e=Dt.ADAPTER.createCanvas(16,16),i=e.getContext("2d");e.width=16,e.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),At._WHITE=new At(ki.from(e)),fT(At._WHITE),fT(At._WHITE.baseTexture)}return At._WHITE}}class Kp extends At{constructor(e,i){super(e,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,i,n=!0){const s=this.baseTexture.resolution,o=Math.round(e*s)/s,a=Math.round(i*s)/s;this.valid=o>0&&a>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=a,n&&this.baseTexture.resize(o,a),this.updateUvs()}setResolution(e){const{baseTexture:i}=this;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))}static create(e){return new Kp(new N6(e))}}class F6{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,i,n=Yr.NONE){const s=new N6(Object.assign({width:e,height:i,resolution:1,multisample:n},this.textureOptions));return new Kp(s)}getOptimalTexture(e,i,n=1,s=Yr.NONE){let o;e=Math.max(Math.ceil(e*n-1e-6),1),i=Math.max(Math.ceil(i*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||i!==this._pixelsHeight?(e=rO(e),i=rO(i),o=((e&65535)<<16|i&65535)>>>0,s>1&&(o+=s*4294967296)):o=s>1?-s:-1,this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(e,i,s)),a.filterPoolKey=o,a.setResolution(n),a}getFilterTexture(e,i,n){const s=this.getOptimalTexture(e.width,e.height,i||e.resolution,n||Yr.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const i=e.filterPoolKey;e.filterFrame=null,this.texturePool[i].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const i in this.texturePool){const n=this.texturePool[i];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const n=this.texturePool[i];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}F6.SCREEN_KEY=-1;class ooe extends pu{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class $6 extends pu{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new $r(this.vertices),this.uvBuffer=new $r(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,i){let n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class aoe{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Yr.NONE,this.sourceFrame=new Ri,this.destinationFrame=new Ri,this.bindingSourceFrame=new Ri,this.bindingDestinationFrame=new Ri,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const pT=[new ai,new ai,new ai,new ai],vB=new ir;class U6{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new F6,this.statePool=[],this.quad=new ooe,this.quadUv=new $6,this.tempRect=new Ri,this.activeState={},this.globalUniforms=new gh({outputFrame:new Ri,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,i){const n=this.renderer,s=this.defaultFilterStack,o=this.statePool.pop()||new aoe,a=n.renderTexture;let l,c;if(a.current){const x=a.current;l=x.resolution,c=x.multisample}else l=n.resolution,c=n.multisample;let u=i[0].resolution||l,d=i[0].multisample??c,p=i[0].padding,m=i[0].autoFit,g=i[0].legacy??!0;for(let x=1;x<i.length;x++){const O=i[x];u=Math.min(u,O.resolution||l),d=Math.min(d,O.multisample??c),p=this.useMaxPadding?Math.max(p,O.padding):p+O.padding,m=m&&O.autoFit,g=g||(O.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),s.push(o),o.resolution=u,o.multisample=d,o.legacy=g,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(p);const y=this.tempRect.copyFrom(a.sourceFrame);n.projection.transform&&this.transformAABB(vB.copyFrom(n.projection.transform).invert(),y),m?(o.sourceFrame.fit(y),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(y)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,a.current?a.current.resolution:n.resolution,a.sourceFrame,a.destinationFrame,n.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,u,d),o.filters=i,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;const _=this.tempRect;_.x=0,_.y=0,_.width=o.sourceFrame.width,_.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(a.sourceFrame),o.bindingDestinationFrame.copyFrom(a.destinationFrame),o.transform=n.projection.transform,n.projection.transform=null,a.bind(o.renderTexture,o.sourceFrame,_),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,i=e.pop(),n=i.filters;this.activeState=i;const s=this.globalUniforms.uniforms;s.outputFrame=i.sourceFrame,s.resolution=i.resolution;const o=s.inputSize,a=s.inputPixel,l=s.inputClamp;if(o[0]=i.destinationFrame.width,o[1]=i.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*i.resolution),a[1]=Math.round(o[1]*i.resolution),a[2]=1/a[0],a[3]=1/a[1],l[0]=.5*a[2],l[1]=.5*a[3],l[2]=i.sourceFrame.width*o[2]-.5*a[2],l[3]=i.sourceFrame.height*o[3]-.5*a[3],i.legacy){const u=s.filterArea;u[0]=i.destinationFrame.width,u[1]=i.destinationFrame.height,u[2]=i.sourceFrame.x,u[3]=i.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const c=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,c.renderTexture,jh.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let u=i.renderTexture,d=this.getOptimalFilterTexture(u.width,u.height,i.resolution);d.filterFrame=u.filterFrame;let p=0;for(p=0;p<n.length-1;++p){p===1&&i.multisample>1&&(d=this.getOptimalFilterTexture(u.width,u.height,i.resolution),d.filterFrame=u.filterFrame),n[p].apply(this,u,d,jh.CLEAR,i);const m=u;u=d,d=m}n[p].apply(this,u,c.renderTexture,jh.BLEND,i),p>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(d)}i.clear(),this.statePool.push(i)}bindAndClear(e,i=jh.CLEAR){const{renderTexture:n,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,n.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const o=s.stateId&1||this.forceClear;(i===jh.CLEAR||i===jh.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,i,n,s){const o=this.renderer;o.state.set(e.state),this.bindAndClear(n,s),e.uniforms.uSampler=i,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(i._frame,i.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Jh.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Jh.TRIANGLE_STRIP))}calculateSpriteMatrix(e,i){const{sourceFrame:n,destinationFrame:s}=this.activeState,{orig:o}=i._texture,a=e.set(s.width,0,0,s.height,n.x,n.y),l=i.worldTransform.copyTo(ir.TEMP_MATRIX);return l.invert(),a.prepend(l),a.scale(1/o.width,1/o.height),a.translate(i.anchor.x,i.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,i,n=1,s=Yr.NONE){return this.texturePool.getOptimalTexture(e,i,n,s)}getFilterTexture(e,i,n){if(typeof e=="number"){const o=e;e=i,i=o}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,i||e.resolution,n||Yr.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,i){const n=pT[0],s=pT[1],o=pT[2],a=pT[3];n.set(i.left,i.top),s.set(i.left,i.bottom),o.set(i.right,i.top),a.set(i.right,i.bottom),e.apply(n,n),e.apply(s,s),e.apply(o,o),e.apply(a,a);const l=Math.min(n.x,s.x,o.x,a.x),c=Math.min(n.y,s.y,o.y,a.y),u=Math.max(n.x,s.x,o.x,a.x),d=Math.max(n.y,s.y,o.y,a.y);i.x=l,i.y=c,i.width=u-l,i.height=d-c}roundFrame(e,i,n,s,o){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(o){const{a,b:l,c,d:u}=o;if((Math.abs(l)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}o=o?vB.copyFrom(o):vB.identity(),o.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.transformAABB(o,e),e.ceil(i),this.transformAABB(o.invert(),e)}}}U6.extension={type:Ot.RendererSystem,name:"filter"};Qt.add(U6);class loe{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Yr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const SHe=new Ri;class z6{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new lM(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ri,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;Dt.PREFER_ENV===qp.WEBGL_LEGACY&&(i=null,n=null),i?e.drawBuffers=s=>i.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,i,n=0){const{gl:s}=this;if(e){const o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=n),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let a=0;a<e.colorTextures.length;a++){const l=e.colorTextures[a];this.renderer.texture.unbind(l.parentTextureArray||l)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),i){const a=i.width>>n,l=i.height>>n,c=a/i.width;this.setViewport(i.x*c,i.y*c,a,l)}else{const a=e.width>>n,l=e.height>>n;this.setViewport(0,0,a,l)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,i,n,s){const o=this.viewport;e=Math.round(e),i=Math.round(i),n=Math.round(n),s=Math.round(s),(o.width!==n||o.height!==s||o.x!==e||o.y!==i)&&(o.x=e,o.y=i,o.width=n,o.height=s,this.gl.viewport(e,i,n,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,i,n,s,o=KE.COLOR|KE.DEPTH){const{gl:a}=this;a.clearColor(e,i,n,s),a.clear(o)}initFramebuffer(e){const{gl:i}=this,n=new loe(i.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:i}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){i.bindRenderbuffer(i.RENDERBUFFER,n.stencil);let a;this.renderer.context.webGLVersion===1?a=i.DEPTH_STENCIL:e.depth&&e.stencil?a=i.DEPTH24_STENCIL8:e.depth?a=i.DEPTH_COMPONENT24:a=i.STENCIL_INDEX8,n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,a,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,a,e.width,e.height)}const s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1));for(let a=0;a<o;a++){const l=s[a],c=l.parentTextureArray||l;this.renderer.texture.bind(c,0),a===0&&n.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,i){const{gl:n}=this,s=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures;let a=o.length;n.drawBuffers||(a=Math.min(a,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||n.createRenderbuffer():s.msaaBuffer&&(n.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const l=[];for(let c=0;c<a;c++){const u=o[c],d=u.parentTextureArray||u;this.renderer.texture.bind(d,0),c===0&&s.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,s.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,s.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+c,u.target,d._glTextures[this.CONTEXT_UID].texture,i),l.push(n.COLOR_ATTACHMENT0+c))}if(l.length>1&&n.drawBuffers(l),e.depthTexture&&this.writeDepthTexture){const c=e.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,i)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||n.createRenderbuffer();let c,u;this.renderer.context.webGLVersion===1?(c=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH_STENCIL):e.depth&&e.stencil?(c=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH24_STENCIL8):e.depth?(c=n.DEPTH_ATTACHMENT,u=n.DEPTH_COMPONENT24):(c=n.STENCIL_ATTACHMENT,u=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,s.stencil),s.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,u,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,u,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,c,n.RENDERBUFFER,s.stencil)}else s.stencil&&(n.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:i}=this;let n=Yr.NONE;if(e<=1||i===null)return n;for(let s=0;s<i.length;s++)if(i[s]<=e){n=i[s];break}return n===1&&(n=Yr.NONE),n}blit(e,i,n){const{current:s,renderer:o,gl:a,CONTEXT_UID:l}=this;if(o.context.webGLVersion!==2||!s)return;const c=s.glFramebuffers[l];if(!c)return;if(!e){if(!c.msaaBuffer)return;const d=s.colorTextures[0];if(!d)return;c.blitFramebuffer||(c.blitFramebuffer=new lM(s.width,s.height),c.blitFramebuffer.addColorTexture(0,d)),e=c.blitFramebuffer,e.colorTextures[0]!==d&&(e.colorTextures[0]=d,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}i||(i=SHe,i.width=s.width,i.height=s.height),n||(n=i);const u=i.width===n.width&&i.height===n.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,c.framebuffer),a.blitFramebuffer(i.left,i.top,i.right,i.bottom,n.left,n.top,n.right,n.bottom,a.COLOR_BUFFER_BIT,u?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,i){const n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),i||(s.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&s.deleteRenderbuffer(n.msaaBuffer),n.stencil&&s.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,i)}disposeAll(e){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<i.length;n++)this.disposeFramebuffer(i[n],e)}forceStencil(){const e=this.current;if(!e)return;const i=e.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,s=e.height,o=this.gl,a=i.stencil=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a);let l,c;this.renderer.context.webGLVersion===1?(l=o.DEPTH_STENCIL_ATTACHMENT,c=o.DEPTH_STENCIL):e.depth?(l=o.DEPTH_STENCIL_ATTACHMENT,c=o.DEPTH24_STENCIL8):(l=o.STENCIL_ATTACHMENT,c=o.STENCIL_INDEX8),i.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,i.multisample,c,n,s):o.renderbufferStorage(o.RENDERBUFFER,c,n,s),o.framebufferRenderbuffer(o.FRAMEBUFFER,l,o.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ri}destroy(){this.renderer=null}}z6.extension={type:Ot.RendererSystem,name:"framebuffer"};Qt.add(z6);const yB={5126:4,5123:2,5121:1};class X6{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;Dt.PREFER_ENV===qp.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=s=>n.bindVertexArrayOES(s),e.deleteVertexArray=s=>n.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(s,o)=>n.vertexAttribDivisorANGLE(s,o),e.drawElementsInstanced=(s,o,a,l,c)=>n.drawElementsInstancedANGLE(s,o,a,l,c),e.drawArraysInstanced=(s,o,a,l)=>n.drawArraysInstancedANGLE(s,o,a,l)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(e,i){i=i||this.renderer.shader.shader;const{gl:n}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},o=!0);const a=s[i.program.id]||this.initGeometryVao(e,i,o);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(e,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,i=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const s=e.buffers[n];i.update(s)}}checkCompatibility(e,i){const n=e.attributes,s=i.attributeData;for(const o in s)if(!n[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(e,i){const n=e.attributes,s=i.attributeData,o=["g",e.id];for(const a in n)s[a]&&o.push(a,s[a].location);return o.join("-")}initGeometryVao(e,i,n=!0){const s=this.gl,o=this.CONTEXT_UID,a=this.renderer.buffer,l=i.program;l.glPrograms[o]||this.renderer.shader.generateProgram(i),this.checkCompatibility(e,l);const c=this.getSignature(e,l),u=e.glVertexArrayObjects[this.CONTEXT_UID];let d=u[c];if(d)return u[l.id]=d,d;const p=e.buffers,m=e.attributes,g={},y={};for(const _ in p)g[_]=0,y[_]=0;for(const _ in m)!m[_].size&&l.attributeData[_]?m[_].size=l.attributeData[_].size:m[_].size||console.warn(`PIXI Geometry attribute '${_}' size cannot be determined (likely the bound shader does not have the attribute)`),g[m[_].buffer]+=m[_].size*yB[m[_].type];for(const _ in m){const x=m[_],O=x.size;x.stride===void 0&&(g[x.buffer]===O*yB[x.type]?x.stride=0:x.stride=g[x.buffer]),x.start===void 0&&(x.start=y[x.buffer],y[x.buffer]+=O*yB[x.type])}d=s.createVertexArray(),s.bindVertexArray(d);for(let _=0;_<p.length;_++){const x=p[_];a.bind(x),n&&x._glBuffers[o].refCount++}return this.activateVao(e,l),u[l.id]=d,u[c]=d,s.bindVertexArray(null),a.unbind(ic.ARRAY_BUFFER),d}disposeGeometry(e,i){var l;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=e.buffers,a=(l=this.renderer)==null?void 0:l.buffer;if(e.disposeRunner.remove(this),!!n){if(a)for(let c=0;c<o.length;c++){const u=o[c]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!i&&a.dispose(o[c],i))}if(!i){for(const c in n)if(c[0]==="g"){const u=n[c];this._activeVao===u&&this.unbind(),s.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const i=Object.keys(this.managedGeometries);for(let n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],e)}activateVao(e,i){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=e.buffers,l=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);let c=null;for(const u in l){const d=l[u],p=a[d.buffer],m=p._glBuffers[s];if(i.attributeData[u]){c!==m&&(o.bind(p),c=m);const g=i.attributeData[u].location;if(n.enableVertexAttribArray(g),n.vertexAttribPointer(g,d.size,d.type||n.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)n.vertexAttribDivisor(g,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,i,n,s){const{gl:o}=this,a=this._activeGeometry;if(a.indexBuffer){const l=a.indexBuffer.data.BYTES_PER_ELEMENT,c=l===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(e,i||a.indexBuffer.data.length,c,(n||0)*l,s||1):o.drawElements(e,i||a.indexBuffer.data.length,c,(n||0)*l):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(e,n,i||a.getSize(),s||1):o.drawArrays(e,n,i||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}X6.extension={type:Ot.RendererSystem,name:"geometry"};Qt.add(X6);const jQ=new ir;class lk{constructor(e,i){this._texture=e,this.mapCoord=new ir,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,i){i===void 0&&(i=e);const n=this.mapCoord;for(let s=0;s<e.length;s+=2){const o=e[s],a=e[s+1];i[s]=o*n.a+a*n.c+n.tx,i[s+1]=o*n.b+a*n.d+n.ty}return i}update(e){const i=this._texture;if(!i||!i.valid||!e&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const n=i._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=i.orig,o=i.trim;o&&(jQ.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(jQ));const a=i.baseTexture,l=this.uClampFrame,c=this.clampMargin/a.resolution,u=this.clampOffset;return l[0]=(i._frame.x+c+u)/a.width,l[1]=(i._frame.y+c+u)/a.height,l[2]=(i._frame.x+i._frame.width-c+u)/a.width,l[3]=(i._frame.y+i._frame.height-c+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=i._frame.width===a.width&&i._frame.height===a.height&&i.rotate===0,!0}}var CHe=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,THe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class hoe extends bo{constructor(e,i,n){let s=null;typeof e!="string"&&i===void 0&&n===void 0&&(s=e,e=void 0,i=void 0,n=void 0),super(e||THe,i||CHe,n),this.maskSprite=s,this.maskMatrix=new ir}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,i,n,s){const o=this._maskSprite,a=o._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new lk(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,o).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))}}class coe{constructor(e=null){this.type=as.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=bo.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=as.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class W6{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,i){let n=i;if(!n.isMaskData){const o=this.maskDataPool.pop()||new coe;o.pooled=!0,o.maskObject=i,n=o}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n._colorMask=s?s._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==as.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case as.SCISSOR:this.renderer.scissor.push(n);break;case as.STENCIL:this.renderer.stencil.push(n);break;case as.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case as.COLOR:this.pushColorMask(n);break}n.type===as.SPRITE&&this.maskStack.push(n)}pop(e){const i=this.maskStack.pop();if(!(!i||i._target!==e)){if(i.enabled)switch(i.type){case as.SCISSOR:this.renderer.scissor.pop(i);break;case as.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case as.SPRITE:this.popSpriteMask(i);break;case as.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===as.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const i=e.maskObject;i?i.isSprite?e.type=as.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=as.SCISSOR:e.type=as.STENCIL:e.type=as.COLOR}pushSpriteMask(e){const{maskObject:i}=e,n=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new hoe])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=i;const o=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filter.push(n,s),n.filterArea=o,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const i=e._colorMask,n=e._colorMask=i&e.colorMask;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const i=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}W6.extension={type:Ot.RendererSystem,name:"mask"};Qt.add(W6);class uoe{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:i}=this.renderer,n=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==n&&(s===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const YQ=new ir,qQ=[],doe=class DA extends uoe{constructor(e){super(e),this.glConst=Dt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const i=e._scissorRect,{maskObject:n}=e,{renderer:s}=this,o=s.renderTexture,a=n.getBounds(!0,qQ.pop()??new Ri);this.roundFrameToPixels(a,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),i&&a.fit(i),e._scissorRectLocal=a}static isMatrixRotated(e){if(!e)return!1;const{a:i,b:n,c:s,d:o}=e;return(Math.abs(n)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(o)>1e-4)}testScissor(e){const{maskObject:i}=e;if(!i.isFastRect||!i.isFastRect()||DA.isMatrixRotated(i.worldTransform)||DA.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,i,n,s,o){DA.isMatrixRotated(o)||(o=o?YQ.copyFrom(o):YQ.identity(),o.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,e),e.fit(s),e.x=Math.round(e.x*i),e.y=Math.round(e.y*i),e.width=Math.round(e.width*i),e.height=Math.round(e.height*i))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:i}=this.renderer;e._scissorRect||i.enable(i.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:i}=this.renderer;e&&qQ.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let i;this.renderer.renderTexture.current?i=e.y:i=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,i,e.width,e.height)}};doe.extension={type:Ot.RendererSystem,name:"scissor"};let foe=doe;Qt.add(foe);class G6 extends uoe{constructor(e){super(e),this.glConst=Dt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const i=e.maskObject,{gl:n}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const o=e._colorMask;o!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,o!==0&&(e._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}pop(e){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(n._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}G6.extension={type:Ot.RendererSystem,name:"stencil"};Qt.add(G6);class H6{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return bi("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return bi("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return bi("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const i in e)this.plugins[i]=new e[i](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}H6.extension={type:[Ot.RendererSystem,Ot.CanvasRendererSystem],name:"_plugin"};Qt.add(H6);class Q6{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ir,this.transform=null}update(e,i,n,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);const o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)}calculateProjection(e,i,n,s){const o=this.projectionMatrix,a=s?-1:1;o.identity(),o.a=1/i.width*2,o.d=a*(1/i.height*2),o.tx=-1-i.x*o.a,o.ty=-a-i.y*o.d}setTransform(e){}destroy(){this.renderer=null}}Q6.extension={type:Ot.RendererSystem,name:"projection"};Qt.add(Q6);const AHe=new mS,ZQ=new Ri;class j6{constructor(e){this.renderer=e,this._tempMatrix=new ir}generateTexture(e,i){const{region:n,...s}=i||{},o=(n==null?void 0:n.copyTo(ZQ))||e.getLocalBounds(ZQ,!0),a=s.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/a),o.height=Math.max(o.height,1/a),s.width=o.width,s.height=o.height,s.resolution=a,s.multisample??(s.multisample=this.renderer.multisample);const l=Kp.create(s);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;const c=e.transform;return e.transform=AHe,this.renderer.render(e,{renderTexture:l,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=c,l}destroy(){}}j6.extension={type:[Ot.RendererSystem,Ot.CanvasRendererSystem],name:"textureGenerator"};Qt.add(j6);const Bm=new Ri,X1=new Ri;class Y6{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ri,this.destinationFrame=new Ri,this.viewportFrame=new Ri}contextChange(){var i;const e=(i=this.renderer)==null?void 0:i.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,i,n){const s=this.renderer;this.current=e;let o,a,l;e?(o=e.baseTexture,l=o.resolution,i||(Bm.width=e.frame.width,Bm.height=e.frame.height,i=Bm),n||(X1.x=e.frame.x,X1.y=e.frame.y,X1.width=i.width,X1.height=i.height,n=X1),a=o.framebuffer):(l=s.resolution,i||(Bm.width=s._view.screen.width,Bm.height=s._view.screen.height,i=Bm),n||(n=Bm,n.width=i.width,n.height=i.height));const c=this.viewportFrame;c.x=n.x*l,c.y=n.y*l,c.width=n.width*l,c.height=n.height*l,e||(c.y=s.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(a,c),this.renderer.projection.update(n,i,l,!a),e?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)}clear(e,i){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Sn.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const o=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,l=o.width!==a.width||o.height!==a.height;if(l){let{x:c,y:u,width:d,height:p}=this.viewportFrame;c=Math.round(c),u=Math.round(u),d=Math.round(d),p=Math.round(p),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(c,u,d,p)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,i),l&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Y6.extension={type:Ot.RendererSystem,name:"renderTexture"};Qt.add(Y6);class EHe{}class poe{constructor(e,i){this.program=e,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function MHe(r,e){const i={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const o=e.getActiveAttrib(r,s);if(o.name.startsWith("gl_"))continue;const a=noe(e,o.type),l={type:a,name:o.name,size:ioe(a),location:e.getAttribLocation(r,o.name)};i[o.name]=l}return i}function PHe(r,e){const i={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let s=0;s<n;s++){const o=e.getActiveUniform(r,s),a=o.name.replace(/\[.*?\]$/,""),l=!!o.name.match(/\[.*?\]$/),c=noe(e,o.type);i[a]={name:a,index:s,type:c,size:o.size,isArray:l,value:Jse(c,o.size)}}return i}function moe(r,e){var l;const i=zQ(r,r.VERTEX_SHADER,e.vertexSrc),n=zQ(r,r.FRAGMENT_SHADER,e.fragmentSrc),s=r.createProgram();r.attachShader(s,i),r.attachShader(s,n);const o=(l=e.extra)==null?void 0:l.transformFeedbackVaryings;if(o&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(s,o.names,o.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||pHe(r,s,i,n),e.attributeData=MHe(s,r),e.uniformData=PHe(s,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const c=Object.keys(e.attributeData);c.sort((u,d)=>u>d?1:-1);for(let u=0;u<c.length;u++)e.attributeData[c[u]].location=u,r.bindAttribLocation(s,u,c[u]);r.linkProgram(s)}r.deleteShader(i),r.deleteShader(n);const a={};for(const c in e.uniformData){const u=e.uniformData[c];a[c]={location:r.getUniformLocation(s,c),value:Jse(u.type,u.size)}}return new poe(s,a)}function kHe(r,e,i,n,s){i.buffer.update(s)}const IHe={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},goe={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function voe(r){const e=r.map(o=>({data:o,offset:0,dataLen:0,dirty:0}));let i=0,n=0,s=0;for(let o=0;o<e.length;o++){const a=e[o];if(i=goe[a.data.type],a.data.size>1&&(i=Math.max(i,16)*a.data.size),a.dataLen=i,n%i!==0&&n<16){const l=n%i%16;n+=l,s+=l}n+i>16?(s=Math.ceil(s/16)*16,a.offset=s,s+=i,n=i):(a.offset=s,n+=i,s+=i)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function yoe(r,e){const i=[];for(const n in r)e[n]&&i.push(e[n]);return i.sort((n,s)=>n.index-s.index),i}function _oe(r,e){if(!r.autoManage)return{size:0,syncFunc:kHe};const i=yoe(r.uniforms,e),{uboElements:n,size:s}=voe(i),o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let a=0;a<n.length;a++){const l=n[a],c=r.uniforms[l.data.name],u=l.data.name;let d=!1;for(let p=0;p<Dg.length;p++){const m=Dg[p];if(m.codeUbo&&m.test(l.data,c)){o.push(`offset = ${l.offset/4};`,Dg[p].codeUbo(l.data.name,c)),d=!0;break}}if(!d)if(l.data.size>1){const p=ioe(l.data.type),m=Math.max(goe[l.data.type]/16,1),g=p/m,y=(4-g%4)%4;o.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${l.offset/4};

                t = 0;

                for(var i=0; i < ${l.data.size*m}; i++)
                {
                    for(var j = 0; j < ${g}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${y};
                }

                `)}else{const p=IHe[l.data.type];o.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${l.offset/4};
                ${p};
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}let RHe=0;const mT={textureCount:0,uboCount:0};class q6{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=RHe++}systemCheck(){if(!roe())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,i){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),i||(mT.textureCount=0,mT.uboCount=0,this.syncUniformGroup(e.uniformGroup,mT)),s}setUniforms(e){const i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,i){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,i))}syncUniforms(e,i,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(i.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const i=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=dHe(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[i],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,i){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const s=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,i);e.buffer.update(),s(n.uniformData,e.uniforms,this.renderer,mT,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[i])}createSyncBufferGroup(e,i,n){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const o=this.gl.getUniformBlockIndex(i.program,n);i.uniformBufferBindings[n]=this.shader.uniformBindCount,s.uniformBlockBinding(i.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;const a=this.getSignature(e,this.shader.program.uniformData,"ubo");let l=this._uboCache[a];if(l||(l=this._uboCache[a]=_oe(e,this.shader.program.uniformData)),e.autoManage){const c=new Float32Array(l.size/4);e.buffer.update(c)}return i.uniformGroups[e.id]=l.syncFunc,i.uniformGroups[e.id]}getSignature(e,i,n){const s=e.uniforms,o=[`${n}-`];for(const a in s)o.push(a),i[a]&&o.push(i[a].type);return o.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const i=this.gl,n=e.program,s=moe(i,n);return n.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}q6.extension={type:Ot.RendererSystem,name:"shader"};Qt.add(q6);class hO{constructor(e){this.renderer=e}run(e){const{renderer:i}=this;i.runners.init.emit(i.options),e.hello&&console.log(`PixiJS 7.4.2 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}hO.defaultOptions={hello:!1},hO.extension={type:[Ot.RendererSystem,Ot.CanvasRendererSystem],name:"startup"};Qt.add(hO);function BHe(r,e=[]){return e[di.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.ADD]=[r.ONE,r.ONE],e[di.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.NONE]=[0,0],e[di.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[di.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[di.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[di.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[di.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[di.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[di.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[di.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[di.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[di.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[di.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const DHe=0,LHe=1,NHe=2,VHe=3,FHe=4,$He=5,xoe=class WD{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=di.NONE,this._blendEq=!1,this.map=[],this.map[DHe]=this.setBlend,this.map[LHe]=this.setOffset,this.map[NHe]=this.setCullFace,this.map[VHe]=this.setDepthTest,this.map[FHe]=this.setFrontFace,this.map[$He]=this.setDepthMask,this.checks=[],this.defaultState=new mc,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=BHe(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let i=this.stateId^e.data,n=0;for(;i;)i&1&&this.map[n].call(this,!!(e.data&1<<n)),i=i>>1,n++;this.stateId=e.data}for(let i=0;i<this.checks.length;i++)this.checks[i](this,e)}forceState(e){e=e||this.defaultState;for(let i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(let i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(WD.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(WD.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const i=this.blendModes[e],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,i){this.gl.polygonOffset(e,i)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,i){const n=this.checks.indexOf(e);i&&n===-1?this.checks.push(e):!i&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,i){e.setBlendMode(i.blendMode)}static checkPolygonOffset(e,i){e.setPolygonOffset(1,i.polygonOffset)}destroy(){this.gl=null}};xoe.extension={type:Ot.RendererSystem,name:"state"};let boe=xoe;Qt.add(boe);class woe extends N_{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const i=(e.priority??[]).filter(s=>e.systems[s]),n=[...i,...Object.keys(e.systems).filter(s=>!i.includes(s))];for(const s of n)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(i=>{this.runners[i]=new bl(i)})}addSystem(e,i){const n=new e(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=n,this._systemsHash[i]=n;for(const s in this.runners)this.runners[s].add(n);return this}emitWithCustomOptions(e,i){const n=Object.keys(this._systemsHash);e.items.forEach(s=>{const o=n.find(a=>this._systemsHash[a]===s);s[e.name](i[o])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const wb=class LA{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=LA.defaultMaxIdle,this.checkCountMax=LA.defaultCheckCountMax,this.mode=LA.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==ZP.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,i=e.managedTextures;let n=!1;for(let s=0;s<i.length;s++){const o=i[s];o.resource&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),i[s]=null,n=!0)}if(n){let s=0;for(let o=0;o<i.length;o++)i[o]!==null&&(i[s++]=i[o]);i.length=s}}unload(e){const i=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&i.destroyTexture(n);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};wb.defaultMode=ZP.AUTO,wb.defaultMaxIdle=60*60,wb.defaultCheckCountMax=60*10,wb.extension={type:Ot.RendererSystem,name:"textureGC"};let Qf=wb;Qt.add(Qf);class NA{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ti.UNSIGNED_BYTE,this.internalFormat=at.RGBA,this.samplerType=0}}function UHe(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:Bt.FLOAT,[r.RGBA]:Bt.FLOAT,[r.ALPHA]:Bt.FLOAT,[r.LUMINANCE]:Bt.FLOAT,[r.LUMINANCE_ALPHA]:Bt.FLOAT,[r.R8]:Bt.FLOAT,[r.R8_SNORM]:Bt.FLOAT,[r.RG8]:Bt.FLOAT,[r.RG8_SNORM]:Bt.FLOAT,[r.RGB8]:Bt.FLOAT,[r.RGB8_SNORM]:Bt.FLOAT,[r.RGB565]:Bt.FLOAT,[r.RGBA4]:Bt.FLOAT,[r.RGB5_A1]:Bt.FLOAT,[r.RGBA8]:Bt.FLOAT,[r.RGBA8_SNORM]:Bt.FLOAT,[r.RGB10_A2]:Bt.FLOAT,[r.RGB10_A2UI]:Bt.FLOAT,[r.SRGB8]:Bt.FLOAT,[r.SRGB8_ALPHA8]:Bt.FLOAT,[r.R16F]:Bt.FLOAT,[r.RG16F]:Bt.FLOAT,[r.RGB16F]:Bt.FLOAT,[r.RGBA16F]:Bt.FLOAT,[r.R32F]:Bt.FLOAT,[r.RG32F]:Bt.FLOAT,[r.RGB32F]:Bt.FLOAT,[r.RGBA32F]:Bt.FLOAT,[r.R11F_G11F_B10F]:Bt.FLOAT,[r.RGB9_E5]:Bt.FLOAT,[r.R8I]:Bt.INT,[r.R8UI]:Bt.UINT,[r.R16I]:Bt.INT,[r.R16UI]:Bt.UINT,[r.R32I]:Bt.INT,[r.R32UI]:Bt.UINT,[r.RG8I]:Bt.INT,[r.RG8UI]:Bt.UINT,[r.RG16I]:Bt.INT,[r.RG16UI]:Bt.UINT,[r.RG32I]:Bt.INT,[r.RG32UI]:Bt.UINT,[r.RGB8I]:Bt.INT,[r.RGB8UI]:Bt.UINT,[r.RGB16I]:Bt.INT,[r.RGB16UI]:Bt.UINT,[r.RGB32I]:Bt.INT,[r.RGB32UI]:Bt.UINT,[r.RGBA8I]:Bt.INT,[r.RGBA8UI]:Bt.UINT,[r.RGBA16I]:Bt.INT,[r.RGBA16UI]:Bt.UINT,[r.RGBA32I]:Bt.INT,[r.RGBA32UI]:Bt.UINT,[r.DEPTH_COMPONENT16]:Bt.FLOAT,[r.DEPTH_COMPONENT24]:Bt.FLOAT,[r.DEPTH_COMPONENT32F]:Bt.FLOAT,[r.DEPTH_STENCIL]:Bt.FLOAT,[r.DEPTH24_STENCIL8]:Bt.FLOAT,[r.DEPTH32F_STENCIL8]:Bt.FLOAT}:e={[r.RGB]:Bt.FLOAT,[r.RGBA]:Bt.FLOAT,[r.ALPHA]:Bt.FLOAT,[r.LUMINANCE]:Bt.FLOAT,[r.LUMINANCE_ALPHA]:Bt.FLOAT,[r.DEPTH_STENCIL]:Bt.FLOAT},e}function zHe(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[ti.UNSIGNED_BYTE]:{[at.RGBA]:r.RGBA8,[at.RGB]:r.RGB8,[at.RG]:r.RG8,[at.RED]:r.R8,[at.RGBA_INTEGER]:r.RGBA8UI,[at.RGB_INTEGER]:r.RGB8UI,[at.RG_INTEGER]:r.RG8UI,[at.RED_INTEGER]:r.R8UI,[at.ALPHA]:r.ALPHA,[at.LUMINANCE]:r.LUMINANCE,[at.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ti.BYTE]:{[at.RGBA]:r.RGBA8_SNORM,[at.RGB]:r.RGB8_SNORM,[at.RG]:r.RG8_SNORM,[at.RED]:r.R8_SNORM,[at.RGBA_INTEGER]:r.RGBA8I,[at.RGB_INTEGER]:r.RGB8I,[at.RG_INTEGER]:r.RG8I,[at.RED_INTEGER]:r.R8I},[ti.UNSIGNED_SHORT]:{[at.RGBA_INTEGER]:r.RGBA16UI,[at.RGB_INTEGER]:r.RGB16UI,[at.RG_INTEGER]:r.RG16UI,[at.RED_INTEGER]:r.R16UI,[at.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[ti.SHORT]:{[at.RGBA_INTEGER]:r.RGBA16I,[at.RGB_INTEGER]:r.RGB16I,[at.RG_INTEGER]:r.RG16I,[at.RED_INTEGER]:r.R16I},[ti.UNSIGNED_INT]:{[at.RGBA_INTEGER]:r.RGBA32UI,[at.RGB_INTEGER]:r.RGB32UI,[at.RG_INTEGER]:r.RG32UI,[at.RED_INTEGER]:r.R32UI,[at.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[ti.INT]:{[at.RGBA_INTEGER]:r.RGBA32I,[at.RGB_INTEGER]:r.RGB32I,[at.RG_INTEGER]:r.RG32I,[at.RED_INTEGER]:r.R32I},[ti.FLOAT]:{[at.RGBA]:r.RGBA32F,[at.RGB]:r.RGB32F,[at.RG]:r.RG32F,[at.RED]:r.R32F,[at.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[ti.HALF_FLOAT]:{[at.RGBA]:r.RGBA16F,[at.RGB]:r.RGB16F,[at.RG]:r.RG16F,[at.RED]:r.R16F},[ti.UNSIGNED_SHORT_5_6_5]:{[at.RGB]:r.RGB565},[ti.UNSIGNED_SHORT_4_4_4_4]:{[at.RGBA]:r.RGBA4},[ti.UNSIGNED_SHORT_5_5_5_1]:{[at.RGBA]:r.RGB5_A1},[ti.UNSIGNED_INT_2_10_10_10_REV]:{[at.RGBA]:r.RGB10_A2,[at.RGBA_INTEGER]:r.RGB10_A2UI},[ti.UNSIGNED_INT_10F_11F_11F_REV]:{[at.RGB]:r.R11F_G11F_B10F},[ti.UNSIGNED_INT_5_9_9_9_REV]:{[at.RGB]:r.RGB9_E5},[ti.UNSIGNED_INT_24_8]:{[at.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[ti.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[at.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[ti.UNSIGNED_BYTE]:{[at.RGBA]:r.RGBA,[at.RGB]:r.RGB,[at.ALPHA]:r.ALPHA,[at.LUMINANCE]:r.LUMINANCE,[at.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ti.UNSIGNED_SHORT_5_6_5]:{[at.RGB]:r.RGB},[ti.UNSIGNED_SHORT_4_4_4_4]:{[at.RGBA]:r.RGBA},[ti.UNSIGNED_SHORT_5_5_5_1]:{[at.RGBA]:r.RGBA}},e}class Z6{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ki,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=zHe(e),this.samplerTypes=UHe(e);const i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let s=0;s<i;s++)this.boundTextures[s]=null;this.emptyTextures={};const n=new NA(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new NA(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,i=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[i]!==e&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[i]=e}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:i,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<n.length;s++)n[s]===e&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(e.target,this.emptyTextures[e.target].texture),n[s]=null)}ensureSamplerType(e){const{boundTextures:i,hasIntegerTextures:n,CONTEXT_UID:s}=this;if(n)for(let o=e-1;o>=0;--o){const a=i[o];a&&a._glTextures[s].samplerType!==Bt.FLOAT&&this.renderer.texture.unbind(a)}}initTexture(e){const i=new NA(this.gl.createTexture());return i.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),i}initTextureType(e,i){var n;i.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,i.samplerType=this.samplerTypes[i.internalFormat]??Bt.FLOAT,this.webGLVersion===2&&e.type===ti.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=e.type}updateTexture(e){var s;const i=e._glTextures[this.CONTEXT_UID];if(!i)return;const n=this.renderer;if(this.initTextureType(e,i),(s=e.resource)==null?void 0:s.upload(n,e,i))i.samplerType!==Bt.FLOAT&&(this.hasIntegerTextures=!0);else{const o=e.realWidth,a=e.realHeight,l=n.gl;(i.width!==o||i.height!==a||i.dirtyId<0)&&(i.width=o,i.height=a,l.texImage2D(e.target,0,i.internalFormat,o,a,0,e.format,i.type,null))}e.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(e),i.dirtyId=e.dirtyId}destroyTexture(e,i){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!i)){const s=this.managedTextures.indexOf(e);s!==-1&&Bg(this.managedTextures,s,1)}}updateTextureStyle(e){var n;const i=e._glTextures[this.CONTEXT_UID];i&&((e.mipmap===uc.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?i.mipmap=!1:i.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?i.wrapMode=ou.CLAMP:i.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,i)||this.setStyle(e,i),i.dirtyStyleId=e.dirtyStyleId)}setStyle(e,i){const n=this.gl;if(i.mipmap&&e.mipmap!==uc.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Jc.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===Jc.LINEAR){const o=Math.min(e.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Jc.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Jc.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}Z6.extension={type:Ot.RendererSystem,name:"texture"};Qt.add(Z6);class K6{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:i,CONTEXT_UID:n}=this,s=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,i){const{gl:n,renderer:s}=this;i&&s.shader.bind(i),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:i,renderer:n,CONTEXT_UID:s}=this,o=i.createTransformFeedback();e._glTransformFeedbacks[s]=o,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,o);for(let a=0;a<e.buffers.length;a++){const l=e.buffers[a];l&&(n.buffer.update(l),l._glBuffers[s].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,a,l._glBuffers[s].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),o}disposeTransformFeedback(e,i){const n=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const o=this.renderer.buffer;if(o)for(let a=0;a<e.buffers.length;a++){const l=e.buffers[a];if(!l)continue;const c=l._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!i&&o.dispose(l,i))}n&&(i||s.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}K6.extension={type:Ot.RendererSystem,name:"transformFeedback"};Qt.add(K6);class cO{constructor(e){this.renderer=e}init(e){this.screen=new Ri(0,0,e.width,e.height),this.element=e.view||Dt.ADAPTER.createCanvas(),this.resolution=e.resolution||Dt.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,i){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(i*this.resolution);const n=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",n,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var i;e&&((i=this.element.parentNode)==null||i.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}cO.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},cO.extension={type:[Ot.RendererSystem,Ot.CanvasRendererSystem],name:"_view"};Qt.add(cO);Dt.PREFER_ENV=qp.WEBGL2;Dt.STRICT_TEXTURE_CACHE=!1;Dt.RENDER_OPTIONS={...lO.defaultOptions,...aO.defaultOptions,...cO.defaultOptions,...hO.defaultOptions};Object.defineProperties(Dt,{WRAP_MODE:{get(){return ki.defaultOptions.wrapMode},set(r){bi("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ki.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return ki.defaultOptions.scaleMode},set(r){bi("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ki.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return ki.defaultOptions.mipmap},set(r){bi("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ki.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return ki.defaultOptions.anisotropicLevel},set(r){bi("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ki.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return bi("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),bo.defaultResolution},set(r){bo.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return bi("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),bo.defaultMultisample},set(r){bo.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Hf.defaultMaxTextures},set(r){bi("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Hf.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Hf.defaultBatchSize},set(r){bi("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Hf.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Hf.canUploadSameBuffer},set(r){bi("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Hf.canUploadSameBuffer=r}},GC_MODE:{get(){return Qf.defaultMode},set(r){bi("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Qf.defaultMode=r}},GC_MAX_IDLE:{get(){return Qf.defaultMaxIdle},set(r){bi("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Qf.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Qf.defaultCheckCountMax},set(r){bi("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Qf.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return tu.defaultVertexPrecision},set(r){bi("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),tu.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return tu.defaultFragmentPrecision},set(r){bi("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),tu.defaultFragmentPrecision=r}}});var Ld=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Ld||{});class _B{constructor(e,i=null,n=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=i,this.priority=n,this.once=s}match(e,i=null){return this.fn===e&&this.context===i}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=e?null:i,this.previous=null,i}}const Ooe=class tl{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new _B(null,null,1/0),this.deltaMS=1/tl.targetFPMS,this.elapsedMS=1/tl.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,i,n=Ld.NORMAL){return this._addListener(new _B(e,i,n))}addOnce(e,i,n=Ld.NORMAL){return this._addListener(new _B(e,i,n,!0))}_addListener(e){let i=this._head.next,n=this._head;if(!i)e.connect(n);else{for(;i;){if(e.priority>i.priority){e.connect(n);break}n=i,i=i.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,i){let n=this._head.next;for(;n;)n.match(e,i)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,i=this._head;for(;i=i.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if(i=this.elapsedMS=e-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const o=e-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=e-o%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*tl.targetFPMS;const n=this._head;let s=n.next;for(;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const i=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,i)/1e3,tl.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const i=Math.max(this.minFPS,e);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!tl._shared){const e=tl._shared=new tl;e.autoStart=!0,e._protected=!0}return tl._shared}static get system(){if(!tl._system){const e=tl._system=new tl;e.autoStart=!0,e._protected=!0}return tl._system}};Ooe.targetFPMS=.06;let Rr=Ooe;Object.defineProperties(Dt,{TARGET_FPMS:{get(){return Rr.targetFPMS},set(r){bi("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Rr.targetFPMS=r}}});class J6{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Ld.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Rr.shared:new Rr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}J6.extension=Ot.Application;Qt.add(J6);const Soe=[];Qt.handleByList(Ot.Renderer,Soe);function Coe(r){for(const e of Soe)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var XHe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,WHe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Toe=XHe,eF=WHe;class tF{constructor(e){this.renderer=e}contextChange(e){let i;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=Yr.HIGH?this.multisample=Yr.HIGH:i>=Yr.MEDIUM?this.multisample=Yr.MEDIUM:i>=Yr.LOW?this.multisample=Yr.LOW:this.multisample=Yr.NONE}destroy(){}}tF.extension={type:Ot.RendererSystem,name:"_multisample"};Qt.add(tF);class GHe{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class iF{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:i,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);i.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:i}=this;i.bindBuffer(e,null)}bindBufferBase(e,i){const{gl:n,CONTEXT_UID:s}=this;if(this.boundBufferBases[i]!==e){const o=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[i]=e,n.bindBufferBase(n.UNIFORM_BUFFER,i,o.buffer)}}bindBufferRange(e,i,n){const{gl:s,CONTEXT_UID:o}=this;n=n||0;const a=e._glBuffers[o]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,i||0,a.buffer,n*256,256)}update(e){const{gl:i,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,i.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{const o=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,o)}}dispose(e,i){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),n&&(i||s.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const i=Object.keys(this.managedBuffers);for(let n=0;n<i.length;n++)this.dispose(this.managedBuffers[i[n]],e)}createGLBuffer(e){const{CONTEXT_UID:i,gl:n}=this;return e._glBuffers[i]=new GHe(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]}}iF.extension={type:Ot.RendererSystem,name:"buffer"};Qt.add(iF);class nF{constructor(e){this.renderer=e}render(e,i){const n=this.renderer;let s,o,a,l;if(i&&(s=i.renderTexture,o=i.clear,a=i.transform,l=i.skipUpdateTransform),this.renderingToScreen=!s,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=a,!n.context.isLost){if(s||(this.lastObjectRendered=e),!l){const c=e.enableTempParent();e.updateTransform(),e.disableTempParent(c)}n.renderTexture.bind(s),n.batch.currentRenderer.start(),(o??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),s&&(i.blit&&n.framebuffer.blit(),s.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}nF.extension={type:Ot.RendererSystem,name:"objectRenderer"};Qt.add(nF);const VA=class GD extends woe{constructor(e){super(),this.type=S6.WEBGL,e=Object.assign({},Dt.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new gh({projectionMatrix:new ir},!0);const i={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:GD.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(i),"useContextAlpha"in e&&(bi("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=GD.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:Lse()}render(e,i){this.objectRenderer.render(e,i)}resize(e,i){this._view.resizeView(e,i)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return bi("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return bi("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return bi("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return bi("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){bi("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return bi("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){bi("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return bi("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,i){return this.textureGenerator.generateTexture(e,i)}};VA.extension={type:Ot.Renderer,priority:1},VA.__plugins={},VA.__systems={};let hk=VA;Qt.handleByMap(Ot.RendererPlugin,hk.__plugins);Qt.handleByMap(Ot.RendererSystem,hk.__systems);Qt.add(hk);class rF extends u_{constructor(e,i){const{width:n,height:s}=i||{};super(n,s),this.items=[],this.itemDirtyIds=[];for(let o=0;o<e;o++){const a=new ki;this.items.push(a),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,i){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof u_?this.addResourceAt(e[n],n):this.addResourceAt(B6(e[n],i),n))}dispose(){for(let e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)}unbind(e){super.unbind(e);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(e).then(()=>{const{realWidth:i,realHeight:n}=this.items[0];return this.resize(i,n),this.update(),Promise.resolve(this)}),this._load}}class Aoe extends rF{constructor(e,i){const{width:n,height:s}=i||{};let o,a;Array.isArray(e)?(o=e,a=e.length):a=e,super(a,{width:n,height:s}),o&&this.initFromArray(o,i)}addBaseTextureAt(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Ig.TEXTURE_2D_ARRAY}upload(e,i,n){const{length:s,itemDirtyIds:o,items:a}=this,{gl:l}=e;n.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,s,0,i.format,n.type,null);for(let c=0;c<s;c++){const u=a[c];o[c]<u.dirtyId&&(o[c]=u.dirtyId,u.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,c,u.resource.width,u.resource.height,1,i.format,n.type,u.resource.source))}return!0}}class Eoe extends mu{constructor(e){super(e)}static test(e){const{OffscreenCanvas:i}=globalThis;return i&&e instanceof i?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const Moe=class Ob extends rF{constructor(e,i){const{width:n,height:s,autoLoad:o,linkBaseTexture:a}=i||{};if(e&&e.length!==Ob.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:s});for(let l=0;l<Ob.SIDES;l++)this.items[l].target=Ig.TEXTURE_CUBE_MAP_POSITIVE_X+l;this.linkBaseTexture=a!==!1,e&&this.initFromArray(e,i),o!==!1&&this.load()}bind(e){super.bind(e),e.target=Ig.TEXTURE_CUBE_MAP}addBaseTextureAt(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error(`Index ${i} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Ig.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this}upload(e,i,n){const s=this.itemDirtyIds;for(let o=0;o<Ob.SIDES;o++){const a=this.items[o];(s[o]<a.dirtyId||n.dirtyId<i.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(e,a,n),s[o]=a.dirtyId):s[o]<-1&&(e.gl.texImage2D(a.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[o]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Ob.SIDES}};Moe.SIDES=6;let Poe=Moe;class vg extends mu{constructor(e,i){i=i||{};let n,s,o;typeof e=="string"?(n=vg.EMPTY,s=e,o=!0):(n=e,s=null,o=!1),super(n),this.url=s,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.ownsImageBitmap=i.ownsImageBitmap??o,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,i)=>{if(this.url===null){e(this);return}try{const n=await Dt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await n.blob();if(this.destroyed)return;const o=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Yo.UNPACK?"premultiply":"none"});if(this.destroyed){o.close();return}this.source=o,this.update(),e(this)}catch(n){if(this.destroyed)return;i(n),this.onError.emit(n)}}),this._load)}upload(e,i,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(e,i,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return vg._EMPTY=vg._EMPTY??Dt.ADAPTER.createCanvas(0,0),vg._EMPTY}}const HD=class FA extends mu{constructor(e,i){i=i||{},super(Dt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=i.scale||1,this._overrideWidth=i.width,this._overrideHeight=i.height,this._resolve=null,this._crossorigin=i.crossorigin,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},FA.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;mu.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=i=>{this._resolve&&(e.onerror=null,this.onError.emit(i))},e.onload=()=>{if(!this._resolve)return;const i=e.width,n=e.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=i*this.scale,o=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/n*i,o=this._overrideHeight||this._overrideWidth/i*n),s=Math.round(s),o=Math.round(o);const a=this.source;a.width=s,a.height=o,a._pixiId=`canvas_${Dp()}`,a.getContext("2d").drawImage(e,0,0,i,n,0,0,s,o),this._resolve(),this._resolve=null}}static getSize(e){const i=FA.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,i){return i==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&FA.SVG_XML.test(e)}};HD.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,HD.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let hM=HD;class HHe extends mu{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const QD=class jD extends mu{constructor(e,i){if(i=i||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");i.autoLoad!==!1&&n.setAttribute("preload","auto"),i.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),i.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),i.loop===!0&&n.setAttribute("loop",""),i.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];mu.crossOrigin(n,s,i.crossorigin);for(let o=0;o<e.length;++o){const a=document.createElement("source");let{src:l,mime:c}=e[o];if(l=l||e[o],l.startsWith("data:"))c=l.slice(5,l.indexOf(";"));else if(!l.startsWith("blob:")){const u=l.split("?").shift().toLowerCase(),d=u.slice(u.lastIndexOf(".")+1);c=c||jD.MIME_TYPES[d]||`video/${d}`}a.src=l,c&&(a.type=c),n.appendChild(a)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=i.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=i.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),i.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const i=Rr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((i,n)=>{this.valid?i(this):(this._resolve=i,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const i=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!i&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Rr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Rr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Rr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,i){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||jD.TYPES.includes(i)}};QD.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],QD.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let sF=QD;sM.push(vg,V6,Eoe,sF,HHe,hM,dS,Poe,Aoe);class QHe{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new bl("disposeTransformFeedback")}bindBuffer(e,i){this.buffers[e]=i}destroy(){this.disposeRunner.emit(this,!1)}}const jHe="7.4.2";class uO{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ri.EMPTY:(e=e||new Ri(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,i){const{a:n,b:s,c:o,d:a,tx:l,ty:c}=e,u=n*i.x+o*i.y+l,d=s*i.x+a*i.y+c;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(e){let i=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e[0],l=e[1];i=a<i?a:i,n=l<n?l:n,s=a>s?a:s,o=l>o?l:o,a=e[2],l=e[3],i=a<i?a:i,n=l<n?l:n,s=a>s?a:s,o=l>o?l:o,a=e[4],l=e[5],i=a<i?a:i,n=l<n?l:n,s=a>s?a:s,o=l>o?l:o,a=e[6],l=e[7],i=a<i?a:i,n=l<n?l:n,s=a>s?a:s,o=l>o?l:o,this.minX=i,this.minY=n,this.maxX=s,this.maxY=o}addFrame(e,i,n,s,o){this.addFrameMatrix(e.worldTransform,i,n,s,o)}addFrameMatrix(e,i,n,s,o){const a=e.a,l=e.b,c=e.c,u=e.d,d=e.tx,p=e.ty;let m=this.minX,g=this.minY,y=this.maxX,_=this.maxY,x=a*i+c*n+d,O=l*i+u*n+p;m=x<m?x:m,g=O<g?O:g,y=x>y?x:y,_=O>_?O:_,x=a*s+c*n+d,O=l*s+u*n+p,m=x<m?x:m,g=O<g?O:g,y=x>y?x:y,_=O>_?O:_,x=a*i+c*o+d,O=l*i+u*o+p,m=x<m?x:m,g=O<g?O:g,y=x>y?x:y,_=O>_?O:_,x=a*s+c*o+d,O=l*s+u*o+p,m=x<m?x:m,g=O<g?O:g,y=x>y?x:y,_=O>_?O:_,this.minX=m,this.minY=g,this.maxX=y,this.maxY=_}addVertexData(e,i,n){let s=this.minX,o=this.minY,a=this.maxX,l=this.maxY;for(let c=i;c<n;c+=2){const u=e[c],d=e[c+1];s=u<s?u:s,o=d<o?d:o,a=u>a?u:a,l=d>l?d:l}this.minX=s,this.minY=o,this.maxX=a,this.maxY=l}addVertices(e,i,n,s){this.addVerticesMatrix(e.worldTransform,i,n,s)}addVerticesMatrix(e,i,n,s,o=0,a=o){const l=e.a,c=e.b,u=e.c,d=e.d,p=e.tx,m=e.ty;let g=this.minX,y=this.minY,_=this.maxX,x=this.maxY;for(let O=n;O<s;O+=2){const S=i[O],w=i[O+1],C=l*S+u*w+p,M=d*w+c*S+m;g=Math.min(g,C-o),_=Math.max(_,C+o),y=Math.min(y,M-a),x=Math.max(x,M+a)}this.minX=g,this.minY=y,this.maxX=_,this.maxY=x}addBounds(e){const i=this.minX,n=this.minY,s=this.maxX,o=this.maxY;this.minX=e.minX<i?e.minX:i,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>o?e.maxY:o}addBoundsMask(e,i){const n=e.minX>i.minX?e.minX:i.minX,s=e.minY>i.minY?e.minY:i.minY,o=e.maxX<i.maxX?e.maxX:i.maxX,a=e.maxY<i.maxY?e.maxY:i.maxY;if(n<=o&&s<=a){const l=this.minX,c=this.minY,u=this.maxX,d=this.maxY;this.minX=n<l?n:l,this.minY=s<c?s:c,this.maxX=o>u?o:u,this.maxY=a>d?a:d}}addBoundsMatrix(e,i){this.addFrameMatrix(i,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,i){const n=e.minX>i.x?e.minX:i.x,s=e.minY>i.y?e.minY:i.y,o=e.maxX<i.x+i.width?e.maxX:i.x+i.width,a=e.maxY<i.y+i.height?e.maxY:i.y+i.height;if(n<=o&&s<=a){const l=this.minX,c=this.minY,u=this.maxX,d=this.maxY;this.minX=n<l?n:l,this.minY=s<c?s:c,this.maxX=o>u?o:u,this.maxY=a>d?a:d}}pad(e=0,i=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=i,this.maxY+=i)}addFramePad(e,i,n,s,o,a){e-=o,i-=a,n+=o,s+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>s?this.maxY:s}}class fr extends N_{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new mS,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new uO,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const i=Object.keys(e);for(let n=0;n<i.length;++n){const s=i[n];Object.defineProperty(fr.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Ri),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ri),e=this._localBoundsRect),this._localBounds||(this._localBounds=new uO);const i=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-o,a}toGlobal(e,i,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)}toLocal(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,i=0,n=1,s=1,o=0,a=0,l=0,c=0,u=0){return this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=o,this.skew.x=a,this.skew.y=l,this.pivot.x=c,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new koe),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Yse}set angle(e){this.transform.rotation=e*qse}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=e,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class koe extends fr{constructor(){super(...arguments),this.sortDirty=null}}fr.prototype.displayObjectUpdateTransform=fr.prototype.updateTransform;const YHe=new ir;function qHe(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const Ioe=class YD extends fr{constructor(){super(),this.children=[],this.sortableChildren=YD.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let i=0;i<e.length;i++)this.addChild(e[i]);else{const i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]}addChildAt(e,i){if(i<0||i>this.children.length)throw new Error(`${e}addChildAt: The index ${i} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e}swapChildren(e,i){if(e===i)return;const n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}getChildIndex(e){const i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i}setChildIndex(e,i){if(i<0||i>=this.children.length)throw new Error(`The index ${i} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Bg(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let i=0;i<e.length;i++)this.removeChild(e[i]);else{const i=e[0],n=this.children.indexOf(i);if(n===-1)return null;i.parent=null,i.transform._parentID=-1,Bg(this.children,n,1),this._boundsID++,this.onChildrenChange(n),i.emit("removed",this),this.emit("childRemoved",i,this,n)}return e[0]}removeChildAt(e){const i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,Bg(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i}removeChildren(e=0,i=this.children.length){const n=e,s=i,o=s-n;let a;if(o>0&&o<=s){a=this.children.splice(n,o);for(let l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let i=0,n=this.children.length;i<n;++i){const s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(qHe),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,i=this.children.length;e<i;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){const n=i._mask.isMaskData?i._mask.maskObject:i._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,i=!1){const n=super.getLocalBounds(e);if(!i)for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s];a.visible&&a.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const i=e.renderTexture.sourceFrame;if(!(i.width>0&&i.height>0))return;let n,s;this.cullArea?(n=this.cullArea,s=this.worldTransform):this._render!==YD.prototype._render&&(n=this.getBounds(!0));const o=e.projection.transform;if(o&&(s?(s=YHe.copyFrom(s),s.prepend(o)):s=o),n&&i.intersects(n,s))this._render(e);else if(this.cullArea)return;for(let a=0,l=this.children.length;a<l;++a){const c=this.children[a],u=c.cullable;c.cullable=u||!this.cullArea,c.render(e),c.cullable=u}}render(e){var i;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(i=this.filters)!=null&&i.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,s=this.children.length;n<s;++n)this.children[n].render(e)}}renderAdvanced(e){var o,a,l;const i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let c=0;c<i.length;c++)i[c].enabled&&this._enabledFilters.push(i[c])}const s=i&&((o=this._enabledFilters)==null?void 0:o.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==as.NONE));if(s&&e.batch.flush(),i&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let c=0,u=this.children.length;c<u;++c)this.children[c].render(e)}s&&e.batch.flush(),n&&e.mask.pop(this),i&&((l=this._enabledFilters)!=null&&l.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const i=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(i)for(let s=0;s<n.length;++s)n[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e}};Ioe.defaultSortableChildren=!1;let Ii=Ioe;Ii.prototype.containerUpdateTransform=Ii.prototype.updateTransform;Object.defineProperties(Dt,{SORTABLE_CHILDREN:{get(){return Ii.defaultSortableChildren},set(r){bi("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ii.defaultSortableChildren=r}}});const W1=new ai,ZHe=new Uint16Array([0,1,2,0,2,3]);class hr extends Ii{constructor(e){super(),this._anchor=new eu(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Sn(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=di.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||At.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=ZHe,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Dt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=fd(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=fd(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const i=this.transform.worldTransform,n=i.a,s=i.b,o=i.c,a=i.d,l=i.tx,c=i.ty,u=this.vertexData,d=e.trim,p=e.orig,m=this._anchor;let g=0,y=0,_=0,x=0;if(d?(y=d.x-m._x*p.width,g=y+d.width,x=d.y-m._y*p.height,_=x+d.height):(y=-m._x*p.width,g=y+p.width,x=-m._y*p.height,_=x+p.height),u[0]=n*y+o*x+l,u[1]=a*x+s*y+c,u[2]=n*g+o*x+l,u[3]=a*x+s*g+c,u[4]=n*g+o*_+l,u[5]=a*_+s*g+c,u[6]=n*y+o*_+l,u[7]=a*_+s*y+c,this._roundPixels){const O=Dt.RESOLUTION;for(let S=0;S<u.length;++S)u[S]=Math.round(u[S]*O)/O}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,i=this.vertexTrimmedData,n=e.orig,s=this._anchor,o=this.transform.worldTransform,a=o.a,l=o.b,c=o.c,u=o.d,d=o.tx,p=o.ty,m=-s._x*n.width,g=m+n.width,y=-s._y*n.height,_=y+n.height;if(i[0]=a*m+c*y+d,i[1]=u*y+l*m+p,i[2]=a*g+c*y+d,i[3]=u*y+l*g+p,i[4]=a*g+c*_+d,i[5]=u*_+l*g+p,i[6]=a*m+c*_+d,i[7]=u*_+l*m+p,this._roundPixels){const x=Dt.RESOLUTION;for(let O=0;O<i.length;++O)i[O]=Math.round(i[O]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,i=this._texture.orig;!e||e.width===i.width&&e.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new uO),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ri),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,W1);const i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x;let o=0;return W1.x>=s&&W1.x<s+i&&(o=-n*this.anchor.y,W1.y>=o&&W1.y<o+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(e,i){const n=e instanceof At?e:At.from(e,i);return new hr(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const i=fd(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const i=fd(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||At.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Roe=new ir;fr.prototype._cacheAsBitmap=!1;fr.prototype._cacheData=null;fr.prototype._cacheAsBitmapResolution=null;fr.prototype._cacheAsBitmapMultisample=null;class KHe{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(fr.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new KHe),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});fr.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};fr.prototype._initCachedDisplayObject=function(r){var m,g;if((m=this._cacheData)!=null&&m.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const i=this.getLocalBounds(new Ri,!0);if((g=this.filters)!=null&&g.length){const y=this.filters[0].padding;i.pad(y)}const n=this.cacheAsBitmapResolution||r.resolution;i.ceil(n),i.width=Math.max(i.width,1/n),i.height=Math.max(i.height,1/n);const s=r.renderTexture.current,o=r.renderTexture.sourceFrame.clone(),a=r.renderTexture.destinationFrame.clone(),l=r.projection.transform,c=Kp.create({width:i.width,height:i.height,resolution:n,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${Dp()}`;this._cacheData.textureCacheId=u,ki.addToCache(c.baseTexture,u),At.addToCache(c,u);const d=this.transform.localTransform.copyTo(Roe).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:c,clear:!0,transform:d,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=l,r.renderTexture.bind(s,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const p=new hr(c);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(i.x/i.width),p.anchor.y=-(i.y/i.height),p.alpha=e,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)};fr.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};fr.prototype._initCachedDisplayObjectCanvas=function(r){var d;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.getLocalBounds(new Ri,!0),i=this.alpha;this.alpha=1;const n=r.canvasContext.activeContext,s=r._projTransform,o=this.cacheAsBitmapResolution||r.resolution;e.ceil(o),e.width=Math.max(e.width,1/o),e.height=Math.max(e.height,1/o);const a=Kp.create({width:e.width,height:e.height,resolution:o}),l=`cacheAsBitmap_${Dp()}`;this._cacheData.textureCacheId=l,ki.addToCache(a.baseTexture,l),At.addToCache(a,l);const c=Roe;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:a,clear:!0,transform:c,skipUpdateTransform:!1}),r.canvasContext.activeContext=n,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const u=new hr(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};fr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};fr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};fr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ki.removeFromCache(this._cacheData.textureCacheId),At.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};fr.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};fr.prototype.name=null;Ii.prototype.getChildByName=function(r,e){for(let i=0,n=this.children.length;i<n;i++)if(this.children[i].name===r)return this.children[i];if(e)for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i];if(!s.getChildByName)continue;const o=s.getChildByName(r,!0);if(o)return o}return null};fr.prototype.getGlobalPosition=function(r=new ai,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var JHe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class Boe extends bo{constructor(e=1){super(Toe,JHe,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const eQe={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},tQe=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function iQe(r){const e=eQe[r],i=e.length;let n=tQe,s="";const o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let a;for(let l=0;l<r;l++){let c=o.replace("%index%",l.toString());a=l,l>=i&&(a=r-l-1),c=c.replace("%value%",e[a].toString()),s+=c,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",r.toString()),n}const nQe=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function rQe(r,e){const i=Math.ceil(r/2);let n=nQe,s="",o;e?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let a=0;a<r;a++){let l=o.replace("%index%",a.toString());l=l.replace("%sampleIndex%",`${a-(i-1)}.0`),s+=l,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",r.toString()),n}class cM extends bo{constructor(e,i=8,n=4,s=bo.defaultResolution,o=5){const a=rQe(o,e),l=iQe(o);super(a,l),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=n,this.blur=i}apply(e,i,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/i.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,i,n,s);else{const o=e.getFilterTexture(),a=e.renderer;let l=i,c=o;this.state.blend=!1,e.applyFilter(this,l,c,jh.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(l,jh.BLIT),this.uniforms.uSampler=c;const d=c;c=l,l=d,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,c,n,s),e.returnFilterTexture(o)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class Doe extends bo{constructor(e=8,i=4,n=bo.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new cM(!0,e,i,n,s),this.blurYFilter=new cM(!1,e,i,n,s),this.resolution=n,this.quality=i,this.blur=e,this.repeatEdgePixels=!1}apply(e,i,n,s){const o=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(o&&a){const l=e.getFilterTexture();this.blurXFilter.apply(e,i,l,jh.CLEAR),this.blurYFilter.apply(e,l,n,s),e.returnFilterTexture(l)}else a?this.blurYFilter.apply(e,i,n,s):this.blurXFilter.apply(e,i,n,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var sQe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class uM extends bo{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(eF,sQe,e),this.alpha=1}_loadMatrix(e,i=!1){let n=e;i&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,i,n){return e[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],e[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],e[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],e[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],e[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],e[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],e[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],e[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],e[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],e[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],e[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],e[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],e[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],e[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],e[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],e[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],e[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],e[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],e[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],e[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],e}_colorMatrix(e){const i=new Float32Array(e);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(e,i){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)}tint(e,i){const[n,s,o]=Sn.shared.setValue(e).toArray(),a=[n,0,0,0,0,0,s,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(a,i)}greyscale(e,i){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)}blackAndWhite(e){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,e)}hue(e,i){e=(e||0)/180*Math.PI;const n=Math.cos(e),s=Math.sin(e),o=Math.sqrt,a=1/3,l=o(a),c=n+(1-n)*a,u=a*(1-n)-l*s,d=a*(1-n)+l*s,p=a*(1-n)+l*s,m=n+a*(1-n),g=a*(1-n)-l*s,y=a*(1-n)-l*s,_=a*(1-n)+l*s,x=n+a*(1-n),O=[c,u,d,0,0,p,m,g,0,0,y,_,x,0,0,0,0,0,1,0];this._loadMatrix(O,i)}contrast(e,i){const n=(e||0)+1,s=-.5*(n-1),o=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(o,i)}saturate(e=0,i){const n=e*2/3+1,s=(n-1)*-.5,o=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(o,i)}desaturate(){this.saturate(-1)}negative(e){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,e)}sepia(e){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,e)}technicolor(e){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,e)}polaroid(e){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,e)}toBGR(e){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,e)}kodachrome(e){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,e)}browni(e){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,e)}vintage(e){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,e)}colorTone(e,i,n,s,o){e=e||.2,i=i||.15,n=n||16770432,s=s||3375104;const a=Sn.shared,[l,c,u]=a.setValue(n).toArray(),[d,p,m]=a.setValue(s).toArray(),g=[.3,.59,.11,0,0,l,c,u,e,0,d,p,m,i,0,l-d,c-p,u-m,0,0];this._loadMatrix(g,o)}night(e,i){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)}predator(e,i){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,i)}lsd(e){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}uM.prototype.grayscale=uM.prototype.greyscale;var oQe=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,aQe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class Loe extends bo{constructor(e,i){const n=new ir;e.renderable=!1,super(aQe,oQe,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,i==null&&(i=20),this.scale=new ai(i,i)}apply(e,i,n,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const o=this.maskSprite.worldTransform,a=Math.sqrt(o.a*o.a+o.b*o.b),l=Math.sqrt(o.c*o.c+o.d*o.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=o.a/a,this.uniforms.rotation[1]=o.b/a,this.uniforms.rotation[2]=o.c/l,this.uniforms.rotation[3]=o.d/l),e.applyFilter(this,i,n,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var lQe=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,hQe=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class Noe extends bo{constructor(){super(hQe,lQe)}}var cQe=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class Voe extends bo{constructor(e=.5,i=Math.random()){super(eF,cQe,{uNoise:0,uSeed:0}),this.noise=e,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const qD={AlphaFilter:Boe,BlurFilter:Doe,BlurFilterPass:cM,ColorMatrixFilter:uM,DisplacementFilter:Loe,FXAAFilter:Noe,NoiseFilter:Voe};Object.entries(qD).forEach(([r,e])=>{Object.defineProperty(qD,r,{get(){return bi("7.1.0",`filters.${r} has moved to ${r}`),e}})});class uQe{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Rr.system.add(this.tickerUpdate,this,Ld.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Rr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Jf=new uQe;class F_{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=F_.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ai,this.page=new ai,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,i,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,i,n,s,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class dO extends F_{constructor(){super(...arguments),this.client=new ai,this.movement=new ai,this.offset=new ai,this.global=new ai,this.screen=new ai}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,i,n){return e.worldTransform.applyInverse(n||this.global,i)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,i,n,s,o,a,l,c,u,d,p,m,g,y,_){throw new Error("Method not implemented.")}}class Ul extends dO{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Lg extends dO{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Lg.DOM_DELTA_PIXEL=0,Lg.DOM_DELTA_LINE=1,Lg.DOM_DELTA_PAGE=2;const dQe=2048,fQe=new ai,xB=new ai;class Foe{constructor(e){this.dispatch=new N_,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,i){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:i,priority:0}),this.mappingTable[e].sort((n,s)=>n.priority-s.priority)}dispatchEvent(e,i){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,i),this.dispatch.emit(i||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const i=this.mappingTable[e.type];if(i)for(let n=0,s=i.length;n<s;n++)i[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,i){Jf.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[n](this.rootTarget,this.rootTarget.eventMode,fQe.set(e,i),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,i){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,o=n.length-1;s<o;s++)if(e.currentTarget=n[s],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,i),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=n.length-2;s>=0;s--)if(e.currentTarget=n[s],this.notifyTarget(e,i),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,i,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(i)?i:[i];for(let o=n.length-1;o>=0;o--)s.forEach(a=>{e.currentTarget=n[o],this.notifyTarget(e,a)})}propagationPath(e){const i=[e];for(let n=0;n<dQe&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(e.parent),e=e.parent}return i.reverse(),i}hitTestMoveRecursive(e,i,n,s,o,a=!1){let l=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||i==="dynamic")&&(Jf.pauseUpdate=!1),e.interactiveChildren&&e.children){const d=e.children;for(let p=d.length-1;p>=0;p--){const m=d[p],g=this.hitTestMoveRecursive(m,this._isInteractive(i)?i:m.eventMode,n,s,o,a||o(e,n));if(g){if(g.length>0&&!g[g.length-1].parent)continue;const y=e.isInteractive();(g.length>0||y)&&(y&&this._allInteractiveElements.push(e),g.push(e)),this._hitElements.length===0&&(this._hitElements=g),l=!0}}}const c=this._isInteractive(i),u=e.isInteractive();return c&&u&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:l?this._hitElements:c&&!o(e,n)&&s(e,n)?u?[e]:[]:null}hitTestRecursive(e,i,n,s,o){if(this._interactivePrune(e)||o(e,n))return null;if((e.eventMode==="dynamic"||i==="dynamic")&&(Jf.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let u=c.length-1;u>=0;u--){const d=c[u],p=this.hitTestRecursive(d,this._isInteractive(i)?i:d.eventMode,n,s,o);if(p){if(p.length>0&&!p[p.length-1].parent)continue;const m=e.isInteractive();return(p.length>0||m)&&p.push(e),p}}}const a=this._isInteractive(i),l=e.isInteractive();return a&&s(e,n)?l?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,i){var n;if(e.hitArea&&(e.worldTransform.applyInverse(i,xB),!e.hitArea.contains(xB.x,xB.y)))return!0;if(e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;if(s&&!((n=s.containsPoint)!=null&&n.call(s,i)))return!0}return!1}hitTestFn(e,i){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(i):!1}notifyTarget(e,i){var o,a;i=i??e.type;const n=`on${i}`;(a=(o=e.currentTarget)[n])==null||a.call(o,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${i}capture`:i;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,i)}mapPointerDown(e){if(!(e instanceof Ul)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const s=i.button===2;this.dispatchEvent(i,s?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(e){var c,u;if(!(e instanceof Ul)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=i.pointerType==="mouse"||i.pointerType==="pen",s=this.trackingData(e.pointerId),o=this.findMountedTarget(s.overTargets);if(((c=s.overTargets)==null?void 0:c.length)>0&&o!==i.target){const d=e.type==="mousemove"?"mouseout":"pointerout",p=this.createPointerEvent(e,d,o);if(this.dispatchEvent(p,"pointerout"),n&&this.dispatchEvent(p,"mouseout"),!i.composedPath().includes(o)){const m=this.createPointerEvent(e,"pointerleave",o);for(m.eventPhase=m.AT_TARGET;m.target&&!i.composedPath().includes(m.target);)m.currentTarget=m.target,this.notifyTarget(m),n&&this.notifyTarget(m,"mouseleave"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(p)}if(o!==i.target){const d=e.type==="mousemove"?"mouseover":"pointerover",p=this.clonePointerEvent(i,d);this.dispatchEvent(p,"pointerover"),n&&this.dispatchEvent(p,"mouseover");let m=o==null?void 0:o.parent;for(;m&&m!==this.rootTarget.parent&&m!==i.target;)m=m.parent;if(!m||m===this.rootTarget.parent){const g=this.clonePointerEvent(i,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==o&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),n&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(p)}const a=[],l=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(i,"pointermove"),l&&a.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),l&&a.push("globaltouchmove")),n&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),l&&a.push("globalmousemove"),this.cursor=(u=i.target)==null?void 0:u.cursor),a.length>0&&this.all(i,a),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(e){var a;if(!(e instanceof Ul)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId),n=this.createPointerEvent(e),s=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),s&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(a=n.target)==null?void 0:a.cursor);const o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;i.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof Ul)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId);if(i.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(i.overTargets),o=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(o),n&&this.dispatchEvent(o,"mouseout");const a=this.createPointerEvent(e,"pointerleave",s);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;i.overTargets=null,this.freeEvent(o),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Ul)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.dispatchEvent(n,l?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),o=this.findMountedTarget(s.pressTargetsByButton[e.button]);let a=o;if(o&&!n.composedPath().includes(o)){let l=o;for(;l&&!n.composedPath().includes(l);){if(n.currentTarget=l,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const c=n.button===2;this.notifyTarget(n,c?"rightupoutside":"mouseupoutside")}l=l.parent}delete s.pressTargetsByButton[e.button],a=l}if(a){const l=this.clonePointerEvent(n,"click");l.target=a,l.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:l.target,timeStamp:i});const c=s.clicksByButton[e.button];if(c.target===l.target&&i-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=l.target,c.timeStamp=i,l.detail=c.clickCount,l.pointerType==="mouse"){const u=l.button===2;this.dispatchEvent(l,u?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof Ul)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(e.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(n){let o=n;for(;o;)s.currentTarget=o,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete i.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof Lg)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(e);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(e){if(!e)return null;let i=e[0];for(let n=1;n<e.length&&e[n].parent===i;n++)i=e[n];return i}createPointerEvent(e,i,n){const s=this.allocateEvent(Ul);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=n??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof i=="string"&&(s.type=i),s}createWheelEvent(e){const i=this.allocateEvent(Lg);return this.copyWheelData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(e,i){const n=this.allocateEvent(Ul);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=i??n.type,n}copyWheelData(e,i){i.deltaMode=e.deltaMode,i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ}copyPointerData(e,i){e instanceof Ul&&i instanceof Ul&&(i.pointerId=e.pointerId,i.width=e.width,i.height=e.height,i.isPrimary=e.isPrimary,i.pointerType=e.pointerType,i.pressure=e.pressure,i.tangentialPressure=e.tangentialPressure,i.tiltX=e.tiltX,i.tiltY=e.tiltY,i.twist=e.twist)}copyMouseData(e,i){e instanceof dO&&i instanceof dO&&(i.altKey=e.altKey,i.button=e.button,i.buttons=e.buttons,i.client.copyFrom(e.client),i.ctrlKey=e.ctrlKey,i.metaKey=e.metaKey,i.movement.copyFrom(e.movement),i.screen.copyFrom(e.screen),i.shiftKey=e.shiftKey,i.global.copyFrom(e.global))}copyData(e,i){i.isTrusted=e.isTrusted,i.srcElement=e.srcElement,i.timeStamp=performance.now(),i.type=e.type,i.detail=e.detail,i.view=e.view,i.which=e.which,i.layer.copyFrom(e.layer),i.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const i=this.eventPool.get(e).pop()||new e(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=e.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(e)}notifyListeners(e,i){const n=e.currentTarget._events[i];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(i,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let s=0,o=n.length;s<o&&!e.propagationImmediatelyStopped;s++)n[s].once&&e.currentTarget.removeListener(i,n[s].fn,void 0,!0),n[s].fn.call(n[s].context,e)}}const pQe=1,mQe={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ZD=class KD{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Foe(null),Jf.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ul(null),this.rootWheelEvent=new Lg(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...KD.defaultEventFeatures},{set:(i,n,s)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),i[n]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:i,resolution:n}=this.renderer;this.setTargetElement(i),this.resolution=n,KD._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let i=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(i=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":i&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":i&&Object.assign(this.domElement.style,n);break}else i&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this.normalizeToPointerData(e);this.autoPreventDefault&&i[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,s=i.length;n<s;n++){const o=i[n],a=this.bootstrapEvent(this.rootPointerEvent,o);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Jf.pointerMoved();const i=this.normalizeToPointerData(e);for(let n=0,s=i.length;n<s;n++){const o=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=e.target;e.composedPath&&e.composedPath().length>0&&(i=e.composedPath()[0]);const n=i!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let o=0,a=s.length;o<a;o++){const l=this.bootstrapEvent(this.rootPointerEvent,s[o]);l.type+=n,this.rootBoundary.mapEvent(l)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this.normalizeToPointerData(e);for(let n=0,s=i.length;n<s;n++){const o=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const i=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(i)}setTargetElement(e){this.removeEvents(),this.domElement=e,Jf.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Jf.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Jf.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,i,n){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;e.x=(i-s.left)*(this.domElement.width/s.width)*o,e.y=(n-s.top)*(this.domElement.height/s.height)*o}normalizeToPointerData(e){const i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,s=e.changedTouches.length;n<s;n++){const o=e.changedTouches[n];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=e.type,i.push(o)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=pQe),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,i.push(n)}else i.push(e);return i}normalizeWheelEvent(e){const i=this.rootWheelEvent;return this.transferMouseData(i,e),i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ,i.deltaMode=e.deltaMode,this.mapPositionToPoint(i.screen,e.clientX,e.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=e,i.type=e.type,i}bootstrapEvent(e,i){return e.originalEvent=null,e.nativeEvent=i,e.pointerId=i.pointerId,e.width=i.width,e.height=i.height,e.isPrimary=i.isPrimary,e.pointerType=i.pointerType,e.pressure=i.pressure,e.tangentialPressure=i.tangentialPressure,e.tiltX=i.tiltX,e.tiltY=i.tiltY,e.twist=i.twist,this.transferMouseData(e,i),this.mapPositionToPoint(e.screen,i.clientX,i.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=mQe[e.type]||e.type),e}transferMouseData(e,i){e.isTrusted=i.isTrusted,e.srcElement=i.srcElement,e.timeStamp=performance.now(),e.type=i.type,e.altKey=i.altKey,e.button=i.button,e.buttons=i.buttons,e.client.x=i.clientX,e.client.y=i.clientY,e.ctrlKey=i.ctrlKey,e.metaKey=i.metaKey,e.movement.x=i.movementX,e.movement.y=i.movementY,e.page.x=i.pageX,e.page.y=i.pageY,e.relatedTarget=null,e.shiftKey=i.shiftKey}};ZD.extension={name:"events",type:[Ot.RendererSystem,Ot.CanvasRendererSystem]},ZD.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let dM=ZD;Qt.add(dM);function KQ(r){return r==="dynamic"||r==="static"}const $oe={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??KQ(dM.defaultEventMode)},set interactive(r){bi("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??dM.defaultEventMode},set eventMode(r){this._internalInteractive=KQ(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,s=typeof i=="object"?i.signal:void 0,o=typeof i=="object"?i.once===!0:!1,a=typeof e=="function"?void 0:e;r=n?`${r}capture`:r;const l=typeof e=="function"?e:e.handleEvent,c=this;s&&s.addEventListener("abort",()=>{c.off(r,l,a)}),o?c.once(r,l,a):c.on(r,l,a)},removeEventListener(r,e,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,s=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,s)},dispatchEvent(r){if(!(r instanceof F_))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};fr.mixin($oe);const Uoe={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};fr.mixin(Uoe);const gQe=9,gT=100,vQe=0,yQe=0,JQ=2,ej=1,_Qe=-1e3,xQe=-1e3,bQe=2;class oF{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ec.tablet||ec.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${gT}px`,i.style.height=`${gT}px`,i.style.position="absolute",i.style.top=`${vQe}px`,i.style.left=`${yQe}px`,i.style.zIndex=JQ.toString(),this.div=i,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${ej}px`,e.style.height=`${ej}px`,e.style.position="absolute",e.style.top=`${_Qe}px`,e.style.left=`${xQe}px`,e.style.zIndex=bQe.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const i=e.children;if(i)for(let n=0;n<i.length;n++)this.updateAccessibleObjects(i[n])}update(){const e=performance.now();if(ec.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:n,width:s,height:o}=this.renderer.view.getBoundingClientRect(),{width:a,height:l,resolution:c}=this.renderer,u=s/a*c,d=o/l*c;let p=this.div;p.style.left=`${i}px`,p.style.top=`${n}px`,p.style.width=`${a}px`,p.style.height=`${l}px`;for(let m=0;m<this.children.length;m++){const g=this.children[m];if(g.renderId!==this.renderId)g._accessibleActive=!1,Bg(this.children,m,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,m--;else{p=g._accessibleDiv;let y=g.hitArea;const _=g.worldTransform;g.hitArea?(p.style.left=`${(_.tx+y.x*_.a)*u}px`,p.style.top=`${(_.ty+y.y*_.d)*d}px`,p.style.width=`${y.width*_.a*u}px`,p.style.height=`${y.height*_.d*d}px`):(y=g.getBounds(),this.capHitArea(y),p.style.left=`${y.x*u}px`,p.style.top=`${y.y*d}px`,p.style.width=`${y.width*u}px`,p.style.height=`${y.height*d}px`,p.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(p.title=g.accessibleTitle),p.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&p.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==p.title||g.tabIndex!==p.tabIndex)&&(p.title=g.accessibleTitle,p.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:i,height:n}=this.renderer;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${gT}px`,i.style.height=`${gT}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=JQ.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=e.accessiblePointerEvents,i.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?i.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(i.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&i.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(i),e._accessibleActive=!0,e._accessibleDiv=i,i.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,i){const{displayObject:n}=e.target,s=this.renderer.events.rootBoundary,o=Object.assign(new F_(s),{target:n});s.rootTarget=this.renderer.lastObjectRendered,i.forEach(a=>s.dispatchEvent(o,a))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===gQe&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}oF.extension={name:"accessibility",type:[Ot.RendererPlugin,Ot.CanvasRendererPlugin]};Qt.add(oF);const zoe=class JD{constructor(e){this.stage=new Ii,e=Object.assign({forceCanvas:!1},e),this.renderer=Coe(e),JD._plugins.forEach(i=>{i.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,i){const n=JD._plugins.slice(0);n.reverse(),n.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null}};zoe._plugins=[];let Jp=zoe;Qt.handleByList(Ot.Application,Jp._plugins);class aF{static init(e){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,n;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:o}=this._resizeTo;i=s,n=o}this.renderer.resize(i,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}aF.extension=Ot.Application;Qt.add(aF);const tj={loader:Ot.LoadParser,resolver:Ot.ResolveParser,cache:Ot.CacheParser,detection:Ot.DetectionParser};Qt.handle(Ot.Asset,r=>{const e=r.ref;Object.entries(tj).filter(([i])=>!!e[i]).forEach(([i,n])=>Qt.add(Object.assign(e[i],{extension:e[i].extension??n})))},r=>{const e=r.ref;Object.keys(tj).filter(i=>!!e[i]).forEach(i=>Qt.remove(e[i]))});class wQe{constructor(e,i=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(e){e.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<i;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function x0(r,e){if(Array.isArray(e)){for(const i of e)if(r.startsWith(`data:${i}`))return!0;return!1}return r.startsWith(`data:${e}`)}function Hd(r,e){const i=r.split("?")[0],n=Ms.extname(i).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const th=(r,e,i=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||i?e(n):n):r),fM=(r,e)=>{const i=e.split("?")[1];return i&&(r+=`?${i}`),r};function Xoe(r,e,i,n,s){const o=e[i];for(let a=0;a<o.length;a++){const l=o[a];i<e.length-1?Xoe(r.replace(n[i],l),e,i+1,n,s):s.push(r.replace(n[i],l))}}function Woe(r){const e=/\{(.*?)\}/g,i=r.match(e),n=[];if(i){const s=[];i.forEach(o=>{const a=o.substring(1,o.length-1).split(",");s.push(a)}),Xoe(r,s,0,i,n)}else n.push(r);return n}const fO=r=>!Array.isArray(r);class OQe{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const i=this._cache.get(e);return i||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),i}set(e,i){const n=th(e);let s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.test(i)){s=c.getCacheableAssets(n,i);break}}s||(s={},n.forEach(l=>{s[l]=i}));const o=Object.keys(s),a={cacheKeys:o,keys:n};if(n.forEach(l=>{this._cacheMap.set(l,a)}),o.forEach(l=>{this._cache.has(l)&&this._cache.get(l)!==i&&console.warn("[Cache] already has key:",l),this._cache.set(l,s[l])}),i instanceof At){const l=i;n.forEach(c=>{l.baseTexture!==At.EMPTY.baseTexture&&ki.addToCache(l.baseTexture,c),At.addToCache(l,c)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const i=this._cacheMap.get(e);i.cacheKeys.forEach(n=>{this._cache.delete(n)}),i.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const ep=new OQe;class SQe{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,i,n)=>(this._parsersValidated=!1,e[i]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,i){const n={promise:null,parser:null};return n.promise=(async()=>{var a,l;let s=null,o=null;if(i.loadParser&&(o=this._parserHash[i.loadParser],o||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${e}`)),!o){for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.load&&((a=u.test)!=null&&a.call(u,e,i,this))){o=u;break}}if(!o)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await o.load(e,i,this),n.parser=o;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];u.parse&&u.parse&&await((l=u.testParse)==null?void 0:l.call(u,s,i,this))&&(s=await u.parse(s,i,this)||s,n.parser=u)}return s})(),n}async load(e,i){this._parsersValidated||this._validateParsers();let n=0;const s={},o=fO(e),a=th(e,u=>({alias:[u],src:u})),l=a.length,c=a.map(async u=>{const d=Ms.toAbsolute(u.src);if(!s[u.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,u)),s[u.src]=await this.promiseCache[d].promise,i&&i(++n/l)}catch(p){throw delete this.promiseCache[d],delete s[u.src],new Error(`[Loader.load] Failed to load ${d}.
${p}`)}});return await Promise.all(c),o?s[a[0].src]:s}async unload(e){const i=th(e,n=>({alias:[n],src:n})).map(async n=>{var a,l;const s=Ms.toAbsolute(n.src),o=this.promiseCache[s];if(o){const c=await o.promise;delete this.promiseCache[s],(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,c,n,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,i)=>(e[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...e,[i.name]:i}),{})}}var Oh=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Oh||{});const CQe=".json",TQe="application/json",Goe={extension:{type:Ot.LoadParser,priority:Oh.Low},name:"loadJson",test(r){return x0(r,TQe)||Hd(r,CQe)},async load(r){return await(await Dt.ADAPTER.fetch(r)).json()}};Qt.add(Goe);const AQe=".txt",EQe="text/plain",Hoe={name:"loadTxt",extension:{type:Ot.LoadParser,priority:Oh.Low},test(r){return x0(r,EQe)||Hd(r,AQe)},async load(r){return await(await Dt.ADAPTER.fetch(r)).text()}};Qt.add(Hoe);const MQe=["normal","bold","100","200","300","400","500","600","700","800","900"],PQe=[".ttf",".otf",".woff",".woff2"],kQe=["font/ttf","font/otf","font/woff","font/woff2"],IQe=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Qoe(r){const e=Ms.extname(r),i=Ms.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let n=i.length>0;for(const o of i)if(!o.match(IQe)){n=!1;break}let s=i.join(" ");return n||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const RQe=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function BQe(r){return RQe.test(r)?r:encodeURI(r)}const joe={extension:{type:Ot.LoadParser,priority:Oh.Low},name:"loadWebFont",test(r){return x0(r,kQe)||Hd(r,PQe)},async load(r,e){var n,s,o;const i=Dt.ADAPTER.getFontFaceSet();if(i){const a=[],l=((n=e.data)==null?void 0:n.family)??Qoe(r),c=((o=(s=e.data)==null?void 0:s.weights)==null?void 0:o.filter(d=>MQe.includes(d)))??["normal"],u=e.data??{};for(let d=0;d<c.length;d++){const p=c[d],m=new FontFace(l,`url(${BQe(r)})`,{...u,weight:p});await m.load(),i.add(m),a.push(m)}return a.length===1?a[0]:a}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>Dt.ADAPTER.getFontFaceSet().delete(e))}};Qt.add(joe);const DQe=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let ky=null,eL=class{constructor(){ky||(ky=URL.createObjectURL(new Blob([DQe],{type:"application/javascript"}))),this.worker=new Worker(ky)}};eL.revokeObjectURL=function(){ky&&(URL.revokeObjectURL(ky),ky=null)};const LQe=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Iy=null;class Yoe{constructor(){Iy||(Iy=URL.createObjectURL(new Blob([LQe],{type:"application/javascript"}))),this.worker=new Worker(Iy)}}Yoe.revokeObjectURL=function(){Iy&&(URL.revokeObjectURL(Iy),Iy=null)};let ij=0,bB;class NQe{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:i}=new eL;i.addEventListener("message",n=>{i.terminate(),eL.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){bB===void 0&&(bB=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<bB&&(this._createdWorkers++,e=new Yoe().worker,e.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,i){await this._initWorkers();const n=new Promise((s,o)=>{this.queue.push({id:e,arguments:i,resolve:s,reject:o})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const i=this.queue.pop(),n=i.id;this.resolveHash[ij]={resolve:i.resolve,reject:i.reject},e.postMessage({data:i.arguments,uuid:ij++,id:n})}}const nj=new NQe;function $_(r,e,i){r.resource.internal=!0;const n=new At(r),s=()=>{delete e.promiseCache[i],ep.has(i)&&ep.remove(i)};return n.baseTexture.once("destroyed",()=>{i in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),n.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),n}const VQe=[".jpeg",".jpg",".png",".webp",".avif"],FQe=["image/jpeg","image/png","image/webp","image/avif"];async function qoe(r){const e=await Dt.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const i=await e.blob();return await createImageBitmap(i)}const vS={name:"loadTextures",extension:{type:Ot.LoadParser,priority:Oh.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return x0(r,FQe)||Hd(r,VQe)},async load(r,e,i){var l;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;n?this.config.preferWorkers&&await nj.isImageBitmapSupported()?s=await nj.loadImageBitmap(r):s=await qoe(r):s=await new Promise((c,u)=>{const d=new Image;d.crossOrigin=this.config.crossOrigin,d.src=r,d.complete?c(d):(d.onload=()=>c(d),d.onerror=p=>u(p))});const o={...e.data};o.resolution??(o.resolution=fu(r)),n&&((l=o.resourceOptions)==null?void 0:l.ownsImageBitmap)===void 0&&(o.resourceOptions={...o.resourceOptions},o.resourceOptions.ownsImageBitmap=!0);const a=new ki(s,o);return a.resource.src=r,$_(a,i,r)},unload(r){r.destroy(!0)}};Qt.add(vS);const $Qe=".svg",UQe="image/svg+xml",Zoe={extension:{type:Ot.LoadParser,priority:Oh.High},name:"loadSVG",test(r){return x0(r,UQe)||Hd(r,$Qe)},async testParse(r){return hM.test(r)},async parse(r,e,i){var o;const n=new hM(r,(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions);await n.load();const s=new ki(n,{resolution:fu(r),...e==null?void 0:e.data});return s.resource.src=e.src,$_(s,i,e.src)},async load(r,e){return(await Dt.ADAPTER.fetch(r)).text()},unload:vS.unload};Qt.add(Zoe);const zQe=[".mp4",".m4v",".webm",".ogv"],XQe=["video/mp4","video/webm","video/ogg"],Koe={name:"loadVideo",extension:{type:Ot.LoadParser,priority:Oh.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return x0(r,XQe)||Hd(r,zQe)},async load(r,e,i){var a;let n;const s=await(await Dt.ADAPTER.fetch(r)).blob(),o=URL.createObjectURL(s);try{const l={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(a=e==null?void 0:e.data)==null?void 0:a.resourceOptions,autoLoad:!0},c=new sF(o,l);await c.load();const u=new ki(c,{alphaMode:await Dse(),resolution:fu(r),...e==null?void 0:e.data});u.resource.src=r,n=$_(u,i,r),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(l){throw URL.revokeObjectURL(o),l}return n},unload(r){r.destroy(!0)}};Qt.add(Koe);class WQe{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,i)=>`${e}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(e,i)=>i.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const i=e;this._defaultSearchParams=Object.keys(i).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(i[n])}`).join("&")}}getAlias(e){const{alias:i,name:n,src:s,srcs:o}=e;return th(i||n||s||o,a=>typeof a=="string"?a:Array.isArray(a)?a.map(l=>(l==null?void 0:l.src)??(l==null?void 0:l.srcs)??l):a!=null&&a.src||a!=null&&a.srcs?a.src??a.srcs:a,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(e,i){const n=[];Array.isArray(i)?i.forEach(s=>{const o=s.src??s.srcs,a=s.alias??s.name;let l;if(typeof a=="string"){const c=this._createBundleAssetId(e,a);n.push(c),l=[a,c]}else{const c=a.map(u=>this._createBundleAssetId(e,u));n.push(...c),l=[...a,...c]}this.add({...s,alias:l,src:o})}):Object.keys(i).forEach(s=>{const o=[s,this._createBundleAssetId(e,s)];if(typeof i[s]=="string")this.add({alias:o,src:i[s]});else if(Array.isArray(i[s]))this.add({alias:o,src:i[s]});else{const a=i[s],l=a.src??a.srcs;this.add({...a,alias:o,src:Array.isArray(l)?l:[l]})}n.push(...o)}),this._bundles[e]=n}add(e,i,n,s,o){const a=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(bi("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),a.push({alias:e,src:i,data:n,format:s,loadParser:o})):Array.isArray(e)?a.push(...e):a.push(e);let l;l=c=>{this.hasKey(c)&&console.warn(`[Resolver] already has key: ${c} overwriting`)},th(a).forEach(c=>{const{src:u,srcs:d}=c;let{data:p,format:m,loadParser:g}=c;const y=th(u||d).map(O=>typeof O=="string"?Woe(O):Array.isArray(O)?O:[O]),_=this.getAlias(c);Array.isArray(_)?_.forEach(l):l(_);const x=[];y.forEach(O=>{O.forEach(S=>{let w={};if(typeof S!="object"){w.src=S;for(let C=0;C<this._parsers.length;C++){const M=this._parsers[C];if(M.test(S)){w=M.parse(S);break}}}else p=S.data??p,m=S.format??m,g=S.loadParser??g,w={...w,...S};if(!_)throw new Error(`[Resolver] alias is undefined for this asset: ${w.src}`);w=this.buildResolvedAsset(w,{aliases:_,data:p,format:m,loadParser:g}),x.push(w)})}),_.forEach(O=>{this._assetMap[O]=x})})}resolveBundle(e){const i=fO(e);e=th(e);const n={};return e.forEach(s=>{const o=this._bundles[s];if(o){const a=this.resolve(o),l={};for(const c in a){const u=a[c];l[this._extractAssetIdFromBundle(s,c)]=u}n[s]=l}}),i?n[e[0]]:n}resolveUrl(e){const i=this.resolve(e);if(typeof e!="string"){const n={};for(const s in i)n[s]=i[s].src;return n}return i.src}resolve(e){const i=fO(e);e=th(e);const n={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let o=this._assetMap[s];const a=o[0],l=this._getPreferredOrder(o);l==null||l.priority.forEach(c=>{l.params[c].forEach(u=>{const d=o.filter(p=>p[c]?p[c]===u:!1);d.length&&(o=d)})}),this._resolverHash[s]=o[0]??a}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});n[s]=this._resolverHash[s]}),i?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let i=0;i<e.length;i++){const n=e[0],s=this._preferredOrder.find(o=>o.params.format.includes(n.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const i=/\?/.test(e)?"&":"?";return`${e}${i}${this._defaultSearchParams}`}buildResolvedAsset(e,i){const{aliases:n,data:s,loadParser:o,format:a}=i;return(this._basePath||this._rootPath)&&(e.src=Ms.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=o??e.loadParser,e.format=a??e.format??Ms.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class Joe{constructor(){this._detections=[],this._initialized=!1,this.resolver=new WQe,this.loader=new SQe,this.cache=ep,this._backgroundLoader=new wQe(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let l=e.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const i=((o=e.texturePreference)==null?void 0:o.resolution)??1,n=typeof i=="number"?[i]:i,s=await this._detectFormats({preferredFormats:(a=e.texturePreference)==null?void 0:a.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,i,n,s,o){this.resolver.add(e,i,n,s,o)}async load(e,i){this._initialized||await this.init();const n=fO(e),s=th(e).map(l=>{if(typeof l!="string"){const c=this.resolver.getAlias(l);return c.some(u=>!this.resolver.hasKey(u))&&this.add(l),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),o=this.resolver.resolve(s),a=await this._mapLoadToResolve(o,i);return n?a[s[0]]:a}addBundle(e,i){this.resolver.addBundle(e,i)}async loadBundle(e,i){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const s=this.resolver.resolveBundle(e),o={},a=Object.keys(s);let l=0,c=0;const u=()=>{i==null||i(++l/c)},d=a.map(p=>{const m=s[p];return c+=Object.keys(m).length,this._mapLoadToResolve(m,u).then(g=>{o[p]=g})});return await Promise.all(d),n?o[e[0]]:o}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const i=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const i=this.resolver.resolveBundle(e);Object.values(i).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ep.get(e);const i={};for(let n=0;n<e.length;n++)i[n]=ep.get(e[n]);return i}async _mapLoadToResolve(e,i){const n=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const o=await this.loader.load(n,i);this._backgroundLoader.active=!0;const a={};return n.forEach((l,c)=>{const u=o[l.src],d=[l.src];l.alias&&d.push(...l.alias),a[s[c]]=u,ep.set(d,u)}),a}async unload(e){this._initialized||await this.init();const i=th(e).map(s=>typeof s!="string"?s.src:s),n=this.resolver.resolve(i);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=th(e);const i=this.resolver.resolveBundle(e),n=Object.keys(i).map(s=>this._unloadFromResolved(i[s]));await Promise.all(n)}async _unloadFromResolved(e){const i=Object.values(e);i.forEach(n=>{ep.remove(n.src)}),await this.loader.unload(i)}async _detectFormats(e){let i=[];e.preferredFormats&&(i=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?i=await n.add(i):e.skipDetections||(i=await n.remove(i));return i=i.filter((n,s)=>i.indexOf(n)===s),i}get detections(){return this._detections}get preferWorkers(){return vS.config.preferWorkers}set preferWorkers(e){bi("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(n=>n in e).forEach(n=>{i.config[n]=e[n]})})}}const vl=new Joe;Qt.handleByList(Ot.LoadParser,vl.loader.parsers).handleByList(Ot.ResolveParser,vl.resolver.parsers).handleByList(Ot.CacheParser,vl.cache.parsers).handleByList(Ot.DetectionParser,vl.detections);const eae={extension:Ot.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof At),getCacheableAssets:(r,e)=>{const i={};return r.forEach(n=>{e.forEach((s,o)=>{i[n+(o===0?"":o+1)]=s})}),i}};Qt.add(eae);async function tae(r){if("Image"in globalThis)return new Promise(e=>{const i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const iae={extension:{type:Ot.DetectionParser,priority:1},test:async()=>tae("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};Qt.add(iae);const nae={extension:{type:Ot.DetectionParser,priority:0},test:async()=>tae("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};Qt.add(nae);const rj=["png","jpg","jpeg"],rae={extension:{type:Ot.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...rj],remove:async r=>r.filter(e=>!rj.includes(e))};Qt.add(rae);const GQe="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function lF(r){return GQe?!1:document.createElement("video").canPlayType(r)!==""}const sae={extension:{type:Ot.DetectionParser,priority:0},test:async()=>lF("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};Qt.add(sae);const oae={extension:{type:Ot.DetectionParser,priority:0},test:async()=>lF("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};Qt.add(oae);const aae={extension:{type:Ot.DetectionParser,priority:0},test:async()=>lF("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};Qt.add(aae);const lae={extension:Ot.ResolveParser,test:vS.test,parse:r=>{var e;return{resolution:parseFloat(((e=Dt.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:Ms.extname(r).slice(1),src:r}}};Qt.add(lae);var Vs=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(Vs||{});const pO={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Dc,Qv;function sj(){Qv={bptc:Dc.getExtension("EXT_texture_compression_bptc"),astc:Dc.getExtension("WEBGL_compressed_texture_astc"),etc:Dc.getExtension("WEBGL_compressed_texture_etc"),s3tc:Dc.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Dc.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Dc.getExtension("WEBGL_compressed_texture_pvrtc")||Dc.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Dc.getExtension("WEBGL_compressed_texture_etc1"),atc:Dc.getExtension("WEBGL_compressed_texture_atc")}}const hae={extension:{type:Ot.DetectionParser,priority:2},test:async()=>{const r=Dt.ADAPTER.createCanvas().getContext("webgl");return r?(Dc=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{Qv||sj();const e=[];for(const i in Qv)Qv[i]&&e.push(i);return[...e,...r]},remove:async r=>(Qv||sj(),r.filter(e=>!(e in Qv)))};Qt.add(hae);class cae extends dS{constructor(e,i={width:1,height:1,autoLoad:!0}){let n,s;typeof e=="string"?(n=e,s=new Uint8Array):(n=null,s=e),super(s,i),this.origin=n,this.buffer=s?new rM(s):null,this._load=null,this.loaded=!1,this.origin!==null&&i.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new rM(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class yp extends cae{constructor(e,i){super(e,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=yp._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||yp._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,i,n){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:c,levelHeight:u,levelBuffer:d}=this._levelBuffers[o];s.compressedTexImage2D(s.TEXTURE_2D,l,this.format,c,u,0,d)}return!0}onBlobLoaded(){this._levelBuffers=yp._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,i,n,s,o,a,l){const c=new Array(n);let u=e.byteOffset,d=a,p=l,m=d+s-1&~(s-1),g=p+o-1&~(o-1),y=m*g*pO[i];for(let _=0;_<n;_++)c[_]={levelID:_,levelWidth:n>1?d:m,levelHeight:n>1?p:g,levelBuffer:new Uint8Array(e.buffer,u,y)},u+=y,d=d>>1||1,p=p>>1||1,m=d+s-1&~(s-1),g=p+o-1&~(o-1),y=m*g*pO[i];return c}}const wB=4,vT=124,HQe=32,oj=20,QQe=542327876,yT={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},jQe={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},_T={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},YQe=1,qQe=2,ZQe=4,KQe=64,JQe=512,eje=131072,tje=827611204,ije=861165636,nje=894720068,rje=808540228,sje=4,oje={[tje]:Vs.COMPRESSED_RGBA_S3TC_DXT1_EXT,[ije]:Vs.COMPRESSED_RGBA_S3TC_DXT3_EXT,[nje]:Vs.COMPRESSED_RGBA_S3TC_DXT5_EXT},aje={70:Vs.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Vs.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Vs.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Vs.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Vs.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Vs.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Vs.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Vs.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Vs.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Vs.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Vs.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Vs.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Vs.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function uae(r){const e=new Uint32Array(r);if(e[0]!==QQe)throw new Error("Invalid DDS file magic word");const i=new Uint32Array(r,0,vT/Uint32Array.BYTES_PER_ELEMENT),n=i[yT.HEIGHT],s=i[yT.WIDTH],o=i[yT.MIPMAP_COUNT],a=new Uint32Array(r,yT.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,HQe/Uint32Array.BYTES_PER_ELEMENT),l=a[YQe];if(l&ZQe){const c=a[jQe.FOURCC];if(c!==rje){const S=oje[c],w=wB+vT,C=new Uint8Array(r,w);return[new yp(C,{format:S,width:s,height:n,levels:o})]}const u=wB+vT,d=new Uint32Array(e.buffer,u,oj/Uint32Array.BYTES_PER_ELEMENT),p=d[_T.DXGI_FORMAT],m=d[_T.RESOURCE_DIMENSION],g=d[_T.MISC_FLAG],y=d[_T.ARRAY_SIZE],_=aje[p];if(_===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${p}`);if(g===sje)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,O=wB+vT+oj;if(y===1)x.push(new Uint8Array(r,O));else{const S=pO[_];let w=0,C=s,M=n;for(let R=0;R<o;R++){const k=Math.max(1,C+3&-4),I=Math.max(1,M+3&-4),A=k*I*S;w+=A,C=C>>>1,M=M>>>1}let P=O;for(let R=0;R<y;R++)x.push(new Uint8Array(r,P,w)),P+=w}return x.map(S=>new yp(S,{format:_,width:s,height:n,levels:o}))}throw l&KQe?new Error("DDSParser does not support uncompressed texture data."):l&JQe?new Error("DDSParser does not supported YUV uncompressed texture data."):l&eje?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&qQe?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const aj=[171,75,84,88,32,49,49,187,13,10,26,10],lje=67305985,$h={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},tL=64,iL={[ti.UNSIGNED_BYTE]:1,[ti.UNSIGNED_SHORT]:2,[ti.INT]:4,[ti.UNSIGNED_INT]:4,[ti.FLOAT]:4,[ti.HALF_FLOAT]:8},dae={[at.RGBA]:4,[at.RGB]:3,[at.RG]:2,[at.RED]:1,[at.LUMINANCE]:1,[at.LUMINANCE_ALPHA]:2,[at.ALPHA]:1},fae={[ti.UNSIGNED_SHORT_4_4_4_4]:2,[ti.UNSIGNED_SHORT_5_5_5_1]:2,[ti.UNSIGNED_SHORT_5_6_5]:2};function pae(r,e,i=!1){const n=new DataView(e);if(!hje(r,n))return null;const s=n.getUint32($h.ENDIANNESS,!0)===lje,o=n.getUint32($h.GL_TYPE,s),a=n.getUint32($h.GL_FORMAT,s),l=n.getUint32($h.GL_INTERNAL_FORMAT,s),c=n.getUint32($h.PIXEL_WIDTH,s),u=n.getUint32($h.PIXEL_HEIGHT,s)||1,d=n.getUint32($h.PIXEL_DEPTH,s)||1,p=n.getUint32($h.NUMBER_OF_ARRAY_ELEMENTS,s)||1,m=n.getUint32($h.NUMBER_OF_FACES,s),g=n.getUint32($h.NUMBER_OF_MIPMAP_LEVELS,s),y=n.getUint32($h.BYTES_OF_KEY_VALUE_DATA,s);if(u===0||d!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(p!==1)throw new Error("WebGL does not support array textures");const _=4,x=4,O=c+3&-4,S=u+3&-4,w=new Array(p);let C=c*u;o===0&&(C=O*S);let M;if(o!==0?iL[o]?M=iL[o]*dae[a]:M=fae[o]:M=pO[l],M===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const P=i?uje(n,y,s):null;let R=C*M,k=c,I=u,A=O,D=S,V=tL+y;for(let B=0;B<g;B++){const L=n.getUint32(V,s);let F=V+4;for(let $=0;$<p;$++){let z=w[$];z||(z=w[$]=new Array(g)),z[B]={levelID:B,levelWidth:g>1||o!==0?k:A,levelHeight:g>1||o!==0?I:D,levelBuffer:new Uint8Array(e,F,R)},F+=R}V+=L+4,V=V%4!==0?V+4-V%4:V,k=k>>1||1,I=I>>1||1,A=k+_-1&~(_-1),D=I+x-1&~(x-1),R=A*D*M}return o!==0?{uncompressed:w.map(B=>{let L=B[0].levelBuffer,F=!1;return o===ti.FLOAT?L=new Float32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4):o===ti.UNSIGNED_INT?(F=!0,L=new Uint32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)):o===ti.INT&&(F=!0,L=new Int32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)),{resource:new dS(L,{width:B[0].levelWidth,height:B[0].levelHeight}),type:o,format:F?cje(a):a}}),kvData:P}:{compressed:w.map(B=>new yp(null,{format:l,width:c,height:u,levels:g,levelBuffers:B})),kvData:P}}function hje(r,e){for(let i=0;i<aj.length;i++)if(e.getUint8(i)!==aj[i])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function cje(r){switch(r){case at.RGBA:return at.RGBA_INTEGER;case at.RGB:return at.RGB_INTEGER;case at.RG:return at.RG_INTEGER;case at.RED:return at.RED_INTEGER;default:return r}}function uje(r,e,i){const n=new Map;let s=0;for(;s<e;){const o=r.getUint32(tL+s,i),a=tL+s+4,l=3-(o+3)%4;if(o===0||o>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let c=0;for(;c<o&&r.getUint8(a+c)!==0;c++);if(c===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,a,c)),d=new DataView(r.buffer,a+c+1,o-c-1);n.set(u,d),s+=4+o+l}return n}const mae={extension:{type:Ot.LoadParser,priority:Oh.High},name:"loadDDS",test(r){return Hd(r,".dds")},async load(r,e,i){const n=await(await Dt.ADAPTER.fetch(r)).arrayBuffer(),s=uae(n).map(o=>{const a=new ki(o,{mipmap:uc.OFF,alphaMode:Yo.NO_PREMULTIPLIED_ALPHA,resolution:fu(r),...e.data});return $_(a,i,r)});return s.length===1?s[0]:s},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Qt.add(mae);const gae={extension:{type:Ot.LoadParser,priority:Oh.High},name:"loadKTX",test(r){return Hd(r,".ktx")},async load(r,e,i){const n=await(await Dt.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=pae(r,n),l=s??o,c={mipmap:uc.OFF,alphaMode:Yo.NO_PREMULTIPLIED_ALPHA,resolution:fu(r),...e.data},u=l.map(d=>{l===o&&Object.assign(c,{type:d.type,format:d.format});const p=d.resource??d,m=new ki(p,c);return m.ktxKeyValueData=a,$_(m,i,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Qt.add(gae);const dje=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],vae={extension:Ot.ResolveParser,test:r=>{const e=Ms.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var n,s;const e=r.split("."),i=e.pop();if(["ktx","dds"].includes(i)){const o=e.pop();if(dje.includes(o))return{resolution:parseFloat(((n=Dt.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:o,src:r}}return{resolution:parseFloat(((s=Dt.RETINA_PREFIX.exec(r))==null?void 0:s[1])??"1"),format:i,src:r}}};Qt.add(vae);const xT=new Ri,fje=4,yae=class Sb{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var i;const e=(i=this.renderer)==null?void 0:i.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,i,n,s){const o=new Image;return o.src=await this.base64(e,i,n,s),o}async base64(e,i,n,s){const o=this.canvas(e,s);if(o.toBlob!==void 0)return new Promise((a,l)=>{o.toBlob(c=>{if(!c){l(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(c)},i,n)});if(o.toDataURL!==void 0)return o.toDataURL(i,n);if(o.convertToBlob!==void 0){const a=await o.convertToBlob({type:i,quality:n});return new Promise((l,c)=>{const u=new FileReader;u.onload=()=>l(u.result),u.onerror=c,u.readAsDataURL(a)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,i){const{pixels:n,width:s,height:o,flipY:a,premultipliedAlpha:l}=this._rawPixels(e,i);a&&Sb._flipY(n,s,o),l&&Sb._unpremultiplyAlpha(n);const c=new Wse(s,o,1),u=new ImageData(new Uint8ClampedArray(n.buffer),s,o);return c.context.putImageData(u,0,0),c.canvas}pixels(e,i){const{pixels:n,width:s,height:o,flipY:a,premultipliedAlpha:l}=this._rawPixels(e,i);return a&&Sb._flipY(n,s,o),l&&Sb._unpremultiplyAlpha(n),n}_rawPixels(e,i){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let s,o=!1,a=!1,l,c=!1;e&&(e instanceof Kp?l=e:(l=n.generateTexture(e,{region:i,resolution:n.resolution,multisample:n.multisample}),c=!0,i&&(xT.width=i.width,xT.height=i.height,i=xT)));const u=n.gl;if(l){if(s=l.baseTexture.resolution,i=i??l.frame,o=!1,a=l.baseTexture.alphaMode>0&&l.baseTexture.format===at.RGBA,!c){n.renderTexture.bind(l);const g=l.framebuffer.glFramebuffers[n.CONTEXT_UID];g.blitFramebuffer&&n.framebuffer.bind(g.blitFramebuffer)}}else s=n.resolution,i||(i=xT,i.width=n.width/s,i.height=n.height/s),o=!0,a=this._rendererPremultipliedAlpha,n.renderTexture.bind();const d=Math.max(Math.round(i.width*s),1),p=Math.max(Math.round(i.height*s),1),m=new Uint8Array(fje*d*p);return u.readPixels(Math.round(i.x*s),Math.round(i.y*s),d,p,u.RGBA,u.UNSIGNED_BYTE,m),c&&(l==null||l.destroy(!0)),{pixels:m,width:d,height:p,flipY:o,premultipliedAlpha:a}}destroy(){this.renderer=null}static _flipY(e,i,n){const s=i<<2,o=n>>1,a=new Uint8Array(s);for(let l=0;l<o;l++){const c=l*s,u=(n-l-1)*s;a.set(e.subarray(c,c+s)),e.copyWithin(c,u,u+s),e.set(a,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const i=e.length;for(let n=0;n<i;n+=4){const s=e[n+3];if(s!==0){const o=255.001/s;e[n]=e[n]*o+.5,e[n+1]=e[n+1]*o+.5,e[n+2]=e[n+2]*o+.5}}}};yae.extension={name:"extract",type:Ot.RendererSystem};let _ae=yae;Qt.add(_ae);const mO={build(r){const e=r.points;let i,n,s,o,a,l;if(r.type===Ws.CIRC){const y=r.shape;i=y.x,n=y.y,a=l=y.radius,s=o=0}else if(r.type===Ws.ELIP){const y=r.shape;i=y.x,n=y.y,a=y.width,l=y.height,s=o=0}else{const y=r.shape,_=y.width/2,x=y.height/2;i=y.x+_,n=y.y+x,a=l=Math.max(0,Math.min(y.radius,Math.min(_,x))),s=_-a,o=x-l}if(!(a>=0&&l>=0&&s>=0&&o>=0)){e.length=0;return}const c=Math.ceil(2.3*Math.sqrt(a+l)),u=c*8+(s?4:0)+(o?4:0);if(e.length=u,u===0)return;if(c===0){e.length=8,e[0]=e[6]=i+s,e[1]=e[3]=n+o,e[2]=e[4]=i-s,e[5]=e[7]=n-o;return}let d=0,p=c*4+(s?2:0)+2,m=p,g=u;{const y=s+a,_=o,x=i+y,O=i-y,S=n+_;if(e[d++]=x,e[d++]=S,e[--p]=S,e[--p]=O,o){const w=n-_;e[m++]=O,e[m++]=w,e[--g]=w,e[--g]=x}}for(let y=1;y<c;y++){const _=Math.PI/2*(y/c),x=s+Math.cos(_)*a,O=o+Math.sin(_)*l,S=i+x,w=i-x,C=n+O,M=n-O;e[d++]=S,e[d++]=C,e[--p]=C,e[--p]=w,e[m++]=w,e[m++]=M,e[--g]=M,e[--g]=S}{const y=s,_=o+l,x=i+y,O=i-y,S=n+_,w=n-_;e[d++]=x,e[d++]=S,e[--g]=w,e[--g]=x,s&&(e[d++]=O,e[d++]=S,e[--g]=w,e[--g]=O)}},triangulate(r,e){const i=r.points,n=e.points,s=e.indices;if(i.length===0)return;let o=n.length/2;const a=o;let l,c;if(r.type!==Ws.RREC){const d=r.shape;l=d.x,c=d.y}else{const d=r.shape;l=d.x+d.width/2,c=d.y+d.height/2}const u=r.matrix;n.push(r.matrix?u.a*l+u.c*c+u.tx:l,r.matrix?u.b*l+u.d*c+u.ty:c),o++,n.push(i[0],i[1]);for(let d=2;d<i.length;d+=2)n.push(i[d],i[d+1]),s.push(o++,a,o);s.push(a+1,a,o)}};function lj(r,e=!1){const i=r.length;if(i<6)return;let n=0;for(let s=0,o=r[i-2],a=r[i-1];s<i;s+=2){const l=r[s],c=r[s+1];n+=(l-o)*(c+a),o=l,a=c}if(!e&&n>0||e&&n<=0){const s=i/2;for(let o=s+s%2;o<i;o+=2){const a=i-o-2,l=i-o-1,c=o,u=o+1;[r[a],r[c]]=[r[c],r[a]],[r[l],r[u]]=[r[u],r[l]]}}}const hF={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let i=r.points;const n=r.holes,s=e.points,o=e.indices;if(i.length>=6){lj(i,!1);const a=[];for(let u=0;u<n.length;u++){const d=n[u];lj(d.points,!0),a.push(i.length/2),i=i.concat(d.points)}const l=hse(i,a,2);if(!l)return;const c=s.length/2;for(let u=0;u<l.length;u+=3)o.push(l[u]+c),o.push(l[u+1]+c),o.push(l[u+2]+c);for(let u=0;u<i.length;u++)s.push(i[u])}}},xae={build(r){const e=r.shape,i=e.x,n=e.y,s=e.width,o=e.height,a=r.points;a.length=0,s>=0&&o>=0&&a.push(i,n,i+s,n,i+s,n+o,i,n+o)},triangulate(r,e){const i=r.points,n=e.points;if(i.length===0)return;const s=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},bae={build(r){mO.build(r)},triangulate(r,e){mO.triangulate(r,e)}};var ol=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(ol||{}),pd=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(pd||{});const Lp={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let i=Math.ceil(r/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},pje=Lp;class nL{static curveTo(e,i,n,s,o,a){const l=a[a.length-2],c=a[a.length-1]-i,u=l-e,d=s-i,p=n-e,m=Math.abs(c*p-u*d);if(m<1e-8||o===0)return(a[a.length-2]!==e||a[a.length-1]!==i)&&a.push(e,i),null;const g=c*c+u*u,y=d*d+p*p,_=c*d+u*p,x=o*Math.sqrt(g)/m,O=o*Math.sqrt(y)/m,S=x*_/g,w=O*_/y,C=x*p+O*u,M=x*d+O*c,P=u*(O+S),R=c*(O+S),k=p*(x+w),I=d*(x+w),A=Math.atan2(R-M,P-C),D=Math.atan2(I-M,k-C);return{cx:C+e,cy:M+i,radius:o,startAngle:A,endAngle:D,anticlockwise:u*d>p*c}}static arc(e,i,n,s,o,a,l,c,u){const d=l-a,p=Lp._segmentsCount(Math.abs(d)*o,Math.ceil(Math.abs(d)/oO)*40),m=d/(p*2),g=m*2,y=Math.cos(m),_=Math.sin(m),x=p-1,O=x%1/x;for(let S=0;S<=x;++S){const w=S+O*S,C=m+a+g*w,M=Math.cos(C),P=-Math.sin(C);u.push((y*M+_*P)*o+n,(y*-P+_*M)*o+s)}}}class wae{constructor(){this.reset()}begin(e,i,n){this.reset(),this.style=e,this.start=i,this.attribStart=n}end(e,i){this.attribSize=i-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class ck{static curveLength(e,i,n,s,o,a,l,c){let u=0,d=0,p=0,m=0,g=0,y=0,_=0,x=0,O=0,S=0,w=0,C=e,M=i;for(let P=1;P<=10;++P)d=P/10,p=d*d,m=p*d,g=1-d,y=g*g,_=y*g,x=_*e+3*y*d*n+3*g*p*o+m*l,O=_*i+3*y*d*s+3*g*p*a+m*c,S=C-x,w=M-O,C=x,M=O,u+=Math.sqrt(S*S+w*w);return u}static curveTo(e,i,n,s,o,a,l){const c=l[l.length-2],u=l[l.length-1];l.length-=2;const d=Lp._segmentsCount(ck.curveLength(c,u,e,i,n,s,o,a));let p=0,m=0,g=0,y=0,_=0;l.push(c,u);for(let x=1,O=0;x<=d;++x)O=x/d,p=1-O,m=p*p,g=m*p,y=O*O,_=y*O,l.push(g*c+3*m*O*e+3*p*y*n+_*o,g*u+3*m*O*i+3*p*y*s+_*a)}}function hj(r,e,i,n,s,o,a,l){const c=r-i*s,u=e-n*s,d=r+i*o,p=e+n*o;let m,g;a?(m=n,g=-i):(m=-n,g=i);const y=c+m,_=u+g,x=d+m,O=p+g;return l.push(y,_,x,O),2}function Dm(r,e,i,n,s,o,a,l){const c=i-r,u=n-e;let d=Math.atan2(c,u),p=Math.atan2(s-r,o-e);l&&d<p?d+=Math.PI*2:!l&&d>p&&(p+=Math.PI*2);let m=d;const g=p-d,y=Math.abs(g),_=Math.sqrt(c*c+u*u),x=(15*y*Math.sqrt(_)/Math.PI>>0)+1,O=g/x;if(m+=O,l){a.push(r,e,i,n);for(let S=1,w=m;S<x;S++,w+=O)a.push(r,e,r+Math.sin(w)*_,e+Math.cos(w)*_);a.push(r,e,s,o)}else{a.push(i,n,r,e);for(let S=1,w=m;S<x;S++,w+=O)a.push(r+Math.sin(w)*_,e+Math.cos(w)*_,r,e);a.push(s,o,r,e)}return x*2}function mje(r,e){const i=r.shape;let n=r.points||i.points.slice();const s=e.closePointEps;if(n.length===0)return;const o=r.lineStyle,a=new ai(n[0],n[1]),l=new ai(n[n.length-2],n[n.length-1]),c=i.type!==Ws.POLY||i.closeStroke,u=Math.abs(a.x-l.x)<s&&Math.abs(a.y-l.y)<s;if(c){n=n.slice(),u&&(n.pop(),n.pop(),l.set(n[n.length-2],n[n.length-1]));const z=(a.x+l.x)*.5,H=(l.y+a.y)*.5;n.unshift(z,H),n.push(z,H)}const d=e.points,p=n.length/2;let m=n.length;const g=d.length/2,y=o.width/2,_=y*y,x=o.miterLimit*o.miterLimit;let O=n[0],S=n[1],w=n[2],C=n[3],M=0,P=0,R=-(S-C),k=O-w,I=0,A=0,D=Math.sqrt(R*R+k*k);R/=D,k/=D,R*=y,k*=y;const V=o.alignment,B=(1-V)*2,L=V*2;c||(o.cap===pd.ROUND?m+=Dm(O-R*(B-L)*.5,S-k*(B-L)*.5,O-R*B,S-k*B,O+R*L,S+k*L,d,!0)+2:o.cap===pd.SQUARE&&(m+=hj(O,S,R,k,B,L,!0,d))),d.push(O-R*B,S-k*B,O+R*L,S+k*L);for(let z=1;z<p-1;++z){O=n[(z-1)*2],S=n[(z-1)*2+1],w=n[z*2],C=n[z*2+1],M=n[(z+1)*2],P=n[(z+1)*2+1],R=-(S-C),k=O-w,D=Math.sqrt(R*R+k*k),R/=D,k/=D,R*=y,k*=y,I=-(C-P),A=w-M,D=Math.sqrt(I*I+A*A),I/=D,A/=D,I*=y,A*=y;const H=w-O,K=S-C,J=w-M,ne=P-C,be=H*J+K*ne,pe=K*J-ne*H,ae=pe<0;if(Math.abs(pe)<.001*Math.abs(be)){d.push(w-R*B,C-k*B,w+R*L,C+k*L),be>=0&&(o.join===ol.ROUND?m+=Dm(w,C,w-R*B,C-k*B,w-I*B,C-A*B,d,!1)+4:m+=2,d.push(w-I*L,C-A*L,w+I*B,C+A*B));continue}const ye=(-R+O)*(-k+C)-(-R+w)*(-k+S),_e=(-I+M)*(-A+C)-(-I+w)*(-A+P),re=(H*_e-J*ye)/pe,se=(ne*ye-K*_e)/pe,Q=(re-w)*(re-w)+(se-C)*(se-C),G=w+(re-w)*B,ie=C+(se-C)*B,he=w-(re-w)*L,j=C-(se-C)*L,ee=Math.min(H*H+K*K,J*J+ne*ne),de=ae?B:L,ve=ee+de*de*_,Ce=Q<=ve;let Ie=o.join;if(Ie===ol.MITER&&Q/_>x&&(Ie=ol.BEVEL),Ce)switch(Ie){case ol.MITER:{d.push(G,ie,he,j);break}case ol.BEVEL:{ae?d.push(G,ie,w+R*L,C+k*L,G,ie,w+I*L,C+A*L):d.push(w-R*B,C-k*B,he,j,w-I*B,C-A*B,he,j),m+=2;break}case ol.ROUND:{ae?(d.push(G,ie,w+R*L,C+k*L),m+=Dm(w,C,w+R*L,C+k*L,w+I*L,C+A*L,d,!0)+4,d.push(G,ie,w+I*L,C+A*L)):(d.push(w-R*B,C-k*B,he,j),m+=Dm(w,C,w-R*B,C-k*B,w-I*B,C-A*B,d,!1)+4,d.push(w-I*B,C-A*B,he,j));break}}else{switch(d.push(w-R*B,C-k*B,w+R*L,C+k*L),Ie){case ol.MITER:{ae?d.push(he,j,he,j):d.push(G,ie,G,ie),m+=2;break}case ol.ROUND:{ae?m+=Dm(w,C,w+R*L,C+k*L,w+I*L,C+A*L,d,!0)+2:m+=Dm(w,C,w-R*B,C-k*B,w-I*B,C-A*B,d,!1)+2;break}}d.push(w-I*B,C-A*B,w+I*L,C+A*L),m+=2}}O=n[(p-2)*2],S=n[(p-2)*2+1],w=n[(p-1)*2],C=n[(p-1)*2+1],R=-(S-C),k=O-w,D=Math.sqrt(R*R+k*k),R/=D,k/=D,R*=y,k*=y,d.push(w-R*B,C-k*B,w+R*L,C+k*L),c||(o.cap===pd.ROUND?m+=Dm(w-R*(B-L)*.5,C-k*(B-L)*.5,w-R*B,C-k*B,w+R*L,C+k*L,d,!1)+2:o.cap===pd.SQUARE&&(m+=hj(w,C,R,k,B,L,!1,d)));const F=e.indices,$=Lp.epsilon*Lp.epsilon;for(let z=g;z<m+g-2;++z)O=d[z*2],S=d[z*2+1],w=d[(z+1)*2],C=d[(z+1)*2+1],M=d[(z+2)*2],P=d[(z+2)*2+1],!(Math.abs(O*(C-P)+w*(P-S)+M*(S-C))<$)&&F.push(z,z+1,z+2)}function gje(r,e){let i=0;const n=r.shape,s=r.points||n.points,o=n.type!==Ws.POLY||n.closeStroke;if(s.length===0)return;const a=e.points,l=e.indices,c=s.length/2,u=a.length/2;let d=u;for(a.push(s[0],s[1]),i=1;i<c;i++)a.push(s[i*2],s[i*2+1]),l.push(d,d+1),d++;o&&l.push(d,u)}function rL(r,e){r.lineStyle.native?gje(r,e):mje(r,e)}class uk{static curveLength(e,i,n,s,o,a){const l=e-2*n+o,c=i-2*s+a,u=2*n-2*e,d=2*s-2*i,p=4*(l*l+c*c),m=4*(l*u+c*d),g=u*u+d*d,y=2*Math.sqrt(p+m+g),_=Math.sqrt(p),x=2*p*_,O=2*Math.sqrt(g),S=m/_;return(x*y+_*m*(y-O)+(4*g*p-m*m)*Math.log((2*_+S+y)/(S+O)))/(4*x)}static curveTo(e,i,n,s,o){const a=o[o.length-2],l=o[o.length-1],c=Lp._segmentsCount(uk.curveLength(a,l,e,i,n,s));let u=0,d=0;for(let p=1;p<=c;++p){const m=p/c;u=a+(e-a)*m,d=l+(i-l)*m,o.push(u+(e+(n-e)*m-u)*m,d+(i+(s-i)*m-d)*m)}}}const $A={[Ws.POLY]:hF,[Ws.CIRC]:mO,[Ws.ELIP]:mO,[Ws.RECT]:xae,[Ws.RREC]:bae},sL=[],Cb=[];class gO{constructor(e,i=null,n=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=i,this.matrix=s,this.type=e.type}clone(){return new gO(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Sv=new ai,Oae=class Sae extends D6{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new uO,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Cb.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const i=this.batches[e];i.reset(),sL.push(i)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,i=null,n=null,s=null){const o=new gO(e,i,n,s);return this.graphicsData.push(o),this.dirty++,this}drawHole(e,i=null){if(!this.graphicsData.length)return null;const n=new gO(e,null,null,i),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const i=this.graphicsData;for(let n=0;n<i.length;++n){const s=i[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Sv):Sv.copyFrom(e),s.shape.contains(Sv.x,Sv.y))){let o=!1;if(s.holes){for(let a=0;a<s.holes.length;a++)if(s.holes[a].shape.contains(Sv.x,Sv.y)){o=!0;break}}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,i=this.graphicsData;let n=null,s=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],s=n.style);for(let c=this.shapeIndex;c<i.length;c++){this.shapeIndex++;const u=i[c],d=u.fillStyle,p=u.lineStyle;$A[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(d.visible||p.visible)&&this.processHoles(u.holes);for(let m=0;m<2;m++){const g=m===0?d:p;if(!g.visible)continue;const y=g.texture.baseTexture,_=this.indices.length,x=this.points.length/2;y.wrapMode=ou.REPEAT,m===0?this.processFill(u):this.processLine(u);const O=this.points.length/2-x;O!==0&&(n&&!this._compareStyles(s,g)&&(n.end(_,x),n=null),n||(n=sL.pop()||new wae,n.begin(g,_,x),this.batches.push(n),s=g),this.addUvs(this.points,e,g.texture,x,O,g.matrix))}}const o=this.indices.length,a=this.points.length/2;if(n&&n.end(o,a),this.batches.length===0){this.batchable=!0;return}const l=a>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&l===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=l?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,i){return!(!e||!i||e.texture.baseTexture!==i.texture.baseTexture||e.color+e.alpha!==i.color+i.alpha||!!e.native!=!!i.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,i=this.graphicsData.length;e<i;e++){const n=this.graphicsData[e],s=n.fillStyle,o=n.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let i=0,n=e.length;i<n;i++){const s=e[i];for(let o=0;o<s.size;o++){const a=s.start+o;this.indicesUint16[a]=this.indicesUint16[a]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let i=0;i<e.length;i++)if(e[i].style.native)return!1;return this.points.length<Sae.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++ki._globalBatch;for(let p=0;p<this.drawCalls.length;p++)this.drawCalls[p].texArray.clear(),Cb.push(this.drawCalls[p]);this.drawCalls.length=0;const i=this.colors,n=this.textureIds;let s=Cb.pop();s||(s=new oM,s.texArray=new aM),s.texArray.count=0,s.start=0,s.size=0,s.type=Jh.TRIANGLES;let o=0,a=null,l=0,c=!1,u=Jh.TRIANGLES,d=0;this.drawCalls.push(s);for(let p=0;p<this.batches.length;p++){const m=this.batches[p],g=8,y=m.style,_=y.texture.baseTexture;c!==!!y.native&&(c=!!y.native,u=c?Jh.LINES:Jh.TRIANGLES,a=null,o=g,e++),a!==_&&(a=_,_._batchEnabled!==e&&(o===g&&(e++,o=0,s.size>0&&(s=Cb.pop(),s||(s=new oM,s.texArray=new aM),this.drawCalls.push(s)),s.start=d,s.size=0,s.texArray.count=0,s.type=u),_.touched=1,_._batchEnabled=e,_._batchLocation=o,_.wrapMode=ou.REPEAT,s.texArray.elements[s.texArray.count++]=_,o++)),s.size+=m.size,d+=m.size,l=_._batchLocation,this.addColors(i,y.color,y.alpha,m.attribSize,m.attribStart),this.addTextureIds(n,l,m.attribSize,m.attribStart)}ki._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,i=this.uvs,n=this.colors,s=this.textureIds,o=new ArrayBuffer(e.length*3*4),a=new Float32Array(o),l=new Uint32Array(o);let c=0;for(let u=0;u<e.length/2;u++)a[c++]=e[u*2],a[c++]=e[u*2+1],a[c++]=i[u*2],a[c++]=i[u*2+1],l[c++]=n[u],a[c++]=s[u];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?hF.triangulate(e,this):$A[e.type].triangulate(e,this)}processLine(e){rL(e,this);for(let i=0;i<e.holes.length;i++)rL(e.holes[i],this)}processHoles(e){for(let i=0;i<e.length;i++){const n=e[i];$A[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,i){for(let n=0;n<e.length/2;n++){const s=e[n*2],o=e[n*2+1];e[n*2]=i.a*s+i.c*o+i.tx,e[n*2+1]=i.b*s+i.d*o+i.ty}}addColors(e,i,n,s,o=0){const a=Sn.shared.setValue(i).toLittleEndianNumber(),l=Sn.shared.setValue(a).toPremultiplied(n);e.length=Math.max(e.length,o+s);for(let c=0;c<s;c++)e[o+c]=l}addTextureIds(e,i,n,s=0){e.length=Math.max(e.length,s+n);for(let o=0;o<n;o++)e[s+o]=i}addUvs(e,i,n,s,o,a=null){let l=0;const c=i.length,u=n.frame;for(;l<o;){let p=e[(s+l)*2],m=e[(s+l)*2+1];if(a){const g=a.a*p+a.c*m+a.tx;m=a.b*p+a.d*m+a.ty,p=g}l++,i.push(p/u.width,m/u.height)}const d=n.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(i,n,c,o)}adjustUvs(e,i,n,s){const o=i.baseTexture,a=1e-6,l=n+s*2,c=i.frame,u=c.width/o.width,d=c.height/o.height;let p=c.x/c.width,m=c.y/c.height,g=Math.floor(e[n]+a),y=Math.floor(e[n+1]+a);for(let _=n+2;_<l;_+=2)g=Math.min(g,Math.floor(e[_]+a)),y=Math.min(y,Math.floor(e[_+1]+a));p-=g,m-=y;for(let _=n;_<l;_+=2)e[_]=(e[_]+p)*u,e[_+1]=(e[_+1]+m)*d}};Oae.BATCHABLE_SIZE=100;let Cae=Oae;class yS{constructor(){this.color=16777215,this.alpha=1,this.texture=At.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new yS;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=At.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class dk extends yS{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=pd.BUTT,this.join=ol.MITER,this.miterLimit=10}clone(){const e=new dk;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=pd.BUTT,this.join=ol.MITER,this.miterLimit=10}}const OB={},oL=class UA extends Ii{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new yS,this._lineStyle=new dk,this._matrix=null,this._holeMode=!1,this.state=mc.for2d(),this._geometry=e||new Cae,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Sn(16777215),this.blendMode=di.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new UA(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,i=0,n,s=.5,o=!1){return typeof e=="number"&&(e={width:e,color:i,alpha:n,alignment:s,native:o}),this.lineTextureStyle(e)}lineTextureStyle(e){const i={width:0,texture:At.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:pd.BUTT,join:ol.MITER,miterLimit:10};e=Object.assign(i,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new vp,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[i-2],e[i-1]))}else this.currentPath=new vp,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,i){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=i,this}lineTo(e,i){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,s=n[n.length-2],o=n[n.length-1];return(s!==e||o!==i)&&n.push(e,i),this}_initCurve(e=0,i=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,i]):this.moveTo(e,i)}quadraticCurveTo(e,i,n,s){this._initCurve();const o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),uk.curveTo(e,i,n,s,o),this}bezierCurveTo(e,i,n,s,o,a){return this._initCurve(),ck.curveTo(e,i,n,s,o,a,this.currentPath.points),this}arcTo(e,i,n,s,o){this._initCurve(e,i);const a=this.currentPath.points,l=nL.curveTo(e,i,n,s,o,a);if(l){const{cx:c,cy:u,radius:d,startAngle:p,endAngle:m,anticlockwise:g}=l;this.arc(c,u,d,p,m,g)}return this}arc(e,i,n,s,o,a=!1){if(s===o)return this;if(!a&&o<=s?o+=oO:a&&s<=o&&(s+=oO),o-s===0)return this;const l=e+Math.cos(s)*n,c=i+Math.sin(s)*n,u=this._geometry.closePointEps;let d=this.currentPath?this.currentPath.points:null;if(d){const p=Math.abs(d[d.length-2]-l),m=Math.abs(d[d.length-1]-c);p<u&&m<u||d.push(l,c)}else this.moveTo(l,c),d=this.currentPath.points;return nL.arc(l,c,e,i,n,s,o,a,d),this}beginFill(e=0,i){return this.beginTextureFill({texture:At.WHITE,color:e,alpha:i})}normalizeColor(e){const i=Sn.shared.setValue(e.color??0);e.color=i.toNumber(),e.alpha??(e.alpha=i.alpha)}beginTextureFill(e){const i={texture:At.WHITE,color:16777215,matrix:null};e=Object.assign(i,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,i,n,s){return this.drawShape(new Ri(e,i,n,s))}drawRoundedRect(e,i,n,s,o){return this.drawShape(new pS(e,i,n,s,o))}drawCircle(e,i,n){return this.drawShape(new ok(e,i,n))}drawEllipse(e,i,n,s){return this.drawShape(new fS(e,i,n,s))}drawPolygon(...e){let i,n=!0;const s=e[0];s.points?(n=s.closeStroke,i=s.points):Array.isArray(e[0])?i=e[0]:i=e;const o=new vp(i);return o.closeStroke=n,this.drawShape(o),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Ws.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,i=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let s=0;s<n;s++){const o=e.batches[s],a=o.style.color,l=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),c=new Float32Array(e.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,o.start*2,o.size),d={vertexData:l,blendMode:i,indices:u,uvs:c,_batchRGB:Sn.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=d}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let i=0,n=this.batches.length;i<n;i++){const s=this.batches[i];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const i=this._resolveDirectShader(e),n=this._geometry,s=this.worldAlpha,o=i.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,Sn.shared.setValue(this._tintColor).premultiply(s).toArray(o.tint),e.shader.bind(i),e.geometry.bind(n,i),e.state.set(this.state);for(let l=0,c=a.length;l<c;l++)this._renderDrawCallDirect(e,n.drawCalls[l])}_renderDrawCallDirect(e,i){const{texArray:n,type:s,size:o,start:a}=i,l=n.count;for(let c=0;c<l;c++)e.texture.bind(n.elements[c],c);e.geometry.draw(s,o,a)}_resolveDirectShader(e){let i=this.shader;const n=this.pluginName;if(!i){if(!OB[n]){const{maxTextures:s}=e.plugins[n],o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=c;const a={tint:new Float32Array([1,1,1,1]),translationMatrix:new ir,default:gh.from({uSamplers:o},!0)},l=e.plugins[n]._shader.program;OB[n]=new vh(l,a)}i=OB[n]}return i}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:i,minY:n,maxX:s,maxY:o}=e.bounds;this._bounds.addFrame(this.transform,i,n,s,o)}containsPoint(e){return this.worldTransform.applyInverse(e,UA._TEMP_POINT),this._geometry.containsPoint(UA._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const i=this.batches[e];i._tintRGB=Sn.shared.setValue(this._tintColor).multiply(i._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const i=this.transform.worldTransform,n=i.a,s=i.b,o=i.c,a=i.d,l=i.tx,c=i.ty,u=this._geometry.points,d=this.vertexData;let p=0;for(let m=0;m<u.length;m+=2){const g=u[m],y=u[m+1];d[p++]=n*g+o*y+l,d[p++]=a*y+s*g+c}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};oL.curves=Lp,oL._TEMP_POINT=new ai;let En=oL;const vje={buildPoly:hF,buildCircle:mO,buildRectangle:xae,buildRoundedRectangle:bae,buildLine:rL,ArcUtils:nL,BezierUtils:ck,QuadraticUtils:uk,BatchPart:wae,FILL_COMMANDS:$A,BATCH_POOL:sL,DRAW_CALL_POOL:Cb};class Tae{constructor(e,i){this.uvBuffer=e,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const SB=new ai,cj=new vp,Aae=class Eae extends Ii{constructor(e,i,n,s=Jh.TRIANGLES){super(),this.geometry=e,this.shader=i,this.state=n||mc.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Dt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Jh.TRIANGLES&&i.length<Eae.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),e.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(i),e.state.set(this.state),e.geometry.bind(this.geometry,i),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],i=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,d=s.ty,p=this.vertexData;for(let m=0;m<p.length/2;m++){const g=i[m*2],y=i[m*2+1];p[m*2]=o*g+l*y+u,p[m*2+1]=a*g+c*y+d}if(this._roundPixels){const m=Dt.RESOLUTION;for(let g=0;g<p.length;++g)p[g]=Math.round(p[g]*m)/m}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new Tae(e,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,SB);const i=this.geometry.getBuffer("aVertexPosition").data,n=cj.points,s=this.geometry.getIndex().data,o=s.length,a=this.drawMode===4?3:1;for(let l=0;l+2<o;l+=a){const c=s[l]*2,u=s[l+1]*2,d=s[l+2]*2;if(n[0]=i[c],n[1]=i[c+1],n[2]=i[u],n[3]=i[u+1],n[4]=i[d],n[5]=i[d+1],cj.contains(SB.x,SB.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Aae.BATCHABLE_SIZE=100;let o0=Aae;class _S extends pu{constructor(e,i,n){super();const s=new $r(e),o=new $r(i,!0),a=new $r(n,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,ti.FLOAT).addAttribute("aTextureCoord",o,2,!1,ti.FLOAT).addIndex(a),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var yje=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,_je=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class d_ extends vh{constructor(e,i){const n={uSampler:e,alpha:1,uTextureMatrix:ir.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(n,i.uniforms),super(i.program||tu.from(_je,yje),n),this._colorDirty=!1,this.uvMatrix=new lk(e),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new Sn(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Sn.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Mae extends _S{constructor(e=100,i=100,n=10,s=10){super(),this.segWidth=n,this.segHeight=s,this.width=e,this.height=i,this.build()}build(){const e=this.segWidth*this.segHeight,i=[],n=[],s=[],o=this.segWidth-1,a=this.segHeight-1,l=this.width/o,c=this.height/a;for(let d=0;d<e;d++){const p=d%this.segWidth,m=d/this.segWidth|0;i.push(p*l,m*c),n.push(p/o,m/a)}const u=o*a;for(let d=0;d<u;d++){const p=d%o,m=d/o|0,g=m*this.segWidth+p,y=m*this.segWidth+p+1,_=(m+1)*this.segWidth+p,x=(m+1)*this.segWidth+p+1;s.push(g,y,_,y,x,_)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class Pae extends _S{constructor(e=200,i,n=0){super(new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6)),this.points=i,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(e.length<1)return;i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));const o=n.data,a=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;let l=0,c=e[0];const u=this._width*this.textureScale,d=e.length;for(let m=0;m<d;m++){const g=m*4;if(this.textureScale>0){const y=c.x-e[m].x,_=c.y-e[m].y,x=Math.sqrt(y*y+_*_);c=e[m],l+=x/u}else l=m/(d-1);o[g]=l,o[g+1]=0,o[g+2]=l,o[g+3]=1}let p=0;for(let m=0;m<d-1;m++){const g=m*2;a[p++]=g,a[p++]=g+1,a[p++]=g+2,a[p++]=g+2,a[p++]=g+1,a[p++]=g+3}n.update(),s.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let i=e[0],n,s=0,o=0;const a=this.buffers[0].data,l=e.length,c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let u=0;u<l;u++){const d=e[u],p=u*4;u<e.length-1?n=e[u+1]:n=d,o=-(n.x-i.x),s=n.y-i.y;const m=Math.sqrt(s*s+o*o);m<1e-6?(s=0,o=0):(s/=m,o/=m,s*=c,o*=c),a[p]=d.x+s,a[p+1]=d.y+o,a[p+2]=d.x-s,a[p+3]=d.y-o,i=d}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class kae extends o0{constructor(e,i,n){const s=new Mae(e.width,e.height,i,n),o=new d_(At.WHITE);super(s,o),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:i,height:n}=this.shader.texture;this.autoResize&&(e.width!==i||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const bT=10;class xje extends kae{constructor(e,i,n,s,o){var a,l,c,u;super(At.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=i??((a=e.defaultBorders)==null?void 0:a.left)??bT,this._rightWidth=s??((l=e.defaultBorders)==null?void 0:l.right)??bT,this._topHeight=n??((c=e.defaultBorders)==null?void 0:c.top)??bT,this._bottomHeight=o??((u=e.defaultBorders)==null?void 0:u.bottom)??bT,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,i=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*i,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*i,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,i=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*i,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*i,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n;return Math.min(i,s)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,i=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,s=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=s*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class bje extends o0{constructor(e=At.EMPTY,i,n,s,o){const a=new _S(i,n,s);a.getBuffer("aVertexPosition").static=!1;const l=new d_(e);super(a,l,null,o),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class wje extends o0{constructor(e,i,n=0){const s=new Pae(e.height,i,n),o=new d_(e);n>0&&(e.baseTexture.wrapMode=ou.REPEAT),super(s,o),this.autoUpdate=!0}_render(e){const i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),super._render(e)}}class Oje extends Ii{constructor(e=1500,i,n=16384,s=!1){super();const o=16384;n>o&&(n=o),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=di.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(i),this._tintColor=new Sn(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const i=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class uj{constructor(e,i,n){this.geometry=new pu,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let o=e[s];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||ti.FLOAT,offset:o.offset},i[s]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let i=0;this.indexBuffer=new $r(Xse(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let a=0;a<this.dynamicProperties.length;++a){const l=this.dynamicProperties[a];l.offset=i,i+=l.size,this.dynamicStride+=l.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new $r(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let a=0;a<this.staticProperties.length;++a){const l=this.staticProperties[a];l.offset=s,s+=l.size,this.staticStride+=l.size}const o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new $r(this.staticData,!0,!1);for(let a=0;a<this.dynamicProperties.length;++a){const l=this.dynamicProperties[a];e.addAttribute(l.attributeName,this.dynamicBuffer,0,l.type===ti.UNSIGNED_BYTE,l.type,this.dynamicStride*4,l.offset*4)}for(let a=0;a<this.staticProperties.length;++a){const l=this.staticProperties[a];e.addAttribute(l.attributeName,this.staticBuffer,0,l.type===ti.UNSIGNED_BYTE,l.type,this.staticStride*4,l.offset*4)}}uploadDynamic(e,i,n){for(let s=0;s<this.dynamicProperties.length;s++){const o=this.dynamicProperties[s];o.uploadFunction(e,i,n,o.type===ti.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,i,n){for(let s=0;s<this.staticProperties.length;s++){const o=this.staticProperties[s];o.uploadFunction(e,i,n,o.type===ti.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var Sje=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Cje=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class cF extends gS{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new ir,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ti.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=vh.from(Cje,Sje,{}),this.state=mc.for2d()}render(e){const i=e.children,n=e._maxSize,s=e._batchSize,o=this.renderer;let a=i.length;if(a===0)return;a>n&&!e.autoResize&&(a=n);let l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));const c=i[0]._texture.baseTexture,u=c.alphaMode>0;this.state.blendMode=R6(e.blendMode,u),o.state.set(this.state);const d=o.gl,p=e.worldTransform.copyTo(this.tempMatrix);p.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=Sn.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);let m=!1;for(let g=0,y=0;g<a;g+=s,y+=1){let _=a-g;_>s&&(_=s),y>=l.length&&l.push(this._generateOneMoreBuffer(e));const x=l[y];x.uploadDynamic(i,g,_);const O=e._bufferUpdateIDs[y]||0;m=m||x._updateID<O,m&&(x._updateID=e._updateID,x.uploadStatic(i,g,_)),o.geometry.bind(x.geometry),d.drawElements(d.TRIANGLES,_*6,d.UNSIGNED_SHORT,0)}}generateBuffers(e){const i=[],n=e._maxSize,s=e._batchSize,o=e._properties;for(let a=0;a<n;a+=s)i.push(new uj(this.properties,o,s));return i}_generateOneMoreBuffer(e){const i=e._batchSize,n=e._properties;return new uj(this.properties,n,i)}uploadVertices(e,i,n,s,o,a){let l=0,c=0,u=0,d=0;for(let p=0;p<n;++p){const m=e[i+p],g=m._texture,y=m.scale.x,_=m.scale.y,x=g.trim,O=g.orig;x?(c=x.x-m.anchor.x*O.width,l=c+x.width,d=x.y-m.anchor.y*O.height,u=d+x.height):(l=O.width*(1-m.anchor.x),c=O.width*-m.anchor.x,u=O.height*(1-m.anchor.y),d=O.height*-m.anchor.y),s[a]=c*y,s[a+1]=d*_,s[a+o]=l*y,s[a+o+1]=d*_,s[a+o*2]=l*y,s[a+o*2+1]=u*_,s[a+o*3]=c*y,s[a+o*3+1]=u*_,a+=o*4}}uploadPosition(e,i,n,s,o,a){for(let l=0;l<n;l++){const c=e[i+l].position;s[a]=c.x,s[a+1]=c.y,s[a+o]=c.x,s[a+o+1]=c.y,s[a+o*2]=c.x,s[a+o*2+1]=c.y,s[a+o*3]=c.x,s[a+o*3+1]=c.y,a+=o*4}}uploadRotation(e,i,n,s,o,a){for(let l=0;l<n;l++){const c=e[i+l].rotation;s[a]=c,s[a+o]=c,s[a+o*2]=c,s[a+o*3]=c,a+=o*4}}uploadUvs(e,i,n,s,o,a){for(let l=0;l<n;++l){const c=e[i+l]._texture._uvs;c?(s[a]=c.x0,s[a+1]=c.y0,s[a+o]=c.x1,s[a+o+1]=c.y1,s[a+o*2]=c.x2,s[a+o*2+1]=c.y2,s[a+o*3]=c.x3,s[a+o*3+1]=c.y3,a+=o*4):(s[a]=0,s[a+1]=0,s[a+o]=0,s[a+o+1]=0,s[a+o*2]=0,s[a+o*2+1]=0,s[a+o*3]=0,s[a+o*3+1]=0,a+=o*4)}}uploadTint(e,i,n,s,o,a){for(let l=0;l<n;++l){const c=e[i+l],u=Sn.shared.setValue(c._tintRGB).toPremultiplied(c.alpha,c.texture.baseTexture.alphaMode>0);s[a]=u,s[a+o]=u,s[a+o*2]=u,s[a+o*3]=u,a+=o*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}cF.extension={name:"particle",type:Ot.RendererPlugin};Qt.add(cF);var xS=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(xS||{});const wT={willReadFrequently:!0},Lc=class Kt{static get experimentalLetterSpacingSupported(){let e=Kt._experimentalLetterSpacingSupported;if(e!==void 0){const i=Dt.ADAPTER.getCanvasRenderingContext2D().prototype;e=Kt._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(e,i,n,s,o,a,l,c,u){this.text=e,this.style=i,this.width=n,this.height=s,this.lines=o,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=c,this.fontProperties=u}static measureText(e,i,n,s=Kt._canvas){n=n??i.wordWrap;const o=i.toFontString(),a=Kt.measureFont(o);a.fontSize===0&&(a.fontSize=i.fontSize,a.ascent=i.fontSize);const l=s.getContext("2d",wT);l.font=o;const c=(n?Kt.wordWrap(e,i,s):e).split(/(?:\r\n|\r|\n)/),u=new Array(c.length);let d=0;for(let y=0;y<c.length;y++){const _=Kt._measureText(c[y],i.letterSpacing,l);u[y]=_,d=Math.max(d,_)}let p=d+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);const m=i.lineHeight||a.fontSize+i.strokeThickness;let g=Math.max(m,a.fontSize+i.strokeThickness*2)+i.leading+(c.length-1)*(m+i.leading);return i.dropShadow&&(g+=i.dropShadowDistance),new Kt(e,i,p,g,c,u,m+i.leading,d,a)}static _measureText(e,i,n){let s=!1;Kt.experimentalLetterSpacingSupported&&(Kt.experimentalLetterSpacing?(n.letterSpacing=`${i}px`,n.textLetterSpacing=`${i}px`,s=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let o=n.measureText(e).width;return o>0&&(s?o-=i:o+=(Kt.graphemeSegmenter(e).length-1)*i),o}static wordWrap(e,i,n=Kt._canvas){const s=n.getContext("2d",wT);let o=0,a="",l="";const c=Object.create(null),{letterSpacing:u,whiteSpace:d}=i,p=Kt.collapseSpaces(d),m=Kt.collapseNewlines(d);let g=!p;const y=i.wordWrapWidth+u,_=Kt.tokenize(e);for(let x=0;x<_.length;x++){let O=_[x];if(Kt.isNewline(O)){if(!m){l+=Kt.addLine(a),g=!p,a="",o=0;continue}O=" "}if(p){const w=Kt.isBreakingSpace(O),C=Kt.isBreakingSpace(a[a.length-1]);if(w&&C)continue}const S=Kt.getFromCache(O,u,c,s);if(S>y)if(a!==""&&(l+=Kt.addLine(a),a="",o=0),Kt.canBreakWords(O,i.breakWords)){const w=Kt.wordWrapSplit(O);for(let C=0;C<w.length;C++){let M=w[C],P=M,R=1;for(;w[C+R];){const I=w[C+R];if(!Kt.canBreakChars(P,I,O,C,i.breakWords))M+=I;else break;P=I,R++}C+=R-1;const k=Kt.getFromCache(M,u,c,s);k+o>y&&(l+=Kt.addLine(a),g=!1,a="",o=0),a+=M,o+=k}}else{a.length>0&&(l+=Kt.addLine(a),a="",o=0);const w=x===_.length-1;l+=Kt.addLine(O,!w),g=!1,a="",o=0}else S+o>y&&(g=!1,l+=Kt.addLine(a),a="",o=0),(a.length>0||!Kt.isBreakingSpace(O)||g)&&(a+=O,o+=S)}return l+=Kt.addLine(a,!1),l}static addLine(e,i=!0){return e=Kt.trimRight(e),e=i?`${e}
`:e,e}static getFromCache(e,i,n,s){let o=n[e];return typeof o!="number"&&(o=Kt._measureText(e,i,s)+i,n[e]=o),o}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let i=e.length-1;i>=0;i--){const n=e[i];if(!Kt.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Kt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return typeof e!="string"?!1:Kt._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const i=[];let n="";if(typeof e!="string")return i;for(let s=0;s<e.length;s++){const o=e[s],a=e[s+1];if(Kt.isBreakingSpace(o,a)||Kt.isNewline(o)){n!==""&&(i.push(n),n=""),i.push(o);continue}n+=o}return n!==""&&i.push(n),i}static canBreakWords(e,i){return i}static canBreakChars(e,i,n,s,o){return!0}static wordWrapSplit(e){return Kt.graphemeSegmenter(e)}static measureFont(e){if(Kt._fonts[e])return Kt._fonts[e];const i={ascent:0,descent:0,fontSize:0},n=Kt._canvas,s=Kt._context;s.font=e;const o=Kt.METRICS_STRING+Kt.BASELINE_SYMBOL,a=Math.ceil(s.measureText(o).width);let l=Math.ceil(s.measureText(Kt.BASELINE_SYMBOL).width);const c=Math.ceil(Kt.HEIGHT_MULTIPLIER*l);if(l=l*Kt.BASELINE_MULTIPLIER|0,a===0||c===0)return Kt._fonts[e]=i,i;n.width=a,n.height=c,s.fillStyle="#f00",s.fillRect(0,0,a,c),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,l);const u=s.getImageData(0,0,a,c).data,d=u.length,p=a*4;let m=0,g=0,y=!1;for(m=0;m<l;++m){for(let _=0;_<p;_+=4)if(u[g+_]!==255){y=!0;break}if(!y)g+=p;else break}for(i.ascent=l-m,g=d-p,y=!1,m=c;m>l;--m){for(let _=0;_<p;_+=4)if(u[g+_]!==255){y=!0;break}if(!y)g-=p;else break}return i.descent=m-l,i.fontSize=i.ascent+i.descent,Kt._fonts[e]=i,i}static clearMetrics(e=""){e?delete Kt._fonts[e]:Kt._fonts={}}static get _canvas(){var e;if(!Kt.__canvas){let i;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",wT))!=null&&e.measureText)return Kt.__canvas=n,n;i=Dt.ADAPTER.createCanvas()}catch{i=Dt.ADAPTER.createCanvas()}i.width=i.height=10,Kt.__canvas=i}return Kt.__canvas}static get _context(){return Kt.__context||(Kt.__context=Kt._canvas.getContext("2d",wT)),Kt.__context}};Lc.METRICS_STRING="|ÉqÅ",Lc.BASELINE_SYMBOL="M",Lc.BASELINE_MULTIPLIER=1.4,Lc.HEIGHT_MULTIPLIER=2,Lc.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(i=>i.segment)}return r=>[...r]})(),Lc.experimentalLetterSpacing=!1,Lc._fonts={},Lc._newlines=[10,13],Lc._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let sd=Lc;const Tje=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Iae=class Tb{constructor(e){this.styleID=0,this.reset(),TB(this,e,e)}clone(){const e={};return TB(e,this,Tb.defaultStyle),new Tb(e)}reset(){TB(this,Tb.defaultStyle,Tb.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const i=CB(e);this._dropShadowColor!==i&&(this._dropShadowColor=i,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const i=CB(e);this._fill!==i&&(this._fill=i,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){Aje(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const i=CB(e);this._stroke!==i&&(this._stroke=i,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let i=this.fontFamily;Array.isArray(this.fontFamily)||(i=this.fontFamily.split(","));for(let n=i.length-1;n>=0;n--){let s=i[n].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!Tje.includes(s)&&(s=`"${s}"`),i[n]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${i.join(",")}`}};Iae.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:xS.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Nd=Iae;function CB(r){const e=Sn.shared,i=n=>{const s=e.setValue(n);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(r)?r.map(i):i(r)}function Aje(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==e[i])return!1;return!0}function TB(r,e,i){for(const n in i)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}const Eje={texture:!0,children:!1,baseTexture:!0},Rae=class aL extends hr{constructor(e,i,n){let s=!1;n||(n=Dt.ADAPTER.createCanvas(),s=!0),n.width=3,n.height=3;const o=At.from(n);o.orig=new Ri,o.trim=new Ri,super(o),this._ownCanvas=s,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=aL.defaultResolution??Dt.RESOLUTION,this._autoResolution=aL.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=i,this.localStyleID=-1}static get experimentalLetterSpacing(){return sd.experimentalLetterSpacing}static set experimentalLetterSpacing(e){bi("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),sd.experimentalLetterSpacing=e}updateText(e){const i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,s=sd.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,a=s.height,l=s.lines,c=s.lineHeight,u=s.lineWidths,d=s.maxLineWidth,p=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;let m,g;const y=i.dropShadow?2:1;for(let _=0;_<y;++_){const x=i.dropShadow&&_===0,O=x?Math.ceil(Math.max(1,a)+i.padding*2):0,S=O*this._resolution;if(x){n.fillStyle="black",n.strokeStyle="black";const C=i.dropShadowColor,M=i.dropShadowBlur*this._resolution,P=i.dropShadowDistance*this._resolution;n.shadowColor=Sn.shared.setValue(C).setAlpha(i.dropShadowAlpha).toRgbaString(),n.shadowBlur=M,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*P,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*P+S}else n.fillStyle=this._generateFillStyle(i,l,s),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let w=(c-p.fontSize)/2;c-p.fontSize<0&&(w=0);for(let C=0;C<l.length;C++)m=i.strokeThickness/2,g=i.strokeThickness/2+C*c+p.ascent+w,i.align==="right"?m+=d-u[C]:i.align==="center"&&(m+=(d-u[C])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[C],m+i.padding,g+i.padding-O,!0),i.fill&&this.drawLetterSpacing(l[C],m+i.padding,g+i.padding-O)}this.updateTexture()}drawLetterSpacing(e,i,n,s=!1){const o=this._style.letterSpacing;let a=!1;if(sd.experimentalLetterSpacingSupported&&(sd.experimentalLetterSpacing?(this.context.letterSpacing=`${o}px`,this.context.textLetterSpacing=`${o}px`,a=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),o===0||a){s?this.context.strokeText(e,i,n):this.context.fillText(e,i,n);return}let l=i;const c=sd.graphemeSegmenter(e);let u=this.context.measureText(e).width,d=0;for(let p=0;p<c.length;++p){const m=c[p];s?this.context.strokeText(m,l,n):this.context.fillText(m,l,n);let g="";for(let y=p+1;y<c.length;++y)g+=c[y];d=this.context.measureText(g).width,l+=u-d+o,u=d}}updateTexture(){const e=this.canvas;if(this._style.trim){const a=Hse(e);a.data&&(e.width=a.width,e.height=a.height,this.context.putImageData(a.data,0,0))}const i=this._texture,n=this._style,s=n.trim?0:n.padding,o=i.baseTexture;i.trim.width=i._frame.width=e.width/this._resolution,i.trim.height=i._frame.height=e.height/this._resolution,i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-s*2,i.orig.height=i._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),i.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,i){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,i)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,i,n){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let o;const a=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,c=this.canvas.width/this._resolution-a-l*2,u=this.canvas.height/this._resolution-a-l*2,d=s.slice(),p=e.fillGradientStops.slice();if(!p.length){const m=d.length+1;for(let g=1;g<m;++g)p.push(g/m)}if(d.unshift(s[0]),p.unshift(0),d.push(s[s.length-1]),p.push(1),e.fillGradientType===xS.LINEAR_VERTICAL){o=this.context.createLinearGradient(c/2,l,c/2,u+l);const m=n.fontProperties.fontSize+e.strokeThickness;for(let g=0;g<i.length;g++){const y=n.lineHeight*(g-1)+m,_=n.lineHeight*g;let x=_;g>0&&y>_&&(x=(_+y)/2);const O=_+m,S=n.lineHeight*(g+1);let w=O;g+1<i.length&&S<O&&(w=(O+S)/2);const C=(w-x)/u;for(let M=0;M<d.length;M++){let P=0;typeof p[M]=="number"?P=p[M]:P=M/d.length;let R=Math.min(1,Math.max(0,x/u+P*C));R=Number(R.toFixed(5)),o.addColorStop(R,d[M])}}}else{o=this.context.createLinearGradient(l,u/2,c+l,u/2);const m=d.length+1;let g=1;for(let y=0;y<d.length;y++){let _;typeof p[y]=="number"?_=p[y]:_=g/m,o.addColorStop(_,d[y]),g++}}return o}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Eje,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const i=fd(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const i=fd(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Nd?this._style=e:this._style=new Nd(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};Rae.defaultAutoResolution=!0;let Vn=Rae;class Bae{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Mje(r,e){var n;let i=!1;if((n=r==null?void 0:r._textures)!=null&&n.length){for(let s=0;s<r._textures.length;s++)if(r._textures[s]instanceof At){const o=r._textures[s].baseTexture;e.includes(o)||(e.push(o),i=!0)}}return i}function Pje(r,e){if(r.baseTexture instanceof ki){const i=r.baseTexture;return e.includes(i)||e.push(i),!0}return!1}function kje(r,e){if(r._texture&&r._texture instanceof At){const i=r._texture.baseTexture;return e.includes(i)||e.push(i),!0}return!1}function Ije(r,e){return e instanceof Vn?(e.updateText(!0),!0):!1}function Rje(r,e){if(e instanceof Nd){const i=e.toFontString();return sd.measureFont(i),!0}return!1}function Bje(r,e){if(r instanceof Vn){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const i=r._texture.baseTexture;return e.includes(i)||e.push(i),!0}return!1}function Dje(r,e){return r instanceof Nd?(e.includes(r)||e.push(r),!0):!1}const Dae=class Lae{constructor(e){this.limiter=new Bae(Lae.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Bje),this.registerFindHook(Dje),this.registerFindHook(Mje),this.registerFindHook(Pje),this.registerFindHook(kje),this.registerUploadHook(Ije),this.registerUploadHook(Rje)}upload(e){return new Promise(i=>{e&&this.add(e),this.queue.length?(this.completes.push(i),this.ticking||(this.ticking=!0,Rr.system.addOnce(this.tick,this,Ld.UTILITY))):i()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let i=!1;if(e&&!e._destroyed){for(let n=0,s=this.uploadHooks.length;n<s;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),i=!0;break}}i||this.queue.shift()}if(this.queue.length)Rr.system.addOnce(this.tick,this,Ld.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let i=0,n=e.length;i<n;i++)e[i]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let i=0,n=this.addHooks.length;i<n&&!this.addHooks[i](e,this.queue);i++);if(e instanceof Ii)for(let i=e.children.length-1;i>=0;i--)this.add(e.children[i]);return this}destroy(){this.ticking&&Rr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Dae.uploadsPerFrame=4;let pM=Dae;Object.defineProperties(Dt,{UPLOADS_PER_FRAME:{get(){return pM.uploadsPerFrame},set(r){bi("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),pM.uploadsPerFrame=r}}});function Nae(r,e){return e instanceof ki?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function Lje(r,e){if(!(e instanceof En))return!1;const{geometry:i}=e;e.finishPoly(),i.updateBatches();const{batches:n}=i;for(let s=0;s<n.length;s++){const{texture:o}=n[s].style;o&&Nae(r,o.baseTexture)}return i.batchable||r.geometry.bind(i,e._resolveDirectShader(r)),!0}function Nje(r,e){return r instanceof En?(e.push(r),!0):!1}class uF extends pM{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(Nje),this.registerUploadHook(Nae),this.registerUploadHook(Lje)}}uF.extension={name:"prepare",type:Ot.RendererSystem};Qt.add(uF);class Vje{constructor(e){this.maxMilliseconds=e,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}class mM extends hr{constructor(e,i=!0){super(e[0]instanceof At?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=i,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Rr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Rr.shared.add(this.update,this,Ld.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const i=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const o=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const i=[];for(let n=0;n<e.length;++n)i.push(At.from(e[n]));return new mM(i)}static fromImages(e){const i=[];for(let n=0;n<e.length;++n)i.push(At.from(e[n]));return new mM(i)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof At)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Rr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Rr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const G1=new ai;class dF extends hr{constructor(e,i=100,n=100){super(e),this.tileTransform=new mS,this._width=i,this._height=n,this.uvMatrix=this.texture.uvMatrix||new lk(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,i,n,s)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ri),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,G1);const i=this._width,n=this._height,s=-i*this.anchor._x;if(G1.x>=s&&G1.x<s+i){const o=-n*this.anchor._y;if(G1.y>=o&&G1.y<o+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,i){const n=e instanceof At?e:At.from(e,i);return new dF(n,i.width,i.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var Fje=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,$je=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Uje=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,dj=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,zje=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const OT=new ir;class fF extends gS{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new $6,this.state=mc.for2d()}contextChange(){const e=this.renderer,i={globals:e.globalUniforms};this.simpleShader=vh.from(dj,zje,i),this.shader=e.context.webGLVersion>1?vh.from($je,Fje,i):vh.from(dj,Uje,i)}render(e){const i=this.renderer,n=this.quad;let s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const o=e.uvRespectAnchor?e.anchor.x:0,a=e.uvRespectAnchor?e.anchor.y:0;s=n.uvs,s[0]=s[6]=-o,s[1]=s[3]=-a,s[2]=s[4]=1-o,s[5]=s[7]=1-a,n.invalidate();const l=e._texture,c=l.baseTexture,u=c.alphaMode>0,d=e.tileTransform.localTransform,p=e.uvMatrix;let m=c.isPowerOfTwo&&l.frame.width===c.width&&l.frame.height===c.height;m&&(c._glTextures[i.CONTEXT_UID]?m=c.wrapMode!==ou.CLAMP:c.wrapMode===ou.CLAMP&&(c.wrapMode=ou.REPEAT));const g=m?this.simpleShader:this.shader,y=l.width,_=l.height,x=e._width,O=e._height;OT.set(d.a*y/x,d.b*y/O,d.c*_/x,d.d*_/O,d.tx/x,d.ty/O),OT.invert(),m?OT.prepend(p.mapCoord):(g.uniforms.uMapCoord=p.mapCoord.toArray(!0),g.uniforms.uClampFrame=p.uClampFrame,g.uniforms.uClampOffset=p.uClampOffset),g.uniforms.uTransform=OT.toArray(!0),g.uniforms.uColor=Sn.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(g.uniforms.uColor),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=l,i.shader.bind(g),i.geometry.bind(n),this.state.blendMode=R6(e.blendMode,u),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}fF.extension={name:"tilingSprite",type:Ot.RendererPlugin};Qt.add(fF);const Vae=class Ab{constructor(e,i,n){this.linkedSheets=[],(e instanceof ki||e instanceof At)&&(e={texture:e,data:i,resolutionFilename:n});const{texture:s,data:o,resolutionFilename:a=null,cachePrefix:l=""}=e;this.cachePrefix=l,this._texture=s instanceof At?s:null,this.baseTexture=s instanceof ki?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=o;const c=this.baseTexture.resource;this.resolution=this._updateResolution(a||(c?c.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:i}=this.data.meta;let n=fu(e,null);return n===null&&(n=typeof i=="number"?i:parseFloat(i??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ab.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e;const n=Ab.BATCH_SIZE;for(;i-e<n&&i<this._frameKeys.length;){const s=this._frameKeys[i],o=this._frames[s],a=o.frame;if(a){let l=null,c=null;const u=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,d=new Ri(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);o.rotated?l=new Ri(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):l=new Ri(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(c=new Ri(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[s]=new At(this.baseTexture,l,d,c,o.rotated?2:0,o.anchor,o.borders),At.addToCache(this.textures[s],this.cachePrefix+s.toString())}i++}}_processAnimations(){const e=this.data.animations||{};for(const i in e){this.animations[i]=[];for(let n=0;n<e[i].length;n++){const s=e[i][n];this.animations[i].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ab.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ab.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var i;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((i=this._texture)==null||i.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Vae.BATCH_SIZE=1e3;let lL=Vae;const Xje=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Fae(r,e,i){const n={};if(r.forEach(s=>{n[s]=e}),Object.keys(e.textures).forEach(s=>{n[`${e.cachePrefix}${s}`]=e.textures[s]}),!i){const s=Ms.dirname(r[0]);e.linkedSheets.forEach((o,a)=>{Object.assign(n,Fae([`${s}/${e.data.meta.related_multi_packs[a]}`],o,!0))})}return n}const $ae={extension:Ot.Asset,cache:{test:r=>r instanceof lL,getCacheableAssets:(r,e)=>Fae(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),i=e.pop(),n=e.pop();return i==="json"&&Xje.includes(n)},parse:r=>{var i;const e=r.split(".");return{resolution:parseFloat(((i=Dt.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:Ot.LoadParser,priority:Oh.Normal},async testParse(r,e){return Ms.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,i){var d,p;const{texture:n,imageFilename:s,cachePrefix:o}=(e==null?void 0:e.data)??{};let a=Ms.dirname(e.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let l;if(n&&n.baseTexture)l=n;else{const m=fM(a+(s??r.meta.image),e.src);l=(await i.load([m]))[m]}const c=new lL({texture:l.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:o});await c.parse();const u=(d=r==null?void 0:r.meta)==null?void 0:d.related_multi_packs;if(Array.isArray(u)){const m=[];for(const y of u){if(typeof y!="string")continue;let _=a+y;(p=e.data)!=null&&p.ignoreMultiPack||(_=fM(_,e.src),m.push(i.load({src:_,data:{ignoreMultiPack:!0}})))}const g=await Promise.all(m);c.linkedSheets=g,g.forEach(y=>{y.linkedSheets=[c].concat(c.linkedSheets.filter(_=>_!==y))})}return c},unload(r){r.destroy(!0)}}};Qt.add($ae);class vO{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ew{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const i=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const o in i){const a=i[o].match(/^[a-z]+/gm)[0],l=i[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),c={};for(const u in l){const d=l[u].split("="),p=d[0],m=d[1].replace(/"/gm,""),g=parseFloat(m),y=isNaN(g)?m:g;c[p]=y}n[a].push(c)}const s=new vO;return n.info.forEach(o=>s.info.push({face:o.face,size:parseInt(o.size,10)})),n.common.forEach(o=>s.common.push({lineHeight:parseInt(o.lineHeight,10)})),n.page.forEach(o=>s.page.push({id:parseInt(o.id,10),file:o.file})),n.char.forEach(o=>s.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)})),n.kerning.forEach(o=>s.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)})),n.distanceField.forEach(o=>s.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType})),s}}class gM{static test(e){const i=e;return typeof e!="string"&&"getElementsByTagName"in e&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const i=new vO,n=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),l=e.getElementsByTagName("kerning"),c=e.getElementsByTagName("distanceField");for(let u=0;u<n.length;u++)i.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(let u=0;u<s.length;u++)i.common.push({lineHeight:parseInt(s[u].getAttribute("lineHeight"),10)});for(let u=0;u<o.length;u++)i.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(let u=0;u<a.length;u++){const d=a[u];i.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let u=0;u<l.length;u++)i.kerning.push({first:parseInt(l[u].getAttribute("first"),10),second:parseInt(l[u].getAttribute("second"),10),amount:parseInt(l[u].getAttribute("amount"),10)});for(let u=0;u<c.length;u++)i.distanceField.push({fieldType:c[u].getAttribute("fieldType"),distanceRange:parseInt(c[u].getAttribute("distanceRange"),10)});return i}}class vM{static test(e){return typeof e=="string"&&e.includes("<font>")?gM.test(Dt.ADAPTER.parseXML(e)):!1}static parse(e){return gM.parse(Dt.ADAPTER.parseXML(e))}}const AB=[ew,gM,vM];function Uae(r){for(let e=0;e<AB.length;e++)if(AB[e].test(r))return AB[e];return null}function Wje(r,e,i,n,s,o){const a=i.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;let l;const c=i.dropShadow?i.dropShadowDistance:0,u=i.padding||0,d=r.width/n-c-u*2,p=r.height/n-c-u*2,m=a.slice(),g=i.fillGradientStops.slice();if(!g.length){const y=m.length+1;for(let _=1;_<y;++_)g.push(_/y)}if(m.unshift(a[0]),g.unshift(0),m.push(a[a.length-1]),g.push(1),i.fillGradientType===xS.LINEAR_VERTICAL){l=e.createLinearGradient(d/2,u,d/2,p+u);let y=0;const _=(o.fontProperties.fontSize+i.strokeThickness)/p;for(let x=0;x<s.length;x++){const O=o.lineHeight*x;for(let S=0;S<m.length;S++){let w=0;typeof g[S]=="number"?w=g[S]:w=S/m.length;const C=O/p+w*_;let M=Math.max(y,C);M=Math.min(M,1),l.addColorStop(M,m[S]),y=M}}}else{l=e.createLinearGradient(u,p/2,d+u,p/2);const y=m.length+1;let _=1;for(let x=0;x<m.length;x++){let O;typeof g[x]=="number"?O=g[x]:O=_/y,l.addColorStop(O,m[x]),_++}}return l}function Gje(r,e,i,n,s,o,a){const l=i.text,c=i.fontProperties;e.translate(n,s),e.scale(o,o);const u=a.strokeThickness/2,d=-(a.strokeThickness/2);if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=Wje(r,e,a,o,[l],i),e.strokeStyle=a.stroke,a.dropShadow){const p=a.dropShadowColor,m=a.dropShadowBlur*o,g=a.dropShadowDistance*o;e.shadowColor=Sn.shared.setValue(p).setAlpha(a.dropShadowAlpha).toRgbaString(),e.shadowBlur=m,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*g,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*g}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(l,u,d+i.lineHeight-c.descent),a.fill&&e.fillText(l,u,d+i.lineHeight-c.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function zA(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function zae(r){return Array.from?Array.from(r):r.split("")}function Hje(r){typeof r=="string"&&(r=[r]);const e=[];for(let i=0,n=r.length;i<n;i++){const s=r[i];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const o=s[0].charCodeAt(0),a=s[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(let l=o,c=a;l<=c;l++)e.push(String.fromCharCode(l))}else e.push(...zae(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Vf=class Nc{constructor(e,i,n){var d;const[s]=e.info,[o]=e.common,[a]=e.page,[l]=e.distanceField,c=fu(a.file),u={};this._ownsTextures=n,this.font=s.face,this.size=s.size,this.lineHeight=o.lineHeight/c,this.chars={},this.pageTextures=u;for(let p=0;p<e.page.length;p++){const{id:m,file:g}=e.page[p];u[m]=i instanceof Array?i[p]:i[g],l!=null&&l.fieldType&&l.fieldType!=="none"&&(u[m].baseTexture.alphaMode=Yo.NO_PREMULTIPLIED_ALPHA,u[m].baseTexture.mipmap=uc.OFF)}for(let p=0;p<e.char.length;p++){const{id:m,page:g}=e.char[p];let{x:y,y:_,width:x,height:O,xoffset:S,yoffset:w,xadvance:C}=e.char[p];y/=c,_/=c,x/=c,O/=c,S/=c,w/=c,C/=c;const M=new Ri(y+u[g].frame.x/c,_+u[g].frame.y/c,x,O);this.chars[m]={xOffset:S,yOffset:w,xAdvance:C,kerning:{},texture:new At(u[g].baseTexture,M),page:g}}for(let p=0;p<e.kerning.length;p++){let{first:m,second:g,amount:y}=e.kerning[p];m/=c,g/=c,y/=c,this.chars[g]&&(this.chars[g].kerning[m]=y)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=((d=l==null?void 0:l.fieldType)==null?void 0:d.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,i,n){let s;if(e instanceof vO)s=e;else{const a=Uae(e);if(!a)throw new Error("Unrecognized data format for font.");s=a.parse(e)}i instanceof At&&(i=[i]);const o=new Nc(s,i,n);return Nc.available[o.font]=o,o}static uninstall(e){const i=Nc.available[e];if(!i)throw new Error(`No font found named '${e}'`);i.destroy(),delete Nc.available[e]}static from(e,i,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:o,resolution:a,textureWidth:l,textureHeight:c,...u}=Object.assign({},Nc.defaultOptions,n),d=Hje(s),p=i instanceof Nd?i:new Nd(i),m=l,g=new vO;g.info[0]={face:p.fontFamily,size:p.fontSize},g.common[0]={lineHeight:p.fontSize};let y=0,_=0,x,O,S,w=0;const C=[];for(let P=0;P<d.length;P++){x||(x=Dt.ADAPTER.createCanvas(),x.width=l,x.height=c,O=x.getContext("2d"),S=new ki(x,{resolution:a,...u}),C.push(new At(S)),g.page.push({id:C.length-1,file:""}));const R=d[P],k=sd.measureText(R,p,!1,x),I=k.width,A=Math.ceil(k.height),D=Math.ceil((p.fontStyle==="italic"?2:1)*I);if(_>=c-A*a){if(_===0)throw new Error(`[BitmapFont] textureHeight ${c}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${R}')`);--P,x=null,O=null,S=null,_=0,y=0,w=0;continue}if(w=Math.max(A+k.fontProperties.descent,w),D*a+y>=m){if(y===0)throw new Error(`[BitmapFont] textureWidth ${l}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${R}')`);--P,_+=w*a,_=Math.ceil(_),y=0,w=0;continue}Gje(x,O,k,y,_,a,p);const V=zA(k.text);g.char.push({id:V,page:C.length-1,x:y/a,y:_/a,width:D,height:A,xoffset:0,yoffset:0,xadvance:I-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),y+=(D+2*o)*a,y=Math.ceil(y)}if(!(n!=null&&n.skipKerning))for(let P=0,R=d.length;P<R;P++){const k=d[P];for(let I=0;I<R;I++){const A=d[I],D=O.measureText(k).width,V=O.measureText(A).width,B=O.measureText(k+A).width-(D+V);B&&g.kerning.push({first:zA(k),second:zA(A),amount:B})}}const M=new Nc(g,C,!0);return Nc.available[e]!==void 0&&Nc.uninstall(e),Nc.available[e]=M,M}};Vf.ALPHA=[["a","z"],["A","Z"]," "],Vf.NUMERIC=[["0","9"]],Vf.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Vf.ASCII=[[" ","~"]],Vf.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Vf.ALPHANUMERIC},Vf.available={};let td=Vf;var Qje=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,jje=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const fj=[],pj=[],mj=[],Xae=class Wae extends Ii{constructor(e,i={}){super();const{align:n,tint:s,maxWidth:o,letterSpacing:a,fontName:l,fontSize:c}=Object.assign({},Wae.styleDefaults,i);if(!td.available[l])throw new Error(`Missing BitmapFont "${l}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new Sn(s),this._font=void 0,this._fontName=l,this._fontSize=c,this.text=e,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=a,this._anchor=new eu(()=>{this.dirty=!0},this,0,0),this._roundPixels=Dt.ROUND_PIXELS,this.dirty=!0,this._resolution=Dt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var D;const e=td.available[this._fontName],i=this.fontSize,n=i/e.size,s=new ai,o=[],a=[],l=[],c=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=zae(c),d=this._maxWidth*e.size/i,p=e.distanceFieldType==="none"?fj:pj;let m=null,g=0,y=0,_=0,x=-1,O=0,S=0,w=0,C=0;for(let V=0;V<u.length;V++){const B=u[V],L=zA(B);if(/(?:\s)/.test(B)&&(x=V,O=g,C++),B==="\r"||B===`
`){a.push(g),l.push(-1),y=Math.max(y,g),++_,++S,s.x=0,s.y+=e.lineHeight,m=null,C=0;continue}const F=e.chars[L];if(!F)continue;m&&F.kerning[m]&&(s.x+=F.kerning[m]);const $=mj.pop()||{texture:At.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ai};$.texture=F.texture,$.line=_,$.charCode=L,$.position.x=Math.round(s.x+F.xOffset+this._letterSpacing/2),$.position.y=Math.round(s.y+F.yOffset),$.prevSpaces=C,o.push($),g=$.position.x+Math.max(F.xAdvance-F.xOffset,F.texture.orig.width),s.x+=F.xAdvance+this._letterSpacing,w=Math.max(w,F.yOffset+F.texture.height),m=L,x!==-1&&d>0&&s.x>d&&(++S,Bg(o,1+x-S,1+V-x),V=x,x=-1,a.push(O),l.push(o.length>0?o[o.length-1].prevSpaces:0),y=Math.max(y,O),_++,s.x=0,s.y+=e.lineHeight,m=null,C=0)}const M=u[u.length-1];M!=="\r"&&M!==`
`&&(/(?:\s)/.test(M)&&(g=O),a.push(g),y=Math.max(y,g),l.push(-1));const P=[];for(let V=0;V<=_;V++){let B=0;this._align==="right"?B=y-a[V]:this._align==="center"?B=(y-a[V])/2:this._align==="justify"&&(B=l[V]<0?0:(y-a[V])/l[V]),P.push(B)}const R=o.length,k={},I=[],A=this._activePagesMeshData;p.push(...A);for(let V=0;V<R;V++){const B=o[V].texture,L=B.baseTexture.uid;if(!k[L]){let F=p.pop();if(!F){const z=new _S;let H,K;e.distanceFieldType==="none"?(H=new d_(At.EMPTY),K=di.NORMAL):(H=new d_(At.EMPTY,{program:tu.from(jje,Qje),uniforms:{uFWidth:0}}),K=di.NORMAL_NPM);const J=new o0(z,H);J.blendMode=K,F={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:J,vertices:null,uvs:null,indices:null}}F.index=0,F.indexCount=0,F.vertexCount=0,F.uvsCount=0,F.total=0;const{_textureCache:$}=this;$[L]=$[L]||new At(B.baseTexture),F.mesh.texture=$[L],F.mesh.tint=this._tintColor.value,I.push(F),k[L]=F}k[L].total++}for(let V=0;V<A.length;V++)I.includes(A[V])||this.removeChild(A[V].mesh);for(let V=0;V<I.length;V++)I[V].mesh.parent!==this&&this.addChild(I[V].mesh);this._activePagesMeshData=I;for(const V in k){const B=k[V],L=B.total;if(!(((D=B.indices)==null?void 0:D.length)>6*L)||B.vertices.length<o0.BATCHABLE_SIZE*2)B.vertices=new Float32Array(4*2*L),B.uvs=new Float32Array(4*2*L),B.indices=new Uint16Array(6*L);else{const F=B.total,$=B.vertices;for(let z=F*4*2;z<$.length;z++)$[z]=0}B.mesh.size=6*L}for(let V=0;V<R;V++){const B=o[V];let L=B.position.x+P[B.line]*(this._align==="justify"?B.prevSpaces:1);this._roundPixels&&(L=Math.round(L));const F=L*n,$=B.position.y*n,z=B.texture,H=k[z.baseTexture.uid],K=z.frame,J=z._uvs,ne=H.index++;H.indices[ne*6+0]=0+ne*4,H.indices[ne*6+1]=1+ne*4,H.indices[ne*6+2]=2+ne*4,H.indices[ne*6+3]=0+ne*4,H.indices[ne*6+4]=2+ne*4,H.indices[ne*6+5]=3+ne*4,H.vertices[ne*8+0]=F,H.vertices[ne*8+1]=$,H.vertices[ne*8+2]=F+K.width*n,H.vertices[ne*8+3]=$,H.vertices[ne*8+4]=F+K.width*n,H.vertices[ne*8+5]=$+K.height*n,H.vertices[ne*8+6]=F,H.vertices[ne*8+7]=$+K.height*n,H.uvs[ne*8+0]=J.x0,H.uvs[ne*8+1]=J.y0,H.uvs[ne*8+2]=J.x1,H.uvs[ne*8+3]=J.y1,H.uvs[ne*8+4]=J.x2,H.uvs[ne*8+5]=J.y2,H.uvs[ne*8+6]=J.x3,H.uvs[ne*8+7]=J.y3}this._textWidth=y*n,this._textHeight=(s.y+e.lineHeight)*n;for(const V in k){const B=k[V];if(this.anchor.x!==0||this.anchor.y!==0){let z=0;const H=this._textWidth*this.anchor.x,K=this._textHeight*this.anchor.y;for(let J=0;J<B.total;J++)B.vertices[z++]-=H,B.vertices[z++]-=K,B.vertices[z++]-=H,B.vertices[z++]-=K,B.vertices[z++]-=H,B.vertices[z++]-=K,B.vertices[z++]-=H,B.vertices[z++]-=K}this._maxLineHeight=w*n;const L=B.mesh.geometry.getBuffer("aVertexPosition"),F=B.mesh.geometry.getBuffer("aTextureCoord"),$=B.mesh.geometry.getIndex();L.data=B.vertices,F.data=B.uvs,$.data=B.indices,L.update(),F.update(),$.update()}for(let V=0;V<o.length;V++)mj.push(o[V]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:i,distanceFieldType:n,size:s}=td.available[this._fontName];if(n!=="none"){const{a:o,b:a,c:l,d:c}=this.worldTransform,u=Math.sqrt(o*o+a*a),d=Math.sqrt(l*l+c*c),p=(Math.abs(u)+Math.abs(d))/2,m=this.fontSize/s,g=e._view.resolution;for(const y of this._activePagesMeshData)y.mesh.shader.uniforms.uFWidth=p*i*m*g}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=td.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!td.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??td.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:i}=this,n=td.available[this._fontName].distanceFieldType==="none"?fj:pj;n.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],n.filter(s=>i[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=At.EMPTY});for(const s in i)i[s].destroy(),delete i[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};Xae.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let Yje=Xae;const qje=[".xml",".fnt"],Gae={extension:{type:Ot.LoadParser,priority:Oh.Normal},name:"loadBitmapFont",test(r){return qje.includes(Ms.extname(r).toLowerCase())},async testParse(r){return ew.test(r)||vM.test(r)},async parse(r,e,i){const n=ew.test(r)?ew.parse(r):vM.parse(r),{src:s}=e,{page:o}=n,a=[];for(let u=0;u<o.length;++u){const d=o[u].file;let p=Ms.join(Ms.dirname(s),d);p=fM(p,s),a.push(p)}const l=await i.load(a),c=a.map(u=>l[u]);return td.install(n,c,!0)},async load(r,e){return(await Dt.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};Qt.add(Gae);const hL=class jv extends Nd{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new jv(Object.keys(jv.defaultOptions).reduce((i,n)=>({...i,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete jv.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,i={}){const{availableFonts:n}=jv;if(n[e]){const s=n[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Dt.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((o,a)=>{const l=URL.createObjectURL(s),c=new FileReader;c.onload=()=>o([l,c.result]),c.onerror=a,c.readAsDataURL(s)})).then(async([s,o])=>{const a=Object.assign({family:Ms.basename(e,Ms.extname(e)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:o,refs:1,originalUrl:e,fontFace:null},i);n[e]=a,this._fonts.push(a),this.styleID++;const l=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style,display:a.display});a.fontFace=l,await l.load(),document.fonts.add(l),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const i=e.filter(n=>!this._overrides.includes(n));i.length>0&&(this._overrides.push(...i),this.styleID++)}removeOverride(...e){const i=e.filter(n=>this._overrides.includes(n));i.length>0&&(this._overrides=this._overrides.filter(n=>!i.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,i)=>`${e}
            @font-face {
                font-family: "${i.family}";
                src: url('${i.dataSrc}');
                font-weight: ${i.weight};
                font-style: ${i.style};
                font-display: ${i.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Use(e)),typeof e=="number"?$se(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const i=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&i<1&&(e+=(i*255|0).toString(16).padStart(2,"0"));const o=`${n}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${o} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${o} ${e}`}reset(){Object.assign(this,jv.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(i=>setTimeout(i,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=Dt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};hL.availableFonts={},hL.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let XA=hL;const Eb=class Yv extends hr{constructor(e="",i={}){super(At.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,s=At.from(n,{scaleMode:Dt.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new Ri,s.trim=new Ri,this.texture=s;const o="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xhtml",l=document.createElementNS(o,"svg"),c=document.createElementNS(o,"foreignObject"),u=document.createElementNS(a,"div"),d=document.createElementNS(a,"style");c.setAttribute("width","10000"),c.setAttribute("height","10000"),c.style.overflow="hidden",l.appendChild(c),this.maxWidth=Yv.defaultMaxWidth,this.maxHeight=Yv.defaultMaxHeight,this._domElement=u,this._styleElement=d,this._svgRoot=l,this._foreignObject=c,this._foreignObject.appendChild(d),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=Yv.defaultAutoResolution,this._resolution=Yv.defaultResolution??Dt.RESOLUTION,this.text=e,this.style=i}measureText(e){var d,p;const{text:i,style:n,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:i,style:n.toCSS(s)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const o=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:a,height:l}=o;(a>this.maxWidth||l>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const c=Math.min(this.maxWidth,Math.ceil(a)),u=Math.min(this.maxHeight,Math.ceil(l));return this._svgRoot.setAttribute("width",c.toString()),this._svgRoot.setAttribute("height",u.toString()),i!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(d=this._style)==null?void 0:d.toCSS(s)}),this._styleElement.textContent=(p=this._style)==null?void 0:p.toGlobalCSS()),{width:c+n.padding*2,height:u+n.padding*2}}async updateText(e=!0){const{style:i,_image:n,_loadImage:s}=this;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!this.dirty&&e)return;const{width:o,height:a}=this.measureText();n.width=s.width=Math.ceil(Math.max(1,o)),n.height=s.height=Math.ceil(Math.max(1,a)),this._updateID++;const l=this._updateID;await new Promise(c=>{s.onload=async()=>{if(l<this._updateID){c();return}await i.onBeforeDraw(),n.src=s.src,s.onload=null,s.src="",this.updateTexture(),c()};const u=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:i,_image:n,resolution:s}=this,{padding:o}=e,{baseTexture:a}=i;i.trim.width=i._frame.width=n.width/s,i.trim.height=i._frame.height=n.height/s,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),a.setRealSize(n.width,n.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,s,o,a,l;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Yv.defaultDestroyOptions,e),super.destroy(e);const i=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=i,(s=this._svgRoot)==null||s.remove(),this._svgRoot=i,(o=this._domElement)==null||o.remove(),this._domElement=i,(a=this._foreignObject)==null||a.remove(),this._foreignObject=i,(l=this._styleElement)==null||l.remove(),this._styleElement=i,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=i,this._image.src="",this._image=i}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const i=fd(this.scale.x)||1;this.scale.x=i*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const i=fd(this.scale.y)||1;this.scale.y=i*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof XA?(this.ownsStyle=!1,this._style=e):e instanceof Nd?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=XA.from(e)):(this.ownsStyle=!0,this._style=new XA(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Eb.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Eb.defaultMaxWidth=2024,Eb.defaultMaxHeight=2024,Eb.defaultAutoResolution=!0;let Zje=Eb;const Kje=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:Yo,AbstractMultiResource:rF,AccessibilityManager:oF,AlphaFilter:Boe,AnimatedSprite:mM,Application:Jp,ArrayResource:Aoe,Assets:vl,AssetsClass:Joe,Attribute:sO,BLEND_MODES:di,BUFFER_BITS:KE,BUFFER_TYPE:ic,BackgroundSystem:aO,BaseImageResource:mu,BasePrepare:pM,BaseRenderTexture:N6,BaseTexture:ki,BatchDrawCall:oM,BatchGeometry:D6,BatchRenderer:Hf,BatchShaderGenerator:soe,BatchSystem:L6,BatchTextureArray:aM,BitmapFont:td,BitmapFontData:vO,BitmapText:Yje,BlobResource:cae,BlurFilter:Doe,BlurFilterPass:cM,Bounds:uO,BrowserAdapter:rse,Buffer:$r,BufferResource:dS,BufferSystem:iF,CLEAR_MODES:jh,COLOR_MASK_BITS:nse,Cache:ep,CanvasResource:Eoe,Circle:ok,Color:Sn,ColorMatrixFilter:uM,CompressedTextureResource:yp,Container:Ii,ContextSystem:lO,CountLimiter:Bae,CubeResource:Poe,DEG_TO_RAD:qse,DRAW_MODES:Jh,DisplacementFilter:Loe,DisplayObject:fr,ENV:qp,Ellipse:fS,EventBoundary:Foe,EventSystem:dM,ExtensionType:Ot,Extract:_ae,FORMATS:at,FORMATS_TO_COMPONENTS:dae,FXAAFilter:Noe,FederatedDisplayObject:$oe,FederatedEvent:F_,FederatedMouseEvent:dO,FederatedPointerEvent:Ul,FederatedWheelEvent:Lg,FillStyle:yS,Filter:bo,FilterState:aoe,FilterSystem:U6,Framebuffer:lM,FramebufferSystem:z6,GC_MODES:ZP,GLFramebuffer:loe,GLProgram:poe,GLTexture:NA,GRAPHICS_CURVES:pje,GenerateTextureSystem:j6,Geometry:pu,GeometrySystem:X6,Graphics:En,GraphicsData:gO,GraphicsGeometry:Cae,HTMLText:Zje,HTMLTextStyle:XA,IGLUniformData:EHe,INSTALLED:sM,INTERNAL_FORMATS:Vs,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:pO,ImageBitmapResource:vg,ImageResource:V6,LINE_CAP:pd,LINE_JOIN:ol,LineStyle:dk,LoaderParserPriority:Oh,MASK_TYPES:as,MIPMAP_MODES:uc,MSAA_QUALITY:Yr,MaskData:coe,MaskSystem:W6,Matrix:ir,Mesh:o0,MeshBatchUvs:Tae,MeshGeometry:_S,MeshMaterial:d_,MultisampleSystem:tF,NineSlicePlane:xje,NoiseFilter:Voe,ObjectRenderer:gS,ObjectRendererSystem:nF,ObservablePoint:eu,PI_2:oO,PRECISION:gl,ParticleContainer:Oje,ParticleRenderer:cF,PlaneGeometry:Mae,PluginSystem:H6,Point:ai,Polygon:vp,Prepare:uF,Program:tu,ProjectionSystem:Q6,Quad:ooe,QuadUv:$6,RAD_TO_DEG:Yse,RENDERER_TYPE:S6,Rectangle:Ri,RenderTexture:Kp,RenderTexturePool:F6,RenderTextureSystem:Y6,Renderer:hk,ResizePlugin:aF,Resource:u_,RopeGeometry:Pae,RoundedRectangle:pS,Runner:bl,SAMPLER_TYPES:Bt,SCALE_MODES:Jc,SHAPES:Ws,SVGResource:hM,ScissorSystem:foe,Shader:vh,ShaderSystem:q6,SimpleMesh:bje,SimplePlane:kae,SimpleRope:wje,Sprite:hr,SpriteMaskFilter:hoe,Spritesheet:lL,StartupSystem:hO,State:mc,StateSystem:boe,StencilSystem:G6,SystemManager:woe,TARGETS:Ig,TEXT_GRADIENT:xS,TYPES:ti,TYPES_TO_BYTES_PER_COMPONENT:iL,TYPES_TO_BYTES_PER_PIXEL:fae,TemporaryDisplayObject:koe,Text:Vn,TextFormat:ew,TextMetrics:sd,TextStyle:Nd,Texture:At,TextureGCSystem:Qf,TextureMatrix:lk,TextureSystem:Z6,TextureUvs:ak,Ticker:Rr,TickerPlugin:J6,TilingSprite:dF,TilingSpriteRenderer:fF,TimeLimiter:Vje,Transform:mS,TransformFeedback:QHe,TransformFeedbackSystem:K6,UPDATE_PRIORITY:Ld,UniformGroup:gh,VERSION:jHe,VideoResource:sF,ViewSystem:cO,ViewableBuffer:rM,WRAP_MODES:ou,XMLFormat:gM,XMLStringFormat:vM,accessibleTarget:Uoe,autoDetectFormat:Uae,autoDetectRenderer:Coe,autoDetectResource:B6,cacheTextureArray:eae,checkDataUrl:x0,checkExtension:Hd,checkMaxIfStatementsInShader:jse,convertToList:th,copySearchParams:fM,createStringVariations:Woe,createTexture:$_,createUBOElements:voe,curves:Lp,defaultFilterVertex:eF,defaultVertex:Toe,detectAvif:iae,detectCompressedTextures:hae,detectDefaults:rae,detectMp4:oae,detectOgv:aae,detectWebm:sae,detectWebp:nae,extensions:Qt,filters:qD,generateProgram:moe,generateUniformBufferSync:_oe,getFontFamilyName:Qoe,getTestContext:toe,getUBOData:yoe,graphicsUtils:vje,groupD8:yr,isMobile:ec,isSingleItem:fO,loadBitmapFont:Gae,loadDDS:mae,loadImageBitmap:qoe,loadJson:Goe,loadKTX:gae,loadSVG:Zoe,loadTextures:vS,loadTxt:Hoe,loadVideo:Koe,loadWebFont:joe,parseDDS:uae,parseKTX:pae,resolveCompressedTextureUrl:vae,resolveTextureUrl:lae,settings:Dt,spritesheetAsset:$ae,uniformParsers:Dg,unsafeEvalSupported:roe,utils:KGe},Symbol.toStringTag,{value:"Module"}));function id(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Hae(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var wl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},f_={duration:.5,overwrite:!1,delay:0},pF,ao,xr,hh=1e8,Yn=1/hh,cL=Math.PI*2,Jje=cL/4,eYe=0,Qae=Math.sqrt,tYe=Math.cos,iYe=Math.sin,Qs=function(e){return typeof e=="string"},zr=function(e){return typeof e=="function"},Vd=function(e){return typeof e=="number"},mF=function(e){return typeof e>"u"},gu=function(e){return typeof e=="object"},Ma=function(e){return e!==!1},gF=function(){return typeof window<"u"},ST=function(e){return zr(e)||Qs(e)},jae=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Oo=Array.isArray,uL=/(?:-?\.?\d|\.)+/gi,Yae=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,sy=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,EB=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,qae=/[+-]=-?[.\d]+/,Zae=/[^,'"\[\]\s]+/gi,nYe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ar,Xc,dL,vF,Sl={},yM={},Kae,Jae=function(e){return(yM=p_(e,Sl))&&Na},yF=function(e,i){return console.warn("Invalid property",e,"set to",i,"Missing plugin? gsap.registerPlugin()")},yO=function(e,i){return!i&&console.warn(e)},ele=function(e,i){return e&&(Sl[e]=i)&&yM&&(yM[e]=i)||Sl},_O=function(){return 0},rYe={suppressEvents:!0,isStart:!0,kill:!1},WA={suppressEvents:!0,kill:!1},sYe={suppressEvents:!0},_F={},_p=[],fL={},tle,ll={},MB={},gj=30,GA=[],xF="",bF=function(e){var i=e[0],n,s;if(gu(i)||zr(i)||(e=[e]),!(n=(i._gsap||{}).harness)){for(s=GA.length;s--&&!GA[s].targetTest(i););n=GA[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new Cle(e[s],n)))||e.splice(s,1);return e},Ng=function(e){return e._gsap||bF(ch(e))[0]._gsap},ile=function(e,i,n){return(n=e[i])&&zr(n)?e[i]():mF(n)&&e.getAttribute&&e.getAttribute(i)||n},Pa=function(e,i){return(e=e.split(",")).forEach(i)||e},jr=function(e){return Math.round(e*1e5)/1e5||0},cs=function(e){return Math.round(e*1e7)/1e7||0},Ry=function(e,i){var n=i.charAt(0),s=parseFloat(i.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},oYe=function(e,i){for(var n=i.length,s=0;e.indexOf(i[s])<0&&++s<n;);return s<n},_M=function(){var e=_p.length,i=_p.slice(0),n,s;for(fL={},_p.length=0,n=0;n<e;n++)s=i[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},wF=function(e){return!!(e._initted||e._startAt||e.add)},nle=function(e,i,n,s){_p.length&&!ao&&_M(),e.render(i,n,!!(ao&&i<0&&wF(e))),_p.length&&!ao&&_M()},rle=function(e){var i=parseFloat(e);return(i||i===0)&&(e+"").match(Zae).length<2?i:Qs(e)?e.trim():e},sle=function(e){return e},Cl=function(e,i){for(var n in i)n in e||(e[n]=i[n]);return e},aYe=function(e){return function(i,n){for(var s in n)s in i||s==="duration"&&e||s==="ease"||(i[s]=n[s])}},p_=function(e,i){for(var n in i)e[n]=i[n];return e},vj=function r(e,i){for(var n in i)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=gu(i[n])?r(e[n]||(e[n]={}),i[n]):i[n]);return e},xM=function(e,i){var n={},s;for(s in e)s in i||(n[s]=e[s]);return n},tw=function(e){var i=e.parent||Ar,n=e.keyframes?aYe(Oo(e.keyframes)):Cl;if(Ma(e.inherit))for(;i;)n(e,i.vars.defaults),i=i.parent||i._dp;return e},lYe=function(e,i){for(var n=e.length,s=n===i.length;s&&n--&&e[n]===i[n];);return n<0},ole=function(e,i,n,s,o){var a=e[s],l;if(o)for(l=i[o];a&&a[o]>l;)a=a._prev;return a?(i._next=a._next,a._next=i):(i._next=e[n],e[n]=i),i._next?i._next._prev=i:e[s]=i,i._prev=a,i.parent=i._dp=e,i},fk=function(e,i,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var o=i._prev,a=i._next;o?o._next=a:e[n]===i&&(e[n]=a),a?a._prev=o:e[s]===i&&(e[s]=o),i._next=i._prev=i.parent=null},Np=function(e,i){e.parent&&(!i||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Vg=function(e,i){if(e&&(!i||i._end>e._dur||i._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},hYe=function(e){for(var i=e.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return e},pL=function(e,i,n,s){return e._startAt&&(ao?e._startAt.revert(WA):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(i,!0,s))},cYe=function r(e){return!e||e._ts&&r(e.parent)},yj=function(e){return e._repeat?m_(e._tTime,e=e.duration()+e._rDelay)*e:0},m_=function(e,i){var n=Math.floor(e=cs(e/i));return e&&n===e?n-1:n},bM=function(e,i){return(e-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},pk=function(e){return e._end=cs(e._start+(e._tDur/Math.abs(e._ts||e._rts||Yn)||0))},mk=function(e,i){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=cs(n._time-(e._ts>0?i/e._ts:((e._dirty?e.totalDuration():e._tDur)-i)/-e._ts)),pk(e),n._dirty||Vg(n,e)),e},ale=function(e,i){var n;if((i._time||!i._dur&&i._initted||i._start<e._time&&(i._dur||!i.add))&&(n=bM(e.rawTime(),i),(!i._dur||bS(0,i.totalDuration(),n)-i._tTime>Yn)&&i.render(n,!0)),Vg(e,i)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Yn}},jc=function(e,i,n,s){return i.parent&&Np(i),i._start=cs((Vd(n)?n:n||e!==Ar?zl(e,n,i):e._time)+i._delay),i._end=cs(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),ole(e,i,"_first","_last",e._sort?"_start":0),mL(i)||(e._recent=i),s||ale(e,i),e._ts<0&&mk(e,e._tTime),e},lle=function(e,i){return(Sl.ScrollTrigger||yF("scrollTrigger",i))&&Sl.ScrollTrigger.create(i,e)},hle=function(e,i,n,s,o){if(SF(e,i,o),!e._initted)return 1;if(!n&&e._pt&&!ao&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&tle!==fl.frame)return _p.push(e),e._lazy=[o,s],1},uYe=function r(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||r(i))},mL=function(e){var i=e.data;return i==="isFromStart"||i==="isStart"},dYe=function(e,i,n,s){var o=e.ratio,a=i<0||!i&&(!e._start&&uYe(e)&&!(!e._initted&&mL(e))||(e._ts<0||e._dp._ts<0)&&!mL(e))?0:1,l=e._rDelay,c=0,u,d,p;if(l&&e._repeat&&(c=bS(0,e._tDur,i),d=m_(c,l),e._yoyo&&d&1&&(a=1-a),d!==m_(e._tTime,l)&&(o=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==o||ao||s||e._zTime===Yn||!i&&e._zTime){if(!e._initted&&hle(e,i,s,n,c))return;for(p=e._zTime,e._zTime=i||(n?Yn:0),n||(n=i&&!p),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,u=e._pt;u;)u.r(a,u.d),u=u._next;i<0&&pL(e,i,n,!0),e._onUpdate&&!n&&yl(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&yl(e,"onRepeat"),(i>=e._tDur||i<0)&&e.ratio===a&&(a&&Np(e,1),!n&&!ao&&(yl(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=i)},fYe=function(e,i,n){var s;if(n>i)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>i)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<i)return s;s=s._prev}},g_=function(e,i,n,s){var o=e._repeat,a=cs(i)||0,l=e._tTime/e._tDur;return l&&!s&&(e._time*=a/e._dur),e._dur=a,e._tDur=o?o<0?1e10:cs(a*(o+1)+e._rDelay*o):a,l>0&&!s&&mk(e,e._tTime=e._tDur*l),e.parent&&pk(e),n||Vg(e.parent,e),e},_j=function(e){return e instanceof Qo?Vg(e):g_(e,e._dur)},pYe={_start:0,endTime:_O,totalDuration:_O},zl=function r(e,i,n){var s=e.labels,o=e._recent||pYe,a=e.duration()>=hh?o.endTime(!1):e._dur,l,c,u;return Qs(i)&&(isNaN(i)||i in s)?(c=i.charAt(0),u=i.substr(-1)==="%",l=i.indexOf("="),c==="<"||c===">"?(l>=0&&(i=i.replace(/=/,"")),(c==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(i.substr(1))||0)*(u?(l<0?o:n).totalDuration()/100:1)):l<0?(i in s||(s[i]=a),s[i]):(c=parseFloat(i.charAt(l-1)+i.substr(l+1)),u&&n&&(c=c/100*(Oo(n)?n[0]:n).totalDuration()),l>1?r(e,i.substr(0,l-1),n)+c:a+c)):i==null?a:+i},iw=function(e,i,n){var s=Vd(i[1]),o=(s?2:1)+(e<2?0:1),a=i[o],l,c;if(s&&(a.duration=i[1]),a.parent=n,e){for(l=a,c=n;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=Ma(c.vars.inherit)&&c.parent;a.immediateRender=Ma(l.immediateRender),e<2?a.runBackwards=1:a.startAt=i[o-1]}return new hs(i[0],a,i[o+1])},em=function(e,i){return e||e===0?i(e):i},bS=function(e,i,n){return n<e?e:n>i?i:n},xo=function(e,i){return!Qs(e)||!(i=nYe.exec(e))?"":i[1]},mYe=function(e,i,n){return em(n,function(s){return bS(e,i,s)})},gL=[].slice,cle=function(e,i){return e&&gu(e)&&"length"in e&&(!i&&!e.length||e.length-1 in e&&gu(e[0]))&&!e.nodeType&&e!==Xc},gYe=function(e,i,n){return n===void 0&&(n=[]),e.forEach(function(s){var o;return Qs(s)&&!i||cle(s,1)?(o=n).push.apply(o,ch(s)):n.push(s)})||n},ch=function(e,i,n){return xr&&!i&&xr.selector?xr.selector(e):Qs(e)&&!n&&(dL||!v_())?gL.call((i||vF).querySelectorAll(e),0):Oo(e)?gYe(e,n):cle(e)?gL.call(e,0):e?[e]:[]},vL=function(e){return e=ch(e)[0]||yO("Invalid scope")||{},function(i){var n=e.current||e.nativeElement||e;return ch(i,n.querySelectorAll?n:n===e?yO("Invalid scope")||vF.createElement("div"):e)}},ule=function(e){return e.sort(function(){return .5-Math.random()})},dle=function(e){if(zr(e))return e;var i=gu(e)?e:{each:e},n=Fg(i.ease),s=i.from||0,o=parseFloat(i.base)||0,a={},l=s>0&&s<1,c=isNaN(s)||l,u=i.axis,d=s,p=s;return Qs(s)?d=p={center:.5,edges:.5,end:1}[s]||0:!l&&c&&(d=s[0],p=s[1]),function(m,g,y){var _=(y||i).length,x=a[_],O,S,w,C,M,P,R,k,I;if(!x){if(I=i.grid==="auto"?0:(i.grid||[1,hh])[1],!I){for(R=-hh;R<(R=y[I++].getBoundingClientRect().left)&&I<_;);I<_&&I--}for(x=a[_]=[],O=c?Math.min(I,_)*d-.5:s%I,S=I===hh?0:c?_*p/I-.5:s/I|0,R=0,k=hh,P=0;P<_;P++)w=P%I-O,C=S-(P/I|0),x[P]=M=u?Math.abs(u==="y"?C:w):Qae(w*w+C*C),M>R&&(R=M),M<k&&(k=M);s==="random"&&ule(x),x.max=R-k,x.min=k,x.v=_=(parseFloat(i.amount)||parseFloat(i.each)*(I>_?_-1:u?u==="y"?_/I:I:Math.max(I,_/I))||0)*(s==="edges"?-1:1),x.b=_<0?o-_:o,x.u=xo(i.amount||i.each)||0,n=n&&_<0?wle(n):n}return _=(x[m]-x.min)/x.max||0,cs(x.b+(n?n(_):_)*x.v)+x.u}},yL=function(e){var i=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=cs(Math.round(parseFloat(n)/e)*e*i);return(s-s%1)/i+(Vd(n)?0:xo(n))}},fle=function(e,i){var n=Oo(e),s,o;return!n&&gu(e)&&(s=n=e.radius||hh,e.values?(e=ch(e.values),(o=!Vd(e[0]))&&(s*=s)):e=yL(e.increment)),em(i,n?zr(e)?function(a){return o=e(a),Math.abs(o-a)<=s?o:a}:function(a){for(var l=parseFloat(o?a.x:a),c=parseFloat(o?a.y:0),u=hh,d=0,p=e.length,m,g;p--;)o?(m=e[p].x-l,g=e[p].y-c,m=m*m+g*g):m=Math.abs(e[p]-l),m<u&&(u=m,d=p);return d=!s||u<=s?e[d]:a,o||d===a||Vd(a)?d:d+xo(a)}:yL(e))},ple=function(e,i,n,s){return em(Oo(e)?!i:n===!0?!!(n=0):!s,function(){return Oo(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(i-e+n*.99))/n)*n*s)/s})},vYe=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return function(s){return i.reduce(function(o,a){return a(o)},s)}},yYe=function(e,i){return function(n){return e(parseFloat(n))+(i||xo(n))}},_Ye=function(e,i,n){return gle(e,i,0,1,n)},mle=function(e,i,n){return em(n,function(s){return e[~~i(s)]})},xYe=function r(e,i,n){var s=i-e;return Oo(e)?mle(e,r(0,e.length),i):em(n,function(o){return(s+(o-e)%s)%s+e})},bYe=function r(e,i,n){var s=i-e,o=s*2;return Oo(e)?mle(e,r(0,e.length-1),i):em(n,function(a){return a=(o+(a-e)%o)%o||0,e+(a>s?o-a:a)})},xO=function(e){for(var i=0,n="",s,o,a,l;~(s=e.indexOf("random(",i));)a=e.indexOf(")",s),l=e.charAt(s+7)==="[",o=e.substr(s+7,a-s-7).match(l?Zae:uL),n+=e.substr(i,s-i)+ple(l?o:+o[0],l?0:+o[1],+o[2]||1e-5),i=a+1;return n+e.substr(i,e.length-i)},gle=function(e,i,n,s,o){var a=i-e,l=s-n;return em(o,function(c){return n+((c-e)/a*l||0)})},wYe=function r(e,i,n,s){var o=isNaN(e+i)?0:function(g){return(1-g)*e+g*i};if(!o){var a=Qs(e),l={},c,u,d,p,m;if(n===!0&&(s=1)&&(n=null),a)e={p:e},i={p:i};else if(Oo(e)&&!Oo(i)){for(d=[],p=e.length,m=p-2,u=1;u<p;u++)d.push(r(e[u-1],e[u]));p--,o=function(y){y*=p;var _=Math.min(m,~~y);return d[_](y-_)},n=i}else s||(e=p_(Oo(e)?[]:{},e));if(!d){for(c in i)OF.call(l,e,c,"get",i[c]);o=function(y){return AF(y,l)||(a?e.p:e)}}}return em(n,o)},xj=function(e,i,n){var s=e.labels,o=hh,a,l,c;for(a in s)l=s[a]-i,l<0==!!n&&l&&o>(l=Math.abs(l))&&(c=a,o=l);return c},yl=function(e,i,n){var s=e.vars,o=s[i],a=xr,l=e._ctx,c,u,d;if(o)return c=s[i+"Params"],u=s.callbackScope||e,n&&_p.length&&_M(),l&&(xr=l),d=c?o.apply(u,c):o.call(u),xr=a,d},Mb=function(e){return Np(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ao),e.progress()<1&&yl(e,"onInterrupt"),e},oy,vle=[],yle=function(e){if(e)if(e=!e.name&&e.default||e,gF()||e.headless){var i=e.name,n=zr(e),s=i&&!n&&e.init?function(){this._props=[]}:e,o={init:_O,render:AF,add:OF,kill:VYe,modifier:NYe,rawVars:0},a={targetTest:0,get:0,getSetter:TF,aliases:{},register:0};if(v_(),e!==s){if(ll[i])return;Cl(s,Cl(xM(e,o),a)),p_(s.prototype,p_(o,xM(e,a))),ll[s.prop=i]=s,e.targetTest&&(GA.push(s),_F[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}ele(i,s),e.register&&e.register(Na,s,ka)}else vle.push(e)},Qn=255,Pb={aqua:[0,Qn,Qn],lime:[0,Qn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Qn],navy:[0,0,128],white:[Qn,Qn,Qn],olive:[128,128,0],yellow:[Qn,Qn,0],orange:[Qn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Qn,0,0],pink:[Qn,192,203],cyan:[0,Qn,Qn],transparent:[Qn,Qn,Qn,0]},PB=function(e,i,n){return e+=e<0?1:e>1?-1:0,(e*6<1?i+(n-i)*e*6:e<.5?n:e*3<2?i+(n-i)*(2/3-e)*6:i)*Qn+.5|0},_le=function(e,i,n){var s=e?Vd(e)?[e>>16,e>>8&Qn,e&Qn]:0:Pb.black,o,a,l,c,u,d,p,m,g,y;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Pb[e])s=Pb[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),a=e.charAt(2),l=e.charAt(3),e="#"+o+o+a+a+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Qn,s&Qn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Qn,e&Qn]}else if(e.substr(0,3)==="hsl"){if(s=y=e.match(uL),!i)c=+s[0]%360/360,u=+s[1]/100,d=+s[2]/100,a=d<=.5?d*(u+1):d+u-d*u,o=d*2-a,s.length>3&&(s[3]*=1),s[0]=PB(c+1/3,o,a),s[1]=PB(c,o,a),s[2]=PB(c-1/3,o,a);else if(~e.indexOf("="))return s=e.match(Yae),n&&s.length<4&&(s[3]=1),s}else s=e.match(uL)||Pb.transparent;s=s.map(Number)}return i&&!y&&(o=s[0]/Qn,a=s[1]/Qn,l=s[2]/Qn,p=Math.max(o,a,l),m=Math.min(o,a,l),d=(p+m)/2,p===m?c=u=0:(g=p-m,u=d>.5?g/(2-p-m):g/(p+m),c=p===o?(a-l)/g+(a<l?6:0):p===a?(l-o)/g+2:(o-a)/g+4,c*=60),s[0]=~~(c+.5),s[1]=~~(u*100+.5),s[2]=~~(d*100+.5)),n&&s.length<4&&(s[3]=1),s},xle=function(e){var i=[],n=[],s=-1;return e.split(xp).forEach(function(o){var a=o.match(sy)||[];i.push.apply(i,a),n.push(s+=a.length+1)}),i.c=n,i},bj=function(e,i,n){var s="",o=(e+s).match(xp),a=i?"hsla(":"rgba(",l=0,c,u,d,p;if(!o)return e;if(o=o.map(function(m){return(m=_le(m,i,1))&&a+(i?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(d=xle(e),c=n.c,c.join(s)!==d.c.join(s)))for(u=e.replace(xp,"1").split(sy),p=u.length-1;l<p;l++)s+=u[l]+(~c.indexOf(l)?o.shift()||a+"0,0,0,0)":(d.length?d:o.length?o:n).shift());if(!u)for(u=e.split(xp),p=u.length-1;l<p;l++)s+=u[l]+o[l];return s+u[p]},xp=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Pb)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),OYe=/hsl[a]?\(/,ble=function(e){var i=e.join(" "),n;if(xp.lastIndex=0,xp.test(i))return n=OYe.test(i),e[1]=bj(e[1],n),e[0]=bj(e[0],n,xle(e[1])),!0},bO,fl=function(){var r=Date.now,e=500,i=33,n=r(),s=n,o=1e3/240,a=o,l=[],c,u,d,p,m,g,y=function _(x){var O=r()-s,S=x===!0,w,C,M,P;if((O>e||O<0)&&(n+=O-i),s+=O,M=s-n,w=M-a,(w>0||S)&&(P=++p.frame,m=M-p.time*1e3,p.time=M=M/1e3,a+=w+(w>=o?4:o-w),C=1),S||(c=u(_)),C)for(g=0;g<l.length;g++)l[g](M,m,P,x)};return p={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(x){return m/(1e3/(x||60))},wake:function(){Kae&&(!dL&&gF()&&(Xc=dL=window,vF=Xc.document||{},Sl.gsap=Na,(Xc.gsapVersions||(Xc.gsapVersions=[])).push(Na.version),Jae(yM||Xc.GreenSockGlobals||!Xc.gsap&&Xc||{}),vle.forEach(yle)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&p.sleep(),u=d||function(x){return setTimeout(x,a-p.time*1e3+1|0)},bO=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(c),bO=0,u=_O},lagSmoothing:function(x,O){e=x||1/0,i=Math.min(O||33,e)},fps:function(x){o=1e3/(x||240),a=p.time*1e3+o},add:function(x,O,S){var w=O?function(C,M,P,R){x(C,M,P,R),p.remove(w)}:x;return p.remove(x),l[S?"unshift":"push"](w),v_(),w},remove:function(x,O){~(O=l.indexOf(x))&&l.splice(O,1)&&g>=O&&g--},_listeners:l},p}(),v_=function(){return!bO&&fl.wake()},mn={},SYe=/^[\d.\-M][\d.\-,\s]/,CYe=/["']/g,TYe=function(e){for(var i={},n=e.substr(1,e.length-3).split(":"),s=n[0],o=1,a=n.length,l,c,u;o<a;o++)c=n[o],l=o!==a-1?c.lastIndexOf(","):c.length,u=c.substr(0,l),i[s]=isNaN(u)?u.replace(CYe,"").trim():+u,s=c.substr(l+1).trim();return i},AYe=function(e){var i=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",i);return e.substring(i,~s&&s<n?e.indexOf(")",n+1):n)},EYe=function(e){var i=(e+"").split("("),n=mn[i[0]];return n&&i.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[TYe(i[1])]:AYe(e).split(",").map(rle)):mn._CE&&SYe.test(e)?mn._CE("",e):n},wle=function(e){return function(i){return 1-e(1-i)}},Ole=function r(e,i){for(var n=e._first,s;n;)n instanceof Qo?r(n,i):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==i&&(n.timeline?r(n.timeline,i):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=i)),n=n._next},Fg=function(e,i){return e&&(zr(e)?e:mn[e]||EYe(e))||i},b0=function(e,i,n,s){n===void 0&&(n=function(c){return 1-i(1-c)}),s===void 0&&(s=function(c){return c<.5?i(c*2)/2:1-i((1-c)*2)/2});var o={easeIn:i,easeOut:n,easeInOut:s},a;return Pa(e,function(l){mn[l]=Sl[l]=o,mn[a=l.toLowerCase()]=n;for(var c in o)mn[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=mn[l+"."+c]=o[c]}),o},Sle=function(e){return function(i){return i<.5?(1-e(1-i*2))/2:.5+e((i-.5)*2)/2}},kB=function r(e,i,n){var s=i>=1?i:1,o=(n||(e?.3:.45))/(i<1?i:1),a=o/cL*(Math.asin(1/s)||0),l=function(d){return d===1?1:s*Math.pow(2,-10*d)*iYe((d-a)*o)+1},c=e==="out"?l:e==="in"?function(u){return 1-l(1-u)}:Sle(l);return o=cL/o,c.config=function(u,d){return r(e,u,d)},c},IB=function r(e,i){i===void 0&&(i=1.70158);var n=function(a){return a?--a*a*((i+1)*a+i)+1:0},s=e==="out"?n:e==="in"?function(o){return 1-n(1-o)}:Sle(n);return s.config=function(o){return r(e,o)},s};Pa("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var i=e<5?e+1:e;b0(r+",Power"+(i-1),e?function(n){return Math.pow(n,i)}:function(n){return n},function(n){return 1-Math.pow(1-n,i)},function(n){return n<.5?Math.pow(n*2,i)/2:1-Math.pow((1-n)*2,i)/2})});mn.Linear.easeNone=mn.none=mn.Linear.easeIn;b0("Elastic",kB("in"),kB("out"),kB());(function(r,e){var i=1/e,n=2*i,s=2.5*i,o=function(l){return l<i?r*l*l:l<n?r*Math.pow(l-1.5/e,2)+.75:l<s?r*(l-=2.25/e)*l+.9375:r*Math.pow(l-2.625/e,2)+.984375};b0("Bounce",function(a){return 1-o(1-a)},o)})(7.5625,2.75);b0("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});b0("Circ",function(r){return-(Qae(1-r*r)-1)});b0("Sine",function(r){return r===1?1:-tYe(r*Jje)+1});b0("Back",IB("in"),IB("out"),IB());mn.SteppedEase=mn.steps=Sl.SteppedEase={config:function(e,i){e===void 0&&(e=1);var n=1/e,s=e+(i?0:1),o=i?1:0,a=1-Yn;return function(l){return((s*bS(0,a,l)|0)+o)*n}}};f_.ease=mn["quad.out"];Pa("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return xF+=r+","+r+"Params,"});var Cle=function(e,i){this.id=eYe++,e._gsap=this,this.target=e,this.harness=i,this.get=i?i.get:ile,this.set=i?i.getSetter:TF},wO=function(){function r(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,g_(this,+i.duration,1,1),this.data=i.data,xr&&(this._ctx=xr,xr.data.push(this)),bO||fl.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,g_(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(v_(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(mk(this,n),!o._dp||o.parent||ale(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&jc(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Yn||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),nle(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+yj(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+yj(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*o,s):this._repeat?m_(this._tTime,o)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-Yn?0:this._rts;if(this._rts===n)return this;var o=this.parent&&this._ts?bM(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Yn?0:this._rts,this.totalTime(bS(-Math.abs(this._delay),this.totalDuration(),o),s!==!1),pk(this),hYe(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(v_(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Yn&&(this._tTime-=Yn)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&jc(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Ma(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?bM(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=sYe);var s=ao;return ao=n,wF(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ao=s,this},e.globalTime=function(n){for(var s=this,o=arguments.length?n:s.rawTime();s;)o=s._start+o/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):o},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,_j(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,_j(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(zl(this,n),Ma(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,Ma(s)),this._dur||(this._zTime=-Yn),this},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Yn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Yn,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,o;return!!(!n||this._ts&&this._initted&&n.isActive()&&(o=n.rawTime(!0))>=s&&o<this.endTime(!0)-Yn)},e.eventCallback=function(n,s,o){var a=this.vars;return arguments.length>1?(s?(a[n]=s,o&&(a[n+"Params"]=o),n==="onUpdate"&&(this._onUpdate=s)):delete a[n],this):a[n]},e.then=function(n){var s=this;return new Promise(function(o){var a=zr(n)?n:sle,l=function(){var u=s.then;s.then=null,zr(a)&&(a=a(s))&&(a.then||a===s)&&(s.then=u),o(a),s.then=u};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},e.kill=function(){Mb(this)},r}();Cl(wO.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Yn,_prom:0,_ps:!1,_rts:1});var Qo=function(r){Hae(e,r);function e(n,s){var o;return n===void 0&&(n={}),o=r.call(this,n)||this,o.labels={},o.smoothChildTiming=!!n.smoothChildTiming,o.autoRemoveChildren=!!n.autoRemoveChildren,o._sort=Ma(n.sortChildren),Ar&&jc(n.parent||Ar,id(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),n.scrollTrigger&&lle(id(o),n.scrollTrigger),o}var i=e.prototype;return i.to=function(s,o,a){return iw(0,arguments,this),this},i.from=function(s,o,a){return iw(1,arguments,this),this},i.fromTo=function(s,o,a,l){return iw(2,arguments,this),this},i.set=function(s,o,a){return o.duration=0,o.parent=this,tw(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new hs(s,o,zl(this,a),1),this},i.call=function(s,o,a){return jc(this,hs.delayedCall(0,s,o),a)},i.staggerTo=function(s,o,a,l,c,u,d){return a.duration=o,a.stagger=a.stagger||l,a.onComplete=u,a.onCompleteParams=d,a.parent=this,new hs(s,a,zl(this,c)),this},i.staggerFrom=function(s,o,a,l,c,u,d){return a.runBackwards=1,tw(a).immediateRender=Ma(a.immediateRender),this.staggerTo(s,o,a,l,c,u,d)},i.staggerFromTo=function(s,o,a,l,c,u,d,p){return l.startAt=a,tw(l).immediateRender=Ma(l.immediateRender),this.staggerTo(s,o,l,c,u,d,p)},i.render=function(s,o,a){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=s<=0?0:cs(s),p=this._zTime<0!=s<0&&(this._initted||!u),m,g,y,_,x,O,S,w,C,M,P,R;if(this!==Ar&&d>c&&s>=0&&(d=c),d!==this._tTime||a||p){if(l!==this._time&&u&&(d+=this._time-l,s+=this._time-l),m=d,C=this._start,w=this._ts,O=!w,p&&(u||(l=this._zTime),(s||!o)&&(this._zTime=s)),this._repeat){if(P=this._yoyo,x=u+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(x*100+s,o,a);if(m=cs(d%x),d===c?(_=this._repeat,m=u):(M=cs(d/x),_=~~M,_&&_===M&&(m=u,_--),m>u&&(m=u)),M=m_(this._tTime,x),!l&&this._tTime&&M!==_&&this._tTime-M*x-this._dur<=0&&(M=_),P&&_&1&&(m=u-m,R=1),_!==M&&!this._lock){var k=P&&M&1,I=k===(P&&_&1);if(_<M&&(k=!k),l=k?0:d%u?u:d,this._lock=1,this.render(l||(R?0:cs(_*x)),o,!u)._lock=0,this._tTime=d,!o&&this.parent&&yl(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),l&&l!==this._time||O!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,c=this._tDur,I&&(this._lock=2,l=k?u:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!O)return this;Ole(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=fYe(this,cs(l),cs(m)),S&&(d-=m-(m=S._start))),this._tTime=d,this._time=m,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&d&&!o&&!M&&(yl(this,"onStart"),this._tTime!==d))return this;if(m>=l&&s>=0)for(g=this._first;g;){if(y=g._next,(g._act||m>=g._start)&&g._ts&&S!==g){if(g.parent!==this)return this.render(s,o,a);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,o,a),m!==this._time||!this._ts&&!O){S=0,y&&(d+=this._zTime=-Yn);break}}g=y}else{g=this._last;for(var A=s<0?s:m;g;){if(y=g._prev,(g._act||A<=g._end)&&g._ts&&S!==g){if(g.parent!==this)return this.render(s,o,a);if(g.render(g._ts>0?(A-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(A-g._start)*g._ts,o,a||ao&&wF(g)),m!==this._time||!this._ts&&!O){S=0,y&&(d+=this._zTime=A?-Yn:Yn);break}}g=y}}if(S&&!o&&(this.pause(),S.render(m>=l?0:-Yn)._zTime=m>=l?1:-1,this._ts))return this._start=C,pk(this),this.render(s,o,a);this._onUpdate&&!o&&yl(this,"onUpdate",!0),(d===c&&this._tTime>=this.totalDuration()||!d&&l)&&(C===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((s||!u)&&(d===c&&this._ts>0||!d&&this._ts<0)&&Np(this,1),!o&&!(s<0&&!l)&&(d||l||!c)&&(yl(this,d===c&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(s,o){var a=this;if(Vd(o)||(o=zl(this,o,s)),!(s instanceof wO)){if(Oo(s))return s.forEach(function(l){return a.add(l,o)}),this;if(Qs(s))return this.addLabel(s,o);if(zr(s))s=hs.delayedCall(0,s);else return this}return this!==s?jc(this,s,o):this},i.getChildren=function(s,o,a,l){s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=!0),l===void 0&&(l=-hh);for(var c=[],u=this._first;u;)u._start>=l&&(u instanceof hs?o&&c.push(u):(a&&c.push(u),s&&c.push.apply(c,u.getChildren(!0,o,a)))),u=u._next;return c},i.getById=function(s){for(var o=this.getChildren(1,1,1),a=o.length;a--;)if(o[a].vars.id===s)return o[a]},i.remove=function(s){return Qs(s)?this.removeLabel(s):zr(s)?this.killTweensOf(s):(s.parent===this&&fk(this,s),s===this._recent&&(this._recent=this._last),Vg(this))},i.totalTime=function(s,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=cs(fl.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),r.prototype.totalTime.call(this,s,o),this._forcing=0,this):this._tTime},i.addLabel=function(s,o){return this.labels[s]=zl(this,o),this},i.removeLabel=function(s){return delete this.labels[s],this},i.addPause=function(s,o,a){var l=hs.delayedCall(0,o||_O,a);return l.data="isPause",this._hasPause=1,jc(this,l,zl(this,s))},i.removePause=function(s){var o=this._first;for(s=zl(this,s);o;)o._start===s&&o.data==="isPause"&&Np(o),o=o._next},i.killTweensOf=function(s,o,a){for(var l=this.getTweensOf(s,a),c=l.length;c--;)lp!==l[c]&&l[c].kill(s,o);return this},i.getTweensOf=function(s,o){for(var a=[],l=ch(s),c=this._first,u=Vd(o),d;c;)c instanceof hs?oYe(c._targets,l)&&(u?(!lp||c._initted&&c._ts)&&c.globalTime(0)<=o&&c.globalTime(c.totalDuration())>o:!o||c.isActive())&&a.push(c):(d=c.getTweensOf(l,o)).length&&a.push.apply(a,d),c=c._next;return a},i.tweenTo=function(s,o){o=o||{};var a=this,l=zl(a,s),c=o,u=c.startAt,d=c.onStart,p=c.onStartParams,m=c.immediateRender,g,y=hs.to(a,Cl({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:o.duration||Math.abs((l-(u&&"time"in u?u.time:a._time))/a.timeScale())||Yn,onStart:function(){if(a.pause(),!g){var x=o.duration||Math.abs((l-(u&&"time"in u?u.time:a._time))/a.timeScale());y._dur!==x&&g_(y,x,0,1).render(y._time,!0,!0),g=1}d&&d.apply(y,p||[])}},o));return m?y.render(0):y},i.tweenFromTo=function(s,o,a){return this.tweenTo(o,Cl({startAt:{time:zl(this,s)}},a))},i.recent=function(){return this._recent},i.nextLabel=function(s){return s===void 0&&(s=this._time),xj(this,zl(this,s))},i.previousLabel=function(s){return s===void 0&&(s=this._time),xj(this,zl(this,s),1)},i.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Yn)},i.shiftChildren=function(s,o,a){a===void 0&&(a=0);for(var l=this._first,c=this.labels,u;l;)l._start>=a&&(l._start+=s,l._end+=s),l=l._next;if(o)for(u in c)c[u]>=a&&(c[u]+=s);return Vg(this)},i.invalidate=function(s){var o=this._first;for(this._lock=0;o;)o.invalidate(s),o=o._next;return r.prototype.invalidate.call(this,s)},i.clear=function(s){s===void 0&&(s=!0);for(var o=this._first,a;o;)a=o._next,this.remove(o),o=a;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Vg(this)},i.totalDuration=function(s){var o=0,a=this,l=a._last,c=hh,u,d,p;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-s:s));if(a._dirty){for(p=a.parent;l;)u=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>c&&a._sort&&l._ts&&!a._lock?(a._lock=1,jc(a,l,d-l._delay,1)._lock=0):c=d,d<0&&l._ts&&(o-=d,(!p&&!a._dp||p&&p.smoothChildTiming)&&(a._start+=d/a._ts,a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),c=0),l._end>o&&l._ts&&(o=l._end),l=u;g_(a,a===Ar&&a._time>o?a._time:o,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(s){if(Ar._ts&&(nle(Ar,bM(s,Ar)),tle=fl.frame),fl.frame>=gj){gj+=wl.autoSleep||120;var o=Ar._first;if((!o||!o._ts)&&wl.autoSleep&&fl._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||fl.sleep()}}},e}(wO);Cl(Qo.prototype,{_lock:0,_hasPause:0,_forcing:0});var MYe=function(e,i,n,s,o,a,l){var c=new ka(this._pt,e,i,0,1,kle,null,o),u=0,d=0,p,m,g,y,_,x,O,S;for(c.b=n,c.e=s,n+="",s+="",(O=~s.indexOf("random("))&&(s=xO(s)),a&&(S=[n,s],a(S,e,i),n=S[0],s=S[1]),m=n.match(EB)||[];p=EB.exec(s);)y=p[0],_=s.substring(u,p.index),g?g=(g+1)%5:_.substr(-5)==="rgba("&&(g=1),y!==m[d++]&&(x=parseFloat(m[d-1])||0,c._pt={_next:c._pt,p:_||d===1?_:",",s:x,c:y.charAt(1)==="="?Ry(x,y)-x:parseFloat(y)-x,m:g&&g<4?Math.round:0},u=EB.lastIndex);return c.c=u<s.length?s.substring(u,s.length):"",c.fp=l,(qae.test(s)||O)&&(c.e=0),this._pt=c,c},OF=function(e,i,n,s,o,a,l,c,u,d){zr(s)&&(s=s(o||0,e,a));var p=e[i],m=n!=="get"?n:zr(p)?u?e[i.indexOf("set")||!zr(e["get"+i.substr(3)])?i:"get"+i.substr(3)](u):e[i]():p,g=zr(p)?u?BYe:Mle:CF,y;if(Qs(s)&&(~s.indexOf("random(")&&(s=xO(s)),s.charAt(1)==="="&&(y=Ry(m,s)+(xo(m)||0),(y||y===0)&&(s=y))),!d||m!==s||_L)return!isNaN(m*s)&&s!==""?(y=new ka(this._pt,e,i,+m||0,s-(m||0),typeof p=="boolean"?LYe:Ple,0,g),u&&(y.fp=u),l&&y.modifier(l,this,e),this._pt=y):(!p&&!(i in e)&&yF(i,s),MYe.call(this,e,i,m,s,g,c||wl.stringFilter,u))},PYe=function(e,i,n,s,o){if(zr(e)&&(e=nw(e,o,i,n,s)),!gu(e)||e.style&&e.nodeType||Oo(e)||jae(e))return Qs(e)?nw(e,o,i,n,s):e;var a={},l;for(l in e)a[l]=nw(e[l],o,i,n,s);return a},Tle=function(e,i,n,s,o,a){var l,c,u,d;if(ll[e]&&(l=new ll[e]).init(o,l.rawVars?i[e]:PYe(i[e],s,o,a,n),n,s,a)!==!1&&(n._pt=c=new ka(n._pt,o,e,0,1,l.render,l,0,l.priority),n!==oy))for(u=n._ptLookup[n._targets.indexOf(o)],d=l._props.length;d--;)u[l._props[d]]=c;return l},lp,_L,SF=function r(e,i,n){var s=e.vars,o=s.ease,a=s.startAt,l=s.immediateRender,c=s.lazy,u=s.onUpdate,d=s.runBackwards,p=s.yoyoEase,m=s.keyframes,g=s.autoRevert,y=e._dur,_=e._startAt,x=e._targets,O=e.parent,S=O&&O.data==="nested"?O.vars.targets:x,w=e._overwrite==="auto"&&!pF,C=e.timeline,M,P,R,k,I,A,D,V,B,L,F,$,z;if(C&&(!m||!o)&&(o="none"),e._ease=Fg(o,f_.ease),e._yEase=p?wle(Fg(p===!0?o:p,f_.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!C&&!!s.runBackwards,!C||m&&!s.stagger){if(V=x[0]?Ng(x[0]).harness:0,$=V&&s[V.prop],M=xM(s,_F),_&&(_._zTime<0&&_.progress(1),i<0&&d&&l&&!g?_.render(-1,!0):_.revert(d&&y?WA:rYe),_._lazy=0),a){if(Np(e._startAt=hs.set(x,Cl({data:"isStart",overwrite:!1,parent:O,immediateRender:!0,lazy:!_&&Ma(c),startAt:null,delay:0,onUpdate:u&&function(){return yl(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,i<0&&(ao||!l&&!g)&&e._startAt.revert(WA),l&&y&&i<=0&&n<=0){i&&(e._zTime=i);return}}else if(d&&y&&!_){if(i&&(l=!1),R=Cl({overwrite:!1,data:"isFromStart",lazy:l&&!_&&Ma(c),immediateRender:l,stagger:0,parent:O},M),$&&(R[V.prop]=$),Np(e._startAt=hs.set(x,R)),e._startAt._dp=0,e._startAt._sat=e,i<0&&(ao?e._startAt.revert(WA):e._startAt.render(-1,!0)),e._zTime=i,!l)r(e._startAt,Yn,Yn);else if(!i)return}for(e._pt=e._ptCache=0,c=y&&Ma(c)||c&&!y,P=0;P<x.length;P++){if(I=x[P],D=I._gsap||bF(x)[P]._gsap,e._ptLookup[P]=L={},fL[D.id]&&_p.length&&_M(),F=S===x?P:S.indexOf(I),V&&(B=new V).init(I,$||M,e,F,S)!==!1&&(e._pt=k=new ka(e._pt,I,B.name,0,1,B.render,B,0,B.priority),B._props.forEach(function(H){L[H]=k}),B.priority&&(A=1)),!V||$)for(R in M)ll[R]&&(B=Tle(R,M,e,F,I,S))?B.priority&&(A=1):L[R]=k=OF.call(e,I,R,"get",M[R],F,S,0,s.stringFilter);e._op&&e._op[P]&&e.kill(I,e._op[P]),w&&e._pt&&(lp=e,Ar.killTweensOf(I,L,e.globalTime(i)),z=!e.parent,lp=0),e._pt&&c&&(fL[D.id]=1)}A&&Ile(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!z,m&&i<=0&&C.render(hh,!0,!0)},kYe=function(e,i,n,s,o,a,l,c){var u=(e._pt&&e._ptCache||(e._ptCache={}))[i],d,p,m,g;if(!u)for(u=e._ptCache[i]=[],m=e._ptLookup,g=e._targets.length;g--;){if(d=m[g][i],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==i&&d.fp!==i;)d=d._next;if(!d)return _L=1,e.vars[i]="+=0",SF(e,l),_L=0,c?yO(i+" not eligible for reset"):1;u.push(d)}for(g=u.length;g--;)p=u[g],d=p._pt||p,d.s=(s||s===0)&&!o?s:d.s+(s||0)+a*d.c,d.c=n-d.s,p.e&&(p.e=jr(n)+xo(p.e)),p.b&&(p.b=d.s+xo(p.b))},IYe=function(e,i){var n=e[0]?Ng(e[0]).harness:0,s=n&&n.aliases,o,a,l,c;if(!s)return i;o=p_({},i);for(a in s)if(a in o)for(c=s[a].split(","),l=c.length;l--;)o[c[l]]=o[a];return o},RYe=function(e,i,n,s){var o=i.ease||s||"power1.inOut",a,l;if(Oo(i))l=n[e]||(n[e]=[]),i.forEach(function(c,u){return l.push({t:u/(i.length-1)*100,v:c,e:o})});else for(a in i)l=n[a]||(n[a]=[]),a==="ease"||l.push({t:parseFloat(e),v:i[a],e:o})},nw=function(e,i,n,s,o){return zr(e)?e.call(i,n,s,o):Qs(e)&&~e.indexOf("random(")?xO(e):e},Ale=xF+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Ele={};Pa(Ale+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return Ele[r]=1});var hs=function(r){Hae(e,r);function e(n,s,o,a){var l;typeof s=="number"&&(o.duration=s,s=o,o=null),l=r.call(this,a?s:tw(s))||this;var c=l.vars,u=c.duration,d=c.delay,p=c.immediateRender,m=c.stagger,g=c.overwrite,y=c.keyframes,_=c.defaults,x=c.scrollTrigger,O=c.yoyoEase,S=s.parent||Ar,w=(Oo(n)||jae(n)?Vd(n[0]):"length"in s)?[n]:ch(n),C,M,P,R,k,I,A,D;if(l._targets=w.length?bF(w):yO("GSAP target "+n+" not found. https://gsap.com",!wl.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,y||m||ST(u)||ST(d)){if(s=l.vars,C=l.timeline=new Qo({data:"nested",defaults:_||{},targets:S&&S.data==="nested"?S.vars.targets:w}),C.kill(),C.parent=C._dp=id(l),C._start=0,m||ST(u)||ST(d)){if(R=w.length,A=m&&dle(m),gu(m))for(k in m)~Ale.indexOf(k)&&(D||(D={}),D[k]=m[k]);for(M=0;M<R;M++)P=xM(s,Ele),P.stagger=0,O&&(P.yoyoEase=O),D&&p_(P,D),I=w[M],P.duration=+nw(u,id(l),M,I,w),P.delay=(+nw(d,id(l),M,I,w)||0)-l._delay,!m&&R===1&&P.delay&&(l._delay=d=P.delay,l._start+=d,P.delay=0),C.to(I,P,A?A(M,I,w):0),C._ease=mn.none;C.duration()?u=d=0:l.timeline=0}else if(y){tw(Cl(C.vars.defaults,{ease:"none"})),C._ease=Fg(y.ease||s.ease||"none");var V=0,B,L,F;if(Oo(y))y.forEach(function($){return C.to(w,$,">")}),C.duration();else{P={};for(k in y)k==="ease"||k==="easeEach"||RYe(k,y[k],P,y.easeEach);for(k in P)for(B=P[k].sort(function($,z){return $.t-z.t}),V=0,M=0;M<B.length;M++)L=B[M],F={ease:L.e,duration:(L.t-(M?B[M-1].t:0))/100*u},F[k]=L.v,C.to(w,F,V),V+=F.duration;C.duration()<u&&C.to({},{duration:u-C.duration()})}}u||l.duration(u=C.duration())}else l.timeline=0;return g===!0&&!pF&&(lp=id(l),Ar.killTweensOf(w),lp=0),jc(S,id(l),o),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(p||!u&&!y&&l._start===cs(S._time)&&Ma(p)&&cYe(id(l))&&S.data!=="nested")&&(l._tTime=-Yn,l.render(Math.max(0,-d)||0)),x&&lle(id(l),x),l}var i=e.prototype;return i.render=function(s,o,a){var l=this._time,c=this._tDur,u=this._dur,d=s<0,p=s>c-Yn&&!d?c:s<Yn?0:s,m,g,y,_,x,O,S,w,C;if(!u)dYe(this,s,o,a);else if(p!==this._tTime||!s||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(m=p,w=this.timeline,this._repeat){if(_=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(_*100+s,o,a);if(m=cs(p%_),p===c?(y=this._repeat,m=u):(x=cs(p/_),y=~~x,y&&y===x?(m=u,y--):m>u&&(m=u)),O=this._yoyo&&y&1,O&&(C=this._yEase,m=u-m),x=m_(this._tTime,_),m===l&&!a&&this._initted&&y===x)return this._tTime=p,this;y!==x&&(w&&this._yEase&&Ole(w,O),this.vars.repeatRefresh&&!O&&!this._lock&&m!==_&&this._initted&&(this._lock=a=1,this.render(cs(_*y),!0).invalidate()._lock=0))}if(!this._initted){if(hle(this,d?s:m,a,o,p))return this._tTime=0,this;if(l!==this._time&&!(a&&this.vars.repeatRefresh&&y!==x))return this;if(u!==this._dur)return this.render(s,o,a)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(C||this._ease)(m/u),this._from&&(this.ratio=S=1-S),!l&&p&&!o&&!x&&(yl(this,"onStart"),this._tTime!==p))return this;for(g=this._pt;g;)g.r(S,g.d),g=g._next;w&&w.render(s<0?s:w._dur*w._ease(m/this._dur),o,a)||this._startAt&&(this._zTime=s),this._onUpdate&&!o&&(d&&pL(this,s,o,a),yl(this,"onUpdate")),this._repeat&&y!==x&&this.vars.onRepeat&&!o&&this.parent&&yl(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(d&&!this._onUpdate&&pL(this,s,!0,!0),(s||!u)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Np(this,1),!o&&!(d&&!l)&&(p||l||O)&&(yl(this,p===c?"onComplete":"onReverseComplete",!0),this._prom&&!(p<c&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),r.prototype.invalidate.call(this,s)},i.resetTo=function(s,o,a,l,c){bO||fl.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||SF(this,u),d=this._ease(u/this._dur),kYe(this,s,o,a,l,d,u,c)?this.resetTo(s,o,a,l,1):(mk(this,0),this.parent||ole(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(s,o){if(o===void 0&&(o="all"),!s&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?Mb(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ao),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(s,o,lp&&lp.vars.overwrite!==!0)._first||Mb(this),this.parent&&a!==this.timeline.totalDuration()&&g_(this,this._dur*this.timeline._tDur/a,0,1),this}var l=this._targets,c=s?ch(s):l,u=this._ptLookup,d=this._pt,p,m,g,y,_,x,O;if((!o||o==="all")&&lYe(l,c))return o==="all"&&(this._pt=0),Mb(this);for(p=this._op=this._op||[],o!=="all"&&(Qs(o)&&(_={},Pa(o,function(S){return _[S]=1}),o=_),o=IYe(l,o)),O=l.length;O--;)if(~c.indexOf(l[O])){m=u[O],o==="all"?(p[O]=o,y=m,g={}):(g=p[O]=p[O]||{},y=o);for(_ in y)x=m&&m[_],x&&((!("kill"in x.d)||x.d.kill(_)===!0)&&fk(this,x,"_pt"),delete m[_]),g!=="all"&&(g[_]=1)}return this._initted&&!this._pt&&d&&Mb(this),this},e.to=function(s,o){return new e(s,o,arguments[2])},e.from=function(s,o){return iw(1,arguments)},e.delayedCall=function(s,o,a,l){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:o,onReverseComplete:o,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:l})},e.fromTo=function(s,o,a){return iw(2,arguments)},e.set=function(s,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(s,o)},e.killTweensOf=function(s,o,a){return Ar.killTweensOf(s,o,a)},e}(wO);Cl(hs.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Pa("staggerTo,staggerFrom,staggerFromTo",function(r){hs[r]=function(){var e=new Qo,i=gL.call(arguments,0);return i.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,i)}});var CF=function(e,i,n){return e[i]=n},Mle=function(e,i,n){return e[i](n)},BYe=function(e,i,n,s){return e[i](s.fp,n)},DYe=function(e,i,n){return e.setAttribute(i,n)},TF=function(e,i){return zr(e[i])?Mle:mF(e[i])&&e.setAttribute?DYe:CF},Ple=function(e,i){return i.set(i.t,i.p,Math.round((i.s+i.c*e)*1e6)/1e6,i)},LYe=function(e,i){return i.set(i.t,i.p,!!(i.s+i.c*e),i)},kle=function(e,i){var n=i._pt,s="";if(!e&&i.b)s=i.b;else if(e===1&&i.e)s=i.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=i.c}i.set(i.t,i.p,s,i)},AF=function(e,i){for(var n=i._pt;n;)n.r(e,n.d),n=n._next},NYe=function(e,i,n,s){for(var o=this._pt,a;o;)a=o._next,o.p===s&&o.modifier(e,i,n),o=a},VYe=function(e){for(var i=this._pt,n,s;i;)s=i._next,i.p===e&&!i.op||i.op===e?fk(this,i,"_pt"):i.dep||(n=1),i=s;return!n},FYe=function(e,i,n,s){s.mSet(e,i,s.m.call(s.tween,n,s.mt),s)},Ile=function(e){for(var i=e._pt,n,s,o,a;i;){for(n=i._next,s=o;s&&s.pr>i.pr;)s=s._next;(i._prev=s?s._prev:a)?i._prev._next=i:o=i,(i._next=s)?s._prev=i:a=i,i=n}e._pt=o},ka=function(){function r(i,n,s,o,a,l,c,u,d){this.t=n,this.s=o,this.c=a,this.p=s,this.r=l||Ple,this.d=c||this,this.set=u||CF,this.pr=d||0,this._next=i,i&&(i._prev=this)}var e=r.prototype;return e.modifier=function(n,s,o){this.mSet=this.mSet||this.set,this.set=FYe,this.m=n,this.mt=o,this.tween=s},r}();Pa(xF+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return _F[r]=1});Sl.TweenMax=Sl.TweenLite=hs;Sl.TimelineLite=Sl.TimelineMax=Qo;Ar=new Qo({sortChildren:!1,defaults:f_,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});wl.stringFilter=ble;var $g=[],HA={},$Ye=[],wj=0,UYe=0,RB=function(e){return(HA[e]||$Ye).map(function(i){return i()})},xL=function(){var e=Date.now(),i=[];e-wj>2&&(RB("matchMediaInit"),$g.forEach(function(n){var s=n.queries,o=n.conditions,a,l,c,u;for(l in s)a=Xc.matchMedia(s[l]).matches,a&&(c=1),a!==o[l]&&(o[l]=a,u=1);u&&(n.revert(),c&&i.push(n))}),RB("matchMediaRevert"),i.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),wj=e,RB("matchMedia"))},Rle=function(){function r(i,n){this.selector=n&&vL(n),this.data=[],this._r=[],this.isReverted=!1,this.id=UYe++,i&&this.add(i)}var e=r.prototype;return e.add=function(n,s,o){zr(n)&&(o=s,s=n,n=zr);var a=this,l=function(){var u=xr,d=a.selector,p;return u&&u!==a&&u.data.push(a),o&&(a.selector=vL(o)),xr=a,p=s.apply(a,arguments),zr(p)&&a._r.push(p),xr=u,a.selector=d,a.isReverted=!1,p};return a.last=l,n===zr?l(a,function(c){return a.add(null,c)}):n?a[n]=l:l},e.ignore=function(n){var s=xr;xr=null,n(this),xr=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof r?n.push.apply(n,s.getTweens()):s instanceof hs&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var o=this;if(n?function(){for(var l=o.getTweens(),c=o.data.length,u;c--;)u=o.data[c],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,p){return p.g-d.g||-1/0}).forEach(function(d){return d.t.revert(n)}),c=o.data.length;c--;)u=o.data[c],u instanceof Qo?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof hs)&&u.revert&&u.revert(n);o._r.forEach(function(d){return d(n,o)}),o.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var a=$g.length;a--;)$g[a].id===this.id&&$g.splice(a,1)},e.revert=function(n){this.kill(n||{})},r}(),zYe=function(){function r(i){this.contexts=[],this.scope=i,xr&&xr.data.push(this)}var e=r.prototype;return e.add=function(n,s,o){gu(n)||(n={matches:n});var a=new Rle(0,o||this.scope),l=a.conditions={},c,u,d;xr&&!a.selector&&(a.selector=xr.selector),this.contexts.push(a),s=a.add("onMatch",s),a.queries=n;for(u in n)u==="all"?d=1:(c=Xc.matchMedia(n[u]),c&&($g.indexOf(a)<0&&$g.push(a),(l[u]=c.matches)&&(d=1),c.addListener?c.addListener(xL):c.addEventListener("change",xL)));return d&&s(a,function(p){return a.add(null,p)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},r}(),wM={registerPlugin:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach(function(s){return yle(s)})},timeline:function(e){return new Qo(e)},getTweensOf:function(e,i){return Ar.getTweensOf(e,i)},getProperty:function(e,i,n,s){Qs(e)&&(e=ch(e)[0]);var o=Ng(e||{}).get,a=n?sle:rle;return n==="native"&&(n=""),e&&(i?a((ll[i]&&ll[i].get||o)(e,i,n,s)):function(l,c,u){return a((ll[l]&&ll[l].get||o)(e,l,c,u))})},quickSetter:function(e,i,n){if(e=ch(e),e.length>1){var s=e.map(function(d){return Na.quickSetter(d,i,n)}),o=s.length;return function(d){for(var p=o;p--;)s[p](d)}}e=e[0]||{};var a=ll[i],l=Ng(e),c=l.harness&&(l.harness.aliases||{})[i]||i,u=a?function(d){var p=new a;oy._pt=0,p.init(e,n?d+n:d,oy,0,[e]),p.render(1,p),oy._pt&&AF(1,oy)}:l.set(e,c);return a?u:function(d){return u(e,c,n?d+n:d,l,1)}},quickTo:function(e,i,n){var s,o=Na.to(e,Cl((s={},s[i]="+=0.1",s.paused=!0,s.stagger=0,s),n||{})),a=function(c,u,d){return o.resetTo(i,c,u,d)};return a.tween=o,a},isTweening:function(e){return Ar.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Fg(e.ease,f_.ease)),vj(f_,e||{})},config:function(e){return vj(wl,e||{})},registerEffect:function(e){var i=e.name,n=e.effect,s=e.plugins,o=e.defaults,a=e.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!ll[l]&&!Sl[l]&&yO(i+" effect requires "+l+" plugin.")}),MB[i]=function(l,c,u){return n(ch(l),Cl(c||{},o),u)},a&&(Qo.prototype[i]=function(l,c,u){return this.add(MB[i](l,gu(c)?c:(u=c)&&{},this),u)})},registerEase:function(e,i){mn[e]=Fg(i)},parseEase:function(e,i){return arguments.length?Fg(e,i):mn},getById:function(e){return Ar.getById(e)},exportRoot:function(e,i){e===void 0&&(e={});var n=new Qo(e),s,o;for(n.smoothChildTiming=Ma(e.smoothChildTiming),Ar.remove(n),n._dp=0,n._time=n._tTime=Ar._time,s=Ar._first;s;)o=s._next,(i||!(!s._dur&&s instanceof hs&&s.vars.onComplete===s._targets[0]))&&jc(n,s,s._start-s._delay),s=o;return jc(Ar,n,0),n},context:function(e,i){return e?new Rle(e,i):xr},matchMedia:function(e){return new zYe(e)},matchMediaRefresh:function(){return $g.forEach(function(e){var i=e.conditions,n,s;for(s in i)i[s]&&(i[s]=!1,n=1);n&&e.revert()})||xL()},addEventListener:function(e,i){var n=HA[e]||(HA[e]=[]);~n.indexOf(i)||n.push(i)},removeEventListener:function(e,i){var n=HA[e],s=n&&n.indexOf(i);s>=0&&n.splice(s,1)},utils:{wrap:xYe,wrapYoyo:bYe,distribute:dle,random:ple,snap:fle,normalize:_Ye,getUnit:xo,clamp:mYe,splitColor:_le,toArray:ch,selector:vL,mapRange:gle,pipe:vYe,unitize:yYe,interpolate:wYe,shuffle:ule},install:Jae,effects:MB,ticker:fl,updateRoot:Qo.updateRoot,plugins:ll,globalTimeline:Ar,core:{PropTween:ka,globals:ele,Tween:hs,Timeline:Qo,Animation:wO,getCache:Ng,_removeLinkedListItem:fk,reverting:function(){return ao},context:function(e){return e&&xr&&(xr.data.push(e),e._ctx=xr),xr},suppressOverwrites:function(e){return pF=e}}};Pa("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return wM[r]=hs[r]});fl.add(Qo.updateRoot);oy=wM.to({},{duration:0});var XYe=function(e,i){for(var n=e._pt;n&&n.p!==i&&n.op!==i&&n.fp!==i;)n=n._next;return n},WYe=function(e,i){var n=e._targets,s,o,a;for(s in i)for(o=n.length;o--;)a=e._ptLookup[o][s],a&&(a=a.d)&&(a._pt&&(a=XYe(a,s)),a&&a.modifier&&a.modifier(i[s],e,n[o],s))},BB=function(e,i){return{name:e,headless:1,rawVars:1,init:function(s,o,a){a._onInit=function(l){var c,u;if(Qs(o)&&(c={},Pa(o,function(d){return c[d]=1}),o=c),i){c={};for(u in o)c[u]=i(o[u]);o=c}WYe(l,o)}}}},Na=wM.registerPlugin({name:"attr",init:function(e,i,n,s,o){var a,l,c;this.tween=n;for(a in i)c=e.getAttribute(a)||"",l=this.add(e,"setAttribute",(c||0)+"",i[a],s,o,0,0,a),l.op=a,l.b=c,this._props.push(a)},render:function(e,i){for(var n=i._pt;n;)ao?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,i){for(var n=i.length;n--;)this.add(e,n,e[n]||0,i[n],0,0,0,0,0,1)}},BB("roundProps",yL),BB("modifiers"),BB("snap",fle))||wM;hs.version=Qo.version=Na.version="3.13.0";Kae=1;gF()&&v_();mn.Power0;mn.Power1;mn.Power2;mn.Power3;mn.Power4;mn.Linear;mn.Quad;mn.Cubic;mn.Quart;mn.Quint;mn.Strong;mn.Elastic;mn.Back;mn.SteppedEase;mn.Bounce;mn.Sine;mn.Expo;mn.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Oj,hp,By,EF,yg,Sj,MF,GYe=function(){return typeof window<"u"},Fd={},ig=180/Math.PI,Dy=Math.PI/180,Cv=Math.atan2,Cj=1e8,PF=/([A-Z])/g,HYe=/(left|right|width|margin|padding|x)/i,QYe=/[\s,\(]\S/,iu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},bL=function(e,i){return i.set(i.t,i.p,Math.round((i.s+i.c*e)*1e4)/1e4+i.u,i)},jYe=function(e,i){return i.set(i.t,i.p,e===1?i.e:Math.round((i.s+i.c*e)*1e4)/1e4+i.u,i)},YYe=function(e,i){return i.set(i.t,i.p,e?Math.round((i.s+i.c*e)*1e4)/1e4+i.u:i.b,i)},qYe=function(e,i){var n=i.s+i.c*e;i.set(i.t,i.p,~~(n+(n<0?-.5:.5))+i.u,i)},Ble=function(e,i){return i.set(i.t,i.p,e?i.e:i.b,i)},Dle=function(e,i){return i.set(i.t,i.p,e!==1?i.b:i.e,i)},ZYe=function(e,i,n){return e.style[i]=n},KYe=function(e,i,n){return e.style.setProperty(i,n)},JYe=function(e,i,n){return e._gsap[i]=n},eqe=function(e,i,n){return e._gsap.scaleX=e._gsap.scaleY=n},tqe=function(e,i,n,s,o){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(o,a)},iqe=function(e,i,n,s,o){var a=e._gsap;a[i]=n,a.renderTransform(o,a)},Pr="transform",Ia=Pr+"Origin",nqe=function r(e,i){var n=this,s=this.target,o=s.style,a=s._gsap;if(e in Fd&&o){if(this.tfm=this.tfm||{},e!=="transform")e=iu[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return n.tfm[l]=od(s,l)}):this.tfm[e]=a.x?a[e]:od(s,e),e===Ia&&(this.tfm.zOrigin=a.zOrigin);else return iu.transform.split(",").forEach(function(l){return r.call(n,l,i)});if(this.props.indexOf(Pr)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Ia,i,"")),e=Pr}(o||i)&&this.props.push(e,i,o[e])},Lle=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},rqe=function(){var e=this.props,i=this.target,n=i.style,s=i._gsap,o,a;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?i[e[o]](e[o+2]):i[e[o]]=e[o+2]:e[o+2]?n[e[o]]=e[o+2]:n.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(PF,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)s[a]=this.tfm[a];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),o=MF(),(!o||!o.isStart)&&!n[Pr]&&(Lle(n),s.zOrigin&&n[Ia]&&(n[Ia]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Nle=function(e,i){var n={target:e,props:[],revert:rqe,save:nqe};return e._gsap||Na.core.getCache(e),i&&e.style&&e.nodeType&&i.split(",").forEach(function(s){return n.save(s)}),n},Vle,wL=function(e,i){var n=hp.createElementNS?hp.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):hp.createElement(e);return n&&n.style?n:hp.createElement(e)},uh=function r(e,i,n){var s=getComputedStyle(e);return s[i]||s.getPropertyValue(i.replace(PF,"-$1").toLowerCase())||s.getPropertyValue(i)||!n&&r(e,y_(i)||i,1)||""},Tj="O,Moz,ms,Ms,Webkit".split(","),y_=function(e,i,n){var s=i||yg,o=s.style,a=5;if(e in o&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(Tj[a]+e in o););return a<0?null:(a===3?"ms":a>=0?Tj[a]:"")+e},OL=function(){GYe()&&window.document&&(Oj=window,hp=Oj.document,By=hp.documentElement,yg=wL("div")||{style:{}},wL("div"),Pr=y_(Pr),Ia=Pr+"Origin",yg.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Vle=!!y_("perspective"),MF=Na.core.reverting,EF=1)},Aj=function(e){var i=e.ownerSVGElement,n=wL("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),o;s.style.display="block",n.appendChild(s),By.appendChild(n);try{o=s.getBBox()}catch{}return n.removeChild(s),By.removeChild(n),o},Ej=function(e,i){for(var n=i.length;n--;)if(e.hasAttribute(i[n]))return e.getAttribute(i[n])},Fle=function(e){var i,n;try{i=e.getBBox()}catch{i=Aj(e),n=1}return i&&(i.width||i.height)||n||(i=Aj(e)),i&&!i.width&&!i.x&&!i.y?{x:+Ej(e,["x","cx","x1"])||0,y:+Ej(e,["y","cy","y1"])||0,width:0,height:0}:i},$le=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Fle(e))},a0=function(e,i){if(i){var n=e.style,s;i in Fd&&i!==Ia&&(i=Pr),n.removeProperty?(s=i.substr(0,2),(s==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),n.removeProperty(s==="--"?i:i.replace(PF,"-$1").toLowerCase())):n.removeAttribute(i)}},cp=function(e,i,n,s,o,a){var l=new ka(e._pt,i,n,0,1,a?Dle:Ble);return e._pt=l,l.b=s,l.e=o,e._props.push(n),l},Mj={deg:1,rad:1,turn:1},sqe={grid:1,flex:1},Vp=function r(e,i,n,s){var o=parseFloat(n)||0,a=(n+"").trim().substr((o+"").length)||"px",l=yg.style,c=HYe.test(i),u=e.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(c?"Width":"Height"),p=100,m=s==="px",g=s==="%",y,_,x,O;if(s===a||!o||Mj[s]||Mj[a])return o;if(a!=="px"&&!m&&(o=r(e,i,n,"px")),O=e.getCTM&&$le(e),(g||a==="%")&&(Fd[i]||~i.indexOf("adius")))return y=O?e.getBBox()[c?"width":"height"]:e[d],jr(g?o/y*p:o/100*y);if(l[c?"width":"height"]=p+(m?a:s),_=s!=="rem"&&~i.indexOf("adius")||s==="em"&&e.appendChild&&!u?e:e.parentNode,O&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===hp||!_.appendChild)&&(_=hp.body),x=_._gsap,x&&g&&x.width&&c&&x.time===fl.time&&!x.uncache)return jr(o/x.width*p);if(g&&(i==="height"||i==="width")){var S=e.style[i];e.style[i]=p+s,y=e[d],S?e.style[i]=S:a0(e,i)}else(g||a==="%")&&!sqe[uh(_,"display")]&&(l.position=uh(e,"position")),_===e&&(l.position="static"),_.appendChild(yg),y=yg[d],_.removeChild(yg),l.position="absolute";return c&&g&&(x=Ng(_),x.time=fl.time,x.width=_[d]),jr(m?y*o/p:y&&o?p/y*o:0)},od=function(e,i,n,s){var o;return EF||OL(),i in iu&&i!=="transform"&&(i=iu[i],~i.indexOf(",")&&(i=i.split(",")[0])),Fd[i]&&i!=="transform"?(o=SO(e,s),o=i!=="transformOrigin"?o[i]:o.svg?o.origin:SM(uh(e,Ia))+" "+o.zOrigin+"px"):(o=e.style[i],(!o||o==="auto"||s||~(o+"").indexOf("calc("))&&(o=OM[i]&&OM[i](e,i,n)||uh(e,i)||ile(e,i)||(i==="opacity"?1:0))),n&&!~(o+"").trim().indexOf(" ")?Vp(e,i,o,n)+n:o},oqe=function(e,i,n,s){if(!n||n==="none"){var o=y_(i,e,1),a=o&&uh(e,o,1);a&&a!==n?(i=o,n=a):i==="borderColor"&&(n=uh(e,"borderTopColor"))}var l=new ka(this._pt,e.style,i,0,1,kle),c=0,u=0,d,p,m,g,y,_,x,O,S,w,C,M;if(l.b=n,l.e=s,n+="",s+="",s.substring(0,6)==="var(--"&&(s=uh(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(_=e.style[i],e.style[i]=s,s=uh(e,i)||s,_?e.style[i]=_:a0(e,i)),d=[n,s],ble(d),n=d[0],s=d[1],m=n.match(sy)||[],M=s.match(sy)||[],M.length){for(;p=sy.exec(s);)x=p[0],S=s.substring(c,p.index),y?y=(y+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(y=1),x!==(_=m[u++]||"")&&(g=parseFloat(_)||0,C=_.substr((g+"").length),x.charAt(1)==="="&&(x=Ry(g,x)+C),O=parseFloat(x),w=x.substr((O+"").length),c=sy.lastIndex-w.length,w||(w=w||wl.units[i]||C,c===s.length&&(s+=w,l.e+=w)),C!==w&&(g=Vp(e,i,_,w)||0),l._pt={_next:l._pt,p:S||u===1?S:",",s:g,c:O-g,m:y&&y<4||i==="zIndex"?Math.round:0});l.c=c<s.length?s.substring(c,s.length):""}else l.r=i==="display"&&s==="none"?Dle:Ble;return qae.test(s)&&(l.e=0),this._pt=l,l},Pj={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},aqe=function(e){var i=e.split(" "),n=i[0],s=i[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),i[0]=Pj[n]||n,i[1]=Pj[s]||s,i.join(" ")},lqe=function(e,i){if(i.tween&&i.tween._time===i.tween._dur){var n=i.t,s=n.style,o=i.u,a=n._gsap,l,c,u;if(o==="all"||o===!0)s.cssText="",c=1;else for(o=o.split(","),u=o.length;--u>-1;)l=o[u],Fd[l]&&(c=1,l=l==="transformOrigin"?Ia:Pr),a0(n,l);c&&(a0(n,Pr),a&&(a.svg&&n.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",SO(n,1),a.uncache=1,Lle(s)))}},OM={clearProps:function(e,i,n,s,o){if(o.data!=="isFromStart"){var a=e._pt=new ka(e._pt,i,n,0,0,lqe);return a.u=s,a.pr=-10,a.tween=o,e._props.push(n),1}}},OO=[1,0,0,1,0,0],Ule={},zle=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},kj=function(e){var i=uh(e,Pr);return zle(i)?OO:i.substr(7).match(Yae).map(jr)},kF=function(e,i){var n=e._gsap||Ng(e),s=e.style,o=kj(e),a,l,c,u;return n.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,o=[c.a,c.b,c.c,c.d,c.e,c.f],o.join(",")==="1,0,0,1,0,0"?OO:o):(o===OO&&!e.offsetParent&&e!==By&&!n.svg&&(c=s.display,s.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(u=1,l=e.nextElementSibling,By.appendChild(e)),o=kj(e),c?s.display=c:a0(e,"display"),u&&(l?a.insertBefore(e,l):a?a.appendChild(e):By.removeChild(e))),i&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},SL=function(e,i,n,s,o,a){var l=e._gsap,c=o||kF(e,!0),u=l.xOrigin||0,d=l.yOrigin||0,p=l.xOffset||0,m=l.yOffset||0,g=c[0],y=c[1],_=c[2],x=c[3],O=c[4],S=c[5],w=i.split(" "),C=parseFloat(w[0])||0,M=parseFloat(w[1])||0,P,R,k,I;n?c!==OO&&(R=g*x-y*_)&&(k=C*(x/R)+M*(-_/R)+(_*S-x*O)/R,I=C*(-y/R)+M*(g/R)-(g*S-y*O)/R,C=k,M=I):(P=Fle(e),C=P.x+(~w[0].indexOf("%")?C/100*P.width:C),M=P.y+(~(w[1]||w[0]).indexOf("%")?M/100*P.height:M)),s||s!==!1&&l.smooth?(O=C-u,S=M-d,l.xOffset=p+(O*g+S*_)-O,l.yOffset=m+(O*y+S*x)-S):l.xOffset=l.yOffset=0,l.xOrigin=C,l.yOrigin=M,l.smooth=!!s,l.origin=i,l.originIsAbsolute=!!n,e.style[Ia]="0px 0px",a&&(cp(a,l,"xOrigin",u,C),cp(a,l,"yOrigin",d,M),cp(a,l,"xOffset",p,l.xOffset),cp(a,l,"yOffset",m,l.yOffset)),e.setAttribute("data-svg-origin",C+" "+M)},SO=function(e,i){var n=e._gsap||new Cle(e);if("x"in n&&!i&&!n.uncache)return n;var s=e.style,o=n.scaleX<0,a="px",l="deg",c=getComputedStyle(e),u=uh(e,Ia)||"0",d,p,m,g,y,_,x,O,S,w,C,M,P,R,k,I,A,D,V,B,L,F,$,z,H,K,J,ne,be,pe,ae,ye;return d=p=m=_=x=O=S=w=C=0,g=y=1,n.svg=!!(e.getCTM&&$le(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(s[Pr]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Pr]!=="none"?c[Pr]:"")),s.scale=s.rotate=s.translate="none"),R=kF(e,n.svg),n.svg&&(n.uncache?(H=e.getBBox(),u=n.xOrigin-H.x+"px "+(n.yOrigin-H.y)+"px",z=""):z=!i&&e.getAttribute("data-svg-origin"),SL(e,z||u,!!z||n.originIsAbsolute,n.smooth!==!1,R)),M=n.xOrigin||0,P=n.yOrigin||0,R!==OO&&(D=R[0],V=R[1],B=R[2],L=R[3],d=F=R[4],p=$=R[5],R.length===6?(g=Math.sqrt(D*D+V*V),y=Math.sqrt(L*L+B*B),_=D||V?Cv(V,D)*ig:0,S=B||L?Cv(B,L)*ig+_:0,S&&(y*=Math.abs(Math.cos(S*Dy))),n.svg&&(d-=M-(M*D+P*B),p-=P-(M*V+P*L))):(ye=R[6],pe=R[7],J=R[8],ne=R[9],be=R[10],ae=R[11],d=R[12],p=R[13],m=R[14],k=Cv(ye,be),x=k*ig,k&&(I=Math.cos(-k),A=Math.sin(-k),z=F*I+J*A,H=$*I+ne*A,K=ye*I+be*A,J=F*-A+J*I,ne=$*-A+ne*I,be=ye*-A+be*I,ae=pe*-A+ae*I,F=z,$=H,ye=K),k=Cv(-B,be),O=k*ig,k&&(I=Math.cos(-k),A=Math.sin(-k),z=D*I-J*A,H=V*I-ne*A,K=B*I-be*A,ae=L*A+ae*I,D=z,V=H,B=K),k=Cv(V,D),_=k*ig,k&&(I=Math.cos(k),A=Math.sin(k),z=D*I+V*A,H=F*I+$*A,V=V*I-D*A,$=$*I-F*A,D=z,F=H),x&&Math.abs(x)+Math.abs(_)>359.9&&(x=_=0,O=180-O),g=jr(Math.sqrt(D*D+V*V+B*B)),y=jr(Math.sqrt($*$+ye*ye)),k=Cv(F,$),S=Math.abs(k)>2e-4?k*ig:0,C=ae?1/(ae<0?-ae:ae):0),n.svg&&(z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!zle(uh(e,Pr)),z&&e.setAttribute("transform",z))),Math.abs(S)>90&&Math.abs(S)<270&&(o?(g*=-1,S+=_<=0?180:-180,_+=_<=0?180:-180):(y*=-1,S+=S<=0?180:-180)),i=i||n.uncache,n.x=d-((n.xPercent=d&&(!i&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=p-((n.yPercent=p&&(!i&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-p)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=m+a,n.scaleX=jr(g),n.scaleY=jr(y),n.rotation=jr(_)+l,n.rotationX=jr(x)+l,n.rotationY=jr(O)+l,n.skewX=S+l,n.skewY=w+l,n.transformPerspective=C+a,(n.zOrigin=parseFloat(u.split(" ")[2])||!i&&n.zOrigin||0)&&(s[Ia]=SM(u)),n.xOffset=n.yOffset=0,n.force3D=wl.force3D,n.renderTransform=n.svg?cqe:Vle?Xle:hqe,n.uncache=0,n},SM=function(e){return(e=e.split(" "))[0]+" "+e[1]},DB=function(e,i,n){var s=xo(i);return jr(parseFloat(i)+parseFloat(Vp(e,"x",n+"px",s)))+s},hqe=function(e,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,Xle(e,i)},Lm="0deg",H1="0px",Nm=") ",Xle=function(e,i){var n=i||this,s=n.xPercent,o=n.yPercent,a=n.x,l=n.y,c=n.z,u=n.rotation,d=n.rotationY,p=n.rotationX,m=n.skewX,g=n.skewY,y=n.scaleX,_=n.scaleY,x=n.transformPerspective,O=n.force3D,S=n.target,w=n.zOrigin,C="",M=O==="auto"&&e&&e!==1||O===!0;if(w&&(p!==Lm||d!==Lm)){var P=parseFloat(d)*Dy,R=Math.sin(P),k=Math.cos(P),I;P=parseFloat(p)*Dy,I=Math.cos(P),a=DB(S,a,R*I*-w),l=DB(S,l,-Math.sin(P)*-w),c=DB(S,c,k*I*-w+w)}x!==H1&&(C+="perspective("+x+Nm),(s||o)&&(C+="translate("+s+"%, "+o+"%) "),(M||a!==H1||l!==H1||c!==H1)&&(C+=c!==H1||M?"translate3d("+a+", "+l+", "+c+") ":"translate("+a+", "+l+Nm),u!==Lm&&(C+="rotate("+u+Nm),d!==Lm&&(C+="rotateY("+d+Nm),p!==Lm&&(C+="rotateX("+p+Nm),(m!==Lm||g!==Lm)&&(C+="skew("+m+", "+g+Nm),(y!==1||_!==1)&&(C+="scale("+y+", "+_+Nm),S.style[Pr]=C||"translate(0, 0)"},cqe=function(e,i){var n=i||this,s=n.xPercent,o=n.yPercent,a=n.x,l=n.y,c=n.rotation,u=n.skewX,d=n.skewY,p=n.scaleX,m=n.scaleY,g=n.target,y=n.xOrigin,_=n.yOrigin,x=n.xOffset,O=n.yOffset,S=n.forceCSS,w=parseFloat(a),C=parseFloat(l),M,P,R,k,I;c=parseFloat(c),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,c+=d),c||u?(c*=Dy,u*=Dy,M=Math.cos(c)*p,P=Math.sin(c)*p,R=Math.sin(c-u)*-m,k=Math.cos(c-u)*m,u&&(d*=Dy,I=Math.tan(u-d),I=Math.sqrt(1+I*I),R*=I,k*=I,d&&(I=Math.tan(d),I=Math.sqrt(1+I*I),M*=I,P*=I)),M=jr(M),P=jr(P),R=jr(R),k=jr(k)):(M=p,k=m,P=R=0),(w&&!~(a+"").indexOf("px")||C&&!~(l+"").indexOf("px"))&&(w=Vp(g,"x",a,"px"),C=Vp(g,"y",l,"px")),(y||_||x||O)&&(w=jr(w+y-(y*M+_*R)+x),C=jr(C+_-(y*P+_*k)+O)),(s||o)&&(I=g.getBBox(),w=jr(w+s/100*I.width),C=jr(C+o/100*I.height)),I="matrix("+M+","+P+","+R+","+k+","+w+","+C+")",g.setAttribute("transform",I),S&&(g.style[Pr]=I)},uqe=function(e,i,n,s,o){var a=360,l=Qs(o),c=parseFloat(o)*(l&&~o.indexOf("rad")?ig:1),u=c-s,d=s+u+"deg",p,m;return l&&(p=o.split("_")[1],p==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),p==="cw"&&u<0?u=(u+a*Cj)%a-~~(u/a)*a:p==="ccw"&&u>0&&(u=(u-a*Cj)%a-~~(u/a)*a)),e._pt=m=new ka(e._pt,i,n,s,u,jYe),m.e=d,m.u="deg",e._props.push(n),m},Ij=function(e,i){for(var n in i)e[n]=i[n];return e},dqe=function(e,i,n){var s=Ij({},n._gsap),o="perspective,force3D,transformOrigin,svgOrigin",a=n.style,l,c,u,d,p,m,g,y;s.svg?(u=n.getAttribute("transform"),n.setAttribute("transform",""),a[Pr]=i,l=SO(n,1),a0(n,Pr),n.setAttribute("transform",u)):(u=getComputedStyle(n)[Pr],a[Pr]=i,l=SO(n,1),a[Pr]=u);for(c in Fd)u=s[c],d=l[c],u!==d&&o.indexOf(c)<0&&(g=xo(u),y=xo(d),p=g!==y?Vp(n,c,u,y):parseFloat(u),m=parseFloat(d),e._pt=new ka(e._pt,l,c,p,m-p,bL),e._pt.u=y||0,e._props.push(c));Ij(l,s)};Pa("padding,margin,Width,Radius",function(r,e){var i="Top",n="Right",s="Bottom",o="Left",a=(e<3?[i,n,s,o]:[i+o,i+n,s+n,s+o]).map(function(l){return e<2?r+l:"border"+l+r});OM[e>1?"border"+r:r]=function(l,c,u,d,p){var m,g;if(arguments.length<4)return m=a.map(function(y){return od(l,y,u)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(d+"").split(" "),g={},a.forEach(function(y,_){return g[y]=m[_]=m[_]||m[(_-1)/2|0]}),l.init(c,g,p)}});var Wle={name:"css",register:OL,targetTest:function(e){return e.style&&e.nodeType},init:function(e,i,n,s,o){var a=this._props,l=e.style,c=n.vars.startAt,u,d,p,m,g,y,_,x,O,S,w,C,M,P,R,k;EF||OL(),this.styles=this.styles||Nle(e),k=this.styles.props,this.tween=n;for(_ in i)if(_!=="autoRound"&&(d=i[_],!(ll[_]&&Tle(_,i,n,s,e,o)))){if(g=typeof d,y=OM[_],g==="function"&&(d=d.call(n,s,e,o),g=typeof d),g==="string"&&~d.indexOf("random(")&&(d=xO(d)),y)y(this,e,_,d,n)&&(R=1);else if(_.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(_)+"").trim(),d+="",xp.lastIndex=0,xp.test(u)||(x=xo(u),O=xo(d)),O?x!==O&&(u=Vp(e,_,u,O)+O):x&&(d+=x),this.add(l,"setProperty",u,d,s,o,0,0,_),a.push(_),k.push(_,0,l[_]);else if(g!=="undefined"){if(c&&_ in c?(u=typeof c[_]=="function"?c[_].call(n,s,e,o):c[_],Qs(u)&&~u.indexOf("random(")&&(u=xO(u)),xo(u+"")||u==="auto"||(u+=wl.units[_]||xo(od(e,_))||""),(u+"").charAt(1)==="="&&(u=od(e,_))):u=od(e,_),m=parseFloat(u),S=g==="string"&&d.charAt(1)==="="&&d.substr(0,2),S&&(d=d.substr(2)),p=parseFloat(d),_ in iu&&(_==="autoAlpha"&&(m===1&&od(e,"visibility")==="hidden"&&p&&(m=0),k.push("visibility",0,l.visibility),cp(this,l,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),_!=="scale"&&_!=="transform"&&(_=iu[_],~_.indexOf(",")&&(_=_.split(",")[0]))),w=_ in Fd,w){if(this.styles.save(_),g==="string"&&d.substring(0,6)==="var(--"&&(d=uh(e,d.substring(4,d.indexOf(")"))),p=parseFloat(d)),C||(M=e._gsap,M.renderTransform&&!i.parseTransform||SO(e,i.parseTransform),P=i.smoothOrigin!==!1&&M.smooth,C=this._pt=new ka(this._pt,l,Pr,0,1,M.renderTransform,M,0,-1),C.dep=1),_==="scale")this._pt=new ka(this._pt,M,"scaleY",M.scaleY,(S?Ry(M.scaleY,S+p):p)-M.scaleY||0,bL),this._pt.u=0,a.push("scaleY",_),_+="X";else if(_==="transformOrigin"){k.push(Ia,0,l[Ia]),d=aqe(d),M.svg?SL(e,d,0,P,0,this):(O=parseFloat(d.split(" ")[2])||0,O!==M.zOrigin&&cp(this,M,"zOrigin",M.zOrigin,O),cp(this,l,_,SM(u),SM(d)));continue}else if(_==="svgOrigin"){SL(e,d,1,P,0,this);continue}else if(_ in Ule){uqe(this,M,_,m,S?Ry(m,S+d):d);continue}else if(_==="smoothOrigin"){cp(this,M,"smooth",M.smooth,d);continue}else if(_==="force3D"){M[_]=d;continue}else if(_==="transform"){dqe(this,d,e);continue}}else _ in l||(_=y_(_)||_);if(w||(p||p===0)&&(m||m===0)&&!QYe.test(d)&&_ in l)x=(u+"").substr((m+"").length),p||(p=0),O=xo(d)||(_ in wl.units?wl.units[_]:x),x!==O&&(m=Vp(e,_,u,O)),this._pt=new ka(this._pt,w?M:l,_,m,(S?Ry(m,S+p):p)-m,!w&&(O==="px"||_==="zIndex")&&i.autoRound!==!1?qYe:bL),this._pt.u=O||0,x!==O&&O!=="%"&&(this._pt.b=u,this._pt.r=YYe);else if(_ in l)oqe.call(this,e,_,u,S?S+d:d);else if(_ in e)this.add(e,_,u||e[_],S?S+d:d,s,o);else if(_!=="parseTransform"){yF(_,d);continue}w||(_ in l?k.push(_,0,l[_]):typeof e[_]=="function"?k.push(_,2,e[_]()):k.push(_,1,u||e[_])),a.push(_)}}R&&Ile(this)},render:function(e,i){if(i.tween._time||!MF())for(var n=i._pt;n;)n.r(e,n.d),n=n._next;else i.styles.revert()},get:od,aliases:iu,getSetter:function(e,i,n){var s=iu[i];return s&&s.indexOf(",")<0&&(i=s),i in Fd&&i!==Ia&&(e._gsap.x||od(e,"x"))?n&&Sj===n?i==="scale"?eqe:JYe:(Sj=n||{})&&(i==="scale"?tqe:iqe):e.style&&!mF(e.style[i])?ZYe:~i.indexOf("-")?KYe:TF(e,i)},core:{_removeProperty:a0,_getMatrix:kF}};Na.utils.checkPrefix=y_;Na.core.getStyleSaver=Nle;(function(r,e,i,n){var s=Pa(r+","+e+","+i,function(o){Fd[o]=1});Pa(e,function(o){wl.units[o]="deg",Ule[o]=1}),iu[s[13]]=r+","+e,Pa(n,function(o){var a=o.split(":");iu[a[1]]=s[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Pa("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){wl.units[r]="px"});Na.registerPlugin(Wle);var Ff=Na.registerPlugin(Wle)||Na;Ff.core.Tween;function fqe(r,e={}){const i=window.innerWidth,n=window.innerHeight,s=Math.min(i/e.designWidth,n/e.designHeight)*e.scale;r.style.width=e.designWidth+"px",r.style.height=e.designHeight+"px",r.style.transform=`scale(${s})`}function pqe(r){return new Jp({width:r.clientWidth,height:r.clientHeight,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,view:r})}/*!
 * PixiPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var up,CM,Rj,ih,rw,Gle,CL,gk,Hle=function(){return typeof window<"u"},Qle=function(){return up||Hle()&&(up=window.gsap)&&up.registerPlugin&&up},TL=function(e){return typeof e=="function"},jle=function(e){return console.warn(e)},mqe=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Hl=.212671,Ql=.71516,jl=.072169,Yle=function(e){return TL(ih[e])?ih[e]:ih.filters[e]},vk=function(e,i){var n=[],s=0,o=0,a,l;for(a=0;a<4;a++){for(l=0;l<5;l++)o=l===4?e[s+4]:0,n[s+l]=e[s]*i[l]+e[s+1]*i[l+5]+e[s+2]*i[l+10]+e[s+3]*i[l+15]+o;s+=5}return n},Bj=function(e,i){var n=1-i,s=n*Hl,o=n*Ql,a=n*jl;return vk([s+i,o,a,0,0,s,o+i,a,0,0,s,o,a+i,0,0,0,0,0,1,0],e)},Dj=function(e,i,n){var s=CM(i),o=s[0]/255,a=s[1]/255,l=s[2]/255,c=1-n;return vk([c+n*o*Hl,n*o*Ql,n*o*jl,0,0,n*a*Hl,c+n*a*Ql,n*a*jl,0,0,n*l*Hl,n*l*Ql,c+n*l*jl,0,0,0,0,0,1,0],e)},Lj=function(e,i){i*=Math.PI/180;var n=Math.cos(i),s=Math.sin(i);return vk([Hl+n*(1-Hl)+s*-Hl,Ql+n*-Ql+s*-Ql,jl+n*-jl+s*(1-jl),0,0,Hl+n*-Hl+s*.143,Ql+n*(1-Ql)+s*.14,jl+n*-jl+s*-.283,0,0,Hl+n*-Hl+s*-(1-Hl),Ql+n*-Ql+s*Ql,jl+n*(1-jl)+s*jl,0,0,0,0,0,1,0,0,0,0,0,1],e)},Nj=function(e,i){return vk([i,0,0,0,.5*(1-i),0,i,0,0,.5*(1-i),0,0,i,0,.5*(1-i),0,0,0,1,0],e)},qle=function(e,i){var n=Yle(i),s=e.filters||[],o=s.length,a;for(n||jle(i+" not found. PixiPlugin.registerPIXI(PIXI)");--o>-1;)if(s[o]instanceof n)return s[o];return a=new n,i==="BlurFilter"&&(gk?a.strength=0:a.blur=0),e.filters=[].concat(s,[a]),a},Ns=function(e,i,n,s){i.add(n,e,n[e],s[e]),i._props.push(e)},Vj=function(e,i){var n=Yle("ColorMatrixFilter"),s=new n;return s.matrix=i,s.brightness(e,!0),s.matrix},gqe=function(e){var i={},n;for(n in e)i[n]=e[n];return i},Za={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},vqe=function(e,i,n){var s=qle(e,"ColorMatrixFilter"),o=e._gsColorMatrixFilter=e._gsColorMatrixFilter||gqe(Za),a=i.combineCMF&&!("colorMatrixFilter"in i&&!i.colorMatrixFilter),l,c,u;for(u=s.matrix,i.resolution&&(s.resolution=i.resolution),i.matrix&&i.matrix.length===u.length?(c=i.matrix,o.contrast!==1&&Ns("contrast",n,o,Za),o.hue&&Ns("hue",n,o,Za),o.brightness!==1&&Ns("brightness",n,o,Za),o.colorizeAmount&&(Ns("colorize",n,o,Za),Ns("colorizeAmount",n,o,Za)),o.saturation!==1&&Ns("saturation",n,o,Za)):(c=mqe.slice(),i.contrast!=null?(c=Nj(c,+i.contrast),Ns("contrast",n,o,i)):o.contrast!==1&&(a?c=Nj(c,o.contrast):Ns("contrast",n,o,Za)),i.hue!=null?(c=Lj(c,+i.hue),Ns("hue",n,o,i)):o.hue&&(a?c=Lj(c,o.hue):Ns("hue",n,o,Za)),i.brightness!=null?(c=Vj(+i.brightness,c),Ns("brightness",n,o,i)):o.brightness!==1&&(a?c=Vj(o.brightness,c):Ns("brightness",n,o,Za)),i.colorize!=null?(i.colorizeAmount="colorizeAmount"in i?+i.colorizeAmount:1,c=Dj(c,i.colorize,i.colorizeAmount),Ns("colorize",n,o,i),Ns("colorizeAmount",n,o,i)):o.colorizeAmount&&(a?c=Dj(c,o.colorize,o.colorizeAmount):(Ns("colorize",n,o,Za),Ns("colorizeAmount",n,o,Za))),i.saturation!=null?(c=Bj(c,+i.saturation),Ns("saturation",n,o,i)):o.saturation!==1&&(a?c=Bj(c,o.saturation):Ns("saturation",n,o,Za))),l=c.length;--l>-1;)c[l]!==u[l]&&n.add(u,l,u[l],c[l],"colorMatrixFilter");n._props.push("colorMatrixFilter")},yqe=function(e,i){var n=i.t,s=i.p,o=i.color,a=i.set;a(n,s,o[0]<<16|o[1]<<8|o[2])},_qe=function(e,i){var n=i.g;gk?(n.fill(),n.stroke()):n&&(n.dirty++,n.clearDirty++)},xqe=function(e,i){i.t.visible=!!i.t.alpha},Fj=function(e,i,n,s){var o=e[i],a=CM(TL(o)?e[i.indexOf("set")||!TL(e["get"+i.substr(3)])?i:"get"+i.substr(3)]():o),l=CM(n);s._pt=new rw(s._pt,e,i,0,0,yqe,{t:e,p:i,color:a,set:Gle(e,i)}),s.add(a,0,a[0],l[0]),s.add(a,1,a[1],l[1]),s.add(a,2,a[2],l[2])},bqe={tint:1,lineColor:1,fillColor:1,strokeColor:1},$j="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),AL={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},wqe={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},TM=Math.PI/180,Zle=function(e){return typeof e=="string"},Oqe=function(e){return Zle(e)&&e.charAt(1)==="="?e.substr(0,2)+parseFloat(e.substr(2))*TM:e*TM},Sqe=function(e,i){return i.set(i.t,i.p,e===1?i.e:Math.round((i.s+i.c*e)*1e5)/1e5,i)},Cqe=function(e,i,n,s,o,a){var l=360*(a?TM:1),c=Zle(o),u=c&&o.charAt(1)==="="?+(o.charAt(0)+"1"):0,d=parseFloat(u?o.substr(2):o)*(a?TM:1),p=u?d*u:d-s,m=s+p,g,y;return c&&(g=o.split("_")[1],g==="short"&&(p%=l,p!==p%(l/2)&&(p+=p<0?l:-l)),g==="cw"&&p<0?p=(p+l*1e10)%l-~~(p/l)*l:g==="ccw"&&p>0&&(p=(p-l*1e10)%l-~~(p/l)*l)),e._pt=y=new rw(e._pt,i,n,s,p,Sqe),y.e=m,y},Uj=function(){if(!Rj){up=Qle(),ih=Rj=ih||Hle()&&window.PIXI;var e=ih&&ih.VERSION&&parseFloat(ih.VERSION.split(".")[0])||0;CL=e===4,gk=e>=8,CM=function(n){return up.utils.splitColor((n+"").substr(0,2)==="0x"?"#"+n.substr(2):n)}}},CT,Q1;for(CT=0;CT<$j.length;CT++)Q1=$j[CT],AL[Q1+"X"]=Q1,AL[Q1+"Y"]=Q1;var EL={version:"3.13.0",name:"pixi",register:function(e,i,n){up=e,rw=n,Gle=i.getSetter,Uj()},headless:!0,registerPIXI:function(e){ih=e},init:function(e,i,n,s,o){if(ih||Uj(),!ih)return jle("PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var a,l,c,u,d,p,m,g,y,_;for(p in i){if(a=AL[p],c=i[p],a)l=~p.charAt(p.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(e[a],l,e[a][l],a==="skew"?Oqe(c):c,0,0,0,0,0,1);else if(p==="scale"||p==="anchor"||p==="pivot"||p==="tileScale")this.add(e[p],"x",e[p].x,c),this.add(e[p],"y",e[p].y,c);else if(p==="rotation"||p==="angle")Cqe(this,e,p,e[p],c,p==="rotation");else if(wqe[p])u||(vqe(e,i.colorMatrixFilter||i,this),u=!0);else if(p==="blur"||p==="blurX"||p==="blurY"||p==="blurPadding"){if(d=qle(e,"BlurFilter"),this.add(d,p,d[p],c),i.blurPadding!==0)for(m=i.blurPadding||Math.max(d[p],c)*2,g=e.filters.length;--g>-1;)e.filters[g].padding=Math.max(e.filters[g].padding,m)}else if(bqe[p])if((p==="lineColor"||p==="fillColor"||p==="strokeColor")&&e instanceof ih.Graphics)for(y=("fillStyle"in e)?[e]:(e.geometry||e).graphicsData,_=p.substr(0,p.length-5),gk&&_==="line"&&(_="stroke"),this._pt=new rw(this._pt,e,p,0,0,_qe,{g:e.geometry||e}),g=y.length;--g>-1;)Fj(CL?y[g]:y[g][_+"Style"],CL?p:"color",c,this);else Fj(e,p,c,this);else p==="autoAlpha"?(this._pt=new rw(this._pt,e,"visible",0,0,xqe),this.add(e,"alpha",e.alpha,c),this._props.push("alpha","visible")):p!=="resolution"&&this.add(e,p,"get",c);this._props.push(p)}}};Qle()&&up.registerPlugin(EL);const Tqe={class:"game-container"},Aqe={__name:"BallGame",setup(r){const e=[{name:"新手村",targetScore:5,path:{type:"line",start:{x:.1,y:.7},end:{x:.9,y:.7},width:.06},obstacles:{interval:2e3,types:["hankey","hankey","bomb"]},playerSpeed:.012},{name:"弯道挑战",targetScore:8,path:{type:"arc",center:{x:.5,y:.7},radiusX:.4,radiusY:.15,startAngle:0,endAngle:Math.PI,width:.06},obstacles:{interval:1800,types:["hankey","hankey","hankey","bomb"]},playerSpeed:.014},{name:"波浪之旅",targetScore:12,path:{type:"sin",start:{x:.1,y:.7},end:{x:.9,y:.7},amplitude:.08,frequency:2,width:.06},obstacles:{interval:1600,types:["hankey","hankey","bomb","bomb"]},playerSpeed:.016},{name:"环形赛道",targetScore:15,path:{type:"circle",center:{x:.5,y:.7},radius:.4,width:.06},obstacles:{interval:1400,types:["hankey","bomb","bomb"]},playerSpeed:.018},{name:"终极挑战",targetScore:20,path:{type:"wave",start:{x:.1,y:.7},end:{x:.9,y:.7},amplitude:.12,frequency:2,width:.06},obstacles:{interval:1200,types:["hankey","bomb","bomb","bomb"]},playerSpeed:.03}];class i{constructor(c,u,d){this.pixi=c,this.path=u,this.speed=d,this.sprite=null,this.currentPosition=0,this.direction=1,this.isMoving=!1,this.init()}init(){this.sprite=new hr(this.pixi.gameApp.textures["/ballgame/player_run.png"]),this.sprite.anchor.set(.5),this.pixi.stage.addChild(this.sprite),this.updatePosition()}updatePosition(){const c=this.getPathPosition(this.currentPosition);this.sprite.x=c.x,this.sprite.y=c.y,this.direction<0?this.sprite.scale.x=-1:this.sprite.scale.x=1}getPathPosition(c){const u=this.pixi.screen.width,d=this.pixi.screen.height;switch(this.path.type){case"line":return{x:this.path.start.x*u+(this.path.end.x*u-this.path.start.x*u)*c,y:this.path.start.y*d+(this.path.end.y*d-this.path.start.y*d)*c};case"arc":const p=this.path.startAngle+(this.path.endAngle-this.path.startAngle)*c;return{x:this.path.center.x*u+Math.cos(p)*this.path.radiusX*u,y:this.path.center.y*d+Math.sin(p)*this.path.radiusY*d};case"sin":const m=this.path.start.x*u+(this.path.end.x*u-this.path.start.x*u)*c,g=Math.sin(c*this.path.frequency*Math.PI*2)*this.path.amplitude*d;return{x:m,y:this.path.start.y*d+g};case"wave":const y=this.path.start.x*u,_=this.path.end.x*u,x=this.path.start.y*d,O=this.path.amplitude*d,S=this.path.frequency,w=_-y,C=w/S,M=y+c*w,P=(M-y)%C/C,R=x+O,k=x-O,I=1-P,A=P,D=I*I*I*x+3*I*I*A*R+3*I*A*A*k+A*A*A*x;return{x:M,y:D};case"circle":const V=c*Math.PI*2,B=this.path.radius*Math.min(u,d);return{x:this.path.center.x*u+Math.cos(V)*B,y:this.path.center.y*d+Math.sin(V)*B};case"polyline":const L=this.path.points.length-1,F=Math.floor(c*L),$=c*L%1,z=Math.min(F,L-1),H=this.path.points[z],K=this.path.points[z+1];return{x:H.x*u+(K.x*u-H.x*u)*$,y:H.y*d+(K.y*d-H.y*d)*$}}}update(){this.isMoving&&(this.currentPosition+=this.speed*this.direction,this.currentPosition>=1?(this.currentPosition=1,this.direction=-1):this.currentPosition<=0&&(this.currentPosition=0,this.direction=1),this.updatePosition())}reverse(){this.direction*=-1}start(){this.isMoving=!0}getBounds(){const c=this.sprite.getBounds(),u=.9,d=c.x+c.width/2,p=c.y+c.height/2,m=c.width*u,g=c.height*u;return{x:d-m/2,y:p-g/2,width:m,height:g}}}class n{constructor(c,u,d,p){this.pixi=c,this.type=u,this.sprite=null,this.x=d,this.y=p,this.speed=8,this.init()}init(){const c=this.type==="bomb"?"/ballgame/bomb.png":"/ballgame/hankey.png";this.sprite=new hr(this.pixi.gameApp.textures[c]),this.sprite.anchor.set(.5),this.sprite.x=this.x,this.sprite.y=this.y,this.pixi.stage.addChild(this.sprite)}update(){this.sprite.y+=this.speed}isOutOfScreen(){return this.sprite.y>this.pixi.screen.height+100}getBounds(){const c=this.sprite.getBounds(),u=.9,d=c.x+c.width/2,p=c.y+c.height/2,m=c.width*u,g=c.height*u;return{x:d-m/2,y:p-g/2,width:m,height:g}}destroy(){this.sprite&&this.sprite.parent&&this.sprite.parent.removeChild(this.sprite)}}class s{constructor(){this.pixi=null,this.currentLevel=0,this.score=0,this.gameState="waiting",this.player=null,this.obstacles=[],this.pathGraphics=null,this.scoreText=null,this.levelText=null,this.instructionText=null,this.obstacleTimer=0,this.lastObstacleTime=0,this.audioContext=null,this.sounds={},this.textures={},this.resourcesLoaded=!1,this.starContainer=null,this.baseFontStyle={fontFamily:"Verdana, Geneva, sans-serif",fontWeight:"bold",strokeThickness:5}}async init(){const c={designWidth:1080,designHeight:1920,scale:1};fqe(a.value,c),this.pixi=pqe(a.value),this.pixi.gameApp=this,await this.loadResources(),this.starContainer=new Ii,this.pixi.stage.addChildAt(this.starContainer,0),this.createBackground(),this.initAudio(),this.initUI(),this.gameLoop()}async loadResources(){const u=["/ballgame/player_run.png","/ballgame/player_win.png","/ballgame/player_fail.png","/ballgame/bomb.png","/ballgame/hankey.png","/ballgame/star_small.png"].map(d=>new Promise((p,m)=>{const g=At.from(d);g.baseTexture.on("loaded",()=>{this.textures[d]=g,p()}),g.baseTexture.on("error",m)}));try{await Promise.all(u),this.resourcesLoaded=!0,console.log("所有资源加载完成")}catch(d){console.error("资源加载失败:",d)}}createBackground(){for(let c=0;c<30;c++){const u=new hr(this.textures["/ballgame/star_small.png"]);u.anchor.set(.5),u.x=Math.random()*this.pixi.screen.width,u.y=Math.random()*this.pixi.screen.height,u.scale.set(Math.random()*.5+.5),u.alpha=Math.random()*.4+.2,this.starContainer.addChild(u)}}initAudio(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.loadSound("/ballgame/ball_click.mp3","click"),this.loadSound("/ballgame/ball_bomb.mp3","bomb"),this.loadSound("/ballgame/ball_collect.mp3","collect")}async loadSound(c,u){try{const p=await(await fetch(c)).arrayBuffer(),m=await this.audioContext.decodeAudioData(p);this.sounds[u]=m}catch(d){console.log("音频加载失败:",d)}}playSound(c){if(this.sounds[c]&&this.audioContext.state==="running"){const u=this.audioContext.createBufferSource();u.buffer=this.sounds[c],u.connect(this.audioContext.destination),u.start()}}initUI(){this.titleText=new Vn("抓住狗屎运",{...this.baseFontStyle,fontSize:64,fill:14540262,dropShadow:!0,dropShadowColor:16777215,dropShadowBlur:4,dropShadowDistance:2}),this.titleText.anchor.set(0,.5),this.titleText.x=this.pixi.screen.width*.05,this.titleText.y=this.pixi.screen.height*.04,this.pixi.stage.addChild(this.titleText),this.levelText=new Vn("",{...this.baseFontStyle,fontSize:48,fill:11591910,dropShadow:!0,dropShadowColor:16777215,dropShadowBlur:2,dropShadowDistance:1}),this.levelText.anchor.set(0,.5),this.levelText.x=this.pixi.screen.width*.05,this.levelText.y=this.pixi.screen.height*.08,this.pixi.stage.addChild(this.levelText),this.scoreText=new Vn("目标：0/5",{...this.baseFontStyle,fontSize:56,fill:11591910,dropShadow:!0,dropShadowColor:16777215,dropShadowBlur:2,dropShadowDistance:1}),this.scoreText.anchor.set(1,.5),this.scoreText.x=this.pixi.screen.width*.95,this.scoreText.y=this.pixi.screen.height*.04,this.pixi.stage.addChild(this.scoreText),this.instructionText=new Vn("点击屏幕开始游戏",{...this.baseFontStyle,fontSize:60,fill:11591910}),this.instructionText.anchor.set(.5),this.instructionText.x=this.pixi.screen.width*.5,this.instructionText.y=this.pixi.screen.height*.35,this.pixi.stage.addChild(this.instructionText),this.helpText=new Vn("收集狗屎得分，避开炸弹",{...this.baseFontStyle,fontSize:50,fill:11591910,align:"center"}),this.helpText.anchor.set(.5),this.helpText.x=this.pixi.screen.width*.5,this.helpText.y=this.pixi.screen.height*.45,this.pixi.stage.addChild(this.helpText)}initGame(){this.loadLevel(this.currentLevel),this.updateUI()}loadLevel(c){this.cleanupLevel();const u=e[c];this.levelText.text=`${u.name}`,this.drawPath(u.path),this.player=new i(this.pixi,u.path,u.playerSpeed),this.score=0,this.gameState="waiting",this.obstacles=[],this.obstacleTimer=0,this.lastObstacleTime=0,this.updateUI()}drawPath(c){this.pathGraphics&&this.pixi.stage.removeChild(this.pathGraphics),this.pathGraphics=new En;const u=this.pixi.screen.width,d=this.pixi.screen.height,p=c.width*u;switch(this.pathGraphics.lineStyle(p,6710886,.5),c.type){case"line":this.drawRoundedLine(c.start.x*u,c.start.y*d,c.end.x*u,c.end.y*d,p/2);break;case"arc":const m=100;for(let P=0;P<=m;P++){const R=P/m,k=c.startAngle+(c.endAngle-c.startAngle)*R,I=c.center.x*u+Math.cos(k)*c.radiusX*u,A=c.center.y*d+Math.sin(k)*c.radiusY*d;P===0?this.pathGraphics.moveTo(I,A):this.pathGraphics.lineTo(I,A)}break;case"sin":const g=200;for(let P=0;P<=g;P++){const R=P/g,k=c.start.x*u+(c.end.x*u-c.start.x*u)*R,I=Math.sin(R*c.frequency*Math.PI*2)*c.amplitude*d,A=c.start.y*d+I;P===0?this.pathGraphics.moveTo(k,A):this.pathGraphics.lineTo(k,A)}break;case"wave":const y=c.start.x*u,_=c.end.x*u,x=c.start.y*d,O=c.amplitude*d,S=c.frequency,C=(_-y)/S;this.pathGraphics.moveTo(y,x);for(let P=0;P<S;P++){const R=y+P*C,k=y+(P+1)*C,I=R+C*.25,A=x+O,D=R+C*.75,V=x-O;this.pathGraphics.bezierCurveTo(I,A,D,V,k,x)}break;case"circle":const M=100;for(let P=0;P<=M;P++){const k=P/M*Math.PI*2,I=c.radius*Math.min(u,d),A=c.center.x*u+Math.cos(k)*I,D=c.center.y*d+Math.sin(k)*I;P===0?this.pathGraphics.moveTo(A,D):this.pathGraphics.lineTo(A,D)}break;case"polyline":this.pathGraphics.moveTo(c.points[0].x*u,c.points[0].y*d);for(let P=1;P<c.points.length;P++)this.pathGraphics.lineTo(c.points[P].x*u,c.points[P].y*d);break}this.pixi.stage.addChild(this.pathGraphics)}drawRoundedLine(c,u,d,p,m){const g=d-c,y=p-u,_=Math.sqrt(g*g+y*y);if(_===0)return;const x=g/_,O=y/_;this.pathGraphics.moveTo(c+x*m,u+O*m),this.pathGraphics.lineTo(d-x*m,p-O*m)}getWavePosition(c,u){const d=this.pixi.screen.width,p=this.pixi.screen.height,m=c.start.x*d+(c.end.x*d-c.start.x*d)*u,g=Math.sin(u*c.frequency*Math.PI*2)*c.amplitude*p;return{x:m,y:c.start.y*p+g}}cleanupLevel(){this.obstacles.forEach(c=>c.destroy()),this.obstacles=[],this.player&&this.player.sprite&&this.pixi.stage.removeChild(this.player.sprite),this.pathGraphics&&this.pixi.stage.removeChild(this.pathGraphics)}updateUI(){const c=e[this.currentLevel];this.scoreText.text=`目标：${this.score}/${c.targetScore}`,this.gameState==="waiting"?(this.instructionText.text="点击屏幕开始游戏",this.instructionText.visible=!0,this.helpText.visible=!0):this.gameState==="playing"?(this.instructionText.visible=!1,this.helpText.visible=!1):this.gameState==="gameover"?(this.instructionText.text="游戏结束！点击重新开始",this.instructionText.visible=!0,this.helpText.visible=!1):this.gameState==="win"&&(this.instructionText.text="恭喜通关！点击继续",this.instructionText.visible=!0,this.helpText.visible=!1)}startGame(){this.gameState==="waiting"?(this.gameState="playing",this.player.start(),this.playSound("click"),this.updateUI()):this.gameState==="gameover"?this.loadLevel(this.currentLevel):this.gameState==="win"&&(this.currentLevel++,this.currentLevel>=e.length&&(this.currentLevel=0),this.loadLevel(this.currentLevel))}reversePlayer(){this.gameState==="playing"&&this.player&&(this.player.reverse(),this.playSound("click"))}spawnObstacle(){const c=e[this.currentLevel],u=c.obstacles.types[Math.floor(Math.random()*c.obstacles.types.length)],d=Math.random()*this.pixi.screen.width*.8+this.pixi.screen.width*.1,p=new n(this.pixi,u,d,-50);this.obstacles.push(p)}checkCollisions(){if(!this.player)return;const c=this.player.getBounds();for(let u=this.obstacles.length-1;u>=0;u--){const d=this.obstacles[u],p=d.getBounds();if(this.isColliding(c,p)){if(d.type==="bomb")this.score=0,this.playSound("bomb"),this.gameState="gameover",this.updateUI(),this.createExplosion(d.sprite.x,d.sprite.y),this.showFailScreen();else if(d.type==="hankey"){this.score++,this.playSound("collect"),this.createHankeyFlyEffect(d.sprite.x,d.sprite.y);const m=e[this.currentLevel];this.score>=m.targetScore&&(this.gameState="win",this.updateUI(),this.showWinScreen())}d.destroy(),this.obstacles.splice(u,1)}}}createExplosion(c,u){const d=new En;d.beginFill(16711680,.8),d.drawCircle(0,0,50),d.endFill(),d.x=c,d.y=u,this.pixi.stage.addChild(d),Ff.to(d,{alpha:0,pixi:{scale:2},duration:.8,ease:"power2.out",onComplete:()=>{this.pixi.stage.removeChild(d)}})}createHankeyFlyEffect(c,u){const d=new hr(this.textures["/ballgame/hankey.png"]);d.anchor.set(.5),d.x=c,d.y=u,this.pixi.stage.addChild(d);const p=this.scoreText.x-this.scoreText.width/2,m=this.scoreText.y;Ff.to(d,{pixi:{x:p,y:m,scale:.5},duration:.6,ease:"power2.inOut",onComplete:()=>{this.pixi.stage.removeChild(d),this.updateUI()}})}showFailScreen(){const c=new hr(this.textures["/ballgame/player_fail.png"]);c.anchor.set(.5),c.x=this.pixi.screen.width*.5,c.y=this.pixi.screen.height*.5,c.alpha=0,this.pixi.stage.addChild(c),Ff.timeline({onComplete:()=>{this.pixi.stage.removeChild(c)}}).to(c,{alpha:1,duration:.5,ease:"power2.out"}).to(c,{alpha:0,duration:.5,ease:"power2.in",delay:1})}showWinScreen(){const c=new hr(this.textures["/ballgame/player_win.png"]);c.anchor.set(.5),c.x=this.pixi.screen.width*.5,c.y=this.pixi.screen.height*.5,c.alpha=0,this.pixi.stage.addChild(c);for(let d=0;d<20;d++){const p=new En;p.beginFill(16776960,.8),p.drawCircle(0,0,5),p.endFill(),p.x=this.pixi.screen.width*.5,p.y=this.pixi.screen.height*.5,p.alpha=0,this.pixi.stage.addChild(p);const m=Math.PI*2*d/20,g=100+Math.random()*50,y=this.pixi.screen.width*.5+Math.cos(m)*g,_=this.pixi.screen.height*.5+Math.sin(m)*g;Ff.timeline({onComplete:()=>{this.pixi.stage.removeChild(p)}}).to(p,{alpha:1,duration:.3,delay:d*.1,ease:"power2.out"}).to(p,{x:y,y:_,alpha:0,duration:1.5,ease:"power2.in"})}Ff.timeline({onComplete:()=>{this.pixi.stage.removeChild(c)}}).to(c,{alpha:1,pixi:{scale:1.2},duration:.8,ease:"back.out(1.7)"}).to(c,{pixi:{scale:1},duration:.3,ease:"power2.out"}).to(c,{alpha:0,duration:.5,ease:"power2.in",delay:2})}isColliding(c,u){return c.x<u.x+u.width&&c.x+c.width>u.x&&c.y<u.y+u.height&&c.y+c.height>u.y}gameLoop(){const c=Date.now();if(this.gameState==="playing"){this.player&&this.player.update();const u=e[this.currentLevel];c-this.lastObstacleTime>u.obstacles.interval&&(this.spawnObstacle(),this.lastObstacleTime=c);for(let d=this.obstacles.length-1;d>=0;d--){const p=this.obstacles[d];p.update(),p.isOutOfScreen()&&(p.destroy(),this.obstacles.splice(d,1))}this.checkCollisions()}requestAnimationFrame(()=>this.gameLoop())}handleClick(){this.gameState==="waiting"||this.gameState==="gameover"||this.gameState==="win"?this.startGame():this.gameState==="playing"&&this.reversePlayer()}destroy(){this.cleanupLevel(),this.pixi&&this.pixi.destroy(!0),this.starContainer&&this.starContainer.destroy({children:!0}),Ff.killTweensOf("*")}}const o=new s,a=lt(null);return nr(async()=>{Ff.registerPlugin(EL),EL.registerPIXI(Kje),await o.init(),o.initGame();const l=()=>{o.handleClick()};document.addEventListener("click",l),ta(()=>{document.removeEventListener("click",l),o.destroy()})}),(l,c)=>(ci(),pn("div",Tqe,[It("canvas",{ref_key:"pixiContainer",ref:a},null,512)]))}},Eqe=zd(Aqe,[["__scopeId","data-v-ab5b7a54"]]),Mqe=It("TresPerspectiveCamera",{position:[0,20,0],rotation:[0,0,0]},null,-1),Pqe=It("TresAmbientLight",{intensity:1},null,-1),kqe=It("TresAxesHelper",null,null,-1),Iqe=It("TresGridHelper",null,null,-1),Rqe={__name:"ThreeHello",setup(r){const e=br(null);return tn(e,()=>{}),(i,n)=>{const s=St("TresCanvas");return ci(),pn("div",null,[ke(s,{ref_key:"canvasRef",ref:e,"clear-color":"#e0eee8","window-size":""},{default:Je(()=>[Mqe,Pqe,kqe,Iqe,ke(li(IP))]),_:1},512)])}}},Bqe=It("TresAmbientLight",{intensity:1},null,-1),Dqe=It("TresAxesHelper",null,null,-1),Lqe=["position"],Nqe=It("TresSphereGeometry",{args:[.4,8,8]},null,-1),Vqe=It("TresMeshBasicMaterial",{color:"red",transparent:!0,opacity:.1},null,-1),Fqe=[Nqe,Vqe],$qe={__name:"CurveRope",setup(r){const e=br(null),i=br(null),n=br(null);let o=new _P().load("img/rope3.png");var a=new dc({map:o});const l=br(null);let c=-1,u=new qN,d=u0([new le(0,-8,0),new le(0,2,0),new le(0,8,0)]);function p(){const _=new sP(...d),x=_.getLength();console.log("curveLength",x);const O=30;var S=[],w=[];for(let k=0;k<O;k++){let I=k/O,A=_.getPointAt(I),D=_.getTangentAt(I),V=new Ge(-D.y,D.x).normalize(),B=(k+1)/O,L=_.getPointAt(B),F=_.getTangentAt(B),$=new Ge(-F.y,F.x).normalize(),z=[A.clone().add(V.clone().multiplyScalar(.4)),A.clone().sub(V.clone().multiplyScalar(.4)),L.clone().add($.clone().multiplyScalar(.4)),L.clone().sub($.clone().multiplyScalar(.4))];S.push(z[0]),S.push(z[1]),S.push(z[2]),S.push(z[1]),S.push(z[3]),S.push(z[2]);let H=0,K=1;console.log(`ratio1=${I.toFixed(2)}`,`uv1=${H.toFixed(2)}`,`uv2=${K.toFixed(2)}`),w.push(new Ge(0,H)),w.push(new Ge(1,H)),w.push(new Ge(0,K)),w.push(new Ge(1,H)),w.push(new Ge(1,K)),w.push(new Ge(0,K))}const C=new Float32Array(S.length*3);for(let k=0;k<S.length;k++)C[k*3]=S[k].x,C[k*3+1]=S[k].y,C[k*3+2]=0;const M=new Float32Array(w.length*2);for(let k=0;k<w.length;k++)M[k*2]=w[k].x,M[k*2+1]=w[k].y;var P=new Ai;for(P.setAttribute("position",new un(C,3)),P.setAttribute("uv",new un(M,2));i.value.children.length>0;)i.value.remove(i.value.children[0]);var R;{var R=new Un(P,a);i.value.add(R)}}tn(i,()=>{p()});function m(_){if(c>=0){let x={x:0,y:0};x.x=_.clientX/window.innerWidth*2-1,x.y=-(_.clientY/window.innerHeight)*2+1,u.setFromCamera(x,n.value);let O=new Qh(new le(0,0,1),0),S=new le;u.ray.intersectPlane(O,S)&&(d[c]=S),p()}}function g(_){let x={x:_.clientX/window.innerWidth*2-1,y:-(_.clientY/window.innerHeight)*2+1};u.setFromCamera(x,n.value);const O=u.intersectObjects(l.value.children);if(O.length>0){const S=O[0].object;c=l.value.children.indexOf(S)}else c=-1}function y(_){c=-1}return(_,x)=>{const O=St("TresCanvas");return ci(),pn("div",{onMousemove:m,onMousedown:g,onMouseup:y},[ke(O,{ref_key:"canvasRef",ref:e,"clear-color":"#f9f7f7","window-size":""},{default:Je(()=>[It("TresPerspectiveCamera",{ref_key:"cameraRef",ref:n,position:[0,0,20],rotation:[0,0,0]},null,512),Bqe,Dqe,It("TresGroup",{ref_key:"curveRef",ref:i},null,512),It("TresGroup",{ref_key:"controlPointsRef",ref:l},[(ci(!0),pn(Fn,null,au(li(d),(S,w)=>(ci(),pn("TresMesh",{key:w,position:S},Fqe,8,Lqe))),128))],512)]),_:1},512)],32)}}},{abs:j1,cos:Wu,sin:Tv,acos:Uqe,atan2:Y1,sqrt:Mf,pow:Xl}=Math;function q1(r){return r<0?-Xl(-r,1/3):Xl(r,1/3)}const Kle=Math.PI,TT=2*Kle,Pf=Kle/2,zqe=1e-6,LB=Number.MAX_SAFE_INTEGER||9007199254740991,NB=Number.MIN_SAFE_INTEGER||-9007199254740991,Xqe={x:0,y:0,z:0},ht={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(r,e){const i=e(r);let n=i.x*i.x+i.y*i.y;return typeof i.z<"u"&&(n+=i.z*i.z),Mf(n)},compute:function(r,e,i){if(r===0)return e[0].t=0,e[0];const n=e.length-1;if(r===1)return e[n].t=1,e[n];const s=1-r;let o=e;if(n===0)return e[0].t=r,e[0];if(n===1){const l={x:s*o[0].x+r*o[1].x,y:s*o[0].y+r*o[1].y,t:r};return i&&(l.z=s*o[0].z+r*o[1].z),l}if(n<4){let l=s*s,c=r*r,u,d,p,m=0;n===2?(o=[o[0],o[1],o[2],Xqe],u=l,d=s*r*2,p=c):n===3&&(u=l*s,d=l*r*3,p=s*c*3,m=r*c);const g={x:u*o[0].x+d*o[1].x+p*o[2].x+m*o[3].x,y:u*o[0].y+d*o[1].y+p*o[2].y+m*o[3].y,t:r};return i&&(g.z=u*o[0].z+d*o[1].z+p*o[2].z+m*o[3].z),g}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*r,y:a[l].y+(a[l+1].y-a[l].y)*r},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*r);a.splice(a.length-1,1)}return a[0].t=r,a[0]},computeWithRatios:function(r,e,i,n){const s=1-r,o=i,a=e;let l=o[0],c=o[1],u=o[2],d=o[3],p;if(l*=s,c*=r,a.length===2)return p=l+c,{x:(l*a[0].x+c*a[1].x)/p,y:(l*a[0].y+c*a[1].y)/p,z:n?(l*a[0].z+c*a[1].z)/p:!1,t:r};if(l*=s,c*=2*s,u*=r*r,a.length===3)return p=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/p,y:(l*a[0].y+c*a[1].y+u*a[2].y)/p,z:n?(l*a[0].z+c*a[1].z+u*a[2].z)/p:!1,t:r};if(l*=s,c*=1.5*s,u*=3*s,d*=r*r*r,a.length===4)return p=l+c+u+d,{x:(l*a[0].x+c*a[1].x+u*a[2].x+d*a[3].x)/p,y:(l*a[0].y+c*a[1].y+u*a[2].y+d*a[3].y)/p,z:n?(l*a[0].z+c*a[1].z+u*a[2].z+d*a[3].z)/p:!1,t:r}},derive:function(r,e){const i=[];for(let n=r,s=n.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,c;l<o;l++)c={x:o*(n[l+1].x-n[l].x),y:o*(n[l+1].y-n[l].y)},e&&(c.z=o*(n[l+1].z-n[l].z)),a.push(c);i.push(a),n=a}return i},between:function(r,e,i){return e<=r&&r<=i||ht.approximately(r,e)||ht.approximately(r,i)},approximately:function(r,e,i){return j1(r-e)<=(i||zqe)},length:function(r){const i=ht.Tvalues.length;let n=0;for(let s=0,o;s<i;s++)o=.5*ht.Tvalues[s]+.5,n+=ht.Cvalues[s]*ht.arcfn(o,r);return .5*n},map:function(r,e,i,n,s){const o=i-e,a=s-n,l=r-e,c=l/o;return n+a*c},lerp:function(r,e,i){const n={x:e.x+r*(i.x-e.x),y:e.y+r*(i.y-e.y)};return e.z!==void 0&&i.z!==void 0&&(n.z=e.z+r*(i.z-e.z)),n},pointToString:function(r){let e=r.x+"/"+r.y;return typeof r.z<"u"&&(e+="/"+r.z),e},pointsToString:function(r){return"["+r.map(ht.pointToString).join(", ")+"]"},copy:function(r){return JSON.parse(JSON.stringify(r))},angle:function(r,e,i){const n=e.x-r.x,s=e.y-r.y,o=i.x-r.x,a=i.y-r.y,l=n*a-s*o,c=n*o+s*a;return Y1(l,c)},round:function(r,e){const i=""+r,n=i.indexOf(".");return parseFloat(i.substring(0,n+1+e))},dist:function(r,e){const i=r.x-e.x,n=r.y-e.y;return Mf(i*i+n*n)},closest:function(r,e){let i=Xl(2,63),n,s;return r.forEach(function(o,a){s=ht.dist(e,o),s<i&&(i=s,n=a)}),{mdist:i,mpos:n}},abcratio:function(r,e){if(e!==2&&e!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;const i=Xl(r,e)+Xl(1-r,e),n=i-1;return j1(n/i)},projectionratio:function(r,e){if(e!==2&&e!==3)return!1;if(typeof r>"u")r=.5;else if(r===0||r===1)return r;const i=Xl(1-r,e),n=Xl(r,e)+i;return i/n},lli8:function(r,e,i,n,s,o,a,l){const c=(r*n-e*i)*(s-a)-(r-i)*(s*l-o*a),u=(r*n-e*i)*(o-l)-(e-n)*(s*l-o*a),d=(r-i)*(o-l)-(e-n)*(s-a);return d==0?!1:{x:c/d,y:u/d}},lli4:function(r,e,i,n){const s=r.x,o=r.y,a=e.x,l=e.y,c=i.x,u=i.y,d=n.x,p=n.y;return ht.lli8(s,o,a,l,c,u,d,p)},lli:function(r,e){return ht.lli4(r,r.c,e,e.c)},makeline:function(r,e){return new Kn(r.x,r.y,(r.x+e.x)/2,(r.y+e.y)/2,e.x,e.y)},findbbox:function(r){let e=LB,i=LB,n=NB,s=NB;return r.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),i>a.y.min&&(i=a.y.min),n<a.x.max&&(n=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+n)/2,max:n,size:n-e},y:{min:i,mid:(i+s)/2,max:s,size:s-i}}},shapeintersections:function(r,e,i,n,s){if(!ht.bboxoverlap(e,n))return[];const o=[],a=[r.startcap,r.forward,r.back,r.endcap],l=[i.startcap,i.forward,i.back,i.endcap];return a.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const d=c.intersects(u,s);d.length>0&&(d.c1=c,d.c2=u,d.s1=r,d.s2=i,o.push(d))})}),o},makeshape:function(r,e,i){const n=e.points.length,s=r.points.length,o=ht.makeline(e.points[n-1],r.points[0]),a=ht.makeline(r.points[s-1],e.points[0]),l={startcap:o,forward:r,back:e,endcap:a,bbox:ht.findbbox([o,r,e,a])};return l.intersections=function(c){return ht.shapeintersections(l,l.bbox,c,c.bbox,i)},l},getminmax:function(r,e,i){if(!i)return{min:0,max:0};let n=LB,s=NB,o,a;i.indexOf(0)===-1&&(i=[0].concat(i)),i.indexOf(1)===-1&&i.push(1);for(let l=0,c=i.length;l<c;l++)o=i[l],a=r.get(o),a[e]<n&&(n=a[e]),a[e]>s&&(s=a[e]);return{min:n,mid:(n+s)/2,max:s,size:s-n}},align:function(r,e){const i=e.p1.x,n=e.p1.y,s=-Y1(e.p2.y-n,e.p2.x-i),o=function(a){return{x:(a.x-i)*Wu(s)-(a.y-n)*Tv(s),y:(a.x-i)*Tv(s)+(a.y-n)*Wu(s)}};return r.map(o)},roots:function(r,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const i=r.length-1,n=ht.align(r,e),s=function(R){return 0<=R&&R<=1};if(i===2){const R=n[0].y,k=n[1].y,I=n[2].y,A=R-2*k+I;if(A!==0){const D=-Mf(k*k-R*I),V=-R+k,B=-(D+V)/A,L=-(-D+V)/A;return[B,L].filter(s)}else if(k!==I&&A===0)return[(2*k-I)/(2*k-2*I)].filter(s);return[]}const o=n[0].y,a=n[1].y,l=n[2].y,c=n[3].y;let u=-o+3*a-3*l+c,d=3*o-6*a+3*l,p=-3*o+3*a,m=o;if(ht.approximately(u,0)){if(ht.approximately(d,0))return ht.approximately(p,0)?[]:[-m/p].filter(s);const R=Mf(p*p-4*d*m),k=2*d;return[(R-p)/k,(-p-R)/k].filter(s)}d/=u,p/=u,m/=u;const g=(3*p-d*d)/3,y=g/3,_=(2*d*d*d-9*d*p+27*m)/27,x=_/2,O=x*x+y*y*y;let S,w,C,M,P;if(O<0){const R=-g/3,k=R*R*R,I=Mf(k),A=-_/(2*I),D=A<-1?-1:A>1?1:A,V=Uqe(D),B=q1(I),L=2*B;return C=L*Wu(V/3)-d/3,M=L*Wu((V+TT)/3)-d/3,P=L*Wu((V+2*TT)/3)-d/3,[C,M,P].filter(s)}else{if(O===0)return S=x<0?q1(-x):-q1(x),C=2*S-d/3,M=-S-d/3,[C,M].filter(s);{const R=Mf(O);return S=q1(-x+R),w=q1(x+R),[S-w-d/3].filter(s)}}},droots:function(r){if(r.length===3){const e=r[0],i=r[1],n=r[2],s=e-2*i+n;if(s!==0){const o=-Mf(i*i-e*n),a=-e+i,l=-(o+a)/s,c=-(-o+a)/s;return[l,c]}else if(i!==n&&s===0)return[(2*i-n)/(2*(i-n))];return[]}if(r.length===2){const e=r[0],i=r[1];return e!==i?[e/(e-i)]:[]}return[]},curvature:function(r,e,i,n,s){let o,a,l,c,u=0,d=0;const p=ht.compute(r,e),m=ht.compute(r,i),g=p.x*p.x+p.y*p.y;if(n?(o=Mf(Xl(p.y*m.z-m.y*p.z,2)+Xl(p.z*m.x-m.z*p.x,2)+Xl(p.x*m.y-m.x*p.y,2)),a=Xl(g+p.z*p.z,3/2)):(o=p.x*m.y-p.y*m.x,a=Xl(g,3/2)),o===0||a===0)return{k:0,r:0};if(u=o/a,d=a/o,!s){const y=ht.curvature(r-.001,e,i,n,!0).k,_=ht.curvature(r+.001,e,i,n,!0).k;c=(_-u+(u-y))/2,l=(j1(_-u)+j1(u-y))/2}return{k:u,r:d,dk:c,adk:l}},inflections:function(r){if(r.length<4)return[];const e=ht.align(r,{p1:r[0],p2:r.slice(-1)[0]}),i=e[2].x*e[1].y,n=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*i+2*n+3*s-o),l=18*(3*i-n-3*s),c=18*(s-i);if(ht.approximately(a,0)){if(!ht.approximately(l,0)){let m=-c/l;if(0<=m&&m<=1)return[m]}return[]}const u=2*a;if(ht.approximately(u,0))return[];const d=l*l-4*a*c;if(d<0)return[];const p=Math.sqrt(d);return[(p-l)/u,-(l+p)/u].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(r,e){const i=["x","y"],n=i.length;for(let s=0,o,a,l,c;s<n;s++)if(o=i[s],a=r[o].mid,l=e[o].mid,c=(r[o].size+e[o].size)/2,j1(a-l)>=c)return!1;return!0},expandbox:function(r,e){e.x.min<r.x.min&&(r.x.min=e.x.min),e.y.min<r.y.min&&(r.y.min=e.y.min),e.z&&e.z.min<r.z.min&&(r.z.min=e.z.min),e.x.max>r.x.max&&(r.x.max=e.x.max),e.y.max>r.y.max&&(r.y.max=e.y.max),e.z&&e.z.max>r.z.max&&(r.z.max=e.z.max),r.x.mid=(r.x.min+r.x.max)/2,r.y.mid=(r.y.min+r.y.max)/2,r.z&&(r.z.mid=(r.z.min+r.z.max)/2),r.x.size=r.x.max-r.x.min,r.y.size=r.y.max-r.y.min,r.z&&(r.z.size=r.z.max-r.z.min)},pairiteration:function(r,e,i){const n=r.bbox(),s=e.bbox(),o=1e5,a=i||.5;if(n.x.size+n.y.size<a&&s.x.size+s.y.size<a)return[(o*(r._t1+r._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=r.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(p){return ht.bboxoverlap(p.left.bbox(),p.right.bbox())});let d=[];return u.length===0||(u.forEach(function(p){d=d.concat(ht.pairiteration(p.left,p.right,a))}),d=d.filter(function(p,m){return d.indexOf(p)===m})),d},getccenter:function(r,e,i){const n=e.x-r.x,s=e.y-r.y,o=i.x-e.x,a=i.y-e.y,l=n*Wu(Pf)-s*Tv(Pf),c=n*Tv(Pf)+s*Wu(Pf),u=o*Wu(Pf)-a*Tv(Pf),d=o*Tv(Pf)+a*Wu(Pf),p=(r.x+e.x)/2,m=(r.y+e.y)/2,g=(e.x+i.x)/2,y=(e.y+i.y)/2,_=p+l,x=m+c,O=g+u,S=y+d,w=ht.lli8(p,m,_,x,g,y,O,S),C=ht.dist(w,r);let M=Y1(r.y-w.y,r.x-w.x),P=Y1(e.y-w.y,e.x-w.x),R=Y1(i.y-w.y,i.x-w.x),k;return M<R?((M>P||P>R)&&(M+=TT),M>R&&(k=R,R=M,M=k)):R<P&&P<M?(k=R,R=M,M=k):R+=TT,w.s=M,w.e=R,w.r=C,w},numberSort:function(r,e){return r-e}};class sw{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return ht.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,i){return e+i})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var i=e[0].bbox(),n=1;n<e.length;n++)ht.expandbox(i,e[n].bbox());return i}offset(e){const i=[];return this.curves.forEach(function(n){i.push(...n.offset(e))}),new sw(i)}}const{abs:Z1,min:zj,max:Xj,cos:Wqe,sin:Gqe,acos:Hqe,sqrt:K1}=Math,Qqe=Math.PI;class Kn{constructor(e){let i=e&&e.forEach?e:Array.from(arguments).slice(),n=!1;if(typeof i[0]=="object"){n=i.length;const g=[];i.forEach(function(y){["x","y","z"].forEach(function(_){typeof y[_]<"u"&&g.push(y[_])})}),i=g}let s=!1;const o=i.length;if(n){if(n>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let g=0,y=a?3:2;g<o;g+=y){var c={x:i[g],y:i[g+1]};a&&(c.z=i[g+2]),l.push(c)}const u=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const p=ht.align(l,{p1:l[0],p2:l[u]}),m=ht.dist(l[0],l[u]);this._linear=p.reduce((g,y)=>g+Z1(y.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,i,n,s){if(typeof s>"u"&&(s=.5),s===0)return new Kn(i,i,n);if(s===1)return new Kn(e,i,i);const o=Kn.getABC(2,e,i,n,s);return new Kn(e,o.A,n)}static cubicFromPoints(e,i,n,s,o){typeof s>"u"&&(s=.5);const a=Kn.getABC(3,e,i,n,s);typeof o>"u"&&(o=ht.dist(i,a.C));const l=o*(1-s)/s,c=ht.dist(e,n),u=(n.x-e.x)/c,d=(n.y-e.y)/c,p=o*u,m=o*d,g=l*u,y=l*d,_={x:i.x-p,y:i.y-m},x={x:i.x+g,y:i.y+y},O=a.A,S={x:O.x+(_.x-O.x)/(1-s),y:O.y+(_.y-O.y)/(1-s)},w={x:O.x+(x.x-O.x)/s,y:O.y+(x.y-O.y)/s},C={x:e.x+(S.x-e.x)/s,y:e.y+(S.y-e.y)/s},M={x:n.x+(w.x-n.x)/(1-s),y:n.y+(w.y-n.y)/(1-s)};return new Kn(e,C,M,n)}static getUtils(){return ht}getUtils(){return Kn.getUtils()}static get PolyBezier(){return sw}valueOf(){return this.toString()}toString(){return ht.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,i=e[0].x,n=e[0].y,s=["M",i,n,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,i){return""+i+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=ht.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,i=ht.angle(e[0],e[this.order],e[1]);this.clockwise=i>0}length(){return ht.length(this.derivative.bind(this))}static getABC(e=2,i,n,s,o=.5){const a=ht.projectionratio(o,e),l=1-a,c={x:a*i.x+l*s.x,y:a*i.y+l*s.y},u=ht.abcratio(o,e);return{A:{x:n.x+(n.x-c.x)/u,y:n.y+(n.y-c.y)/u},B:n,C:c,S:i,E:s}}getABC(e,i){i=i||this.get(e);let n=this.points[0],s=this.points[this.order];return Kn.getABC(this.order,n,i,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let i=0,n,s;i<e;i++)s=i/(e-1),n=this.compute(s),n.t=s,this._lut.push(n);return this._lut}on(e,i){i=i||5;const n=this.getLUT(),s=[];for(let o=0,a,l=0;o<n.length;o++)a=n[o],ht.dist(a,e)<i&&(s.push(a),l+=o/n.length);return s.length?t/=s.length:!1}project(e){const i=this.getLUT(),n=i.length-1,s=ht.closest(i,e),o=s.mpos,a=(o-1)/n,l=(o+1)/n,c=.1/n;let u=s.mdist,d=a,p=d,m;u+=1;for(let g;d<l+c;d+=c)m=this.compute(d),g=ht.dist(e,m),g<u&&(u=g,p=d);return p=p<0?0:p>1?1:p,m=this.compute(p),m.t=p,m.d=u,m}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?ht.computeWithRatios(e,this.points,this.ratios,this._3d):ht.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,i=[e[0]],n=e.length;for(let s=1,o,a;s<n;s++)o=e[s],a=e[s-1],i[s]={x:(n-s)/n*o.x+s/n*a.x,y:(n-s)/n*o.y+s/n*a.y};return i[n]=e[n-1],new Kn(i)}derivative(e){return ht.compute(e,this.dpoints[0],this._3d)}dderivative(e){return ht.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Kn(ht.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return ht.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return ht.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const i=this.derivative(e),n=K1(i.x*i.x+i.y*i.y);return{t:e,x:-i.y/n,y:i.x/n}}__normal3(e){const i=this.derivative(e),n=this.derivative(e+.01),s=K1(i.x*i.x+i.y*i.y+i.z*i.z),o=K1(n.x*n.x+n.y*n.y+n.z*n.z);i.x/=s,i.y/=s,i.z/=s,n.x/=o,n.y/=o,n.z/=o;const a={x:n.y*i.z-n.z*i.y,y:n.z*i.x-n.x*i.z,z:n.x*i.y-n.y*i.x},l=K1(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const c=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:c[0]*i.x+c[1]*i.y+c[2]*i.z,y:c[3]*i.x+c[4]*i.y+c[5]*i.z,z:c[6]*i.x+c[7]*i.y+c[8]*i.z}}hull(e){let i=this.points,n=[],s=[],o=0;for(s[o++]=i[0],s[o++]=i[1],s[o++]=i[2],this.order===3&&(s[o++]=i[3]);i.length>1;){n=[];for(let a=0,l,c=i.length-1;a<c;a++)l=ht.lerp(e,i[a],i[a+1]),s[o++]=l,n.push(l);i=n}return s}split(e,i){if(e===0&&i)return this.split(i).left;if(i===1)return this.split(e).right;const n=this.hull(e),s={left:this.order===2?new Kn([n[0],n[3],n[5]]):new Kn([n[0],n[4],n[7],n[9]]),right:this.order===2?new Kn([n[5],n[4],n[2]]):new Kn([n[9],n[8],n[6],n[3]]),span:n};return s.left._t1=ht.map(0,0,1,this._t1,this._t2),s.left._t2=ht.map(e,0,1,this._t1,this._t2),s.right._t1=ht.map(e,0,1,this._t1,this._t2),s.right._t2=ht.map(1,0,1,this._t1,this._t2),i?(i=ht.map(i,e,1,0,1),s.right.split(i).left):s}extrema(){const e={};let i=[];return this.dims.forEach((function(n){let s=function(a){return a[n]},o=this.dpoints[0].map(s);e[n]=ht.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[n]=e[n].concat(ht.droots(o))),e[n]=e[n].filter(function(a){return a>=0&&a<=1}),i=i.concat(e[n].sort(ht.numberSort))}).bind(this)),e.values=i.sort(ht.numberSort).filter(function(n,s){return i.indexOf(n)===s}),e}bbox(){const e=this.extrema(),i={};return this.dims.forEach((function(n){i[n]=ht.getminmax(this,n,e[n])}).bind(this)),i}overlaps(e){const i=this.bbox(),n=e.bbox();return ht.bboxoverlap(i,n)}offset(e,i){if(typeof i<"u"){const n=this.get(e),s=this.normal(e),o={c:n,n:s,x:n.x+s.x*i,y:n.y+s.y*i};return this._3d&&(o.z=n.z+s.z*i),o}if(this._linear){const n=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*n.x,y:o.y+e*n.y};return o.z&&n.z&&(a.z=o.z+e*n.z),a});return[new Kn(s)]}return this.reduce().map(function(n){return n._linear?n.offset(e)[0]:n.scale(e)})}simple(){if(this.order===3){const s=ht.angle(this.points[0],this.points[3],this.points[1]),o=ht.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),i=this.normal(1);let n=e.x*i.x+e.y*i.y;return this._3d&&(n+=e.z*i.z),Z1(Hqe(n))<Qqe/3}reduce(){let e,i=0,n=0,s=.01,o,a=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),i=c[0],e=1;e<c.length;e++)n=c[e],o=this.split(i,n),o._t1=i,o._t2=n,a.push(o),i=n;return a.forEach(function(u){for(i=0,n=0;n<=1;)for(n=i+s;n<=1+s;n+=s)if(o=u.split(i,n),!o.simple()){if(n-=s,Z1(i-n)<s)return[];o=u.split(i,n),o._t1=ht.map(i,0,1,u._t1,u._t2),o._t2=ht.map(n,0,1,u._t1,u._t2),l.push(o),i=n;break}i<1&&(o=u.split(i,1),o._t1=ht.map(i,0,1,u._t1,u._t2),o._t2=u._t2,l.push(o))}),l}translate(e,i,n){n=typeof n=="number"?n:i;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*i+l/s*n);return new Kn(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const i=this.order;let n=!1;if(typeof e=="function"&&(n=e),n&&i===2)return this.raise().scale(n);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),n?n(0):e,n?n(1):e);const a=n?n(0):e,l=n?n(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],d=ht.lli4(c[0],c[0].c,c[1],c[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(p){const m=u[p*i]=ht.copy(o[p*i]);m.x+=(p?l:a)*c[p].n.x,m.y+=(p?l:a)*c[p].n.y}),n?([0,1].forEach(function(p){if(!(i===2&&p)){var m=o[p+1],g={x:m.x-d.x,y:m.y-d.y},y=n?n((p+1)/i):e;n&&!s&&(y=-y);var _=K1(g.x*g.x+g.y*g.y);g.x/=_,g.y/=_,u[p+1]={x:m.x+y*g.x,y:m.y+y*g.y}}}),new Kn(u)):([0,1].forEach(p=>{if(i===2&&p)return;const m=u[p*i],g=this.derivative(p),y={x:m.x+g.x,y:m.y+g.y};u[p+1]=ht.lli4(m,y,d,o[p+1])}),new Kn(u))}outline(e,i,n,s){if(i=i===void 0?e:i,this._linear){const M=this.normal(0),P=this.points[0],R=this.points[this.points.length-1];let k,I,A;n===void 0&&(n=e,s=i),k={x:P.x+M.x*e,y:P.y+M.y*e},A={x:R.x+M.x*n,y:R.y+M.y*n},I={x:(k.x+A.x)/2,y:(k.y+A.y)/2};const D=[k,I,A];k={x:P.x-M.x*i,y:P.y-M.y*i},A={x:R.x-M.x*s,y:R.y-M.y*s},I={x:(k.x+A.x)/2,y:(k.y+A.y)/2};const V=[A,I,k],B=ht.makeline(V[2],D[0]),L=ht.makeline(D[2],V[0]),F=[B,new Kn(D),L,new Kn(V)];return new sw(F)}const o=this.reduce(),a=o.length,l=[];let c=[],u,d=0,p=this.length();const m=typeof n<"u"&&typeof s<"u";function g(M,P,R,k,I){return function(A){const D=k/R,V=(k+I)/R,B=P-M;return ht.map(A,0,1,M+D*B,M+V*B)}}o.forEach(function(M){const P=M.length();m?(l.push(M.scale(g(e,n,p,d,P))),c.push(M.scale(g(-i,-s,p,d,P)))):(l.push(M.scale(e)),c.push(M.scale(-i))),d+=P}),c=c.map(function(M){return u=M.points,u[3]?M.points=[u[3],u[2],u[1],u[0]]:M.points=[u[2],u[1],u[0]],M}).reverse();const y=l[0].points[0],_=l[a-1].points[l[a-1].points.length-1],x=c[a-1].points[c[a-1].points.length-1],O=c[0].points[0],S=ht.makeline(x,y),w=ht.makeline(_,O),C=[S].concat(l).concat([w]).concat(c);return new sw(C)}outlineshapes(e,i,n){i=i||e;const s=this.outline(e,i).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const c=ht.makeshape(s[a],s[l-a],n);c.startcap.virtual=a>1,c.endcap.virtual=a<l/2-1,o.push(c)}return o}intersects(e,i){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Kn&&(e=e.reduce()),this.curveintersects(this.reduce(),e,i)):this.selfintersects(i)}lineIntersects(e){const i=zj(e.p1.x,e.p2.x),n=zj(e.p1.y,e.p2.y),s=Xj(e.p1.x,e.p2.x),o=Xj(e.p1.y,e.p2.y);return ht.roots(this.points,e).filter(a=>{var l=this.get(a);return ht.between(l.x,i,s)&&ht.between(l.y,n,o)})}selfintersects(e){const i=this.reduce(),n=i.length-2,s=[];for(let o=0,a,l,c;o<n;o++)l=i.slice(o,o+1),c=i.slice(o+2),a=this.curveintersects(l,c,e),s.push(...a);return s}curveintersects(e,i,n){const s=[];e.forEach(function(a){i.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=ht.pairiteration(a.left,a.right,n);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,i,n,s){const o=(s-n)/4,a=this.get(n+o),l=this.get(s-o),c=ht.dist(e,i),u=ht.dist(e,a),d=ht.dist(e,l);return Z1(u-c)+Z1(d-c)}_iterate(e,i){let n=0,s=1,o;do{o=0,s=1;let a=this.get(n),l,c,u,d,p=!1,m=!1,g,y=s,_=1;do if(m=p,d=u,y=(n+s)/2,l=this.get(y),c=this.get(s),u=ht.getccenter(a,l,c),u.interval={start:n,end:s},p=this._error(u,a,n,s)<=e,g=m&&!p,g||(_=s),p){if(s>=1){if(u.interval.end=_=1,d=u,s>1){let O={x:u.x+u.r*Wqe(u.e),y:u.y+u.r*Gqe(u.e)};u.e+=ht.angle({x:u.x,y:u.y},O,this.get(1))}break}s=s+(s-n)/2}else s=y;while(!g&&o++<100);if(o>=100)break;d=d||u,i.push(d),n=_}while(s<1);return i}}Zte();const jqe=It("p",{style:{width:"100px"}},"算法：",-1),Yqe=It("p",{style:{width:"100px"}},"纹理类型：",-1),qqe=`
attribute vec2 aPosition;
attribute vec3 aColor;
attribute vec2 aUV;

varying vec3 vColor;
varying vec2 vUV;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;

void main() {

    mat3 mvp = projectionMatrix * translationMatrix;
    gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);

    vColor = aColor;
    vUV = aUV;
}
`,Zqe=`
varying vec3 vColor;
varying vec2 vUV;

uniform sampler2D uTexture;

void main() {
    gl_FragColor = texture2D(uTexture, vUV) * vec4(vColor, 1.0);
}
`,Kqe={__name:"CurveRopePixi",async setup(r){let e,i;const n=lt(null);let s=null,o=-1,a=null,l=null,c=null;const u=lt([{value:0,label:"纹理1"},{value:1,label:"纹理2"},{value:2,label:"纹理3"}]),d=lt(2),p=lt(["以t分割","以长度分割","平行曲线方式"]),m=lt("以长度分割"),g=lt(!1);tn(g,()=>{P()});const y=lt(30);tn(y,()=>{P()});const _=[([e,i]=nA(()=>vl.load("./img/rope1.png")),e=await e,i(),e),([e,i]=nA(()=>vl.load("./img/rope2.png")),e=await e,i(),e),([e,i]=nA(()=>vl.load("./img/rope3.png")),e=await e,i(),e)];function x(){return a.children.map(A=>new ai(A.x,A.y))}function O(A){_[d.value];let D=[],V=[],B=[];const L=new Kn(...A),F=L.getLUT(y.value);for(let $=0;$<F.length&&$!=F.length-1;$++){const z=F[$];L.derivative(z.t);const H=L.normal(z.t);H.x*=20,H.y*=20;const K=F[$+1];L.derivative(K.t);const J=L.normal(K.t);J.x*=20,J.y*=20;let ne=[new ai(z.x+H.x,z.y+H.y),new ai(z.x-H.x,z.y-H.y),new ai(K.x-J.x,K.y-J.y),new ai(K.x+J.x,K.y+J.y)];D.push(ne[0].x,ne[0].y),D.push(ne[1].x,ne[1].y),D.push(ne[2].x,ne[2].y),D.push(ne[0].x,ne[0].y),D.push(ne[2].x,ne[2].y),D.push(ne[3].x,ne[3].y),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),B.push(0,0),B.push(1,0),B.push(1,1),B.push(0,0),B.push(1,1),B.push(0,1)}return w(D,V,B)}function S(A){_[d.value];let D=[],V=[],B=[];const L=new Kn(...A),F=L.length(),$=y.value;let z=L.getLUT(300),H=F/$,K=0,J=0;for(let ne=1;ne<=$;ne++){let be=H*ne;for(let pe=J+1;pe<z.length;pe++){let ae=z[pe-1],ye=z[pe];const _e=ye.x-ae.x,re=ye.y-ae.y;if(K+=Math.sqrt(_e*_e+re*re),K>=be||pe==z.length-1){const se=z[J],Q=L.normal(se.t);Q.x*=20,Q.y*=20;const G=ye,ie=L.normal(G.t);ie.x*=20,ie.y*=20;let he=[new ai(se.x+Q.x,se.y+Q.y),new ai(se.x-Q.x,se.y-Q.y),new ai(G.x-ie.x,G.y-ie.y),new ai(G.x+ie.x,G.y+ie.y)];J=pe,D.push(he[0].x,he[0].y),D.push(he[1].x,he[1].y),D.push(he[2].x,he[2].y),D.push(he[0].x,he[0].y),D.push(he[2].x,he[2].y),D.push(he[3].x,he[3].y),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),B.push(0,0),B.push(1,0),B.push(1,1),B.push(0,0),B.push(1,1),B.push(0,1);break}}}return w(D,V,B)}function w(A,D,V){const L={uTexture:_[d.value]},F=new pu().addAttribute("aPosition",A,2).addAttribute("aColor",D,3).addAttribute("aUV",V,2),$=vh.from(qqe,Zqe,L);return l=new o0(F,$),l}function C(A){let D=0;for(let V=0;V<A.length;V++){const B=A[V];D+=B.length()}return D}function M(A){_[d.value];let D=[],V=[],B=[];const L=new Kn(...A),F=L.offset(20),$=L.offset(-20),z=[L,F,$],H=[L.length(),C(F),C($)],K=y.value,J=[H[0]/K,H[1]/K,H[2]/K],ne=new Map;function be(_e,re){let se=ne.get(_e);if(se||(se=_e.getLUT(),ne[_e]=se),re==0)return se[0];let Q=0;for(let G=1;G<se.length;G++){const ie=se[G].x-se[G-1].x,he=se[G].y-se[G-1].y,j=Math.sqrt(ie*ie+he*he);if(Q+=j,Q>=re||G==se.length-1)return se[G]}}function pe(_e,re){const se=z[_e],Q=se.map(j=>j.length());let G=se.length-1;for(let j=0;j<Q.length-1;j++)if(re<=Q[j]){G=j;break}else re-=Q[j];let ie=se[G];return be(ie,re)}let ae=pe(1,0),ye=pe(2,0);for(let _e=1;_e<=K;_e++){let re=_e*J[1],se=_e*J[2];const Q=ae,G=ye,ie=pe(1,re),he=pe(2,se);let j=[new ai(G.x,G.y),new ai(Q.x,Q.y),new ai(ie.x,ie.y),new ai(he.x,he.y)];ae=ie,ye=he,D.push(j[0].x,j[0].y),D.push(j[1].x,j[1].y),D.push(j[2].x,j[2].y),D.push(j[0].x,j[0].y),D.push(j[2].x,j[2].y),D.push(j[3].x,j[3].y),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),V.push(1,1,1),B.push(0,0),B.push(1,0),B.push(1,1),B.push(0,0),B.push(1,1),B.push(0,1)}return w(D,V,B)}function P(){let A=x();if(l&&(s.stage.removeChild(l),l=null),m.value=="以t分割"?l=O(A):m.value=="以长度分割"?l=S(A):m.value=="平行曲线方式"&&(l=M(A)),l&&(l.eventMode="none",s.stage.addChild(l)),c&&(s.stage.removeChild(c),c=null),c=new Ii,s.stage.addChild(c),c&&g.value){const D=new En,V=l.geometry.buffers[0].data;for(let B=0;B<V.length/12;B++){const L=B*12,F=[new ai(V[L+0],V[L+1]),new ai(V[L+2],V[L+3]),new ai(V[L+4],V[L+5]),new ai(V[L+10],V[L+11])];D.lineStyle(1,11141120),D.moveTo(F[0].x,F[0].y),D.lineTo(F[1].x,F[1].y),D.lineTo(F[2].x,F[2].y),D.lineTo(F[3].x,F[3].y),D.lineTo(F[0].x,F[0].y)}c.addChild(D)}for(let D=0;D<A.length;D++){let V=a.children[D];V.clear(),V.beginFill(44469,1),V.drawCircle(0,0,V.hitArea.radius),V.endFill(),D===o&&(V.lineStyle(3,3751494,1),V.drawCircle(0,0,V.hitArea.radius))}}function R(A){const D=A.data.global;for(let V=0;V<a.children.length;V++){const B=a.children[V];let L=B.toLocal(D);if(L.x*L.x+L.y*L.y<B.hitArea.radius*B.hitArea.radius){o=V;break}}P()}function k(A){o=-1,P()}function I(A){if(o>=0){const{x:D,y:V}=A.data.global;let B=a.toLocal({x:D,y:V});a.children[o].position.set(B.x,B.y),P()}}return tn(m,()=>{P()}),tn(d,()=>{P()}),nr(async()=>{s=new Jp({background:"#eeeeee",resizeTo:n.value}),n.value.appendChild(s.view);const A={x:s.screen.width/2,y:s.screen.height/2};s.stage.eventMode="static",s.stage.hitArea=s.screen,s.stage.on("pointerupoutside",k),s.stage.on("pointerdown",R),s.stage.on("pointerup",k),s.stage.on("pointermove",I);{a=new Ii,s.stage.addChild(a);for(let V=0;V<4;V++){let B=new En;a.addChild(B),B.hitArea=new ok(0,0,30)}let D=a.children.slice(a.children.length-4);D[0].position.set(A.x,A.y+300),D[1].position.set(A.x-300,A.y-100),D[2].position.set(A.x+300,A.y+100),D[3].position.set(A.x,A.y-300),P()}document.addEventListener("keydown",D=>{D.key>=1&&D.key<=9&&_[D.key-1]&&(d.value=D.key-1,P())})}),(A,D)=>{const V=St("Option"),B=St("Select"),L=St("ListItem"),F=St("Checkbox"),$=St("InputNumber"),z=St("List"),H=St("Col"),K=St("Row");return ci(),Es(K,null,{default:Je(()=>[ke(H,{span:4},{default:Je(()=>[ke(z,{style:{"padding-left":"20px"}},{default:Je(()=>[ke(L,null,{default:Je(()=>[jqe,ke(B,{modelValue:m.value,"onUpdate:modelValue":D[0]||(D[0]=J=>m.value=J)},{default:Je(()=>[(ci(!0),pn(Fn,null,au(p.value,J=>(ci(),Es(V,{value:J,key:J},{default:Je(()=>[On(Cd(J),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ke(L,null,{default:Je(()=>[Yqe,ke(B,{modelValue:d.value,"onUpdate:modelValue":D[1]||(D[1]=J=>d.value=J)},{default:Je(()=>[(ci(!0),pn(Fn,null,au(u.value,J=>(ci(),Es(V,{value:J.value,key:J.value},{default:Je(()=>[On(Cd(J.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),ke(L,null,{default:Je(()=>[ke(F,{modelValue:g.value,"onUpdate:modelValue":D[2]||(D[2]=J=>g.value=J)},{default:Je(()=>[On("显示网格")]),_:1},8,["modelValue"])]),_:1}),ke(L,null,{default:Je(()=>[On(" 分段数： "),ke($,{modelValue:y.value,"onUpdate:modelValue":D[3]||(D[3]=J=>y.value=J),min:1,max:100,step:10,"controls-outside":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),ke(H,{span:20},{default:Je(()=>[It("div",{ref_key:"rootRef",ref:n,style:{width:"100%",height:"98vh"}},null,512)]),_:1})]),_:1})}}},Jqe={__name:"PixiHello",setup(r){const e=br(null);var i={};async function n(){let c=new hr(i.assets.rope1);c.anchor.set(.5,.5),c.position.set(i.center.x,i.center.y),i.app.stage.addChild(c),i.rope=c}function s(){i.rope.position.set(i.mousePos.x,i.mousePos.y)}function o(c){i.mousePos=c.global,updatePlayerPos()}function a(c){i.mousePos=c.global}function l(c){i.mousePos=c.global}return nr(async()=>{i.app=new Jp({background:"#eeeeee",resizeTo:e.value}),e.value.appendChild(i.app.view),i.center={x:i.app.screen.width/2,y:i.app.screen.height/2},i.app.stage.eventMode="static",i.app.stage.hitArea=i.app.screen,i.app.stage.on("pointerdown",o),i.app.stage.on("pointermove",a),i.app.stage.on("pointerup",l),i.mousePos={x:i.center.x,y:i.center.y},vl.addBundle("assets",{rope1:"img/rope1.png"}),i.assets=await vl.loadBundle("assets"),n(),i.app.ticker.add(s)}),ta(()=>{i.app.destroy(!0,!0)}),(c,u)=>(ci(),pn("div",{ref_key:"rootRef",ref:e,style:{width:"100%",height:"98vh"}},null,512))}},md={BgLayer:0,LooseCube:1,EnermySnake:2,PlayerSnake:3},Wj={StartScreen:"start-screen",FailScreen:"fail-screen"};var gd;let ro=(gd=class{constructor(){Xi(this,"pixi",null);Xi(this,"gameContainer",null);Xi(this,"ticker",null);Xi(this,"uiContainer",null);Xi(this,"radius",300);Xi(this,"gameState",null);Xi(this,"chineseFunnyNames",["蛇皮怪","打工魂","摸鱼王","卷王者","菜鸡王","蛇神君","快乐蛇","小憨憨","蛇皮王","野区王","天命蛇","混子哥","高冷蛇","咸鱼王","天胡王","蛇界白","操作王","嘴强王","蛇皮龙","小白龙","扛把子","操作龙","浪里蛇","蛇皮侠","小霸王","一键蛇","三连王","蛇皮魂","蛇皮哥","蛇皮仔","蛇皮弟","蛇皮妹","蛇皮叔","蛇皮姐","蛇皮王","蛇皮神","蛇皮皇","蛇皮帝","蛇皮圣","蛇皮星","蛇皮尊","蛇皮宗","蛇皮宗师","蛇皮宗主","蛇皮尊者","蛇皮大帝","蛇皮天尊","蛇皮至尊","蛇皮老祖","蛇皮祖师","蛇皮宗长","蛇皮宗伯","蛇皮元老","蛇皮元帅","蛇皮元君","蛇皮元王","蛇皮元宗","蛇皮元尊","蛇皮元宗师","蛇皮元宗主","蛇皮元尊者","蛇皮元大帝","蛇皮元天尊","蛇皮元至尊","蛇皮元老祖","蛇皮元祖师","蛇皮元宗长","蛇皮元宗伯","蛇皮元元老","蛇皮元元帅","蛇皮元元君","蛇皮元元王","蛇皮元元宗","蛇皮元元尊","蛇皮元元宗师","蛇皮元元宗主","蛇皮元元尊者","蛇皮元元大帝","蛇皮元元天尊","蛇皮元元至尊","蛇皮元元老祖","蛇皮元元祖师","蛇皮元元宗长","蛇皮元元宗伯"]);Xi(this,"rankList",[]);Xi(this,"playerRank",{name:"YOU",value:0});Xi(this,"layerContainers",[null,null,null,null]);Xi(this,"_inited",!1)}randomName(){return this.chineseFunnyNames[Math.floor(Math.random()*this.chineseFunnyNames.length)]}updateRankList(e,i){const n=this.rankList.findIndex(s=>s.name===e);n!==-1?this.rankList[n].value=i:this.rankList.push({name:e,value:i}),this.rankList.sort((s,o)=>o.value-s.value),this.rankList=this.rankList.slice(0,5)}static get instance(){return gd._instance||(gd._instance=new gd),gd._instance}init(e,i={}){this._inited||(this.pixi=new Jp({width:i.width||window.innerWidth,height:i.height||window.innerHeight,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0}),e.appendChild(this.pixi.view),this.ticker=this.pixi.ticker,this.gameContainer=new Ii,this.layerContainers=[new Ii,new Ii,new Ii,new Ii],this.layerContainers.forEach(n=>this.gameContainer.addChild(n)),this.pixi.stage.addChild(this.gameContainer),this.gameContainer.position.set(this.pixi.screen.width/2,this.pixi.screen.height/2),this.radius=Math.max(this.pixi.screen.width/2,this.pixi.screen.height/2),this.uiContainer=new Ii,this.pixi.stage.addChild(this.uiContainer),this.uiContainer.position.set(this.pixi.screen.width/2,this.pixi.screen.height/2),this._inited=!0)}get bgCircle(){return this.layerContainers[md.BgLayer].children[0]}get playerSnake(){return this.layerContainers[md.PlayerSnake].children[0]}get enemySnakes(){return this.layerContainers[md.EnermySnake].children}get looseCubes(){return this.layerContainers[md.LooseCube].children}destroy(){this._inited&&(this.ticker&&this.ticker.stop(),this.pixi&&this.pixi.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this.gameContainer=null,this.layerContainers=[null,null,null,null],this.pixi=null,this.ticker=null,this._inited=!1,this._paused=!1)}resize(e,i){this.pixi&&this.pixi.renderer.resize(e,i)}getLayerContainer(e){return this.layerContainers[e]}clearAllGameObjects(){this.layerContainers.slice(1).forEach(e=>{e&&e.removeChildren()})}addGameObject(e,i){this.layerContainers[i]&&(this.layerContainers[i].addChild(e),e.onAdd&&e.onAdd())}removeGameObject(e){this.layerContainers.forEach(i=>{e.parent===i&&(i.removeChild(e),e.onDestroy&&e.onDestroy())})}setObjectLayer(e,i){this.removeGameObject(e),this.addGameObject(e,i)}showUILayer(e,i){this.getUILayer(i)||(e.name=i,this.uiContainer.addChild(e))}removeUILayer(e){this.uiContainer.removeChild(this.uiContainer.children.find(i=>i.name===e))}getUILayer(e){return this.uiContainer.children.find(i=>i.name===e)}},Xi(gd,"_instance"),gd),eZe=class extends Ii{constructor(){super(),this.graphics=new En,this.addChild(this.graphics),this.stars=[]}init(){const e=ro.instance;this.radius=e.radius,this.lineWidth=5,this.lineColor=13421772,this.graphics.clear(),this.graphics.lineStyle(this.lineWidth,this.lineColor),this.graphics.drawCircle(0,0,this.radius),this.x=0,this.y=0,this._createStars()}_createStars(){for(const o of this.stars)this.removeChild(o);this.stars=[];const e=ro.instance,i=e.pixi.screen.width,n=e.pixi.screen.height,s=80;for(let o=0;o<s;o++)this._createStar(i,n)}_createStar(e,i){const n=Math.random()*e-e/2,s=Math.random()*i-i/2,o=Math.random()*.4+.2,a=Math.random()*.25+.05,l=hr.from("shooter/star_small.png");l.x=n,l.y=s,l.anchor.set(.5),l.scale.set(o),l.alpha=a,l._baseAlpha=a,l._maxTwinkle=Math.floor(Math.random()*7)+4,l._twinkleCount=0,l._twinkleTime=Math.random()*Math.PI*2,l._twinkleSpeed=Math.random()*.001+1e-4,l._lastSin=Math.sin(l._twinkleTime),l.alpha=l._baseAlpha,this.addChildAt(l,0),this.stars.push(l)}update(e){this._updateStars(e)}_updateStars(e){const i=ro.instance,n=i.pixi.screen.width,s=i.pixi.screen.height;for(let o=this.stars.length-1;o>=0;o--){const a=this.stars[o];a._twinkleTime+=a._twinkleSpeed*e;const l=Math.sin(a._twinkleTime);if(a.alpha=a._baseAlpha*Math.abs(l),a._lastSin<0&&l>=0&&(a._twinkleCount++,a._twinkleCount>=a._maxTwinkle)){this.removeChild(a),this.stars.splice(o,1),this._createStar(n,s);continue}a._lastSin=l}}};const Gl=class Gl extends Ii{static getColorByValue(e){const i=Math.max(0,Math.min(Gl.COLOR_LIST.length-1,Math.log2(e)-1));return Gl.COLOR_LIST[i]}static getLightColorByValue(e,i=.5){const n=Gl.getColorByValue(e),s=n>>16&255,o=n>>8&255,a=n&255,l=Math.round(s+(255-s)*i),c=Math.round(o+(255-o)*i),u=Math.round(a+(255-a)*i);return l<<16|c<<8|u}constructor(e,i=0,n=0){super(),this.currentValue=e,this.speedRatio=1,this.snake=null,this.x=i,this.y=n;const s=At.from("shooter/ship_E.png");s?this.shipSprite=new hr(s):(console.error("Ship_E texture not found. Make sure it is loaded."),this.shipSprite=new En().beginFill(16711680).drawRect(-15,-15,30,30).endFill()),this.shipSprite.anchor.set(.5),this.addChild(this.shipSprite),this.valueText=new Vn(this.currentValue.toString(),{fontFamily:"Arial Black, Arial, Montserrat, Impact, sans-serif",fontSize:28,fontWeight:"bold",fill:Gl.getColorByValue(this.currentValue),align:"center",stroke:2236962,strokeThickness:6,dropShadow:!0,dropShadowColor:0,dropShadowBlur:4,dropShadowDistance:0}),this.shipSprite.tint=Gl.getLightColorByValue(this.currentValue),this.valueText.anchor.set(.5),this.valueText.y=0,this.addChild(this.valueText),this.updateScaleByValue(this.currentValue),this.rotation=0,this.setSnake(null)}setSnake(e){this.snake=e,e?(this.shipSprite.tint=Gl.getLightColorByValue(this.currentValue),this.valueText.style.fill=Gl.getColorByValue(this.currentValue)):(this.shipSprite.tint=13421772,this.valueText.style.fill=13421772)}updateScaleByValue(e){let i=1;e>=2&&(i=1+.1*(Math.log2(e)-1)),this.shipSprite.scale.set(i),this.valueText&&this.valueText.scale.set(1)}setValue(e){this.currentValue=e,this.valueText.text=e.toString();const i=Gl.getColorByValue(e);this.valueText.style.fill=i,this.valueText.style.fontWeight="bold",this.valueText.style.fontSize=32,this.valueText.style.stroke=2236962,this.valueText.style.strokeThickness=6,this.valueText.style.dropShadow=!0,this.valueText.style.dropShadowColor=0,this.valueText.style.dropShadowBlur=4,this.valueText.style.dropShadowDistance=0,this.shipSprite.tint=Gl.getLightColorByValue(e),this.updateScaleByValue(e)}get value(){return this.currentValue}getSize(){return this.shipSprite.width*this.shipSprite.scale.x}};Xi(Gl,"COLOR_LIST",[13421772,10079487,6737049,16764006,16750950,16737894,13395711,6724095,3394764,6750105,16777062,16777215]);let AM=Gl;function Gj(r,e){const i=Math.PI*2,n=(e-r)%i;return 2*n%i-n}function AT(r){return r=r%(Math.PI*2),r>Math.PI&&(r-=Math.PI*2),r<-Math.PI&&(r+=Math.PI*2),r}class Jle extends Ii{constructor(){super(),this.cubes=[],this.setBaseSpeed(3),this.speedRatio=1,this.pendingMerge=null}setBaseSpeed(e){this.baseSpeed=e,/Mobi|Android|iPhone|iPad|iPod|Mobile|Tablet/i.test(navigator.userAgent)&&(this.baseSpeed=this.baseSpeed/2)}onAdd(){ro.instance.ticker.add(this.update,this)}onDestroy(){ro.instance.ticker.remove(this.update,this)}get head(){return this.cubes[0]}setPosition(e,i){this.head.x=e,this.head.y=i}computeIdealCubePose(e,i){const n=i.getSize(),o=(e.getSize()+n)/4,a=e.x-Math.cos(e.rotation)*o,l=e.y-Math.sin(e.rotation)*o;a-e.x,l-e.y;let c=e.rotation;return{x:a,y:l,rotation:c}}setName(e){this.name=e,this.updateName()}updateName(){this.head&&(this.nameTxt||(this.nameTxt=new Vn(this.name||"",{fontFamily:"Arial Black, Arial, sans-serif",fontSize:20,fill:16777062,stroke:2236962,strokeThickness:5,align:"center"}),this.nameTxt.anchor.set(.5,1),this.head.addChild(this.nameTxt)),this.nameTxt.text=this.name||"",this.nameTxt.x=30,this.nameTxt.y=0,this.nameTxt.rotation=Math.PI/2,this.nameTxt.visible=!!this.name)}addCubes(e){e.forEach(i=>{this.addCube(i)})}addCube(e){let i=0,n=0,s=0,o=this.cubes.length;for(;o>0&&this.cubes[o-1].currentValue<e;)o--;const a=new AM(e,0,0);if(this.cubes.length>0){let l=o>0?this.cubes[o-1]:null,c=this.cubes[o]||null;if(l){const u=this.computeIdealCubePose(l,a);i=u.x,n=u.y,s=u.rotation}else c&&(i=c.x+Math.cos(c.rotation)*((c.getSize()+a.getSize())/4),n=c.y+Math.sin(c.rotation)*((c.getSize()+a.getSize())/4),s=c.rotation+Math.PI)}return a.x=i,a.y=n,a.rotation=s,a.setSnake(this),this.cubes.splice(o,0,a),this.addChild(a),this.updateCubeZOrder(),this.onHeadValueChanged(),this.updateName(),a}onHeadValueChanged(){}update(e){if(this.updateNormalMovement(e),this.pendingMerge)this.updateMergeAnimation(e);else if(this.mergeCooldown&&this.mergeCooldown>0){const i=e&&e.deltaMS?e.deltaMS:16;this.mergeCooldown-=i,this.mergeCooldown<0&&(this.mergeCooldown=0)}else this.mergeCubesIfPossible()}moveAndRotate(e,i,n,s,o,a=1){const l=i-e.x,c=n-e.y,u=Math.sqrt(l*l+c*c);if(u>.01){const d=Math.atan2(c,l),p=Gj(AT(e.rotation),d);e.rotation=AT(e.rotation+p*a)}if(u>.01){const d=Math.min(s*o,u);e.x+=l/u*d,e.y+=c/u*d}}updateHeadDirectionStrategy(e){}get finalSpeed(){return this.baseSpeed*this.speedRatio}setHeadDirection(e,i){const n=Math.sqrt(e*e+i*i);n>1e-5?(this.targetDirectionX=e/n,this.targetDirectionY=i/n):(this.targetDirectionX=1,this.targetDirectionY=0)}updateHeadMovement(e){const i=this.head,n=Math.atan2(this.targetDirectionY,this.targetDirectionX),s=AT(i.rotation),o=Gj(s,n),a=.15;if(i.rotation+=o*a,i.rotation=AT(i.rotation),i.x+=this.targetDirectionX*this.finalSpeed*e,i.y+=this.targetDirectionY*this.finalSpeed*e,this.gameApp&&typeof this.gameApp.radius=="number"){const l=this.gameApp.radius;if(Math.sqrt(i.x*i.x+i.y*i.y)>l){const u=Math.atan2(i.y,i.x);i.x=Math.cos(u)*l,i.y=Math.sin(u)*l}}}updateNormalMovement(e){const i=e&&e.deltaTime?e.deltaTime:1;this.updateHeadDirectionStrategy(e),this.updateHeadMovement(i);let n=-1;this.pendingMerge&&this.pendingMerge.cubeB&&(n=this.cubes.indexOf(this.pendingMerge.cubeB)),this.updateSnakeLogic(i,n)}mergeCubesIfPossible(){if(!this.pendingMerge&&!(this.cubes.length<2))for(let e=0;e<this.cubes.length-1;e++){const i=this.cubes[e],n=this.cubes[e+1];if(i.currentValue===n.currentValue){this.pendingMerge={i:e,cubeA:i,cubeB:n,animTime:0,phase:1,hasMerged:!1};break}}}triggerMergeAnimation(e,i){i.speedRatio=2}updateMergeAnimation(e){const i=this.pendingMerge;if(!i||!i.cubeA||!i.cubeB){this.pendingMerge=null;return}const n=200,s=e&&e.deltaMS?e.deltaMS:16;i.animTime+=s,i._startX===void 0&&(i._startX=i.cubeB.x,i._startY=i.cubeB.y);const o=Math.min(i.animTime/n,1);if(i.cubeB.x=i._startX+(i.cubeA.x-i._startX)*o,i.cubeB.y=i._startY+(i.cubeA.y-i._startY)*o,i.cubeB.alpha=1-o,o>=1){i.cubeB&&i.cubeB.parent&&this.removeChild(i.cubeB);const a=this.cubes.indexOf(i.cubeB);a!==-1&&this.cubes.splice(a,1),i.cubeA.setValue(i.cubeA.currentValue*2),this.cubes.indexOf(i.cubeA)===0&&this.onHeadValueChanged(),this.pendingMerge=null,this.mergeCooldown=200}}updateSnakeLogic(e,i=-1){if(!(this.cubes.length<2))for(let n=1;n<this.cubes.length;n++){if(n===i)continue;const s=this.cubes[n-1],o=this.cubes[n],a=s.x-o.x,l=s.y-o.y,c=Math.sqrt(a*a+l*l),u=(s.getSize()+o.getSize())/4;if(c>u){const d=s.x-a/c*u,p=s.y-l/c*u,m=this.finalSpeed*o.speedRatio;this.moveAndRotate(o,d,p,m,e,1.5)}else if(c>.01){const d=s.x-a/c*u,p=s.y-l/c*u;o.x=d,o.y=p,o.rotation=s.rotation}else{const d=s.x-Math.cos(s.rotation)*u,p=s.y-Math.sin(s.rotation)*u;o.x=d,o.y=p,o.rotation=s.rotation}}}updateCubeZOrder(){for(let e=0;e<this.cubes.length;e++)this.setChildIndex(this.cubes[e],this.cubes.length-1-e)}splitAt(e){const i=ro.instance,n=this.cubes.splice(e);for(const s of n)s.setSnake(null),i.addGameObject(s,md.LooseCube);e===0&&i.removeGameObject(this)}}class tZe extends Jle{constructor(){super(),this.gameApp=ro.instance,this.speedRatio=1,this.targetDirectionX=0,this.targetDirectionY=0,this.lastMouseX=-1,this.lastMouseY=-1,this.setBaseSpeed(3.5),this.setName("YOU")}updateHeadDirectionStrategy(){const e=this.head,i=this.gameApp.pixi.renderer.events.pointer.global,n=this.gameApp.gameContainer.toLocal(i),s=this.gameApp.gameContainer.toLocal(e.getGlobalPosition(new ai,!1)),o=1;if(Math.abs(n.x-this.lastMouseX)>o||Math.abs(n.y-this.lastMouseY)>o||this.lastMouseX===-1){const a=n.x-s.x,l=n.y-s.y,c=Math.sqrt(a*a+l*l);c>.01&&this.setHeadDirection(a/c,l/c),this.lastMouseX=n.x,this.lastMouseY=n.y}}onHeadValueChanged(){ro.instance.playerRank.value=this.head.value}}class iZe extends Jle{constructor(){super(),this.state="wander",this.stateTimer=0,this.stateInterval=1e4,this.wanderTarget={x:0,y:0},this.setRandomWanderTarget(),this.setName(ro.instance.randomName())}get playerSnakeInstance(){return ro.instance.playerSnake}setRandomWanderTarget(){const n=ro.instance.radius-30,s=Math.random()*Math.PI*2,o=Math.random()*n;this.wanderTarget.x=Math.cos(s)*o,this.wanderTarget.y=Math.sin(s)*o}onHeadValueChanged(){ro.instance.updateRankList(this.name,this.head.value)}updateHeadDirectionStrategy(e){var n,s;if(this.stateTimer+=(e==null?void 0:e.deltaMS)||16,this.stateTimer>=this.stateInterval){this.stateTimer=0;const o=(n=this.playerSnakeInstance)==null?void 0:n.head;this.state==="wander"?o&&this.head.value>o.value?this.state="chase":(this.state="wander",this.setRandomWanderTarget()):(this.state="wander",this.setRandomWanderTarget())}const i=(s=this.playerSnakeInstance)==null?void 0:s.head;if(this.state==="chase"&&i&&this.head.value>i.value)this.setHeadDirection(i.x-this.head.x,i.y-this.head.y);else{this.setHeadDirection(this.wanderTarget.x-this.head.x,this.wanderTarget.y-this.head.y);const o=this.wanderTarget.x-this.head.x,a=this.wanderTarget.y-this.head.y;Math.sqrt(o*o+a*a)<30&&this.setRandomWanderTarget()}}}function Hj(){const r=ro.instance,e=[r.playerSnake,...r.enemySnakes];for(const i of e){if(!i||!i.head)continue;const n=i.head,s=nZe(i);for(const o of s){const a=n.x-o.x,l=n.y-o.y,c=Math.sqrt(a*a+l*l),u=o.getSize()/2;if(c<u){if(o.snake){const d=o.snake,p=d?d.cubes.indexOf(o):-1;d&&p!==-1&&(n.currentValue>o.currentValue?d.splitAt(p):n.currentValue<o.currentValue?i.splitAt(0):i===r.playerSnake?d.splitAt(p):i.splitAt(0))}else if(n.currentValue>=o.currentValue){i.addCube(o.currentValue),r.removeGameObject(o);break}break}}}}function nZe(r){const e=ro.instance,i=[];for(const n of e.looseCubes)i.push(n);for(const n of e.enemySnakes)if(n!==r)for(let s=0;s<n.cubes.length;s++)i.push(n.cubes[s]);return i}class rZe extends Ii{constructor({width:e=800,height:i=600,onRestart:n=null}={}){super(),this.eventMode="static",this.width=e,this.height=i,this.onRestart=n;const s=ro.instance.rankList,o=new En;o.beginFill(0,.6),o.drawRect(-e/2,-i/2,e,i),o.endFill(),this.addChild(o);const a=s.length,l=260,c=60,u=32,d=32,p=54,m=28,g=a>0?a*u:u,y=32,_=d+p+16+m+16+g+y+c+d,x=Math.max(l,_),O=420,S=new En;S.beginFill(16777215,.98),S.drawRoundedRect(-O/2,-x/2,O,x,32),S.endFill(),S.x=0,S.y=0,this.addChild(S);const w=new Ii;w.x=0,w.y=-x/2,this.addChild(w);const C=new Vn("GAME OVER",{fontFamily:"Arial Black, Arial, sans-serif",fontSize:48,fill:2236962,align:"center"});C.anchor.set(.5,0),C.x=0,C.y=d,w.addChild(C);const M=new Vn("排行榜",{fontFamily:"Arial Black, Arial, sans-serif",fontSize:24,fill:6710886,align:"center"});M.anchor.set(.5,0),M.x=0,M.y=C.y+p+16,w.addChild(M);let P=s.slice();const R=ro.instance.playerRank;!P.some(pe=>pe.name===R.name)&&R.value>0&&P.push({name:R.name,value:R.value}),P.sort((pe,ae)=>ae.value-pe.value);const I=-90,A=0,D=90;P.forEach((pe,ae)=>{const ye=pe.name===R.name,_e=new Vn(`${ae+1}`,{fontFamily:"Arial Black, Arial, sans-serif",fontSize:22,fill:ye?16737792:3355443,align:"center"});_e.anchor.set(.5,0),_e.x=I,_e.y=M.y+m+16+ae*u,w.addChild(_e);const re=new Vn(pe.name,{fontFamily:"Arial Black, Arial, sans-serif",fontSize:22,fill:ye?16737792:3355443,align:"center"});re.anchor.set(.5,0),re.x=A,re.y=M.y+m+16+ae*u,w.addChild(re);const se=new Vn(`${pe.value}`,{fontFamily:"Arial Black, Arial, sans-serif",fontSize:22,fill:ye?16737792:3355443,align:"center"});se.anchor.set(.5,0),se.x=D,se.y=M.y+m+16+ae*u,w.addChild(se)});const V=180,B=M.y+m+16+g+y,L=new En;L.beginFill(2985200,1),L.drawRoundedRect(-V/2,-c/2,V,c,18),L.endFill(),L.x=0,L.y=B+c/2,L.eventMode="static",L.cursor="pointer",w.addChild(L);const F=new Vn("重新开始",{fontFamily:"Arial Black, Arial, sans-serif",fontSize:28,fill:16777215,align:"center"});F.anchor.set(.5),F.x=0,F.y=L.y,F.eventMode="static",F.cursor="pointer",w.addChild(F);function $(pe){return 1+2.70158*Math.pow(pe-1,3)+1.70158*Math.pow(pe-1,2)}function z(pe){return 2.70158*pe*pe*pe-1.70158*pe*pe}this.scale.set(0);let H=Rr.shared,K=0;const J=.28,ne=pe=>{K+=H.deltaMS/1e3;let ae=Math.min(K/J,1),ye=$(ae);this.scale.set(ye),ae>=1&&(H.remove(ne),this.scale.set(1))};H.add(ne);const be=()=>{let pe=Rr.shared,ae=0;const ye=.18,_e=re=>{ae+=pe.deltaMS/1e3;let se=Math.min(ae/ye,1),Q=1-z(se);this.scale.set(Math.max(Q,0)),se>=1&&(pe.remove(_e),this.scale.set(0),typeof this.onRestart=="function"&&this.onRestart(),this.visible=!1,this.destroy({children:!0}))};pe.add(_e)};L.on("pointertap",be),F.on("pointertap",be)}}class sZe extends Ii{constructor({centerX:e=0,centerY:i=-10,radius:n=48,duration:s=6.4,texture:o=At.from("shooter/ship_E.png")}={}){super(),this.centerX=e,this.centerY=i,this.radius=n,this.duration=s,this.elapsed=0,this.plane=new hr(o),this.plane.anchor.set(.5),this.plane.width=32,this.plane.height=32,this.addChild(this.plane),this._updatePosition(0),this.ticker=Rr.shared,this.animStep=this._onTick.bind(this),this.ticker.add(this.animStep)}_onTick(e){this.elapsed+=this.ticker.deltaMS/1e3;const i=this.elapsed%this.duration/this.duration;this._updatePosition(i)}_updatePosition(e){const i=2*Math.PI*e,n=this.centerX+this.radius*Math.sin(i),s=this.centerY+this.radius*Math.sin(i)*Math.cos(i);this.plane.x=n,this.plane.y=s;const o=this.radius*2*Math.PI*Math.cos(i),a=this.radius*2*Math.PI*(Math.cos(2*i)-Math.sin(2*i))/2;this.plane.rotation=Math.atan2(a,o)}destroy(e){this.ticker&&this.animStep&&this.ticker.remove(this.animStep),super.destroy(e)}}class oZe extends Ii{constructor({width:e=800,height:i=600,onStart:n=null}={}){super(),this.eventMode="static",this.width=e,this.height=i,this.onStart=n;const s=420,o=340,a=new En;a.beginFill(16185078,.98),a.drawRoundedRect(-s/2,-o/2,s,o,32),a.endFill(),a.x=0,a.y=0,this.addChild(a);const l=new Vn("2048 蛇蛇大作战",{fontFamily:"Arial Black, Arial, sans-serif",fontSize:44,fill:2236962,fontWeight:"bold",align:"center",dropShadow:!0,dropShadowColor:16777215,dropShadowBlur:8});l.anchor.set(.5),l.x=0,l.y=-110,this.addChild(l);const c=new sZe({centerX:0,centerY:-10,radius:48});this.addChild(c);const u=180,d=48,p=90,m=new En;m.beginFill(2236962,1),m.drawRoundedRect(-u/2,-d/2,u,d,8),m.endFill(),m.x=0,m.y=p,m.eventMode="static",m.cursor="pointer",this.addChild(m);const g=new Vn("开始游戏",{fontFamily:"Arial Black, Arial, sans-serif",fontSize:22,fill:16185078,align:"center"});g.anchor.set(.5),g.x=0,g.y=p,g.eventMode="static",g.cursor="pointer",this.addChild(g);function y(M){return 1+2.70158*Math.pow(M-1,3)+1.70158*Math.pow(M-1,2)}function _(M){return 2.70158*M*M*M-1.70158*M*M}this.scale.set(0);let x=Rr.shared,O=0;const S=.28,w=M=>{O+=x.deltaMS/1e3;let P=Math.min(O/S,1),R=y(P);this.scale.set(R),P>=1&&(x.remove(w),this.scale.set(1))};x.add(w);const C=()=>{let M=Rr.shared,P=0;const R=.18,k=I=>{P+=M.deltaMS/1e3;let A=Math.min(P/R,1),D=1-_(A);this.scale.set(Math.max(D,0)),A>=1&&(M.remove(k),this.scale.set(0),typeof this.onStart=="function"&&this.onStart(),this.visible=!1,this.destroy({children:!0}))};M.add(k)};m.on("pointertap",C),g.on("pointertap",C)}}const aZe={__name:"Game2048",setup(r){const e=lt(null),i=ro.instance;let n=[];nr(()=>{i.init(e.value,{width:window.innerWidth,height:window.innerHeight}),m(),s("init")}),ta(()=>{c(),i.destroy()});function s(S){i.gameState!==S&&(i.gameState=S,S==="init"?o():S==="playing"?l():S==="fail"&&setTimeout(d,500))}function o(){i.showUILayer(new oZe({width:i.pixi.screen.width,height:i.pixi.screen.height,onStart:a}),Wj.StartScreen)}function a(){s("playing")}function l(){c(),g(),_(),n.push(setInterval(_,5e3)),y(),n.push(setInterval(y,5e3)),i.pixi.ticker.add(Hj),i.pixi.ticker.add(u),window.addEventListener("resize",x),window.addEventListener("keydown",O),x(),p()}function c(){window.removeEventListener("resize",x),window.removeEventListener("keydown",O);for(const S of n)clearInterval(S);n=[],i.pixi.ticker.remove(Hj),i.clearAllGameObjects()}function u(){(!i.playerSnake||!i.playerSnake.cubes||i.playerSnake.cubes.length===0)&&s("fail")}function d(){i.showUILayer(new rZe({width:i.pixi.screen.width,height:i.pixi.screen.height,onRestart:a}),Wj.FailScreen)}function p(){i.pixi.ticker.add(()=>{if(i.playerSnake&&i.playerSnake.head){const S=i.playerSnake.head,w=i.gameContainer,C=i.pixi.screen.width/2,M=i.pixi.screen.height/2,P=S.x,R=S.y;w.position.set(C-P,M-R)}})}function m(){const S=new eZe;S.init(),i.addGameObject(S,md.BgLayer)}function g(){i.playerSnake&&(i.gameContainer.removeChild(i.playerSnake),typeof i.playerSnake.destroy=="function"&&i.playerSnake.destroy());const S=new tZe;for(let w=3;w>0;w--)S.addCube(2**w);i.addGameObject(S,md.PlayerSnake)}function y(){var w,C,M,P,R,k;if(i.enemySnakes.length<5){const A=(((C=(w=i.playerSnake)==null?void 0:w.head)==null?void 0:C.value)||2)*2,D=new iZe;D.addCubes([A]);let V=((P=(M=i.playerSnake)==null?void 0:M.head)==null?void 0:P.x)||0,B=((k=(R=i.playerSnake)==null?void 0:R.head)==null?void 0:k.y)||0,L=0,F=0;const $=i.radius*.6;for(let z=0;z<10;z++){L=Math.random()*(i.radius*2)-i.radius,F=Math.random()*(i.radius*2)-i.radius;const H=L-V,K=F-B;if(Math.sqrt(H*H+K*K)>=$)break}D.setPosition(L,F),i.addGameObject(D,md.EnermySnake)}}function _(){for(;i.looseCubes.length<10;){const w=Math.random()<.8?2:4,C=new AM(w),M=i.radius*.5,P=Math.sqrt(Math.random()*(i.radius*i.radius-M*M)+M*M),R=Math.random()*Math.PI*2;C.x=Math.cos(R)*P,C.y=Math.sin(R)*P,C.rotation=Math.random()*Math.PI*2,i.addGameObject(C,md.LooseCube)}}function x(){i.resize&&i.resize(window.innerWidth,window.innerHeight)}function O(S){if(S.key==="k"){l();return}i.handleKeyDown&&i.handleKeyDown(S)}return(S,w)=>(ci(),pn("div",{ref_key:"pixiContainer",ref:e,class:"pixi-container"},null,512))}};var ML={exports:{}};(function(r,e){(function(i,n){n(e,iie)})(ph,function(i,n){const s=typeof window<"u",o=function(){return s&&document.addEventListener?function(h,f,v,E=!1){h&&f&&v&&h.addEventListener(f,v,E)}:function(h,f,v){h&&f&&v&&h.attachEvent("on"+f,v)}}(),a=function(){return s&&document.removeEventListener?function(h,f,v,E=!1){h&&f&&h.removeEventListener(f,v,E)}:function(h,f,v){h&&f&&h.detachEvent("on"+f,v)}}();var l=(h,f)=>{const v=h.__vccOpts||h;for(const[E,T]of f)v[E]=T;return v};const c="ivu-affix";function u(h,f){const v=f?"pageYOffset":"pageXOffset",E=f?"scrollTop":"scrollLeft";let T=h[v];return s&&typeof T!="number"&&(T=window.document.documentElement[E]),T}function d(h){if(!s)return;const f=h.getBoundingClientRect(),v=u(window,!0),E=u(window),T=window.document.body,b=T.clientTop||0,N=T.clientLeft||0;return{top:f.top+v-b,left:f.left+E-N}}const p={name:"Affix",emits:["on-change"],props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},useCapture:{type:Boolean,default:!1}},data(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType(){let h="top";return this.offsetBottom>=0&&(h="bottom"),h},classes(){return[{[`${c}`]:this.affix}]}},mounted(){o(window,"scroll",this.handleScroll,this.useCapture),o(window,"resize",this.handleScroll,this.useCapture),n.nextTick(()=>{this.handleScroll()})},beforeUnmount(){a(window,"scroll",this.handleScroll,this.useCapture),a(window,"resize",this.handleScroll,this.useCapture)},methods:{handleScroll(){if(!s)return;const h=this.affix,f=u(window,!0),v=d(this.$el),E=window.innerHeight,T=this.$el.getElementsByTagName("div")[0].offsetHeight;v.top-this.offsetTop<f&&this.offsetType=="top"&&!h?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${v.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):v.top-this.offsetTop>f&&this.offsetType=="top"&&h&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),v.top+this.offsetBottom+T>f+E&&this.offsetType=="bottom"&&!h?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${v.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):v.top+this.offsetBottom+T<f+E&&this.offsetType=="bottom"&&h&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};function m(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",null,[n.createElementVNode("div",{ref:"point",class:n.normalizeClass(b.classes),style:n.normalizeStyle(T.styles)},[n.renderSlot(h.$slots,"default")],6),n.withDirectives(n.createElementVNode("div",{style:n.normalizeStyle(T.slotStyle)},null,4),[[n.vShow,T.slot]])])}var g=l(p,[["render",m]]);const y="ivu-icon",_={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return[`${y}`,{[`${y}-${this.type}`]:this.type!=="",[`${this.custom}`]:this.custom!==""}]},styles(){let h={};return this.size&&(h["font-size"]=`${this.size}px`),this.color&&(h.color=this.color),h}}};function x(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("i",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.styles)},null,6)}var O=l(_,[["render",x]]);function S(h,f){for(let v=0;v<f.length;v++)if(h===f[v])return!0;return!1}let w;function C(h){if(s&&w===void 0){const f=document.createElement("div");f.style.width="100%",f.style.height="200px";const v=document.createElement("div"),E=v.style;E.position="absolute",E.top=0,E.left=0,E.pointerEvents="none",E.visibility="hidden",E.width="200px",E.height="150px",E.overflow="hidden",v.appendChild(f),document.body.appendChild(v);const T=f.offsetWidth;v.style.overflow="scroll";let b=f.offsetWidth;T===b&&(b=v.clientWidth),document.body.removeChild(v),w=T-b}return w}const M=s&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||!1,P=/([\:\-\_]+(.))/g,R=/^moz([A-Z])/;function k(h){return h.replace(P,function(f,v,E,T){return T?E.toUpperCase():E}).replace(R,"Moz$1")}function I(h,f){if(s){if(!h||!f)return null;f=k(f),f==="float"&&(f="cssFloat");try{const v=document.defaultView.getComputedStyle(h,"");return h.style[f]||v?v[f]:null}catch{return h.style[f]}}}function A(h){return h.toString()[0].toUpperCase()+h.toString().slice(1)}function D(h){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(h)]}function V(h){const f=D(h);let v;if(f==="array")v=[];else if(f==="object")v={};else return h;if(f==="array")for(let E=0;E<h.length;E++)v.push(V(h[E]));else if(f==="object")for(let E in h)v[E]=V(h[E]);return v}function B(h,f=0,v,E=500,T){if(!s)return;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Y){return window.setTimeout(Y,1e3/60)});const b=Math.abs(f-v),N=Math.ceil(b/E*50);function U(Y,W,Z){if(Y===W){T&&T();return}let fe=Y+Z>W?W:Y+Z;Y>W&&(fe=Y-Z<W?W:Y-Z),h===window?window.scrollTo(fe,fe):h.scrollTop=fe,window.requestAnimationFrame(()=>U(fe,W,Z))}U(f,v,N)}function L(h,f,v){typeof f=="string"?v=[f]:v=f;let E=h.$parent,T=E.$options.name;for(;E&&(!T||v.indexOf(T)<0);)E=E.$parent,E&&(T=E.$options.name);return E}function F(h,f){let v=[];const E=h.$parent;return E?(E.$options.name===f&&v.push(E),v.concat(F(E,f))):[]}const $=function(h){return(h||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function z(h,f){if(!h||!f)return!1;if(f.indexOf(" ")!==-1)throw new Error("className should not contain space.");return h.classList?h.classList.contains(f):(" "+h.className+" ").indexOf(" "+f+" ")>-1}function H(h,f){if(!h)return;let v=h.className;const E=(f||"").split(" ");for(let T=0,b=E.length;T<b;T++){const N=E[T];!N||(h.classList?h.classList.add(N):z(h,N)||(v+=" "+N))}h.classList||(h.className=v)}function K(h,f){if(!h||!f)return;const v=f.split(" ");let E=" "+h.className+" ";for(let T=0,b=v.length;T<b;T++){const N=v[T];!N||(h.classList?h.classList.remove(N):z(h,N)&&(E=E.replace(" "+N+" "," ")))}h.classList||(h.className=$(E))}const J={xs:"480px",sm:"576px",md:"768px",lg:"992px",xl:"1200px",xxl:"1600px"};function ne(){if(!s)return;const h=f=>({media:f,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||h}const be=/#([^#]+)$/;async function pe(h,f="unnamed"){if(!s)return Promise.reject();try{const v=await(await fetch(h)).blob();if(!v)return Promise.reject();const E=URL.createObjectURL(v),T=document.createElement("a");return T.setAttribute("href",E),T.setAttribute("download",f),T.click(),URL.revokeObjectURL(E),Promise.resolve()}catch(v){return Promise.reject(v)}}const ae="ivu-alert",ye={name:"Alert",components:{Icon:O},props:{type:{validator(h){return S(h,["success","info","warning","error"])},default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},banner:{type:Boolean,default:!1},fade:{type:Boolean,default:!0}},data(){return{closed:!1,desc:!1}},computed:{wrapClasses(){return[`${ae}`,`${ae}-${this.type}`,{[`${ae}-with-icon`]:this.showIcon,[`${ae}-with-desc`]:this.desc,[`${ae}-with-banner`]:this.banner}]},messageClasses(){return`${ae}-message`},descClasses(){return`${ae}-desc`},closeClasses(){return`${ae}-close`},iconClasses(){return`${ae}-icon`},iconType(){let h="";switch(this.type){case"success":h="ios-checkmark-circle";break;case"info":h="ios-information-circle";break;case"warning":h="ios-alert";break;case"error":h="ios-close-circle";break}return this.desc&&(h+="-outline"),h}},methods:{close(h){this.closed=!0,this.$emit("on-close",h)}},mounted(){this.desc=this.$slots.desc!==void 0}};function _e(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createBlock(n.Transition,{name:v.fade?"fade":""},{default:n.withCtx(()=>[T.closed?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.wrapClasses)},[v.showIcon?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(b.iconClasses)},[n.renderSlot(h.$slots,"icon",{},()=>[n.createVNode(N,{type:b.iconType},null,8,["type"])])],2)):n.createCommentVNode("",!0),n.createElementVNode("span",{class:n.normalizeClass(b.messageClasses)},[n.renderSlot(h.$slots,"default")],2),n.createElementVNode("span",{class:n.normalizeClass(b.descClasses)},[n.renderSlot(h.$slots,"desc")],2),v.closable?(n.openBlock(),n.createElementBlock("a",{key:1,class:n.normalizeClass(b.closeClasses),onClick:f[0]||(f[0]=(...U)=>b.close&&b.close(...U))},[n.renderSlot(h.$slots,"close",{},()=>[n.createVNode(N,{type:"ios-close"})])],2)):n.createCommentVNode("",!0)],2))]),_:3},8,["name"])}var re=l(ye,[["render",_e]]);const se={name:"Anchor",provide(){return{AnchorInstance:this}},emits:["on-change","on-select"],props:{affix:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},offsetBottom:Number,bounds:{type:Number,default:5},container:null,showInk:{type:Boolean,default:!1},scrollOffset:{type:Number,default:0}},data(){return{prefix:"ivu-anchor",isAffixed:!1,inkTop:0,animating:!1,currentLink:"",currentId:"",scrollContainer:null,scrollElement:null,wrapperTop:0,upperFirstTitle:!0,links:[]}},computed:{wrapperComponent(){return this.affix?"Affix":"div"},wrapperStyle(){return{maxHeight:this.offsetTop?`calc(100vh - ${this.offsetTop}px)`:"100vh"}},containerIsWindow(){return this.scrollContainer===window},titlesOffsetArr(){const h=this.links.map(v=>v.link.href).map(v=>v.split("#")[1]);let f=[];return s&&h.forEach(v=>{const E=document.getElementById(v);E&&f.push({link:`#${v}`,offset:E.offsetTop-this.scrollElement.offsetTop})}),f}},methods:{handleAffixStateChange(h){this.isAffixed=this.affix&&h},handleScroll(h){if(this.upperFirstTitle=!!this.titlesOffsetArr[0]&&h.target.scrollTop<this.titlesOffsetArr[0].offset,this.animating)return;const f=s?document.documentElement.scrollTop||document.body.scrollTop||h.target.scrollTop:0;this.getCurrentScrollAtTitleId(f)},handleHashChange(){if(!s)return;const h=window.location.href,f=be.exec(h);!f||(this.currentLink=f[0],this.currentId=f[1])},handleScrollTo(){if(!s)return;const h=document.getElementById(this.currentId),f=document.querySelector(`a[data-href="${this.currentLink}"]`);let v=this.scrollOffset;if(f&&(v=parseFloat(f.getAttribute("data-scroll-offset"))),!h)return;const E=h.offsetTop-this.wrapperTop-v;this.animating=!0,B(this.scrollContainer,this.scrollElement.scrollTop,E,600,()=>{this.animating=!1}),this.handleSetInkTop()},handleSetInkTop(){if(!s)return;const h=document.querySelector(`a[data-href="${this.currentLink}"]`);if(!h)return;const f=h.offsetTop,v=f<0?this.offsetTop:f;this.inkTop=v},getCurrentScrollAtTitleId(h){let f=-1,v=this.titlesOffsetArr.length,E={link:"#",offset:0};for(h+=this.bounds;++f<v;){let T=this.titlesOffsetArr[f],b=this.titlesOffsetArr[f+1];if(h>=T.offset&&h<(b&&b.offset||1/0)){E=this.titlesOffsetArr[f];break}}this.currentLink=E.link,this.handleSetInkTop()},getContainer(){!s||(this.scrollContainer=this.container?typeof this.container=="string"?document.querySelector(this.container):this.container:window,this.scrollElement=this.container?this.scrollContainer:document.documentElement||document.body)},removeListener(){a(this.scrollContainer,"scroll",this.handleScroll),a(window,"hashchange",this.handleHashChange)},init(){this.handleHashChange(),n.nextTick(()=>{this.removeListener(),this.getContainer(),this.wrapperTop=this.containerIsWindow?0:this.scrollElement.offsetTop,this.handleScrollTo(),this.handleSetInkTop(),this.titlesOffsetArr[0]&&(this.upperFirstTitle=this.scrollElement.scrollTop<this.titlesOffsetArr[0].offset),o(this.scrollContainer,"scroll",this.handleScroll),o(window,"hashchange",this.handleHashChange)})},addLink(h,f){this.links.push({id:h,link:f})},removeLink(h){const f=this.links.findIndex(v=>v.id===h);this.links.splice(f,1)}},watch:{$route(){this.currentLink="",this.currentId="",this.handleHashChange(),n.nextTick(()=>{this.handleScrollTo()})},container(){this.init()},currentLink(h,f){this.$emit("on-change",h,f)}},mounted(){this.init()},beforeUnmount(){this.removeListener()}};function Q(h,f,v,E,T,b){return n.openBlock(),n.createBlock(n.resolveDynamicComponent(b.wrapperComponent),{"offset-top":v.offsetTop,"offset-bottom":v.offsetBottom,onOnChange:b.handleAffixStateChange},{default:n.withCtx(()=>[n.createElementVNode("div",{class:n.normalizeClass(`${T.prefix}-wrapper`),style:n.normalizeStyle(b.wrapperStyle)},[n.createElementVNode("div",{class:n.normalizeClass(`${T.prefix}`)},[n.createElementVNode("div",{class:n.normalizeClass(`${T.prefix}-ink`)},[n.withDirectives(n.createElementVNode("span",{class:n.normalizeClass(`${T.prefix}-ink-ball`),style:n.normalizeStyle({top:`${T.inkTop}px`})},null,6),[[n.vShow,v.showInk]])],2),n.renderSlot(h.$slots,"default")],2)],6)]),_:3},40,["offset-top","offset-bottom","onOnChange"])}var G=l(se,[["render",Q]]);function ie(h=32){const f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",v=f.length;let E="";for(let T=0;T<h;T++)E+=f.charAt(Math.floor(Math.random()*v));return E}const he={name:"AnchorLink",inject:["AnchorInstance"],props:{href:String,title:String,scrollOffset:{type:Number,default(){return n.inject("AnchorInstance").scrollOffset}}},data(){return{prefix:"ivu-anchor-link",id:ie(6)}},computed:{anchorLinkClasses(){return[this.prefix,this.AnchorInstance.currentLink===this.href?`${this.prefix}-active`:""]},linkTitleClasses(){return[`${this.prefix}-title`]}},methods:{goAnchor(){this.currentLink=this.href,this.AnchorInstance.handleHashChange(),this.AnchorInstance.handleScrollTo(),this.AnchorInstance.$emit("on-select",this.href),this.$router?this.$router.push(this.href,()=>{}):s&&(window.location.href=this.href)}},mounted(){this.AnchorInstance.addLink(this.id,this),n.nextTick(()=>{this.AnchorInstance.init()})},beforeUnmount(){this.AnchorInstance.removeLink(this.id)}},j=["href","data-scroll-offset","data-href","title"];function ee(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.anchorLinkClasses)},[n.createElementVNode("a",{class:n.normalizeClass(b.linkTitleClasses),href:v.href,"data-scroll-offset":v.scrollOffset,"data-href":v.href,onClick:f[0]||(f[0]=n.withModifiers((...N)=>b.goAnchor&&b.goAnchor(...N),["prevent"])),title:v.title},n.toDisplayString(v.title),11,j),n.renderSlot(h.$slots,"default")],2)}var de=l(he,[["render",ee]]),ve={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(h){return S(h,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){if(typeof this.to!="string")return null;if(this.to.includes("//"))return this.to;const h=this.$router;if(h){const f=this.$route,v=h.resolve(this.to,f,this.append);return v?v.href:this.to}return this.to}},methods:{handleOpenTo(){if(!s)return;const h=this.$router;let f=this.to;if(h){const v=this.$route,E=h.resolve(this.to,v,this.append);f=E?E.href:this.to}typeof this.to!="string"&&window.open(f)},handleClick(h=!1){const f=this.$router;!s||(h?this.handleOpenTo():f?typeof this.to=="string"&&this.to.includes("//")?window.location.href=this.to:this.replace?this.$router.replace(this.to,()=>{}):this.$router.push(this.to,()=>{}):window.location.href=this.to)},handleCheckClick(h,f=!1){if(this.to){if(this.target==="_blank")return this.handleOpenTo(),!1;h.preventDefault(),this.handleClick(f)}}}};function Ce(h,f){let v=!1;return f.forEach(E=>{h.includes(E)&&(v=!0)}),v}const Ie={name:"Auth",mixins:[ve],emits:["click"],props:{authority:{type:[String,Array,Function,Boolean],default:!0},access:{type:[String,Array]},prevent:{type:Boolean,default:!1},message:{type:String,default:"您没有权限进行此操作"},customTip:{type:Boolean,default:!1},display:{type:String}},computed:{isPermission(){let h;if(typeof this.authority=="boolean")h=this.authority;else if(this.authority instanceof Function)h=this.authority();else{const f=typeof this.authority=="string"?[this.authority]:this.authority,v=typeof this.access=="string"?[this.access]:this.access;h=Ce(f,v)}return h},options(){let h={};return this.display&&(h.display=this.display),{class:{"ivu-auth":!0,"ivu-auth-permission":this.isPermission,"ivu-auth-no-math":!this.isPermission,"ivu-auth-redirect":!this.isPermission&&this.to,"ivu-auth-prevent":this.prevent},style:h}}},render(){return this.isPermission?n.h("div",this.options,this.$slots.default()):this.to?n.h("div",this.options):this.prevent?n.h("div",Object.assign({},this.options,{onClick:this.handlePreventClick}),[n.h("div",{class:"ivu-auth-prevent-no-match"},this.$slots.default())]):n.h("div",this.options,this.$slots.noMatch())},methods:{handlePreventClick(h){this.isPermission||(this.customTip||this.$Message.info({content:this.message,duration:3}),this.$emit("click",h))}},created(){!this.isPermission&&this.to&&this.handleClick(!1)}};var te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ph<"u"?ph:typeof self<"u"?self:{};function q(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var me={exports:{}};/**!
* @fileOverview Kickass library to create and place poppers near their reference elements.
* @version 1.16.1
* @license
* Copyright (c) 2016 Federico Zivolo and contributors
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/(function(h,f){(function(v,E){h.exports=E()})(te,function(){var v=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",E=function(){for(var oe=["Edge","Trident","Firefox"],Oe=0;Oe<oe.length;Oe+=1)if(v&&navigator.userAgent.indexOf(oe[Oe])>=0)return 1;return 0}();function T(oe){var Oe=!1;return function(){Oe||(Oe=!0,window.Promise.resolve().then(function(){Oe=!1,oe()}))}}function b(oe){var Oe=!1;return function(){Oe||(Oe=!0,setTimeout(function(){Oe=!1,oe()},E))}}var N=v&&window.Promise,U=N?T:b;function Y(oe){var Oe={};return oe&&Oe.toString.call(oe)==="[object Function]"}function W(oe,Oe){if(oe.nodeType!==1)return[];var Me=oe.ownerDocument.defaultView,De=Me.getComputedStyle(oe,null);return Oe?De[Oe]:De}function Z(oe){return oe.nodeName==="HTML"?oe:oe.parentNode||oe.host}function fe(oe){if(!oe)return document.body;switch(oe.nodeName){case"HTML":case"BODY":return oe.ownerDocument.body;case"#document":return oe.body}var Oe=W(oe),Me=Oe.overflow,De=Oe.overflowX,it=Oe.overflowY;return/(auto|scroll|overlay)/.test(Me+it+De)?oe:fe(Z(oe))}function Te(oe){return oe&&oe.referenceNode?oe.referenceNode:oe}var Se=v&&!!(window.MSInputMethodContext&&document.documentMode),we=v&&/MSIE 10/.test(navigator.userAgent);function ce(oe){return oe===11?Se:oe===10?we:Se||we}function Be(oe){if(!oe)return document.documentElement;for(var Oe=ce(10)?document.body:null,Me=oe.offsetParent||null;Me===Oe&&oe.nextElementSibling;)Me=(oe=oe.nextElementSibling).offsetParent;var De=Me&&Me.nodeName;return!De||De==="BODY"||De==="HTML"?oe?oe.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(Me.nodeName)!==-1&&W(Me,"position")==="static"?Be(Me):Me}function Zt(oe){var Oe=oe.nodeName;return Oe==="BODY"?!1:Oe==="HTML"||Be(oe.firstElementChild)===oe}function Ct(oe){return oe.parentNode!==null?Ct(oe.parentNode):oe}function Rt(oe,Oe){if(!oe||!oe.nodeType||!Oe||!Oe.nodeType)return document.documentElement;var Me=oe.compareDocumentPosition(Oe)&Node.DOCUMENT_POSITION_FOLLOWING,De=Me?oe:Oe,it=Me?Oe:oe,tt=document.createRange();tt.setStart(De,0),tt.setEnd(it,0);var st=tt.commonAncestorContainer;if(oe!==st&&Oe!==st||De.contains(it))return Zt(st)?st:Be(st);var pt=Ct(oe);return pt.host?Rt(pt.host,Oe):Rt(oe,Ct(Oe).host)}function qe(oe){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",Me=Oe==="top"?"scrollTop":"scrollLeft",De=oe.nodeName;if(De==="BODY"||De==="HTML"){var it=oe.ownerDocument.documentElement,tt=oe.ownerDocument.scrollingElement||it;return tt[Me]}return oe[Me]}function Le(oe,Oe){var Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,De=qe(Oe,"top"),it=qe(Oe,"left"),tt=Me?-1:1;return oe.top+=De*tt,oe.bottom+=De*tt,oe.left+=it*tt,oe.right+=it*tt,oe}function rt(oe,Oe){var Me=Oe==="x"?"Left":"Top",De=Me==="Left"?"Right":"Bottom";return parseFloat(oe["border"+Me+"Width"])+parseFloat(oe["border"+De+"Width"])}function et(oe,Oe,Me,De){return Math.max(Oe["offset"+oe],Oe["scroll"+oe],Me["client"+oe],Me["offset"+oe],Me["scroll"+oe],ce(10)?parseInt(Me["offset"+oe])+parseInt(De["margin"+(oe==="Height"?"Top":"Left")])+parseInt(De["margin"+(oe==="Height"?"Bottom":"Right")]):0)}function ri(oe){var Oe=oe.body,Me=oe.documentElement,De=ce(10)&&getComputedStyle(Me);return{height:et("Height",Oe,Me,De),width:et("Width",Oe,Me,De)}}var si=function(oe,Oe){if(!(oe instanceof Oe))throw new TypeError("Cannot call a class as a function")},Xt=function(){function oe(Oe,Me){for(var De=0;De<Me.length;De++){var it=Me[De];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Oe,it.key,it)}}return function(Oe,Me,De){return Me&&oe(Oe.prototype,Me),De&&oe(Oe,De),Oe}}(),Lt=function(oe,Oe,Me){return Oe in oe?Object.defineProperty(oe,Oe,{value:Me,enumerable:!0,configurable:!0,writable:!0}):oe[Oe]=Me,oe},Ht=Object.assign||function(oe){for(var Oe=1;Oe<arguments.length;Oe++){var Me=arguments[Oe];for(var De in Me)Object.prototype.hasOwnProperty.call(Me,De)&&(oe[De]=Me[De])}return oe};function ui(oe){return Ht({},oe,{right:oe.left+oe.width,bottom:oe.top+oe.height})}function Wt(oe){var Oe={};try{if(ce(10)){Oe=oe.getBoundingClientRect();var Me=qe(oe,"top"),De=qe(oe,"left");Oe.top+=Me,Oe.left+=De,Oe.bottom+=Me,Oe.right+=De}else Oe=oe.getBoundingClientRect()}catch{}var it={left:Oe.left,top:Oe.top,width:Oe.right-Oe.left,height:Oe.bottom-Oe.top},tt=oe.nodeName==="HTML"?ri(oe.ownerDocument):{},st=tt.width||oe.clientWidth||it.width,pt=tt.height||oe.clientHeight||it.height,Pt=oe.offsetWidth-st,oi=oe.offsetHeight-pt;if(Pt||oi){var pi=W(oe);Pt-=rt(pi,"x"),oi-=rt(pi,"y"),it.width-=Pt,it.height-=oi}return ui(it)}function Tt(oe,Oe){var Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,De=ce(10),it=Oe.nodeName==="HTML",tt=Wt(oe),st=Wt(Oe),pt=fe(oe),Pt=W(Oe),oi=parseFloat(Pt.borderTopWidth),pi=parseFloat(Pt.borderLeftWidth);Me&&it&&(st.top=Math.max(st.top,0),st.left=Math.max(st.left,0));var ei=ui({top:tt.top-st.top-oi,left:tt.left-st.left-pi,width:tt.width,height:tt.height});if(ei.marginTop=0,ei.marginLeft=0,!De&&it){var mi=parseFloat(Pt.marginTop),on=parseFloat(Pt.marginLeft);ei.top-=oi-mi,ei.bottom-=oi-mi,ei.left-=pi-on,ei.right-=pi-on,ei.marginTop=mi,ei.marginLeft=on}return(De&&!Me?Oe.contains(pt):Oe===pt&&pt.nodeName!=="BODY")&&(ei=Le(ei,Oe)),ei}function vt(oe){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Me=oe.ownerDocument.documentElement,De=Tt(oe,Me),it=Math.max(Me.clientWidth,window.innerWidth||0),tt=Math.max(Me.clientHeight,window.innerHeight||0),st=Oe?0:qe(Me),pt=Oe?0:qe(Me,"left"),Pt={top:st-De.top+De.marginTop,left:pt-De.left+De.marginLeft,width:it,height:tt};return ui(Pt)}function jt(oe){var Oe=oe.nodeName;if(Oe==="BODY"||Oe==="HTML")return!1;if(W(oe,"position")==="fixed")return!0;var Me=Z(oe);return Me?jt(Me):!1}function kt(oe){if(!oe||!oe.parentElement||ce())return document.documentElement;for(var Oe=oe.parentElement;Oe&&W(Oe,"transform")==="none";)Oe=Oe.parentElement;return Oe||document.documentElement}function xi(oe,Oe,Me,De){var it=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,tt={top:0,left:0},st=it?kt(oe):Rt(oe,Te(Oe));if(De==="viewport")tt=vt(st,it);else{var pt=void 0;De==="scrollParent"?(pt=fe(Z(Oe)),pt.nodeName==="BODY"&&(pt=oe.ownerDocument.documentElement)):De==="window"?pt=oe.ownerDocument.documentElement:pt=De;var Pt=Tt(pt,st,it);if(pt.nodeName==="HTML"&&!jt(st)){var oi=ri(oe.ownerDocument),pi=oi.height,ei=oi.width;tt.top+=Pt.top-Pt.marginTop,tt.bottom=pi+Pt.top,tt.left+=Pt.left-Pt.marginLeft,tt.right=ei+Pt.left}else tt=Pt}Me=Me||0;var mi=typeof Me=="number";return tt.left+=mi?Me:Me.left||0,tt.top+=mi?Me:Me.top||0,tt.right-=mi?Me:Me.right||0,tt.bottom-=mi?Me:Me.bottom||0,tt}function Mi(oe){var Oe=oe.width,Me=oe.height;return Oe*Me}function Tn(oe,Oe,Me,De,it){var tt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(oe.indexOf("auto")===-1)return oe;var st=xi(Me,De,tt,it),pt={top:{width:st.width,height:Oe.top-st.top},right:{width:st.right-Oe.right,height:st.height},bottom:{width:st.width,height:st.bottom-Oe.bottom},left:{width:Oe.left-st.left,height:st.height}},Pt=Object.keys(pt).map(function(mi){return Ht({key:mi},pt[mi],{area:Mi(pt[mi])})}).sort(function(mi,on){return on.area-mi.area}),oi=Pt.filter(function(mi){var on=mi.width,an=mi.height;return on>=Me.clientWidth&&an>=Me.clientHeight}),pi=oi.length>0?oi[0].key:Pt[0].key,ei=oe.split("-")[1];return pi+(ei?"-"+ei:"")}function Gn(oe,Oe,Me){var De=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,it=De?kt(Oe):Rt(Oe,Te(Me));return Tt(Me,it,De)}function gr(oe){var Oe=oe.ownerDocument.defaultView,Me=Oe.getComputedStyle(oe),De=parseFloat(Me.marginTop||0)+parseFloat(Me.marginBottom||0),it=parseFloat(Me.marginLeft||0)+parseFloat(Me.marginRight||0),tt={width:oe.offsetWidth+it,height:oe.offsetHeight+De};return tt}function Tr(oe){var Oe={left:"right",right:"left",bottom:"top",top:"bottom"};return oe.replace(/left|right|bottom|top/g,function(Me){return Oe[Me]})}function Ys(oe,Oe,Me){Me=Me.split("-")[0];var De=gr(oe),it={width:De.width,height:De.height},tt=["right","left"].indexOf(Me)!==-1,st=tt?"top":"left",pt=tt?"left":"top",Pt=tt?"height":"width",oi=tt?"width":"height";return it[st]=Oe[st]+Oe[Pt]/2-De[Pt]/2,Me===pt?it[pt]=Oe[pt]-De[oi]:it[pt]=Oe[Tr(pt)],it}function oa(oe,Oe){return Array.prototype.find?oe.find(Oe):oe.filter(Oe)[0]}function Mh(oe,Oe,Me){if(Array.prototype.findIndex)return oe.findIndex(function(it){return it[Oe]===Me});var De=oa(oe,function(it){return it[Oe]===Me});return oe.indexOf(De)}function Ph(oe,Oe,Me){var De=Me===void 0?oe:oe.slice(0,Mh(oe,"name",Me));return De.forEach(function(it){it.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var tt=it.function||it.fn;it.enabled&&Y(tt)&&(Oe.offsets.popper=ui(Oe.offsets.popper),Oe.offsets.reference=ui(Oe.offsets.reference),Oe=tt(Oe,it))}),Oe}function Vt(){if(!this.state.isDestroyed){var oe={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};oe.offsets.reference=Gn(this.state,this.popper,this.reference,this.options.positionFixed),oe.placement=Tn(this.options.placement,oe.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),oe.originalPlacement=oe.placement,oe.positionFixed=this.options.positionFixed,oe.offsets.popper=Ys(this.popper,oe.offsets.reference,oe.placement),oe.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",oe=Ph(this.modifiers,oe),this.state.isCreated?this.options.onUpdate(oe):(this.state.isCreated=!0,this.options.onCreate(oe))}}function yi(oe,Oe){return oe.some(function(Me){var De=Me.name,it=Me.enabled;return it&&De===Oe})}function sn(oe){for(var Oe=[!1,"ms","Webkit","Moz","O"],Me=oe.charAt(0).toUpperCase()+oe.slice(1),De=0;De<Oe.length;De++){var it=Oe[De],tt=it?""+it+Me:oe;if(typeof document.body.style[tt]<"u")return tt}return null}function Ds(){return this.state.isDestroyed=!0,yi(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[sn("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Vo(oe){var Oe=oe.ownerDocument;return Oe?Oe.defaultView:window}function ku(oe,Oe,Me,De){var it=oe.nodeName==="BODY",tt=it?oe.ownerDocument.defaultView:oe;tt.addEventListener(Oe,Me,{passive:!0}),it||ku(fe(tt.parentNode),Oe,Me,De),De.push(tt)}function uf(oe,Oe,Me,De){Me.updateBound=De,Vo(oe).addEventListener("resize",Me.updateBound,{passive:!0});var it=fe(oe);return ku(it,"scroll",Me.updateBound,Me.scrollParents),Me.scrollElement=it,Me.eventsEnabled=!0,Me}function Fo(){this.state.eventsEnabled||(this.state=uf(this.reference,this.options,this.state,this.scheduleUpdate))}function In(oe,Oe){return Vo(oe).removeEventListener("resize",Oe.updateBound),Oe.scrollParents.forEach(function(Me){Me.removeEventListener("scroll",Oe.updateBound)}),Oe.updateBound=null,Oe.scrollParents=[],Oe.scrollElement=null,Oe.eventsEnabled=!1,Oe}function aa(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=In(this.reference,this.state))}function kh(oe){return oe!==""&&!isNaN(parseFloat(oe))&&isFinite(oe)}function Ga(oe,Oe){Object.keys(Oe).forEach(function(Me){var De="";["width","height","top","right","bottom","left"].indexOf(Me)!==-1&&kh(Oe[Me])&&(De="px"),oe.style[Me]=Oe[Me]+De})}function Ih(oe,Oe){Object.keys(Oe).forEach(function(Me){var De=Oe[Me];De!==!1?oe.setAttribute(Me,Oe[Me]):oe.removeAttribute(Me)})}function X0(oe){return Ga(oe.instance.popper,oe.styles),Ih(oe.instance.popper,oe.attributes),oe.arrowElement&&Object.keys(oe.arrowStyles).length&&Ga(oe.arrowElement,oe.arrowStyles),oe}function uC(oe,Oe,Me,De,it){var tt=Gn(it,Oe,oe,Me.positionFixed),st=Tn(Me.placement,tt,Oe,oe,Me.modifiers.flip.boundariesElement,Me.modifiers.flip.padding);return Oe.setAttribute("x-placement",st),Ga(Oe,{position:Me.positionFixed?"fixed":"absolute"}),Me}function W0(oe,Oe){var Me=oe.offsets,De=Me.popper,it=Me.reference,tt=Math.round,st=Math.floor,pt=function(Oc){return Oc},Pt=tt(it.width),oi=tt(De.width),pi=["left","right"].indexOf(oe.placement)!==-1,ei=oe.placement.indexOf("-")!==-1,mi=Pt%2===oi%2,on=Pt%2===1&&oi%2===1,an=Oe?pi||ei||mi?tt:st:pt,ys=Oe?tt:pt;return{left:an(on&&!ei&&Oe?De.left-1:De.left),top:ys(De.top),bottom:ys(De.bottom),right:an(De.right)}}var dC=v&&/Firefox/i.test(navigator.userAgent);function fC(oe,Oe){var Me=Oe.x,De=Oe.y,it=oe.offsets.popper,tt=oa(oe.instance.modifiers,function(mm){return mm.name==="applyStyle"}).gpuAcceleration;tt!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var st=tt!==void 0?tt:Oe.gpuAcceleration,pt=Be(oe.instance.popper),Pt=Wt(pt),oi={position:it.position},pi=W0(oe,window.devicePixelRatio<2||!dC),ei=Me==="bottom"?"top":"bottom",mi=De==="right"?"left":"right",on=sn("transform"),an=void 0,ys=void 0;if(ei==="bottom"?pt.nodeName==="HTML"?ys=-pt.clientHeight+pi.bottom:ys=-Pt.height+pi.bottom:ys=pi.top,mi==="right"?pt.nodeName==="HTML"?an=-pt.clientWidth+pi.right:an=-Pt.width+pi.right:an=pi.left,st&&on)oi[on]="translate3d("+an+"px, "+ys+"px, 0)",oi[ei]=0,oi[mi]=0,oi.willChange="transform";else{var Oc=ei==="bottom"?-1:1,G0=mi==="right"?-1:1;oi[ei]=ys*Oc,oi[mi]=an*G0,oi.willChange=ei+", "+mi}var Rl={"x-placement":oe.placement};return oe.attributes=Ht({},Rl,oe.attributes),oe.styles=Ht({},oi,oe.styles),oe.arrowStyles=Ht({},oe.offsets.arrow,oe.arrowStyles),oe}function Sx(oe,Oe,Me){var De=oa(oe,function(pt){var Pt=pt.name;return Pt===Oe}),it=!!De&&oe.some(function(pt){return pt.name===Me&&pt.enabled&&pt.order<De.order});if(!it){var tt="`"+Oe+"`",st="`"+Me+"`";console.warn(st+" modifier is required by "+tt+" modifier in order to work, be sure to include it before "+tt+"!")}return it}function Jr(oe,Oe){var Me;if(!Sx(oe.instance.modifiers,"arrow","keepTogether"))return oe;var De=Oe.element;if(typeof De=="string"){if(De=oe.instance.popper.querySelector(De),!De)return oe}else if(!oe.instance.popper.contains(De))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),oe;var it=oe.placement.split("-")[0],tt=oe.offsets,st=tt.popper,pt=tt.reference,Pt=["left","right"].indexOf(it)!==-1,oi=Pt?"height":"width",pi=Pt?"Top":"Left",ei=pi.toLowerCase(),mi=Pt?"left":"top",on=Pt?"bottom":"right",an=gr(De)[oi];pt[on]-an<st[ei]&&(oe.offsets.popper[ei]-=st[ei]-(pt[on]-an)),pt[ei]+an>st[on]&&(oe.offsets.popper[ei]+=pt[ei]+an-st[on]),oe.offsets.popper=ui(oe.offsets.popper);var ys=pt[ei]+pt[oi]/2-an/2,Oc=W(oe.instance.popper),G0=parseFloat(Oc["margin"+pi]),Rl=parseFloat(Oc["border"+pi+"Width"]),mm=ys-oe.offsets.popper[ei]-G0-Rl;return mm=Math.max(Math.min(st[oi]-an,mm),0),oe.arrowElement=De,oe.offsets.arrow=(Me={},Lt(Me,ei,Math.round(mm)),Lt(Me,mi,""),Me),oe}function Rh(oe){return oe==="end"?"start":oe==="start"?"end":oe}var Iu=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Bh=Iu.slice(3);function pC(oe){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Me=Bh.indexOf(oe),De=Bh.slice(Me+1).concat(Bh.slice(0,Me));return Oe?De.reverse():De}var df={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function R3(oe,Oe){if(yi(oe.instance.modifiers,"inner")||oe.flipped&&oe.placement===oe.originalPlacement)return oe;var Me=xi(oe.instance.popper,oe.instance.reference,Oe.padding,Oe.boundariesElement,oe.positionFixed),De=oe.placement.split("-")[0],it=Tr(De),tt=oe.placement.split("-")[1]||"",st=[];switch(Oe.behavior){case df.FLIP:st=[De,it];break;case df.CLOCKWISE:st=pC(De);break;case df.COUNTERCLOCKWISE:st=pC(De,!0);break;default:st=Oe.behavior}return st.forEach(function(pt,Pt){if(De!==pt||st.length===Pt+1)return oe;De=oe.placement.split("-")[0],it=Tr(De);var oi=oe.offsets.popper,pi=oe.offsets.reference,ei=Math.floor,mi=De==="left"&&ei(oi.right)>ei(pi.left)||De==="right"&&ei(oi.left)<ei(pi.right)||De==="top"&&ei(oi.bottom)>ei(pi.top)||De==="bottom"&&ei(oi.top)<ei(pi.bottom),on=ei(oi.left)<ei(Me.left),an=ei(oi.right)>ei(Me.right),ys=ei(oi.top)<ei(Me.top),Oc=ei(oi.bottom)>ei(Me.bottom),G0=De==="left"&&on||De==="right"&&an||De==="top"&&ys||De==="bottom"&&Oc,Rl=["top","bottom"].indexOf(De)!==-1,mm=!!Oe.flipVariations&&(Rl&&tt==="start"&&on||Rl&&tt==="end"&&an||!Rl&&tt==="start"&&ys||!Rl&&tt==="end"&&Oc),Xbe=!!Oe.flipVariationsByContent&&(Rl&&tt==="start"&&an||Rl&&tt==="end"&&on||!Rl&&tt==="start"&&Oc||!Rl&&tt==="end"&&ys),Cz=mm||Xbe;(mi||G0||Cz)&&(oe.flipped=!0,(mi||G0)&&(De=st[Pt+1]),Cz&&(tt=Rh(tt)),oe.placement=De+(tt?"-"+tt:""),oe.offsets.popper=Ht({},oe.offsets.popper,Ys(oe.instance.popper,oe.offsets.reference,oe.placement)),oe=Ph(oe.instance.modifiers,oe,"flip"))}),oe}function Cx(oe){var Oe=oe.offsets,Me=Oe.popper,De=Oe.reference,it=oe.placement.split("-")[0],tt=Math.floor,st=["top","bottom"].indexOf(it)!==-1,pt=st?"right":"bottom",Pt=st?"left":"top",oi=st?"width":"height";return Me[pt]<tt(De[Pt])&&(oe.offsets.popper[Pt]=tt(De[Pt])-Me[oi]),Me[Pt]>tt(De[pt])&&(oe.offsets.popper[Pt]=tt(De[pt])),oe}function B3(oe,Oe,Me,De){var it=oe.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),tt=+it[1],st=it[2];if(!tt)return oe;if(st.indexOf("%")===0){var pt=void 0;switch(st){case"%p":pt=Me;break;case"%":case"%r":default:pt=De}var Pt=ui(pt);return Pt[Oe]/100*tt}else if(st==="vh"||st==="vw"){var oi=void 0;return st==="vh"?oi=Math.max(document.documentElement.clientHeight,window.innerHeight||0):oi=Math.max(document.documentElement.clientWidth,window.innerWidth||0),oi/100*tt}else return tt}function Dbe(oe,Oe,Me,De){var it=[0,0],tt=["right","left"].indexOf(De)!==-1,st=oe.split(/(\+|\-)/).map(function(pi){return pi.trim()}),pt=st.indexOf(oa(st,function(pi){return pi.search(/,|\s/)!==-1}));st[pt]&&st[pt].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var Pt=/\s*,\s*|\s+/,oi=pt!==-1?[st.slice(0,pt).concat([st[pt].split(Pt)[0]]),[st[pt].split(Pt)[1]].concat(st.slice(pt+1))]:[st];return oi=oi.map(function(pi,ei){var mi=(ei===1?!tt:tt)?"height":"width",on=!1;return pi.reduce(function(an,ys){return an[an.length-1]===""&&["+","-"].indexOf(ys)!==-1?(an[an.length-1]=ys,on=!0,an):on?(an[an.length-1]+=ys,on=!1,an):an.concat(ys)},[]).map(function(an){return B3(an,mi,Oe,Me)})}),oi.forEach(function(pi,ei){pi.forEach(function(mi,on){kh(mi)&&(it[ei]+=mi*(pi[on-1]==="-"?-1:1))})}),it}function Lbe(oe,Oe){var Me=Oe.offset,De=oe.placement,it=oe.offsets,tt=it.popper,st=it.reference,pt=De.split("-")[0],Pt=void 0;return kh(+Me)?Pt=[+Me,0]:Pt=Dbe(Me,tt,st,pt),pt==="left"?(tt.top+=Pt[0],tt.left-=Pt[1]):pt==="right"?(tt.top+=Pt[0],tt.left+=Pt[1]):pt==="top"?(tt.left+=Pt[0],tt.top-=Pt[1]):pt==="bottom"&&(tt.left+=Pt[0],tt.top+=Pt[1]),oe.popper=tt,oe}function Nbe(oe,Oe){var Me=Oe.boundariesElement||Be(oe.instance.popper);oe.instance.reference===Me&&(Me=Be(Me));var De=sn("transform"),it=oe.instance.popper.style,tt=it.top,st=it.left,pt=it[De];it.top="",it.left="",it[De]="";var Pt=xi(oe.instance.popper,oe.instance.reference,Oe.padding,Me,oe.positionFixed);it.top=tt,it.left=st,it[De]=pt,Oe.boundaries=Pt;var oi=Oe.priority,pi=oe.offsets.popper,ei={primary:function(mi){var on=pi[mi];return pi[mi]<Pt[mi]&&!Oe.escapeWithReference&&(on=Math.max(pi[mi],Pt[mi])),Lt({},mi,on)},secondary:function(mi){var on=mi==="right"?"left":"top",an=pi[on];return pi[mi]>Pt[mi]&&!Oe.escapeWithReference&&(an=Math.min(pi[on],Pt[mi]-(mi==="right"?pi.width:pi.height))),Lt({},on,an)}};return oi.forEach(function(mi){var on=["left","top"].indexOf(mi)!==-1?"primary":"secondary";pi=Ht({},pi,ei[on](mi))}),oe.offsets.popper=pi,oe}function Vbe(oe){var Oe=oe.placement,Me=Oe.split("-")[0],De=Oe.split("-")[1];if(De){var it=oe.offsets,tt=it.reference,st=it.popper,pt=["bottom","top"].indexOf(Me)!==-1,Pt=pt?"left":"top",oi=pt?"width":"height",pi={start:Lt({},Pt,tt[Pt]),end:Lt({},Pt,tt[Pt]+tt[oi]-st[oi])};oe.offsets.popper=Ht({},st,pi[De])}return oe}function Fbe(oe){if(!Sx(oe.instance.modifiers,"hide","preventOverflow"))return oe;var Oe=oe.offsets.reference,Me=oa(oe.instance.modifiers,function(De){return De.name==="preventOverflow"}).boundaries;if(Oe.bottom<Me.top||Oe.left>Me.right||Oe.top>Me.bottom||Oe.right<Me.left){if(oe.hide===!0)return oe;oe.hide=!0,oe.attributes["x-out-of-boundaries"]=""}else{if(oe.hide===!1)return oe;oe.hide=!1,oe.attributes["x-out-of-boundaries"]=!1}return oe}function $be(oe){var Oe=oe.placement,Me=Oe.split("-")[0],De=oe.offsets,it=De.popper,tt=De.reference,st=["left","right"].indexOf(Me)!==-1,pt=["top","left"].indexOf(Me)===-1;return it[st?"left":"top"]=tt[Me]-(pt?it[st?"width":"height"]:0),oe.placement=Tr(Oe),oe.offsets.popper=ui(it),oe}var Ube={shift:{order:100,enabled:!0,fn:Vbe},offset:{order:200,enabled:!0,fn:Lbe,offset:0},preventOverflow:{order:300,enabled:!0,fn:Nbe,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Cx},arrow:{order:500,enabled:!0,fn:Jr,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:R3,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:$be},hide:{order:800,enabled:!0,fn:Fbe},computeStyle:{order:850,enabled:!0,fn:fC,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:X0,onLoad:uC,gpuAcceleration:void 0}},zbe={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Ube},mC=function(){function oe(Oe,Me){var De=this,it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};si(this,oe),this.scheduleUpdate=function(){return requestAnimationFrame(De.update)},this.update=U(this.update.bind(this)),this.options=Ht({},oe.Defaults,it),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=Oe&&Oe.jquery?Oe[0]:Oe,this.popper=Me&&Me.jquery?Me[0]:Me,this.options.modifiers={},Object.keys(Ht({},oe.Defaults.modifiers,it.modifiers)).forEach(function(st){De.options.modifiers[st]=Ht({},oe.Defaults.modifiers[st]||{},it.modifiers?it.modifiers[st]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(st){return Ht({name:st},De.options.modifiers[st])}).sort(function(st,pt){return st.order-pt.order}),this.modifiers.forEach(function(st){st.enabled&&Y(st.onLoad)&&st.onLoad(De.reference,De.popper,De.options,st,De.state)}),this.update();var tt=this.options.eventsEnabled;tt&&this.enableEventListeners(),this.state.eventsEnabled=tt}return Xt(oe,[{key:"update",value:function(){return Vt.call(this)}},{key:"destroy",value:function(){return Ds.call(this)}},{key:"enableEventListeners",value:function(){return Fo.call(this)}},{key:"disableEventListeners",value:function(){return aa.call(this)}}]),oe}();return mC.Utils=(typeof window<"u"?window:te).PopperUtils,mC.placements=Iu,mC.Defaults=zbe,mC})})(me);var ge=me.exports;let Ae=0,Pe=0;function je(){Ae++}function $e(){Pe++}const We={name:"Drop",emits:["mouseenter","mouseleave","click"],props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1},visible:{type:Boolean},classes:{type:Object,default:()=>{}},styles:{type:Object,default:()=>{}},transitionName:{type:String,default:"transition-drop"},boundariesElement:{default:"window"}},data(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{mergedStyle(){let h={};return this.width&&(h.minWidth=`${this.width}px`),this.transfer&&(h["z-index"]=1060+this.tIndex),Object.assign({},this.styles,h)},mergedClass(){return Object.assign({},this.classes,{[this.className]:this.className})}},methods:{update(){n.nextTick(()=>{this.popper?(this.popper.update(),this.popperStatus=!0):this.popper=new ge(this.$parent.$refs.reference,this.$refs.drop,{eventsEnabled:this.eventsEnabled,placement:this.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:this.boundariesElement}},onCreate:()=>{this.resetTransformOrigin(),n.nextTick(this.popper.update())},onUpdate:()=>{this.resetTransformOrigin()}}),this.$parent.$options.name==="iSelect"&&(this.width=parseInt(I(this.$parent.$el,"width"))),this.tIndex=this.handleGetIndex()})},destroy(){this.popper&&setTimeout(()=>{this.popper&&!this.popperStatus&&(this.popper.popper.style.display="none",this.popper.destroy(),this.popper=null),this.popperStatus=!1},300)},resetTransformOrigin(){if(!this.popper)return;let h=this.popper.popper.getAttribute("x-placement"),f=h.split("-")[0],v=h.split("-")[1];h==="left"||h==="right"||(this.popper.popper.style.transformOrigin=f==="bottom"||f!=="top"&&v==="start"?"center top":"center bottom")},handleGetIndex(){return je(),Ae},handleMouseenter(h){this.$emit("mouseenter",h)},handleMouseleave(h){this.$emit("mouseleave",h)},handleOnUpdatePopper(){this.update()},handleOnDestroyPopper(){this.destroy()},handleClick(h){this.$emit("click",h)}},beforeUnmount(){this.popper&&(this.popper.destroy(),this.popper=null)}};function ft(h,f,v,E,T,b){return n.openBlock(),n.createBlock(n.Teleport,{to:"body",disabled:!v.transfer},[n.createVNode(n.Transition,{name:v.transitionName},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",n.mergeProps({class:["ivu-select-dropdown",b.mergedClass],ref:"drop",style:b.mergedStyle},h.$attrs,{onMouseenter:f[0]||(f[0]=(...N)=>b.handleMouseenter&&b.handleMouseenter(...N)),onMouseleave:f[1]||(f[1]=(...N)=>b.handleMouseleave&&b.handleMouseleave(...N)),onClick:f[2]||(f[2]=n.withModifiers((...N)=>b.handleClick&&b.handleClick(...N),["stop"]))}),[n.renderSlot(h.$slots,"default")],16),[[n.vShow,v.visible]])]),_:3},8,["name"])],8,["disabled"])}var Ze=l(We,[["render",ft]]);function dt(h){s&&typeof window.viewuiplus<"u"&&("langs"in viewuiplus||(viewuiplus.langs={}),viewuiplus.langs[h.i.locale]=h)}const Ut={i:{locale:"zh-CN",select:{placeholder:"请选择",noMatch:"无匹配数据",loading:"加载中"},table:{noDataText:"暂无数据",noFilteredDataText:"暂无筛选结果",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},datepicker:{selectDate:"选择日期",selectTime:"选择时间",startTime:"开始时间",endTime:"结束时间",clear:"清空",ok:"确定",datePanelLabel:"[yyyy年] [m月]",month:"月",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",year:"年",weekStartDay:"0",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{m1:"1月",m2:"2月",m3:"3月",m4:"4月",m5:"5月",m6:"6月",m7:"7月",m8:"8月",m9:"9月",m10:"10月",m11:"11月",m12:"12月"}},transfer:{titles:{source:"源列表",target:"目的列表"},filterPlaceholder:"请输入搜索内容",notFoundText:"列表为空"},modal:{okText:"确定",cancelText:"取消"},poptip:{okText:"确定",cancelText:"取消"},page:{prev:"上一页",next:"下一页",total:"共",item:"条",items:"条",prev5:"向前 5 页",next5:"向后 5 页",page:"条/页",goto:"跳至",p:"页"},rate:{star:"星",stars:"星"},time:{before:"前",after:"后",just:"刚刚",seconds:"秒",minutes:"分钟",hours:"小时",days:"天"},tree:{emptyText:"暂无数据"},image:{zoomIn:"放大",zoomOut:"缩小",rotateLeft:"左旋转",rotateRight:"右旋转",fail:"失败",preview:"预览"}}};dt(Ut);var zt=function(h){return _t(h)&&!ni(h)};function _t(h){return!!h&&typeof h=="object"}function ni(h){var f=Object.prototype.toString.call(h);return f==="[object RegExp]"||f==="[object Date]"||Ue(h)}var Bi=typeof Symbol=="function"&&Symbol.for,Ee=Bi?Symbol.for("react.element"):60103;function Ue(h){return h.$$typeof===Ee}function xe(h){return Array.isArray(h)?[]:{}}function ze(h,f){return f.clone!==!1&&f.isMergeableObject(h)?xt(xe(h),h,f):h}function Qe(h,f,v){return h.concat(f).map(function(E){return ze(E,v)})}function ct(h,f,v){var E={};return v.isMergeableObject(h)&&Object.keys(h).forEach(function(T){E[T]=ze(h[T],v)}),Object.keys(f).forEach(function(T){!v.isMergeableObject(f[T])||!h[T]?E[T]=ze(f[T],v):E[T]=xt(h[T],f[T],v)}),E}function xt(h,f,v){v=v||{},v.arrayMerge=v.arrayMerge||Qe,v.isMergeableObject=v.isMergeableObject||zt;var E=Array.isArray(f),T=Array.isArray(h),b=E===T;return b?E?v.arrayMerge(h,f,v):ct(h,f,v):ze(f,v)}xt.all=function(h,f){if(!Array.isArray(h))throw new Error("first argument should be an array");return h.reduce(function(v,E){return xt(v,E,f)},{})};var Ki=xt;const Ji=/(%|)\{([0-9a-zA-Z_]+)\}/g;function gn(){function h(v,E){return Object.prototype.hasOwnProperty.call(v,E)}function f(v,...E){return E.length===1&&typeof E[0]=="object"&&(E=E[0]),(!E||!E.hasOwnProperty)&&(E={}),v===void 0?"":v.replace(Ji,(T,b,N,U)=>{let Y;return v[U-1]==="{"&&v[U+T.length]==="}"?N:(Y=h(E,N)?E[N]:null,Y??"")})}return f}const pr=gn();let Qi=Ut;const Is={zh:Ut};let Sr=null,z_={},gs=null,OS=function(){if(Reflect.has(this,"$t"))return this.$t(...arguments);if(gs&&gs.global)return gs.global.t(...arguments);if(gs&&gs.locale){if(!z_[gs.locale]||Sr!=gs.locale){z_[gs.locale]=!0;let h=gs.getLocaleMessage(gs.locale)||{},f={};Ki(f,Is[gs.locale],h),Qi=f,gs.setLocaleMessage(gs.locale,f),Sr=gs.locale}return gs.hlang(...arguments)}};const tm=function(h,f){let v=OS.apply(this,arguments);if(v!=null)return v;const E=h.split(".");let T=Qi;for(let b=0,N=E.length;b<N;b++){const U=E[b];if(v=T[U],b===N-1)return pr(v,f);if(!v)return"";T=v}return""};var Qd={use:function(h){Qi=h||Qi},t:tm,i18n:function(h){gs=h}},kn={methods:{t(...h){return tm.apply(this,h)}}},Sh={data(){return{globalConfig:{}}},created(){const h=n.getCurrentInstance();this.globalConfig=h.appContext.config.globalProperties.$VIEWUI}};const jd="ivu-select",_k={name:"iSelectHead",mixins:[kn,Sh],components:{Icon:O},emits:["on-input-focus","on-input-blur","on-keydown","on-enter","on-clear","on-query-change"],inject:["SelectInstance"],props:{disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},initialLabel:{type:[String,Number,Array]},values:{type:Array,default:()=>[]},clearable:{type:[Function,Boolean],default:!1},inputElementId:{type:String},placeholder:{type:String},queryProp:{type:String,default:""},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean},showCreateItem:{type:Boolean}},data(){return{prefixCls:jd,query:"",inputLength:20,remoteInitialLabel:this.initialLabel,preventRemoteCall:!1}},computed:{singleDisplayClasses(){const{filterable:h,multiple:f,showPlaceholder:v}=this;return[{[jd+"-head-with-prefix"]:this.showPrefix,[jd+"-placeholder"]:v&&!h,[jd+"-selected-value"]:!v&&!f&&!h}]},singleDisplayValue(){return this.multiple&&this.values.length>0||this.filterable?"":`${this.selectedSingle}`||this.localePlaceholder},showPlaceholder(){let h=!1;if(this.multiple)!this.values.length>0&&(h=!0);else{const f=this.values[0];(typeof f>"u"||String(f).trim()==="")&&(h=!this.remoteInitialLabel)}return h},resetSelect(){return!this.showPlaceholder&&this.clearable},inputStyle(){let h={};return this.multiple&&(this.showPlaceholder?h.width="100%":h.width=`${this.inputLength}px`),h},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},selectedSingle(){const h=this.values[0];return h?h.label:this.remoteInitialLabel||""},selectedMultiple(){return(this.multiple?this.values:[]).filter((h,f)=>this.maxTagCount===void 0||f<this.maxTagCount)},headCls(){return{[`${jd}-head-flex`]:this.filterable&&this.showPrefix}},arrowType(){const h=this.globalConfig;let f="ios-arrow-down";return h&&(h.select.customArrow?f="":h.select.arrow&&(f=h.select.arrow)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.select.customArrow&&(f=h.select.customArrow),f},showPrefix(){const h=this.$slots.prefix&&this.$slots.prefix();let f=!1;return h&&(f=h[0].children.length>0),f||this.prefix},arrowSize(){const h=this.globalConfig;let f="";return h&&h.select.arrowSize&&(f=h.select.arrowSize),f}},methods:{onInputFocus(){this.$emit("on-input-focus")},onInputBlur(){this.showCreateItem||(this.values.length||(this.query=""),this.$emit("on-input-blur"))},removeTag(h){if(this.disabled)return!1;this.SelectInstance.handleOnSelectSelected(h)},resetInputState(){this.inputLength=this.$refs.input.value.length*12+20,this.$emit("on-keydown")},handleInputDelete(h){const f=h.target.value;this.multiple&&this.selectedMultiple.length&&this.query===""&&f===""&&this.removeTag(this.selectedMultiple[this.selectedMultiple.length-1])},handleInputEnter(h){this.$emit("on-enter"),this.showCreateItem&&h.stopPropagation()},onHeaderClick(h){this.filterable&&h.target===this.$el&&this.$refs.input.focus()},onClear(){this.$emit("on-clear")}},watch:{values([h]){if(this.filterable){if(this.preventRemoteCall=!0,this.multiple){this.query="",this.preventRemoteCall=!1;return}typeof h>"u"||h===""||h===null?this.query="":this.query=h.label,n.nextTick(()=>this.preventRemoteCall=!1)}},query(h){if(this.preventRemoteCall){this.preventRemoteCall=!1;return}this.$emit("on-query-change",h)},queryProp(h){h!==this.query&&(this.query=h)}}},xk={key:1,class:"ivu-tag ivu-tag-checked"},bk={class:"ivu-tag-text ivu-select-max-tag"},ue=["id","disabled","placeholder"];function Re(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{onClick:f[6]||(f[6]=(...U)=>b.onHeaderClick&&b.onHeaderClick(...U)),class:n.normalizeClass(b.headCls)},[b.showPrefix?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass([T.prefixCls+"-prefix"])},[n.renderSlot(h.$slots,"prefix",{},()=>[v.prefix?(n.openBlock(),n.createBlock(N,{key:0,type:v.prefix},null,8,["type"])):n.createCommentVNode("",!0)])],2)):n.createCommentVNode("",!0),(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.selectedMultiple,(U,Y)=>(n.openBlock(),n.createElementBlock("div",{class:"ivu-tag ivu-tag-checked",key:Y},[n.createElementVNode("span",{class:n.normalizeClass(["ivu-tag-text",{"ivu-select-multiple-tag-hidden":U.disabled}])},n.toDisplayString(U.tag!==void 0?U.tag:U.label),3),U.disabled?n.createCommentVNode("",!0):(n.openBlock(),n.createBlock(N,{key:0,type:"ios-close",onClick:n.withModifiers(W=>b.removeTag(U),["stop"])},null,8,["onClick"]))]))),128)),v.maxTagCount!==void 0&&v.values.length>v.maxTagCount?(n.openBlock(),n.createElementBlock("div",xk,[n.createElementVNode("span",bk,[v.maxTagPlaceholder?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(v.maxTagPlaceholder(v.values.length-v.maxTagCount)),1)],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode("+ "+n.toDisplayString(v.values.length-v.maxTagCount)+"...",1)],64))])])):n.createCommentVNode("",!0),n.withDirectives(n.createElementVNode("span",{class:n.normalizeClass(b.singleDisplayClasses)},n.toDisplayString(b.singleDisplayValue),3),[[n.vShow,b.singleDisplayValue]]),v.filterable?n.withDirectives((n.openBlock(),n.createElementBlock("input",{key:2,id:v.inputElementId,type:"text","onUpdate:modelValue":f[0]||(f[0]=U=>T.query=U),disabled:v.disabled,class:n.normalizeClass([T.prefixCls+"-input"]),placeholder:b.showPlaceholder?b.localePlaceholder:"",style:n.normalizeStyle(b.inputStyle),autocomplete:"off",spellcheck:"false",onKeydown:[f[1]||(f[1]=(...U)=>b.resetInputState&&b.resetInputState(...U)),f[2]||(f[2]=n.withKeys((...U)=>b.handleInputDelete&&b.handleInputDelete(...U),["delete"])),f[3]||(f[3]=n.withKeys((...U)=>b.handleInputEnter&&b.handleInputEnter(...U),["enter"]))],onFocus:f[4]||(f[4]=(...U)=>b.onInputFocus&&b.onInputFocus(...U)),onBlur:f[5]||(f[5]=(...U)=>b.onInputBlur&&b.onInputBlur(...U)),ref:"input"},null,46,ue)),[[n.vModelText,T.query]]):n.createCommentVNode("",!0),b.resetSelect?(n.openBlock(),n.createBlock(N,{key:3,type:"ios-close-circle",class:n.normalizeClass([T.prefixCls+"-arrow"]),onClick:n.withModifiers(b.onClear,["stop"])},null,8,["class","onClick"])):n.createCommentVNode("",!0),!b.resetSelect&&!v.remote?(n.openBlock(),n.createBlock(N,{key:4,type:b.arrowType,custom:b.customArrowType,size:b.arrowSize,class:n.normalizeClass([T.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])):n.createCommentVNode("",!0)],2)}var Xe=l(_k,[["render",Re]]);const Fe="click",Ve=Object.create(null),bt=Object.create(null),Yt=[Ve,bt],Jt=function(h,f,v){const{target:E}=v,T=function(N){const{el:U}=N;if(U!==E&&!U.contains(E)){const{binding:Y}=N;Y.modifiers.stop&&v.stopPropagation(),Y.modifiers.prevent&&v.preventDefault(),Y.value.call(h,v)}},b=function(N){return f[N].forEach(T)};Object.keys(f).forEach(b)},fi=function(h){Jt(this,Ve,h)},Ei=function(h){Jt(this,bt,h)},Li=function(h){return h?fi:Ei},$i=Object.defineProperties({},{$_captureInstances:{value:Ve},$_nonCaptureInstances:{value:bt},$_onCaptureEvent:{value:fi},$_onNonCaptureEvent:{value:Ei},beforeMount:{value:function(h,f){if(typeof f.value!="function")throw new TypeError("Binding value must be a function.");let v;const E=f.modifiers;E.click?v="click":E.mousedown?v="mousedown":E.touchstart?v="touchstart":v=Fe;const T=f.arg,b={...f,modifiers:{capture:!1,prevent:!1,stop:!1,...f.modifiers}},N=T?Ve:bt;Array.isArray(N[v])||(N[v]=[]),N[v].push({el:h,binding:b})===1&&typeof document=="object"&&document&&document.addEventListener(v,Li(T),T)}},unmounted:{value:function(h){const f=function(E){return E.el!==h},v=function(E){const T=Object.keys(E);if(T.length){const b=E===Ve,N=function(U){const Y=E[U].filter(f);Y.length?E[U]=Y:(typeof document=="object"&&document&&document.removeEventListener(U,Li(b),b),delete E[U])};T.forEach(N)}};Yt.forEach(v)}},version:{enumerable:!0,value:"3.7.1"}});var Ui={inject:{FormInstance:{default:""},FormItemInstance:{default:null}},computed:{itemDisabled(){let h=this.disabled;return!h&&this.FormInstance&&(h=this.FormInstance.disabled),h?!0:null}},methods:{handleFormItemChange(h,f){this.FormItemInstance&&(h==="blur"?this.FormItemInstance.formBlur(f):h==="change"&&this.FormItemInstance.formChange(f))}}};const zn="ivu-select",Ro=(h,f,v)=>{const E=JSON.stringify(h),T=JSON.stringify(f),b=JSON.stringify(v.map(N=>N.value));return E!==T||E!==b||b!==T},Ml=300,bn={name:"iSelect",mixins:[kn,Ui],components:{Drop:Ze,SelectHead:Xe,Icon:O},directives:{clickOutside:$i},emits:["on-set-default-options","on-clear","on-clickoutside","on-select","on-create","on-change","on-query-change","on-open-change","update:modelValue"],provide(){return{SelectInstance:this}},props:{modelValue:{type:[String,Number,Array],default:""},label:{type:[String,Number,Array],default:""},defaultLabel:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},filterable:{type:Boolean,default:!1},filterMethod:{type:Function},remoteMethod:{type:Function},loading:{type:Boolean,default:!1},loadingText:{type:String},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},labelInValue:{type:Boolean,default:!1},notFoundText:{type:String},placement:{validator(h){return S(h,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},autoComplete:{type:Boolean,default:!1},name:{type:String},elementId:{type:String},transferClassName:{type:String},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean,default:!1},capture:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return h.$VIEWUI?h.$VIEWUI.capture:!0}},filterByLabel:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1},hideNotFound:{type:Boolean,default:!1}},mounted(){if(!this.remote&&this.slotOptions.length>0&&(this.values=this.getInitialValue().map(h=>typeof h!="number"&&!h?null:this.getOptionData(h)).filter(Boolean)),this.checkUpdateStatus(),this.remote&&this.modelValue&&this.defaultLabel){if(!this.multiple)this.query=this.defaultLabel,this.modelValue&&this.defaultLabel&&this.values.push({label:this.defaultLabel,value:this.modelValue});else if(this.multiple&&this.defaultLabel instanceof Array&&this.modelValue.length===this.defaultLabel.length){const h=this.modelValue.map((f,v)=>({value:f,label:this.defaultLabel[v]}));setTimeout(()=>{this.values=h})}}},data(){return{prefixCls:zn,values:[],dropDownWidth:0,visible:!1,focusIndex:-1,isFocused:!1,query:"",initialLabel:this.label,hasMouseHoverHead:!1,slotOptions:[],caretPosition:-1,lastRemoteQuery:"",unchangedQuery:!0,hasExpectedValue:!1,isTyping:!1,preventRemoteCall:!1,filterQueryChange:!1,slotOptionsMap:new Map,isLocking:!1}},computed:{classes(){return[`${zn}`,{[`${zn}-visible`]:this.visible,[`${zn}-disabled`]:this.itemDisabled,[`${zn}-multiple`]:this.multiple,[`${zn}-single`]:!this.multiple,[`${zn}-${this.size}`]:!!this.size}]},dropdownCls(){return{[zn+"-dropdown-transfer"]:this.transfer,[zn+"-multiple"]:this.multiple&&this.transfer,"ivu-auto-complete":this.autoComplete,[this.transferClassName]:this.transferClassName}},selectionCls(){return{[`${zn}-selection`]:!this.autoComplete,[`${zn}-selection-focused`]:this.isFocused}},localeNotFoundText(){return typeof this.notFoundText>"u"?this.t("i.select.noMatch"):this.notFoundText},localeLoadingText(){return typeof this.loadingText>"u"?this.t("i.select.loading"):this.loadingText},showCreateItem(){let h=!1;const{allowCreate:f,query:v,slotOptions:E}=this;return f&&v!==""&&(h=!0,(E||[]).find(T=>T.proxy&&T.proxy.showLabel===v)&&(h=!1)),h},transitionName(){return this.placement==="bottom"?"slide-up":"slide-down"},dropVisible(){let h=!0;const f=this.slotOptions.length===0;return!this.loading&&this.remote&&this.query===""&&f&&(h=!1),this.autoComplete&&f&&(h=!1),this.visible&&h},showNotFoundLabel(){const{loading:h,remote:f,slotOptions:v,hideNotFound:E}=this,T=v||[],b=T.find(N=>N.proxy.isShow);return(T.length===0||!b)&&(!f||f&&!h)&&!E},publicValue(){return this.multiple?this.values.map(h=>h.value):(this.values[0]||{}).value},canBeCleared(){const h=this.hasMouseHoverHead,f=!this.multiple&&!this.itemDisabled&&this.clearable;return h&&f&&this.reset},selectTabindex(){return this.itemDisabled||this.filterable?-1:0},remote(){return typeof this.remoteMethod=="function"}},methods:{setQuery(h){if(h){this.onQueryChange(h);return}h===null&&(this.onQueryChange(""),this.values=[],this.lastRemoteQuery="")},clearSingleSelect(){this.multiple||this.$emit("update:modelValue",""),this.$emit("on-clear"),this.hideMenu(),this.clearable&&this.reset()},getOptionData(h){const f=this.slotOptions.find(({props:T})=>T.value===h);if(!f)return null;const{optionLabel:v,disabled:E}=f.proxy||{};return{value:h,label:v,disabled:E}},getInitialValue(){const{multiple:h,remote:f,modelValue:v}=this;let E=Array.isArray(v)?v:[v];if(!h&&(typeof E[0]>"u"||String(E[0]).trim()===""&&!Number.isFinite(E[0]))&&(E=[]),f&&!h&&v){const T=this.getOptionData(v);this.query=T?T.label:String(v)}return E.filter(T=>!!T||T===0)},validateOption({children:h,elm:f,propsData:v}){const E=v.value,T=v.label||"",b=f&&f.textContent||(h||[]).reduce((Y,W)=>{const Z=W.elm?W.elm.textContent:W.text;return`${Y} ${Z}`},"")||"",N=this.filterByLabel?[T].toString():[E,T,b].toString(),U=this.query.toLowerCase().trim();return N.toLowerCase().includes(U)},toggleMenu(h,f){if(this.itemDisabled)return!1;this.visible=typeof f<"u"?f:!this.visible,this.visible&&(this.dropDownWidth=this.$el.getBoundingClientRect().width,this.$refs.dropdown.handleOnUpdatePopper())},hideMenu(){this.toggleMenu(null,!1),this.isTyping=!1,setTimeout(()=>this.unchangedQuery=!0,Ml)},onClickOutside(h){if(this.visible){if(h.type==="mousedown"){h.preventDefault();return}if(this.transfer){const f=this.$refs.dropdown.$refs.drop;if(f===h.target||f.contains(h.target))return}if(this.filterable){const f=this.$el.querySelector('input[type="text"]');this.caretPosition=f.selectionStart,n.nextTick(()=>{const v=this.caretPosition===-1?f.value.length:this.caretPosition;f.setSelectionRange(v,v)})}this.autoComplete||h.stopPropagation(),h.preventDefault(),this.hideMenu(),this.isFocused=!0,this.$emit("on-clickoutside",h)}else this.caretPosition=-1,this.isFocused=!1},reset(){this.query="",this.focusIndex=-1,this.unchangedQuery=!0,this.values=[],this.filterQueryChange=!1},handleKeydown(h){const f=h.key||h.code,v=h.keyCode||h.which;if(!(f==="Backspace"||v===8))if(this.visible){if(h.preventDefault(),f==="Tab"&&h.stopPropagation(),f==="Escape"&&(h.stopPropagation(),this.hideMenu()),f==="ArrowUp"&&this.navigateOptions(-1),f==="ArrowDown"&&this.navigateOptions(1),f==="Enter"){if(this.focusIndex===-1)return this.hideMenu();const E=this.slotOptions[this.focusIndex];if(E){const T=this.getOptionData(E.props.value);this.onOptionClick(T)}else this.hideMenu()}}else["ArrowUp","ArrowDown"].includes(h.key)&&this.toggleMenu(null,!0)},navigateOptions(h){const f=this.slotOptions,v=f.length-1;if(v<0)return;let E=this.focusIndex+h;E<0&&(E=v),E>v&&(E=0);let T,b=null;if(h>0){T=-1;for(let N=0;N<f.length;N++){const{proxy:U}=f[N];if(!U.disabled&&(T=N),U.isShow&&b===null)b=N;else if(!U.isShow){T=N;continue}if(T>=E)break}}else{T=f.length;for(let N=v;N>=0;N--){const{proxy:U}=f[N];if(!U.disabled&&(T=N),U.isShow&&b===null)b=N;else if(!U.isShow){T=N;continue}if(T<=E)break}}E=f[T].proxy.isShow?T:b,this.focusIndex=E},onOptionClick(h){if(this.multiple?(this.remote?this.lastRemoteQuery=this.lastRemoteQuery||this.query:this.lastRemoteQuery="",this.values.find(({value:f})=>f===h.value)?this.values=this.values.filter(({value:f})=>f!==h.value):this.values=this.values.concat(h),this.isFocused=!0):(this.query=String(h.label).trim(),this.values=[h],this.lastRemoteQuery="",this.hideMenu()),this.focusIndex=this.slotOptions.findIndex(f=>f?f.props.value===h.value:!1),this.filterable){const f=this.$el.querySelector('input[type="text"]');this.autoComplete||n.nextTick(()=>f.focus())}this.$emit("on-select",h),this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.filterQueryChange=!1},Ml)},onQueryChange(h){if(this.isTyping=!0,h.length>0&&h!==this.query)if(s&&this.autoComplete){let f=document.hasFocus&&document.hasFocus()&&document.activeElement===this.$el.querySelector("input");this.visible=f}else this.visible=!0;this.query=h,this.unchangedQuery=this.visible,this.filterQueryChange=!0},toggleHeaderFocus({type:h}){this.itemDisabled||(this.isFocused=h==="focus")},checkUpdateStatus(){this.getInitialValue().length>0&&this.slotOptions.length===0&&(this.hasExpectedValue=!0)},handleCreateItem(){if(this.allowCreate&&this.query!==""&&this.showCreateItem){const h=this.query;this.$emit("on-create",h),this.query="";const f={value:h,label:h,tag:void 0};this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.onOptionClick(f)})}},handleOnSelectSelected(h){this.onOptionClick(h)},focus(){this.filterable&&(this.$refs.selectHead.$refs.input.focus(),this.toggleMenu())},lazyUpdateValue(h){const{getInitialValue:f,isLocking:v,defaultLabel:E,remote:T,modelValue:b,values:N}=this,U=!!(E&&E.length);(b&&b.length||N.length||U)&&T&&h||v||(this.isLocking=!0,n.nextTick(()=>{this.values=f().map(this.getOptionData).filter(Boolean),this.isLocking=!1}))}},watch:{modelValue(h){const{publicValue:f,values:v}=this;this.checkUpdateStatus(),h===""?(this.values=[],this.query=""):Ro(h,f,v)&&(this.lazyUpdateValue(),this.multiple||this.handleFormItemChange("change",this.publicValue))},values(h,f){const v=JSON.stringify(h),E=JSON.stringify(f);let T=this.publicValue;if(v!==E&&T!==this.modelValue){let b=this.publicValue;this.labelInValue&&(this.multiple?b=this.values:b=this.values[0]),(Array.isArray(T)&&!T.length&&this.modelValue===null||T===void 0&&this.modelValue===null)&&(T=null),this.$emit("update:modelValue",T),this.$emit("on-change",b),this.handleFormItemChange("change",b)}},query(h){this.focusIndex=-1,this.$emit("on-query-change",h);const{remoteMethod:f,lastRemoteQuery:v}=this,E=f&&h!==""&&(h!==v||!v)&&!this.preventRemoteCall;if(this.preventRemoteCall=!1,E){const T=this.remoteMethod(h);this.initialLabel="",T&&T.then&&T.then(b=>{b&&(this.options=b)})}this.visible&&this.$refs.dropdown.handleOnUpdatePopper(),h!==""&&this.remote&&(this.lastRemoteQuery=h)},isFocused(h){(this.filterable?this.$el.querySelector('input[type="text"]'):this.$el)[this.isFocused?"focus":"blur"]();const[f]=this.values;if(f&&this.filterable&&!this.multiple&&!h){const v=String(f.label||f.value).trim();v&&this.query!==v&&(this.preventRemoteCall=!0,this.query=v)}},focusIndex(h){if(!(h<0||this.autoComplete)&&this.slotOptions[h]){const f=this.slotOptions[h].proxy.$el,v=this.$refs.dropdown.$refs.drop;let E=f.getBoundingClientRect().bottom-v.getBoundingClientRect().bottom,T=f.getBoundingClientRect().top-v.getBoundingClientRect().top;E>0&&(v.scrollTop+=E),T<0&&(v.scrollTop+=T)}},dropVisible(h){h?this.$refs.dropdown.handleOnUpdatePopper():this.$refs.dropdown.handleOnDestroyPopper()},visible(h){this.$emit("on-open-change",h)}}},Di=["tabindex"],im=["name","value"];function Zn(h,f,v,E,T,b){const N=n.resolveComponent("select-head"),U=n.resolveComponent("Icon"),Y=n.resolveComponent("Drop"),W=n.resolveDirective("click-outside");return n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.createElementVNode("div",{ref:"reference",class:n.normalizeClass(b.selectionCls),tabindex:b.selectTabindex,onBlur:f[2]||(f[2]=(...Z)=>b.toggleHeaderFocus&&b.toggleHeaderFocus(...Z)),onFocus:f[3]||(f[3]=(...Z)=>b.toggleHeaderFocus&&b.toggleHeaderFocus(...Z)),onClick:f[4]||(f[4]=(...Z)=>b.toggleMenu&&b.toggleMenu(...Z)),onKeydown:[f[5]||(f[5]=n.withKeys((...Z)=>b.handleKeydown&&b.handleKeydown(...Z),["esc"])),f[6]||(f[6]=n.withKeys((...Z)=>b.handleKeydown&&b.handleKeydown(...Z),["enter"])),f[7]||(f[7]=n.withKeys(n.withModifiers((...Z)=>b.handleKeydown&&b.handleKeydown(...Z),["prevent"]),["up"])),f[8]||(f[8]=n.withKeys(n.withModifiers((...Z)=>b.handleKeydown&&b.handleKeydown(...Z),["prevent"]),["down"])),f[9]||(f[9]=n.withKeys((...Z)=>b.handleKeydown&&b.handleKeydown(...Z),["tab"])),f[10]||(f[10]=n.withKeys((...Z)=>b.handleKeydown&&b.handleKeydown(...Z),["delete"]))],onMouseenter:f[11]||(f[11]=Z=>T.hasMouseHoverHead=!0),onMouseleave:f[12]||(f[12]=Z=>T.hasMouseHoverHead=!1)},[n.renderSlot(h.$slots,"input",{},()=>[n.createElementVNode("input",{type:"hidden",name:v.name,value:b.publicValue},null,8,im),n.createVNode(N,{ref:"selectHead",filterable:v.filterable,multiple:v.multiple,values:T.values,clearable:b.canBeCleared,prefix:v.prefix,disabled:h.itemDisabled,remote:b.remote,"input-element-id":v.elementId,"initial-label":T.initialLabel,placeholder:v.placeholder,"query-prop":T.query,"max-tag-count":v.maxTagCount,"max-tag-placeholder":v.maxTagPlaceholder,"allow-create":v.allowCreate,"show-create-item":b.showCreateItem,onOnQueryChange:b.onQueryChange,onOnInputFocus:f[0]||(f[0]=Z=>T.isFocused=!0),onOnInputBlur:f[1]||(f[1]=Z=>T.isFocused=!1),onOnClear:b.clearSingleSelect,onOnEnter:b.handleCreateItem},{prefix:n.withCtx(()=>[n.renderSlot(h.$slots,"prefix")]),_:3},8,["filterable","multiple","values","clearable","prefix","disabled","remote","input-element-id","initial-label","placeholder","query-prop","max-tag-count","max-tag-placeholder","allow-create","show-create-item","onOnQueryChange","onOnClear","onOnEnter"])])],42,Di),n.createVNode(Y,{ref:"dropdown",classes:b.dropdownCls,visible:b.dropVisible,placement:v.placement,eventsEnabled:v.eventsEnabled,transfer:v.transfer,"transition-name":"transition-drop"},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls+"-not-found"])},[n.createElementVNode("li",null,n.toDisplayString(b.localeNotFoundText),1)],2),[[n.vShow,b.showNotFoundLabel&&!v.allowCreate]]),!b.remote||b.remote&&!v.loading?(n.openBlock(),n.createElementBlock("ul",{key:0,class:n.normalizeClass(T.prefixCls+"-dropdown-list")},[b.showCreateItem?(n.openBlock(),n.createElementBlock("li",{key:0,class:n.normalizeClass(T.prefixCls+"-item"),onClick:f[13]||(f[13]=(...Z)=>b.handleCreateItem&&b.handleCreateItem(...Z))},[n.createTextVNode(n.toDisplayString(T.query)+" ",1),n.createVNode(U,{type:"md-return-left",class:n.normalizeClass(T.prefixCls+"-item-enter")},null,8,["class"])],2)):n.createCommentVNode("",!0),n.renderSlot(h.$slots,"default")],2)):(n.openBlock(),n.createElementBlock("ul",{key:1,class:n.normalizeClass(T.prefixCls+"-dropdown-list")},[b.showCreateItem?(n.openBlock(),n.createElementBlock("li",{key:0,class:n.normalizeClass(T.prefixCls+"-item"),onClick:f[14]||(f[14]=(...Z)=>b.handleCreateItem&&b.handleCreateItem(...Z))},[n.createTextVNode(n.toDisplayString(T.query)+" ",1),n.createVNode(U,{type:"md-return-left",class:n.normalizeClass(T.prefixCls+"-item-enter")},null,8,["class"])],2)):n.createCommentVNode("",!0)],2)),n.withDirectives(n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls+"-loading"])},n.toDisplayString(b.localeLoadingText),3),[[n.vShow,v.loading]])]),_:3},8,["classes","visible","placement","eventsEnabled","transfer"])],2)),[[W,b.onClickOutside,v.capture],[W,b.onClickOutside,v.capture,{mousedown:!0}],[W,b.onClickOutside,v.capture,{touchstart:!0}]])}var Bo=l(bn,[["render",Zn]]);const nm="ivu-select-item",rm={name:"iOption",componentName:"select-item",mixins:[Ui],emits:["on-select-selected"],inject:{SelectInstance:{default:null},OptionGroupInstance:{default:null}},props:{value:{type:[String,Number],required:!0},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},tag:{type:[String,Number]}},data(){return{searchLabel:"",autoComplete:!1,id:ie(6),instance:null}},computed:{classes(){return[`${nm}`,{[`${nm}-disabled`]:this.itemDisabled,[`${nm}-selected`]:this.selected&&!this.autoComplete,[`${nm}-focus`]:this.isFocused}]},showLabel(){return this.label?this.label:this.value},optionLabel(){return this.label||this.$el&&this.$el.textContent},isFocused(){const h=this.SelectInstance;let f=h.slotOptions||[];const v=h.focusIndex,E=h.$slots.default;if(this.autoComplete&&E){f=[];let b=E();for(;b.length>0;){const N=b.shift();N.type&&typeof N.type=="object"&&N.type.name==="iOption"?f.push(N):Array.isArray(N.children)&&(b=b.concat(N.children))}}const T=f[v];return T&&T.props&&T.props.value===this.value},isShow(){const h=this.SelectInstance,f=h.filterable,v=h.query.toLowerCase().trim(),E=h.filterByLabel,T=h.slotOptionsMap,{props:b}=T.get(this.value)||{props:{}},N=this.label||this.$el&&this.$el.textContent;let U=(N||b.value||"").toLowerCase();E&&(U=(N||"").toLowerCase());const Y=U.includes(v);return!f||f&&(Y||!h.filterQueryChange)||D(h.remoteMethod)==="function"},selected(){return(this.SelectInstance.values||[]).find(h=>h.value===this.value)}},methods:{select(){if(this.itemDisabled)return!1;this.SelectInstance.handleOnSelectSelected({value:this.value,label:this.optionLabel,tag:this.tag})},addOption(){const h=this.SelectInstance,f=this.OptionGroupInstance,{id:v,value:E,instance:T}=this;if(f&&f.optionList.push({...T,id:v,tag:"option"}),h){h.slotOptions.push({...T,id:v,tag:"option"}),h.slotOptionsMap.set(E,T);const{modelValue:b}=h;(b&&b.length||D(b)==="number")&&h.lazyUpdateValue(!0)}},removeOption(){const h=this.OptionGroupInstance,f=this.SelectInstance,{id:v,value:E}=this;if(h){const T=h.optionList.findIndex(b=>b.id===v);T!==-1&&h.optionList.splice(T,1)}if(f){const T=this.SelectInstance,b=T.slotOptions.findIndex(N=>N.id===v);b!==-1&&T.slotOptions.splice(b,1),T.slotOptionsMap.has(E)&&T.slotOptionsMap.delete(E)}}},created(){this.instance=n.getCurrentInstance()},mounted(){this.addOption();const h=L(this,"iSelect");h&&(this.autoComplete=h.autoComplete)},beforeUnmount(){n.nextTick(()=>{this.removeOption(),this.instance=null})}};function X_(h,f,v,E,T,b){return n.withDirectives((n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.classes),onClick:f[0]||(f[0]=n.withModifiers((...N)=>b.select&&b.select(...N),["stop"])),onMousedown:f[1]||(f[1]=n.withModifiers(()=>{},["prevent"]))},[n.renderSlot(h.$slots,"default",{},()=>[n.createTextVNode(n.toDisplayString(b.showLabel),1)])],34)),[[n.vShow,b.isShow]])}var Cr=l(rm,[["render",X_]]);const gc=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,W_=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let ho={},ra;function wk(h,f=!1){if(!s)return;const v=h.getAttribute("id")||h.getAttribute("data-reactid")||h.getAttribute("name");if(f&&ho[v])return ho[v];const E=window.getComputedStyle(h),T=E.getPropertyValue("box-sizing")||E.getPropertyValue("-moz-box-sizing")||E.getPropertyValue("-webkit-box-sizing"),b=parseFloat(E.getPropertyValue("padding-bottom"))+parseFloat(E.getPropertyValue("padding-top")),N=parseFloat(E.getPropertyValue("border-bottom-width"))+parseFloat(E.getPropertyValue("border-top-width")),U={sizingStyle:W_.map(Y=>`${Y}:${E.getPropertyValue(Y)}`).join(";"),paddingSize:b,borderSize:N,boxSizing:T};return f&&v&&(ho[v]=U),U}function SS(h,f=null,v=null,E=!1){s&&!ra&&(ra=document.createElement("textarea"),document.body.appendChild(ra)),h.getAttribute("wrap")?ra.setAttribute("wrap",h.getAttribute("wrap")):ra.removeAttribute("wrap");let{paddingSize:T,borderSize:b,boxSizing:N,sizingStyle:U}=wk(h,E);ra.setAttribute("style",`${U};${gc}`),ra.value=h.value||h.placeholder||"";let Y=Number.MIN_SAFE_INTEGER,W=Number.MAX_SAFE_INTEGER,Z=ra.scrollHeight,fe;if(N==="border-box"?Z=Z+b:N==="content-box"&&(Z=Z-T),f!==null||v!==null){ra.value=" ";let Te=ra.scrollHeight-T;f!==null&&(Y=Te*f,N==="border-box"&&(Y=Y+T+b),Z=Math.max(Y,Z)),v!==null&&(W=Te*v,N==="border-box"&&(W=W+T+b),fe=Z>W?"":"hidden",Z=Math.min(W,Z))}return v||(fe="hidden"),{height:`${Z}px`,minHeight:`${Y}px`,maxHeight:`${W}px`,overflowY:fe}}const Kr="ivu-input",whe={name:"Input",mixins:[Ui],emits:["on-enter","on-search","on-keydown","on-keypress","on-keyup","on-click","on-focus","on-blur","on-change","on-input-change","on-clear","update:modelValue"],props:{type:{validator(h){return S(h,["text","textarea","password","url","email","date","number","tel"])},default:"text"},modelValue:{type:[String,Number],default:""},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator(h){return S(h,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{currentValue:this.modelValue,prefixCls:Kr,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType(){let h=this.type;return h==="password"&&this.password&&this.showPassword&&(h="text"),h},prepend(){let h=!1;return this.type!=="textarea"&&(h=this.$slots.prepend!==void 0),h},append(){let h=!1;return this.type!=="textarea"&&(h=this.$slots.append!==void 0),h},showPrefix(){let h=!1;return this.type!=="textarea"&&(h=this.prefix!==""||this.$slots.prefix!==void 0),h},showSuffix(){let h=!1;return this.type!=="textarea"&&(h=this.suffix!==""||this.$slots.suffix!==void 0),h},wrapClasses(){return[`${Kr}-wrapper`,{[`${Kr}-wrapper-${this.size}`]:!!this.size,[`${Kr}-type-${this.type}`]:this.type,[`${Kr}-group`]:this.prepend||this.append||this.search&&this.enterButton,[`${Kr}-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,[`${Kr}-group-with-prepend`]:this.prepend,[`${Kr}-group-with-append`]:this.append||this.search&&this.enterButton,[`${Kr}-hide-icon`]:this.append,[`${Kr}-with-search`]:this.search&&this.enterButton,[`${Kr}-wrapper-disabled`]:this.itemDisabled}]},inputClasses(){return[`${Kr}`,{[`${Kr}-${this.size}`]:!!this.size,[`${Kr}-disabled`]:this.itemDisabled,[`${Kr}-no-border`]:!this.border,[`${Kr}-with-prefix`]:this.showPrefix,[`${Kr}-with-suffix`]:this.showSuffix||this.search&&this.enterButton===!1}]},textareaClasses(){return[`${Kr}`,{[`${Kr}-disabled`]:this.itemDisabled,[`${Kr}-no-border`]:!this.border}]},upperLimit(){return this.maxlength},textLength(){return typeof this.modelValue=="number"?String(this.modelValue).length:(this.modelValue||"").length},clearableStyles(){const h={};let f=this.clearableIconOffset;return f&&(h.transform=`translateX(-${f}px)`),h}},methods:{handleEnter(h){this.$emit("on-enter",h),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(h){this.$emit("on-keydown",h)},handleKeypress(h){this.$emit("on-keypress",h)},handleKeyup(h){this.$emit("on-keyup",h)},handleIconClick(h){this.$emit("on-click",h)},handleFocus(h){this.$emit("on-focus",h)},handleBlur(h){this.$emit("on-blur",h),L(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},handleComposition(h){h.type==="compositionstart"&&(this.isOnComposition=!0),h.type==="compositionend"&&(this.isOnComposition=!1,this.handleInput(h))},handleInput(h){if(this.isOnComposition)return;let f=h.target.value;this.number&&f!==""&&(f=Number.isNaN(Number(f))?f:Number(f)),this.$emit("update:modelValue",f),this.setCurrentValue(f),this.$emit("on-change",h)},handleChange(h){this.$emit("on-input-change",h)},setCurrentValue(h){h!==this.currentValue&&(n.nextTick(()=>{this.resizeTextarea()}),this.currentValue=h,L(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("change",h))},resizeTextarea(){const h=this.autosize;if(!h||this.type!=="textarea")return!1;const f=h.minRows,v=h.maxRows;this.textareaStyles=SS(this.$refs.textarea,f,v)},focus(h){const f=this.type==="textarea"?this.$refs.textarea:this.$refs.input;f.focus(h);const{cursor:v}=h||{};if(v){const E=f.value.length;switch(v){case"start":f.setSelectionRange(0,0);break;case"end":f.setSelectionRange(E,E);break;default:f.setSelectionRange(0,E)}}},blur(){this.type==="textarea"?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){const h={target:{value:""}};this.$emit("update:modelValue",""),this.setCurrentValue(""),this.$emit("on-change",h),this.$emit("on-clear")},handleSearch(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword(){if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();const h=this.currentValue.length;setTimeout(()=>{this.$refs.input.setSelectionRange(h,h)},0)},handleCalcIconOffset(){const h=this.$el.querySelectorAll(".ivu-input-group-append")[0];h?this.clearableIconOffset=h.offsetWidth:this.clearableIconOffset=0}},watch:{modelValue(h){this.setCurrentValue(h)},type(){n.nextTick(this.handleCalcIconOffset)}},mounted(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated(){n.nextTick(this.handleCalcIconOffset)}},Ohe={key:4,class:"ivu-input-suffix"},She={key:5,class:"ivu-input-word-count"},Che={key:0,class:"ivu-icon ivu-icon-ios-eye-outline"},The={key:1,class:"ivu-icon ivu-icon-ios-eye-off-outline"},Ahe=["id","autocomplete","spellcheck","type","placeholder","disabled","maxlength","readonly","name","value","number","autofocus"],Ehe={key:0,class:"ivu-icon ivu-icon-ios-search"},Mhe={key:9,class:"ivu-input-prefix"},Phe=["id","wrap","autocomplete","spellcheck","placeholder","disabled","rows","maxlength","readonly","name","value","autofocus"],khe={key:0,class:"ivu-input-word-count"};function Ihe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[v.type!=="textarea"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[b.prepend?n.withDirectives((n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-group-prepend"])},[n.renderSlot(h.$slots,"prepend")],2)),[[n.vShow,T.slotReady]]):n.createCommentVNode("",!0),v.clearable&&T.currentValue&&!h.itemDisabled?(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(["ivu-icon",["ivu-icon-ios-close-circle",T.prefixCls+"-icon",T.prefixCls+"-icon-clear",T.prefixCls+"-icon-normal"]]),onClick:f[0]||(f[0]=(...N)=>b.handleClear&&b.handleClear(...N)),style:n.normalizeStyle(b.clearableStyles)},null,6)):v.icon?(n.openBlock(),n.createElementBlock("i",{key:2,class:n.normalizeClass(["ivu-icon",["ivu-icon-"+v.icon,T.prefixCls+"-icon",T.prefixCls+"-icon-normal"]]),onClick:f[1]||(f[1]=(...N)=>b.handleIconClick&&b.handleIconClick(...N))},null,2)):v.search&&v.enterButton===!1?(n.openBlock(),n.createElementBlock("i",{key:3,class:n.normalizeClass(["ivu-icon ivu-icon-ios-search",[T.prefixCls+"-icon",T.prefixCls+"-icon-normal",T.prefixCls+"-search-icon"]]),onClick:f[2]||(f[2]=(...N)=>b.handleSearch&&b.handleSearch(...N))},null,2)):b.showSuffix?(n.openBlock(),n.createElementBlock("span",Ohe,[n.renderSlot(h.$slots,"suffix",{},()=>[v.suffix?(n.openBlock(),n.createElementBlock("i",{key:0,class:n.normalizeClass(["ivu-icon",["ivu-icon-"+v.suffix]])},null,2)):n.createCommentVNode("",!0)])])):v.showWordLimit?(n.openBlock(),n.createElementBlock("span",She,n.toDisplayString(b.textLength)+"/"+n.toDisplayString(b.upperLimit),1)):v.password?(n.openBlock(),n.createElementBlock("span",{key:6,class:"ivu-input-suffix",onClick:f[3]||(f[3]=(...N)=>b.handleToggleShowPassword&&b.handleToggleShowPassword(...N))},[T.showPassword?(n.openBlock(),n.createElementBlock("i",Che)):(n.openBlock(),n.createElementBlock("i",The))])):n.createCommentVNode("",!0),n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[v.icon?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("i",{key:0,class:n.normalizeClass(["ivu-icon ivu-icon-ios-loading ivu-load-loop",[T.prefixCls+"-icon",T.prefixCls+"-icon-validate"]])},null,2))]),_:1}),n.createElementVNode("input",{id:v.elementId,autocomplete:v.autocomplete,spellcheck:v.spellcheck,ref:"input",type:b.currentType,class:n.normalizeClass(b.inputClasses),placeholder:v.placeholder,disabled:h.itemDisabled,maxlength:v.maxlength,readonly:v.readonly,name:v.name,value:T.currentValue,number:v.number,autofocus:v.autofocus,onKeyup:[f[4]||(f[4]=n.withKeys((...N)=>b.handleEnter&&b.handleEnter(...N),["enter"])),f[5]||(f[5]=(...N)=>b.handleKeyup&&b.handleKeyup(...N))],onKeypress:f[6]||(f[6]=(...N)=>b.handleKeypress&&b.handleKeypress(...N)),onKeydown:f[7]||(f[7]=(...N)=>b.handleKeydown&&b.handleKeydown(...N)),onFocus:f[8]||(f[8]=(...N)=>b.handleFocus&&b.handleFocus(...N)),onBlur:f[9]||(f[9]=(...N)=>b.handleBlur&&b.handleBlur(...N)),onCompositionstart:f[10]||(f[10]=(...N)=>b.handleComposition&&b.handleComposition(...N)),onCompositionupdate:f[11]||(f[11]=(...N)=>b.handleComposition&&b.handleComposition(...N)),onCompositionend:f[12]||(f[12]=(...N)=>b.handleComposition&&b.handleComposition(...N)),onInput:f[13]||(f[13]=(...N)=>b.handleInput&&b.handleInput(...N)),onChange:f[14]||(f[14]=(...N)=>b.handleChange&&b.handleChange(...N))},null,42,Ahe),b.append?n.withDirectives((n.openBlock(),n.createElementBlock("div",{key:7,class:n.normalizeClass([T.prefixCls+"-group-append"])},[n.renderSlot(h.$slots,"append")],2)),[[n.vShow,T.slotReady]]):v.search&&v.enterButton?(n.openBlock(),n.createElementBlock("div",{key:8,class:n.normalizeClass([T.prefixCls+"-group-append",T.prefixCls+"-search"]),onClick:f[15]||(f[15]=(...N)=>b.handleSearch&&b.handleSearch(...N))},[v.enterButton===!0?(n.openBlock(),n.createElementBlock("i",Ehe)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(v.enterButton),1)],64))],2)):b.showPrefix?(n.openBlock(),n.createElementBlock("span",Mhe,[n.renderSlot(h.$slots,"prefix",{},()=>[v.prefix?(n.openBlock(),n.createElementBlock("i",{key:0,class:n.normalizeClass(["ivu-icon",["ivu-icon-"+v.prefix]])},null,2)):n.createCommentVNode("",!0)])])):n.createCommentVNode("",!0)],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createElementVNode("textarea",{id:v.elementId,wrap:v.wrap,autocomplete:v.autocomplete,spellcheck:v.spellcheck,ref:"textarea",class:n.normalizeClass(b.textareaClasses),style:n.normalizeStyle(T.textareaStyles),placeholder:v.placeholder,disabled:h.itemDisabled,rows:v.rows,maxlength:v.maxlength,readonly:v.readonly,name:v.name,value:T.currentValue,autofocus:v.autofocus,onKeyup:[f[16]||(f[16]=n.withKeys((...N)=>b.handleEnter&&b.handleEnter(...N),["enter"])),f[17]||(f[17]=(...N)=>b.handleKeyup&&b.handleKeyup(...N))],onKeypress:f[18]||(f[18]=(...N)=>b.handleKeypress&&b.handleKeypress(...N)),onKeydown:f[19]||(f[19]=(...N)=>b.handleKeydown&&b.handleKeydown(...N)),onFocus:f[20]||(f[20]=(...N)=>b.handleFocus&&b.handleFocus(...N)),onBlur:f[21]||(f[21]=(...N)=>b.handleBlur&&b.handleBlur(...N)),onCompositionstart:f[22]||(f[22]=(...N)=>b.handleComposition&&b.handleComposition(...N)),onCompositionupdate:f[23]||(f[23]=(...N)=>b.handleComposition&&b.handleComposition(...N)),onCompositionend:f[24]||(f[24]=(...N)=>b.handleComposition&&b.handleComposition(...N)),onInput:f[25]||(f[25]=(...N)=>b.handleInput&&b.handleInput(...N))},`
            `,46,Phe),v.showWordLimit?(n.openBlock(),n.createElementBlock("span",khe,n.toDisplayString(b.textLength)+"/"+n.toDisplayString(b.upperLimit),1)):n.createCommentVNode("",!0)],64))],2)}var Pl=l(whe,[["render",Ihe]]);const Rhe={name:"AutoComplete",mixins:[Ui],components:{iSelect:Bo,iOption:Cr,iInput:Pl},emits:["update:modelValue","on-change","on-search","on-select","on-focus","on-blur","on-clear"],props:{modelValue:{type:[String,Number],default:""},label:{type:[String,Number],default:""},data:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},icon:{type:String},filterMethod:{type:[Function,Boolean],default:!1},placement:{validator(h){return S(h,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},transferClassName:{type:String},capture:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return h.$VIEWUI?h.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,disableEmitChange:!1}},computed:{inputIcon(){let h="";return this.clearable&&this.currentValue&&!this.disabled?h="ios-close-circle":this.icon&&(h=this.icon),h},filteredData(){return this.filterMethod?this.data.filter(h=>this.filterMethod(this.currentValue,h)):this.data}},watch:{modelValue(h){this.currentValue!==h&&(this.disableEmitChange=!0),this.currentValue=h},currentValue(h){if(this.$refs.select.setQuery(h),this.$emit("update:modelValue",h),this.disableEmitChange){this.disableEmitChange=!1;return}this.$emit("on-change",h),this.handleFormItemChange("change",h)}},methods:{remoteMethod(h){this.$emit("on-search",h)},handleSelect(h){const f=h.value;f!=null&&(this.currentValue=f,this.$refs.input.blur(),this.$emit("on-select",f))},handleFocus(h){this.$emit("on-focus",h)},handleBlur(h){this.$emit("on-blur",h)},handleClear(){!this.clearable||(this.currentValue="",this.$refs.select.reset(),this.$emit("on-clear"))},handleClickOutside(){n.nextTick(()=>{this.$refs.input.blur()})}}};function Bhe(h,f,v,E,T,b){const N=n.resolveComponent("i-input"),U=n.resolveComponent("i-option"),Y=n.resolveComponent("i-select");return n.openBlock(),n.createBlock(Y,{ref:"select",class:"ivu-auto-complete",label:v.label,disabled:h.itemDisabled,clearable:v.clearable,placeholder:v.placeholder,size:v.size,placement:v.placement,"model-value":T.currentValue,"transfer-class-name":v.transferClassName,filterable:"",remote:"","auto-complete":"","remote-method":b.remoteMethod,onOnSelect:b.handleSelect,onOnClickoutside:b.handleClickOutside,transfer:v.transfer,capture:v.capture,eventsEnabled:v.eventsEnabled},{input:n.withCtx(()=>[n.renderSlot(h.$slots,"input",{},()=>[n.createVNode(N,{"element-id":v.elementId,ref:"input",modelValue:T.currentValue,"onUpdate:modelValue":f[0]||(f[0]=W=>T.currentValue=W),name:v.name,placeholder:v.placeholder,disabled:h.itemDisabled,size:v.size,icon:b.inputIcon,onOnClick:b.handleClear,onOnFocus:b.handleFocus,onOnBlur:b.handleBlur},null,8,["element-id","modelValue","name","placeholder","disabled","size","icon","onOnClick","onOnFocus","onOnBlur"])])]),default:n.withCtx(()=>[n.renderSlot(h.$slots,"default",{},()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.filteredData,W=>(n.openBlock(),n.createBlock(U,{value:W,key:W},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(W),1)]),_:2},1032,["value"]))),128))])]),_:3},8,["label","disabled","clearable","placeholder","size","placement","model-value","transfer-class-name","remote-method","onOnSelect","onOnClickoutside","transfer","capture","eventsEnabled"])}var $F=l(Rhe,[["render",Bhe]]);const T0="ivu-avatar",UF=["small","large","default"],Dhe={name:"Avatar",components:{Icon:O},emits:["on-error"],props:{shape:{validator(h){return S(h,["circle","square"])},default:"circle"},size:{type:[String,Number],default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},src:{type:String},icon:{type:String},customIcon:{type:String,default:""}},data(){return{prefixCls:T0,scale:1,childrenWidth:0,isSlotShow:!1,slotTemp:null}},computed:{classes(){return[`${T0}`,`${T0}-${this.shape}`,{[`${T0}-image`]:!!this.src,[`${T0}-icon`]:!!this.icon||!!this.customIcon,[`${T0}-${this.size}`]:S(this.size,UF)}]},styles(){let h={};return this.size&&!S(this.size,UF)&&(h.width=`${this.size}px`,h.height=`${this.size}px`,h.lineHeight=`${this.size}px`,h.fontSize=`${this.size/2}px`),h},childrenStyle(){let h={};return this.isSlotShow&&(h={msTransform:`scale(${this.scale})`,WebkitTransform:`scale(${this.scale})`,transform:`scale(${this.scale})`,position:"absolute",display:"inline-block",left:`calc(50% - ${Math.round(this.childrenWidth/2)}px)`}),h}},watch:{size(h,f){h!==f&&this.setScale()}},methods:{setScale(){if(this.isSlotShow=!this.src&&!this.icon,this.$refs.children){this.childrenWidth=this.$refs.children.offsetWidth;const h=this.$el.getBoundingClientRect().width;h-8<this.childrenWidth?this.scale=(h-8)/this.childrenWidth:this.scale=1}},handleError(h){this.$emit("on-error",h)}},beforeCreate(){this.slotTemp=this.$slots.default?this.$slots.default():null},mounted(){this.setScale()},updated(){const h=this.$slots.default?this.$slots.default():null;h&&h!==this.slotTemp&&this.setScale()}},Lhe=["src"];function Nhe(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("span",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.styles)},[v.src?(n.openBlock(),n.createElementBlock("img",{key:0,src:v.src,onError:f[0]||(f[0]=(...U)=>b.handleError&&b.handleError(...U))},null,40,Lhe)):v.icon||v.customIcon?(n.openBlock(),n.createBlock(N,{key:1,type:v.icon,custom:v.customIcon},null,8,["type","custom"])):(n.openBlock(),n.createElementBlock("span",{key:2,ref:"children",class:n.normalizeClass([T.prefixCls+"-string"]),style:n.normalizeStyle(b.childrenStyle)},[n.renderSlot(h.$slots,"default")],6))],6)}var G_=l(Dhe,[["render",Nhe]]),zF={emits:["on-popper-show","on-popper-hide","created","update:modelValue"],props:{eventsEnabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:Object,popper:Object,offset:{default:0},modelValue:{type:Boolean,default:!1},transition:String,options:{type:Object,default(){return{modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:"window"}}}}}},data(){return{visible:this.modelValue}},watch:{modelValue:{immediate:!0,handler(h){this.visible=h,this.$emit("update:modelValue",h)}},visible(h){h?(this.handleIndexIncrease&&this.handleIndexIncrease(),this.updatePopper(),this.$emit("on-popper-show")):this.$emit("on-popper-hide"),this.$emit("update:modelValue",h)}},methods:{createPopper(){if(!/^(top|bottom|left|right)(-start|-end)?$/g.test(this.placement))return;const h=this.options,f=this.popper||this.$refs.popper,v=this.reference||this.$refs.reference;!f||!v||(this.popperJS&&this.popperJS.hasOwnProperty("destroy")&&this.popperJS.destroy(),h.eventsEnabled=this.eventsEnabled,h.placement=this.placement,h.modifiers.offset||(h.modifiers.offset={}),h.modifiers.offset.offset=this.offset,h.onCreate=()=>{n.nextTick(this.updatePopper),this.$emit("created",this)},this.popperJS=new ge(v,f,h))},updatePopper(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy(){this.visible||(this.popperJS.destroy(),this.popperJS=null)}},updated(){n.nextTick(()=>this.updatePopper())},beforeUnmount(){this.popperJS&&this.popperJS.destroy()}};const A0="ivu-tooltip",Vhe={name:"Tooltip",mixins:[zF],props:{placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},content:{type:[String,Number],default:""},delay:{type:Number,default:100},disabled:{type:Boolean,default:!1},controlled:{type:Boolean,default:!1},always:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},theme:{validator(h){return S(h,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number]},transferClassName:{type:String}},data(){return{prefixCls:A0,tIndex:this.handleGetIndex()}},computed:{innerStyles(){const h={};return this.maxWidth&&(h["max-width"]=`${this.maxWidth}px`),h},innerClasses(){return[`${A0}-inner`,{[`${A0}-inner-with-width`]:!!this.maxWidth}]},dropStyles(){let h={};return this.transfer&&(h["z-index"]=1060+this.tIndex),h},dropdownCls(){return[`${A0}-popper`,`${A0}-${this.theme}`,{[A0+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]}},watch:{content(){this.updatePopper()}},methods:{handleShowPopper(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!0},this.delay),this.tIndex=this.handleGetIndex()},handleClosePopper(){this.timeout&&(clearTimeout(this.timeout),this.controlled||(this.timeout=setTimeout(()=>{this.visible=!1},100)))},handleGetIndex(){return je(),Ae}},mounted(){this.always&&this.updatePopper()}};function Fhe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls]),onMouseenter:f[2]||(f[2]=(...N)=>b.handleShowPopper&&b.handleShowPopper(...N)),onMouseleave:f[3]||(f[3]=(...N)=>b.handleClosePopper&&b.handleClosePopper(...N))},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-rel"]),ref:"reference"},[n.renderSlot(h.$slots,"default")],2),(n.openBlock(),n.createBlock(n.Teleport,{to:"body",disabled:!v.transfer},[n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",{ref:"popper",class:n.normalizeClass(b.dropdownCls),style:n.normalizeStyle(b.dropStyles),onMouseenter:f[0]||(f[0]=(...N)=>b.handleShowPopper&&b.handleShowPopper(...N)),onMouseleave:f[1]||(f[1]=(...N)=>b.handleClosePopper&&b.handleClosePopper(...N))},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-arrow"])},null,2),n.createElementVNode("div",{class:n.normalizeClass(b.innerClasses),style:n.normalizeStyle(b.innerStyles)},[n.renderSlot(h.$slots,"content",{},()=>[n.createTextVNode(n.toDisplayString(v.content),1)])],6)],2)],38),[[n.vShow,!v.disabled&&(h.visible||v.always)]])]),_:3})],8,["disabled"]))],34)}var Su=l(Vhe,[["render",Fhe]]);const $he={name:"AvatarList",components:{Avatar:G_,Tooltip:Su},props:{list:{type:Array,default(){return[]}},shape:{validator(h){return S(h,["circle","square"])},default:"circle"},size:{validator(h){return S(h,["small","large","default"])},default:"default"},excessStyle:{type:Object,default(){return{}}},max:{type:Number},tooltip:{type:Boolean,default:!0},placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}}},computed:{currentList(){const h=this.list.length,f=this.max;return h<=f?[...this.list]:[...this.list].slice(0,f)}}},Uhe={key:0,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"},zhe={key:1,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"};function Xhe(h,f,v,E,T,b){const N=n.resolveComponent("Avatar"),U=n.resolveComponent("Tooltip");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-avatar-list","ivu-avatar-list-"+v.size])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.currentList,(Y,W)=>(n.openBlock(),n.createElementBlock("div",{class:"ivu-avatar-list-item",key:W},[v.tooltip&&Y.tip?(n.openBlock(),n.createBlock(U,{key:0,content:Y.tip,placement:v.placement,transfer:v.transfer},{default:n.withCtx(()=>[n.createVNode(N,{src:Y.src,size:v.size,shape:v.shape},null,8,["src","size","shape"])]),_:2},1032,["content","placement","transfer"])):(n.openBlock(),n.createBlock(N,{key:1,src:Y.src,size:v.size,shape:v.shape},null,8,["src","size","shape"]))]))),128)),h.$slots.extra?(n.openBlock(),n.createElementBlock("div",Uhe,[n.createVNode(N,{size:v.size,shape:v.shape,style:n.normalizeStyle(v.excessStyle)},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"extra")]),_:3},8,["size","shape","style"])])):v.list.length>v.max?(n.openBlock(),n.createElementBlock("div",zhe,[n.createVNode(N,{size:v.size,shape:v.shape,style:n.normalizeStyle(v.excessStyle)},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"excess",{},()=>[n.createTextVNode("+"+n.toDisplayString(v.list.length-v.max),1)])]),_:3},8,["size","shape","style"])])):n.createCommentVNode("",!0)],2)}var XF=l($he,[["render",Xhe]]);const Ok="ivu-back-top",Whe={name:"BackTop",emits:["on-click"],props:{height:{type:Number,default:400},bottom:{type:Number,default:30},right:{type:Number,default:30},duration:{type:Number,default:1e3}},data(){return{backTop:!1}},mounted(){o(window,"scroll",this.handleScroll),o(window,"resize",this.handleScroll)},beforeUnmount(){a(window,"scroll",this.handleScroll),a(window,"resize",this.handleScroll)},computed:{classes(){return[`${Ok}`,{[`${Ok}-show`]:this.backTop}]},styles(){return{bottom:`${this.bottom}px`,right:`${this.right}px`}},innerClasses(){return`${Ok}-inner`}},methods:{handleScroll(){!s||(this.backTop=window.pageYOffset>=this.height)},back(){if(!s)return;const h=document.documentElement.scrollTop||document.body.scrollTop;B(window,h,0,this.duration),this.$emit("on-click")}}},Ghe=[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-up"},null,-1)];function Hhe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.styles),onClick:f[0]||(f[0]=(...N)=>b.back&&b.back(...N))},[n.renderSlot(h.$slots,"default",{},()=>[n.createElementVNode("div",{class:n.normalizeClass(b.innerClasses)},Ghe,2)])],6)}var WF=l(Whe,[["render",Hhe]]);const GF=["blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],vc="ivu-badge",Qhe={name:"Badge",props:{count:Number,dot:{type:Boolean,default:!1},overflowCount:{type:[Number,String],default:99},className:String,showZero:{type:Boolean,default:!1},text:{type:String,default:""},status:{validator(h){return S(h,["success","processing","default","error","warning"])}},type:{validator(h){return S(h,["success","primary","normal","error","warning","info"])}},offset:{type:Array},color:{type:String}},computed:{classes(){return`${vc}`},dotClasses(){return`${vc}-dot`},countClasses(){return[`${vc}-count`,{[`${this.className}`]:!!this.className,[`${vc}-count-alone`]:this.alone,[`${vc}-count-${this.type}`]:!!this.type}]},customCountClasses(){return[`${vc}-count`,`${vc}-count-custom`,{[`${this.className}`]:!!this.className}]},statusClasses(){return[`${vc}-status-dot`,{[`${vc}-status-${this.status}`]:!!this.status,[`${vc}-status-${this.color}`]:!!this.color&&S(this.color,GF)}]},statusStyles(){return S(this.color,GF)?{}:{backgroundColor:this.color}},styles(){const h={};return this.offset&&this.offset.length===2&&(h["margin-top"]=`${this.offset[0]}px`,h["margin-right"]=`${this.offset[1]}px`),h},finalCount(){return this.text!==""?this.text:parseInt(this.count)>=parseInt(this.overflowCount)?`${this.overflowCount}+`:this.count},badge(){let h=!1;return this.count&&(h=parseInt(this.count)!==0),this.dot&&(h=!0,this.count!==null&&parseInt(this.count)===0&&(h=!1)),this.text!==""&&(h=!0),h||this.showZero},hasCount(){return!!(this.count||this.text!==""||this.showZero&&parseInt(this.count)===0)},alone(){return this.$slots.default===void 0}}},jhe={class:"ivu-badge-status-text"};function Yhe(h,f,v,E,T,b){return v.dot?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(b.classes),ref:"badge"},[n.renderSlot(h.$slots,"default"),n.withDirectives(n.createElementVNode("sup",{class:n.normalizeClass(b.dotClasses),style:n.normalizeStyle(b.styles)},null,6),[[n.vShow,b.badge]])],2)):v.status||v.color?(n.openBlock(),n.createElementBlock("span",{key:1,class:n.normalizeClass([b.classes,"ivu-badge-status"]),ref:"badge"},[n.createElementVNode("span",{class:n.normalizeClass(b.statusClasses),style:n.normalizeStyle(b.statusStyles)},null,6),n.createElementVNode("span",jhe,[n.renderSlot(h.$slots,"text",{},()=>[n.createTextVNode(n.toDisplayString(v.text),1)])])],2)):(n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass(b.classes),ref:"badge"},[n.renderSlot(h.$slots,"default"),h.$slots.count?(n.openBlock(),n.createElementBlock("sup",{key:0,style:n.normalizeStyle(b.styles),class:n.normalizeClass(b.customCountClasses)},[n.renderSlot(h.$slots,"count")],6)):b.hasCount?n.withDirectives((n.openBlock(),n.createElementBlock("sup",{key:1,style:n.normalizeStyle(b.styles),class:n.normalizeClass(b.countClasses)},[n.renderSlot(h.$slots,"text",{},()=>[n.createTextVNode(n.toDisplayString(b.finalCount),1)])],6)),[[n.vShow,b.badge]]):n.createCommentVNode("",!0)],2))}var CS=l(Qhe,[["render",Yhe]]);const qhe={name:"Breadcrumb",provide(){return{BreadcrumbInstance:this}},props:{separator:{type:String,default:"/"}}},Zhe={class:"ivu-breadcrumb"};function Khe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",Zhe,[n.renderSlot(h.$slots,"default")])}var Sk=l(qhe,[["render",Khe]]);const HF="ivu-breadcrumb-item",Jhe={name:"BreadcrumbItem",mixins:[ve],inject:["BreadcrumbInstance"],props:{},data(){return{showSeparator:!1}},computed:{linkClasses(){return`${HF}-link`},separatorClasses(){return`${HF}-separator`},separator(){return this.BreadcrumbInstance.separator}},mounted(){this.showSeparator=this.$slots.separator!==void 0}},ece=["href","target"],tce=["innerHTML"];function ice(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("span",null,[h.to?(n.openBlock(),n.createElementBlock("a",{key:0,href:h.linkUrl,target:h.target,class:n.normalizeClass(b.linkClasses),onClick:[f[0]||(f[0]=n.withModifiers(N=>h.handleCheckClick(N,!1),["exact"])),f[1]||(f[1]=n.withModifiers(N=>h.handleCheckClick(N,!0),["ctrl"])),f[2]||(f[2]=n.withModifiers(N=>h.handleCheckClick(N,!0),["meta"]))]},[n.renderSlot(h.$slots,"default")],10,ece)):(n.openBlock(),n.createElementBlock("span",{key:1,class:n.normalizeClass(b.linkClasses)},[n.renderSlot(h.$slots,"default")],2)),T.showSeparator?(n.openBlock(),n.createElementBlock("span",{key:3,class:n.normalizeClass(b.separatorClasses)},[n.renderSlot(h.$slots,"separator")],2)):(n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass(b.separatorClasses),innerHTML:b.separator},null,10,tce))])}var Ck=l(Jhe,[["render",ice]]);const Yd="ivu-btn",Do={name:"Button",mixins:[ve,Ui],components:{Icon:O},emits:["click"],props:{type:{validator(h){return S(h,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator(h){return S(h,["circle","circle-outline"])}},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator(h){return S(h,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{showSlot(){return!!this.$slots.default},classes(){return[`${Yd}`,`${Yd}-${this.type}`,{[`${Yd}-long`]:this.long,[`${Yd}-${this.shape}`]:!!this.shape,[`${Yd}-${this.size}`]:this.size!=="default",[`${Yd}-loading`]:this.loading!=null&&this.loading,[`${Yd}-icon-only`]:!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),[`${Yd}-ghost`]:this.ghost}]},isHrefPattern(){const{to:h}=this;return!!h},tagName(){const{isHrefPattern:h}=this;return h?"a":"button"},tagProps(){const{isHrefPattern:h}=this;if(h){const{linkUrl:f,target:v}=this;return{href:f,target:v}}else{const{htmlType:f}=this;return{type:f}}}},methods:{handleClickLink(h){this.$emit("click",h);const f=h.ctrlKey||h.metaKey;this.handleCheckClick(h,f)}},render(){let h;this.tagName==="button"?h="button":this.tagName==="a"&&(h="a");let f=[];return this.loading&&f.push(n.h(O,{class:"ivu-load-loop",type:"ios-loading"})),(this.icon||this.customIcon)&&!this.loading&&f.push(n.h(O,{type:this.icon,custom:this.customIcon})),this.$slots.default&&f.push(n.h("span",{ref:"slot"},this.$slots.default())),n.h(h,{class:this.classes,disabled:this.itemDisabled,onClick:this.handleClickLink,...this.tagProps},f)}},TS="ivu-btn-group",nce={name:"ButtonGroup",props:{size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},shape:{validator(h){return S(h,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes(){return[`${TS}`,{[`${TS}-${this.size}`]:!!this.size,[`${TS}-${this.shape}`]:!!this.shape,[`${TS}-vertical`]:this.vertical}]}}};function rce(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.renderSlot(h.$slots,"default")],2)}var Tk=l(nce,[["render",rce]]);const H_="ivu-radio-group";let sce=0;const oce=Date.now(),ace={name:"RadioGroup",mixins:[Ui],emits:["update:modelValue","on-change"],provide(){return{RadioGroupInstance:this}},props:{modelValue:{type:[String,Number],default:""},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},type:{validator(h){return S(h,["button"])}},vertical:{type:Boolean,default:!1},name:{type:String,default:()=>`ivuRadioGroup_${oce}_${sce++}`},buttonStyle:{validator(h){return S(h,["default","solid"])},default:"default"}},data(){return{currentValue:this.modelValue,children:[]}},computed:{classes(){return[`${H_}`,{[`${H_}-${this.size}`]:!!this.size,[`ivu-radio-${this.size}`]:!!this.size,[`${H_}-${this.type}`]:!!this.type,[`${H_}-button-${this.buttonStyle}`]:this.type==="button"&&this.buttonStyle!=="default",[`${H_}-vertical`]:this.vertical}]}},methods:{change(h){this.currentValue=h.value,this.$emit("update:modelValue",h.value),this.$emit("on-change",h.value),this.handleFormItemChange("change",h.value)}},watch:{modelValue(){this.currentValue!==this.modelValue&&(this.currentValue=this.modelValue)}}},lce=["name"];function hce(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),name:v.name},[n.renderSlot(h.$slots,"default")],10,lce)}var AS=l(ace,[["render",hce]]);const Va="ivu-radio",cce={name:"Radio",mixins:[Ui],emits:["update:modelValue","on-change"],inject:{RadioGroupInstance:{default:null}},props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{groupName:this.name,parent:this.RadioGroupInstance,focusWrapper:!1,focusInner:!1}},computed:{wrapClasses(){return[`${Va}-wrapper`,{[`${Va}-group-item`]:this.group,[`${Va}-wrapper-checked`]:this.currentValue,[`${Va}-wrapper-disabled`]:this.itemDisabled,[`${Va}-${this.size}`]:!!this.size,[`${Va}-focus`]:this.focusWrapper,[`${Va}-border`]:this.border}]},radioClasses(){return[`${Va}`,{[`${Va}-checked`]:this.currentValue,[`${Va}-disabled`]:this.itemDisabled}]},innerClasses(){return[`${Va}-inner`,{[`${Va}-focus`]:this.focusInner}]},inputClasses(){return`${Va}-input`},currentValue(){return this.RadioGroupInstance?this.RadioGroupInstance.currentValue===this.label:this.modelValue===this.trueValue},group(){return!!this.RadioGroupInstance}},mounted(){this.parent&&(this.name&&this.name!==this.parent.name?console.warn&&console.warn("[View UI] Name does not match Radio Group name."):this.groupName=this.parent.name)},methods:{change(h){if(this.itemDisabled)return!1;const f=h.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",f),this.group?this.label!==void 0&&this.parent.change({value:this.label,checked:this.modelValue}):(this.$emit("on-change",f),this.handleFormItemChange("change",f))},onBlur(){this.focusWrapper=!1,this.focusInner=!1},onFocus(){this.group&&this.parent.type==="button"?this.focusWrapper=!0:this.focusInner=!0}},watch:{modelValue(h){if(!(h===this.trueValue||h===this.falseValue))throw"Value should be trueValue or falseValue."}}},uce=["disabled","checked","name"];function dce(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("label",{class:n.normalizeClass(b.wrapClasses)},[n.createElementVNode("span",{class:n.normalizeClass(b.radioClasses)},[n.createElementVNode("span",{class:n.normalizeClass(b.innerClasses)},null,2),n.createElementVNode("input",{type:"radio",class:n.normalizeClass(b.inputClasses),disabled:h.itemDisabled,checked:b.currentValue,name:T.groupName,onChange:f[0]||(f[0]=(...N)=>b.change&&b.change(...N)),onFocus:f[1]||(f[1]=(...N)=>b.onFocus&&b.onFocus(...N)),onBlur:f[2]||(f[2]=(...N)=>b.onBlur&&b.onBlur(...N))},null,42,uce)],2),n.renderSlot(h.$slots,"default",{},()=>[n.createTextVNode(n.toDisplayString(v.label),1)])],2)}var ES=l(cce,[["render",dce]]),QF={exports:{}};(function(h,f){(function(v,E){h.exports=E()})(te,function(){var v=1e3,E=6e4,T=36e5,b="millisecond",N="second",U="minute",Y="hour",W="day",Z="week",fe="month",Te="quarter",Se="year",we="date",ce="Invalid Date",Be=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Zt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ct={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Wt){var Tt=["th","st","nd","rd"],vt=Wt%100;return"["+Wt+(Tt[(vt-20)%10]||Tt[vt]||Tt[0])+"]"}},Rt=function(Wt,Tt,vt){var jt=String(Wt);return!jt||jt.length>=Tt?Wt:""+Array(Tt+1-jt.length).join(vt)+Wt},qe={s:Rt,z:function(Wt){var Tt=-Wt.utcOffset(),vt=Math.abs(Tt),jt=Math.floor(vt/60),kt=vt%60;return(Tt<=0?"+":"-")+Rt(jt,2,"0")+":"+Rt(kt,2,"0")},m:function Wt(Tt,vt){if(Tt.date()<vt.date())return-Wt(vt,Tt);var jt=12*(vt.year()-Tt.year())+(vt.month()-Tt.month()),kt=Tt.clone().add(jt,fe),xi=vt-kt<0,Mi=Tt.clone().add(jt+(xi?-1:1),fe);return+(-(jt+(vt-kt)/(xi?kt-Mi:Mi-kt))||0)},a:function(Wt){return Wt<0?Math.ceil(Wt)||0:Math.floor(Wt)},p:function(Wt){return{M:fe,y:Se,w:Z,d:W,D:we,h:Y,m:U,s:N,ms:b,Q:Te}[Wt]||String(Wt||"").toLowerCase().replace(/s$/,"")},u:function(Wt){return Wt===void 0}},Le="en",rt={};rt[Le]=Ct;var et="$isDayjsObject",ri=function(Wt){return Wt instanceof Ht||!(!Wt||!Wt[et])},si=function Wt(Tt,vt,jt){var kt;if(!Tt)return Le;if(typeof Tt=="string"){var xi=Tt.toLowerCase();rt[xi]&&(kt=xi),vt&&(rt[xi]=vt,kt=xi);var Mi=Tt.split("-");if(!kt&&Mi.length>1)return Wt(Mi[0])}else{var Tn=Tt.name;rt[Tn]=Tt,kt=Tn}return!jt&&kt&&(Le=kt),kt||!jt&&Le},Xt=function(Wt,Tt){if(ri(Wt))return Wt.clone();var vt=typeof Tt=="object"?Tt:{};return vt.date=Wt,vt.args=arguments,new Ht(vt)},Lt=qe;Lt.l=si,Lt.i=ri,Lt.w=function(Wt,Tt){return Xt(Wt,{locale:Tt.$L,utc:Tt.$u,x:Tt.$x,$offset:Tt.$offset})};var Ht=function(){function Wt(vt){this.$L=si(vt.locale,null,!0),this.parse(vt),this.$x=this.$x||vt.x||{},this[et]=!0}var Tt=Wt.prototype;return Tt.parse=function(vt){this.$d=function(jt){var kt=jt.date,xi=jt.utc;if(kt===null)return new Date(NaN);if(Lt.u(kt))return new Date;if(kt instanceof Date)return new Date(kt);if(typeof kt=="string"&&!/Z$/i.test(kt)){var Mi=kt.match(Be);if(Mi){var Tn=Mi[2]-1||0,Gn=(Mi[7]||"0").substring(0,3);return xi?new Date(Date.UTC(Mi[1],Tn,Mi[3]||1,Mi[4]||0,Mi[5]||0,Mi[6]||0,Gn)):new Date(Mi[1],Tn,Mi[3]||1,Mi[4]||0,Mi[5]||0,Mi[6]||0,Gn)}}return new Date(kt)}(vt),this.init()},Tt.init=function(){var vt=this.$d;this.$y=vt.getFullYear(),this.$M=vt.getMonth(),this.$D=vt.getDate(),this.$W=vt.getDay(),this.$H=vt.getHours(),this.$m=vt.getMinutes(),this.$s=vt.getSeconds(),this.$ms=vt.getMilliseconds()},Tt.$utils=function(){return Lt},Tt.isValid=function(){return this.$d.toString()!==ce},Tt.isSame=function(vt,jt){var kt=Xt(vt);return this.startOf(jt)<=kt&&kt<=this.endOf(jt)},Tt.isAfter=function(vt,jt){return Xt(vt)<this.startOf(jt)},Tt.isBefore=function(vt,jt){return this.endOf(jt)<Xt(vt)},Tt.$g=function(vt,jt,kt){return Lt.u(vt)?this[jt]:this.set(kt,vt)},Tt.unix=function(){return Math.floor(this.valueOf()/1e3)},Tt.valueOf=function(){return this.$d.getTime()},Tt.startOf=function(vt,jt){var kt=this,xi=!!Lt.u(jt)||jt,Mi=Lt.p(vt),Tn=function(Vt,yi){var sn=Lt.w(kt.$u?Date.UTC(kt.$y,yi,Vt):new Date(kt.$y,yi,Vt),kt);return xi?sn:sn.endOf(W)},Gn=function(Vt,yi){return Lt.w(kt.toDate()[Vt].apply(kt.toDate("s"),(xi?[0,0,0,0]:[23,59,59,999]).slice(yi)),kt)},gr=this.$W,Tr=this.$M,Ys=this.$D,oa="set"+(this.$u?"UTC":"");switch(Mi){case Se:return xi?Tn(1,0):Tn(31,11);case fe:return xi?Tn(1,Tr):Tn(0,Tr+1);case Z:var Mh=this.$locale().weekStart||0,Ph=(gr<Mh?gr+7:gr)-Mh;return Tn(xi?Ys-Ph:Ys+(6-Ph),Tr);case W:case we:return Gn(oa+"Hours",0);case Y:return Gn(oa+"Minutes",1);case U:return Gn(oa+"Seconds",2);case N:return Gn(oa+"Milliseconds",3);default:return this.clone()}},Tt.endOf=function(vt){return this.startOf(vt,!1)},Tt.$set=function(vt,jt){var kt,xi=Lt.p(vt),Mi="set"+(this.$u?"UTC":""),Tn=(kt={},kt[W]=Mi+"Date",kt[we]=Mi+"Date",kt[fe]=Mi+"Month",kt[Se]=Mi+"FullYear",kt[Y]=Mi+"Hours",kt[U]=Mi+"Minutes",kt[N]=Mi+"Seconds",kt[b]=Mi+"Milliseconds",kt)[xi],Gn=xi===W?this.$D+(jt-this.$W):jt;if(xi===fe||xi===Se){var gr=this.clone().set(we,1);gr.$d[Tn](Gn),gr.init(),this.$d=gr.set(we,Math.min(this.$D,gr.daysInMonth())).$d}else Tn&&this.$d[Tn](Gn);return this.init(),this},Tt.set=function(vt,jt){return this.clone().$set(vt,jt)},Tt.get=function(vt){return this[Lt.p(vt)]()},Tt.add=function(vt,jt){var kt,xi=this;vt=Number(vt);var Mi=Lt.p(jt),Tn=function(Tr){var Ys=Xt(xi);return Lt.w(Ys.date(Ys.date()+Math.round(Tr*vt)),xi)};if(Mi===fe)return this.set(fe,this.$M+vt);if(Mi===Se)return this.set(Se,this.$y+vt);if(Mi===W)return Tn(1);if(Mi===Z)return Tn(7);var Gn=(kt={},kt[U]=E,kt[Y]=T,kt[N]=v,kt)[Mi]||1,gr=this.$d.getTime()+vt*Gn;return Lt.w(gr,this)},Tt.subtract=function(vt,jt){return this.add(-1*vt,jt)},Tt.format=function(vt){var jt=this,kt=this.$locale();if(!this.isValid())return kt.invalidDate||ce;var xi=vt||"YYYY-MM-DDTHH:mm:ssZ",Mi=Lt.z(this),Tn=this.$H,Gn=this.$m,gr=this.$M,Tr=kt.weekdays,Ys=kt.months,oa=kt.meridiem,Mh=function(yi,sn,Ds,Vo){return yi&&(yi[sn]||yi(jt,xi))||Ds[sn].slice(0,Vo)},Ph=function(yi){return Lt.s(Tn%12||12,yi,"0")},Vt=oa||function(yi,sn,Ds){var Vo=yi<12?"AM":"PM";return Ds?Vo.toLowerCase():Vo};return xi.replace(Zt,function(yi,sn){return sn||function(Ds){switch(Ds){case"YY":return String(jt.$y).slice(-2);case"YYYY":return Lt.s(jt.$y,4,"0");case"M":return gr+1;case"MM":return Lt.s(gr+1,2,"0");case"MMM":return Mh(kt.monthsShort,gr,Ys,3);case"MMMM":return Mh(Ys,gr);case"D":return jt.$D;case"DD":return Lt.s(jt.$D,2,"0");case"d":return String(jt.$W);case"dd":return Mh(kt.weekdaysMin,jt.$W,Tr,2);case"ddd":return Mh(kt.weekdaysShort,jt.$W,Tr,3);case"dddd":return Tr[jt.$W];case"H":return String(Tn);case"HH":return Lt.s(Tn,2,"0");case"h":return Ph(1);case"hh":return Ph(2);case"a":return Vt(Tn,Gn,!0);case"A":return Vt(Tn,Gn,!1);case"m":return String(Gn);case"mm":return Lt.s(Gn,2,"0");case"s":return String(jt.$s);case"ss":return Lt.s(jt.$s,2,"0");case"SSS":return Lt.s(jt.$ms,3,"0");case"Z":return Mi}return null}(yi)||Mi.replace(":","")})},Tt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Tt.diff=function(vt,jt,kt){var xi,Mi=this,Tn=Lt.p(jt),Gn=Xt(vt),gr=(Gn.utcOffset()-this.utcOffset())*E,Tr=this-Gn,Ys=function(){return Lt.m(Mi,Gn)};switch(Tn){case Se:xi=Ys()/12;break;case fe:xi=Ys();break;case Te:xi=Ys()/3;break;case Z:xi=(Tr-gr)/6048e5;break;case W:xi=(Tr-gr)/864e5;break;case Y:xi=Tr/T;break;case U:xi=Tr/E;break;case N:xi=Tr/v;break;default:xi=Tr}return kt?xi:Lt.a(xi)},Tt.daysInMonth=function(){return this.endOf(fe).$D},Tt.$locale=function(){return rt[this.$L]},Tt.locale=function(vt,jt){if(!vt)return this.$L;var kt=this.clone(),xi=si(vt,jt,!0);return xi&&(kt.$L=xi),kt},Tt.clone=function(){return Lt.w(this.$d,this)},Tt.toDate=function(){return new Date(this.valueOf())},Tt.toJSON=function(){return this.isValid()?this.toISOString():null},Tt.toISOString=function(){return this.$d.toISOString()},Tt.toString=function(){return this.$d.toUTCString()},Wt}(),ui=Ht.prototype;return Xt.prototype=ui,[["$ms",b],["$s",N],["$m",U],["$H",Y],["$W",W],["$M",fe],["$y",Se],["$D",we]].forEach(function(Wt){ui[Wt[1]]=function(Tt){return this.$g(Tt,Wt[0],Wt[1])}}),Xt.extend=function(Wt,Tt){return Wt.$i||(Wt(Tt,Ht,Xt),Wt.$i=!0),Xt},Xt.locale=si,Xt.isDayjs=ri,Xt.unix=function(Wt){return Xt(1e3*Wt)},Xt.en=rt[Le],Xt.Ls=rt,Xt.p={},Xt})})(QF);var Fa=QF.exports,jF=1/0,YF=9007199254740991,fce=17976931348623157e292,qF=NaN,pce="[object Function]",mce="[object GeneratorFunction]",gce="[object Symbol]",vce=/^\s+|\s+$/g,yce=/^[-+]0x[0-9a-f]+$/i,_ce=/^0b[01]+$/i,xce=/^0o[0-7]+$/i,bce=/^(?:0|[1-9]\d*)$/,wce=parseInt,Oce=Object.prototype,ZF=Oce.toString,Sce=Math.ceil,Cce=Math.max;function Tce(h,f,v){var E=-1,T=h.length;f<0&&(f=-f>T?0:T+f),v=v>T?T:v,v<0&&(v+=T),T=f>v?0:v-f>>>0,f>>>=0;for(var b=Array(T);++E<T;)b[E]=h[E+f];return b}function Ace(h,f){return f=f??YF,!!f&&(typeof h=="number"||bce.test(h))&&h>-1&&h%1==0&&h<f}function Ece(h,f,v){if(!MS(v))return!1;var E=typeof f;return(E=="number"?kce(v)&&Ace(f,v.length):E=="string"&&f in v)?Pce(v[f],h):!1}function Mce(h,f,v){(v?Ece(h,f,v):f===void 0)?f=1:f=Cce(Nce(f),0);var E=h?h.length:0;if(!E||f<1)return[];for(var T=0,b=0,N=Array(Sce(E/f));T<E;)N[b++]=Tce(h,T,T+=f);return N}function Pce(h,f){return h===f||h!==h&&f!==f}function kce(h){return h!=null&&Rce(h.length)&&!Ice(h)}function Ice(h){var f=MS(h)?ZF.call(h):"";return f==pce||f==mce}function Rce(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=YF}function MS(h){var f=typeof h;return!!h&&(f=="object"||f=="function")}function Bce(h){return!!h&&typeof h=="object"}function Dce(h){return typeof h=="symbol"||Bce(h)&&ZF.call(h)==gce}function Lce(h){if(!h)return h===0?h:0;if(h=Vce(h),h===jF||h===-jF){var f=h<0?-1:1;return f*fce}return h===h?h:0}function Nce(h){var f=Lce(h),v=f%1;return f===f?v?f-v:f:0}function Vce(h){if(typeof h=="number")return h;if(Dce(h))return qF;if(MS(h)){var f=typeof h.valueOf=="function"?h.valueOf():h;h=MS(f)?f+"":f}if(typeof h!="string")return h===0?h:+h;h=h.replace(vce,"");var v=_ce.test(h);return v||xce.test(h)?wce(h.slice(2),v?2:8):yce.test(h)?qF:+h}var KF=Mce,JF={emits:["on-cell-click","on-cell-contextmenu"],methods:{handleCellClick(h){this.CalendarInstance.$emit("on-cell-click",h)},handleCellContextmenu(h){this.CalendarInstance.$emit("on-cell-contextmenu",h)}}};const Fce={name:"CalendarMonth",mixins:[JF],inject:["CalendarInstance"],props:{date:Object},data(){return{firstDayOfWeek:this.CalendarInstance.firstDayOfWeek,weekDays:this.CalendarInstance.locale.weekDays}},computed:{finalWeekDays(){return this.weekDays.slice(this.firstDayOfWeek).concat(this.weekDays.slice(0,this.firstDayOfWeek))},days(){let h=[];const f=Fa(this.date.format("YYYY-MM-01")),v=f.day(),E=this.firstDayOfWeek,T=E<=v?v-E:7-(E-v);for(let Y=0;Y<T;Y++){const W=f.subtract(T-Y,"day"),Z={text:W.format("YYYY-MM-DD"),date:W.format("D"),type:"prev"};h.push(Z)}const b=f.daysInMonth();for(let Y=0;Y<b;Y++){const W=f.add(Y,"day"),Z={text:W.format("YYYY-MM-DD"),date:W.format("D"),type:"current"};h.push(Z)}const N=42-h.length,U=f.add(1,"month");for(let Y=0;Y<N;Y++){const W=U.add(Y,"day"),Z={text:W.format("YYYY-MM-DD"),date:W.format("D"),type:"next"};h.push(Z)}return h},chunkDays(){return KF(this.days,7)},dayStyles(){let h={};return this.CalendarInstance.cellHeight!==100&&(h.height=`${this.CalendarInstance.cellHeight}px`),h},currentDate(){return this.date.format("YYYY-MM-DD")}},methods:{handleClickDate(h){this.CalendarInstance.handleChangeDate(Fa(h))}}},$ce={class:"ivu-calendar-table",cellspacing:"0",cellpadding:"0"},Uce=["onClick","onContextmenu"],zce=["onClick"],Xce={class:"ivu-calendar-table-day-title"},Wce={class:"ivu-calendar-table-day-slot"};function Gce(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("table",$ce,[n.createElementVNode("thead",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.finalWeekDays,N=>(n.openBlock(),n.createElementBlock("th",{key:N},n.toDisplayString(N),1))),128))]),n.createElementVNode("tbody",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.chunkDays,(N,U)=>(n.openBlock(),n.createElementBlock("tr",{key:U},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(N,Y=>(n.openBlock(),n.createElementBlock("td",{key:Y.text,onClick:W=>h.handleCellClick(Y),onContextmenu:n.withModifiers(W=>h.handleCellContextmenu(Y),["prevent"])},[n.createElementVNode("div",{class:n.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-other":Y.type!=="current","ivu-calendar-table-day-current":Y.text===b.currentDate}]),style:n.normalizeStyle(b.dayStyles),onClick:W=>b.handleClickDate(Y.text)},[n.createElementVNode("div",Xce,n.toDisplayString(Y.date),1),n.createElementVNode("div",Wce,[n.renderSlot(h.$slots,"month",{date:new Date(Y.date),data:{type:Y.type+"-month",day:Y.text,selected:Y.text===b.currentDate}})])],14,zce)],40,Uce))),128))]))),128))])])}var Hce=l(Fce,[["render",Gce]]);const Qce={name:"CalendarYear",mixins:[JF],inject:["CalendarInstance"],props:{date:Object},data(){return{}},computed:{months(){let h=[];const f=Fa(this.date.format("YYYY-01-01"));for(let v=0;v<12;v++){const E=f.add(v,"month");h.push({text:E.format("YYYY-MM"),month:this.CalendarInstance.locale.months[v],type:"current"})}return h},chunkMonths(){return KF(this.months,3)},dayStyles(){let h={};return this.CalendarInstance.cellHeight!==100&&(h.height=`${this.CalendarInstance.cellHeight}px`),h},currentMonth(){return this.date.format("YYYY-MM")}},methods:{handleClickDate(h){this.CalendarInstance.handleChangeDate(Fa(h))}}},jce={class:"ivu-calendar-table ivu-calendar-table-year",cellspacing:"0",cellpadding:"0"},Yce=["onClick","onContextmenu"],qce=["onClick"],Zce={class:"ivu-calendar-table-day-title"},Kce={class:"ivu-calendar-table-day-slot"};function Jce(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("table",jce,[n.createElementVNode("tbody",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.chunkMonths,(N,U)=>(n.openBlock(),n.createElementBlock("tr",{key:U},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(N,Y=>(n.openBlock(),n.createElementBlock("td",{key:Y.text,onClick:W=>h.handleCellClick(Y),onContextmenu:n.withModifiers(W=>h.handleCellContextmenu(Y),["prevent"])},[n.createElementVNode("div",{class:n.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-current":Y.text===b.currentMonth}]),style:n.normalizeStyle(b.dayStyles),onClick:W=>b.handleClickDate(Y.text)},[n.createElementVNode("div",Zce,n.toDisplayString(Y.month),1),n.createElementVNode("div",Kce,[n.renderSlot(h.$slots,"year",{month:new Date(Y.month),data:{type:Y.type+"-year",month:Y.text,selected:Y.text===b.currentMonth}})])],14,qce)],40,Yce))),128))]))),128))])])}var eue=l(Qce,[["render",Jce]]);const tue={name:"Calendar",components:{CalendarMonth:Hce,CalendarYear:eue,ButtonGroup:Tk,Button:Do,RadioGroup:AS,Radio:ES,Icon:O},emits:["on-type-change","on-prev","on-next","on-today","on-change","update:modelValue","on-cell-click","on-cell-contextmenu"],provide(){return{CalendarInstance:this}},props:{modelValue:{type:[Date,String,Number]},type:{validator(h){return S(h,["month","year"])},default:"month"},cellHeight:{type:Number,default:100},showHeader:{type:Boolean,default:!0},headerType:{validator(h){return S(h,["simple","full"])},default:"simple"},firstDayOfWeek:{validator(h){return S(h,[1,2,3,4,5,6,7])},default:1},hideType:{type:Boolean,default:!1},locale:{type:Object,default(){return{today:"今天",type:{month:"月",year:"年"},weekDays:["日","一","二","三","四","五","六"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}}}},data(){const h=this.modelValue?this.modelValue:new Date;return{currentValue:Fa(h),mode:this.type}},watch:{modelValue(h){const f=h||new Date;this.currentValue=Fa(f)},type(h){this.mode=h}},computed:{headerTitle(){if(this.mode==="month")return this.currentValue.format("YYYY 年 M 月");if(this.mode==="year")return this.currentValue.format("YYYY 年")}},methods:{handleChangeType(h){this.$emit("on-type-change",h)},handlePrev(){const h=this.currentValue.format("YYYY-MM-01");let f;this.mode==="month"?f=Fa(h).subtract(1,"month"):this.mode==="year"&&(f=Fa(h).subtract(1,"year")),this.handleChangeDate(f),this.$emit("on-prev")},handleNext(){const h=this.currentValue.format("YYYY-MM-01");let f;this.mode==="month"?f=Fa(h).add(1,"month"):this.mode==="year"&&(f=Fa(h).add(1,"year")),this.handleChangeDate(f),this.$emit("on-next")},handleToday(){const h=Fa(new Date),f=h.format("YYYY-MM-DD"),v=this.currentValue.format("YYYY-MM-DD");f!==v&&this.handleChangeDate(h),this.$emit("on-today")},handleChangeDate(h){this.currentValue=h;const f=new Date(h.format("YYYY-MM-DD"));this.$emit("update:modelValue",f),this.$emit("on-change",f)}}},iue={class:"ivu-calendar"},nue={key:0,class:"ivu-calendar-header"},rue={class:"ivu-calendar-header-title"},sue={class:"ivu-calendar-header-action"},oue={class:"ivu-calendar-body"};function aue(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Button"),Y=n.resolveComponent("ButtonGroup"),W=n.resolveComponent("Radio"),Z=n.resolveComponent("RadioGroup"),fe=n.resolveComponent("CalendarMonth"),Te=n.resolveComponent("CalendarYear");return n.openBlock(),n.createElementBlock("div",iue,[v.showHeader?(n.openBlock(),n.createElementBlock("div",nue,[n.renderSlot(h.$slots,"header",{},()=>[n.createElementVNode("div",rue,[n.renderSlot(h.$slots,"headerTitle",{},()=>[n.createTextVNode(n.toDisplayString(b.headerTitle),1)])]),n.createElementVNode("div",sue,[v.headerType==="simple"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createVNode(Y,null,{default:n.withCtx(()=>[n.createVNode(U,{onClick:b.handlePrev},{default:n.withCtx(()=>[n.createVNode(N,{type:"ios-arrow-back"})]),_:1},8,["onClick"]),n.createVNode(U,{onClick:b.handleToday},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(v.locale.today),1)]),_:1},8,["onClick"]),n.createVNode(U,{onClick:b.handleNext},{default:n.withCtx(()=>[n.createVNode(N,{type:"ios-arrow-forward"})]),_:1},8,["onClick"])]),_:1}),v.hideType?n.createCommentVNode("",!0):(n.openBlock(),n.createBlock(Z,{key:0,modelValue:T.mode,"onUpdate:modelValue":f[0]||(f[0]=Se=>T.mode=Se),type:"button",class:"ivu-ml",onOnChange:b.handleChangeType},{default:n.withCtx(()=>[n.createVNode(W,{label:"month"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(v.locale.type.month),1)]),_:1}),n.createVNode(W,{label:"year"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(v.locale.type.year),1)]),_:1})]),_:1},8,["modelValue","onOnChange"]))],64)):v.headerType==="full"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[],64)):n.createCommentVNode("",!0)])])])):n.createCommentVNode("",!0),n.createElementVNode("div",oue,[T.mode==="month"?(n.openBlock(),n.createBlock(fe,{key:0,date:T.currentValue},{month:n.withCtx(({date:Se,data:we})=>[n.renderSlot(h.$slots,"month",{date:Se,data:we})]),_:3},8,["date"])):T.mode==="year"?(n.openBlock(),n.createBlock(Te,{key:1,date:T.currentValue},{year:n.withCtx(({month:Se,data:we})=>[n.renderSlot(h.$slots,"year",{month:Se,data:we})]),_:3},8,["date"])):n.createCommentVNode("",!0)])])}var e$=l(tue,[["render",aue]]);const Cu="ivu-col";function lue(h){return typeof h=="number"?`${h} ${h} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(h)?`0 0 ${h}`:h}const hue={name:"iCol",inject:["RowInstance"],props:{span:[Number,String],order:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],className:String,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object],xxl:[Number,Object],flex:{type:[Number,String],default:""}},computed:{gutter(){return this.RowInstance.gutter},classes(){let h=[`${Cu}`,{[`${Cu}-span-${this.span}`]:this.span,[`${Cu}-order-${this.order}`]:this.order,[`${Cu}-offset-${this.offset}`]:this.offset,[`${Cu}-push-${this.push}`]:this.push,[`${Cu}-pull-${this.pull}`]:this.pull,[`${this.className}`]:!!this.className}];return["xs","sm","md","lg","xl","xxl"].forEach(f=>{if(typeof this[f]=="number")h.push(`${Cu}-span-${f}-${this[f]}`);else if(typeof this[f]=="object"){let v=this[f];Object.keys(v).forEach(E=>{h.push(E!=="span"?`${Cu}-${f}-${E}-${v[E]}`:`${Cu}-span-${f}-${v[E]}`)})}}),h},styles(){let h={};return this.gutter!==0&&(h={paddingLeft:this.gutter/2+"px",paddingRight:this.gutter/2+"px"}),this.flex&&(h.flex=lue(this.flex)),h}}};function cue(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.styles)},[n.renderSlot(h.$slots,"default")],6)}var yc=l(hue,[["render",cue]]);const sm="ivu-row",uue={name:"Row",provide(){return{RowInstance:this}},props:{type:{validator(h){return S(h,["flex"])}},align:{validator(h){return S(h,["top","middle","bottom"])}},justify:{validator(h){return S(h,["start","end","center","space-around","space-between"])}},gutter:{type:Number,default:0},className:String,wrap:{type:Boolean,default:!0}},computed:{classes(){return[`${sm}`,{[`${sm}-${this.type}`]:!!this.type,[`${sm}-${this.type}-${this.align}`]:!!this.align&&this.type,[`${sm}-${this.type}-${this.justify}`]:!!this.justify&&this.type,[`${sm}-${this.align}`]:!!this.align,[`${sm}-${this.justify}`]:!!this.justify,[`${this.className}`]:!!this.className,[`${sm}-no-wrap`]:!this.wrap}]},styles(){let h={};return this.gutter!==0&&(h={marginLeft:this.gutter/-2+"px",marginRight:this.gutter/-2+"px"}),h}}};function due(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.styles)},[n.renderSlot(h.$slots,"default")],6)}var qd=l(uue,[["render",due]]);function om(){return om=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var v=arguments[f];for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(h[E]=v[E])}return h},om.apply(this,arguments)}function fue(h,f){h.prototype=Object.create(f.prototype),h.prototype.constructor=h,Q_(h,f)}function Ak(h){return Ak=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},Ak(h)}function Q_(h,f){return Q_=Object.setPrototypeOf||function(v,E){return v.__proto__=E,v},Q_(h,f)}function pue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function PS(h,f,v){return pue()?PS=Reflect.construct:PS=function(E,T,b){var N=[null];N.push.apply(N,T);var U=Function.bind.apply(E,N),Y=new U;return b&&Q_(Y,b.prototype),Y},PS.apply(null,arguments)}function mue(h){return Function.toString.call(h).indexOf("[native code]")!==-1}function Ek(h){var f=typeof Map=="function"?new Map:void 0;return Ek=function(v){if(v===null||!mue(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(typeof f<"u"){if(f.has(v))return f.get(v);f.set(v,E)}function E(){return PS(v,arguments,Ak(this).constructor)}return E.prototype=Object.create(v.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),Q_(E,v)},Ek(h)}var gue=/%[sdj%]/g,vue=function(){};function Mk(h){if(!h||!h.length)return null;var f={};return h.forEach(function(v){var E=v.field;f[E]=f[E]||[],f[E].push(v)}),f}function $a(){for(var h=arguments.length,f=new Array(h),v=0;v<h;v++)f[v]=arguments[v];var E=1,T=f[0],b=f.length;if(typeof T=="function")return T.apply(null,f.slice(1));if(typeof T=="string"){var N=String(T).replace(gue,function(U){if(U==="%%")return"%";if(E>=b)return U;switch(U){case"%s":return String(f[E++]);case"%d":return Number(f[E++]);case"%j":try{return JSON.stringify(f[E++])}catch{return"[Circular]"}break;default:return U}});return N}return T}function yue(h){return h==="string"||h==="url"||h==="hex"||h==="email"||h==="date"||h==="pattern"}function vs(h,f){return!!(h==null||f==="array"&&Array.isArray(h)&&!h.length||yue(f)&&typeof h=="string"&&!h)}function _ue(h,f,v){var E=[],T=0,b=h.length;function N(U){E.push.apply(E,U),T++,T===b&&v(E)}h.forEach(function(U){f(U,N)})}function t$(h,f,v){var E=0,T=h.length;function b(N){if(N&&N.length){v(N);return}var U=E;E=E+1,U<T?f(h[U],b):v([])}b([])}function xue(h){var f=[];return Object.keys(h).forEach(function(v){f.push.apply(f,h[v])}),f}var i$=function(h){fue(f,h);function f(v,E){var T;return T=h.call(this,"Async Validation Error")||this,T.errors=v,T.fields=E,T}return f}(Ek(Error));function bue(h,f,v,E){if(f.first){var T=new Promise(function(fe,Te){var Se=function(ce){return E(ce),ce.length?Te(new i$(ce,Mk(ce))):fe()},we=xue(h);t$(we,v,Se)});return T.catch(function(fe){return fe}),T}var b=f.firstFields||[];b===!0&&(b=Object.keys(h));var N=Object.keys(h),U=N.length,Y=0,W=[],Z=new Promise(function(fe,Te){var Se=function(we){if(W.push.apply(W,we),Y++,Y===U)return E(W),W.length?Te(new i$(W,Mk(W))):fe()};N.length||(E(W),fe()),N.forEach(function(we){var ce=h[we];b.indexOf(we)!==-1?t$(ce,v,Se):_ue(ce,v,Se)})});return Z.catch(function(fe){return fe}),Z}function n$(h){return function(f){return f&&f.message?(f.field=f.field||h.fullField,f):{message:typeof f=="function"?f():f,field:f.field||h.fullField}}}function r$(h,f){if(f){for(var v in f)if(f.hasOwnProperty(v)){var E=f[v];typeof E=="object"&&typeof h[v]=="object"?h[v]=om({},h[v],E):h[v]=E}}return h}function s$(h,f,v,E,T,b){h.required&&(!v.hasOwnProperty(h.field)||vs(f,b||h.type))&&E.push($a(T.messages.required,h.fullField))}function wue(h,f,v,E,T){(/^\s+$/.test(f)||f==="")&&E.push($a(T.messages.whitespace,h.fullField))}var Pk={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},j_={integer:function(h){return j_.number(h)&&parseInt(h,10)===h},float:function(h){return j_.number(h)&&!j_.integer(h)},array:function(h){return Array.isArray(h)},regexp:function(h){if(h instanceof RegExp)return!0;try{return!!new RegExp(h)}catch{return!1}},date:function(h){return typeof h.getTime=="function"&&typeof h.getMonth=="function"&&typeof h.getYear=="function"&&!isNaN(h.getTime())},number:function(h){return isNaN(h)?!1:typeof h=="number"},object:function(h){return typeof h=="object"&&!j_.array(h)},method:function(h){return typeof h=="function"},email:function(h){return typeof h=="string"&&!!h.match(Pk.email)&&h.length<255},url:function(h){return typeof h=="string"&&!!h.match(Pk.url)},hex:function(h){return typeof h=="string"&&!!h.match(Pk.hex)}};function Oue(h,f,v,E,T){if(h.required&&f===void 0){s$(h,f,v,E,T);return}var b=["integer","float","array","regexp","object","method","email","number","date","url","hex"],N=h.type;b.indexOf(N)>-1?j_[N](f)||E.push($a(T.messages.types[N],h.fullField,h.type)):N&&typeof f!==h.type&&E.push($a(T.messages.types[N],h.fullField,h.type))}function Sue(h,f,v,E,T){var b=typeof h.len=="number",N=typeof h.min=="number",U=typeof h.max=="number",Y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,W=f,Z=null,fe=typeof f=="number",Te=typeof f=="string",Se=Array.isArray(f);if(fe?Z="number":Te?Z="string":Se&&(Z="array"),!Z)return!1;Se&&(W=f.length),Te&&(W=f.replace(Y,"_").length),b?W!==h.len&&E.push($a(T.messages[Z].len,h.fullField,h.len)):N&&!U&&W<h.min?E.push($a(T.messages[Z].min,h.fullField,h.min)):U&&!N&&W>h.max?E.push($a(T.messages[Z].max,h.fullField,h.max)):N&&U&&(W<h.min||W>h.max)&&E.push($a(T.messages[Z].range,h.fullField,h.min,h.max))}var E0="enum";function Cue(h,f,v,E,T){h[E0]=Array.isArray(h[E0])?h[E0]:[],h[E0].indexOf(f)===-1&&E.push($a(T.messages[E0],h.fullField,h[E0].join(", ")))}function Tue(h,f,v,E,T){if(h.pattern){if(h.pattern instanceof RegExp)h.pattern.lastIndex=0,h.pattern.test(f)||E.push($a(T.messages.pattern.mismatch,h.fullField,f,h.pattern));else if(typeof h.pattern=="string"){var b=new RegExp(h.pattern);b.test(f)||E.push($a(T.messages.pattern.mismatch,h.fullField,f,h.pattern))}}}var rn={required:s$,whitespace:wue,type:Oue,range:Sue,enum:Cue,pattern:Tue};function Aue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f,"string")&&!h.required)return v();rn.required(h,f,E,b,T,"string"),vs(f,"string")||(rn.type(h,f,E,b,T),rn.range(h,f,E,b,T),rn.pattern(h,f,E,b,T),h.whitespace===!0&&rn.whitespace(h,f,E,b,T))}v(b)}function Eue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),f!==void 0&&rn.type(h,f,E,b,T)}v(b)}function Mue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(f===""&&(f=void 0),vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),f!==void 0&&(rn.type(h,f,E,b,T),rn.range(h,f,E,b,T))}v(b)}function Pue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),f!==void 0&&rn.type(h,f,E,b,T)}v(b)}function kue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),vs(f)||rn.type(h,f,E,b,T)}v(b)}function Iue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),f!==void 0&&(rn.type(h,f,E,b,T),rn.range(h,f,E,b,T))}v(b)}function Rue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),f!==void 0&&(rn.type(h,f,E,b,T),rn.range(h,f,E,b,T))}v(b)}function Bue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(f==null&&!h.required)return v();rn.required(h,f,E,b,T,"array"),f!=null&&(rn.type(h,f,E,b,T),rn.range(h,f,E,b,T))}v(b)}function Due(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),f!==void 0&&rn.type(h,f,E,b,T)}v(b)}var Lue="enum";function Nue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T),f!==void 0&&rn[Lue](h,f,E,b,T)}v(b)}function Vue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f,"string")&&!h.required)return v();rn.required(h,f,E,b,T),vs(f,"string")||rn.pattern(h,f,E,b,T)}v(b)}function Fue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f,"date")&&!h.required)return v();if(rn.required(h,f,E,b,T),!vs(f,"date")){var U;f instanceof Date?U=f:U=new Date(f),rn.type(h,U,E,b,T),U&&rn.range(h,U.getTime(),E,b,T)}}v(b)}function $ue(h,f,v,E,T){var b=[],N=Array.isArray(f)?"array":typeof f;rn.required(h,f,E,b,T,N),v(b)}function kk(h,f,v,E,T){var b=h.type,N=[],U=h.required||!h.required&&E.hasOwnProperty(h.field);if(U){if(vs(f,b)&&!h.required)return v();rn.required(h,f,E,N,T,b),vs(f,b)||rn.type(h,f,E,N,T)}v(N)}function Uue(h,f,v,E,T){var b=[],N=h.required||!h.required&&E.hasOwnProperty(h.field);if(N){if(vs(f)&&!h.required)return v();rn.required(h,f,E,b,T)}v(b)}var Y_={string:Aue,method:Eue,number:Mue,boolean:Pue,regexp:kue,integer:Iue,float:Rue,array:Bue,object:Due,enum:Nue,pattern:Vue,date:Fue,url:kk,hex:kk,email:kk,required:$ue,any:Uue};function Ik(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var h=JSON.parse(JSON.stringify(this));return h.clone=this.clone,h}}}var Rk=Ik();function Zd(h){this.rules=null,this._messages=Rk,this.define(h)}Zd.prototype={messages:function(h){return h&&(this._messages=r$(Ik(),h)),this._messages},define:function(h){if(!h)throw new Error("Cannot configure a schema with no rules");if(typeof h!="object"||Array.isArray(h))throw new Error("Rules must be an object");this.rules={};var f,v;for(f in h)h.hasOwnProperty(f)&&(v=h[f],this.rules[f]=Array.isArray(v)?v:[v])},validate:function(h,f,v){var E=this;f===void 0&&(f={}),v===void 0&&(v=function(){});var T=h,b=f,N=v;if(typeof b=="function"&&(N=b,b={}),!this.rules||Object.keys(this.rules).length===0)return N&&N(),Promise.resolve();function U(we){var ce,Be=[],Zt={};function Ct(Rt){if(Array.isArray(Rt)){var qe;Be=(qe=Be).concat.apply(qe,Rt)}else Be.push(Rt)}for(ce=0;ce<we.length;ce++)Ct(we[ce]);Be.length?Zt=Mk(Be):(Be=null,Zt=null),N(Be,Zt)}if(b.messages){var Y=this.messages();Y===Rk&&(Y=Ik()),r$(Y,b.messages),b.messages=Y}else b.messages=this.messages();var W,Z,fe={},Te=b.keys||Object.keys(this.rules);Te.forEach(function(we){W=E.rules[we],Z=T[we],W.forEach(function(ce){var Be=ce;typeof Be.transform=="function"&&(T===h&&(T=om({},T)),Z=T[we]=Be.transform(Z)),typeof Be=="function"?Be={validator:Be}:Be=om({},Be),Be.validator=E.getValidationMethod(Be),Be.field=we,Be.fullField=Be.fullField||we,Be.type=E.getType(Be),Be.validator&&(fe[we]=fe[we]||[],fe[we].push({rule:Be,value:Z,source:T,field:we}))})});var Se={};return bue(fe,b,function(we,ce){var Be=we.rule,Zt=(Be.type==="object"||Be.type==="array")&&(typeof Be.fields=="object"||typeof Be.defaultField=="object");Zt=Zt&&(Be.required||!Be.required&&we.value),Be.field=we.field;function Ct(Le,rt){return om({},rt,{fullField:Be.fullField+"."+Le})}function Rt(Le){Le===void 0&&(Le=[]);var rt=Le;if(Array.isArray(rt)||(rt=[rt]),!b.suppressWarning&&rt.length&&Zd.warning("async-validator:",rt),rt.length&&Be.message!==void 0&&(rt=[].concat(Be.message)),rt=rt.map(n$(Be)),b.first&&rt.length)return Se[Be.field]=1,ce(rt);if(!Zt)ce(rt);else{if(Be.required&&!we.value)return Be.message!==void 0?rt=[].concat(Be.message).map(n$(Be)):b.error&&(rt=[b.error(Be,$a(b.messages.required,Be.field))]),ce(rt);var et={};if(Be.defaultField)for(var ri in we.value)we.value.hasOwnProperty(ri)&&(et[ri]=Be.defaultField);et=om({},et,we.rule.fields);for(var si in et)if(et.hasOwnProperty(si)){var Xt=Array.isArray(et[si])?et[si]:[et[si]];et[si]=Xt.map(Ct.bind(null,si))}var Lt=new Zd(et);Lt.messages(b.messages),we.rule.options&&(we.rule.options.messages=b.messages,we.rule.options.error=b.error),Lt.validate(we.value,we.rule.options||b,function(Ht){var ui=[];rt&&rt.length&&ui.push.apply(ui,rt),Ht&&Ht.length&&ui.push.apply(ui,Ht),ce(ui.length?ui:null)})}}var qe;Be.asyncValidator?qe=Be.asyncValidator(Be,we.value,Rt,we.source,b):Be.validator&&(qe=Be.validator(Be,we.value,Rt,we.source,b),qe===!0?Rt():qe===!1?Rt(Be.message||Be.field+" fails"):qe instanceof Array?Rt(qe):qe instanceof Error&&Rt(qe.message)),qe&&qe.then&&qe.then(function(){return Rt()},function(Le){return Rt(Le)})},function(we){U(we)})},getType:function(h){if(h.type===void 0&&h.pattern instanceof RegExp&&(h.type="pattern"),typeof h.validator!="function"&&h.type&&!Y_.hasOwnProperty(h.type))throw new Error($a("Unknown rule type %s",h.type));return h.type||"string"},getValidationMethod:function(h){if(typeof h.validator=="function")return h.validator;var f=Object.keys(h),v=f.indexOf("message");return v!==-1&&f.splice(v,1),f.length===1&&f[0]==="required"?Y_.required:Y_[this.getType(h)]||!1}},Zd.register=function(h,f){if(typeof f!="function")throw new Error("Cannot register a validator by type, validator is not a function");Y_[h]=f},Zd.warning=vue,Zd.messages=Rk,Zd.validators=Y_;const q_="ivu-form-item";function o$(h,f){let v=h;f=f.replace(/\[(\w+)\]/g,".$1"),f=f.replace(/^\./,"");let E=f.split("."),T=0;for(let b=E.length;T<b-1;++T){let N=E[T];if(N in v)v=v[N];else throw new Error("[View UI warn]: please transfer a valid prop path to form item!")}return{o:v,k:E[T],v:v[E[T]]}}const zue={name:"FormItem",inject:["FormInstance"],provide(){return{FormItemInstance:this}},props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0},labelFor:{type:String}},data(){return{prefixCls:q_,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:{handler(h){this.validateMessage=h,this.validateState=h?"error":""},immediate:!0},validateStatus(h){this.validateState=h},rules(){this.setRules()},required(h,f){this.isRequired=h,f&&!h&&this.resetField()}},computed:{classes(){return[`${q_}`,{[`${q_}-required`]:this.required||this.isRequired,[`${q_}-error`]:this.validateState==="error",[`${q_}-validating`]:this.validateState==="validating"}]},fieldValue(){const h=this.FormInstance.model;if(!h||!this.prop)return;let f=this.prop;return f.indexOf(":")!==-1&&(f=f.replace(/:/,".")),o$(h,f).v},labelStyles(){let h={};const f=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(f||f===0)&&(h.width=`${f}px`),h},contentStyles(){let h={};const f=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(f||f===0)&&(h.marginLeft=`${f}px`),h}},methods:{setRules(){let h=this.getRules();h.length&&this.required||(h.length?h.every(f=>{this.isRequired=f.required}):this.required&&(this.isRequired=this.required))},getRules(){let h=this.FormInstance.rules;const f=this.rules;return h=h?h[this.prop]:[],[].concat(f||h||[])},getFilteredRule(h){return this.getRules().filter(f=>!f.trigger||f.trigger.indexOf(h)!==-1)},validate(h,f=function(){}){let v=this.getFilteredRule(h);if(!v||v.length===0)if(this.required)v=[{required:!0}];else return f(),!0;this.validateState="validating";let E={};E[this.prop]=v;const T=new Zd(E);let b={};b[this.prop]=this.fieldValue,T.validate(b,{firstFields:!0},N=>{this.validateState=N?"error":"success",this.validateMessage=N?N[0].message:"",f(this.validateMessage),this.FormInstance&&this.FormInstance.$emit("on-validate",this.prop,!N,this.validateMessage||null)}),this.validateDisabled=!1},resetField(){this.validateState="",this.validateMessage="";let h=this.FormInstance.model,f=this.fieldValue,v=this.prop;v.indexOf(":")!==-1&&(v=v.replace(/:/,"."));let E=o$(h,v);Array.isArray(f)&&this.initialValue!==null?(this.validateDisabled=!0,E.o[E.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,E.o[E.k]=this.initialValue)},onFieldBlur(){this.validate("blur")},onFieldChange(){if(this.validateDisabled){this.validateDisabled=!1;return}this.validate("change")},formBlur(){this.onFieldBlur()},formChange(){this.onFieldChange()}},mounted(){this.prop&&(this.FormInstance.addField(this),Object.defineProperty(this,"initialValue",{value:this.fieldValue}),this.setRules())},beforeUnmount(){this.FormInstance.removeField(this)}},Xue=["for"];function Wue(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[v.label||h.$slots.label?(n.openBlock(),n.createElementBlock("label",{key:0,class:n.normalizeClass([T.prefixCls+"-label"]),for:v.labelFor,style:n.normalizeStyle(b.labelStyles)},[n.renderSlot(h.$slots,"label",{},()=>[n.createTextVNode(n.toDisplayString(v.label)+n.toDisplayString(b.FormInstance.colon),1)])],14,Xue)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content"]),style:n.normalizeStyle(b.contentStyles)},[n.renderSlot(h.$slots,"default"),n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[T.validateState==="error"&&v.showMessage&&b.FormInstance.showMessage?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-error-tip"])},n.toDisplayString(T.validateMessage),3)):n.createCommentVNode("",!0)]),_:1})],6)],2)}var kS=l(zue,[["render",Wue]]),Bk={UserName:"请输入用户名！",Password:"请输入密码！",Email:"请输入邮箱！",Mobile:"请输入手机号码！",Captcha:"请输入验证码！"},Z_={inject:["LoginInstance"],emits:["on-change"],props:{rules:{type:[Object,Array],default(){const h=n.getCurrentInstance().type.name;return[{required:!0,message:Bk[h],trigger:"change"}]}},value:{type:String},name:{type:String,required:!0},enterToSubmit:{type:Boolean,default:!1}},data(){return{prop:""}},methods:{handleChange(h){this.LoginInstance.formValidate[this.prop]=h,this.$emit("on-change",h)},handleEnter(){this.enterToSubmit&&this.LoginInstance.handleSubmit()},handleSetValue(){const h=this.$props;h.value&&(this.LoginInstance.formValidate[this.prop]=h.value)},handleGetProps(){let h=this.$props.name;const f={prefix:this.prefix,placeholder:this.placeholder,type:this.type,size:"large",modelValue:this.LoginInstance.formValidate[this.prop]};return h&&(f.name=h),Object.assign(f,this.$attrs)}},render(){const h=this.handleGetProps(),f=n.h(Pl,{...h,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),v=n.h(kS,{prop:this.prop,rules:this.rules},()=>[f]);return n.h("div",{class:this.className},[v])},created(){const h=this.name,f=Object.assign({},this.LoginInstance.formValidate);f[h]="",this.LoginInstance.formValidate=f,this.prop=h,this.handleSetValue()}};const a$={name:"Captcha",mixins:[Z_],emits:["on-get-captcha"],props:{field:{type:[String,Array]},countDown:{type:Number,default:60},text:{type:String},unitText:{type:String,default:"秒"},beforeClick:Function},data(){return{className:"ivu-login-captcha",prefix:"ios-keypad-outline",placeholder:"请输入验证码",type:"text",buttonDisabled:!1,limitCountDown:0}},methods:{handleClickCaptcha(){if(this.field){const h=typeof this.field=="string"?[this.field]:this.field;this.LoginInstance.handleValidate(h,f=>{f&&this.handleBeforeGetCaptcha()})}else this.handleBeforeGetCaptcha()},handleBeforeGetCaptcha(){if(!this.beforeClick)return this.handleGetCaptcha();const h=this.beforeClick();h&&h.then?h.then(()=>{this.handleGetCaptcha()}):this.handleGetCaptcha()},handleGetCaptcha(){this.countDown>0&&(this.buttonDisabled=!0,this.limitCountDown=this.countDown,this.handleCountDown()),this.$emit("on-get-captcha",this.LoginInstance.formValidate[this.prop],JSON.parse(JSON.stringify(this.LoginInstance.formValidate)))},handleCountDown(){this.timer=setTimeout(()=>{this.limitCountDown--,this.limitCountDown===0?(this.buttonDisabled=!1,clearTimeout(this.timer)):this.handleCountDown()},1e3)}},render(){const h=this.$attrs,f=this.handleGetProps(),v={size:"large",type:"default",long:!0,disabled:this.buttonDisabled};"size"in h&&(v.size=h.size),"button-type"in h&&(v.type=h["button-type"]);let E;this.$slots.text?E=this.$slots.text:this.limitCountDown!==0?E=()=>`${this.limitCountDown} ${this.unitText}`:this.text?E=()=>this.text:E=()=>"获取验证码";const T=n.h(Do,{...v,onClick:this.handleClickCaptcha},E),b=n.h(Pl,{...f,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),N=n.h(yc,{span:16},()=>[b]),U=n.h(yc,{span:8},()=>[T]),Y=n.h(qd,{gutter:8},()=>[N,U]),W=n.h(kS,{prop:this.prop,rules:this.rules},()=>[Y]);return n.h("div",{class:this.className},[W])},beforeUnmount(){this.timer&&clearTimeout(this.timer)}},am="ivu-card",l$=16,Gue={name:"Card",mixins:[ve],components:{Icon:O},props:{bordered:{type:Boolean,default:!0},disHover:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},padding:{type:Number,default:l$},title:{type:String},icon:{type:String}},data(){return{showHead:!0,showExtra:!0}},computed:{classes(){return[`${am}`,{[`${am}-bordered`]:this.bordered&&!this.shadow,[`${am}-dis-hover`]:this.disHover||this.shadow,[`${am}-shadow`]:this.shadow}]},headClasses(){return`${am}-head`},extraClasses(){return`${am}-extra`},bodyClasses(){return`${am}-body`},bodyStyles(){return this.padding!==l$?{padding:`${this.padding}px`}:""},isHrefPattern(){const{to:h}=this;return!!h},tagName(){const{isHrefPattern:h}=this;return h?"a":"div"},tagProps(){const{isHrefPattern:h}=this;if(h){const{linkUrl:f,target:v}=this;return{href:f,target:v}}else return{}}},methods:{handleClickLink(h){if(!this.isHrefPattern)return;const f=h.ctrlKey||h.metaKey;this.handleCheckClick(h,f)}},mounted(){this.showHead=this.title||this.$slots.title!==void 0,this.showExtra=this.$slots.extra!==void 0}},Hue={key:0};function Que(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createBlock(n.resolveDynamicComponent(b.tagName),n.mergeProps({class:b.classes},b.tagProps,{onClick:b.handleClickLink}),{default:n.withCtx(()=>[T.showHead?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.headClasses)},[n.renderSlot(h.$slots,"title",{},()=>[v.title?(n.openBlock(),n.createElementBlock("p",Hue,[v.icon?(n.openBlock(),n.createBlock(N,{key:0,type:v.icon},null,8,["type"])):n.createCommentVNode("",!0),n.createElementVNode("span",null,n.toDisplayString(v.title),1)])):n.createCommentVNode("",!0)])],2)):n.createCommentVNode("",!0),T.showExtra?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass(b.extraClasses)},[n.renderSlot(h.$slots,"extra")],2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass(b.bodyClasses),style:n.normalizeStyle(b.bodyStyles)},[n.renderSlot(h.$slots,"default")],6)]),_:3},16,["class","onClick"])}var h$=l(Gue,[["render",Que]]);const M0="ivu-carousel",jue={name:"Carousel",provide(){return{CarouselInstance:this}},components:{Icon:O},emits:["on-change","on-click","update:modelValue"],props:{arrow:{type:String,default:"hover",validator(h){return S(h,["hover","always","never"])}},autoplay:{type:Boolean,default:!1},autoplaySpeed:{type:Number,default:2e3},loop:{type:Boolean,default:!1},easing:{type:String,default:"ease"},dots:{type:String,default:"inside",validator(h){return S(h,["inside","outside","none"])}},radiusDot:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator(h){return S(h,["click","hover"])}},modelValue:{type:Number,default:0},height:{type:[String,Number],default:"auto",validator(h){return h==="auto"||Object.prototype.toString.call(h)==="[object Number]"}}},data(){return{prefixCls:M0,listWidth:0,trackWidth:0,trackOffset:0,trackCopyOffset:0,showCopyTrack:!1,slides:[],slideInstances:[],timer:null,ready:!1,currentIndex:this.modelValue,trackIndex:this.modelValue,copyTrackIndex:this.modelValue,hideTrackPos:-1,carouselItemList:[]}},computed:{classes(){return[`${M0}`]},trackStyles(){const h=this.trackIndex===-1?"hidden":"visible";return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,visibility:h}},copyTrackStyles(){return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackCopyOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,position:"absolute"}},arrowClasses(){return[`${M0}-arrow`,`${M0}-arrow-${this.arrow}`]},dotsClasses(){return[`${M0}-dots`,`${M0}-dots-${this.dots}`]}},methods:{findChild(h){this.carouselItemList.length&&this.carouselItemList.forEach(f=>{h(f.carouselItem)})},initCopyTrackDom(){n.nextTick(()=>{this.$refs.copyTrack.innerHTML=this.$refs.originTrack.innerHTML})},updateSlides(h){let f=[],v=1;this.findChild(E=>{f.push({$el:E.$el}),E.index=v++,h&&this.slideInstances.push(E)}),this.slides=f,this.updatePos()},updatePos(){this.findChild(h=>{h.width=this.listWidth,h.height=typeof this.height=="number"?`${this.height}px`:this.height}),this.trackWidth=(this.slides.length||0)*this.listWidth},slotChange(){n.nextTick(()=>{this.slides=[],this.slideInstances=[],this.updateSlides(!0,!0),this.updatePos(),this.updateOffset()})},handleResize(){this.listWidth=parseInt(I(this.$el,"width")),this.updatePos(),this.updateOffset()},updateTrackPos(h){this.showCopyTrack?this.trackIndex=h:this.copyTrackIndex=h},updateTrackIndex(h){this.showCopyTrack?this.copyTrackIndex=h:this.trackIndex=h,this.currentIndex=h},add(h){let f=this.slides.length;this.loop&&(h>0?this.hideTrackPos=-1:this.hideTrackPos=f,this.updateTrackPos(this.hideTrackPos));const v=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;let E=v+h;for(;E<0;)E+=f;(h>0&&E===f||h<0&&E===f-1)&&this.loop?(this.showCopyTrack=!this.showCopyTrack,this.trackIndex+=h,this.copyTrackIndex+=h):(this.loop||(E=E%this.slides.length),this.updateTrackIndex(E)),this.currentIndex=E===this.slides.length?0:E,this.$emit("on-change",v,this.currentIndex),this.$emit("update:modelValue",this.currentIndex)},arrowEvent(h){this.setAutoplay(),this.add(h)},dotsEvent(h,f){let v=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;const E=this.currentIndex;h===this.trigger&&v!==f&&(this.updateTrackIndex(f),this.$emit("on-change",E,this.currentIndex),this.$emit("update:modelValue",f),this.setAutoplay())},setAutoplay(){!s||(window.clearInterval(this.timer),this.autoplay&&(this.timer=window.setInterval(()=>{this.add(1)},this.autoplaySpeed)))},updateOffset(){n.nextTick(()=>{let h=this.copyTrackIndex>0?-1:1;this.trackOffset=this.trackIndex*this.listWidth,this.trackCopyOffset=this.copyTrackIndex*this.listWidth+h})},handleClick(h){this.$emit("on-click",this[h])}},watch:{autoplay(){this.setAutoplay()},autoplaySpeed(){this.setAutoplay()},trackIndex(){this.updateOffset()},copyTrackIndex(){this.updateOffset()},height(){this.updatePos()},modelValue(h){this.updateTrackIndex(h),this.setAutoplay()}},mounted(){this.updateSlides(!0),this.handleResize(),this.setAutoplay(),o(window,"resize",this.handleResize)},beforeUnmount(){a(window,"resize",this.handleResize)}},Yue=["onClick","onMouseover"];function que(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.createElementVNode("button",{type:"button",class:n.normalizeClass([b.arrowClasses,"left"]),onClick:f[0]||(f[0]=U=>b.arrowEvent(-1))},[n.createVNode(N,{type:"ios-arrow-back"})],2),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-list"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-track",T.showCopyTrack?"":"higher"]),style:n.normalizeStyle(b.trackStyles),ref:"originTrack",onClick:f[1]||(f[1]=U=>b.handleClick("currentIndex"))},[n.renderSlot(h.$slots,"default")],6),v.loop?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-track",T.showCopyTrack?"higher":""]),style:n.normalizeStyle(b.copyTrackStyles),ref:"copyTrack",onClick:f[2]||(f[2]=U=>b.handleClick("copyTrackIndex"))},null,6)):n.createCommentVNode("",!0)],2),n.createElementVNode("button",{type:"button",class:n.normalizeClass([b.arrowClasses,"right"]),onClick:f[3]||(f[3]=U=>b.arrowEvent(1))},[n.createVNode(N,{type:"ios-arrow-forward"})],2),n.createElementVNode("ul",{class:n.normalizeClass(b.dotsClasses)},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.slides.length,U=>(n.openBlock(),n.createElementBlock("li",{key:U,class:n.normalizeClass([U-1===T.currentIndex?T.prefixCls+"-active":""]),onClick:Y=>b.dotsEvent("click",U-1),onMouseover:Y=>b.dotsEvent("hover",U-1)},[n.createElementVNode("button",{type:"button",class:n.normalizeClass([v.radiusDot?"radius":""])},null,2)],42,Yue))),128))],2)],2)}var c$=l(jue,[["render",que]]);const Zue="ivu-carousel-item",Kue={componentName:"carousel-item",name:"CarouselItem",inject:["CarouselInstance"],data(){return{prefixCls:Zue,width:0,height:"auto",left:0,id:ie(6)}},computed:{styles(){return{width:`${this.width}px`,height:`${this.height}`,left:`${this.left}px`}}},watch:{width(h){h&&this.CarouselInstance.loop&&n.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})},height(h){h&&this.CarouselInstance.loop&&n.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})}},methods:{addInstance(){const h=this.CarouselInstance;h.carouselItemList||(h.carouselItemList=[]),h.carouselItemList.push({id:this.id,carouselItem:this})},removeInstance(){const h=this.CarouselInstance;if(!h.carouselItemList)return;const f=h.carouselItemList.findIndex(v=>v.id===this.id);h.carouselItemList.splice(f,1)}},mounted(){this.addInstance(),this.CarouselInstance.slotChange()},beforeUnmount(){this.removeInstance(),this.CarouselInstance.slotChange()}};function Jue(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(T.prefixCls),style:n.normalizeStyle(b.styles)},[n.renderSlot(h.$slots,"default")],6)}var u$=l(Kue,[["render",Jue]]);const ede={name:"Casitem",components:{Icon:O},mixins:[Sh],props:{data:Object,prefixCls:String,tmpItem:Object},computed:{classes(){return[`${this.prefixCls}-menu-item`,{[`${this.prefixCls}-menu-item-active`]:this.tmpItem.value===this.data.value,[`${this.prefixCls}-menu-item-disabled`]:this.data.disabled}]},showArrow(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},arrowType(){const h=this.globalConfig;let f="ios-arrow-forward";return h&&(h.cascader.customItemArrow?f="":h.cascader.itemArrow&&(f=h.cascader.itemArrow)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.cascader.customItemArrow&&(f=h.cascader.customItemArrow),f},arrowSize(){const h=this.globalConfig;let f="";return h&&h.cascader.itemArrowSize&&(f=h.cascader.itemArrowSize),f}}},tde={key:1,class:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"};function ide(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.classes)},[n.createTextVNode(n.toDisplayString(v.data.label)+" ",1),b.showArrow?(n.openBlock(),n.createBlock(N,{key:0,type:b.arrowType,custom:b.customArrowType,size:b.arrowSize},null,8,["type","custom","size"])):n.createCommentVNode("",!0),b.showLoading?(n.openBlock(),n.createElementBlock("i",tde)):n.createCommentVNode("",!0)],2)}var nde=l(ede,[["render",ide]]);let rde=1;const sde={name:"Caspanel",components:{Casitem:nde},inject:["CascaderInstance"],provide(){return{CaspanelInstance:this}},props:{data:{type:Array,default(){return[]}},disabled:Boolean,changeOnSelect:Boolean,trigger:String,prefixCls:String},data(){return{tmpItem:{},result:[],sublist:[],id:ie(6),childCaspanelList:[]}},watch:{data(){this.sublist=[]}},methods:{handleClickItem(h){this.trigger!=="click"&&h.children&&h.children.length||this.handleTriggerItem(h,!1,!0)},handleHoverItem(h){this.trigger!=="hover"||!h.children||!h.children.length||this.handleTriggerItem(h,!1,!0)},handleTriggerItem(h,f=!1,v=!1){if(h.disabled)return;const E=L(this,"Cascader");if(h.loading!==void 0&&!h.children.length&&E&&E.loadData){E.loadData(h,()=>{v&&(E.isLoadedChildren=!0),h.children.length&&this.handleTriggerItem(h)});return}const T=this.getBaseItem(h);(this.changeOnSelect||T.label!==this.tmpItem.label||T.value!==this.tmpItem.value||T.label===this.tmpItem.label&&T.value===this.tmpItem.value)&&(this.tmpItem=T,this.emitUpdate([T])),h.children&&h.children.length?(this.sublist=h.children,this.CascaderInstance.handleOnResultChange({lastValue:!1,changeOnSelect:this.changeOnSelect,fromInit:f}),this.changeOnSelect&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)):(this.sublist=[],this.CascaderInstance.handleOnResultChange({lastValue:!0,changeOnSelect:this.changeOnSelect,fromInit:f})),E&&E.$refs.drop.update()},updateResult(h){this.result=[this.tmpItem].concat(h),this.emitUpdate(this.result)},getBaseItem(h){let f=Object.assign({},h);return f.children&&delete f.children,f},emitUpdate(h){this.$parent.$options.name==="Caspanel"?this.$parent.updateResult(h):this.CascaderInstance.updateResult(h)},getKey(){return rde++},handleOnFindSelected(h){let f=[...h.value];for(let v=0;v<f.length;v++)for(let E=0;E<this.data.length;E++)if(f[v]===this.data[E].value)return this.handleTriggerItem(this.data[E],!0),f.splice(0,1),n.nextTick(()=>{this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnFindSelected({value:f})}),!1},handleOnClear(h=!1){this.sublist=[],this.tmpItem={},h&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)},addCaspanel(){const h=this.CascaderInstance;h.caspanelList||(h.caspanelList=[]),h.caspanelList.push({id:this.id,caspanel:this});const f=L(this,"Caspanel");f&&(f.childCaspanelList||(f.childCaspanelList=[]),f.childCaspanelList.push({id:this.id,caspanel:this}))},removeCaspanel(){const h=this.CascaderInstance;if(h.caspanelList&&h.caspanelList.length){const v=h.caspanelList.findIndex(E=>E.id===this.id);h.caspanelList.splice(v,1)}const f=L(this,"Caspanel");if(f&&f.childCaspanelList&&f.childCaspanelList.length){const v=f.childCaspanelList.findIndex(E=>E.id===this.id);f.childCaspanelList.splice(v,1)}}},mounted(){this.addCaspanel()},beforeUnmount(){this.removeCaspanel()}};function ode(h,f,v,E,T,b){const N=n.resolveComponent("Casitem"),U=n.resolveComponent("Caspanel",!0);return n.openBlock(),n.createElementBlock("span",null,[v.data&&v.data.length?(n.openBlock(),n.createElementBlock("ul",{key:0,class:n.normalizeClass([v.prefixCls+"-menu"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.data,(Y,W)=>(n.openBlock(),n.createBlock(N,{key:W,"prefix-cls":v.prefixCls,data:Y,"tmp-item":T.tmpItem,onClick:n.withModifiers(Z=>b.handleClickItem(Y),["stop"]),onMouseenter:n.withModifiers(Z=>b.handleHoverItem(Y),["stop"])},null,8,["prefix-cls","data","tmp-item","onClick","onMouseenter"]))),128))],2)):n.createCommentVNode("",!0),T.sublist&&T.sublist.length?(n.openBlock(),n.createBlock(U,{key:1,"prefix-cls":v.prefixCls,data:T.sublist,disabled:v.disabled,trigger:v.trigger,"change-on-select":v.changeOnSelect},null,8,["prefix-cls","data","disabled","trigger","change-on-select"])):n.createCommentVNode("",!0)])}var ade=l(sde,[["render",ode]]),Dk={beforeMount(h,f,v){function E(T){if(h.contains(T.target))return!1;f.value(T)}h.__vueClickOutside__=E,s&&document.addEventListener("click",E)},unmounted(h,f){s&&document.removeEventListener("click",h.__vueClickOutside__),delete h.__vueClickOutside__}};const Kd="ivu-cascader",lde="ivu-select",hde={name:"Cascader",mixins:[kn,Ui,Sh],components:{iInput:Pl,Drop:Ze,Icon:O,Caspanel:ade},directives:{clickOutside:Dk},emits:["on-change","on-visible-change","update:modelValue"],provide(){return{CascaderInstance:this}},props:{data:{type:Array,default(){return[]}},modelValue:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},trigger:{validator(h){return S(h,["click","hover"])},default:"click"},changeOnSelect:{type:Boolean,default:!1},renderFormat:{type:Function,default(h){return h.join(" / ")}},loadData:{type:Function},filterable:{type:Boolean,default:!1},notFoundText:{type:String},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},capture:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return h.$VIEWUI?h.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:Kd,selectPrefixCls:lde,visible:!1,selected:[],tmpSelected:[],updatingValue:!1,currentValue:this.modelValue||[],query:"",validDataStr:"",isLoadedChildren:!1,isValueNull:!1,caspanelList:[]}},computed:{classes(){return[`${Kd}`,{[`${Kd}-show-clear`]:this.showCloseIcon,[`${Kd}-size-${this.size}`]:!!this.size,[`${Kd}-visible`]:this.visible,[`${Kd}-disabled`]:this.itemDisabled,[`${Kd}-not-found`]:this.filterable&&this.query!==""&&!this.querySelections.length}]},showCloseIcon(){return this.currentValue&&this.currentValue.length&&this.clearable&&!this.itemDisabled},displayRender(){let h=[];for(let f=0;f<this.selected.length;f++)h.push(this.selected[f].label);return this.renderFormat(h,this.selected)},displayInputRender(){return this.filterable?"":this.displayRender},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},inputPlaceholder(){return this.filterable&&this.currentValue.length?null:this.localePlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.select.noMatch"):this.notFoundText},querySelections(){let h=[];function f(v,E,T){const b=V(v);for(let N=0;N<b.length;N++){let U=b[N];U.__label=E?E+" / "+U.label:U.label,U.__value=T?T+","+U.value:U.value,U.children&&U.children.length?(f(U.children,U.__label,U.__value),delete U.__label,delete U.__value):h.push({label:U.__label,value:U.__value,display:U.__label,item:U,disabled:!!U.disabled})}}return f(this.data),h=h.filter(v=>v.label?v.label.indexOf(this.query)>-1:!1).map(v=>(v.display=v.display.replace(new RegExp(this.query,"g"),`<span>${this.query}</span>`),v)),h},arrowType(){const h=this.globalConfig;let f="ios-arrow-down";return h&&(h.cascader.customArrow?f="":h.cascader.arrow&&(f=h.cascader.arrow)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.cascader.customArrow&&(f=h.cascader.customArrow),f},arrowSize(){const h=this.globalConfig;let f="";return h&&h.cascader.arrowSize&&(f=h.cascader.arrowSize),f},dropdownCls(){return{[Kd+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{clearSelect(){if(this.itemDisabled)return!1;const h=JSON.stringify(this.currentValue);this.currentValue=this.selected=this.tmpSelected=[],this.handleClose(),this.emitValue(this.currentValue,h),this.caspanelList.forEach(f=>{f.caspanel.handleOnClear()})},handleClose(){this.visible=!1},toggleOpen(){if(this.itemDisabled)return!1;this.visible?this.filterable||this.handleClose():this.onFocus()},onFocus(){this.visible=!0,this.currentValue.length||this.caspanelList.forEach(h=>{h.caspanel.handleOnClear()})},updateResult(h){this.tmpSelected=h},updateSelected(h=!1,f=!1){(!this.changeOnSelect||h||f)&&this.caspanelList.forEach(v=>{v.caspanel.handleOnFindSelected({value:this.currentValue})})},emitValue(h,f){JSON.stringify(h)!==f&&(this.$emit("on-change",this.currentValue,JSON.parse(JSON.stringify(this.selected))),n.nextTick(()=>{this.handleFormItemChange("change",{value:this.currentValue,selected:JSON.parse(JSON.stringify(this.selected))})}))},handleInput(h){this.query=h.target.value},handleSelectItem(h){const f=this.querySelections[h];if(f.item.disabled)return!1;this.query="",this.$refs.input.currentValue="";const v=JSON.stringify(this.currentValue);this.currentValue=f.value.split(","),setTimeout(()=>{this.emitValue(this.currentValue,v),this.handleClose()},0)},handleFocus(){this.$refs.input.focus()},getValidData(h){const f=V(h);function v(E){const T=Object.assign({},E);return"loading"in T&&delete T.loading,"__value"in T&&delete T.__value,"__label"in T&&delete T.__label,"children"in T&&T.children.length&&(T.children=T.children.map(b=>v(b))),T}return f.map(E=>v(E))},handleOnResultChange(h){const f=h.lastValue,v=h.changeOnSelect,E=h.fromInit;if(f||v){const T=JSON.stringify(this.currentValue);this.selected=this.tmpSelected;let b=[];this.selected.forEach(N=>{b.push(N.value)}),E||(this.updatingValue=!0,this.currentValue=b,this.emitValue(this.currentValue,T))}f&&!E&&this.handleClose()}},created(){this.validDataStr=JSON.stringify(this.getValidData(this.data))},mounted(){this.updateSelected(!0)},watch:{visible(h){h?(this.currentValue.length&&this.updateSelected(),this.transfer&&this.$refs.drop.update(),this.$refs.drop.handleOnUpdatePopper()):(this.filterable&&(this.query="",this.$refs.input.currentValue=""),this.transfer&&this.$refs.drop.destroy(),this.$refs.drop.handleOnDestroyPopper()),this.$emit("on-visible-change",h)},modelValue(h){h===null&&(this.isValueNull=!0),this.currentValue=h||[],(h===null||!h.length)&&(this.selected=[])},currentValue(){if(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",this.currentValue),this.updatingValue){this.updatingValue=!1;return}this.updateSelected(!0)},data:{deep:!0,handler(){const h=JSON.stringify(this.getValidData(this.data));h!==this.validDataStr&&(this.validDataStr=h,this.isLoadedChildren||n.nextTick(()=>this.updateSelected(!1,this.changeOnSelect)),this.isLoadedChildren=!1)}}}},cde=["name","value"],ude=["onClick","innerHTML"];function dde(h,f,v,E,T,b){const N=n.resolveComponent("i-input"),U=n.resolveComponent("Icon"),Y=n.resolveComponent("Caspanel"),W=n.resolveComponent("Drop"),Z=n.resolveDirective("click-outside");return n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-rel"]),onClick:f[1]||(f[1]=(...fe)=>b.toggleOpen&&b.toggleOpen(...fe)),ref:"reference"},[n.createElementVNode("input",{type:"hidden",name:v.name,value:T.currentValue},null,8,cde),n.renderSlot(h.$slots,"default",{},()=>[n.createVNode(N,{"element-id":v.elementId,ref:"input",readonly:!v.filterable,disabled:h.itemDisabled,modelValue:b.displayInputRender,onOnChange:b.handleInput,size:v.size,placeholder:b.inputPlaceholder},null,8,["element-id","readonly","disabled","modelValue","onOnChange","size","placeholder"]),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-label"]),onClick:f[0]||(f[0]=(...fe)=>b.handleFocus&&b.handleFocus(...fe))},n.toDisplayString(b.displayRender),3),[[n.vShow,v.filterable&&T.query===""]]),n.withDirectives(n.createVNode(U,{type:"ios-close-circle",class:n.normalizeClass([T.prefixCls+"-arrow"]),onClick:n.withModifiers(b.clearSelect,["stop"])},null,8,["class","onClick"]),[[n.vShow,b.showCloseIcon]]),n.createVNode(U,{type:b.arrowType,custom:b.customArrowType,size:b.arrowSize,class:n.normalizeClass([T.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])])],2),n.createVNode(W,{ref:"drop",visible:T.visible,classes:b.dropdownCls,eventsEnabled:v.eventsEnabled,"transition-name":"transition-drop",transfer:v.transfer},{default:n.withCtx(()=>[n.createElementVNode("div",null,[n.withDirectives(n.createVNode(Y,{ref:"caspanel","prefix-cls":T.prefixCls,data:v.data,disabled:h.itemDisabled,"change-on-select":v.changeOnSelect,trigger:v.trigger},null,8,["prefix-cls","data","disabled","change-on-select","trigger"]),[[n.vShow,!v.filterable||v.filterable&&T.query===""]]),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-dropdown"])},[n.createElementVNode("ul",{class:n.normalizeClass([T.selectPrefixCls+"-dropdown-list"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.querySelections,(fe,Te)=>(n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass([T.selectPrefixCls+"-item",{[T.selectPrefixCls+"-item-disabled"]:fe.disabled}]),key:Te,onClick:Se=>b.handleSelectItem(Te),innerHTML:fe.display},null,10,ude))),128))],2)],2),[[n.vShow,v.filterable&&T.query!==""&&b.querySelections.length]]),n.withDirectives(n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls+"-not-found-tip"])},[n.createElementVNode("li",null,n.toDisplayString(b.localeNotFoundText),1)],2),[[n.vShow,v.filterable&&T.query!==""&&!b.querySelections.length||!v.data.length]])])]),_:1},8,["visible","classes","eventsEnabled","transfer"])],2)),[[Z,b.handleClose]])}var d$=l(hde,[["render",dde]]);const fde={name:"CellItem",props:{title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""}}},pde={class:"ivu-cell-item"},mde={class:"ivu-cell-icon"},gde={class:"ivu-cell-main"},vde={class:"ivu-cell-title"},yde={class:"ivu-cell-label"},_de={class:"ivu-cell-footer"},xde={class:"ivu-cell-extra"};function bde(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",pde,[n.createElementVNode("div",mde,[n.renderSlot(h.$slots,"icon")]),n.createElementVNode("div",gde,[n.createElementVNode("div",vde,[n.renderSlot(h.$slots,"default",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])]),n.createElementVNode("div",yde,[n.renderSlot(h.$slots,"label",{},()=>[n.createTextVNode(n.toDisplayString(v.label),1)])])]),n.createElementVNode("div",_de,[n.createElementVNode("span",xde,[n.renderSlot(h.$slots,"extra",{},()=>[n.createTextVNode(n.toDisplayString(v.extra),1)])])])])}var wde=l(fde,[["render",bde]]);const K_="ivu-cell",Ode={name:"Cell",inject:["CellGroupInstance"],mixins:[ve,Sh],components:{CellItem:wde,Icon:O},props:{name:{type:[String,Number]},title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},data(){return{prefixCls:K_}},computed:{classes(){return[`${K_}`,{[`${K_}-disabled`]:this.disabled,[`${K_}-selected`]:this.selected,[`${K_}-with-link`]:this.to}]},arrowType(){const h=this.globalConfig;let f="ios-arrow-forward";return h&&(h.cell.customArrow?f="":h.cell.arrow&&(f=h.cell.arrow)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.cell.customArrow&&(f=h.cell.customArrow),f},arrowSize(){const h=this.globalConfig;let f="";return h&&h.cell.arrowSize&&(f=h.cell.arrowSize),f}},methods:{handleClickItem(h,f){this.CellGroupInstance.handleClick(this.name),this.handleCheckClick(h,f)}}},Sde=["href","target"],Cde={key:2,class:"ivu-cell-arrow"};function Tde(h,f,v,E,T,b){const N=n.resolveComponent("CellItem"),U=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[h.to?(n.openBlock(),n.createElementBlock("a",{key:0,href:h.linkUrl,target:h.target,class:"ivu-cell-link",onClick:[f[0]||(f[0]=n.withModifiers(Y=>b.handleClickItem(Y,!1),["exact"])),f[1]||(f[1]=n.withModifiers(Y=>b.handleClickItem(Y,!0),["ctrl"])),f[2]||(f[2]=n.withModifiers(Y=>b.handleClickItem(Y,!0),["meta"]))]},[n.createVNode(N,{title:v.title,label:v.label,extra:v.extra},{icon:n.withCtx(()=>[n.renderSlot(h.$slots,"icon")]),default:n.withCtx(()=>[n.renderSlot(h.$slots,"default")]),extra:n.withCtx(()=>[n.renderSlot(h.$slots,"extra")]),label:n.withCtx(()=>[n.renderSlot(h.$slots,"label")]),_:3},8,["title","label","extra"])],8,Sde)):(n.openBlock(),n.createElementBlock("div",{key:1,class:"ivu-cell-link",onClick:f[3]||(f[3]=(...Y)=>b.handleClickItem&&b.handleClickItem(...Y))},[n.createVNode(N,{title:v.title,label:v.label,extra:v.extra},{icon:n.withCtx(()=>[n.renderSlot(h.$slots,"icon")]),default:n.withCtx(()=>[n.renderSlot(h.$slots,"default")]),extra:n.withCtx(()=>[n.renderSlot(h.$slots,"extra")]),label:n.withCtx(()=>[n.renderSlot(h.$slots,"label")]),_:3},8,["title","label","extra"])])),h.to?(n.openBlock(),n.createElementBlock("div",Cde,[n.renderSlot(h.$slots,"arrow",{},()=>[n.createVNode(U,{type:b.arrowType,custom:b.customArrowType,size:b.arrowSize},null,8,["type","custom","size"])])])):n.createCommentVNode("",!0)],2)}var f$=l(Ode,[["render",Tde]]);const Ade={name:"CellGroup",emits:["on-click"],provide(){return{CellGroupInstance:this}},methods:{handleClick(h){this.$emit("on-click",h)}}},Ede={class:"ivu-cell-group"};function Mde(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",Ede,[n.renderSlot(h.$slots,"default")])}var p$=l(Ade,[["render",Mde]]);const Ua="ivu-checkbox",Pde={name:"Checkbox",mixins:[Ui],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[`${Ua}-wrapper`,{[`${Ua}-group-item`]:this.group,[`${Ua}-wrapper-checked`]:this.currentValue,[`${Ua}-wrapper-disabled`]:this.itemDisabled,[`${Ua}-${this.size}`]:!!this.size,[`${Ua}-border`]:this.border}]},checkboxClasses(){return[`${Ua}`,{[`${Ua}-checked`]:this.currentValue,[`${Ua}-disabled`]:this.itemDisabled,[`${Ua}-indeterminate`]:this.indeterminate}]},innerClasses(){return[`${Ua}-inner`,{[`${Ua}-focus`]:this.focusInner}]},inputClasses(){return`${Ua}-input`},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=this.$slots.default!==void 0)},methods:{change(h){if(this.itemDisabled)return!1;const f=h.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",f),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",f),this.handleFormItemChange("change",f))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(h){if(!(h===this.trueValue||h===this.falseValue))throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(h){this.model=h||[]},immediate:!0}}},kde=["disabled","value","name"],Ide=["disabled","checked","name"],Rde={key:0,class:"ivu-checkbox-label-text"};function Bde(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("label",{class:n.normalizeClass(b.wrapClasses)},[n.createElementVNode("span",{class:n.normalizeClass(b.checkboxClasses)},[n.createElementVNode("span",{class:n.normalizeClass(b.innerClasses)},null,2),b.group?n.withDirectives((n.openBlock(),n.createElementBlock("input",{key:0,type:"checkbox",class:n.normalizeClass(b.inputClasses),disabled:h.itemDisabled,value:v.label,"onUpdate:modelValue":f[0]||(f[0]=N=>T.model=N),name:v.name,onChange:f[1]||(f[1]=(...N)=>b.change&&b.change(...N)),onFocus:f[2]||(f[2]=(...N)=>b.onFocus&&b.onFocus(...N)),onBlur:f[3]||(f[3]=(...N)=>b.onBlur&&b.onBlur(...N))},null,42,kde)),[[n.vModelCheckbox,T.model]]):(n.openBlock(),n.createElementBlock("input",{key:1,type:"checkbox",class:n.normalizeClass(b.inputClasses),disabled:h.itemDisabled,checked:b.currentValue,name:v.name,onChange:f[4]||(f[4]=(...N)=>b.change&&b.change(...N)),onFocus:f[5]||(f[5]=(...N)=>b.onFocus&&b.onFocus(...N)),onBlur:f[6]||(f[6]=(...N)=>b.onBlur&&b.onBlur(...N))},null,42,Ide))],2),T.showSlot?(n.openBlock(),n.createElementBlock("span",Rde,[n.renderSlot(h.$slots,"default",{},()=>[n.createTextVNode(n.toDisplayString(v.label),1)])])):n.createCommentVNode("",!0)],2)}var P0=l(Pde,[["render",Bde]]);const Dde="ivu-checkbox-group",Lde={name:"CheckboxGroup",mixins:[Ui],emits:["update:modelValue","on-change"],provide(){return{CheckboxGroupInstance:this}},props:{modelValue:{type:Array,default(){return[]}},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}}},data(){return{currentValue:this.modelValue||[],children:[]}},computed:{classes(){return[`${Dde}`,{[`ivu-checkbox-${this.size}`]:!!this.size}]}},methods:{change(h){this.currentValue=h,this.$emit("update:modelValue",h),this.$emit("on-change",h),this.handleFormItemChange("change",h)}}};function Nde(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.renderSlot(h.$slots,"default")],2)}var Lk=l(Lde,[["render",Nde]]);const m$="ivu-chart-circle",Vde={name:"iCircle",props:{percent:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:6},strokeColor:{type:[String,Array],default:"#2d8cf0"},strokeLinecap:{validator(h){return S(h,["square","round"])},default:"round"},trailWidth:{type:Number,default:5},trailColor:{type:String,default:"#eaeef2"},dashboard:{type:Boolean,default:!1}},data(){return{id:`ivu-chart-circle-${ie(3)}`}},computed:{circleSize(){return{width:`${this.size}px`,height:`${this.size}px`}},computedStrokeWidth(){return this.percent===0&&this.dashboard?0:this.strokeWidth},radius(){return 50-this.strokeWidth/2},pathString(){return this.dashboard?`M 50,50 m 0,${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}`:`M 50,50 m 0,-${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}`},len(){return Math.PI*2*this.radius},trailStyle(){let h={};return this.dashboard&&(h={"stroke-dasharray":`${this.len-75}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}),h},pathStyle(){let h={};return this.dashboard?h={"stroke-dasharray":`${this.percent/100*(this.len-75)}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .6s ease 0s, stroke .6s, stroke-width .06s ease .6s"}:h={"stroke-dasharray":`${this.len}px ${this.len}px`,"stroke-dashoffset":`${(100-this.percent)/100*this.len}px`,transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"},h},wrapClasses(){return`${m$}`},innerClasses(){return`${m$}-inner`},strokeValue(){let h=this.strokeColor;return typeof this.strokeColor!="string"&&(h=`url(#${this.id})`),h},showDefs(){return typeof this.strokeColor!="string"}}},Fde={viewBox:"0 0 100 100"},$de={key:0},Ude=["id"],zde=["stop-color"],Xde=["stop-color"],Wde=["d","stroke","stroke-width","stroke-linecap"],Gde=["d","stroke-linecap","stroke","stroke-width"];function Hde(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{style:n.normalizeStyle(b.circleSize),class:n.normalizeClass(b.wrapClasses)},[(n.openBlock(),n.createElementBlock("svg",Fde,[b.showDefs?(n.openBlock(),n.createElementBlock("defs",$de,[n.createElementVNode("linearGradient",{id:T.id,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[n.createElementVNode("stop",{offset:"0%","stop-color":v.strokeColor[0]},null,8,zde),n.createElementVNode("stop",{offset:"100%","stop-color":v.strokeColor[1]},null,8,Xde)],8,Ude)])):n.createCommentVNode("",!0),n.createElementVNode("path",{d:b.pathString,stroke:v.trailColor,"stroke-width":v.trailWidth,"fill-opacity":0,style:n.normalizeStyle(b.trailStyle),"stroke-linecap":v.strokeLinecap},null,12,Wde),n.createElementVNode("path",{d:b.pathString,"stroke-linecap":v.strokeLinecap,stroke:b.strokeValue,"stroke-width":b.computedStrokeWidth,"fill-opacity":"0",style:n.normalizeStyle(b.pathStyle)},null,12,Gde)])),n.createElementVNode("div",{class:n.normalizeClass(b.innerClasses)},[n.renderSlot(h.$slots,"default")],2)],6)}var IS=l(Vde,[["render",Hde]]);const RS="ivu-dropdown",Qde={name:"Dropdown",directives:{clickOutside:Dk},components:{Drop:Ze},emits:["on-visible-change","on-clickoutside","on-click","on-hover-click","on-haschild-click"],props:{trigger:{validator(h){return S(h,["click","hover","custom","contextMenu"])},default:"hover"},placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},visible:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},transferClassName:{type:String},stopPropagation:{type:Boolean,default:!1},capture:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return h.$VIEWUI?h.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1},boundariesElement:{default:"window"}},computed:{transition(){return["bottom-start","bottom","bottom-end"].indexOf(this.placement)>-1?"slide-up":"fade"},dropdownCls(){return{[RS+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}},relClasses(){return[`${RS}-rel`,{[`${RS}-rel-user-select-none`]:this.trigger==="contextMenu"}]}},data(){return{prefixCls:RS,currentVisible:this.visible,timeout:null}},watch:{visible(h){this.currentVisible=h},currentVisible(h){h?this.$refs.drop.update():this.$refs.drop.destroy(),this.$emit("on-visible-change",h)}},methods:{handleClick(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.hasParent()||(this.currentVisible=!this.currentVisible)},handleRightClick(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!this.currentVisible},handleMouseenter(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!0},250)},handleMouseleave(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!1},150))},onClickoutside(h){this.handleClose(),this.handleRightClose(),this.currentVisible&&this.$emit("on-clickoutside",h)},handleClose(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.currentVisible=!1},handleRightClose(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!1},hasParent(){return L(this,"Dropdown")||!1},handleHaschildClick(){n.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!0});const h=this.hasParent();h&&h.handleHaschildClick()},handleItemClick(h){if(this.stopPropagation)return;const f=this.hasParent();f?f.handleItemClick(h):this.$emit("on-click",h)},handleHoverClick(){const h=this.hasParent();h?(n.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1}),h.handleHoverClick()):n.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1})}}};function jde(h,f,v,E,T,b){const N=n.resolveComponent("Drop"),U=n.resolveDirective("click-outside");return n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls]),onMouseenter:f[2]||(f[2]=(...Y)=>b.handleMouseenter&&b.handleMouseenter(...Y)),onMouseleave:f[3]||(f[3]=(...Y)=>b.handleMouseleave&&b.handleMouseleave(...Y))},[n.createElementVNode("div",{class:n.normalizeClass(b.relClasses),ref:"reference",onClick:f[0]||(f[0]=(...Y)=>b.handleClick&&b.handleClick(...Y)),onContextmenu:f[1]||(f[1]=n.withModifiers((...Y)=>b.handleRightClick&&b.handleRightClick(...Y),["prevent"]))},[n.renderSlot(h.$slots,"default")],34),n.createVNode(N,{ref:"drop",visible:T.currentVisible,classes:b.dropdownCls,placement:v.placement,eventsEnabled:v.eventsEnabled,boundariesElement:v.boundariesElement,transfer:v.transfer,"transition-name":"transition-drop",onMouseenter:b.handleMouseenter,onMouseleave:b.handleMouseleave},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"list")]),_:3},8,["visible","classes","placement","eventsEnabled","boundariesElement","transfer","onMouseenter","onMouseleave"])],34)),[[U,b.onClickoutside]])}var lm=l(Qde,[["render",jde]]);const Yde={name:"DropdownMenu"},qde={class:"ivu-dropdown-menu"};function Zde(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("ul",qde,[n.renderSlot(h.$slots,"default")])}var hm=l(Yde,[["render",Zde]]);const kl="ivu-tag",Tu=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],Kde=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],Jde={name:"Tag",components:{Icon:O},emits:["on-change","on-close"],props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(h){return S(h,["border","dot"])}},name:{type:[String,Number]},size:{validator(h){return S(h,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[`${kl}`,`${kl}-size-${this.size}`,{[`${kl}-${this.color}`]:!!this.color&&S(this.color,Tu),[`${kl}-${this.type}`]:!!this.type,[`${kl}-closable`]:this.closable,[`${kl}-checked`]:this.isChecked,[`${kl}-checkable`]:this.checkable}]},wraperStyles(){return S(this.color,Tu)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:this.type!=="dot"&&this.type!=="border"&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[`${kl}-text`,this.type==="border"&&S(this.color,Tu)?`${kl}-color-${this.color}`:"",this.type!=="dot"&&this.type!=="border"&&this.color!=="default"&&this.isChecked&&Kde.indexOf(this.color)<0?`${kl}-color-white`:""]},dotClasses(){return`${kl}-dot-inner`},iconClass(){return this.type==="dot"?"":this.type==="border"?S(this.color,Tu)?`${kl}-color-${this.color}`:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&this.type==="dot"},lineColor(){return this.type==="dot"?"":this.type==="border"?this.color!==void 0?S(this.color,Tu)?"":this.color:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},borderColor(){return this.color!==void 0?this.color==="default"?"":this.color:""},dotColor(){return this.color!==void 0?S(this.color,Tu)?"":this.color:""},textColorStyle(){return S(this.color,Tu)?{}:this.type!=="dot"&&this.type!=="border"?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return S(this.color,Tu)?{}:{background:this.dotColor}},defaultTypeColor(){return this.type!=="dot"&&this.type!=="border"&&this.color!==void 0?S(this.color,Tu)?"":this.color:""}},methods:{close(h){this.name===void 0?this.$emit("on-close",h):this.$emit("on-close",h,this.name)},check(){if(!this.checkable)return;const h=!this.isChecked;this.isChecked=h,this.name===void 0?this.$emit("on-change",h):this.$emit("on-change",h,this.name)}},watch:{checked(h){this.isChecked=h}}};function efe(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),onClick:f[0]||(f[0]=n.withModifiers((...U)=>b.check&&b.check(...U),["stop"])),style:n.normalizeStyle(b.wraperStyles)},[b.showDot?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(b.dotClasses),style:n.normalizeStyle(b.bgColorStyle)},null,6)):n.createCommentVNode("",!0),n.createElementVNode("span",{class:n.normalizeClass(b.textClasses),style:n.normalizeStyle(b.textColorStyle)},[n.renderSlot(h.$slots,"default")],6),v.closable?(n.openBlock(),n.createBlock(N,{key:1,class:n.normalizeClass(b.iconClass),color:b.lineColor,type:"ios-close",onClick:n.withModifiers(b.close,["stop"])},null,8,["class","color","onClick"])):n.createCommentVNode("",!0)],6)}var k0=l(Jde,[["render",efe]]),g$={11e4:{l:"Z1",n:"北京",c:"110000",p:"86"},12e4:{l:"Z1",n:"天津",c:"120000",p:"86"},13e4:{l:"H",n:"河北",c:"130000",p:"86"},14e4:{l:"S",n:"山西",c:"140000",p:"86"},15e4:{l:"N",n:"内蒙古",c:"150000",p:"86"},21e4:{l:"L",n:"辽宁",c:"210000",p:"86"},22e4:{l:"J",n:"吉林",c:"220000",p:"86"},23e4:{l:"H",n:"黑龙江",c:"230000",p:"86"},31e4:{l:"Z1",n:"上海",c:"310000",p:"86"},32e4:{l:"J",n:"江苏",c:"320000",p:"86"},33e4:{l:"Z",n:"浙江",c:"330000",p:"86"},34e4:{l:"A",n:"安徽",c:"340000",p:"86"},35e4:{l:"F",n:"福建",c:"350000",p:"86"},36e4:{l:"J",n:"江西",c:"360000",p:"86"},37e4:{l:"S",n:"山东",c:"370000",p:"86"},41e4:{l:"H",n:"河南",c:"410000",p:"86"},42e4:{l:"H",n:"湖北",c:"420000",p:"86"},43e4:{l:"H",n:"湖南",c:"430000",p:"86"},44e4:{l:"G",n:"广东",c:"440000",p:"86"},45e4:{l:"G",n:"广西",c:"450000",p:"86"},46e4:{l:"H",n:"海南",c:"460000",p:"86"},5e5:{l:"Z1",n:"重庆",c:"500000",p:"86"},51e4:{l:"S",n:"四川",c:"510000",p:"86"},52e4:{l:"G",n:"贵州",c:"520000",p:"86"},53e4:{l:"Y",n:"云南",c:"530000",p:"86"},54e4:{l:"X",n:"西藏",c:"540000",p:"86"},61e4:{l:"S",n:"陕西",c:"610000",p:"86"},62e4:{l:"G",n:"甘肃",c:"620000",p:"86"},63e4:{l:"Q",n:"青海",c:"630000",p:"86"},64e4:{l:"N",n:"宁夏",c:"640000",p:"86"},65e4:{l:"X",n:"新疆",c:"650000",p:"86"},71e4:{l:"T",n:"台湾",c:"710000",p:"86"},81e4:{l:"Z2",n:"香港",c:"810000",p:"86"},82e4:{l:"Z2",n:"澳门",c:"820000",p:"86"}},I0={11e4:{l:"B",n:"北京市",c:"110000",p:"86"},12e4:{l:"T",n:"天津市",c:"120000",p:"86"},130100:{l:"S",n:"石家庄市",c:"130100",p:"130000"},130200:{l:"T",n:"唐山市",c:"130200",p:"130000"},130300:{l:"Q",n:"秦皇岛市",c:"130300",p:"130000"},130400:{l:"H",n:"邯郸市",c:"130400",p:"130000"},130500:{l:"X",n:"邢台市",c:"130500",p:"130000"},130600:{l:"B",n:"保定市",c:"130600",p:"130000"},130700:{l:"Z",n:"张家口市",c:"130700",p:"130000"},130800:{l:"C",n:"承德市",c:"130800",p:"130000"},130900:{l:"C",n:"沧州市",c:"130900",p:"130000"},131e3:{l:"L",n:"廊坊市",c:"131000",p:"130000"},131100:{l:"H",n:"衡水市",c:"131100",p:"130000"},139001:{l:"D",n:"定州市",c:"139001",p:"130000"},139002:{l:"X",n:"辛集市",c:"139002",p:"130000"},140100:{l:"T",n:"太原市",c:"140100",p:"140000"},140200:{l:"D",n:"大同市",c:"140200",p:"140000"},140300:{l:"Y",n:"阳泉市",c:"140300",p:"140000"},140400:{l:"C",n:"长治市",c:"140400",p:"140000"},140500:{l:"J",n:"晋城市",c:"140500",p:"140000"},140600:{l:"S",n:"朔州市",c:"140600",p:"140000"},140700:{l:"J",n:"晋中市",c:"140700",p:"140000"},140800:{l:"Y",n:"运城市",c:"140800",p:"140000"},140900:{l:"X",n:"忻州市",c:"140900",p:"140000"},141e3:{l:"L",n:"临汾市",c:"141000",p:"140000"},141100:{l:"L",n:"吕梁市",c:"141100",p:"140000"},150100:{l:"H",n:"呼和浩特市",c:"150100",p:"150000"},150200:{l:"B",n:"包头市",c:"150200",p:"150000"},150300:{l:"W",n:"乌海市",c:"150300",p:"150000"},150400:{l:"C",n:"赤峰市",c:"150400",p:"150000"},150500:{l:"T",n:"通辽市",c:"150500",p:"150000"},150600:{l:"E",n:"鄂尔多斯市",c:"150600",p:"150000"},150700:{l:"H",n:"呼伦贝尔市",c:"150700",p:"150000"},150800:{l:"B",n:"巴彦淖尔市",c:"150800",p:"150000"},150900:{l:"W",n:"乌兰察布市",c:"150900",p:"150000"},152200:{l:"X",n:"兴安盟",c:"152200",p:"150000"},152500:{l:"X",n:"锡林郭勒盟",c:"152500",p:"150000"},152900:{l:"A",n:"阿拉善盟",c:"152900",p:"150000"},210100:{l:"S",n:"沈阳市",c:"210100",p:"210000"},210200:{l:"D",n:"大连市",c:"210200",p:"210000"},210300:{l:"A",n:"鞍山市",c:"210300",p:"210000"},210400:{l:"F",n:"抚顺市",c:"210400",p:"210000"},210500:{l:"B",n:"本溪市",c:"210500",p:"210000"},210600:{l:"D",n:"丹东市",c:"210600",p:"210000"},210700:{l:"J",n:"锦州市",c:"210700",p:"210000"},210800:{l:"Y",n:"营口市",c:"210800",p:"210000"},210900:{l:"F",n:"阜新市",c:"210900",p:"210000"},211e3:{l:"L",n:"辽阳市",c:"211000",p:"210000"},211100:{l:"P",n:"盘锦市",c:"211100",p:"210000"},211200:{l:"T",n:"铁岭市",c:"211200",p:"210000"},211300:{l:"C",n:"朝阳市",c:"211300",p:"210000"},211400:{l:"H",n:"葫芦岛市",c:"211400",p:"210000"},220100:{l:"C",n:"长春市",c:"220100",p:"220000"},220200:{l:"J",n:"吉林市",c:"220200",p:"220000"},220300:{l:"S",n:"四平市",c:"220300",p:"220000"},220400:{l:"L",n:"辽源市",c:"220400",p:"220000"},220500:{l:"T",n:"通化市",c:"220500",p:"220000"},220600:{l:"B",n:"白山市",c:"220600",p:"220000"},220700:{l:"S",n:"松原市",c:"220700",p:"220000"},220800:{l:"B",n:"白城市",c:"220800",p:"220000"},222400:{l:"Y",n:"延边朝鲜族自治州",c:"222400",p:"220000"},230100:{l:"H",n:"哈尔滨市",c:"230100",p:"230000"},230200:{l:"Q",n:"齐齐哈尔市",c:"230200",p:"230000"},230300:{l:"J",n:"鸡西市",c:"230300",p:"230000"},230400:{l:"H",n:"鹤岗市",c:"230400",p:"230000"},230500:{l:"S",n:"双鸭山市",c:"230500",p:"230000"},230600:{l:"D",n:"大庆市",c:"230600",p:"230000"},230700:{l:"Y",n:"伊春市",c:"230700",p:"230000"},230800:{l:"J",n:"佳木斯市",c:"230800",p:"230000"},230900:{l:"Q",n:"七台河市",c:"230900",p:"230000"},231e3:{l:"M",n:"牡丹江市",c:"231000",p:"230000"},231100:{l:"H",n:"黑河市",c:"231100",p:"230000"},231200:{l:"S",n:"绥化市",c:"231200",p:"230000"},232700:{l:"D",n:"大兴安岭地区",c:"232700",p:"230000"},31e4:{l:"S",n:"上海市",c:"310000",p:"86"},320100:{l:"N",n:"南京市",c:"320100",p:"320000"},320200:{l:"W",n:"无锡市",c:"320200",p:"320000"},320300:{l:"X",n:"徐州市",c:"320300",p:"320000"},320400:{l:"C",n:"常州市",c:"320400",p:"320000"},320500:{l:"S",n:"苏州市",c:"320500",p:"320000"},320600:{l:"N",n:"南通市",c:"320600",p:"320000"},320700:{l:"L",n:"连云港市",c:"320700",p:"320000"},320800:{l:"H",n:"淮安市",c:"320800",p:"320000"},320900:{l:"Y",n:"盐城市",c:"320900",p:"320000"},321e3:{l:"Y",n:"扬州市",c:"321000",p:"320000"},321100:{l:"Z",n:"镇江市",c:"321100",p:"320000"},321200:{l:"T",n:"泰州市",c:"321200",p:"320000"},321300:{l:"X",n:"宿迁市",c:"321300",p:"320000"},330100:{l:"H",n:"杭州市",c:"330100",p:"330000"},330200:{l:"N",n:"宁波市",c:"330200",p:"330000"},330300:{l:"W",n:"温州市",c:"330300",p:"330000"},330400:{l:"J",n:"嘉兴市",c:"330400",p:"330000"},330500:{l:"H",n:"湖州市",c:"330500",p:"330000"},330600:{l:"S",n:"绍兴市",c:"330600",p:"330000"},330700:{l:"J",n:"金华市",c:"330700",p:"330000"},330800:{l:"Q",n:"衢州市",c:"330800",p:"330000"},330900:{l:"Z",n:"舟山市",c:"330900",p:"330000"},331e3:{l:"T",n:"台州市",c:"331000",p:"330000"},331100:{l:"L",n:"丽水市",c:"331100",p:"330000"},340100:{l:"H",n:"合肥市",c:"340100",p:"340000"},340200:{l:"W",n:"芜湖市",c:"340200",p:"340000"},340300:{l:"B",n:"蚌埠市",c:"340300",p:"340000"},340400:{l:"H",n:"淮南市",c:"340400",p:"340000"},340500:{l:"M",n:"马鞍山市",c:"340500",p:"340000"},340600:{l:"H",n:"淮北市",c:"340600",p:"340000"},340700:{l:"T",n:"铜陵市",c:"340700",p:"340000"},340800:{l:"A",n:"安庆市",c:"340800",p:"340000"},341e3:{l:"H",n:"黄山市",c:"341000",p:"340000"},341100:{l:"C",n:"滁州市",c:"341100",p:"340000"},341200:{l:"F",n:"阜阳市",c:"341200",p:"340000"},341300:{l:"X",n:"宿州市",c:"341300",p:"340000"},341500:{l:"L",n:"六安市",c:"341500",p:"340000"},341600:{l:"B",n:"亳州市",c:"341600",p:"340000"},341700:{l:"C",n:"池州市",c:"341700",p:"340000"},341800:{l:"X",n:"宣城市",c:"341800",p:"340000"},350100:{l:"F",n:"福州市",c:"350100",p:"350000"},350200:{l:"S",n:"厦门市",c:"350200",p:"350000"},350300:{l:"P",n:"莆田市",c:"350300",p:"350000"},350400:{l:"S",n:"三明市",c:"350400",p:"350000"},350500:{l:"Q",n:"泉州市",c:"350500",p:"350000"},350600:{l:"Z",n:"漳州市",c:"350600",p:"350000"},350700:{l:"N",n:"南平市",c:"350700",p:"350000"},350800:{l:"L",n:"龙岩市",c:"350800",p:"350000"},350900:{l:"N",n:"宁德市",c:"350900",p:"350000"},360100:{l:"N",n:"南昌市",c:"360100",p:"360000"},360200:{l:"J",n:"景德镇市",c:"360200",p:"360000"},360300:{l:"P",n:"萍乡市",c:"360300",p:"360000"},360400:{l:"J",n:"九江市",c:"360400",p:"360000"},360500:{l:"X",n:"新余市",c:"360500",p:"360000"},360600:{l:"Y",n:"鹰潭市",c:"360600",p:"360000"},360700:{l:"G",n:"赣州市",c:"360700",p:"360000"},360800:{l:"J",n:"吉安市",c:"360800",p:"360000"},360900:{l:"Y",n:"宜春市",c:"360900",p:"360000"},361e3:{l:"F",n:"抚州市",c:"361000",p:"360000"},361100:{l:"S",n:"上饶市",c:"361100",p:"360000"},370100:{l:"J",n:"济南市",c:"370100",p:"370000"},370200:{l:"Q",n:"青岛市",c:"370200",p:"370000"},370300:{l:"Z",n:"淄博市",c:"370300",p:"370000"},370400:{l:"Z",n:"枣庄市",c:"370400",p:"370000"},370500:{l:"D",n:"东营市",c:"370500",p:"370000"},370600:{l:"Y",n:"烟台市",c:"370600",p:"370000"},370700:{l:"W",n:"潍坊市",c:"370700",p:"370000"},370800:{l:"J",n:"济宁市",c:"370800",p:"370000"},370900:{l:"T",n:"泰安市",c:"370900",p:"370000"},371e3:{l:"W",n:"威海市",c:"371000",p:"370000"},371100:{l:"R",n:"日照市",c:"371100",p:"370000"},371200:{l:"L",n:"莱芜市",c:"371200",p:"370000"},371300:{l:"L",n:"临沂市",c:"371300",p:"370000"},371400:{l:"D",n:"德州市",c:"371400",p:"370000"},371500:{l:"L",n:"聊城市",c:"371500",p:"370000"},371600:{l:"B",n:"滨州市",c:"371600",p:"370000"},371700:{l:"H",n:"菏泽市",c:"371700",p:"370000"},410100:{l:"Z",n:"郑州市",c:"410100",p:"410000"},410200:{l:"K",n:"开封市",c:"410200",p:"410000"},410300:{l:"L",n:"洛阳市",c:"410300",p:"410000"},410400:{l:"P",n:"平顶山市",c:"410400",p:"410000"},410500:{l:"A",n:"安阳市",c:"410500",p:"410000"},410600:{l:"H",n:"鹤壁市",c:"410600",p:"410000"},410700:{l:"X",n:"新乡市",c:"410700",p:"410000"},410800:{l:"J",n:"焦作市",c:"410800",p:"410000"},410900:{l:"P",n:"濮阳市",c:"410900",p:"410000"},411e3:{l:"X",n:"许昌市",c:"411000",p:"410000"},411100:{l:"L",n:"漯河市",c:"411100",p:"410000"},411200:{l:"S",n:"三门峡市",c:"411200",p:"410000"},411300:{l:"N",n:"南阳市",c:"411300",p:"410000"},411400:{l:"S",n:"商丘市",c:"411400",p:"410000"},411500:{l:"X",n:"信阳市",c:"411500",p:"410000"},411600:{l:"Z",n:"周口市",c:"411600",p:"410000"},411700:{l:"Z",n:"驻马店市",c:"411700",p:"410000"},419001:{l:"J",n:"济源市",c:"419001",p:"410000"},420100:{l:"W",n:"武汉市",c:"420100",p:"420000"},420200:{l:"H",n:"黄石市",c:"420200",p:"420000"},420300:{l:"S",n:"十堰市",c:"420300",p:"420000"},420500:{l:"Y",n:"宜昌市",c:"420500",p:"420000"},420600:{l:"X",n:"襄阳市",c:"420600",p:"420000"},420700:{l:"E",n:"鄂州市",c:"420700",p:"420000"},420800:{l:"J",n:"荆门市",c:"420800",p:"420000"},420900:{l:"X",n:"孝感市",c:"420900",p:"420000"},421e3:{l:"J",n:"荆州市",c:"421000",p:"420000"},421100:{l:"H",n:"黄冈市",c:"421100",p:"420000"},421200:{l:"X",n:"咸宁市",c:"421200",p:"420000"},421300:{l:"S",n:"随州市",c:"421300",p:"420000"},422800:{l:"E",n:"恩施土家族苗族自治州",c:"422800",p:"420000"},429004:{l:"X",n:"仙桃市",c:"429004",p:"420000"},429005:{l:"Q",n:"潜江市",c:"429005",p:"420000"},429006:{l:"T",n:"天门市",c:"429006",p:"420000"},429021:{l:"S",n:"神农架林区",c:"429021",p:"420000"},430100:{l:"C",n:"长沙市",c:"430100",p:"430000"},430200:{l:"Z",n:"株洲市",c:"430200",p:"430000"},430300:{l:"X",n:"湘潭市",c:"430300",p:"430000"},430400:{l:"H",n:"衡阳市",c:"430400",p:"430000"},430500:{l:"S",n:"邵阳市",c:"430500",p:"430000"},430600:{l:"Y",n:"岳阳市",c:"430600",p:"430000"},430700:{l:"C",n:"常德市",c:"430700",p:"430000"},430800:{l:"Z",n:"张家界市",c:"430800",p:"430000"},430900:{l:"Y",n:"益阳市",c:"430900",p:"430000"},431e3:{l:"C",n:"郴州市",c:"431000",p:"430000"},431100:{l:"Y",n:"永州市",c:"431100",p:"430000"},431200:{l:"H",n:"怀化市",c:"431200",p:"430000"},431300:{l:"L",n:"娄底市",c:"431300",p:"430000"},433100:{l:"X",n:"湘西土家族苗族自治州",c:"433100",p:"430000"},440100:{l:"G",n:"广州市",c:"440100",p:"440000"},440200:{l:"S",n:"韶关市",c:"440200",p:"440000"},440300:{l:"S",n:"深圳市",c:"440300",p:"440000"},440400:{l:"Z",n:"珠海市",c:"440400",p:"440000"},440500:{l:"S",n:"汕头市",c:"440500",p:"440000"},440600:{l:"F",n:"佛山市",c:"440600",p:"440000"},440700:{l:"J",n:"江门市",c:"440700",p:"440000"},440800:{l:"Z",n:"湛江市",c:"440800",p:"440000"},440900:{l:"M",n:"茂名市",c:"440900",p:"440000"},441200:{l:"Z",n:"肇庆市",c:"441200",p:"440000"},441300:{l:"H",n:"惠州市",c:"441300",p:"440000"},441400:{l:"M",n:"梅州市",c:"441400",p:"440000"},441500:{l:"S",n:"汕尾市",c:"441500",p:"440000"},441600:{l:"H",n:"河源市",c:"441600",p:"440000"},441700:{l:"Y",n:"阳江市",c:"441700",p:"440000"},441800:{l:"Q",n:"清远市",c:"441800",p:"440000"},441900:{l:"D",n:"东莞市",c:"441900",p:"440000"},442e3:{l:"Z",n:"中山市",c:"442000",p:"440000"},445100:{l:"C",n:"潮州市",c:"445100",p:"440000"},445200:{l:"J",n:"揭阳市",c:"445200",p:"440000"},445300:{l:"Y",n:"云浮市",c:"445300",p:"440000"},450100:{l:"N",n:"南宁市",c:"450100",p:"450000"},450200:{l:"L",n:"柳州市",c:"450200",p:"450000"},450300:{l:"G",n:"桂林市",c:"450300",p:"450000"},450400:{l:"W",n:"梧州市",c:"450400",p:"450000"},450500:{l:"B",n:"北海市",c:"450500",p:"450000"},450600:{l:"F",n:"防城港市",c:"450600",p:"450000"},450700:{l:"Q",n:"钦州市",c:"450700",p:"450000"},450800:{l:"G",n:"贵港市",c:"450800",p:"450000"},450900:{l:"Y",n:"玉林市",c:"450900",p:"450000"},451e3:{l:"B",n:"百色市",c:"451000",p:"450000"},451100:{l:"H",n:"贺州市",c:"451100",p:"450000"},451200:{l:"H",n:"河池市",c:"451200",p:"450000"},451300:{l:"L",n:"来宾市",c:"451300",p:"450000"},451400:{l:"C",n:"崇左市",c:"451400",p:"450000"},460100:{l:"H",n:"海口市",c:"460100",p:"460000"},460200:{l:"S",n:"三亚市",c:"460200",p:"460000"},460300:{l:"S",n:"三沙市",c:"460300",p:"460000"},460400:{l:"D",n:"儋州市",c:"460400",p:"460000"},469001:{l:"W",n:"五指山市",c:"469001",p:"460000"},469002:{l:"Q",n:"琼海市",c:"469002",p:"460000"},469005:{l:"W",n:"文昌市",c:"469005",p:"460000"},469006:{l:"W",n:"万宁市",c:"469006",p:"460000"},469007:{l:"D",n:"东方市",c:"469007",p:"460000"},469021:{l:"D",n:"定安县",c:"469021",p:"460000"},469022:{l:"T",n:"屯昌县",c:"469022",p:"460000"},469023:{l:"C",n:"澄迈县",c:"469023",p:"460000"},469024:{l:"L",n:"临高县",c:"469024",p:"460000"},469025:{l:"B",n:"白沙黎族自治县",c:"469025",p:"460000"},469026:{l:"C",n:"昌江黎族自治县",c:"469026",p:"460000"},469027:{l:"L",n:"乐东黎族自治县",c:"469027",p:"460000"},469028:{l:"L",n:"陵水黎族自治县",c:"469028",p:"460000"},469029:{l:"B",n:"保亭黎族苗族自治县",c:"469029",p:"460000"},469030:{l:"Q",n:"琼中黎族苗族自治县",c:"469030",p:"460000"},5e5:{l:"C",n:"重庆市",c:"500000",p:"86"},510100:{l:"C",n:"成都市",c:"510100",p:"510000"},510300:{l:"Z",n:"自贡市",c:"510300",p:"510000"},510400:{l:"P",n:"攀枝花市",c:"510400",p:"510000"},510500:{l:"L",n:"泸州市",c:"510500",p:"510000"},510600:{l:"D",n:"德阳市",c:"510600",p:"510000"},510700:{l:"M",n:"绵阳市",c:"510700",p:"510000"},510800:{l:"G",n:"广元市",c:"510800",p:"510000"},510900:{l:"S",n:"遂宁市",c:"510900",p:"510000"},511e3:{l:"N",n:"内江市",c:"511000",p:"510000"},511100:{l:"L",n:"乐山市",c:"511100",p:"510000"},511300:{l:"N",n:"南充市",c:"511300",p:"510000"},511400:{l:"M",n:"眉山市",c:"511400",p:"510000"},511500:{l:"Y",n:"宜宾市",c:"511500",p:"510000"},511600:{l:"G",n:"广安市",c:"511600",p:"510000"},511700:{l:"D",n:"达州市",c:"511700",p:"510000"},511800:{l:"Y",n:"雅安市",c:"511800",p:"510000"},511900:{l:"B",n:"巴中市",c:"511900",p:"510000"},512e3:{l:"Z",n:"资阳市",c:"512000",p:"510000"},513200:{l:"A",n:"阿坝藏族羌族自治州",c:"513200",p:"510000"},513300:{l:"G",n:"甘孜藏族自治州",c:"513300",p:"510000"},513400:{l:"L",n:"凉山彝族自治州",c:"513400",p:"510000"},520100:{l:"G",n:"贵阳市",c:"520100",p:"520000"},520200:{l:"L",n:"六盘水市",c:"520200",p:"520000"},520300:{l:"Z",n:"遵义市",c:"520300",p:"520000"},520400:{l:"A",n:"安顺市",c:"520400",p:"520000"},520500:{l:"B",n:"毕节市",c:"520500",p:"520000"},520600:{l:"T",n:"铜仁市",c:"520600",p:"520000"},522300:{l:"Q",n:"黔西南布依族苗族自治州",c:"522300",p:"520000"},522600:{l:"Q",n:"黔东南苗族侗族自治州",c:"522600",p:"520000"},522700:{l:"Q",n:"黔南布依族苗族自治州",c:"522700",p:"520000"},530100:{l:"K",n:"昆明市",c:"530100",p:"530000"},530300:{l:"Q",n:"曲靖市",c:"530300",p:"530000"},530400:{l:"Y",n:"玉溪市",c:"530400",p:"530000"},530500:{l:"B",n:"保山市",c:"530500",p:"530000"},530600:{l:"Z",n:"昭通市",c:"530600",p:"530000"},530700:{l:"L",n:"丽江市",c:"530700",p:"530000"},530800:{l:"P",n:"普洱市",c:"530800",p:"530000"},530900:{l:"L",n:"临沧市",c:"530900",p:"530000"},532300:{l:"C",n:"楚雄彝族自治州",c:"532300",p:"530000"},532500:{l:"H",n:"红河哈尼族彝族自治州",c:"532500",p:"530000"},532600:{l:"W",n:"文山壮族苗族自治州",c:"532600",p:"530000"},532800:{l:"X",n:"西双版纳傣族自治州",c:"532800",p:"530000"},532900:{l:"D",n:"大理白族自治州",c:"532900",p:"530000"},533100:{l:"D",n:"德宏傣族景颇族自治州",c:"533100",p:"530000"},533300:{l:"N",n:"怒江傈僳族自治州",c:"533300",p:"530000"},533400:{l:"D",n:"迪庆藏族自治州",c:"533400",p:"530000"},540100:{l:"L",n:"拉萨市",c:"540100",p:"540000"},540200:{l:"R",n:"日喀则市",c:"540200",p:"540000"},540300:{l:"C",n:"昌都市",c:"540300",p:"540000"},540400:{l:"L",n:"林芝市",c:"540400",p:"540000"},540500:{l:"S",n:"山南市",c:"540500",p:"540000"},542400:{l:"N",n:"那曲地区",c:"542400",p:"540000"},542500:{l:"A",n:"阿里地区",c:"542500",p:"540000"},610100:{l:"X",n:"西安市",c:"610100",p:"610000"},610200:{l:"T",n:"铜川市",c:"610200",p:"610000"},610300:{l:"B",n:"宝鸡市",c:"610300",p:"610000"},610400:{l:"X",n:"咸阳市",c:"610400",p:"610000"},610500:{l:"W",n:"渭南市",c:"610500",p:"610000"},610600:{l:"Y",n:"延安市",c:"610600",p:"610000"},610700:{l:"H",n:"汉中市",c:"610700",p:"610000"},610800:{l:"Y",n:"榆林市",c:"610800",p:"610000"},610900:{l:"A",n:"安康市",c:"610900",p:"610000"},611e3:{l:"S",n:"商洛市",c:"611000",p:"610000"},620100:{l:"L",n:"兰州市",c:"620100",p:"620000"},620200:{l:"J",n:"嘉峪关市",c:"620200",p:"620000"},620300:{l:"J",n:"金昌市",c:"620300",p:"620000"},620400:{l:"B",n:"白银市",c:"620400",p:"620000"},620500:{l:"T",n:"天水市",c:"620500",p:"620000"},620600:{l:"W",n:"武威市",c:"620600",p:"620000"},620700:{l:"Z",n:"张掖市",c:"620700",p:"620000"},620800:{l:"P",n:"平凉市",c:"620800",p:"620000"},620900:{l:"J",n:"酒泉市",c:"620900",p:"620000"},621e3:{l:"Q",n:"庆阳市",c:"621000",p:"620000"},621100:{l:"D",n:"定西市",c:"621100",p:"620000"},621200:{l:"L",n:"陇南市",c:"621200",p:"620000"},622900:{l:"L",n:"临夏回族自治州",c:"622900",p:"620000"},623e3:{l:"G",n:"甘南藏族自治州",c:"623000",p:"620000"},630100:{l:"X",n:"西宁市",c:"630100",p:"630000"},630200:{l:"H",n:"海东市",c:"630200",p:"630000"},632200:{l:"H",n:"海北藏族自治州",c:"632200",p:"630000"},632300:{l:"H",n:"黄南藏族自治州",c:"632300",p:"630000"},632500:{l:"H",n:"海南藏族自治州",c:"632500",p:"630000"},632600:{l:"G",n:"果洛藏族自治州",c:"632600",p:"630000"},632700:{l:"Y",n:"玉树藏族自治州",c:"632700",p:"630000"},632800:{l:"H",n:"海西蒙古族藏族自治州",c:"632800",p:"630000"},640100:{l:"Y",n:"银川市",c:"640100",p:"640000"},640200:{l:"S",n:"石嘴山市",c:"640200",p:"640000"},640300:{l:"W",n:"吴忠市",c:"640300",p:"640000"},640400:{l:"G",n:"固原市",c:"640400",p:"640000"},640500:{l:"Z",n:"中卫市",c:"640500",p:"640000"},650100:{l:"W",n:"乌鲁木齐市",c:"650100",p:"650000"},650200:{l:"K",n:"克拉玛依市",c:"650200",p:"650000"},650400:{l:"T",n:"吐鲁番市",c:"650400",p:"650000"},650500:{l:"H",n:"哈密市",c:"650500",p:"650000"},652300:{l:"C",n:"昌吉回族自治州",c:"652300",p:"650000"},652700:{l:"B",n:"博尔塔拉蒙古自治州",c:"652700",p:"650000"},652800:{l:"B",n:"巴音郭楞蒙古自治州",c:"652800",p:"650000"},652900:{l:"A",n:"阿克苏地区",c:"652900",p:"650000"},653e3:{l:"K",n:"克孜勒苏柯尔克孜自治州",c:"653000",p:"650000"},653100:{l:"K",n:"喀什地区",c:"653100",p:"650000"},653200:{l:"H",n:"和田地区",c:"653200",p:"650000"},654e3:{l:"Y",n:"伊犁哈萨克自治州",c:"654000",p:"650000"},654200:{l:"T",n:"塔城地区",c:"654200",p:"650000"},654300:{l:"A",n:"阿勒泰地区",c:"654300",p:"650000"},659001:{l:"S",n:"石河子市",c:"659001",p:"650000"},659002:{l:"A",n:"阿拉尔市",c:"659002",p:"650000"},659003:{l:"T",n:"图木舒克市",c:"659003",p:"650000"},659004:{l:"W",n:"五家渠市",c:"659004",p:"650000"},659006:{l:"T",n:"铁门关市",c:"659006",p:"650000"},710101:{l:"J",n:"金门",c:"710101",p:"710000"},710102:{l:"L",n:"连江",c:"710102",p:"710000"},710103:{l:"M",n:"苗栗",c:"710103",p:"710000"},710104:{l:"N",n:"南投",c:"710104",p:"710000"},710105:{l:"P",n:"澎湖",c:"710105",p:"710000"},710106:{l:"P",n:"屏东",c:"710106",p:"710000"},710107:{l:"T",n:"台东",c:"710107",p:"710000"},710108:{l:"T",n:"台中",c:"710108",p:"710000"},710109:{l:"T",n:"台南",c:"710109",p:"710000"},710110:{l:"T",n:"台北",c:"710110",p:"710000"},710111:{l:"T",n:"桃园",c:"710111",p:"710000"},710112:{l:"Y",n:"云林",c:"710112",p:"710000"},710113:{l:"X",n:"新北",c:"710113",p:"710000"},710114:{l:"Z",n:"彰化",c:"710114",p:"710000"},710115:{l:"J",n:"嘉义",c:"710115",p:"710000"},710116:{l:"X",n:"新竹",c:"710116",p:"710000"},710117:{l:"H",n:"花莲",c:"710117",p:"710000"},710118:{l:"Y",n:"宜兰",c:"710118",p:"710000"},710119:{l:"G",n:"高雄",c:"710119",p:"710000"},710120:{l:"J",n:"基隆",c:"710120",p:"710000"},81e4:{l:"X",n:"香港特别行政区",c:"810000",p:"86"},82e4:{l:"A",n:"澳门特别行政区",c:"820000",p:"86"}};function J_(h){return h.replace("市","").replace("地区","").replace("特别行政区","")}function tfe(){const h=V(I0),f=[];for(let v in h){const E=h[v];E.n=J_(E.n),f.push(E)}return f}function v$(h,f){if(!f)return"";const v=h.find(E=>E.n===f);return v?v.c:(console.error("[View UI warn]: City name error."),"")}function ife(h,f){return h.find(v=>v.c===f).n}const nfe={name:"City",mixins:[Ui],components:{Dropdown:lm,DropdownMenu:hm,Select:Bo,Option:Cr,Tag:k0,Icon:O,RadioGroup:AS,Radio:ES},emits:["on-change","update:modelValue"],props:{modelValue:{type:String},useName:{type:Boolean,default:!1},cities:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},placeholder:{type:String,default:"请选择"},searchPlaceholder:{type:String,default:"输入城市名称搜索"},transferClassName:{type:String}},data(){const h=tfe();return{currentValue:this.useName?v$(h,this.modelValue):this.modelValue,visible:!1,provinceList:[],cityListByProvince:[],cityListByLetter:{},allCities:h,listType:"province",queryCity:""}},watch:{modelValue(h){const f=this.useName?v$(this.allCities,h):h;this.currentValue=f}},computed:{showCloseIcon(){return this.currentValue&&this.clearable&&!this.itemDisabled},classes(){return[{"ivu-city-show-clear":this.showCloseIcon,[`ivu-city-size-${this.size}`]:!!this.size,"ivu-city-visible":this.visible,"ivu-city-disabled":this.itemDisabled}]},transferClasses(){let h="ivu-city-transfer";return this.transferClassName&&(h+=` ${this.transferClassName}`),h},relCities(){const h=[];return this.cities.length&&this.cities.forEach(f=>{const v=I0[f];v.n=J_(v.n),h.push(v)}),h},codeToName(){if(!this.currentValue)return this.placeholder;const h=I0[this.currentValue].n;return this.showSuffix?h:J_(h)}},methods:{handleSelect(h){h&&(this.handleChangeValue(h),n.nextTick(()=>{this.queryCity=""}))},handleChangeValue(h){this.currentValue=h,this.visible=!1;const f=this.useName?ife(this.allCities,h):h;this.$emit("update:modelValue",f),this.$emit("on-change",I0[h]),this.handleFormItemChange("change",h)},handleClickLetter(h){let f=h;f==="直辖市"?f="Z1":f==="港澳"&&(f="Z2");const v=`.ivu-city-${f}`,E=this.$refs.list,T=E.querySelectorAll(v)[0].offsetTop,b=E.offsetTop;E.scrollTop=T-b},clearSelect(){if(this.itemDisabled)return!1},handleToggleOpen(){if(this.itemDisabled)return!1;this.visible=!this.visible},handleVisibleChange(h){this.visible=h},handleClickOutside(h){this.$refs.city.contains(h.target)||(this.visible=!1)},handleGetProvinceByLetter(){const h={A:{n:"A",p:[],c:[]},F:{n:"F",p:[],c:[]},G:{n:"G",p:[],c:[]},H:{n:"H",p:[],c:[]},J:{n:"J",p:[],c:[]},L:{n:"L",p:[],c:[]},N:{n:"N",p:[],c:[]},Q:{n:"Q",p:[],c:[]},S:{n:"S",p:[],c:[]},T:{n:"T",p:[],c:[]},X:{n:"X",p:[],c:[]},Y:{n:"Y",p:[],c:[]},Z:{n:"Z",p:[],c:[]},Z1:{n:"直辖市",p:[],c:[]},Z2:{n:"港澳",p:[],c:[]}};for(let f in g$){const v=g$[f];h[v.l].p.push(v)}this.provinceList=h},handleGetCityByProvince(){const h=V(this.provinceList),f=[],v=V(I0),E=[{p:{n:"直辖市",p:"86",l:"Z1"},c:[]},{p:{n:"港澳",p:"86",l:"Z2"},c:[]}];for(let T in h){const b=h[T];for(let N=0;N<b.p.length;N++){const U=b.p[N],Y=U.c,W={p:U,c:[]};for(let Z in v){const fe=v[Z];fe.n=J_(fe.n),Y===fe.p&&W.c.push(fe)}T==="Z1"?E[0].c.push(v[Y]):T==="Z2"?E[1].c.push(v[Y]):f.push(W)}}this.cityListByProvince=f.concat(E)},handleGetCityByLetter(){const h=V(I0),f={A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],J:[],K:[],L:[],M:[],N:[],P:[],Q:[],R:[],S:[],T:[],W:[],X:[],Y:[],Z:[]};for(let v in h){const E=h[v];E.n=J_(E.n),f[E.l].push(E)}this.cityListByLetter=f}},created(){this.handleGetProvinceByLetter(),this.handleGetCityByProvince(),this.handleGetCityByLetter()}},rfe=["name","value"],sfe={class:"ivu-city-drop"},ofe={key:0,class:"ivu-city-drop-cities"},afe=["onClick"],lfe={class:"ivu-city-drop-menu"},hfe={class:"ivu-city-drop-type"},cfe={class:"ivu-city-drop-search"},ufe={key:1,class:"ivu-city-drop-list"},dfe={class:"ivu-city-drop-list-letter"},ffe={class:"ivu-city-drop-list-main",ref:"list"},pfe=["onClick"],mfe={key:2,class:"ivu-city-drop-list"},gfe={class:"ivu-city-drop-list-letter"},vfe={class:"ivu-city-drop-list-main ivu-city-drop-list-main-city",ref:"list"},yfe=["onClick"];function _fe(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Radio"),Y=n.resolveComponent("RadioGroup"),W=n.resolveComponent("Option"),Z=n.resolveComponent("Select"),fe=n.resolveComponent("Tag"),Te=n.resolveComponent("DropdownMenu"),Se=n.resolveComponent("Dropdown");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-city",b.classes]),ref:"city"},[n.createVNode(Se,{trigger:"custom",visible:T.visible,transfer:v.transfer,placement:"bottom-start","transfer-class-name":b.transferClasses,onOnVisibleChange:b.handleVisibleChange,onOnClickoutside:b.handleClickOutside},{list:n.withCtx(()=>[n.createVNode(Te,{onClick:f[3]||(f[3]=n.withModifiers(()=>{},["stop"]))},{default:n.withCtx(()=>[n.createElementVNode("div",sfe,[v.cities.length?(n.openBlock(),n.createElementBlock("div",ofe,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.relCities,we=>(n.openBlock(),n.createElementBlock("span",{key:we.n,onClick:ce=>b.handleChangeValue(we.c)},n.toDisplayString(we.n),9,afe))),128))])):n.createCommentVNode("",!0),n.createElementVNode("div",lfe,[n.createElementVNode("div",hfe,[n.createVNode(Y,{modelValue:T.listType,"onUpdate:modelValue":f[1]||(f[1]=we=>T.listType=we),type:"button",size:"small"},{default:n.withCtx(()=>[n.createVNode(U,{label:"province"},{default:n.withCtx(()=>[n.createTextVNode("按省份")]),_:1}),n.createVNode(U,{label:"city"},{default:n.withCtx(()=>[n.createTextVNode("按城市")]),_:1})]),_:1},8,["modelValue"])]),n.createElementVNode("div",cfe,[n.createVNode(Z,{modelValue:T.queryCity,"onUpdate:modelValue":f[2]||(f[2]=we=>T.queryCity=we),filterable:"",size:"small",transfer:"",placeholder:v.searchPlaceholder,onOnChange:b.handleSelect},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.allCities,we=>(n.openBlock(),n.createBlock(W,{value:we.c,key:we.c},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(we.n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder","onOnChange"])])]),T.listType==="province"?(n.openBlock(),n.createElementBlock("div",ufe,[n.createElementVNode("div",dfe,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.provinceList,we=>(n.openBlock(),n.createBlock(fe,{onClick:ce=>b.handleClickLetter(we.n),type:"border",fade:!1,key:we.n},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(we.n),1)]),_:2},1032,["onClick"]))),128))]),n.createElementVNode("div",ffe,[n.createElementVNode("dl",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.cityListByProvince,we=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:we.p.n},[n.createElementVNode("dt",{class:n.normalizeClass("ivu-city-"+we.p.l)},n.toDisplayString(we.p.n)+"：",3),n.createElementVNode("dd",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(we.c,ce=>(n.openBlock(),n.createElementBlock("li",{key:ce.n,onClick:Be=>b.handleChangeValue(ce.c)},n.toDisplayString(ce.n),9,pfe))),128))])],64))),128))])],512)])):n.createCommentVNode("",!0),T.listType==="city"?(n.openBlock(),n.createElementBlock("div",mfe,[n.createElementVNode("div",gfe,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.cityListByLetter,(we,ce)=>(n.openBlock(),n.createBlock(fe,{onClick:Be=>b.handleClickLetter(ce),type:"border",fade:!1,key:ce},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(ce),1)]),_:2},1032,["onClick"]))),128))]),n.createElementVNode("div",vfe,[n.createElementVNode("dl",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.cityListByLetter,(we,ce)=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:ce},[n.createElementVNode("dt",{class:n.normalizeClass("ivu-city-"+ce)},n.toDisplayString(ce)+"：",3),n.createElementVNode("dd",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(we,Be=>(n.openBlock(),n.createElementBlock("li",{key:Be.n,onClick:Zt=>b.handleChangeValue(Be.c)},n.toDisplayString(Be.n),9,yfe))),128))])],64))),128))])],512)])):n.createCommentVNode("",!0)])]),_:1})]),default:n.withCtx(()=>[n.createElementVNode("div",{class:"ivu-city-rel",onClick:f[0]||(f[0]=n.withModifiers((...we)=>b.handleToggleOpen&&b.handleToggleOpen(...we),["prevent","stop"]))},[n.createElementVNode("input",{type:"hidden",name:v.name,value:T.currentValue},null,8,rfe),n.renderSlot(h.$slots,"default",{},()=>[n.createElementVNode("span",null,n.toDisplayString(b.codeToName),1),n.withDirectives(n.createVNode(N,{type:"ios-close-circle",class:"ivu-city-arrow",onClick:n.withModifiers(b.clearSelect,["stop"])},null,8,["onClick"]),[[n.vShow,b.showCloseIcon]]),n.createVNode(N,{type:"ios-arrow-down",class:"ivu-city-arrow"})])])]),_:3},8,["visible","transfer","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],2)}var y$=l(nfe,[["render",_fe]]);const _$="ivu-collapse",xfe={name:"Collapse",emits:["on-change","update:modelValue"],provide(){return{CollapseInstance:this}},props:{accordion:{type:Boolean,default:!1},modelValue:{type:[Array,String]},simple:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,panelCount:0}},computed:{classes(){return[`${_$}`,{[`${_$}-simple`]:this.simple}]}},methods:{getActiveKey(){let h=this.currentValue||[];const f=this.accordion;Array.isArray(h)||(h=[h]),f&&h.length>1&&(h=[h[0]]);for(let v=0;v<h.length;v++)h[v]=h[v].toString();return h},toggle(h){const f=h.name.toString();let v=[];if(this.accordion)h.isActive||v.push(f);else{let E=this.getActiveKey();const T=E.indexOf(f);h.isActive?T>-1&&E.splice(T,1):T<0&&E.push(f),v=E}this.currentValue=v,this.$emit("update:modelValue",v),this.$emit("on-change",v)}},watch:{modelValue(h){this.currentValue=h}}};function bfe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.renderSlot(h.$slots,"default")],2)}var x$=l(xfe,[["render",bfe]]);function BS(h){return BS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},BS(h)}var wfe=/^\s+/,Ofe=/\s+$/;function qt(h,f){if(h=h||"",f=f||{},h instanceof qt)return h;if(!(this instanceof qt))return new qt(h,f);var v=Sfe(h);this._originalInput=h,this._r=v.r,this._g=v.g,this._b=v.b,this._a=v.a,this._roundA=Math.round(100*this._a)/100,this._format=f.format||v.format,this._gradientType=f.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=v.ok}qt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var h=this.toRgb();return(h.r*299+h.g*587+h.b*114)/1e3},getLuminance:function(){var h=this.toRgb(),f,v,E,T,b,N;return f=h.r/255,v=h.g/255,E=h.b/255,f<=.03928?T=f/12.92:T=Math.pow((f+.055)/1.055,2.4),v<=.03928?b=v/12.92:b=Math.pow((v+.055)/1.055,2.4),E<=.03928?N=E/12.92:N=Math.pow((E+.055)/1.055,2.4),.2126*T+.7152*b+.0722*N},setAlpha:function(h){return this._a=T$(h),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var h=w$(this._r,this._g,this._b);return{h:h.h*360,s:h.s,v:h.v,a:this._a}},toHsvString:function(){var h=w$(this._r,this._g,this._b),f=Math.round(h.h*360),v=Math.round(h.s*100),E=Math.round(h.v*100);return this._a==1?"hsv("+f+", "+v+"%, "+E+"%)":"hsva("+f+", "+v+"%, "+E+"%, "+this._roundA+")"},toHsl:function(){var h=b$(this._r,this._g,this._b);return{h:h.h*360,s:h.s,l:h.l,a:this._a}},toHslString:function(){var h=b$(this._r,this._g,this._b),f=Math.round(h.h*360),v=Math.round(h.s*100),E=Math.round(h.l*100);return this._a==1?"hsl("+f+", "+v+"%, "+E+"%)":"hsla("+f+", "+v+"%, "+E+"%, "+this._roundA+")"},toHex:function(h){return O$(this._r,this._g,this._b,h)},toHexString:function(h){return"#"+this.toHex(h)},toHex8:function(h){return Efe(this._r,this._g,this._b,this._a,h)},toHex8String:function(h){return"#"+this.toHex8(h)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(mr(this._r,255)*100)+"%",g:Math.round(mr(this._g,255)*100)+"%",b:Math.round(mr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(mr(this._r,255)*100)+"%, "+Math.round(mr(this._g,255)*100)+"%, "+Math.round(mr(this._b,255)*100)+"%)":"rgba("+Math.round(mr(this._r,255)*100)+"%, "+Math.round(mr(this._g,255)*100)+"%, "+Math.round(mr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:$fe[O$(this._r,this._g,this._b,!0)]||!1},toFilter:function(h){var f="#"+S$(this._r,this._g,this._b,this._a),v=f,E=this._gradientType?"GradientType = 1, ":"";if(h){var T=qt(h);v="#"+S$(T._r,T._g,T._b,T._a)}return"progid:DXImageTransform.Microsoft.gradient("+E+"startColorstr="+f+",endColorstr="+v+")"},toString:function(h){var f=!!h;h=h||this._format;var v=!1,E=this._a<1&&this._a>=0,T=!f&&E&&(h==="hex"||h==="hex6"||h==="hex3"||h==="hex4"||h==="hex8"||h==="name");return T?h==="name"&&this._a===0?this.toName():this.toRgbString():(h==="rgb"&&(v=this.toRgbString()),h==="prgb"&&(v=this.toPercentageRgbString()),(h==="hex"||h==="hex6")&&(v=this.toHexString()),h==="hex3"&&(v=this.toHexString(!0)),h==="hex4"&&(v=this.toHex8String(!0)),h==="hex8"&&(v=this.toHex8String()),h==="name"&&(v=this.toName()),h==="hsl"&&(v=this.toHslString()),h==="hsv"&&(v=this.toHsvString()),v||this.toHexString())},clone:function(){return qt(this.toString())},_applyModification:function(h,f){var v=h.apply(null,[this].concat([].slice.call(f)));return this._r=v._r,this._g=v._g,this._b=v._b,this.setAlpha(v._a),this},lighten:function(){return this._applyModification(Ife,arguments)},brighten:function(){return this._applyModification(Rfe,arguments)},darken:function(){return this._applyModification(Bfe,arguments)},desaturate:function(){return this._applyModification(Mfe,arguments)},saturate:function(){return this._applyModification(Pfe,arguments)},greyscale:function(){return this._applyModification(kfe,arguments)},spin:function(){return this._applyModification(Dfe,arguments)},_applyCombination:function(h,f){return h.apply(null,[this].concat([].slice.call(f)))},analogous:function(){return this._applyCombination(Vfe,arguments)},complement:function(){return this._applyCombination(Lfe,arguments)},monochromatic:function(){return this._applyCombination(Ffe,arguments)},splitcomplement:function(){return this._applyCombination(Nfe,arguments)},triad:function(){return this._applyCombination(C$,[3])},tetrad:function(){return this._applyCombination(C$,[4])}},qt.fromRatio=function(h,f){if(BS(h)=="object"){var v={};for(var E in h)h.hasOwnProperty(E)&&(E==="a"?v[E]=h[E]:v[E]=ex(h[E]));h=v}return qt(h,f)};function Sfe(h){var f={r:0,g:0,b:0},v=1,E=null,T=null,b=null,N=!1,U=!1;return typeof h=="string"&&(h=Wfe(h)),BS(h)=="object"&&(Au(h.r)&&Au(h.g)&&Au(h.b)?(f=Cfe(h.r,h.g,h.b),N=!0,U=String(h.r).substr(-1)==="%"?"prgb":"rgb"):Au(h.h)&&Au(h.s)&&Au(h.v)?(E=ex(h.s),T=ex(h.v),f=Afe(h.h,E,T),N=!0,U="hsv"):Au(h.h)&&Au(h.s)&&Au(h.l)&&(E=ex(h.s),b=ex(h.l),f=Tfe(h.h,E,b),N=!0,U="hsl"),h.hasOwnProperty("a")&&(v=h.a)),v=T$(v),{ok:N,format:h.format||U,r:Math.min(255,Math.max(f.r,0)),g:Math.min(255,Math.max(f.g,0)),b:Math.min(255,Math.max(f.b,0)),a:v}}function Cfe(h,f,v){return{r:mr(h,255)*255,g:mr(f,255)*255,b:mr(v,255)*255}}function b$(h,f,v){h=mr(h,255),f=mr(f,255),v=mr(v,255);var E=Math.max(h,f,v),T=Math.min(h,f,v),b,N,U=(E+T)/2;if(E==T)b=N=0;else{var Y=E-T;switch(N=U>.5?Y/(2-E-T):Y/(E+T),E){case h:b=(f-v)/Y+(f<v?6:0);break;case f:b=(v-h)/Y+2;break;case v:b=(h-f)/Y+4;break}b/=6}return{h:b,s:N,l:U}}function Tfe(h,f,v){var E,T,b;h=mr(h,360),f=mr(f,100),v=mr(v,100);function N(W,Z,fe){return fe<0&&(fe+=1),fe>1&&(fe-=1),fe<1/6?W+(Z-W)*6*fe:fe<1/2?Z:fe<2/3?W+(Z-W)*(2/3-fe)*6:W}if(f===0)E=T=b=v;else{var U=v<.5?v*(1+f):v+f-v*f,Y=2*v-U;E=N(Y,U,h+1/3),T=N(Y,U,h),b=N(Y,U,h-1/3)}return{r:E*255,g:T*255,b:b*255}}function w$(h,f,v){h=mr(h,255),f=mr(f,255),v=mr(v,255);var E=Math.max(h,f,v),T=Math.min(h,f,v),b,N,U=E,Y=E-T;if(N=E===0?0:Y/E,E==T)b=0;else{switch(E){case h:b=(f-v)/Y+(f<v?6:0);break;case f:b=(v-h)/Y+2;break;case v:b=(h-f)/Y+4;break}b/=6}return{h:b,s:N,v:U}}function Afe(h,f,v){h=mr(h,360)*6,f=mr(f,100),v=mr(v,100);var E=Math.floor(h),T=h-E,b=v*(1-f),N=v*(1-T*f),U=v*(1-(1-T)*f),Y=E%6,W=[v,N,b,b,U,v][Y],Z=[U,v,v,N,b,b][Y],fe=[b,b,U,v,v,N][Y];return{r:W*255,g:Z*255,b:fe*255}}function O$(h,f,v,E){var T=[Ch(Math.round(h).toString(16)),Ch(Math.round(f).toString(16)),Ch(Math.round(v).toString(16))];return E&&T[0].charAt(0)==T[0].charAt(1)&&T[1].charAt(0)==T[1].charAt(1)&&T[2].charAt(0)==T[2].charAt(1)?T[0].charAt(0)+T[1].charAt(0)+T[2].charAt(0):T.join("")}function Efe(h,f,v,E,T){var b=[Ch(Math.round(h).toString(16)),Ch(Math.round(f).toString(16)),Ch(Math.round(v).toString(16)),Ch(A$(E))];return T&&b[0].charAt(0)==b[0].charAt(1)&&b[1].charAt(0)==b[1].charAt(1)&&b[2].charAt(0)==b[2].charAt(1)&&b[3].charAt(0)==b[3].charAt(1)?b[0].charAt(0)+b[1].charAt(0)+b[2].charAt(0)+b[3].charAt(0):b.join("")}function S$(h,f,v,E){var T=[Ch(A$(E)),Ch(Math.round(h).toString(16)),Ch(Math.round(f).toString(16)),Ch(Math.round(v).toString(16))];return T.join("")}qt.equals=function(h,f){return!h||!f?!1:qt(h).toRgbString()==qt(f).toRgbString()},qt.random=function(){return qt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Mfe(h,f){f=f===0?0:f||10;var v=qt(h).toHsl();return v.s-=f/100,v.s=DS(v.s),qt(v)}function Pfe(h,f){f=f===0?0:f||10;var v=qt(h).toHsl();return v.s+=f/100,v.s=DS(v.s),qt(v)}function kfe(h){return qt(h).desaturate(100)}function Ife(h,f){f=f===0?0:f||10;var v=qt(h).toHsl();return v.l+=f/100,v.l=DS(v.l),qt(v)}function Rfe(h,f){f=f===0?0:f||10;var v=qt(h).toRgb();return v.r=Math.max(0,Math.min(255,v.r-Math.round(255*-(f/100)))),v.g=Math.max(0,Math.min(255,v.g-Math.round(255*-(f/100)))),v.b=Math.max(0,Math.min(255,v.b-Math.round(255*-(f/100)))),qt(v)}function Bfe(h,f){f=f===0?0:f||10;var v=qt(h).toHsl();return v.l-=f/100,v.l=DS(v.l),qt(v)}function Dfe(h,f){var v=qt(h).toHsl(),E=(v.h+f)%360;return v.h=E<0?360+E:E,qt(v)}function Lfe(h){var f=qt(h).toHsl();return f.h=(f.h+180)%360,qt(f)}function C$(h,f){if(isNaN(f)||f<=0)throw new Error("Argument to polyad must be a positive number");for(var v=qt(h).toHsl(),E=[qt(h)],T=360/f,b=1;b<f;b++)E.push(qt({h:(v.h+b*T)%360,s:v.s,l:v.l}));return E}function Nfe(h){var f=qt(h).toHsl(),v=f.h;return[qt(h),qt({h:(v+72)%360,s:f.s,l:f.l}),qt({h:(v+216)%360,s:f.s,l:f.l})]}function Vfe(h,f,v){f=f||6,v=v||30;var E=qt(h).toHsl(),T=360/v,b=[qt(h)];for(E.h=(E.h-(T*f>>1)+720)%360;--f;)E.h=(E.h+T)%360,b.push(qt(E));return b}function Ffe(h,f){f=f||6;for(var v=qt(h).toHsv(),E=v.h,T=v.s,b=v.v,N=[],U=1/f;f--;)N.push(qt({h:E,s:T,v:b})),b=(b+U)%1;return N}qt.mix=function(h,f,v){v=v===0?0:v||50;var E=qt(h).toRgb(),T=qt(f).toRgb(),b=v/100,N={r:(T.r-E.r)*b+E.r,g:(T.g-E.g)*b+E.g,b:(T.b-E.b)*b+E.b,a:(T.a-E.a)*b+E.a};return qt(N)},qt.readability=function(h,f){var v=qt(h),E=qt(f);return(Math.max(v.getLuminance(),E.getLuminance())+.05)/(Math.min(v.getLuminance(),E.getLuminance())+.05)},qt.isReadable=function(h,f,v){var E=qt.readability(h,f),T,b;switch(b=!1,T=Gfe(v),T.level+T.size){case"AAsmall":case"AAAlarge":b=E>=4.5;break;case"AAlarge":b=E>=3;break;case"AAAsmall":b=E>=7;break}return b},qt.mostReadable=function(h,f,v){var E=null,T=0,b,N,U,Y;v=v||{},N=v.includeFallbackColors,U=v.level,Y=v.size;for(var W=0;W<f.length;W++)b=qt.readability(h,f[W]),b>T&&(T=b,E=qt(f[W]));return qt.isReadable(h,E,{level:U,size:Y})||!N?E:(v.includeFallbackColors=!1,qt.mostReadable(h,["#fff","#000"],v))};var Nk=qt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$fe=qt.hexNames=Ufe(Nk);function Ufe(h){var f={};for(var v in h)h.hasOwnProperty(v)&&(f[h[v]]=v);return f}function T$(h){return h=parseFloat(h),(isNaN(h)||h<0||h>1)&&(h=1),h}function mr(h,f){zfe(h)&&(h="100%");var v=Xfe(h);return h=Math.min(f,Math.max(0,parseFloat(h))),v&&(h=parseInt(h*f,10)/100),Math.abs(h-f)<1e-6?1:h%f/parseFloat(f)}function DS(h){return Math.min(1,Math.max(0,h))}function za(h){return parseInt(h,16)}function zfe(h){return typeof h=="string"&&h.indexOf(".")!=-1&&parseFloat(h)===1}function Xfe(h){return typeof h=="string"&&h.indexOf("%")!=-1}function Ch(h){return h.length==1?"0"+h:""+h}function ex(h){return h<=1&&(h=h*100+"%"),h}function A$(h){return Math.round(parseFloat(h)*255).toString(16)}function E$(h){return za(h)/255}var Th=function(){var h="[-\\+]?\\d+%?",f="[-\\+]?\\d*\\.\\d+%?",v="(?:"+f+")|(?:"+h+")",E="[\\s|\\(]+("+v+")[,|\\s]+("+v+")[,|\\s]+("+v+")\\s*\\)?",T="[\\s|\\(]+("+v+")[,|\\s]+("+v+")[,|\\s]+("+v+")[,|\\s]+("+v+")\\s*\\)?";return{CSS_UNIT:new RegExp(v),rgb:new RegExp("rgb"+E),rgba:new RegExp("rgba"+T),hsl:new RegExp("hsl"+E),hsla:new RegExp("hsla"+T),hsv:new RegExp("hsv"+E),hsva:new RegExp("hsva"+T),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Au(h){return!!Th.CSS_UNIT.exec(h)}function Wfe(h){h=h.replace(wfe,"").replace(Ofe,"").toLowerCase();var f=!1;if(Nk[h])h=Nk[h],f=!0;else if(h=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var v;return(v=Th.rgb.exec(h))?{r:v[1],g:v[2],b:v[3]}:(v=Th.rgba.exec(h))?{r:v[1],g:v[2],b:v[3],a:v[4]}:(v=Th.hsl.exec(h))?{h:v[1],s:v[2],l:v[3]}:(v=Th.hsla.exec(h))?{h:v[1],s:v[2],l:v[3],a:v[4]}:(v=Th.hsv.exec(h))?{h:v[1],s:v[2],v:v[3]}:(v=Th.hsva.exec(h))?{h:v[1],s:v[2],v:v[3],a:v[4]}:(v=Th.hex8.exec(h))?{r:za(v[1]),g:za(v[2]),b:za(v[3]),a:E$(v[4]),format:f?"name":"hex8"}:(v=Th.hex6.exec(h))?{r:za(v[1]),g:za(v[2]),b:za(v[3]),format:f?"name":"hex"}:(v=Th.hex4.exec(h))?{r:za(v[1]+""+v[1]),g:za(v[2]+""+v[2]),b:za(v[3]+""+v[3]),a:E$(v[4]+""+v[4]),format:f?"name":"hex8"}:(v=Th.hex3.exec(h))?{r:za(v[1]+""+v[1]),g:za(v[2]+""+v[2]),b:za(v[3]+""+v[3]),format:f?"name":"hex"}:!1}function Gfe(h){var f,v;return h=h||{level:"AA",size:"small"},f=(h.level||"AA").toUpperCase(),v=(h.size||"small").toLowerCase(),f!=="AA"&&f!=="AAA"&&(f="AA"),v!=="small"&&v!=="large"&&(v="small"),{level:f,size:v}}var M$={inject:["ColorPickerInstance"],methods:{handleEscape(h){this.ColorPickerInstance.handleOnEscapeKeydown(h)}}},tx={data(){return{prefixCls:"ivu-color-picker",inputPrefixCls:"ivu-input",iconPrefixCls:"ivu-icon",transferPrefixCls:"ivu-transfer"}}};function Vk(h,f){const v=qt(h),{_a:E}=v;return E==null&&v.setAlpha(f||1),v}function Hfe(h,f){const v=f&&f.a;if(f){if(f.hsl)return Vk(f.hsl,v);if(f.hex&&f.hex.length>0)return Vk(f.hex,v)}return Vk(f,v)}function ix(h,f){const v=h===""?"#2d8cf0":h,E=Hfe(h,v),T=E.toHsl(),b=E.toHsv();return T.s===0&&(T.h=v.h||v.hsl&&v.hsl.h||f||0,b.h=T.h),b.v<.0164&&(b.h=v.h||v.hsv&&v.hsv.h||0,b.s=v.s||v.hsv&&v.hsv.s||0),T.l<.01&&(T.h=v.h||v.hsl&&v.hsl.h||0,T.s=v.s||v.hsl&&v.hsl.s||0),{hsl:T,hex:E.toHexString().toUpperCase(),rgba:E.toRgb(),hsv:b,oldHue:v.h||f||T.h,source:v.source,a:v.a||E.getAlpha()}}function Ah(h,f,v){return h<f?f:h>v?v:h}function P$(h,f,v){return S(h,f)?v:0}function k$(h,f){return h.touches?h.touches[0][f]:0}function nx(h){const{r:f,g:v,b:E,a:T}=h;return`rgba(${[f,v,E,T].join(",")})`}const Qfe={name:"RecommendedColors",mixins:[M$,tx],emits:["picker-color","change"],props:{list:{type:Array,default:void 0}},data(){const h=Math.ceil(this.list.length/12),f=1;return{left:-f,right:f,up:-f,down:f,powerKey:"shiftKey",grid:{x:1,y:1},rows:h,columns:12}},computed:{hideClass(){return`${this.prefixCls}-hide`},linearIndex(){return this.getLinearIndex(this.grid)},currentCircle(){return this.$refs[`color-circle-${this.linearIndex}`][0]}},methods:{getLinearIndex(h){return this.columns*(h.y-1)+h.x-1},getMaxLimit(h){return h==="x"?this.columns:this.rows},handleArrow(h,f,v){h.preventDefault(),h.stopPropagation(),this.blurColor();const E={...this.grid};h[this.powerKey]?v<0?E[f]=1:E[f]=this.getMaxLimit(f):E[f]+=v;const T=this.getLinearIndex(E);T>=0&&T<this.list.length&&(this.grid[f]=Ah(E[f],1,this.getMaxLimit(f))),this.focusColor()},blurColor(){this.currentCircle.classList.add(this.hideClass)},focusColor(){this.currentCircle.classList.remove(this.hideClass)},handleEnter(h){this.handleClick(h,this.currentCircle)},handleClick(h,f){h.preventDefault(),h.stopPropagation(),this.$refs.reference.focus();const v=f||h.target,E=v.dataset.colorId||v.parentElement.dataset.colorId;if(E){this.blurColor();const T=Number(E)+1;this.grid.x=T%this.columns||this.columns,this.grid.y=Math.ceil(T/this.columns),this.focusColor(),this.$emit("picker-color",this.list[E]),this.$emit("change",{hex:this.list[E],source:"hex"})}},lineBreak(h,f){if(!f)return!1;const v=f+1;return v<h.length&&v%this.columns===0}}},jfe=["data-color-id"],Yfe={key:0};function qfe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{ref:"reference",tabindex:"0",onClick:f[0]||(f[0]=(...N)=>b.handleClick&&b.handleClick(...N)),onKeydown:[f[1]||(f[1]=n.withKeys((...N)=>h.handleEscape&&h.handleEscape(...N),["esc"])),f[2]||(f[2]=n.withKeys((...N)=>b.handleEnter&&b.handleEnter(...N),["enter"])),f[3]||(f[3]=n.withKeys(N=>b.handleArrow(N,"x",T.left),["left"])),f[4]||(f[4]=n.withKeys(N=>b.handleArrow(N,"x",T.right),["right"])),f[5]||(f[5]=n.withKeys(N=>b.handleArrow(N,"y",T.up),["up"])),f[6]||(f[6]=n.withKeys(N=>b.handleArrow(N,"y",T.down),["down"]))],onBlur:f[7]||(f[7]=(...N)=>b.blurColor&&b.blurColor(...N)),onFocus:f[8]||(f[8]=(...N)=>b.focusColor&&b.focusColor(...N))},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.list,(N,U)=>(n.openBlock(),n.createElementBlock(n.Fragment,{key:N+":"+U},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-picker-colors-wrapper"])},[n.createElementVNode("div",{"data-color-id":U},[n.createElementVNode("div",{style:n.normalizeStyle({background:N}),class:n.normalizeClass([h.prefixCls+"-picker-colors-wrapper-color"])},null,6),n.createElementVNode("div",{ref_for:!0,ref:"color-circle-"+U,class:n.normalizeClass([h.prefixCls+"-picker-colors-wrapper-circle",b.hideClass])},null,2)],8,jfe)],2),b.lineBreak(v.list,U)?(n.openBlock(),n.createElementBlock("br",Yfe)):n.createCommentVNode("",!0)],64))),128))],544)}var Zfe=l(Qfe,[["render",qfe]]),rx={mixins:[M$],props:{focused:{type:Boolean,default:!1},value:{type:Object,default:void 0}},created(){this.focused&&setTimeout(()=>this.$el.focus(),1)},beforeUnmount(){this.unbindEventListeners()},methods:{handleLeft(h){this.handleSlide(h,this.left,"left")},handleRight(h){this.handleSlide(h,this.right,"right")},handleUp(h){this.handleSlide(h,this.up,"up")},handleDown(h){this.handleSlide(h,this.down,"down")},handleMouseDown(h){this.ColorPickerInstance.handleOnDragging(!0),this.handleChange(h,!0),o(window,"mousemove",this.handleChange),o(window,"mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){a(window,"mousemove",this.handleChange),a(window,"mouseup",this.handleMouseUp),setTimeout(()=>this.ColorPickerInstance.handleOnDragging(!1),1)},getLeft(h){if(!s)return;const{container:f}=this.$refs,v=f.getBoundingClientRect().left+window.pageXOffset;return(h.pageX||k$(h,"PageX"))-v},getTop(h){if(!s)return;const{container:f}=this.$refs,v=f.getBoundingClientRect().top+window.pageYOffset;return(h.pageY||k$(h,"PageY"))-v}}};const Kfe={name:"Saturation",mixins:[rx,tx],emits:["change"],data(){return{left:-.01,right:.01,up:.01,down:-.01,multiplier:10,powerKey:"shiftKey"}},computed:{bgColorStyle(){return{background:`hsl(${this.value.hsv.h}, 100%, 50%)`}},pointerStyle(){return{top:`${-(this.value.hsv.v*100)+1+100}%`,left:`${this.value.hsv.s*100}%`}}},methods:{change(h,f,v,E){this.$emit("change",{h,s:f,v,a:E,source:"hsva"})},handleSlide(h,f,v){h.preventDefault(),h.stopPropagation();const E=h[this.powerKey]?f*this.multiplier:f,{h:T,s:b,v:N,a:U}=this.value.hsv,Y=Ah(b+P$(v,["left","right"],E),0,1),W=Ah(N+P$(v,["up","down"],E),0,1);this.change(T,Y,W,U)},handleChange(h){h.preventDefault(),h.stopPropagation();const{clientWidth:f,clientHeight:v}=this.$refs.container,E=Ah(this.getLeft(h),0,f),T=Ah(this.getTop(h),0,v),b=E/f,N=Ah(1-T/v,0,1);this.change(this.value.hsv.h,b,N,this.value.hsv.a)},handleMouseDown(h){rx.methods.handleMouseDown.call(this,h),o(window,"mouseup",this.handleChange)},unbindEventListeners(h){rx.methods.unbindEventListeners.call(this,h),a(window,"mouseup",this.handleChange)}}};function Jfe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([h.prefixCls+"-saturation-wrapper"]),tabindex:"0",onKeydown:[f[1]||(f[1]=n.withKeys((...N)=>h.handleEscape&&h.handleEscape(...N),["esc"])),f[3]||(f[3]=n.withKeys((...N)=>h.handleLeft&&h.handleLeft(...N),["left"])),f[4]||(f[4]=n.withKeys((...N)=>h.handleRight&&h.handleRight(...N),["right"])),f[5]||(f[5]=n.withKeys((...N)=>h.handleUp&&h.handleUp(...N),["up"])),f[6]||(f[6]=n.withKeys((...N)=>h.handleDown&&h.handleDown(...N),["down"]))],onClick:f[2]||(f[2]=N=>h.$el.focus())},[n.createElementVNode("div",{ref:"container",style:n.normalizeStyle(b.bgColorStyle),class:n.normalizeClass([h.prefixCls+"-saturation"]),onMousedown:f[0]||(f[0]=(...N)=>b.handleMouseDown&&b.handleMouseDown(...N))},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-saturation--white"])},null,2),n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-saturation--black"])},null,2),n.createElementVNode("div",{style:n.normalizeStyle(b.pointerStyle),class:n.normalizeClass([h.prefixCls+"-saturation-pointer"])},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-saturation-circle"])},null,2)],6)],38)],34)}var epe=l(Kfe,[["render",Jfe]]);const tpe={name:"Hue",mixins:[rx,tx],emits:["change"],data(){const h=.06944444444444445,f=20*h;return{left:-h,right:h,up:f,down:-f,powerKey:"shiftKey",percent:Ah(this.value.hsl.h*100/360,0,100)}},watch:{value(){this.percent=Ah(this.value.hsl.h*100/360,0,100)}},methods:{change(h){this.percent=Ah(h,0,100);const{h:f,s:v,l:E,a:T}=this.value.hsl,b=Ah(h/100*360,0,360);f!==b&&this.$emit("change",{h:b,s:v,l:E,a:T,source:"hsl"})},handleSlide(h,f){if(h.preventDefault(),h.stopPropagation(),h[this.powerKey]){this.change(f<0?0:100);return}this.change(this.percent+f)},handleChange(h){h.preventDefault(),h.stopPropagation();const f=this.getLeft(h);if(f<0){this.change(0);return}const{clientWidth:v}=this.$refs.container;if(f>v){this.change(100);return}this.change(f*100/v)}}};function ipe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([h.prefixCls+"-hue"]),tabindex:"0",onClick:f[3]||(f[3]=N=>h.$el.focus()),onKeydown:[f[4]||(f[4]=n.withKeys((...N)=>h.handleEscape&&h.handleEscape(...N),["esc"])),f[5]||(f[5]=n.withKeys((...N)=>h.handleLeft&&h.handleLeft(...N),["left"])),f[6]||(f[6]=n.withKeys((...N)=>h.handleRight&&h.handleRight(...N),["right"])),f[7]||(f[7]=n.withKeys((...N)=>h.handleUp&&h.handleUp(...N),["up"])),f[8]||(f[8]=n.withKeys((...N)=>h.handleDown&&h.handleDown(...N),["down"]))]},[n.createElementVNode("div",{ref:"container",class:n.normalizeClass([h.prefixCls+"-hue-container"]),onMousedown:f[0]||(f[0]=(...N)=>h.handleMouseDown&&h.handleMouseDown(...N)),onTouchmove:f[1]||(f[1]=(...N)=>b.handleChange&&b.handleChange(...N)),onTouchstart:f[2]||(f[2]=(...N)=>b.handleChange&&b.handleChange(...N))},[n.createElementVNode("div",{style:n.normalizeStyle({top:0,left:`${T.percent}%`}),class:n.normalizeClass([h.prefixCls+"-hue-pointer"])},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-hue-picker"])},null,2)],6)],34)],34)}var npe=l(tpe,[["render",ipe]]);const rpe={name:"Alpha",mixins:[rx,tx],emits:["change"],data(){return{left:-1,right:1,up:10,down:-10,powerKey:"shiftKey"}},computed:{gradientStyle(){const{r:h,g:f,b:v}=this.value.rgba,E=nx({r:h,g:f,b:v,a:0}),T=nx({r:h,g:f,b:v,a:1});return{background:`linear-gradient(to right, ${E} 0%, ${T} 100%)`}}},methods:{change(h){const{h:f,s:v,l:E}=this.value.hsl,{a:T}=this.value;T!==h&&this.$emit("change",{h:f,s:v,l:E,a:h,source:"rgba"})},handleSlide(h,f){h.preventDefault(),h.stopPropagation(),this.change(Ah(h[this.powerKey]?f:Math.round(this.value.hsl.a*100+f)/100,0,1))},handleChange(h){h.preventDefault(),h.stopPropagation();const f=this.getLeft(h);if(f<0){this.change(0);return}const{clientWidth:v}=this.$refs.container;if(f>v){this.change(1);return}this.change(Math.round(f*100/v)/100)}}};function spe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([h.prefixCls+"-alpha"]),tabindex:"0",onClick:f[3]||(f[3]=N=>h.$el.focus()),onKeydown:[f[4]||(f[4]=n.withKeys((...N)=>h.handleEscape&&h.handleEscape(...N),["esc"])),f[5]||(f[5]=n.withKeys((...N)=>h.handleLeft&&h.handleLeft(...N),["left"])),f[6]||(f[6]=n.withKeys((...N)=>h.handleRight&&h.handleRight(...N),["right"])),f[7]||(f[7]=n.withKeys((...N)=>h.handleUp&&h.handleUp(...N),["up"])),f[8]||(f[8]=n.withKeys((...N)=>h.handleDown&&h.handleDown(...N),["down"]))]},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-alpha-checkboard-wrap"])},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-alpha-checkerboard"])},null,2)],2),n.createElementVNode("div",{style:n.normalizeStyle(b.gradientStyle),class:n.normalizeClass([h.prefixCls+"-alpha-gradient"])},null,6),n.createElementVNode("div",{ref:"container",class:n.normalizeClass([h.prefixCls+"-alpha-container"]),onMousedown:f[0]||(f[0]=(...N)=>h.handleMouseDown&&h.handleMouseDown(...N)),onTouchmove:f[1]||(f[1]=(...N)=>b.handleChange&&b.handleChange(...N)),onTouchstart:f[2]||(f[2]=(...N)=>b.handleChange&&b.handleChange(...N))},[n.createElementVNode("div",{style:n.normalizeStyle({top:0,left:`${h.value.a*100}%`}),class:n.normalizeClass([h.prefixCls+"-alpha-pointer"])},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-alpha-picker"])},null,2)],6)],34)],34)}var ope=l(rpe,[["render",spe]]);const ape={name:"ColorPicker",components:{Drop:Ze,RecommendColors:Zfe,Saturation:epe,Hue:npe,Alpha:ope,iInput:Pl,iButton:Do,Icon:O},directives:{clickOutside:$i},mixins:[kn,tx,Ui,Sh],emits:["on-active-change","on-open-change","on-change","on-pick-success","on-pick-clear","update:modelValue"],provide(){return{ColorPickerInstance:this}},props:{modelValue:{type:String,default:void 0},hue:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},recommend:{type:Boolean,default:!1},format:{type:String,validator(h){return S(h,["hsl","hsv","hex","rgb"])},default:void 0},colors:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},hideDropDown:{type:Boolean,default:!1},placement:{type:String,validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},name:{type:String,default:void 0},editable:{type:Boolean,default:!0},capture:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return h.$VIEWUI?h.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{val:ix(this.modelValue||""),currentValue:this.modelValue||"",dragging:!1,visible:!1,recommendedColor:["#2d8cf0","#19be6b","#ff9900","#ed4014","#00b5ff","#19c919","#f9e31c","#ea1a1a","#9b1dea","#00c2b1","#ac7a33","#1d35ea","#8bc34a","#f16b62","#ea4ca3","#0d94aa","#febd79","#5d4037","#00bcd4","#f06292","#cddc39","#607d8b","#000000","#ffffff"]}},computed:{arrowClasses(){return[`${this.inputPrefixCls}-icon`,`${this.inputPrefixCls}-icon-normal`]},transition(){return S(this.placement,["bottom-start","bottom","bottom-end"])?"slide-up":"fade"},saturationColors:{get(){return this.val},set(h){this.val=h,this.$emit("on-active-change",this.formatColor)}},classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-transfer`]:this.transfer}]},wrapClasses(){return[`${this.prefixCls}-rel`,`${this.prefixCls}-${this.size}`,`${this.inputPrefixCls}-wrapper`,`${this.inputPrefixCls}-wrapper-${this.size}`,{[`${this.prefixCls}-disabled`]:this.itemDisabled}]},inputClasses(){return[`${this.prefixCls}-input`,`${this.inputPrefixCls}`,`${this.inputPrefixCls}-${this.size}`,{[`${this.prefixCls}-focused`]:this.visible,[`${this.prefixCls}-disabled`]:this.itemDisabled}]},dropClasses(){return{[`${this.transferPrefixCls}-no-max-height`]:!0,[`${this.prefixCls}-transfer`]:this.transfer,[`${this.prefixCls}-hide-drop`]:this.hideDropDown,[this.transferClassName]:this.transferClassName}},displayedColorStyle(){return{backgroundColor:nx(this.visible?this.saturationColors.rgba:qt(this.modelValue).toRgb())}},formatColor(){const{format:h,saturationColors:f}=this;if(h){if(h==="hsl")return qt(f.hsl).toHslString();if(h==="hsv")return qt(f.hsv).toHsvString();if(h==="hex")return f.hex;if(h==="rgb")return nx(f.rgba)}else if(this.alpha)return nx(f.rgba);return f.hex},confirmColorClasses(){return[`${this.prefixCls}-confirm-color`,{[`${this.prefixCls}-confirm-color-editable`]:this.editable}]},arrowType(){const h=this.globalConfig;let f="ios-arrow-down";return h&&(h.colorPicker.customArrow?f="":h.colorPicker.arrow&&(f=h.colorPicker.arrow)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.colorPicker.customArrow&&(f=h.colorPicker.customArrow),f},arrowSize(){const h=this.globalConfig;let f="";return h&&h.colorPicker.arrowSize&&(f=h.colorPicker.arrowSize),f}},watch:{modelValue(h){this.val=ix(h||"")},visible(h){this.val=ix(this.modelValue||""),this.$refs.drop[h?"update":"destroy"](),this.$emit("on-open-change",!!h)}},methods:{setDragging(h){this.dragging=h},handleClose(h){if(this.visible){if(this.dragging||h.type==="mousedown"){this.$refs.editColorInput&&h.target!==this.$refs.editColorInput.$el.querySelector("input")&&h.preventDefault();return}if(this.transfer){const f=this.$refs.drop.$refs.drop;if(f===h.target||f.contains(h.target))return}this.closer(h);return}this.visible=!1},toggleVisible(){this.itemDisabled||(this.visible=!this.visible,this.$refs.input.focus())},childChange(h){this.colorChange(h)},colorChange(h,f){this.oldHue=this.saturationColors.hsl.h,this.saturationColors=ix(h,f||this.oldHue)},closer(h){h&&(h.preventDefault(),h.stopPropagation()),this.visible=!1,this.$refs.input.focus()},handleButtons(h,f){this.currentValue=f,this.$emit("update:modelValue",f),this.$emit("on-change",f),this.handleFormItemChange("change",f),this.closer(h)},handleSuccess(h){this.handleButtons(h,this.formatColor),this.$emit("on-pick-success")},handleClear(h){this.handleButtons(h,""),this.$emit("on-pick-clear")},handleSelectColor(h){this.val=ix(h),this.$emit("on-active-change",this.formatColor)},handleEditColor(h){const f=h.target.value;this.handleSelectColor(f)},handleFirstTab(h){h.shiftKey&&(h.preventDefault(),h.stopPropagation(),this.$refs.ok.$el.focus())},handleLastTab(h){h.shiftKey||(h.preventDefault(),h.stopPropagation(),this.$refs.saturation.$el.focus())},onTab(h){this.visible&&h.preventDefault()},onEscape(h){this.visible&&this.closer(h)},onArrow(h){this.visible||(h.preventDefault(),h.stopPropagation(),this.visible=!0)},handleOnEscapeKeydown(h){this.closer(h)},handleOnDragging(h){this.setDragging(h)}}},lpe=["name","value"],hpe=["tabindex"];function cpe(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Saturation"),Y=n.resolveComponent("Hue"),W=n.resolveComponent("Alpha"),Z=n.resolveComponent("recommend-colors"),fe=n.resolveComponent("i-input"),Te=n.resolveComponent("i-button"),Se=n.resolveComponent("Drop"),we=n.resolveDirective("click-outside");return n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.createElementVNode("div",{ref:"reference",class:n.normalizeClass(b.wrapClasses),onClick:f[4]||(f[4]=(...ce)=>b.toggleVisible&&b.toggleVisible(...ce))},[n.createElementVNode("input",{name:v.name,value:T.currentValue,type:"hidden"},null,8,lpe),n.createVNode(N,{type:b.arrowType,custom:b.customArrowType,size:b.arrowSize,class:n.normalizeClass(b.arrowClasses)},null,8,["type","custom","size","class"]),n.createElementVNode("div",{ref:"input",tabindex:h.itemDisabled?void 0:0,class:n.normalizeClass(b.inputClasses),onKeydown:[f[0]||(f[0]=n.withKeys((...ce)=>b.onTab&&b.onTab(...ce),["tab"])),f[1]||(f[1]=n.withKeys((...ce)=>b.onEscape&&b.onEscape(...ce),["esc"])),f[2]||(f[2]=n.withKeys((...ce)=>b.onArrow&&b.onArrow(...ce),["up"])),f[3]||(f[3]=n.withKeys((...ce)=>b.onArrow&&b.onArrow(...ce),["down"]))]},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-color"])},[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-color-empty"])},[n.createElementVNode("i",{class:n.normalizeClass([h.iconPrefixCls,h.iconPrefixCls+"-ios-close"])},null,2)],2),[[n.vShow,v.modelValue===""&&!T.visible]]),n.withDirectives(n.createElementVNode("div",{style:n.normalizeStyle(b.displayedColorStyle)},null,4),[[n.vShow,v.modelValue||T.visible]])],2)],42,hpe)],2),n.createVNode(Se,{ref:"drop",visible:T.visible,placement:v.placement,transfer:v.transfer,classes:b.dropClasses,eventsEnabled:v.eventsEnabled,"transition-name":"transition-drop"},{default:n.withCtx(()=>[n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[T.visible?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([h.prefixCls+"-picker"])},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-picker-wrapper"])},[n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-picker-panel"])},[n.createVNode(U,{ref:"saturation",value:b.saturationColors,focused:T.visible,onChange:b.childChange,onKeydown:n.withKeys(b.handleFirstTab,["tab"])},null,8,["value","focused","onChange","onKeydown"])],2),v.hue?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([h.prefixCls+"-picker-hue-slider"])},[n.createVNode(Y,{value:b.saturationColors,onChange:b.childChange},null,8,["value","onChange"])],2)):n.createCommentVNode("",!0),v.alpha?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass([h.prefixCls+"-picker-alpha-slider"])},[n.createVNode(W,{value:b.saturationColors,onChange:b.childChange},null,8,["value","onChange"])],2)):n.createCommentVNode("",!0),v.colors.length?(n.openBlock(),n.createBlock(Z,{key:2,list:v.colors,class:n.normalizeClass([h.prefixCls+"-picker-colors"]),onPickerColor:b.handleSelectColor},null,8,["list","class","onPickerColor"])):n.createCommentVNode("",!0),!v.colors.length&&v.recommend?(n.openBlock(),n.createBlock(Z,{key:3,list:T.recommendedColor,class:n.normalizeClass([h.prefixCls+"-picker-colors"]),onPickerColor:b.handleSelectColor},null,8,["list","class","onPickerColor"])):n.createCommentVNode("",!0)],2),n.createElementVNode("div",{class:n.normalizeClass([h.prefixCls+"-confirm"])},[n.createElementVNode("span",{class:n.normalizeClass(b.confirmColorClasses)},[v.editable?(n.openBlock(),n.createBlock(fe,{key:0,ref:"editColorInput",modelValue:b.formatColor,size:"small",onOnEnter:b.handleEditColor,onOnBlur:b.handleEditColor},null,8,["modelValue","onOnEnter","onOnBlur"])):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(b.formatColor),1)],64))],2),n.createVNode(Te,{class:n.normalizeClass([h.prefixCls+"-confirm-btn-cancel"]),ref:"clear",tabindex:0,size:"small",onClick:b.handleClear,onKeydown:[n.withKeys(b.handleClear,["enter"]),n.withKeys(b.closer,["esc"])]},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(h.t("i.datepicker.clear")),1)]),_:1},8,["class","onClick","onKeydown"]),n.createVNode(Te,{ref:"ok",tabindex:0,size:"small",type:"primary",onClick:b.handleSuccess,onKeydown:[n.withKeys(b.handleLastTab,["tab"]),n.withKeys(b.handleSuccess,["enter"]),n.withKeys(b.closer,["esc"])]},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(h.t("i.datepicker.ok")),1)]),_:1},8,["onClick","onKeydown"])],2)],2)):n.createCommentVNode("",!0)]),_:1})]),_:1},8,["visible","placement","transfer","classes","eventsEnabled"])],2)),[[we,b.handleClose,v.capture]])}var I$=l(ape,[["render",cpe]]);const upe="ivu-layout",dpe={name:"Content",computed:{wrapClasses(){return`${upe}-content`}}};function fpe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[n.renderSlot(h.$slots,"default")],2)}var Fk=l(dpe,[["render",fpe]]);function ppe(h){var f;if(h.nodeName==="SELECT")h.focus(),f=h.value;else if(h.nodeName==="INPUT"||h.nodeName==="TEXTAREA"){var v=h.hasAttribute("readonly");v||h.setAttribute("readonly",""),h.select(),h.setSelectionRange(0,h.value.length),v||h.removeAttribute("readonly"),f=h.value}else{h.hasAttribute("contenteditable")&&h.focus();var E=window.getSelection(),T=document.createRange();T.selectNodeContents(h),E.removeAllRanges(),E.addRange(T),f=E.toString()}return f}var mpe=ppe,R$={name:"RenderCell",props:{render:Function},render(){return this.render(n.h)}};const gpe={components:{RenderCell:R$},props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},withIcon:Boolean,render:{type:Function},hasTitle:Boolean,styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String},background:{type:Boolean,default:!1},msgType:{type:String}},data(){return{withDesc:!1}},computed:{baseClass(){return`${this.prefixCls}-notice`},renderFunc(){return this.render||function(){}},classes(){return[this.baseClass,{[`${this.className}`]:!!this.className,[`${this.baseClass}-closable`]:this.closable,[`${this.baseClass}-with-desc`]:this.withDesc,[`${this.baseClass}-with-background`]:this.background}]},contentClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]},messageContentClasses(){return[`${this.baseClass}-content`,{[`${this.baseClass}-content-${this.msgType}`]:this.msgType,[`${this.baseClass}-content-background`]:this.background}]},contentWithIcon(){return[this.withIcon?`${this.prefixCls}-content-with-icon`:"",!this.hasTitle&&this.withIcon?`${this.prefixCls}-content-with-render-notitle`:""]},messageClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]}},methods:{clearCloseTimer(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close(){this.clearCloseTimer(),this.onClose(),this.$parent.$parent.close(this.name)},handleEnter(h){this.type==="message"&&(h.style.height=h.scrollHeight+"px")},handleLeave(h){this.type==="message"&&s&&document.getElementsByClassName("ivu-message-notice").length!==1&&(h.style.height=0,h.style.paddingTop=0,h.style.paddingBottom=0)}},mounted(){if(this.handleEnter(this.$el),this.clearCloseTimer(),this.duration!==0&&(this.closeTimer=setTimeout(()=>{this.close()},this.duration*1e3)),this.prefixCls==="ivu-notice"){let h=this.$refs.content.querySelectorAll(`.${this.prefixCls}-desc`)[0];this.withDesc=this.render?!0:h?h.innerHTML!=="":!1}},beforeUnmount(){this.handleLeave(this.$el),this.clearCloseTimer()}},vpe=["innerHTML"],ype=[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)],_pe=["innerHTML"],xpe=[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)];function bpe(h,f,v,E,T,b){const N=n.resolveComponent("render-cell");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(v.styles)},[v.type==="notice"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createElementVNode("div",{class:n.normalizeClass(b.contentClasses),ref:"content",innerHTML:v.content},null,10,vpe),n.createElementVNode("div",{class:n.normalizeClass(b.contentWithIcon)},[n.createVNode(N,{render:b.renderFunc},null,8,["render"])],2),v.closable?(n.openBlock(),n.createElementBlock("a",{key:0,class:n.normalizeClass([b.baseClass+"-close"]),onClick:f[0]||(f[0]=(...U)=>b.close&&b.close(...U))},ype,2)):n.createCommentVNode("",!0)],64)):n.createCommentVNode("",!0),v.type==="message"?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass(b.messageContentClasses),ref:"content"},[n.createElementVNode("div",{class:n.normalizeClass([b.baseClass+"-content-text"]),innerHTML:v.content},null,10,_pe),n.createElementVNode("div",{class:n.normalizeClass([b.baseClass+"-content-text"])},[n.createVNode(N,{render:b.renderFunc},null,8,["render"])],2),v.closable?(n.openBlock(),n.createElementBlock("a",{key:0,class:n.normalizeClass([b.baseClass+"-close"]),onClick:f[1]||(f[1]=(...U)=>b.close&&b.close(...U))},xpe,2)):n.createCommentVNode("",!0)],2)):n.createCommentVNode("",!0)],6)}var wpe=l(gpe,[["render",bpe]]);const Ope="ivu-notification";let Spe=0;const Cpe=Date.now();function Tpe(){return"ivuNotification_"+Cpe+"_"+Spe++}const Ape={components:{Notice:wpe},props:{prefixCls:{type:String,default:Ope},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String},transitionName:{type:String}},data(){return{notices:[],tIndex:this.handleGetIndex()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.className}`]:!!this.className}]},wrapStyles(){let h=Object.assign({},this.styles);return h["z-index"]=1010+this.tIndex,h}},methods:{add(h){const f=h.name||Tpe();let v=Object.assign({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:f},h);this.notices.push(v),this.tIndex=this.handleGetIndex()},close(h){const f=this.notices;for(let v=0;v<f.length;v++)if(f[v].name===h){this.notices.splice(v,1);break}},closeAll(){this.notices=[]},handleGetIndex(){return je(),Ae}}};function Epe(h,f,v,E,T,b){const N=n.resolveComponent("Notice");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.wrapStyles)},[n.createVNode(n.TransitionGroup,{name:v.transitionName,appear:""},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.notices,U=>(n.openBlock(),n.createBlock(N,{key:U.name,"prefix-cls":v.prefixCls,styles:U.styles,type:U.type,content:U.content,duration:U.duration,render:U.render,"has-title":U.hasTitle,withIcon:U.withIcon,closable:U.closable,name:U.name,"transition-name":U.transitionName,background:U.background,"msg-type":U.msgType,"on-close":U.onClose},null,8,["prefix-cls","styles","type","content","duration","render","has-title","withIcon","closable","name","transition-name","background","msg-type","on-close"]))),128))]),_:1},8,["name"])],6)}var LS=l(Ape,[["render",Epe]]);LS.newInstance=h=>{if(!s)return;const f=h||{};let v=null;const E=n.createApp({render(){return n.h(LS,Object.assign({ref:"notification"},f))},created(){v=n.getCurrentInstance()}}),T=document.createElement("div");document.body.appendChild(T),E.mount(T);const b=v.refs.notification;return{notice(N){b.add(N)},remove(N){b.close(N)},component:b,destroy(N){b.closeAll(),s&&setTimeout(function(){document.body.removeChild(document.getElementsByClassName(N)[0])},500)}}};const $k="ivu-message",B$="ivu-icon",D$="ivu_message_key_",R0={top:24,duration:1.5,background:!1};let NS,L$=1;const Mpe={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle",loading:"ios-loading"},N$="move-up";function V$(){return NS=NS||LS.newInstance({prefixCls:$k,styles:{top:`${R0.top}px`},transitionName:N$}),NS}function Ppe(h="",f=R0.duration,v,E=function(){},T=!1,b=function(){},N=R0.background){const U=Mpe[v],Y=v==="loading"?" ivu-load-loop":"";let W=V$();return W.notice({name:`${D$}${L$}`,duration:f,styles:{},transitionName:N$,content:`
            <div class="${$k}-custom-content ${$k}-${v}">
                <i class="${B$} ${B$}-${U} ${Y}"></i>
                <span>${h}</span>
            </div>
        `,render:b,onClose:E,closable:T,type:"message",msgType:v,background:N}),function(){let Z=L$++;return function(){W.remove(`${D$}${Z}`)}}()}var sx={name:"Message",info(h){return this.message("info",h)},success(h){return this.message("success",h)},warning(h){return this.message("warning",h)},error(h){return this.message("error",h)},loading(h){return this.message("loading",h)},message(h,f){return typeof f=="string"&&(f={content:f}),Ppe(f.content,f.duration,h,f.onClose,f.closable,f.render,f.background)},config(h){(h.top||h.top===0)&&(R0.top=h.top),(h.duration||h.duration===0)&&(R0.duration=h.duration),h.background&&(R0.background=h.background)},destroy(){let h=V$();NS=null,h.destroy("ivu-message")}};const kpe="复制成功",Ipe="复制失败";function VS({text:h="",successTip:f=kpe,errorTip:v=Ipe,success:E,error:T,showTip:b=!0}){if(!s)return;const N=document.documentElement.getAttribute("dir")==="rtl",U=document.createElement("textarea");U.style.fontSize="12pt",U.style.border="0",U.style.padding="0",U.style.margin="0",U.style.position="absolute",U.style[N?"right":"left"]="-9999px";let Y=window.pageYOffset||document.documentElement.scrollTop;U.style.top=`${Y}px`,U.setAttribute("readonly",""),U.value=h,document.body.appendChild(U),mpe(U);let W;try{W=document.execCommand("copy"),b&&sx.success({content:f}),document.body.removeChild(U),E&&E.call()}catch{W=!1,b&&sx.error({content:v}),document.body.removeChild(U),T&&T.call()}}function Uk(h){return h*1<10?`0${h}`:h}const Rpe={name:"CountDown",emits:["on-end"],props:{format:{type:Function},target:{type:[Date,Number]},interval:{type:Number,default:1e3}},data(){return{lastTime:""}},methods:{initTime(){let h=0,f=0;try{Object.prototype.toString.call(this.target)==="[object Date]"?f=this.target.getTime():f=new Date(this.target).getTime()}catch(v){throw new Error("invalid target prop",v)}return h=f-new Date().getTime(),h<0?0:h},tick(){let{lastTime:h}=this;this.timer=setTimeout(()=>{h<this.interval?(clearTimeout(this.timer),this.lastTime=0,this.$emit("on-end")):(h-=this.interval,this.lastTime=h,this.tick())},this.interval)},defaultFormat(h){const f=Math.floor(h/36e5),v=Math.floor((h-f*36e5)/6e4),E=Math.floor((h-f*36e5-v*6e4)/1e3);return`${Uk(f)}:${Uk(v)}:${Uk(E)}`}},computed:{result(){const{format:h=this.defaultFormat}=this;return h(this.lastTime)}},watch:{target(){this.timer&&clearTimeout(this.timer),this.lastTime=this.initTime(),this.tick()}},created(){this.lastTime=this.initTime()},mounted(){this.tick()},beforeUnmount(){this.timer&&clearTimeout(this.timer)}};function Bpe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("span",null,n.toDisplayString(b.result),1)}var F$=l(Rpe,[["render",Bpe]]),zk={exports:{}};(function(h,f){(function(v,E){h.exports=E(q,f,h)})(te,function(v,E,T){var b=function(N,U,Y,W,Z,fe){function Te(qe){var Le,rt,et,ri,si,Xt,Lt=qe<0;if(qe=Math.abs(qe).toFixed(ce.decimals),qe+="",Le=qe.split("."),rt=Le[0],et=Le.length>1?ce.options.decimal+Le[1]:"",ce.options.useGrouping){for(ri="",si=0,Xt=rt.length;si<Xt;++si)si!==0&&si%3===0&&(ri=ce.options.separator+ri),ri=rt[Xt-si-1]+ri;rt=ri}return ce.options.numerals.length&&(rt=rt.replace(/[0-9]/g,function(Ht){return ce.options.numerals[+Ht]}),et=et.replace(/[0-9]/g,function(Ht){return ce.options.numerals[+Ht]})),(Lt?"-":"")+ce.options.prefix+rt+et+ce.options.suffix}function Se(qe,Le,rt,et){return rt*(-Math.pow(2,-10*qe/et)+1)*1024/1023+Le}function we(qe){return typeof qe=="number"&&!isNaN(qe)}var ce=this;if(ce.version=function(){return"1.9.3"},ce.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:Se,formattingFn:Te,prefix:"",suffix:"",numerals:[]},fe&&typeof fe=="object")for(var Be in ce.options)fe.hasOwnProperty(Be)&&fe[Be]!==null&&(ce.options[Be]=fe[Be]);ce.options.separator===""?ce.options.useGrouping=!1:ce.options.separator=""+ce.options.separator;for(var Zt=0,Ct=["webkit","moz","ms","o"],Rt=0;Rt<Ct.length&&!window.requestAnimationFrame;++Rt)window.requestAnimationFrame=window[Ct[Rt]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Ct[Rt]+"CancelAnimationFrame"]||window[Ct[Rt]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(qe,Le){var rt=new Date().getTime(),et=Math.max(0,16-(rt-Zt)),ri=window.setTimeout(function(){qe(rt+et)},et);return Zt=rt+et,ri}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(qe){clearTimeout(qe)}),ce.initialize=function(){return!!ce.initialized||(ce.error="",ce.d=typeof N=="string"?document.getElementById(N):N,ce.d?(ce.startVal=Number(U),ce.endVal=Number(Y),we(ce.startVal)&&we(ce.endVal)?(ce.decimals=Math.max(0,W||0),ce.dec=Math.pow(10,ce.decimals),ce.duration=1e3*Number(Z)||2e3,ce.countDown=ce.startVal>ce.endVal,ce.frameVal=ce.startVal,ce.initialized=!0,!0):(ce.error="[CountUp] startVal ("+U+") or endVal ("+Y+") is not a number",!1)):(ce.error="[CountUp] target is null or undefined",!1))},ce.printValue=function(qe){var Le=ce.options.formattingFn(qe);ce.d.tagName==="INPUT"?this.d.value=Le:ce.d.tagName==="text"||ce.d.tagName==="tspan"?this.d.textContent=Le:this.d.innerHTML=Le},ce.count=function(qe){ce.startTime||(ce.startTime=qe),ce.timestamp=qe;var Le=qe-ce.startTime;ce.remaining=ce.duration-Le,ce.options.useEasing?ce.countDown?ce.frameVal=ce.startVal-ce.options.easingFn(Le,0,ce.startVal-ce.endVal,ce.duration):ce.frameVal=ce.options.easingFn(Le,ce.startVal,ce.endVal-ce.startVal,ce.duration):ce.countDown?ce.frameVal=ce.startVal-(ce.startVal-ce.endVal)*(Le/ce.duration):ce.frameVal=ce.startVal+(ce.endVal-ce.startVal)*(Le/ce.duration),ce.countDown?ce.frameVal=ce.frameVal<ce.endVal?ce.endVal:ce.frameVal:ce.frameVal=ce.frameVal>ce.endVal?ce.endVal:ce.frameVal,ce.frameVal=Math.round(ce.frameVal*ce.dec)/ce.dec,ce.printValue(ce.frameVal),Le<ce.duration?ce.rAF=requestAnimationFrame(ce.count):ce.callback&&ce.callback()},ce.start=function(qe){ce.initialize()&&(ce.callback=qe,ce.rAF=requestAnimationFrame(ce.count))},ce.pauseResume=function(){ce.paused?(ce.paused=!1,delete ce.startTime,ce.duration=ce.remaining,ce.startVal=ce.frameVal,requestAnimationFrame(ce.count)):(ce.paused=!0,cancelAnimationFrame(ce.rAF))},ce.reset=function(){ce.paused=!1,delete ce.startTime,ce.initialized=!1,ce.initialize()&&(cancelAnimationFrame(ce.rAF),ce.printValue(ce.startVal))},ce.update=function(qe){if(ce.initialize()){if(qe=Number(qe),!we(qe))return void(ce.error="[CountUp] update() - new endVal is not a number: "+qe);ce.error="",qe!==ce.frameVal&&(cancelAnimationFrame(ce.rAF),ce.paused=!1,delete ce.startTime,ce.startVal=ce.frameVal,ce.endVal=qe,ce.countDown=ce.startVal>ce.endVal,ce.rAF=requestAnimationFrame(ce.count))}},ce.initialize()&&ce.printValue(ce.startVal)};return b})})(zk,zk.exports);var Dpe=zk.exports;const Lpe={name:"CountUp",props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1,default(){return{}}},callback:{type:Function,required:!1,default:()=>{}}},data(){return{CountUp:null}},watch:{end(h){this.CountUp&&this.CountUp.update&&this.CountUp.update(h)}},mounted(){this.init()},methods:{init(){this.CountUp||(this.CountUp=new Dpe(this.$el,this.start,this.end,this.decimals,this.duration,this.options),this.CountUp.start(()=>{this.callback(this.CountUp)}))},destroy(){this.CountUp=null}},beforeUnmounted(){this.destroy()},start(h){this.CountUp&&this.CountUp.start&&this.CountUp.start(()=>{h&&h(this.CountUp)})},pauseResume(){this.CountUp&&this.CountUp.pauseResume&&this.CountUp.pauseResume()},reset(){this.CountUp&&this.CountUp.reset&&this.CountUp.reset()},update(h){this.CountUp&&this.CountUp.update&&this.CountUp.update(h)}},Npe={class:"ivu-count-up"};function Vpe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("span",Npe)}var $$=l(Lpe,[["render",Vpe]]),Eh={},U$=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,cm=/\d\d?/,Fpe=/\d{3}/,$pe=/\d{4}/,FS=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,z$=function(){};function X$(h,f){for(var v=[],E=0,T=h.length;E<T;E++)v.push(h[E].substr(0,f));return v}function W$(h){return function(f,v,E){var T=E[h].indexOf(v.charAt(0).toUpperCase()+v.substr(1).toLowerCase());~T&&(f.month=T)}}function _c(h,f){for(h=String(h),f=f||2;h.length<f;)h="0"+h;return h}var G$=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],H$=["January","February","March","April","May","June","July","August","September","October","November","December"],Upe=X$(H$,3),zpe=X$(G$,3);Eh.i18n={dayNamesShort:zpe,dayNames:G$,monthNamesShort:Upe,monthNames:H$,amPm:["am","pm"],DoFn:function(h){return h+["th","st","nd","rd"][h%10>3?0:(h-h%10!==10)*h%10]}};var Q$={D:function(h){return h.getDay()},DD:function(h){return _c(h.getDay())},Do:function(h,f){return f.DoFn(h.getDate())},d:function(h){return h.getDate()},dd:function(h){return _c(h.getDate())},ddd:function(h,f){return f.dayNamesShort[h.getDay()]},dddd:function(h,f){return f.dayNames[h.getDay()]},M:function(h){return h.getMonth()+1},MM:function(h){return _c(h.getMonth()+1)},MMM:function(h,f){return f.monthNamesShort[h.getMonth()]},MMMM:function(h,f){return f.monthNames[h.getMonth()]},yy:function(h){return String(h.getFullYear()).substr(2)},yyyy:function(h){return h.getFullYear()},h:function(h){return h.getHours()%12||12},hh:function(h){return _c(h.getHours()%12||12)},H:function(h){return h.getHours()},HH:function(h){return _c(h.getHours())},m:function(h){return h.getMinutes()},mm:function(h){return _c(h.getMinutes())},s:function(h){return h.getSeconds()},ss:function(h){return _c(h.getSeconds())},S:function(h){return Math.round(h.getMilliseconds()/100)},SS:function(h){return _c(Math.round(h.getMilliseconds()/10),2)},SSS:function(h){return _c(h.getMilliseconds(),3)},a:function(h,f){return h.getHours()<12?f.amPm[0]:f.amPm[1]},A:function(h,f){return h.getHours()<12?f.amPm[0].toUpperCase():f.amPm[1].toUpperCase()},ZZ:function(h){var f=h.getTimezoneOffset();return(f>0?"-":"+")+_c(Math.floor(Math.abs(f)/60)*100+Math.abs(f)%60,4)}},Br={d:[cm,function(h,f){h.day=f}],M:[cm,function(h,f){h.month=f-1}],yy:[cm,function(h,f){var v=new Date,E=+(""+v.getFullYear()).substr(0,2);h.year=""+(f>68?E-1:E)+f}],h:[cm,function(h,f){h.hour=f}],m:[cm,function(h,f){h.minute=f}],s:[cm,function(h,f){h.second=f}],yyyy:[$pe,function(h,f){h.year=f}],S:[/\d/,function(h,f){h.millisecond=f*100}],SS:[/\d{2}/,function(h,f){h.millisecond=f*10}],SSS:[Fpe,function(h,f){h.millisecond=f}],D:[cm,z$],ddd:[FS,z$],MMM:[FS,W$("monthNamesShort")],MMMM:[FS,W$("monthNames")],a:[FS,function(h,f,v){var E=f.toLowerCase();E===v.amPm[0]?h.isPm=!1:E===v.amPm[1]&&(h.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(h,f){var v=(f+"").match(/([\+\-]|\d\d)/gi),E;v&&(E=+(v[1]*60)+parseInt(v[2],10),h.timezoneOffset=v[0]==="+"?E:-E)}]};Br.DD=Br.DD,Br.dddd=Br.ddd,Br.Do=Br.dd=Br.d,Br.mm=Br.m,Br.hh=Br.H=Br.HH=Br.h,Br.MM=Br.M,Br.ss=Br.s,Br.A=Br.a,Eh.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Eh.format=function(h,f,v){var E=v||Eh.i18n;if(typeof h=="number"&&(h=new Date(h)),Object.prototype.toString.call(h)!=="[object Date]"||isNaN(h.getTime()))throw new Error("Invalid Date in fecha.format");return f=Eh.masks[f]||f||Eh.masks.default,f.replace(U$,function(T){return T in Q$?Q$[T](h,E):T.slice(1,T.length-1)})},Eh.parse=function(h,f,v){var E=v||Eh.i18n;if(typeof f!="string")throw new Error("Invalid format in fecha.parse");if(f=Eh.masks[f]||f,h.length>1e3)return!1;var T=!0,b={};if(f.replace(U$,function(Y){if(Br[Y]){var W=Br[Y],Z=h.search(W[0]);~Z?h.replace(W[0],function(fe){return W[1](b,fe,E),h=h.substr(Z+fe.length),fe}):T=!1}return Br[Y]?"":Y.slice(1,Y.length-1)}),!T)return!1;var N=new Date;b.isPm===!0&&b.hour!=null&&+b.hour!=12?b.hour=+b.hour+12:b.isPm===!1&&+b.hour==12&&(b.hour=0);var U;return b.timezoneOffset!=null?(b.minute=+(b.minute||0)-+b.timezoneOffset,U=new Date(Date.UTC(b.year||N.getFullYear(),b.month||0,b.day||1,b.hour||0,b.minute||0,b.second||0,b.millisecond||0))):U=new Date(b.year||N.getFullYear(),b.month||0,b.day||1,b.hour||0,b.minute||0,b.second||0,b.millisecond||0),U};const Xk=function(h){let f=new Date(h);return isNaN(f.getTime())&&typeof h=="string"&&(f=h.split("-").map(Number),f[1]+=1,f=new Date(...f)),isNaN(f.getTime())?null:f},Lo=function(h){const f=new Date(h);return f.setHours(0,0,0,0),f.getTime()},Xpe=(h,f,v)=>{if(!f||!v)return!1;const[E,T]=[f,v].sort();return h>=E&&h<=T},ox=function(h,f){return h=Xk(h),h?Eh.format(h,f||"yyyy-MM-dd"):""},$S=function(h,f){return Eh.parse(h,f||"yyyy-MM-dd")},j$=function(h,f){return new Date(h,f+1,0).getDate()},Y$=function(h,f){const v=new Date(h),E=v.getMonth()+f,T=j$(v.getFullYear(),E);return T<v.getDate()&&v.setDate(T),v.setMonth(E),v},xc=function(){const h=new Date;return h.setHours(0),h.setMinutes(0),h.setSeconds(0),h},Wk=function(){const h={yyyy:v=>v.getFullYear(),m:v=>v.getMonth()+1,mm:v=>("0"+(v.getMonth()+1)).slice(-2),mmm:(v,E)=>v.toLocaleDateString(E,{month:"long"}).slice(0,3),Mmm:(v,E)=>{const T=v.toLocaleDateString(E,{month:"long"});return(T[0].toUpperCase()+T.slice(1).toLowerCase()).slice(0,3)},mmmm:(v,E)=>v.toLocaleDateString(E,{month:"long"}),Mmmm:(v,E)=>{const T=v.toLocaleDateString(E,{month:"long"});return T[0].toUpperCase()+T.slice(1).toLowerCase()}},f=new RegExp(["yyyy","Mmmm","mmmm","Mmm","mmm","mm","m"].join("|"),"g");return function(v,E,T){const b=/(\[[^\]]+\])([^\[\]]+)(\[[^\]]+\])/,N=E.match(b).slice(1),U=N[1],Y=[N[0],N[2]].map(W=>({label:W.replace(/\[[^\]]+\]/,Z=>Z.slice(1,-1).replace(f,fe=>h[fe](T,v))),type:W.indexOf("yy")!=-1?"year":"month"}));return{separator:U,labels:Y}}}(),q$={date:"yyyy-MM-dd",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss"},ax=function(h,f){return ox(h,f)},lx=function(h,f){return $S(h,f)},Gk=function(h,f,v){if(Array.isArray(h)&&h.length===2){const E=h[0],T=h[1];if(E&&T)return ox(E,f)+v+ox(T,f)}else if(!Array.isArray(h)&&h instanceof Date)return ox(h,f);return""},Hk=function(h,f,v){const E=Array.isArray(h)?h:h.split(v);if(E.length===2){const T=E[0],b=E[1];return[T instanceof Date?T:$S(T,f),b instanceof Date?b:$S(b,f)]}return[]},B0={default:{formatter(h){return h?""+h:""},parser(h){return h===void 0||h===""?null:h}},date:{formatter:ax,parser:lx},datetime:{formatter:ax,parser:lx},daterange:{formatter:Gk,parser:Hk},datetimerange:{formatter:Gk,parser:Hk},timerange:{formatter:Gk,parser:Hk},time:{formatter:ax,parser:lx},month:{formatter:ax,parser:lx},year:{formatter:ax,parser:lx},multiple:{formatter:(h,f)=>h.filter(Boolean).map(v=>ox(v,f)).join(","),parser:(h,f)=>(typeof h=="string"?h.split(","):h).map(v=>v instanceof Date?v:(typeof v=="string"?v=v.trim():typeof v!="number"&&!v&&(v=""),$S(v,f)))},number:{formatter(h){return h?""+h:""},parser(h){let f=Number(h);return isNaN(h)?null:f}}},US="ivu-date-picker",Wpe="ivu-picker",Gpe=h=>h.reduce((f,v)=>f&&!v||typeof v=="string"&&v.trim()==="",!0),Hpe={40:"up",39:"right",38:"down",37:"left"},D0=(h,f,v)=>{if(h==="left")return f*-1;if(h==="right")return f*1;if(h==="up")return v*1;if(h==="down")return v*-1},Qpe=h=>{const f="ivu-date-picker-btn-pulse";h.classList.add(f),setTimeout(()=>h.classList.remove(f),200)},Qk=h=>h?[h.getHours(),h.getMinutes(),h.getSeconds()]:[0,0,0],jpe={mixins:[Ui,Sh],components:{iInput:Pl,Drop:Ze,Icon:O},directives:{clickOutside:$i},emits:["on-clickoutside","on-clear","on-change","on-ok","on-open-change","update:modelValue"],provide(){return{PickerInstance:this}},props:{format:{type:String},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1},open:{type:Boolean,default:null},multiple:{type:Boolean,default:!1},timePickerOptions:{type:Object,default:()=>({})},splitPanels:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},placeholder:{type:String,default:""},placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},steps:{type:Array,default:()=>[]},modelValue:{type:[Date,String,Array]},options:{type:Object,default:()=>({})},separator:{type:String,default:" - "},capture:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return h.$VIEWUI?h.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){const h=this.type.includes("range"),f=h?[null,null]:[null],v=Gpe((h?this.modelValue:[this.modelValue])||[])?f:this.parseDate(this.modelValue),E=v.map(Qk);return{prefixCls:US,showClose:!1,visible:!1,internalValue:v,disableClickOutSide:!1,disableCloseUnderTransfer:!1,selectionMode:this.onSelectionModeChange(this.type),forceInputRerender:1,isFocused:!1,focusedDate:v[0]||this.startDate||new Date,focusedTime:{column:0,picker:0,time:E,active:!1},internalFocus:!1,isValueNull:!1,timeSpinnerList:[],panelTableList:[]}},computed:{wrapperClasses(){return[US,{[US+"-focused"]:this.isFocused}]},publicVModelValue(){if(this.multiple)return this.internalValue.slice();{const h=this.type.includes("range");let f=this.internalValue.map(v=>v instanceof Date?new Date(v):v||"");return this.type.match(/^time/)&&(f=f.map(this.formatDate)),h||this.multiple?f:f[0]}},publicStringValue(){const{formatDate:h,publicVModelValue:f,type:v}=this;return v.match(/^time/)?f:this.multiple?h(f):Array.isArray(f)?f.map(h):h(f)},opened(){return this.open===null?this.visible:this.open},transition(){return this.placement.match(/^bottom/)?"slide-up":"slide-down"},visualValue(){return this.formatDate(this.internalValue)},isConfirm(){return this.confirm||this.type==="datetime"||this.type==="datetimerange"||this.multiple},arrowType(){const h=this.globalConfig;let f="";if(this.type==="time"||this.type==="timerange")f="ios-time-outline",h&&(h.timePicker.customIcon?f="":h.timePicker.icon&&(f=h.timePicker.icon));else{const v=this.globalConfig;f="ios-calendar-outline",v&&(v.datePicker.customIcon?f="":v.datePicker.icon&&(f=v.datePicker.icon))}return this.showClose&&(f="ios-close-circle"),f},customArrowType(){const h=this.globalConfig;let f="";return this.showClose||(this.type==="time"||this.type==="timerange"?h&&h.timePicker.customIcon&&(f=h.timePicker.customIcon):h&&h.datePicker.customIcon&&(f=h.datePicker.customIcon)),f},arrowSize(){const h=this.globalConfig;let f="";return this.showClose||(this.type==="time"||this.type==="timerange"?h&&h.timePicker.iconSize&&(f=h.timePicker.iconSize):h&&h.datePicker.iconSize&&(f=h.datePicker.iconSize)),f},dropdownCls(){return{[US+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{onSelectionModeChange(h){return h.match(/^date/)&&(h="date"),this.selectionMode=S(h,["year","month","date","time"])&&h,this.selectionMode},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(h){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(h&&h.type==="mousedown"&&this.visible){h.preventDefault(),h.stopPropagation();return}if(this.visible){const f=this.$refs.pickerPanel&&this.$refs.pickerPanel.$el;if(h&&f&&f.contains(h.target))return;this.visible=!1,h&&h.preventDefault(),h&&h.stopPropagation(),this.$emit("on-clickoutside",h);return}this.isFocused=!1,this.disableClickOutSide=!1},handleFocus(h){this.readonly||(this.isFocused=!0,!(h&&h.type==="focus")&&(this.itemDisabled||(this.visible=!0)))},handleBlur(h){if(this.internalFocus){this.internalFocus=!1;return}if(this.visible){h.preventDefault();return}this.isFocused=!1,this.onSelectionModeChange(this.type),this.internalValue=this.internalValue.slice(),this.reset(),this.$refs.pickerPanel.onToggleVisibility(!1)},handleKeydown(h){const f=h.keyCode;if(f===9)if(this.visible)if(h.stopPropagation(),h.preventDefault(),this.isConfirm){const E=`.${Wpe}-confirm > *`,T=this.$refs.drop.$el.querySelectorAll(E);this.internalFocus=!0,[...T][h.shiftKey?"pop":"shift"]().focus()}else this.handleClose();else this.focused=!1;const v=[37,38,39,40];if(!this.visible&&v.includes(f)){this.visible=!0;return}if(f===27&&this.visible&&(h.stopPropagation(),this.handleClose()),f===13){const E=this.timeSpinnerList.map(T=>T.timeSpinner);if(E.length>0){const T=E[0].showSeconds?3:2,b=Math.floor(this.focusedTime.column/T),N=this.focusedTime.time[b];E[b].chooseValue(N);return}if(this.type.match(/range/))this.$refs.pickerPanel.handleRangePick(this.focusedDate,"date");else{const T=this.panelTableList.map(N=>N.panelTable),b=N=>{const U=["year","month","date"].indexOf(this.type)+1;return[N.getFullYear(),N.getMonth(),N.getDate()].slice(0,U).join("-")};T.find(({cells:N})=>N.find(({date:U,disabled:Y})=>b(U)===b(this.focusedDate)&&!Y))&&this.onPick(this.focusedDate,!1,"date")}}!v.includes(f)||(this.focusedTime.active&&h.preventDefault(),this.navigateDatePanel(Hpe[f],h.shiftKey))},reset(){this.$refs.pickerPanel.reset&&this.$refs.pickerPanel.reset()},navigateTimePanel(h){this.focusedTime.active=!0;const f=h.match(/left|right/),v=h.match(/up|down/),E=this.timeSpinnerList.map(W=>W.timeSpinner),T=(E[0].showSeconds?3:2)*E.length,b=(W=>(W+(f?h==="left"?-1:1:0)+T)%T)(this.focusedTime.column),N=T/E.length,U=Math.floor(b/N),Y=b%N;if(f){const W=this.internalValue.map(Qk);this.focusedTime={...this.focusedTime,column:b,time:W},E.forEach((Z,fe)=>{fe===U?Z.updateFocusedTime(Y,W[U]):Z.updateFocusedTime(-1,Z.focusedTime)})}if(v){const W=h==="up"?1:-1,Z=["hours","minutes","seconds"],fe=E[U][`${Z[Y]}List`],Te=(fe.findIndex(({text:ce})=>this.focusedTime.time[U][Y]===ce)+W+fe.length)%fe.length,Se=fe[Te].text,we=this.focusedTime.time.map((ce,Be)=>(Be!==U||(ce[Y]=Se),ce));this.focusedTime={...this.focusedTime,time:we},E.forEach((ce,Be)=>{Be===U?ce.updateFocusedTime(Y,we[Be]):ce.updateFocusedTime(-1,ce.focusedTime)})}},navigateDatePanel(h,f){const v=this.timeSpinnerList.map(b=>b.timeSpinner);if(v.length>0){this.navigateTimePanel(h,f,v);return}if(f){this.type==="year"?this.focusedDate=new Date(this.focusedDate.getFullYear()+D0(h,0,10),this.focusedDate.getMonth(),this.focusedDate.getDate()):this.focusedDate=new Date(this.focusedDate.getFullYear()+D0(h,0,1),this.focusedDate.getMonth()+D0(h,1,0),this.focusedDate.getDate());const b=h.match(/left|down/)?"prev":"next",N=h.match(/up|down/)?"-double":"",U=this.$refs.drop.$el.querySelector(`.ivu-date-picker-${b}-btn-arrow${N}`);U&&Qpe(U);return}const E=this.focusedDate||this.internalValue&&this.internalValue[0]||new Date,T=new Date(E);if(this.type.match(/^date/)){const b=j$(E.getFullYear(),E.getMonth()),N=E.getDate(),U=T.getDate()+D0(h,1,7);U<1?h.match(/left|right/)?(T.setMonth(T.getMonth()+1),T.setDate(U)):T.setDate(N+Math.floor((b-N)/7)*7):U>b?h.match(/left|right/)?(T.setMonth(T.getMonth()-1),T.setDate(U)):T.setDate(N%7):T.setDate(U)}this.type.match(/^month/)&&T.setMonth(T.getMonth()+D0(h,1,3)),this.type.match(/^year/)&&T.setFullYear(T.getFullYear()+D0(h,1,3)),this.focusedDate=T},handleInputChange(h){const f=this.type.includes("range")||this.multiple,v=this.visualValue,E=h.target.value,T=this.parseDate(E),b=this.options&&typeof this.options.disabledDate=="function"&&this.options.disabledDate,N=f?T:T[0],U=b&&b(N),Y=T.reduce((W,Z)=>W&&Z instanceof Date,!0);E!==v&&!U&&Y?(this.emitChange(this.type),this.internalValue=T):this.forceInputRerender++},handleInputMouseenter(){this.readonly||this.itemDisabled||this.visualValue&&this.clearable&&(this.showClose=!0)},handleInputMouseleave(){this.showClose=!1},handleIconClick(h){this.showClose?(h&&h.stopPropagation(),this.handleClear()):this.itemDisabled||this.handleFocus()},handleClear(){this.visible=!1,this.internalValue=this.internalValue.map(()=>null),this.$emit("on-clear"),this.handleFormItemChange("change",""),this.emitChange(this.type),this.reset(),setTimeout(()=>this.onSelectionModeChange(this.type),500)},emitChange(h){n.nextTick(()=>{this.$emit("on-change",this.publicStringValue,h),this.handleFormItemChange("change",this.publicStringValue)})},parseDate(h){const f=this.type.includes("range"),v=this.type,E=(B0[v]||B0.default).parser,T=this.format||q$[v],b=B0.multiple.parser;if(h&&v==="time"&&!(h instanceof Date))h=E(h,T,this.separator);else if(this.multiple&&h)h=b(h,T,this.separator);else if(f)if(!h)h=[null,null];else if(typeof h=="string")h=E(h,T,this.separator);else if(v==="timerange")h=E(h,T,this.separator).map(N=>N||"");else{const[N,U]=h;N instanceof Date&&U instanceof Date?h=h.map(Y=>new Date(Y)):typeof N=="string"&&typeof U=="string"?h=E(h.join(this.separator),T,this.separator):(!N||!U)&&(h=[null,null])}else typeof h=="string"&&v.indexOf("time")!==0&&(h=E(h,T)||null);return f||this.multiple?h||[]:[h]},formatDate(h){const f=q$[this.type];if(this.multiple){const v=B0.multiple.formatter;return v(h,this.format||f,this.separator)}else{const{formatter:v}=B0[this.type]||B0.default;return v(h,this.format||f,this.separator)}},onPick(h,f=!1,v){if(this.multiple){const E=h.getTime(),T=this.internalValue.findIndex(N=>N&&N.getTime()===E),b=[...this.internalValue,h].filter(Boolean).map(N=>N.getTime()).filter((N,U,Y)=>Y.indexOf(N)===U&&U!==T);this.internalValue=b.map(N=>new Date(N))}else h=this.parseDate(h),this.internalValue=Array.isArray(h)?h:[h];this.internalValue[0]&&(this.focusedDate=this.internalValue[0]),this.focusedTime={...this.focusedTime,time:this.internalValue.map(Qk)},this.isConfirm||this.onSelectionModeChange(this.type),this.isConfirm||(this.visible=!!f),this.emitChange(v)},onPickSuccess(){this.visible=!1,this.$emit("on-ok"),this.focus(),this.reset()},focus(){this.$refs.input&&this.$refs.input.focus()},updatePopper(){this.$refs.drop.update()},handleOnFocusInput(){this.focus()},handleOnUpdatePopper(){this.updatePopper()}},watch:{visible(h){h===!1&&this.$refs.drop.destroy(),h&&this.$refs.drop.update(),this.$emit("on-open-change",h)},modelValue(h){h===null&&(this.isValueNull=!0),this.internalValue=this.parseDate(h)},open(h){this.visible=h===!0},type(h){this.onSelectionModeChange(h)},publicVModelValue(h,f){const v=JSON.stringify(h),E=JSON.stringify(f);(v!==E||typeof h!=typeof f)&&(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",h))}},mounted(){this.open!==null&&(this.visible=this.open)}};function Ype(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("i-input"),Y=n.resolveComponent("Drop"),W=n.resolveDirective("click-outside");return n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapperClasses)},[n.createElementVNode("div",{ref:"reference",class:n.normalizeClass([T.prefixCls+"-rel"])},[n.renderSlot(h.$slots,"default",{},()=>[(n.openBlock(),n.createBlock(U,{key:T.forceInputRerender,"element-id":v.elementId,class:n.normalizeClass([T.prefixCls+"-editor"]),readonly:!v.editable||v.readonly,disabled:h.itemDisabled,size:v.size,placeholder:v.placeholder,"model-value":b.visualValue,name:v.name,ref:"input",onOnInputChange:b.handleInputChange,onOnFocus:b.handleFocus,onOnBlur:b.handleBlur,onClick:b.handleFocus,onKeydown:b.handleKeydown,onMouseenter:b.handleInputMouseenter,onMouseleave:b.handleInputMouseleave},{suffix:n.withCtx(()=>[n.createVNode(N,{onClick:b.handleIconClick,type:b.arrowType,custom:b.customArrowType,size:b.arrowSize},null,8,["onClick","type","custom","size"])]),_:1},8,["element-id","class","readonly","disabled","size","placeholder","model-value","name","onOnInputChange","onOnFocus","onOnBlur","onClick","onKeydown","onMouseenter","onMouseleave"]))])],2),n.createVNode(Y,{ref:"drop",visible:b.opened,classes:b.dropdownCls,placement:v.placement,eventsEnabled:v.eventsEnabled,transfer:v.transfer,"transition-name":"transition-drop",onClick:b.handleTransferClick},{default:n.withCtx(()=>[n.createElementVNode("div",null,[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(h.panel),n.mergeProps({ref:"pickerPanel",visible:T.visible,showTime:h.type==="datetime"||h.type==="datetimerange",confirm:b.isConfirm,selectionMode:T.selectionMode,steps:v.steps,format:v.format,"model-value":T.internalValue,"start-date":v.startDate,"split-panels":v.splitPanels,"show-week-numbers":v.showWeekNumbers,"picker-type":h.type,multiple:v.multiple,"focused-date":T.focusedDate,"time-picker-options":v.timePickerOptions},h.ownPickerProps,{onOnPick:b.onPick,onOnPickClear:b.handleClear,onOnPickSuccess:b.onPickSuccess,onOnPickClick:f[0]||(f[0]=Z=>T.disableClickOutSide=!0),onOnSelectionModeChange:b.onSelectionModeChange}),null,16,["visible","showTime","confirm","selectionMode","steps","format","model-value","start-date","split-panels","show-week-numbers","picker-type","multiple","focused-date","time-picker-options","onOnPick","onOnPickClear","onOnPickSuccess","onOnSelectionModeChange"]))])]),_:1},8,["visible","classes","placement","eventsEnabled","transfer","onClick"])],2)),[[W,b.handleClose,v.capture,{mousedown:!0}],[W,b.handleClose,v.capture,{touchstart:!0}],[W,b.handleClose,v.capture]])}var Z$=l(jpe,[["render",Ype]]),K$=1e3*60*60*24;function J$(h,f){return new Date(h,f+1,0).getDate()}function eU(h,f,v){return f===0&&v>50?h-1:f===11&&v<10?h+1:h}function tU(h,f,v,E){f>11&&(f=0,h++);var T=new Date(h,f,v);E&&T.setDate(T.getDate()+4-(T.getDay()||7));var b=E?T.getFullYear():h,N=new Date(b,0,1),U=1+Math.round((T-N)/K$);E||(U+=N.getDay());var Y=Math.ceil(U/7);if(!E){var W=new Date(h,f,v),Z=new Date(h+1,0,1),fe=Z.getDay();W.getTime()>=Z.getTime()-K$*fe&&(Y=1)}return Y}function qpe(h,f,v){for(var E=this.lang||"en",T=this.onlyDays,b=typeof this.weekStart>"u"?1:this.weekStart,N=b===1,U=[],Y=new Date(h,f,1),W=Y.getDay()||(N?7:0),Z=b-W,fe=tU(h,f,1,N),Te=J$(h,f),Se=J$(h,f-1),we,ce,Be,Zt=eU(h,f,fe),Ct={month:f,year:h,daysInMonth:Te},Rt=0;Rt<7;Rt++){Be=Z;for(var qe=0;qe<8;qe++){Rt>0&&qe>0&&Z++,Z>Te||Z<1?(ce=Z>Te?Z-Te:Se+Z,we=Z>Te?f+1:f-1):(ce=Z,we=f);var Le=function(){return qe===0?"weekLabel":Rt===0?"dayLabel":Z<1?"prevMonth":Z>Te?"nextMonth":"monthDay"}(),rt=Be!==Z&&Rt>0,et={desc:rt?ce:fe,week:fe,type:Le,format:N?"ISO 8601":"US",date:rt?new Date(Date.UTC(h,we,ce)):!1,year:Zt,index:U.length};v&&(typeof v=="function"?et=v.call(Ct,et,E):v.forEach(function(ri){et=ri.call(Ct,et,E)})),T&&rt?U.push(et):T||U.push(et)}Rt>0&&(fe=tU(h,we,ce+1,N)),Zt=eU(h,f,fe)}return Ct.cells=U,Ct}var Zpe=function(h){return qpe.bind(h)},Kpe={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"måndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lördag",7:"söndag"},pt:{0:"s",1:"segunda",2:"terça",3:"quarta",4:"quinta",5:"sexta",6:"sábado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}},bc=Kpe;function Jpe(h){return h==null?!1:h.constructor===Array||h.constructor===Object}function iU(h,f){for(var v in h)f[v]?Jpe(h[v])&&iU(h[v],f[v]):f[v]=h[v]}function nU(h,f){var v=[bc.classes[h.type]];return h.class?h.class=(typeof h.class=="string"?[h.class]:h.class).concat(v):h.class=v,h.type.indexOf("Label")>0&&(h.index==0&&bc.weekPlaceholder?h.desc=bc.weekPlaceholder:h.index<8?h.desc=bc.columnNames[f][h.index]:h.index%8==0&&(h.desc=h.week)),h.date&&(h.monthName=bc.monthNames[f][h.date.getMonth()]),this.monthName||(this.monthName=bc.monthNames[f][this.month]),this.labels||(this.labels={monthNames:bc.monthNames[f],columnNames:bc.columnNames[f],classes:bc.classes}),h}nU.setLabels=function(h){iU(h,bc)};var eme=nU,tme={Generator:Zpe,addLabels:eme},jk={name:"PanelTable",emits:["on-pick","on-pick-click","on-change-range"],inject:["PickerInstance"],props:{tableDate:{type:Date,required:!0},disabledDate:{type:Function},selectionMode:{type:String,required:!0},modelValue:{type:Array,required:!0},rangeState:{type:Object,default:()=>({from:null,to:null,selecting:!1})},focusedDate:{type:Date,required:!0}},data(){return{id:ie(6)}},computed:{dates(){const{selectionMode:h,modelValue:f,rangeState:v}=this;return h==="range"&&v.selecting?[v.from]:f}},methods:{handleClick(h,f){if(f.stopPropagation(),h.disabled||h.type==="weekLabel")return;const v=new Date(Lo(h.date));this.$emit("on-pick",v),this.$emit("on-pick-click")},handleMouseMove(h){if(!this.rangeState.selecting||h.disabled)return;const f=h.date;this.$emit("on-change-range",f)},addPanelTable(){const h=this.PickerInstance;h.panelTableList||(h.panelTableList=[]),h.panelTableList.push({id:this.id,panelTable:this})},removePanelTable(){const h=this.PickerInstance;if(h.panelTableList&&h.panelTableList.length){const f=h.panelTableList.findIndex(v=>v.id===this.id);h.panelTableList.splice(f,1)}}},mounted(){this.addPanelTable()},beforeUnmount(){this.removePanelTable()}},rr="ivu-date-picker-cells";const ime={mixins:[kn,jk],props:{showWeekNumbers:{type:Boolean,default:!1}},computed:{classes(){return[`${rr}`,{[`${rr}-show-week-numbers`]:this.showWeekNumbers}]},calendar(){const h=Number(this.t("i.datepicker.weekStartDay"));return new tme.Generator({onlyDays:!this.showWeekNumbers,weekStart:h})},headerDays(){const h=Number(this.t("i.datepicker.weekStartDay")),f=["sun","mon","tue","wed","thu","fri","sat"].map(E=>this.t("i.datepicker.weeks."+E)),v=f.splice(h,7-h).concat(f.splice(0,h));return this.showWeekNumbers?[""].concat(v):v},cells(){const h=this.tableDate.getFullYear(),f=this.tableDate.getMonth(),v=Lo(new Date),E=this.dates.filter(Boolean).map(Lo),[T,b]=this.dates.map(Lo),N=this.rangeState.from&&Lo(this.rangeState.from),U=this.rangeState.to&&Lo(this.rangeState.to),Y=this.selectionMode==="range",W=typeof this.disabledDate=="function"&&this.disabledDate;return this.calendar(h,f,Z=>{Z.date instanceof Date&&Z.date.setTime(Z.date.getTime()+Z.date.getTimezoneOffset()*6e4+480*60*1e3);const fe=Z.date&&Lo(Z.date),Te=Z.date&&f===Z.date.getMonth();return{...Z,type:fe===v?"today":Z.type,selected:Te&&E.includes(fe),disabled:Z.date&&W&&W(new Date(fe)),range:Te&&Y&&Xpe(fe,N,U),start:Te&&Y&&fe===T,end:Te&&Y&&fe===b}}).cells.slice(this.showWeekNumbers?8:0)}},methods:{getCellCls(h){return[`${rr}-cell`,{[`${rr}-cell-selected`]:h.selected||h.start||h.end,[`${rr}-cell-disabled`]:h.disabled,[`${rr}-cell-today`]:h.type==="today",[`${rr}-cell-prev-month`]:h.type==="prevMonth",[`${rr}-cell-next-month`]:h.type==="nextMonth",[`${rr}-cell-week-label`]:h.type==="weekLabel",[`${rr}-cell-range`]:h.range&&!h.start&&!h.end,[`${rr}-focused`]:Lo(h.date)===Lo(this.focusedDate)}]}}},nme={class:"ivu-date-picker-cells-header"},rme=["onClick","onMouseenter"];function sme(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.createElementVNode("div",nme,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.headerDays,N=>(n.openBlock(),n.createElementBlock("span",{key:N},n.toDisplayString(N),1))),128))]),(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.cells,(N,U)=>(n.openBlock(),n.createElementBlock("span",{key:String(N.date)+U,class:n.normalizeClass(b.getCellCls(N)),onClick:Y=>h.handleClick(N,Y),onMouseenter:Y=>h.handleMouseMove(N)},[n.createElementVNode("em",null,n.toDisplayString(N.desc),1)],42,rme))),128))],2)}var rU=l(ime,[["render",sme]]);const ome={mixins:[jk],props:{},computed:{classes(){return[`${rr}`,`${rr}-year`]},startYear(){return Math.floor(this.tableDate.getFullYear()/10)*10},cells(){let h=[];const f={text:"",selected:!1,disabled:!1},v=this.dates.filter(Boolean).map(T=>Lo(new Date(T.getFullYear(),0,1))),E=Lo(new Date(this.focusedDate.getFullYear(),0,1));for(let T=0;T<10;T++){const b=V(f);b.date=new Date(this.startYear+T,0,1),b.disabled=typeof this.disabledDate=="function"&&this.disabledDate(b.date)&&this.selectionMode==="year";const N=Lo(b.date);b.selected=v.includes(N),b.focused=N===E,h.push(b)}return h}},methods:{getCellCls(h){return[`${rr}-cell`,{[`${rr}-cell-selected`]:h.selected,[`${rr}-cell-disabled`]:h.disabled,[`${rr}-cell-focused`]:h.focused,[`${rr}-cell-range`]:h.range&&!h.start&&!h.end}]}}},ame=["onClick","onMouseenter"];function lme(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.cells,N=>(n.openBlock(),n.createElementBlock("span",{class:n.normalizeClass(b.getCellCls(N)),key:N.date,onClick:U=>h.handleClick(N,U),onMouseenter:U=>h.handleMouseMove(N)},[n.createElementVNode("em",null,n.toDisplayString(N.date.getFullYear()),1)],42,ame))),128))],2)}var sU=l(ome,[["render",lme]]);const hme={mixins:[kn,jk],props:{},computed:{classes(){return[`${rr}`,`${rr}-month`]},cells(){let h=[];const f={text:"",selected:!1,disabled:!1},v=this.tableDate.getFullYear(),E=this.dates.filter(Boolean).map(b=>Lo(new Date(b.getFullYear(),b.getMonth(),1))),T=Lo(new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),1));for(let b=0;b<12;b++){const N=V(f);N.date=new Date(v,b,1),N.text=this.tCell(b+1);const U=Lo(N.date);N.disabled=typeof this.disabledDate=="function"&&this.disabledDate(N.date)&&this.selectionMode==="month",N.selected=E.includes(U),N.focused=U===T,h.push(N)}return h}},methods:{getCellCls(h){return[`${rr}-cell`,{[`${rr}-cell-selected`]:h.selected,[`${rr}-cell-disabled`]:h.disabled,[`${rr}-cell-focused`]:h.focused,[`${rr}-cell-range`]:h.range&&!h.start&&!h.end}]},tCell(h){return this.t(`i.datepicker.months.m${h}`)}}},cme=["onClick","onMouseenter"];function ume(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.cells,N=>(n.openBlock(),n.createElementBlock("span",{class:n.normalizeClass(b.getCellCls(N)),key:N.text,onClick:U=>h.handleClick(N,U),onMouseenter:U=>h.handleMouseMove(N)},[n.createElementVNode("em",null,n.toDisplayString(N.text),1)],42,cme))),128))],2)}var oU=l(hme,[["render",ume]]),zS={props:{disabledHours:{type:Array,default(){return[]}},disabledMinutes:{type:Array,default(){return[]}},disabledSeconds:{type:Array,default(){return[]}},hideDisabledOptions:{type:Boolean,default:!1}}};const um="ivu-time-picker-cells",Yk=["hours","minutes","seconds"],dme={name:"TimeSpinner",mixins:[zS],emits:["on-change","on-pick-click"],inject:["PickerInstance"],props:{hours:{type:[Number,String],default:NaN},minutes:{type:[Number,String],default:NaN},seconds:{type:[Number,String],default:NaN},showSeconds:{type:Boolean,default:!0},steps:{type:Array,default:()=>[]}},data(){return{spinerSteps:[1,1,1].map((h,f)=>Math.abs(this.steps[f])||h),prefixCls:um,compiled:!1,focusedColumn:-1,focusedTime:[0,0,0],id:ie(6)}},computed:{classes(){return[`${um}`,{[`${um}-with-seconds`]:this.showSeconds}]},hoursList(){let h=[];const f=this.spinerSteps[0],v=this.focusedColumn===0&&this.focusedTime[0],E={text:0,selected:!1,disabled:!1,hide:!1};for(let T=0;T<24;T+=f){const b=V(E);b.text=T,b.focused=T===v,this.disabledHours.length&&this.disabledHours.indexOf(T)>-1&&(b.disabled=!0,this.hideDisabledOptions&&(b.hide=!0)),this.hours===T&&(b.selected=!0),h.push(b)}return h},minutesList(){let h=[];const f=this.spinerSteps[1],v=this.focusedColumn===1&&this.focusedTime[1],E={text:0,selected:!1,disabled:!1,hide:!1};for(let T=0;T<60;T+=f){const b=V(E);b.text=T,b.focused=T===v,this.disabledMinutes.length&&this.disabledMinutes.indexOf(T)>-1&&(b.disabled=!0,this.hideDisabledOptions&&(b.hide=!0)),this.minutes===T&&(b.selected=!0),h.push(b)}return h},secondsList(){let h=[];const f=this.spinerSteps[2],v=this.focusedColumn===2&&this.focusedTime[2],E={text:0,selected:!1,disabled:!1,hide:!1};for(let T=0;T<60;T+=f){const b=V(E);b.text=T,b.focused=T===v,this.disabledSeconds.length&&this.disabledSeconds.indexOf(T)>-1&&(b.disabled=!0,this.hideDisabledOptions&&(b.hide=!0)),this.seconds===T&&(b.selected=!0),h.push(b)}return h}},methods:{getCellCls(h){return[`${um}-cell`,{[`${um}-cell-selected`]:h.selected,[`${um}-cell-focused`]:h.focused,[`${um}-cell-disabled`]:h.disabled}]},chooseValue(h){const f=Yk.reduce((v,E,T)=>{const b=h[T];return this[E]===b?v:{...v,[E]:b}},{});Object.keys(f).length>0&&this.emitChange(f)},handleClick(h,f){if(f.disabled)return;const v={[h]:f.text};this.emitChange(v)},emitChange(h){this.$emit("on-change",h),this.$emit("on-pick-click")},scroll(h,f){const v=this.$refs[h].scrollTop,E=24*this.getScrollIndex(h,f);B(this.$refs[h],v,E,500)},getScrollIndex(h,f){const v=A(h),E=this[`disabled${v}`];if(E.length&&this.hideDisabledOptions){let T=0;E.forEach(b=>b<=f?T++:""),f-=T}return f},updateScroll(){n.nextTick(()=>{Yk.forEach(h=>{this.$refs[h].scrollTop=24*this[`${h}List`].findIndex(f=>f.text==this[h])})})},formatTime(h){return h<10?"0"+h:h},updateFocusedTime(h,f){this.focusedColumn=h,this.focusedTime=f.slice()},addTimeSpinner(){const h=this.PickerInstance;h.timeSpinnerList||(h.timeSpinnerList=[]),h.timeSpinnerList.push({id:this.id,timeSpinner:this})},removeTimeSpinner(){const h=this.PickerInstance;if(h.timeSpinnerList&&h.timeSpinnerList.length){const f=h.timeSpinnerList.findIndex(v=>v.id===this.id);h.timeSpinnerList.splice(f,1)}}},watch:{hours(h){!this.compiled||this.scroll("hours",this.hoursList.findIndex(f=>f.text==h))},minutes(h){!this.compiled||this.scroll("minutes",this.minutesList.findIndex(f=>f.text==h))},seconds(h){!this.compiled||this.scroll("seconds",this.secondsList.findIndex(f=>f.text==h))},focusedTime(h,f){Yk.forEach((v,E)=>{if(h[E]===f[E]||typeof h[E]>"u")return;const T=this[`${v}List`].findIndex(b=>b.text===h[E]);this.scroll(v,T)})}},mounted(){this.addTimeSpinner(),n.nextTick(()=>this.compiled=!0)},beforeUnmount(){this.removeTimeSpinner()}},fme=["onClick"],pme=["onClick"],mme=["onClick"];function gme(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-list"]),ref:"hours"},[n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls+"-ul"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.hoursList,N=>n.withDirectives((n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.getCellCls(N)),key:N.text,onClick:U=>b.handleClick("hours",N)},n.toDisplayString(b.formatTime(N.text)),11,fme)),[[n.vShow,!N.hide]])),128))],2)],2),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-list"]),ref:"minutes"},[n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls+"-ul"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.minutesList,N=>n.withDirectives((n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.getCellCls(N)),key:N.text,onClick:U=>b.handleClick("minutes",N)},n.toDisplayString(b.formatTime(N.text)),11,pme)),[[n.vShow,!N.hide]])),128))],2)],2),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-list"]),ref:"seconds"},[n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls+"-ul"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.secondsList,N=>n.withDirectives((n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.getCellCls(N)),key:N.text,onClick:U=>b.handleClick("seconds",N)},n.toDisplayString(b.formatTime(N.text)),11,mme)),[[n.vShow,!N.hide]])),128))],2)],2),[[n.vShow,v.showSeconds]])],2)}var aU=l(dme,[["render",gme]]);const lU="ivu-picker",vme={mixins:[kn],components:{iButton:Do},emits:["on-pick-clear","on-pick-success","on-pick-toggle-time"],inject:["PickerInstance"],props:{showTime:{type:Boolean,default:!1},isTime:{type:Boolean,default:!1},timeDisabled:{type:Boolean,default:!1}},data(){return{prefixCls:lU}},computed:{timeClasses(){return`${lU}-confirm-time`},labels(){const h=["time","clear","ok"],f=[this.isTime?"selectDate":"selectTime","clear","ok"];return h.reduce((v,E,T)=>(v[E]=this.t("i.datepicker."+f[T]),v),{})}},methods:{handleClear(){this.$emit("on-pick-clear")},handleSuccess(){this.$emit("on-pick-success")},handleToggleTime(){this.timeDisabled||(this.$emit("on-pick-toggle-time"),this.PickerInstance.handleOnFocusInput(),this.PickerInstance.handleOnUpdatePopper())},handleTab(h){const f=[...this.$el.children][h.shiftKey?"shift":"pop"]();s&&document.activeElement===f&&(h.preventDefault(),h.stopPropagation(),this.PickerInstance.handleOnFocusInput())}}};function yme(h,f,v,E,T,b){const N=n.resolveComponent("i-button");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls+"-confirm"]),onKeydownCapture:f[0]||(f[0]=n.withKeys((...U)=>b.handleTab&&b.handleTab(...U),["tab"]))},[v.showTime?(n.openBlock(),n.createBlock(N,{key:0,class:n.normalizeClass(b.timeClasses),size:"small",type:"text",disabled:v.timeDisabled,onClick:b.handleToggleTime},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(b.labels.time),1)]),_:1},8,["class","disabled","onClick"])):n.createCommentVNode("",!0),n.createVNode(N,{size:"small",class:"ivu-picker-confirm-btn-cancel",onClick:b.handleClear,onKeydown:n.withKeys(b.handleClear,["enter"])},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(b.labels.clear),1)]),_:1},8,["onClick","onKeydown"]),n.createVNode(N,{size:"small",type:"primary",onClick:b.handleSuccess,onKeydown:n.withKeys(b.handleSuccess,["enter"])},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(b.labels.ok),1)]),_:1},8,["onClick","onKeydown"])],34)}var XS=l(vme,[["render",yme]]);const _me="ivu-picker-panel",hU="ivu-date-picker";var WS={emits:["on-pick-clear","on-pick-success","on-pick-click","on-pick"],props:{confirm:{type:Boolean,default:!1}},methods:{iconBtnCls(h,f=""){return[`${_me}-icon-btn`,`${hU}-${h}-btn`,`${hU}-${h}-btn-arrow${f}`]},handleShortcutClick(h){h.value&&this.$emit("on-pick",h.value()),h.onClick&&h.onClick(this)},handlePickClear(){this.resetView(),this.$emit("on-pick-clear")},handlePickSuccess(){this.resetView(),this.$emit("on-pick-success")},handlePickClick(){this.$emit("on-pick-click")},resetView(){setTimeout(()=>this.currentView=this.selectionMode,500)},handleClear(){this.dates=this.dates.map(()=>null),this.rangeState={},this.$emit("on-pick",this.dates),this.handleConfirm()},handleConfirm(h,f){this.$emit("on-pick",this.dates,h,f||this.type)},onToggleVisibility(h){const{timeSpinner:f,timeSpinnerEnd:v}=this.$refs;h&&f&&f.updateScroll(),h&&v&&v.updateScroll()}}};const xme="ivu-picker-panel",bme="ivu-time-picker",wme=h=>h[0].toUpperCase()+h.slice(1),Ome=(h,f,v,E)=>{const T=new Date(h.getTime());return T.setHours(f),T.setMinutes(v),T.setSeconds(E),T},Sme=(h,f,v)=>v.indexOf(h)===f,cU=()=>!1,Cme={name:"TimePickerPanel",mixins:[WS,kn,zS],components:{TimeSpinner:aU,Confirm:XS},emits:["on-pick"],props:{disabledDate:{type:Function,default:cU},steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){return{prefixCls:xme,timePrefixCls:bme,date:this.modelValue[0]||xc(),showDate:!1}},computed:{showSeconds(){return!!(this.format||"").match(/ss/)},visibleDate(){const h=this.date,f=h.getMonth()+1,v=this.t("i.datepicker.year"),E=this.t(`i.datepicker.month${f}`);return`${h.getFullYear()}${v} ${E}`},timeSlots(){return this.modelValue[0]?["getHours","getMinutes","getSeconds"].map(h=>this.date[h]()):[]},disabledHMS(){const h=["disabledHours","disabledMinutes","disabledSeconds"];if(this.disabledDate===cU||!this.modelValue[0])return h.reduce((f,v)=>(f[v]=this[v],f),{});{const f=[24,60,60],v=["Hours","Minutes","Seconds"].map(E=>this[`disabled${E}`]).map((E,T)=>{const b=f[T],N=E;for(let U=0;U<b;U+=this.steps[T]||1){const Y=this.timeSlots.map((Z,fe)=>fe===T?U:Z),W=Ome(this.date,...Y);this.disabledDate(W,!0)&&N.push(U)}return N.filter(Sme)});return h.reduce((E,T,b)=>(E[T]=v[b],E),{})}}},watch:{modelValue(h){let f=h[0]||xc();f=new Date(f),this.date=f}},methods:{handleChange(h,f=!0){const v=new Date(this.date);Object.keys(h).forEach(E=>v[`set${wme(E)}`](h[E])),f&&this.$emit("on-pick",v,"time")}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function Tme(h,f,v,E,T,b){const N=n.resolveComponent("time-spinner"),U=n.resolveComponent("Confirm");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls+"-body-wrapper"]),onMousedown:f[0]||(f[0]=n.withModifiers(()=>{},["prevent"]))},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"])},[T.showDate?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.timePrefixCls+"-header"])},n.toDisplayString(b.visibleDate),3)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content"])},[n.createVNode(N,{ref:"timeSpinner","show-seconds":b.showSeconds,steps:v.steps,hours:b.timeSlots[0],minutes:b.timeSlots[1],seconds:b.timeSlots[2],"disabled-hours":b.disabledHMS.disabledHours,"disabled-minutes":b.disabledHMS.disabledMinutes,"disabled-seconds":b.disabledHMS.disabledSeconds,"hide-disabled-options":h.hideDisabledOptions,onOnChange:b.handleChange,onOnPickClick:h.handlePickClick},null,8,["show-seconds","steps","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),h.confirm?(n.openBlock(),n.createBlock(U,{key:1,onOnPickClear:h.handlePickClear,onOnPickSuccess:h.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):n.createCommentVNode("",!0)],2)],34)}var uU=l(Cme,[["render",Tme]]);const Ame={props:{datePanelLabel:Object,currentView:String,datePrefixCls:String}};function Eme(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("span",null,[v.datePanelLabel?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass([v.datePrefixCls+"-header-label"]),onClick:f[0]||(f[0]=(...N)=>v.datePanelLabel.labels[0].handler&&v.datePanelLabel.labels[0].handler(...N))},n.toDisplayString(v.datePanelLabel.labels[0].label),3)),[[n.vShow,v.datePanelLabel.labels[0].type==="year"||v.currentView==="date"]]):n.createCommentVNode("",!0),v.datePanelLabel&&v.currentView==="date"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(v.datePanelLabel.separator),1)],64)):n.createCommentVNode("",!0),v.datePanelLabel?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass([v.datePrefixCls+"-header-label"]),onClick:f[1]||(f[1]=(...N)=>v.datePanelLabel.labels[1].handler&&v.datePanelLabel.labels[1].handler(...N))},n.toDisplayString(v.datePanelLabel.labels[1].label),3)),[[n.vShow,v.datePanelLabel.labels[1].type==="year"||v.currentView==="date"]]):n.createCommentVNode("",!0)])}var dU=l(Ame,[["render",Eme]]),fU={props:{showTime:{type:Boolean,default:!1},format:{type:String,default:"yyyy-MM-dd"},selectionMode:{type:String,validator(h){return S(h,["year","month","date","time"])},default:"date"},shortcuts:{type:Array,default:()=>[]},disabledDate:{type:Function,default:()=>!1},modelValue:{type:Array,default:()=>[xc(),xc()]},timePickerOptions:{default:()=>({}),type:Object},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},pickerType:{type:String,require:!0},focusedDate:{type:Date,required:!0}},computed:{isTime(){return this.currentView==="time"}},methods:{handleToggleTime(){this.currentView=this.currentView==="time"?"date":"time"}}};const qk="ivu-picker-panel",Mme="ivu-date-picker",Pme={name:"DatePickerPanel",mixins:[WS,kn,fU],components:{Icon:O,DateTable:rU,YearTable:sU,MonthTable:oU,TimePicker:uU,Confirm:XS,datePanelLabel:dU},emits:["on-selection-mode-change","on-pick"],props:{multiple:{type:Boolean,default:!1}},data(){const{selectionMode:h,modelValue:f}=this,v=f.slice().sort();return{prefixCls:qk,datePrefixCls:Mme,currentView:h||"date",pickerTable:this.getTableType(h),dates:v,panelDate:this.startDate||v[0]||new Date}},computed:{classes(){return[`${qk}-body-wrapper`,{[`${qk}-with-sidebar`]:this.shortcuts.length}]},panelPickerHandlers(){return this.pickerTable===`${this.currentView}-table`?this.handlePick:this.handlePreSelection},datePanelLabel(){const h=this.t("i.locale"),f=this.t("i.datepicker.datePanelLabel"),v=this.panelDate,{labels:E,separator:T}=Wk(h,f,v),b=N=>()=>this.pickerTable=this.getTableType(N);return{separator:T,labels:E.map(N=>(N.handler=b(N.type),N))}},timeDisabled(){return!this.dates[0]}},watch:{modelValue(h){this.dates=h;const f=this.multiple?this.dates[this.dates.length-1]:this.startDate||this.dates[0];this.panelDate=f||new Date},currentView(h){this.$emit("on-selection-mode-change",h),this.currentView==="time"&&n.nextTick(()=>{this.$refs.timePicker.$refs.timeSpinner.updateScroll()})},selectionMode(h){this.currentView=h,this.pickerTable=this.getTableType(h)},focusedDate(h){const f=h.getFullYear()!==this.panelDate.getFullYear(),v=f||h.getMonth()!==this.panelDate.getMonth();(f||v)&&(this.multiple||(this.panelDate=h))}},methods:{reset(){this.currentView=this.selectionMode,this.pickerTable=this.getTableType(this.currentView)},changeYear(h){this.selectionMode==="year"||this.pickerTable==="year-table"?this.panelDate=new Date(this.panelDate.getFullYear()+h*10,0,1):this.panelDate=Y$(this.panelDate,h*12)},getTableType(h){return h.match(/^time/)?"time-picker":`${h}-table`},changeMonth(h){this.panelDate=Y$(this.panelDate,h)},handlePreSelection(h){this.panelDate=h,this.pickerTable==="year-table"?this.pickerTable="month-table":this.pickerTable=this.getTableType(this.currentView)},handlePick(h,f){const{selectionMode:v,panelDate:E}=this;v==="year"?h=new Date(h.getFullYear(),0,1):v==="month"?h=new Date(E.getFullYear(),h.getMonth(),1):h=new Date(h),this.dates=[h],this.$emit("on-pick",h,!1,f||v)}}},kme=["onClick"];function Ime(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("date-panel-label"),Y=n.resolveComponent("time-picker"),W=n.resolveComponent("Confirm");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),onMousedown:f[4]||(f[4]=n.withModifiers(()=>{},["prevent"]))},[h.shortcuts.length?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-sidebar"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(h.shortcuts,Z=>(n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls+"-shortcut"]),key:Z.text,onClick:fe=>h.handleShortcutClick(Z)},n.toDisplayString(Z.text),11,kme))),128))],2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"])},[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.datePrefixCls+"-header"])},[n.createElementVNode("span",{class:n.normalizeClass(h.iconBtnCls("prev","-double")),onClick:f[0]||(f[0]=Z=>b.changeYear(-1))},[n.createVNode(N,{type:"ios-arrow-back"})],2),T.pickerTable==="date-table"?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(h.iconBtnCls("prev")),onClick:f[1]||(f[1]=Z=>b.changeMonth(-1))},[n.createVNode(N,{type:"ios-arrow-back"})],2)),[[n.vShow,T.currentView==="date"]]):n.createCommentVNode("",!0),n.createVNode(U,{"date-panel-label":b.datePanelLabel,"current-view":T.pickerTable.split("-").shift(),"date-prefix-cls":T.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),n.createElementVNode("span",{class:n.normalizeClass(h.iconBtnCls("next","-double")),onClick:f[2]||(f[2]=Z=>b.changeYear(1))},[n.createVNode(N,{type:"ios-arrow-forward"})],2),T.pickerTable==="date-table"?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:1,class:n.normalizeClass(h.iconBtnCls("next")),onClick:f[3]||(f[3]=Z=>b.changeMonth(1))},[n.createVNode(N,{type:"ios-arrow-forward"})],2)),[[n.vShow,T.currentView==="date"]]):n.createCommentVNode("",!0)],2),[[n.vShow,T.currentView!=="time"]]),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content"])},[T.currentView!=="time"?(n.openBlock(),n.createBlock(n.resolveDynamicComponent(T.pickerTable),{key:0,ref:"pickerTable","table-date":T.panelDate,"show-week-numbers":h.showWeekNumbers,"model-value":T.dates,"selection-mode":h.selectionMode,"disabled-date":h.disabledDate,"focused-date":h.focusedDate,onOnPick:b.panelPickerHandlers,onOnPickClick:h.handlePickClick},null,40,["table-date","show-week-numbers","model-value","selection-mode","disabled-date","focused-date","onOnPick","onOnPickClick"])):n.createCommentVNode("",!0)],2),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content"])},[T.currentView==="time"?(n.openBlock(),n.createBlock(Y,n.mergeProps({key:0,ref:"timePicker","model-value":T.dates,format:h.format,"time-disabled":b.timeDisabled,"disabled-date":h.disabledDate,"focused-date":h.focusedDate},h.timePickerOptions,{onOnPick:b.handlePick,onOnPickClick:h.handlePickClick,onOnPickClear:h.handlePickClear,onOnPickSuccess:h.handlePickSuccess,onOnPickToggleTime:h.handleToggleTime}),null,16,["model-value","format","time-disabled","disabled-date","focused-date","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):n.createCommentVNode("",!0)],2),[[n.vShow,h.isTime]]),h.confirm?(n.openBlock(),n.createBlock(W,{key:0,"show-time":h.showTime,"is-time":h.isTime,onOnPickToggleTime:h.handleToggleTime,onOnPickClear:h.handlePickClear,onOnPickSuccess:h.handlePickSuccess},null,8,["show-time","is-time","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):n.createCommentVNode("",!0)],2)],34)}var Rme=l(Pme,[["render",Ime]]);const pU="ivu-picker-panel",Zk="ivu-time-picker",mU=h=>h[0].toUpperCase()+h.slice(1),Bme={name:"RangeTimePickerPanel",mixins:[WS,kn,zS],components:{TimeSpinner:aU,Confirm:XS},emits:["on-pick"],props:{steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){const[h,f]=this.modelValue.slice();return{prefixCls:pU,timePrefixCls:Zk,showDate:!1,dateStart:h||xc(),dateEnd:f||xc()}},computed:{classes(){return[`${pU}-body-wrapper`,`${Zk}-with-range`,{[`${Zk}-with-seconds`]:this.showSeconds}]},showSeconds(){return!!(this.format||"").match(/ss/)},leftDatePanelLabel(){return this.panelLabelConfig(this.date)},rightDatePanelLabel(){return this.panelLabelConfig(this.dateEnd)}},watch:{modelValue(h){const[f,v]=h.slice();this.dateStart=f||xc(),this.dateEnd=v||xc()}},methods:{panelLabelConfig(h){const f=this.t("i.locale"),v=this.t("i.datepicker.datePanelLabel"),{labels:E,separator:T}=Wk(f,v,h||xc());return[E[0].label,T,E[1].label].join("")},handleChange(h,f,v=!0){const E=new Date(this.dateStart);let T=new Date(this.dateEnd);Object.keys(h).forEach(b=>{E[`set${mU(b)}`](h[b])}),Object.keys(f).forEach(b=>{T[`set${mU(b)}`](f[b])}),T<E&&(T=E),v&&this.$emit("on-pick",[E,T],"time")},handleStartChange(h){this.handleChange(h,{})},handleEndChange(h){this.handleChange({},h)},updateScroll(){this.$refs.timeSpinner.updateScroll(),this.$refs.timeSpinnerEnd.updateScroll()}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function Dme(h,f,v,E,T,b){const N=n.resolveComponent("time-spinner"),U=n.resolveComponent("Confirm");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),onMousedown:f[0]||(f[0]=n.withModifiers(()=>{},["prevent"]))},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content",T.prefixCls+"-content-left"])},[n.createElementVNode("div",{class:n.normalizeClass([T.timePrefixCls+"-header"])},[T.showDate?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(b.leftDatePanelLabel),1)],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(h.t("i.datepicker.startTime")),1)],64))],2),n.createVNode(N,{ref:"timeSpinner",steps:v.steps,"show-seconds":b.showSeconds,hours:v.modelValue[0]&&T.dateStart.getHours(),minutes:v.modelValue[0]&&T.dateStart.getMinutes(),seconds:v.modelValue[0]&&T.dateStart.getSeconds(),"disabled-hours":h.disabledHours,"disabled-minutes":h.disabledMinutes,"disabled-seconds":h.disabledSeconds,"hide-disabled-options":h.hideDisabledOptions,onOnChange:b.handleStartChange,onOnPickClick:h.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content",T.prefixCls+"-content-right"])},[n.createElementVNode("div",{class:n.normalizeClass([T.timePrefixCls+"-header"])},[T.showDate?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(b.rightDatePanelLabel),1)],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(h.t("i.datepicker.endTime")),1)],64))],2),n.createVNode(N,{ref:"timeSpinnerEnd",steps:v.steps,"show-seconds":b.showSeconds,hours:v.modelValue[1]&&T.dateEnd.getHours(),minutes:v.modelValue[1]&&T.dateEnd.getMinutes(),seconds:v.modelValue[1]&&T.dateEnd.getSeconds(),"disabled-hours":h.disabledHours,"disabled-minutes":h.disabledMinutes,"disabled-seconds":h.disabledSeconds,"hide-disabled-options":h.hideDisabledOptions,onOnChange:b.handleEndChange,onOnPickClick:h.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),h.confirm?(n.openBlock(),n.createBlock(U,{key:0,onOnPickClear:h.handlePickClear,onOnPickSuccess:h.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):n.createCommentVNode("",!0)],2)],34)}var gU=l(Bme,[["render",Dme]]);const L0="ivu-picker-panel",Kk="ivu-date-picker",vU=(h,f)=>!h||!f?0:h.getTime()-f.getTime(),Lme={name:"RangeDatePickerPanel",mixins:[WS,kn,fU],components:{Icon:O,DateTable:rU,YearTable:sU,MonthTable:oU,TimePicker:gU,Confirm:XS,datePanelLabel:dU},props:{splitPanels:{type:Boolean,default:!1}},data(){const[h,f]=this.modelValue.map(E=>E||xc()),v=this.startDate?this.startDate:h;return{prefixCls:L0,datePrefixCls:Kk,dates:this.modelValue,rangeState:{from:this.modelValue[0],to:this.modelValue[1],selecting:h&&!f},currentView:this.selectionMode||"range",leftPickerTable:`${this.selectionMode}-table`,rightPickerTable:`${this.selectionMode}-table`,leftPanelDate:v,rightPanelDate:new Date(v.getFullYear(),v.getMonth()+1,1)}},computed:{classes(){return[`${L0}-body-wrapper`,`${Kk}-with-range`,{[`${L0}-with-sidebar`]:this.shortcuts.length,[`${Kk}-with-week-numbers`]:this.showWeekNumbers}]},panelBodyClasses(){return[L0+"-body",{[L0+"-body-time"]:this.showTime,[L0+"-body-date"]:!this.showTime}]},leftDatePanelLabel(){return this.panelLabelConfig("left")},rightDatePanelLabel(){return this.panelLabelConfig("right")},leftDatePanelView(){return this.leftPickerTable.split("-").shift()},rightDatePanelView(){return this.rightPickerTable.split("-").shift()},timeDisabled(){return!(this.dates[0]&&this.dates[1])},preSelecting(){const h=`${this.currentView}-table`;return{left:this.leftPickerTable!==h,right:this.rightPickerTable!==h}},panelPickerHandlers(){return{left:this.preSelecting.left?this.handlePreSelection.bind(this,"left"):this.handleRangePick,right:this.preSelecting.right?this.handlePreSelection.bind(this,"right"):this.handleRangePick}}},watch:{modelValue(h){const f=h[0]?Xk(h[0]):null,v=h[1]?Xk(h[1]):null;this.dates=[f,v].sort(vU),this.rangeState={from:this.dates[0],to:this.dates[1],selecting:!1},this.setPanelDates(this.startDate||this.dates[0]||new Date)},currentView(h){const f=this.leftPanelDate.getMonth(),v=this.rightPanelDate.getMonth(),E=this.leftPanelDate.getFullYear()===this.rightPanelDate.getFullYear();h==="date"&&E&&f===v&&this.changePanelDate("right","Month",1),h==="month"&&E&&this.changePanelDate("right","FullYear",1),h==="year"&&E&&this.changePanelDate("right","FullYear",10)},selectionMode(h){this.currentView=h||"range"},focusedDate(h){this.setPanelDates(h||new Date)}},methods:{reset(){this.currentView=this.selectionMode,this.leftPickerTable=`${this.currentView}-table`,this.rightPickerTable=`${this.currentView}-table`},setPanelDates(h){this.leftPanelDate=h;const f=new Date(h.getFullYear(),h.getMonth()+1,1),v=this.dates[1]?this.dates[1].getTime():this.dates[1];this.rightPanelDate=this.splitPanels?new Date(Math.max(v,f.getTime())):f},panelLabelConfig(h){const f=this.t("i.locale"),v=this.t("i.datepicker.datePanelLabel"),E=U=>{const Y=U=="month"?this.showMonthPicker:this.showYearPicker;return()=>Y(h)},T=this[`${h}PanelDate`],{labels:b,separator:N}=Wk(f,v,T);return{separator:N,labels:b.map(U=>(U.handler=E(U.type),U))}},prevYear(h){const f=this.currentView==="year"?-10:-1;this.changePanelDate(h,"FullYear",f)},nextYear(h){const f=this.currentView==="year"?10:1;this.changePanelDate(h,"FullYear",f)},prevMonth(h){this.changePanelDate(h,"Month",-1)},nextMonth(h){this.changePanelDate(h,"Month",1)},changePanelDate(h,f,v,E=!0){const T=new Date(this[`${h}PanelDate`]);if(f==="FullYear"?T[`set${f}`](T[`get${f}`]()+v):T[`set${f}`](T[`get${f}`]()+v,1),this[`${h}PanelDate`]=T,!!E)if(this.splitPanels){const b=h==="left"?"right":"left";h==="left"&&this.leftPanelDate>=this.rightPanelDate&&this.changePanelDate(b,f,1),h==="right"&&this.rightPanelDate<=this.leftPanelDate&&this.changePanelDate(b,f,-1)}else{const b=h==="left"?"right":"left",N=this[`${b}PanelDate`],U=new Date(N);if(f==="Month"){const Y=new Date(U.getFullYear(),U.getMonth()+v+1,0).getDate();U.setDate(Math.min(Y,U.getDate()))}U[`set${f}`](U[`get${f}`]()+v),this[`${b}PanelDate`]=U}},showYearPicker(h){this[`${h}PickerTable`]="year-table"},showMonthPicker(h){this[`${h}PickerTable`]="month-table"},handlePreSelection(h,f){if(this[`${h}PanelDate`]=f,this[`${h}PickerTable`]==="year-table"?this[`${h}PickerTable`]="month-table":this[`${h}PickerTable`]=`${this.currentView}-table`,!this.splitPanels){const v=h==="left"?"right":"left";this[`${v}PanelDate`]=f;const E=v==="left"?-1:1;this.changePanelDate(v,"Month",E,!1)}},handleRangePick(h,f){if(this.rangeState.selecting||this.currentView==="time"){if(this.currentView==="time")this.dates=h;else{const[v,E]=[this.rangeState.from,h].sort(vU);this.dates=[v,E],this.rangeState={from:v,to:E,selecting:!1}}this.handleConfirm(!1,f||"date")}else this.rangeState={from:h,to:null,selecting:!0}},handleChangeRange(h){this.rangeState.to=h}}},Nme=["onClick"];function Vme(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("date-panel-label"),Y=n.resolveComponent("time-picker"),W=n.resolveComponent("Confirm");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),onMousedown:f[8]||(f[8]=n.withModifiers(()=>{},["prevent"]))},[h.shortcuts.length?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-sidebar"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(h.shortcuts,Z=>(n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls+"-shortcut"]),key:Z.text,onClick:fe=>h.handleShortcutClick(Z)},n.toDisplayString(Z.text),11,Nme))),128))],2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass(b.panelBodyClasses)},[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content",T.prefixCls+"-content-left"])},[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.datePrefixCls+"-header"])},[n.createElementVNode("span",{class:n.normalizeClass(h.iconBtnCls("prev","-double")),onClick:f[0]||(f[0]=Z=>b.prevYear("left"))},[n.createVNode(N,{type:"ios-arrow-back"})],2),T.leftPickerTable==="date-table"?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(h.iconBtnCls("prev")),onClick:f[1]||(f[1]=Z=>b.prevMonth("left"))},[n.createVNode(N,{type:"ios-arrow-back"})],2)),[[n.vShow,T.currentView==="date"]]):n.createCommentVNode("",!0),n.createVNode(U,{"date-panel-label":b.leftDatePanelLabel,"current-view":b.leftDatePanelView,"date-prefix-cls":T.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),v.splitPanels||T.leftPickerTable!=="date-table"?(n.openBlock(),n.createElementBlock("span",{key:1,class:n.normalizeClass(h.iconBtnCls("next","-double")),onClick:f[2]||(f[2]=Z=>b.nextYear("left"))},[n.createVNode(N,{type:"ios-arrow-forward"})],2)):n.createCommentVNode("",!0),v.splitPanels&&T.leftPickerTable==="date-table"?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass(h.iconBtnCls("next")),onClick:f[3]||(f[3]=Z=>b.nextMonth("left"))},[n.createVNode(N,{type:"ios-arrow-forward"})],2)),[[n.vShow,T.currentView==="date"]]):n.createCommentVNode("",!0)],2),[[n.vShow,T.currentView!=="time"]]),T.currentView!=="time"?(n.openBlock(),n.createBlock(n.resolveDynamicComponent(T.leftPickerTable),{key:0,ref:"leftYearTable","table-date":T.leftPanelDate,"selection-mode":"range","disabled-date":h.disabledDate,"range-state":T.rangeState,"show-week-numbers":h.showWeekNumbers,"model-value":b.preSelecting.left?[T.dates[0]]:T.dates,"focused-date":h.focusedDate,onOnChangeRange:b.handleChangeRange,onOnPick:b.panelPickerHandlers.left,onOnPickClick:h.handlePickClick},null,40,["table-date","disabled-date","range-state","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):n.createCommentVNode("",!0)],2),[[n.vShow,!h.isTime]]),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content",T.prefixCls+"-content-right"])},[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.datePrefixCls+"-header"])},[v.splitPanels||T.rightPickerTable!=="date-table"?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(h.iconBtnCls("prev","-double")),onClick:f[4]||(f[4]=Z=>b.prevYear("right"))},[n.createVNode(N,{type:"ios-arrow-back"})],2)):n.createCommentVNode("",!0),v.splitPanels&&T.rightPickerTable==="date-table"?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:1,class:n.normalizeClass(h.iconBtnCls("prev")),onClick:f[5]||(f[5]=Z=>b.prevMonth("right"))},[n.createVNode(N,{type:"ios-arrow-back"})],2)),[[n.vShow,T.currentView==="date"]]):n.createCommentVNode("",!0),n.createVNode(U,{"date-panel-label":b.rightDatePanelLabel,"current-view":b.rightDatePanelView,"date-prefix-cls":T.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),n.createElementVNode("span",{class:n.normalizeClass(h.iconBtnCls("next","-double")),onClick:f[6]||(f[6]=Z=>b.nextYear("right"))},[n.createVNode(N,{type:"ios-arrow-forward"})],2),T.rightPickerTable==="date-table"?n.withDirectives((n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass(h.iconBtnCls("next")),onClick:f[7]||(f[7]=Z=>b.nextMonth("right"))},[n.createVNode(N,{type:"ios-arrow-forward"})],2)),[[n.vShow,T.currentView==="date"]]):n.createCommentVNode("",!0)],2),[[n.vShow,T.currentView!=="time"]]),T.currentView!=="time"?(n.openBlock(),n.createBlock(n.resolveDynamicComponent(T.rightPickerTable),{key:0,ref:"rightYearTable","table-date":T.rightPanelDate,"selection-mode":"range","range-state":T.rangeState,"disabled-date":h.disabledDate,"show-week-numbers":h.showWeekNumbers,"model-value":b.preSelecting.right?[T.dates[T.dates.length-1]]:T.dates,"focused-date":h.focusedDate,onOnChangeRange:b.handleChangeRange,onOnPick:b.panelPickerHandlers.right,onOnPickClick:h.handlePickClick},null,40,["table-date","range-state","disabled-date","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):n.createCommentVNode("",!0)],2),[[n.vShow,!h.isTime]]),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content"])},[T.currentView==="time"?(n.openBlock(),n.createBlock(Y,n.mergeProps({key:0,ref:"timePicker","model-value":T.dates,format:h.format,"time-disabled":b.timeDisabled},h.timePickerOptions,{onOnPick:b.handleRangePick,onOnPickClick:h.handlePickClick,onOnPickClear:h.handlePickClear,onOnPickSuccess:h.handlePickSuccess,onOnPickToggleTime:h.handleToggleTime}),null,16,["model-value","format","time-disabled","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):n.createCommentVNode("",!0)],2),[[n.vShow,h.isTime]]),h.confirm?(n.openBlock(),n.createBlock(W,{key:0,"show-time":h.showTime,"is-time":h.isTime,"time-disabled":b.timeDisabled,onOnPickToggleTime:h.handleToggleTime,onOnPickClear:h.handlePickClear,onOnPickSuccess:h.handlePickSuccess},null,8,["show-time","is-time","time-disabled","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):n.createCommentVNode("",!0)],2)],34)}var Fme=l(Lme,[["render",Vme]]),yU={name:"CalendarPicker",mixins:[Z$],props:{type:{validator(h){return S(h,["year","month","date","daterange","datetime","datetimerange"])},default:"date"}},components:{DatePickerPanel:Rme,RangeDatePickerPanel:Fme},computed:{panel(){return this.type==="daterange"||this.type==="datetimerange"?"RangeDatePickerPanel":"DatePickerPanel"},ownPickerProps(){return this.options}}},$me={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};const _U={name:"Description",inject:["DescriptionListInstance"],props:{term:{type:String}},computed:{styles(){let h={};return this.DescriptionListInstance.gutter!==0&&(h={paddingLeft:this.DescriptionListInstance.gutter/2+"px",paddingRight:this.DescriptionListInstance.gutter/2+"px"}),h}},render(){let h;(this.term||this.$slots.term)&&(this.$slots.term?h=n.h("div",{class:"ivu-description-term"},this.$slots.term()):h=n.h("div",{class:"ivu-description-term"},this.term));const f=n.h("div",{class:"ivu-description-detail"},this.$slots.default()),v=h?[h,f]:[f];return n.h(yc,{...$me[this.DescriptionListInstance.col],style:this.styles},()=>v)}},Ume={name:"DescriptionList",components:{Row:qd},provide(){return{DescriptionListInstance:this}},props:{layout:{validator(h){return S(h,["horizontal","vertical"])},default:"horizontal"},title:{type:String},gutter:{type:Number,default:32},col:{validator(h){return S(h,[1,2,3,4])},default:3}}},zme={key:0,class:"ivu-description-list-title"};function Xme(h,f,v,E,T,b){const N=n.resolveComponent("Row");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-description-list",{"ivu-description-list-vertical":v.layout==="vertical"}])},[v.title||h.$slots.title?(n.openBlock(),n.createElementBlock("div",zme,[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])])):n.createCommentVNode("",!0),n.createVNode(N,{gutter:v.gutter},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"default")]),_:3},8,["gutter"])],2)}var xU=l(Ume,[["render",Xme]]);const Jd="ivu-divider",Wme={name:"Divider",props:{type:{type:String,default:"horizontal",validator(h){return S(h,["horizontal","vertical"])}},orientation:{type:String,default:"center",validator(h){return S(h,["left","right","center"])}},dashed:{type:Boolean,default:!1},size:{validator(h){return S(h,["small","default"])},default:"default"},plain:{type:Boolean,default:!1}},computed:{hasSlot(){return!!this.$slots.default},classes(){return[`${Jd}`,`${Jd}-${this.type}`,`${Jd}-${this.size}`,{[`${Jd}-with-text`]:this.hasSlot&&this.orientation==="center",[`${Jd}-with-text-${this.orientation}`]:this.hasSlot,[`${Jd}-dashed`]:!!this.dashed,[`${Jd}-plain`]:this.plain}]},slotClasses(){return[`${Jd}-inner-text`]}}};function Gme(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[b.hasSlot?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(b.slotClasses)},[n.renderSlot(h.$slots,"default")],2)):n.createCommentVNode("",!0)],2)}var GS=l(Wme,[["render",Gme]]),Jk={props:{lockScroll:{type:Boolean,default:!0}},methods:{checkScrollBar(){if(!s)return;let h=window.innerWidth;if(!h){const f=document.documentElement.getBoundingClientRect();h=f.right-Math.abs(f.left)}this.bodyIsOverflowing=document.body.clientWidth<h,this.bodyIsOverflowing&&(this.scrollBarWidth=C())},checkMaskInVisible(){let h=s?document.getElementsByClassName("ivu-modal-mask")||[]:[];return Array.from(h).every(f=>f.style.display==="none"||f.classList.contains("fade-leave-to"))},setScrollBar(){s&&this.bodyIsOverflowing&&this.scrollBarWidth!==void 0&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){s&&(document.body.style.paddingRight="")},addScrollEffect(){!this.lockScroll||(this.checkScrollBar(),this.setScrollBar(),s&&(document.body.style.overflow="hidden"))},removeScrollEffect(){!this.lockScroll||s&&this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}};const No="ivu-drawer",Hme={name:"Drawer",mixins:[Jk],components:{Icon:O},emits:["on-close","on-resize-width","on-visible-change","update:modelValue","on-drag"],provide(){return{DrawerInstance:this}},props:{modelValue:{type:Boolean,default:!1},title:{type:String},width:{type:[Number,String],default:256},height:{type:[Number,String],default:256},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskStyle:{type:Object},styles:{type:Object},scrollable:{type:Boolean,default:!1},placement:{validator(h){return S(h,["left","right","top","bottom"])},default:"right"},zIndex:{type:Number,default:1e3},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!0:h.$VIEWUI.transfer}},className:{type:String},inner:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},beforeClose:Function},data(){return{prefixCls:No,visible:this.modelValue,wrapShow:!1,showHead:!0,canMove:!1,dragWidth:this.width,dragHeight:this.height,wrapperWidth:this.width,wrapperHeight:this.height,wrapperLeft:0,minWidth:256,minHeight:256,id:ie(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${No}-wrap`,{[`${No}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${No}-no-mask`]:!this.mask,[`${No}-wrap-inner`]:this.inner,[`${No}-wrap-dragging`]:this.canMove}]},wrapStyles(){return{zIndex:this.zIndex}},mainStyles(){let h={};if(this.placement==="left"||this.placement==="right"){const f=parseInt(this.dragWidth),v={width:f<=100?`${f}%`:`${f}px`};Object.assign(h,v)}else{const f=parseInt(this.dragHeight),v={height:f<=100?`${f}%`:`${f}px`};Object.assign(h,v)}return h},contentClasses(){return[`${No}-content`,{[`${No}-content-no-mask`]:!this.mask}]},classes(){return[`${No}`,`${No}-${this.placement}`,{[`${No}-no-header`]:!this.showHead,[`${No}-inner`]:this.inner}]},maskClasses(){return[`${No}-mask`,{[`${No}-mask-inner`]:this.inner}]},transitionName(){return this.placement==="left"||this.placement==="right"?`move-${this.placement}`:this.placement==="top"?"move-up":"move-down"}},methods:{close(){if(!this.beforeClose)return this.handleClose();const h=this.beforeClose();h&&h.then?h.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-close")},handleMask(){this.maskClosable&&this.mask&&this.close()},handleWrapClick(h){const f=h.target.getAttribute("class");f&&f.indexOf(`${No}-wrap`)>-1&&this.handleMask()},handleMousemove(h){if(!this.canMove||!this.draggable)return;this.handleSetWrapperWidth();const f=h.pageX-this.wrapperLeft;let v=this.placement==="right"?this.wrapperWidth-f:f;v=Math.max(v,parseFloat(this.minWidth)),h.atMin=v===parseFloat(this.minWidth),v<=100&&(v=v/this.wrapperWidth*100),this.dragWidth=v,this.$emit("on-resize-width",parseInt(this.dragWidth)),this.$emit("on-drag","dragging",parseInt(this.dragWidth))},handleSetWrapperWidth(){const{width:h,left:f}=this.$refs.drawer.getBoundingClientRect();this.wrapperWidth=h,this.wrapperLeft=f},handleMouseup(){!this.draggable||(this.canMove=!1,this.$emit("on-drag","end"))},handleTriggerMousedown(){this.canMove=!0,window.getSelection().removeAllRanges(),this.$emit("on-drag","start")},addDrawer(){const h=this.$root;h.drawerList||(h.drawerList=[]),h.drawerList.push({id:this.id,drawer:this})},removeDrawer(){const h=this.$root;if(!h.drawerList)return;const f=h.drawerList.findIndex(v=>v.id===this.id);h.drawerList.splice(f,1)}},mounted(){this.visible&&(this.wrapShow=!0);let h=!0;this.$slots.header===void 0&&!this.title&&(h=!1),this.showHead=h,this.addDrawer(),o(document,"mousemove",this.handleMousemove),o(document,"mouseup",this.handleMouseup),this.handleSetWrapperWidth()},beforeUnmount(){this.removeDrawer(),a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup),this.removeScrollEffect()},watch:{modelValue(h){this.visible=h},visible(h){h===!1?this.timer=setTimeout(()=>{this.wrapShow=!1,this.$root.drawerList.map(f=>f.drawer).filter(f=>f.id!==this.id).some(f=>f.visible&&!f.scrollable)||this.removeScrollEffect()},300):(this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(f=>{f.table.handleOnVisibleChange(h)}),this.sliderList.forEach(f=>{f.slider.handleOnVisibleChange(h)}),this.$emit("on-visible-change",h)},scrollable(h){h?this.removeScrollEffect():this.addScrollEffect()},title(h){this.$slots.header===void 0&&(this.showHead=!!h)},width(h){this.dragWidth=h},height(h){this.dragHeight=h}}},Qme={ref:"drawer"},jme=n.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger"},[n.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger-point"},[n.createElementVNode("i"),n.createElementVNode("i"),n.createElementVNode("i"),n.createElementVNode("i"),n.createElementVNode("i")])],-1);function Yme(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createBlock(n.Teleport,{to:"body",disabled:!v.transfer},[n.createElementVNode("div",Qme,[n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[v.mask?n.withDirectives((n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.maskClasses),style:n.normalizeStyle(v.maskStyle),onClick:f[0]||(f[0]=(...U)=>b.handleMask&&b.handleMask(...U))},null,6)),[[n.vShow,T.visible]]):n.createCommentVNode("",!0)]),_:1}),n.createElementVNode("div",{class:n.normalizeClass(b.wrapClasses),style:n.normalizeStyle(b.wrapStyles),onClick:f[3]||(f[3]=(...U)=>b.handleWrapClick&&b.handleWrapClick(...U))},[n.createVNode(n.Transition,{name:b.transitionName},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.mainStyles)},[n.createElementVNode("div",{class:n.normalizeClass(b.contentClasses),ref:"content"},[v.closable?(n.openBlock(),n.createElementBlock("a",{key:0,class:"ivu-drawer-close",onClick:f[1]||(f[1]=(...U)=>b.close&&b.close(...U))},[n.renderSlot(h.$slots,"close",{},()=>[n.createVNode(N,{type:"ios-close"})])])):n.createCommentVNode("",!0),T.showHead?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass([T.prefixCls+"-header"])},[n.renderSlot(h.$slots,"header",{},()=>[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-header-inner"])},n.toDisplayString(v.title),3)])],2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"]),style:n.normalizeStyle(v.styles)},[n.renderSlot(h.$slots,"default")],6)],2),v.draggable&&(v.placement==="left"||v.placement==="right")?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(["ivu-drawer-drag","ivu-drawer-drag-"+v.placement]),onMousedown:f[2]||(f[2]=(...U)=>b.handleTriggerMousedown&&b.handleTriggerMousedown(...U))},[n.renderSlot(h.$slots,"trigger",{},()=>[jme])],34)):n.createCommentVNode("",!0)],6),[[n.vShow,T.visible]])]),_:3},8,["name"])],6)],512)],8,["disabled"])}var bU=l(Hme,[["render",Yme]]);const HS="ivu-dropdown-item",qme={name:"DropdownItem",props:{name:{type:[String,Number]},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},divided:{type:Boolean,default:!1}},computed:{classes(){return[`${HS}`,{[`${HS}-disabled`]:this.disabled,[`${HS}-selected`]:this.selected,[`${HS}-divided`]:this.divided}]}},methods:{handleClick(){if(this.disabled)return;const h=L(this,"Dropdown");this.$parent&&this.$parent.$options.name==="Dropdown"?this.$parent.handleHaschildClick():h&&h.$options.name==="Dropdown"&&h.handleHoverClick(),h.handleItemClick(this.name)}}};function Zme(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.classes),onClick:f[0]||(f[0]=(...N)=>b.handleClick&&b.handleClick(...N))},[n.renderSlot(h.$slots,"default")],2)}var wU=l(qme,[["render",Zme]]);const Kme=(h="")=>h.split("").reduce((f,v)=>{const E=v.charCodeAt(0);return E>=0&&E<=128?f+1:f+2},0),Jme=(h="",f)=>{let v=0;return h.split("").reduce((E,T)=>{const b=T.charCodeAt(0);return b>=0&&b<=128?v+=1:v+=2,v<=f?E+T:E},"")},ege={name:"Ellipsis",components:{Tooltip:Su},emits:["on-show","on-hide"],props:{text:{type:String},height:{type:Number},lines:{type:Number},length:{type:Number},fullWidthRecognition:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},theme:{validator(h){return S(h,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"}},data(){return{oversize:!1,computedReady:!1,computedText:""}},watch:{disabled(){this.init()},text(){this.init()},height(){this.init()}},mounted(){this.init()},methods:{init(){this.disabled||(this.computeText(),this.limitShow())},computeText(){this.oversize=!1,this.computedReady=!1,n.nextTick(()=>{let h=this.$refs.text,f=this.$el,v=this.$refs.more,E=1e3,T=this.text,b=this.height;if(!b&&this.lines&&(b=parseInt(I(f,"lineHeight"),10)*this.lines),h){if(this.length)(this.fullWidthRecognition?Kme(T):T.length)>this.length&&(this.oversize=!0,v.style.display="inline-block",T=this.fullWidthRecognition?Jme(T,this.length):T.slice(0,this.length));else if(f.offsetHeight>b)for(this.oversize=!0,v.style.display="inline-block";f.offsetHeight>b&&E>0;)f.offsetHeight>b*3?h.innerText=T=T.substring(0,Math.floor(T.length/2)):h.innerText=T=T.substring(0,T.length-1),E--}this.computedText=T})},limitShow(){this.computedReady=!0,n.nextTick(()=>{let h=this.$refs.text,f=this.$el;h&&(h.innerText=this.computedText,f.offsetHeight>this.height?this.$emit("on-hide"):this.$emit("on-show"))})}}},tge={class:"ivu-ellipsis"},ige={class:"ivu-ellipsis-more",ref:"more"},nge={class:"ivu-ellipsis-more",ref:"more"},rge={key:1,class:"ivu-ellipsis-hidden"},sge={class:"ivu-ellipsis-more",ref:"more"};function oge(h,f,v,E,T,b){const N=n.resolveComponent("Tooltip");return n.openBlock(),n.createElementBlock("div",tge,[n.renderSlot(h.$slots,"prefix",{class:"ivu-ellipsis-prefix"}),T.computedReady?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[v.tooltip?(n.openBlock(),n.createBlock(N,{key:0,content:v.text,theme:v.theme,"max-width":v.maxWidth,placement:v.placement,transfer:v.transfer},{default:n.withCtx(()=>[n.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},n.toDisplayString(v.text),513),n.withDirectives(n.createElementVNode("span",ige,[n.renderSlot(h.$slots,"more",{},()=>[n.createTextVNode("...")])],512),[[n.vShow,T.oversize]]),n.renderSlot(h.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]),_:3},8,["content","theme","max-width","placement","transfer"])):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},n.toDisplayString(v.text),513),n.withDirectives(n.createElementVNode("span",nge,[n.renderSlot(h.$slots,"more",{},()=>[n.createTextVNode("...")])],512),[[n.vShow,T.oversize]]),n.renderSlot(h.$slots,"suffix",{class:"ivu-ellipsis-suffix"})],64))],64)):(n.openBlock(),n.createElementBlock("div",rge,[n.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},n.toDisplayString(v.text),513),n.withDirectives(n.createElementVNode("span",sge,[n.renderSlot(h.$slots,"more",{},()=>[n.createTextVNode("...")])],512),[[n.vShow,T.oversize]]),n.renderSlot(h.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]))])}var OU=l(ege,[["render",oge]]);const SU={name:"Email",mixins:[Z_],data(){return{className:"ivu-login-mail",prefix:"ios-mail-outline",placeholder:"请输入邮箱",type:"email"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:Bk.Email,trigger:"change"},{type:"email",message:"输入的邮箱格式不正确！",trigger:"change"}]}}}};var QS={403:{img:"https://file.iviewui.com/iview-pro/icon-403.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-403-color.svg",title:"403",desc:"抱歉，你无权访问该页面"},404:{img:"https://file.iviewui.com/iview-pro/icon-404.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-404-color.svg",title:"404",desc:"抱歉，你访问的页面不存在"},500:{img:"https://file.iviewui.com/iview-pro/icon-500.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-500-color.svg",title:"500",desc:"抱歉，服务器出错了"}};const age={name:"Exception",components:{Button:Do},props:{type:{validator(h){return S(h,["403","404","500",403,404,500])},default:"404"},title:{type:String},desc:{type:String},img:{type:String},imgColor:{type:Boolean,default:!1},backText:{type:String,default:"返回首页"},redirect:{type:String,default:"/"}},computed:{imgPath(){return this.img?this.img:this.imgColor?QS[this.type].imgColor:QS[this.type].img},titleText(){return this.title?this.title:QS[this.type].title},descText(){return this.desc?this.desc:QS[this.type].desc}}},lge={class:"ivu-exception"},hge={class:"ivu-exception-img"},cge={class:"ivu-exception-content"},uge={class:"ivu-exception-content-desc"},dge={class:"ivu-exception-content-actions"};function fge(h,f,v,E,T,b){const N=n.resolveComponent("Button");return n.openBlock(),n.createElementBlock("div",lge,[n.createElementVNode("div",hge,[n.createElementVNode("div",{class:"ivu-exception-img-element",style:n.normalizeStyle({"background-image":"url("+b.imgPath+")"})},null,4)]),n.createElementVNode("div",cge,[n.createElementVNode("h1",null,[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(b.titleText),1)])]),n.createElementVNode("div",uge,[n.renderSlot(h.$slots,"desc",{},()=>[n.createTextVNode(n.toDisplayString(b.descText),1)])]),n.createElementVNode("div",dge,[n.renderSlot(h.$slots,"actions",{},()=>[n.createVNode(N,{to:v.redirect,type:"primary",size:"large"},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(v.backText),1)]),_:1},8,["to"])])])])])}var CU=l(age,[["render",fge]]);const pge="ivu-layout",mge={name:"Footer",computed:{wrapClasses(){return`${pge}-footer`}}};function gge(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[n.renderSlot(h.$slots,"default")],2)}var e3=l(mge,[["render",gge]]);const vge={name:"FooterToolbar",props:{extra:{type:String}}},yge={class:"ivu-footer-toolbar"},_ge={key:0,class:"ivu-footer-toolbar-left"},xge={class:"ivu-footer-toolbar-right"};function bge(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",yge,[v.extra||h.$slots.extra?(n.openBlock(),n.createElementBlock("div",_ge,[n.renderSlot(h.$slots,"extra",{},()=>[n.createTextVNode(n.toDisplayString(v.extra),1)])])):n.createCommentVNode("",!0),n.createElementVNode("div",xge,[n.renderSlot(h.$slots,"default")])])}var TU=l(vge,[["render",bge]]);const jS="ivu-form",wge={name:"iForm",emits:["on-validate"],provide(){return{FormInstance:this}},props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{validator(h){return S(h,["left","right","top"])},default:"right"},inline:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},autocomplete:{validator(h){return S(h,["on","off"])},default:"off"},hideRequiredMark:{type:Boolean,default:!1},labelColon:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1}},data(){return{fields:[]}},computed:{classes(){return[`${jS}`,`${jS}-label-${this.labelPosition}`,{[`${jS}-inline`]:this.inline,[`${jS}-hide-required-mark`]:this.hideRequiredMark}]},colon(){let h="";return this.labelColon&&(h=typeof this.labelColon=="boolean"?":":this.labelColon),h}},methods:{resetFields(){this.fields.forEach(h=>{h.resetField()})},validate(h){return new Promise(f=>{let v=!0,E=0;this.fields.length===0&&(f(v),typeof h=="function"&&h(v)),this.fields.forEach(T=>{T.validate("",b=>{b&&(v=!1),++E===this.fields.length&&(f(v),typeof h=="function"&&h(v))})})})},validateField(h,f){const v=this.fields.filter(E=>E.prop===h)[0];if(!v)throw new Error("[View UI warn]: must call validateField with valid prop string!");v.validate("",f)},addField(h){h&&this.fields.push(h)},removeField(h){h.prop&&this.fields.splice(this.fields.indexOf(h),1)}},watch:{rules(){this.validate()}}},Oge=["autocomplete"];function Sge(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("form",{class:n.normalizeClass(b.classes),autocomplete:v.autocomplete},[n.renderSlot(h.$slots,"default")],10,Oge)}var YS=l(wge,[["render",Sge]]);const Cge={name:"GlobalFooter",components:{Icon:O},props:{links:{type:Array,default(){return[]}},copyright:{type:String}}},Tge={class:"ivu-global-footer"},Age={key:0,class:"ivu-global-footer-links"},Ege=["href","target","title"],Mge={key:1,class:"ivu-global-footer-copyright"};function Pge(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("footer",Tge,[v.links.length||h.$slots.links?(n.openBlock(),n.createElementBlock("div",Age,[n.renderSlot(h.$slots,"links",{},()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.links,U=>(n.openBlock(),n.createElementBlock("a",{href:U.href,target:U.blankTarget?"_blank":"_self",key:U.key,title:U.title},[U.icon?(n.openBlock(),n.createBlock(N,{key:0,type:U.icon},null,8,["type"])):U.customIcon?(n.openBlock(),n.createBlock(N,{key:1,custom:U.customIcon},null,8,["custom"])):n.createCommentVNode("",!0),n.createTextVNode(" "+n.toDisplayString(U.title),1)],8,Ege))),128))])])):n.createCommentVNode("",!0),v.copyright||h.$slots.copyright?(n.openBlock(),n.createElementBlock("div",Mge,[n.renderSlot(h.$slots,"copyright",{},()=>[n.createTextVNode(n.toDisplayString(v.copyright),1)])])):n.createCommentVNode("",!0)])}var AU=l(Cge,[["render",Pge]]),t3={exports:{}},kge=t3.exports={};kge.forEach=function(h,f){for(var v=0;v<h.length;v++){var E=f(h[v]);if(E)return E}};var Ige=function(h){var f=h.stateHandler.getState;function v(N){var U=f(N);return U&&!!U.isDetectable}function E(N){f(N).isDetectable=!0}function T(N){return!!f(N).busy}function b(N,U){f(N).busy=!!U}return{isDetectable:v,markAsDetectable:E,isBusy:T,markBusy:b}},Rge=function(h){var f={};function v(N){var U=h.get(N);return U===void 0?[]:f[U]||[]}function E(N,U){var Y=h.get(N);f[Y]||(f[Y]=[]),f[Y].push(U)}function T(N,U){for(var Y=v(N),W=0,Z=Y.length;W<Z;++W)if(Y[W]===U){Y.splice(W,1);break}}function b(N){var U=v(N);!U||(U.length=0)}return{get:v,add:E,removeListener:T,removeAllListeners:b}},Bge=function(){var h=1;function f(){return h++}return{generate:f}},Dge=function(h){var f=h.idGenerator,v=h.stateHandler.getState;function E(b){var N=v(b);return N&&N.id!==void 0?N.id:null}function T(b){var N=v(b);if(!N)throw new Error("setId required the element to have a resize detection state.");var U=f.generate();return N.id=U,U}return{get:E,set:T}},Lge=function(h){function f(){}var v={log:f,warn:f,error:f};if(!h&&window.console){var E=function(T,b){T[b]=function(){var N=console[b];if(N.apply)N.apply(console,arguments);else for(var U=0;U<arguments.length;U++)N(arguments[U])}};E(v,"log"),E(v,"warn"),E(v,"error")}return v},i3={exports:{}},EU=i3.exports={};EU.isIE=function(h){function f(){var E=navigator.userAgent.toLowerCase();return E.indexOf("msie")!==-1||E.indexOf("trident")!==-1||E.indexOf(" edge/")!==-1}if(!f())return!1;if(!h)return!0;var v=function(){var E,T=3,b=document.createElement("div"),N=b.getElementsByTagName("i");do b.innerHTML="<!--[if gt IE "+ ++T+"]><i></i><![endif]-->";while(N[0]);return T>4?T:E}();return h===v},EU.isLegacyOpera=function(){return!!window.opera};var MU={exports:{}},Nge=MU.exports={};Nge.getOption=Vge;function Vge(h,f,v){var E=h[f];return E==null&&v!==void 0?v:E}var PU=MU.exports,Fge=function(h){h=h||{};var f=h.reporter,v=PU.getOption(h,"async",!0),E=PU.getOption(h,"auto",!0);E&&!v&&(f&&f.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),v=!0);var T=kU(),b,N=!1;function U(Se,we){!N&&E&&v&&T.size()===0&&Z(),T.add(Se,we)}function Y(){for(N=!0;T.size();){var Se=T;T=kU(),Se.process()}N=!1}function W(Se){N||(Se===void 0&&(Se=v),b&&(fe(b),b=null),Se?Z():Y())}function Z(){b=Te(Y)}function fe(Se){var we=clearTimeout;return we(Se)}function Te(Se){var we=function(ce){return setTimeout(ce,0)};return we(Se)}return{add:U,force:W}};function kU(){var h={},f=0,v=0,E=0;function T(U,Y){Y||(Y=U,U=0),U>v?v=U:U<E&&(E=U),h[U]||(h[U]=[]),h[U].push(Y),f++}function b(){for(var U=E;U<=v;U++)for(var Y=h[U],W=0;W<Y.length;W++){var Z=Y[W];Z()}}function N(){return f}return{add:T,process:b,size:N}}var n3="_erd";function $ge(h){return h[n3]={},IU(h)}function IU(h){return h[n3]}function Uge(h){delete h[n3]}var zge={initState:$ge,getState:IU,cleanState:Uge},hx=i3.exports,Xge=function(h){h=h||{};var f=h.reporter,v=h.batchProcessor,E=h.stateHandler.getState;if(!f)throw new Error("Missing required dependency: reporter.");function T(W,Z){function fe(){Z(W)}if(hx.isIE(8))E(W).object={proxy:fe},W.attachEvent("onresize",fe);else{var Te=U(W);if(!Te)throw new Error("Element is not detectable by this strategy.");Te.contentDocument.defaultView.addEventListener("resize",fe)}}function b(W){var Z=h.important?" !important; ":"; ";return(W.join(Z)+Z).trim()}function N(W,Z,fe){fe||(fe=Z,Z=W,W=null),W=W||{},W.debug;function Te(Se,we){var ce=b(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Be=!1,Zt=window.getComputedStyle(Se),Ct=Se.offsetWidth,Rt=Se.offsetHeight;E(Se).startSize={width:Ct,height:Rt};function qe(){function Le(){if(Zt.position==="static"){Se.style.setProperty("position","relative",W.important?"important":"");var ri=function(si,Xt,Lt,Ht){function ui(Tt){return Tt.replace(/[^-\d\.]/g,"")}var Wt=Lt[Ht];Wt!=="auto"&&ui(Wt)!=="0"&&(si.warn("An element that is positioned static has style."+Ht+"="+Wt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Ht+" will be set to 0. Element: ",Xt),Xt.style.setProperty(Ht,"0",W.important?"important":""))};ri(f,Se,Zt,"top"),ri(f,Se,Zt,"right"),ri(f,Se,Zt,"bottom"),ri(f,Se,Zt,"left")}}function rt(){Be||Le();function ri(Xt,Lt){if(!Xt.contentDocument){var Ht=E(Xt);Ht.checkForObjectDocumentTimeoutId&&window.clearTimeout(Ht.checkForObjectDocumentTimeoutId),Ht.checkForObjectDocumentTimeoutId=setTimeout(function(){Ht.checkForObjectDocumentTimeoutId=0,ri(Xt,Lt)},100);return}Lt(Xt.contentDocument)}var si=this;ri(si,function(Xt){we(Se)})}Zt.position!==""&&(Le(),Be=!0);var et=document.createElement("object");et.style.cssText=ce,et.tabIndex=-1,et.type="text/html",et.setAttribute("aria-hidden","true"),et.onload=rt,hx.isIE()||(et.data="about:blank"),E(Se)&&(Se.appendChild(et),E(Se).object=et,hx.isIE()&&(et.data="about:blank"))}v?v.add(qe):qe()}hx.isIE(8)?fe(Z):Te(Z,fe)}function U(W){return E(W).object}function Y(W){if(E(W)){var Z=U(W);!Z||(hx.isIE(8)?W.detachEvent("onresize",Z.proxy):W.removeChild(Z),E(W).checkForObjectDocumentTimeoutId&&window.clearTimeout(E(W).checkForObjectDocumentTimeoutId),delete E(W).object)}}return{makeDetectable:N,addListener:T,uninstall:Y}},Wge=t3.exports.forEach,Gge=function(h){h=h||{};var f=h.reporter,v=h.batchProcessor,E=h.stateHandler.getState;h.stateHandler.hasState;var T=h.idHandler;if(!v)throw new Error("Missing required dependency: batchProcessor");if(!f)throw new Error("Missing required dependency: reporter.");var b=Z(),N="erd_scroll_detection_scrollbar_style",U="erd_scroll_detection_container";function Y(qe){fe(qe,N,U)}Y(window.document);function W(qe){var Le=h.important?" !important; ":"; ";return(qe.join(Le)+Le).trim()}function Z(){var qe=500,Le=500,rt=document.createElement("div");rt.style.cssText=W(["position: absolute","width: "+qe*2+"px","height: "+Le*2+"px","visibility: hidden","margin: 0","padding: 0"]);var et=document.createElement("div");et.style.cssText=W(["position: absolute","width: "+qe+"px","height: "+Le+"px","overflow: scroll","visibility: none","top: "+-qe*3+"px","left: "+-Le*3+"px","visibility: hidden","margin: 0","padding: 0"]),et.appendChild(rt),document.body.insertBefore(et,document.body.firstChild);var ri=qe-et.clientWidth,si=Le-et.clientHeight;return document.body.removeChild(et),{width:ri,height:si}}function fe(qe,Le,rt){function et(Lt,Ht){Ht=Ht||function(Wt){qe.head.appendChild(Wt)};var ui=qe.createElement("style");return ui.innerHTML=Lt,ui.id=Le,Ht(ui),ui}if(!qe.getElementById(Le)){var ri=rt+"_animation",si=rt+"_animation_active",Xt=`/* Created by the element-resize-detector library. */
`;Xt+="."+rt+" > div::-webkit-scrollbar { "+W(["display: none"])+` }

`,Xt+="."+si+" { "+W(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+ri,"animation-name: "+ri])+` }
`,Xt+="@-webkit-keyframes "+ri+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,Xt+="@keyframes "+ri+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",et(Xt)}}function Te(qe){qe.className+=" "+U+"_animation_active"}function Se(qe,Le,rt){if(qe.addEventListener)qe.addEventListener(Le,rt);else if(qe.attachEvent)qe.attachEvent("on"+Le,rt);else return f.error("[scroll] Don't know how to add event listeners.")}function we(qe,Le,rt){if(qe.removeEventListener)qe.removeEventListener(Le,rt);else if(qe.detachEvent)qe.detachEvent("on"+Le,rt);else return f.error("[scroll] Don't know how to remove event listeners.")}function ce(qe){return E(qe).container.childNodes[0].childNodes[0].childNodes[0]}function Be(qe){return E(qe).container.childNodes[0].childNodes[0].childNodes[1]}function Zt(qe,Le){var rt=E(qe).listeners;if(!rt.push)throw new Error("Cannot add listener to an element that is not detectable.");E(qe).listeners.push(Le)}function Ct(qe,Le,rt){rt||(rt=Le,Le=qe,qe=null),qe=qe||{};function et(){if(qe.debug){var Vt=Array.prototype.slice.call(arguments);if(Vt.unshift(T.get(Le),"Scroll: "),f.log.apply)f.log.apply(null,Vt);else for(var yi=0;yi<Vt.length;yi++)f.log(Vt[yi])}}function ri(Vt){function yi(sn){var Ds=sn.getRootNode&&sn.getRootNode().contains(sn);return sn===sn.ownerDocument.body||sn.ownerDocument.body.contains(sn)||Ds}return!yi(Vt)||window.getComputedStyle(Vt)===null}function si(Vt){var yi=E(Vt).container.childNodes[0],sn=window.getComputedStyle(yi);return!sn.width||sn.width.indexOf("px")===-1}function Xt(){var Vt=window.getComputedStyle(Le),yi={};return yi.position=Vt.position,yi.width=Le.offsetWidth,yi.height=Le.offsetHeight,yi.top=Vt.top,yi.right=Vt.right,yi.bottom=Vt.bottom,yi.left=Vt.left,yi.widthCSS=Vt.width,yi.heightCSS=Vt.height,yi}function Lt(){var Vt=Xt();E(Le).startSize={width:Vt.width,height:Vt.height},et("Element start size",E(Le).startSize)}function Ht(){E(Le).listeners=[]}function ui(){if(et("storeStyle invoked."),!E(Le)){et("Aborting because element has been uninstalled");return}var Vt=Xt();E(Le).style=Vt}function Wt(Vt,yi,sn){E(Vt).lastWidth=yi,E(Vt).lastHeight=sn}function Tt(Vt){return ce(Vt).childNodes[0]}function vt(){return 2*b.width+1}function jt(){return 2*b.height+1}function kt(Vt){return Vt+10+vt()}function xi(Vt){return Vt+10+jt()}function Mi(Vt){return Vt*2+vt()}function Tn(Vt){return Vt*2+jt()}function Gn(Vt,yi,sn){var Ds=ce(Vt),Vo=Be(Vt),ku=kt(yi),uf=xi(sn),Fo=Mi(yi),In=Tn(sn);Ds.scrollLeft=ku,Ds.scrollTop=uf,Vo.scrollLeft=Fo,Vo.scrollTop=In}function gr(){var Vt=E(Le).container;if(!Vt){Vt=document.createElement("div"),Vt.className=U,Vt.style.cssText=W(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),E(Le).container=Vt,Te(Vt),Le.appendChild(Vt);var yi=function(){E(Le).onRendered&&E(Le).onRendered()};Se(Vt,"animationstart",yi),E(Le).onAnimationStart=yi}return Vt}function Tr(){function Vt(){var Jr=E(Le).style;if(Jr.position==="static"){Le.style.setProperty("position","relative",qe.important?"important":"");var Rh=function(Iu,Bh,pC,df){function R3(B3){return B3.replace(/[^-\d\.]/g,"")}var Cx=pC[df];Cx!=="auto"&&R3(Cx)!=="0"&&(Iu.warn("An element that is positioned static has style."+df+"="+Cx+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+df+" will be set to 0. Element: ",Bh),Bh.style[df]=0)};Rh(f,Le,Jr,"top"),Rh(f,Le,Jr,"right"),Rh(f,Le,Jr,"bottom"),Rh(f,Le,Jr,"left")}}function yi(Jr,Rh,Iu,Bh){return Jr=Jr?Jr+"px":"0",Rh=Rh?Rh+"px":"0",Iu=Iu?Iu+"px":"0",Bh=Bh?Bh+"px":"0",["left: "+Jr,"top: "+Rh,"right: "+Bh,"bottom: "+Iu]}if(et("Injecting elements"),!E(Le)){et("Aborting because element has been uninstalled");return}Vt();var sn=E(Le).container;sn||(sn=gr());var Ds=b.width,Vo=b.height,ku=W(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),uf=W(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(yi(-(1+Ds),-(1+Vo),-Vo,-Ds))),Fo=W(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),In=W(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),aa=W(["position: absolute","left: 0","top: 0"]),kh=W(["position: absolute","width: 200%","height: 200%"]),Ga=document.createElement("div"),Ih=document.createElement("div"),X0=document.createElement("div"),uC=document.createElement("div"),W0=document.createElement("div"),dC=document.createElement("div");Ga.dir="ltr",Ga.style.cssText=ku,Ga.className=U,Ih.className=U,Ih.style.cssText=uf,X0.style.cssText=Fo,uC.style.cssText=aa,W0.style.cssText=In,dC.style.cssText=kh,X0.appendChild(uC),W0.appendChild(dC),Ih.appendChild(X0),Ih.appendChild(W0),Ga.appendChild(Ih),sn.appendChild(Ga);function fC(){var Jr=E(Le);Jr&&Jr.onExpand?Jr.onExpand():et("Aborting expand scroll handler: element has been uninstalled")}function Sx(){var Jr=E(Le);Jr&&Jr.onShrink?Jr.onShrink():et("Aborting shrink scroll handler: element has been uninstalled")}Se(X0,"scroll",fC),Se(W0,"scroll",Sx),E(Le).onExpandScroll=fC,E(Le).onShrinkScroll=Sx}function Ys(){function Vt(Fo,In,aa){var kh=Tt(Fo),Ga=kt(In),Ih=xi(aa);kh.style.setProperty("width",Ga+"px",qe.important?"important":""),kh.style.setProperty("height",Ih+"px",qe.important?"important":"")}function yi(Fo){var In=Le.offsetWidth,aa=Le.offsetHeight,kh=In!==E(Le).lastWidth||aa!==E(Le).lastHeight;et("Storing current size",In,aa),Wt(Le,In,aa),v.add(0,function(){if(kh){if(!E(Le)){et("Aborting because element has been uninstalled");return}if(!sn()){et("Aborting because element container has not been initialized");return}if(qe.debug){var Ga=Le.offsetWidth,Ih=Le.offsetHeight;(Ga!==In||Ih!==aa)&&f.warn(T.get(Le),"Scroll: Size changed before updating detector elements.")}Vt(Le,In,aa)}}),v.add(1,function(){if(!E(Le)){et("Aborting because element has been uninstalled");return}if(!sn()){et("Aborting because element container has not been initialized");return}Gn(Le,In,aa)}),kh&&Fo&&v.add(2,function(){if(!E(Le)){et("Aborting because element has been uninstalled");return}if(!sn()){et("Aborting because element container has not been initialized");return}Fo()})}function sn(){return!!E(Le).container}function Ds(){function Fo(){return E(Le).lastNotifiedWidth===void 0}et("notifyListenersIfNeeded invoked");var In=E(Le);if(Fo()&&In.lastWidth===In.startSize.width&&In.lastHeight===In.startSize.height)return et("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(In.lastWidth===In.lastNotifiedWidth&&In.lastHeight===In.lastNotifiedHeight)return et("Not notifying: Size already notified");et("Current size not notified, notifying..."),In.lastNotifiedWidth=In.lastWidth,In.lastNotifiedHeight=In.lastHeight,Wge(E(Le).listeners,function(aa){aa(Le)})}function Vo(){if(et("startanimation triggered."),si(Le)){et("Ignoring since element is still unrendered...");return}et("Element rendered.");var Fo=ce(Le),In=Be(Le);(Fo.scrollLeft===0||Fo.scrollTop===0||In.scrollLeft===0||In.scrollTop===0)&&(et("Scrollbars out of sync. Updating detector elements..."),yi(Ds))}function ku(){if(et("Scroll detected."),si(Le)){et("Scroll event fired while unrendered. Ignoring...");return}yi(Ds)}if(et("registerListenersAndPositionElements invoked."),!E(Le)){et("Aborting because element has been uninstalled");return}E(Le).onRendered=Vo,E(Le).onExpand=ku,E(Le).onShrink=ku;var uf=E(Le).style;Vt(Le,uf.width,uf.height)}function oa(){if(et("finalizeDomMutation invoked."),!E(Le)){et("Aborting because element has been uninstalled");return}var Vt=E(Le).style;Wt(Le,Vt.width,Vt.height),Gn(Le,Vt.width,Vt.height)}function Mh(){rt(Le)}function Ph(){et("Installing..."),Ht(),Lt(),v.add(0,ui),v.add(1,Tr),v.add(2,Ys),v.add(3,oa),v.add(4,Mh)}et("Making detectable..."),ri(Le)?(et("Element is detached"),gr(),et("Waiting until element is attached..."),E(Le).onRendered=function(){et("Element is now attached"),Ph()}):Ph()}function Rt(qe){var Le=E(qe);!Le||(Le.onExpandScroll&&we(ce(qe),"scroll",Le.onExpandScroll),Le.onShrinkScroll&&we(Be(qe),"scroll",Le.onShrinkScroll),Le.onAnimationStart&&we(Le.container,"animationstart",Le.onAnimationStart),Le.container&&qe.removeChild(Le.container))}return{makeDetectable:Ct,addListener:Zt,uninstall:Rt,initDocument:Y}},cx=t3.exports.forEach,Hge=Ige,Qge=Rge,jge=Bge,Yge=Dge,qge=Lge,RU=i3.exports,Zge=Fge,ef=zge,Kge=Xge,Jge=Gge;function BU(h){return Array.isArray(h)||h.length!==void 0}function DU(h){if(Array.isArray(h))return h;var f=[];return cx(h,function(v){f.push(v)}),f}function LU(h){return h&&h.nodeType===1}var N0=function(h){h=h||{};var f;if(h.idHandler)f={get:function(Ct){return h.idHandler.get(Ct,!0)},set:h.idHandler.set};else{var v=jge(),E=Yge({idGenerator:v,stateHandler:ef});f=E}var T=h.reporter;if(!T){var b=T===!1;T=qge(b)}var N=tf(h,"batchProcessor",Zge({reporter:T})),U={};U.callOnAdd=!!tf(h,"callOnAdd",!0),U.debug=!!tf(h,"debug",!1);var Y=Qge(f),W=Hge({stateHandler:ef}),Z,fe=tf(h,"strategy","object"),Te=tf(h,"important",!1),Se={reporter:T,batchProcessor:N,stateHandler:ef,idHandler:f,important:Te};if(fe==="scroll"&&(RU.isLegacyOpera()?(T.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),fe="object"):RU.isIE(9)&&(T.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),fe="object")),fe==="scroll")Z=Jge(Se);else if(fe==="object")Z=Kge(Se);else throw new Error("Invalid strategy name: "+fe);var we={};function ce(Ct,Rt,qe){function Le(Lt){var Ht=Y.get(Lt);cx(Ht,function(ui){ui(Lt)})}function rt(Lt,Ht,ui){Y.add(Ht,ui),Lt&&ui(Ht)}if(qe||(qe=Rt,Rt=Ct,Ct={}),!Rt)throw new Error("At least one element required.");if(!qe)throw new Error("Listener required.");if(LU(Rt))Rt=[Rt];else if(BU(Rt))Rt=DU(Rt);else return T.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var et=0,ri=tf(Ct,"callOnAdd",U.callOnAdd),si=tf(Ct,"onReady",function(){}),Xt=tf(Ct,"debug",U.debug);cx(Rt,function(Lt){ef.getState(Lt)||(ef.initState(Lt),f.set(Lt));var Ht=f.get(Lt);if(Xt&&T.log("Attaching listener to element",Ht,Lt),!W.isDetectable(Lt)){if(Xt&&T.log(Ht,"Not detectable."),W.isBusy(Lt)){Xt&&T.log(Ht,"System busy making it detectable"),rt(ri,Lt,qe),we[Ht]=we[Ht]||[],we[Ht].push(function(){et++,et===Rt.length&&si()});return}return Xt&&T.log(Ht,"Making detectable..."),W.markBusy(Lt,!0),Z.makeDetectable({debug:Xt,important:Te},Lt,function(ui){if(Xt&&T.log(Ht,"onElementDetectable"),ef.getState(ui)){W.markAsDetectable(ui),W.markBusy(ui,!1),Z.addListener(ui,Le),rt(ri,ui,qe);var Wt=ef.getState(ui);if(Wt&&Wt.startSize){var Tt=ui.offsetWidth,vt=ui.offsetHeight;(Wt.startSize.width!==Tt||Wt.startSize.height!==vt)&&Le(ui)}we[Ht]&&cx(we[Ht],function(jt){jt()})}else Xt&&T.log(Ht,"Element uninstalled before being detectable.");delete we[Ht],et++,et===Rt.length&&si()})}Xt&&T.log(Ht,"Already detecable, adding listener."),rt(ri,Lt,qe),et++}),et===Rt.length&&si()}function Be(Ct){if(!Ct)return T.error("At least one element is required.");if(LU(Ct))Ct=[Ct];else if(BU(Ct))Ct=DU(Ct);else return T.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");cx(Ct,function(Rt){Y.removeAllListeners(Rt),Z.uninstall(Rt),ef.cleanState(Rt)})}function Zt(Ct){Z.initDocument&&Z.initDocument(Ct)}return{listenTo:ce,removeListener:Y.removeListener,removeAllListeners:Y.removeAllListeners,uninstall:Be,initDocument:Zt}};function tf(h,f,v){var E=h[f];return E==null&&v!==void 0?v:E}var NU="Expected a function",VU=NaN,e0e="[object Symbol]",t0e=/^\s+|\s+$/g,i0e=/^[-+]0x[0-9a-f]+$/i,n0e=/^0b[01]+$/i,r0e=/^0o[0-7]+$/i,s0e=parseInt,o0e=typeof te=="object"&&te&&te.Object===Object&&te,a0e=typeof self=="object"&&self&&self.Object===Object&&self,l0e=o0e||a0e||Function("return this")(),h0e=Object.prototype,c0e=h0e.toString,u0e=Math.max,d0e=Math.min,r3=function(){return l0e.Date.now()};function f0e(h,f,v){var E,T,b,N,U,Y,W=0,Z=!1,fe=!1,Te=!0;if(typeof h!="function")throw new TypeError(NU);f=FU(f)||0,qS(v)&&(Z=!!v.leading,fe="maxWait"in v,b=fe?u0e(FU(v.maxWait)||0,f):b,Te="trailing"in v?!!v.trailing:Te);function Se(rt){var et=E,ri=T;return E=T=void 0,W=rt,N=h.apply(ri,et),N}function we(rt){return W=rt,U=setTimeout(Zt,f),Z?Se(rt):N}function ce(rt){var et=rt-Y,ri=rt-W,si=f-et;return fe?d0e(si,b-ri):si}function Be(rt){var et=rt-Y,ri=rt-W;return Y===void 0||et>=f||et<0||fe&&ri>=b}function Zt(){var rt=r3();if(Be(rt))return Ct(rt);U=setTimeout(Zt,ce(rt))}function Ct(rt){return U=void 0,Te&&E?Se(rt):(E=T=void 0,N)}function Rt(){U!==void 0&&clearTimeout(U),W=0,E=Y=T=U=void 0}function qe(){return U===void 0?N:Ct(r3())}function Le(){var rt=r3(),et=Be(rt);if(E=arguments,T=this,Y=rt,et){if(U===void 0)return we(Y);if(fe)return U=setTimeout(Zt,f),Se(Y)}return U===void 0&&(U=setTimeout(Zt,f)),N}return Le.cancel=Rt,Le.flush=qe,Le}function p0e(h,f,v){var E=!0,T=!0;if(typeof h!="function")throw new TypeError(NU);return qS(v)&&(E="leading"in v?!!v.leading:E,T="trailing"in v?!!v.trailing:T),f0e(h,f,{leading:E,maxWait:f,trailing:T})}function qS(h){var f=typeof h;return!!h&&(f=="object"||f=="function")}function m0e(h){return!!h&&typeof h=="object"}function g0e(h){return typeof h=="symbol"||m0e(h)&&c0e.call(h)==e0e}function FU(h){if(typeof h=="number")return h;if(g0e(h))return VU;if(qS(h)){var f=typeof h.valueOf=="function"?h.valueOf():h;h=qS(f)?f+"":f}if(typeof h!="string")return h===0?h:+h;h=h.replace(t0e,"");var v=n0e.test(h);return v||r0e.test(h)?s0e(h.slice(2),v?2:8):i0e.test(h)?VU:+h}var ZS=p0e;const v0e={name:"Grid",provide(){return{GridInstance:this}},props:{col:{type:Number,default:3},square:{type:Boolean,default:!1},padding:{type:String,default:"24px"},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},hover:{type:Boolean,default:!1}},data(){return{resizeCount:0,handleResize:()=>{}}},computed:{classes(){return{"ivu-grid-center":this.center,"ivu-grid-border":this.border,"ivu-grid-hover":this.hover}}},methods:{onResize(){this.resizeCount++}},mounted(){this.handleResize=ZS(this.onResize,150,{leading:!1}),this.observer=N0(),this.observer.listenTo(this.$refs.grid,this.handleResize)},beforeUnmount(){this.observer.removeListener(this.$refs.grid,this.handleResize)}};function y0e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-grid",b.classes]),ref:"grid"},[n.renderSlot(h.$slots,"default")],2)}var $U=l(v0e,[["render",y0e]]);const _0e={name:"GridItem",inject:["GridInstance"],data(){return{height:0}},computed:{col(){return this.GridInstance.col},square(){return this.GridInstance.square},styles(){const h={width:`${100/this.col}%`};return this.height&&this.square&&(h.height=`${this.height}px`),h},mainStyles(){return{padding:this.GridInstance.padding}}},watch:{col(){n.nextTick(()=>{this.handleChangeHeight()})},square(){this.handleChangeHeight()},"GridInstance.resizeCount"(){this.handleChangeHeight()}},methods:{handleChangeHeight(){if(this.square){const h=this.$refs.col;this.height=parseFloat(I(h,"width"))}}},mounted(){this.handleChangeHeight()}};function x0e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:"ivu-grid-item",style:n.normalizeStyle(b.styles),ref:"col"},[n.createElementVNode("div",{class:"ivu-grid-item-main",style:n.normalizeStyle(b.mainStyles)},[n.renderSlot(h.$slots,"default")],4)],4)}var UU=l(_0e,[["render",x0e]]);const b0e="ivu-layout",w0e={name:"Header",computed:{wrapClasses(){return`${b0e}-header`}}};function O0e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[n.renderSlot(h.$slots,"default")],2)}var s3=l(w0e,[["render",O0e]]);const ii={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent(h){const{keyCode:f}=h;if(h.altKey&&!h.ctrlKey||h.metaKey||f>=ii.F1&&f<=ii.F12)return!1;switch(f){case ii.ALT:case ii.CAPS_LOCK:case ii.CONTEXT_MENU:case ii.CTRL:case ii.DOWN:case ii.END:case ii.ESC:case ii.HOME:case ii.INSERT:case ii.LEFT:case ii.MAC_FF_META:case ii.META:case ii.NUMLOCK:case ii.NUM_CENTER:case ii.PAGE_DOWN:case ii.PAGE_UP:case ii.PAUSE:case ii.PRINT_SCREEN:case ii.RIGHT:case ii.SHIFT:case ii.UP:case ii.WIN_KEY:case ii.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey(h){if(h>=ii.ZERO&&h<=ii.NINE||h>=ii.NUM_ZERO&&h<=ii.NUM_MULTIPLY||h>=ii.A&&h<=ii.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&h===0)return!0;switch(h){case ii.SPACE:case ii.QUESTION_MARK:case ii.NUM_PLUS:case ii.NUM_MINUS:case ii.NUM_PERIOD:case ii.NUM_DIVISION:case ii.SEMICOLON:case ii.DASH:case ii.EQUALS:case ii.COMMA:case ii.PERIOD:case ii.SLASH:case ii.APOSTROPHE:case ii.SINGLE_QUOTE:case ii.OPEN_SQUARE_BRACKET:case ii.BACKSLASH:case ii.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},nf="ivu-spin",S0e={name:"Spin",mixins:[Jk],props:{size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},fix:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data(){return{showText:!1,visible:!1}},computed:{classes(){return[`${nf}`,{[`${nf}-${this.size}`]:!!this.size,[`${nf}-fix`]:this.fix,[`${nf}-show-text`]:this.showText,[`${nf}-fullscreen`]:this.fullscreen}]},mainClasses(){return`${nf}-main`},dotClasses(){return`${nf}-dot`},textClasses(){return`${nf}-text`},fullscreenVisible(){return this.fullscreen?this.visible:!0}},watch:{visible(h){h?this.addScrollEffect():this.removeScrollEffect()}},mounted(){this.showText=!!this.$slots.default&&this.$slots.default().some(h=>h.children&&h.children.length)}};function C0e(h,f,v,E,T,b){return n.openBlock(),n.createBlock(n.Transition,{name:"fade"},{default:n.withCtx(()=>[b.fullscreenVisible&&v.show?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.classes)},[n.createElementVNode("div",{class:n.normalizeClass(b.mainClasses)},[n.createElementVNode("span",{class:n.normalizeClass(b.dotClasses)},null,2),n.createElementVNode("div",{class:n.normalizeClass(b.textClasses)},[n.renderSlot(h.$slots,"default")],2)],2)],2)):n.createCommentVNode("",!0)]),_:3})}var Xa=l(S0e,[["render",C0e]]);const T0e={name:"ImagePreview",mixins:[kn],components:{Icon:O,Spin:Xa,Row:qd,Col:yc},inheritAttrs:!1,emits:["update:modelValue","on-close","on-switch"],props:{modelValue:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},toolbar:{type:Array,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||!h.$VIEWUI.image||h.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:h.$VIEWUI.image.toolbar}}},data(){return{currentIndex:0,scale:1,degree:0,translate:{x:0,y:0},startX:0,startY:0,transition:!0,original:!1,prevOverflow:"",status:"loading",zIndex:1e3,maskIndex:this.getMaskIndex(),downloading:!1}},computed:{imgClasses(){return["ivu-image-preview-image",{"ivu-image-preview-grabbing":!this.transition,"ivu-image-preview-hidden":this.status==="failed","ivu-image-preview-transition":this.transition,"ivu-image-preview-limit":!this.original}]},imageStyle(){let h=this.translate.x/this.scale,f=this.translate.y/this.scale;const v=this.degree%360;return[90,-270].includes(v)&&([h,f]=[f,-h]),[180,-180].includes(v)&&([h,f]=[-h,-f]),[270,-90].includes(v)&&([h,f]=[-f,h]),{transform:`
                        scale(${this.scale})
                        rotate(${this.degree}deg)
                        translate(${h}px, ${f}px)
                    `}},maskStyle(){return{zIndex:this.maskIndex+this.zIndex}},leftClasses(){return["ivu-image-preview-arrow-left",{"ivu-image-preview-arrow-disabled":this.hasLeftSwitchEnd}]},rightClasses(){return["ivu-image-preview-arrow-right",{"ivu-image-preview-arrow-disabled":this.hasRightSwitchEnd}]},hasRightSwitchEnd(){const{currentIndex:h,infinite:f,previewList:v}=this,E=v.length;return f?!1:h>=E-1},hasLeftSwitchEnd(){const{currentIndex:h,infinite:f}=this;return f?!1:h===0},currentSrc(){return this.previewList[this.currentIndex]},failLang(){return this.t("i.image.fail")}},methods:{resetStyle(){this.scale=1,this.degree=0,this.translate.x=0,this.translate.y=0},handleClose(){this.$emit("update:modelValue",!1),this.$emit("on-close")},handleClickMask(){!this.maskClosable||this.handleClose()},handleSwitch(h){h?this.currentIndex+1===this.previewList.length?this.infinite&&(this.resetStyle(),this.currentIndex=0):(this.resetStyle(),this.currentIndex+=1):this.currentIndex===0?this.infinite&&(this.resetStyle(),this.currentIndex=this.previewList.length-1):(this.resetStyle(),this.currentIndex-=1),this.$emit("on-switch",{currentIndex:this.currentIndex})},handleOperation(h){h==="zoomIn"&&this.scale<6&&(this.scale+=.25),h==="zoomOut"&&this.scale>.25&&(this.scale-=.25),h==="rotateLeft"&&(this.degree-=90),h==="rotateRight"&&(this.degree+=90),h==="original"&&(this.original=!this.original,this.transition=!1,this.resetStyle(),setTimeout(()=>{this.transition=!0},0)),h==="download"&&(this.downloading=!0,pe(this.previewList[this.currentIndex]).then(()=>{this.downloading=!1}).catch(()=>{this.downloading=!1}))},handleKeydown(h){if(!this.modelValue)return;const{keyCode:f}=h;f===ii.LEFT&&this.handleSwitch(!1),f===ii.RIGHT&&this.handleSwitch(!0),f===ii.UP&&this.handleOperation("zoomIn"),f===ii.DOWN&&this.handleOperation("zoomOut"),f===ii.SPACE&&(h.preventDefault(),this.original=!this.original)},handleKeyup(h){if(!this.modelValue)return;const{keyCode:f}=h;f===ii.ESC&&this.handleClose()},handleWheel(h){if(!this.modelValue)return;const{deltaY:f}=h;this.handleOperation(f<0?"zoomIn":"zoomOut")},handleMousedown(h){const{pageX:f,pageY:v,which:E}=h;E===1&&(this.startX=f,this.startY=v,this.transition=!1,o(document,"mousemove",this.handleMousemove),o(document,"mouseup",this.handleMouseup))},handleMousemove:ZS(function(h){h.stopPropagation();const{pageX:f,pageY:v}=h;this.translate.x+=f-this.startX,this.translate.y+=v-this.startY,this.startX=f,this.startY=v}),handleMouseup(){this.transition=!0,a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup)},getBodyOverflow(){return s?document.body.style.overflow:""},setBodyOverflow(h){!s||(document.body.style.overflow=h)},handleImageLoad(){this.status="loaded"},handleImageError(){this.status="failed"},getMaskIndex(){return je(),Ae}},watch:{modelValue(h){h?(this.currentIndex=this.initialIndex,this.resetStyle(),this.original=!1,this.prevOverflow=this.getBodyOverflow(),this.setBodyOverflow("hidden"),this.maskIndex=this.getMaskIndex()):this.setBodyOverflow(this.prevOverflow)},currentIndex(){this.status="loading"}},mounted(){o(document,"keydown",this.handleKeydown),o(document,"keyup",this.handleKeyup),o(document,"wheel",this.handleWheel)},beforeUnmount(){a(document,"keydown",this.handleKeydown),a(document,"keyup",this.handleKeyup),a(document,"wheel",this.handleWheel)}},A0e={key:1,class:"ivu-image-preview-fail"},E0e=["src"],M0e=[n.createElementVNode("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7198",fill:"#ffffff"},null,-1),n.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7199",fill:"#ffffff"},null,-1)],P0e=[n.createElementVNode("path",{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7413",fill:"#ffffff"},null,-1),n.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7414",fill:"#ffffff"},null,-1)],k0e=[n.createElementVNode("path",{d:"M358.058667 128H156.970667A28.970667 28.970667 0 0 0 128 157.013333v202.837334c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434666a14.506667 14.506667 0 0 0 14.506667-14.506666V200.448h157.610667a14.506667 14.506667 0 0 0 14.506666-14.506667V142.506667a14.506667 14.506667 0 0 0-14.506666-14.506667zM881.493333 649.642667h-43.434666a14.506667 14.506667 0 0 0-14.506667 14.506666v159.402667h-157.610667a14.506667 14.506667 0 0 0-14.506666 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506666 14.506667h201.088c16 0 28.970667-12.928 28.970667-29.013333v-202.837334a14.506667 14.506667 0 0 0-14.506667-14.506666zM358.058667 823.552H200.448v-159.402667a14.506667 14.506667 0 0 0-14.506667-14.506666H142.506667a14.506667 14.506667 0 0 0-14.506667 14.506666v202.88c0 16 12.970667 28.970667 29.013333 28.970667h201.045334a14.506667 14.506667 0 0 0 14.506666-14.506667v-43.434666a14.506667 14.506667 0 0 0-14.506666-14.506667zM866.986667 128h-201.088a14.506667 14.506667 0 0 0-14.506667 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506667 14.506667h157.610666v159.402667c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434667a14.506667 14.506667 0 0 0 14.506666-14.506666V156.970667A28.928 28.928 0 0 0 866.986667 128z","p-id":"26673",fill:"#ffffff"},null,-1)],I0e=[n.createElementVNode("path",{d:"M864 128H160c-19.2 0-32 12.8-32 32v704c0 19.2 12.8 32 32 32h704c19.2 0 32-12.8 32-32V160c0-19.2-12.8-32-32-32z m-32 704H192V192h640v640z","p-id":"1977",fill:"#ffffff"},null,-1),n.createElementVNode("path",{d:"M320 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32zM640 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32z","p-id":"1978",fill:"#ffffff"},null,-1),n.createElementVNode("path",{d:"M512 384m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1979",fill:"#ffffff"},null,-1),n.createElementVNode("path",{d:"M512 640m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1980",fill:"#ffffff"},null,-1)],R0e=[n.createElementVNode("path",{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z m191.3-491.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z","p-id":"13309",fill:"#ffffff"},null,-1)],B0e=[n.createElementVNode("path",{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8zM880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z","p-id":"13522",fill:"#ffffff"},null,-1)],D0e=[n.createElementVNode("path",{d:"M505.7 621c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-72.1V120c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v346.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z","p-id":"8826",fill:"#ffffff"},null,-1),n.createElementVNode("path",{d:"M903 516h-64c-4.4 0-8 3.6-8 8v300c0 4.4-3.6 8-8 8H199c-4.4 0-8-3.6-8-8V524c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v372c0 8.8 7.2 16 16 16h768c8.8 0 16-7.2 16-16V524c0-4.4-3.6-8-8-8z","p-id":"8827",fill:"#ffffff"},null,-1)],L0e={class:"ivu-image-preview-operations-item ivu-image-preview-operations-wait ivu-anim-loop",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7816",width:"200",height:"200"},N0e=[n.createElementVNode("path",{d:"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z","p-id":"7817",fill:"#ffffff"},null,-1)];function V0e(h,f,v,E,T,b){const N=n.resolveComponent("Spin"),U=n.resolveComponent("Col"),Y=n.resolveComponent("Row"),W=n.resolveComponent("Icon");return n.openBlock(),n.createBlock(n.Teleport,{to:"body",disabled:!v.transfer},[n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[v.modelValue?(n.openBlock(),n.createElementBlock("div",{key:0,class:"ivu-image-preview-mask",style:n.normalizeStyle(b.maskStyle)},null,4)):n.createCommentVNode("",!0)]),_:1}),n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[v.modelValue?(n.openBlock(),n.createElementBlock("div",{key:0,class:"ivu-image-preview-wrap",style:n.normalizeStyle(b.maskStyle)},[n.createElementVNode("div",n.mergeProps({class:"ivu-image-preview"},h.$attrs,{onClick:f[14]||(f[14]=n.withModifiers((...Z)=>b.handleClickMask&&b.handleClickMask(...Z),["stop"]))}),[T.status==="loading"?(n.openBlock(),n.createBlock(N,{key:0,size:"large",class:"ivu-image-preview-loading"})):T.status==="failed"?(n.openBlock(),n.createElementBlock("div",A0e,[n.createElementVNode("span",null,n.toDisplayString(b.failLang),1)])):n.createCommentVNode("",!0),(n.openBlock(),n.createElementBlock("img",{class:n.normalizeClass(b.imgClasses),style:n.normalizeStyle(b.imageStyle),src:b.currentSrc,key:T.currentIndex.toString(),onClick:f[0]||(f[0]=n.withModifiers(()=>{},["stop"])),onMousedown:f[1]||(f[1]=n.withModifiers((...Z)=>b.handleMousedown&&b.handleMousedown(...Z),["stop","prevent"])),onLoad:f[2]||(f[2]=(...Z)=>b.handleImageLoad&&b.handleImageLoad(...Z)),onError:f[3]||(f[3]=(...Z)=>b.handleImageError&&b.handleImageError(...Z))},null,46,E0e)),v.toolbar&&v.toolbar.length>0?(n.openBlock(),n.createBlock(Y,{key:2,"class-name":"ivu-image-preview-operations",wrap:!1,onClick:f[11]||(f[11]=n.withModifiers(()=>{},["stop"]))},{default:n.withCtx(()=>[v.toolbar.indexOf("zoomIn")>-1?(n.openBlock(),n.createBlock(U,{key:0,flex:"1",order:v.toolbar.indexOf("zoomIn")+1},{default:n.withCtx(()=>[(n.openBlock(),n.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:f[4]||(f[4]=n.withModifiers(Z=>b.handleOperation("zoomIn"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7197",width:"200",height:"200"},M0e))]),_:1},8,["order"])):n.createCommentVNode("",!0),v.toolbar.indexOf("zoomOut")>-1?(n.openBlock(),n.createBlock(U,{key:1,flex:"1",order:v.toolbar.indexOf("zoomOut")+1},{default:n.withCtx(()=>[(n.openBlock(),n.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:f[5]||(f[5]=n.withModifiers(Z=>b.handleOperation("zoomOut"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7412",width:"200",height:"200"},P0e))]),_:1},8,["order"])):n.createCommentVNode("",!0),v.toolbar.indexOf("original")>-1?(n.openBlock(),n.createBlock(U,{key:2,flex:"1",order:v.toolbar.indexOf("original")+1},{default:n.withCtx(()=>[n.withDirectives((n.openBlock(),n.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:f[6]||(f[6]=n.withModifiers(Z=>b.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26672",width:"200",height:"200"},k0e,512)),[[n.vShow,!this.original]]),n.withDirectives((n.openBlock(),n.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:f[7]||(f[7]=n.withModifiers(Z=>b.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1976",width:"200",height:"200"},I0e,512)),[[n.vShow,this.original]])]),_:1},8,["order"])):n.createCommentVNode("",!0),v.toolbar.indexOf("rotateLeft")>-1?(n.openBlock(),n.createBlock(U,{key:3,flex:"1",order:v.toolbar.indexOf("rotateLeft")+1},{default:n.withCtx(()=>[(n.openBlock(),n.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:f[8]||(f[8]=n.withModifiers(Z=>b.handleOperation("rotateLeft"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13308",width:"200",height:"200"},R0e))]),_:1},8,["order"])):n.createCommentVNode("",!0),v.toolbar.indexOf("rotateRight")>-1?(n.openBlock(),n.createBlock(U,{key:4,flex:"1",order:v.toolbar.indexOf("rotateRight")+1},{default:n.withCtx(()=>[(n.openBlock(),n.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:f[9]||(f[9]=n.withModifiers(Z=>b.handleOperation("rotateRight"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13521",width:"200",height:"200"},B0e))]),_:1},8,["order"])):n.createCommentVNode("",!0),v.toolbar.indexOf("download")>-1?(n.openBlock(),n.createBlock(U,{key:5,flex:"1",order:v.toolbar.indexOf("download")+1},{default:n.withCtx(()=>[n.withDirectives((n.openBlock(),n.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:f[10]||(f[10]=n.withModifiers(Z=>b.handleOperation("download"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8825",width:"200",height:"200"},D0e,512)),[[n.vShow,!T.downloading]]),n.withDirectives((n.openBlock(),n.createElementBlock("svg",L0e,N0e,512)),[[n.vShow,T.downloading]])]),_:1},8,["order"])):n.createCommentVNode("",!0)]),_:1})):n.createCommentVNode("",!0),v.previewList.length>1?(n.openBlock(),n.createBlock(W,{key:3,class:n.normalizeClass(b.leftClasses),type:"ios-arrow-back",onClick:f[12]||(f[12]=n.withModifiers(Z=>b.handleSwitch(!1),["stop"]))},null,8,["class"])):n.createCommentVNode("",!0),v.previewList.length>1?(n.openBlock(),n.createBlock(W,{key:4,class:n.normalizeClass(b.rightClasses),type:"ios-arrow-forward",onClick:f[13]||(f[13]=n.withModifiers(Z=>b.handleSwitch(!0),["stop"]))},null,8,["class"])):n.createCommentVNode("",!0),n.createVNode(W,{class:"ivu-image-preview-arrow-close",type:"md-close",onClick:n.withModifiers(b.handleClose,["stop"])},null,8,["onClick"])],16)],4)):n.createCommentVNode("",!0)]),_:1})],8,["disabled"])}var rf=l(T0e,[["render",V0e]]);const F0e=h=>typeof HTMLElement=="object"&&h instanceof HTMLElement,$0e={name:"Image",mixins:[kn],components:{ImagePreview:rf},emits:["on-load","on-error","on-switch","on-close","on-click"],props:{src:{type:String,default:""},alt:{type:String,default:""},preview:{type:Boolean,default:!1},referrerPolicy:{type:String,default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:[String],default:""},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array},infinite:{type:Boolean,default:!0},initialIndex:{type:Number,default:0},previewTip:{type:Boolean,default:!0},toolbar:{type:Array,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||!h.$VIEWUI.image||h.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:h.$VIEWUI.image.toolbar}}},data(){return{loadingImage:!1,loading:!1,imageError:!1,scrollElement:null,observer:null,imagePreviewModal:!1}},watch:{src(){this.loadImage()}},computed:{innerClasses(){return["ivu-image-inner",{"ivu-image-cursor":this.preview}]},imgClasses(){return["ivu-image-img",{"ivu-image-img-hidden":this.loading||this.imageError}]},fitStyle(){const h=["fill","contain","cover","none","scale-down"],{fit:f}=this;return h.includes(f)?`object-fit:${f};`:""},imageStyles(){return{width:typeof this.width=="number"?`${this.width}px`:this.width,height:typeof this.height=="number"?`${this.height}px`:this.height}},loadingLang(){return this.t("i.select.loading")},failLang(){return this.t("i.image.fail")},previewLang(){return this.t("i.image.preview")},loadingType(){return this.lazy?"lazy":"eager"}},mounted(){s&&this.handleImageEvent()},methods:{handleLazy(){const h=this.$refs.image;(this.observer=new IntersectionObserver(this.handlerObserveImage,{root:this.scrollElement,rootMargin:"0px",threshold:0})).observe(h)},handlerObserveImage(h){for(let f of h)f.isIntersecting&&(this.offObserver(),this.loadImage())},addLazyImageListener(){const{scrollContainer:h}=this;this.scrollElement=null,F0e(h)?this.scrollElement=h:h&&typeof h=="string"&&(this.scrollElement=document.querySelector(h)),this.handleLazy()},handleImageLoad(){this.loading=!1,this.imageError=!1,this.$emit("on-load")},handleImageError(){this.loading=!1,this.imageError=!0,this.loadingImage=!1,this.$emit("on-error")},loadImage(){this.loading=!0,this.imageError=!1,this.loadingImage=!0},handleImageEvent(){const{lazy:h}=this;h?this.addLazyImageListener():this.loadImage()},offObserver(){const{observer:h}=this;h&&h.disconnect()},handlePreview(){const{preview:h,initialIndex:f}=this;h&&(this.imagePreviewModal=!0,this.$emit("on-click",{initialIndex:f}))},handleClose(){this.$emit("on-close")},handleSwitch(h){this.$emit("on-switch",h)}},beforeUnmount(){this.offObserver()}},U0e={key:0,class:"ivu-image-placeholder"},z0e={key:1,class:"ivu-image-error"},X0e=["alt","src","loading","referrerPolicy"],W0e={class:"ivu-image-mark"};function G0e(h,f,v,E,T,b){const N=n.resolveComponent("ImagePreview");return n.openBlock(),n.createElementBlock("div",{class:"ivu-image",ref:"image",style:n.normalizeStyle(b.imageStyles)},[T.loading?(n.openBlock(),n.createElementBlock("div",U0e,[n.renderSlot(h.$slots,"placeholder",{},()=>[n.createElementVNode("span",null,n.toDisplayString(b.loadingLang),1)])])):T.imageError?(n.openBlock(),n.createElementBlock("div",z0e,[n.renderSlot(h.$slots,"error",{},()=>[n.createElementVNode("span",null,n.toDisplayString(b.failLang),1)])])):n.createCommentVNode("",!0),T.loadingImage?(n.openBlock(),n.createElementBlock("div",{key:2,class:n.normalizeClass(b.innerClasses),onClick:f[2]||(f[2]=(...U)=>b.handlePreview&&b.handlePreview(...U))},[n.createElementVNode("img",{class:n.normalizeClass(b.imgClasses),style:n.normalizeStyle([b.fitStyle]),alt:v.alt,src:v.src,loading:b.loadingType,referrerPolicy:v.referrerPolicy,onLoad:f[0]||(f[0]=(...U)=>b.handleImageLoad&&b.handleImageLoad(...U)),onError:f[1]||(f[1]=(...U)=>b.handleImageError&&b.handleImageError(...U))},null,46,X0e),v.preview&&v.previewTip?n.renderSlot(h.$slots,"preview",{key:0},()=>[n.createElementVNode("div",W0e,[n.createElementVNode("span",null,n.toDisplayString(b.previewLang),1)])]):n.createCommentVNode("",!0)],2)):n.createCommentVNode("",!0),v.preview?(n.openBlock(),n.createBlock(N,{key:3,modelValue:T.imagePreviewModal,"onUpdate:modelValue":f[3]||(f[3]=U=>T.imagePreviewModal=U),"preview-list":v.previewList,"initial-index":v.initialIndex,infinite:v.infinite,"mask-closable":v.maskClosable,transfer:v.transfer,toolbar:v.toolbar,onOnClose:b.handleClose,onOnSwitch:b.handleSwitch},null,8,["modelValue","preview-list","initial-index","infinite","mask-closable","transfer","toolbar","onOnClose","onOnSwitch"])):n.createCommentVNode("",!0)],4)}var zU=l($0e,[["render",G0e]]);rf.newInstance=h=>{if(!s)return;const f=h||{};let v=null;const E=n.createApp({data(){return Object.assign({},f,{visible:!1,previewList:[],initialIndex:0,toolbar:["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"],infinite:!0,maskClosable:!0,transfer:!0})},render(){return n.h(rf,Object.assign({},f,{ref:"imagePreview",modelValue:this.visible,previewList:this.previewList,initialIndex:this.initialIndex,toolbar:this.toolbar,infinite:this.infinite,maskClosable:this.maskClosable,transfer:this.transfer,"onOn-close":this.close}))},methods:{close(){this.visible=!1,setTimeout(()=>{this.destroy(),this.onRemove()},300)},destroy(){E.unmount(),document.body.removeChild(T)},onRemove(){}},created(){v=n.getCurrentInstance()}}),T=document.createElement("div");document.body.appendChild(T),E.mount(T);const b=v.refs.imagePreview;return{show(N){Object.keys(N).forEach(U=>{b.$parent[U]=N[U]}),b.$parent.visible=!0},component:b}};let KS;function H0e(){return KS=KS||rf.newInstance(),KS}rf.show=function(h={}){const f=H0e();h.onRemove=function(){KS=null},f.show(h)};const co="ivu-input-number",JS="ivu-icon";function eC(h,f){let v,E,T;try{v=h.toString().split(".")[1].length}catch{v=0}try{E=f.toString().split(".")[1].length}catch{E=0}return T=Math.pow(10,Math.max(v,E)),(Math.round(h*T)+Math.round(f*T))/T}const Q0e={name:"InputNumber",mixins:[Ui],emits:["on-change","on-focus","on-blur","update:modelValue"],props:{max:{type:Number,default:1/0},min:{type:Number,default:-1/0},step:{type:Number,default:1},activeChange:{type:Boolean,default:!0},modelValue:{type:Number,default:1},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},name:{type:String},precision:{type:Number},elementId:{type:String},formatter:{type:Function},parser:{type:Function},placeholder:{type:String,default:""},controlsOutside:{type:Boolean,default:!1}},data(){return{focused:!1,upDisabled:!1,downDisabled:!1,currentValue:this.modelValue}},computed:{wrapClasses(){return[`${co}`,{[`${co}-${this.size}`]:!!this.size,[`${co}-disabled`]:this.itemDisabled,[`${co}-focused`]:this.focused,[`${co}-controls-outside`]:this.controlsOutside}]},handlerClasses(){return`${co}-handler-wrap`},upClasses(){return[`${co}-handler`,`${co}-handler-up`,{[`${co}-handler-up-disabled`]:this.upDisabled}]},innerUpClasses(){return`${co}-handler-up-inner ${JS} ${JS}-ios-arrow-up`},downClasses(){return[`${co}-handler`,`${co}-handler-down`,{[`${co}-handler-down-disabled`]:this.downDisabled}]},innerDownClasses(){return`${co}-handler-down-inner ${JS} ${JS}-ios-arrow-down`},inputWrapClasses(){return`${co}-input-wrap`},inputClasses(){return`${co}-input`},precisionValue(){return this.currentValue?this.precision?this.currentValue.toFixed(this.precision):this.currentValue:this.currentValue},formatterValue(){return this.formatter&&this.precisionValue!==null?this.formatter(this.precisionValue):this.precisionValue}},methods:{preventDefault(h){h.preventDefault()},up(h){const f=Number(h.target.value);if(this.upDisabled&&isNaN(f))return!1;this.changeStep("up",h)},down(h){const f=Number(h.target.value);if(this.downDisabled&&isNaN(f))return!1;this.changeStep("down",h)},changeStep(h,f){if(this.itemDisabled||this.readonly)return!1;const v=Number(f.target.value);let E=Number(this.currentValue);const T=Number(this.step);if(isNaN(E))return!1;if(!isNaN(v)){if(h==="up")if(eC(v,T)<=this.max)E=v;else return!1;else if(h==="down")if(eC(v,-T)>=this.min)E=v;else return!1}h==="up"?E=eC(E,T):h==="down"&&(E=eC(E,-T)),this.setValue(E)},setValue(h){h&&!isNaN(this.precision)&&(h=Number(Number(h).toFixed(this.precision)));const{min:f,max:v}=this;h!==null&&(h>v?h=v:h<f&&(h=f)),n.nextTick(()=>{this.currentValue=h,this.$emit("update:modelValue",h),this.$emit("on-change",h),this.handleFormItemChange("change",h)})},focus(h){this.focused=!0,this.$emit("on-focus",h)},blur(){this.focused=!1,this.$emit("on-blur"),L(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},keyDown(h){h.keyCode===38?(h.preventDefault(),this.up(h)):h.keyCode===40&&(h.preventDefault(),this.down(h))},change(h){if(h.type==="change"&&this.activeChange||h.type==="input"&&!this.activeChange)return;let f=h.target.value.trim();if(this.parser&&(f=this.parser(f)),f.length===0){this.setValue(null);return}h.type==="input"&&f.match(/^\-?\.?$|\.$/)||(f=Number(f),isNaN(f)?h.target.value=this.currentValue:(this.currentValue=f,this.setValue(f)))},changeVal(h){if(h=Number(h),isNaN(h))this.upDisabled=!0,this.downDisabled=!0;else{const f=this.step;this.upDisabled=h+f>this.max,this.downDisabled=h-f<this.min}}},mounted(){this.changeVal(this.currentValue)},watch:{modelValue(h){this.currentValue=h},currentValue(h){this.changeVal(h)},min(){this.changeVal(this.currentValue)},max(){this.changeVal(this.currentValue)}}},j0e=[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-remove"},null,-1)],Y0e=[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-add"},null,-1)],q0e=["id","disabled","autofocus","readonly","name","value","placeholder"];function Z0e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[v.controlsOutside?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.handlerClasses)},[n.createElementVNode("a",{onClick:f[1]||(f[1]=(...N)=>b.up&&b.up(...N)),class:n.normalizeClass(b.upClasses)},[n.createElementVNode("span",{class:n.normalizeClass(b.innerUpClasses),onClick:f[0]||(f[0]=(...N)=>b.preventDefault&&b.preventDefault(...N))},null,2)],2),n.createElementVNode("a",{onClick:f[3]||(f[3]=(...N)=>b.down&&b.down(...N)),class:n.normalizeClass(b.downClasses)},[n.createElementVNode("span",{class:n.normalizeClass(b.innerDownClasses),onClick:f[2]||(f[2]=(...N)=>b.preventDefault&&b.preventDefault(...N))},null,2)],2)],2)),v.controlsOutside?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-down",{"ivu-input-number-controls-outside-btn-disabled":T.downDisabled}]),onClick:f[4]||(f[4]=(...N)=>b.down&&b.down(...N))},j0e,2)):n.createCommentVNode("",!0),v.controlsOutside?(n.openBlock(),n.createElementBlock("div",{key:2,class:n.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-up",{"ivu-input-number-controls-outside-btn-disabled":T.upDisabled}]),onClick:f[5]||(f[5]=(...N)=>b.up&&b.up(...N))},Y0e,2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass(b.inputWrapClasses)},[n.createElementVNode("input",{id:v.elementId,class:n.normalizeClass(b.inputClasses),disabled:h.itemDisabled,autocomplete:"off",spellcheck:"false",autofocus:v.autofocus,onFocus:f[6]||(f[6]=(...N)=>b.focus&&b.focus(...N)),onBlur:f[7]||(f[7]=(...N)=>b.blur&&b.blur(...N)),onKeydown:f[8]||(f[8]=n.withModifiers((...N)=>b.keyDown&&b.keyDown(...N),["stop"])),onInput:f[9]||(f[9]=(...N)=>b.change&&b.change(...N)),onMouseup:f[10]||(f[10]=(...N)=>b.preventDefault&&b.preventDefault(...N)),onChange:f[11]||(f[11]=(...N)=>b.change&&b.change(...N)),readonly:v.readonly||!v.editable,name:v.name,value:b.formatterValue,placeholder:v.placeholder},null,42,q0e)],2)],2)}var o3=l(Q0e,[["render",Z0e]]);const XU="ivu-layout",K0e={name:"Layout",data(){return{hasSider:!1}},computed:{wrapClasses(){return[`${XU}`,{[`${XU}-has-sider`]:this.hasSider}]}},methods:{findSider(){return this.$slots.default().some(h=>h.type.name==="Sider")}},mounted(){this.hasSider=this.findSider()}};function J0e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[n.renderSlot(h.$slots,"default")],2)}var WU=l(K0e,[["render",J0e]]);const GU={tooltips:["复制","复制成功"],showTip:!1,successTip:"复制成功",errorTip:"复制失败"},HU={tooltip:"编辑",editing:!1,maxlength:"",autosize:!0,triggerType:"icon"},QU={rows:1,tooltip:!1,suffix:!1,expandable:!1,symbol:"展开"};var ux={emits:["update:modelValue"],mixins:[ve],props:{type:{validator(h){return S(h,["secondary","success","warning","danger",""])},default:""},copyable:{type:Boolean,default:!1},copyText:{type:String,default:""},copyConfig:{type:Object,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.typography.copyConfig===""?GU:h.$VIEWUI.typography.copyConfig}},editable:{type:Boolean,default:!1},editConfig:{type:Object,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.typography.editConfig===""?HU:h.$VIEWUI.typography.editConfig}},ellipsis:{type:Boolean,default:!1},ellipsisConfig:{type:Object,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.typography.ellipsisConfig===""?QU:h.$VIEWUI.typography.ellipsisConfig}},disabled:{type:Boolean,default:!1},code:{type:Boolean,default:!1},delete:{type:Boolean,default:!1},keyboard:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},strong:{type:Boolean,default:!1},underline:{type:Boolean,default:!1},italic:{type:Boolean,default:!1},modelValue:{type:String,default:""},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},theme:{validator(h){return S(h,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"}},computed:{isHrefPattern(){const{to:h}=this;return!!h},linkProps(){if(this.isHrefPattern){const{linkUrl:h,target:f}=this;return{href:h,target:f}}else return{}},mergedCopyConfig(){return Object.assign({},GU,this.copyConfig)},mergedEditConfig(){return Object.assign({},HU,this.editConfig)},mergedEllipsisConfig(){return Object.assign({},QU,this.ellipsisConfig)}},methods:{commonSlots(){const h={};return this.$slots.default&&(h.default=()=>this.$slots.default()),this.$slots.copyIcon&&(h.copyIcon=f=>this.$slots.copyIcon(f)),this.$slots.editIcon&&(h.editIcon=f=>this.$slots.editIcon(f)),this.$slots.enterIcon&&(h.enterIcon=f=>this.$slots.enterIcon(f)),h},commonEvents(){return{"onUpdate:modelValue":this.handleOnUpdateModelValue}},handleOnUpdateModelValue(h){this.$emit("update:modelValue",h)}}};const tC={name:"TypographyBase",mixins:[ux],emits:["on-copy-success","on-copy-error","on-edit-start","on-edit-end","on-edit-change","on-edit-cancel"],props:{component:{type:String,default:"div"},level:{type:Number,default:0}},data(){return{currentContent:this.modelValue,copied:!1,copyTimeout:null,editing:!1,editContent:"",lastKeyCode:"",isEditESC:!1,ellipsisText:"",ellipsisContent:"",isEllipsis:!1,ellipsisExpanded:!1,observer:null}},created(){this.editing=this.mergedEditConfig.editing||!1,this.editing&&(this.editContent=this.currentContent?this.currentContent:this.handleGetContent())},watch:{modelValue(h){this.currentContent=h},editing(h){h||n.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},isEllipsis(){n.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},ellipsis:{handler(h){h?n.nextTick(()=>{this.handleUpdateEllipsisStatus(),this.handleCreateObserver()}):this.handleRemoveObserver()},immediate:!0}},computed:{classes(){return["ivu-typography",{[`ivu-typography-${this.type}`]:this.type,"ivu-typography-disabled":this.disabled,"ivu-typography-ellipsis-line-clamp":this.ellipsis&&!this.ellipsisExpanded,"ivu-typography-ellipsis-single-line":this.ellipsis&&!this.ellipsisExpanded&&this.mergedEllipsisConfig.rows===1}]}},methods:{wrapperDecorations(){let h=this.currentContent?this.currentContent:this.$slots.default?this.$slots.default():"";function f(v,E){!v||(h=n.h(E,h))}return f(this.strong,"strong"),f(this.underline,"u"),f(this.delete,"del"),f(this.code,"code"),f(this.mark,"mark"),f(this.keyboard,"kbd"),f(this.italic,"i"),h},handleClickContent(h){if(!this.isHrefPattern&&this.component!=="a"){const f=this.mergedEditConfig.triggerType;this.editable&&(f==="text"||f==="both")&&this.handleEdit()}else{const f=h.ctrlKey||h.metaKey;this.handleCheckClick(h,f)}},handleGetContent(){const h=document.createElement("div");document.body.appendChild(h);let f=null,v=null,E="";const T=this.wrapperDecorations();return f=n.createApp({render(){return n.h("div",{ref:"text",style:{display:"none"}},T)},created(){v=n.getCurrentInstance()}}),f.mount(h),E=v.refs.text.innerText,f.unmount(),document.body.removeChild(h),E},handleCopy(){let h="";this.copyText?h=this.copyText:this.currentContent?h=this.currentContent:this.$slots.default&&(h=this.handleGetContent()),VS({text:this.copyText?this.copyText:h,showTip:this.mergedCopyConfig.showTip,successTip:this.mergedCopyConfig.successTip,errorTip:this.mergedCopyConfig.errorTip,success:()=>{this.$emit("on-copy-success"),this.copied=!0,this.copyTimeout&&clearTimeout(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.copied=!1},3e3)},error:()=>{this.$emit("on-copy-error")}})},handleEdit(){this.editContent=this.currentContent?this.currentContent:this.handleGetContent(),n.nextTick(()=>{this.editing=!0,this.$emit("on-edit-start"),n.nextTick(()=>{this.$refs.edit.focus({cursor:"end"})})})},handleEditBlur(){if(this.isEditESC){this.isEditESC=!1;return}this.handleEditSave(),this.$emit("on-edit-end",this.editContent)},handleEditChange(h){const f=h.target.value;this.editContent=f,this.$emit("on-edit-change",f)},handleEditSave(){this.$emit("update:modelValue",this.editContent),this.editing=!1},handleEditKeydown(h){const{keyCode:f}=h;f===ii.ENTER&&h.preventDefault(),this.lastKeyCode=f},handleEditKeyup(h){const{keyCode:f,ctrlKey:v,altKey:E,metaKey:T,shiftKey:b}=h;this.lastKeyCode===f&&!v&&!E&&!T&&!b&&(f===ii.ENTER?(this.handleEditSave(),this.$emit("on-edit-end",this.editContent)):f===ii.ESC&&(this.isEditESC=!0,this.$emit("on-edit-cancel"),this.editing=!1))},handleUpdateEllipsisStatus(){if(this.ellipsis&&!this.ellipsisExpanded){const h=this.$refs.typography;this.isEllipsis=h.scrollHeight>h.clientHeight}else this.isEllipsis=!1},handleCreateObserver(){this.ellipsis&&!this.ellipsisExpanded&&(this.observer=N0(),this.observer.listenTo(this.$refs.typography,this.handleUpdateEllipsisStatus))},handleRemoveObserver(){this.observer&&(this.observer.removeListener(this.$refs.typography,this.handleUpdateEllipsisStatus),this.observer=null)}},render(){let h=[];const f=this.wrapperDecorations();if(h.push(f),this.editable){const v=this.mergedEditConfig.triggerType;if(v==="icon"||v==="both"){const E=this.$slots.editIcon?this.$slots.editIcon():n.h(O,{type:"md-create"}),T=n.h("div",{class:"ivu-typography-edit",onClick:this.handleEdit},E);if(this.mergedEditConfig.tooltip){const b=n.h(Su,{content:this.mergedEditConfig.tooltip,placement:"top"},()=>T);h.push(b)}else h.push(T)}}if(this.copyable){const v=this.$slots.copyIcon?this.$slots.copyIcon({copied:this.copied}):n.h(O,{type:this.copied?"md-checkmark":"md-copy"}),E=n.h("div",{class:["ivu-typography-copy",{"ivu-typography-copy-success":this.copied}],onClick:this.handleCopy},v);if(this.mergedCopyConfig.tooltips instanceof Array&&this.mergedCopyConfig.tooltips.length===2){const T=n.h(Su,{content:this.copied?this.mergedCopyConfig.tooltips[1]:this.mergedCopyConfig.tooltips[0],placement:"top"},()=>E);h.push(T)}else h.push(E)}if(this.editing){const v=n.h(Pl,{ref:"edit",modelValue:this.editContent,type:"textarea",autosize:this.mergedEditConfig.autosize,maxlength:this.mergedEditConfig.maxlength,"onOn-blur":this.handleEditBlur,"onOn-keydown":this.handleEditKeydown,"onOn-keyup":this.handleEditKeyup,"onOn-change":this.handleEditChange}),E=this.$slots.enterIcon?this.$slots.enterIcon():n.h(O,{type:"md-return-left"}),T=n.h("span",{class:"ivu-typography-edit-content-confirm"},E);return n.h("div",{class:["ivu-typography","ivu-typography-edit-content",{[`ivu-typography-h${this.level}`]:this.level,"ivu-typography-div":!this.level}]},[v,T])}else{const v={};this.ellipsis&&!this.ellipsisExpanded&&(v["-webkit-line-clamp"]=this.mergedEllipsisConfig.rows);const T=n.h(this.component,{ref:"typography",class:this.classes,...this.linkProps,style:v,onClick:this.handleClickContent},[h,null]);return this.ellipsis&&!this.ellipsisExpanded&&this.isEllipsis&&this.mergedEllipsisConfig.tooltip?n.h(Su,{content:this.mergedEllipsisConfig.tooltip===!0?this.handleGetContent():this.mergedEllipsisConfig.tooltip,placement:this.placement,transfer:this.transfer,theme:this.theme,maxWidth:this.maxWidth},()=>T):T}},beforeUnmount(){this.handleRemoveObserver()}},jU={name:"Link",mixins:[ux],render(){return n.h(tC,{...this.$props,component:"a",...this.commonEvents()},this.commonSlots())}};function YU(){return je(),Ae}let qU=YU();Xa.newInstance=h=>{if(!s)return;const f=h||{};let v=null;const E=n.createApp({data(){return Object.assign({},f,{})},render(){let N="";return this.render?N=n.h(Xa,{fix:!0,fullscreen:!0,ref:"spin"},[this.render(n.h)]):N=n.h(Xa,{size:"large",fix:!0,fullscreen:!0,ref:"spin"}),n.h("div",{class:"ivu-spin-fullscreen ivu-spin-fullscreen-wrapper",style:{"z-index":2010+qU}},[N])},created(){v=n.getCurrentInstance()}}),T=document.createElement("div");document.body.appendChild(T),E.mount(T);const b=v.refs.spin;return{show(){n.nextTick(()=>{v.refs.spin.visible=!0,qU=YU()})},remove(N){b.visible=!1,setTimeout(function(){E.unmount(),document.body.removeChild(T),N()},500)},component:b}};let dx;function ZU(h=void 0){return dx=dx||Xa.newInstance({render:h}),dx}function eve(h){const f="render"in h?h.render:void 0;ZU(f).show(h)}Xa.show=function(h={}){return eve(h)},Xa.hide=function(){if(!dx)return!1;ZU().remove(()=>{dx=null})};const fx="ivu-list",tve={name:"List",provide(){return{ListInstance:this}},components:{Spin:Xa},props:{border:{type:Boolean,default:!1},itemLayout:{validator(h){return S(h,["horizontal","vertical"])},default:"horizontal"},header:{type:String,default:""},footer:{type:String,default:""},loading:{type:Boolean,default:!1},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},split:{type:Boolean,default:!0}},data(){return{}},computed:{classes(){return[`${fx}`,`${fx}-${this.size}`,`${fx}-${this.itemLayout}`,{[`${fx}-bordered`]:this.border,[`${fx}-split`]:this.split}]}},methods:{}},ive={key:0,class:"ivu-list-header"},nve={class:"ivu-list-container"},rve={class:"ivu-list-items"},sve={key:2,class:"ivu-list-footer"};function ove(h,f,v,E,T,b){const N=n.resolveComponent("Spin");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[v.header||h.$slots.header?(n.openBlock(),n.createElementBlock("div",ive,[n.renderSlot(h.$slots,"header",{},()=>[n.createTextVNode(n.toDisplayString(v.header),1)])])):n.createCommentVNode("",!0),n.createElementVNode("div",nve,[n.createElementVNode("ul",rve,[n.renderSlot(h.$slots,"default")])]),v.loading?(n.openBlock(),n.createBlock(N,{key:1,fix:"",size:"large"},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"spin")]),_:3})):n.createCommentVNode("",!0),v.footer||h.$slots.footer?(n.openBlock(),n.createElementBlock("div",sve,[n.renderSlot(h.$slots,"footer",{},()=>[n.createTextVNode(n.toDisplayString(v.footer),1)])])):n.createCommentVNode("",!0)],2)}var KU=l(tve,[["render",ove]]);const ave={name:"ListItem",inject:["ListInstance"],props:{},computed:{itemLayout(){return this.ListInstance.itemLayout},isItemContainsTextNode(){let h;return this.$slots.default().forEach(f=>{typeof f=="string"&&(h=!0)}),h},isFlexMode(){const h=this.$slots.extra;return this.itemLayout==="vertical"?!!h:!this.isItemContainsTextNode},classes(){return[{"ivu-list-item-no-flex":!this.isFlexMode}]}}},lve={class:"ivu-list-item-main"},hve={key:0,class:"ivu-list-item-action"},cve={class:"ivu-list-item-extra"},uve={key:0,class:"ivu-list-item-action"},dve={class:"ivu-list-item-extra"};function fve(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(["ivu-list-item",b.classes])},[b.itemLayout==="vertical"&&h.$slots.extra?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createElementVNode("div",lve,[n.renderSlot(h.$slots,"default"),h.$slots.action?(n.openBlock(),n.createElementBlock("ul",hve,[n.renderSlot(h.$slots,"action")])):n.createCommentVNode("",!0)]),n.createElementVNode("div",cve,[n.renderSlot(h.$slots,"extra")])],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.renderSlot(h.$slots,"default"),h.$slots.action?(n.openBlock(),n.createElementBlock("ul",uve,[n.renderSlot(h.$slots,"action")])):n.createCommentVNode("",!0),n.createElementVNode("div",dve,[n.renderSlot(h.$slots,"extra")])],64))],2)}var JU=l(ave,[["render",fve]]);const pve={name:"ListItemMeta",components:{Avatar:G_},props:{avatar:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""}}},mve={class:"ivu-list-item-meta"},gve={key:0,class:"ivu-list-item-meta-avatar"},vve={class:"ivu-list-item-meta-content"},yve={key:0,class:"ivu-list-item-meta-title"},_ve={key:1,class:"ivu-list-item-meta-description"};function xve(h,f,v,E,T,b){const N=n.resolveComponent("Avatar");return n.openBlock(),n.createElementBlock("div",mve,[v.avatar||h.$slots.avatar?(n.openBlock(),n.createElementBlock("div",gve,[n.renderSlot(h.$slots,"avatar",{},()=>[n.createVNode(N,{src:v.avatar},null,8,["src"])])])):n.createCommentVNode("",!0),n.createElementVNode("div",vve,[v.title||h.$slots.title?(n.openBlock(),n.createElementBlock("div",yve,[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])])):n.createCommentVNode("",!0),v.description||h.$slots.description?(n.openBlock(),n.createElementBlock("div",_ve,[n.renderSlot(h.$slots,"description",{},()=>[n.createTextVNode(n.toDisplayString(v.description),1)])])):n.createCommentVNode("",!0)])])}var e8=l(pve,[["render",xve]]);const iC="ivu-loading-bar",bve={name:"LoadingBar",props:{color:{type:String,default:"primary"},failedColor:{type:String,default:"error"},height:{type:Number,default:2}},data(){return{percent:0,status:"success",show:!1}},computed:{classes(){return`${iC}`},innerClasses(){return[`${iC}-inner`,{[`${iC}-inner-color-primary`]:this.color==="primary"&&this.status==="success",[`${iC}-inner-failed-color-error`]:this.failedColor==="error"&&this.status==="error"}]},outerStyles(){return{height:`${this.height}px`}},styles(){let h={width:`${this.percent}%`,height:`${this.height}px`};return this.color!=="primary"&&this.status==="success"&&(h.backgroundColor=this.color),this.failedColor!=="error"&&this.status==="error"&&(h.backgroundColor=this.failedColor),h}}};function wve(h,f,v,E,T,b){return n.openBlock(),n.createBlock(n.Transition,{name:"fade"},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.outerStyles)},[n.createElementVNode("div",{class:n.normalizeClass(b.innerClasses),style:n.normalizeStyle(b.styles)},null,6)],6),[[n.vShow,T.show]])]),_:1})}var a3=l(bve,[["render",wve]]);a3.newInstance=h=>{if(!s)return;const f=h||{};let v=null;const E=n.createApp({data(){return f},render(){return n.h(a3,Object.assign({ref:"loadingBar"},f))},created(){v=n.getCurrentInstance()}}),T=document.createElement("div");document.body.appendChild(T),E.mount(T);const b=v.refs.loadingBar;return{update(N){"percent"in N&&(b.percent=N.percent),N.status&&(b.status=N.status),"show"in N&&(b.show=N.show)},component:b,destroy(){E.unmount(),document.body.removeChild(T)}}};let nC,t8="primary",i8=800,n8="error",r8=2,px;function s8(){return nC=nC||a3.newInstance({color:t8,failedColor:n8,height:r8}),nC}function dm(h){s8().update(h)}function o8(){setTimeout(()=>{dm({show:!1}),setTimeout(()=>{dm({percent:0})},200)},i8)}function mx(){px&&(clearInterval(px),px=null)}var l3={start(){if(px)return;let h=0;dm({percent:h,status:"success",show:!0}),px=setInterval(()=>{h+=Math.floor(Math.random()*3+1),h>95&&mx(),dm({percent:h,status:"success",show:!0})},200)},update(h){mx(),dm({percent:h,status:"success",show:!0})},finish(){mx(),dm({percent:100,status:"success",show:!0}),o8()},error(){mx(),dm({percent:100,status:"error",show:!0}),o8()},config(h){h.color&&(t8=h.color),h.duration&&(i8=h.duration),h.failedColor&&(n8=h.failedColor),h.height&&(r8=h.height)},destroy(){mx();let h=s8();nC=null,h.destroy()}};const Ove={name:"Login",components:{Form:YS},emits:["on-submit"],provide(){return{LoginInstance:this}},props:{},data(){return{formValidate:{}}},methods:{handleSubmit(){this.$refs.form.validate(h=>{this.$emit("on-submit",h,JSON.parse(JSON.stringify(this.formValidate)))})},handleValidate(h,f){let v=!0;h.forEach(E=>{this.$refs.form.validateField(E,T=>{T&&(v=!1)})}),f(v)}}},Sve={class:"ivu-login"};function Cve(h,f,v,E,T,b){const N=n.resolveComponent("Form");return n.openBlock(),n.createElementBlock("div",Sve,[n.createVNode(N,{ref:"form",model:T.formValidate,onSubmit:f[0]||(f[0]=n.withModifiers(()=>{},["prevent"]))},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"default")]),_:3},8,["model"])])}var a8=l(Ove,[["render",Cve]]);const h3="ivu-menu",Tve={name:"Menu",emits:["on-select","on-open-change"],provide(){return{MenuInstance:this}},props:{mode:{validator(h){return S(h,["horizontal","vertical"])},default:"vertical"},theme:{validator(h){return S(h,["light","dark","primary"])},default:"light"},activeName:{type:[String,Number]},openNames:{type:Array,default(){return[]}},accordion:{type:Boolean,default:!1},width:{type:String,default:"240px"}},data(){return{currentActiveName:this.activeName,openedNames:[],submenuList:[],menuItemList:[],ready:!1}},computed:{classes(){let h=this.theme;return this.mode==="vertical"&&this.theme==="primary"&&(h="light"),[`${h3}`,`${h3}-${h}`,{[`${h3}-${this.mode}`]:this.mode}]},styles(){let h={};return this.mode==="vertical"&&(h.width=this.width),h}},methods:{updateActiveName(){this.currentActiveName===void 0&&(this.currentActiveName=-1),this.submenuList.map(h=>h.submenu).forEach(h=>{h.handleUpdateActiveName(!1)}),this.menuItemList.map(h=>h.menuitem).forEach(h=>{h.handleUpdateActiveName(this.currentActiveName)})},updateOpenKeys(h){const f=[...this.openedNames].indexOf(h),v=this.submenuList.map(T=>T.submenu);if(this.accordion&&v.forEach(T=>{T.opened=!1}),f>=0){let T=null;v.forEach(b=>{b.name===h&&(T=b,b.opened=!1)}),F(T,"Submenu").forEach(b=>{b.opened=!0}),T.childSubmenuList.map(b=>b.submenu).forEach(b=>{b.opened=!1})}else if(this.accordion){let T=null;v.forEach(b=>{b.name===h&&(T=b,b.opened=!0)}),F(T,"Submenu").forEach(b=>{b.opened=!0})}else this.submenuList.map(T=>T.submenu).forEach(T=>{T.name===h&&(T.opened=!0)});let E=v.filter(T=>T.opened).map(T=>T.name);this.openedNames=[...E],this.$emit("on-open-change",E)},updateOpened(){const h=(this.submenuList||[]).map(f=>f.submenu);h.length&&h.forEach(f=>{this.openedNames.indexOf(f.name)>-1?f.opened=!0:f.opened=!1})},handleEmitSelectEvent(h){this.$emit("on-select",h)},handleMenuItemSelect(h){this.currentActiveName=h,this.$emit("on-select",h)}},mounted(){this.openedNames=[...this.openNames],this.updateOpened(),n.nextTick(()=>{this.updateActiveName(),this.ready=!0})},watch:{openNames(h){this.openedNames=h},activeName(h){this.currentActiveName=h},currentActiveName(){this.updateActiveName()}}};function Ave(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("ul",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.styles)},[n.renderSlot(h.$slots,"default")],6)}var c3=l(Tve,[["render",Ave]]),u3={inject:{MenuInstance:{default:null},SubmenuInstance:{default:null}},data(){return{menu:this.MenuInstance}},computed:{hasParentSubmenu(){return!!this.SubmenuInstance},parentSubmenuNum(){return F(this,"Submenu").length},mode(){return this.MenuInstance.mode}}};const Eve="ivu-menu",Mve={name:"MenuGroup",mixins:[u3],props:{title:{type:String,default:""}},data(){return{prefixCls:Eve}},computed:{groupStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*28+"px"}:{}}}};function Pve(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass([T.prefixCls+"-item-group"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-item-group-title"]),style:n.normalizeStyle(b.groupStyle)},n.toDisplayString(v.title),7),n.createElementVNode("ul",null,[n.renderSlot(h.$slots,"default")])],2)}var l8=l(Mve,[["render",Pve]]);const rC="ivu-menu",kve={name:"MenuItem",mixins:[u3,ve],props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{active:!1,id:ie(6)}},computed:{classes(){return[`${rC}-item`,{[`${rC}-item-active`]:this.active,[`${rC}-item-selected`]:this.active,[`${rC}-item-disabled`]:this.disabled}]},itemStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}}},methods:{handleClickItem(h,f=!1){if(!this.disabled)if(f||this.target==="_blank"){this.handleCheckClick(h,f);let v=L(this,"Menu");v&&v.handleEmitSelectEvent(this.name)}else L(this,"Submenu")?this.SubmenuInstance.handleMenuItemSelect(this.name):this.MenuInstance.handleMenuItemSelect(this.name),this.handleCheckClick(h,f)},handleUpdateActiveName(h){this.name===h?(this.active=!0,this.SubmenuInstance&&this.SubmenuInstance.handleUpdateActiveName(h)):this.active=!1},addMenuItem(){const h=this.MenuInstance;h.menuItemList||(h.menuItemList=[]),h.menuItemList.push({id:this.id,menuitem:this})},removeMenuItem(){const h=this.MenuInstance;if(h.menuItemList&&h.menuItemList.length){const f=h.menuItemList.findIndex(v=>v.id===this.id);h.menuItemList.splice(f,1)}}},mounted(){this.addMenuItem()},beforeUnmount(){this.removeMenuItem()}},Ive=["href","target"];function Rve(h,f,v,E,T,b){return h.to?(n.openBlock(),n.createElementBlock("a",{key:0,href:h.linkUrl,target:h.target,class:n.normalizeClass(b.classes),onClick:[f[0]||(f[0]=n.withModifiers(N=>b.handleClickItem(N,!1),["exact"])),f[1]||(f[1]=n.withModifiers(N=>b.handleClickItem(N,!0),["ctrl"])),f[2]||(f[2]=n.withModifiers(N=>b.handleClickItem(N,!0),["meta"]))],style:n.normalizeStyle(b.itemStyle)},[n.renderSlot(h.$slots,"default")],14,Ive)):(n.openBlock(),n.createElementBlock("li",{key:1,class:n.normalizeClass(b.classes),onClick:f[3]||(f[3]=n.withModifiers((...N)=>b.handleClickItem&&b.handleClickItem(...N),["stop"])),style:n.normalizeStyle(b.itemStyle)},[n.renderSlot(h.$slots,"default")],6))}var h8=l(kve,[["render",Rve]]);const c8={name:"Mobile",mixins:[Z_],data(){return{className:"ivu-login-mobile",prefix:"ios-phone-portrait",placeholder:"请输入手机号码",type:"text"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:Bk.Mobile,trigger:"change"},{pattern:/^1\d{10}$/,message:"输入的手机号码格式不正确！",trigger:"change"}]}}}},sa="ivu-modal",u8={x:null,y:null,dragX:null,dragY:null,dragging:!1,rect:null},Bve={inheritAttrs:!1,name:"Modal",mixins:[kn,Jk],components:{Icon:O,iButton:Do},emits:["on-cancel","on-ok","on-hidden","on-visible-change","update:modelValue"],provide(){return{ModalInstance:this}},props:{modelValue:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.modal.maskClosable===""?!0:h.$VIEWUI.modal.maskClosable}},title:{type:String},width:{type:[Number,String],default:520},okText:{type:String},cancelText:{type:String},loading:{type:Boolean,default:!1},styles:{type:Object,default(){return{}}},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},transitionNames:{type:Array,default(){return["ease","fade"]}},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!0:h.$VIEWUI.transfer}},fullscreen:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyDistance:{type:Number,default:10},resetDragPosition:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},beforeClose:Function,render:Function},data(){return{prefixCls:sa,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.modelValue,dragData:V(u8),modalIndex:this.handleGetModalIndex(),isMouseTriggerIn:!1,id:ie(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${sa}-wrap`,{[`${sa}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${sa}-no-mask`]:!this.showMask}]},wrapStyles(){return{zIndex:this.modalIndex+this.zIndex}},maskClasses(){return`${sa}-mask`},classes(){return[`${sa}`,{[`${sa}-fullscreen`]:this.fullscreen,[`${sa}-fullscreen-no-header`]:this.fullscreen&&!this.showHead,[`${sa}-fullscreen-no-footer`]:this.fullscreen&&this.footerHide}]},contentClasses(){return[`${sa}-content`,{[`${sa}-content-no-mask`]:!this.showMask,[`${sa}-content-drag`]:this.draggable&&!this.fullscreen,[`${sa}-content-dragging`]:this.draggable&&this.dragData.dragging}]},mainStyles(){let h={};const f=parseInt(this.width),v=this.dragData.x!==null?{top:0}:{width:f<=100?`${f}%`:`${f}px`},E=this.styles?this.styles:{};return Object.assign(h,v,E),h},contentStyles(){let h={};if(this.draggable&&!this.fullscreen){const f=this.styles.top?parseFloat(this.styles.top):0,v=this.styles.left?parseFloat(this.styles.left):0;this.dragData.x!==null&&(h.left=`${this.dragData.x-v}px`),this.dragData.y!==null&&(h.top=`${this.dragData.y}px`),this.dragData.y!==null&&(h.top=`${this.dragData.y-f}px`);const E=parseInt(this.width),T={width:E<=100?`${E}%`:`${E}px`};Object.assign(h,T)}return h},localeOkText(){return this.okText===void 0?this.t("i.modal.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.modal.cancelText"):this.cancelText},showMask(){return this.mask}},methods:{close(){if(!this.beforeClose)return this.handleClose();const h=this.beforeClose();h&&h.then?h.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-cancel")},handleMask(){this.maskClosable&&this.showMask&&this.close()},handleWrapClick(h){if(this.isMouseTriggerIn){this.isMouseTriggerIn=!1;return}const f=h.target.getAttribute("class");f&&f.indexOf(`${sa}-wrap`)>-1&&this.handleMask()},handleMousedown(){this.isMouseTriggerIn=!0},cancel(){this.close()},ok(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("update:modelValue",!1)),this.$emit("on-ok")},EscClose(h){if(this.visible&&this.closable&&h.keyCode===27){const f=this.$root.modalList.map(v=>v.modal).filter(v=>v.$data.visible&&v.$props.closable).sort((v,E)=>v.$data.modalIndex<E.$data.modalIndex?1:-1)[0];setTimeout(()=>{f.close()},0)}},animationFinish(){this.$emit("on-hidden")},handleMoveStart(h){if(!this.draggable||this.fullscreen)return!1;const f=this.$refs.content.getBoundingClientRect();this.dragData.rect=f,this.dragData.x=f.x||f.left,this.dragData.y=f.y||f.top;const v={x:h.clientX,y:h.clientY};this.dragData.dragX=v.x,this.dragData.dragY=v.y,this.dragData.dragging=!0,o(window,"mousemove",this.handleMoveMove),o(window,"mouseup",this.handleMoveEnd)},handleMoveMove(h){if(!this.dragData.dragging||this.fullscreen)return!1;const f={x:h.clientX,y:h.clientY},v={x:f.x-this.dragData.dragX,y:f.y-this.dragData.dragY};if(s&&this.sticky){const E=document.documentElement.clientWidth,T=document.documentElement.clientHeight;this.dragData.x+v.x<=this.stickyDistance&&v.x<0?this.dragData.x=0:this.dragData.x+this.dragData.rect.width-E>-this.stickyDistance&&v.x>0?this.dragData.x=E-this.dragData.rect.width:this.dragData.x+=v.x,this.dragData.y+v.y<=this.stickyDistance&&v.y<0?this.dragData.y=0:this.dragData.y+this.dragData.rect.height-T>-this.stickyDistance&&v.y>0?this.dragData.y=T-this.dragData.rect.height:this.dragData.y+=v.y}else this.dragData.x+=v.x,this.dragData.y+=v.y;this.dragData.dragX=f.x,this.dragData.dragY=f.y},handleMoveEnd(){this.dragData.dragging=!1,a(window,"mousemove",this.handleMoveMove),a(window,"mouseup",this.handleMoveEnd)},handleGetModalIndex(){return je(),Ae},handleClickModal(){if(this.draggable){if(Pe!==this.lastVisibleIndex){this.lastVisibleIndex=Pe;return}this.modalIndex=this.handleGetModalIndex()}},addModal(){const h=this.$root;h.modalList||(h.modalList=[]),h.modalList.push({id:this.id,modal:this})},removeModal(){const h=this.$root;if(!h.modalList)return;const f=h.modalList.findIndex(v=>v.id===this.id);h.modalList.splice(f,1)}},watch:{modelValue(h){this.visible=h},visible(h){h===!1?(this.buttonLoading=!1,this.timer=setTimeout(()=>{this.wrapShow=!1,this.removeScrollEffect()},300)):(this.lastVisible!==h&&(this.modalIndex=this.handleGetModalIndex(),$e()),this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(f=>{f.table.handleOnVisibleChange(h)}),this.sliderList.forEach(f=>{f.slider.handleOnVisibleChange(h)}),this.$emit("on-visible-change",h),this.lastVisible=h,this.lastVisibleIndex=Pe,h&&this.resetDragPosition&&(this.dragData=V(u8))},loading(h){h||(this.buttonLoading=!1)},scrollable(h){h?this.removeScrollEffect():this.addScrollEffect()},title(h){this.$slots.header===void 0&&(this.showHead=!!h)}},mounted(){this.visible&&(this.wrapShow=!0);let h=!0;this.$slots.header===void 0&&!this.title&&(h=!1),this.showHead=h,this.addModal(),s&&document.addEventListener("keydown",this.EscClose)},beforeUnmount(){this.removeModal(),s&&document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()}};function Dve(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("i-button");return n.openBlock(),n.createBlock(n.Teleport,{to:"body",disabled:!v.transfer},[n.createVNode(n.Transition,{name:v.transitionNames[1]},{default:n.withCtx(()=>[b.showMask?n.withDirectives((n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.maskClasses),style:n.normalizeStyle(b.wrapStyles),onClick:f[0]||(f[0]=(...Y)=>b.handleMask&&b.handleMask(...Y))},null,6)),[[n.vShow,T.visible]]):n.createCommentVNode("",!0)]),_:1},8,["name"]),n.createElementVNode("div",{class:n.normalizeClass(b.wrapClasses),style:n.normalizeStyle(b.wrapStyles),onClick:f[5]||(f[5]=(...Y)=>b.handleWrapClick&&b.handleWrapClick(...Y))},[n.createVNode(n.Transition,{name:v.transitionNames[0],onAfterLeave:b.animationFinish},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",n.mergeProps(h.$attrs,{class:b.classes,style:b.mainStyles,onMousedown:f[4]||(f[4]=(...Y)=>b.handleMousedown&&b.handleMousedown(...Y))}),[n.createElementVNode("div",{class:n.normalizeClass(b.contentClasses),ref:"content",style:n.normalizeStyle(b.contentStyles),onClick:f[3]||(f[3]=(...Y)=>b.handleClickModal&&b.handleClickModal(...Y))},[v.closable?(n.openBlock(),n.createElementBlock("a",{key:0,class:n.normalizeClass([T.prefixCls+"-close"]),onClick:f[1]||(f[1]=(...Y)=>b.close&&b.close(...Y))},[n.renderSlot(h.$slots,"close",{},()=>[n.createVNode(N,{type:"ios-close"})])],2)):n.createCommentVNode("",!0),T.showHead?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass([T.prefixCls+"-header"]),onMousedown:f[2]||(f[2]=(...Y)=>b.handleMoveStart&&b.handleMoveStart(...Y))},[n.renderSlot(h.$slots,"header",{},()=>[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-header-inner"])},n.toDisplayString(v.title),3)])],34)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"])},[n.renderSlot(h.$slots,"default")],2),v.footerHide?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",{key:2,class:n.normalizeClass([T.prefixCls+"-footer"])},[n.renderSlot(h.$slots,"footer",{},()=>[n.createVNode(U,{type:"text",onClick:b.cancel},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(b.localeCancelText),1)]),_:1},8,["onClick"]),n.createVNode(U,{type:"primary",loading:T.buttonLoading,onClick:b.ok},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(b.localeOkText),1)]),_:1},8,["loading","onClick"])])],2))],6)],16),[[n.vShow,T.visible]])]),_:3},8,["name","onAfterLeave"])],6)],8,["disabled"])}var Il=l(Bve,[["render",Dve]]);const Eu="ivu-modal-confirm";Il.newInstance=h=>{if(!s)return;const f=h||{},v=document.createElement("div");document.body.appendChild(v);let E=null;const T=n.createApp({mixins:[kn],data(){return Object.assign({},f,{visible:!1,width:416,title:"",body:"",iconType:"",iconName:"",okText:void 0,cancelText:void 0,showCancel:!1,loading:!1,buttonLoading:!1,scrollable:!1,closable:!1,closing:!1})},render(){let N=[];this.showCancel&&N.push(n.h(Do,{type:"text",onClick:this.cancel},()=>this.localeCancelText)),N.push(n.h(Do,{type:"primary",loading:this.buttonLoading,onClick:this.ok},()=>this.localeOkText));let U;this.render?U=n.h("div",{class:`${Eu}-body ${Eu}-body-render`},[this.render(n.h)]):U=n.h("div",{class:`${Eu}-body`},[n.h("div",{innerHTML:this.body})]);let Y;return this.title&&(Y=n.h("div",{class:`${Eu}-head`},[n.h("div",{class:this.iconTypeCls},[n.h("i",{class:this.iconNameCls})]),n.h("div",{class:`${Eu}-head-title`,innerHTML:this.title})])),n.h(Il,Object.assign({},f,{width:this.width,scrollable:this.scrollable,closable:this.closable,ref:"modal"},{modelValue:this.visible,"onUpdate:modelValue":W=>this.visible=W,"onOn-cancel":this.cancel}),()=>n.h("div",{class:Eu},[Y,U,n.h("div",{class:`${Eu}-footer`},N)]))},computed:{iconTypeCls(){return[`${Eu}-head-icon`,`${Eu}-head-icon-${this.iconType}`]},iconNameCls(){return["ivu-icon",`ivu-icon-${this.iconName}`]},localeOkText(){return this.okText?this.okText:this.t("i.modal.okText")},localeCancelText(){return this.cancelText?this.cancelText:this.t("i.modal.cancelText")}},methods:{cancel(){this.closing||(this.$refs.modal.visible=!1,this.buttonLoading=!1,this.onCancel(),this.remove())},ok(){this.closing||(this.loading?this.buttonLoading=!0:(this.$refs.modal.visible=!1,this.remove()),this.onOk())},remove(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.destroy()},300)},destroy(){T.unmount(),document.body.removeChild(v),this.onRemove()},onOk(){},onCancel(){},onRemove(){}},created(){E=n.getCurrentInstance()}});T.mount(v);const b=E.refs.modal;return{show(N){switch(b.$parent.showCancel=N.showCancel,b.$parent.iconType=N.icon,N.icon){case"info":b.$parent.iconName="ios-information-circle";break;case"success":b.$parent.iconName="ios-checkmark-circle";break;case"warning":b.$parent.iconName="ios-alert";break;case"error":b.$parent.iconName="ios-close-circle";break;case"confirm":b.$parent.iconName="ios-help-circle";break}"width"in N&&(b.$parent.width=N.width),"closable"in N&&(b.$parent.closable=N.closable),"title"in N&&(b.$parent.title=N.title),"content"in N&&(b.$parent.body=N.content),"okText"in N&&(b.$parent.okText=N.okText),"cancelText"in N&&(b.$parent.cancelText=N.cancelText),"onCancel"in N&&(b.$parent.onCancel=N.onCancel),"onOk"in N&&(b.$parent.onOk=N.onOk),"loading"in N&&(b.$parent.loading=N.loading),"scrollable"in N&&(b.$parent.scrollable=N.scrollable),b.$parent.onRemove=N.onRemove,b.visible=!0},remove(){b.visible=!1,b.$parent.buttonLoading=!1,b.$parent.remove()},component:b}};let gx;function d8(h=void 0,f=!0){return gx=gx||Il.newInstance({closable:!1,maskClosable:!1,footerHide:!0,render:h,lockScroll:f}),gx}function vx(h){const f="render"in h?h.render:void 0,v="lockScroll"in h?h.lockScroll:!0;let E=d8(f,v);h.onRemove=function(){gx=null},E.show(h)}Il.info=function(h={}){return h.icon="info",h.showCancel=!1,vx(h)},Il.success=function(h={}){return h.icon="success",h.showCancel=!1,vx(h)},Il.warning=function(h={}){return h.icon="warning",h.showCancel=!1,vx(h)},Il.error=function(h={}){return h.icon="error",h.showCancel=!1,vx(h)},Il.confirm=function(h={}){return h.icon="confirm",h.showCancel=!0,vx(h)},Il.remove=function(){if(!gx)return!1;d8().remove()};const Wa="ivu-notice",f8="ivu-icon",Lve="ivu_notice_key_";let p8=24,m8=4.5,V0,g8=1;const Nve={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle"},v8="move-notice";function y8(){return V0=V0||LS.newInstance({prefixCls:Wa,styles:{top:`${p8}px`,right:0},transitionName:v8}),V0}function yx(h,f){const v=f.title||"",E=f.desc||"",T=f.name||`${Lve}${g8}`,b=f.onClose||function(){},N=f.render,U=f.duration===0?0:f.duration||m8;g8++;let Y=y8(),W,Z;const fe=f.render&&!v?"":E||f.render?` ${Wa}-with-desc`:"";if(h==="normal")Z=!1,W=`
            <div class="${Wa}-custom-content ${Wa}-with-normal ${fe}">
                <div class="${Wa}-title">${v}</div>
                <div class="${Wa}-desc">${E}</div>
            </div>
        `;else{const Te=Nve[h],Se=fe===""?"":"-outline";Z=!0,W=`
            <div class="${Wa}-custom-content ${Wa}-with-icon ${Wa}-with-${h} ${fe}">
                <span class="${Wa}-icon ${Wa}-icon-${h}">
                    <i class="${f8} ${f8}-${Te}${Se}"></i>
                </span>
                <div class="${Wa}-title">${v}</div>
                <div class="${Wa}-desc">${E}</div>
            </div>
        `}Y.notice({name:T.toString(),duration:U,styles:{},transitionName:v8,content:W,withIcon:Z,render:N,hasTitle:!!v,onClose:b,closable:!0,type:"notice"})}var d3={open(h){return yx("normal",h)},info(h){return yx("info",h)},success(h){return yx("success",h)},warning(h){return yx("warning",h)},error(h){return yx("error",h)},config(h){h.top&&(p8=h.top),(h.duration||h.duration===0)&&(m8=h.duration)},close(h){if(h)h=h.toString(),V0&&V0.remove(h);else return!1},destroy(){let h=y8();V0=null,h.destroy("ivu-notice")}};const Rs="ivu-tabs",f3=300,_8=(h,f,v,E)=>{const T=(h.findIndex(N=>N.name===f)+v+h.length)%h.length,b=h[T];return b.disabled?_8(h,b.name,v):b},x8=(h,f)=>{try{h.focus()}catch{}if(s&&document.activeElement==h&&h!==f)return!0;const v=h.children;for(let E of v)if(x8(E,f))return!0;return!1},Vve={name:"Tabs",mixins:[Sh],emits:["on-click","on-dblclick","on-contextmenu","on-tab-remove","on-drag-drop","update:modelValue"],components:{Icon:O,Render:R$,Dropdown:lm,DropdownMenu:hm},provide(){return{TabsInstance:this}},props:{modelValue:{type:[String,Number]},type:{validator(h){return S(h,["line","card"])},default:"line"},size:{validator(h){return S(h,["small","default"])},default:"default"},animated:{type:Boolean,default:!0},captureFocus:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},beforeRemove:Function,name:{type:String},draggable:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:Rs,navList:[],barWidth:0,barOffset:0,activeKey:this.modelValue,focusedKey:this.modelValue,showSlot:!1,navStyle:{transform:""},scrollable:!1,transitioning:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},paneList:[],tableList:[]}},computed:{classes(){return[`${Rs}`,{[`${Rs}-card`]:this.type==="card",[`${Rs}-mini`]:this.size==="small"&&this.type==="line",[`${Rs}-no-animation`]:!this.animated}]},contentClasses(){return[`${Rs}-content`,{[`${Rs}-content-animated`]:this.animated}]},barClasses(){return[`${Rs}-ink-bar`,{[`${Rs}-ink-bar-animated`]:this.animated}]},contentStyle(){const h=this.getTabIndex(this.activeKey),f=h===0?"0%":`-${h}00%`;let v={};return h>-1&&(v={transform:`translateX(${f}) translateZ(0px)`}),v},barStyle(){let h={visibility:"hidden",width:`${this.barWidth}px`};return this.type==="line"&&(h.visibility="visible"),this.animated?h.transform=`translate3d(${this.barOffset}px, 0px, 0px)`:h.left=`${this.barOffset}px`,h},arrowType(){const h=this.globalConfig;let f="ios-close";return h&&(h.tabs.customCloseIcon?f="":h.tabs.closeIcon&&(f=h.tabs.closeIcon)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.tabs.customCloseIcon&&(f=h.tabs.customCloseIcon),f},arrowSize(){const h=this.globalConfig;let f="";return h&&h.tabs.closeIconSize&&(f=h.tabs.closeIconSize),f}},methods:{getTabs(){const h=this.paneList.map(v=>v.pane),f=[];return h.forEach(v=>{v.tab&&this.name?v.tab===this.name&&f.push(v):f.push(v)}),f.sort((v,E)=>{if(v.index&&E.index)return v.index>E.index?1:-1}),f},updateNav(){this.navList=[],this.getTabs().forEach((h,f)=>{this.navList.push({labelType:typeof h.label,label:h.label,icon:h.icon||"",name:h.currentName||f,disabled:h.disabled,closable:h.closable,contextMenu:h.contextMenu}),h.currentName||(h.currentName=f),f===0&&(this.activeKey||(this.activeKey=h.currentName||f))}),this.updateStatus(),this.updateBar()},updateBar(){n.nextTick(()=>{const h=this.getTabIndex(this.activeKey);if(!this.$refs.nav)return;const f=this.$refs.nav.querySelectorAll(`.${Rs}-tab`),v=f[h];if(this.barWidth=v?parseFloat(v.offsetWidth):0,h>0){let E=0;const T=this.size==="small"?0:16;for(let b=0;b<h;b++)E+=parseFloat(f[b].offsetWidth)+T;this.barOffset=E}else this.barOffset=0;this.updateNavScroll()})},updateStatus(){this.getTabs().forEach(h=>h.show=h.currentName===this.activeKey||this.animated)},tabCls(h){return[`${Rs}-tab`,{[`${Rs}-tab-disabled`]:h.disabled,[`${Rs}-tab-active`]:h.name===this.activeKey,[`${Rs}-tab-focused`]:h.name===this.focusedKey}]},handleChange(h){if(this.transitioning)return;this.transitioning=!0,setTimeout(()=>this.transitioning=!1,f3);const f=this.navList[h];!f||f.disabled||(this.activeKey=f.name,this.$emit("update:modelValue",f.name),this.$emit("on-click",f.name))},handleDblclick(h){const f=this.navList[h];!f||f.disabled||this.$emit("on-dblclick",f.name)},handleContextmenu(h,f){this.contextMenuVisible&&this.handleClickContextMenuOutside(),n.nextTick(()=>{const v=this.navList[h];if(!v||v.disabled||!v.contextMenu)return;f.preventDefault();const E=this.$refs.tabsWrap.getBoundingClientRect(),T={left:`${f.clientX-E.left}px`,top:`${f.clientY-E.top}px`};this.contextMenuStyles=T,this.contextMenuVisible=!0,this.$emit("on-contextmenu",v,f,T)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handlePreventSelect(h,f){const v=this.navList[h];!v||v.disabled||!v.contextMenu||f.preventDefault()},handleTabKeyNavigation(h){if(h.keyCode!==37&&h.keyCode!==39)return;const f=h.keyCode===39?1:-1,v=_8(this.navList,this.focusedKey,f);this.focusedKey=v.name},handleTabKeyboardSelect(h=!1){if(h)return;const f=this.focusedKey||0,v=this.getTabIndex(f);this.handleChange(v)},handleRemove(h){if(!this.beforeRemove)return this.handleRemoveTab(h);const f=this.beforeRemove(h);f&&f.then?f.then(()=>{this.handleRemoveTab(h)}):this.handleRemoveTab(h)},handleRemoveTab(h){const f=this.getTabs(),v=f[h];if(v.currentName===this.activeKey){const E=this.getTabs();let T=-1;if(E.length){const b=f.filter((U,Y)=>!U.disabled&&Y<h),N=f.filter((U,Y)=>!U.disabled&&Y>h);N.length?T=N[0].currentName:b.length?T=b[b.length-1].currentName:T=E[0].currentName}this.activeKey=T,this.$emit("update:modelValue",T)}this.$emit("on-tab-remove",v.currentName),this.updateNav()},showClose(h){return this.type==="card"?h.closable!==null?h.closable:this.closable:!1},scrollPrev(){const h=this.$refs.navScroll.offsetWidth,f=this.getCurrentScrollOffset();if(!f)return;let v=f>h?f-h:0;this.setOffset(v)},scrollNext(){const h=this.$refs.nav.offsetWidth,f=this.$refs.navScroll.offsetWidth,v=this.getCurrentScrollOffset();if(h-v<=f)return;let E=h-v>f*2?v+f:h-f;this.setOffset(E)},getCurrentScrollOffset(){const{navStyle:h}=this;return h.transform?Number(h.transform.match(/translateX\(-(\d+(\.\d+)*)px\)/)[1]):0},getTabIndex(h){return this.navList.findIndex(f=>f.name===h)},setOffset(h){this.navStyle.transform=`translateX(-${h}px)`},scrollToActiveTab(){if(!this.scrollable)return;const h=this.$refs.nav,f=this.$el.querySelector(`.${Rs}-tab-active`);if(!f)return;const v=this.$refs.navScroll,E=f.getBoundingClientRect(),T=v.getBoundingClientRect(),b=h.getBoundingClientRect(),N=this.getCurrentScrollOffset();let U=N;b.right<T.right&&(U=h.offsetWidth-T.width),E.left<T.left?U=N-(T.left-E.left):E.right>T.right&&(U=N+E.right-T.right),N!==U&&this.setOffset(Math.max(U,0))},updateNavScroll(){const h=this.$refs.nav.offsetWidth,f=this.$refs.navScroll.offsetWidth,v=this.getCurrentScrollOffset();f<h?(this.scrollable=!0,h-v<f&&this.setOffset(h-f)):(this.scrollable=!1,v>0&&this.setOffset(0))},handleScroll(h){h.preventDefault(),h.stopPropagation();const f=h.type;let v=0;(f==="DOMMouseScroll"||f==="mousewheel")&&(v=h.wheelDelta?h.wheelDelta:-(h.detail||0)*40),v>0?this.scrollPrev():this.scrollNext()},handleResize(){this.updateNavScroll()},isInsideHiddenElement(){if(!s)return;let h=this.$el.parentNode;for(;h&&h!==document.body;){if(h.style&&h.style.display==="none")return h;h=h.parentNode}return!1},updateVisibility(h){[...this.$refs.panes.querySelectorAll(`.${Rs}-tabpane`)].forEach((f,v)=>{h===v?([...f.children].filter(E=>E.classList.contains(`${Rs}-tabpane`)).forEach(E=>E.style.visibility="visible"),this.captureFocus&&setTimeout(()=>x8(f,f),f3)):setTimeout(()=>{[...f.children].filter(E=>E.classList.contains(`${Rs}-tabpane`)).forEach(E=>E.style.visibility="hidden")},f3)})},handleDrag(h,f){const v=this.navList[h];v&&f.dataTransfer.setData("tab-name",v.name)},handleDrop(h,f){const v=this.navList[h];if(v){const E=f.dataTransfer.getData("tab-name");f.preventDefault();let T=this.navList.map(U=>U.name);const b=parseInt(T.findIndex(U=>U===E)),N=parseInt(T.findIndex(U=>U===v.name));T.splice(N,1,...T.splice(b,1,T[N])),this.$emit("on-drag-drop",E,v.name,b,N,T)}},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},watch:{modelValue(h){this.activeKey=h,this.focusedKey=h},activeKey(h){this.focusedKey=h,this.updateBar(),this.updateStatus(),this.tableList.forEach(v=>{v.table.handleOnVisibleChange(!0)}),n.nextTick(()=>{this.scrollToActiveTab()});const f=Math.max(this.getTabIndex(this.focusedKey),0);this.updateVisibility(f)}},mounted(){this.showSlot=this.$slots.extra!==void 0,this.observer=N0(),this.observer.listenTo(this.$refs.navWrap,this.handleResize);const h=this.isInsideHiddenElement();h&&(this.mutationObserver=new M(()=>{h.style.display!=="none"&&(this.updateBar(),this.mutationObserver.disconnect())}),this.mutationObserver.observe(h,{attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]})),this.handleTabKeyboardSelect(!0),this.updateVisibility(this.getTabIndex(this.activeKey))},beforeUnmount(){this.observer.removeListener(this.$refs.navWrap,this.handleResize),this.mutationObserver&&this.mutationObserver.disconnect()}},Fve=["onClick","onDblclick","onContextmenu","onSelectstart","draggable","onDragstart","onDrop"];function $ve(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Render"),Y=n.resolveComponent("DropdownMenu"),W=n.resolveComponent("Dropdown");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),ref:"tabsWrap"},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-bar"])},[T.showSlot?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-nav-right"])},[n.renderSlot(h.$slots,"extra")],2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-nav-container"]),tabindex:"0",ref:"navContainer",onKeydown:[f[5]||(f[5]=(...Z)=>b.handleTabKeyNavigation&&b.handleTabKeyNavigation(...Z)),f[6]||(f[6]=n.withKeys(n.withModifiers(Z=>b.handleTabKeyboardSelect(!1),["prevent"]),["space"]))]},[n.createElementVNode("div",{ref:"navWrap",class:n.normalizeClass([T.prefixCls+"-nav-wrap",T.scrollable?T.prefixCls+"-nav-scrollable":""])},[n.createElementVNode("span",{class:n.normalizeClass([T.prefixCls+"-nav-prev",T.scrollable?"":T.prefixCls+"-nav-scroll-disabled"]),onClick:f[0]||(f[0]=(...Z)=>b.scrollPrev&&b.scrollPrev(...Z))},[n.createVNode(N,{type:"ios-arrow-back"})],2),n.createElementVNode("span",{class:n.normalizeClass([T.prefixCls+"-nav-next",T.scrollable?"":T.prefixCls+"-nav-scroll-disabled"]),onClick:f[1]||(f[1]=(...Z)=>b.scrollNext&&b.scrollNext(...Z))},[n.createVNode(N,{type:"ios-arrow-forward"})],2),n.createElementVNode("div",{ref:"navScroll",class:n.normalizeClass([T.prefixCls+"-nav-scroll"]),"on:DOMMouseScroll":f[3]||(f[3]=(...Z)=>b.handleScroll&&b.handleScroll(...Z)),onMousewheel:f[4]||(f[4]=(...Z)=>b.handleScroll&&b.handleScroll(...Z))},[n.createElementVNode("div",{ref:"nav",class:n.normalizeClass([T.prefixCls+"-nav"]),style:n.normalizeStyle(T.navStyle)},[n.createElementVNode("div",{class:n.normalizeClass(b.barClasses),style:n.normalizeStyle(b.barStyle)},null,6),(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.navList,(Z,fe)=>(n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.tabCls(Z)),key:fe,onClick:Te=>b.handleChange(fe),onDblclick:Te=>b.handleDblclick(fe),onContextmenu:n.withModifiers(Te=>b.handleContextmenu(fe,Te),["stop"]),onSelectstart:n.withModifiers(Te=>b.handlePreventSelect(fe,Te),["stop"]),draggable:v.draggable,onDragstart:Te=>b.handleDrag(fe,Te),onDrop:Te=>b.handleDrop(fe,Te),onDragover:f[2]||(f[2]=n.withModifiers(()=>{},["prevent"]))},[Z.icon!==""?(n.openBlock(),n.createBlock(N,{key:0,type:Z.icon},null,8,["type"])):n.createCommentVNode("",!0),Z.labelType==="function"?(n.openBlock(),n.createBlock(U,{key:1,render:Z.label},null,8,["render"])):(n.openBlock(),n.createElementBlock(n.Fragment,{key:2},[n.createTextVNode(n.toDisplayString(Z.label),1)],64)),b.showClose(Z)?(n.openBlock(),n.createBlock(N,{key:3,class:n.normalizeClass([T.prefixCls+"-close"]),type:b.arrowType,custom:b.customArrowType,size:b.arrowSize,onClick:n.withModifiers(Te=>b.handleRemove(fe),["stop"])},null,8,["class","type","custom","size","onClick"])):n.createCommentVNode("",!0)],42,Fve))),128))],6)],34)],2)],34)],2),n.createElementVNode("div",{class:n.normalizeClass(b.contentClasses),style:n.normalizeStyle(b.contentStyle),ref:"panes"},[n.renderSlot(h.$slots,"default")],6),n.createElementVNode("div",{class:"ivu-tabs-context-menu",style:n.normalizeStyle(T.contextMenuStyles)},[n.createVNode(W,{trigger:"custom",visible:T.contextMenuVisible,transfer:"",onOnClick:b.handleClickDropdownItem,onOnClickoutside:b.handleClickContextMenuOutside},{list:n.withCtx(()=>[n.createVNode(Y,null,{default:n.withCtx(()=>[n.renderSlot(h.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var sC=l(Vve,[["render",$ve]]);const Uve={name:"Notification",components:{Dropdown:lm,DropdownMenu:hm,Badge:CS,Tabs:sC},emits:["on-visible-change","on-item-click","on-clear","on-load-more","on-tab-change"],provide(){return{NotificationInstance:this}},props:{count:{type:Number},autoCount:{type:Boolean,default:!1},countType:{validator(h){return S(h,["text","badge"])},default:"text"},icon:{type:String,default:"md-notifications-outline"},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},badgeProps:{type:Object,default(){return{}}},clearClose:{type:Boolean,default:!1},locale:{type:Object,default(){return{loadedAll:"加载完毕",loading:"加载中...",loadMore:"加载更多",clear:"清空"}}},tab:{type:String},wide:{type:Boolean,default:!1},transferClassName:{type:String}},data(){return{visible:!1,countAll:0,tabList:[]}},computed:{finalCount(){return this.autoCount?this.countAll:this.count},transferClasses(){let h="ivu-notifications-transfer";return this.transferClassName&&(h+=` ${this.transferClassName}`),h}},watch:{visible(h){this.$emit("on-visible-change",h)}},methods:{handleVisibleChange(h){this.visible=h},handleClickOutside(h){this.$refs.notice.contains(h.target)||(this.visible=!1)},handleToggleOpen(){this.visible=!this.visible},handleGetCountAll(){if(this.autoCount){const h=this.tabList.map(v=>v.tab);let f=0;h.forEach(v=>{v.count&&(f+=v.count)}),this.countAll=f}},handleItemClick(h,f){this.$emit("on-item-click",h,f)},handleClear(h){this.$emit("on-clear",h),this.clearClose&&this.handleClose()},handleLoadMore(h){this.$emit("on-load-more",h)},handleClose(){this.visible=!1},handleTabChange(h){const f=this.tabList.map(E=>E.tab);let v={};f.forEach(E=>{E.$refs.tab.currentName===h&&(v=E.handleGetTabBaseInfo())}),this.$emit("on-tab-change",v)}}},zve={class:"ivu-notifications",ref:"notice"},Xve={class:"ivu-notifications-tabs"},Wve={key:0,class:"ivu-notifications-extra"};function Gve(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Badge"),Y=n.resolveComponent("Tabs"),W=n.resolveComponent("DropdownMenu"),Z=n.resolveComponent("Dropdown");return n.openBlock(),n.createElementBlock("div",zve,[n.createVNode(Z,{trigger:"custom",visible:T.visible,transfer:v.transfer,placement:v.placement,"transfer-class-name":b.transferClasses,onOnVisibleChange:b.handleVisibleChange,onOnClickoutside:b.handleClickOutside},{list:n.withCtx(()=>[h.$slots.default?(n.openBlock(),n.createBlock(W,{key:0,onClick:f[1]||(f[1]=n.withModifiers(()=>{},["stop"]))},{default:n.withCtx(()=>[n.createElementVNode("div",{class:n.normalizeClass(["ivu-notifications-list",{"ivu-notifications-list-wide":v.wide}])},[n.createElementVNode("div",Xve,[n.createVNode(Y,{animated:!1,"model-value":v.tab,onOnClick:b.handleTabChange},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"default")]),_:3},8,["model-value","onOnClick"])])],2),h.$slots.extra?(n.openBlock(),n.createElementBlock("div",Wve,[n.renderSlot(h.$slots,"extra")])):n.createCommentVNode("",!0)]),_:3})):n.createCommentVNode("",!0)]),default:n.withCtx(()=>[n.createElementVNode("div",{class:"ivu-notifications-rel",onClick:f[0]||(f[0]=n.withModifiers((...fe)=>b.handleToggleOpen&&b.handleToggleOpen(...fe),["prevent","stop"]))},[n.createVNode(U,n.mergeProps({count:b.finalCount},v.badgeProps),{default:n.withCtx(()=>[n.renderSlot(h.$slots,"icon",{},()=>[n.createVNode(N,{type:v.icon,size:"24"},null,8,["type"])])]),_:3},16,["count"])])]),_:3},8,["visible","transfer","placement","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],512)}var b8=l(Uve,[["render",Gve]]);const Hve=(h,f)=>h<=f,_x=h=>h<10?"0"+h:h,w8=(h,f)=>{const v=new Date(h),E=v.getFullYear(),T=_x(v.getMonth()+1),b=_x(v.getDate()),N=_x(v.getHours()),U=_x(v.getMinutes()),Y=_x(v.getSeconds());let W="";return f==="year"?W=E+"-"+T+"-"+b+" "+N+":"+U+":"+Y:W=T+"-"+b+" "+N+":"+U,W},Qve=(h,f)=>{const v=new Date().getTime(),E=Hve(h,v);let T=v-h;E||(T=-T);let b="",N=E?f("i.time.before")||"前":f("i.time.after")||"后";return T<1e3?b=f("i.time.just")||"刚刚":T<6e4?b=parseInt(T/1e3)+(f("i.time.seconds")||"秒")+N:T>=6e4&&T<36e5?b=Math.floor(T/6e4)+(f("i.time.minutes")||"分钟")+N:T>=36e5&&T<864e5?b=Math.floor(T/36e5)+(f("i.time.hours")||"小时")+N:T>=864e5&&T<262386e4?b=Math.floor(T/864e5)+(f("i.time.days")||"天")+N:T>=262386e4&&T<=3156786e4&&E?b=w8(h):b=w8(h,"year"),b};function jve(h,f){return Qve(h,f)}const O8="ivu-time",Yve={name:"Time",mixins:[kn],props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(h){return S(h,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},computed:{classes(){return[`${O8}`,{[`${O8}-with-hash`]:this.hash}]}},watch:{time(){this.setTime()}},methods:{handleClick(){s&&this.hash!==""&&(window.location.hash=this.hash)},setTime(){const h=typeof this.time;let f;if(h==="number"){const v=this.time.toString().length>10?this.time:this.time*1e3;f=new Date(v).getTime()}else h==="object"?f=this.time.getTime():h==="string"&&(f=Fa(this.time).valueOf());if(this.type==="relative")this.date=jve(f,this.t);else{const v=new Date(this.time),E=v.getFullYear(),T=v.getMonth()+1<10?"0"+(v.getMonth()+1):v.getMonth()+1,b=v.getDate()<10?"0"+v.getDate():v.getDate(),N=v.getHours()<10?"0"+v.getHours():v.getHours(),U=v.getMinutes()<10?"0"+v.getMinutes():v.getMinutes(),Y=v.getSeconds()<10?"0"+v.getSeconds():v.getSeconds();this.type==="datetime"?this.date=`${E}-${T}-${b} ${N}:${U}:${Y}`:this.type==="date"&&(this.date=`${E}-${T}-${b}`)}}},mounted(){this.setTime(),this.interval!==0&&(this.timer=setInterval(()=>{this.setTime()},1e3*this.interval))},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function qve(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("span",{class:n.normalizeClass(b.classes),onClick:f[0]||(f[0]=(...N)=>b.handleClick&&b.handleClick(...N))},n.toDisplayString(T.date),3)}var oC=l(Yve,[["render",qve]]);const Zve={name:"NotificationItem",inject:["NotificationTabInstance","NotificationInstance"],components:{Row:qd,Col:yc,Avatar:G_,Tag:k0,Time:oC},emits:["on-item-click"],props:{rowProps:{type:Object,default(){return{type:"flex",justify:"center",align:"middle"}}},read:{type:[Boolean,Number],default:!1},icon:{type:String},customIcon:{type:String},iconColor:{type:String},iconSize:{validator(h){return S(h,["small","default","large"])},default:"default"},avatar:{type:String},avatarShape:{validator(h){return S(h,["circle","square"])},default:"circle"},title:{type:String},content:{type:String},time:{type:[Number,Date,String]},timeProps:{type:Object,default(){return{}}},tag:{type:String},tagProps:{type:Object,default(){return{}}},clickClose:{type:Boolean,default:!1}},data(){return{id:ie(6)}},computed:{classes(){return{"ivu-notifications-item-unread":this.read===!1||this.read===0}},contentSpan(){return this.icon||this.customIcon||this.avatar||this.$slots.avatar?20:24},iconStyle(){let h={};return this.iconColor&&(h={"background-color":this.iconColor}),h}},methods:{handleClick(){this.$emit("on-item-click",this.$attrs),this.NotificationTabInstance.handleItemClick(this.$attrs),this.clickClose&&this.NotificationInstance.handleClose()},addItem(){this.NotificationTabInstance.itemList.push({id:this.id,item:this})},removeItem(){const h=this.NotificationTabInstance,f=h.itemList.findIndex(v=>v.id===this.id);h.itemList.splice(f,1)}},mounted(){this.addItem(),this.NotificationTabInstance.handleGetItems()},unmounted(){this.NotificationTabInstance.handleGetItems()},beforeUnmount(){this.removeItem()}},Kve={class:"ivu-notifications-item-title"},Jve={key:0},eye={key:0,class:"ivu-notifications-item-tag"},tye={key:0,class:"ivu-notifications-item-desc"},iye={key:1,class:"ivu-notifications-item-time"};function nye(h,f,v,E,T,b){const N=n.resolveComponent("Avatar"),U=n.resolveComponent("Col"),Y=n.resolveComponent("Tag"),W=n.resolveComponent("Time"),Z=n.resolveComponent("Row");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-notifications-item",b.classes]),onClick:f[0]||(f[0]=(...fe)=>b.handleClick&&b.handleClick(...fe))},[n.renderSlot(h.$slots,"default",{},()=>[n.createVNode(Z,n.normalizeProps(n.guardReactiveProps(v.rowProps)),{default:n.withCtx(()=>[v.icon||v.customIcon||v.avatar||h.$slots.avatar?(n.openBlock(),n.createBlock(U,{key:0,span:"4",class:"ivu-notifications-item-icon"},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"avatar",{},()=>[v.icon?(n.openBlock(),n.createBlock(N,{key:0,icon:v.icon,shape:v.avatarShape,size:v.iconSize,style:n.normalizeStyle(b.iconStyle)},null,8,["icon","shape","size","style"])):v.customIcon?(n.openBlock(),n.createBlock(N,{key:1,"custom-icon":v.customIcon,shape:v.avatarShape,size:v.iconSize,style:n.normalizeStyle(b.iconStyle)},null,8,["custom-icon","shape","size","style"])):v.avatar?(n.openBlock(),n.createBlock(N,{key:2,src:v.avatar,shape:v.avatarShape,size:v.iconSize,style:n.normalizeStyle(b.iconStyle)},null,8,["src","shape","size","style"])):n.createCommentVNode("",!0)])]),_:3})):n.createCommentVNode("",!0),n.createVNode(U,{span:b.contentSpan,class:"ivu-notifications-item-content"},{default:n.withCtx(()=>[n.createElementVNode("div",Kve,[v.title||h.$slots.title?(n.openBlock(),n.createElementBlock("h4",Jve,[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)]),v.tag?(n.openBlock(),n.createElementBlock("div",eye,[n.createVNode(Y,n.normalizeProps(n.guardReactiveProps(v.tagProps)),{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(v.tag),1)]),_:1},16)])):n.createCommentVNode("",!0)])):n.createCommentVNode("",!0)]),v.content||h.$slots.content?(n.openBlock(),n.createElementBlock("div",tye,[n.renderSlot(h.$slots,"content",{},()=>[n.createTextVNode(n.toDisplayString(v.content),1)])])):n.createCommentVNode("",!0),v.time||h.$slots.time?(n.openBlock(),n.createElementBlock("div",iye,[n.renderSlot(h.$slots,"time",{},()=>[n.createVNode(W,n.mergeProps({time:v.time},v.timeProps),null,16,["time"])])])):n.createCommentVNode("",!0)]),_:3},8,["span"])]),_:3},16)])],2)}var S8=l(Zve,[["render",nye]]);const rye="ivu-tabs-tabpane",sye={name:"TabPane",inject:["TabsInstance"],props:{name:{type:String},label:{type:[String,Function],default:""},icon:{type:String},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:null},tab:{type:String},index:{type:Number},contextMenu:{type:Boolean,default:!1}},data(){return{prefixCls:rye,show:!0,currentName:this.name,id:ie(6)}},computed:{contentStyle(){return{visibility:this.TabsInstance.activeKey!==this.currentName?"hidden":"visible"}}},methods:{updateNav(){this.TabsInstance.updateNav()},addPane(){const h=this.TabsInstance;h.paneList||(h.paneList=[]),h.paneList.push({id:this.id,pane:this})},removePane(){const h=this.TabsInstance;if(h.paneList&&h.paneList.length){const f=h.paneList.findIndex(v=>v.id===this.id);h.paneList.splice(f,1)}}},watch:{name(h){this.currentName=h,this.updateNav()},label(h){typeof h!="function"&&this.updateNav()},icon(){this.updateNav()},disabled(){this.updateNav()}},mounted(){this.addPane(),this.updateNav()},beforeUnmount(){this.removePane(),this.updateNav()}};function oye(h,f,v,E,T,b){return n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(T.prefixCls),style:n.normalizeStyle(b.contentStyle)},[n.renderSlot(h.$slots,"default")],6)),[[n.vShow,T.show]])}var aC=l(sye,[["render",oye]]);const aye={name:"NotificationTab",inject:["NotificationInstance"],components:{TabPane:aC,Icon:O},provide(){return{NotificationTabInstance:this}},props:{count:{type:Number},title:{type:String,required:!0},name:{type:String},emptyText:{type:String,default:"目前没有通知"},emptyImage:{type:String,default:"https://file.iviewui.com/iview-pro/icon-no-message.svg"},loadedAll:{type:Boolean,default:!0},showLoadedAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},scrollToLoad:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearIcon:{type:Boolean,default:!0}},data(){return{customLabel:h=>h("div",[h("span",this.title),h(CS,{count:this.count})]),itemCount:0,itemList:[],id:ie(6)}},computed:{currentTitle(){const h=this.NotificationInstance.countType;if(h==="text"){const f=this.count?`(${this.count})`:"";return`${this.title} ${f}`}else if(h==="badge")return this.customLabel}},watch:{count:{handler(){this.NotificationInstance.handleGetCountAll()},immediate:!0}},methods:{handleGetTabBaseInfo(){return{name:this.name,title:this.title}},handleGetItems(){const h=this.itemList.map(f=>f.item);this.itemCount=h.length},handleItemClick(h){this.NotificationInstance.handleItemClick(this.handleGetTabBaseInfo(),h)},handleClear(){this.NotificationInstance.handleClear(this.handleGetTabBaseInfo())},handleLoadMore(){this.NotificationInstance.handleLoadMore(this.handleGetTabBaseInfo())},handleScroll(){if(!this.scrollToLoad)return;const h=this.$refs.scroll,f=h.scrollHeight-h.clientHeight-h.scrollTop;!this.loading&&f===0&&this.handleLoadMore()},addTab(){this.NotificationInstance.tabList.push({id:this.id,tab:this})},removeTab(){const h=this.NotificationInstance,f=h.tabList.findIndex(v=>v.id===this.id);h.tabList.splice(f,1)}},mounted(){this.addTab()},beforeUnmount(){this.removeTab()}},lye={class:"ivu-notifications-container-list"},hye={key:0,class:"ivu-notifications-tab-empty"},cye=["src"],uye={class:"ivu-notifications-tab-empty-text"},dye={class:"ivu-notifications-tab-loading"},fye={key:0,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-show"},pye={key:2,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-all"};function mye(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("TabPane");return n.openBlock(),n.createBlock(U,{label:b.currentTitle,name:v.name,ref:"tab",class:"ivu-notifications-tab"},{default:n.withCtx(()=>[n.createElementVNode("div",{class:"ivu-notifications-container",onScroll:f[1]||(f[1]=(...Y)=>b.handleScroll&&b.handleScroll(...Y)),ref:"scroll"},[n.renderSlot(h.$slots,"top"),n.createElementVNode("div",lye,[n.renderSlot(h.$slots,"default")]),!v.loading&&T.itemCount===0?(n.openBlock(),n.createElementBlock("div",hye,[n.renderSlot(h.$slots,"empty",{},()=>[v.emptyImage?(n.openBlock(),n.createElementBlock("img",{key:0,class:"ivu-notifications-tab-empty-img",src:v.emptyImage},null,8,cye)):n.createCommentVNode("",!0),n.createElementVNode("div",uye,n.toDisplayString(v.emptyText),1)])])):n.createCommentVNode("",!0),n.createElementVNode("div",dye,[v.loading?(n.openBlock(),n.createElementBlock("div",fye,[n.renderSlot(h.$slots,"loading",{},()=>[n.createVNode(N,{type:"ios-loading",class:"ivu-load-loop"}),n.createTextVNode(" "+n.toDisplayString(b.NotificationInstance.locale.loading),1)])])):v.loadedAll?v.showLoadedAll&&v.loadedAll?(n.openBlock(),n.createElementBlock("div",pye,[n.renderSlot(h.$slots,"loaded-all",{},()=>[n.createTextVNode(n.toDisplayString(b.NotificationInstance.locale.loadedAll),1)])])):n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",{key:1,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-more",onClick:f[0]||(f[0]=(...Y)=>b.handleLoadMore&&b.handleLoadMore(...Y))},[n.renderSlot(h.$slots,"load-more",{},()=>[n.createTextVNode(n.toDisplayString(b.NotificationInstance.locale.loadMore),1)])]))])],544),v.showClear&&T.itemCount!==0?(n.openBlock(),n.createElementBlock("div",{key:0,class:"ivu-notifications-tab-clear",onClick:f[2]||(f[2]=(...Y)=>b.handleClear&&b.handleClear(...Y))},[n.renderSlot(h.$slots,"clear",{},()=>[v.showClearIcon?(n.openBlock(),n.createBlock(N,{key:0,type:"md-done-all"})):n.createCommentVNode("",!0),n.createElementVNode("span",null,n.toDisplayString(b.NotificationInstance.locale.clear)+n.toDisplayString(v.title),1)])])):n.createCommentVNode("",!0)]),_:3},8,["label","name"])}var C8=l(aye,[["render",mye]]);const gye={name:"Trend",components:{Icon:O},props:{flag:{validator(h){return S(h,["up","down"])}},colorful:{type:Boolean,default:!0},reverseColor:{type:Boolean,default:!1},textColor:{type:Boolean,default:!1},showTitle:{type:[Boolean,String],default:!1}},computed:{classes(){return[{"ivu-trend-up":this.flag==="up","ivu-trend-down":this.flag==="down","ivu-trend-reverse-color":this.reverseColor,"ivu-trend-colorful":this.colorful,"ivu-trend-text-color":this.textColor}]},flagType(){return this.flag==="up"?"md-arrow-dropup":this.flag==="down"?"md-arrow-dropdown":""}}},vye={class:"ivu-trend-text"};function yye(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-trend",b.classes])},[n.createElementVNode("span",vye,[n.renderSlot(h.$slots,"default")]),n.createVNode(N,{type:b.flagType,class:"ivu-trend-flag"},null,8,["type"])],2)}var p3=l(gye,[["render",yye]]);const _ye={name:"NumberInfo",components:{Trend:p3},props:{title:{type:String},subTitle:{type:String},total:{type:[String,Number]},subTotal:{type:[String,Number]},status:{validator(h){return S(h,["up","down"])}},gap:{type:[String,Number],default:8}},computed:{valueStyle(){return{"margin-top":this.gap+"px"}}}},xye={class:"ivu-number-info"},bye={key:0,class:"ivu-number-info-title"},wye={key:1,class:"ivu-number-info-subTitle"},Oye={class:"ivu-number-info-total"},Sye={key:0,class:"ivu-number-info-subTotal"};function Cye(h,f,v,E,T,b){const N=n.resolveComponent("Trend");return n.openBlock(),n.createElementBlock("div",xye,[v.title||h.$slots.title?(n.openBlock(),n.createElementBlock("div",bye,[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])])):n.createCommentVNode("",!0),v.subTitle||h.$slots.subTitle?(n.openBlock(),n.createElementBlock("div",wye,[n.renderSlot(h.$slots,"subTitle",{},()=>[n.createTextVNode(n.toDisplayString(v.subTitle),1)])])):n.createCommentVNode("",!0),n.createElementVNode("div",{class:"ivu-number-info-value",style:n.normalizeStyle(b.valueStyle)},[n.createElementVNode("span",Oye,[n.renderSlot(h.$slots,"total",{},()=>[n.createTextVNode(n.toDisplayString(v.total),1)])]),v.subTotal||h.$slots.subTotal?(n.openBlock(),n.createElementBlock("span",Sye,[n.renderSlot(h.$slots,"subTotal",{},()=>[n.createVNode(N,{flag:v.status},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(v.subTotal),1)]),_:1},8,["flag"])])])):n.createCommentVNode("",!0)],4)])}var T8=l(_ye,[["render",Cye]]),A8={exports:{}};/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(h){(function(f,v){h.exports?h.exports=v():f.numeral=v()})(te,function(){var f,v,E="2.0.6",T={},b={},N={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},U={currentLocale:N.currentLocale,zeroFormat:N.zeroFormat,nullFormat:N.nullFormat,defaultFormat:N.defaultFormat,scalePercentBy100:N.scalePercentBy100};function Y(W,Z){this._input=W,this._value=Z}return f=function(W){var Z,fe,Te,Se;if(f.isNumeral(W))Z=W.value();else if(W===0||typeof W>"u")Z=0;else if(W===null||v.isNaN(W))Z=null;else if(typeof W=="string")if(U.zeroFormat&&W===U.zeroFormat)Z=0;else if(U.nullFormat&&W===U.nullFormat||!W.replace(/[^0-9]+/g,"").length)Z=null;else{for(fe in T)if(Se=typeof T[fe].regexps.unformat=="function"?T[fe].regexps.unformat():T[fe].regexps.unformat,Se&&W.match(Se)){Te=T[fe].unformat;break}Te=Te||f._.stringToNumber,Z=Te(W)}else Z=Number(W)||null;return new Y(W,Z)},f.version=E,f.isNumeral=function(W){return W instanceof Y},f._=v={numberToFormat:function(W,Z,fe){var Te=b[f.options.currentLocale],Se=!1,we=!1,ce=0,Be="",Zt=1e12,Ct=1e9,Rt=1e6,qe=1e3,Le="",rt=!1,et,ri,si,Xt,Lt,Ht,ui;if(W=W||0,ri=Math.abs(W),f._.includes(Z,"(")?(Se=!0,Z=Z.replace(/[\(|\)]/g,"")):(f._.includes(Z,"+")||f._.includes(Z,"-"))&&(Lt=f._.includes(Z,"+")?Z.indexOf("+"):W<0?Z.indexOf("-"):-1,Z=Z.replace(/[\+|\-]/g,"")),f._.includes(Z,"a")&&(et=Z.match(/a(k|m|b|t)?/),et=et?et[1]:!1,f._.includes(Z," a")&&(Be=" "),Z=Z.replace(new RegExp(Be+"a[kmbt]?"),""),ri>=Zt&&!et||et==="t"?(Be+=Te.abbreviations.trillion,W=W/Zt):ri<Zt&&ri>=Ct&&!et||et==="b"?(Be+=Te.abbreviations.billion,W=W/Ct):ri<Ct&&ri>=Rt&&!et||et==="m"?(Be+=Te.abbreviations.million,W=W/Rt):(ri<Rt&&ri>=qe&&!et||et==="k")&&(Be+=Te.abbreviations.thousand,W=W/qe)),f._.includes(Z,"[.]")&&(we=!0,Z=Z.replace("[.]",".")),si=W.toString().split(".")[0],Xt=Z.split(".")[1],Ht=Z.indexOf(","),ce=(Z.split(".")[0].split(",")[0].match(/0/g)||[]).length,Xt?(f._.includes(Xt,"[")?(Xt=Xt.replace("]",""),Xt=Xt.split("["),Le=f._.toFixed(W,Xt[0].length+Xt[1].length,fe,Xt[1].length)):Le=f._.toFixed(W,Xt.length,fe),si=Le.split(".")[0],f._.includes(Le,".")?Le=Te.delimiters.decimal+Le.split(".")[1]:Le="",we&&Number(Le.slice(1))===0&&(Le="")):si=f._.toFixed(W,0,fe),Be&&!et&&Number(si)>=1e3&&Be!==Te.abbreviations.trillion)switch(si=String(Number(si)/1e3),Be){case Te.abbreviations.thousand:Be=Te.abbreviations.million;break;case Te.abbreviations.million:Be=Te.abbreviations.billion;break;case Te.abbreviations.billion:Be=Te.abbreviations.trillion;break}if(f._.includes(si,"-")&&(si=si.slice(1),rt=!0),si.length<ce)for(var Wt=ce-si.length;Wt>0;Wt--)si="0"+si;return Ht>-1&&(si=si.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+Te.delimiters.thousands)),Z.indexOf(".")===0&&(si=""),ui=si+Le+(Be||""),Se?ui=(Se&&rt?"(":"")+ui+(Se&&rt?")":""):Lt>=0?ui=Lt===0?(rt?"-":"+")+ui:ui+(rt?"-":"+"):rt&&(ui="-"+ui),ui},stringToNumber:function(W){var Z=b[U.currentLocale],fe=W,Te={thousand:3,million:6,billion:9,trillion:12},Se,we,ce;if(U.zeroFormat&&W===U.zeroFormat)we=0;else if(U.nullFormat&&W===U.nullFormat||!W.replace(/[^0-9]+/g,"").length)we=null;else{we=1,Z.delimiters.decimal!=="."&&(W=W.replace(/\./g,"").replace(Z.delimiters.decimal,"."));for(Se in Te)if(ce=new RegExp("[^a-zA-Z]"+Z.abbreviations[Se]+"(?:\\)|(\\"+Z.currency.symbol+")?(?:\\))?)?$"),fe.match(ce)){we*=Math.pow(10,Te[Se]);break}we*=(W.split("-").length+Math.min(W.split("(").length-1,W.split(")").length-1))%2?1:-1,W=W.replace(/[^0-9\.]+/g,""),we*=Number(W)}return we},isNaN:function(W){return typeof W=="number"&&isNaN(W)},includes:function(W,Z){return W.indexOf(Z)!==-1},insert:function(W,Z,fe){return W.slice(0,fe)+Z+W.slice(fe)},reduce:function(W,Z){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof Z!="function")throw new TypeError(Z+" is not a function");var fe=Object(W),Te=fe.length>>>0,Se=0,we;if(arguments.length===3)we=arguments[2];else{for(;Se<Te&&!(Se in fe);)Se++;if(Se>=Te)throw new TypeError("Reduce of empty array with no initial value");we=fe[Se++]}for(;Se<Te;Se++)Se in fe&&(we=Z(we,fe[Se],Se,fe));return we},multiplier:function(W){var Z=W.toString().split(".");return Z.length<2?1:Math.pow(10,Z[1].length)},correctionFactor:function(){var W=Array.prototype.slice.call(arguments);return W.reduce(function(Z,fe){var Te=v.multiplier(fe);return Z>Te?Z:Te},1)},toFixed:function(W,Z,fe,Te){var Se=W.toString().split("."),we=Z-(Te||0),ce,Be,Zt,Ct;return Se.length===2?ce=Math.min(Math.max(Se[1].length,we),Z):ce=we,Zt=Math.pow(10,ce),Ct=(fe(W+"e+"+ce)/Zt).toFixed(ce),Te>Z-ce&&(Be=new RegExp("\\.?0{1,"+(Te-(Z-ce))+"}$"),Ct=Ct.replace(Be,"")),Ct}},f.options=U,f.formats=T,f.locales=b,f.locale=function(W){return W&&(U.currentLocale=W.toLowerCase()),U.currentLocale},f.localeData=function(W){if(!W)return b[U.currentLocale];if(W=W.toLowerCase(),!b[W])throw new Error("Unknown locale : "+W);return b[W]},f.reset=function(){for(var W in N)U[W]=N[W]},f.zeroFormat=function(W){U.zeroFormat=typeof W=="string"?W:null},f.nullFormat=function(W){U.nullFormat=typeof W=="string"?W:null},f.defaultFormat=function(W){U.defaultFormat=typeof W=="string"?W:"0.0"},f.register=function(W,Z,fe){if(Z=Z.toLowerCase(),this[W+"s"][Z])throw new TypeError(Z+" "+W+" already registered.");return this[W+"s"][Z]=fe,fe},f.validate=function(W,Z){var fe,Te,Se,we,ce,Be,Zt,Ct;if(typeof W!="string"&&(W+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",W)),W=W.trim(),W.match(/^\d+$/))return!0;if(W==="")return!1;try{Zt=f.localeData(Z)}catch{Zt=f.localeData(f.locale())}return Se=Zt.currency.symbol,ce=Zt.abbreviations,fe=Zt.delimiters.decimal,Zt.delimiters.thousands==="."?Te="\\.":Te=Zt.delimiters.thousands,Ct=W.match(/^[^\d]+/),Ct!==null&&(W=W.substr(1),Ct[0]!==Se)||(Ct=W.match(/[^\d]+$/),Ct!==null&&(W=W.slice(0,-1),Ct[0]!==ce.thousand&&Ct[0]!==ce.million&&Ct[0]!==ce.billion&&Ct[0]!==ce.trillion))?!1:(Be=new RegExp(Te+"{2}"),W.match(/[^\d.,]/g)?!1:(we=W.split(fe),we.length>2?!1:we.length<2?!!we[0].match(/^\d+.*\d$/)&&!we[0].match(Be):we[0].length===1?!!we[0].match(/^\d+$/)&&!we[0].match(Be)&&!!we[1].match(/^\d+$/):!!we[0].match(/^\d+.*\d$/)&&!we[0].match(Be)&&!!we[1].match(/^\d+$/)))},f.fn=Y.prototype={clone:function(){return f(this)},format:function(W,Z){var fe=this._value,Te=W||U.defaultFormat,Se,we,ce;if(Z=Z||Math.round,fe===0&&U.zeroFormat!==null)we=U.zeroFormat;else if(fe===null&&U.nullFormat!==null)we=U.nullFormat;else{for(Se in T)if(Te.match(T[Se].regexps.format)){ce=T[Se].format;break}ce=ce||f._.numberToFormat,we=ce(fe,Te,Z)}return we},value:function(){return this._value},input:function(){return this._input},set:function(W){return this._value=Number(W),this},add:function(W){var Z=v.correctionFactor.call(null,this._value,W);function fe(Te,Se,we,ce){return Te+Math.round(Z*Se)}return this._value=v.reduce([this._value,W],fe,0)/Z,this},subtract:function(W){var Z=v.correctionFactor.call(null,this._value,W);function fe(Te,Se,we,ce){return Te-Math.round(Z*Se)}return this._value=v.reduce([W],fe,Math.round(this._value*Z))/Z,this},multiply:function(W){function Z(fe,Te,Se,we){var ce=v.correctionFactor(fe,Te);return Math.round(fe*ce)*Math.round(Te*ce)/Math.round(ce*ce)}return this._value=v.reduce([this._value,W],Z,1),this},divide:function(W){function Z(fe,Te,Se,we){var ce=v.correctionFactor(fe,Te);return Math.round(fe*ce)/Math.round(Te*ce)}return this._value=v.reduce([this._value,W],Z),this},difference:function(W){return Math.abs(f(this._value).subtract(W).value())}},f.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(W){var Z=W%10;return~~(W%100/10)===1?"th":Z===1?"st":Z===2?"nd":Z===3?"rd":"th"},currency:{symbol:"$"}}),function(){f.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(W,Z,fe){var Te=f._.includes(Z," BPS")?" ":"",Se;return W=W*1e4,Z=Z.replace(/\s?BPS/,""),Se=f._.numberToFormat(W,Z,fe),f._.includes(Se,")")?(Se=Se.split(""),Se.splice(-1,0,Te+"BPS"),Se=Se.join("")):Se=Se+Te+"BPS",Se},unformat:function(W){return+(f._.stringToNumber(W)*1e-4).toFixed(15)}})}(),function(){var W={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},Z={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},fe=W.suffixes.concat(Z.suffixes.filter(function(Se){return W.suffixes.indexOf(Se)<0})),Te=fe.join("|");Te="("+Te.replace("B","B(?!PS)")+")",f.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(Te)},format:function(Se,we,ce){var Be,Zt=f._.includes(we,"ib")?Z:W,Ct=f._.includes(we," b")||f._.includes(we," ib")?" ":"",Rt,qe,Le;for(we=we.replace(/\s?i?b/,""),Rt=0;Rt<=Zt.suffixes.length;Rt++)if(qe=Math.pow(Zt.base,Rt),Le=Math.pow(Zt.base,Rt+1),Se===null||Se===0||Se>=qe&&Se<Le){Ct+=Zt.suffixes[Rt],qe>0&&(Se=Se/qe);break}return Be=f._.numberToFormat(Se,we,ce),Be+Ct},unformat:function(Se){var we=f._.stringToNumber(Se),ce,Be;if(we){for(ce=W.suffixes.length-1;ce>=0;ce--){if(f._.includes(Se,W.suffixes[ce])){Be=Math.pow(W.base,ce);break}if(f._.includes(Se,Z.suffixes[ce])){Be=Math.pow(Z.base,ce);break}}we*=Be||1}return we}})}(),function(){f.register("format","currency",{regexps:{format:/(\$)/},format:function(W,Z,fe){var Te=f.locales[f.options.currentLocale],Se={before:Z.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:Z.match(/([\+|\-|\)|\s|\$]*)$/)[0]},we,ce,Be;for(Z=Z.replace(/\s?\$\s?/,""),we=f._.numberToFormat(W,Z,fe),W>=0?(Se.before=Se.before.replace(/[\-\(]/,""),Se.after=Se.after.replace(/[\-\)]/,"")):W<0&&!f._.includes(Se.before,"-")&&!f._.includes(Se.before,"(")&&(Se.before="-"+Se.before),Be=0;Be<Se.before.length;Be++)switch(ce=Se.before[Be],ce){case"$":we=f._.insert(we,Te.currency.symbol,Be);break;case" ":we=f._.insert(we," ",Be+Te.currency.symbol.length-1);break}for(Be=Se.after.length-1;Be>=0;Be--)switch(ce=Se.after[Be],ce){case"$":we=Be===Se.after.length-1?we+Te.currency.symbol:f._.insert(we,Te.currency.symbol,-(Se.after.length-(1+Be)));break;case" ":we=Be===Se.after.length-1?we+" ":f._.insert(we," ",-(Se.after.length-(1+Be)+Te.currency.symbol.length-1));break}return we}})}(),function(){f.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(W,Z,fe){var Te,Se=typeof W=="number"&&!f._.isNaN(W)?W.toExponential():"0e+0",we=Se.split("e");return Z=Z.replace(/e[\+|\-]{1}0/,""),Te=f._.numberToFormat(Number(we[0]),Z,fe),Te+"e"+we[1]},unformat:function(W){var Z=f._.includes(W,"e+")?W.split("e+"):W.split("e-"),fe=Number(Z[0]),Te=Number(Z[1]);Te=f._.includes(W,"e-")?Te*=-1:Te;function Se(we,ce,Be,Zt){var Ct=f._.correctionFactor(we,ce),Rt=we*Ct*(ce*Ct)/(Ct*Ct);return Rt}return f._.reduce([fe,Math.pow(10,Te)],Se,1)}})}(),function(){f.register("format","ordinal",{regexps:{format:/(o)/},format:function(W,Z,fe){var Te=f.locales[f.options.currentLocale],Se,we=f._.includes(Z," o")?" ":"";return Z=Z.replace(/\s?o/,""),we+=Te.ordinal(W),Se=f._.numberToFormat(W,Z,fe),Se+we}})}(),function(){f.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(W,Z,fe){var Te=f._.includes(Z," %")?" ":"",Se;return f.options.scalePercentBy100&&(W=W*100),Z=Z.replace(/\s?\%/,""),Se=f._.numberToFormat(W,Z,fe),f._.includes(Se,")")?(Se=Se.split(""),Se.splice(-1,0,Te+"%"),Se=Se.join("")):Se=Se+Te+"%",Se},unformat:function(W){var Z=f._.stringToNumber(W);return f.options.scalePercentBy100?Z*.01:Z}})}(),function(){f.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(W,Z,fe){var Te=Math.floor(W/60/60),Se=Math.floor((W-Te*60*60)/60),we=Math.round(W-Te*60*60-Se*60);return Te+":"+(Se<10?"0"+Se:Se)+":"+(we<10?"0"+we:we)},unformat:function(W){var Z=W.split(":"),fe=0;return Z.length===3?(fe=fe+Number(Z[0])*60*60,fe=fe+Number(Z[1])*60,fe=fe+Number(Z[2])):Z.length===2&&(fe=fe+Number(Z[0])*60,fe=fe+Number(Z[1])),Number(fe)}})}(),f})})(A8);var Tye=A8.exports;const Aye={name:"Numeral",emits:["on-change"],props:{value:{type:[String,Number]},format:{type:String},prefix:{type:[String,Number]},suffix:{type:[String,Number]}},data(){return{currentValue:""}},watch:{value(){this.init()},format(){this.init()}},methods:{init(){if(this.value!==void 0){const h=Tye(this.value);this.format?this.currentValue=h.format(this.format):this.currentValue=h.value(),this.$emit("on-change",this.currentValue)}},getValue(){return this.currentValue}},mounted(){this.init()}},Eye={class:"ivu-numeral"};function Mye(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("span",Eye,[n.renderSlot(h.$slots,"prefix",{},()=>[n.createTextVNode(n.toDisplayString(v.prefix),1)]),n.createTextVNode(n.toDisplayString(T.currentValue),1),n.renderSlot(h.$slots,"suffix",{},()=>[n.createTextVNode(n.toDisplayString(v.suffix),1)])])}var E8=l(Aye,[["render",Mye]]);const Pye="ivu-select-group",kye={name:"OptionGroup",props:{label:{type:String,default:""}},provide(){return{OptionGroupInstance:this}},inject:["SelectInstance"],data(){return{prefixCls:Pye,hidden:!1,id:ie(6),optionList:[]}},computed:{show(){return this.optionList.find(h=>h.proxy&&h.proxy.isShow)}}};function Iye(h,f,v,E,T,b){return n.withDirectives((n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass([T.prefixCls+"-wrap"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-title"])},n.toDisplayString(v.label),3),n.createElementVNode("ul",null,[n.createElementVNode("li",{class:n.normalizeClass([T.prefixCls]),ref:"options"},[n.renderSlot(h.$slots,"default")],2)])],2)),[[n.vShow,b.show]])}var M8=l(kye,[["render",Iye]]);const m3="ivu-page";function Rye(h){return/^[1-9][0-9]*$/.test(h+"")}const Bye={name:"PageOption",mixins:[kn],components:{iSelect:Bo,iOption:Cr},emits:["on-size","on-page"],props:{pageSizeOpts:Array,showSizer:Boolean,showElevator:Boolean,current:Number,_current:Number,pageSize:Number,allPages:Number,isSmall:Boolean,placement:String,transfer:Boolean,disabled:Boolean,eventsEnabled:Boolean},data(){return{currentPageSize:this.pageSize}},watch:{pageSize(h){this.currentPageSize=h}},computed:{size(){return this.isSmall?"small":"default"},optsClasses(){return[`${m3}-options`]},sizerClasses(){return[`${m3}-options-sizer`]},ElevatorClasses(){return[`${m3}-options-elevator`]}},methods:{changeSize(){this.$emit("on-size",this.currentPageSize)},changePage(h){let f=h.target.value.trim(),v=0;if(Rye(f)){if(f=Number(f),f!=this.current){const E=this.allPages;f>E?v=E:v=f}}else v=1;v&&(this.$emit("on-page",v),h.target.value=v)}}},Dye=["value","disabled"];function Lye(h,f,v,E,T,b){const N=n.resolveComponent("i-option"),U=n.resolveComponent("i-select");return v.showSizer||v.showElevator?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.optsClasses)},[v.showSizer?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.sizerClasses)},[n.createVNode(U,{modelValue:T.currentPageSize,"onUpdate:modelValue":f[0]||(f[0]=Y=>T.currentPageSize=Y),size:b.size,placement:v.placement,transfer:v.transfer,disabled:v.disabled,eventsEnabled:v.eventsEnabled,onOnChange:b.changeSize},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.pageSizeOpts,Y=>(n.openBlock(),n.createBlock(N,{key:Y,value:Y,style:{"text-align":"center"}},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(Y)+" "+n.toDisplayString(h.t("i.page.page")),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","size","placement","transfer","disabled","eventsEnabled","onOnChange"])],2)):n.createCommentVNode("",!0),v.showElevator?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass(b.ElevatorClasses)},[n.createTextVNode(n.toDisplayString(h.t("i.page.goto"))+" ",1),n.createElementVNode("input",{type:"text",value:v._current,autocomplete:"off",spellcheck:"false",disabled:v.disabled,onKeyup:f[1]||(f[1]=n.withKeys((...Y)=>b.changePage&&b.changePage(...Y),["enter"]))},null,40,Dye),n.createTextVNode(" "+n.toDisplayString(h.t("i.page.p")),1)],2)):n.createCommentVNode("",!0)],2)):n.createCommentVNode("",!0)}var Nye=l(Bye,[["render",Lye]]);const uo="ivu-page",Vye={name:"Page",mixins:[kn],components:{Options:Nye},emits:["update:modelValue","on-change","on-prev","on-next","on-page-size-change"],props:{modelValue:{type:Number,default:1},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageSizeOpts:{type:Array,default(){return[10,20,30,40]}},placement:{validator(h){return S(h,["top","bottom"])},default:"bottom"},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},size:{validator(h){return S(h,["small","default"])}},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showSizer:{type:Boolean,default:!1},className:{type:String},styles:{type:Object},prevText:{type:String,default:""},nextText:{type:String,default:""},disabled:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:uo,currentPage:this.modelValue,currentPageSize:this.pageSize}},watch:{total(h){let f=Math.ceil(h/this.currentPageSize);f<this.currentPage&&(this.currentPage=f===0?1:f)},modelValue(h){this.currentPage=h},pageSize(h){this.currentPageSize=h}},computed:{isSmall(){return this.size==="small"},allPages(){const h=Math.ceil(this.total/this.currentPageSize);return h===0?1:h},simpleWrapClasses(){return[`${uo}`,`${uo}-simple`,{[`${this.className}`]:!!this.className}]},simplePagerClasses(){return`${uo}-simple-pager`},wrapClasses(){return[`${uo}`,{[`${this.className}`]:!!this.className,[`${uo}-with-disabled`]:this.disabled,mini:this.size==="small"}]},prevClasses(){return[`${uo}-prev`,{[`${uo}-disabled`]:this.currentPage===1||this.disabled,[`${uo}-custom-text`]:this.prevText!==""}]},nextClasses(){return[`${uo}-next`,{[`${uo}-disabled`]:this.currentPage===this.allPages||this.disabled,[`${uo}-custom-text`]:this.nextText!==""}]},firstPageClasses(){return[`${uo}-item`,{[`${uo}-item-active`]:this.currentPage===1}]},lastPageClasses(){return[`${uo}-item`,{[`${uo}-item-active`]:this.currentPage===this.allPages}]}},methods:{changePage(h){this.disabled||this.currentPage!=h&&(this.currentPage=h,this.$emit("update:modelValue",h),this.$emit("on-change",h))},prev(){if(this.disabled)return;const h=this.currentPage;if(h<=1)return!1;this.changePage(h-1),this.$emit("on-prev",h-1)},next(){if(this.disabled)return;const h=this.currentPage;if(h>=this.allPages)return!1;this.changePage(h+1),this.$emit("on-next",h+1)},fastPrev(){if(this.disabled)return;const h=this.currentPage-5;h>0?this.changePage(h):this.changePage(1)},fastNext(){if(this.disabled)return;const h=this.currentPage+5;h>this.allPages?this.changePage(this.allPages):this.changePage(h)},onSize(h){this.disabled||(this.currentPageSize=h,this.$emit("on-page-size-change",h),this.changePage(1))},onPage(h){this.disabled||this.changePage(h)},keyDown(h){const f=h.keyCode;f>=48&&f<=57||f>=96&&f<=105||f===8||f===37||f===39||h.preventDefault()},keyUp(h){const f=h.keyCode,v=parseInt(h.target.value);if(f===38)this.prev();else if(f===40)this.next();else if(f===13){let E=1;v>this.allPages?E=this.allPages:v<=0||!v?E=1:E=v,h.target.value=E,this.changePage(E)}}}},Fye=["title"],$ye=[n.createElementVNode("a",null,[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"})],-1)],Uye=["title"],zye=["value","disabled"],Xye=n.createElementVNode("span",null,"/",-1),Wye=["title"],Gye=[n.createElementVNode("a",null,[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"})],-1)],Hye=["title"],Qye={key:1,class:"ivu-icon ivu-icon-ios-arrow-back"},jye=[n.createElementVNode("a",null,"1",-1)],Yye=["title"],qye=[n.createElementVNode("a",null,[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"}),n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],Zye=["title"],Kye=["title"],Jye=["title"],e_e=["title"],t_e=["title"],i_e=["title"],n_e=["title"],r_e=["title"],s_e=[n.createElementVNode("a",null,[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"}),n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],o_e=["title"],a_e=["title"],l_e={key:1,class:"ivu-icon ivu-icon-ios-arrow-forward"};function h_e(h,f,v,E,T,b){const N=n.resolveComponent("Options");return v.simple?(n.openBlock(),n.createElementBlock("ul",{key:0,class:n.normalizeClass(b.simpleWrapClasses),style:n.normalizeStyle(v.styles)},[n.createElementVNode("li",{title:h.t("i.page.prev"),class:n.normalizeClass(b.prevClasses),onClick:f[0]||(f[0]=(...U)=>b.prev&&b.prev(...U))},$ye,10,Fye),n.createElementVNode("div",{class:n.normalizeClass(b.simplePagerClasses),title:T.currentPage+"/"+b.allPages},[n.createElementVNode("input",{type:"text",value:T.currentPage,autocomplete:"off",spellcheck:"false",disabled:v.disabled,onKeydown:f[1]||(f[1]=(...U)=>b.keyDown&&b.keyDown(...U)),onKeyup:f[2]||(f[2]=(...U)=>b.keyUp&&b.keyUp(...U)),onChange:f[3]||(f[3]=(...U)=>b.keyUp&&b.keyUp(...U))},null,40,zye),Xye,n.createTextVNode(" "+n.toDisplayString(b.allPages),1)],10,Uye),n.createElementVNode("li",{title:h.t("i.page.next"),class:n.normalizeClass(b.nextClasses),onClick:f[4]||(f[4]=(...U)=>b.next&&b.next(...U))},Gye,10,Wye)],6)):(n.openBlock(),n.createElementBlock("ul",{key:1,class:n.normalizeClass(b.wrapClasses),style:n.normalizeStyle(v.styles)},[v.showTotal?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass([T.prefixCls+"-total"])},[n.renderSlot(h.$slots,"default",{},()=>[n.createTextVNode(n.toDisplayString(h.t("i.page.total"))+" "+n.toDisplayString(v.total)+" ",1),v.total<=1?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(h.t("i.page.item")),1)],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createTextVNode(n.toDisplayString(h.t("i.page.items")),1)],64))])],2)):n.createCommentVNode("",!0),n.createElementVNode("li",{title:h.t("i.page.prev"),class:n.normalizeClass(b.prevClasses),onClick:f[5]||(f[5]=(...U)=>b.prev&&b.prev(...U))},[n.createElementVNode("a",null,[v.prevText!==""?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(v.prevText),1)],64)):(n.openBlock(),n.createElementBlock("i",Qye))])],10,Hye),n.createElementVNode("li",{title:"1",class:n.normalizeClass(b.firstPageClasses),onClick:f[6]||(f[6]=U=>b.changePage(1))},jye,2),T.currentPage>5?(n.openBlock(),n.createElementBlock("li",{key:1,title:h.t("i.page.prev5"),class:n.normalizeClass([T.prefixCls+"-item-jump-prev"]),onClick:f[7]||(f[7]=(...U)=>b.fastPrev&&b.fastPrev(...U))},qye,10,Yye)):n.createCommentVNode("",!0),T.currentPage===5?(n.openBlock(),n.createElementBlock("li",{key:2,title:T.currentPage-3,class:n.normalizeClass([T.prefixCls+"-item"]),onClick:f[8]||(f[8]=U=>b.changePage(T.currentPage-3))},[n.createElementVNode("a",null,n.toDisplayString(T.currentPage-3),1)],10,Zye)):n.createCommentVNode("",!0),T.currentPage-2>1?(n.openBlock(),n.createElementBlock("li",{key:3,title:T.currentPage-2,class:n.normalizeClass([T.prefixCls+"-item"]),onClick:f[9]||(f[9]=U=>b.changePage(T.currentPage-2))},[n.createElementVNode("a",null,n.toDisplayString(T.currentPage-2),1)],10,Kye)):n.createCommentVNode("",!0),T.currentPage-1>1?(n.openBlock(),n.createElementBlock("li",{key:4,title:T.currentPage-1,class:n.normalizeClass([T.prefixCls+"-item"]),onClick:f[10]||(f[10]=U=>b.changePage(T.currentPage-1))},[n.createElementVNode("a",null,n.toDisplayString(T.currentPage-1),1)],10,Jye)):n.createCommentVNode("",!0),T.currentPage!=1&&T.currentPage!=b.allPages?(n.openBlock(),n.createElementBlock("li",{key:5,title:T.currentPage,class:n.normalizeClass([T.prefixCls+"-item",T.prefixCls+"-item-active"])},[n.createElementVNode("a",null,n.toDisplayString(T.currentPage),1)],10,e_e)):n.createCommentVNode("",!0),T.currentPage+1<b.allPages?(n.openBlock(),n.createElementBlock("li",{key:6,title:T.currentPage+1,class:n.normalizeClass([T.prefixCls+"-item"]),onClick:f[11]||(f[11]=U=>b.changePage(T.currentPage+1))},[n.createElementVNode("a",null,n.toDisplayString(T.currentPage+1),1)],10,t_e)):n.createCommentVNode("",!0),T.currentPage+2<b.allPages?(n.openBlock(),n.createElementBlock("li",{key:7,title:T.currentPage+2,class:n.normalizeClass([T.prefixCls+"-item"]),onClick:f[12]||(f[12]=U=>b.changePage(T.currentPage+2))},[n.createElementVNode("a",null,n.toDisplayString(T.currentPage+2),1)],10,i_e)):n.createCommentVNode("",!0),b.allPages-T.currentPage===4?(n.openBlock(),n.createElementBlock("li",{key:8,title:T.currentPage+3,class:n.normalizeClass([T.prefixCls+"-item"]),onClick:f[13]||(f[13]=U=>b.changePage(T.currentPage+3))},[n.createElementVNode("a",null,n.toDisplayString(T.currentPage+3),1)],10,n_e)):n.createCommentVNode("",!0),b.allPages-T.currentPage>=5?(n.openBlock(),n.createElementBlock("li",{key:9,title:h.t("i.page.next5"),class:n.normalizeClass([T.prefixCls+"-item-jump-next"]),onClick:f[14]||(f[14]=(...U)=>b.fastNext&&b.fastNext(...U))},s_e,10,r_e)):n.createCommentVNode("",!0),b.allPages>1?(n.openBlock(),n.createElementBlock("li",{key:10,title:b.allPages,class:n.normalizeClass(b.lastPageClasses),onClick:f[15]||(f[15]=U=>b.changePage(b.allPages))},[n.createElementVNode("a",null,n.toDisplayString(b.allPages),1)],10,o_e)):n.createCommentVNode("",!0),n.createElementVNode("li",{title:h.t("i.page.next"),class:n.normalizeClass(b.nextClasses),onClick:f[16]||(f[16]=(...U)=>b.next&&b.next(...U))},[n.createElementVNode("a",null,[v.nextText!==""?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(v.nextText),1)],64)):(n.openBlock(),n.createElementBlock("i",l_e))])],10,a_e),n.createVNode(N,{"show-sizer":v.showSizer,"page-size":T.currentPageSize,"page-size-opts":v.pageSizeOpts,placement:v.placement,transfer:v.transfer,"show-elevator":v.showElevator,_current:T.currentPage,current:T.currentPage,disabled:v.disabled,"all-pages":b.allPages,"is-small":b.isSmall,eventsEnabled:v.eventsEnabled,onOnSize:b.onSize,onOnPage:b.onPage},null,8,["show-sizer","page-size","page-size-opts","placement","transfer","show-elevator","_current","current","disabled","all-pages","is-small","eventsEnabled","onOnSize","onOnPage"])],6))}var P8=l(Vye,[["render",h_e]]);const c_e={name:"PageHeader",components:{Breadcrumb:Sk,BreadcrumbItem:Ck,Divider:GS,Icon:O,Tabs:sC,TabPane:aC},emits:["on-tab-change","on-back"],props:{title:{type:String},back:{type:Boolean,default:!1},logo:{type:String},action:{type:String},content:{type:String},extra:{type:String},breadcrumbList:{type:Array},hiddenBreadcrumb:{type:Boolean,default:!1},tabList:{type:Array},tabActiveKey:{type:String},wide:{type:Boolean,default:!1}},computed:{classes(){return{"ivu-page-header-wide":this.wide}}},methods:{handleTabChange(h){const f=this.tabList.find(v=>v.name===h);this.$emit("on-tab-change",JSON.parse(JSON.stringify(f)))},handleBack(){this.$emit("on-back")}}},u_e={key:0,class:"ivu-page-header-breadcrumb"},d_e={class:"ivu-page-header-detail"},f_e={key:1,class:"ivu-page-header-logo"},p_e=["src"],m_e={class:"ivu-page-header-main"},g_e={class:"ivu-page-header-row"},v_e={key:1,class:"ivu-page-header-title"},y_e={key:2,class:"ivu-page-header-action"},__e={class:"ivu-page-header-row"},x_e={key:0,class:"ivu-page-header-content"},b_e={key:1,class:"ivu-page-header-extra"},w_e={key:1,class:"ivu-page-header-tabs"};function O_e(h,f,v,E,T,b){const N=n.resolveComponent("BreadcrumbItem"),U=n.resolveComponent("Breadcrumb"),Y=n.resolveComponent("Icon"),W=n.resolveComponent("Divider"),Z=n.resolveComponent("TabPane"),fe=n.resolveComponent("Tabs");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-page-header",b.classes])},[h.$slots.breadcrumb||!v.hiddenBreadcrumb?(n.openBlock(),n.createElementBlock("div",u_e,[n.renderSlot(h.$slots,"breadcrumb",{},()=>[n.createVNode(U,null,{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.breadcrumbList,(Te,Se)=>(n.openBlock(),n.createBlock(N,{key:Se,to:Te.to,replace:Te.replace,target:Te.target},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(Te.title),1)]),_:2},1032,["to","replace","target"]))),128))]),_:1})])])):n.createCommentVNode("",!0),n.createElementVNode("div",d_e,[v.back||h.$slots.back?(n.openBlock(),n.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:f[0]||(f[0]=(...Te)=>b.handleBack&&b.handleBack(...Te))},[n.renderSlot(h.$slots,"back",{},()=>[n.createVNode(Y,{type:"md-arrow-back"})]),n.createVNode(W,{type:"vertical"})])):n.createCommentVNode("",!0),v.logo||h.$slots.logo?(n.openBlock(),n.createElementBlock("div",f_e,[n.renderSlot(h.$slots,"logo",{},()=>[n.createElementVNode("img",{src:v.logo},null,8,p_e)])])):n.createCommentVNode("",!0),n.createElementVNode("div",m_e,[n.createElementVNode("div",g_e,[v.back||h.$slots.back?(n.openBlock(),n.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:f[1]||(f[1]=(...Te)=>b.handleBack&&b.handleBack(...Te))},[n.renderSlot(h.$slots,"back",{},()=>[n.createVNode(Y,{type:"md-arrow-back"})]),n.createVNode(W,{type:"vertical"})])):n.createCommentVNode("",!0),v.title||h.$slots.title?(n.openBlock(),n.createElementBlock("div",v_e,[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])])):n.createCommentVNode("",!0),v.action||h.$slots.action?(n.openBlock(),n.createElementBlock("div",y_e,[n.renderSlot(h.$slots,"action",{},()=>[n.createTextVNode(n.toDisplayString(v.action),1)])])):n.createCommentVNode("",!0)]),n.createElementVNode("div",__e,[v.content||h.$slots.content?(n.openBlock(),n.createElementBlock("div",x_e,[n.renderSlot(h.$slots,"content",{},()=>[n.createTextVNode(n.toDisplayString(v.content),1)])])):n.createCommentVNode("",!0),v.extra||h.$slots.extra?(n.openBlock(),n.createElementBlock("div",b_e,[n.renderSlot(h.$slots,"extra",{},()=>[n.createTextVNode(n.toDisplayString(v.extra),1)])])):n.createCommentVNode("",!0)])])]),v.tabList&&v.tabList.length?(n.openBlock(),n.createElementBlock("div",w_e,[n.createVNode(fe,{animated:!1,"model-value":v.tabActiveKey,onOnClick:b.handleTabChange},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.tabList,(Te,Se)=>(n.openBlock(),n.createBlock(Z,{key:Se,label:Te.label,name:Te.name},null,8,["label","name"]))),128))]),_:1},8,["model-value","onOnClick"])])):n.createCommentVNode("",!0)],2)}var k8=l(c_e,[["render",O_e]]);const S_e=n.defineComponent({name:"CollapseTransition",props:{ready:{type:Boolean,default:!0}},setup(h){return{on:{beforeEnter(f){!h.ready||(H(f,"collapse-transition"),f.dataset||(f.dataset={}),f.dataset.oldPaddingTop=f.style.paddingTop,f.dataset.oldPaddingBottom=f.style.paddingBottom,f.style.height="0",f.style.paddingTop=0,f.style.paddingBottom=0)},enter(f){!h.ready||(f.dataset.oldOverflow=f.style.overflow,f.scrollHeight!==0?(f.style.height=f.scrollHeight+"px",f.style.paddingTop=f.dataset.oldPaddingTop,f.style.paddingBottom=f.dataset.oldPaddingBottom):(f.style.height="",f.style.paddingTop=f.dataset.oldPaddingTop,f.style.paddingBottom=f.dataset.oldPaddingBottom),f.style.overflow="hidden")},afterEnter(f){!h.ready||(K(f,"collapse-transition"),f.style.height="",f.style.overflow=f.dataset.oldOverflow)},beforeLeave(f){!h.ready||(f.dataset||(f.dataset={}),f.dataset.oldPaddingTop=f.style.paddingTop,f.dataset.oldPaddingBottom=f.style.paddingBottom,f.dataset.oldOverflow=f.style.overflow,f.style.height=f.scrollHeight+"px",f.style.overflow="hidden")},leave(f){!h.ready||f.scrollHeight!==0&&(H(f,"collapse-transition"),f.style.height=0,f.style.paddingTop=0,f.style.paddingBottom=0)},afterLeave(f){!h.ready||(K(f,"collapse-transition"),f.style.height="",f.style.overflow=f.dataset.oldOverflow,f.style.paddingTop=f.dataset.oldPaddingTop,f.style.paddingBottom=f.dataset.oldPaddingBottom)}}}}});function C_e(h,f,v,E,T,b){return n.openBlock(),n.createBlock(n.Transition,n.toHandlers(h.on),{default:n.withCtx(()=>[n.renderSlot(h.$slots,"default")]),_:3},16)}var g3=l(S_e,[["render",C_e]]);const xx="ivu-collapse",T_e={name:"Panel",components:{Icon:O,CollapseTransition:g3},inject:["CollapseInstance"],props:{name:{type:String},hideArrow:{type:Boolean,default:!1}},data(){return{index:0,mounted:!1}},computed:{itemClasses(){return[`${xx}-item`,{[`${xx}-item-active`]:this.isActive}]},headerClasses(){return`${xx}-header`},contentClasses(){return`${xx}-content`},boxClasses(){return`${xx}-content-box`},isActive(){const h=this.CollapseInstance.getActiveKey(),f=this.name||this.index.toString();return h.indexOf(f)>-1}},methods:{setIndex(){this.index=this.CollapseInstance.panelCount+1,this.CollapseInstance.panelCount=this.index},toggle(){this.CollapseInstance.toggle({name:this.name||this.index,isActive:this.isActive})}},mounted(){this.setIndex(),this.mounted=!0}};function A_e(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("collapse-transition");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.itemClasses)},[n.createElementVNode("div",{class:n.normalizeClass(b.headerClasses),onClick:f[0]||(f[0]=(...Y)=>b.toggle&&b.toggle(...Y))},[v.hideArrow?n.createCommentVNode("",!0):(n.openBlock(),n.createBlock(N,{key:0,type:"ios-arrow-forward"})),n.renderSlot(h.$slots,"default")],2),T.mounted?(n.openBlock(),n.createBlock(U,{key:0},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass(b.contentClasses)},[n.createElementVNode("div",{class:n.normalizeClass(b.boxClasses)},[n.renderSlot(h.$slots,"content")],2)],2),[[n.vShow,b.isActive]])]),_:3})):n.createCommentVNode("",!0)],2)}var I8=l(T_e,[["render",A_e]]);const R8={name:"Paragraph",mixins:[ux],render(){return n.h(tC,{...this.$props,component:"div",...this.commonEvents()},this.commonSlots())}},B8={name:"Password",mixins:[Z_],data(){return{className:"ivu-login-password",prefix:"ios-lock-outline",placeholder:"请输入密码",type:"password"}}},sf="ivu-poptip",E_e={name:"Poptip",mixins:[zF,kn],emits:["on-ok","on-cancel"],directives:{clickOutside:Dk},components:{iButton:Do},props:{trigger:{validator(h){return S(h,["click","focus","hover"])},default:"click"},placement:{validator(h){return S(h,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},title:{type:[String,Number]},content:{type:[String,Number],default:""},width:{type:[String,Number]},confirm:{type:Boolean,default:!1},okText:{type:String},cancelText:{type:String},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}},popperClass:{type:String},wordWrap:{type:Boolean,default:!1},padding:{type:String},disabled:{type:Boolean,default:!1},capture:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return h.$VIEWUI?h.$VIEWUI.capture:!1}},transferClassName:{type:String}},data(){return{prefixCls:sf,showTitle:!0,isInput:!1,disableCloseUnderTransfer:!1,tIndex:this.handleGetIndex()}},computed:{classes(){return[`${sf}`,{[`${sf}-confirm`]:this.confirm}]},popperClasses(){return[`${sf}-popper`,{[`${sf}-confirm`]:this.transfer&&this.confirm,[`${this.popperClass}`]:!!this.popperClass,[sf+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]},styles(){let h={};return this.width&&(h.width=`${this.width}px`),this.transfer&&(h["z-index"]=1060+this.tIndex),h},localeOkText(){return this.okText===void 0?this.t("i.poptip.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.poptip.cancelText"):this.cancelText},contentClasses(){return[`${sf}-body-content`,{[`${sf}-body-content-word-wrap`]:this.wordWrap}]},contentPaddingStyle(){const h={};return this.padding!==""&&(h.padding=this.padding),h}},methods:{handleClick(){if(!this.disabled){if(this.confirm)return this.visible=!this.visible,!0;if(this.trigger!=="click")return!1;this.visible=!this.visible}},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(this.confirm)return this.visible=!1,!0;if(this.trigger!=="click")return!1;this.visible=!1},handleFocus(h=!0){if(!this.disabled){if(this.trigger!=="focus"||this.confirm||this.isInput&&!h)return!1;this.visible=!0}},handleBlur(h=!0){if(this.trigger!=="focus"||this.confirm||this.isInput&&!h)return!1;this.visible=!1},handleMouseenter(){if(!this.disabled){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!0},100)}},handleMouseleave(){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!1},100))},cancel(){this.visible=!1,this.$emit("on-cancel")},ok(){this.visible=!1,this.$emit("on-ok")},getInputChildren(){const h=this.$refs.reference.querySelectorAll("input"),f=this.$refs.reference.querySelectorAll("textarea");let v=null;return h.length?v=h[0]:f.length&&(v=f[0]),v},handleGetIndex(){return je(),Ae},handleIndexIncrease(){this.tIndex=this.handleGetIndex()}},mounted(){this.confirm||(this.showTitle=this.$slots.title!==void 0||this.title),this.trigger==="focus"&&n.nextTick(()=>{const h=this.getInputChildren();h&&(this.isInput=!0,h.addEventListener("focus",this.handleFocus,!1),h.addEventListener("blur",this.handleBlur,!1))})},beforeUnmount(){const h=this.getInputChildren();h&&(h.removeEventListener("focus",this.handleFocus,!1),h.removeEventListener("blur",this.handleBlur,!1))}},M_e=n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-help-circle"},null,-1);function P_e(h,f,v,E,T,b){const N=n.resolveComponent("i-button"),U=n.resolveDirective("click-outside");return n.withDirectives((n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),onMouseenter:f[6]||(f[6]=(...Y)=>b.handleMouseenter&&b.handleMouseenter(...Y)),onMouseleave:f[7]||(f[7]=(...Y)=>b.handleMouseleave&&b.handleMouseleave(...Y))},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-rel"]),ref:"reference",onClick:f[0]||(f[0]=(...Y)=>b.handleClick&&b.handleClick(...Y)),onMousedown:f[1]||(f[1]=Y=>b.handleFocus(!1)),onMouseup:f[2]||(f[2]=Y=>b.handleBlur(!1))},[n.renderSlot(h.$slots,"default")],34),(n.openBlock(),n.createBlock(n.Teleport,{to:"body",disabled:!v.transfer},[n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass(b.popperClasses),style:n.normalizeStyle(b.styles),ref:"popper",onClick:f[3]||(f[3]=(...Y)=>b.handleTransferClick&&b.handleTransferClick(...Y)),onMouseenter:f[4]||(f[4]=(...Y)=>b.handleMouseenter&&b.handleMouseenter(...Y)),onMouseleave:f[5]||(f[5]=(...Y)=>b.handleMouseleave&&b.handleMouseleave(...Y))},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-content"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-arrow"])},null,2),v.confirm?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-inner"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"])},[M_e,n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body-message"])},[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])],2)],2),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-footer"])},[n.createVNode(N,{type:"text",size:"small",onClick:b.cancel},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(b.localeCancelText),1)]),_:1},8,["onClick"]),n.createVNode(N,{type:"primary",size:"small",onClick:b.ok},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(b.localeOkText),1)]),_:1},8,["onClick"])],2)],2)):n.createCommentVNode("",!0),v.confirm?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass([T.prefixCls+"-inner"])},[T.showTitle?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-title"]),style:n.normalizeStyle(b.contentPaddingStyle),ref:"title"},[n.renderSlot(h.$slots,"title",{},()=>[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-title-inner"])},n.toDisplayString(v.title),3)])],6)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"]),style:n.normalizeStyle(b.contentPaddingStyle)},[n.createElementVNode("div",{class:n.normalizeClass(b.contentClasses)},[n.renderSlot(h.$slots,"content",{},()=>[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body-content-inner"])},n.toDisplayString(v.content),3)])],2)],6)],2))],2)],38),[[n.vShow,h.visible]])]),_:3})],8,["disabled"]))],34)),[[U,b.handleClose]])}var v3=l(E_e,[["render",P_e]]);const wc="ivu-progress",k_e={name:"Progress",components:{Icon:O},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator(h){return S(h,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data(){return{currentStatus:this.status}},computed:{isStatus(){return this.currentStatus==="wrong"||this.currentStatus==="success"},statusIcon(){let h="";switch(this.currentStatus){case"wrong":h="ios-close-circle";break;case"success":h="ios-checkmark-circle";break}return h},bgStyle(){const h=this.vertical?{height:`${this.percent}%`,width:`${this.strokeWidth}px`}:{width:`${this.percent}%`,height:`${this.strokeWidth}px`};return this.strokeColor&&(typeof this.strokeColor=="string"?h["background-color"]=this.strokeColor:h["background-image"]=`linear-gradient(to right, ${this.strokeColor[0]} 0%, ${this.strokeColor[1]} 100%)`),h},successBgStyle(){return this.vertical?{height:`${this.successPercent}%`,width:`${this.strokeWidth}px`}:{width:`${this.successPercent}%`,height:`${this.strokeWidth}px`}},wrapClasses(){return[`${wc}`,`${wc}-${this.currentStatus}`,{[`${wc}-show-info`]:!this.hideInfo&&!this.textInside,[`${wc}-vertical`]:this.vertical}]},textClasses(){return`${wc}-text`},textInnerClasses(){return`${wc}-text-inner`},outerClasses(){return`${wc}-outer`},innerClasses(){return`${wc}-inner`},bgClasses(){return`${wc}-bg`},successBgClasses(){return`${wc}-success-bg`}},created(){this.handleStatus()},methods:{handleStatus(h){h?(this.currentStatus="normal",this.$emit("on-status-change","normal")):parseInt(this.percent,10)===100&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent(h,f){h<f?this.handleStatus(!0):this.handleStatus()},status(h){this.currentStatus=h}}},I_e={key:0,class:"ivu-progress-inner-text"};function R_e(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[n.createElementVNode("div",{class:n.normalizeClass(b.outerClasses)},[n.createElementVNode("div",{class:n.normalizeClass(b.innerClasses)},[n.createElementVNode("div",{class:n.normalizeClass(b.bgClasses),style:n.normalizeStyle(b.bgStyle)},[v.textInside?(n.openBlock(),n.createElementBlock("div",I_e,n.toDisplayString(v.percent)+"%",1)):n.createCommentVNode("",!0)],6),n.createElementVNode("div",{class:n.normalizeClass(b.successBgClasses),style:n.normalizeStyle(b.successBgStyle)},null,6)],2)],2),!v.hideInfo&&!v.textInside?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(b.textClasses)},[n.renderSlot(h.$slots,"default",{},()=>[b.isStatus?(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass(b.textInnerClasses)},[n.createVNode(N,{type:b.statusIcon},null,8,["type"])],2)):(n.openBlock(),n.createElementBlock("span",{key:1,class:n.normalizeClass(b.textInnerClasses)},n.toDisplayString(v.percent)+"% ",3))])],2)):n.createCommentVNode("",!0)],2)}var lC=l(k_e,[["render",R_e]]);const of="ivu-rate",B_e={name:"Rate",mixins:[kn,Ui],emits:["update:modelValue","on-change"],props:{count:{type:Number,default:5},modelValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},name:{type:String},clearable:{type:Boolean,default:!1},character:{type:String,default:""},icon:{type:String,default:""},customIcon:{type:String,default:""}},data(){const h=this.modelValue||0;return{prefixCls:of,hoverIndex:-1,isHover:!1,isHalf:this.allowHalf&&h.toString().indexOf(".")>=0,currentValue:h}},computed:{classes(){return[`${of}`,{[`${of}-disabled`]:this.itemDisabled}]},iconClasses(){return["ivu-icon",{[`ivu-icon-${this.icon}`]:this.icon!=="",[`${this.customIcon}`]:this.customIcon!==""}]},showCharacter(){return this.character!==""||this.icon!==""||this.customIcon!==""}},watch:{modelValue(h){this.currentValue=h||0},currentValue(h){this.setHalf(h)}},methods:{starCls(h){const f=this.hoverIndex,v=this.isHover?f:this.currentValue;let E=!1,T=!1;return v>=h&&(E=!0),this.isHover?T=v===h:T=Math.ceil(this.currentValue)===h,[{[`${of}-star`]:!this.showCharacter,[`${of}-star-chart`]:this.showCharacter,[`${of}-star-full`]:!T&&E||T&&!this.isHalf,[`${of}-star-half`]:T&&this.isHalf,[`${of}-star-zero`]:!E}]},handleMousemove(h,f){if(!this.itemDisabled){if(this.isHover=!0,this.allowHalf){const v=f.target.getAttribute("type")||!1;this.isHalf=v==="half"}else this.isHalf=!1;this.hoverIndex=h}},handleMouseleave(){this.itemDisabled||(this.isHover=!1,this.setHalf(this.currentValue),this.hoverIndex=-1)},setHalf(h){this.isHalf=this.allowHalf&&h.toString().indexOf(".")>=0},handleClick(h){this.itemDisabled||(this.isHalf&&(h-=.5),this.clearable&&Math.abs(h-this.currentValue)<.01&&(h=0),this.currentValue=h,this.$emit("update:modelValue",h),this.$emit("on-change",h),this.handleFormItemChange("change",h))}}},D_e=["name","value"],L_e=["onMousemove","onClick"],N_e={key:0},V_e={key:1};function F_e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),onMouseleave:f[0]||(f[0]=(...N)=>b.handleMouseleave&&b.handleMouseleave(...N))},[n.createElementVNode("input",{type:"hidden",name:v.name,value:T.currentValue},null,8,D_e),(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.count,N=>(n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.starCls(N)),onMousemove:U=>b.handleMousemove(N,U),key:N,onClick:U=>b.handleClick(N)},[b.showCharacter?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createElementVNode("span",{class:n.normalizeClass([T.prefixCls+"-star-first"]),type:"half"},[v.character!==""?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(v.character),1)],64)):(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(b.iconClasses),type:"half"},null,2))],2),n.createElementVNode("span",{class:n.normalizeClass([T.prefixCls+"-star-second"])},[v.character!==""?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createTextVNode(n.toDisplayString(v.character),1)],64)):(n.openBlock(),n.createElementBlock("i",{key:1,class:n.normalizeClass(b.iconClasses)},null,2))],2)],64)):(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass([T.prefixCls+"-star-content"]),type:"half"},null,2))],42,L_e))),128)),v.showText?n.withDirectives((n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-text"])},[n.renderSlot(h.$slots,"default",{},()=>[n.createElementVNode("span",null,n.toDisplayString(T.currentValue),1),n.createTextVNode(),T.currentValue<=1?(n.openBlock(),n.createElementBlock("span",N_e,n.toDisplayString(h.t("i.rate.star")),1)):(n.openBlock(),n.createElementBlock("span",V_e,n.toDisplayString(h.t("i.rate.stars")),1))])],2)),[[n.vShow,T.currentValue>0]]):n.createCommentVNode("",!0)],34)}var D8=l(B_e,[["render",F_e]]);const $_e={name:"Result",components:{Icon:O},props:{type:{validator(h){return S(h,["success","error","warning"])}},title:{type:String},desc:{type:String},extra:{type:String}},computed:{iconClasses(){return{"ivu-result-icon-success":this.type==="success","ivu-result-icon-error":this.type==="error","ivu-result-icon-warning":this.type==="warning"}}}},U_e={class:"ivu-result"},z_e={key:0,class:"ivu-result-title"},X_e={key:1,class:"ivu-result-desc"},W_e={key:2,class:"ivu-result-extra"},G_e={key:3,class:"ivu-result-actions"};function H_e(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",U_e,[n.createElementVNode("div",{class:n.normalizeClass(["ivu-result-icon",b.iconClasses])},[v.type==="success"?(n.openBlock(),n.createBlock(N,{key:0,type:"ios-checkmark"})):n.createCommentVNode("",!0),v.type==="error"?(n.openBlock(),n.createBlock(N,{key:1,type:"ios-close"})):n.createCommentVNode("",!0),v.type==="warning"?(n.openBlock(),n.createBlock(N,{key:2,type:"ios-information"})):n.createCommentVNode("",!0)],2),v.title||h.$slots.title?(n.openBlock(),n.createElementBlock("div",z_e,[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])])):n.createCommentVNode("",!0),v.desc||h.$slots.desc?(n.openBlock(),n.createElementBlock("div",X_e,[n.renderSlot(h.$slots,"desc",{},()=>[n.createTextVNode(n.toDisplayString(v.desc),1)])])):n.createCommentVNode("",!0),v.extra||h.$slots.extra?(n.openBlock(),n.createElementBlock("div",W_e,[n.renderSlot(h.$slots,"extra",{},()=>[n.createTextVNode(n.toDisplayString(v.extra),1)])])):n.createCommentVNode("",!0),h.$slots.actions?(n.openBlock(),n.createElementBlock("div",G_e,[n.renderSlot(h.$slots,"actions")])):n.createCommentVNode("",!0)])}var L8=l($_e,[["render",H_e]]);const bx="ivu-scroll",Q_e={props:["text","active","spinnerHeight"],components:{Spin:Xa,Icon:O},computed:{wrapperClasses(){return[`${bx}-loader-wrapper`,{[`${bx}-loader-wrapper-active`]:this.active}]},spinnerClasses(){return`${bx}-spinner`},iconClasses(){return`${bx}-spinner-icon`},textClasses(){return`${bx}-loader-text`}}};function j_e(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Spin");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapperClasses)},[n.createElementVNode("div",{class:n.normalizeClass(b.spinnerClasses)},[n.createVNode(U,{fix:""},{default:n.withCtx(()=>[n.createVNode(N,{type:"ios-loading",size:"18",class:n.normalizeClass(b.iconClasses)},null,8,["class"]),v.text?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.textClasses)},n.toDisplayString(v.text),3)):n.createCommentVNode("",!0)]),_:1})],2)],2)}var Y_e=l(Q_e,[["render",j_e]]);const F0="ivu-scroll",N8={sensitivity:10,minimumStartDragOffset:5},y3=()=>Promise.resolve(),q_e={name:"Scroll",mixins:[kn],components:{loader:Y_e},props:{height:{type:[Number,String],default:300},onReachTop:{type:Function},onReachBottom:{type:Function},onReachEdge:{type:Function},loadingText:{type:String},distanceToEdge:[Number,Array],stopSlide:{type:Boolean,default:!1}},data(){const h=this.calculateProximityThreshold();return{showTopLoader:!1,showBottomLoader:!1,showBodyLoader:!1,lastScroll:0,reachedTopScrollLimit:!0,reachedBottomScrollLimit:!1,topRubberPadding:0,bottomRubberPadding:0,rubberRollBackTimeout:!1,isLoading:!1,pointerTouchDown:null,touchScroll:!1,handleScroll:()=>{},pointerUpHandler:()=>{},pointerMoveHandler:()=>{},topProximityThreshold:h[0],bottomProximityThreshold:h[1]}},computed:{wrapClasses(){return`${F0}-wrapper`},scrollContainerClasses(){return[`${F0}-container`,{[`${F0}-container-loading`]:this.showBodyLoader&&this.stopSlide}]},slotContainerClasses(){return[`${F0}-content`,{[`${F0}-content-loading`]:this.showBodyLoader}]},loaderClasses(){return`${F0}-loader`},wrapperPadding(){return{paddingTop:this.topRubberPadding+"px",paddingBottom:this.bottomRubberPadding+"px"}},localeLoadingText(){return this.loadingText===void 0?this.t("i.select.loading"):this.loadingText}},methods:{waitOneSecond(){return new Promise(h=>{setTimeout(h,1e3)})},calculateProximityThreshold(){const h=this.distanceToEdge;return typeof h>"u"?[20,20]:Array.isArray(h)?h:[h,h]},onCallback(h){if(this.isLoading=!0,this.showBodyLoader=!0,h>0)this.showTopLoader=!0,this.topRubberPadding=20;else{this.showBottomLoader=!0,this.bottomRubberPadding=20;let E=0;const T=this.$refs.scrollContainer,b=T.scrollTop;for(let N=0;N<20;N++)setTimeout(()=>{E=Math.max(E,this.$refs.bottomLoader.getBoundingClientRect().height),T.scrollTop=b+E},N*50)}const f=[this.waitOneSecond(),this.onReachEdge?this.onReachEdge(h):y3()];f.push(h>0?this.onReachTop?this.onReachTop():y3():this.onReachBottom?this.onReachBottom():y3());let v=setTimeout(()=>{this.reset()},5e3);Promise.all(f).then(()=>{clearTimeout(v),this.reset()})},reset(){["showTopLoader","showBottomLoader","showBodyLoader","isLoading","reachedTopScrollLimit","reachedBottomScrollLimit"].forEach(h=>this[h]=!1),this.lastScroll=0,this.topRubberPadding=0,this.bottomRubberPadding=0,clearInterval(this.rubberRollBackTimeout),this.touchScroll&&setTimeout(()=>{a(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.removeEventListener("touchmove",this.pointerMoveHandler),this.touchScroll=!1},500)},onWheel(h){if(this.isLoading)return;const f=h.wheelDelta?h.wheelDelta:-(h.detail||h.deltaY);this.stretchEdge(f)},stretchEdge(h){if(clearTimeout(this.rubberRollBackTimeout),!this.onReachEdge){if(h>0){if(!this.onReachTop)return}else if(!this.onReachBottom)return}this.rubberRollBackTimeout=setTimeout(()=>{this.isLoading||this.reset()},250),h>0&&this.reachedTopScrollLimit?(this.topRubberPadding+=5-this.topRubberPadding/5,this.topRubberPadding>this.topProximityThreshold&&this.onCallback(1)):h<0&&this.reachedBottomScrollLimit?(this.bottomRubberPadding+=6-this.bottomRubberPadding/4,this.bottomRubberPadding>this.bottomProximityThreshold&&this.onCallback(-1)):this.onScroll()},onScroll(){const h=this.$refs.scrollContainer;if(this.isLoading||!h)return;const f=Math.sign(this.lastScroll-h.scrollTop),v=h.scrollHeight-h.clientHeight-h.scrollTop,E=this.topProximityThreshold<0?this.topProximityThreshold:0,T=this.bottomProximityThreshold<0?this.bottomProximityThreshold:0;f==-1&&v+T<=N8.sensitivity?this.reachedBottomScrollLimit=!0:f>=0&&h.scrollTop+E<=0?this.reachedTopScrollLimit=!0:(this.reachedTopScrollLimit=!1,this.reachedBottomScrollLimit=!1,this.lastScroll=h.scrollTop)},getTouchCoordinates(h){return{x:h.touches[0].pageX,y:h.touches[0].pageY}},onPointerDown(h){if(!this.isLoading){if(h.type=="touchstart"){const f=this.$refs.scrollContainer;this.reachedTopScrollLimit?f.scrollTop=5:this.reachedBottomScrollLimit&&(f.scrollTop-=5)}h.type=="touchstart"&&this.$refs.scrollContainer.scrollTop==0&&(this.$refs.scrollContainer.scrollTop=5),this.pointerTouchDown=this.getTouchCoordinates(h),o(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.parentElement.addEventListener("touchmove",f=>{f.stopPropagation(),this.pointerMoveHandler(f)},{passive:!1,useCapture:!0})}},onPointerMove(h){if(!this.pointerTouchDown||this.isLoading)return;const f=this.getTouchCoordinates(h).y-this.pointerTouchDown.y;this.stretchEdge(f),this.touchScroll||Math.abs(f)>N8.minimumStartDragOffset&&(this.touchScroll=!0)},onPointerUp(){this.pointerTouchDown=null}},created(){this.handleScroll=ZS(this.onScroll,150,{leading:!1}),this.pointerUpHandler=this.onPointerUp.bind(this),this.pointerMoveHandler=ZS(this.onPointerMove,50,{leading:!1})}};function Z_e(h,f,v,E,T,b){const N=n.resolveComponent("loader");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses),style:{"touch-action":"none"}},[n.createElementVNode("div",{class:n.normalizeClass(b.scrollContainerClasses),style:n.normalizeStyle({height:v.height+"px"}),onScroll:f[0]||(f[0]=(...U)=>T.handleScroll&&T.handleScroll(...U)),onWheel:f[1]||(f[1]=(...U)=>b.onWheel&&b.onWheel(...U)),onTouchstart:f[2]||(f[2]=(...U)=>b.onPointerDown&&b.onPointerDown(...U)),ref:"scrollContainer"},[n.createElementVNode("div",{class:n.normalizeClass(b.loaderClasses),style:n.normalizeStyle({paddingTop:b.wrapperPadding.paddingTop}),ref:"toploader"},[n.createVNode(N,{text:b.localeLoadingText,active:T.showTopLoader},null,8,["text","active"])],6),n.createElementVNode("div",{class:n.normalizeClass(b.slotContainerClasses),ref:"scrollContent"},[n.renderSlot(h.$slots,"default")],2),n.createElementVNode("div",{class:n.normalizeClass(b.loaderClasses),style:n.normalizeStyle({paddingBottom:b.wrapperPadding.paddingBottom}),ref:"bottomLoader"},[n.createVNode(N,{text:b.localeLoadingText,active:T.showBottomLoader},null,8,["text","active"])],6)],38)],2)}var V8=l(q_e,[["render",Z_e]]);const K_e="COMPLETE",F8="CANCELED";function J_e(h){if(s&&"requestAnimationFrame"in window)return window.requestAnimationFrame(h);setTimeout(h,16)}function $8(h,f,v){h===window?h.scrollTo(f,v):(h.scrollLeft=f,h.scrollTop=v)}function exe(h,f,v){if(!s)return;let E=h.getBoundingClientRect(),T=null,b=null,N=null,U=null,Y=null,W=null,Z=null,fe=v&&v.left!=null?v.left:.5,Te=v&&v.top!=null?v.top:.5,Se=v&&v.leftOffset!=null?v.leftOffset:0,we=v&&v.topOffset!=null?v.topOffset:0,ce=fe,Be=Te;if(f===window)W=Math.min(E.width,window.innerWidth),Z=Math.min(E.height,window.innerHeight),b=E.left+window.pageXOffset-window.innerWidth*ce+W*ce,N=E.top+window.pageYOffset-window.innerHeight*Be+Z*Be,b-=Se,N-=we,U=b-window.pageXOffset,Y=N-window.pageYOffset;else{W=E.width,Z=E.height,T=f.getBoundingClientRect();let Zt=E.left-(T.left-f.scrollLeft),Ct=E.top-(T.top-f.scrollTop);b=Zt+W*ce-f.clientWidth*ce,N=Ct+Z*Be-f.clientHeight*Be,b=Math.max(Math.min(b,f.scrollWidth-f.clientWidth),0),N=Math.max(Math.min(N,f.scrollHeight-f.clientHeight),0),b-=Se,N-=we,U=b-f.scrollLeft,Y=N-f.scrollTop}return{x:b,y:N,differenceX:U,differenceY:Y}}function U8(h){J_e(function(){let f=h.scrollOption;if(!f)return;let v=exe(f.target,h,f.align),E=Date.now()-f.startTime,T=Math.min(1/f.time*E,1);if(E>f.time+20)return $8(h,v.x,v.y),h.scrollOption=null,f.end(K_e);let b=1-f.ease(T);$8(h,v.x-v.differenceX*b,v.y-v.differenceY*b),U8(h)})}function txe(h,f,v,E){let T=!f.scrollOption,b=f.scrollOption,N=Date.now(),U;b&&b.end(F8);function Y(W){f.scrollOption=null,f.parentElement&&f.parentElement.scrollOption&&f.parentElement.scrollOption.end(W),E(W),f.removeEventListener("touchstart",U)}f.scrollOption={startTime:b?b.startTime:Date.now(),target:h,time:v.time+(b?N-b.startTime:0),ease:v.ease,align:v.align,end:Y},U=Y.bind(null,F8),f.addEventListener("touchstart",U),T&&U8(f)}function z8(h){if(s)return h===window||(h.scrollHeight!==h.clientHeight||h.scrollWidth!==h.clientWidth)&&getComputedStyle(h).overflow!=="hidden"}function ixe(){return!0}function _3(h,f,v){if(!h)return;typeof f=="function"&&(v=f,f=null),f||(f={}),f.time=isNaN(f.time)?1e3:f.time,f.ease=f.ease||function(Y){return 1-Math.pow(1-Y,Y/2)};let E=h.parentElement,T=0;function b(Y){T-=1,!T&&v&&v(Y)}let N=f.validTarget||ixe,U=f.isScrollable;for(;E;){if(N(E,T)&&(U?U(E,z8):z8(E))&&(T+=1,txe(h,E,f,b)),E=E.parentElement,!E)return;E.tagName==="BODY"&&(E=window)}}function nxe(h){if(s&&"requestAnimationFrame"in window)return window.requestAnimationFrame(h);setTimeout(h,16)}function x3(h,f,v){if(!h)return;typeof f=="function"&&(v=f,f=null),f||(f={}),f.time=isNaN(f.time)?500:f.time;const E=h.scrollTop,T=f.to||0,b=Math.abs(E-T),N=Math.ceil(b/f.time*50);function U(Y,W,Z){if(Y===W){v&&v();return}let fe=Y+Z>W?W:Y+Z;Y>W&&(fe=Y-Z<W?W:Y-Z),h.scrollTop=fe,nxe(()=>U(fe,W,Z))}U(E,T,N)}const Mu="ivu-layout-sider";ne();const rxe={name:"Sider",emits:["on-collapse","update:modelValue"],props:{modelValue:{type:Boolean,default:!1},width:{type:[Number,String],default:200},collapsedWidth:{type:[Number,String],default:64},hideTrigger:{type:Boolean,default:!1},breakpoint:{type:String,validator(h){return S(h,["xs","sm","md","lg","xl","xxl"])}},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},reverseArrow:{type:Boolean,default:!1}},data(){return{prefixCls:Mu,mediaMatched:!1}},computed:{wrapClasses(){return[`${Mu}`,this.siderWidth?"":`${Mu}-zero-width`,this.modelValue?`${Mu}-collapsed`:""]},wrapStyles(){return{width:`${this.siderWidth}px`,minWidth:`${this.siderWidth}px`,maxWidth:`${this.siderWidth}px`,flex:`0 0 ${this.siderWidth}px`}},triggerClasses(){return[`${Mu}-trigger`,this.modelValue?`${Mu}-trigger-collapsed`:""]},childClasses(){return`${this.prefixCls}-children`},zeroWidthTriggerClasses(){return[`${Mu}-zero-width-trigger`,this.reverseArrow?`${Mu}-zero-width-trigger-left`:""]},triggerIconClasses(){return["ivu-icon",`ivu-icon-ios-arrow-${this.reverseArrow?"forward":"back"}`,`${Mu}-trigger-icon`]},siderWidth(){return this.collapsible?this.modelValue?this.mediaMatched?0:parseInt(this.collapsedWidth):parseInt(this.width):this.width},showZeroTrigger(){return this.collapsible?this.mediaMatched&&!this.hideTrigger||parseInt(this.collapsedWidth)===0&&this.modelValue&&!this.hideTrigger:!1},showBottomTrigger(){return this.collapsible?!this.mediaMatched&&!this.hideTrigger:!1}},methods:{toggleCollapse(){let h=this.collapsible?!this.modelValue:!1;this.$emit("update:modelValue",h)},matchMedia(){if(!s)return;let h;window.matchMedia&&(h=window.matchMedia);let f=this.mediaMatched;this.mediaMatched=h(`(max-width: ${J[this.breakpoint]})`).matches,this.mediaMatched!==f&&this.$emit("update:modelValue",this.mediaMatched)},onWindowResize(){this.matchMedia()}},watch:{modelValue(h){this.$emit("on-collapse",h)}},mounted(){this.defaultCollapsed&&this.$emit("update:modelValue",this.defaultCollapsed),this.breakpoint!==void 0&&(o(window,"resize",this.onWindowResize),this.matchMedia())},beforeUnmount(){this.breakpoint!==void 0&&a(window,"resize",this.onWindowResize)}},sxe=[n.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-menu"},null,-1)];function oxe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses),style:n.normalizeStyle(b.wrapStyles)},[n.withDirectives(n.createElementVNode("span",{onClick:f[0]||(f[0]=(...N)=>b.toggleCollapse&&b.toggleCollapse(...N)),class:n.normalizeClass(b.zeroWidthTriggerClasses)},sxe,2),[[n.vShow,b.showZeroTrigger]]),n.createElementVNode("div",{class:n.normalizeClass(b.childClasses)},[n.renderSlot(h.$slots,"default")],2),n.renderSlot(h.$slots,"trigger",{},()=>[n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass(b.triggerClasses),onClick:f[1]||(f[1]=(...N)=>b.toggleCollapse&&b.toggleCollapse(...N)),style:n.normalizeStyle({width:b.siderWidth+"px"})},[n.createElementVNode("i",{class:n.normalizeClass(b.triggerIconClasses)},null,2)],6),[[n.vShow,b.showBottomTrigger]])])],6)}var X8=l(rxe,[["render",oxe]]);const af="ivu-skeleton-item",axe={name:"SkeletonItem",components:{Icon:O},inject:{SkeletonInstance:{default:null}},props:{animated:{type:Boolean,default:!1},type:{validator(h){return S(h,["circle","square","rect","image"])},default:"rect"},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},width:{type:[String,Number]},height:{type:[String,Number]},block:{type:Boolean,default:!1},imgSrc:{type:String}},data(){return{prefixCls:af}},computed:{classes(){return[af,af+"-"+this.type,af+"-"+this.type+"-"+this.size,{[af+"-animated"]:this.animated||!!this.SkeletonInstance&&this.SkeletonInstance.animated,[af+"-inline"]:!this.block,[af+"-with-image"]:this.showImage,[af+"-round"]:!!this.SkeletonInstance&&this.SkeletonInstance.round}]},styles(){const h={};return["rect","image"].includes(this.type)&&(this.width&&(h.width=typeof this.width=="number"?`${this.width}px`:this.width),this.height&&(h.height=typeof this.height=="number"?`${this.height}px`:this.height),this.showImage&&(h.background=`no-repeat url(${this.imgSrc}) center center`,h.backgroundSize="contain")),h},showIcon(){return this.type==="image"&&!this.imgSrc},showImage(){return this.type==="image"&&!!this.imgSrc},iconSize(){let h=16;return this.size==="large"&&(h=32),this.size==="small"&&(h=10),h}}};function lxe(h,f,v,E,T,b){const N=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(b.styles)},[b.showIcon?(n.openBlock(),n.createBlock(N,{key:0,class:n.normalizeClass(T.prefixCls+"-image-icon"),type:"ios-image",size:b.iconSize},null,8,["class","size"])):n.createCommentVNode("",!0)],6)}var b3=l(axe,[["render",lxe]]);const fm="ivu-skeleton",hxe={name:"Skeleton",components:{SkeletonItem:b3,Row:qd,Col:yc},provide(){return{SkeletonInstance:this}},props:{animated:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},paragraph:{validator(h){return typeof h=="number"?h>=1:typeof h.rows=="number"&&h.rows>=1},type:[Number,Object],default:3},title:{validator(h){return typeof h=="object"&&h.width?["number","string"].includes(typeof h.width):!0},type:[Boolean,Object],default:!0},avatar:{validator(h){if(typeof h=="object"){if(h.type)return S(h.type,["circle","square"]);if(h.size)return S(h.size,["small","large","default"])}return!0},type:[Boolean,Object],default:!1}},data(){return{prefixCls:fm}},computed:{classes(){return[fm,{[fm+"-with-title"]:this.showTitle,[fm+"-with-avatar"]:this.showAvatar}]},rows(){return typeof this.paragraph=="number"?this.paragraph:this.paragraph.rows},rowsCount(){return this.rows+Number(this.showTitle)},showTitle(){return!!this.title},titleWidth(){return typeof this.title=="object"&&this.title.width?typeof this.title.width=="string"?this.title.width:`${this.title.width}px`:""},showAvatar(){return!!this.avatar},avatarType(){return typeof this.avatar=="object"&&this.avatar.type?this.avatar.type:"circle"},avatarSize(){return typeof this.avatar=="object"&&this.avatar.size?this.avatar.size:!this.$VIEWUI||this.$VIEWUI.size===""?"default":this.$VIEWUI.size}},methods:{rowClasses(h){return[fm+"-item-inner",{[fm+"-item-round"]:this.round,[fm+"-item-title"]:this.showTitle&&h===1}]},rowWidth(h){if(this.showTitle&&h===1)return this.titleWidth||"38%";if(typeof this.paragraph=="object"){if(typeof this.paragraph.width=="string")return this.paragraph.width;if(typeof this.paragraph.width=="number")return`${this.paragraph.width}px`;const f=h-1-Number(this.showTitle);if(Array.isArray(this.paragraph.width)&&this.paragraph.width[f])return typeof this.paragraph.width[f]=="number"?`${this.paragraph.width[f]}px`:this.paragraph.width[f]}return h===this.rowsCount?"62%":"100%"}}};function cxe(h,f,v,E,T,b){const N=n.resolveComponent("SkeletonItem"),U=n.resolveComponent("Col"),Y=n.resolveComponent("Row");return v.loading?(n.openBlock(),n.createElementBlock("div",n.mergeProps({key:0},h.$attrs,{class:b.classes}),[v.loading?n.renderSlot(h.$slots,"template",{key:0},()=>[n.createVNode(Y,null,{default:n.withCtx(()=>[b.showAvatar?(n.openBlock(),n.createBlock(U,{key:0,flex:"0"},{default:n.withCtx(()=>[n.createVNode(N,{type:b.avatarType,size:b.avatarSize,animated:v.animated,class:n.normalizeClass(T.prefixCls+"-item-avatar")},null,8,["type","size","animated","class"])]),_:1})):n.createCommentVNode("",!0),n.createVNode(U,{flex:"1"},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.rowsCount,W=>(n.openBlock(),n.createBlock(N,{key:W,class:n.normalizeClass(b.rowClasses(W)),animated:v.animated,width:b.rowWidth(W),block:""},null,8,["class","animated","width"]))),128))]),_:1})]),_:1})]):n.createCommentVNode("",!0)],16)):n.renderSlot(h.$slots,"default",n.normalizeProps(n.mergeProps({key:1},h.$attrs)))}var W8=l(hxe,[["render",cxe]]),uxe={name:"SliderMarker",props:{mark:{type:[String,Object]}},render(){let h=typeof this.mark=="string"?this.mark:[this.mark.label];return n.h("div",{class:"ivu-slider-marks-item",style:this.mark.style||{}},h)}};const Pu="ivu-slider",dxe={name:"Slider",mixins:[Ui],emits:["update:modelValue","on-input","on-change"],components:{InputNumber:o3,Tooltip:Su,SliderMarker:uxe},inject:{ModalInstance:{default:null},DrawerInstance:{default:null}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},disabled:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},inputSize:{type:String,default:"default",validator(h){return S(h,["small","large","default"])}},showStops:{type:Boolean,default:!1},tipFormat:{type:Function,default(h){return h}},showTip:{type:String,default:"hover",validator(h){return S(h,["hover","always","never"])}},name:{type:String},activeChange:{type:Boolean,default:!0},marks:{type:Object}},data(){let h=this.checkLimits(Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]);return this.range&&this.modelValue===null&&(h=[0,0]),{prefixCls:Pu,currentValue:h,dragging:!1,pointerDown:"",startX:0,currentX:0,startPos:0,oldValue:[...h],valueIndex:{min:0,max:1},sliderWidth:0,isValueNull:!1,id:ie(6)}},watch:{modelValue(h){h===null&&(this.isValueNull=!0),h=this.checkLimits(Array.isArray(h)?h:[h]),!this.dragging&&(h[0]!==this.currentValue[0]||h[1]!==this.currentValue[1])&&(this.isValueNull&&this.range?this.currentValue=[0,0]:this.currentValue=h)},exportValue(h){n.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()});const f=this.range?h:h[0];this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",f),this.$emit("on-input",f)}},computed:{classes(){return[`${Pu}`,{[`${Pu}-input`]:this.showInput&&!this.range,[`${Pu}-range`]:this.range,[`${Pu}-disabled`]:this.itemDisabled}]},minButtonClasses(){return[`${Pu}-button`,{[`${Pu}-button-dragging`]:this.pointerDown==="min"}]},maxButtonClasses(){return[`${Pu}-button`,{[`${Pu}-button-dragging`]:this.pointerDown==="max"}]},exportValue(){const h=(String(this.step).split(".")[1]||"").length;return this.currentValue.map(f=>Number(f.toFixed(h)))},minPosition(){return(this.currentValue[0]-this.min)/this.valueRange*100},maxPosition:function(){return(this.currentValue[1]-this.min)/this.valueRange*100},barStyle(){const h={width:(this.currentValue[0]-this.min)/this.valueRange*100+"%"};return this.range&&(h.left=(this.currentValue[0]-this.min)/this.valueRange*100+"%",h.width=(this.currentValue[1]-this.currentValue[0])/this.valueRange*100+"%"),h},stops(){let h=this.valueRange/this.step,f=[],v=100*this.step/this.valueRange;for(let E=1;E<h;E++)f.push(E*v);return f},markList(){return this.marks?Object.keys(this.marks).map(parseFloat).sort((h,f)=>h-f).filter(h=>h<=this.max&&h>=this.min).map(h=>({point:h,position:(h-this.min)*100/(this.max-this.min),mark:this.marks[h]})):[]},tipDisabled(){return this.tipFormat(this.currentValue[0])===null||this.showTip==="never"},valueRange(){return this.max-this.min},firstPosition(){return this.currentValue[0]},secondPosition(){return this.currentValue[1]}},methods:{getPointerX(h){return h.type.indexOf("touch")!==-1?h.touches[0].clientX:h.clientX},checkLimits([h,f]){return h=Math.max(this.min,h),h=Math.min(this.max,h),f=Math.max(this.min,h,f),f=Math.min(this.max,f),[h,f]},getCurrentValue(h,f){if(this.itemDisabled)return;const v=this.valueIndex[f];if(typeof v<"u")return this.currentValue[v]},onKeyLeft(h,f){const v=this.getCurrentValue(h,f);Number.isFinite(v)&&this.changeButtonPosition(v-this.step,f)},onKeyRight(h,f){const v=this.getCurrentValue(h,f);Number.isFinite(v)&&this.changeButtonPosition(v+this.step,f)},onPointerDown(h,f){this.itemDisabled||(h.preventDefault(),this.pointerDown=f,this.onPointerDragStart(h),o(window,"mousemove",this.onPointerDrag),o(window,"touchmove",this.onPointerDrag),o(window,"mouseup",this.onPointerDragEnd),o(window,"touchend",this.onPointerDragEnd))},onPointerDragStart(h){this.dragging=!1,this.startX=this.getPointerX(h),this.startPos=this[`${this.pointerDown}Position`]*this.valueRange/100+this.min},onPointerDrag(h){this.dragging=!0,this.$refs[`${this.pointerDown}Tooltip`].visible=!0,this.currentX=this.getPointerX(h);const f=(this.currentX-this.startX)/this.sliderWidth*this.valueRange;this.changeButtonPosition(this.startPos+f)},onPointerDragEnd(){this.dragging&&(this.dragging=!1,this.$refs[`${this.pointerDown}Tooltip`].visible=!1,this.emitChange()),this.pointerDown="",a(window,"mousemove",this.onPointerDrag),a(window,"touchmove",this.onPointerDrag),a(window,"mouseup",this.onPointerDragEnd),a(window,"touchend",this.onPointerDragEnd)},changeButtonPosition(h,f){const v=f||this.pointerDown,E=v==="min"?0:1;v==="min"?h=this.checkLimits([h,this.max])[0]:h=this.checkLimits([this.min,h])[1];const T=this.handleDecimal(h,this.step),b=this.currentValue;b[E]=h-T,this.range&&(v==="min"&&b[0]>b[1]&&(b[1]=b[0]),v==="max"&&b[0]>b[1]&&(b[0]=b[1])),this.currentValue=[...b],this.dragging||this.currentValue[E]!==this.oldValue[E]&&(this.emitChange(),this.oldValue[E]=this.currentValue[E])},handleDecimal(h,f){if(f<1){let v=f.toString(),E=1,T;try{T=v.split(".")[1].length}catch{T=0}return E=Math.pow(10,T),h*E%(f*E)/E}else return h%f},emitChange(){const h=this.range?this.exportValue:this.exportValue[0];this.$emit("on-change",h),this.handleFormItemChange("change",h)},sliderClick(h){if(this.itemDisabled)return;const f=this.getPointerX(h),v=this.$refs.slider.getBoundingClientRect().left;let E=(f-v)/this.sliderWidth*this.valueRange+this.min,T=E/this.valueRange*100;!this.range||T<=this.minPosition?this.changeButtonPosition(E,"min"):T>=this.maxPosition?this.changeButtonPosition(E,"max"):this.changeButtonPosition(E,E-this.firstPosition<=this.secondPosition-E?"min":"max")},handleInputChange(h){this.currentValue=[h===0?0:h||this.min,this.currentValue[1]],this.emitChange()},handleFocus(h){this.$refs[`${h}Tooltip`].handleShowPopper()},handleBlur(h){this.$refs[`${h}Tooltip`].handleClosePopper()},handleSetSliderWidth(){this.sliderWidth=parseInt(I(this.$refs.slider,"width"),10)},handleOnVisibleChange(h){h&&this.showTip==="always"&&(this.$refs.minTooltip.doDestroy(),this.range&&this.$refs.maxTooltip.doDestroy(),n.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()}))},addSlider(h){const f=this[h];!f||(f.sliderList||(f.sliderList=[]),f.sliderList.push({id:this.id,slider:this}))},removeSlider(h){const f=this[h];if(!f||!f.sliderList)return;const v=f.sliderList.findIndex(E=>E.id===this.id);f.sliderList.splice(v,1)}},mounted(){this.addSlider("ModalInstance"),this.addSlider("DrawerInstance"),this.observer=N0(),this.observer.listenTo(this.$refs.slider,this.handleSetSliderWidth)},beforeUnmount(){this.removeSlider("ModalInstance"),this.removeSlider("DrawerInstance"),this.observer.removeListener(this.$refs.slider,this.handleSetSliderWidth)}},fxe=["name","value"],pxe={class:"ivu-slider-marks"};function mxe(h,f,v,E,T,b){const N=n.resolveComponent("Input-number"),U=n.resolveComponent("SliderMarker"),Y=n.resolveComponent("Tooltip");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[!v.range&&v.showInput?(n.openBlock(),n.createBlock(N,{key:0,min:v.min,size:v.inputSize,max:v.max,step:v.step,modelValue:b.exportValue[0],disabled:h.itemDisabled,"active-change":v.activeChange,onOnChange:b.handleInputChange},null,8,["min","size","max","step","modelValue","disabled","active-change","onOnChange"])):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-wrap"]),ref:"slider",onClick:f[19]||(f[19]=n.withModifiers((...W)=>b.sliderClick&&b.sliderClick(...W),["self"]))},[n.createElementVNode("input",{type:"hidden",name:v.name,value:b.exportValue},null,8,fxe),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-bar"]),style:n.normalizeStyle(b.barStyle),onClick:f[0]||(f[0]=n.withModifiers((...W)=>b.sliderClick&&b.sliderClick(...W),["self"]))},null,6),v.showStops?(n.openBlock(!0),n.createElementBlock(n.Fragment,{key:0},n.renderList(b.stops,W=>(n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls+"-stop"]),key:W,style:n.normalizeStyle({left:W+"%"}),onClick:f[1]||(f[1]=n.withModifiers((...Z)=>b.sliderClick&&b.sliderClick(...Z),["self"]))},null,6))),128)):n.createCommentVNode("",!0),b.markList.length>0?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.markList,(W,Z)=>(n.openBlock(),n.createElementBlock("div",{key:Z,class:n.normalizeClass([T.prefixCls+"-stop"]),style:n.normalizeStyle({left:W.position+"%"}),onClick:f[2]||(f[2]=n.withModifiers((...fe)=>b.sliderClick&&b.sliderClick(...fe),["self"]))},null,6))),128)),n.createElementVNode("div",pxe,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.markList,(W,Z)=>(n.openBlock(),n.createBlock(U,{key:Z,mark:W.mark,style:n.normalizeStyle({left:W.position+"%"}),onClick:b.sliderClick},null,8,["mark","style","onClick"]))),128))])],64)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-button-wrap"]),style:n.normalizeStyle({left:b.minPosition+"%"}),onTouchstart:f[9]||(f[9]=W=>b.onPointerDown(W,"min")),onMousedown:f[10]||(f[10]=W=>b.onPointerDown(W,"min"))},[n.createVNode(Y,{controlled:T.pointerDown==="min",placement:"top",content:v.tipFormat(b.exportValue[0]),disabled:b.tipDisabled,always:v.showTip==="always",ref:"minTooltip"},{default:n.withCtx(()=>[n.createElementVNode("div",{class:n.normalizeClass(b.minButtonClasses),tabindex:"0",onFocus:f[3]||(f[3]=W=>b.handleFocus("min")),onBlur:f[4]||(f[4]=W=>b.handleBlur("min")),onKeydown:[f[5]||(f[5]=n.withKeys(W=>b.onKeyLeft(W,"min"),["left"])),f[6]||(f[6]=n.withKeys(W=>b.onKeyLeft(W,"min"),["down"])),f[7]||(f[7]=n.withKeys(W=>b.onKeyRight(W,"min"),["right"])),f[8]||(f[8]=n.withKeys(W=>b.onKeyRight(W,"min"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38),v.range?(n.openBlock(),n.createElementBlock("div",{key:2,class:n.normalizeClass([T.prefixCls+"-button-wrap"]),style:n.normalizeStyle({left:b.maxPosition+"%"}),onTouchstart:f[17]||(f[17]=W=>b.onPointerDown(W,"max")),onMousedown:f[18]||(f[18]=W=>b.onPointerDown(W,"max"))},[n.createVNode(Y,{controlled:T.pointerDown==="max",placement:"top",content:v.tipFormat(b.exportValue[1]),disabled:b.tipDisabled,always:v.showTip==="always",ref:"maxTooltip"},{default:n.withCtx(()=>[n.createElementVNode("div",{class:n.normalizeClass(b.maxButtonClasses),tabindex:"0",onFocus:f[11]||(f[11]=W=>b.handleFocus("max")),onBlur:f[12]||(f[12]=W=>b.handleBlur("max")),onKeydown:[f[13]||(f[13]=n.withKeys(W=>b.onKeyLeft(W,"max"),["left"])),f[14]||(f[14]=n.withKeys(W=>b.onKeyLeft(W,"max"),["down"])),f[15]||(f[15]=n.withKeys(W=>b.onKeyRight(W,"max"),["right"])),f[16]||(f[16]=n.withKeys(W=>b.onKeyRight(W,"max"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38)):n.createCommentVNode("",!0)],2)],2)}var G8=l(dxe,[["render",mxe]]);const gxe={small:8,default:16,large:24},H8={name:"Space",props:{size:{type:[String,Number,Array],validator(h){const f=["small","large","default"];return typeof h=="string"?S(h,f):Array.isArray(h)?h.length>0&&h.every(v=>typeof v=="number"||S(v,f)):!0},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||!h.$VIEWUI.space||h.$VIEWUI.space.size===""?"small":h.$VIEWUI.space.size}},direction:{type:String,validator(h){return S(h,["horizontal","vertical"])},default:"horizontal"},align:{type:String,validator(h){return S(h,["start","end","center","baseline","stretch"])}},wrap:{type:Boolean,default:!1},split:{type:Boolean,default:!1},type:{type:String,validator(h){return S(h,["inline-flex","flex"])},default:"inline-flex"}},computed:{mergedAlign(){if(!this.align){if(this.direction==="horizontal")return"center";if(this.type==="flex")return"stretch"}return this.align},classes(){return["ivu-space",`ivu-space-${this.direction}`,{"ivu-space-flex":this.type==="flex","ivu-space-wrap":this.wrap,[`ivu-space-${this.mergedAlign}`]:this.mergedAlign}]},styles(){const h={};return["number","string"].includes(typeof this.size)&&(h.gap=this.getSize(this.size)),Array.isArray(this.size)&&(this.size.length===1?h.columnGap=this.getSize(this.size[0]):this.size.length>1&&(h.columnGap=this.getSize(this.size[0]),h.rowGap=this.getSize(this.size[1]))),h}},methods:{getSize(h){return`${typeof h=="string"?gxe[h]:h||0}px`},filterEmpty(h=[]){const f=[];return h.forEach(v=>{Array.isArray(v)?f.push(...v):v.type===n.Fragment?f.push(...v.children):f.push(v)}),f.filter(v=>!this.isEmptyElement(v))},isEmptyElement(h){return h&&(h.type===n.Comment||h.type===n.Fragment&&h.children.length===0||h.type===n.Text&&h.children.trim()==="")}},render(){const h=this.filterEmpty(this.$slots.default?this.$slots.default():[]),f=h.length;if(f===0)return null;let v=null;return this.split&&!this.$slots.split?v=n.h(GS,{type:"vertical"}):this.$slots.split&&(v=this.$slots.split()),n.h("div",{class:this.classes,style:this.styles},h.map((E,T)=>{const b=n.h("div",{class:"ivu-space-item"},[E]);return v&&T+1<f?[b,n.h("div",{class:"ivu-space-split"},[v])]:b}))}},vxe={name:"Trigger",props:{mode:String},data(){return{prefix:"ivu-split-trigger",initOffset:0}},computed:{isVertical(){return this.mode==="vertical"},classes(){return[this.prefix,this.isVertical?`${this.prefix}-vertical`:`${this.prefix}-horizontal`]},barConClasses(){return[`${this.prefix}-bar-con`,this.isVertical?"vertical":"horizontal"]}}};function yxe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.createElementVNode("div",{class:n.normalizeClass(b.barConClasses)},[f[0]||(n.setBlockTracking(-1),f[0]=(n.openBlock(),n.createElementBlock(n.Fragment,null,n.renderList(8,N=>n.createElementVNode("i",{class:n.normalizeClass(`${T.prefix}-bar`),key:`trigger-${N}`},null,2)),64)),n.setBlockTracking(1),f[0])],2)],2)}var _xe=l(vxe,[["render",yxe]]);const xxe={name:"Split",components:{Trigger:_xe},emits:["update:modelValue","on-move-start","on-moving","on-move-end"],props:{modelValue:{type:[Number,String],default:.5},mode:{validator(h){return S(h,["horizontal","vertical"])},default:"horizontal"},min:{type:[Number,String],default:"40px"},max:{type:[Number,String],default:"40px"}},data(){return{prefix:"ivu-split",offset:0,oldOffset:0,isMoving:!1,computedMin:0,computedMax:0,currentValue:.5}},computed:{wrapperClasses(){return[`${this.prefix}-wrapper`,this.isMoving?"no-select":""]},paneClasses(){return[`${this.prefix}-pane`,{[`${this.prefix}-pane-moving`]:this.isMoving}]},isHorizontal(){return this.mode==="horizontal"},anotherOffset(){return 100-this.offset},valueIsPx(){return typeof this.modelValue=="string"},offsetSize(){return this.isHorizontal?"offsetWidth":"offsetHeight"}},methods:{px2percent(h,f){return parseFloat(h)/parseFloat(f)},getComputedThresholdValue(h){let f=this.$refs.outerWrapper[this.offsetSize];return this.valueIsPx?typeof this[h]=="string"?this[h]:f*this[h]:typeof this[h]=="string"?this.px2percent(this[h],f):this[h]},getMin(h,f){return this.valueIsPx?`${Math.min(parseFloat(h),parseFloat(f))}px`:Math.min(h,f)},getMax(h,f){return this.valueIsPx?`${Math.max(parseFloat(h),parseFloat(f))}px`:Math.max(h,f)},getAnotherOffset(h){let f=0;return this.valueIsPx?f=`${this.$refs.outerWrapper[this.offsetSize]-parseFloat(h)}px`:f=1-h,f},handleMove(h){let f=(this.isHorizontal?h.pageX:h.pageY)-this.initOffset,v=this.$refs.outerWrapper[this.offsetSize],E=this.valueIsPx?`${parseFloat(this.oldOffset)+f}px`:this.px2percent(v*this.oldOffset+f,v),T=this.getAnotherOffset(E);parseFloat(E)<=parseFloat(this.computedMin)&&(E=this.getMax(E,this.computedMin)),parseFloat(T)<=parseFloat(this.computedMax)&&(E=this.getAnotherOffset(this.getMax(T,this.computedMax))),h.atMin=this.modelValue===this.computedMin,h.atMax=this.valueIsPx?this.getAnotherOffset(this.modelValue)===this.computedMax:this.getAnotherOffset(this.modelValue).toFixed(5)===this.computedMax.toFixed(5),this.$emit("update:modelValue",E),this.$emit("on-moving",h)},handleUp(){this.isMoving=!1,a(document,"mousemove",this.handleMove),a(document,"mouseup",this.handleUp),this.$emit("on-move-end")},handleMousedown(h){this.initOffset=this.isHorizontal?h.pageX:h.pageY,this.oldOffset=this.modelValue,this.isMoving=!0,o(document,"mousemove",this.handleMove),o(document,"mouseup",this.handleUp),this.$emit("on-move-start")},computeOffset(){n.nextTick(()=>{this.computedMin=this.getComputedThresholdValue("min"),this.computedMax=this.getComputedThresholdValue("max"),this.offset=(this.valueIsPx?this.px2percent(this.modelValue,this.$refs.outerWrapper[this.offsetSize]):this.modelValue)*1e4/100})}},watch:{modelValue(h){h!==this.currentValue&&(this.currentValue=h,this.computeOffset())}},mounted(){n.nextTick(()=>{this.computeOffset()}),o(window,"resize",this.computeOffset)},beforeUnmount(){a(window,"resize",this.computeOffset)}};function bxe(h,f,v,E,T,b){const N=n.resolveComponent("trigger");return n.openBlock(),n.createElementBlock("div",{ref:"outerWrapper",class:n.normalizeClass(b.wrapperClasses)},[b.isHorizontal?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(`${T.prefix}-horizontal`)},[n.createElementVNode("div",{style:n.normalizeStyle({right:`${b.anotherOffset}%`}),class:n.normalizeClass(["left-pane",b.paneClasses])},[n.renderSlot(h.$slots,"left")],6),n.createElementVNode("div",{class:n.normalizeClass(`${T.prefix}-trigger-con`),style:n.normalizeStyle({left:`${T.offset}%`}),onMousedown:f[0]||(f[0]=(...U)=>b.handleMousedown&&b.handleMousedown(...U))},[n.renderSlot(h.$slots,"trigger",{},()=>[n.createVNode(N,{mode:"vertical"})])],38),n.createElementVNode("div",{style:n.normalizeStyle({left:`${T.offset}%`}),class:n.normalizeClass(["right-pane",b.paneClasses])},[n.renderSlot(h.$slots,"right")],6)],2)):(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass(`${T.prefix}-vertical`)},[n.createElementVNode("div",{style:n.normalizeStyle({bottom:`${b.anotherOffset}%`}),class:n.normalizeClass(["top-pane",b.paneClasses])},[n.renderSlot(h.$slots,"top")],6),n.createElementVNode("div",{class:n.normalizeClass(`${T.prefix}-trigger-con`),style:n.normalizeStyle({top:`${T.offset}%`}),onMousedown:f[1]||(f[1]=(...U)=>b.handleMousedown&&b.handleMousedown(...U))},[n.renderSlot(h.$slots,"trigger",{},()=>[n.createVNode(N,{mode:"horizontal"})])],38),n.createElementVNode("div",{style:n.normalizeStyle({top:`${T.offset}%`}),class:n.normalizeClass(["bottom-pane",b.paneClasses])},[n.renderSlot(h.$slots,"bottom")],6)],2))],2)}var Q8=l(xxe,[["render",bxe]]);const $0="ivu-steps",j8="ivu-icon",wxe={name:"Step",inject:["StepsInstance"],props:{status:{validator(h){return S(h,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:$0,id:ie(6)}},computed:{wrapClasses(){return[`${$0}-item`,`${$0}-status-${this.currentStatus}`,{[`${$0}-custom`]:!!this.icon||!!this.$slots.icon,[`${$0}-next-error`]:this.nextError}]},iconClasses(){let h="";return this.icon?h=this.icon:this.currentStatus==="finish"?h="ios-checkmark":this.currentStatus==="error"&&(h="ios-close"),[`${$0}-icon`,`${j8}`,{[`${j8}-${h}`]:h!==""}]},stepNumber(){return this.StepsInstance.steps.findIndex(h=>h.id===this.id)+1},total(){return this.StepsInstance.direction==="horizontal"?this.StepsInstance.steps.length:1},currentStatus(){let h="";if(this.status)h=this.status;else{const f=this.StepsInstance,v=f.current,E=f.steps.findIndex(T=>T.id===this.id);E===v?f.status!=="error"?h="process":h="error":E<v?h="finish":h="wait"}return h},nextError(){let h=!1;const f=this.StepsInstance,v=f.steps.findIndex(E=>E.id===this.id);return v+1<f.steps.length&&f.steps[v+1].currentStatus==="error"&&(h=!0),h}},beforeMount(){this.StepsInstance.addStep(this.id,this)},beforeUnmount(){this.StepsInstance.removeStep(this.id)}},Oxe=[n.createElementVNode("i",null,null,-1)],Sxe={key:0},Cxe={key:1,class:"ivu-steps-icon"};function Txe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses)},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-tail"])},Oxe,2),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-head"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-head-inner"])},[!v.icon&&!h.$slots.icon&&b.currentStatus!=="finish"&&b.currentStatus!=="error"?(n.openBlock(),n.createElementBlock("span",Sxe,n.toDisplayString(b.stepNumber),1)):h.$slots.icon?(n.openBlock(),n.createElementBlock("span",Cxe,[n.renderSlot(h.$slots,"icon")])):(n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass(b.iconClasses)},null,2))],2)],2),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-main"])},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-title"])},[n.renderSlot(h.$slots,"title",{},()=>[n.createTextVNode(n.toDisplayString(v.title),1)])],2),v.content||h.$slots.content?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-content"])},[n.renderSlot(h.$slots,"content",{},()=>[n.createTextVNode(n.toDisplayString(v.content),1)])],2)):n.createCommentVNode("",!0)],2)],2)}var Y8=l(wxe,[["render",Txe]]);const w3="ivu-steps",Axe={name:"Steps",provide(){return{StepsInstance:this}},props:{current:{type:Number,default:0},status:{validator(h){return S(h,["wait","process","finish","error"])},default:"process"},size:{validator(h){return S(h,["small"])}},direction:{validator(h){return S(h,["horizontal","vertical"])},default:"horizontal"}},data(){return{steps:[]}},computed:{classes(){return[`${w3}`,`${w3}-${this.direction}`,{[`${w3}-${this.size}`]:!!this.size}]},children(){return this.steps.map(h=>h.step)}},methods:{addStep(h,f){this.steps.push({id:h,step:f})},removeStep(h){const f=this.steps.findIndex(v=>v.id===h);this.steps.splice(f,1)}}};function Exe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes)},[n.renderSlot(h.$slots,"default")],2)}var q8=l(Axe,[["render",Exe]]);const pm="ivu-menu",Mxe={name:"Submenu",mixins:[u3,Sh],components:{Icon:O,Drop:Ze,CollapseTransition:g3},provide(){return{SubmenuInstance:this}},props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{prefixCls:pm,active:!1,opened:!1,dropWidth:parseFloat(I(this.$el,"width")),id:ie(6),childSubmenuList:[]}},computed:{classes(){return[`${pm}-submenu`,{[`${pm}-item-active`]:this.active&&!this.hasParentSubmenu,[`${pm}-opened`]:this.opened,[`${pm}-submenu-disabled`]:this.disabled,[`${pm}-submenu-has-parent-submenu`]:this.hasParentSubmenu,[`${pm}-child-item-active`]:this.active}]},accordion(){return this.menu.accordion},dropStyle(){let h={};return this.dropWidth&&(h.minWidth=`${this.dropWidth}px`),h},titleStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}},arrowType(){const h=this.globalConfig;let f="ios-arrow-down";return h&&(h.menu.customArrow?f="":h.menu.arrow&&(f=h.menu.arrow)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.menu.customArrow&&(f=h.menu.customArrow),f},arrowSize(){const h=this.globalConfig;let f="";return h&&h.menu.arrowSize&&(f=h.menu.arrowSize),f}},methods:{handleMouseenter(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!0},250))},handleMouseleave(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!1},150))},handleClick(){if(this.disabled||this.mode==="horizontal")return;const h=this.opened;this.opened=!h,this.menu.updateOpenKeys(this.name)},addSubmenu(){const h=this.MenuInstance;h.submenuList||(h.submenuList=[]),h.submenuList.push({id:this.id,submenu:this});const f=L(this,"Submenu");f&&(f.childSubmenuList||(f.childSubmenuList=[]),f.childSubmenuList.push({id:this.id,submenu:this}))},removeSubmenu(){const h=this.MenuInstance;if(h.submenuList&&h.submenuList.length){const v=h.submenuList.findIndex(E=>E.id===this.id);h.submenuList.splice(v,1)}const f=L(this,"Submenu");if(f&&f.childSubmenuList&&f.childSubmenuList.length){const v=f.childSubmenuList.findIndex(E=>E.id===this.id);f.childSubmenuList.splice(v,1)}},handleMenuItemSelect(h){this.mode==="horizontal"&&(this.opened=!1),this.MenuInstance.handleMenuItemSelect(h)},handleUpdateActiveName(h){L(this,"Submenu")&&this.SubmenuInstance.handleUpdateActiveName(h),this.childSubmenuList&&this.childSubmenuList.length&&this.childSubmenuList.map(f=>f.submenu).forEach(f=>{f.active=!1}),this.active=h}},watch:{mode(h){h==="horizontal"&&this.$refs.drop.update()},opened(h){this.mode!=="vertical"&&(h?(this.dropWidth=parseFloat(I(this.$el,"width")),this.$refs.drop.update()):this.$refs.drop.destroy())}},mounted(){this.addSubmenu()},beforeUnmount(){this.removeSubmenu()}};function Pxe(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("collapse-transition"),Y=n.resolveComponent("Drop");return n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.classes),onMouseenter:f[1]||(f[1]=(...W)=>b.handleMouseenter&&b.handleMouseenter(...W)),onMouseleave:f[2]||(f[2]=(...W)=>b.handleMouseleave&&b.handleMouseleave(...W))},[n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-submenu-title"]),ref:"reference",onClick:f[0]||(f[0]=n.withModifiers((...W)=>b.handleClick&&b.handleClick(...W),["stop"])),style:n.normalizeStyle(b.titleStyle)},[n.renderSlot(h.$slots,"title"),n.createVNode(N,{type:b.arrowType,custom:b.customArrowType,size:b.arrowSize,class:n.normalizeClass([T.prefixCls+"-submenu-title-icon"])},null,8,["type","custom","size","class"])],6),h.mode==="vertical"?(n.openBlock(),n.createBlock(U,{key:0,ready:h.menu.ready},{default:n.withCtx(()=>[n.withDirectives(n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls])},[n.renderSlot(h.$slots,"default")],2),[[n.vShow,T.opened]])]),_:3},8,["ready"])):n.createCommentVNode("",!0),h.mode==="horizontal"?(n.openBlock(),n.createBlock(Y,{key:1,ref:"drop",visible:T.opened,placement:"bottom","transition-name":"slide-up",styles:b.dropStyle},{default:n.withCtx(()=>[n.createElementVNode("ul",{class:n.normalizeClass([T.prefixCls+"-drop-list"])},[n.renderSlot(h.$slots,"default")],2)]),_:3},8,["visible","styles"])):n.createCommentVNode("",!0)],34)}var Z8=l(Mxe,[["render",Pxe]]);const K8={name:"Submit",inject:["LoginInstance"],props:{},methods:{handleSubmit(){this.LoginInstance.handleSubmit()}},render(){const h=Object.assign({size:"large",type:"primary",long:!0},this.$attrs),f=n.h(Do,{...h,onClick:this.handleSubmit},this.$slots.default||(()=>"登录"));return n.h("div",{class:"ivu-login-submit"},[f])}},U0="ivu-switch",kxe={name:"iSwitch",mixins:[Ui],emits:["update:modelValue","on-change"],props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},size:{validator(h){return S(h,["large","small","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},name:{type:String},loading:{type:Boolean,default:!1},trueColor:{type:String},falseColor:{type:String},beforeChange:Function},data(){return{currentValue:this.modelValue}},computed:{wrapClasses(){return[`${U0}`,{[`${U0}-checked`]:this.currentValue===this.trueValue,[`${U0}-disabled`]:this.itemDisabled,[`${U0}-${this.size}`]:!!this.size,[`${U0}-loading`]:this.loading}]},wrapStyles(){let h={};return this.trueColor&&this.currentValue===this.trueValue?(h["border-color"]=this.trueColor,h["background-color"]=this.trueColor):this.falseColor&&this.currentValue===this.falseValue&&(h["border-color"]=this.falseColor,h["background-color"]=this.falseColor),h},innerClasses(){return`${U0}-inner`}},methods:{handleToggle(){const h=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=h,this.$emit("update:modelValue",h),this.$emit("on-change",h),this.handleFormItemChange("change",h)},toggle(h){if(h.preventDefault(),this.itemDisabled||this.loading)return!1;if(!this.beforeChange)return this.handleToggle();const f=this.beforeChange();f&&f.then?f.then(()=>{this.handleToggle()}):this.handleToggle()}},watch:{modelValue(h){if(h!==this.trueValue&&h!==this.falseValue&&h!==null)throw"Value should be trueValue or falseValue.";this.currentValue=h}}},Ixe=["name","value"];function Rxe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("span",{tabindex:"0",class:n.normalizeClass(b.wrapClasses),style:n.normalizeStyle(b.wrapStyles),onClick:f[0]||(f[0]=(...N)=>b.toggle&&b.toggle(...N)),onKeydown:f[1]||(f[1]=n.withKeys((...N)=>b.toggle&&b.toggle(...N),["space"]))},[n.createElementVNode("input",{type:"hidden",name:v.name,value:T.currentValue},null,8,Ixe),n.createElementVNode("span",{class:n.normalizeClass(b.innerClasses)},[T.currentValue===v.trueValue?n.renderSlot(h.$slots,"open",{key:0}):n.createCommentVNode("",!0),T.currentValue===v.falseValue?n.renderSlot(h.$slots,"close",{key:1}):n.createCommentVNode("",!0)],2)],38)}var O3=l(kxe,[["render",Rxe]]),Bxe={name:"TableRenderHeader",props:{render:Function,column:Object,index:Number},render(){const h={column:this.column,index:this.index};return this.render(n.h,h)}},S3={methods:{alignCls(h,f={}){let v="";return f.cellClassName&&h.key&&f.cellClassName[h.key]&&(v=f.cellClassName[h.key]),[`${this.prefixCls}-column-${h.__id}`,{[`${v}`]:v,[`${h.className}`]:h.className,[`${this.prefixCls}-column-${h.align}`]:h.align,[`${this.prefixCls}-hidden`]:this.fixed==="left"&&h.fixed!=="left"||this.fixed==="right"&&h.fixed!=="right"||!this.fixed&&h.fixed&&(h.fixed==="left"||h.fixed==="right")}]},isPopperShow(h){return h.filters&&(!this.fixed&&!h.fixed||this.fixed==="left"&&h.fixed==="left"||this.fixed==="right"&&h.fixed==="right")},setCellWidth(h){let f="";return h.width?f=h.width:this.columnsWidth[h._index]&&(f=this.columnsWidth[h._index].width),f==="0"&&(f=""),f}}};const Dxe={name:"TableHead",mixins:[S3,kn],components:{CheckboxGroup:Lk,Checkbox:P0,Poptip:v3,iButton:Do,renderHeader:Bxe},props:{prefixCls:String,styleObject:Object,columns:Array,objData:Object,data:Array,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},columnRows:Array,fixedColumnRows:Array},data(){return{draggingColumn:null,dragging:!1,dragState:{}}},computed:{styles(){const h=Object.assign({},this.styleObject),f=parseInt(this.styleObject.width);return h.width=`${f}px`,h},isSelectAll(){let h=!0;this.data.length||(h=!1);let f=!0;for(let v in this.objData){const E=this.objData[v];if(!E._isChecked&&!E._isDisabled){h=!1;break}else E.children&&E.children.length&&(h=this.isChildrenSelected(E,h));E._isDisabled&&!E._isChecked?E.children&&E.children.length&&(f=this.isChildrenAllDisabledAndUnSelected(E,f)):f=!1}return f&&(h=!1),h},headRows(){return this.columnRows.length>1?this.fixed?this.fixedColumnRows:this.columnRows:[this.columns]},isSelectDisabled(){let h=!0;if(this.data.length)for(let f in this.objData){const v=this.objData[f];v._isDisabled?v.children&&v.children.length&&(h=this.isChildrenDisabled(v,h)):h=!1}return h}},methods:{cellClasses(h){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&h.fixed&&(h.fixed==="left"||h.fixed==="right"),[`${this.prefixCls}-cell-with-selection`]:h.type==="selection"}]},scrollBarCellClass(){let h=!1;for(let f in this.headRows)for(let v in this.headRows[f]){if(this.headRows[f][v].fixed==="right"){h=!0;break}if(h)break}return[{[`${this.prefixCls}-hidden`]:h}]},itemClasses(h,f){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:h._filterChecked[0]===f.value}]},itemAllClasses(h){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:!h._filterChecked.length}]},selectAll(){const h=!this.isSelectAll;this.$parent.selectAll(h)},handleSort(h,f){const v=this.columns.find(T=>T._index===h),E=v._index;v._sortType===f&&(f="normal"),this.$parent.handleSort(E,f)},handleSortByHead(h){const f=this.columns.find(v=>v._index===h);if(f.sortable){const v=f._sortType;v==="normal"?this.handleSort(h,"asc"):v==="asc"?this.handleSort(h,"desc"):this.handleSort(h,"normal")}},handleFilter(h){this.$parent.handleFilter(h)},handleSelect(h,f){this.$parent.handleFilterSelect(h,f)},handleReset(h){this.$parent.handleFilterReset(h)},handleFilterHide(h){this.$parent.handleFilterHide(h)},getColumn(h,f){if(this.columnRows.length>1){const v=this.headRows[h][f].__id;return this.columns.filter(E=>E.__id===v)[0]}else return this.headRows[h][f]},handleMouseDown(h,f){if(!this.$isServer&&s&&this.draggingColumn){this.dragging=!0;const v=this.$parent,E=v.$el.getBoundingClientRect().left,T=this.$el.querySelector(`th.ivu-table-column-${h.__id}`).getBoundingClientRect(),b=T.left-E+30;v.showResizeLine=!0,this.dragState={startMouseLeft:f.clientX,startLeft:T.right-E,startColumnLeft:T.left-E,tableLeft:E};const N=v.$refs.resizeLine;N.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const U=W=>{const Z=W.clientX-this.dragState.startMouseLeft,fe=this.dragState.startLeft+Z;N.style.left=Math.max(b,fe)+"px"},Y=()=>{if(this.dragging){const{startColumnLeft:W,startLeft:Z}=this.dragState,fe=parseInt(N.style.left,10)-W,Te=v.allColumns.find(Se=>Se.__id===h.__id);Te&&(Te.width=fe,h.width=fe,v.handleResize()),v.$emit("on-column-width-resize",Te.width,Z-W,h,f),s&&(document.body.style.cursor=""),this.dragging=!1,this.draggingColumn=null,this.dragState={},v.showResizeLine=!1}!s||(document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",Y),document.onselectstart=null,document.ondragstart=null)};if(!s)return;document.addEventListener("mousemove",U),document.addEventListener("mouseup",Y)}},handleMouseMove(h,f){let v=f.target;for(;v&&v.tagName!=="TH";)v=v.parentNode;if(!(!h||!h.resizable)&&s&&!this.dragging){let E=v.getBoundingClientRect();const T=document.body.style;E.width>12&&E.right-f.pageX<8?(T.cursor="col-resize",this.draggingColumn=h):this.dragging||(T.cursor="",this.draggingColumn=null)}},handleMouseOut(){this.$isServer||s&&(document.body.style.cursor="")},isChildrenSelected(h,f){let v=f;return h.children&&h.children.length&&h.children.forEach(E=>{!E._isChecked&&!E._isDisabled?v=!1:E.children&&E.children.length&&(v=this.isChildrenSelected(E,v))}),v},isChildrenAllDisabledAndUnSelected(h,f){let v=f;return h.children&&h.children.length&&h.children.forEach(E=>{E._isDisabled&&!E._isChecked?E.children&&E.children.length&&(v=this.isChildrenAllDisabledAndUnSelected(E,v)):v=!1}),v},isChildrenDisabled(h,f){let v=f;return h.children&&h.children.length&&h.children.forEach(E=>{E._isDisabled?E.children&&E.children.length&&(v=this.isChildrenDisabled(E,v)):v=!1}),v}}},Lxe=["width"],Nxe=["width"],Vxe=["colspan","rowspan"],Fxe={key:0},$xe=["onClick"],Uxe=["onClick"],zxe=["onClick"],Xxe=["onMousedown","onMousemove"],Wxe=["rowspan"];function Gxe(h,f,v,E,T,b){const N=n.resolveComponent("render-header"),U=n.resolveComponent("Checkbox"),Y=n.resolveComponent("checkbox"),W=n.resolveComponent("checkbox-group"),Z=n.resolveComponent("i-button"),fe=n.resolveComponent("Poptip");return n.openBlock(),n.createElementBlock("table",{cellspacing:"0",cellpadding:"0",border:"0",style:n.normalizeStyle(b.styles)},[n.createElementVNode("colgroup",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.columns,(Te,Se)=>(n.openBlock(),n.createElementBlock("col",{key:Se,width:h.setCellWidth(Te)},null,8,Lxe))),128)),h.$parent.showVerticalScrollBar?(n.openBlock(),n.createElementBlock("col",{key:0,width:h.$parent.scrollBarWidth},null,8,Nxe)):n.createCommentVNode("",!0)]),n.createElementVNode("thead",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.headRows,(Te,Se)=>(n.openBlock(),n.createElementBlock("tr",{key:Se},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(Te,(we,ce)=>(n.openBlock(),n.createElementBlock("th",{key:ce,colspan:we.colSpan,rowspan:we.rowSpan,class:n.normalizeClass(h.alignCls(we))},[n.createElementVNode("div",{class:n.normalizeClass(b.cellClasses(we))},[we.type==="expand"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[we.renderHeader?(n.openBlock(),n.createBlock(N,{key:1,render:we.renderHeader,column:we,index:ce},null,8,["render","column","index"])):(n.openBlock(),n.createElementBlock("span",Fxe,n.toDisplayString(we.title||""),1))],64)):we.type==="selection"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[we.hideSelectAll?n.createCommentVNode("",!0):(n.openBlock(),n.createBlock(U,{key:0,"model-value":b.isSelectAll,disabled:b.isSelectDisabled,onOnChange:b.selectAll},null,8,["model-value","disabled","onOnChange"]))],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:2},[we.renderHeader?(n.openBlock(),n.createBlock(N,{key:1,render:we.renderHeader,column:we,index:ce},null,8,["render","column","index"])):(n.openBlock(),n.createElementBlock("span",{key:0,class:n.normalizeClass({[v.prefixCls+"-cell-sort"]:we.sortable}),onClick:Be=>we.sortable&&b.handleSortByHead(b.getColumn(Se,ce)._index)},n.toDisplayString(we.title||"#"),11,$xe)),we.sortable?(n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass([v.prefixCls+"-sort"])},[n.createElementVNode("i",{class:n.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropup",{on:b.getColumn(Se,ce)._sortType==="asc"}]),onClick:Be=>b.handleSort(b.getColumn(Se,ce)._index,"asc")},null,10,Uxe),n.createElementVNode("i",{class:n.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropdown",{on:b.getColumn(Se,ce)._sortType==="desc"}]),onClick:Be=>b.handleSort(b.getColumn(Se,ce)._index,"desc")},null,10,zxe)],2)):n.createCommentVNode("",!0),h.isPopperShow(we)?(n.openBlock(),n.createBlock(fe,{key:3,modelValue:b.getColumn(Se,ce)._filterVisible,"onUpdate:modelValue":Be=>b.getColumn(Se,ce)._filterVisible=Be,placement:"bottom","popper-class":"ivu-table-popper",transfer:"",capture:!1,onOnPopperHide:Be=>b.handleFilterHide(b.getColumn(Se,ce)._index)},n.createSlots({default:n.withCtx(()=>[n.createElementVNode("span",{class:n.normalizeClass([v.prefixCls+"-filter"])},[n.createElementVNode("i",{class:n.normalizeClass(["ivu-icon ivu-icon-ios-funnel",{on:b.getColumn(Se,ce)._isFiltered}])},null,2)],2)]),_:2},[b.getColumn(Se,ce)._filterMultiple?{name:"content",fn:n.withCtx(()=>[n.createElementVNode("div",{class:n.normalizeClass([v.prefixCls+"-filter-list"])},[n.createElementVNode("div",{class:n.normalizeClass([v.prefixCls+"-filter-list-item"])},[n.createVNode(W,{modelValue:b.getColumn(Se,ce)._filterChecked,"onUpdate:modelValue":Be=>b.getColumn(Se,ce)._filterChecked=Be},{default:n.withCtx(()=>[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(we.filters,(Be,Zt)=>(n.openBlock(),n.createBlock(Y,{key:Zt,label:Be.value},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(Be.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],2),n.createElementVNode("div",{class:n.normalizeClass([v.prefixCls+"-filter-footer"])},[n.createVNode(Z,{type:"text",size:"small",disabled:!b.getColumn(Se,ce)._filterChecked.length,onClick:Be=>b.handleFilter(b.getColumn(Se,ce)._index)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(h.t("i.table.confirmFilter")),1)]),_:2},1032,["disabled","onClick"]),n.createVNode(Z,{type:"text",size:"small",onClick:Be=>b.handleReset(b.getColumn(Se,ce)._index)},{default:n.withCtx(()=>[n.createTextVNode(n.toDisplayString(h.t("i.table.resetFilter")),1)]),_:2},1032,["onClick"])],2)],2)]),key:"0"}:{name:"content",fn:n.withCtx(()=>[n.createElementVNode("div",{class:n.normalizeClass([v.prefixCls+"-filter-list"])},[n.createElementVNode("ul",{class:n.normalizeClass([v.prefixCls+"-filter-list-single"])},[n.createElementVNode("li",{class:n.normalizeClass(b.itemAllClasses(b.getColumn(Se,ce))),onClick:Be=>b.handleReset(b.getColumn(Se,ce)._index)},n.toDisplayString(h.t("i.table.clearFilter")),11,["onClick"]),(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(we.filters,Be=>(n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.itemClasses(b.getColumn(Se,ce),Be)),key:Be.value,onClick:Zt=>b.handleSelect(b.getColumn(Se,ce)._index,Be.value)},n.toDisplayString(Be.label),11,["onClick"]))),128))],2)],2)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","onOnPopperHide"])):n.createCommentVNode("",!0)],64))],2),we.resizable?(n.openBlock(),n.createElementBlock("div",{key:0,class:"ivu-table-header-resizable",onMousedown:Be=>b.handleMouseDown(we,Be),onMousemove:Be=>b.handleMouseMove(we,Be),onMouseout:f[0]||(f[0]=(...Be)=>b.handleMouseOut&&b.handleMouseOut(...Be))},null,40,Xxe)):n.createCommentVNode("",!0)],10,Vxe))),128)),h.$parent.showVerticalScrollBar&&Se===0?(n.openBlock(),n.createElementBlock("th",{key:0,class:n.normalizeClass(b.scrollBarCellClass()),rowspan:b.headRows.length},null,10,Wxe)):n.createCommentVNode("",!0)]))),128))])],4)}var Hxe=l(Dxe,[["render",Gxe]]);const Qxe={props:{row:Object,prefixCls:String,draggable:Boolean,isChildren:Boolean},computed:{objData(){return this.$parent.objData}},methods:{onDrag(h,f){h.dataTransfer.setData("index",f)},onDrop(h,f){const v=h.dataTransfer.getData("index");this.$parent.$parent.dragAndDrop(v,f),h.preventDefault()},allowDrop(h){h.preventDefault()},rowClasses(h){const f=this.isChildren?this.$parent.$parent.getDataByRowKey(this.row._rowKey):this.objData[h];return[`${this.prefixCls}-row`,this.rowClsName(h),{[`${this.prefixCls}-row-highlight`]:f&&f._isHighlight,[`${this.prefixCls}-row-hover`]:f&&f._isHover}]},rowClsName(h){return this.$parent.$parent.rowClassName(this.objData[h],h)}}},jxe=["draggable"];function Yxe(h,f,v,E,T,b){return v.draggable?(n.openBlock(),n.createElementBlock("tr",{key:0,class:n.normalizeClass(b.rowClasses(v.row._index)),draggable:v.draggable,onDragstart:f[0]||(f[0]=N=>b.onDrag(N,v.row._index)),onDrop:f[1]||(f[1]=N=>b.onDrop(N,v.row._index)),onDragover:f[2]||(f[2]=N=>b.allowDrop(N))},[n.renderSlot(h.$slots,"default")],42,jxe)):(n.openBlock(),n.createElementBlock("tr",{key:1,class:n.normalizeClass(b.rowClasses(v.row._index)),draggable:!1},[n.renderSlot(h.$slots,"default")],2))}var C3=l(Qxe,[["render",Yxe]]),T3={name:"TableExpand",props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render(){const h={row:this.row,index:this.index};return this.column&&(h.column=this.column),this.render(n.h,h)}},qxe={name:"TableSlot",inject:["TableInstance"],props:{row:Object,index:Number,column:{type:Object,default:null},display:{type:String,default:"block"}},render(){return n.h("div",{class:{"ivu-table-cell-slot":!0,"ivu-table-cell-slot-inline":this.display==="inline","ivu-table-cell-slot-inline-block":this.display==="inline-block"}},this.TableInstance.$slots[this.column.slot]({row:this.row,column:this.column,index:this.index}))}};const Zxe={name:"TableCell",components:{Icon:O,Checkbox:P0,TableExpand:T3,TableSlot:qxe,Tooltip:Su},inject:["TableInstance"],props:{prefixCls:String,row:Object,column:Object,naturalIndex:Number,index:Number,checked:Boolean,disabled:Boolean,expanded:Boolean,fixed:{type:[Boolean,String],default:!1},treeNode:Boolean,treeLevel:{type:Number,default:0}},data(){return{renderType:"",uid:-1,context:this.$parent.$parent.$parent.currentContext,showTooltip:!1}},computed:{classes(){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&this.column.fixed&&(this.column.fixed==="left"||this.column.fixed==="right"),[`${this.prefixCls}-cell-ellipsis`]:this.column.ellipsis||!1,[`${this.prefixCls}-cell-with-expand`]:this.renderType==="expand",[`${this.prefixCls}-cell-with-selection`]:this.renderType==="selection"}]},expandCls(){return[`${this.prefixCls}-cell-expand`,{[`${this.prefixCls}-cell-expand-expanded`]:this.expanded}]},showChildren(){let h=!1;if(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot"){const f=this.row;(f.children&&f.children.length||"_loading"in f)&&this.column.tree&&(h=!0)}return h},showTreeNode(){let h=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(h=!0),h},showLevel(){let h=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(h=!0),h},treeLevelStyle(){return{"padding-left":this.treeLevel*this.TableInstance.indentSize+"px"}},childrenExpand(){return this.TableInstance.getDataByRowKey(this.row._rowKey)._isShowChildren},childrenLoading(){const h=this.TableInstance.getDataByRowKey(this.row._rowKey);return"_loading"in h&&h._loading}},methods:{toggleSelect(){this.treeNode?this.$parent.$parent.$parent.toggleSelect(this.index,this.row._rowKey):this.$parent.$parent.$parent.toggleSelect(this.index)},toggleExpand(){this.$parent.$parent.$parent.toggleExpand(this.index)},handleClick(){},handleTooltipIn(){if(!s)return;const h=this.$refs.content;let f=document.createRange();f.setStart(h,0),f.setEnd(h,h.childNodes.length);const v=f.getBoundingClientRect().width;this.showTooltip=v>h.offsetWidth,f=null},handleToggleTree(){this.$parent.$parent.$parent.toggleTree(this.row._rowKey)}},created(){this.column.type==="index"?this.renderType="index":this.column.type==="selection"?this.renderType="selection":this.column.type==="html"?this.renderType="html":this.column.type==="expand"?this.renderType="expand":this.column.render?this.renderType="render":this.column.slot?this.renderType="slot":this.renderType="normal"}},Kxe={key:0},Jxe={key:4,class:"ivu-table-cell-tree ivu-table-cell-tree-empty"},e1e=["innerHTML"],t1e={key:1};function i1e(h,f,v,E,T,b){const N=n.resolveComponent("Checkbox"),U=n.resolveComponent("Icon"),Y=n.resolveComponent("Tooltip"),W=n.resolveComponent("table-expand"),Z=n.resolveComponent("table-slot");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),ref:"cell"},[T.renderType==="index"?(n.openBlock(),n.createElementBlock("span",Kxe,n.toDisplayString(v.column.indexMethod?v.column.indexMethod(v.row,v.naturalIndex):v.naturalIndex+1),1)):n.createCommentVNode("",!0),T.renderType==="selection"?(n.openBlock(),n.createBlock(N,{key:1,"model-value":v.checked,onClick:n.withModifiers(b.handleClick,["stop"]),onOnChange:b.toggleSelect,disabled:v.disabled},null,8,["model-value","onClick","onOnChange","disabled"])):n.createCommentVNode("",!0),b.showLevel?(n.openBlock(),n.createElementBlock("div",{key:2,class:"ivu-table-cell-tree-level",style:n.normalizeStyle(b.treeLevelStyle)},null,4)):n.createCommentVNode("",!0),b.showChildren?(n.openBlock(),n.createElementBlock("div",{key:3,class:n.normalizeClass(["ivu-table-cell-tree",{"ivu-table-cell-tree-loading":b.childrenLoading}]),onClick:f[0]||(f[0]=n.withModifiers((...fe)=>b.handleToggleTree&&b.handleToggleTree(...fe),["prevent","stop"]))},[b.childrenLoading?(n.openBlock(),n.createBlock(U,{key:0,type:"ios-loading",class:"ivu-load-loop"})):b.childrenExpand?(n.openBlock(),n.createBlock(U,{key:2,type:"ios-remove"})):(n.openBlock(),n.createBlock(U,{key:1,type:"ios-add"}))],2)):b.showTreeNode?(n.openBlock(),n.createElementBlock("div",Jxe)):n.createCommentVNode("",!0),T.renderType==="html"?(n.openBlock(),n.createElementBlock("span",{key:5,innerHTML:v.row[v.column.key]},null,8,e1e)):n.createCommentVNode("",!0),T.renderType==="normal"?(n.openBlock(),n.createElementBlock(n.Fragment,{key:6},[v.column.tooltip?(n.openBlock(),n.createBlock(Y,{key:0,transfer:"",content:v.row[v.column.key],theme:v.column.tooltipTheme?v.column.tooltipTheme:b.TableInstance.tooltipTheme,disabled:!T.showTooltip,"max-width":v.column.tooltipMaxWidth?v.column.tooltipMaxWidth:b.TableInstance.tooltipMaxWidth,class:"ivu-table-cell-tooltip"},{default:n.withCtx(()=>[n.createElementVNode("span",{ref:"content",onMouseenter:f[1]||(f[1]=(...fe)=>b.handleTooltipIn&&b.handleTooltipIn(...fe)),class:"ivu-table-cell-tooltip-content"},n.toDisplayString(v.row[v.column.key]),545)]),_:1},8,["content","theme","disabled","max-width"])):(n.openBlock(),n.createElementBlock("span",t1e,n.toDisplayString(v.row[v.column.key]),1))],64)):n.createCommentVNode("",!0),T.renderType==="expand"&&!v.row._disableExpand?(n.openBlock(),n.createElementBlock("div",{key:7,class:n.normalizeClass(b.expandCls),onClick:f[2]||(f[2]=(...fe)=>b.toggleExpand&&b.toggleExpand(...fe))},[n.createVNode(U,{type:"ios-arrow-forward"})],2)):n.createCommentVNode("",!0),T.renderType==="render"?(n.openBlock(),n.createBlock(W,{key:8,row:v.row,column:v.column,index:v.index,render:v.column.render},null,8,["row","column","index","render"])):n.createCommentVNode("",!0),T.renderType==="slot"?(n.openBlock(),n.createBlock(Z,{key:9,row:v.row,column:v.column,display:v.column.display||"block",index:v.index},null,8,["row","column","display","index"])):n.createCommentVNode("",!0)],2)}var A3=l(Zxe,[["render",i1e]]);const n1e={name:"TableBody",mixins:[S3],components:{TableCell:A3,Expand:T3,TableTr:C3},props:{prefixCls:String,styleObject:Object,columns:Array,data:Array,objData:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1},rowKey:{type:[Boolean,String],default:!1}},computed:{expandRender(){let h=function(){return""};for(let f=0;f<this.columns.length;f++){const v=this.columns[f];v.type&&v.type==="expand"&&v.render&&(h=v.render)}return h}},methods:{rowChecked(h){return this.objData[h]&&this.objData[h]._isChecked},rowDisabled(h){return this.objData[h]&&this.objData[h]._isDisabled},rowExpanded(h){return this.objData[h]&&this.objData[h]._isExpanded},rowStatusByRowKey(h,f){return this.$parent.getDataByRowKey(f)[h]},handleMouseIn(h,f,v){f.stopPropagation(),this.$parent.handleMouseIn(h,v)},handleMouseOut(h,f,v){f.stopPropagation(),this.$parent.handleMouseOut(h,v)},clickCurrentRow(h,f,v){this.$parent.clickCurrentRow(h,v)},dblclickCurrentRow(h,f,v){f.stopPropagation(),this.$parent.dblclickCurrentRow(h,v)},clickCell(h,f,v,E){this.$parent.$emit("on-cell-click",h,f,h[v],E)},contextmenuCurrentRow(h,f,v){f.stopPropagation(),this.$parent.contextMenu&&f.preventDefault(),this.$parent.contextmenuCurrentRow(h,v,f)},selectStartCurrentRow(){this.$parent.contextMenu},getSpan(h,f,v,E){const T=this.$parent.spanMethod;if(typeof T=="function"){const b=T({row:h,column:f,rowIndex:v,columnIndex:E});let N=1,U=1;return Array.isArray(b)?(N=b[0],U=b[1]):typeof b=="object"&&(N=b.rowspan,U=b.colspan),{rowspan:N,colspan:U}}else return{}},showWithSpan(h,f,v,E){const T=this.getSpan(h,f,v,E);return!("rowspan"in T&&T.rowspan===0||"colspan"in T&&T.colspan===0)},isTrShow(h){let f=!0,v;for(let E in this.objData){const T=this.objData[E],b=T._isShowChildren;if(T._rowKey===h){f=f&&b;break}else if(T.children&&T.children.length&&(v=this.getTrStatus(h,T,f&&b),v[0]&&v[0]._rowKey===h))return v[1]}return f},getTrStatus(h,f,v){let E=v,T;if(f.children&&f.children.length)for(let b=0;b<f.children.length;b++){const N=f.children[b],U=N._isShowChildren;if(N._rowKey===h){T=N,E=E&&U;break}else if(N.children&&N.children.length){const Y=this.getTrStatus(h,N,E&&U);if(Y[0]&&Y[0]._rowKey===h)return Y}}return[T,E]},getLevel(h){let f,v;for(let E=0;E<this.data.length;E++){const T=this.data[E];if(T[this.rowKey]===h){f=0;break}else if(T.children&&T.children.length&&(v=this.getChildLevel(T,h,1),v[0]&&v[0][this.rowKey]===h))return v[1]}return f},getChildLevel(h,f,v){let E,T;if(h.children&&h.children.length)for(let b=0;b<h.children.length;b++){const N=h.children[b];if(N[this.rowKey]===f){T=N,E=v;break}else if(N.children&&N.children.length){const U=this.getChildLevel(N,f,v+1);if(U[0]&&U[0][this.rowKey]===f)return U}}return[T,E]},getChildNode(h,f,v){return f.children&&f.children.length&&f.children.forEach((E,T)=>{let b=[];this.columns.forEach((Y,W)=>{if(this.showWithSpan(E,Y,T,W)){const Z=h(A3,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:E,column:Y,"natural-index":T,index:E._index,checked:this.rowStatusByRowKey("_isChecked",E._rowKey),disabled:this.rowStatusByRowKey("_isDisabled",E._rowKey),expanded:this.rowStatusByRowKey("_isExpanded",E._rowKey),treeNode:!0,treeLevel:this.getLevel(E._rowKey),key:Y._columnKey}),fe=h("td",{class:this.alignCls(Y,E),...this.getSpan(E,Y,T,W),onClick:Te=>this.clickCell(E,Y,Y.key,Te)},[Z]);b.push(fe)}});const N={};this.isTrShow(f._rowKey)||(N.display="none");const U=h(C3,{draggable:!1,row:E,"prefix-cls":this.prefixCls,isChildren:!0,style:N,key:this.rowKey?E._rowKey:T,onMouseenter:Y=>this.handleMouseIn(E._index,Y,E._rowKey),onMouseleave:Y=>this.handleMouseOut(E._index,Y,E._rowKey),onClick:Y=>this.clickCurrentRow(E._index,Y,E._rowKey),onDblclick:Y=>this.dblclickCurrentRow(E._index,Y,E._rowKey),onContextmenu:Y=>this.contextmenuCurrentRow(E._index,Y,E._rowKey),onSelectstart:Y=>this.selectStartCurrentRow(E._index,Y,E._rowKey)},()=>b);v.push(U),E.children&&E.children.length&&this.getChildNode(h,E,v)}),v}},render(){let h=[];this.columns.forEach(T=>{const b=n.h("col",{width:this.setCellWidth(T)});h.push(b)});const f=n.h("colgroup",{},h);let v=[];this.data.forEach((T,b)=>{let N=[];this.columns.forEach((Y,W)=>{if(this.showWithSpan(T,Y,b,W)){const Z=n.h(A3,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:T,column:Y,"natural-index":b,index:T._index,checked:this.rowChecked(T._index),disabled:this.rowDisabled(T._index),expanded:this.rowExpanded(T._index),key:Y._columnKey}),fe=n.h("td",{class:this.alignCls(Y,T),...this.getSpan(T,Y,b,W),onClick:Te=>this.clickCell(T,Y,Y.key,Te)},[Z]);N.push(fe)}});const U=n.h(C3,{draggable:this.draggable,row:T,"prefix-cls":this.prefixCls,key:this.rowKey?T._rowKey:b,onMouseenter:Y=>this.handleMouseIn(T._index,Y),onMouseleave:Y=>this.handleMouseOut(T._index,Y),onClick:Y=>this.clickCurrentRow(T._index,Y),onDblclick:Y=>this.dblclickCurrentRow(T._index,Y),onContextmenu:Y=>this.contextmenuCurrentRow(T._index,Y),onSelectstart:Y=>this.selectStartCurrentRow(T._index,Y)},()=>N);if(v.push(U),this.rowExpanded(T._index)){const Y=n.h(T3,{row:T,render:this.expandRender,index:T._index,key:this.rowKey?T._rowKey:b}),W=n.h("td",{colspan:this.columns.length,class:this.prefixCls+"-expanded-cell"},[Y]),Z=n.h("tr",{class:{[this.prefixCls+"-expanded-hidden"]:this.fixed}},[W]);v.push(Z)}T.children&&T.children.length&&this.getChildNode(n.h,T,[]).forEach(Y=>{v.push(Y)})});const E=n.h("tbody",{class:this.prefixCls+"-tbody"},[v]);return n.h("table",{cellspacing:"0",cellpadding:"0",border:"0",style:this.styleObject},[f,E])}},r1e={name:"TableSummary",mixins:[S3],props:{prefixCls:String,styleObject:Object,columns:Array,data:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1}},methods:{cellCls(h){return[{"ivu-table-hidden":this.fixed==="left"&&h.fixed!=="left"||this.fixed==="right"&&h.fixed!=="right"||!this.fixed&&h.fixed&&(h.fixed==="left"||h.fixed==="right")}]}}},s1e={style:{overflow:"hidden"}},o1e=["width"],a1e={class:"ivu-table-row"};function l1e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("div",s1e,[n.createElementVNode("table",{class:"ivu-table-summary",cellspacing:"0",cellpadding:"0",border:"0",style:n.normalizeStyle(v.styleObject)},[n.createElementVNode("colgroup",null,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.columns,(N,U)=>(n.openBlock(),n.createElementBlock("col",{key:U,width:h.setCellWidth(N)},null,8,o1e))),128))]),n.createElementVNode("tbody",{class:n.normalizeClass([v.prefixCls+"-tbody"])},[n.createElementVNode("tr",a1e,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.columns,(N,U)=>(n.openBlock(),n.createElementBlock("td",{key:U,class:n.normalizeClass(h.alignCls(N))},[n.createElementVNode("div",{class:n.normalizeClass(["ivu-table-cell",b.cellCls(N)])},[n.createElementVNode("span",null,n.toDisplayString(v.data[N.key].value),1)],2)],2))),128))])],2)],4)])}var h1e=l(r1e,[["render",l1e]]);const c1e=`\r
`,E3=(h,f,{separator:v,quoted:E})=>{const T=f.map(b=>E?(b=typeof b=="string"?b.replace(/"/g,'"'):b,`"${b}"`):b);h.push(T.join(v))},u1e={separator:",",quoted:!1};function d1e(h,f,v,E=!1){v=Object.assign({},u1e,v);let T;const b=[],N=[];return h?(T=h.map(U=>typeof U=="string"?U:(E||N.push(typeof U.title<"u"?U.title:U.key),U.key)),N.length>0&&E3(b,N,v)):(T=[],f.forEach(U=>{Array.isArray(U)||(T=T.concat(Object.keys(U)))}),T.length>0&&(T=T.filter((U,Y,W)=>W.indexOf(U)===Y),E||E3(b,T,v))),Array.isArray(f)&&f.forEach(U=>{Array.isArray(U)||(U=T.map(Y=>typeof U[Y]<"u"?U[Y]:"")),E3(b,U,v)}),b.join(c1e)}function M3(h){const f=navigator.userAgent;return f.indexOf("compatible")>-1&&f.indexOf("MSIE")>-1?(new RegExp("MSIE (\\d+\\.\\d+);").test(f),parseFloat(RegExp.$1)):!1}const f1e={_isIE11(){let h=0;const f=/MSIE (\d+\.\d+);/.test(navigator.userAgent),v=!!navigator.userAgent.match(/Trident\/7.0/),E=navigator.userAgent.indexOf("rv:11.0");return f&&(h=Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!==-1&&(h=10),v&&E!==-1&&(h=11),h===11},_isEdge(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl(h){const f="\uFEFF";if(s&&window.Blob&&window.URL&&window.URL.createObjectURL){const v=new Blob([f+h],{type:"text/csv"});return URL.createObjectURL(v)}else return"data:attachment/csv;charset=utf-8,"+f+encodeURIComponent(h)},download(h,f){if(s)if(M3()&&M3()<10){const v=window.top.open("about:blank","_blank");v.document.charset="utf-8",v.document.write(f),v.document.close(),v.document.execCommand("SaveAs",h),v.close()}else if(M3()===10||this._isIE11()||this._isEdge()){const v="\uFEFF",E=new Blob([v+f],{type:"text/csv"});navigator.msSaveBlob(E,h)}else{const v=document.createElement("a");v.download=h,v.href=this._getDownloadUrl(f),document.body.appendChild(v),v.click(),document.body.removeChild(v)}}},hC=(h,f)=>{let v=[],E=[];return h.forEach(T=>{T.fixed&&T.fixed===f?v.push(T):E.push(T)}),v.concat(E)},wx=(h,f=!1)=>{const v=V(h),E=[];return v.forEach(T=>{T.children?(f&&E.push(T),E.push.apply(E,wx(T.children,f))):E.push(T)}),E},p1e=(h,f=!1)=>{const v=V(f?f==="left"?hC(h,"left"):hC(h,"right"):h);let E=1;const T=(N,U)=>{if(U&&(N.level=U.level+1,E<N.level&&(E=N.level)),N.children){let Y=0;N.children.forEach(W=>{T(W,N),Y+=W.colSpan}),N.colSpan=Y}else N.colSpan=1};v.forEach(N=>{N.level=1,T(N)});const b=[];for(let N=0;N<E;N++)b.push([]);return wx(v,!0).forEach(N=>{N.children?N.rowSpan=1:N.rowSpan=E-N.level+1,b[N.level-1].push(N)}),b},m1e=function(h=32){const f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",v=f.length;let E="";for(let T=0;T<h;T++)E+=f.charAt(Math.floor(Math.random()*v));return E},Bs="ivu-table";let J8=1,g1e=1;const v1e={name:"Table",mixins:[kn],components:{tableHead:Hxe,tableBody:n1e,tableSummary:h1e,Spin:Xa,Dropdown:lm,DropdownMenu:hm},emits:["on-current-change","on-row-click","on-row-dblclick","on-contextmenu","on-select","on-select-cancel","on-selection-change","on-expand","on-expand-tree","on-select-all","on-select-all-cancel","on-sort-change","on-filter-change","on-drag-drop","on-cell-click","on-column-width-resize"],provide(){return{TableInstance:this}},inject:{TabsInstance:{default:null},ModalInstance:{default:null},DrawerInstance:{default:null}},props:{data:{type:Array,default(){return[]}},columns:{type:Array,default(){return[]}},size:{validator(h){return S(h,["small","large","default"])},default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.size===""?"default":h.$VIEWUI.size}},width:{type:[Number,String]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tooltipTheme:{validator(h){return S(h,["dark","light"])},default:"dark"},tooltipMaxWidth:{type:Number,default:300},rowKey:{type:[Boolean,String],default:!1},spanMethod:{type:Function},showSummary:{type:Boolean,default:!1},summaryMethod:{type:Function},sumText:{type:String},indentSize:{type:Number,default:16},loadData:{type:Function},updateShowChildren:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},showContextMenu:{type:Boolean,default:!1},fixedShadow:{validator(h){return S(h,["auto","show","hide"])},default:"show"},autoCloseContextmenu:{type:Boolean,default:!0}},data(){const h=this.makeColumnsId(this.columns);return{ready:!1,tableWidth:0,columnsWidth:{},prefixCls:Bs,compiledUids:[],objData:this.makeObjData(),rebuildData:[],cloneColumns:this.makeColumns(h),columnRows:this.makeColumnRows(!1,h),leftFixedColumnRows:this.makeColumnRows("left",h),rightFixedColumnRows:this.makeColumnRows("right",h),allColumns:wx(h),showSlotHeader:!0,showSlotFooter:!0,bodyHeight:0,scrollBarWidth:C(),currentContext:this.context,cloneData:V(this.data),showVerticalScrollBar:!1,showHorizontalScrollBar:!1,headerWidth:0,headerHeight:0,showResizeLine:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},scrollOnTheLeft:!1,scrollOnTheRight:!1,id:ie(6)}},computed:{localeNoDataText(){return this.noDataText===void 0?this.t("i.table.noDataText"):this.noDataText},localeNoFilteredDataText(){return this.noFilteredDataText===void 0?this.t("i.table.noFilteredDataText"):this.noFilteredDataText},localeSumText(){return this.sumText===void 0?this.t("i.table.sumText"):this.sumText},wrapClasses(){return[`${Bs}-wrapper`,{[`${Bs}-hide`]:!this.ready,[`${Bs}-with-header`]:this.showSlotHeader,[`${Bs}-with-footer`]:this.showSlotFooter,[`${Bs}-with-summary`]:this.showSummary,[`${Bs}-wrapper-with-border`]:this.border}]},classes(){return[`${Bs}`,{[`${Bs}-${this.size}`]:!!this.size,[`${Bs}-border`]:this.border,[`${Bs}-stripe`]:this.stripe,[`${Bs}-with-fixed-top`]:!!this.height}]},fixedTableClasses(){return[`${Bs}-fixed`,{[`${Bs}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheLeft}]},fixedRightTableClasses(){return[`${Bs}-fixed-right`,{[`${Bs}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheRight}]},fixedHeaderClasses(){return[`${Bs}-fixed-header`,{[`${Bs}-fixed-header-with-empty`]:!this.rebuildData.length}]},styles(){let h={},f=0;if(this.showSummary&&(this.size==="small"?f=40:this.size==="large"?f=60:f=48),this.height){let v=parseInt(this.height)+f;h.height=`${v}px`}if(this.maxHeight){const v=parseInt(this.maxHeight)+f;h.maxHeight=`${v}px`}return this.width&&(h.width=`${this.width}px`),h},tableStyle(){let h={};if(this.tableWidth!==0){let f="";this.bodyHeight===0?f=this.tableWidth:f=this.tableWidth-(this.showVerticalScrollBar?this.scrollBarWidth:0),h.width=`${f}px`}return h},tableHeaderStyle(){let h={};if(this.tableWidth!==0){let f="";f=this.tableWidth,h.width=`${f}px`}return h},fixedTableStyle(){let h={},f=0;return this.leftFixedColumns.forEach(v=>{v.fixed&&v.fixed==="left"&&(f+=v._width)}),h.width=`${f}px`,h},fixedRightTableStyle(){let h={},f=0;return this.rightFixedColumns.forEach(v=>{v.fixed&&v.fixed==="right"&&(f+=v._width)}),h.width=`${f}px`,h.right=`${this.showVerticalScrollBar?this.scrollBarWidth:0}px`,h},fixedRightHeaderStyle(){let h={},f=0,v=this.headerHeight+1;return this.showVerticalScrollBar&&(f=this.scrollBarWidth),h.width=`${f}px`,h.height=`${v}px`,h},bodyStyle(){let h={};if(this.bodyHeight!==0){const f=this.bodyHeight;this.height?h.height=`${f}px`:this.maxHeight&&(h.maxHeight=`${f}px`)}return h},fixedBodyStyle(){let h={};if(this.bodyHeight!==0){let f=this.bodyHeight-(this.showHorizontalScrollBar?this.scrollBarWidth:0);const v=this.showHorizontalScrollBar?`${f}px`:`${f-1}px`;this.height?h.height=v:this.maxHeight&&(h.maxHeight=v)}return h},leftFixedColumns(){return hC(this.cloneColumns,"left")},rightFixedColumns(){return hC(this.cloneColumns,"right")},isLeftFixed(){return this.columns.some(h=>h.fixed&&h.fixed==="left")},isRightFixed(){return this.columns.some(h=>h.fixed&&h.fixed==="right")},summaryData(){if(!this.showSummary)return{};let h={};return this.summaryMethod?h=this.summaryMethod({columns:this.cloneColumns,data:this.rebuildData}):this.cloneColumns.forEach((f,v)=>{const E=f.key;if(v===0){h[E]={key:f.key,value:this.localeSumText};return}const T=this.rebuildData.map(Y=>Number(Y[f.key])),b=[];let N=!0;T.forEach(Y=>{if(!isNaN(Y)){N=!1;let W=(""+Y).split(".")[1];b.push(W?W.length:0)}});const U=Math.max.apply(null,b);if(N)h[E]={key:f.key,value:""};else{const Y=T.reduce((W,Z)=>{const fe=Number(Z);return isNaN(fe)?W:parseFloat((W+Z).toFixed(Math.min(U,20)))},0);h[E]={key:f.key,value:Y}}}),h}},methods:{rowClsName(h){return this.rowClassName(this.data[h],h)},handleResize(){let h=this.$el.offsetWidth-1,f={},v=0,E=[],T=[],b=[];this.cloneColumns.forEach(Z=>{Z.width?E.push(Z):(T.push(Z),Z.minWidth&&(v+=Z.minWidth),Z.maxWidth||b.push(Z)),Z._width=null});let N=E.map(Z=>Z.width).reduce((Z,fe)=>Z+fe,0),U=h-N-v-(this.showVerticalScrollBar?this.scrollBarWidth:0)-1,Y=T.length,W=0;U>0&&Y>0&&(W=parseInt(U/Y));for(let Z=0;Z<this.cloneColumns.length;Z++){const fe=this.cloneColumns[Z];let Te=W+(fe.minWidth?fe.minWidth:0);fe.width?Te=fe.width:fe._width?Te=fe._width:(fe.minWidth>Te?Te=fe.minWidth:fe.maxWidth<Te&&(Te=fe.maxWidth),U>0?(U-=Te-(fe.minWidth?fe.minWidth:0),Y--,Y>0?W=parseInt(U/Y):W=0):W=0),fe._width=Te,f[fe._index]={width:Te}}if(U>0){Y=b.length,W=parseInt(U/Y);for(let Z=0;Z<b.length;Z++){const fe=b[Z];let Te=fe._width+W;Y>1?(Y--,U-=W,W=parseInt(U/Y)):W=0,fe._width=Te,f[fe._index]={width:Te}}}this.tableWidth=this.cloneColumns.map(Z=>Z._width).reduce((Z,fe)=>Z+fe,0)+(this.showVerticalScrollBar?this.scrollBarWidth:0)+1,this.columnsWidth=f,this.fixedHeader(),this.fixedShadow==="auto"&&n.nextTick(()=>{const Z=this.$refs.body;this.scrollOnTheLeft=Z.scrollLeft===0,this.scrollOnTheRight=Z.scrollWidth===Z.scrollLeft+Z.clientWidth})},handleMouseIn(h,f){if(this.disabledHover)return;const v=f?this.getDataByRowKey(f):this.objData[h];v._isHover||(v._isHover=!0)},handleMouseOut(h,f){if(this.disabledHover)return;const v=f?this.getDataByRowKey(f):this.objData[h];v._isHover=!1},handleCurrentRow(h,f,v){const E=v?this.getDataByRowKey(v):this.objData[f];let T=null,b=-1;for(let U in this.objData)if(this.objData[U]._isHighlight){b=parseInt(U),this.objData[U]._isHighlight=!1;break}else if(this.objData[U].children&&this.objData[U].children.length){const Y=this.handleResetChildrenRow(this.objData[U]);Y&&(T=JSON.parse(JSON.stringify(Y)))}h==="highlight"&&(E._isHighlight=!0),b>=0&&(T=JSON.parse(JSON.stringify(this.cloneData[b])));const N=h==="highlight"?JSON.parse(JSON.stringify(v?this.getBaseDataByRowKey(v):this.cloneData[f])):null;this.$emit("on-current-change",N,T)},handleResetChildrenRow(h){let f=null;if(h.children&&h.children.length)for(let v=0;v<h.children.length;v++){const E=h.children[v];if(E._isHighlight){E._isHighlight=!1,f=E;break}else E.children&&E.children.length&&(f=this.handleResetChildrenRow(E))}return f},highlightCurrentRow(h,f){const v=f?this.getDataByRowKey(f):this.objData[h];!this.highlightRow||v._isHighlight||this.handleCurrentRow("highlight",h,f)},clearCurrentRow(){!this.highlightRow||this.handleCurrentRow("clear")},clickCurrentRow(h,f){this.highlightCurrentRow(h,f),f?this.$emit("on-row-click",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(f)))):this.$emit("on-row-click",JSON.parse(JSON.stringify(this.cloneData[h])),h)},dblclickCurrentRow(h,f){this.highlightCurrentRow(h,f),f?this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(f)))):this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.cloneData[h])),h)},contextmenuCurrentRow(h,f,v){this.contextMenuVisible&&this.handleClickContextMenuOutside(),n.nextTick(()=>{const E=this.$refs.tableWrap.getBoundingClientRect(),T={left:`${v.clientX-E.left}px`,top:`${v.clientY-E.top}px`};this.contextMenuStyles=T,this.contextMenuVisible=!0,f?this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(f))),v,T):this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.cloneData[h])),v,T)})},getSelection(){let h=[],f=[];for(let E in this.objData){const T=this.objData[E];T._isChecked&&h.push(parseInt(E)),T.children&&T.children.length&&(f=f.concat(this.getSelectionChildrenRowKeys(T,f)))}f=[...new Set(f)];let v=[];return this.data.forEach((E,T)=>{h.indexOf(T)>-1&&(v=v.concat(E)),E.children&&E.children.length&&f.length&&(v=v.concat(this.getSelectionChildren(E,v,f)))}),v=[...new Set(v)],JSON.parse(JSON.stringify(v))},getSelectionChildrenRowKeys(h,f){return h.children&&h.children.length&&h.children.forEach(v=>{v._isChecked&&f.push(v._rowKey),v.children&&v.children.length&&(f=f.concat(this.getSelectionChildrenRowKeys(v,f)))}),f},getSelectionChildren(h,f,v){return h.children&&h.children.length&&h.children.forEach(E=>{v.indexOf(E[this.rowKey])>-1&&(f=f.concat(E)),E.children&&E.children.length&&(f=f.concat(this.getSelectionChildren(E,f,v)))}),f},toggleSelect(h,f){let v={};if(f)v=this.getDataByRowKey(f);else for(let N in this.objData)if(parseInt(N)===h){v=this.objData[N];break}const E=!v._isChecked;v._isChecked=E;const T=this.getSelection(),b=f?this.getBaseDataByRowKey(f,this.data):this.data[h];this.$emit(E?"on-select":"on-select-cancel",T,JSON.parse(JSON.stringify(b))),this.$emit("on-selection-change",T)},toggleExpand(h){let f={};for(let E in this.objData)if(parseInt(E)===h){f=this.objData[E];break}const v=!f._isExpanded;this.objData[h]._isExpanded=v,this.$emit("on-expand",JSON.parse(JSON.stringify(this.cloneData[h])),v),(this.height||this.maxHeight)&&n.nextTick(()=>this.fixedBody())},toggleTree(h){const f=this.getDataByRowKey(h);if(!("_loading"in f&&f._loading)){if("_loading"in f&&!f._loading&&f.children.length===0){const v=this.getBaseDataByRowKey(h,this.data);v._loading=!0,this.loadData(v,E=>{v._loading=!1,E.length&&(v.children=E,n.nextTick(()=>{const T=this.getDataByRowKey(h);T._isShowChildren=!T._isShowChildren,this.updateDataStatus(h,"_showChildren",T._isShowChildren)}))});return}f._isShowChildren=!f._isShowChildren,this.updateShowChildren&&this.updateDataStatus(h,"_showChildren",f._isShowChildren),this.$emit("on-expand-tree",h,f._isShowChildren)}},updateDataStatus(h,f,v){const E=this.getBaseDataByRowKey(h,this.data);E[f]=v},getDataByRowKey(h,f=this.objData){let v=null;for(let E in f){const T=f[E];if(T._rowKey===h){v=T;break}else if(T.children&&T.children.length&&(v=this.getChildrenByRowKey(h,T),v))break}return v},getChildrenByRowKey(h,f){let v=null;if(f.children&&f.children.length)for(let E=0;E<f.children.length;E++){const T=f.children[E];if(T._rowKey===h){v=T;break}else if(T.children&&T.children.length&&(v=this.getChildrenByRowKey(h,T),v))break}return v},getBaseDataByRowKey(h,f=this.cloneData){let v=null;for(let E=0;E<f.length;E++){const T=f[E];if(T[this.rowKey]===h){v=T;break}else if(T.children&&T.children.length&&(v=this.getChildrenDataByRowKey(h,T),v&&v[this.rowKey]===h))return v}return v},getChildrenDataByRowKey(h,f){let v=null;if(f.children&&f.children.length)for(let E=0;E<f.children.length;E++){const T=f.children[E];if(T[this.rowKey]===h){v=T;break}else if(T.children&&T.children.length&&(v=this.getChildrenDataByRowKey(h,T),v))break}return v},selectAll(h){for(const v of this.rebuildData){const E=this.objData[v._index];E._isDisabled||(E._isChecked=h),v.children&&v.children.length&&this.selectAllChildren(E,h)}const f=this.getSelection();h?this.$emit("on-select-all",f):this.$emit("on-select-all-cancel",f),this.$emit("on-selection-change",f)},selectAllChildren(h,f){h.children&&h.children.length&&h.children.map(v=>{v._isDisabled||(v._isChecked=f),v.children&&v.children.length&&this.selectAllChildren(v,f)})},fixedHeader(){this.height||this.maxHeight?n.nextTick(()=>{const h=parseInt(I(this.$refs.title,"height"))||0,f=parseInt(I(this.$refs.header,"height"))||0,v=parseInt(I(this.$refs.footer,"height"))||0;this.height?this.bodyHeight=this.height-h-f-v:this.maxHeight&&(this.bodyHeight=this.maxHeight-h-f-v),n.nextTick(()=>this.fixedBody())}):(this.bodyHeight=0,n.nextTick(()=>this.fixedBody()))},fixedBody(){if(this.$refs.header&&(this.headerWidth=this.$refs.header.children[0].offsetWidth,this.headerHeight=this.$refs.header.children[0].offsetHeight),!this.$refs.tbody||!this.data||this.data.length===0)this.showVerticalScrollBar=!1;else{let h=this.$refs.tbody.$el,f=h.parentElement,v=h.offsetHeight,E=f.offsetHeight;this.showHorizontalScrollBar=f.offsetWidth<h.offsetWidth+(this.showVerticalScrollBar?this.scrollBarWidth:0),this.showVerticalScrollBar=this.bodyHeight?E-(this.showHorizontalScrollBar?this.scrollBarWidth:0)<v:!1,this.showVerticalScrollBar?f.classList.add(this.prefixCls+"-overflowY"):f.classList.remove(this.prefixCls+"-overflowY"),this.showHorizontalScrollBar?f.classList.add(this.prefixCls+"-overflowX"):f.classList.remove(this.prefixCls+"-overflowX")}},hideColumnFilter(){this.cloneColumns.forEach(h=>h._filterVisible=!1)},handleBodyScroll(h){this.scrollOnTheLeft=h.target.scrollLeft===0,this.scrollOnTheRight=h.target.scrollWidth===h.target.scrollLeft+h.target.clientWidth,this.showHeader&&(this.$refs.header.scrollLeft=h.target.scrollLeft),this.isLeftFixed&&(this.$refs.fixedBody.scrollTop=h.target.scrollTop),this.isRightFixed&&(this.$refs.fixedRightBody.scrollTop=h.target.scrollTop),this.showSummary&&this.$refs.summary&&(this.$refs.summary.$el.scrollLeft=h.target.scrollLeft),this.hideColumnFilter()},handleFixedMousewheel(h){let f=h.deltaY;if(!f&&h.detail&&(f=h.detail*40),!f&&h.wheelDeltaY&&(f=-h.wheelDeltaY),!f&&h.wheelDelta&&(f=-h.wheelDelta),!f)return;const v=this.$refs.body,E=v.scrollTop;f<0&&E!==0&&h.preventDefault(),f>0&&v.scrollHeight-v.clientHeight>E&&h.preventDefault();let T=0,b=setInterval(()=>{T+=5,f>0?v.scrollTop+=2:v.scrollTop-=2,T>=Math.abs(f)&&clearInterval(b)},5)},handleMouseWheel(h){const f=h.deltaX,v=this.$refs.body;f>0?v.scrollLeft=v.scrollLeft+10:v.scrollLeft=v.scrollLeft-10},sortData(h,f,v){const E=this.cloneColumns[v].key;h.sort((T,b)=>{if(this.cloneColumns[v].sortMethod)return this.cloneColumns[v].sortMethod(T[E],b[E],f);if(f==="asc")return T[E]>b[E]?1:-1;if(f==="desc")return T[E]<b[E]?1:-1});for(let T=0;T<h.length;T++)h[T].children&&h[T].children.length&&(h[T].children=this.sortData(h[T].children,f,v));return h},handleSort(h,f){const v=this.GetOriginalIndex(h);this.cloneColumns.forEach(T=>T._sortType="normal");const E=this.cloneColumns[v].key;this.cloneColumns[v].sortable!=="custom"&&(f==="normal"?this.rebuildData=this.makeDataWithFilter():this.rebuildData=this.sortData(this.rebuildData,f,v)),this.cloneColumns[v]._sortType=f,this.$emit("on-sort-change",{column:JSON.parse(JSON.stringify(this.allColumns[this.cloneColumns[v]._index])),key:E,order:f})},handleFilterHide(h){this.cloneColumns[h]._isFiltered||(this.cloneColumns[h]._filterChecked=[])},filterData(h,f){return h.filter(v=>{if(typeof f.filterRemote=="function")return!0;let E=!f._filterChecked.length;for(let T=0;T<f._filterChecked.length&&(E=f.filterMethod(f._filterChecked[T],v),!E);T++);return E})},filterOtherData(h,f){let v=this.cloneColumns[f];return typeof v.filterRemote=="function"&&v.filterRemote.call(this.$parent,v._filterChecked,v.key,v),this.cloneColumns.forEach((E,T)=>{T!==f&&(h=this.filterData(h,E))}),h},handleFilter(h){const f=this.cloneColumns[h];let v=this.makeDataWithSort();v=this.filterOtherData(v,h),this.rebuildData=this.filterData(v,f),this.cloneColumns[h]._isFiltered=!0,this.cloneColumns[h]._filterVisible=!1,this.$emit("on-filter-change",f)},GetOriginalIndex(h){return this.cloneColumns.findIndex(f=>f._index===h)},handleFilterSelect(h,f){const v=this.GetOriginalIndex(h);this.cloneColumns[v]._filterChecked=[f],this.handleFilter(v)},handleFilterReset(h){const f=this.GetOriginalIndex(h);this.cloneColumns[f]._isFiltered=!1,this.cloneColumns[f]._filterVisible=!1,this.cloneColumns[f]._filterChecked=[];let v=this.makeDataWithSort();v=this.filterOtherData(v,f),this.rebuildData=v,this.$emit("on-filter-change",this.cloneColumns[f])},makeData(){let h=V(this.data);return h.forEach((f,v)=>{f._index=v,f._rowKey=typeof this.rowKey=="string"?f[this.rowKey]:J8++,f.children&&f.children.length&&(f.children=this.makeChildrenData(f))}),h},makeChildrenData(h){return h.children&&h.children.length?h.children.map((f,v)=>{const E=V(f);return E._index=v,E._rowKey=typeof this.rowKey=="string"?E[this.rowKey]:J8++,E.children&&E.children.length&&(E.children=this.makeChildrenData(E)),E}):h},makeDataWithSort(){let h=this.makeData(),f="normal",v=-1,E=!1;for(let T=0;T<this.cloneColumns.length;T++)if(this.cloneColumns[T]._sortType!=="normal"){f=this.cloneColumns[T]._sortType,v=T,E=this.cloneColumns[T].sortable==="custom";break}return f!=="normal"&&!E&&(h=this.sortData(h,f,v)),h},makeDataWithFilter(){let h=this.makeData();return this.cloneColumns.forEach(f=>h=this.filterData(h,f)),h},makeDataWithSortAndFilter(){let h=this.makeDataWithSort();return this.cloneColumns.forEach(f=>h=this.filterData(h,f)),h},makeObjBaseData(h){const f=V(h);return typeof this.rowKey=="string"&&(f._rowKey=f[this.rowKey]),f._isHover=!1,f._disabled?f._isDisabled=f._disabled:f._isDisabled=!1,f._checked?f._isChecked=f._checked:f._isChecked=!1,f._expanded?f._isExpanded=f._expanded:f._isExpanded=!1,f._highlight?f._isHighlight=f._highlight:f._isHighlight=!1,f},makeObjData(){let h={};return this.data.forEach((f,v)=>{const E=this.makeObjBaseData(f);E.children&&E.children.length&&(E._showChildren?E._isShowChildren=E._showChildren:E._isShowChildren=!1,E.children=this.makeChildrenObjData(E)),h[v]=E}),h},makeChildrenObjData(h){return h.children&&h.children.length?h.children.map(f=>{const v=this.makeObjBaseData(f);return v._showChildren?v._isShowChildren=v._showChildren:v._isShowChildren=!1,v.children&&v.children.length&&(v.children=this.makeChildrenObjData(v)),v}):h},makeColumnsId(h){return V(h).map(f=>("children"in f&&this.makeColumnsId(f.children),f.__id=m1e(6),f))},makeColumns(h){let f=V(wx(h)),v=[],E=[],T=[];return f.forEach((b,N)=>{b._index=N,b._columnKey=g1e++,b.width=parseInt(b.width),b._width=b.width?b.width:"",b._sortType="normal",b._filterVisible=!1,b._isFiltered=!1,b._filterChecked=[],"filterMultiple"in b?b._filterMultiple=b.filterMultiple:b._filterMultiple=!0,"filteredValue"in b&&(b._filterChecked=b.filteredValue,b._isFiltered=!0),"sortType"in b&&(b._sortType=b.sortType),b.fixed&&b.fixed==="left"?v.push(b):b.fixed&&b.fixed==="right"?E.push(b):T.push(b)}),v.concat(T).concat(E)},makeColumnRows(h,f){return p1e(f,h)},exportCsv(h){h.filename?h.filename.indexOf(".csv")===-1&&(h.filename+=".csv"):h.filename="table.csv";let f=[],v=[];h.columns&&h.data?(f=h.columns,v=h.data):(f=this.allColumns,"original"in h||(h.original=!0),v=h.original?this.data:this.rebuildData);let E=!1;"noHeader"in h&&(E=h.noHeader);const T=d1e(f,v,h,E);h.callback?h.callback(T):f1e.download(h.filename,T)},dragAndDrop(h,f){this.$emit("on-drag-drop",h,f)},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnVisibleChange(h){h&&n.nextTick(()=>{this.handleResize()})},addTable(h){const f=this[h];!f||(f.tableList||(f.tableList=[]),f.tableList.push({id:this.id,table:this}))},removeTable(h){const f=this[h];if(!f||!f.tableList)return;const v=f.tableList.findIndex(E=>E.id===this.id);f.tableList.splice(v,1)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.context||(this.currentContext=this.$parent),this.showSlotHeader=this.$slots.header!==void 0,this.showSlotFooter=this.$slots.footer!==void 0,this.rebuildData=this.makeDataWithSortAndFilter()},mounted(){this.addTable("TabsInstance"),this.addTable("ModalInstance"),this.addTable("DrawerInstance"),this.handleResize(),n.nextTick(()=>this.ready=!0),o(window,"resize",this.handleResize),this.observer=N0(),this.observer.listenTo(this.$el,this.handleResize)},beforeUnmount(){this.removeTable("TabsInstance"),this.removeTable("ModalInstance"),this.removeTable("DrawerInstance"),a(window,"resize",this.handleResize),this.observer.removeAllListeners(this.$el),this.observer.uninstall(this.$el),this.observer=null},watch:{data:{handler(){const h=this.rebuildData.length;this.objData=this.makeObjData(),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize(),h||this.fixedHeader(),setTimeout(()=>{this.cloneData=V(this.data)},0)},deep:!0},columns:{handler(){const h=this.makeColumnsId(this.columns);this.allColumns=wx(h),this.cloneColumns=this.makeColumns(h),this.columnRows=this.makeColumnRows(!1,h),this.leftFixedColumnRows=this.makeColumnRows("left",h),this.rightFixedColumnRows=this.makeColumnRows("right",h),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize()},deep:!0},height(){this.handleResize()},maxHeight(){this.handleResize()},showHorizontalScrollBar(){this.handleResize()},showVerticalScrollBar(){this.handleResize()}}},y1e={cellspacing:"0",cellpadding:"0",border:"0"},_1e=["innerHTML"],x1e=["innerHTML"],b1e={class:"ivu-table-resize-line",ref:"resizeLine"};function w1e(h,f,v,E,T,b){const N=n.resolveComponent("table-head"),U=n.resolveComponent("table-body"),Y=n.resolveComponent("table-summary"),W=n.resolveComponent("DropdownMenu"),Z=n.resolveComponent("Dropdown"),fe=n.resolveComponent("Spin");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.wrapClasses),style:n.normalizeStyle(b.styles),ref:"tableWrap"},[n.createElementVNode("div",{class:n.normalizeClass(b.classes)},[T.showSlotHeader?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-title"]),ref:"title"},[n.renderSlot(h.$slots,"header")],2)):n.createCommentVNode("",!0),v.showHeader?(n.openBlock(),n.createElementBlock("div",{key:1,class:n.normalizeClass([T.prefixCls+"-header"]),ref:"header",onMousewheel:f[0]||(f[0]=(...Te)=>b.handleMouseWheel&&b.handleMouseWheel(...Te))},[n.createVNode(N,{"prefix-cls":T.prefixCls,styleObject:b.tableHeaderStyle,columns:T.cloneColumns,"column-rows":T.columnRows,"obj-data":T.objData,"columns-width":T.columnsWidth,data:T.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","obj-data","columns-width","data"])],34)):n.createCommentVNode("",!0),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-body"]),style:n.normalizeStyle(b.bodyStyle),ref:"body",onScroll:f[1]||(f[1]=(...Te)=>b.handleBodyScroll&&b.handleBodyScroll(...Te))},[n.createVNode(U,{ref:"tbody",draggable:v.draggable,"prefix-cls":T.prefixCls,styleObject:b.tableStyle,columns:T.cloneColumns,data:T.rebuildData,"row-key":v.rowKey,"columns-width":T.columnsWidth,"obj-data":T.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),[[n.vShow,!(b.localeNoDataText&&(!v.data||v.data.length===0)||b.localeNoFilteredDataText&&(!T.rebuildData||T.rebuildData.length===0))]]),v.showSummary&&v.data&&v.data.length?(n.openBlock(),n.createBlock(Y,{key:2,ref:"summary","prefix-cls":T.prefixCls,styleObject:b.tableStyle,columns:T.cloneColumns,data:b.summaryData,"columns-width":T.columnsWidth},null,8,["prefix-cls","styleObject","columns","data","columns-width"])):n.createCommentVNode("",!0),n.withDirectives(n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-tip"]),style:n.normalizeStyle(b.bodyStyle),onScroll:f[2]||(f[2]=(...Te)=>b.handleBodyScroll&&b.handleBodyScroll(...Te))},[n.createElementVNode("table",y1e,[n.createElementVNode("tbody",null,[n.createElementVNode("tr",null,[n.createElementVNode("td",{style:n.normalizeStyle({height:b.bodyStyle.height,width:`${T.headerWidth}px`})},[!v.data||v.data.length===0?(n.openBlock(),n.createElementBlock("span",{key:0,innerHTML:b.localeNoDataText},null,8,_1e)):(n.openBlock(),n.createElementBlock("span",{key:1,innerHTML:b.localeNoFilteredDataText},null,8,x1e))],4)])])])],38),[[n.vShow,!!b.localeNoDataText&&(!v.data||v.data.length===0)||!!b.localeNoFilteredDataText&&(!T.rebuildData||T.rebuildData.length===0)]]),b.isLeftFixed?(n.openBlock(),n.createElementBlock("div",{key:3,class:n.normalizeClass(b.fixedTableClasses),style:n.normalizeStyle(b.fixedTableStyle)},[v.showHeader?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.fixedHeaderClasses)},[n.createVNode(N,{fixed:"left","prefix-cls":T.prefixCls,styleObject:b.fixedTableStyle,columns:b.leftFixedColumns,"column-rows":T.columnRows,"fixed-column-rows":T.leftFixedColumnRows,"obj-data":T.objData,"columns-width":T.columnsWidth,data:T.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-fixed-body"]),style:n.normalizeStyle(b.fixedBodyStyle),ref:"fixedBody",onMousewheel:f[3]||(f[3]=(...Te)=>b.handleFixedMousewheel&&b.handleFixedMousewheel(...Te)),"on:DOMMouseScroll":f[4]||(f[4]=(...Te)=>b.handleFixedMousewheel&&b.handleFixedMousewheel(...Te))},[n.createVNode(U,{fixed:"left",draggable:v.draggable,"prefix-cls":T.prefixCls,styleObject:b.fixedTableStyle,columns:b.leftFixedColumns,data:T.rebuildData,"row-key":v.rowKey,"columns-width":T.columnsWidth,"obj-data":T.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),v.showSummary&&v.data&&v.data.length?(n.openBlock(),n.createBlock(Y,{key:1,fixed:"left","prefix-cls":T.prefixCls,styleObject:b.fixedTableStyle,columns:b.leftFixedColumns,data:b.summaryData,"columns-width":T.columnsWidth,style:n.normalizeStyle({"margin-top":T.showHorizontalScrollBar?T.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):n.createCommentVNode("",!0)],6)):n.createCommentVNode("",!0),b.isRightFixed?(n.openBlock(),n.createElementBlock("div",{key:4,class:n.normalizeClass(b.fixedRightTableClasses),style:n.normalizeStyle(b.fixedRightTableStyle)},[v.showHeader?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(b.fixedHeaderClasses)},[n.createVNode(N,{fixed:"right","prefix-cls":T.prefixCls,styleObject:b.fixedRightTableStyle,columns:b.rightFixedColumns,"column-rows":T.columnRows,"fixed-column-rows":T.rightFixedColumnRows,"obj-data":T.objData,"columns-width":T.columnsWidth,data:T.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):n.createCommentVNode("",!0),n.createElementVNode("div",{class:n.normalizeClass([T.prefixCls+"-fixed-body"]),style:n.normalizeStyle(b.fixedBodyStyle),ref:"fixedRightBody",onMousewheel:f[5]||(f[5]=(...Te)=>b.handleFixedMousewheel&&b.handleFixedMousewheel(...Te)),"on:DOMMouseScroll":f[6]||(f[6]=(...Te)=>b.handleFixedMousewheel&&b.handleFixedMousewheel(...Te))},[n.createVNode(U,{fixed:"right",draggable:v.draggable,"prefix-cls":T.prefixCls,styleObject:b.fixedRightTableStyle,columns:b.rightFixedColumns,data:T.rebuildData,"row-key":v.rowKey,"columns-width":T.columnsWidth,"obj-data":T.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),v.showSummary&&v.data&&v.data.length?(n.openBlock(),n.createBlock(Y,{key:1,fixed:"right","prefix-cls":T.prefixCls,styleObject:b.fixedRightTableStyle,columns:b.rightFixedColumns,data:b.summaryData,"columns-width":T.columnsWidth,style:n.normalizeStyle({"margin-top":T.showHorizontalScrollBar?T.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):n.createCommentVNode("",!0)],6)):n.createCommentVNode("",!0),b.isRightFixed?(n.openBlock(),n.createElementBlock("div",{key:5,class:n.normalizeClass([T.prefixCls+"-fixed-right-header"]),style:n.normalizeStyle(b.fixedRightHeaderStyle)},null,6)):n.createCommentVNode("",!0),T.showSlotFooter?(n.openBlock(),n.createElementBlock("div",{key:6,class:n.normalizeClass([T.prefixCls+"-footer"]),ref:"footer"},[n.renderSlot(h.$slots,"footer")],2)):n.createCommentVNode("",!0)],2),n.withDirectives(n.createElementVNode("div",b1e,null,512),[[n.vShow,T.showResizeLine]]),v.showContextMenu?(n.openBlock(),n.createElementBlock("div",{key:0,class:"ivu-table-context-menu",style:n.normalizeStyle(T.contextMenuStyles)},[n.createVNode(Z,{trigger:"custom",visible:T.contextMenuVisible,transfer:"",onOnClick:b.handleClickDropdownItem,onOnClickoutside:b.handleClickContextMenuOutside},{list:n.withCtx(()=>[n.createVNode(W,null,{default:n.withCtx(()=>[n.renderSlot(h.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)):n.createCommentVNode("",!0),n.createVNode(fe,{fix:"",size:"large",show:v.loading},{default:n.withCtx(()=>[n.renderSlot(h.$slots,"loading")]),_:3},8,["show"])],6)}var cC=l(v1e,[["render",w1e]]);const O1e={name:"TablePaste",components:{Row:qd,Col:yc,Input:Pl,Table:cC},emits:["on-change","on-error","on-success"],props:{value:{type:String},inputProps:{type:Object,default(){return{}}},tableProps:{type:Object,default(){return{}}},hideTable:{type:Boolean,default:!1}},data(){return{content:"",tableColumns:[],tableData:[]}},watch:{value:{handler(h){this.handleResolveContent(h)},immediate:!0}},methods:{handleContentChange(h){const f=h.target.value.trim();this.$emit("on-change",f),this.handleResolveContent(f)},handleResolveContent(h){let f=[];h!==""&&h!==void 0&&(f=h.split(/[\n\u0085\u2028\u2029]|\r\n?/g).map(T=>T.split("	")));const v=this.handleGetErrorIndex(f),E=this.contentToTable(f);this.tableColumns=E.columns,this.tableData=E.data,v.length?this.$emit("on-error",E,v):this.$emit("on-success",E)},handleGetErrorIndex(h){const f=V(h),v=[];if(f.length){const E=f[0].length;f.forEach((T,b)=>{T.length!==E&&v.push(b)})}return v},contentToTable(h){const f=V(h);let v=[],E=[];return f.length>1&&(v=f.shift().map((T,b)=>({title:T,key:`key${b}`})),E=f.map(T=>{const b={};return T.forEach((N,U)=>{b[`key${U}`]=N}),b})),{columns:v,data:E}}}},S1e={class:"ivu-table-paste"},C1e={key:0,class:"ivu-table-paste-input"},T1e={key:0,class:"ivu-table-paste-input"};function A1e(h,f,v,E,T,b){const N=n.resolveComponent("Input"),U=n.resolveComponent("Col"),Y=n.resolveComponent("Table"),W=n.resolveComponent("Row");return n.openBlock(),n.createElementBlock("div",S1e,[v.hideTable?(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[v.value!==void 0||!h.$slots.default?(n.openBlock(),n.createElementBlock("div",T1e,[n.renderSlot(h.$slots,"default",{},()=>[n.createVNode(N,n.mergeProps({modelValue:T.content,"onUpdate:modelValue":f[1]||(f[1]=Z=>T.content=Z),type:"textarea"},v.inputProps,{onOnChange:b.handleContentChange}),null,16,["modelValue","onOnChange"])])])):n.createCommentVNode("",!0)],64)):(n.openBlock(),n.createBlock(W,{key:0,gutter:32},{default:n.withCtx(()=>[n.createVNode(U,{span:"12"},{default:n.withCtx(()=>[v.value!==void 0||!h.$slots.default?(n.openBlock(),n.createElementBlock("div",C1e,[n.renderSlot(h.$slots,"default",{},()=>[n.createVNode(N,n.mergeProps({modelValue:T.content,"onUpdate:modelValue":f[0]||(f[0]=Z=>T.content=Z),type:"textarea"},v.inputProps,{onOnChange:b.handleContentChange}),null,16,["modelValue","onOnChange"])])])):n.createCommentVNode("",!0)]),_:3}),n.createVNode(U,{span:"12"},{default:n.withCtx(()=>[n.createVNode(Y,n.mergeProps({columns:T.tableColumns,data:T.tableData},v.tableProps),null,16,["columns","data"])]),_:1})]),_:3}))])}var ez=l(O1e,[["render",A1e]]);const E1e={name:"TagSelect",mixins:[Ui],components:{Tag:k0,Icon:O},emits:["on-change","on-checked-all","update:modelValue"],provide(){return{TagSelectInstance:this}},props:{modelValue:{type:Array,default(){return[]}},expandable:{type:Boolean,default:!1},hideCheckAll:{type:Boolean,default:!1},locale:{type:Object,default(){return{collapseText:"收起",expandText:"展开"}}}},data(){return{currentValue:this.modelValue,checkedAll:!1,expand:!1,tagSelectOptionList:[]}},computed:{classes(){return{"ivu-tag-select-with-expanded":this.expandable,"ivu-tag-select-expanded":this.expand}}},watch:{modelValue(h){this.currentValue=h,this.handleUpdateTags()}},methods:{handleUpdateTags(){let h=!0;this.tagSelectOptionList.map(f=>f.option).forEach(f=>{this.currentValue.indexOf(f.name)>=0?f.checked=!0:(f.checked=!1,h=!1)}),this.checkedAll=h},handleChangeTag(h){const f=[];let v=!0;this.tagSelectOptionList.map(E=>E.option).forEach(E=>{E.checked?f.push(E.name):v=!1}),this.currentValue=f,this.$emit("update:modelValue",f),this.$emit("on-change",[...f],h),this.handleFormItemChange("change",h),h&&(this.checkedAll=v)},handleCheckAll(h){this.checkedAll=h,this.tagSelectOptionList.map(f=>f.option).forEach(f=>{f.checked=h}),this.handleChangeTag(),this.$emit("on-checked-all",h)},handleToggleExpand(){this.expand=!this.expand}},mounted(){this.handleUpdateTags()}},M1e={key:0,class:"ivu-tag-select-option"},P1e={key:0},k1e={key:1};function I1e(h,f,v,E,T,b){const N=n.resolveComponent("Tag"),U=n.resolveComponent("Icon");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(["ivu-tag-select",b.classes])},[v.hideCheckAll?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",M1e,[n.createVNode(N,{checkable:"",checked:T.checkedAll,onOnChange:b.handleCheckAll,color:"primary"},{default:n.withCtx(()=>[n.createTextVNode("全部")]),_:1},8,["checked","onOnChange"])])),n.renderSlot(h.$slots,"default"),v.expandable?(n.openBlock(),n.createElementBlock("a",{key:1,class:"ivu-tag-select-expand-btn",onClick:f[0]||(f[0]=(...Y)=>b.handleToggleExpand&&b.handleToggleExpand(...Y))},[T.expand?(n.openBlock(),n.createElementBlock("span",P1e,n.toDisplayString(v.locale.collapseText),1)):(n.openBlock(),n.createElementBlock("span",k1e,n.toDisplayString(v.locale.expandText),1)),T.expand?(n.openBlock(),n.createBlock(U,{key:2,type:"ios-arrow-up"})):(n.openBlock(),n.createBlock(U,{key:3,type:"ios-arrow-down"}))])):n.createCommentVNode("",!0)],2)}var tz=l(E1e,[["render",I1e]]);const R1e={name:"TagSelectOption",components:{Tag:k0},inject:["TagSelectInstance"],props:{name:{type:[String,Number],required:!0},tagProps:{type:Object,default(){return{}}},color:{type:String,default:"primary"}},data(){return{checked:!1,id:ie(6)}},methods:{handleChange(h){this.checked=h,this.TagSelectInstance.handleChangeTag(this.name)},addOption(){this.TagSelectInstance.tagSelectOptionList.push({id:this.id,option:this})},removeOption(){const h=this.TagSelectInstance,f=h.tagSelectOptionList.findIndex(v=>v.id===this.id);h.tagSelectOptionList.splice(f,1)}},mounted(){this.addOption()},beforeUnmount(){this.removeOption()}},B1e={class:"ivu-tag-select-option"};function D1e(h,f,v,E,T,b){const N=n.resolveComponent("Tag");return n.openBlock(),n.createElementBlock("div",B1e,[n.createVNode(N,n.mergeProps({checkable:"",checked:T.checked,onOnChange:b.handleChange,color:v.color},v.tagProps),{default:n.withCtx(()=>[n.renderSlot(h.$slots,"default")]),_:3},16,["checked","onOnChange","color"])])}var iz=l(R1e,[["render",D1e]]);const nz={name:"Text",mixins:[ux],render(){return n.h(tC,{...this.$props,component:"span",...this.commonEvents()},this.commonSlots())}},rz="ivu-timeline",L1e={name:"Timeline",props:{pending:{type:Boolean,default:!1}},computed:{classes(){return[`${rz}`,{[`${rz}-pending`]:this.pending}]}}};function N1e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("ul",{class:n.normalizeClass(b.classes)},[n.renderSlot(h.$slots,"default")],2)}var sz=l(L1e,[["render",N1e]]);const z0="ivu-timeline",V1e={name:"TimelineItem",props:{color:{type:String,default:"blue"}},data(){return{dot:!1}},mounted(){this.dot=!!this.$refs.dot.innerHTML.length},computed:{itemClasses(){return`${z0}-item`},tailClasses(){return`${z0}-item-tail`},headClasses(){return[`${z0}-item-head`,{[`${z0}-item-head-custom`]:this.dot,[`${z0}-item-head-${this.color}`]:this.headColorShow}]},headColorShow(){return this.color==="blue"||this.color==="red"||this.color==="green"},customColor(){let h={};return this.color&&(this.headColorShow||(h={color:this.color,"border-color":this.color})),h},contentClasses(){return`${z0}-item-content`}}};function F1e(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("li",{class:n.normalizeClass(b.itemClasses)},[n.createElementVNode("div",{class:n.normalizeClass(b.tailClasses)},null,2),n.createElementVNode("div",{class:n.normalizeClass(b.headClasses),style:n.normalizeStyle(b.customColor),ref:"dot"},[n.renderSlot(h.$slots,"dot")],6),n.createElementVNode("div",{class:n.normalizeClass(b.contentClasses)},[n.renderSlot(h.$slots,"default")],2)],2)}var oz=l(V1e,[["render",F1e]]),az={mixins:[Z$,zS],components:{TimePickerPanel:uU,RangeTimePickerPanel:gU},props:{type:{validator(h){return S(h,["time","timerange"])},default:"time"}},computed:{panel(){return this.type==="timerange"?"RangeTimePickerPanel":"TimePickerPanel"},ownPickerProps(){return{disabledHours:this.disabledHours,disabledMinutes:this.disabledMinutes,disabledSeconds:this.disabledSeconds,hideDisabledOptions:this.hideDisabledOptions}}},watch:{visible(h){h&&n.nextTick(()=>{this.timeSpinnerList.map(f=>f.timeSpinner).forEach(f=>f.updateScroll())})}}};const lz={name:"Title",mixins:[ux],props:{level:{type:Number,validator(h){return S(h,[1,2,3,4,5,6])},default:1}},render(){return n.h(tC,{...this.$props,component:`h${this.level}`,...this.commonEvents()},this.commonSlots())}},$1e={name:"Search",components:{Input:Pl},emits:["on-query-change","on-query-clear"],props:{prefixCls:String,placeholder:String,query:String},data(){return{currentQuery:this.query}},watch:{query(h){this.currentQuery=h},currentQuery(h){this.$emit("on-query-change",h)}},computed:{icon(){return this.query===""?"ios-search":"ios-close-circle"}},methods:{handleClick(){this.currentQuery!==""&&(this.currentQuery="",this.$emit("on-query-clear"))}}};function U1e(h,f,v,E,T,b){const N=n.resolveComponent("Input");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(v.prefixCls)},[n.createVNode(N,{modelValue:T.currentQuery,"onUpdate:modelValue":f[0]||(f[0]=U=>T.currentQuery=U),size:"small",icon:b.icon,placeholder:v.placeholder,onOnClick:b.handleClick},null,8,["modelValue","icon","placeholder","onOnClick"])],2)}var z1e=l($1e,[["render",U1e]]);const X1e={name:"TransferList",components:{Search:z1e,Checkbox:P0},inject:["TransferInstance"],emits:["on-checked-keys-change"],props:{prefixCls:String,data:Array,renderFormat:Function,checkedKeys:Array,listStyle:Object,title:[String,Number],filterable:Boolean,filterPlaceholder:String,filterMethod:Function,notFoundText:String,validKeysCount:Number},data(){return{showItems:[],query:"",showFooter:!0}},watch:{data(){this.updateFilteredData()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-with-footer`]:this.showFooter}]},bodyClasses(){return[`${this.prefixCls}-body`,{[`${this.prefixCls}-body-with-search`]:this.filterable,[`${this.prefixCls}-body-with-footer`]:this.showFooter}]},count(){const h=this.validKeysCount;return(h>0?`${h}/`:"")+`${this.data.length}`},checkedAll(){return this.filterData.filter(h=>!h.disabled).length===this.validKeysCount&&this.validKeysCount!==0},checkedAllDisabled(){return this.filterData.filter(h=>!h.disabled).length<=0},filterData(){return this.showItems.filter(h=>this.filterMethod(h,this.query))}},methods:{itemClasses(h){return[`${this.prefixCls}-content-item`,{[`${this.prefixCls}-content-item-disabled`]:h.disabled}]},showLabel(h){return this.renderFormat(h)},isCheck(h){return this.checkedKeys.some(f=>f===h.key)},select(h){if(h.disabled)return;const f=this.checkedKeys.indexOf(h.key);f>-1?this.checkedKeys.splice(f,1):this.checkedKeys.push(h.key),this.TransferInstance.handleCheckedKeys()},updateFilteredData(){this.showItems=this.data},toggleSelectAll(h){const f=h?this.filterData.filter(v=>!v.disabled||this.checkedKeys.indexOf(v.key)>-1).map(v=>v.key):this.filterData.filter(v=>v.disabled&&this.checkedKeys.indexOf(v.key)>-1).map(v=>v.key);this.$emit("on-checked-keys-change",f)},handleQueryClear(){this.query=""},handleQueryChange(h){this.query=h}},created(){this.updateFilteredData()},mounted(){this.showFooter=this.$slots.default!==void 0}},W1e=["onClick"],G1e=["innerHTML"];function H1e(h,f,v,E,T,b){const N=n.resolveComponent("Checkbox"),U=n.resolveComponent("Search");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(b.classes),style:n.normalizeStyle(v.listStyle)},[n.createElementVNode("div",{class:n.normalizeClass(v.prefixCls+"-header")},[n.createVNode(N,{modelValue:b.checkedAll,disabled:b.checkedAllDisabled,"onUpdate:modelValue":b.toggleSelectAll},null,8,["modelValue","disabled","onUpdate:modelValue"]),n.createElementVNode("span",{class:n.normalizeClass(v.prefixCls+"-header-title"),onClick:f[0]||(f[0]=Y=>b.toggleSelectAll(!b.checkedAll))},n.toDisplayString(v.title),3),n.createElementVNode("span",{class:n.normalizeClass(v.prefixCls+"-header-count")},n.toDisplayString(b.count),3)],2),n.createElementVNode("div",{class:n.normalizeClass(b.bodyClasses)},[v.filterable?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(v.prefixCls+"-body-search-wrapper")},[n.createVNode(U,{"prefix-cls":v.prefixCls+"-search",query:T.query,onOnQueryClear:b.handleQueryClear,onOnQueryChange:b.handleQueryChange,placeholder:v.filterPlaceholder},null,8,["prefix-cls","query","onOnQueryClear","onOnQueryChange","placeholder"])],2)):n.createCommentVNode("",!0),n.createElementVNode("ul",{class:n.normalizeClass(v.prefixCls+"-content")},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.filterData,(Y,W)=>(n.openBlock(),n.createElementBlock("li",{key:W,class:n.normalizeClass(b.itemClasses(Y)),onClick:n.withModifiers(Z=>b.select(Y),["prevent"])},[n.createVNode(N,{modelValue:b.isCheck(Y),disabled:Y.disabled},null,8,["modelValue","disabled"]),n.createElementVNode("span",{innerHTML:b.showLabel(Y)},null,8,G1e)],10,W1e))),128)),n.createElementVNode("li",{class:n.normalizeClass(v.prefixCls+"-content-not-found")},n.toDisplayString(v.notFoundText),3)],2)],2),T.showFooter?(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass(v.prefixCls+"-footer")},[n.renderSlot(h.$slots,"default")],2)):n.createCommentVNode("",!0)],6)}var hz=l(X1e,[["render",H1e]]);const Q1e={name:"Operation",components:{Button:Do,Icon:O},inject:["TransferInstance"],props:{prefixCls:String,operations:Array,leftActive:Boolean,rightActive:Boolean,reverseOperation:Boolean},methods:{moveToLeft(){this.TransferInstance.moveTo("left")},moveToRight(){this.TransferInstance.moveTo("right")}}},j1e={key:0},Y1e={key:0},q1e={key:0},Z1e={key:0};function K1e(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Button");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(v.prefixCls+"-operation")},[v.reverseOperation?(n.openBlock(),n.createElementBlock(n.Fragment,{key:0},[n.createVNode(U,{type:"primary",size:"small",disabled:!v.leftActive,onClick:b.moveToRight},{default:n.withCtx(()=>[v.operations[1]?(n.openBlock(),n.createElementBlock("span",j1e,n.toDisplayString(v.operations[1]),1)):n.createCommentVNode("",!0),n.createVNode(N,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"]),n.createVNode(U,{type:"primary",size:"small",disabled:!v.rightActive,onClick:b.moveToLeft},{default:n.withCtx(()=>[n.createVNode(N,{type:"ios-arrow-back"}),v.operations[0]?(n.openBlock(),n.createElementBlock("span",Y1e,n.toDisplayString(v.operations[0]),1)):n.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"])],64)):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[n.createVNode(U,{type:"primary",size:"small",disabled:!v.rightActive,onClick:b.moveToLeft},{default:n.withCtx(()=>[n.createVNode(N,{type:"ios-arrow-back"}),v.operations[0]?(n.openBlock(),n.createElementBlock("span",q1e,n.toDisplayString(v.operations[0]),1)):n.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"]),n.createVNode(U,{type:"primary",size:"small",disabled:!v.leftActive,onClick:b.moveToRight},{default:n.withCtx(()=>[v.operations[1]?(n.openBlock(),n.createElementBlock("span",Z1e,n.toDisplayString(v.operations[1]),1)):n.createCommentVNode("",!0),n.createVNode(N,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"])],64))],2)}var J1e=l(Q1e,[["render",K1e]]);const cz="ivu-transfer",uz={name:"Transfer",mixins:[kn,Ui],emits:["on-change","on-selected-change"],provide(){return{TransferInstance:this}},render(){const h=this.$slots.default?this.$slots.default():"";return n.h("div",{class:this.classes},[n.h(hz,{ref:"left",prefixCls:this.prefixCls+"-list",data:this.leftData,renderFormat:this.renderFormat,checkedKeys:this.leftCheckedKeys,validKeysCount:this.leftValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[0],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleLeftCheckedKeysChange},()=>h),n.h(J1e,{prefixCls:this.prefixCls,operations:this.operations,leftActive:this.leftValidKeysCount>0,rightActive:this.rightValidKeysCount>0,reverseOperation:this.reverseOperation}),n.h(hz,{ref:"right",prefixCls:this.prefixCls+"-list",data:this.rightData,renderFormat:this.renderFormat,checkedKeys:this.rightCheckedKeys,validKeysCount:this.rightValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[1],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleRightCheckedKeysChange},()=>h)])},props:{data:{type:Array,default(){return[]}},renderFormat:{type:Function,default(h){return h.label||h.key}},targetKeys:{type:Array,default(){return[]}},selectedKeys:{type:Array,default(){return[]}},listStyle:{type:Object,default(){return{}}},titles:{type:Array},operations:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!1},filterPlaceholder:{type:String},filterMethod:{type:Function,default(h,f){const v="label"in h?"label":"key";return h[v].indexOf(f)>-1}},notFoundText:{type:String},reverseOperation:{type:Boolean,default:!1}},data(){return{prefixCls:cz,leftData:[],rightData:[],leftCheckedKeys:[],rightCheckedKeys:[]}},computed:{classes(){return[`${cz}`]},leftValidKeysCount(){return this.getValidKeys("left").length},rightValidKeysCount(){return this.getValidKeys("right").length},localeFilterPlaceholder(){return this.filterPlaceholder===void 0?this.t("i.transfer.filterPlaceholder"):this.filterPlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.transfer.notFoundText"):this.notFoundText},localeTitles(){return this.titles===void 0?[this.t("i.transfer.titles.source"),this.t("i.transfer.titles.target")]:this.titles}},methods:{getValidKeys(h){return this[`${h}Data`].filter(f=>!f.disabled&&this[`${h}CheckedKeys`].indexOf(f.key)>-1).map(f=>f.key)},splitData(h=!1){this.leftData=[...this.data],this.rightData=[],this.targetKeys.length>0&&this.targetKeys.forEach(f=>{const v=this.leftData.filter((E,T)=>E.key===f?(this.leftData.splice(T,1),!0):!1);v&&v.length>0&&this.rightData.push(v[0])}),h&&this.splitSelectedKey()},splitSelectedKey(){const h=this.selectedKeys;h.length>0&&(this.leftCheckedKeys=this.leftData.filter(f=>h.indexOf(f.key)>-1).map(f=>f.key),this.rightCheckedKeys=this.rightData.filter(f=>h.indexOf(f.key)>-1).map(f=>f.key))},moveTo(h){const f=this.targetKeys,v=h==="left"?"right":"left",E=this.getValidKeys(v),T=h==="right"?E.concat(f):f.filter(b=>!E.some(N=>b===N));this.$refs[v].toggleSelectAll(!1),this.$emit("on-change",T,h,E),this.handleFormItemChange("change",{tarketKeys:T,direction:h,moveKeys:E})},handleLeftCheckedKeysChange(h){this.leftCheckedKeys=h},handleRightCheckedKeysChange(h){this.rightCheckedKeys=h},handleCheckedKeys(){const h=this.getValidKeys("left"),f=this.getValidKeys("right");this.$emit("on-selected-change",h,f)}},watch:{targetKeys(){this.splitData(!1)},data(){this.splitData(!1)}},mounted(){this.splitData(!0)}};var ebe={name:"RenderCell",props:{render:Function,data:Object,node:Array},render(){const h={root:this.node[0],node:this.node[1],data:this.data};return this.render(n.h,h)}};const lf="ivu-tree",tbe={name:"TreeNode",inject:["TreeInstance"],components:{Checkbox:P0,Icon:O,CollapseTransition:g3,Render:ebe},props:{data:{type:Object,default:()=>{}},multiple:{type:Boolean,default:!1},childrenKey:{type:String,default:"children"},showCheckbox:{type:Boolean,default:!1},appear:{type:Boolean,default:!1}},data(){return{prefixCls:lf,appearByClickArrow:!1,globalConfig:{}}},computed:{classes(){return[`${lf}-children`]},selectedCls(){return[{[`${lf}-node-selected`]:this.data.selected}]},arrowClasses(){return[`${lf}-arrow`,{[`${lf}-arrow-disabled`]:this.data.disabled,[`${lf}-arrow-open`]:this.data.expand}]},titleClasses(){return[`${lf}-title`,{[`${lf}-title-selected`]:this.data.selected}]},showArrow(){return this.data[this.childrenKey]&&this.data[this.childrenKey].length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},isParentRender(){const h=L(this,"Tree");return h&&h.render},parentRender(){const h=L(this,"Tree");return h&&h.render?h.render:null},node(){const h=L(this,"Tree");return h?[h.flatState,h.flatState.find(f=>f.nodeKey===this.data.nodeKey)]:[]},children(){return this.data[this.childrenKey]},arrowType(){const h=this.globalConfig;let f="ios-arrow-forward";return h&&(h.tree.customArrow?f="":h.tree.arrow&&(f=h.tree.arrow)),f},customArrowType(){const h=this.globalConfig;let f="";return h&&h.tree.customArrow&&(f=h.tree.customArrow),f},arrowSize(){const h=this.globalConfig;let f="";return h&&h.tree.arrowSize&&(f=h.tree.arrowSize),f}},methods:{handleExpand(){const h=this.data;if(this.appearByClickArrow=!0,h[this.childrenKey].length===0){const f=L(this,"Tree");if(f&&f.loadData){this.data.loading=!0,f.loadData(h,v=>{this.data.loading=!1,v.length&&(this.data[this.childrenKey]=v,n.nextTick(()=>this.handleExpand()))});return}}h[this.childrenKey]&&h[this.childrenKey].length&&(this.data.expand=!this.data.expand,this.TreeInstance.handleToggleExpand(this.data))},handleClickNode(){this.TreeInstance.expandNode?this.showArrow&&this.handleExpand():this.TreeInstance.selectNode&&this.handleSelect()},handleSelect(){this.data.disabled||(this.TreeInstance.showCheckbox&&this.TreeInstance.checkDirectly?this.handleCheck():this.TreeInstance.handleOnSelected(this.data.nodeKey))},handleCheck(){if(this.data.disabled)return;const h={checked:!this.data.checked&&!this.data.indeterminate,nodeKey:this.data.nodeKey};this.TreeInstance.handleOnCheck(h)},handleContextmenu(h,f){h.contextmenu&&(f.preventDefault(),this.TreeInstance.handleOnContextmenu({data:h,event:f}))},handlePreventSelect(h,f){h.contextmenu&&f.preventDefault()}},created(){const h=n.getCurrentInstance();this.globalConfig=h.appContext.config.globalProperties.$VIEWUI}},ibe={key:0,class:"ivu-tree-expand"};function nbe(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("Checkbox"),Y=n.resolveComponent("Render"),W=n.resolveComponent("TreeNode"),Z=n.resolveComponent("collapse-transition");return n.openBlock(),n.createElementBlock("ul",{class:n.normalizeClass(b.classes)},[n.createElementVNode("li",{onContextmenu:f[2]||(f[2]=n.withModifiers(fe=>b.handleContextmenu(v.data,fe),["stop"])),onSelectstart:f[3]||(f[3]=n.withModifiers(fe=>b.handlePreventSelect(v.data,fe),["stop"]))},[n.createElementVNode("span",{class:n.normalizeClass(b.arrowClasses),onClick:f[0]||(f[0]=(...fe)=>b.handleExpand&&b.handleExpand(...fe))},[b.showArrow?(n.openBlock(),n.createBlock(N,{key:0,type:b.arrowType,custom:b.customArrowType,size:b.arrowSize},null,8,["type","custom","size"])):n.createCommentVNode("",!0),b.showLoading?(n.openBlock(),n.createBlock(N,{key:1,type:"ios-loading",class:"ivu-load-loop"})):n.createCommentVNode("",!0)],2),v.showCheckbox?(n.openBlock(),n.createBlock(U,{key:0,"model-value":v.data.checked,indeterminate:v.data.indeterminate,disabled:v.data.disabled||v.data.disableCheckbox,onClick:n.withModifiers(b.handleCheck,["prevent"])},null,8,["model-value","indeterminate","disabled","onClick"])):n.createCommentVNode("",!0),n.createElementVNode("span",{class:n.normalizeClass(b.titleClasses),onClick:f[1]||(f[1]=(...fe)=>b.handleClickNode&&b.handleClickNode(...fe))},[v.data.render?(n.openBlock(),n.createBlock(Y,{key:0,render:v.data.render,data:v.data,node:b.node},null,8,["render","data","node"])):b.isParentRender?(n.openBlock(),n.createBlock(Y,{key:1,render:b.parentRender,data:v.data,node:b.node},null,8,["render","data","node"])):(n.openBlock(),n.createElementBlock(n.Fragment,{key:2},[n.createTextVNode(n.toDisplayString(v.data.title),1)],64))],2),n.createVNode(Z,{appear:v.appear},{default:n.withCtx(()=>[v.data.expand?(n.openBlock(),n.createElementBlock("div",ibe,[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(b.children,(fe,Te)=>(n.openBlock(),n.createBlock(W,{appear:T.appearByClickArrow,key:Te,data:fe,multiple:v.multiple,"show-checkbox":v.showCheckbox,"children-key":v.childrenKey},null,8,["appear","data","multiple","show-checkbox","children-key"]))),128))])):n.createCommentVNode("",!0)]),_:1},8,["appear"])],32)],2)}var rbe=l(tbe,[["render",nbe]]);const sbe="ivu-tree",obe={name:"Tree",mixins:[kn],components:{TreeNode:rbe,Dropdown:lm,DropdownMenu:hm},emits:["on-select-change","on-check-change","on-contextmenu","on-toggle-expand"],provide(){return{TreeInstance:this}},props:{data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!1},emptyText:{type:String},childrenKey:{type:String,default:"children"},loadData:{type:Function},render:{type:Function},selectNode:{type:Boolean,default:!0},expandNode:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:sbe,stateTree:this.data,flatState:[],contextMenuVisible:!1,contextMenuStyles:{top:0,left:0}}},watch:{data:{deep:!0,handler(){this.stateTree=this.data,this.flatState=this.compileFlatState(),this.rebuildTree()}}},computed:{localeEmptyText(){return typeof this.emptyText>"u"?this.t("i.tree.emptyText"):this.emptyText}},methods:{compileFlatState(){let h=0,f=this.childrenKey;const v=[];function E(T,b){T.nodeKey=h++,v[T.nodeKey]={node:T,nodeKey:T.nodeKey},typeof b<"u"&&(v[T.nodeKey].parent=b.nodeKey,v[b.nodeKey][f].push(T.nodeKey)),T[f]&&(v[T.nodeKey][f]=[],T[f].forEach(N=>E(N,T)))}return this.stateTree.forEach(T=>{E(T)}),v},updateTreeUp(h){const f=this.flatState[h].parent;if(typeof f>"u"||this.checkStrictly)return;const v=this.flatState[h].node,E=this.flatState[f].node;v.checked==E.checked&&v.indeterminate==E.indeterminate||(v.checked==!0?(E.checked=E[this.childrenKey].every(T=>T.checked),E.indeterminate=!E.checked):(E.checked=!1,E.indeterminate=E[this.childrenKey].some(T=>T.checked||T.indeterminate)),this.updateTreeUp(f))},rebuildTree(){this.getCheckedNodes().forEach(h=>{this.updateTreeDown(h,{checked:!0});const f=this.flatState[h.nodeKey].parent;if(!f&&f!==0)return;const v=this.flatState[f].node;typeof h.checked<"u"&&h.checked&&v.checked!=h.checked&&this.updateTreeUp(h.nodeKey)})},getSelectedNodes(){return this.flatState.filter(h=>h.node.selected).map(h=>h.node)},getCheckedNodes(){return this.flatState.filter(h=>h.node.checked).map(h=>h.node)},getCheckedAndIndeterminateNodes(){return this.flatState.filter(h=>h.node.checked||h.node.indeterminate).map(h=>h.node)},updateTreeDown(h,f={}){if(!this.checkStrictly){for(let v in f)h[v]=f[v];h[this.childrenKey]&&h[this.childrenKey].forEach(v=>{this.updateTreeDown(v,f)})}},handleSelect(h){if(!this.flatState[h])return;const f=this.flatState[h].node;if(!this.multiple){const v=this.flatState.findIndex(E=>E.node.selected);v>=0&&v!==h&&(this.flatState[v].node.selected=!1)}f.selected=!f.selected,this.$emit("on-select-change",this.getSelectedNodes(),f)},handleCheck({checked:h,nodeKey:f}){if(!this.flatState[f])return;const v=this.flatState[f].node;v.checked=h,v.indeterminate=!1,this.updateTreeUp(f),this.updateTreeDown(v,{checked:h,indeterminate:!1}),this.$emit("on-check-change",this.getCheckedNodes(),v)},handleContextmenu({data:h,event:f}){this.contextMenuVisible&&this.handleClickContextMenuOutside(),n.nextTick(()=>{const v=this.$refs.treeWrap.getBoundingClientRect(),E={left:`${f.clientX-v.left}px`,top:`${f.clientY-v.top}px`};this.contextMenuStyles=E,this.contextMenuVisible=!0,this.$emit("on-contextmenu",h,f,E)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnCheck(h){this.handleCheck(h)},handleOnSelected(h){this.handleSelect(h)},handleToggleExpand(h){this.$emit("on-toggle-expand",h)},handleOnContextmenu(h){this.handleContextmenu(h)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.flatState=this.compileFlatState(),this.rebuildTree()}};function abe(h,f,v,E,T,b){const N=n.resolveComponent("TreeNode"),U=n.resolveComponent("DropdownMenu"),Y=n.resolveComponent("Dropdown");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass(T.prefixCls),ref:"treeWrap"},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(T.stateTree,(W,Z)=>(n.openBlock(),n.createBlock(N,{key:Z,data:W,visible:"",multiple:v.multiple,"show-checkbox":v.showCheckbox,"children-key":v.childrenKey},null,8,["data","multiple","show-checkbox","children-key"]))),128)),T.stateTree.length?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("div",{key:0,class:n.normalizeClass([T.prefixCls+"-empty"])},n.toDisplayString(b.localeEmptyText),3)),n.createElementVNode("div",{class:"ivu-tree-context-menu",style:n.normalizeStyle(T.contextMenuStyles)},[n.createVNode(Y,{trigger:"custom",visible:T.contextMenuVisible,transfer:"",onOnClick:b.handleClickDropdownItem,onOnClickoutside:b.handleClickContextMenuOutside},{list:n.withCtx(()=>[n.createVNode(U,null,{default:n.withCtx(()=>[n.renderSlot(h.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var P3=l(obe,[["render",abe]]);const lbe={name:"TreeSelect",components:{Select:Bo,Tree:P3},emits:["on-change","update:modelValue","on-open-change"],mixins:[Ui],props:{modelValue:{type:[String,Number,Array]},data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default(){const h=n.getCurrentInstance().appContext.config.globalProperties;return!h.$VIEWUI||h.$VIEWUI.transfer===""?!1:h.$VIEWUI.transfer}}},data(){let h=this.modelValue;return h===null&&(this.multiple?h=[]:h=""),{currentValue:h,isChangeValueInTree:!1,isValueChangeByTree:!1,isValueNull:!1}},watch:{modelValue(h){if(this.isChangeValueInTree)this.isChangeValueInTree=!1;else{let f=h;f===null&&(this.isValueNull=!0,this.multiple?f=[]:f=""),this.currentValue=f,this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0)}},data(){this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0))}},computed:{valueToArray(){return typeof this.currentValue=="object"?this.currentValue:[this.currentValue]},isCheckboxUsable(){return this.multiple&&this.showCheckbox},transferClassName(){return this.transfer?"ivu-tree-select-transfer":""},classes(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode(h,f){if(this.multiple)h.length?(this.currentValue=h.map(v=>v.value),this.handleUpdateSelectValue(f.value,f.title)):(this.currentValue=[],this.handleUpdateSelectValue("",""));else if(h.length){const v=h[0];this.currentValue=v.value,this.handleUpdateSelectValue(v.value,v.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("update:modelValue",this.currentValue),this.$emit("on-change",this.currentValue),this.handleFormItemChange("change",this.currentValue)},handleUpdateTreeNodes(h,f=!1){h.forEach(v=>{this.valueToArray.indexOf(v.value)>=0?(this.isCheckboxUsable?v.checked=!0:v.selected=!0,this.handleUpdateSelectValue(v.value,v.title)):this.isCheckboxUsable?v.checked=!1:v.selected=!1,v.children&&v.children.length&&this.handleUpdateTreeNodes(v.children)}),f&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue(h,f){h===""?this.$refs.select.reset():(this.isValueChangeByTree=!0,this.$refs.select.onOptionClick({value:h,label:f}))},handleChange(h){this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=h,this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",h),this.$emit("on-change",h),this.handleFormItemChange("change",h),this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0),n.nextTick(()=>{this.isValueChangeByTree=!1}))},handleOpenChange(h){this.$emit("on-open-change",h)}},mounted(){this.handleUpdateTreeNodes(this.data,!0)}};function hbe(h,f,v,E,T,b){const N=n.resolveComponent("Tree"),U=n.resolveComponent("Select");return n.openBlock(),n.createBlock(U,n.mergeProps({ref:"select"},h.$attrs,{multiple:v.multiple,class:["ivu-tree-select",b.classes],"transfer-class-name":b.transferClassName,onOnChange:b.handleChange,onOnOpenChange:b.handleOpenChange,hideNotFound:"",transfer:v.transfer}),{default:n.withCtx(()=>[n.createVNode(N,{data:v.data,multiple:v.multiple,onOnSelectChange:b.handleSelectNode,onOnCheckChange:b.handleSelectNode,"check-strictly":"","show-checkbox":v.multiple&&v.showCheckbox,"check-directly":"","load-data":v.loadData},null,8,["data","multiple","onOnSelectChange","onOnCheckChange","show-checkbox","load-data"])]),_:1},16,["multiple","class","transfer-class-name","onOnChange","onOnOpenChange","transfer"])}var dz=l(lbe,[["render",hbe]]);const cbe={name:"Typography"},ube={class:"ivu-typography"};function dbe(h,f,v,E,T,b){return n.openBlock(),n.createElementBlock("article",ube,[n.renderSlot(h.$slots,"default")])}var fz=l(cbe,[["render",dbe]]);const k3="ivu-upload",fbe={name:"UploadList",components:{Icon:O,iProgress:lC},emits:["on-file-click","on-file-preview","on-file-remove"],props:{files:{type:Array,default(){return[]}}},data(){return{prefixCls:k3}},methods:{fileCls(h){return[`${k3}-list-file`,{[`${k3}-list-file-finish`]:h.status==="finished"}]},handleClick(h){this.$emit("on-file-click",h)},handlePreview(h){this.$emit("on-file-preview",h)},handleRemove(h){this.$emit("on-file-remove",h)},format(h){const f=h.name.split(".").pop().toLocaleLowerCase()||"";let v="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(f)>-1&&(v="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(f)>-1&&(v="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(f)>-1&&(v="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(f)>-1&&(v="md-document"),["numbers","csv","xls","xlsx"].indexOf(f)>-1&&(v="ios-stats"),["keynote","ppt","pptx"].indexOf(f)>-1&&(v="ios-videocam"),v},parsePercentage(h){return parseInt(h,10)}}},pbe=["onClick"],mbe=["onClick"];function gbe(h,f,v,E,T,b){const N=n.resolveComponent("Icon"),U=n.resolveComponent("i-progress");return n.openBlock(),n.createElementBlock("ul",{class:n.normalizeClass([T.prefixCls+"-list"])},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(v.files,(Y,W)=>(n.openBlock(),n.createElementBlock("li",{key:W,class:n.normalizeClass(b.fileCls(Y)),onClick:Z=>b.handleClick(Y)},[n.createElementVNode("span",{onClick:Z=>b.handlePreview(Y)},[n.createVNode(N,{type:b.format(Y)},null,8,["type"]),n.createTextVNode(" "+n.toDisplayString(Y.name),1)],8,mbe),n.withDirectives(n.createVNode(N,{type:"ios-close",class:n.normalizeClass([T.prefixCls+"-list-remove"]),onClick:Z=>b.handleRemove(Y)},null,8,["class","onClick"]),[[n.vShow,Y.status==="finished"]]),n.createVNode(n.Transition,{name:"fade"},{default:n.withCtx(()=>[Y.showProgress?(n.openBlock(),n.createBlock(U,{key:0,"stroke-width":2,percent:b.parsePercentage(Y.percentage),status:Y.status==="finished"&&Y.showProgress?"success":"normal"},null,8,["percent","status"])):n.createCommentVNode("",!0)]),_:2},1024)],10,pbe))),128))],2)}var vbe=l(fbe,[["render",gbe]]);function ybe(h,f,v){const E=`fail to post ${h} ${v.status}'`,T=new Error(E);return T.status=v.status,T.method="post",T.url=h,T}function pz(h){const f=h.responseText||h.response;if(!f)return f;try{return JSON.parse(f)}catch{return f}}function _be(h){if(typeof XMLHttpRequest>"u")return;const f=new XMLHttpRequest,v=h.action;f.upload&&(f.upload.onprogress=function(b){b.total>0&&(b.percent=b.loaded/b.total*100),h.onProgress(b)});const E=new FormData;h.data&&Object.keys(h.data).map(b=>{E.append(b,h.data[b])}),E.append(h.filename,h.file),f.onerror=function(b){h.onError(b)},f.onload=function(){if(f.status<200||f.status>=300)return h.onError(ybe(v,h,f),pz(f));h.onSuccess(pz(f))},f.open("post",v,!0),h.withCredentials&&"withCredentials"in f&&(f.withCredentials=!0);const T=h.headers||{};for(let b in T)T.hasOwnProperty(b)&&T[b]!==null&&f.setRequestHeader(b,T[b]);f.send(E)}const Ox="ivu-upload",xbe={name:"Upload",mixins:[Ui],components:{UploadList:vbe},props:{action:{type:String,required:!0},headers:{type:Object,default(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator(h){return S(h,["select","drag"])},default:"select"},format:{type:Array,default(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default(){return{}}},onSuccess:{type:Function,default(){return{}}},onError:{type:Function,default(){return{}}},onRemove:{type:Function,default(){return{}}},onPreview:{type:Function,default(){return{}}},onExceededSize:{type:Function,default(){return{}}},onFormatError:{type:Function,default(){return{}}},defaultFileList:{type:Array,default(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},webkitdirectory:{type:Boolean,default:!1}},data(){return{prefixCls:Ox,dragOver:!1,fileList:[],tempIndex:1}},computed:{classes(){return[`${Ox}`,{[`${Ox}-select`]:this.type==="select",[`${Ox}-drag`]:this.type==="drag",[`${Ox}-dragOver`]:this.type==="drag"&&this.dragOver}]}},methods:{handleClick(){this.itemDisabled||this.$refs.input.click()},handleChange(h){const f=h.target.files;!f||(this.uploadFiles(f),this.$refs.input.value=null)},onDrop(h){this.dragOver=!1,!this.itemDisabled&&this.uploadFiles(h.dataTransfer.files)},handlePaste(h){this.itemDisabled||this.paste&&this.uploadFiles(h.clipboardData.files)},uploadFiles(h){let f=Array.prototype.slice.call(h);this.multiple||(f=f.slice(0,1)),f.length!==0&&f.forEach(v=>{this.upload(v)})},upload(h){if(!this.beforeUpload)return this.post(h);const f=this.beforeUpload(h);f&&f.then?f.then(v=>{Object.prototype.toString.call(v)==="[object File]"?this.post(v):this.post(h)},()=>{}):f!==!1&&this.post(h)},post(h){if(this.format.length){const f=h.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(v=>v.toLocaleLowerCase()===f))return this.onFormatError(h,this.fileList),!1}if(this.maxSize&&h.size>this.maxSize*1024)return this.onExceededSize(h,this.fileList),!1;this.handleStart(h),new FormData().append(this.name,h),_be({headers:this.headers,withCredentials:this.withCredentials,file:h,data:this.data,filename:this.name,action:this.action,onProgress:f=>{this.handleProgress(f,h)},onSuccess:f=>{this.handleSuccess(f,h)},onError:(f,v)=>{this.handleError(f,v,h)}})},handleStart(h){h.uid=Date.now()+this.tempIndex++;const f={status:"uploading",name:h.name,size:h.size,percentage:0,uid:h.uid,showProgress:!0};this.fileList.push(f)},getFile(h){const f=this.fileList;let v;return f.every(E=>(v=h.uid===E.uid?E:null,!v)),v},handleProgress(h,f){const v=this.getFile(f);this.onProgress(h,v,this.fileList),v.percentage=h.percent||0},handleSuccess(h,f){const v=this.getFile(f);v&&(v.status="finished",v.response=h,this.onSuccess(h,v,this.fileList),this.handleFormItemChange("change",v),setTimeout(()=>{v.showProgress=!1},1e3))},handleError(h,f,v){const E=this.getFile(v),T=this.fileList;E.status="fail",T.splice(T.indexOf(E),1),this.onError(h,f,v)},handleRemove(h){const f=this.fileList;f.splice(f.indexOf(h),1),this.onRemove(h,f)},handlePreview(h){h.status==="finished"&&this.onPreview(h)},clearFiles(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler(h){this.fileList=h.map(f=>(f.status="finished",f.percentage=100,f.uid=Date.now()+this.tempIndex++,f))}}}},bbe=["multiple","webkitdirectory","accept"];function wbe(h,f,v,E,T,b){const N=n.resolveComponent("upload-list");return n.openBlock(),n.createElementBlock("div",{class:n.normalizeClass([T.prefixCls])},[n.createElementVNode("div",{class:n.normalizeClass(b.classes),onClick:f[1]||(f[1]=(...U)=>b.handleClick&&b.handleClick(...U)),onDrop:f[2]||(f[2]=n.withModifiers((...U)=>b.onDrop&&b.onDrop(...U),["prevent"])),onPaste:f[3]||(f[3]=(...U)=>b.handlePaste&&b.handlePaste(...U)),onDragover:f[4]||(f[4]=n.withModifiers(U=>T.dragOver=!0,["prevent"])),onDragleave:f[5]||(f[5]=n.withModifiers(U=>T.dragOver=!1,["prevent"]))},[n.createElementVNode("input",{ref:"input",type:"file",class:n.normalizeClass([T.prefixCls+"-input"]),onChange:f[0]||(f[0]=(...U)=>b.handleChange&&b.handleChange(...U)),multiple:v.multiple,webkitdirectory:v.webkitdirectory,accept:v.accept},null,42,bbe),n.renderSlot(h.$slots,"default")],34),n.renderSlot(h.$slots,"tip"),v.showUploadList?(n.openBlock(),n.createBlock(N,{key:0,files:T.fileList,onOnFileRemove:b.handleRemove,onOnFilePreview:b.handlePreview},null,8,["files","onOnFileRemove","onOnFilePreview"])):n.createCommentVNode("",!0)],2)}var mz=l(xbe,[["render",wbe]]);const gz={name:"UserName",mixins:[Z_],data(){return{className:"ivu-login-username",prefix:"ios-contact-outline",placeholder:"请输入用户名",type:"text",validateMessage:"请输入用户名！"}}},Obe={name:"WordCount",components:{Circle:IS},props:{value:{type:[String,Number],default:""},total:{type:Number,default:0},hideTotal:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},size:{type:[String,Number],default:14}},computed:{isOverflow(){return this.value.length>this.total},percent(){let h=this.value.length/this.total*100;return h>100&&(h=100),h},strokeColor(){return this.isOverflow?"#ed4014":"#2d8cf0"}}},Sbe={class:"ivu-word-count"},Cbe={key:0,class:"ivu-word-count-prefix"},Tbe={key:1,class:"ivu-word-count-prefix ivu-word-count-overflow"},Abe={key:3,class:"ivu-word-count-overflow"},Ebe={key:5,class:"ivu-word-count-suffix"},Mbe={key:6,class:"ivu-word-count-suffix ivu-word-count-overflow"};function Pbe(h,f,v,E,T,b){const N=n.resolveComponent("Circle");return n.openBlock(),n.createElementBlock("div",Sbe,[v.circle?(n.openBlock(),n.createBlock(N,{key:0,percent:b.percent,size:v.size,"stroke-color":b.strokeColor},null,8,["percent","size","stroke-color"])):(n.openBlock(),n.createElementBlock(n.Fragment,{key:1},[b.isOverflow?(n.openBlock(),n.createElementBlock("span",Tbe,[n.renderSlot(h.$slots,"prefix-overflow")])):(n.openBlock(),n.createElementBlock("span",Cbe,[n.renderSlot(h.$slots,"prefix")])),!b.isOverflow||!v.overflow?(n.openBlock(),n.createElementBlock("span",{key:2,class:n.normalizeClass({"ivu-word-count-overflow":b.isOverflow})},[n.renderSlot(h.$slots,"length",{length:v.value.length},()=>[n.createTextVNode(n.toDisplayString(v.value.length),1)])],2)):(n.openBlock(),n.createElementBlock("span",Abe,n.toDisplayString(v.value.length-v.total),1)),v.hideTotal?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock(n.Fragment,{key:4},[n.renderSlot(h.$slots,"separator",{},()=>[n.createTextVNode(" / ")]),n.renderSlot(h.$slots,"total",{total:v.total},()=>[n.createTextVNode(n.toDisplayString(v.total),1)])],64)),b.isOverflow?(n.openBlock(),n.createElementBlock("span",Mbe,[n.renderSlot(h.$slots,"suffix-overflow")])):(n.openBlock(),n.createElementBlock("span",Ebe,[n.renderSlot(h.$slots,"suffix")]))],64))])}var vz=l(Obe,[["render",Pbe]]),yz=Object.freeze(Object.defineProperty({__proto__:null,Affix:g,Alert:re,Anchor:G,AnchorLink:de,Auth:Ie,AutoComplete:$F,Avatar:G_,AvatarList:XF,BackTop:WF,Badge:CS,Breadcrumb:Sk,BreadcrumbItem:Ck,Button:Do,ButtonGroup:Tk,Calendar:e$,Captcha:a$,Card:h$,Carousel:c$,CarouselItem:u$,Cascader:d$,Cell:f$,CellGroup:p$,Checkbox:P0,CheckboxGroup:Lk,Circle:IS,City:y$,Col:yc,Collapse:x$,ColorPicker:I$,Content:Fk,Copy:VS,CountDown:F$,CountUp:$$,DatePicker:yU,Description:_U,DescriptionList:xU,Divider:GS,Drawer:bU,Dropdown:lm,DropdownItem:wU,DropdownMenu:hm,Ellipsis:OU,Email:SU,Exception:CU,Footer:e3,FooterToolbar:TU,Form:YS,FormItem:kS,GlobalFooter:AU,Grid:$U,GridItem:UU,Header:s3,Icon:O,Image:zU,ImagePreview:rf,Input:Pl,InputNumber:o3,Layout:WU,Link:jU,List:KU,ListItem:JU,ListItemMeta:e8,LoadingBar:l3,Login:a8,Menu:c3,MenuGroup:l8,MenuItem:h8,Message:sx,Mobile:c8,Modal:Il,Notice:d3,Notification:b8,NotificationItem:S8,NotificationTab:C8,NumberInfo:T8,Numeral:E8,Option:Cr,OptionGroup:M8,Page:P8,PageHeader:k8,Panel:I8,Paragraph:R8,Password:B8,Poptip:v3,Progress:lC,Radio:ES,RadioGroup:AS,Rate:D8,Result:L8,Row:qd,Scroll:V8,ScrollIntoView:_3,ScrollTop:x3,Select:Bo,Sider:X8,Skeleton:W8,SkeletonItem:b3,Slider:G8,Space:H8,Spin:Xa,Split:Q8,Step:Y8,Steps:q8,Submenu:Z8,Submit:K8,Switch:O3,Table:cC,TablePaste:ez,TabPane:aC,Tabs:sC,Tag:k0,TagSelect:tz,TagSelectOption:iz,Text:nz,Time:oC,Timeline:sz,TimelineItem:oz,TimePicker:az,Title:lz,Tooltip:Su,Transfer:uz,Tree:P3,TreeSelect:dz,Trend:p3,Typography:fz,Upload:mz,UserName:gz,WordCount:vz},Symbol.toStringTag,{value:"Module"})),kbe={mounted(h,f){f.value&&(H(h,"ivu-line-clamp"),h.style["-webkit-line-clamp"]=f.value)},updated(h,f){f.value&&(h.style["-webkit-line-clamp"]=f.value)},unmounted(h){K(h,"ivu-line-clamp"),h.style["-webkit-line-clamp"]=null}},Ibe={mounted(h,f){function v(E){f.value(E)}h.__resizeHandler__=v,h.__observer__=N0(),h.__observer__.listenTo(h,v)},updated(){},unmounted(h,f){h.__observer__.removeListener(h,h.__resizeHandler__),delete h.__resizeHandler__,delete h.__observer__}};function hf(h){return String(h).endsWith("%")?"":"px"}var cf={display:{mounted(h,f){f.value&&(h.style.display=f.value)},updated(h,f){f.value&&(h.style.display=f.value)},unmounted(h){h.style.display=null}},width:{mounted(h,f){f.value&&(h.style.width=f.value+hf(f.value))},updated(h,f){f.value&&(h.style.width=f.value+hf(f.value))},unmounted(h){h.style.width=null}},height:{mounted(h,f){f.value&&(h.style.height=f.value+hf(f.value))},updated(h,f){f.value&&(h.style.height=f.value+hf(f.value))},unmounted(h){h.style.height=null}},margin:{mounted(h,f){f.value&&(h.style.margin=f.value+hf(f.value))},updated(h,f){f.value&&(h.style.margin=f.value+hf(f.value))},unmounted(h){h.style.margin=null}},padding:{mounted(h,f){f.value&&(h.style.padding=f.value+hf(f.value))},updated(h,f){f.value&&(h.style.padding=f.value+hf(f.value))},unmounted(h){h.style.padding=null}},font:{mounted(h,f){f&&f.value&&(h.style.fontSize=`${f.value}px`)},updated(h,f){f&&f.value&&(h.style.fontSize=`${f.value}px`)},unmounted(h){h.style.fontSize=null}},color:{mounted(h,f){f.value&&(h.style.color=f.value)},updated(h,f){f.value&&(h.style.color=f.value)},unmounted(h){h.style.color=null}},bgColor:{mounted(h,f){f.value&&(h.style.backgroundColor=f.value)},updated(h,f){f.value&&(h.style.backgroundColor=f.value)},unmounted(h){h.style.backgroundColor=null}}},Rbe={name:"view-ui-plus",version:"1.3.17",title:"ViewUIPlus",description:"A high quality UI components Library with Vue.js 3",homepage:"http://www.iviewui.com",keywords:["iview","vue","viewui","viewuiplus","vue.js","component","components","ui","framework"],main:"dist/viewuiplus.min.js",typings:"types/index.d.ts",files:["dist","src","types"],scripts:{dev:"vue-cli-service serve",build:"npm run build:prod && npm run build:style && npm run build:lang","build:style":"gulp --gulpfile build/build-style.js","build:prod":"vite build","build:lang":"vite build --config build/vite.lang.config.js",lint:"vue-cli-service lint --fix"},repository:{type:"git",url:"https://github.com/view-design/ViewUIPlus"},author:"Aresn",license:"MIT",bugs:{url:"https://github.com/view-design/ViewUIPlus/issues"},dependencies:{"async-validator":"^3.3.0","countup.js":"^1.9.3",dayjs:"^1.11.0",deepmerge:"^2.2.1","element-resize-detector":"^1.2.0","js-calendar":"^1.2.3","lodash.chunk":"^4.2.0","lodash.throttle":"^4.1.1",numeral:"^2.0.6","popper.js":"^1.14.6",select:"^1.1.2",tinycolor2:"^1.4.1","v-click-outside-x":"^3.7.1"},devDependencies:{"@vitejs/plugin-vue":"^1.9.3","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-eslint":"~4.5.0","@vue/cli-service":"~4.5.0","@vue/compiler-sfc":"^3.0.0","babel-eslint":"^10.1.0","babel-plugin-import":"^1.13.3",chai:"^4.2.0","copy-webpack-plugin":"^6.4.1","cross-env":"^5.2.0",eslint:"^6.7.2","eslint-plugin-vue":"^7.0.0-0",gulp:"^4.0.2","gulp-autoprefixer":"^8.0.0","gulp-clean-css":"^4.3.0","gulp-less":"^4.0.1","gulp-rename":"^2.0.0",karma:"^2.0.5","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-sinon-chai":"^1.3.3","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"^0.0.32","karma-webpack":"^2.0.13",less:"^2.7.3","less-loader":"^4.1.0","lint-staged":"^10.5.4",lolex:"^2.7.5",mocha:"^5.0.4",sinon:"^4.4.2","sinon-chai":"^3.3.0","style-loader":"^0.20.2",tslint:"^5.14.0",typescript:"^3.3.4000","uglifyjs-webpack-plugin":"^1.3.0","url-loader":"^1.1.2",vite:"^2.6.4",vue:"^3.2.47","vue-hot-reload-api":"^2.3.4","vue-html-loader":"^1.2.4","vue-loader":"^17.0.0","vue-router":"^4.0.14","vue-style-loader":"^4.1.3","vue-template-compiler":"^2.6.14"}};const _z={display:cf.display,width:cf.width,height:cf.height,margin:cf.margin,padding:cf.padding,font:cf.font,color:cf.color,"bg-color":cf.bgColor,resize:Ibe,"line-clamp":kbe},xz={...yz,iButton:Do,iCircle:IS,iCol:yc,iContent:Fk,iForm:YS,iFooter:e3,iHeader:s3,iInput:Pl,iMenu:c3,iOption:Cr,iProgress:lC,iSelect:Bo,iSwitch:O3,iTable:cC,iTime:oC},I3=function(h,f={}){I3.installed||(f.locale&&Qd.use(f.locale),f.i18n&&Qd.i18n(f.i18n),Object.keys(xz).forEach(v=>{h.component(v,xz[v])}),Object.keys(_z).forEach(v=>{h.directive(v,_z[v])}),h.config.globalProperties.$VIEWUI={size:f.size||"",capture:"capture"in f?f.capture:!0,transfer:"transfer"in f?f.transfer:"",cell:{arrow:f.cell&&f.cell.arrow?f.cell.arrow:"",customArrow:f.cell&&f.cell.customArrow?f.cell.customArrow:"",arrowSize:f.cell&&f.cell.arrowSize?f.cell.arrowSize:""},menu:{arrow:f.menu&&f.menu.arrow?f.menu.arrow:"",customArrow:f.menu&&f.menu.customArrow?f.menu.customArrow:"",arrowSize:f.menu&&f.menu.arrowSize?f.menu.arrowSize:""},modal:{maskClosable:f.modal&&"maskClosable"in f.modal?f.modal.maskClosable:""},tabs:{closeIcon:f.tabs&&f.tabs.closeIcon?f.tabs.closeIcon:"",customCloseIcon:f.tabs&&f.tabs.customCloseIcon?f.tabs.customCloseIcon:"",closeIconSize:f.tabs&&f.tabs.closeIconSize?f.tabs.closeIconSize:""},select:{arrow:f.select&&f.select.arrow?f.select.arrow:"",customArrow:f.select&&f.select.customArrow?f.select.customArrow:"",arrowSize:f.select&&f.select.arrowSize?f.select.arrowSize:""},colorPicker:{arrow:f.colorPicker&&f.colorPicker.arrow?f.colorPicker.arrow:"",customArrow:f.colorPicker&&f.colorPicker.customArrow?f.colorPicker.customArrow:"",arrowSize:f.colorPicker&&f.colorPicker.arrowSize?f.colorPicker.arrowSize:""},cascader:{arrow:f.cascader&&f.cascader.arrow?f.cascader.arrow:"",customArrow:f.cascader&&f.cascader.customArrow?f.cascader.customArrow:"",arrowSize:f.cascader&&f.cascader.arrowSize?f.cascader.arrowSize:"",itemArrow:f.cascader&&f.cascader.itemArrow?f.cascader.itemArrow:"",customItemArrow:f.cascader&&f.cascader.customItemArrow?f.cascader.customItemArrow:"",itemArrowSize:f.cascader&&f.cascader.itemArrowSize?f.cascader.itemArrowSize:""},tree:{arrow:f.tree&&f.tree.arrow?f.tree.arrow:"",customArrow:f.tree&&f.tree.customArrow?f.tree.customArrow:"",arrowSize:f.tree&&f.tree.arrowSize?f.tree.arrowSize:""},datePicker:{icon:f.datePicker&&f.datePicker.icon?f.datePicker.icon:"",customIcon:f.datePicker&&f.datePicker.customIcon?f.datePicker.customIcon:"",iconSize:f.datePicker&&f.datePicker.iconSize?f.datePicker.iconSize:""},timePicker:{icon:f.timePicker&&f.timePicker.icon?f.timePicker.icon:"",customIcon:f.timePicker&&f.timePicker.customIcon?f.timePicker.customIcon:"",iconSize:f.timePicker&&f.timePicker.iconSize?f.timePicker.iconSize:""},typography:{copyConfig:f.typography&&f.typography.copyConfig?f.typography.copyConfig:"",editConfig:f.typography&&f.typography.editConfig?f.typography.editConfig:"",ellipsisConfig:f.typography&&f.typography.ellipsisConfig?f.typography.ellipsisConfig:""},space:{size:f.space&&f.space.size?f.space.size:""},image:{toolbar:f.image&&f.image.toolbar?f.image.toolbar:""}},h.config.globalProperties.$Spin=Xa,h.config.globalProperties.$Loading=l3,h.config.globalProperties.$Message=sx,h.config.globalProperties.$Notice=d3,h.config.globalProperties.$Modal=Il,h.config.globalProperties.$ImagePreview=rf,h.config.globalProperties.$Copy=VS,h.config.globalProperties.$ScrollIntoView=_3,h.config.globalProperties.$ScrollTop=x3,h.config.globalProperties.$Date=Fa)},bz=Rbe.version,wz=Qd.use,Oz=Qd.i18n,Sz=h=>{const f=window["viewuiplus/locale"].default;h===f.i.locale?Qd.use(f):console.log(`The ${h} language pack is not loaded.`)},Bbe={version:bz,locale:wz,i18n:Oz,install:I3,lang:Sz,...yz};i.Affix=g,i.Alert=re,i.Anchor=G,i.AnchorLink=de,i.Auth=Ie,i.AutoComplete=$F,i.Avatar=G_,i.AvatarList=XF,i.BackTop=WF,i.Badge=CS,i.Breadcrumb=Sk,i.BreadcrumbItem=Ck,i.Button=Do,i.ButtonGroup=Tk,i.Calendar=e$,i.Captcha=a$,i.Card=h$,i.Carousel=c$,i.CarouselItem=u$,i.Cascader=d$,i.Cell=f$,i.CellGroup=p$,i.Checkbox=P0,i.CheckboxGroup=Lk,i.Circle=IS,i.City=y$,i.Col=yc,i.Collapse=x$,i.ColorPicker=I$,i.Content=Fk,i.Copy=VS,i.CountDown=F$,i.CountUp=$$,i.DatePicker=yU,i.Description=_U,i.DescriptionList=xU,i.Divider=GS,i.Drawer=bU,i.Dropdown=lm,i.DropdownItem=wU,i.DropdownMenu=hm,i.Ellipsis=OU,i.Email=SU,i.Exception=CU,i.Footer=e3,i.FooterToolbar=TU,i.Form=YS,i.FormItem=kS,i.GlobalFooter=AU,i.Grid=$U,i.GridItem=UU,i.Header=s3,i.Icon=O,i.Image=zU,i.ImagePreview=rf,i.Input=Pl,i.InputNumber=o3,i.Layout=WU,i.Link=jU,i.List=KU,i.ListItem=JU,i.ListItemMeta=e8,i.LoadingBar=l3,i.Login=a8,i.Menu=c3,i.MenuGroup=l8,i.MenuItem=h8,i.Message=sx,i.Mobile=c8,i.Modal=Il,i.Notice=d3,i.Notification=b8,i.NotificationItem=S8,i.NotificationTab=C8,i.NumberInfo=T8,i.Numeral=E8,i.Option=Cr,i.OptionGroup=M8,i.Page=P8,i.PageHeader=k8,i.Panel=I8,i.Paragraph=R8,i.Password=B8,i.Poptip=v3,i.Progress=lC,i.Radio=ES,i.RadioGroup=AS,i.Rate=D8,i.Result=L8,i.Row=qd,i.Scroll=V8,i.ScrollIntoView=_3,i.ScrollTop=x3,i.Select=Bo,i.Sider=X8,i.Skeleton=W8,i.SkeletonItem=b3,i.Slider=G8,i.Space=H8,i.Spin=Xa,i.Split=Q8,i.Step=Y8,i.Steps=q8,i.Submenu=Z8,i.Submit=K8,i.Switch=O3,i.TabPane=aC,i.Table=cC,i.TablePaste=ez,i.Tabs=sC,i.Tag=k0,i.TagSelect=tz,i.TagSelectOption=iz,i.Text=nz,i.Time=oC,i.TimePicker=az,i.Timeline=sz,i.TimelineItem=oz,i.Title=lz,i.Tooltip=Su,i.Transfer=uz,i.Tree=P3,i.TreeSelect=dz,i.Trend=p3,i.Typography=fz,i.Upload=mz,i.UserName=gz,i.WordCount=vz,i.default=Bbe,i.i18n=Oz,i.install=I3,i.lang=Sz,i.locale=wz,i.version=bz,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(ML,ML.exports);var EM=ML.exports;const lZe=eS(EM),ehe=r=>(O_("data-v-455ca2b1"),r=r(),S_(),r),hZe={class:"split-image-container"},cZe=ehe(()=>It("h1",null,"智能图片拆分",-1)),uZe=ehe(()=>It("p",null,"将丢失plist的png大图智能拆分成png小图",-1)),dZe={key:0},fZe={__name:"SplitImage",setup(r){let e=lt(!1),i=null,n="",s=[],o=null,a=null,l=null;async function c(){window.cv||await new Promise(_=>{const x=document.createElement("script");x.src="https://cdn.jsdelivr.net/npm/opencv.js",x.async=!0,x.onload=()=>_(),document.body.appendChild(x)}),window.JSZip||await new Promise(_=>{const x=document.createElement("script");x.src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js",x.onload=()=>_(),document.body.appendChild(x)}),a=window.cv,l=window.JSZip}function u(){i&&(i.delete(),i=null),s=[],n=""}function d(_){function x(S){const w=_[S];for(let C=0;C<_.length;++C){if(S===C)continue;const M=_[C];if(w.x>=M.x&&w.y>=M.y&&w.x+w.width<=M.x+M.width&&w.y+w.height<=M.y+M.height)return!0}return!1}const O=[];for(let S=0;S<_.length;++S){const w=_[S];x(S)||w.width<3&&w.height<3||O.push(_[S])}return O}function p(_){u(),o&&_?(o.width=_.width,o.height=_.height):console.warn("canvas 或 eleSrc 未定义");const x=a.imread(_);i=x.clone();const O=new a.MatVector;a.split(x,O);const S=O.get(3),w=new a.Mat;a.threshold(S,w,10,255,a.THRESH_BINARY);const C=new a.MatVector,M=new a.Mat;a.findContours(w,C,M,a.RETR_CCOMP,a.CHAIN_APPROX_SIMPLE);const P=new a.Scalar(255,0,0,255);a.copyMakeBorder(x,x,1,1,1,1,a.BORDER_CONSTANT,P);let R=[];for(let k=0;k<C.size();++k){let I=a.boundingRect(C.get(k));R.push(I)}s=d(R);for(let k=0;k<s.length;++k){let I=s[k],A=new a.Point(I.x,I.y),D=new a.Point(I.x+I.width,I.y+I.height);a.rectangle(x,A,D,new a.Scalar(0,255,0,255),1)}n=`共${s.length}张小图`,a.imshow(o,x),x.delete(),O.delete(),w.delete(),C.delete(),M.delete()}function m(_){if(!_)return;const x=new FileReader;x.readAsDataURL(_),x.onloadend=function(){const O=new window.Image;O.src=this.result,O.onload=function(){p(O)}}}function g(_){return m(_),!1}function y(){if(!i||!s.length)return;const _=new l;let x=0;for(let O=0;O<s.length;++O){const S=s[O],w={x:S.x,y:S.y,width:S.width,height:S.height},C=i.roi(w),M=`image${O+1}`,P=document.createElement("canvas");P.width=S.width,P.height=S.height,a.imshow(P,C),P.toBlob(function(R){_.file(M+".png",R),x++,x===s.length&&_.generateAsync({type:"blob"}).then(function(k){const I=document.createElement("a");I.href=URL.createObjectURL(k),I.download="images.zip",I.click()})}),C.delete()}}return nr(async()=>{await c(),o=document.getElementById("mycanvas"),window.cv&&window.cv.onRuntimeInitialized?window.cv.onRuntimeInitialized=()=>{e.value=!0,n=""}:e.value=!0,o&&(o.width=512,o.height=512)}),(_,x)=>{const O=St("Upload"),S=St("Button"),w=St("Col"),C=St("Row");return ci(),pn("div",hZe,[cZe,uZe,ke(C,null,{default:Je(()=>[ke(w,null,{default:Je(()=>[ke(O,{"before-upload":g,"show-upload-list":!1,disabled:!li(e),accept:"image/*",action:""},{default:Je(()=>[ke(li(EM.Button),{type:"primary",disabled:!li(e)},{default:Je(()=>[On("选择大图")]),_:1},8,["disabled"])]),_:1},8,["disabled"]),ke(S,{type:"success",onClick:y,disabled:!li(e)},{default:Je(()=>[On(" 导出小图 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),It("p",null,Cd(li(n)),1),It("div",null,[li(e)?GM("",!0):(ci(),pn("p",dZe,"正在加载环境...(大约20秒钟)")),It("canvas",{ref_key:"canvas",ref:o,id:"mycanvas"},null,512)])])}}},pZe=zd(fZe,[["__scopeId","data-v-455ca2b1"]]);var the={exports:{}};(function(r,e){/** @preserve SAT.js - Version 0.9.0 - Copyright 2012 - 2021 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */(function(i,n){r.exports=n()})(ph,function(){var i={};function n(I,A){this.x=I||0,this.y=A||0}i.Vector=n,i.V=n,n.prototype.copy=n.prototype.copy=function(I){return this.x=I.x,this.y=I.y,this},n.prototype.clone=n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.perp=n.prototype.perp=function(){var I=this.x;return this.x=this.y,this.y=-I,this},n.prototype.rotate=n.prototype.rotate=function(I){var A=this.x,D=this.y;return this.x=A*Math.cos(I)-D*Math.sin(I),this.y=A*Math.sin(I)+D*Math.cos(I),this},n.prototype.reverse=n.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.normalize=n.prototype.normalize=function(){var I=this.len();return I>0&&(this.x=this.x/I,this.y=this.y/I),this},n.prototype.add=n.prototype.add=function(I){return this.x+=I.x,this.y+=I.y,this},n.prototype.sub=n.prototype.sub=function(I){return this.x-=I.x,this.y-=I.y,this},n.prototype.scale=n.prototype.scale=function(I,A){return this.x*=I,this.y*=typeof A<"u"?A:I,this},n.prototype.project=n.prototype.project=function(I){var A=this.dot(I)/I.len2();return this.x=A*I.x,this.y=A*I.y,this},n.prototype.projectN=n.prototype.projectN=function(I){var A=this.dot(I);return this.x=A*I.x,this.y=A*I.y,this},n.prototype.reflect=n.prototype.reflect=function(I){var A=this.x,D=this.y;return this.project(I).scale(2),this.x-=A,this.y-=D,this},n.prototype.reflectN=n.prototype.reflectN=function(I){var A=this.x,D=this.y;return this.projectN(I).scale(2),this.x-=A,this.y-=D,this},n.prototype.dot=n.prototype.dot=function(I){return this.x*I.x+this.y*I.y},n.prototype.len2=n.prototype.len2=function(){return this.dot(this)},n.prototype.len=n.prototype.len=function(){return Math.sqrt(this.len2())};function s(I,A){this.pos=I||new n,this.r=A||0,this.offset=new n}i.Circle=s,s.prototype.getAABBAsBox=s.prototype.getAABBAsBox=function(){var I=this.r,A=this.pos.clone().add(this.offset).sub(new n(I,I));return new a(A,I*2,I*2)},s.prototype.getAABB=s.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},s.prototype.setOffset=s.prototype.setOffset=function(I){return this.offset=I,this};function o(I,A){this.pos=I||new n,this.angle=0,this.offset=new n,this.setPoints(A||[])}i.Polygon=o,o.prototype.setPoints=o.prototype.setPoints=function(I){var A=!this.points||this.points.length!==I.length;if(A){var D,V=this.calcPoints=[],B=this.edges=[],L=this.normals=[];for(D=0;D<I.length;D++){var F=I[D],$=D<I.length-1?I[D+1]:I[0];if(F!==$&&F.x===$.x&&F.y===$.y){I.splice(D,1),D-=1;continue}V.push(new n),B.push(new n),L.push(new n)}}return this.points=I,this._recalc(),this},o.prototype.setAngle=o.prototype.setAngle=function(I){return this.angle=I,this._recalc(),this},o.prototype.setOffset=o.prototype.setOffset=function(I){return this.offset=I,this._recalc(),this},o.prototype.rotate=o.prototype.rotate=function(I){for(var A=this.points,D=A.length,V=0;V<D;V++)A[V].rotate(I);return this._recalc(),this},o.prototype.translate=o.prototype.translate=function(I,A){for(var D=this.points,V=D.length,B=0;B<V;B++)D[B].x+=I,D[B].y+=A;return this._recalc(),this},o.prototype._recalc=function(){var I=this.calcPoints,A=this.edges,D=this.normals,V=this.points,B=this.offset,L=this.angle,F=V.length,$;for($=0;$<F;$++){var z=I[$].copy(V[$]);z.x+=B.x,z.y+=B.y,L!==0&&z.rotate(L)}for($=0;$<F;$++){var H=I[$],K=$<F-1?I[$+1]:I[0],J=A[$].copy(K).sub(H);D[$].copy(J).perp().normalize()}return this},o.prototype.getAABBAsBox=o.prototype.getAABBAsBox=function(){for(var I=this.calcPoints,A=I.length,D=I[0].x,V=I[0].y,B=I[0].x,L=I[0].y,F=1;F<A;F++){var $=I[F];$.x<D?D=$.x:$.x>B&&(B=$.x),$.y<V?V=$.y:$.y>L&&(L=$.y)}return new a(this.pos.clone().add(new n(D,V)),B-D,L-V)},o.prototype.getAABB=o.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},o.prototype.getCentroid=o.prototype.getCentroid=function(){for(var I=this.calcPoints,A=I.length,D=0,V=0,B=0,L=0;L<A;L++){var F=I[L],$=L===A-1?I[0]:I[L+1],z=F.x*$.y-$.x*F.y;D+=(F.x+$.x)*z,V+=(F.y+$.y)*z,B+=z}return B=B*3,D=D/B,V=V/B,new n(D,V)};function a(I,A,D){this.pos=I||new n,this.w=A||0,this.h=D||0}i.Box=a,a.prototype.toPolygon=a.prototype.toPolygon=function(){var I=this.pos,A=this.w,D=this.h;return new o(new n(I.x,I.y),[new n,new n(A,0),new n(A,D),new n(0,D)])};function l(){this.a=null,this.b=null,this.overlapN=new n,this.overlapV=new n,this.clear()}i.Response=l,l.prototype.clear=l.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var c=[],u=0;u<10;u++)c.push(new n);for(var d=[],u=0;u<5;u++)d.push([]);var p=new l,m=new a(new n,1e-6,1e-6).toPolygon();function g(I,A,D){for(var V=Number.MAX_VALUE,B=-Number.MAX_VALUE,L=I.length,F=0;F<L;F++){var $=I[F].dot(A);$<V&&(V=$),$>B&&(B=$)}D[0]=V,D[1]=B}function y(I,A,D,V,B,L){var F=d.pop(),$=d.pop(),z=c.pop().copy(A).sub(I),H=z.dot(B);if(g(D,B,F),g(V,B,$),$[0]+=H,$[1]+=H,F[0]>$[1]||$[0]>F[1])return c.push(z),d.push(F),d.push($),!0;if(L){var K=0;if(F[0]<$[0])if(L.aInB=!1,F[1]<$[1])K=F[1]-$[0],L.bInA=!1;else{var J=F[1]-$[0],ne=$[1]-F[0];K=J<ne?J:-ne}else if(L.bInA=!1,F[1]>$[1])K=F[0]-$[1],L.aInB=!1;else{var J=F[1]-$[0],ne=$[1]-F[0];K=J<ne?J:-ne}var be=Math.abs(K);be<L.overlap&&(L.overlap=be,L.overlapN.copy(B),K<0&&L.overlapN.reverse())}return c.push(z),d.push(F),d.push($),!1}i.isSeparatingAxis=y;function _(I,A){var D=I.len2(),V=A.dot(I);return V<0?x:V>D?S:O}var x=-1,O=0,S=1;function w(I,A){var D=c.pop().copy(I).sub(A.pos).sub(A.offset),V=A.r*A.r,B=D.len2();return c.push(D),B<=V}i.pointInCircle=w;function C(I,A){m.pos.copy(I),p.clear();var D=k(m,A,p);return D&&(D=p.aInB),D}i.pointInPolygon=C;function M(I,A,D){var V=c.pop().copy(A.pos).add(A.offset).sub(I.pos).sub(I.offset),B=I.r+A.r,L=B*B,F=V.len2();if(F>L)return c.push(V),!1;if(D){var $=Math.sqrt(F);D.a=I,D.b=A,D.overlap=B-$,D.overlapN.copy(V.normalize()),D.overlapV.copy(V).scale(D.overlap),D.aInB=I.r<=A.r&&$<=A.r-I.r,D.bInA=A.r<=I.r&&$<=I.r-A.r}return c.push(V),!0}i.testCircleCircle=M;function P(I,A,D){for(var V=c.pop().copy(A.pos).add(A.offset).sub(I.pos),B=A.r,L=B*B,F=I.calcPoints,$=F.length,z=c.pop(),H=c.pop(),K=0;K<$;K++){var J=K===$-1?0:K+1,ne=K===0?$-1:K-1,be=0,pe=null;z.copy(I.edges[K]),H.copy(V).sub(F[K]),D&&H.len2()>L&&(D.aInB=!1);var ae=_(z,H);if(ae===x){z.copy(I.edges[ne]);var ye=c.pop().copy(V).sub(F[ne]);if(ae=_(z,ye),ae===S){var _e=H.len();if(_e>B)return c.push(V),c.push(z),c.push(H),c.push(ye),!1;D&&(D.bInA=!1,pe=H.normalize(),be=B-_e)}c.push(ye)}else if(ae===S){if(z.copy(I.edges[J]),H.copy(V).sub(F[J]),ae=_(z,H),ae===x){var _e=H.len();if(_e>B)return c.push(V),c.push(z),c.push(H),!1;D&&(D.bInA=!1,pe=H.normalize(),be=B-_e)}}else{var re=z.perp().normalize(),_e=H.dot(re),se=Math.abs(_e);if(_e>0&&se>B)return c.push(V),c.push(re),c.push(H),!1;D&&(pe=re,be=B-_e,(_e>=0||be<2*B)&&(D.bInA=!1))}pe&&D&&Math.abs(be)<Math.abs(D.overlap)&&(D.overlap=be,D.overlapN.copy(pe))}return D&&(D.a=I,D.b=A,D.overlapV.copy(D.overlapN).scale(D.overlap)),c.push(V),c.push(z),c.push(H),!0}i.testPolygonCircle=P;function R(I,A,D){var V=P(A,I,D);if(V&&D){var B=D.a,L=D.aInB;D.overlapN.reverse(),D.overlapV.reverse(),D.a=D.b,D.b=B,D.aInB=D.bInA,D.bInA=L}return V}i.testCirclePolygon=R;function k(I,A,D){for(var V=I.calcPoints,B=V.length,L=A.calcPoints,F=L.length,$=0;$<B;$++)if(y(I.pos,A.pos,V,L,I.normals[$],D))return!1;for(var $=0;$<F;$++)if(y(I.pos,A.pos,V,L,A.normals[$],D))return!1;return D&&(D.a=I,D.b=A,D.overlapV.copy(D.overlapN).scale(D.overlap)),!0}return i.testPolygonPolygon=k,i})})(the);var nu=the.exports;const nh=Object.freeze({ALL:0,PLAYER:1,PLAYER_BULLET:2,ENERMY:3,ENERMY_BULLET:4,BGCIRCLE:5}),l0=Object.freeze({BG:0,ENERMY:1,PLAYER:2,BULLET:3,EFFECT:4,UI:5});class U_ extends Ii{constructor(){super(),this.ShowLayer=l0.BG,this.circleAutoRemove=!0,this.on("added",this.onAdd.bind(this)),this.on("removed",this.onRemoved.bind(this))}get collisionLayer(){return nh.ALL}getCollider(){return null}onAdd(){window.shooterApp.tickManager.register(this.update.bind(this),this)}onRemoved(e){window.shooterApp.tickManager.unregisterByObj(this)}update(){}onCollide(e){}get ShowLayer(){return this._ShowLayer}set ShowLayer(e){this._ShowLayer=e}isOutOfCircle(e){return this.x*this.x+this.y*this.y>e*e}}class mZe extends U_{constructor(){super(),this.graphics=new En,this.addChild(this.graphics),this.stars=[]}get collisionLayer(){return nh.BGCIRCLE}onCollide(e){e.collisionLayer===nh.PLAYER_BULLET&&this.shake()}init(){this.radius=window.shooterApp.radius,this.lineWidth=5,this.lineColor=13421772,this.graphics.clear(),this.graphics.lineStyle(this.lineWidth,this.lineColor),this.graphics.drawCircle(0,0,this.radius),this.x=0,this.y=0,this._createStars()}_createStars(){for(const o of this.stars)this.removeChild(o);this.stars=[];const e=window.shooterApp;if(!e||!e.pixi||!e.pixi.screen)return;const i=e.pixi.screen.width,n=e.pixi.screen.height,s=80;for(let o=0;o<s;o++)this._createStar(i,n)}_createStar(e,i){const n=Math.random()*e-e/2,s=Math.random()*i-i/2,o=Math.random()*.4+.2,a=Math.random()*.25+.05,l=hr.from("shooter/star_small.png");l.x=n,l.y=s,l.anchor.set(.5),l.scale.set(o),l.alpha=a,l._baseAlpha=a,l._maxTwinkle=Math.floor(Math.random()*7)+4,l._twinkleCount=0,l._twinkleTime=Math.random()*Math.PI*2,l._twinkleSpeed=Math.random()*.001+1e-4,l._lastSin=Math.sin(l._twinkleTime),l.alpha=l._baseAlpha,this.addChildAt(l,0),this.stars.push(l)}update(e){this._updateShake(e)}shake(e=.01,i=50){this._shakeStrength=e,this._shakeDuration=i,this._shakeTime=0,this._shakeActive=!0}_updateShake(e=16){if(!this._shakeActive){this.graphics&&(this.graphics.scale.x!==1||this.graphics.scale.y!==1)&&this.graphics.scale.set(1,1);return}this._shakeTime+=e;const i=this._shakeTime/this._shakeDuration;if(i>=1){this.graphics&&this.graphics.scale.set(1,1),this._shakeActive=!1;return}const n=Math.random()*Math.PI*2,s=this._shakeStrength*(1-i)*(.7+.3*Math.sin(i*Math.PI*8)),o=1+Math.cos(n)*s,a=1+Math.sin(n)*s;this.graphics&&this.graphics.scale.set(o,a)}_updateStars(e){const i=window.shooterApp;if(!i||!i.pixi||!i.pixi.screen)return;const n=i.pixi.screen.width,s=i.pixi.screen.height;for(let o=this.stars.length-1;o>=0;o--){const a=this.stars[o];a._twinkleTime+=a._twinkleSpeed*e;const l=Math.sin(a._twinkleTime);if(a.alpha=a._baseAlpha*Math.abs(l),a._lastSin<0&&l>=0&&(a._twinkleCount++,a._twinkleCount>=a._maxTwinkle)){this.removeChild(a),this.stars.splice(o,1),this._createStar(n,s);continue}a._lastSin=l}}}class QA{static getLevelData(e){return e<=0?this.levels[0]:e>this.levels.length?this.levels[this.levels.length-1]:this.levels[e-1]}}Xi(QA,"levels",[{maxHp:100,weaponFireInterval:100,expToLevel:100},{maxHp:120,weaponFireInterval:85,expToLevel:120},{maxHp:140,weaponFireInterval:72,expToLevel:144},{maxHp:160,weaponFireInterval:61,expToLevel:173},{maxHp:180,weaponFireInterval:52,expToLevel:207},{maxHp:200,weaponFireInterval:44,expToLevel:248},{maxHp:220,weaponFireInterval:38,expToLevel:298},{maxHp:240,weaponFireInterval:33,expToLevel:358},{maxHp:260,weaponFireInterval:30,expToLevel:430},{maxHp:280,weaponFireInterval:30,expToLevel:516}]);class gZe extends En{constructor(e,i,n={}){super(),this.x=e,this.y=i,this.alpha=1,this.vx=n.vx||0,this.vy=n.vy||0,this.fade=n.fade||.03,this.color=n.color||16777062+Math.floor(Math.random()*48),this.spikes=n.spikes||5,this.outerRadius=n.outerRadius||2+Math.random()*2,this.innerRadius=n.innerRadius||1+Math.random()*1,this.drawStar()}drawStar(){this.clear(),this.beginFill(this.color);let e=Math.PI/2*3,i=0,n=0,s=Math.PI/this.spikes;this.moveTo(0,-this.outerRadius);for(let o=0;o<this.spikes;o++)i=Math.cos(e)*this.outerRadius,n=Math.sin(e)*this.outerRadius,this.lineTo(i,n),e+=s,i=Math.cos(e)*this.innerRadius,n=Math.sin(e)*this.innerRadius,this.lineTo(i,n),e+=s;this.lineTo(0,-this.outerRadius),this.endFill()}}class vZe extends U_{constructor(e,i,n={}){super(),this.x=e,this.y=i,this.ShowLayer=l0.EFFECT;const s=n.numParticles||2,o=n.fade||.05,a=n.color||16777113,l=n.spikes||5,c=n.outerRadius||4+Math.random()*3,u=n.innerRadius||2+Math.random()*2,d=n.speedMin||3.5,p=n.speedMax||7;this.particles=[];for(let m=0;m<s;m++){const g=Math.random()*Math.PI*2,y=d+Math.random()*(p-d),_=new gZe(0,0,{vx:Math.cos(g)*y,vy:Math.sin(g)*y,fade:o,color:a,spikes:l,outerRadius:c,innerRadius:u});this.addChild(_),this.particles.push(_)}this._onTick=this._onTick.bind(this),window.shooterApp&&window.shooterApp.tickManager&&window.shooterApp.tickManager.register(this._onTick,this)}_onTick(e){e/=10;for(let i=this.particles.length-1;i>=0;i--){const n=this.particles[i];n.x+=n.vx*e,n.y+=n.vy*e,n.alpha-=(n.fade||.03)*e,n.alpha<=0&&(n.parent&&n.parent.removeChild(n),this.particles.splice(i,1))}this.particles.length===0&&window.shooterApp.gameObjectManager.remove(this)}}class yZe extends U_{constructor(e,i,n,s=10){super(),this.ShowLayer=l0.BULLET,this.x=e,this.y=i,this.angle=n,this.speed=s,this.vx=Math.cos(n)*s,this.vy=Math.sin(n)*s,this.alive=!0,this.sprite=hr.from("shooter/bullet1.png"),this.sprite.anchor.set(.5),this.addChild(this.sprite)}get collisionLayer(){return nh.PLAYER_BULLET}getCollider(){const e=this.sprite?this.sprite.width/2:5;return new nu.Circle(new nu.Vector(this.x,this.y),e)}update(){this.x+=this.vx,this.y+=this.vy}onCollide(e){const i=new vZe(this.x,this.y);window.shooterApp.gameObjectManager.add(i);const n=[nh.BGCIRCLE,nh.ENERMY];e&&n.includes(e.collisionLayer)&&window.shooterApp.gameObjectManager.remove(this)}}class _Ze extends U_{constructor(i){super();Xi(this,"level",1);this.level=1,this.shooting=!1,this.player=i,this.fireInterval=100,this.cooldown=0}levelUp(){this.level+=1,this.fireInterval=Math.max(30,Math.floor(this.fireInterval*.85))}shoot(){if(this.cooldown>0)return;const i=this.player.angle,n=this.player.x+Math.cos(i)*40,s=this.player.y+Math.sin(i)*40,o=new yZe(n,s,i);window.shooterApp.gameObjectManager.add(o),this.cooldown=this.fireInterval}update(i){this.cooldown>0&&(this.cooldown-=i,this.cooldown<0&&(this.cooldown=0))}}class xZe extends U_{constructor(){super();Xi(this,"exp",0);Xi(this,"level",1);Xi(this,"expToLevel",100);this.sprite=null,this.speed=6,this.turnSpeed=.15,this.angle=0,this.radius=0,this.weapon=null,this.ShowLayer=l0.PLAYER,this.level=1,this.exp=0;const i=QA.getLevelData(this.level);this.maxHp=i.maxHp,this.hp=this.maxHp,this.expToLevel=i.expToLevel,this.bloodBarContainer=null,this.bloodBarBg=null,this.bloodBar=null}get collisionLayer(){return nh.PLAYER}getCollider(){if(!this.colObj){let i=this.sprite.width/4;this.colObj=new nu.Circle(new nu.Vector(this.x,this.y),i)}return this.colObj&&(this.colObj.pos.x=this.x,this.colObj.pos.y=this.y),this.colObj}async init(){this.level=1,this.exp=0;const i=QA.getLevelData(this.level);this.maxHp=i.maxHp,this.hp=this.maxHp,this.expToLevel=i.expToLevel,this.radius=window.shooterApp.radius,this._tickManager=window.shooterApp.tickManager,this.sprite=hr.from("shooter/ship_E.png"),this.sprite.anchor.set(.5),this.addChild(this.sprite),this.bloodBarContainer=new Ii,this.bloodBarBg=hr.from("shooter/player_blood_bg.png"),this.bloodBar=hr.from("shooter/player_blood_bar.png"),this.bloodBarBg.anchor.set(0,1),this.bloodBar.anchor.set(0,1),this.bloodBarContainer.addChild(this.bloodBarBg),this.bloodBarContainer.addChild(this.bloodBar),this.bloodBarContainer.x=-this.sprite.width/2-5,this.bloodBarContainer.y=-this.bloodBar.width/2,this.bloodBarContainer.rotation=Math.PI/2,this.sprite.addChild(this.bloodBarContainer),this.x=0,this.y=0,this.angle=0,this.weapon=new _Ze(this),this.addChild(this.weapon),this.updateBloodBar()}addExp(i){for(this.exp+=i;this.exp>=this.expToLevel;)this.exp-=this.expToLevel,this.levelUp();window.shooterApp&&window.shooterApp.updatePlayerStatusUI&&window.shooterApp.updatePlayerStatusUI(this.level,this.exp,this.expToLevel)}levelUp(){this.level+=1;const i=QA.getLevelData(this.level);this.maxHp=i.maxHp,this.hp=this.maxHp,this.expToLevel=i.expToLevel,this.weapon&&typeof this.weapon.levelUp=="function"&&this.weapon.levelUp(i),window.shooterApp&&window.shooterApp.updatePlayerStatusUI&&window.shooterApp.updatePlayerStatusUI(this.level,this.exp,this.expToLevel)}updateWeapon(i){this.weapon&&this.weapon.update(i)}updateBloodBar(){if(!this.bloodBar)return;let i=Math.max(0,Math.min(1,this.hp/this.maxHp));this.bloodBar.scale.x=i}lookAt(i,n){const s=i-this.x,o=n-this.y,a=Math.atan2(o,s);a-this.angle,this.angle=a,this.sprite&&(this.sprite.rotation=this.angle)}moveByKeys(i,n){this.updateBloodBar();let s=0,o=0;if(i.w&&(o-=1),i.s&&(o+=1),i.a&&(s-=1),i.d&&(s+=1),s!==0||o!==0){let a=Math.sqrt(s*s+o*o);s/=a,o/=a;let l=s*this.speed,c=o*this.speed,u=this.x+l,d=this.y+c,p=Math.sqrt(u*u+d*d),m=n!==void 0?n:this.radius;if(p>m){let g=m/p;u*=g,d*=g}this.x=u,this.y=d}}}const bZe=[[!0,!0,!0,!0,!0,!0],[!0,!1,!1,!0,!0,!0],[!0,!1,!1,!0,!1,!0],[!0,!0,!0,!1,!1,!0],[!0,!0,!1,!1,!1,!1],[!0,!0,!0,!0,!1,!1]];class wZe extends Ii{constructor(){super(),this.app=window.shooterApp,this.objects=[],this.layerContainers={};for(const e in l0){const i=l0[e],n=new Ii;this.layerContainers[i]=n,this.addChild(n)}}add(e){this.objects.includes(e)||(this.objects.push(e),typeof e.ShowLayer=="number"&&this.layerContainers[e.ShowLayer]?this.layerContainers[e.ShowLayer].addChild(e):e instanceof fr&&e.parent!==this&&this.addChild(e))}remove(e){const i=this.objects.indexOf(e);if(i!==-1){this.objects.splice(i,1);for(const n of Object.values(this.layerContainers))e.parent===n&&n.removeChild(e);e.parent===this&&this.removeChild(e)}}updateAll(){for(let i=this.objects.length-1;i>=0;i--){const n=this.objects[i];n.isOutOfCircle(window.shooterApp.radius)&&(window.shooterApp.bg.onCollide(n),n.onCollide(window.shooterApp.bg))}let e=this.getCollisions();console.log("collisions",e);for(const[i,n]of e)typeof i.onCollide=="function"&&i.onCollide(n),typeof n.onCollide=="function"&&n.onCollide(i)}getCollisions(){var n;const e=[],i=this.objects;for(let s=0;s<i.length;s++)for(let o=s+1;o<i.length;o++){const a=i[s],l=i[o];if(!((n=bZe[a.collisionLayer])!=null&&n[l.collisionLayer]))continue;const c=a.getCollider&&a.getCollider(),u=l.getCollider&&l.getCollider();let d=null;c&&u&&c instanceof nu.Circle&&u instanceof nu.Circle&&(d=nu.testCircleCircle(c,u)),console.log("collider",c instanceof nu.Circle,d),d&&e.push([a,l])}return e}}class OZe{constructor(){this.time=0,this.frame=0,this.updaters=[]}register(e,i){if(!i)throw new Error("TickManager.register: obj 参数不能为空");this.updaters.some(n=>n.fn===e)||this.updaters.push({fn:e,obj:i})}unregister(e){const i=this.updaters.findIndex(n=>n.fn===e);i!==-1&&this.updaters.splice(i,1)}unregisterByObj(e){this.updaters=this.updaters.filter(i=>i.obj!==e)}tick(e){this.time+=e,this.frame++;for(let i=0;i<this.updaters.length;i++)this.updaters[i].fn(e,this.time,this.frame)}}class SZe extends U_{constructor(){super(),this.sprite=null,this.speed=2,this.angle=0,this.radius=0,this.ShowLayer=l0.ENERMY}get collisionLayer(){return nh.ENERMY}getCollider(){const e=this.sprite?this.sprite.width/2:this.radius||20;return new nu.Circle(new nu.Vector(this.x,this.y),e)}async init(){this.radius=window.shooterApp.radius,this._tickManager=window.shooterApp.tickManager,this.sprite=hr.from("shooter/enemy_B.png"),this.sprite.anchor.set(.5),this.addChild(this.sprite),this.x=0,this.y=0,this.angle=0}updateAI(){this.angle+=.01,this.sprite&&(this.sprite.rotation=this.angle)}onCollide(e){(e.collisionLayer==nh.PLAYER||e.collisionLayer==nh.PLAYER_BULLET)&&(e.collisionLayer==nh.PLAYER&&e.hp!==void 0&&(e.hp-=20,e.hp<0&&(e.hp=0),e.updateBloodBar&&e.updateBloodBar()),e.collisionLayer==nh.PLAYER_BULLET&&window.shooterApp.player&&typeof window.shooterApp.player.addExp=="function"&&window.shooterApp.player.addExp(10),window.shooterApp.gameObjectManager.remove(this))}}class CZe{constructor(e,i,n={}){this.player=e,this.gameObjectManager=i,this.spawnInterval=n.spawnInterval||2e3,this.batchSize=n.batchSize||1,this.radius=n.spawnRadius||window.shooterApp.radius+60,this.enermies=[],this._lastSpawn=0,this._tick=this._tick.bind(this),window.shooterApp.tickManager.register(this._tick,this)}_tick(e){this._lastSpawn+=e*16.67,this._lastSpawn>=this.spawnInterval&&(this._lastSpawn=0,this.spawnBatch());for(const i of this.enermies)i&&i.updateAI&&i.updateAI(this.player);this.enermies=this.enermies.filter(i=>i.parent)}async spawnBatch(){for(let e=0;e<this.batchSize;e++){const i=Math.random()*Math.PI*2,n=Math.cos(i)*this.radius,s=Math.sin(i)*this.radius,o=new SZe;await o.init(),o.x=n,o.y=s,o.angle=i+Math.PI,o.updateAI=function(a){if(!a)return;const l=a.x-this.x,c=a.y-this.y,u=Math.atan2(c,l);this.angle=u,this.sprite&&(this.sprite.rotation=this.angle);const d=this.speed||2;this.x+=Math.cos(this.angle)*d,this.y+=Math.sin(this.angle)*d},this.gameObjectManager.add(o),this.enermies.push(o)}}destroy(){window.shooterApp.tickManager.unregisterByObj(this),this.enermies.forEach(e=>{e.parent&&e.parent.removeChild(e)}),this.enermies=[]}}const TZe=r=>(O_("data-v-a822f0f1"),r=r(),S_(),r),AZe=TZe(()=>It("div",{id:"player-status-ui",style:{position:"fixed",top:"16px",right:"24px","z-index":"10",color:"#fff","font-size":"18px","font-family":"monospace","text-align":"right","text-shadow":"0 1px 4px #222","pointer-events":"none"}},[It("div",{id:"player-level"},"Lv.1"),It("div",{id:"player-exp"},"EXP: 0/100")],-1)),EZe={__name:"Shooter",setup(r){const e=lt(null);let i={pixi:null,tickManager:null,root:null,bg:null,radius:0,diameter:0,mouse:{x:0,y:0},keys:{w:!1,a:!1,s:!1,d:!1},gameObjectManager:null,shooting:!1};function n(){}function s(){i.tickManager=new OZe,o(),a(),l(),i.enermyManager=new CZe(i.player,i.gameObjectManager)}function o(){i.gameObjectManager=new wZe,i.root.addChild(i.gameObjectManager)}function a(){i.bg=new mZe,i.gameObjectManager.add(i.bg),i.bg.init()}function l(){i.player=new xZe,i.gameObjectManager.add(i.player),i.player.init()}return nr(()=>{window.shooterApp=i,window.shooterApp.updatePlayerStatusUI=function(g,y,_){const x=document.getElementById("player-level"),O=document.getElementById("player-exp");x&&(x.textContent=`Lv.${g}`),O&&(O.textContent=`EXP: ${y}/${_}`)};const c=window.innerWidth,u=window.innerHeight;i.diameter=Math.min(c,u)*.9,i.radius=i.diameter/2,window.shooterApp=i,i.pixi=new Jp({width:c,height:u,backgroundAlpha:0,antialias:!0}),e.value&&e.value.appendChild(i.pixi.view),i.root=new Ii,i.root.x=c/2,i.root.y=u/2,i.pixi.stage.addChild(i.root),window.addEventListener("resize",n);const d=new Vn("Loading...",{fontSize:36,fill:16777215});d.anchor.set(.5),d.x=c/2,d.y=u/2,i.pixi.stage.addChild(d);let p=["shooter/ship_E.png","shooter/enemy_B.png","shooter/player_blood_bg.png","shooter/player_blood_bar.png"];vl&&vl.load?vl.load(p).then(()=>{i.pixi.stage.removeChild(d),m()}):(i.pixi.stage.removeChild(d),m());function m(){i.pixi.view.addEventListener("mousemove",g=>{const y=i.pixi.view.getBoundingClientRect();i.mouse.x=g.clientX-y.left-y.width/2,i.mouse.y=g.clientY-y.top-y.height/2}),i.pixi.view.addEventListener("mousedown",g=>{g.button===0&&i.player&&i.player.weapon&&(i.player.weapon.shooting=!0)}),i.pixi.view.addEventListener("mouseup",g=>{g.button===0&&i.player&&i.player.weapon&&(i.player.weapon.shooting=!1)}),window.addEventListener("keydown",g=>{["w","a","s","d"].includes(g.key.toLowerCase())&&(i.keys[g.key.toLowerCase()]=!0)}),window.addEventListener("keyup",g=>{["w","a","s","d"].includes(g.key.toLowerCase())&&(i.keys[g.key.toLowerCase()]=!1)}),s(),i.pixi.ticker.add(g=>{const y=g*1e3/60;i.tickManager&&i.tickManager.tick(y),i.player&&(i.player.lookAt(i.mouse.x,i.mouse.y),i.player.moveByKeys(i.keys,i.radius),i.player.weapon&&i.player.weapon.shooting&&i.player.weapon.shoot()),i.gameObjectManager.updateAll()})}}),IO(()=>{window.removeEventListener("resize",n),i&&i.enermyManager&&i.enermyManager.destroy(),i&&(i.pixi.destroy(!0,{children:!0}),i=null)}),(c,u)=>(ci(),pn(Fn,null,[It("div",{ref_key:"pixiContainer",ref:e,class:"pixi-full"},null,512),AZe],64))}},MZe=zd(EZe,[["__scopeId","data-v-a822f0f1"]]);/**
 * Planck.js v1.3.0
 * @license The MIT license
 * @copyright Copyright (c) 2024 Erin Catto, Ali Shakiba
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var PL=function(r,e){return PL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},PL(r,e)};function Io(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");PL(r,e);function i(){this.constructor=r}r.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Ao=function(){return Ao=Object.assign||function(e){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ao.apply(this,arguments)},El=function(r,e){(r===null||typeof r>"u")&&(r={});var i=Ao({},r);for(var n in e)e.hasOwnProperty(n)&&typeof r[n]>"u"&&(i[n]=e[n]);if(typeof Object.getOwnPropertySymbols=="function")for(var s=Object.getOwnPropertySymbols(e),o=0;o<s.length;o++){var a=s[o];e.propertyIsEnumerable(a)&&typeof r[a]>"u"&&(i[a]=e[a])}return i},PZe=Math.random,Ra=1e-9,kZe=Number.isFinite;function IZe(r){return r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r+1}function RZe(r){return r>0&&(r&r-1)===0}function ihe(r,e,i){return typeof e>"u"?(i=1,e=0):typeof i>"u"&&(i=e,e=0),i>e?(r=(r-e)%(i-e),r+(r<0?i:e)):(r=(r-i)%(e-i),r+(r<=0?e:i))}function Gs(r,e,i){return r<e?e:r>i?i:r}function BZe(r,e){return typeof r>"u"?(e=1,r=0):typeof e>"u"&&(e=r,r=0),r===e?r:PZe()*(e-r)+r}var w0=Object.create(Math);w0.EPSILON=Ra;w0.isFinite=kZe;w0.nextPowerOfTwo=IZe;w0.isPowerOfTwo=RZe;w0.mod=ihe;w0.clamp=Gs;w0.random=BZe;var Qj=Math.abs,VB=Math.sqrt,jj=Math.max,Yj=Math.min,X=function(){function r(e,i){if(!(this instanceof r))return new r(e,i);typeof e>"u"?(this.x=0,this.y=0):typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=i)}return r.prototype._serialize=function(){return{x:this.x,y:this.y}},r._deserialize=function(e){var i=Object.create(r.prototype);return i.x=e.x,i.y=e.y,i},r.zero=function(){var e=Object.create(r.prototype);return e.x=0,e.y=0,e},r.neo=function(e,i){var n=Object.create(r.prototype);return n.x=e,n.y=i,n},r.clone=function(e){return r.neo(e.x,e.y)},r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(e){return e===null||typeof e>"u"?!1:Number.isFinite(e.x)&&Number.isFinite(e.y)},r.assert=function(e){},r.prototype.clone=function(){return r.clone(this)},r.prototype.setZero=function(){return this.x=0,this.y=0,this},r.prototype.set=function(e,i){return typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=i),this},r.prototype.setNum=function(e,i){return this.x=e,this.y=i,this},r.prototype.setVec2=function(e){return this.x=e.x,this.y=e.y,this},r.prototype.wSet=function(e,i,n,s){return typeof n<"u"||typeof s<"u"?this.setCombine(e,i,n,s):this.setMul(e,i)},r.prototype.setCombine=function(e,i,n,s){var o=e*i.x+n*s.x,a=e*i.y+n*s.y;return this.x=o,this.y=a,this},r.prototype.setMul=function(e,i){var n=e*i.x,s=e*i.y;return this.x=n,this.y=s,this},r.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},r.prototype.wAdd=function(e,i,n,s){return typeof n<"u"||typeof s<"u"?this.addCombine(e,i,n,s):this.addMul(e,i)},r.prototype.addCombine=function(e,i,n,s){var o=e*i.x+n*s.x,a=e*i.y+n*s.y;return this.x+=o,this.y+=a,this},r.prototype.addMul=function(e,i){var n=e*i.x,s=e*i.y;return this.x+=n,this.y+=s,this},r.prototype.wSub=function(e,i,n,s){return typeof n<"u"||typeof s<"u"?this.subCombine(e,i,n,s):this.subMul(e,i)},r.prototype.subCombine=function(e,i,n,s){var o=e*i.x+n*s.x,a=e*i.y+n*s.y;return this.x-=o,this.y-=a,this},r.prototype.subMul=function(e,i){var n=e*i.x,s=e*i.y;return this.x-=n,this.y-=s,this},r.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},r.prototype.mul=function(e){return this.x*=e,this.y*=e,this},r.prototype.length=function(){return r.lengthOf(this)},r.prototype.lengthSquared=function(){return r.lengthSquared(this)},r.prototype.normalize=function(){var e=this.length();if(e<Ra)return 0;var i=1/e;return this.x*=i,this.y*=i,e},r.normalize=function(e){var i=r.lengthOf(e);if(i<Ra)return r.zero();var n=1/i;return r.neo(e.x*n,e.y*n)},r.lengthOf=function(e){return VB(e.x*e.x+e.y*e.y)},r.lengthSquared=function(e){return e.x*e.x+e.y*e.y},r.distance=function(e,i){var n=e.x-i.x,s=e.y-i.y;return VB(n*n+s*s)},r.distanceSquared=function(e,i){var n=e.x-i.x,s=e.y-i.y;return n*n+s*s},r.areEqual=function(e,i){return e===i||typeof i=="object"&&i!==null&&e.x===i.x&&e.y===i.y},r.skew=function(e){return r.neo(-e.y,e.x)},r.dot=function(e,i){return e.x*i.x+e.y*i.y},r.cross=function(e,i){return typeof i=="number"?r.neo(i*e.y,-i*e.x):typeof e=="number"?r.neo(-e*i.y,e*i.x):e.x*i.y-e.y*i.x},r.crossVec2Vec2=function(e,i){return e.x*i.y-e.y*i.x},r.crossVec2Num=function(e,i){return r.neo(i*e.y,-i*e.x)},r.crossNumVec2=function(e,i){return r.neo(-e*i.y,e*i.x)},r.addCross=function(e,i,n){if(typeof n=="number")return r.neo(n*i.y+e.x,-n*i.x+e.y);if(typeof i=="number")return r.neo(-i*n.y+e.x,i*n.x+e.y)},r.addCrossVec2Num=function(e,i,n){return r.neo(n*i.y+e.x,-n*i.x+e.y)},r.addCrossNumVec2=function(e,i,n){return r.neo(-i*n.y+e.x,i*n.x+e.y)},r.add=function(e,i){return r.neo(e.x+i.x,e.y+i.y)},r.wAdd=function(e,i,n,s){return typeof n<"u"||typeof s<"u"?r.combine(e,i,n,s):r.mulNumVec2(e,i)},r.combine=function(e,i,n,s){return r.zero().setCombine(e,i,n,s)},r.sub=function(e,i){return r.neo(e.x-i.x,e.y-i.y)},r.mul=function(e,i){if(typeof e=="object")return r.neo(e.x*i,e.y*i);if(typeof i=="object")return r.neo(e*i.x,e*i.y)},r.mulVec2Num=function(e,i){return r.neo(e.x*i,e.y*i)},r.mulNumVec2=function(e,i){return r.neo(e*i.x,e*i.y)},r.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},r.neg=function(e){return r.neo(-e.x,-e.y)},r.abs=function(e){return r.neo(Qj(e.x),Qj(e.y))},r.mid=function(e,i){return r.neo((e.x+i.x)*.5,(e.y+i.y)*.5)},r.upper=function(e,i){return r.neo(jj(e.x,i.x),jj(e.y,i.y))},r.lower=function(e,i){return r.neo(Yj(e.x,i.x),Yj(e.y,i.y))},r.prototype.clamp=function(e){var i=this.x*this.x+this.y*this.y;if(i>e*e){var n=e/VB(i);this.x*=n,this.y*=n}return this},r.clamp=function(e,i){var n=r.neo(e.x,e.y);return n.clamp(i),n},r.clampVec2=function(e,i,n){return{x:Gs(e.x,i==null?void 0:i.x,n==null?void 0:n.x),y:Gs(e.y,i==null?void 0:i.y,n==null?void 0:n.y)}},r.scaleFn=function(e,i){return function(n){return r.neo(n.x*e,n.y*i)}},r.translateFn=function(e,i){return function(n){return r.neo(n.x+e,n.y+i)}},r}(),Nl=Math.max,Uh=Math.min,$s=function(){function r(e,i){if(!(this instanceof r))return new r(e,i);this.lowerBound=X.zero(),this.upperBound=X.zero(),typeof e=="object"&&this.lowerBound.setVec2(e),typeof i=="object"?this.upperBound.setVec2(i):typeof e=="object"&&this.upperBound.setVec2(e)}return r.prototype.isValid=function(){return r.isValid(this)},r.isValid=function(e){return e===null||typeof e>"u"?!1:X.isValid(e.lowerBound)&&X.isValid(e.upperBound)&&X.sub(e.upperBound,e.lowerBound).lengthSquared()>=0},r.assert=function(e){},r.prototype.getCenter=function(){return X.neo((this.lowerBound.x+this.upperBound.x)*.5,(this.lowerBound.y+this.upperBound.y)*.5)},r.prototype.getExtents=function(){return X.neo((this.upperBound.x-this.lowerBound.x)*.5,(this.upperBound.y-this.lowerBound.y)*.5)},r.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},r.prototype.combine=function(e,i){i=i||this;var n=e.lowerBound,s=e.upperBound,o=i.lowerBound,a=i.upperBound,l=Uh(n.x,o.x),c=Uh(n.y,o.y),u=Nl(a.x,s.x),d=Nl(a.y,s.y);this.lowerBound.setNum(l,c),this.upperBound.setNum(u,d)},r.prototype.combinePoints=function(e,i){this.lowerBound.setNum(Uh(e.x,i.x),Uh(e.y,i.y)),this.upperBound.setNum(Nl(e.x,i.x),Nl(e.y,i.y))},r.prototype.set=function(e){this.lowerBound.setNum(e.lowerBound.x,e.lowerBound.y),this.upperBound.setNum(e.upperBound.x,e.upperBound.y)},r.prototype.contains=function(e){var i=!0;return i=i&&this.lowerBound.x<=e.lowerBound.x,i=i&&this.lowerBound.y<=e.lowerBound.y,i=i&&e.upperBound.x<=this.upperBound.x,i=i&&e.upperBound.y<=this.upperBound.y,i},r.prototype.extend=function(e){return r.extend(this,e),this},r.extend=function(e,i){return e.lowerBound.x-=i,e.lowerBound.y-=i,e.upperBound.x+=i,e.upperBound.y+=i,e},r.testOverlap=function(e,i){var n=i.lowerBound.x-e.upperBound.x,s=e.lowerBound.x-i.upperBound.x,o=i.lowerBound.y-e.upperBound.y,a=e.lowerBound.y-i.upperBound.y;return!(n>0||o>0||s>0||a>0)},r.areEqual=function(e,i){return X.areEqual(e.lowerBound,i.lowerBound)&&X.areEqual(e.upperBound,i.upperBound)},r.diff=function(e,i){var n=Nl(0,Uh(e.upperBound.x,i.upperBound.x)-Nl(i.lowerBound.x,e.lowerBound.x)),s=Nl(0,Uh(e.upperBound.y,i.upperBound.y)-Nl(i.lowerBound.y,e.lowerBound.y)),o=e.upperBound.x-e.lowerBound.x,a=e.upperBound.y-e.lowerBound.y,l=i.upperBound.x-i.lowerBound.x,c=i.upperBound.y-i.lowerBound.y;return o*a+l*c-n*s},r.prototype.rayCast=function(e,i){for(var n=-1/0,s=1/0,o=i.p1,a=X.sub(i.p2,i.p1),l=X.abs(a),c=X.zero(),u="x";u!==null;u=u==="x"?"y":null)if(l.x<Ra){if(o[u]<this.lowerBound[u]||this.upperBound[u]<o[u])return!1}else{var d=1/a[u],p=(this.lowerBound[u]-o[u])*d,m=(this.upperBound[u]-o[u])*d,g=-1;if(p>m){var y=p;p=m,m=y,g=1}if(p>n&&(c.setZero(),c[u]=g,n=p),s=Uh(s,m),n>s)return!1}return n<0||i.maxFraction<n?!1:(e.fraction=n,e.normal=c,!0)},r.prototype.toString=function(){return JSON.stringify(this)},r.combinePoints=function(e,i,n){return e.lowerBound.x=Uh(i.x,n.x),e.lowerBound.y=Uh(i.y,n.y),e.upperBound.x=Nl(i.x,n.x),e.upperBound.y=Nl(i.y,n.y),e},r.combinedPerimeter=function(e,i){var n=Uh(e.lowerBound.x,i.lowerBound.x),s=Uh(e.lowerBound.y,i.lowerBound.y),o=Nl(e.upperBound.x,i.upperBound.x),a=Nl(e.upperBound.y,i.upperBound.y);return 2*(o-n+a-s)},r}(),ET=Math.PI,Ni=function(){function r(){}return Object.defineProperty(r,"polygonRadius",{get:function(){return 2*r.linearSlop},enumerable:!1,configurable:!0}),r.lengthUnitsPerMeter=1,r.maxManifoldPoints=2,r.maxPolygonVertices=12,r.aabbExtension=.1,r.aabbMultiplier=2,r.linearSlop=.005,r.angularSlop=2/180*ET,r.maxSubSteps=8,r.maxTOIContacts=32,r.maxTOIIterations=20,r.maxDistanceIterations=20,r.velocityThreshold=1,r.maxLinearCorrection=.2,r.maxAngularCorrection=8/180*ET,r.maxTranslation=2,r.maxRotation=.5*ET,r.baumgarte=.2,r.toiBaugarte=.75,r.timeToSleep=.5,r.linearSleepTolerance=.01,r.angularSleepTolerance=2/180*ET,r}(),Et=function(){function r(){}return Object.defineProperty(r,"maxManifoldPoints",{get:function(){return Ni.maxManifoldPoints},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxPolygonVertices",{get:function(){return Ni.maxPolygonVertices},enumerable:!1,configurable:!0}),Object.defineProperty(r,"aabbExtension",{get:function(){return Ni.aabbExtension*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"aabbMultiplier",{get:function(){return Ni.aabbMultiplier},enumerable:!1,configurable:!0}),Object.defineProperty(r,"linearSlop",{get:function(){return Ni.linearSlop*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"linearSlopSquared",{get:function(){return Ni.linearSlop*Ni.lengthUnitsPerMeter*Ni.linearSlop*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"angularSlop",{get:function(){return Ni.angularSlop},enumerable:!1,configurable:!0}),Object.defineProperty(r,"polygonRadius",{get:function(){return 2*Ni.linearSlop},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxSubSteps",{get:function(){return Ni.maxSubSteps},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxTOIContacts",{get:function(){return Ni.maxTOIContacts},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxTOIIterations",{get:function(){return Ni.maxTOIIterations},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxDistanceIterations",{get:function(){return Ni.maxDistanceIterations},enumerable:!1,configurable:!0}),Object.defineProperty(r,"velocityThreshold",{get:function(){return Ni.velocityThreshold*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxLinearCorrection",{get:function(){return Ni.maxLinearCorrection*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxAngularCorrection",{get:function(){return Ni.maxAngularCorrection},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxTranslation",{get:function(){return Ni.maxTranslation*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxTranslationSquared",{get:function(){return Ni.maxTranslation*Ni.lengthUnitsPerMeter*Ni.maxTranslation*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxRotation",{get:function(){return Ni.maxRotation},enumerable:!1,configurable:!0}),Object.defineProperty(r,"maxRotationSquared",{get:function(){return Ni.maxRotation*Ni.maxRotation},enumerable:!1,configurable:!0}),Object.defineProperty(r,"baumgarte",{get:function(){return Ni.baumgarte},enumerable:!1,configurable:!0}),Object.defineProperty(r,"toiBaugarte",{get:function(){return Ni.toiBaugarte},enumerable:!1,configurable:!0}),Object.defineProperty(r,"timeToSleep",{get:function(){return Ni.timeToSleep},enumerable:!1,configurable:!0}),Object.defineProperty(r,"linearSleepTolerance",{get:function(){return Ni.linearSleepTolerance*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"linearSleepToleranceSqr",{get:function(){return Ni.linearSleepTolerance*Ni.lengthUnitsPerMeter*Ni.linearSleepTolerance*Ni.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(r,"angularSleepTolerance",{get:function(){return Ni.angularSleepTolerance},enumerable:!1,configurable:!0}),Object.defineProperty(r,"angularSleepToleranceSqr",{get:function(){return Ni.angularSleepTolerance*Ni.angularSleepTolerance},enumerable:!1,configurable:!0}),r}(),ow=function(){function r(e){this._list=[],this._max=1/0,this._hasCreateFn=!1,this._createCount=0,this._hasAllocateFn=!1,this._allocateCount=0,this._hasReleaseFn=!1,this._releaseCount=0,this._hasDisposeFn=!1,this._disposeCount=0,this._list=[],this._max=e.max||this._max,this._createFn=e.create,this._hasCreateFn=typeof this._createFn=="function",this._allocateFn=e.allocate,this._hasAllocateFn=typeof this._allocateFn=="function",this._releaseFn=e.release,this._hasReleaseFn=typeof this._releaseFn=="function",this._disposeFn=e.dispose,this._hasDisposeFn=typeof this._disposeFn=="function"}return r.prototype.max=function(e){return typeof e=="number"?(this._max=e,this):this._max},r.prototype.size=function(){return this._list.length},r.prototype.allocate=function(){var e;return this._list.length>0?e=this._list.shift():(this._createCount++,this._hasCreateFn?e=this._createFn():e={}),this._allocateCount++,this._hasAllocateFn&&this._allocateFn(e),e},r.prototype.release=function(e){this._list.length<this._max?(this._releaseCount++,this._hasReleaseFn&&this._releaseFn(e),this._list.push(e)):(this._disposeCount++,this._hasDisposeFn&&(e=this._disposeFn(e)))},r.prototype.toString=function(){return" +"+this._createCount+" >"+this._allocateCount+" <"+this._releaseCount+" -"+this._disposeCount+" ="+this._list.length+"/"+this._max},r}(),qj=Math.abs,Ka=Math.max,DZe=function(){function r(e){this.aabb=new $s,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.id=e}return r.prototype.toString=function(){return this.id+": "+this.userData},r.prototype.isLeaf=function(){return this.child1==null},r}(),Zj=new ow({create:function(){return new DZe},release:function(r){r.userData=null,r.parent=null,r.child1=null,r.child2=null,r.height=-1,r.id=void 0}}),LZe=function(){function r(){this.inputPool=new ow({create:function(){return{}},release:function(e){}}),this.stackPool=new ow({create:function(){return[]},release:function(e){e.length=0}}),this.iteratorPool=new ow({create:function(){return new NZe},release:function(e){e.close()}}),this.m_root=null,this.m_nodes={},this.m_lastProxyId=0}return r.prototype.getUserData=function(e){var i=this.m_nodes[e];return i.userData},r.prototype.getFatAABB=function(e){var i=this.m_nodes[e];return i.aabb},r.prototype.allocateNode=function(){var e=Zj.allocate();return e.id=++this.m_lastProxyId,this.m_nodes[e.id]=e,e},r.prototype.freeNode=function(e){delete this.m_nodes[e.id],Zj.release(e)},r.prototype.createProxy=function(e,i){var n=this.allocateNode();return n.aabb.set(e),$s.extend(n.aabb,Et.aabbExtension),n.userData=i,n.height=0,this.insertLeaf(n),n.id},r.prototype.destroyProxy=function(e){var i=this.m_nodes[e];this.removeLeaf(i),this.freeNode(i)},r.prototype.moveProxy=function(e,i,n){var s=this.m_nodes[e];return s.aabb.contains(i)?!1:(this.removeLeaf(s),s.aabb.set(i),i=s.aabb,$s.extend(i,Et.aabbExtension),n.x<0?i.lowerBound.x+=n.x*Et.aabbMultiplier:i.upperBound.x+=n.x*Et.aabbMultiplier,n.y<0?i.lowerBound.y+=n.y*Et.aabbMultiplier:i.upperBound.y+=n.y*Et.aabbMultiplier,this.insertLeaf(s),!0)},r.prototype.insertLeaf=function(e){if(this.m_root==null){this.m_root=e,this.m_root.parent=null;return}for(var i=e.aabb,n=this.m_root;!n.isLeaf();){var s=n.child1,o=n.child2,a=n.aabb.getPerimeter(),l=$s.combinedPerimeter(n.aabb,i),c=2*l,u=2*(l-a),d=$s.combinedPerimeter(i,s.aabb),p=d+u;if(!s.isLeaf()){var m=s.aabb.getPerimeter();p-=m}var g=$s.combinedPerimeter(i,o.aabb),y=g+u;if(!o.isLeaf()){var m=o.aabb.getPerimeter();y-=m}if(c<p&&c<y)break;p<y?n=s:n=o}var _=n,x=_.parent,O=this.allocateNode();for(O.parent=x,O.userData=null,O.aabb.combine(i,_.aabb),O.height=_.height+1,x!=null?(x.child1===_?x.child1=O:x.child2=O,O.child1=_,O.child2=e,_.parent=O,e.parent=O):(O.child1=_,O.child2=e,_.parent=O,e.parent=O,this.m_root=O),n=e.parent;n!=null;){n=this.balance(n);var s=n.child1,o=n.child2;n.height=1+Ka(s.height,o.height),n.aabb.combine(s.aabb,o.aabb),n=n.parent}},r.prototype.removeLeaf=function(e){if(e===this.m_root){this.m_root=null;return}var i=e.parent,n=i.parent,s;if(i.child1===e?s=i.child2:s=i.child1,n!=null){n.child1===i?n.child1=s:n.child2=s,s.parent=n,this.freeNode(i);for(var o=n;o!=null;){o=this.balance(o);var a=o.child1,l=o.child2;o.aabb.combine(a.aabb,l.aabb),o.height=1+Ka(a.height,l.height),o=o.parent}}else this.m_root=s,s.parent=null,this.freeNode(i)},r.prototype.balance=function(e){var i=e;if(i.isLeaf()||i.height<2)return e;var n=i.child1,s=i.child2,o=s.height-n.height;if(o>1){var a=s.child1,l=s.child2;return s.child1=i,s.parent=i.parent,i.parent=s,s.parent!=null?s.parent.child1===e?s.parent.child1=s:s.parent.child2=s:this.m_root=s,a.height>l.height?(s.child2=a,i.child2=l,l.parent=i,i.aabb.combine(n.aabb,l.aabb),s.aabb.combine(i.aabb,a.aabb),i.height=1+Ka(n.height,l.height),s.height=1+Ka(i.height,a.height)):(s.child2=l,i.child2=a,a.parent=i,i.aabb.combine(n.aabb,a.aabb),s.aabb.combine(i.aabb,l.aabb),i.height=1+Ka(n.height,a.height),s.height=1+Ka(i.height,l.height)),s}if(o<-1){var c=n.child1,u=n.child2;return n.child1=i,n.parent=i.parent,i.parent=n,n.parent!=null?n.parent.child1===i?n.parent.child1=n:n.parent.child2=n:this.m_root=n,c.height>u.height?(n.child2=c,i.child1=u,u.parent=i,i.aabb.combine(s.aabb,u.aabb),n.aabb.combine(i.aabb,c.aabb),i.height=1+Ka(s.height,u.height),n.height=1+Ka(i.height,c.height)):(n.child2=u,i.child1=c,c.parent=i,i.aabb.combine(s.aabb,c.aabb),n.aabb.combine(i.aabb,u.aabb),i.height=1+Ka(s.height,c.height),n.height=1+Ka(i.height,u.height)),n}return i},r.prototype.getHeight=function(){return this.m_root==null?0:this.m_root.height},r.prototype.getAreaRatio=function(){if(this.m_root==null)return 0;for(var e=this.m_root,i=e.aabb.getPerimeter(),n=0,s,o=this.iteratorPool.allocate().preorder(this.m_root);s=o.next();)s.height<0||(n+=s.aabb.getPerimeter());return this.iteratorPool.release(o),n/i},r.prototype.computeHeight=function(e){var i;if(typeof e<"u"?i=this.m_nodes[e]:i=this.m_root,i.isLeaf())return 0;var n=this.computeHeight(i.child1.id),s=this.computeHeight(i.child2.id);return 1+Ka(n,s)},r.prototype.validateStructure=function(e){if(e!=null){this.m_root;var i=e.child1,n=e.child2;e.isLeaf()||(this.validateStructure(i),this.validateStructure(n))}},r.prototype.validateMetrics=function(e){if(e!=null){var i=e.child1,n=e.child2;if(!e.isLeaf()){i.height,n.height;var s=new $s;s.combine(i.aabb,n.aabb),this.validateMetrics(i),this.validateMetrics(n)}}},r.prototype.validate=function(){},r.prototype.getMaxBalance=function(){for(var e=0,i,n=this.iteratorPool.allocate().preorder(this.m_root);i=n.next();)if(!(i.height<=1)){var s=qj(i.child2.height-i.child1.height);e=Ka(e,s)}return this.iteratorPool.release(n),e},r.prototype.rebuildBottomUp=function(){for(var e=[],i=0,n,s=this.iteratorPool.allocate().preorder(this.m_root);n=s.next();)n.height<0||(n.isLeaf()?(n.parent=null,e[i]=n,++i):this.freeNode(n));for(this.iteratorPool.release(s);i>1;){for(var o=1/0,a=-1,l=-1,c=0;c<i;++c)for(var u=e[c].aabb,d=c+1;d<i;++d){var p=e[d].aabb,m=$s.combinedPerimeter(u,p);m<o&&(a=c,l=d,o=m)}var g=e[a],y=e[l],_=this.allocateNode();_.child1=g,_.child2=y,_.height=1+Ka(g.height,y.height),_.aabb.combine(g.aabb,y.aabb),_.parent=null,g.parent=_,y.parent=_,e[l]=e[i-1],e[a]=_,--i}this.m_root=e[0]},r.prototype.shiftOrigin=function(e){for(var i,n=this.iteratorPool.allocate().preorder(this.m_root);i=n.next();){var s=i.aabb;s.lowerBound.x-=e.x,s.lowerBound.y-=e.y,s.upperBound.x-=e.x,s.upperBound.y-=e.y}this.iteratorPool.release(n)},r.prototype.query=function(e,i){var n=this.stackPool.allocate();for(n.push(this.m_root);n.length>0;){var s=n.pop();if(s!=null&&$s.testOverlap(s.aabb,e))if(s.isLeaf()){var o=i(s.id);if(o===!1)return}else n.push(s.child1),n.push(s.child2)}this.stackPool.release(n)},r.prototype.rayCast=function(e,i){var n=e.p1,s=e.p2,o=X.sub(s,n);o.normalize();var a=X.crossNumVec2(1,o),l=X.abs(a),c=e.maxFraction,u=new $s,d=X.combine(1-c,n,c,s);u.combinePoints(n,d);var p=this.stackPool.allocate(),m=this.inputPool.allocate();for(p.push(this.m_root);p.length>0;){var g=p.pop();if(g!=null&&$s.testOverlap(g.aabb,u)!==!1){var y=g.aabb.getCenter(),_=g.aabb.getExtents(),x=qj(X.dot(a,X.sub(n,y)))-X.dot(l,_);if(!(x>0))if(g.isLeaf()){m.p1=X.clone(e.p1),m.p2=X.clone(e.p2),m.maxFraction=c;var O=i(m,g.id);if(O===0)break;O>0&&(c=O,d=X.combine(1-c,n,c,s),u.combinePoints(n,d))}else p.push(g.child1),p.push(g.child2)}}this.stackPool.release(p),this.inputPool.release(m)},r}(),NZe=function(){function r(){this.parents=[],this.states=[]}return r.prototype.preorder=function(e){return this.parents.length=0,this.parents.push(e),this.states.length=0,this.states.push(0),this},r.prototype.next=function(){for(;this.parents.length>0;){var e=this.parents.length-1,i=this.parents[e];if(this.states[e]===0)return this.states[e]=1,i;if(this.states[e]===1&&(this.states[e]=2,i.child1))return this.parents.push(i.child1),this.states.push(1),i.child1;if(this.states[e]===2&&(this.states[e]=3,i.child2))return this.parents.push(i.child2),this.states.push(1),i.child2;this.parents.pop(),this.states.pop()}},r.prototype.close=function(){this.parents.length=0},r}(),VZe=Math.max,FZe=Math.min,$Ze=function(){function r(){var e=this;this.m_tree=new LZe,this.m_moveBuffer=[],this.query=function(i,n){e.m_tree.query(i,n)},this.queryCallback=function(i){if(i===e.m_queryProxyId)return!0;var n=FZe(i,e.m_queryProxyId),s=VZe(i,e.m_queryProxyId),o=e.m_tree.getUserData(n),a=e.m_tree.getUserData(s);return e.m_callback(o,a),!0}}return r.prototype.getUserData=function(e){return this.m_tree.getUserData(e)},r.prototype.testOverlap=function(e,i){var n=this.m_tree.getFatAABB(e),s=this.m_tree.getFatAABB(i);return $s.testOverlap(n,s)},r.prototype.getFatAABB=function(e){return this.m_tree.getFatAABB(e)},r.prototype.getProxyCount=function(){return this.m_moveBuffer.length},r.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},r.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},r.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},r.prototype.rayCast=function(e,i){this.m_tree.rayCast(e,i)},r.prototype.shiftOrigin=function(e){this.m_tree.shiftOrigin(e)},r.prototype.createProxy=function(e,i){var n=this.m_tree.createProxy(e,i);return this.bufferMove(n),n},r.prototype.destroyProxy=function(e){this.unbufferMove(e),this.m_tree.destroyProxy(e)},r.prototype.moveProxy=function(e,i,n){var s=this.m_tree.moveProxy(e,i,n);s&&this.bufferMove(e)},r.prototype.touchProxy=function(e){this.bufferMove(e)},r.prototype.bufferMove=function(e){this.m_moveBuffer.push(e)},r.prototype.unbufferMove=function(e){for(var i=0;i<this.m_moveBuffer.length;++i)this.m_moveBuffer[i]===e&&(this.m_moveBuffer[i]=null)},r.prototype.updatePairs=function(e){for(this.m_callback=e;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),this.m_queryProxyId!==null){var i=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(i,this.queryCallback)}},r}(),nhe=Math.sin,rhe=Math.cos,IF=Math.sqrt;function He(r,e){return{x:r,y:e}}function UZe(r){return{s:nhe(r),c:rhe(r)}}function Xs(r,e,i){return r.x=e,r.y=i,r}function Ne(r,e){return r.x=e.x,r.y=e.y,r}function hi(r){return r.x=0,r.y=0,r}function CO(r){return r.x=-r.x,r.y=-r.y,r}function Yl(r,e){return r.x+=e.x,r.y+=e.y,r}function zZe(r,e,i){return r.x=e.x+i.x,r.y=e.x+i.y,r}function Ju(r,e){return r.x-=e.x,r.y-=e.y,r}function Ci(r,e,i){return r.x=e.x-i.x,r.y=e.y-i.y,r}function Kj(r,e){return r.x*=e,r.y*=e,r}function gi(r,e,i){return r.x=e*i.x,r.y=e*i.y,r}function tc(r,e,i){return r.x+=e*i.x,r.y+=e*i.y,r}function kb(r,e,i){return r.x-=e*i.x,r.y-=e*i.y,r}function lr(r,e,i,n,s){return r.x=e*i.x+n*s.x,r.y=e*i.y+n*s.y,r}function Fc(r,e,i,n,s,o,a){return r.x=e*i.x+n*s.x+o*a.x,r.y=e*i.y+n*s.y+o*a.y,r}function XZe(r){var e=IF(r.x*r.x+r.y*r.y);if(e!==0){var i=1/e;r.x*=i,r.y*=i}return e}function rc(r){var e=IF(r.x*r.x+r.y*r.y);if(e>0){var i=1/e;r.x*=i,r.y*=i}return r}function Ug(r,e,i){var n=i*e.y,s=-i*e.x;return r.x=n,r.y=s,r}function il(r,e,i){var n=-e*i.y,s=e*i.x;return r.x=n,r.y=s,r}function Vi(r,e){return r.x*e.y-r.y*e.x}function ot(r,e){return r.x*e.x+r.y*e.y}function zg(r){return r.x*r.x+r.y*r.y}function she(r,e){var i=r.x-e.x,n=r.y-e.y;return IF(i*i+n*n)}function Xg(r,e){var i=r.x-e.x,n=r.y-e.y;return i*i+n*n}function WZe(r,e){return r.c=rhe(e),r.s=nhe(e),r}function dh(r,e,i){return r.x=e.c*i.x-e.s*i.y,r.y=e.s*i.x+e.c*i.y,r}function ay(r,e,i){var n=e.c*i.x+e.s*i.y,s=-e.s*i.x+e.c*i.y;return r.x=n,r.y=s,r}function GZe(r,e,i,n){var s=e.c*n.x+e.s*n.y,o=-e.s*n.x+e.c*n.y,a=i.c*s-i.s*o,l=i.s*s+i.c*o;return r.x=a,r.y=l,r}function O0(r,e,i){return{p:He(r,e),q:UZe(i)}}function MM(r,e){return r.p.x=e.p.x,r.p.y=e.p.y,r.q.s=e.q.s,r.q.c=e.q.c,r}function Si(r,e,i){var n=e.q.c*i.x-e.q.s*i.y+e.p.x,s=e.q.s*i.x+e.q.c*i.y+e.p.y;return r.x=n,r.y=s,r}function RF(r,e,i){var n=i.x-e.p.x,s=i.y-e.p.y,o=e.q.c*n+e.q.s*s,a=-e.q.s*n+e.q.c*s;return r.x=o,r.y=a,r}function ohe(r,e,i,n){var s=e.q.c*n.x-e.q.s*n.y+e.p.x,o=e.q.s*n.x+e.q.c*n.y+e.p.y,a=s-i.p.x,l=o-i.p.y,c=i.q.c*a+i.q.s*l,u=-i.q.s*a+i.q.c*l;return r.x=c,r.y=u,r}function ahe(r,e,i){var n=e.q.c*i.q.c+e.q.s*i.q.s,s=e.q.c*i.q.s-e.q.s*i.q.c,o=e.q.c*(i.p.x-e.p.x)+e.q.s*(i.p.y-e.p.y),a=-e.q.s*(i.p.x-e.p.x)+e.q.c*(i.p.y-e.p.y);return r.q.c=n,r.q.s=s,r.p.x=o,r.p.y=a,r}var Jj=Math.sin,eY=Math.cos,HZe=Math.atan2,Ke=function(){function r(e){if(!(this instanceof r))return new r(e);typeof e=="number"?this.setAngle(e):typeof e=="object"?this.setRot(e):this.setIdentity()}return r.neo=function(e){var i=Object.create(r.prototype);return i.setAngle(e),i},r.clone=function(e){var i=Object.create(r.prototype);return i.s=e.s,i.c=e.c,i},r.identity=function(){var e=Object.create(r.prototype);return e.s=0,e.c=1,e},r.isValid=function(e){return e===null||typeof e>"u"?!1:Number.isFinite(e.s)&&Number.isFinite(e.c)},r.assert=function(e){},r.prototype.setIdentity=function(){this.s=0,this.c=1},r.prototype.set=function(e){typeof e=="object"?(this.s=e.s,this.c=e.c):(this.s=Jj(e),this.c=eY(e))},r.prototype.setRot=function(e){this.s=e.s,this.c=e.c},r.prototype.setAngle=function(e){this.s=Jj(e),this.c=eY(e)},r.prototype.getAngle=function(){return HZe(this.s,this.c)},r.prototype.getXAxis=function(){return X.neo(this.c,this.s)},r.prototype.getYAxis=function(){return X.neo(-this.s,this.c)},r.mul=function(e,i){if("c"in i&&"s"in i){var n=r.identity();return n.s=e.s*i.c+e.c*i.s,n.c=e.c*i.c-e.s*i.s,n}else if("x"in i&&"y"in i)return X.neo(e.c*i.x-e.s*i.y,e.s*i.x+e.c*i.y)},r.mulRot=function(e,i){var n=r.identity();return n.s=e.s*i.c+e.c*i.s,n.c=e.c*i.c-e.s*i.s,n},r.mulVec2=function(e,i){return X.neo(e.c*i.x-e.s*i.y,e.s*i.x+e.c*i.y)},r.mulSub=function(e,i,n){var s=e.c*(i.x-n.x)-e.s*(i.y-n.y),o=e.s*(i.x-n.x)+e.c*(i.y-n.y);return X.neo(s,o)},r.mulT=function(e,i){if("c"in i&&"s"in i){var n=r.identity();return n.s=e.c*i.s-e.s*i.c,n.c=e.c*i.c+e.s*i.s,n}else if("x"in i&&"y"in i)return X.neo(e.c*i.x+e.s*i.y,-e.s*i.x+e.c*i.y)},r.mulTRot=function(e,i){var n=r.identity();return n.s=e.c*i.s-e.s*i.c,n.c=e.c*i.c+e.s*i.s,n},r.mulTVec2=function(e,i){return X.neo(e.c*i.x+e.s*i.y,-e.s*i.x+e.c*i.y)},r}(),QZe=Math.atan2,tY=Math.PI,Vm=He(0,0),__=function(){function r(){this.localCenter=X.zero(),this.c=X.zero(),this.a=0,this.alpha0=0,this.c0=X.zero(),this.a0=0}return r.prototype.recycle=function(){hi(this.localCenter),hi(this.c),this.a=0,this.alpha0=0,hi(this.c0),this.a0=0},r.prototype.setTransform=function(e){Si(Vm,e,this.localCenter),Ne(this.c,Vm),Ne(this.c0,Vm),this.a=this.a0=QZe(e.q.s,e.q.c)},r.prototype.setLocalCenter=function(e,i){Ne(this.localCenter,e),Si(Vm,i,this.localCenter),Ne(this.c,Vm),Ne(this.c0,Vm)},r.prototype.getTransform=function(e,i){i===void 0&&(i=0),WZe(e.q,(1-i)*this.a0+i*this.a),lr(e.p,1-i,this.c0,i,this.c),Ju(e.p,dh(Vm,e.q,this.localCenter))},r.prototype.advance=function(e){var i=(e-this.alpha0)/(1-this.alpha0);lr(this.c0,i,this.c,1-i,this.c0),this.a0=i*this.a+(1-i)*this.a0,this.alpha0=e},r.prototype.forward=function(){this.a0=this.a,Ne(this.c0,this.c)},r.prototype.normalize=function(){var e=ihe(this.a0,-tY,+tY);this.a-=this.a0-e,this.a0=e},r.prototype.set=function(e){Ne(this.localCenter,e.localCenter),Ne(this.c,e.c),this.a=e.a,this.alpha0=e.alpha0,Ne(this.c0,e.c0),this.a0=e.a0},r}(),sc=function(){function r(e,i){if(!(this instanceof r))return new r(e,i);this.p=X.zero(),this.q=Ke.identity(),typeof e<"u"&&this.p.setVec2(e),typeof i<"u"&&this.q.setAngle(i)}return r.clone=function(e){var i=Object.create(r.prototype);return i.p=X.clone(e.p),i.q=Ke.clone(e.q),i},r.neo=function(e,i){var n=Object.create(r.prototype);return n.p=X.clone(e),n.q=Ke.clone(i),n},r.identity=function(){var e=Object.create(r.prototype);return e.p=X.zero(),e.q=Ke.identity(),e},r.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},r.prototype.set=function(e,i){typeof i>"u"?(this.p.set(e.p),this.q.set(e.q)):(this.p.set(e),this.q.set(i))},r.prototype.setNum=function(e,i){this.p.setVec2(e),this.q.setAngle(i)},r.prototype.setTransform=function(e){this.p.setVec2(e.p),this.q.setRot(e.q)},r.isValid=function(e){return e===null||typeof e>"u"?!1:X.isValid(e.p)&&Ke.isValid(e.q)},r.assert=function(e){},r.mul=function(e,i){if(Array.isArray(i)){for(var n=[],s=0;s<i.length;s++)n[s]=r.mul(e,i[s]);return n}else{if("x"in i&&"y"in i)return r.mulVec2(e,i);if("p"in i&&"q"in i)return r.mulXf(e,i)}},r.mulAll=function(e,i){for(var n=[],s=0;s<i.length;s++)n[s]=r.mul(e,i[s]);return n},r.mulFn=function(e){return function(i){return r.mul(e,i)}},r.mulVec2=function(e,i){var n=e.q.c*i.x-e.q.s*i.y+e.p.x,s=e.q.s*i.x+e.q.c*i.y+e.p.y;return X.neo(n,s)},r.mulXf=function(e,i){var n=r.identity();return n.q=Ke.mulRot(e.q,i.q),n.p=X.add(Ke.mulVec2(e.q,i.p),e.p),n},r.mulT=function(e,i){if("x"in i&&"y"in i)return r.mulTVec2(e,i);if("p"in i&&"q"in i)return r.mulTXf(e,i)},r.mulTVec2=function(e,i){var n=i.x-e.p.x,s=i.y-e.p.y,o=e.q.c*n+e.q.s*s,a=-e.q.s*n+e.q.c*s;return X.neo(o,a)},r.mulTXf=function(e,i){var n=r.identity();return n.q.setRot(Ke.mulTRot(e.q,i.q)),n.p.setVec2(Ke.mulTVec2(e.q,X.sub(i.p,e.p))),n},r}(),jZe=function(){function r(){this.v=X.zero(),this.w=0}return r}(),lhe=Math.sin,hhe=Math.cos,YZe=function(){function r(){this.c=X.zero(),this.a=0}return r.prototype.getTransform=function(e,i){return e.q.c=hhe(this.a),e.q.s=lhe(this.a),e.p.x=this.c.x-(e.q.c*i.x-e.q.s*i.y),e.p.y=this.c.y-(e.q.s*i.x+e.q.c*i.y),e},r}();function MT(r,e,i,n){return r.q.c=hhe(n),r.q.s=lhe(n),r.p.x=i.x-(r.q.c*e.x-r.q.s*e.y),r.p.y=i.y-(r.q.s*e.x+r.q.c*e.y),r}var S0=function(){function r(){this.style={},this.appData={}}return r.isValid=function(e){return e===null||typeof e>"u"?!1:typeof e.m_type=="string"&&typeof e.m_radius=="number"},r}(),iY=new $s,nY=new $s,rY=He(0,0),qZe={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535},sY=function(){function r(e,i){this.aabb=new $s,this.fixture=e,this.childIndex=i}return r}(),PM=function(){function r(e,i,n){this.style={},this.appData={},i.shape?(n=i,i=i.shape):typeof n=="number"&&(n={density:n}),n=El(n,qZe),this.m_body=e,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_density=n.density,this.m_isSensor=n.isSensor,this.m_filterGroupIndex=n.filterGroupIndex,this.m_filterCategoryBits=n.filterCategoryBits,this.m_filterMaskBits=n.filterMaskBits,this.m_shape=i,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var s=this.m_shape.getChildCount(),o=0;o<s;++o)this.m_proxies[o]=new sY(this,o);this.m_userData=n.userData,typeof n.style=="object"&&n.style!==null&&(this.style=n.style)}return r.prototype._reset=function(){var e=this.getBody(),i=e.m_world.m_broadPhase;this.destroyProxies(i),this.m_shape._reset&&this.m_shape._reset();for(var n=this.m_shape.getChildCount(),s=0;s<n;++s)this.m_proxies[s]=new sY(this,s);this.createProxies(i,e.m_xf),e.resetMassData()},r.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},r._deserialize=function(e,i,n){var s=n(S0,e.shape),o=s&&new r(i,s,e);return o},r.prototype.getType=function(){return this.m_shape.m_type},r.prototype.getShape=function(){return this.m_shape},r.prototype.isSensor=function(){return this.m_isSensor},r.prototype.setSensor=function(e){e!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=e)},r.prototype.getUserData=function(){return this.m_userData},r.prototype.setUserData=function(e){this.m_userData=e},r.prototype.getBody=function(){return this.m_body},r.prototype.getNext=function(){return this.m_next},r.prototype.getDensity=function(){return this.m_density},r.prototype.setDensity=function(e){this.m_density=e},r.prototype.getFriction=function(){return this.m_friction},r.prototype.setFriction=function(e){this.m_friction=e},r.prototype.getRestitution=function(){return this.m_restitution},r.prototype.setRestitution=function(e){this.m_restitution=e},r.prototype.testPoint=function(e){return this.m_shape.testPoint(this.m_body.getTransform(),e)},r.prototype.rayCast=function(e,i,n){return this.m_shape.rayCast(e,i,this.m_body.getTransform(),n)},r.prototype.getMassData=function(e){this.m_shape.computeMass(e,this.m_density)},r.prototype.getAABB=function(e){return this.m_proxies[e].aabb},r.prototype.createProxies=function(e,i){this.m_proxyCount=this.m_shape.getChildCount();for(var n=0;n<this.m_proxyCount;++n){var s=this.m_proxies[n];this.m_shape.computeAABB(s.aabb,i,n),s.proxyId=e.createProxy(s.aabb,s)}},r.prototype.destroyProxies=function(e){for(var i=0;i<this.m_proxyCount;++i){var n=this.m_proxies[i];e.destroyProxy(n.proxyId),n.proxyId=null}this.m_proxyCount=0},r.prototype.synchronize=function(e,i,n){for(var s=0;s<this.m_proxyCount;++s){var o=this.m_proxies[s];this.m_shape.computeAABB(iY,i,o.childIndex),this.m_shape.computeAABB(nY,n,o.childIndex),o.aabb.combine(iY,nY),Ci(rY,n.p,i.p),e.moveProxy(o.proxyId,o.aabb,rY)}},r.prototype.setFilterData=function(e){this.m_filterGroupIndex=e.groupIndex,this.m_filterCategoryBits=e.categoryBits,this.m_filterMaskBits=e.maskBits,this.refilter()},r.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},r.prototype.setFilterGroupIndex=function(e){this.m_filterGroupIndex=e,this.refilter()},r.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},r.prototype.setFilterCategoryBits=function(e){this.m_filterCategoryBits=e,this.refilter()},r.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},r.prototype.setFilterMaskBits=function(e){this.m_filterMaskBits=e,this.refilter()},r.prototype.refilter=function(){if(this.m_body!=null){for(var e=this.m_body.getContactList();e;){var i=e.contact,n=i.getFixtureA(),s=i.getFixtureB();(n==this||s==this)&&i.flagForFiltering(),e=e.next}var o=this.m_body.getWorld();if(o!=null)for(var a=o.m_broadPhase,l=0;l<this.m_proxyCount;++l)a.touchProxy(this.m_proxies[l].proxyId)}},r.prototype.shouldCollide=function(e){if(e.m_filterGroupIndex===this.m_filterGroupIndex&&e.m_filterGroupIndex!==0)return e.m_filterGroupIndex>0;var i=(e.m_filterMaskBits&this.m_filterCategoryBits)!==0,n=(e.m_filterCategoryBits&this.m_filterMaskBits)!==0,s=i&&n;return s},r}(),qv="static",oY="kinematic",zh="dynamic",PT=He(0,0),Fm=He(0,0),kT=He(0,0),IT=He(0,0),aY=O0(0,0,0),ZZe={type:qv,position:X.zero(),angle:0,linearVelocity:X.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null},xn=function(){function r(e,i){this.style={},this.appData={},i=El(i,ZZe),this.m_world=e,this.m_awakeFlag=i.awake,this.m_autoSleepFlag=i.allowSleep,this.m_bulletFlag=i.bullet,this.m_fixedRotationFlag=i.fixedRotation,this.m_activeFlag=i.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=i.userData,this.m_type=i.type,this.m_type==zh?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=sc.identity(),this.m_xf.p.setVec2(i.position),this.m_xf.q.setAngle(i.angle),this.m_sweep=new __,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new jZe,this.c_position=new YZe,this.m_force=X.zero(),this.m_torque=0,this.m_linearVelocity=X.clone(i.linearVelocity),this.m_angularVelocity=i.angularVelocity,this.m_linearDamping=i.linearDamping,this.m_angularDamping=i.angularDamping,this.m_gravityScale=i.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1,typeof i.style=="object"&&i.style!==null&&(this.style=i.style)}return r.prototype._serialize=function(){for(var e=[],i=this.m_fixtureList;i;i=i.m_next)e.push(i);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:e}},r._deserialize=function(e,i,n){var s=new r(i,e);if(e.fixtures)for(var o=e.fixtures.length-1;o>=0;o--){var a=n(PM,e.fixtures[o],s);s._addFixture(a)}return s},r.prototype.isWorldLocked=function(){return!!(this.m_world&&this.m_world.isLocked())},r.prototype.getWorld=function(){return this.m_world},r.prototype.getNext=function(){return this.m_next},r.prototype.setUserData=function(e){this.m_userData=e},r.prototype.getUserData=function(){return this.m_userData},r.prototype.getFixtureList=function(){return this.m_fixtureList},r.prototype.getJointList=function(){return this.m_jointList},r.prototype.getContactList=function(){return this.m_contactList},r.prototype.isStatic=function(){return this.m_type==qv},r.prototype.isDynamic=function(){return this.m_type==zh},r.prototype.isKinematic=function(){return this.m_type==oY},r.prototype.setStatic=function(){return this.setType(qv),this},r.prototype.setDynamic=function(){return this.setType(zh),this},r.prototype.setKinematic=function(){return this.setType(oY),this},r.prototype.getType=function(){return this.m_type},r.prototype.setType=function(e){if(this.isWorldLocked()!=!0&&this.m_type!=e){this.m_type=e,this.resetMassData(),this.m_type==qv&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var i=this.m_contactList;i;){var n=i;i=i.next,this.m_world.destroyContact(n.contact)}this.m_contactList=null;for(var s=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)for(var a=0;a<o.m_proxyCount;++a)s.touchProxy(o.m_proxies[a].proxyId)}},r.prototype.isBullet=function(){return this.m_bulletFlag},r.prototype.setBullet=function(e){this.m_bulletFlag=!!e},r.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},r.prototype.setSleepingAllowed=function(e){this.m_autoSleepFlag=!!e,this.m_autoSleepFlag==!1&&this.setAwake(!0)},r.prototype.isAwake=function(){return this.m_awakeFlag},r.prototype.setAwake=function(e){e?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},r.prototype.isActive=function(){return this.m_activeFlag},r.prototype.setActive=function(e){if(e!=this.m_activeFlag)if(this.m_activeFlag=!!e,this.m_activeFlag){for(var i=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.createProxies(i,this.m_xf);this.m_world.m_newFixture=!0}else{for(var i=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.destroyProxies(i);for(var s=this.m_contactList;s;){var o=s;s=s.next,this.m_world.destroyContact(o.contact)}this.m_contactList=null}},r.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},r.prototype.setFixedRotation=function(e){this.m_fixedRotationFlag!=e&&(this.m_fixedRotationFlag=!!e,this.m_angularVelocity=0,this.resetMassData())},r.prototype.getTransform=function(){return this.m_xf},r.prototype.setTransform=function(e,i){if(this.isWorldLocked()!=!0){typeof i=="number"?this.m_xf.setNum(e,i):this.m_xf.setTransform(e),this.m_sweep.setTransform(this.m_xf);for(var n=this.m_world.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)s.synchronize(n,this.m_xf,this.m_xf);this.setAwake(!0)}},r.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},r.prototype.synchronizeFixtures=function(){this.m_sweep.getTransform(aY,0);for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(e,aY,this.m_xf)},r.prototype.advance=function(e){this.m_sweep.advance(e),Ne(this.m_sweep.c,this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},r.prototype.getPosition=function(){return this.m_xf.p},r.prototype.setPosition=function(e){this.setTransform(e,this.m_sweep.a)},r.prototype.getAngle=function(){return this.m_sweep.a},r.prototype.setAngle=function(e){this.setTransform(this.m_xf.p,e)},r.prototype.getWorldCenter=function(){return this.m_sweep.c},r.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},r.prototype.getLinearVelocity=function(){return this.m_linearVelocity},r.prototype.getLinearVelocityFromWorldPoint=function(e){var i=X.sub(e,this.m_sweep.c);return X.add(this.m_linearVelocity,X.crossNumVec2(this.m_angularVelocity,i))},r.prototype.getLinearVelocityFromLocalPoint=function(e){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(e))},r.prototype.setLinearVelocity=function(e){this.m_type!=qv&&(X.dot(e,e)>0&&this.setAwake(!0),this.m_linearVelocity.setVec2(e))},r.prototype.getAngularVelocity=function(){return this.m_angularVelocity},r.prototype.setAngularVelocity=function(e){this.m_type!=qv&&(e*e>0&&this.setAwake(!0),this.m_angularVelocity=e)},r.prototype.getLinearDamping=function(){return this.m_linearDamping},r.prototype.setLinearDamping=function(e){this.m_linearDamping=e},r.prototype.getAngularDamping=function(){return this.m_angularDamping},r.prototype.setAngularDamping=function(e){this.m_angularDamping=e},r.prototype.getGravityScale=function(){return this.m_gravityScale},r.prototype.setGravityScale=function(e){this.m_gravityScale=e},r.prototype.getMass=function(){return this.m_mass},r.prototype.getInertia=function(){return this.m_I+this.m_mass*X.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},r.prototype.getMassData=function(e){e.mass=this.m_mass,e.I=this.getInertia(),Ne(e.center,this.m_sweep.localCenter)},r.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,hi(this.m_sweep.localCenter),this.isStatic()||this.isKinematic()){Ne(this.m_sweep.c0,this.m_xf.p),Ne(this.m_sweep.c,this.m_xf.p),this.m_sweep.a0=this.m_sweep.a;return}hi(Fm);for(var e=this.m_fixtureList;e;e=e.m_next)if(e.m_density!=0){var i={mass:0,center:He(0,0),I:0};e.getMassData(i),this.m_mass+=i.mass,tc(Fm,i.mass,i.center),this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,gi(Fm,this.m_invMass,Fm)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&this.m_fixedRotationFlag==!1?(this.m_I-=this.m_mass*ot(Fm,Fm),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0),Ne(PT,this.m_sweep.c),this.m_sweep.setLocalCenter(Fm,this.m_xf),Ci(kT,this.m_sweep.c,PT),il(IT,this.m_angularVelocity,kT),Yl(this.m_linearVelocity,IT)},r.prototype.setMassData=function(e){this.isWorldLocked()!=!0&&this.m_type==zh&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&this.m_fixedRotationFlag==!1&&(this.m_I=e.I-this.m_mass*ot(e.center,e.center),this.m_invI=1/this.m_I),Ne(PT,this.m_sweep.c),this.m_sweep.setLocalCenter(e.center,this.m_xf),Ci(kT,this.m_sweep.c,PT),il(IT,this.m_angularVelocity,kT),Yl(this.m_linearVelocity,IT))},r.prototype.applyForce=function(e,i,n){n===void 0&&(n=!0),this.m_type==zh&&(n&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(e),this.m_torque+=X.crossVec2Vec2(X.sub(i,this.m_sweep.c),e)))},r.prototype.applyForceToCenter=function(e,i){i===void 0&&(i=!0),this.m_type==zh&&(i&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(e))},r.prototype.applyTorque=function(e,i){i===void 0&&(i=!0),this.m_type==zh&&(i&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=e))},r.prototype.applyLinearImpulse=function(e,i,n){n===void 0&&(n=!0),this.m_type==zh&&(n&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,e),this.m_angularVelocity+=this.m_invI*X.crossVec2Vec2(X.sub(i,this.m_sweep.c),e)))},r.prototype.applyAngularImpulse=function(e,i){i===void 0&&(i=!0),this.m_type==zh&&(i&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*e))},r.prototype.shouldCollide=function(e){if(this.m_type!=zh&&e.m_type!=zh)return!1;for(var i=this.m_jointList;i;i=i.next)if(i.other==e&&i.joint.m_collideConnected==!1)return!1;return!0},r.prototype._addFixture=function(e){if(this.isWorldLocked()==!0)return null;if(this.m_activeFlag){var i=this.m_world.m_broadPhase;e.createProxies(i,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,e.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,e},r.prototype.createFixture=function(e,i){if(this.isWorldLocked()==!0)return null;var n=new PM(this,e,i);return this._addFixture(n),n},r.prototype.destroyFixture=function(e){if(this.isWorldLocked()!=!0){if(this.m_fixtureList===e)this.m_fixtureList=e.m_next;else for(var i=this.m_fixtureList;i!=null;){if(i.m_next===e){i.m_next=e.m_next;break}i=i.m_next}for(var n=this.m_contactList;n;){var s=n.contact;n=n.next;var o=s.getFixtureA(),a=s.getFixtureB();(e==o||e==a)&&this.m_world.destroyContact(s)}if(this.m_activeFlag){var l=this.m_world.m_broadPhase;e.destroyProxies(l)}e.m_body=null,e.m_next=null,this.m_world.publish("remove-fixture",e),this.resetMassData()}},r.prototype.getWorldPoint=function(e){return sc.mulVec2(this.m_xf,e)},r.prototype.getWorldVector=function(e){return Ke.mulVec2(this.m_xf.q,e)},r.prototype.getLocalPoint=function(e){return sc.mulTVec2(this.m_xf,e)},r.prototype.getLocalVector=function(e){return Ke.mulTVec2(this.m_xf.q,e)},r.STATIC="static",r.KINEMATIC="kinematic",r.DYNAMIC="dynamic",r}(),lY=function(){function r(){this.other=null,this.joint=null,this.prev=null,this.next=null}return r}(),So=function(){function r(e,i,n){this.m_type="unknown-joint",this.m_prev=null,this.m_next=null,this.m_edgeA=new lY,this.m_edgeB=new lY,this.m_islandFlag=!1,this.style={},this.appData={},i="bodyA"in e?e.bodyA:i,n="bodyB"in e?e.bodyB:n,this.m_bodyA=i,this.m_bodyB=n,this.m_collideConnected=!!e.collideConnected,this.m_userData=e.userData,typeof e.style=="object"&&e.style!==null&&(this.style=e.style)}return r.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},r.prototype.getType=function(){return this.m_type},r.prototype.getBodyA=function(){return this.m_bodyA},r.prototype.getBodyB=function(){return this.m_bodyB},r.prototype.getNext=function(){return this.m_next},r.prototype.getUserData=function(){return this.m_userData},r.prototype.setUserData=function(e){this.m_userData=e},r.prototype.getCollideConnected=function(){return this.m_collideConnected},r.prototype.shiftOrigin=function(e){},r.prototype._resetAnchors=function(e){return this._reset(e)},r}(),_r={gjkCalls:0,gjkIters:0,gjkMaxIters:0,toiTime:0,toiMaxTime:0,toiCalls:0,toiIters:0,toiMaxIters:0,toiRootIters:0,toiMaxRootIters:0,toString:function(r){r=typeof r=="string"?r:`
`;var e="";for(var i in this)typeof this[i]!="function"&&typeof this[i]!="object"&&(e+=i+": "+this[i]+r);return e}},KZe=function(){return Date.now()},JZe=function(r){return Date.now()-r};const hY={now:KZe,diff:JZe};var eKe=Math.max,RT=He(0,0),BT=He(0,0),Ja=He(0,0),DT=He(0,0),FB=He(0,0),tKe=He(0,0),iKe=He(0,0);_r.gjkCalls=0;_r.gjkIters=0;_r.gjkMaxIters=0;var BF=function(){function r(){this.proxyA=new h0,this.proxyB=new h0,this.transformA=sc.identity(),this.transformB=sc.identity(),this.useRadii=!1}return r.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.transformA.setIdentity(),this.transformB.setIdentity(),this.useRadii=!1},r}(),DF=function(){function r(){this.pointA=He(0,0),this.pointB=He(0,0),this.distance=0,this.iterations=0}return r.prototype.recycle=function(){hi(this.pointA),hi(this.pointB),this.distance=0,this.iterations=0},r}(),LF=function(){function r(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}return r.prototype.recycle=function(){this.metric=0,this.indexA.length=0,this.indexB.length=0,this.count=0},r}(),C0=function(r,e,i){++_r.gjkCalls;var n=i.proxyA,s=i.proxyB,o=i.transformA,a=i.transformB;Xh.recycle(),Xh.readCache(e,n,o,s,a);for(var l=Xh.m_v,c=Et.maxDistanceIterations,u=[],d=[],p=0,m=0;m<c;){p=Xh.m_count;for(var g=0;g<p;++g)u[g]=l[g].indexA,d[g]=l[g].indexB;if(Xh.solve(),Xh.m_count===3)break;var y=Xh.getSearchDirection();if(zg(y)<Ra*Ra)break;var _=l[Xh.m_count];_.indexA=n.getSupport(ay(RT,o.q,gi(RT,-1,y))),Si(_.wA,o,n.getVertex(_.indexA)),_.indexB=s.getSupport(ay(RT,a.q,y)),Si(_.wB,a,s.getVertex(_.indexB)),Ci(_.w,_.wB,_.wA),++m,++_r.gjkIters;for(var x=!1,g=0;g<p;++g)if(_.indexA===u[g]&&_.indexB===d[g]){x=!0;break}if(x)break;++Xh.m_count}if(_r.gjkMaxIters=eKe(_r.gjkMaxIters,m),Xh.getWitnessPoints(r.pointA,r.pointB),r.distance=she(r.pointA,r.pointB),r.iterations=m,Xh.writeCache(e),i.useRadii){var O=n.m_radius,S=s.m_radius;if(r.distance>O+S&&r.distance>Ra)r.distance-=O+S,Ci(BT,r.pointB,r.pointA),rc(BT),tc(r.pointA,O,BT),kb(r.pointB,S,BT);else{var w=Ci(RT,r.pointA,r.pointB);Ne(r.pointA,w),Ne(r.pointB,w),r.distance=0}}},h0=function(){function r(){this.m_vertices=[],this.m_count=0,this.m_radius=0}return r.prototype.recycle=function(){this.m_vertices.length=0,this.m_count=0,this.m_radius=0},r.prototype.getVertexCount=function(){return this.m_count},r.prototype.getVertex=function(e){return this.m_vertices[e]},r.prototype.getSupport=function(e){for(var i=-1,n=-1/0,s=0;s<this.m_count;++s){var o=ot(this.m_vertices[s],e);o>n&&(i=s,n=o)}return i},r.prototype.getSupportVertex=function(e){return this.m_vertices[this.getSupport(e)]},r.prototype.set=function(e,i){e.computeDistanceProxy(this,i)},r.prototype.setVertices=function(e,i,n){this.m_vertices=e,this.m_count=i,this.m_radius=n},r}(),$B=function(){function r(){this.wA=He(0,0),this.indexA=0,this.wB=He(0,0),this.indexB=0,this.w=He(0,0),this.a=0}return r.prototype.recycle=function(){this.indexA=0,this.indexB=0,hi(this.wA),hi(this.wB),hi(this.w),this.a=0},r.prototype.set=function(e){this.indexA=e.indexA,this.indexB=e.indexB,Ne(this.wA,e.wA),Ne(this.wB,e.wB),Ne(this.w,e.w),this.a=e.a},r}(),LT=He(0,0),J1=He(0,0),nKe=function(){function r(){this.m_v1=new $B,this.m_v2=new $B,this.m_v3=new $B,this.m_v=[this.m_v1,this.m_v2,this.m_v3]}return r.prototype.recycle=function(){this.m_v1.recycle(),this.m_v2.recycle(),this.m_v3.recycle(),this.m_count=0},r.prototype.toString=function(){return this.m_count===3?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():this.m_count===2?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():this.m_count===1?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},r.prototype.readCache=function(e,i,n,s,o){this.m_count=e.count;for(var a=0;a<this.m_count;++a){var l=this.m_v[a];l.indexA=e.indexA[a],l.indexB=e.indexB[a];var c=i.getVertex(l.indexA),u=s.getVertex(l.indexB);Si(l.wA,n,c),Si(l.wB,o,u),Ci(l.w,l.wB,l.wA),l.a=0}if(this.m_count>1){var d=e.metric,p=this.getMetric();(p<.5*d||2*d<p||p<Ra)&&(this.m_count=0)}if(this.m_count===0){var l=this.m_v[0];l.indexA=0,l.indexB=0;var c=i.getVertex(0),u=s.getVertex(0);Si(l.wA,n,c),Si(l.wB,o,u),Ci(l.w,l.wB,l.wA),l.a=1,this.m_count=1}},r.prototype.writeCache=function(e){e.metric=this.getMetric(),e.count=this.m_count;for(var i=0;i<this.m_count;++i)e.indexA[i]=this.m_v[i].indexA,e.indexB[i]=this.m_v[i].indexB},r.prototype.getSearchDirection=function(){var e=this.m_v1,i=this.m_v2;switch(this.m_v3,this.m_count){case 1:return Xs(LT,-e.w.x,-e.w.y);case 2:{Ci(Ja,i.w,e.w);var n=-Vi(Ja,e.w);return n>0?Xs(LT,-Ja.y,Ja.x):Xs(LT,Ja.y,-Ja.x)}default:return hi(LT)}},r.prototype.getClosestPoint=function(){var e=this.m_v1,i=this.m_v2;switch(this.m_v3,this.m_count){case 0:return hi(J1);case 1:return Ne(J1,e.w);case 2:return lr(J1,e.a,e.w,i.a,i.w);case 3:return hi(J1);default:return hi(J1)}},r.prototype.getWitnessPoints=function(e,i){var n=this.m_v1,s=this.m_v2,o=this.m_v3;switch(this.m_count){case 0:break;case 1:Ne(e,n.wA),Ne(i,n.wB);break;case 2:lr(e,n.a,n.wA,s.a,s.wA),lr(i,n.a,n.wB,s.a,s.wB);break;case 3:Fc(e,n.a,n.wA,s.a,s.wA,o.a,o.wA),Ne(i,e);break}},r.prototype.getMetric=function(){switch(this.m_count){case 0:return 0;case 1:return 0;case 2:return she(this.m_v1.w,this.m_v2.w);case 3:return Vi(Ci(tKe,this.m_v2.w,this.m_v1.w),Ci(iKe,this.m_v3.w,this.m_v1.w));default:return 0}},r.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break}},r.prototype.solve2=function(){var e=this.m_v1.w,i=this.m_v2.w;Ci(Ja,i,e);var n=-ot(e,Ja);if(n<=0){this.m_v1.a=1,this.m_count=1;return}var s=ot(i,Ja);if(s<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.set(this.m_v2);return}var o=1/(s+n);this.m_v1.a=s*o,this.m_v2.a=n*o,this.m_count=2},r.prototype.solve3=function(){var e=this.m_v1.w,i=this.m_v2.w,n=this.m_v3.w;Ci(Ja,i,e);var s=ot(e,Ja),o=ot(i,Ja),a=o,l=-s;Ci(DT,n,e);var c=ot(e,DT),u=ot(n,DT),d=u,p=-c;Ci(FB,n,i);var m=ot(i,FB),g=ot(n,FB),y=g,_=-m,x=Vi(Ja,DT),O=x*Vi(i,n),S=x*Vi(n,e),w=x*Vi(e,i);if(l<=0&&p<=0){this.m_v1.a=1,this.m_count=1;return}if(a>0&&l>0&&w<=0){var C=1/(a+l);this.m_v1.a=a*C,this.m_v2.a=l*C,this.m_count=2;return}if(d>0&&p>0&&S<=0){var M=1/(d+p);this.m_v1.a=d*M,this.m_v3.a=p*M,this.m_count=2,this.m_v2.set(this.m_v3);return}if(a<=0&&_<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.set(this.m_v2);return}if(d<=0&&y<=0){this.m_v3.a=1,this.m_count=1,this.m_v1.set(this.m_v3);return}if(y>0&&_>0&&O<=0){var P=1/(y+_);this.m_v2.a=y*P,this.m_v3.a=_*P,this.m_count=2,this.m_v1.set(this.m_v3);return}var R=1/(O+S+w);this.m_v1.a=O*R,this.m_v2.a=S*R,this.m_v3.a=w*R,this.m_count=3},r}(),Xh=new nKe,$m=new BF,cY=new LF,UB=new DF,che=function(r,e,i,n,s,o){return $m.recycle(),$m.proxyA.set(r,e),$m.proxyB.set(i,n),MM($m.transformA,s),MM($m.transformB,o),$m.useRadii=!0,UB.recycle(),cY.recycle(),C0(UB,cY,$m),UB.distance<10*Ra};C0.testOverlap=che;C0.Input=BF;C0.Output=DF;C0.Proxy=h0;C0.Cache=LF;(function(){function r(){this.proxyA=new h0,this.proxyB=new h0,this.transformA=sc.identity(),this.transformB=sc.identity(),this.translationB=X.zero()}return r.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.transformA.setIdentity(),this.transformB.setIdentity(),hi(this.translationB)},r})();var rKe=Math.abs,NT=Math.max,uhe=function(){function r(){this.proxyA=new h0,this.proxyB=new h0,this.sweepA=new __,this.sweepB=new __}return r.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.sweepA.recycle(),this.sweepB.recycle(),this.tMax=-1},r}(),ql;(function(r){r[r.e_unset=-1]="e_unset",r[r.e_unknown=0]="e_unknown",r[r.e_failed=1]="e_failed",r[r.e_overlapped=2]="e_overlapped",r[r.e_touching=3]="e_touching",r[r.e_separated=4]="e_separated"})(ql||(ql={}));var dhe=function(){function r(){this.state=ql.e_unset,this.t=-1}return r.prototype.recycle=function(){this.state=ql.e_unset,this.t=-1},r}();_r.toiTime=0;_r.toiMaxTime=0;_r.toiCalls=0;_r.toiIters=0;_r.toiMaxIters=0;_r.toiRootIters=0;_r.toiMaxRootIters=0;var Av=new BF,zB=new DF,XB=new LF,pa=O0(0,0,0),ma=O0(0,0,0),eb=He(0,0),Ec=He(0,0),Vl=He(0,0),ca=He(0,0),VT=He(0,0),FT=He(0,0),$T=He(0,0),UT=He(0,0),NF=function(r,e){var i=hY.now();++_r.toiCalls,r.state=ql.e_unknown,r.t=e.tMax;var n=e.proxyA,s=e.proxyB,o=e.sweepA,a=e.sweepB;o.normalize(),a.normalize();var l=e.tMax,c=n.m_radius+s.m_radius,u=NT(Et.linearSlop,c-3*Et.linearSlop),d=.25*Et.linearSlop,p=0,m=Et.maxTOIIterations,g=0;for(XB.recycle(),Av.proxyA.setVertices(n.m_vertices,n.m_count,n.m_radius),Av.proxyB.setVertices(s.m_vertices,s.m_count,s.m_radius),Av.useRadii=!1;;){if(o.getTransform(pa,p),a.getTransform(ma,p),MM(Av.transformA,pa),MM(Av.transformB,ma),C0(zB,XB,Av),zB.distance<=0){r.state=ql.e_overlapped,r.t=0;break}if(zB.distance<u+d){r.state=ql.e_touching,r.t=p;break}tb.initialize(XB,n,o,s,a,p);for(var y=!1,_=l,x=0;;){var O=tb.findMinSeparation(_);if(O>u+d){r.state=ql.e_separated,r.t=l,y=!0;break}if(O>u-d){p=_;break}var S=tb.evaluate(p);if(S<u-d){r.state=ql.e_failed,r.t=p,y=!0;break}if(S<=u+d){r.state=ql.e_touching,r.t=p,y=!0;break}for(var w=0,C=p,M=_;;){var P=void 0;w&1?P=C+(u-S)*(M-C)/(O-S):P=.5*(C+M),++w,++_r.toiRootIters;var R=tb.evaluate(P);if(rKe(R-u)<d){_=P;break}if(R>u?(C=P,S=R):(M=P,O=R),w===50)break}if(_r.toiMaxRootIters=NT(_r.toiMaxRootIters,w),++x,x===Et.maxPolygonVertices)break}if(++g,++_r.toiIters,y)break;if(g===m){r.state=ql.e_failed,r.t=p;break}}_r.toiMaxIters=NT(_r.toiMaxIters,g);var k=hY.diff(i);_r.toiMaxTime=NT(_r.toiMaxTime,k),_r.toiTime+=k,tb.recycle()},$c;(function(r){r[r.e_unset=-1]="e_unset",r[r.e_points=1]="e_points",r[r.e_faceA=2]="e_faceA",r[r.e_faceB=3]="e_faceB"})($c||($c={}));var sKe=function(){function r(){this.m_proxyA=null,this.m_proxyB=null,this.m_sweepA=null,this.m_sweepB=null,this.m_type=$c.e_unset,this.m_localPoint=He(0,0),this.m_axis=He(0,0),this.indexA=-1,this.indexB=-1}return r.prototype.recycle=function(){this.m_proxyA=null,this.m_proxyB=null,this.m_sweepA=null,this.m_sweepB=null,this.m_type=$c.e_unset,hi(this.m_localPoint),hi(this.m_axis),this.indexA=-1,this.indexB=-1},r.prototype.initialize=function(e,i,n,s,o,a){var l=e.count;if(this.m_proxyA=i,this.m_proxyB=s,this.m_sweepA=n,this.m_sweepB=o,this.m_sweepA.getTransform(pa,a),this.m_sweepB.getTransform(ma,a),l===1){this.m_type=$c.e_points;var c=this.m_proxyA.getVertex(e.indexA[0]),u=this.m_proxyB.getVertex(e.indexB[0]);Si(Ec,pa,c),Si(Vl,ma,u),Ci(this.m_axis,Vl,Ec);var d=XZe(this.m_axis);return d}else if(e.indexA[0]===e.indexA[1]){this.m_type=$c.e_faceB;var p=s.getVertex(e.indexB[0]),m=s.getVertex(e.indexB[1]);Ug(this.m_axis,Ci(eb,m,p),1),rc(this.m_axis),dh(ca,ma.q,this.m_axis),lr(this.m_localPoint,.5,p,.5,m),Si(Vl,ma,this.m_localPoint);var g=i.getVertex(e.indexA[0]),y=sc.mulVec2(pa,g),d=ot(y,ca)-ot(Vl,ca);return d<0&&(CO(this.m_axis),d=-d),d}else{this.m_type=$c.e_faceA;var _=this.m_proxyA.getVertex(e.indexA[0]),x=this.m_proxyA.getVertex(e.indexA[1]);Ug(this.m_axis,Ci(eb,x,_),1),rc(this.m_axis),dh(ca,pa.q,this.m_axis),lr(this.m_localPoint,.5,_,.5,x),Si(Ec,pa,this.m_localPoint);var O=this.m_proxyB.getVertex(e.indexB[0]);Si(Vl,ma,O);var d=ot(Vl,ca)-ot(Ec,ca);return d<0&&(CO(this.m_axis),d=-d),d}},r.prototype.compute=function(e,i){switch(this.m_sweepA.getTransform(pa,i),this.m_sweepB.getTransform(ma,i),this.m_type){case $c.e_points:{e&&(ay(VT,pa.q,this.m_axis),ay(FT,ma.q,gi(eb,-1,this.m_axis)),this.indexA=this.m_proxyA.getSupport(VT),this.indexB=this.m_proxyB.getSupport(FT)),Ne($T,this.m_proxyA.getVertex(this.indexA)),Ne(UT,this.m_proxyB.getVertex(this.indexB)),Si(Ec,pa,$T),Si(Vl,ma,UT);var n=ot(Vl,this.m_axis)-ot(Ec,this.m_axis);return n}case $c.e_faceA:{dh(ca,pa.q,this.m_axis),Si(Ec,pa,this.m_localPoint),e&&(ay(FT,ma.q,gi(eb,-1,ca)),this.indexA=-1,this.indexB=this.m_proxyB.getSupport(FT)),Ne(UT,this.m_proxyB.getVertex(this.indexB)),Si(Vl,ma,UT);var n=ot(Vl,ca)-ot(Ec,ca);return n}case $c.e_faceB:{dh(ca,ma.q,this.m_axis),Si(Vl,ma,this.m_localPoint),e&&(ay(VT,pa.q,gi(eb,-1,ca)),this.indexB=-1,this.indexA=this.m_proxyA.getSupport(VT)),Ne($T,this.m_proxyA.getVertex(this.indexA)),Si(Ec,pa,$T);var n=ot(Ec,ca)-ot(Vl,ca);return n}default:return e&&(this.indexA=-1,this.indexB=-1),0}},r.prototype.findMinSeparation=function(e){return this.compute(!0,e)},r.prototype.evaluate=function(e){return this.compute(!1,e)},r}(),tb=new sKe;NF.Input=uhe;NF.Output=dhe;var uY=Math.abs,dY=Math.sqrt,zT=Math.min,VF=function(){function r(){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}return r.prototype.reset=function(e){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=e,this.inv_dt=e==0?0:1/e,this.dtRatio=e*this.inv_dt0},r}(),Ev=new VF,Gu=He(0,0),qs=He(0,0),XT=He(0,0),Mv=new uhe,WB=new dhe,fY=new __,pY=new __,mY=new __,oKe=function(){function r(e){this.contact=e,this.normals=[],this.tangents=[]}return r.prototype.recycle=function(){this.normals.length=0,this.tangents.length=0},Object.defineProperty(r.prototype,"normalImpulses",{get:function(){var e=this.contact,i=this.normals;i.length=0;for(var n=0;n<e.v_points.length;++n)i.push(e.v_points[n].normalImpulse);return i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tangentImpulses",{get:function(){var e=this.contact,i=this.tangents;i.length=0;for(var n=0;n<e.v_points.length;++n)i.push(e.v_points[n].tangentImpulse);return i},enumerable:!1,configurable:!0}),r}(),fhe=function(){function r(e){this.m_world=e,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}return r.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},r.prototype.addBody=function(e){this.m_bodies.push(e)},r.prototype.addContact=function(e){this.m_contacts.push(e)},r.prototype.addJoint=function(e){this.m_joints.push(e)},r.prototype.solveWorld=function(e){for(var i=this.m_world,n=i.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1;for(var s=i.m_contactList;s;s=s.m_next)s.m_islandFlag=!1;for(var o=i.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;for(var a=this.m_stack,l=i.m_bodyList;l;l=l.m_next)if(!l.m_islandFlag&&!(l.isAwake()==!1||l.isActive()==!1)&&!l.isStatic()){for(this.clear(),a.push(l),l.m_islandFlag=!0;a.length>0;){var n=a.pop();if(this.addBody(n),n.m_awakeFlag=!0,!n.isStatic()){for(var c=n.m_contactList;c;c=c.next){var u=c.contact;if(!u.m_islandFlag&&!(u.isEnabled()==!1||u.isTouching()==!1)){var d=u.m_fixtureA.m_isSensor,p=u.m_fixtureB.m_isSensor;if(!(d||p)){this.addContact(u),u.m_islandFlag=!0;var m=c.other;m.m_islandFlag||(a.push(m),m.m_islandFlag=!0)}}}for(var g=n.m_jointList;g;g=g.next)if(g.joint.m_islandFlag!=!0){var m=g.other;m.isActive()!=!1&&(this.addJoint(g.joint),g.joint.m_islandFlag=!0,!m.m_islandFlag&&(a.push(m),m.m_islandFlag=!0))}}}this.solveIsland(e);for(var y=0;y<this.m_bodies.length;++y){var n=this.m_bodies[y];n.isStatic()&&(n.m_islandFlag=!1)}}},r.prototype.solveIsland=function(e){for(var i=this.m_world,n=i.m_gravity,s=i.m_allowSleep,o=e.dt,a=0;a<this.m_bodies.length;++a){var l=this.m_bodies[a];Ne(Gu,l.m_sweep.c);var c=l.m_sweep.a;Ne(qs,l.m_linearVelocity);var u=l.m_angularVelocity;Ne(l.m_sweep.c0,l.m_sweep.c),l.m_sweep.a0=l.m_sweep.a,l.isDynamic()&&(tc(qs,o*l.m_gravityScale,n),tc(qs,o*l.m_invMass,l.m_force),u+=o*l.m_invI*l.m_torque,gi(qs,1/(1+o*l.m_linearDamping),qs),u*=1/(1+o*l.m_angularDamping)),Ne(l.c_position.c,Gu),l.c_position.a=c,Ne(l.c_velocity.v,qs),l.c_velocity.w=u}for(var a=0;a<this.m_contacts.length;++a){var d=this.m_contacts[a];d.initConstraint(e)}for(var a=0;a<this.m_contacts.length;++a){var d=this.m_contacts[a];d.initVelocityConstraint(e)}if(e.warmStarting)for(var a=0;a<this.m_contacts.length;++a){var d=this.m_contacts[a];d.warmStartConstraint(e)}for(var a=0;a<this.m_joints.length;++a){var p=this.m_joints[a];p.initVelocityConstraints(e)}for(var a=0;a<e.velocityIterations;++a){for(var m=0;m<this.m_joints.length;++m){var p=this.m_joints[m];p.solveVelocityConstraints(e)}for(var m=0;m<this.m_contacts.length;++m){var d=this.m_contacts[m];d.solveVelocityConstraint(e)}}for(var a=0;a<this.m_contacts.length;++a){var d=this.m_contacts[a];d.storeConstraintImpulses(e)}for(var a=0;a<this.m_bodies.length;++a){var l=this.m_bodies[a];Ne(Gu,l.c_position.c);var c=l.c_position.a;Ne(qs,l.c_velocity.v);var u=l.c_velocity.w;gi(XT,o,qs);var g=zg(XT);if(g>Et.maxTranslationSquared){var y=Et.maxTranslation/dY(g);Kj(qs,y)}var _=o*u;if(_*_>Et.maxRotationSquared){var y=Et.maxRotation/uY(_);u*=y}tc(Gu,o,qs),c+=o*u,Ne(l.c_position.c,Gu),l.c_position.a=c,Ne(l.c_velocity.v,qs),l.c_velocity.w=u}for(var x=!1,a=0;a<e.positionIterations;++a){for(var O=0,m=0;m<this.m_contacts.length;++m){var d=this.m_contacts[m],S=d.solvePositionConstraint(e);O=zT(O,S)}for(var w=O>=-3*Et.linearSlop,C=!0,m=0;m<this.m_joints.length;++m){var p=this.m_joints[m],M=p.solvePositionConstraints(e);C=C&&M}if(w&&C){x=!0;break}}for(var a=0;a<this.m_bodies.length;++a){var l=this.m_bodies[a];Ne(l.m_sweep.c,l.c_position.c),l.m_sweep.a=l.c_position.a,Ne(l.m_linearVelocity,l.c_velocity.v),l.m_angularVelocity=l.c_velocity.w,l.synchronizeTransform()}if(this.postSolveIsland(),s){for(var P=1/0,R=Et.linearSleepToleranceSqr,k=Et.angularSleepToleranceSqr,a=0;a<this.m_bodies.length;++a){var l=this.m_bodies[a];l.isStatic()||(l.m_autoSleepFlag==!1||l.m_angularVelocity*l.m_angularVelocity>k||zg(l.m_linearVelocity)>R?(l.m_sleepTime=0,P=0):(l.m_sleepTime+=o,P=zT(P,l.m_sleepTime)))}if(P>=Et.timeToSleep&&x)for(var a=0;a<this.m_bodies.length;++a){var l=this.m_bodies[a];l.setAwake(!1)}}},r.prototype.solveWorldTOI=function(e){var i=this.m_world;if(i.m_stepComplete){for(var n=i.m_bodyList;n;n=n.m_next)n.m_islandFlag=!1,n.m_sweep.alpha0=0;for(var s=i.m_contactList;s;s=s.m_next)s.m_toiFlag=!1,s.m_islandFlag=!1,s.m_toiCount=0,s.m_toi=1}for(;;){for(var o=null,a=1,l=i.m_contactList;l;l=l.m_next)if(l.isEnabled()!=!1&&!(l.m_toiCount>Et.maxSubSteps)){var c=1;if(l.m_toiFlag)c=l.m_toi;else{var u=l.getFixtureA(),d=l.getFixtureB();if(u.isSensor()||d.isSensor())continue;var p=u.getBody(),m=d.getBody(),g=p.isAwake()&&!p.isStatic(),y=m.isAwake()&&!m.isStatic();if(g==!1&&y==!1)continue;var _=p.isBullet()||!p.isDynamic(),x=m.isBullet()||!m.isDynamic();if(_==!1&&x==!1)continue;var O=p.m_sweep.alpha0;p.m_sweep.alpha0<m.m_sweep.alpha0?(O=m.m_sweep.alpha0,p.m_sweep.advance(O)):m.m_sweep.alpha0<p.m_sweep.alpha0&&(O=p.m_sweep.alpha0,m.m_sweep.advance(O));var S=l.getChildIndexA(),w=l.getChildIndexB();p.m_sweep,m.m_sweep,Mv.proxyA.set(u.getShape(),S),Mv.proxyB.set(d.getShape(),w),Mv.sweepA.set(p.m_sweep),Mv.sweepB.set(m.m_sweep),Mv.tMax=1,NF(WB,Mv);var C=WB.t;WB.state==ql.e_touching?c=zT(O+(1-O)*C,1):c=1,l.m_toi=c,l.m_toiFlag=!0}c<a&&(o=l,a=c)}if(o==null||1-10*Ra<a){i.m_stepComplete=!0;break}var M=o.getFixtureA(),P=o.getFixtureB(),R=M.getBody(),k=P.getBody();if(pY.set(R.m_sweep),mY.set(k.m_sweep),R.advance(a),k.advance(a),o.update(i),o.m_toiFlag=!1,++o.m_toiCount,o.isEnabled()==!1||o.isTouching()==!1){o.setEnabled(!1),R.m_sweep.set(pY),k.m_sweep.set(mY),R.synchronizeTransform(),k.synchronizeTransform();continue}R.setAwake(!0),k.setAwake(!0),this.clear(),this.addBody(R),this.addBody(k),this.addContact(o),R.m_islandFlag=!0,k.m_islandFlag=!0,o.m_islandFlag=!0;for(var I=[R,k],A=0;A<I.length;++A){var D=I[A];if(D.isDynamic())for(var V=D.m_contactList;V;V=V.next){var B=V.contact;if(!B.m_islandFlag){var L=V.other;if(!(L.isDynamic()&&!D.isBullet()&&!L.isBullet())){var F=B.m_fixtureA.m_isSensor,$=B.m_fixtureB.m_isSensor;if(!(F||$)){if(fY.set(L.m_sweep),L.m_islandFlag==!1&&L.advance(a),B.update(i),B.isEnabled()==!1||B.isTouching()==!1){L.m_sweep.set(fY),L.synchronizeTransform();continue}B.m_islandFlag=!0,this.addContact(B),!L.m_islandFlag&&(L.m_islandFlag=!0,L.isStatic()||L.setAwake(!0),this.addBody(L))}}}}}Ev.reset((1-a)*e.dt),Ev.dtRatio=1,Ev.positionIterations=20,Ev.velocityIterations=e.velocityIterations,Ev.warmStarting=!1,this.solveIslandTOI(Ev,R,k);for(var A=0;A<this.m_bodies.length;++A){var D=this.m_bodies[A];if(D.m_islandFlag=!1,!!D.isDynamic()){D.synchronizeFixtures();for(var V=D.m_contactList;V;V=V.next)V.contact.m_toiFlag=!1,V.contact.m_islandFlag=!1}}if(i.findNewContacts(),i.m_subStepping){i.m_stepComplete=!1;break}}},r.prototype.solveIslandTOI=function(e,i,n){for(var d=0;d<this.m_bodies.length;++d){var s=this.m_bodies[d];Ne(s.c_position.c,s.m_sweep.c),s.c_position.a=s.m_sweep.a,Ne(s.c_velocity.v,s.m_linearVelocity),s.c_velocity.w=s.m_angularVelocity}for(var d=0;d<this.m_contacts.length;++d){var o=this.m_contacts[d];o.initConstraint(e)}for(var d=0;d<e.positionIterations;++d){for(var a=0,l=0;l<this.m_contacts.length;++l){var o=this.m_contacts[l],c=o.solvePositionConstraintTOI(e,i,n);a=zT(a,c)}var u=a>=-1.5*Et.linearSlop;if(u)break}var d;Ne(i.m_sweep.c0,i.c_position.c),i.m_sweep.a0=i.c_position.a,Ne(n.m_sweep.c0,n.c_position.c),n.m_sweep.a0=n.c_position.a;for(var d=0;d<this.m_contacts.length;++d){var o=this.m_contacts[d];o.initVelocityConstraint(e)}for(var d=0;d<e.velocityIterations;++d)for(var l=0;l<this.m_contacts.length;++l){var o=this.m_contacts[l];o.solveVelocityConstraint(e)}for(var p=e.dt,d=0;d<this.m_bodies.length;++d){var s=this.m_bodies[d];Ne(Gu,s.c_position.c);var m=s.c_position.a;Ne(qs,s.c_velocity.v);var g=s.c_velocity.w;gi(XT,p,qs);var y=zg(XT);if(y>Et.maxTranslationSquared){var _=Et.maxTranslation/dY(y);Kj(qs,_)}var x=p*g;if(x*x>Et.maxRotationSquared){var _=Et.maxRotation/uY(x);g*=_}tc(Gu,p,qs),m+=p*g,Ne(s.c_position.c,Gu),s.c_position.a=m,Ne(s.c_velocity.v,qs),s.c_velocity.w=g,Ne(s.m_sweep.c,Gu),s.m_sweep.a=m,Ne(s.m_linearVelocity,qs),s.m_angularVelocity=g,s.synchronizeTransform()}this.postSolveIsland()},r.prototype.postSolveIsland=function(){for(var e=0;e<this.m_contacts.length;++e){var i=this.m_contacts[e];this.m_world.postSolve(i,i.m_impulse)}},r}();fhe.TimeStep=VF;var oc=function(){function r(e,i,n,s){typeof e=="object"&&e!==null?(this.ex=X.clone(e),this.ey=X.clone(i)):typeof e=="number"?(this.ex=X.neo(e,n),this.ey=X.neo(i,s)):(this.ex=X.zero(),this.ey=X.zero())}return r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(e){return e===null||typeof e>"u"?!1:X.isValid(e.ex)&&X.isValid(e.ey)},r.assert=function(e){},r.prototype.set=function(e,i,n,s){typeof e=="number"&&typeof i=="number"&&typeof n=="number"&&typeof s=="number"?(this.ex.setNum(e,n),this.ey.setNum(i,s)):typeof e=="object"&&typeof i=="object"?(this.ex.setVec2(e),this.ey.setVec2(i)):typeof e=="object"&&(this.ex.setVec2(e.ex),this.ey.setVec2(e.ey))},r.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},r.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},r.prototype.getInverse=function(){var e=this.ex.x,i=this.ey.x,n=this.ex.y,s=this.ey.y,o=e*s-i*n;o!==0&&(o=1/o);var a=new r;return a.ex.x=o*s,a.ey.x=-o*i,a.ex.y=-o*n,a.ey.y=o*e,a},r.prototype.solve=function(e){var i=this.ex.x,n=this.ey.x,s=this.ex.y,o=this.ey.y,a=i*o-n*s;a!==0&&(a=1/a);var l=X.zero();return l.x=a*(o*e.x-n*e.y),l.y=a*(i*e.y-s*e.x),l},r.mul=function(e,i){if(i&&"x"in i&&"y"in i){var n=e.ex.x*i.x+e.ey.x*i.y,s=e.ex.y*i.x+e.ey.y*i.y;return X.neo(n,s)}else if(i&&"ex"in i&&"ey"in i){var o=e.ex.x*i.ex.x+e.ey.x*i.ex.y,a=e.ex.x*i.ey.x+e.ey.x*i.ey.y,l=e.ex.y*i.ex.x+e.ey.y*i.ex.y,c=e.ex.y*i.ey.x+e.ey.y*i.ey.y;return new r(o,a,l,c)}},r.mulVec2=function(e,i){var n=e.ex.x*i.x+e.ey.x*i.y,s=e.ex.y*i.x+e.ey.y*i.y;return X.neo(n,s)},r.mulMat22=function(e,i){var n=e.ex.x*i.ex.x+e.ey.x*i.ex.y,s=e.ex.x*i.ey.x+e.ey.x*i.ey.y,o=e.ex.y*i.ex.x+e.ey.y*i.ex.y,a=e.ex.y*i.ey.x+e.ey.y*i.ey.y;return new r(n,s,o,a)},r.mulT=function(e,i){if(i&&"x"in i&&"y"in i)return X.neo(X.dot(i,e.ex),X.dot(i,e.ey));if(i&&"ex"in i&&"ey"in i){var n=X.neo(X.dot(e.ex,i.ex),X.dot(e.ey,i.ex)),s=X.neo(X.dot(e.ex,i.ey),X.dot(e.ey,i.ey));return new r(n,s)}},r.mulTVec2=function(e,i){return X.neo(X.dot(i,e.ex),X.dot(i,e.ey))},r.mulTMat22=function(e,i){var n=X.neo(X.dot(e.ex,i.ex),X.dot(e.ey,i.ex)),s=X.neo(X.dot(e.ex,i.ey),X.dot(e.ey,i.ey));return new r(n,s)},r.abs=function(e){return new r(X.abs(e.ex),X.abs(e.ey))},r.add=function(e,i){return new r(X.add(e.ex,i.ex),X.add(e.ey,i.ey))},r}(),aKe=Math.sqrt,GB=He(0,0),HB=He(0,0),ib=He(0,0),Hu=He(0,0),Qu=He(0,0),QB=He(0,0),WT=He(0,0),kf=He(0,0),kr;(function(r){r[r.e_unset=-1]="e_unset",r[r.e_circles=0]="e_circles",r[r.e_faceA=1]="e_faceA",r[r.e_faceB=2]="e_faceB"})(kr||(kr={}));var cn;(function(r){r[r.e_unset=-1]="e_unset",r[r.e_vertex=0]="e_vertex",r[r.e_face=1]="e_face"})(cn||(cn={}));var _g;(function(r){r[r.nullState=0]="nullState",r[r.addState=1]="addState",r[r.persistState=2]="persistState",r[r.removeState=3]="removeState"})(_g||(_g={}));var Tl=function(){function r(){this.v=He(0,0),this.id=new mhe}return r.prototype.set=function(e){Ne(this.v,e.v),this.id.set(e.id)},r.prototype.recycle=function(){hi(this.v),this.id.recycle()},r}(),phe=function(){function r(){this.localNormal=He(0,0),this.localPoint=He(0,0),this.points=[new gY,new gY],this.pointCount=0}return r.prototype.set=function(e){this.type=e.type,Ne(this.localNormal,e.localNormal),Ne(this.localPoint,e.localPoint),this.pointCount=e.pointCount,this.points[0].set(e.points[0]),this.points[1].set(e.points[1])},r.prototype.recycle=function(){this.type=kr.e_unset,hi(this.localNormal),hi(this.localPoint),this.pointCount=0,this.points[0].recycle(),this.points[1].recycle()},r.prototype.getWorldManifold=function(e,i,n,s,o){if(this.pointCount==0)return e;e=e||new ghe,e.pointCount=this.pointCount;var a=e.normal,l=e.points,c=e.separations;switch(this.type){case kr.e_circles:{Xs(a,1,0);var u=this.points[0];Si(GB,i,this.localPoint),Si(HB,s,u.localPoint),Ci(QB,HB,GB);var d=zg(QB);if(d>Ra*Ra){var p=aKe(d);gi(a,1/p,QB)}lr(Hu,1,GB,n,a),lr(Qu,1,HB,-o,a),lr(l[0],.5,Hu,.5,Qu),c[0]=ot(Ci(ib,Qu,Hu),a);break}case kr.e_faceA:{dh(a,i.q,this.localNormal),Si(WT,i,this.localPoint);for(var m=0;m<this.pointCount;++m){var u=this.points[m];Si(kf,s,u.localPoint),lr(Hu,1,kf,n-ot(Ci(ib,kf,WT),a),a),lr(Qu,1,kf,-o,a),lr(l[m],.5,Hu,.5,Qu),c[m]=ot(Ci(ib,Qu,Hu),a)}break}case kr.e_faceB:{dh(a,s.q,this.localNormal),Si(WT,s,this.localPoint);for(var m=0;m<this.pointCount;++m){var u=this.points[m];Si(kf,i,u.localPoint),lr(Qu,1,kf,o-ot(Ci(ib,kf,WT),a),a),lr(Hu,1,kf,-n,a),lr(l[m],.5,Hu,.5,Qu),c[m]=ot(Ci(ib,Hu,Qu),a)}CO(a);break}}return e},r.clipSegmentToLine=TO,r.ClipVertex=Tl,r.getPointStates=lKe,r.PointState=_g,r}(),gY=function(){function r(){this.localPoint=He(0,0),this.normalImpulse=0,this.tangentImpulse=0,this.id=new mhe}return r.prototype.set=function(e){Ne(this.localPoint,e.localPoint),this.normalImpulse=e.normalImpulse,this.tangentImpulse=e.tangentImpulse,this.id.set(e.id)},r.prototype.recycle=function(){hi(this.localPoint),this.normalImpulse=0,this.tangentImpulse=0,this.id.recycle()},r}(),mhe=function(){function r(){this.key=-1,this.indexA=-1,this.indexB=-1,this.typeA=cn.e_unset,this.typeB=cn.e_unset}return r.prototype.setFeatures=function(e,i,n,s){this.indexA=e,this.indexB=n,this.typeA=i,this.typeB=s,this.key=this.indexA+this.indexB*4+this.typeA*16+this.typeB*64},r.prototype.set=function(e){this.indexA=e.indexA,this.indexB=e.indexB,this.typeA=e.typeA,this.typeB=e.typeB,this.key=this.indexA+this.indexB*4+this.typeA*16+this.typeB*64},r.prototype.swapFeatures=function(){var e=this.indexA,i=this.indexB,n=this.typeA,s=this.typeB;this.indexA=i,this.indexB=e,this.typeA=s,this.typeB=n,this.key=this.indexA+this.indexB*4+this.typeA*16+this.typeB*64},r.prototype.recycle=function(){this.indexA=0,this.indexB=0,this.typeA=cn.e_unset,this.typeB=cn.e_unset,this.key=-1},r}(),ghe=function(){function r(){this.normal=He(0,0),this.points=[He(0,0),He(0,0)],this.separations=[0,0],this.pointCount=0}return r.prototype.recycle=function(){hi(this.normal),hi(this.points[0]),hi(this.points[1]),this.separations[0]=0,this.separations[1]=0,this.pointCount=0},r}();function lKe(r,e,i,n){for(var s=0;s<i.pointCount;++s){var o=i.points[s].id;r[s]=_g.removeState;for(var a=0;a<n.pointCount;++a)if(n.points[a].id.key===o.key){r[s]=_g.persistState;break}}for(var s=0;s<n.pointCount;++s){var o=n.points[s].id;e[s]=_g.addState;for(var a=0;a<i.pointCount;++a)if(i.points[a].id.key===o.key){e[s]=_g.persistState;break}}}function TO(r,e,i,n,s){var o=0,a=ot(i,e[0].v)-n,l=ot(i,e[1].v)-n;if(a<=0&&r[o++].set(e[0]),l<=0&&r[o++].set(e[1]),a*l<0){var c=a/(a-l);lr(r[o].v,1-c,e[0].v,c,e[1].v),r[o].id.setFeatures(s,cn.e_vertex,e[0].id.indexB,cn.e_face),++o}return o}var hKe=Math.sqrt,cKe=Math.max,uKe=Math.min,vY=new ow({create:function(){return new vu},release:function(r){r.recycle()}}),Pv=new phe,GT=new ghe,yY=function(){function r(e){this.prev=null,this.next=null,this.other=null,this.contact=e}return r.prototype.recycle=function(){this.prev=null,this.next=null,this.other=null},r}();function _Y(r,e){return hKe(r*e)}function xY(r,e){return r>e?r:e}var Um=[],bY=function(){function r(){this.rA=He(0,0),this.rB=He(0,0),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}return r.prototype.recycle=function(){hi(this.rA),hi(this.rB),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0},r}(),ju=He(0,0),Nr=He(0,0),Yu=He(0,0),Vr=He(0,0),If=He(0,0),zm=O0(0,0,0),Xm=O0(0,0,0),HT=He(0,0),QT=He(0,0),kv=He(0,0),jT=He(0,0),jB=He(0,0),YB=He(0,0),ts=He(0,0),An=He(0,0),nb=He(0,0),Fl=He(0,0),Iv=He(0,0),Rv=He(0,0),el=He(0,0),qu=He(0,0),Hn=He(0,0),$l=He(0,0),is=He(0,0),ns=He(0,0),Mc=He(0,0),vu=function(){function r(){this.m_nodeA=new yY(this),this.m_nodeB=new yY(this),this.m_fixtureA=null,this.m_fixtureB=null,this.m_indexA=-1,this.m_indexB=-1,this.m_evaluateFcn=null,this.m_manifold=new phe,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_impulse=new oKe(this),this.v_points=[new bY,new bY],this.v_normal=He(0,0),this.v_normalMass=new oc,this.v_K=new oc,this.v_pointCount=0,this.v_tangentSpeed=0,this.v_friction=0,this.v_restitution=0,this.v_invMassA=0,this.v_invMassB=0,this.v_invIA=0,this.v_invIB=0,this.p_localPoints=[He(0,0),He(0,0)],this.p_localNormal=He(0,0),this.p_localPoint=He(0,0),this.p_localCenterA=He(0,0),this.p_localCenterB=He(0,0),this.p_type=kr.e_unset,this.p_radiusA=0,this.p_radiusB=0,this.p_pointCount=0,this.p_invMassA=0,this.p_invMassB=0,this.p_invIA=0,this.p_invIB=0}return r.prototype.initialize=function(e,i,n,s,o){this.m_fixtureA=e,this.m_fixtureB=n,this.m_indexA=i,this.m_indexB=s,this.m_evaluateFcn=o,this.m_friction=_Y(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=xY(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},r.prototype.recycle=function(){this.m_nodeA.recycle(),this.m_nodeB.recycle(),this.m_fixtureA=null,this.m_fixtureB=null,this.m_indexA=-1,this.m_indexB=-1,this.m_evaluateFcn=null,this.m_manifold.recycle(),this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_impulse.recycle();for(var e=0,i=this.v_points;e<i.length;e++){var n=i[e];n.recycle()}hi(this.v_normal),this.v_normalMass.setZero(),this.v_K.setZero(),this.v_pointCount=0,this.v_tangentSpeed=0,this.v_friction=0,this.v_restitution=0,this.v_invMassA=0,this.v_invMassB=0,this.v_invIA=0,this.v_invIB=0;for(var s=0,o=this.p_localPoints;s<o.length;s++){var a=o[s];hi(a)}hi(this.p_localNormal),hi(this.p_localPoint),hi(this.p_localCenterA),hi(this.p_localCenterB),this.p_type=kr.e_unset,this.p_radiusA=0,this.p_radiusB=0,this.p_pointCount=0,this.p_invMassA=0,this.p_invMassB=0,this.p_invIA=0,this.p_invIB=0},r.prototype.initConstraint=function(e){var i=this.m_fixtureA,n=this.m_fixtureB;if(!(i===null||n===null)){var s=i.m_body,o=n.m_body;if(!(s===null||o===null)){var a=i.m_shape,l=n.m_shape;if(!(a===null||l===null)){var c=this.m_manifold,u=c.pointCount;this.v_invMassA=s.m_invMass,this.v_invMassB=o.m_invMass,this.v_invIA=s.m_invI,this.v_invIB=o.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=u,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=s.m_invMass,this.p_invMassB=o.m_invMass,this.p_invIA=s.m_invI,this.p_invIB=o.m_invI,Ne(this.p_localCenterA,s.m_sweep.localCenter),Ne(this.p_localCenterB,o.m_sweep.localCenter),this.p_radiusA=a.m_radius,this.p_radiusB=l.m_radius,this.p_type=c.type,Ne(this.p_localNormal,c.localNormal),Ne(this.p_localPoint,c.localPoint),this.p_pointCount=u;for(var d=0;d<Et.maxManifoldPoints;++d)this.v_points[d].recycle(),hi(this.p_localPoints[d]);for(var d=0;d<u;++d){var p=c.points[d],m=this.v_points[d];e.warmStarting&&(m.normalImpulse=e.dtRatio*p.normalImpulse,m.tangentImpulse=e.dtRatio*p.tangentImpulse),Ne(this.p_localPoints[d],p.localPoint)}}}}},r.prototype.getManifold=function(){return this.m_manifold},r.prototype.getWorldManifold=function(e){var i=this.m_fixtureA,n=this.m_fixtureB;if(!(i===null||n===null)){var s=i.m_body,o=n.m_body;if(!(s===null||o===null)){var a=i.m_shape,l=n.m_shape;if(!(a===null||l===null))return this.m_manifold.getWorldManifold(e,s.getTransform(),a.m_radius,o.getTransform(),l.m_radius)}}},r.prototype.setEnabled=function(e){this.m_enabledFlag=!!e},r.prototype.isEnabled=function(){return this.m_enabledFlag},r.prototype.isTouching=function(){return this.m_touchingFlag},r.prototype.getNext=function(){return this.m_next},r.prototype.getFixtureA=function(){return this.m_fixtureA},r.prototype.getFixtureB=function(){return this.m_fixtureB},r.prototype.getChildIndexA=function(){return this.m_indexA},r.prototype.getChildIndexB=function(){return this.m_indexB},r.prototype.flagForFiltering=function(){this.m_filterFlag=!0},r.prototype.setFriction=function(e){this.m_friction=e},r.prototype.getFriction=function(){return this.m_friction},r.prototype.resetFriction=function(){var e=this.m_fixtureA,i=this.m_fixtureB;e===null||i===null||(this.m_friction=_Y(e.m_friction,i.m_friction))},r.prototype.setRestitution=function(e){this.m_restitution=e},r.prototype.getRestitution=function(){return this.m_restitution},r.prototype.resetRestitution=function(){var e=this.m_fixtureA,i=this.m_fixtureB;e===null||i===null||(this.m_restitution=xY(e.m_restitution,i.m_restitution))},r.prototype.setTangentSpeed=function(e){this.m_tangentSpeed=e},r.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},r.prototype.evaluate=function(e,i,n){var s=this.m_fixtureA,o=this.m_fixtureB;s===null||o===null||this.m_evaluateFcn(e,i,s,this.m_indexA,n,o,this.m_indexB)},r.prototype.update=function(e){var i=this.m_fixtureA,n=this.m_fixtureB;if(!(i===null||n===null)){var s=i.m_body,o=n.m_body;if(!(s===null||o===null)){var a=i.m_shape,l=n.m_shape;if(!(a===null||l===null)){this.m_enabledFlag=!0;var c=!1,u=this.m_touchingFlag,d=i.m_isSensor,p=n.m_isSensor,m=d||p,g=s.m_xf,y=o.m_xf;if(m)c=che(a,this.m_indexA,l,this.m_indexB,g,y),this.m_manifold.pointCount=0;else{Pv.recycle(),Pv.set(this.m_manifold),this.m_manifold.recycle(),this.evaluate(this.m_manifold,g,y),c=this.m_manifold.pointCount>0;for(var _=0;_<this.m_manifold.pointCount;++_){var x=this.m_manifold.points[_];x.normalImpulse=0,x.tangentImpulse=0;for(var O=0;O<Pv.pointCount;++O){var S=Pv.points[O];if(S.id.key===x.id.key){x.normalImpulse=S.normalImpulse,x.tangentImpulse=S.tangentImpulse;break}}}c!==u&&(s.setAwake(!0),o.setAwake(!0))}this.m_touchingFlag=c;var w=typeof e=="object"&&e!==null;!u&&c&&w&&e.beginContact(this),u&&!c&&w&&e.endContact(this),!m&&c&&w&&Pv&&e.preSolve(this,Pv)}}}},r.prototype.solvePositionConstraint=function(e){return this._solvePositionConstraint(e,null,null)},r.prototype.solvePositionConstraintTOI=function(e,i,n){return this._solvePositionConstraint(e,i,n)},r.prototype._solvePositionConstraint=function(e,i,n){var s=i!==null&&n!==null,o=0,a=this.m_fixtureA,l=this.m_fixtureB;if(a===null||l===null)return o;var c=a.m_body,u=l.m_body;if(c===null||u===null)return o;c.c_velocity,u.c_velocity;var d=c.c_position,p=u.c_position,m=this.p_localCenterA,g=this.p_localCenterB,y=0,_=0;(!s||c===i||c===n)&&(y=this.p_invMassA,_=this.p_invIA);var x=0,O=0;(!s||u===i||u===n)&&(x=this.p_invMassB,O=this.p_invIB),Ne(ju,d.c);var S=d.a;Ne(Yu,p.c);for(var w=p.a,C=0;C<this.p_pointCount;++C){MT(zm,m,ju,S),MT(Xm,g,Yu,w);var M=void 0;switch(this.p_type){case kr.e_circles:{Si(HT,zm,this.p_localPoint),Si(QT,Xm,this.p_localPoints[0]),Ci(An,QT,HT),rc(An),lr(nb,.5,HT,.5,QT),M=ot(QT,An)-ot(HT,An)-this.p_radiusA-this.p_radiusB;break}case kr.e_faceA:{dh(An,zm.q,this.p_localNormal),Si(jT,zm,this.p_localPoint),Si(kv,Xm,this.p_localPoints[C]),M=ot(kv,An)-ot(jT,An)-this.p_radiusA-this.p_radiusB,Ne(nb,kv);break}case kr.e_faceB:{dh(An,Xm.q,this.p_localNormal),Si(jT,Xm,this.p_localPoint),Si(kv,zm,this.p_localPoints[C]),M=ot(kv,An)-ot(jT,An)-this.p_radiusA-this.p_radiusB,Ne(nb,kv),CO(An);break}default:return o}Ci(jB,nb,ju),Ci(YB,nb,Yu),o=uKe(o,M);var P=s?Et.toiBaugarte:Et.baumgarte,R=Et.linearSlop,k=Et.maxLinearCorrection,I=Gs(P*(M+R),-k,0),A=Vi(jB,An),D=Vi(YB,An),V=y+x+_*A*A+O*D*D,B=V>0?-I/V:0;gi(ts,B,An),kb(ju,y,ts),S-=_*Vi(jB,ts),tc(Yu,x,ts),w+=O*Vi(YB,ts)}return Ne(d.c,ju),d.a=S,Ne(p.c,Yu),p.a=w,o},r.prototype.initVelocityConstraint=function(e){var i=this.m_fixtureA,n=this.m_fixtureB;if(!(i===null||n===null)){var s=i.m_body,o=n.m_body;if(!(s===null||o===null)){var a=s.c_velocity,l=o.c_velocity,c=s.c_position,u=o.c_position,d=this.p_radiusA,p=this.p_radiusB,m=this.m_manifold,g=this.v_invMassA,y=this.v_invMassB,_=this.v_invIA,x=this.v_invIB,O=this.p_localCenterA,S=this.p_localCenterB;Ne(ju,c.c);var w=c.a;Ne(Nr,a.v);var C=a.w;Ne(Yu,u.c);var M=u.a;Ne(Vr,l.v);var P=l.w;MT(zm,O,ju,w),MT(Xm,S,Yu,M),GT.recycle(),m.getWorldManifold(GT,zm,d,Xm,p),Ne(this.v_normal,GT.normal);for(var R=0;R<this.v_pointCount;++R){var k=this.v_points[R],I=GT.points[R];Ci(k.rA,I,ju),Ci(k.rB,I,Yu);var A=Vi(k.rA,this.v_normal),D=Vi(k.rB,this.v_normal),V=g+y+_*A*A+x*D*D;k.normalMass=V>0?1/V:0,Ug(If,this.v_normal,1);var B=Vi(k.rA,If),L=Vi(k.rB,If),F=g+y+_*B*B+x*L*L;k.tangentMass=F>0?1/F:0,k.velocityBias=0;var $=0;$+=ot(this.v_normal,Vr),$+=ot(this.v_normal,il(Mc,P,k.rB)),$-=ot(this.v_normal,Nr),$-=ot(this.v_normal,il(Mc,C,k.rA)),$<-Et.velocityThreshold&&(k.velocityBias=-this.v_restitution*$)}if(this.v_pointCount==2&&e.blockSolve){var z=this.v_points[0],H=this.v_points[1],K=Vi(z.rA,this.v_normal),J=Vi(z.rB,this.v_normal),ne=Vi(H.rA,this.v_normal),be=Vi(H.rB,this.v_normal),pe=g+y+_*K*K+x*J*J,ae=g+y+_*ne*ne+x*be*be,ye=g+y+_*K*ne+x*J*be,_e=1e3;if(pe*pe<_e*(pe*ae-ye*ye)){this.v_K.ex.setNum(pe,ye),this.v_K.ey.setNum(ye,ae);var re=this.v_K.ex.x,se=this.v_K.ey.x,Q=this.v_K.ex.y,G=this.v_K.ey.y,ie=re*G-se*Q;ie!==0&&(ie=1/ie),this.v_normalMass.ex.x=ie*G,this.v_normalMass.ey.x=-ie*se,this.v_normalMass.ex.y=-ie*Q,this.v_normalMass.ey.y=ie*re}else this.v_pointCount=1}Ne(c.c,ju),c.a=w,Ne(a.v,Nr),a.w=C,Ne(u.c,Yu),u.a=M,Ne(l.v,Vr),l.w=P}}},r.prototype.warmStartConstraint=function(e){var i=this.m_fixtureA,n=this.m_fixtureB;if(!(i===null||n===null)){var s=i.m_body,o=n.m_body;if(!(s===null||o===null)){var a=s.c_velocity,l=o.c_velocity;s.c_position,o.c_position;var c=this.v_invMassA,u=this.v_invIA,d=this.v_invMassB,p=this.v_invIB;Ne(Nr,a.v);var m=a.w;Ne(Vr,l.v);var g=l.w;Ne(An,this.v_normal),Ug(If,An,1);for(var y=0;y<this.v_pointCount;++y){var _=this.v_points[y];lr(ts,_.normalImpulse,An,_.tangentImpulse,If),m-=u*Vi(_.rA,ts),kb(Nr,c,ts),g+=p*Vi(_.rB,ts),tc(Vr,d,ts)}Ne(a.v,Nr),a.w=m,Ne(l.v,Vr),l.w=g}}},r.prototype.storeConstraintImpulses=function(e){for(var i=this.m_manifold,n=0;n<this.v_pointCount;++n)i.points[n].normalImpulse=this.v_points[n].normalImpulse,i.points[n].tangentImpulse=this.v_points[n].tangentImpulse},r.prototype.solveVelocityConstraint=function(e){var i=this.m_fixtureA,n=this.m_fixtureB;if(!(i===null||n===null)){var s=i.m_body,o=n.m_body;if(!(s===null||o===null)){var a=s.c_velocity;s.c_position;var l=o.c_velocity;o.c_position;var c=this.v_invMassA,u=this.v_invIA,d=this.v_invMassB,p=this.v_invIB;Ne(Nr,a.v);var m=a.w;Ne(Vr,l.v);var g=l.w;Ne(An,this.v_normal),Ug(If,An,1);for(var y=this.v_friction,_=0;_<this.v_pointCount;++_){var x=this.v_points[_];hi(Fl),Yl(Fl,Vr),Yl(Fl,il(Mc,g,x.rB)),Ju(Fl,Nr),Ju(Fl,il(Mc,m,x.rA));var O=ot(Fl,If)-this.v_tangentSpeed,S=x.tangentMass*-O,w=y*x.normalImpulse,C=Gs(x.tangentImpulse+S,-w,w);S=C-x.tangentImpulse,x.tangentImpulse=C,gi(ts,S,If),kb(Nr,c,ts),m-=u*Vi(x.rA,ts),tc(Vr,d,ts),g+=p*Vi(x.rB,ts)}if(this.v_pointCount==1||e.blockSolve==!1)for(var M=0;M<this.v_pointCount;++M){var x=this.v_points[M];hi(Fl),Yl(Fl,Vr),Yl(Fl,il(Mc,g,x.rB)),Ju(Fl,Nr),Ju(Fl,il(Mc,m,x.rA));var P=ot(Fl,An),S=-x.normalMass*(P-x.velocityBias),C=cKe(x.normalImpulse+S,0);S=C-x.normalImpulse,x.normalImpulse=C,gi(ts,S,An),kb(Nr,c,ts),m-=u*Vi(x.rA,ts),tc(Vr,d,ts),g+=p*Vi(x.rB,ts)}else{var R=this.v_points[0],k=this.v_points[1];Xs(qu,R.normalImpulse,k.normalImpulse),hi(Iv),Yl(Iv,Vr),Yl(Iv,il(Mc,g,R.rB)),Ju(Iv,Nr),Ju(Iv,il(Mc,m,R.rA)),hi(Rv),Yl(Rv,Vr),Yl(Rv,il(Mc,g,k.rB)),Ju(Rv,Nr),Ju(Rv,il(Mc,m,k.rA));var I=ot(Iv,An),A=ot(Rv,An);for(Xs(el,I-R.velocityBias,A-k.velocityBias),el.x-=this.v_K.ex.x*qu.x+this.v_K.ey.x*qu.y,el.y-=this.v_K.ex.y*qu.x+this.v_K.ey.y*qu.y;;){if(hi(Hn),Hn.x=-(this.v_normalMass.ex.x*el.x+this.v_normalMass.ey.x*el.y),Hn.y=-(this.v_normalMass.ex.y*el.x+this.v_normalMass.ey.y*el.y),Hn.x>=0&&Hn.y>=0){Ci($l,Hn,qu),gi(is,$l.x,An),gi(ns,$l.y,An),Fc(Nr,-c,is,-c,ns,1,Nr),m-=u*(Vi(R.rA,is)+Vi(k.rA,ns)),Fc(Vr,d,is,d,ns,1,Vr),g+=p*(Vi(R.rB,is)+Vi(k.rB,ns)),R.normalImpulse=Hn.x,k.normalImpulse=Hn.y;break}if(Hn.x=-R.normalMass*el.x,Hn.y=0,I=0,A=this.v_K.ex.y*Hn.x+el.y,Hn.x>=0&&A>=0){Ci($l,Hn,qu),gi(is,$l.x,An),gi(ns,$l.y,An),Fc(Nr,-c,is,-c,ns,1,Nr),m-=u*(Vi(R.rA,is)+Vi(k.rA,ns)),Fc(Vr,d,is,d,ns,1,Vr),g+=p*(Vi(R.rB,is)+Vi(k.rB,ns)),R.normalImpulse=Hn.x,k.normalImpulse=Hn.y;break}if(Hn.x=0,Hn.y=-k.normalMass*el.y,I=this.v_K.ey.x*Hn.y+el.x,A=0,Hn.y>=0&&I>=0){Ci($l,Hn,qu),gi(is,$l.x,An),gi(ns,$l.y,An),Fc(Nr,-c,is,-c,ns,1,Nr),m-=u*(Vi(R.rA,is)+Vi(k.rA,ns)),Fc(Vr,d,is,d,ns,1,Vr),g+=p*(Vi(R.rB,is)+Vi(k.rB,ns)),R.normalImpulse=Hn.x,k.normalImpulse=Hn.y;break}if(Hn.x=0,Hn.y=0,I=el.x,A=el.y,I>=0&&A>=0){Ci($l,Hn,qu),gi(is,$l.x,An),gi(ns,$l.y,An),Fc(Nr,-c,is,-c,ns,1,Nr),m-=u*(Vi(R.rA,is)+Vi(k.rA,ns)),Fc(Vr,d,is,d,ns,1,Vr),g+=p*(Vi(R.rB,is)+Vi(k.rB,ns)),R.normalImpulse=Hn.x,k.normalImpulse=Hn.y;break}break}}Ne(a.v,Nr),a.w=m,Ne(l.v,Vr),l.w=g}}},r.addType=function(e,i,n){Um[e]=Um[e]||{},Um[e][i]=n},r.create=function(e,i,n,s){var o=e.m_shape.m_type,a=n.m_shape.m_type,l=vY.allocate(),c;if(c=Um[o]&&Um[o][a])l.initialize(e,i,n,s,c);else if(c=Um[a]&&Um[a][o])l.initialize(n,s,e,i,c);else return null;e=l.m_fixtureA,n=l.m_fixtureB,i=l.getChildIndexA(),s=l.getChildIndexB();var u=e.m_body,d=n.m_body;return l.m_nodeA.contact=l,l.m_nodeA.other=d,l.m_nodeA.prev=null,l.m_nodeA.next=u.m_contactList,u.m_contactList!=null&&(u.m_contactList.prev=l.m_nodeA),u.m_contactList=l.m_nodeA,l.m_nodeB.contact=l,l.m_nodeB.other=u,l.m_nodeB.prev=null,l.m_nodeB.next=d.m_contactList,d.m_contactList!=null&&(d.m_contactList.prev=l.m_nodeB),d.m_contactList=l.m_nodeB,e.isSensor()==!1&&n.isSensor()==!1&&(u.setAwake(!0),d.setAwake(!0)),l},r.destroy=function(e,i){var n=e.m_fixtureA,s=e.m_fixtureB;if(!(n===null||s===null)){var o=n.m_body,a=s.m_body;o===null||a===null||(e.isTouching()&&i.endContact(e),e.m_nodeA.prev&&(e.m_nodeA.prev.next=e.m_nodeA.next),e.m_nodeA.next&&(e.m_nodeA.next.prev=e.m_nodeA.prev),e.m_nodeA==o.m_contactList&&(o.m_contactList=e.m_nodeA.next),e.m_nodeB.prev&&(e.m_nodeB.prev.next=e.m_nodeB.next),e.m_nodeB.next&&(e.m_nodeB.next.prev=e.m_nodeB.prev),e.m_nodeB==a.m_contactList&&(a.m_contactList=e.m_nodeB.next),e.m_manifold.pointCount>0&&!n.m_isSensor&&!s.m_isSensor&&(o.setAwake(!0),a.setAwake(!0)),vY.release(e))}},r}(),dKe={gravity:X.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3},wS=function(){function r(e){if(!(this instanceof r))return new r(e);this.s_step=new VF,e?X.isValid(e)&&(e={gravity:e}):e={},e=El(e,dKe),this.m_solver=new fhe(this),this.m_broadPhase=new $Ze,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=e.allowSleep,this.m_gravity=X.clone(e.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=e.warmStarting,this.m_continuousPhysics=e.continuousPhysics,this.m_subStepping=e.subStepping,this.m_blockSolve=e.blockSolve,this.m_velocityIterations=e.velocityIterations,this.m_positionIterations=e.positionIterations,this.m_t=0,this.m_step_callback=[]}return r.prototype._serialize=function(){for(var e=[],i=[],n=this.getBodyList();n;n=n.getNext())e.push(n);for(var s=this.getJointList();s;s=s.getNext())typeof s._serialize=="function"&&i.push(s);return{gravity:this.m_gravity,bodies:e,joints:i}},r._deserialize=function(e,i,n){if(!e)return new r;var s=new r(e.gravity);if(e.bodies)for(var o=e.bodies.length-1;o>=0;o-=1)s._addBody(n(xn,e.bodies[o],s));if(e.joints)for(var o=e.joints.length-1;o>=0;o--)s.createJoint(n(So,e.joints[o],s));return s},r.prototype.getBodyList=function(){return this.m_bodyList},r.prototype.getJointList=function(){return this.m_jointList},r.prototype.getContactList=function(){return this.m_contactList},r.prototype.getBodyCount=function(){return this.m_bodyCount},r.prototype.getJointCount=function(){return this.m_jointCount},r.prototype.getContactCount=function(){return this.m_contactCount},r.prototype.setGravity=function(e){this.m_gravity.set(e)},r.prototype.getGravity=function(){return this.m_gravity},r.prototype.isLocked=function(){return this.m_locked},r.prototype.setAllowSleeping=function(e){if(e!=this.m_allowSleep&&(this.m_allowSleep=e,this.m_allowSleep==!1))for(var i=this.m_bodyList;i;i=i.m_next)i.setAwake(!0)},r.prototype.getAllowSleeping=function(){return this.m_allowSleep},r.prototype.setWarmStarting=function(e){this.m_warmStarting=e},r.prototype.getWarmStarting=function(){return this.m_warmStarting},r.prototype.setContinuousPhysics=function(e){this.m_continuousPhysics=e},r.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},r.prototype.setSubStepping=function(e){this.m_subStepping=e},r.prototype.getSubStepping=function(){return this.m_subStepping},r.prototype.setAutoClearForces=function(e){this.m_clearForces=e},r.prototype.getAutoClearForces=function(){return this.m_clearForces},r.prototype.clearForces=function(){for(var e=this.m_bodyList;e;e=e.getNext())e.m_force.setZero(),e.m_torque=0},r.prototype.queryAABB=function(e,i){var n=this.m_broadPhase;this.m_broadPhase.query(e,function(s){var o=n.getUserData(s);return i(o.fixture)})},r.prototype.rayCast=function(e,i,n){var s=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:e,p2:i},function(o,a){var l=s.getUserData(a),c=l.fixture,u=l.childIndex,d={},p=c.rayCast(d,o,u);if(p){var m=d.fraction,g=X.add(X.mulNumVec2(1-m,o.p1),X.mulNumVec2(m,o.p2));return n(c,g,d.normal,m)}return o.maxFraction})},r.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},r.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},r.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},r.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},r.prototype.shiftOrigin=function(e){if(!this.isLocked()){for(var i=this.m_bodyList;i;i=i.m_next)i.m_xf.p.sub(e),i.m_sweep.c0.sub(e),i.m_sweep.c.sub(e);for(var n=this.m_jointList;n;n=n.m_next)n.shiftOrigin(e);this.m_broadPhase.shiftOrigin(e)}},r.prototype._addBody=function(e){this.isLocked()||(e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount)},r.prototype.createBody=function(e,i){if(this.isLocked())return null;var n={};e&&(X.isValid(e)?n={position:e,angle:i}:typeof e=="object"&&(n=e));var s=new xn(this,n);return this._addBody(s),s},r.prototype.createDynamicBody=function(e,i){var n={};return e&&(X.isValid(e)?n={position:e,angle:i}:typeof e=="object"&&(n=e)),n.type="dynamic",this.createBody(n)},r.prototype.createKinematicBody=function(e,i){var n={};return e&&(X.isValid(e)?n={position:e,angle:i}:typeof e=="object"&&(n=e)),n.type="kinematic",this.createBody(n)},r.prototype.destroyBody=function(e){if(!this.isLocked()){if(e.m_destroyed)return!1;for(var i=e.m_jointList;i;){var n=i;i=i.next,this.publish("remove-joint",n.joint),this.destroyJoint(n.joint),e.m_jointList=i}e.m_jointList=null;for(var s=e.m_contactList;s;){var o=s;s=s.next,this.destroyContact(o.contact),e.m_contactList=s}e.m_contactList=null;for(var a=e.m_fixtureList;a;){var l=a;a=a.m_next,this.publish("remove-fixture",l),l.destroyProxies(this.m_broadPhase),e.m_fixtureList=a}return e.m_fixtureList=null,e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_bodyList&&(this.m_bodyList=e.m_next),e.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",e),!0}},r.prototype.createJoint=function(e){if(this.isLocked())return null;if(e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB,e.m_collideConnected==!1)for(var i=e.m_bodyB.getContactList();i;i=i.next)i.other==e.m_bodyA&&i.contact.flagForFiltering();return e},r.prototype.destroyJoint=function(e){if(!this.isLocked()){e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_jointList&&(this.m_jointList=e.m_next);var i=e.m_bodyA,n=e.m_bodyB;if(i.setAwake(!0),n.setAwake(!0),e.m_edgeA.prev&&(e.m_edgeA.prev.next=e.m_edgeA.next),e.m_edgeA.next&&(e.m_edgeA.next.prev=e.m_edgeA.prev),e.m_edgeA==i.m_jointList&&(i.m_jointList=e.m_edgeA.next),e.m_edgeA.prev=null,e.m_edgeA.next=null,e.m_edgeB.prev&&(e.m_edgeB.prev.next=e.m_edgeB.next),e.m_edgeB.next&&(e.m_edgeB.next.prev=e.m_edgeB.prev),e.m_edgeB==n.m_jointList&&(n.m_jointList=e.m_edgeB.next),e.m_edgeB.prev=null,e.m_edgeB.next=null,--this.m_jointCount,e.m_collideConnected==!1)for(var s=n.getContactList();s;)s.other==i&&s.contact.flagForFiltering(),s=s.next;this.publish("remove-joint",e)}},r.prototype.step=function(e,i,n){if(this.publish("pre-step",e),(i|0)!==i&&(i=0),i=i||this.m_velocityIterations,n=n||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,this.s_step.reset(e),this.s_step.velocityIterations=i,this.s_step.positionIterations=n,this.s_step.warmStarting=this.m_warmStarting,this.s_step.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&e>0){this.m_solver.solveWorld(this.s_step);for(var s=this.m_bodyList;s;s=s.getNext())s.m_islandFlag!=!1&&(s.isStatic()||s.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&e>0&&this.m_solver.solveWorldTOI(this.s_step),this.m_clearForces&&this.clearForces(),this.m_locked=!1;for(var o;o=this.m_step_callback.shift();)o(this);this.publish("post-step",e)},r.prototype.queueUpdate=function(e){this.isLocked()?this.m_step_callback.push(e):e(this)},r.prototype.findNewContacts=function(){var e=this;this.m_broadPhase.updatePairs(function(i,n){return e.createContact(i,n)})},r.prototype.createContact=function(e,i){var n=e.fixture,s=i.fixture,o=e.childIndex,a=i.childIndex,l=n.getBody(),c=s.getBody();if(l!=c){for(var u=c.getContactList();u;){if(u.other==l){var d=u.contact.getFixtureA(),p=u.contact.getFixtureB(),m=u.contact.getChildIndexA(),g=u.contact.getChildIndexB();if(d==n&&p==s&&m==o&&g==a||d==s&&p==n&&m==a&&g==o)return}u=u.next}if(c.shouldCollide(l)!=!1&&s.shouldCollide(n)!=!1){var y=vu.create(n,o,s,a);y!=null&&(y.m_prev=null,this.m_contactList!=null&&(y.m_next=this.m_contactList,this.m_contactList.m_prev=y),this.m_contactList=y,++this.m_contactCount)}}},r.prototype.updateContacts=function(){for(var e,i=this.m_contactList;e=i;){i=e.getNext();var n=e.getFixtureA(),s=e.getFixtureB(),o=e.getChildIndexA(),a=e.getChildIndexB(),l=n.getBody(),c=s.getBody();if(e.m_filterFlag){if(c.shouldCollide(l)==!1){this.destroyContact(e);continue}if(s.shouldCollide(n)==!1){this.destroyContact(e);continue}e.m_filterFlag=!1}var u=l.isAwake()&&!l.isStatic(),d=c.isAwake()&&!c.isStatic();if(!(u==!1&&d==!1)){var p=n.m_proxies[o].proxyId,m=s.m_proxies[a].proxyId,g=this.m_broadPhase.testOverlap(p,m);if(g==!1){this.destroyContact(e);continue}e.update(this)}}},r.prototype.destroyContact=function(e){e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_contactList&&(this.m_contactList=e.m_next),vu.destroy(e,this),--this.m_contactCount},r.prototype.on=function(e,i){return typeof e!="string"||typeof i!="function"?this:(this._listeners||(this._listeners={}),this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(i),this)},r.prototype.off=function(e,i){if(typeof e!="string"||typeof i!="function")return this;var n=this._listeners&&this._listeners[e];if(!n||!n.length)return this;var s=n.indexOf(i);return s>=0&&n.splice(s,1),this},r.prototype.publish=function(e,i,n,s){var o=this._listeners&&this._listeners[e];if(!o||!o.length)return 0;for(var a=0;a<o.length;a++)o[a].call(this,i,n,s);return o.length},r.prototype.beginContact=function(e){this.publish("begin-contact",e)},r.prototype.endContact=function(e){this.publish("end-contact",e)},r.prototype.preSolve=function(e,i){this.publish("pre-solve",e,i)},r.prototype.postSolve=function(e,i){this.publish("post-solve",e,i)},r}(),fn=function(){function r(e,i,n){if(!(this instanceof r))return new r(e,i,n);typeof e>"u"?(this.x=0,this.y=0,this.z=0):typeof e=="object"?(this.x=e.x,this.y=e.y,this.z=e.z):(this.x=e,this.y=i,this.z=n)}return r.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},r._deserialize=function(e){var i=Object.create(r.prototype);return i.x=e.x,i.y=e.y,i.z=e.z,i},r.neo=function(e,i,n){var s=Object.create(r.prototype);return s.x=e,s.y=i,s.z=n,s},r.zero=function(){var e=Object.create(r.prototype);return e.x=0,e.y=0,e.z=0,e},r.clone=function(e){return r.neo(e.x,e.y,e.z)},r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(e){return e===null||typeof e>"u"?!1:Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)},r.assert=function(e){},r.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},r.prototype.set=function(e,i,n){return this.x=e,this.y=i,this.z=n,this},r.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},r.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},r.prototype.mul=function(e){return this.x*=e,this.y*=e,this.z*=e,this},r.areEqual=function(e,i){return e===i||typeof e=="object"&&e!==null&&typeof i=="object"&&i!==null&&e.x===i.x&&e.y===i.y&&e.z===i.z},r.dot=function(e,i){return e.x*i.x+e.y*i.y+e.z*i.z},r.cross=function(e,i){return new r(e.y*i.z-e.z*i.y,e.z*i.x-e.x*i.z,e.x*i.y-e.y*i.x)},r.add=function(e,i){return new r(e.x+i.x,e.y+i.y,e.z+i.z)},r.sub=function(e,i){return new r(e.x-i.x,e.y-i.y,e.z-i.z)},r.mul=function(e,i){return new r(i*e.x,i*e.y,i*e.z)},r.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},r.neg=function(e){return new r(-e.x,-e.y,-e.z)},r}(),wY=He(0,0),OY=He(0,0),$d=function(r){Io(e,r);function e(i,n){var s=this;return s instanceof e?(s=r.call(this)||this,s.m_type=e.TYPE,s.m_radius=Et.polygonRadius,s.m_vertex1=i?X.clone(i):X.zero(),s.m_vertex2=n?X.clone(n):X.zero(),s.m_vertex0=X.zero(),s.m_vertex3=X.zero(),s.m_hasVertex0=!1,s.m_hasVertex3=!1,s):new e(i,n)}return e.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},e._deserialize=function(i){var n=new e(i.vertex1,i.vertex2);return n.m_hasVertex0&&n.setPrevVertex(i.vertex0),n.m_hasVertex3&&n.setNextVertex(i.vertex3),n},e.prototype._reset=function(){},e.prototype.getRadius=function(){return this.m_radius},e.prototype.getType=function(){return this.m_type},e.prototype.setNext=function(i){return this.setNextVertex(i)},e.prototype.setNextVertex=function(i){return i?(this.m_vertex3.setVec2(i),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},e.prototype.getNextVertex=function(){return this.m_vertex3},e.prototype.setPrev=function(i){return this.setPrevVertex(i)},e.prototype.setPrevVertex=function(i){return i?(this.m_vertex0.setVec2(i),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},e.prototype.getPrevVertex=function(){return this.m_vertex0},e.prototype._set=function(i,n){return this.m_vertex1.setVec2(i),this.m_vertex2.setVec2(n),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},e.prototype._clone=function(){var i=new e;return i.m_type=this.m_type,i.m_radius=this.m_radius,i.m_vertex1.setVec2(this.m_vertex1),i.m_vertex2.setVec2(this.m_vertex2),i.m_vertex0.setVec2(this.m_vertex0),i.m_vertex3.setVec2(this.m_vertex3),i.m_hasVertex0=this.m_hasVertex0,i.m_hasVertex3=this.m_hasVertex3,i},e.prototype.getChildCount=function(){return 1},e.prototype.testPoint=function(i,n){return!1},e.prototype.rayCast=function(i,n,s,o){var a=Ke.mulTVec2(s.q,X.sub(n.p1,s.p)),l=Ke.mulTVec2(s.q,X.sub(n.p2,s.p)),c=X.sub(l,a),u=this.m_vertex1,d=this.m_vertex2,p=X.sub(d,u),m=X.neo(p.y,-p.x);m.normalize();var g=X.dot(m,X.sub(u,a)),y=X.dot(m,c);if(y==0)return!1;var _=g/y;if(_<0||n.maxFraction<_)return!1;var x=X.add(a,X.mulNumVec2(_,c)),O=X.sub(d,u),S=X.dot(O,O);if(S==0)return!1;var w=X.dot(X.sub(x,u),O)/S;return w<0||1<w?!1:(i.fraction=_,g>0?i.normal=Ke.mulVec2(s.q,m).neg():i.normal=Ke.mulVec2(s.q,m),!0)},e.prototype.computeAABB=function(i,n,s){Si(wY,n,this.m_vertex1),Si(OY,n,this.m_vertex2),$s.combinePoints(i,wY,OY),$s.extend(i,this.m_radius)},e.prototype.computeMass=function(i,n){i.mass=0,lr(i.center,.5,this.m_vertex1,.5,this.m_vertex2),i.I=0},e.prototype.computeDistanceProxy=function(i){i.m_vertices[0]=this.m_vertex1,i.m_vertices[1]=this.m_vertex2,i.m_vertices.length=2,i.m_count=2,i.m_radius=this.m_radius},e.TYPE="edge",e}(S0),YT=$d,SY=He(0,0),CY=He(0,0),kM=function(r){Io(e,r);function e(i,n){var s=this;return s instanceof e?(s=r.call(this)||this,s.m_type=e.TYPE,s.m_radius=Et.polygonRadius,s.m_vertices=[],s.m_count=0,s.m_prevVertex=null,s.m_nextVertex=null,s.m_hasPrevVertex=!1,s.m_hasNextVertex=!1,s.m_isLoop=!!n,i&&i.length&&(n?s._createLoop(i):s._createChain(i)),s):new e(i,n)}return e.prototype._serialize=function(){var i={type:this.m_type,vertices:this.m_isLoop?this.m_vertices.slice(0,this.m_vertices.length-1):this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex,prevVertex:null,nextVertex:null};return this.m_prevVertex&&(i.prevVertex=this.m_prevVertex),this.m_nextVertex&&(i.nextVertex=this.m_nextVertex),i},e._deserialize=function(i,n,s){var o=[];if(i.vertices)for(var a=0;a<i.vertices.length;a++)o.push(s(X,i.vertices[a]));var l=new e(o,i.isLoop);return i.prevVertex&&l.setPrevVertex(i.prevVertex),i.nextVertex&&l.setNextVertex(i.nextVertex),l},e.prototype.getType=function(){return this.m_type},e.prototype.getRadius=function(){return this.m_radius},e.prototype._createLoop=function(i){if(!(i.length<3)){for(var n=1;n<i.length;++n)i[n-1],i[n];this.m_vertices=[],this.m_count=i.length+1;for(var n=0;n<i.length;++n)this.m_vertices[n]=X.clone(i[n]);return this.m_vertices[i.length]=X.clone(i[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}},e.prototype._createChain=function(i){for(var n=1;n<i.length;++n)i[n-1],i[n];this.m_vertices=[],this.m_count=i.length;for(var n=0;n<i.length;++n)this.m_vertices[n]=X.clone(i[n]);return this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this},e.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices.slice(0,this.m_vertices.length-1)):this._createChain(this.m_vertices)},e.prototype.setPrevVertex=function(i){this.m_prevVertex=i,this.m_hasPrevVertex=!0},e.prototype.getPrevVertex=function(){return this.m_prevVertex},e.prototype.setNextVertex=function(i){this.m_nextVertex=i,this.m_hasNextVertex=!0},e.prototype.getNextVertex=function(){return this.m_nextVertex},e.prototype._clone=function(){var i=new e;return i._createChain(this.m_vertices),i.m_type=this.m_type,i.m_radius=this.m_radius,i.m_prevVertex=this.m_prevVertex,i.m_nextVertex=this.m_nextVertex,i.m_hasPrevVertex=this.m_hasPrevVertex,i.m_hasNextVertex=this.m_hasNextVertex,i},e.prototype.getChildCount=function(){return this.m_count-1},e.prototype.getChildEdge=function(i,n){i.m_type=$d.TYPE,i.m_radius=this.m_radius,i.m_vertex1=this.m_vertices[n],i.m_vertex2=this.m_vertices[n+1],n>0?(i.m_vertex0=this.m_vertices[n-1],i.m_hasVertex0=!0):(i.m_vertex0=this.m_prevVertex,i.m_hasVertex0=this.m_hasPrevVertex),n<this.m_count-2?(i.m_vertex3=this.m_vertices[n+2],i.m_hasVertex3=!0):(i.m_vertex3=this.m_nextVertex,i.m_hasVertex3=this.m_hasNextVertex)},e.prototype.getVertex=function(i){return i<this.m_count?this.m_vertices[i]:this.m_vertices[0]},e.prototype.isLoop=function(){return this.m_isLoop},e.prototype.testPoint=function(i,n){return!1},e.prototype.rayCast=function(i,n,s,o){var a=new $d(this.getVertex(o),this.getVertex(o+1));return a.rayCast(i,n,s,0)},e.prototype.computeAABB=function(i,n,s){Si(SY,n,this.getVertex(s)),Si(CY,n,this.getVertex(s+1)),$s.combinePoints(i,SY,CY)},e.prototype.computeMass=function(i,n){i.mass=0,hi(i.center),i.I=0},e.prototype.computeDistanceProxy=function(i,n){i.m_vertices[0]=this.getVertex(n),i.m_vertices[1]=this.getVertex(n+1),i.m_count=2,i.m_radius=this.m_radius},e.TYPE="chain",e}(S0),TY=Math.max,qB=Math.min,lg=He(0,0),AY=He(0,0),rb=He(0,0),Bv=He(0,0),Wm=He(0,0),Rf=He(0,0),Fp=function(r){Io(e,r);function e(i){var n=this;return n instanceof e?(n=r.call(this)||this,n.m_type=e.TYPE,n.m_radius=Et.polygonRadius,n.m_centroid=X.zero(),n.m_vertices=[],n.m_normals=[],n.m_count=0,i&&i.length&&n._set(i),n):new e(i)}return e.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},e._deserialize=function(i,n,s){var o=[];if(i.vertices)for(var a=0;a<i.vertices.length;a++)o.push(s(X,i.vertices[a]));var l=new e(o);return l},e.prototype.getType=function(){return this.m_type},e.prototype.getRadius=function(){return this.m_radius},e.prototype._clone=function(){var i=new e;i.m_type=this.m_type,i.m_radius=this.m_radius,i.m_count=this.m_count,i.m_centroid.setVec2(this.m_centroid);for(var n=0;n<this.m_count;n++)i.m_vertices.push(this.m_vertices[n].clone());for(var n=0;n<this.m_normals.length;n++)i.m_normals.push(this.m_normals[n].clone());return i},e.prototype.getChildCount=function(){return 1},e.prototype._reset=function(){this._set(this.m_vertices)},e.prototype._set=function(i){if(i.length<3){this._setAsBox(1,1);return}for(var n=qB(i.length,Et.maxPolygonVertices),s=[],o=0;o<n;++o){for(var a=i[o],l=!0,c=0;c<s.length;++c)if(X.distanceSquared(a,s[c])<.25*Et.linearSlopSquared){l=!1;break}l&&s.push(X.clone(a))}if(n=s.length,n<3){this._setAsBox(1,1);return}for(var u=0,d=s[0].x,o=1;o<n;++o){var p=s[o].x;(p>d||p===d&&s[o].y<s[u].y)&&(u=o,d=p)}for(var m=[],g=0,y=u;;){m[g]=y;for(var _=0,c=1;c<n;++c){if(_===y){_=c;continue}var x=X.sub(s[_],s[m[g]]),a=X.sub(s[c],s[m[g]]),O=X.crossVec2Vec2(x,a);O<0&&(_=c),O===0&&a.lengthSquared()>x.lengthSquared()&&(_=c)}if(++g,y=_,_===u)break}if(g<3){this._setAsBox(1,1);return}this.m_count=g,this.m_vertices=[];for(var o=0;o<g;++o)this.m_vertices[o]=s[m[o]];for(var o=0;o<g;++o){var S=o,w=o+1<g?o+1:0,C=X.sub(this.m_vertices[w],this.m_vertices[S]);this.m_normals[o]=X.crossVec2Num(C,1),this.m_normals[o].normalize()}this.m_centroid=fKe(this.m_vertices,g)},e.prototype._setAsBox=function(i,n,s,o){if(this.m_vertices[0]=X.neo(i,-n),this.m_vertices[1]=X.neo(i,n),this.m_vertices[2]=X.neo(-i,n),this.m_vertices[3]=X.neo(-i,-n),this.m_normals[0]=X.neo(1,0),this.m_normals[1]=X.neo(0,1),this.m_normals[2]=X.neo(-1,0),this.m_normals[3]=X.neo(0,-1),this.m_count=4,s&&X.isValid(s)){o=o||0,Ne(this.m_centroid,s);var a=sc.identity();a.p.setVec2(s),a.q.setAngle(o);for(var l=0;l<this.m_count;++l)this.m_vertices[l]=sc.mulVec2(a,this.m_vertices[l]),this.m_normals[l]=Ke.mulVec2(a.q,this.m_normals[l])}},e.prototype.testPoint=function(i,n){for(var s=RF(lg,i,n),o=0;o<this.m_count;++o){var a=ot(this.m_normals[o],s)-ot(this.m_normals[o],this.m_vertices[o]);if(a>0)return!1}return!0},e.prototype.rayCast=function(i,n,s,o){for(var a=Ke.mulTVec2(s.q,X.sub(n.p1,s.p)),l=Ke.mulTVec2(s.q,X.sub(n.p2,s.p)),c=X.sub(l,a),u=0,d=n.maxFraction,p=-1,m=0;m<this.m_count;++m){var g=X.dot(this.m_normals[m],X.sub(this.m_vertices[m],a)),y=X.dot(this.m_normals[m],c);if(y==0){if(g<0)return!1}else y<0&&g<u*y?(u=g/y,p=m):y>0&&g<d*y&&(d=g/y);if(d<u)return!1}return p>=0?(i.fraction=u,i.normal=Ke.mulVec2(s.q,this.m_normals[p]),!0):!1},e.prototype.computeAABB=function(i,n,s){for(var o=1/0,a=1/0,l=-1/0,c=-1/0,u=0;u<this.m_count;++u){var d=Si(lg,n,this.m_vertices[u]);o=qB(o,d.x),l=TY(l,d.x),a=qB(a,d.y),c=TY(c,d.y)}Xs(i.lowerBound,o-this.m_radius,a-this.m_radius),Xs(i.upperBound,l+this.m_radius,c+this.m_radius)},e.prototype.computeMass=function(i,n){hi(Wm);var s=0,o=0;hi(Rf);for(var a=0;a<this.m_count;++a)Yl(Rf,this.m_vertices[a]);gi(Rf,1/this.m_count,Rf);for(var l=1/3,a=0;a<this.m_count;++a){Ci(rb,this.m_vertices[a],Rf),a+1<this.m_count?Ci(Bv,this.m_vertices[a+1],Rf):Ci(Bv,this.m_vertices[0],Rf);var c=Vi(rb,Bv),u=.5*c;s+=u,lr(lg,u*l,rb,u*l,Bv),Yl(Wm,lg);var d=rb.x,p=rb.y,m=Bv.x,g=Bv.y,y=d*d+m*d+m*m,_=p*p+g*p+g*g;o+=.25*l*c*(y+_)}i.mass=n*s,gi(Wm,1/s,Wm),zZe(i.center,Wm,Rf),i.I=n*o,i.I+=i.mass*(ot(i.center,i.center)-ot(Wm,Wm))},e.prototype.validate=function(){for(var i=0;i<this.m_count;++i){var n=i,s=i<this.m_count-1?n+1:0,o=this.m_vertices[n];Ci(AY,this.m_vertices[s],o);for(var a=0;a<this.m_count;++a)if(!(a==n||a==s)){var l=Vi(AY,Ci(lg,this.m_vertices[a],o));if(l<0)return!1}}return!0},e.prototype.computeDistanceProxy=function(i){for(var n=0;n<this.m_count;++n)i.m_vertices[n]=this.m_vertices[n];i.m_vertices.length=this.m_count,i.m_count=this.m_count,i.m_radius=this.m_radius},e.TYPE="polygon",e}(S0);function fKe(r,e){for(var i=X.zero(),n=0,s=X.zero(),o,a=1/3,o=0;o<e;++o){var l=s,c=r[o],u=o+1<e?r[o+1]:r[0],d=X.sub(c,l),p=X.sub(u,l),m=X.crossVec2Vec2(d,p),g=.5*m;n+=g,Fc(lg,1,l,1,c,1,u),tc(i,g*a,lg)}return i.mul(1/n),i}var pKe=Math.sqrt,mKe=Math.PI,EY=He(0,0),$p=function(r){Io(e,r);function e(i,n){var s=this;return s instanceof e?(s=r.call(this)||this,s.m_type=e.TYPE,s.m_p=X.zero(),s.m_radius=1,typeof i=="object"&&X.isValid(i)?(s.m_p.setVec2(i),typeof n=="number"&&(s.m_radius=n)):typeof i=="number"&&(s.m_radius=i),s):new e(i,n)}return e.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},e._deserialize=function(i){return new e(i.p,i.radius)},e.prototype._reset=function(){},e.prototype.getType=function(){return this.m_type},e.prototype.getRadius=function(){return this.m_radius},e.prototype.getCenter=function(){return this.m_p},e.prototype._clone=function(){var i=new e;return i.m_type=this.m_type,i.m_radius=this.m_radius,i.m_p=this.m_p.clone(),i},e.prototype.getChildCount=function(){return 1},e.prototype.testPoint=function(i,n){var s=Si(EY,i,this.m_p);return Xg(n,s)<=this.m_radius*this.m_radius},e.prototype.rayCast=function(i,n,s,o){var a=X.add(s.p,Ke.mulVec2(s.q,this.m_p)),l=X.sub(n.p1,a),c=X.dot(l,l)-this.m_radius*this.m_radius,u=X.sub(n.p2,n.p1),d=X.dot(l,u),p=X.dot(u,u),m=d*d-p*c;if(m<0||p<Ra)return!1;var g=-(d+pKe(m));return 0<=g&&g<=n.maxFraction*p?(g/=p,i.fraction=g,i.normal=X.add(l,X.mulNumVec2(g,u)),i.normal.normalize(),!0):!1},e.prototype.computeAABB=function(i,n,s){var o=Si(EY,n,this.m_p);Xs(i.lowerBound,o.x-this.m_radius,o.y-this.m_radius),Xs(i.upperBound,o.x+this.m_radius,o.y+this.m_radius)},e.prototype.computeMass=function(i,n){i.mass=n*mKe*this.m_radius*this.m_radius,Ne(i.center,this.m_p),i.I=i.mass*(.5*this.m_radius*this.m_radius+zg(this.m_p))},e.prototype.computeDistanceProxy=function(i){i.m_vertices[0]=this.m_p,i.m_vertices.length=1,i.m_count=1,i.m_radius=this.m_radius},e.TYPE="circle",e}(S0),gKe=$p,vKe=Math.abs,yKe=Math.PI,_Ke={frequencyHz:0,dampingRatio:0},kL=function(r){Io(e,r);function e(i,n,s,o,a){var l=this;if(!(l instanceof e))return new e(i,n,s,o,a);if(s&&o&&"m_type"in o&&"x"in s&&"y"in s){var c=s;s=o,o=c}return i=El(i,_Ke),l=r.call(this,i,n,s)||this,n=l.m_bodyA,s=l.m_bodyB,l.m_type=e.TYPE,l.m_localAnchorA=X.clone(o?n.getLocalPoint(o):i.localAnchorA||X.zero()),l.m_localAnchorB=X.clone(a?s.getLocalPoint(a):i.localAnchorB||X.zero()),l.m_length=Number.isFinite(i.length)?i.length:X.distance(n.getWorldPoint(l.m_localAnchorA),s.getWorldPoint(l.m_localAnchorB)),l.m_frequencyHz=i.frequencyHz,l.m_dampingRatio=i.dampingRatio,l.m_impulse=0,l.m_gamma=0,l.m_bias=0,l}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){i.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(i.anchorA)):i.localAnchorA&&this.m_localAnchorA.setVec2(i.localAnchorA),i.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(i.anchorB)):i.localAnchorB&&this.m_localAnchorB.setVec2(i.localAnchorB),i.length>0?this.m_length=+i.length:i.length<0||(i.anchorA||i.anchorA||i.anchorA||i.anchorA)&&(this.m_length=X.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB))),Number.isFinite(i.frequencyHz)&&(this.m_frequencyHz=i.frequencyHz),Number.isFinite(i.dampingRatio)&&(this.m_dampingRatio=i.dampingRatio)},e.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},e.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},e.prototype.setLength=function(i){this.m_length=i},e.prototype.getLength=function(){return this.m_length},e.prototype.setFrequency=function(i){this.m_frequencyHz=i},e.prototype.getFrequency=function(){return this.m_frequencyHz},e.prototype.setDampingRatio=function(i){this.m_dampingRatio=i},e.prototype.getDampingRatio=function(){return this.m_dampingRatio},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.mulNumVec2(this.m_impulse,this.m_u).mul(i)},e.prototype.getReactionTorque=function(i){return 0},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,a=this.m_bodyA.c_velocity.w,l=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,d=this.m_bodyB.c_velocity.w,p=Ke.neo(s),m=Ke.neo(c);this.m_rA=Ke.mulVec2(p,X.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Ke.mulVec2(m,X.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=X.sub(X.add(l,this.m_rB),X.add(n,this.m_rA));var g=this.m_u.length();g>Et.linearSlop?this.m_u.mul(1/g):this.m_u.setNum(0,0);var y=X.crossVec2Vec2(this.m_rA,this.m_u),_=X.crossVec2Vec2(this.m_rB,this.m_u),x=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*_*_;if(this.m_mass=x!=0?1/x:0,this.m_frequencyHz>0){var O=g-this.m_length,S=2*yKe*this.m_frequencyHz,w=2*this.m_mass*this.m_dampingRatio*S,C=this.m_mass*S*S,M=i.dt;this.m_gamma=M*(w+M*C),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_bias=O*M*C*this.m_gamma,x+=this.m_gamma,this.m_mass=x!=0?1/x:0}else this.m_gamma=0,this.m_bias=0;if(i.warmStarting){this.m_impulse*=i.dtRatio;var P=X.mulNumVec2(this.m_impulse,this.m_u);o.subMul(this.m_invMassA,P),a-=this.m_invIA*X.crossVec2Vec2(this.m_rA,P),u.addMul(this.m_invMassB,P),d+=this.m_invIB*X.crossVec2Vec2(this.m_rB,P)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.setVec2(o),this.m_bodyA.c_velocity.w=a,this.m_bodyB.c_velocity.v.setVec2(u),this.m_bodyB.c_velocity.w=d},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=X.add(n,X.crossNumVec2(s,this.m_rA)),c=X.add(o,X.crossNumVec2(a,this.m_rB)),u=X.dot(this.m_u,c)-X.dot(this.m_u,l),d=-this.m_mass*(u+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=d;var p=X.mulNumVec2(d,this.m_u);n.subMul(this.m_invMassA,p),s-=this.m_invIA*X.crossVec2Vec2(this.m_rA,p),o.addMul(this.m_invMassB,p),a+=this.m_invIB*X.crossVec2Vec2(this.m_rB,p),this.m_bodyA.c_velocity.v.setVec2(n),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.setVec2(o),this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){if(this.m_frequencyHz>0)return!0;var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=Ke.neo(s),c=Ke.neo(a),u=Ke.mulSub(l,this.m_localAnchorA,this.m_localCenterA),d=Ke.mulSub(c,this.m_localAnchorB,this.m_localCenterB),p=X.sub(X.add(o,d),X.add(n,u)),m=p.normalize(),g=Gs(m-this.m_length,-Et.maxLinearCorrection,Et.maxLinearCorrection),y=-this.m_mass*g,_=X.mulNumVec2(y,p);return n.subMul(this.m_invMassA,_),s-=this.m_invIA*X.crossVec2Vec2(u,_),o.addMul(this.m_invMassB,_),a+=this.m_invIB*X.crossVec2Vec2(d,_),this.m_bodyA.c_position.c.setVec2(n),this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=a,vKe(g)<Et.linearSlop},e.TYPE="distance-joint",e}(So),xKe={maxForce:0,maxTorque:0},MY=function(r){Io(e,r);function e(i,n,s,o){var a=this;return a instanceof e?(i=El(i,xKe),a=r.call(this,i,n,s)||this,n=a.m_bodyA,s=a.m_bodyB,a.m_type=e.TYPE,a.m_localAnchorA=X.clone(o?n.getLocalPoint(o):i.localAnchorA||X.zero()),a.m_localAnchorB=X.clone(o?s.getLocalPoint(o):i.localAnchorB||X.zero()),a.m_linearImpulse=X.zero(),a.m_angularImpulse=0,a.m_maxForce=i.maxForce,a.m_maxTorque=i.maxTorque,a):new e(i,n,s,o)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){i.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(i.anchorA)):i.localAnchorA&&this.m_localAnchorA.setVec2(i.localAnchorA),i.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(i.anchorB)):i.localAnchorB&&this.m_localAnchorB.setVec2(i.localAnchorB),Number.isFinite(i.maxForce)&&(this.m_maxForce=i.maxForce),Number.isFinite(i.maxTorque)&&(this.m_maxTorque=i.maxTorque)},e.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},e.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},e.prototype.setMaxForce=function(i){this.m_maxForce=i},e.prototype.getMaxForce=function(){return this.m_maxForce},e.prototype.setMaxTorque=function(i){this.m_maxTorque=i},e.prototype.getMaxTorque=function(){return this.m_maxTorque},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.mulNumVec2(i,this.m_linearImpulse)},e.prototype.getReactionTorque=function(i){return i*this.m_angularImpulse},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.a,s=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,c=this.m_bodyB.c_velocity.w,u=Ke.neo(n),d=Ke.neo(a);this.m_rA=Ke.mulVec2(u,X.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Ke.mulVec2(d,X.sub(this.m_localAnchorB,this.m_localCenterB));var p=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,y=this.m_invIB,_=new oc;if(_.ex.x=p+m+g*this.m_rA.y*this.m_rA.y+y*this.m_rB.y*this.m_rB.y,_.ex.y=-g*this.m_rA.x*this.m_rA.y-y*this.m_rB.x*this.m_rB.y,_.ey.x=_.ex.y,_.ey.y=p+m+g*this.m_rA.x*this.m_rA.x+y*this.m_rB.x*this.m_rB.x,this.m_linearMass=_.getInverse(),this.m_angularMass=g+y,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),i.warmStarting){this.m_linearImpulse.mul(i.dtRatio),this.m_angularImpulse*=i.dtRatio;var x=X.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);s.subMul(p,x),o-=g*(X.crossVec2Vec2(this.m_rA,x)+this.m_angularImpulse),l.addMul(m,x),c+=y*(X.crossVec2Vec2(this.m_rB,x)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=s,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=l,this.m_bodyB.c_velocity.w=c},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB,p=i.dt;{var m=a-s,g=-this.m_angularMass*m,y=this.m_angularImpulse,_=p*this.m_maxTorque;this.m_angularImpulse=Gs(this.m_angularImpulse+g,-_,_),g=this.m_angularImpulse-y,s-=u*g,a+=d*g}{var m=X.sub(X.add(o,X.crossNumVec2(a,this.m_rB)),X.add(n,X.crossNumVec2(s,this.m_rA))),g=X.neg(oc.mulVec2(this.m_linearMass,m)),y=this.m_linearImpulse;this.m_linearImpulse.add(g);var _=p*this.m_maxForce;this.m_linearImpulse.lengthSquared()>_*_&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(_)),g=X.sub(this.m_linearImpulse,y),n.subMul(l,g),s-=u*X.crossVec2Vec2(this.m_rA,g),o.addMul(c,g),a+=d*X.crossVec2Vec2(this.m_rB,g)}this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){return!0},e.TYPE="friction-joint",e}(So),tp=function(){function r(e,i,n){typeof e=="object"&&e!==null?(this.ex=fn.clone(e),this.ey=fn.clone(i),this.ez=fn.clone(n)):(this.ex=fn.zero(),this.ey=fn.zero(),this.ez=fn.zero())}return r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(e){return e===null||typeof e>"u"?!1:fn.isValid(e.ex)&&fn.isValid(e.ey)&&fn.isValid(e.ez)},r.assert=function(e){},r.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},r.prototype.solve33=function(e){var i=this.ey.y*this.ez.z-this.ey.z*this.ez.y,n=this.ey.z*this.ez.x-this.ey.x*this.ez.z,s=this.ey.x*this.ez.y-this.ey.y*this.ez.x,o=this.ex.x*i+this.ex.y*n+this.ex.z*s;o!==0&&(o=1/o);var a=new fn;return i=this.ey.y*this.ez.z-this.ey.z*this.ez.y,n=this.ey.z*this.ez.x-this.ey.x*this.ez.z,s=this.ey.x*this.ez.y-this.ey.y*this.ez.x,a.x=o*(e.x*i+e.y*n+e.z*s),i=e.y*this.ez.z-e.z*this.ez.y,n=e.z*this.ez.x-e.x*this.ez.z,s=e.x*this.ez.y-e.y*this.ez.x,a.y=o*(this.ex.x*i+this.ex.y*n+this.ex.z*s),i=this.ey.y*e.z-this.ey.z*e.y,n=this.ey.z*e.x-this.ey.x*e.z,s=this.ey.x*e.y-this.ey.y*e.x,a.z=o*(this.ex.x*i+this.ex.y*n+this.ex.z*s),a},r.prototype.solve22=function(e){var i=this.ex.x,n=this.ey.x,s=this.ex.y,o=this.ey.y,a=i*o-n*s;a!==0&&(a=1/a);var l=X.zero();return l.x=a*(o*e.x-n*e.y),l.y=a*(i*e.y-s*e.x),l},r.prototype.getInverse22=function(e){var i=this.ex.x,n=this.ey.x,s=this.ex.y,o=this.ey.y,a=i*o-n*s;a!==0&&(a=1/a),e.ex.x=a*o,e.ey.x=-a*n,e.ex.z=0,e.ex.y=-a*s,e.ey.y=a*i,e.ey.z=0,e.ez.x=0,e.ez.y=0,e.ez.z=0},r.prototype.getSymInverse33=function(e){var i=fn.dot(this.ex,fn.cross(this.ey,this.ez));i!==0&&(i=1/i);var n=this.ex.x,s=this.ey.x,o=this.ez.x,a=this.ey.y,l=this.ez.y,c=this.ez.z;e.ex.x=i*(a*c-l*l),e.ex.y=i*(o*l-s*c),e.ex.z=i*(s*l-o*a),e.ey.x=e.ex.y,e.ey.y=i*(n*c-o*o),e.ey.z=i*(o*s-n*l),e.ez.x=e.ex.z,e.ez.y=e.ey.z,e.ez.z=i*(n*a-s*s)},r.mul=function(e,i){if(i&&"z"in i&&"y"in i&&"x"in i){var n=e.ex.x*i.x+e.ey.x*i.y+e.ez.x*i.z,s=e.ex.y*i.x+e.ey.y*i.y+e.ez.y*i.z,o=e.ex.z*i.x+e.ey.z*i.y+e.ez.z*i.z;return new fn(n,s,o)}else if(i&&"y"in i&&"x"in i){var n=e.ex.x*i.x+e.ey.x*i.y,s=e.ex.y*i.x+e.ey.y*i.y;return X.neo(n,s)}},r.mulVec3=function(e,i){var n=e.ex.x*i.x+e.ey.x*i.y+e.ez.x*i.z,s=e.ex.y*i.x+e.ey.y*i.y+e.ez.y*i.z,o=e.ex.z*i.x+e.ey.z*i.y+e.ez.z*i.z;return new fn(n,s,o)},r.mulVec2=function(e,i){var n=e.ex.x*i.x+e.ey.x*i.y,s=e.ex.y*i.x+e.ey.y*i.y;return X.neo(n,s)},r.add=function(e,i){return new r(fn.add(e.ex,i.ex),fn.add(e.ey,i.ey),fn.add(e.ez,i.ez))},r}(),PY=Math.abs,xs;(function(r){r[r.inactiveLimit=0]="inactiveLimit",r[r.atLowerLimit=1]="atLowerLimit",r[r.atUpperLimit=2]="atUpperLimit",r[r.equalLimits=3]="equalLimits"})(xs||(xs={}));var Dv={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1},jf=function(r){Io(e,r);function e(i,n,s,o){var a=this,l,c,u,d,p,m;return a instanceof e?(i=i??{},a=r.call(this,i,n,s)||this,n=a.m_bodyA,s=a.m_bodyB,a.m_mass=new tp,a.m_limitState=xs.inactiveLimit,a.m_type=e.TYPE,X.isValid(o)?a.m_localAnchorA=n.getLocalPoint(o):X.isValid(i.localAnchorA)?a.m_localAnchorA=X.clone(i.localAnchorA):a.m_localAnchorA=X.zero(),X.isValid(o)?a.m_localAnchorB=s.getLocalPoint(o):X.isValid(i.localAnchorB)?a.m_localAnchorB=X.clone(i.localAnchorB):a.m_localAnchorB=X.zero(),Number.isFinite(i.referenceAngle)?a.m_referenceAngle=i.referenceAngle:a.m_referenceAngle=s.getAngle()-n.getAngle(),a.m_impulse=new fn,a.m_motorImpulse=0,a.m_lowerAngle=(l=i.lowerAngle)!==null&&l!==void 0?l:Dv.lowerAngle,a.m_upperAngle=(c=i.upperAngle)!==null&&c!==void 0?c:Dv.upperAngle,a.m_maxMotorTorque=(u=i.maxMotorTorque)!==null&&u!==void 0?u:Dv.maxMotorTorque,a.m_motorSpeed=(d=i.motorSpeed)!==null&&d!==void 0?d:Dv.motorSpeed,a.m_enableLimit=(p=i.enableLimit)!==null&&p!==void 0?p:Dv.enableLimit,a.m_enableMotor=(m=i.enableMotor)!==null&&m!==void 0?m:Dv.enableMotor,a):new e(i,n,s,o)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){i.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(i.anchorA)):i.localAnchorA&&this.m_localAnchorA.setVec2(i.localAnchorA),i.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(i.anchorB)):i.localAnchorB&&this.m_localAnchorB.setVec2(i.localAnchorB),Number.isFinite(i.referenceAngle)&&(this.m_referenceAngle=i.referenceAngle),i.enableLimit!==void 0&&(this.m_enableLimit=i.enableLimit),Number.isFinite(i.lowerAngle)&&(this.m_lowerAngle=i.lowerAngle),Number.isFinite(i.upperAngle)&&(this.m_upperAngle=i.upperAngle),Number.isFinite(i.maxMotorTorque)&&(this.m_maxMotorTorque=i.maxMotorTorque),Number.isFinite(i.motorSpeed)&&(this.m_motorSpeed=i.motorSpeed),i.enableMotor!==void 0&&(this.m_enableMotor=i.enableMotor)},e.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},e.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},e.prototype.getReferenceAngle=function(){return this.m_referenceAngle},e.prototype.getJointAngle=function(){var i=this.m_bodyA,n=this.m_bodyB;return n.m_sweep.a-i.m_sweep.a-this.m_referenceAngle},e.prototype.getJointSpeed=function(){var i=this.m_bodyA,n=this.m_bodyB;return n.m_angularVelocity-i.m_angularVelocity},e.prototype.isMotorEnabled=function(){return this.m_enableMotor},e.prototype.enableMotor=function(i){i!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=i)},e.prototype.getMotorTorque=function(i){return i*this.m_motorImpulse},e.prototype.setMotorSpeed=function(i){i!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=i)},e.prototype.getMotorSpeed=function(){return this.m_motorSpeed},e.prototype.setMaxMotorTorque=function(i){i!=this.m_maxMotorTorque&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=i)},e.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},e.prototype.isLimitEnabled=function(){return this.m_enableLimit},e.prototype.enableLimit=function(i){i!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=i,this.m_impulse.z=0)},e.prototype.getLowerLimit=function(){return this.m_lowerAngle},e.prototype.getUpperLimit=function(){return this.m_upperAngle},e.prototype.setLimits=function(i,n){(i!=this.m_lowerAngle||n!=this.m_upperAngle)&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=i,this.m_upperAngle=n)},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.neo(this.m_impulse.x,this.m_impulse.y).mul(i)},e.prototype.getReactionTorque=function(i){return i*this.m_impulse.z},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.a,s=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,c=this.m_bodyB.c_velocity.w,u=Ke.neo(n),d=Ke.neo(a);this.m_rA=Ke.mulVec2(u,X.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Ke.mulVec2(d,X.sub(this.m_localAnchorB,this.m_localCenterB));var p=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,y=this.m_invIB,_=g+y===0;if(this.m_mass.ex.x=p+m+this.m_rA.y*this.m_rA.y*g+this.m_rB.y*this.m_rB.y*y,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*g-this.m_rB.y*this.m_rB.x*y,this.m_mass.ez.x=-this.m_rA.y*g-this.m_rB.y*y,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=p+m+this.m_rA.x*this.m_rA.x*g+this.m_rB.x*this.m_rB.x*y,this.m_mass.ez.y=this.m_rA.x*g+this.m_rB.x*y,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=g+y,this.m_motorMass=g+y,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(this.m_enableMotor==!1||_)&&(this.m_motorImpulse=0),this.m_enableLimit&&_==!1){var x=a-n-this.m_referenceAngle;PY(this.m_upperAngle-this.m_lowerAngle)<2*Et.angularSlop?this.m_limitState=xs.equalLimits:x<=this.m_lowerAngle?(this.m_limitState!=xs.atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=xs.atLowerLimit):x>=this.m_upperAngle?(this.m_limitState!=xs.atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=xs.atUpperLimit):(this.m_limitState=xs.inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=xs.inactiveLimit;if(i.warmStarting){this.m_impulse.mul(i.dtRatio),this.m_motorImpulse*=i.dtRatio;var O=X.neo(this.m_impulse.x,this.m_impulse.y);s.subMul(p,O),o-=g*(X.crossVec2Vec2(this.m_rA,O)+this.m_motorImpulse+this.m_impulse.z),l.addMul(m,O),c+=y*(X.crossVec2Vec2(this.m_rB,O)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=s,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=l,this.m_bodyB.c_velocity.w=c},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB,p=u+d===0;if(this.m_enableMotor&&this.m_limitState!=xs.equalLimits&&p==!1){var m=a-s-this.m_motorSpeed,g=-this.m_motorMass*m,y=this.m_motorImpulse,_=i.dt*this.m_maxMotorTorque;this.m_motorImpulse=Gs(this.m_motorImpulse+g,-_,_),g=this.m_motorImpulse-y,s-=u*g,a+=d*g}if(this.m_enableLimit&&this.m_limitState!=xs.inactiveLimit&&p==!1){var x=X.zero();x.addCombine(1,o,1,X.crossNumVec2(a,this.m_rB)),x.subCombine(1,n,1,X.crossNumVec2(s,this.m_rA));var O=a-s,m=new fn(x.x,x.y,O),g=fn.neg(this.m_mass.solve33(m));if(this.m_limitState==xs.equalLimits)this.m_impulse.add(g);else if(this.m_limitState==xs.atLowerLimit){var S=this.m_impulse.z+g.z;if(S<0){var w=X.combine(-1,x,this.m_impulse.z,X.neo(this.m_mass.ez.x,this.m_mass.ez.y)),C=this.m_mass.solve22(w);g.x=C.x,g.y=C.y,g.z=-this.m_impulse.z,this.m_impulse.x+=C.x,this.m_impulse.y+=C.y,this.m_impulse.z=0}else this.m_impulse.add(g)}else if(this.m_limitState==xs.atUpperLimit){var S=this.m_impulse.z+g.z;if(S>0){var w=X.combine(-1,x,this.m_impulse.z,X.neo(this.m_mass.ez.x,this.m_mass.ez.y)),C=this.m_mass.solve22(w);g.x=C.x,g.y=C.y,g.z=-this.m_impulse.z,this.m_impulse.x+=C.x,this.m_impulse.y+=C.y,this.m_impulse.z=0}else this.m_impulse.add(g)}var M=X.neo(g.x,g.y);n.subMul(l,M),s-=u*(X.crossVec2Vec2(this.m_rA,M)+g.z),o.addMul(c,M),a+=d*(X.crossVec2Vec2(this.m_rB,M)+g.z)}else{var m=X.zero();m.addCombine(1,o,1,X.crossNumVec2(a,this.m_rB)),m.subCombine(1,n,1,X.crossNumVec2(s,this.m_rA));var g=this.m_mass.solve22(X.neg(m));this.m_impulse.x+=g.x,this.m_impulse.y+=g.y,n.subMul(l,g),s-=u*X.crossVec2Vec2(this.m_rA,g),o.addMul(c,g),a+=d*X.crossVec2Vec2(this.m_rB,g)}this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=Ke.neo(s),c=Ke.neo(a),u=0,d=0,p=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&this.m_limitState!=xs.inactiveLimit&&p==!1){var m=a-s-this.m_referenceAngle,g=0;if(this.m_limitState==xs.equalLimits){var y=Gs(m-this.m_lowerAngle,-Et.maxAngularCorrection,Et.maxAngularCorrection);g=-this.m_motorMass*y,u=PY(y)}else if(this.m_limitState==xs.atLowerLimit){var y=m-this.m_lowerAngle;u=-y,y=Gs(y+Et.angularSlop,-Et.maxAngularCorrection,0),g=-this.m_motorMass*y}else if(this.m_limitState==xs.atUpperLimit){var y=m-this.m_upperAngle;u=y,y=Gs(y-Et.angularSlop,0,Et.maxAngularCorrection),g=-this.m_motorMass*y}s-=this.m_invIA*g,a+=this.m_invIB*g}{l.setAngle(s),c.setAngle(a);var _=Ke.mulVec2(l,X.sub(this.m_localAnchorA,this.m_localCenterA)),x=Ke.mulVec2(c,X.sub(this.m_localAnchorB,this.m_localCenterB)),y=X.zero();y.addCombine(1,o,1,x),y.subCombine(1,n,1,_),d=y.length();var O=this.m_invMassA,S=this.m_invMassB,w=this.m_invIA,C=this.m_invIB,M=new oc;M.ex.x=O+S+w*_.y*_.y+C*x.y*x.y,M.ex.y=-w*_.x*_.y-C*x.x*x.y,M.ey.x=M.ex.y,M.ey.y=O+S+w*_.x*_.x+C*x.x*x.x;var P=X.neg(M.solve(y));n.subMul(O,P),s-=w*X.crossVec2Vec2(_,P),o.addMul(S,P),a+=C*X.crossVec2Vec2(x,P)}return this.m_bodyA.c_position.c.setVec2(n),this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=a,d<=Et.linearSlop&&u<=Et.angularSlop},e.TYPE="revolute-joint",e}(So),sb=Math.abs,kY=Math.max,bKe=Math.min,ga;(function(r){r[r.inactiveLimit=0]="inactiveLimit",r[r.atLowerLimit=1]="atLowerLimit",r[r.atUpperLimit=2]="atUpperLimit",r[r.equalLimits=3]="equalLimits"})(ga||(ga={}));var wKe={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0},IY=function(r){Io(e,r);function e(i,n,s,o,a){var l=this;return l instanceof e?(i=El(i,wKe),l=r.call(this,i,n,s)||this,n=l.m_bodyA,s=l.m_bodyB,l.m_type=e.TYPE,l.m_localAnchorA=X.clone(o?n.getLocalPoint(o):i.localAnchorA||X.zero()),l.m_localAnchorB=X.clone(o?s.getLocalPoint(o):i.localAnchorB||X.zero()),l.m_localXAxisA=X.clone(a?n.getLocalVector(a):i.localAxisA||X.neo(1,0)),l.m_localXAxisA.normalize(),l.m_localYAxisA=X.crossNumVec2(1,l.m_localXAxisA),l.m_referenceAngle=Number.isFinite(i.referenceAngle)?i.referenceAngle:s.getAngle()-n.getAngle(),l.m_impulse=new fn,l.m_motorMass=0,l.m_motorImpulse=0,l.m_lowerTranslation=i.lowerTranslation,l.m_upperTranslation=i.upperTranslation,l.m_maxMotorForce=i.maxMotorForce,l.m_motorSpeed=i.motorSpeed,l.m_enableLimit=i.enableLimit,l.m_enableMotor=i.enableMotor,l.m_limitState=ga.inactiveLimit,l.m_axis=X.zero(),l.m_perp=X.zero(),l.m_K=new tp,l):new e(i,n,s,o,a)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n),i.localAxisA=X.clone(i.localAxisA);var o=new e(i);return o},e.prototype._reset=function(i){i.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(i.anchorA)):i.localAnchorA&&this.m_localAnchorA.setVec2(i.localAnchorA),i.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(i.anchorB)):i.localAnchorB&&this.m_localAnchorB.setVec2(i.localAnchorB),i.localAxisA&&(this.m_localXAxisA.setVec2(i.localAxisA),this.m_localYAxisA.setVec2(X.crossNumVec2(1,i.localAxisA))),Number.isFinite(i.referenceAngle)&&(this.m_referenceAngle=i.referenceAngle),typeof i.enableLimit<"u"&&(this.m_enableLimit=!!i.enableLimit),Number.isFinite(i.lowerTranslation)&&(this.m_lowerTranslation=i.lowerTranslation),Number.isFinite(i.upperTranslation)&&(this.m_upperTranslation=i.upperTranslation),typeof i.enableMotor<"u"&&(this.m_enableMotor=!!i.enableMotor),Number.isFinite(i.maxMotorForce)&&(this.m_maxMotorForce=i.maxMotorForce),Number.isFinite(i.motorSpeed)&&(this.m_motorSpeed=i.motorSpeed)},e.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},e.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},e.prototype.getLocalAxisA=function(){return this.m_localXAxisA},e.prototype.getReferenceAngle=function(){return this.m_referenceAngle},e.prototype.getJointTranslation=function(){var i=this.m_bodyA.getWorldPoint(this.m_localAnchorA),n=this.m_bodyB.getWorldPoint(this.m_localAnchorB),s=X.sub(n,i),o=this.m_bodyA.getWorldVector(this.m_localXAxisA),a=X.dot(s,o);return a},e.prototype.getJointSpeed=function(){var i=this.m_bodyA,n=this.m_bodyB,s=Ke.mulVec2(i.m_xf.q,X.sub(this.m_localAnchorA,i.m_sweep.localCenter)),o=Ke.mulVec2(n.m_xf.q,X.sub(this.m_localAnchorB,n.m_sweep.localCenter)),a=X.add(i.m_sweep.c,s),l=X.add(n.m_sweep.c,o),c=X.sub(l,a),u=Ke.mulVec2(i.m_xf.q,this.m_localXAxisA),d=i.m_linearVelocity,p=n.m_linearVelocity,m=i.m_angularVelocity,g=n.m_angularVelocity,y=X.dot(c,X.crossNumVec2(m,u))+X.dot(u,X.sub(X.addCrossNumVec2(p,g,o),X.addCrossNumVec2(d,m,s)));return y},e.prototype.isLimitEnabled=function(){return this.m_enableLimit},e.prototype.enableLimit=function(i){i!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=i,this.m_impulse.z=0)},e.prototype.getLowerLimit=function(){return this.m_lowerTranslation},e.prototype.getUpperLimit=function(){return this.m_upperTranslation},e.prototype.setLimits=function(i,n){(i!=this.m_lowerTranslation||n!=this.m_upperTranslation)&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=i,this.m_upperTranslation=n,this.m_impulse.z=0)},e.prototype.isMotorEnabled=function(){return this.m_enableMotor},e.prototype.enableMotor=function(i){i!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=i)},e.prototype.setMotorSpeed=function(i){i!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=i)},e.prototype.setMaxMotorForce=function(i){i!=this.m_maxMotorForce&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=i)},e.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},e.prototype.getMotorSpeed=function(){return this.m_motorSpeed},e.prototype.getMotorForce=function(i){return i*this.m_motorImpulse},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(i)},e.prototype.getReactionTorque=function(i){return i*this.m_impulse.y},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,a=this.m_bodyA.c_velocity.w,l=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,d=this.m_bodyB.c_velocity.w,p=Ke.neo(s),m=Ke.neo(c),g=Ke.mulVec2(p,X.sub(this.m_localAnchorA,this.m_localCenterA)),y=Ke.mulVec2(m,X.sub(this.m_localAnchorB,this.m_localCenterB)),_=X.zero();_.addCombine(1,l,1,y),_.subCombine(1,n,1,g);var x=this.m_invMassA,O=this.m_invMassB,S=this.m_invIA,w=this.m_invIB;this.m_axis=Ke.mulVec2(p,this.m_localXAxisA),this.m_a1=X.crossVec2Vec2(X.add(_,g),this.m_axis),this.m_a2=X.crossVec2Vec2(y,this.m_axis),this.m_motorMass=x+O+S*this.m_a1*this.m_a1+w*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass);{this.m_perp=Ke.mulVec2(p,this.m_localYAxisA),this.m_s1=X.crossVec2Vec2(X.add(_,g),this.m_perp),this.m_s2=X.crossVec2Vec2(y,this.m_perp),X.crossVec2Vec2(g,this.m_perp);var C=x+O+S*this.m_s1*this.m_s1+w*this.m_s2*this.m_s2,M=S*this.m_s1+w*this.m_s2,P=S*this.m_s1*this.m_a1+w*this.m_s2*this.m_a2,R=S+w;R==0&&(R=1);var k=S*this.m_a1+w*this.m_a2,I=x+O+S*this.m_a1*this.m_a1+w*this.m_a2*this.m_a2;this.m_K.ex.set(C,M,P),this.m_K.ey.set(M,R,k),this.m_K.ez.set(P,k,I)}if(this.m_enableLimit){var A=X.dot(this.m_axis,_);sb(this.m_upperTranslation-this.m_lowerTranslation)<2*Et.linearSlop?this.m_limitState=ga.equalLimits:A<=this.m_lowerTranslation?this.m_limitState!=ga.atLowerLimit&&(this.m_limitState=ga.atLowerLimit,this.m_impulse.z=0):A>=this.m_upperTranslation?this.m_limitState!=ga.atUpperLimit&&(this.m_limitState=ga.atUpperLimit,this.m_impulse.z=0):(this.m_limitState=ga.inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=ga.inactiveLimit,this.m_impulse.z=0;if(this.m_enableMotor==!1&&(this.m_motorImpulse=0),i.warmStarting){this.m_impulse.mul(i.dtRatio),this.m_motorImpulse*=i.dtRatio;var D=X.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),V=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,B=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;o.subMul(x,D),a-=S*V,u.addMul(O,D),d+=w*B}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.setVec2(o),this.m_bodyA.c_velocity.w=a,this.m_bodyB.c_velocity.v.setVec2(u),this.m_bodyB.c_velocity.w=d},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!=ga.equalLimits){var p=X.dot(this.m_axis,X.sub(o,n))+this.m_a2*a-this.m_a1*s,m=this.m_motorMass*(this.m_motorSpeed-p),g=this.m_motorImpulse,y=i.dt*this.m_maxMotorForce;this.m_motorImpulse=Gs(this.m_motorImpulse+m,-y,y),m=this.m_motorImpulse-g;var _=X.mulNumVec2(m,this.m_axis),x=m*this.m_a1,O=m*this.m_a2;n.subMul(l,_),s-=u*x,o.addMul(c,_),a+=d*O}var S=X.zero();if(S.x+=X.dot(this.m_perp,o)+this.m_s2*a,S.x-=X.dot(this.m_perp,n)+this.m_s1*s,S.y=a-s,this.m_enableLimit&&this.m_limitState!=ga.inactiveLimit){var w=0;w+=X.dot(this.m_axis,o)+this.m_a2*a,w-=X.dot(this.m_axis,n)+this.m_a1*s;var p=new fn(S.x,S.y,w),C=fn.clone(this.m_impulse),M=this.m_K.solve33(fn.neg(p));this.m_impulse.add(M),this.m_limitState==ga.atLowerLimit?this.m_impulse.z=kY(this.m_impulse.z,0):this.m_limitState==ga.atUpperLimit&&(this.m_impulse.z=bKe(this.m_impulse.z,0));var P=X.combine(-1,S,-(this.m_impulse.z-C.z),X.neo(this.m_K.ez.x,this.m_K.ez.y)),R=X.add(this.m_K.solve22(P),X.neo(C.x,C.y));this.m_impulse.x=R.x,this.m_impulse.y=R.y,M=fn.sub(this.m_impulse,C);var _=X.combine(M.x,this.m_perp,M.z,this.m_axis),x=M.x*this.m_s1+M.y+M.z*this.m_a1,O=M.x*this.m_s2+M.y+M.z*this.m_a2;n.subMul(l,_),s-=u*x,o.addMul(c,_),a+=d*O}else{var M=this.m_K.solve22(X.neg(S));this.m_impulse.x+=M.x,this.m_impulse.y+=M.y;var _=X.mulNumVec2(M.x,this.m_perp),x=M.x*this.m_s1+M.y,O=M.x*this.m_s2+M.y;n.subMul(l,_),s-=u*x,o.addMul(c,_),a+=d*O}this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=Ke.neo(s),c=Ke.neo(a),u=this.m_invMassA,d=this.m_invMassB,p=this.m_invIA,m=this.m_invIB,g=Ke.mulVec2(l,X.sub(this.m_localAnchorA,this.m_localCenterA)),y=Ke.mulVec2(c,X.sub(this.m_localAnchorB,this.m_localCenterB)),_=X.sub(X.add(o,y),X.add(n,g)),x=Ke.mulVec2(l,this.m_localXAxisA),O=X.crossVec2Vec2(X.add(_,g),x),S=X.crossVec2Vec2(y,x),w=Ke.mulVec2(l,this.m_localYAxisA),C=X.crossVec2Vec2(X.add(_,g),w),M=X.crossVec2Vec2(y,w),P=new fn,R=X.zero();R.x=X.dot(w,_),R.y=a-s-this.m_referenceAngle;var k=sb(R.x),I=sb(R.y),A=Et.linearSlop,D=Et.maxLinearCorrection,V=!1,B=0;if(this.m_enableLimit){var L=X.dot(x,_);sb(this.m_upperTranslation-this.m_lowerTranslation)<2*A?(B=Gs(L,-D,D),k=kY(k,sb(L)),V=!0):L<=this.m_lowerTranslation?(B=Gs(L-this.m_lowerTranslation+A,-D,0),k=Math.max(k,this.m_lowerTranslation-L),V=!0):L>=this.m_upperTranslation&&(B=Gs(L-this.m_upperTranslation-A,0,D),k=Math.max(k,L-this.m_upperTranslation),V=!0)}if(V){var F=u+d+p*C*C+m*M*M,$=p*C+m*M,z=p*C*O+m*M*S,H=p+m;H==0&&(H=1);var K=p*O+m*S,J=u+d+p*O*O+m*S*S,ne=new tp;ne.ex.set(F,$,z),ne.ey.set($,H,K),ne.ez.set(z,K,J);var be=new fn;be.x=R.x,be.y=R.y,be.z=B,P=ne.solve33(fn.neg(be))}else{var F=u+d+p*C*C+m*M*M,$=p*C+m*M,H=p+m;H==0&&(H=1);var ne=new oc;ne.ex.setNum(F,$),ne.ey.setNum($,H);var pe=ne.solve(X.neg(R));P.x=pe.x,P.y=pe.y,P.z=0}var ae=X.combine(P.x,w,P.z,x),ye=P.x*C+P.y+P.z*O,_e=P.x*M+P.y+P.z*S;return n.subMul(u,ae),s-=p*ye,o.addMul(d,ae),a+=m*_e,this.m_bodyA.c_position.c=n,this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c=o,this.m_bodyB.c_position.a=a,k<=Et.linearSlop&&I<=Et.angularSlop},e.TYPE="prismatic-joint",e}(So),OKe={ratio:1},RY=function(r){Io(e,r);function e(i,n,s,o,a,l){var c=this;if(!(c instanceof e))return new e(i,n,s,o,a,l);i=El(i,OKe),c=r.call(this,i,n,s)||this,n=c.m_bodyA,s=c.m_bodyB,c.m_type=e.TYPE,c.m_joint1=o||i.joint1,c.m_joint2=a||i.joint2,c.m_ratio=Number.isFinite(l)?l:i.ratio,c.m_type1=c.m_joint1.getType(),c.m_type2=c.m_joint2.getType();var u,d;c.m_bodyC=c.m_joint1.getBodyA(),c.m_bodyA=c.m_joint1.getBodyB();var p=c.m_bodyA.m_xf,m=c.m_bodyA.m_sweep.a,g=c.m_bodyC.m_xf,y=c.m_bodyC.m_sweep.a;if(c.m_type1===jf.TYPE){var _=c.m_joint1;c.m_localAnchorC=_.m_localAnchorA,c.m_localAnchorA=_.m_localAnchorB,c.m_referenceAngleA=_.m_referenceAngle,c.m_localAxisC=X.zero(),u=m-y-c.m_referenceAngleA}else{var x=c.m_joint1;c.m_localAnchorC=x.m_localAnchorA,c.m_localAnchorA=x.m_localAnchorB,c.m_referenceAngleA=x.m_referenceAngle,c.m_localAxisC=x.m_localXAxisA;var O=c.m_localAnchorC,S=Ke.mulTVec2(g.q,X.add(Ke.mulVec2(p.q,c.m_localAnchorA),X.sub(p.p,g.p)));u=X.dot(S,c.m_localAxisC)-X.dot(O,c.m_localAxisC)}c.m_bodyD=c.m_joint2.getBodyA(),c.m_bodyB=c.m_joint2.getBodyB();var w=c.m_bodyB.m_xf,C=c.m_bodyB.m_sweep.a,M=c.m_bodyD.m_xf,P=c.m_bodyD.m_sweep.a;if(c.m_type2===jf.TYPE){var _=c.m_joint2;c.m_localAnchorD=_.m_localAnchorA,c.m_localAnchorB=_.m_localAnchorB,c.m_referenceAngleB=_.m_referenceAngle,c.m_localAxisD=X.zero(),d=C-P-c.m_referenceAngleB}else{var x=c.m_joint2;c.m_localAnchorD=x.m_localAnchorA,c.m_localAnchorB=x.m_localAnchorB,c.m_referenceAngleB=x.m_referenceAngle,c.m_localAxisD=x.m_localXAxisA;var R=c.m_localAnchorD,k=Ke.mulTVec2(M.q,X.add(Ke.mulVec2(w.q,c.m_localAnchorB),X.sub(w.p,M.p)));d=X.dot(k,c.m_localAxisD)-X.dot(R,c.m_localAxisD)}return c.m_constant=u+c.m_ratio*d,c.m_impulse=0,c}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n),i.joint1=s(So,i.joint1,n),i.joint2=s(So,i.joint2,n);var o=new e(i);return o},e.prototype._reset=function(i){Number.isFinite(i.ratio)&&(this.m_ratio=i.ratio)},e.prototype.getJoint1=function(){return this.m_joint1},e.prototype.getJoint2=function(){return this.m_joint2},e.prototype.setRatio=function(i){this.m_ratio=i},e.prototype.getRatio=function(){return this.m_ratio},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.mulNumVec2(this.m_impulse,this.m_JvAC).mul(i)},e.prototype.getReactionTorque=function(i){var n=this.m_impulse*this.m_JwA;return i*n},e.prototype.initVelocityConstraints=function(i){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var n=this.m_bodyA.c_position.a,s=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,c=this.m_bodyB.c_velocity.w,u=this.m_bodyC.c_position.a,d=this.m_bodyC.c_velocity.v,p=this.m_bodyC.c_velocity.w,m=this.m_bodyD.c_position.a,g=this.m_bodyD.c_velocity.v,y=this.m_bodyD.c_velocity.w,_=Ke.neo(n),x=Ke.neo(a),O=Ke.neo(u),S=Ke.neo(m);if(this.m_mass=0,this.m_type1==jf.TYPE)this.m_JvAC=X.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var w=Ke.mulVec2(O,this.m_localAxisC),C=Ke.mulSub(O,this.m_localAnchorC,this.m_lcC),M=Ke.mulSub(_,this.m_localAnchorA,this.m_lcA);this.m_JvAC=w,this.m_JwC=X.crossVec2Vec2(C,w),this.m_JwA=X.crossVec2Vec2(M,w),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==jf.TYPE)this.m_JvBD=X.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{var w=Ke.mulVec2(S,this.m_localAxisD),P=Ke.mulSub(S,this.m_localAnchorD,this.m_lcD),R=Ke.mulSub(x,this.m_localAnchorB,this.m_lcB);this.m_JvBD=X.mulNumVec2(this.m_ratio,w),this.m_JwD=this.m_ratio*X.crossVec2Vec2(P,w),this.m_JwB=this.m_ratio*X.crossVec2Vec2(R,w),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,i.warmStarting?(s.addMul(this.m_mA*this.m_impulse,this.m_JvAC),o+=this.m_iA*this.m_impulse*this.m_JwA,l.addMul(this.m_mB*this.m_impulse,this.m_JvBD),c+=this.m_iB*this.m_impulse*this.m_JwB,d.subMul(this.m_mC*this.m_impulse,this.m_JvAC),p-=this.m_iC*this.m_impulse*this.m_JwC,g.subMul(this.m_mD*this.m_impulse,this.m_JvBD),y-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.setVec2(s),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.setVec2(l),this.m_bodyB.c_velocity.w=c,this.m_bodyC.c_velocity.v.setVec2(d),this.m_bodyC.c_velocity.w=p,this.m_bodyD.c_velocity.v.setVec2(g),this.m_bodyD.c_velocity.w=y},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=this.m_bodyC.c_velocity.v,c=this.m_bodyC.c_velocity.w,u=this.m_bodyD.c_velocity.v,d=this.m_bodyD.c_velocity.w,p=X.dot(this.m_JvAC,n)-X.dot(this.m_JvAC,l)+X.dot(this.m_JvBD,o)-X.dot(this.m_JvBD,u);p+=this.m_JwA*s-this.m_JwC*c+(this.m_JwB*a-this.m_JwD*d);var m=-this.m_mass*p;this.m_impulse+=m,n.addMul(this.m_mA*m,this.m_JvAC),s+=this.m_iA*m*this.m_JwA,o.addMul(this.m_mB*m,this.m_JvBD),a+=this.m_iB*m*this.m_JwB,l.subMul(this.m_mC*m,this.m_JvAC),c-=this.m_iC*m*this.m_JwC,u.subMul(this.m_mD*m,this.m_JvBD),d-=this.m_iD*m*this.m_JwD,this.m_bodyA.c_velocity.v.setVec2(n),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.setVec2(o),this.m_bodyB.c_velocity.w=a,this.m_bodyC.c_velocity.v.setVec2(l),this.m_bodyC.c_velocity.w=c,this.m_bodyD.c_velocity.v.setVec2(u),this.m_bodyD.c_velocity.w=d},e.prototype.solvePositionConstraints=function(i){var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=this.m_bodyC.c_position.c,c=this.m_bodyC.c_position.a,u=this.m_bodyD.c_position.c,d=this.m_bodyD.c_position.a,p=Ke.neo(s),m=Ke.neo(a),g=Ke.neo(c),y=Ke.neo(d),_=0,x,O,S,w,C,M,P,R,k=0;if(this.m_type1==jf.TYPE)S=X.zero(),C=1,P=1,k+=this.m_iA+this.m_iC,x=s-c-this.m_referenceAngleA;else{var I=Ke.mulVec2(g,this.m_localAxisC),A=Ke.mulSub(g,this.m_localAnchorC,this.m_lcC),D=Ke.mulSub(p,this.m_localAnchorA,this.m_lcA);S=I,P=X.crossVec2Vec2(A,I),C=X.crossVec2Vec2(D,I),k+=this.m_mC+this.m_mA+this.m_iC*P*P+this.m_iA*C*C;var V=X.sub(this.m_localAnchorC,this.m_lcC),B=Ke.mulTVec2(g,X.add(D,X.sub(n,l)));x=X.dot(X.sub(B,V),this.m_localAxisC)}if(this.m_type2==jf.TYPE)w=X.zero(),M=this.m_ratio,R=this.m_ratio,k+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),O=a-d-this.m_referenceAngleB;else{var I=Ke.mulVec2(y,this.m_localAxisD),L=Ke.mulSub(y,this.m_localAnchorD,this.m_lcD),F=Ke.mulSub(m,this.m_localAnchorB,this.m_lcB);w=X.mulNumVec2(this.m_ratio,I),R=this.m_ratio*X.crossVec2Vec2(L,I),M=this.m_ratio*X.crossVec2Vec2(F,I),k+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*R*R+this.m_iB*M*M;var $=X.sub(this.m_localAnchorD,this.m_lcD),z=Ke.mulTVec2(y,X.add(F,X.sub(o,u)));O=X.dot(z,this.m_localAxisD)-X.dot($,this.m_localAxisD)}var H=x+this.m_ratio*O-this.m_constant,K=0;return k>0&&(K=-H/k),n.addMul(this.m_mA*K,S),s+=this.m_iA*K*C,o.addMul(this.m_mB*K,w),a+=this.m_iB*K*M,l.subMul(this.m_mC*K,S),c-=this.m_iC*K*P,u.subMul(this.m_mD*K,w),d-=this.m_iD*K*R,this.m_bodyA.c_position.c.setVec2(n),this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=a,this.m_bodyC.c_position.c.setVec2(l),this.m_bodyC.c_position.a=c,this.m_bodyD.c_position.c.setVec2(u),this.m_bodyD.c_position.a=d,_<Et.linearSlop},e.TYPE="gear-joint",e}(So),SKe={maxForce:1,maxTorque:1,correctionFactor:.3},BY=function(r){Io(e,r);function e(i,n,s){var o=this;return o instanceof e?(i=El(i,SKe),o=r.call(this,i,n,s)||this,n=o.m_bodyA,s=o.m_bodyB,o.m_type=e.TYPE,o.m_linearOffset=X.isValid(i.linearOffset)?X.clone(i.linearOffset):n.getLocalPoint(s.getPosition()),o.m_angularOffset=Number.isFinite(i.angularOffset)?i.angularOffset:s.getAngle()-n.getAngle(),o.m_linearImpulse=X.zero(),o.m_angularImpulse=0,o.m_maxForce=i.maxForce,o.m_maxTorque=i.maxTorque,o.m_correctionFactor=i.correctionFactor,o):new e(i,n,s)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){Number.isFinite(i.angularOffset)&&(this.m_angularOffset=i.angularOffset),Number.isFinite(i.maxForce)&&(this.m_maxForce=i.maxForce),Number.isFinite(i.maxTorque)&&(this.m_maxTorque=i.maxTorque),Number.isFinite(i.correctionFactor)&&(this.m_correctionFactor=i.correctionFactor),X.isValid(i.linearOffset)&&this.m_linearOffset.set(i.linearOffset)},e.prototype.setMaxForce=function(i){this.m_maxForce=i},e.prototype.getMaxForce=function(){return this.m_maxForce},e.prototype.setMaxTorque=function(i){this.m_maxTorque=i},e.prototype.getMaxTorque=function(){return this.m_maxTorque},e.prototype.setCorrectionFactor=function(i){this.m_correctionFactor=i},e.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},e.prototype.setLinearOffset=function(i){(i.x!=this.m_linearOffset.x||i.y!=this.m_linearOffset.y)&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset.set(i))},e.prototype.getLinearOffset=function(){return this.m_linearOffset},e.prototype.setAngularOffset=function(i){i!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=i)},e.prototype.getAngularOffset=function(){return this.m_angularOffset},e.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},e.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},e.prototype.getReactionForce=function(i){return X.mulNumVec2(i,this.m_linearImpulse)},e.prototype.getReactionTorque=function(i){return i*this.m_angularImpulse},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,a=this.m_bodyA.c_velocity.w,l=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,d=this.m_bodyB.c_velocity.w,p=Ke.neo(s),m=Ke.neo(c);this.m_rA=Ke.mulVec2(p,X.sub(this.m_linearOffset,this.m_localCenterA)),this.m_rB=Ke.mulVec2(m,X.neg(this.m_localCenterB));var g=this.m_invMassA,y=this.m_invMassB,_=this.m_invIA,x=this.m_invIB,O=new oc;if(O.ex.x=g+y+_*this.m_rA.y*this.m_rA.y+x*this.m_rB.y*this.m_rB.y,O.ex.y=-_*this.m_rA.x*this.m_rA.y-x*this.m_rB.x*this.m_rB.y,O.ey.x=O.ex.y,O.ey.y=g+y+_*this.m_rA.x*this.m_rA.x+x*this.m_rB.x*this.m_rB.x,this.m_linearMass=O.getInverse(),this.m_angularMass=_+x,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=X.zero(),this.m_linearError.addCombine(1,l,1,this.m_rB),this.m_linearError.subCombine(1,n,1,this.m_rA),this.m_angularError=c-s-this.m_angularOffset,i.warmStarting){this.m_linearImpulse.mul(i.dtRatio),this.m_angularImpulse*=i.dtRatio;var S=X.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);o.subMul(g,S),a-=_*(X.crossVec2Vec2(this.m_rA,S)+this.m_angularImpulse),u.addMul(y,S),d+=x*(X.crossVec2Vec2(this.m_rB,S)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=o,this.m_bodyA.c_velocity.w=a,this.m_bodyB.c_velocity.v=u,this.m_bodyB.c_velocity.w=d},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB,p=i.dt,m=i.inv_dt;{var g=a-s+m*this.m_correctionFactor*this.m_angularError,y=-this.m_angularMass*g,_=this.m_angularImpulse,x=p*this.m_maxTorque;this.m_angularImpulse=Gs(this.m_angularImpulse+y,-x,x),y=this.m_angularImpulse-_,s-=u*y,a+=d*y}{var g=X.zero();g.addCombine(1,o,1,X.crossNumVec2(a,this.m_rB)),g.subCombine(1,n,1,X.crossNumVec2(s,this.m_rA)),g.addMul(m*this.m_correctionFactor,this.m_linearError);var y=X.neg(oc.mulVec2(this.m_linearMass,g)),_=X.clone(this.m_linearImpulse);this.m_linearImpulse.add(y);var x=p*this.m_maxForce;this.m_linearImpulse.clamp(x),y=X.sub(this.m_linearImpulse,_),n.subMul(l,y),s-=u*X.crossVec2Vec2(this.m_rA,y),o.addMul(c,y),a+=d*X.crossVec2Vec2(this.m_rB,y)}this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){return!0},e.TYPE="motor-joint",e}(So),CKe=Math.PI,TKe={maxForce:0,frequencyHz:5,dampingRatio:.7},DY=function(r){Io(e,r);function e(i,n,s,o){var a=this;return a instanceof e?(i=El(i,TKe),a=r.call(this,i,n,s)||this,n=a.m_bodyA,s=a.m_bodyB,a.m_type=e.TYPE,X.isValid(o)?a.m_targetA=X.clone(o):X.isValid(i.target)?a.m_targetA=X.clone(i.target):a.m_targetA=X.zero(),a.m_localAnchorB=sc.mulTVec2(s.getTransform(),a.m_targetA),a.m_maxForce=i.maxForce,a.m_impulse=X.zero(),a.m_frequencyHz=i.frequencyHz,a.m_dampingRatio=i.dampingRatio,a.m_beta=0,a.m_gamma=0,a.m_rB=X.zero(),a.m_localCenterB=X.zero(),a.m_invMassB=0,a.m_invIB=0,a.m_mass=new oc,a.m_C=X.zero(),a):new e(i,n,s,o)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n),i.target=X.clone(i.target);var o=new e(i);return i._localAnchorB&&(o.m_localAnchorB=i._localAnchorB),o},e.prototype._reset=function(i){Number.isFinite(i.maxForce)&&(this.m_maxForce=i.maxForce),Number.isFinite(i.frequencyHz)&&(this.m_frequencyHz=i.frequencyHz),Number.isFinite(i.dampingRatio)&&(this.m_dampingRatio=i.dampingRatio)},e.prototype.setTarget=function(i){X.areEqual(i,this.m_targetA)||(this.m_bodyB.setAwake(!0),this.m_targetA.set(i))},e.prototype.getTarget=function(){return this.m_targetA},e.prototype.setMaxForce=function(i){this.m_maxForce=i},e.prototype.getMaxForce=function(){return this.m_maxForce},e.prototype.setFrequency=function(i){this.m_frequencyHz=i},e.prototype.getFrequency=function(){return this.m_frequencyHz},e.prototype.setDampingRatio=function(i){this.m_dampingRatio=i},e.prototype.getDampingRatio=function(){return this.m_dampingRatio},e.prototype.getAnchorA=function(){return X.clone(this.m_targetA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.mulNumVec2(i,this.m_impulse)},e.prototype.getReactionTorque=function(i){return i*0},e.prototype.shiftOrigin=function(i){this.m_targetA.sub(i)},e.prototype.initVelocityConstraints=function(i){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyB.c_position,s=this.m_bodyB.c_velocity,o=n.c,a=n.a,l=s.v,c=s.w,u=Ke.neo(a),d=this.m_bodyB.getMass(),p=2*CKe*this.m_frequencyHz,m=2*d*this.m_dampingRatio*p,g=d*(p*p),y=i.dt;this.m_gamma=y*(m+y*g),this.m_gamma!=0&&(this.m_gamma=1/this.m_gamma),this.m_beta=y*g*this.m_gamma,this.m_rB=Ke.mulVec2(u,X.sub(this.m_localAnchorB,this.m_localCenterB));var _=new oc;_.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,_.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,_.ey.x=_.ex.y,_.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=_.getInverse(),this.m_C.setVec2(o),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),c*=.98,i.warmStarting?(this.m_impulse.mul(i.dtRatio),l.addMul(this.m_invMassB,this.m_impulse),c+=this.m_invIB*X.crossVec2Vec2(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),s.v.setVec2(l),s.w=c},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyB.c_velocity,s=X.clone(n.v),o=n.w,a=X.crossNumVec2(o,this.m_rB);a.add(s),a.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),a.neg();var l=oc.mulVec2(this.m_mass,a),c=X.clone(this.m_impulse);this.m_impulse.add(l);var u=i.dt*this.m_maxForce;this.m_impulse.clamp(u),l=X.sub(this.m_impulse,c),s.addMul(this.m_invMassB,l),o+=this.m_invIB*X.crossVec2Vec2(this.m_rB,l),n.v.setVec2(s),n.w=o},e.prototype.solvePositionConstraints=function(i){return!0},e.TYPE="mouse-joint",e}(So),AKe=Math.abs,EKe={collideConnected:!0},LY=function(r){Io(e,r);function e(i,n,s,o,a,l,c,u){var d=this;return d instanceof e?(i=El(i,EKe),d=r.call(this,i,n,s)||this,n=d.m_bodyA,s=d.m_bodyB,d.m_type=e.TYPE,d.m_groundAnchorA=X.clone(o||i.groundAnchorA||X.neo(-1,1)),d.m_groundAnchorB=X.clone(a||i.groundAnchorB||X.neo(1,1)),d.m_localAnchorA=X.clone(l?n.getLocalPoint(l):i.localAnchorA||X.neo(-1,0)),d.m_localAnchorB=X.clone(c?s.getLocalPoint(c):i.localAnchorB||X.neo(1,0)),d.m_lengthA=Number.isFinite(i.lengthA)?i.lengthA:X.distance(l,o),d.m_lengthB=Number.isFinite(i.lengthB)?i.lengthB:X.distance(c,a),d.m_ratio=Number.isFinite(u)?u:i.ratio,d.m_constant=d.m_lengthA+d.m_ratio*d.m_lengthB,d.m_impulse=0,d):new e(i,n,s,o,a,l,c,u)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){X.isValid(i.groundAnchorA)&&this.m_groundAnchorA.set(i.groundAnchorA),X.isValid(i.groundAnchorB)&&this.m_groundAnchorB.set(i.groundAnchorB),X.isValid(i.localAnchorA)?this.m_localAnchorA.set(i.localAnchorA):X.isValid(i.anchorA)&&this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(i.anchorA)),X.isValid(i.localAnchorB)?this.m_localAnchorB.set(i.localAnchorB):X.isValid(i.anchorB)&&this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(i.anchorB)),Number.isFinite(i.lengthA)&&(this.m_lengthA=i.lengthA),Number.isFinite(i.lengthB)&&(this.m_lengthB=i.lengthB),Number.isFinite(i.ratio)&&(this.m_ratio=i.ratio)},e.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},e.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},e.prototype.getLengthA=function(){return this.m_lengthA},e.prototype.getLengthB=function(){return this.m_lengthB},e.prototype.getRatio=function(){return this.m_ratio},e.prototype.getCurrentLengthA=function(){var i=this.m_bodyA.getWorldPoint(this.m_localAnchorA),n=this.m_groundAnchorA;return X.distance(i,n)},e.prototype.getCurrentLengthB=function(){var i=this.m_bodyB.getWorldPoint(this.m_localAnchorB),n=this.m_groundAnchorB;return X.distance(i,n)},e.prototype.shiftOrigin=function(i){this.m_groundAnchorA.sub(i),this.m_groundAnchorB.sub(i)},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.mulNumVec2(this.m_impulse,this.m_uB).mul(i)},e.prototype.getReactionTorque=function(i){return 0},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,a=this.m_bodyA.c_velocity.w,l=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,d=this.m_bodyB.c_velocity.w,p=Ke.neo(s),m=Ke.neo(c);this.m_rA=Ke.mulVec2(p,X.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Ke.mulVec2(m,X.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=X.sub(X.add(n,this.m_rA),this.m_groundAnchorA),this.m_uB=X.sub(X.add(l,this.m_rB),this.m_groundAnchorB);var g=this.m_uA.length(),y=this.m_uB.length();g>10*Et.linearSlop?this.m_uA.mul(1/g):this.m_uA.setZero(),y>10*Et.linearSlop?this.m_uB.mul(1/y):this.m_uB.setZero();var _=X.crossVec2Vec2(this.m_rA,this.m_uA),x=X.crossVec2Vec2(this.m_rB,this.m_uB),O=this.m_invMassA+this.m_invIA*_*_,S=this.m_invMassB+this.m_invIB*x*x;if(this.m_mass=O+this.m_ratio*this.m_ratio*S,this.m_mass>0&&(this.m_mass=1/this.m_mass),i.warmStarting){this.m_impulse*=i.dtRatio;var w=X.mulNumVec2(-this.m_impulse,this.m_uA),C=X.mulNumVec2(-this.m_ratio*this.m_impulse,this.m_uB);o.addMul(this.m_invMassA,w),a+=this.m_invIA*X.crossVec2Vec2(this.m_rA,w),u.addMul(this.m_invMassB,C),d+=this.m_invIB*X.crossVec2Vec2(this.m_rB,C)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=o,this.m_bodyA.c_velocity.w=a,this.m_bodyB.c_velocity.v=u,this.m_bodyB.c_velocity.w=d},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=X.add(n,X.crossNumVec2(s,this.m_rA)),c=X.add(o,X.crossNumVec2(a,this.m_rB)),u=-X.dot(this.m_uA,l)-this.m_ratio*X.dot(this.m_uB,c),d=-this.m_mass*u;this.m_impulse+=d;var p=X.mulNumVec2(-d,this.m_uA),m=X.mulNumVec2(-this.m_ratio*d,this.m_uB);n.addMul(this.m_invMassA,p),s+=this.m_invIA*X.crossVec2Vec2(this.m_rA,p),o.addMul(this.m_invMassB,m),a+=this.m_invIB*X.crossVec2Vec2(this.m_rB,m),this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=Ke.neo(s),c=Ke.neo(a),u=Ke.mulVec2(l,X.sub(this.m_localAnchorA,this.m_localCenterA)),d=Ke.mulVec2(c,X.sub(this.m_localAnchorB,this.m_localCenterB)),p=X.sub(X.add(n,this.m_rA),this.m_groundAnchorA),m=X.sub(X.add(o,this.m_rB),this.m_groundAnchorB),g=p.length(),y=m.length();g>10*Et.linearSlop?p.mul(1/g):p.setZero(),y>10*Et.linearSlop?m.mul(1/y):m.setZero();var _=X.crossVec2Vec2(u,p),x=X.crossVec2Vec2(d,m),O=this.m_invMassA+this.m_invIA*_*_,S=this.m_invMassB+this.m_invIB*x*x,w=O+this.m_ratio*this.m_ratio*S;w>0&&(w=1/w);var C=this.m_constant-g-this.m_ratio*y,M=AKe(C),P=-w*C,R=X.mulNumVec2(-P,p),k=X.mulNumVec2(-this.m_ratio*P,m);return n.addMul(this.m_invMassA,R),s+=this.m_invIA*X.crossVec2Vec2(u,R),o.addMul(this.m_invMassB,k),a+=this.m_invIB*X.crossVec2Vec2(d,k),this.m_bodyA.c_position.c=n,this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c=o,this.m_bodyB.c_position.a=a,M<Et.linearSlop},e.TYPE="pulley-joint",e}(So),MKe=Math.min,aw;(function(r){r[r.inactiveLimit=0]="inactiveLimit",r[r.atLowerLimit=1]="atLowerLimit",r[r.atUpperLimit=2]="atUpperLimit",r[r.equalLimits=3]="equalLimits"})(aw||(aw={}));var PKe={maxLength:0},NY=function(r){Io(e,r);function e(i,n,s,o){var a=this;return a instanceof e?(i=El(i,PKe),a=r.call(this,i,n,s)||this,n=a.m_bodyA,s=a.m_bodyB,a.m_type=e.TYPE,a.m_localAnchorA=X.clone(o?n.getLocalPoint(o):i.localAnchorA||X.neo(-1,0)),a.m_localAnchorB=X.clone(o?s.getLocalPoint(o):i.localAnchorB||X.neo(1,0)),a.m_maxLength=i.maxLength,a.m_mass=0,a.m_impulse=0,a.m_length=0,a.m_state=aw.inactiveLimit,a):new e(i,n,s,o)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){Number.isFinite(i.maxLength)&&(this.m_maxLength=i.maxLength)},e.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},e.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},e.prototype.setMaxLength=function(i){this.m_maxLength=i},e.prototype.getMaxLength=function(){return this.m_maxLength},e.prototype.getLimitState=function(){return this.m_state},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.mulNumVec2(this.m_impulse,this.m_u).mul(i)},e.prototype.getReactionTorque=function(i){return 0},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,a=this.m_bodyA.c_velocity.w,l=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,d=this.m_bodyB.c_velocity.w,p=Ke.neo(s),m=Ke.neo(c);this.m_rA=Ke.mulSub(p,this.m_localAnchorA,this.m_localCenterA),this.m_rB=Ke.mulSub(m,this.m_localAnchorB,this.m_localCenterB),this.m_u=X.zero(),this.m_u.addCombine(1,l,1,this.m_rB),this.m_u.subCombine(1,n,1,this.m_rA),this.m_length=this.m_u.length();var g=this.m_length-this.m_maxLength;if(g>0?this.m_state=aw.atUpperLimit:this.m_state=aw.inactiveLimit,this.m_length>Et.linearSlop)this.m_u.mul(1/this.m_length);else{this.m_u.setZero(),this.m_mass=0,this.m_impulse=0;return}var y=X.crossVec2Vec2(this.m_rA,this.m_u),_=X.crossVec2Vec2(this.m_rB,this.m_u),x=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*_*_;if(this.m_mass=x!=0?1/x:0,i.warmStarting){this.m_impulse*=i.dtRatio;var O=X.mulNumVec2(this.m_impulse,this.m_u);o.subMul(this.m_invMassA,O),a-=this.m_invIA*X.crossVec2Vec2(this.m_rA,O),u.addMul(this.m_invMassB,O),d+=this.m_invIB*X.crossVec2Vec2(this.m_rB,O)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.setVec2(o),this.m_bodyA.c_velocity.w=a,this.m_bodyB.c_velocity.v.setVec2(u),this.m_bodyB.c_velocity.w=d},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=X.addCrossNumVec2(n,s,this.m_rA),c=X.addCrossNumVec2(o,a,this.m_rB),u=this.m_length-this.m_maxLength,d=X.dot(this.m_u,X.sub(c,l));u<0&&(d+=i.inv_dt*u);var p=-this.m_mass*d,m=this.m_impulse;this.m_impulse=MKe(0,this.m_impulse+p),p=this.m_impulse-m;var g=X.mulNumVec2(p,this.m_u);n.subMul(this.m_invMassA,g),s-=this.m_invIA*X.crossVec2Vec2(this.m_rA,g),o.addMul(this.m_invMassB,g),a+=this.m_invIB*X.crossVec2Vec2(this.m_rB,g),this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=Ke.neo(s),c=Ke.neo(a),u=Ke.mulSub(l,this.m_localAnchorA,this.m_localCenterA),d=Ke.mulSub(c,this.m_localAnchorB,this.m_localCenterB),p=X.zero();p.addCombine(1,o,1,d),p.subCombine(1,n,1,u);var m=p.normalize(),g=m-this.m_maxLength;g=Gs(g,0,Et.maxLinearCorrection);var y=-this.m_mass*g,_=X.mulNumVec2(y,p);return n.subMul(this.m_invMassA,_),s-=this.m_invIA*X.crossVec2Vec2(u,_),o.addMul(this.m_invMassB,_),a+=this.m_invIB*X.crossVec2Vec2(d,_),this.m_bodyA.c_position.c.setVec2(n),this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=a,m-this.m_maxLength<Et.linearSlop},e.TYPE="rope-joint",e}(So),kKe=Math.abs,IKe=Math.PI,RKe={frequencyHz:0,dampingRatio:0},VY=function(r){Io(e,r);function e(i,n,s,o){var a=this;return a instanceof e?(i=El(i,RKe),a=r.call(this,i,n,s)||this,n=a.m_bodyA,s=a.m_bodyB,a.m_type=e.TYPE,a.m_localAnchorA=X.clone(o?n.getLocalPoint(o):i.localAnchorA||X.zero()),a.m_localAnchorB=X.clone(o?s.getLocalPoint(o):i.localAnchorB||X.zero()),a.m_referenceAngle=Number.isFinite(i.referenceAngle)?i.referenceAngle:s.getAngle()-n.getAngle(),a.m_frequencyHz=i.frequencyHz,a.m_dampingRatio=i.dampingRatio,a.m_impulse=new fn,a.m_bias=0,a.m_gamma=0,a.m_mass=new tp,a):new e(i,n,s,o)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){i.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(i.anchorA)):i.localAnchorA&&this.m_localAnchorA.setVec2(i.localAnchorA),i.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(i.anchorB)):i.localAnchorB&&this.m_localAnchorB.setVec2(i.localAnchorB),Number.isFinite(i.frequencyHz)&&(this.m_frequencyHz=i.frequencyHz),Number.isFinite(i.dampingRatio)&&(this.m_dampingRatio=i.dampingRatio)},e.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},e.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},e.prototype.getReferenceAngle=function(){return this.m_referenceAngle},e.prototype.setFrequency=function(i){this.m_frequencyHz=i},e.prototype.getFrequency=function(){return this.m_frequencyHz},e.prototype.setDampingRatio=function(i){this.m_dampingRatio=i},e.prototype.getDampingRatio=function(){return this.m_dampingRatio},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.neo(this.m_impulse.x,this.m_impulse.y).mul(i)},e.prototype.getReactionTorque=function(i){return i*this.m_impulse.z},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_bodyA.c_position.a,s=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,c=this.m_bodyB.c_velocity.w,u=Ke.neo(n),d=Ke.neo(a);this.m_rA=Ke.mulVec2(u,X.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Ke.mulVec2(d,X.sub(this.m_localAnchorB,this.m_localCenterB));var p=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,y=this.m_invIB,_=new tp;if(_.ex.x=p+m+this.m_rA.y*this.m_rA.y*g+this.m_rB.y*this.m_rB.y*y,_.ey.x=-this.m_rA.y*this.m_rA.x*g-this.m_rB.y*this.m_rB.x*y,_.ez.x=-this.m_rA.y*g-this.m_rB.y*y,_.ex.y=_.ey.x,_.ey.y=p+m+this.m_rA.x*this.m_rA.x*g+this.m_rB.x*this.m_rB.x*y,_.ez.y=this.m_rA.x*g+this.m_rB.x*y,_.ex.z=_.ez.x,_.ey.z=_.ez.y,_.ez.z=g+y,this.m_frequencyHz>0){_.getInverse22(this.m_mass);var x=g+y,O=x>0?1/x:0,S=a-n-this.m_referenceAngle,w=2*IKe*this.m_frequencyHz,C=2*O*this.m_dampingRatio*w,M=O*w*w,P=i.dt;this.m_gamma=P*(C+P*M),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_bias=S*P*M*this.m_gamma,x+=this.m_gamma,this.m_mass.ez.z=x!=0?1/x:0}else _.ez.z==0?(_.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(_.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(i.warmStarting){this.m_impulse.mul(i.dtRatio);var R=X.neo(this.m_impulse.x,this.m_impulse.y);s.subMul(p,R),o-=g*(X.crossVec2Vec2(this.m_rA,R)+this.m_impulse.z),l.addMul(m,R),c+=y*(X.crossVec2Vec2(this.m_rB,R)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=s,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=l,this.m_bodyB.c_velocity.w=c},e.prototype.solveVelocityConstraints=function(i){var n=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_velocity.v,a=this.m_bodyB.c_velocity.w,l=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB;if(this.m_frequencyHz>0){var p=a-s,m=-this.m_mass.ez.z*(p+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=m,s-=u*m,a+=d*m;var g=X.zero();g.addCombine(1,o,1,X.crossNumVec2(a,this.m_rB)),g.subCombine(1,n,1,X.crossNumVec2(s,this.m_rA));var y=X.neg(tp.mulVec2(this.m_mass,g));this.m_impulse.x+=y.x,this.m_impulse.y+=y.y;var _=X.clone(y);n.subMul(l,_),s-=u*X.crossVec2Vec2(this.m_rA,_),o.addMul(c,_),a+=d*X.crossVec2Vec2(this.m_rB,_)}else{var g=X.zero();g.addCombine(1,o,1,X.crossNumVec2(a,this.m_rB)),g.subCombine(1,n,1,X.crossNumVec2(s,this.m_rA));var p=a-s,x=new fn(g.x,g.y,p),O=fn.neg(tp.mulVec3(this.m_mass,x));this.m_impulse.add(O);var _=X.neo(O.x,O.y);n.subMul(l,_),s-=u*(X.crossVec2Vec2(this.m_rA,_)+O.z),o.addMul(c,_),a+=d*(X.crossVec2Vec2(this.m_rB,_)+O.z)}this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=a},e.prototype.solvePositionConstraints=function(i){var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=Ke.neo(s),c=Ke.neo(a),u=this.m_invMassA,d=this.m_invMassB,p=this.m_invIA,m=this.m_invIB,g=Ke.mulVec2(l,X.sub(this.m_localAnchorA,this.m_localCenterA)),y=Ke.mulVec2(c,X.sub(this.m_localAnchorB,this.m_localCenterB)),_,x,O=new tp;if(O.ex.x=u+d+g.y*g.y*p+y.y*y.y*m,O.ey.x=-g.y*g.x*p-y.y*y.x*m,O.ez.x=-g.y*p-y.y*m,O.ex.y=O.ey.x,O.ey.y=u+d+g.x*g.x*p+y.x*y.x*m,O.ez.y=g.x*p+y.x*m,O.ex.z=O.ez.x,O.ey.z=O.ez.y,O.ez.z=p+m,this.m_frequencyHz>0){var S=X.zero();S.addCombine(1,o,1,y),S.subCombine(1,n,1,g),_=S.length(),x=0;var w=X.neg(O.solve22(S));n.subMul(u,w),s-=p*X.crossVec2Vec2(g,w),o.addMul(d,w),a+=m*X.crossVec2Vec2(y,w)}else{var S=X.zero();S.addCombine(1,o,1,y),S.subCombine(1,n,1,g);var C=a-s-this.m_referenceAngle;_=S.length(),x=kKe(C);var M=new fn(S.x,S.y,C),P=new fn;if(O.ez.z>0)P=fn.neg(O.solve33(M));else{var R=X.neg(O.solve22(S));P.set(R.x,R.y,0)}var w=X.neo(P.x,P.y);n.subMul(u,w),s-=p*(X.crossVec2Vec2(g,w)+P.z),o.addMul(d,w),a+=m*(X.crossVec2Vec2(y,w)+P.z)}return this.m_bodyA.c_position.c=n,this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c=o,this.m_bodyB.c_position.a=a,_<=Et.linearSlop&&x<=Et.angularSlop},e.TYPE="weld-joint",e}(So),BKe=Math.abs,DKe=Math.PI,LKe={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7},FY=function(r){Io(e,r);function e(i,n,s,o,a){var l=this;return l instanceof e?(i=El(i,LKe),l=r.call(this,i,n,s)||this,n=l.m_bodyA,s=l.m_bodyB,l.m_ax=X.zero(),l.m_ay=X.zero(),l.m_type=e.TYPE,l.m_localAnchorA=X.clone(o?n.getLocalPoint(o):i.localAnchorA||X.zero()),l.m_localAnchorB=X.clone(o?s.getLocalPoint(o):i.localAnchorB||X.zero()),X.isValid(a)?l.m_localXAxisA=n.getLocalVector(a):X.isValid(i.localAxisA)?l.m_localXAxisA=X.clone(i.localAxisA):X.isValid(i.localAxis)?l.m_localXAxisA=X.clone(i.localAxis):l.m_localXAxisA=X.neo(1,0),l.m_localYAxisA=X.crossNumVec2(1,l.m_localXAxisA),l.m_mass=0,l.m_impulse=0,l.m_motorMass=0,l.m_motorImpulse=0,l.m_springMass=0,l.m_springImpulse=0,l.m_maxMotorTorque=i.maxMotorTorque,l.m_motorSpeed=i.motorSpeed,l.m_enableMotor=i.enableMotor,l.m_frequencyHz=i.frequencyHz,l.m_dampingRatio=i.dampingRatio,l.m_bias=0,l.m_gamma=0,l):new e(i,n,s,o,a)}return e.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},e._deserialize=function(i,n,s){i=Ao({},i),i.bodyA=s(xn,i.bodyA,n),i.bodyB=s(xn,i.bodyB,n);var o=new e(i);return o},e.prototype._reset=function(i){i.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(i.anchorA)):i.localAnchorA&&this.m_localAnchorA.setVec2(i.localAnchorA),i.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(i.anchorB)):i.localAnchorB&&this.m_localAnchorB.setVec2(i.localAnchorB),i.localAxisA&&(this.m_localXAxisA.setVec2(i.localAxisA),this.m_localYAxisA.setVec2(X.crossNumVec2(1,i.localAxisA))),i.enableMotor!==void 0&&(this.m_enableMotor=i.enableMotor),Number.isFinite(i.maxMotorTorque)&&(this.m_maxMotorTorque=i.maxMotorTorque),Number.isFinite(i.motorSpeed)&&(this.m_motorSpeed=i.motorSpeed),Number.isFinite(i.frequencyHz)&&(this.m_frequencyHz=i.frequencyHz),Number.isFinite(i.dampingRatio)&&(this.m_dampingRatio=i.dampingRatio)},e.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},e.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},e.prototype.getLocalAxisA=function(){return this.m_localXAxisA},e.prototype.getJointTranslation=function(){var i=this.m_bodyA,n=this.m_bodyB,s=i.getWorldPoint(this.m_localAnchorA),o=n.getWorldPoint(this.m_localAnchorB),a=X.sub(o,s),l=i.getWorldVector(this.m_localXAxisA),c=X.dot(a,l);return c},e.prototype.getJointSpeed=function(){var i=this.m_bodyA.m_angularVelocity,n=this.m_bodyB.m_angularVelocity;return n-i},e.prototype.isMotorEnabled=function(){return this.m_enableMotor},e.prototype.enableMotor=function(i){i!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=i)},e.prototype.setMotorSpeed=function(i){i!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=i)},e.prototype.getMotorSpeed=function(){return this.m_motorSpeed},e.prototype.setMaxMotorTorque=function(i){i!=this.m_maxMotorTorque&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=i)},e.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},e.prototype.getMotorTorque=function(i){return i*this.m_motorImpulse},e.prototype.setSpringFrequencyHz=function(i){this.m_frequencyHz=i},e.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},e.prototype.setSpringDampingRatio=function(i){this.m_dampingRatio=i},e.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},e.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},e.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},e.prototype.getReactionForce=function(i){return X.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(i)},e.prototype.getReactionTorque=function(i){return i*this.m_motorImpulse},e.prototype.initVelocityConstraints=function(i){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var n=this.m_invMassA,s=this.m_invMassB,o=this.m_invIA,a=this.m_invIB,l=this.m_bodyA.c_position.c,c=this.m_bodyA.c_position.a,u=this.m_bodyA.c_velocity.v,d=this.m_bodyA.c_velocity.w,p=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,g=this.m_bodyB.c_velocity.v,y=this.m_bodyB.c_velocity.w,_=Ke.neo(c),x=Ke.neo(m),O=Ke.mulVec2(_,X.sub(this.m_localAnchorA,this.m_localCenterA)),S=Ke.mulVec2(x,X.sub(this.m_localAnchorB,this.m_localCenterB)),w=X.zero();if(w.addCombine(1,p,1,S),w.subCombine(1,l,1,O),this.m_ay=Ke.mulVec2(_,this.m_localYAxisA),this.m_sAy=X.crossVec2Vec2(X.add(w,O),this.m_ay),this.m_sBy=X.crossVec2Vec2(S,this.m_ay),this.m_mass=n+s+o*this.m_sAy*this.m_sAy+a*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=Ke.mulVec2(_,this.m_localXAxisA),this.m_sAx=X.crossVec2Vec2(X.add(w,O),this.m_ax),this.m_sBx=X.crossVec2Vec2(S,this.m_ax);var C=n+s+o*this.m_sAx*this.m_sAx+a*this.m_sBx*this.m_sBx;if(C>0){this.m_springMass=1/C;var M=X.dot(w,this.m_ax),P=2*DKe*this.m_frequencyHz,R=2*this.m_springMass*this.m_dampingRatio*P,k=this.m_springMass*P*P,I=i.dt;this.m_gamma=I*(R+I*k),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=M*I*k*this.m_gamma,this.m_springMass=C+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=o+a,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),i.warmStarting){this.m_impulse*=i.dtRatio,this.m_springImpulse*=i.dtRatio,this.m_motorImpulse*=i.dtRatio;var A=X.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),D=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,V=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;u.subMul(this.m_invMassA,A),d-=this.m_invIA*D,g.addMul(this.m_invMassB,A),y+=this.m_invIB*V}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.setVec2(u),this.m_bodyA.c_velocity.w=d,this.m_bodyB.c_velocity.v.setVec2(g),this.m_bodyB.c_velocity.w=y},e.prototype.solveVelocityConstraints=function(i){var n=this.m_invMassA,s=this.m_invMassB,o=this.m_invIA,a=this.m_invIB,l=this.m_bodyA.c_velocity.v,c=this.m_bodyA.c_velocity.w,u=this.m_bodyB.c_velocity.v,d=this.m_bodyB.c_velocity.w;{var p=X.dot(this.m_ax,u)-X.dot(this.m_ax,l)+this.m_sBx*d-this.m_sAx*c,m=-this.m_springMass*(p+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=m;var g=X.mulNumVec2(m,this.m_ax),y=m*this.m_sAx,_=m*this.m_sBx;l.subMul(n,g),c-=o*y,u.addMul(s,g),d+=a*_}{var p=d-c-this.m_motorSpeed,m=-this.m_motorMass*p,x=this.m_motorImpulse,O=i.dt*this.m_maxMotorTorque;this.m_motorImpulse=Gs(this.m_motorImpulse+m,-O,O),m=this.m_motorImpulse-x,c-=o*m,d+=a*m}{var p=X.dot(this.m_ay,u)-X.dot(this.m_ay,l)+this.m_sBy*d-this.m_sAy*c,m=-this.m_mass*p;this.m_impulse+=m;var g=X.mulNumVec2(m,this.m_ay),y=m*this.m_sAy,_=m*this.m_sBy;l.subMul(n,g),c-=o*y,u.addMul(s,g),d+=a*_}this.m_bodyA.c_velocity.v.setVec2(l),this.m_bodyA.c_velocity.w=c,this.m_bodyB.c_velocity.v.setVec2(u),this.m_bodyB.c_velocity.w=d},e.prototype.solvePositionConstraints=function(i){var n=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,l=Ke.neo(s),c=Ke.neo(a),u=Ke.mulVec2(l,X.sub(this.m_localAnchorA,this.m_localCenterA)),d=Ke.mulVec2(c,X.sub(this.m_localAnchorB,this.m_localCenterB)),p=X.zero();p.addCombine(1,o,1,d),p.subCombine(1,n,1,u);var m=Ke.mulVec2(l,this.m_localYAxisA),g=X.crossVec2Vec2(X.add(p,u),m),y=X.crossVec2Vec2(d,m),_=X.dot(p,m),x=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,O=x!=0?-_/x:0,S=X.mulNumVec2(O,m),w=O*g,C=O*y;return n.subMul(this.m_invMassA,S),s-=this.m_invIA*w,o.addMul(this.m_invMassB,S),a+=this.m_invIB*C,this.m_bodyA.c_position.c.setVec2(n),this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c.setVec2(o),this.m_bodyB.c_position.a=a,BKe(_)<=Et.linearSlop},e.TYPE="wheel-joint",e}(So),rs,NKe=0,$Y={World:wS,Body:xn,Joint:So,Fixture:PM,Shape:S0},UY={Vec2:X,Vec3:fn,World:wS,Body:xn,Joint:So,Fixture:PM,Shape:S0},VKe=(rs={},rs[xn.STATIC]=xn,rs[xn.DYNAMIC]=xn,rs[xn.KINEMATIC]=xn,rs[kM.TYPE]=kM,rs[Fp.TYPE]=Fp,rs[$d.TYPE]=$d,rs[$p.TYPE]=$p,rs[kL.TYPE]=kL,rs[MY.TYPE]=MY,rs[RY.TYPE]=RY,rs[BY.TYPE]=BY,rs[DY.TYPE]=DY,rs[IY.TYPE]=IY,rs[LY.TYPE]=LY,rs[jf.TYPE]=jf,rs[NY.TYPE]=NY,rs[VY.TYPE]=VY,rs[FY.TYPE]=FY,rs),FKe={rootClass:wS,preSerialize:function(r){return r},postSerialize:function(r,e){return r},preDeserialize:function(r){return r},postDeserialize:function(r,e){return r}},FF=function(){function r(e){var i=this;this.toJson=function(n){var s=i.options.preSerialize,o=i.options.postSerialize,a=[],l=[n],c={};function u(y,_){if(y.__sid=y.__sid||++NKe,!c[y.__sid]){l.push(y);var x=a.length+l.length,O={refIndex:x,refType:_};c[y.__sid]=O}return c[y.__sid]}function d(y){y=s(y);var _=y._serialize();return _=o(_,y),_}function p(y,_){if(_===void 0&&(_=!1),typeof y!="object"||y===null)return y;if(typeof y._serialize=="function"){if(!_){for(var x in $Y)if(y instanceof $Y[x])return u(y,x)}y=d(y)}if(Array.isArray(y)){for(var O=[],S=0;S<y.length;S++)O[S]=p(y[S]);y=O}else{var O={};for(var S in y)y.hasOwnProperty(S)&&(O[S]=p(y[S]));y=O}return y}for(;l.length;){var m=l.shift(),g=p(m,!0);a.push(g)}return a},this.fromJson=function(n){var s=i.options.preDeserialize,o=i.options.postDeserialize,a=i.options.rootClass,l={};function c(p,m,g){(!p||!p._deserialize)&&(p=VKe[m.type]);var y=p&&p._deserialize;if(y){m=s(m);var _=p._deserialize,x=_(m,g,u);return x=o(x,m),x}}function u(p,m,g){var y=m.refIndex&&m.refType;if(!y)return c(p,m,g);var _=m;UY[_.refType]&&(p=UY[_.refType]);var x=_.refIndex;if(!l[x]){var O=n[x],S=c(p,O,g);l[x]=S}return l[x]}var d=c(a,n[0],null);return d},this.options=Ao(Ao({},FKe),e)}return r}(),vhe=new FF({rootClass:wS});FF.fromJson=vhe.fromJson;FF.toJson=vhe.toJson;(function(){function r(){this.width=80,this.height=60,this.x=0,this.y=-10,this.scaleY=-1,this.hz=60,this.speed=1,this.background="#222222",this.activeKeys={},this.step=function(e,i){},this.keydown=function(e,i){},this.keyup=function(e,i){}}return r.mount=function(e){throw new Error("Not implemented")},r.start=function(e){var i=r.mount();return i.start(e),i},r.prototype.color=function(e,i,n){return e=e*256|0,i=i*256|0,n=n*256|0,"rgb("+e+", "+i+", "+n+")"},r})();(function(r){Io(e,r);function e(i,n,s,o){var a=this;return a instanceof e?(a=r.call(this)||this,a._setAsBox(i,n,s,o),a):new e(i,n,s,o)}return e.TYPE="polygon",e})(Fp);vu.addType($p.TYPE,$p.TYPE,$Ke);function $Ke(r,e,i,n,s,o,a){UKe(r,i.getShape(),e,o.getShape(),s)}var zY=He(0,0),XY=He(0,0),UKe=function(r,e,i,n,s){r.pointCount=0,Si(zY,i,e.m_p),Si(XY,s,n.m_p);var o=Xg(XY,zY),a=e.m_radius,l=n.m_radius,c=a+l;o>c*c||(r.type=kr.e_circles,Ne(r.localPoint,e.m_p),hi(r.localNormal),r.pointCount=1,Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(0,cn.e_vertex,0,cn.e_vertex))};vu.addType($d.TYPE,$p.TYPE,zKe);vu.addType(kM.TYPE,$p.TYPE,XKe);function zKe(r,e,i,n,s,o,a){var l=i.getShape(),c=o.getShape();yhe(r,l,e,c,s)}function XKe(r,e,i,n,s,o,a){var l=i.getShape(),c=new $d;l.getChildEdge(c,n);var u=c,d=o.getShape();yhe(r,u,e,d,s)}var Gm=He(0,0),ZB=He(0,0),KB=He(0,0),Zu=He(0,0),Hm=He(0,0),Lv=He(0,0),yhe=function(r,e,i,n,s){r.pointCount=0,ohe(Zu,s,i,n.m_p);var o=e.m_vertex1,a=e.m_vertex2;Ci(Gm,a,o);var l=ot(Gm,a)-ot(Gm,Zu),c=ot(Gm,Zu)-ot(Gm,o),u=e.m_radius+n.m_radius;if(c<=0){Ne(Hm,o);var d=Xg(Zu,o);if(d>u*u)return;if(e.m_hasVertex0){var p=e.m_vertex0,m=o;Ci(ZB,m,p);var g=ot(ZB,m)-ot(ZB,Zu);if(g>0)return}r.type=kr.e_circles,hi(r.localNormal),Ne(r.localPoint,Hm),r.pointCount=1,Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(0,cn.e_vertex,0,cn.e_vertex);return}if(l<=0){Ne(Hm,a);var y=Xg(Zu,Hm);if(y>u*u)return;if(e.m_hasVertex3){var _=e.m_vertex3,x=a;Ci(KB,_,x);var O=ot(KB,Zu)-ot(KB,x);if(O>0)return}r.type=kr.e_circles,hi(r.localNormal),Ne(r.localPoint,Hm),r.pointCount=1,Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(1,cn.e_vertex,0,cn.e_vertex);return}var S=zg(Gm);lr(Hm,l/S,o,c/S,a);var w=Xg(Zu,Hm);w>u*u||(il(Lv,1,Gm),ot(Lv,Zu)-ot(Lv,o)<0&&CO(Lv),rc(Lv),r.type=kr.e_faceA,Ne(r.localNormal,Lv),Ne(r.localPoint,o),r.pointCount=1,Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(0,cn.e_face,0,cn.e_vertex))},qT=[new Tl,new Tl],ZT=[new Tl,new Tl],Qm=[new Tl,new Tl],KT=He(0,0),WY=He(0,0),JB=He(0,0),e4=O0(0,0,0),jm=He(0,0),Nv=He(0,0),JT=He(0,0),GY=He(0,0),HY=He(0,0),Bf=He(0,0),t4=He(0,0),QY=He(0,0);vu.addType(Fp.TYPE,Fp.TYPE,WKe);function WKe(r,e,i,n,s,o,a){HKe(r,i.getShape(),e,o.getShape(),s)}function jY(r,e,i,n,s){var o=r.m_count,a=i.m_count,l=r.m_normals,c=r.m_vertices,u=i.m_vertices;ahe(e4,n,e);for(var d=0,p=-1/0,m=0;m<o;++m){dh(JB,e4.q,l[m]),Si(WY,e4,c[m]);for(var g=1/0,y=0;y<a;++y){var _=ot(JB,u[y])-ot(JB,WY);_<g&&(g=_)}g>p&&(p=g,d=m)}s.maxSeparation=p,s.bestIndex=d}function GKe(r,e,i,n,s,o){var a=e.m_normals,l=s.m_count,c=s.m_vertices,u=s.m_normals;GZe(QY,o.q,i.q,a[n]);for(var d=0,p=1/0,m=0;m<l;++m){var g=ot(QY,u[m]);g<p&&(p=g,d=m)}var y=d,_=y+1<l?y+1:0;Si(r[0].v,o,c[y]),r[0].id.setFeatures(n,cn.e_face,y,cn.e_vertex),Si(r[1].v,o,c[_]),r[1].id.setFeatures(n,cn.e_face,_,cn.e_vertex)}var Vv={maxSeparation:0,bestIndex:0},HKe=function(r,e,i,n,s){r.pointCount=0;var o=e.m_radius+n.m_radius;jY(e,i,n,s,Vv);var a=Vv.bestIndex,l=Vv.maxSeparation;if(!(l>o)){jY(n,s,e,i,Vv);var c=Vv.bestIndex,u=Vv.maxSeparation;if(!(u>o)){var d,p,m,g,y,_,x=.1*Et.linearSlop;u>l+x?(d=n,p=e,m=s,g=i,y=c,r.type=kr.e_faceB,_=!0):(d=e,p=n,m=i,g=s,y=a,r.type=kr.e_faceA,_=!1),qT[0].recycle(),qT[1].recycle(),GKe(qT,d,m,y,p,g);var O=d.m_count,S=d.m_vertices,w=y,C=y+1<O?y+1:0;Ne(jm,S[w]),Ne(Nv,S[C]),Ci(JT,Nv,jm),rc(JT),Ug(GY,JT,1),lr(HY,.5,jm,.5,Nv),dh(Bf,m.q,JT),Ug(t4,Bf,1),Si(jm,m,jm),Si(Nv,m,Nv);var M=ot(t4,jm),P=-ot(Bf,jm)+o,R=ot(Bf,Nv)+o;ZT[0].recycle(),ZT[1].recycle(),Qm[0].recycle(),Qm[1].recycle(),Xs(KT,-Bf.x,-Bf.y);var k=TO(ZT,qT,KT,P,w);if(!(k<2)){Xs(KT,Bf.x,Bf.y);var I=TO(Qm,ZT,KT,R,C);if(!(I<2)){Ne(r.localNormal,GY),Ne(r.localPoint,HY);for(var A=0,D=0;D<Qm.length;++D){var V=ot(t4,Qm[D].v)-M;if(V<=o){var B=r.points[A];RF(B.localPoint,g,Qm[D].v),B.id.set(Qm[D].id),_&&B.id.swapFeatures(),++A}}r.pointCount=A}}}}};vu.addType(Fp.TYPE,$p.TYPE,QKe);function QKe(r,e,i,n,s,o,a){jKe(r,i.getShape(),e,o.getShape(),s)}var Wh=He(0,0),i4=He(0,0),jKe=function(r,e,i,n,s){r.pointCount=0,ohe(Wh,s,i,n.m_p);for(var o=0,a=-1/0,l=e.m_radius+n.m_radius,c=e.m_count,u=e.m_vertices,d=e.m_normals,p=0;p<c;++p){var m=ot(d[p],Wh)-ot(d[p],u[p]);if(m>l)return;m>a&&(a=m,o=p)}var g=o,y=g+1<c?g+1:0,_=u[g],x=u[y];if(a<Ra){r.pointCount=1,r.type=kr.e_faceA,Ne(r.localNormal,d[o]),lr(r.localPoint,.5,_,.5,x),Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(0,cn.e_vertex,0,cn.e_vertex);return}var O=ot(Wh,x)-ot(Wh,_)-ot(_,x)+ot(_,_),S=ot(Wh,_)-ot(Wh,x)-ot(x,_)+ot(x,x);if(O<=0){if(Xg(Wh,_)>l*l)return;r.pointCount=1,r.type=kr.e_faceA,Ci(r.localNormal,Wh,_),rc(r.localNormal),Ne(r.localPoint,_),Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(0,cn.e_vertex,0,cn.e_vertex)}else if(S<=0){if(Xg(Wh,x)>l*l)return;r.pointCount=1,r.type=kr.e_faceA,Ci(r.localNormal,Wh,x),rc(r.localNormal),Ne(r.localPoint,x),Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(0,cn.e_vertex,0,cn.e_vertex)}else{lr(i4,.5,_,.5,x);var w=ot(Wh,d[g])-ot(i4,d[g]);if(w>l)return;r.pointCount=1,r.type=kr.e_faceA,Ne(r.localNormal,d[g]),Ne(r.localPoint,i4),Ne(r.points[0].localPoint,n.m_p),r.points[0].id.setFeatures(0,cn.e_vertex,0,cn.e_vertex)}},YKe=Math.min;vu.addType($d.TYPE,Fp.TYPE,qKe);vu.addType(kM.TYPE,Fp.TYPE,ZKe);function qKe(r,e,i,n,s,o,a){xhe(r,i.getShape(),e,o.getShape(),s)}var YY=new $d;function ZKe(r,e,i,n,s,o,a){var l=i.getShape();l.getChildEdge(YY,n),xhe(r,YY,e,o.getShape(),s)}var Wl;(function(r){r[r.e_unknown=-1]="e_unknown",r[r.e_edgeA=1]="e_edgeA",r[r.e_edgeB=2]="e_edgeB"})(Wl||(Wl={}));var qY;(function(r){r[r.e_isolated=0]="e_isolated",r[r.e_concave=1]="e_concave",r[r.e_convex=2]="e_convex"})(qY||(qY={}));var _he=function(){function r(){}return r}(),KKe=function(){function r(){this.vertices=[],this.normals=[],this.count=0;for(var e=0;e<Et.maxPolygonVertices;e++)this.vertices.push(He(0,0)),this.normals.push(He(0,0))}return r}(),JKe=function(){function r(){this.v1=He(0,0),this.v2=He(0,0),this.normal=He(0,0),this.sideNormal1=He(0,0),this.sideNormal2=He(0,0)}return r.prototype.recycle=function(){hi(this.v1),hi(this.v2),hi(this.normal),hi(this.sideNormal1),hi(this.sideNormal2)},r}(),eA=[new Tl,new Tl],Df=[new Tl,new Tl],Gh=[new Tl,new Tl],Pc=new _he,Uo=new _he,_s=new KKe,Pi=new JKe,tA=He(0,0),ob=He(0,0),Fv=He(0,0),ab=He(0,0),lb=O0(0,0,0),Dn=He(0,0),kc=He(0,0),Oi=He(0,0),Ic=He(0,0),ss=He(0,0),os=He(0,0),ZY=He(0,0),Lf=He(0,0),xhe=function(r,e,i,n,s){ahe(lb,i,s),Si(tA,lb,n.m_centroid);var o=e.m_vertex0,a=e.m_vertex1,l=e.m_vertex2,c=e.m_vertex3,u=e.m_hasVertex0,d=e.m_hasVertex3;Ci(Fv,l,a),rc(Fv),Xs(Oi,Fv.y,-Fv.x);var p=ot(Oi,tA)-ot(Oi,a),m=0,g=0,y=!1,_=!1;hi(kc),hi(Ic),u&&(Ci(ob,a,o),rc(ob),Xs(kc,ob.y,-ob.x),y=Vi(ob,Fv)>=0,m=X.dot(kc,tA)-X.dot(kc,o)),d&&(Ci(ab,c,l),rc(ab),Xs(Ic,ab.y,-ab.x),_=X.crossVec2Vec2(Fv,ab)>0,g=X.dot(Ic,tA)-X.dot(Ic,l));var x;hi(Dn),hi(ss),hi(os),u&&d?y&&_?(x=m>=0||p>=0||g>=0,x?(Ne(Dn,Oi),Ne(ss,kc),Ne(os,Ic)):(gi(Dn,-1,Oi),gi(ss,-1,Oi),gi(os,-1,Oi))):y?(x=m>=0||p>=0&&g>=0,x?(Ne(Dn,Oi),Ne(ss,kc),Ne(os,Oi)):(gi(Dn,-1,Oi),gi(ss,-1,Ic),gi(os,-1,Oi))):_?(x=g>=0||m>=0&&p>=0,x?(Ne(Dn,Oi),Ne(ss,Oi),Ne(os,Ic)):(gi(Dn,-1,Oi),gi(ss,-1,Oi),gi(os,-1,kc))):(x=m>=0&&p>=0&&g>=0,x?(Ne(Dn,Oi),Ne(ss,Oi),Ne(os,Oi)):(gi(Dn,-1,Oi),gi(ss,-1,Ic),gi(os,-1,kc))):u?y?(x=m>=0||p>=0,x?(Ne(Dn,Oi),Ne(ss,kc),gi(os,-1,Oi)):(gi(Dn,-1,Oi),Ne(ss,Oi),gi(os,-1,Oi))):(x=m>=0&&p>=0,x?(Ne(Dn,Oi),Ne(ss,Oi),gi(os,-1,Oi)):(gi(Dn,-1,Oi),Ne(ss,Oi),gi(os,-1,kc))):d?_?(x=p>=0||g>=0,x?(Ne(Dn,Oi),gi(ss,-1,Oi),Ne(os,Ic)):(gi(Dn,-1,Oi),gi(ss,-1,Oi),Ne(os,Oi))):(x=p>=0&&g>=0,x?(Ne(Dn,Oi),gi(ss,-1,Oi),Ne(os,Oi)):(gi(Dn,-1,Oi),gi(ss,-1,Ic),Ne(os,Oi))):(x=p>=0,x?(Ne(Dn,Oi),gi(ss,-1,Oi),gi(os,-1,Oi)):(gi(Dn,-1,Oi),Ne(ss,Oi),Ne(os,Oi))),_s.count=n.m_count;for(var O=0;O<n.m_count;++O)Si(_s.vertices[O],lb,n.m_vertices[O]),dh(_s.normals[O],lb.q,n.m_normals[O]);var S=n.m_radius+e.m_radius;r.pointCount=0;{Pc.type=Wl.e_edgeA,Pc.index=x?0:1,Pc.separation=1/0;for(var O=0;O<_s.count;++O){var w=_s.vertices[O],C=ot(Dn,w)-ot(Dn,a);C<Pc.separation&&(Pc.separation=C)}}if(Pc.type!=Wl.e_unknown&&!(Pc.separation>S)){{Uo.type=Wl.e_unknown,Uo.index=-1,Uo.separation=-1/0,Xs(ZY,-Dn.y,Dn.x);for(var O=0;O<_s.count;++O){gi(Lf,-1,_s.normals[O]);var M=ot(Lf,_s.vertices[O])-ot(Lf,a),P=ot(Lf,_s.vertices[O])-ot(Lf,l),C=YKe(M,P);if(C>S){Uo.type=Wl.e_edgeB,Uo.index=O,Uo.separation=C;break}if(ot(Lf,ZY)>=0){if(ot(Lf,Dn)-ot(os,Dn)<-Et.angularSlop)continue}else if(ot(Lf,Dn)-ot(ss,Dn)<-Et.angularSlop)continue;C>Uo.separation&&(Uo.type=Wl.e_edgeB,Uo.index=O,Uo.separation=C)}}if(!(Uo.type!=Wl.e_unknown&&Uo.separation>S)){var R=.98,k=.001,I;if(Uo.type==Wl.e_unknown?I=Pc:Uo.separation>R*Pc.separation+k?I=Uo:I=Pc,Gh[0].recycle(),Gh[1].recycle(),I.type==Wl.e_edgeA){r.type=kr.e_faceA;for(var A=0,D=ot(Dn,_s.normals[0]),O=1;O<_s.count;++O){var V=ot(Dn,_s.normals[O]);V<D&&(D=V,A=O)}var B=A,L=B+1<_s.count?B+1:0;Ne(Gh[0].v,_s.vertices[B]),Gh[0].id.setFeatures(0,cn.e_face,B,cn.e_vertex),Ne(Gh[1].v,_s.vertices[L]),Gh[1].id.setFeatures(0,cn.e_face,L,cn.e_vertex),x?(Pi.i1=0,Pi.i2=1,Ne(Pi.v1,a),Ne(Pi.v2,l),Ne(Pi.normal,Oi)):(Pi.i1=1,Pi.i2=0,Ne(Pi.v1,l),Ne(Pi.v2,a),gi(Pi.normal,-1,Oi))}else r.type=kr.e_faceB,Ne(Gh[0].v,a),Gh[0].id.setFeatures(0,cn.e_vertex,I.index,cn.e_face),Ne(Gh[1].v,l),Gh[1].id.setFeatures(0,cn.e_vertex,I.index,cn.e_face),Pi.i1=I.index,Pi.i2=Pi.i1+1<_s.count?Pi.i1+1:0,Ne(Pi.v1,_s.vertices[Pi.i1]),Ne(Pi.v2,_s.vertices[Pi.i2]),Ne(Pi.normal,_s.normals[Pi.i1]);Xs(Pi.sideNormal1,Pi.normal.y,-Pi.normal.x),Xs(Pi.sideNormal2,-Pi.sideNormal1.x,-Pi.sideNormal1.y),Pi.sideOffset1=ot(Pi.sideNormal1,Pi.v1),Pi.sideOffset2=ot(Pi.sideNormal2,Pi.v2),eA[0].recycle(),eA[1].recycle(),Df[0].recycle(),Df[1].recycle();var F=TO(eA,Gh,Pi.sideNormal1,Pi.sideOffset1,Pi.i1);if(!(F<Et.maxManifoldPoints)){var $=TO(Df,eA,Pi.sideNormal2,Pi.sideOffset2,Pi.i2);if(!($<Et.maxManifoldPoints)){I.type==Wl.e_edgeA?(Ne(r.localNormal,Pi.normal),Ne(r.localPoint,Pi.v1)):(Ne(r.localNormal,n.m_normals[Pi.i1]),Ne(r.localPoint,n.m_vertices[Pi.i1]));for(var z=0,O=0;O<Et.maxManifoldPoints;++O){var H=ot(Pi.normal,Df[O].v)-ot(Pi.normal,Pi.v1);if(H<=S){var K=r.points[z];I.type==Wl.e_edgeA?(RF(K.localPoint,lb,Df[O].v),K.id.set(Df[O].id)):(Ne(K.localPoint,Df[O].v),K.id.set(Df[O].id),K.id.swapFeatures()),++z}}r.pointCount=z}}}}};(function(){function r(e,i){this._refMap={},this._map={},this._xmap={},this._data=[],this._entered=[],this._exited=[],this._key=e,this._listener=i}return r.prototype.update=function(e){if(!Array.isArray(e))throw"Invalid data: "+e;this._entered.length=0,this._exited.length=0,this._data.length=e.length;for(var i=0;i<e.length;i++)if(!(typeof e[i]!="object"||e[i]===null)){var n=e[i],s=this._key(n);this._map[s]?delete this._map[s]:this._entered.push(n),this._data[i]=n,this._xmap[s]=n}for(var s in this._map)this._exited.push(this._map[s]),delete this._map[s];var o=this._map;this._map=this._xmap,this._xmap=o;for(var i=0;i<this._exited.length;i++){var n=this._exited[i],a=this._key(n),l=this._refMap[a];this._listener.exit(n,l),delete this._refMap[a]}for(var i=0;i<this._entered.length;i++){var n=this._entered[i],a=this._key(n),l=this._listener.enter(n);l&&(this._refMap[a]=l)}for(var i=0;i<this._data.length;i++)if(!(typeof e[i]!="object"||e[i]===null)){var n=this._data[i],a=this._key(n),l=this._refMap[a];this._listener.update(n,l)}this._entered.length=0,this._exited.length=0,this._data.length=0},r.prototype.ref=function(e){return this._refMap[this._key(e)]},r})();class eJe{constructor(e){this.gameApp=e}playCellBreakAnim(e,i){if(!e||e.isDestroyed)return;const n=this.getCellCenter(e);this.createFlyingBubble(n,e,i);const s=this.createBubbles(n,e.color);this.animateBubbles(s),this.playScoreAnim(e,i.score)}getCellCenter(e){const i=e.getDisplayPoints();return i.length<3?{x:0,y:0}:{x:i.reduce((n,s)=>n+s.x,0)/i.length,y:i.reduce((n,s)=>n+s.y,0)/i.length}}createBubbles(e,i){const o=[];for(let a=0;a<12;a++){const l=this.createSingleBubble(e,50,a,12,i);o.push(l)}return o}createSingleBubble(e,i,n,s,o){const a=new En;this.gameApp.effectGraphic.addChild(a);const l=n/s*Math.PI*2,c=e.x+Math.cos(l)*i,u=e.y+Math.sin(l)*i,d=Math.random()*8+4;return a.beginFill(o,.8),a.drawCircle(0,0,d),a.endFill(),a.position.set(c,u),Object.assign(a,{originalX:c,originalY:u,size:d,diffusionAngle:l,diffusionSpeed:Math.random()*.5+.5,alpha:1,scale:{x:1,y:1}}),a}animateBubbles(e){const n=Date.now(),s=()=>{const o=Date.now()-n,a=Math.min(o/500,1);e.forEach((l,c)=>{this.updateBubble(l,a,c)}),a<1?requestAnimationFrame(s):this.cleanupBubbles(e)};s()}updateBubble(e,i,n){if(i<=0){e.x=e.originalX,e.y=e.originalY,e.scale.set(1),e.alpha=1;return}const s=1-Math.pow(1-i,2),o=s*80*e.diffusionSpeed;e.x=e.originalX+Math.cos(e.diffusionAngle)*o,e.y=e.originalY+Math.sin(e.diffusionAngle)*o;const a=1+s*.8;e.scale.set(a),e.alpha=1-s}cleanupBubbles(e){e.forEach(i=>{i.parent&&i.parent.removeChild(i),i.destroy()})}playScoreAnim(e,i){const n=new Vn(`+${i}`,{fontFamily:"Arial",fontSize:72,fill:16777215,stroke:0,strokeThickness:3,align:"center"}),s=this.getCellCenter(e);n.position.set(s.x,s.y),n.anchor.set(.5,.5),this.gameApp.effectGraphic.addChild(n),this.animateScore(n,s.y)}animateScore(e,i){const s=Date.now(),o=()=>{const a=Date.now()-s,l=Math.min(a/1e3,1);e.y=i-l*50,e.alpha=1-l,l<1?requestAnimationFrame(o):(e.parent&&e.parent.removeChild(e),e.destroy())};o()}playExplosionAnim(e,i=16711680){const n=this.createExplosionParticles(e,i);this.animateExplosion(n)}createExplosionParticles(e,i){const s=[];for(let o=0;o<20;o++){const a=new En;this.gameApp.effectGraphic.addChild(a);const l=Math.random()*6+3;a.beginFill(i,.9),a.drawCircle(0,0,l),a.endFill(),a.position.set(e.x,e.y),Object.assign(a,{velocity:{x:(Math.random()-.5)*200,y:(Math.random()-.5)*200},life:1,decay:Math.random()*.02+.01,size:l}),s.push(a)}return s}animateExplosion(e){const i=()=>{let n=!0;e.forEach(s=>{if(s.life>0){n=!1,s.x+=s.velocity.x*.016,s.y+=s.velocity.y*.016,s.velocity.x*=.98,s.velocity.y*=.98,s.life-=s.decay,s.alpha=s.life;const o=1+(1-s.life)*.5;s.scale.set(o)}}),n?this.cleanupParticles(e):requestAnimationFrame(i)};i()}cleanupParticles(e){e.forEach(i=>{i.parent&&i.parent.removeChild(i),i.destroy()})}createFlyingBubble(e,i,n){const s=n.colorIndex,o=this.getColorIndicatorPosition(s);if(!o)return;const a=new En;this.gameApp.effectGraphic.addChild(a);const l=24;a.beginFill(i.color,.9),a.drawCircle(0,0,l),a.endFill(),a.position.set(e.x,e.y),this.animateFlyingBubble(a,e,o,n)}getColorIndicatorPosition(e){if(this.gameApp&&this.gameApp.uiManager&&this.gameApp.uiManager.levelColorIndicators){const i=this.gameApp.uiManager.levelColorIndicators[e];if(i){const n=i.toGlobal(new ai(0,0));return{x:n.x,y:n.y}}}return null}animateFlyingBubble(e,i,n,s){const a=Date.now(),l=()=>{const c=Date.now()-a,u=Math.min(c/800,1),d=this.easeInOutQuad(u);e.x=i.x+(n.x-i.x)*d,e.y=i.y+(n.y-i.y)*d;const p=50;e.y-=Math.sin(u*Math.PI)*p;const m=1+u*.5;e.scale.set(m),u<1?requestAnimationFrame(l):(this.playColorIndicatorHitEffect(s),e.parent&&e.parent.removeChild(e),e.destroy())};l()}easeInOutQuad(e){return e<.5?2*e*e:-1+(4-2*e)*e}playColorIndicatorHitEffect(e){this.gameApp&&this.gameApp.uiManager&&this.gameApp.uiManager.playColorIndicatorHitEffect(e)}}const bhe=[{id:1,name:"色彩缤纷",description:"体验多彩世界",targetScore:100,minMatchLength:3,colorIndex:[0,1],dropletCount:[3,3],collectCount:[3,3]},{id:2,name:"长链挑战",description:"形成更长的匹配链",targetScore:150,minMatchLength:3,colorIndex:[0,1,2],dropletCount:[4,4,4],collectCount:[4,4,4]},{id:3,name:"时间压力",description:"在限定时间内完成目标",targetScore:200,minMatchLength:3,colorIndex:[0,1,2,3],dropletCount:[5,5,5,5],collectCount:[5,5,5,5]},{id:4,name:"大师挑战",description:"高难度挑战",targetScore:250,minMatchLength:4,colorIndex:[0,1,2,3,4],dropletCount:[6,6,6,6,6],collectCount:[6,6,6,6,6]},{id:5,name:"传奇模式",description:"传奇级别的挑战",targetScore:300,minMatchLength:4,colorIndex:[0,1,2,3,4],dropletCount:null,collectCount:[8,8,8,8,8]},{id:6,name:"终极挑战",description:"终极挑战模式",targetScore:350,minMatchLength:4,colorIndex:[0,1,2,3,4],dropletCount:null,collectCount:[10,10,10,10,10]},{id:7,name:"完美风暴",description:"完美风暴挑战",targetScore:400,minMatchLength:5,colorIndex:[0,1,2,3,4],dropletCount:null,collectCount:[12,12,12,12,12]},{id:8,name:"神级挑战",description:"神级难度挑战",targetScore:450,minMatchLength:5,colorIndex:[0,1,2,3,4],dropletCount:null,collectCount:[15,15,15,15,15]},{id:9,name:"无尽挑战",description:"无尽挑战模式",targetScore:500,minMatchLength:5,colorIndex:[0,1,2,3,4],dropletCount:null,collectCount:[18,18,18,18,18]},{id:10,name:"终极传奇",description:"终极传奇挑战",targetScore:600,minMatchLength:5,colorIndex:[0,1,2,3,4],dropletCount:null,collectCount:[20,20,20,20,20]}];function tJe(r){return bhe.find(e=>e.id===r)||null}function iJe(){return bhe}class nJe extends Ii{constructor(){super(),this.bodies=[],this.joints=[],this._colorIndex=0,this.ballSize=30,this.centerBody=null,this._isDestroyed=!1,this._highlighted=!1}setPoints(e){this.initBodies(e),this.initJoints()}getDisplayPoints(){if(this.bodies.length<3)return this.getBoundsForFewPoints();const e=this.bodies.reduce((s,o)=>s+o.getPosition().x,0)/this.bodies.length*vr.PPM,i=this.bodies.reduce((s,o)=>s+o.getPosition().y,0)/this.bodies.length*vr.PPM;let n=this.bodies.map(s=>{const o=s.getPosition(),a=o.x*vr.PPM,l=o.y*vr.PPM,c=a-e,u=l-i,d=Math.sqrt(c*c+u*u);if(d<.001)return{x:a,y:l+this.ballSize};const p=c/d,m=u/d;return{x:a+p*this.ballSize*1,y:l+m*this.ballSize*1}});return n.sort((s,o)=>{const a=Math.atan2(s.y-i,s.x-e),l=Math.atan2(o.y-i,o.x-e);return a-l}),n}distance(e,i){return Math.sqrt((i.x-e.x)**2+(i.y-e.y)**2)}getBoundsForFewPoints(){if(this.bodies.length===0)return[];if(this.bodies.length===1){const e=this.bodies[0].getPosition(),i={x:e.x*vr.PPM,y:e.y*vr.PPM},n=this.ballSize;return[{x:i.x-n,y:i.y-n},{x:i.x+n,y:i.y-n},{x:i.x+n,y:i.y+n},{x:i.x-n,y:i.y+n}]}if(this.bodies.length===2){const e=this.bodies[0].getPosition(),i=this.bodies[1].getPosition(),n={x:e.x*vr.PPM,y:e.y*vr.PPM},s={x:i.x*vr.PPM,y:i.y*vr.PPM},o=this.ballSize,a=s.x-n.x,l=s.y-n.y,c=Math.sqrt(a*a+l*l);if(c===0)return[{x:n.x-o,y:n.y-o},{x:n.x+o,y:n.y-o},{x:n.x+o,y:n.y+o},{x:n.x-o,y:n.y+o}];const u=-l/c,d=a/c;return[{x:n.x+u*o,y:n.y+d*o},{x:n.x-u*o,y:n.y-d*o},{x:s.x-u*o,y:s.y-d*o},{x:s.x+u*o,y:s.y+d*o}]}return[]}get colorIndex(){return this._colorIndex}set colorIndex(e){this._colorIndex=e}get color(){return vr.colors[this.colorIndex]}setHighlight(e){this._highlighted=e}get highlighted(){return this._highlighted||!1}initBodies(e){this.cleanupBodies(),e.forEach(i=>{const n=vr.physicsWorld.createBody({type:xn.DYNAMIC,position:new X(i.x/vr.PPM,i.y/vr.PPM)}),s=new gKe(this.ballSize/vr.PPM);n.createFixture({shape:s,density:1,friction:.3,restitution:.5}),this.bodies.push(n)})}initJoints(){this.cleanupJoints();const e=this.bodies;if(!(e.length<2))for(let i=0;i<e.length;i++){const n=e[i],s=e[(i+1)%e.length],o=new kL({bodyA:n,bodyB:s,localAnchorA:new X(0,0),localAnchorB:new X(0,0),frequencyHz:5,dampingRatio:.7});vr.physicsWorld.createJoint(o),this.joints.push(o)}}cleanupBodies(){this.bodies.forEach(e=>{e&&e.getWorld()&&e.getWorld().destroyBody(e)}),this.bodies=[]}cleanupJoints(){this.joints.forEach(e=>{e&&e.getWorld()&&e.getWorld().destroyJoint(e)}),this.joints=[]}destroy(){this.cleanupBodies(),this.cleanupJoints(),this._isDestroyed=!0}playBreakAnim(){vr.animationManager&&vr.animationManager.playCellBreakAnim(this)}get isDestroyed(){return this._isDestroyed}set isDestroyed(e){this._isDestroyed=e}}class rJe{constructor(e){this.gameApp=e,this.currentLevel=null,this.currentLevelConfig=null,this.colorPool={},this.cols=6,this.rows=6,this.preferedCellCount=this.cols*this.rows,this.levelState={currentScore:0,colorScores:{},timeRemaining:0,isCompleted:!1,isFailed:!1},this.scoreByColor={},this.isGameActive=!1,this.isLevelCompleted=!1,this.isGameEnded=!1}loadLevel(e){try{if(this.clearCurrentLevel(),this.currentLevelConfig=tJe(e),!this.currentLevelConfig)throw new Error(`关卡 ${e} 不存在`);this.currentLevelId=e,this.currentScore=0,this.countByColor={},this.scoreByColor={},this.isGameActive=!1,this.isLevelCompleted=!1,this.isGameEnded=!1,this.currentLevelConfig.colorIndex.forEach(i=>{this.countByColor[i]=0,this.scoreByColor[i]=0}),this.initColorPool(),this.checkAndGenerateCells(),this.startGame(),this.gameApp.uiManager&&this.gameApp.uiManager.initLevelInfoUI(),console.log(`关卡 ${e} 加载成功`)}catch(i){console.error("加载关卡失败:",i.message)}}clearCurrentLevel(){this.gameApp.cells&&this.gameApp.cells.children.concat([]).forEach(i=>{this.gameApp.removeCell(i)}),this.isGameActive=!1,this.isLevelCompleted=!1,this.isGameEnded=!1,this.currentLevelConfig=null,this.currentLevelId=null,this.colorPool=null}getColorPoolRemainCount(){return this.colorPool===null?null:Object.values(this.colorPool).reduce((e,i)=>e+i,0)}initColorPool(){const e=this.currentLevelConfig;e.dropletCount===null?this.colorPool=null:(this.colorPool={},e.colorIndex.forEach((i,n)=>{this.colorPool[i]=e.dropletCount[n]}))}generateCellsByCount(e){const i=this.gameApp.pixi.screen.width,n=this.gameApp.pixi.screen.height,s=150,o=Math.ceil(e/this.cols),l=Math.ceil(e/o)*s,c=o*s,u=(i-l)/2,d=(n-c)/2-50;for(let p=0;p<e;p++){const m=Math.floor(p/this.cols),g=p%this.cols,y=u+g*s+s/2,_=d+m*s+s/2,x=this.getRandomColorFromPool();if(x!==null){const O=[],S=Math.floor(s*.4),w=6;for(let M=0;M<w;M++){const P=M/w*Math.PI*2,R=y+Math.cos(P)*S,k=_+Math.sin(P)*S;O.push({x:R,y:k})}const C=new nJe;C.colorIndex=x,C.setPoints(O),this.gameApp.addCell(C)}}}getRandomColorFromPool(){if(this.colorPool===null){const s=this.currentLevelConfig.colorIndex,o=Math.floor(Math.random()*s.length);return s[o]}const e=Object.keys(this.colorPool).filter(s=>this.colorPool[s]>0);if(e.length===0)return null;const i=Math.floor(Math.random()*e.length),n=parseInt(e[i]);return this.colorPool[n]--,n}startGame(){this.isGameActive=!0}updateScore(e,i){if(!this.isGameActive||!this.currentLevelConfig||this.isLevelCompleted)return null;this.countByColor[i]||(this.countByColor[i]=0),this.countByColor[i]+=1,this.scoreByColor[i]||(this.scoreByColor[i]=0),this.scoreByColor[i]+=e,this.currentScore+=e;const n=this.checkLevelCompletion();return n&&!this.isLevelCompleted&&(this.isLevelCompleted=!0,this.isGameActive=!1,console.log("关卡完成！停止接受玩家输入，等待动画播放完毕...")),{score:e,colorIndex:i,count:this.countByColor[i],currentScore:this.currentScore,levelCompleted:n,scoreByColor:{...this.scoreByColor}}}checkLevelCompletion(){if(!this.currentLevelConfig)return!1;const e=this.currentLevelConfig;let i=!0;return e.colorIndex.forEach((n,s)=>{const o=this.countByColor[n]||0,a=e.collectCount[s];o<a&&(i=!1)}),i}isLevelFinished(){return this.isLevelCompleted}isGameFinished(){return this.isGameEnded}canAcceptInput(){return this.isGameActive&&!this.isLevelCompleted&&!this.isGameEnded}endGame(e){if(this.isGameEnded)return;this.isGameEnded=!0,this.isGameActive=!1,this.isLevelCompleted=!0;const i={isWin:e,levelId:this.currentLevelId,levelName:this.currentLevelConfig.name,levelConfig:this.currentLevelConfig,currentScore:this.currentScore,targetScore:this.currentLevelConfig.targetScore,countByColor:{...this.countByColor},scoreByColor:{...this.scoreByColor},targetCounts:{...this.currentLevelConfig.collectCount}};this.gameApp.settlementManager.showSettlement(i),console.log(e?`关卡 ${this.currentLevelId} 胜利！`:`关卡 ${this.currentLevelId} 失败！`)}getCurrentLevelInfo(){return this.currentLevelConfig?{id:this.currentLevelId,name:this.currentLevelConfig.name,description:this.currentLevelConfig.description,currentScore:this.currentScore,targetScore:this.currentLevelConfig.targetScore,countByColor:this.countByColor,isGameActive:this.isGameActive}:null}destroy(){this.clearCurrentLevel(),this.isGameActive=!1}checkAndGenerateCells(){const e=this.gameApp.cells.children.length,i=this.preferedCellCount-e;if(i<=0)return;let n=0;this.colorPool===null?n=i:n=Math.min(i,this.getColorPoolRemainCount()),n>0&&this.generateCellsByCount(n)}generateHexagonalGridLayout(){}calculateMaxScreenCapacity(){return this.cols*this.rows}}class sJe{constructor(e){this.gameApp=e,this.isDragging=!1,this.currentDragCell=null,this.dragCellQueue=[],this.initDragSystem()}initDragSystem(){this.gameApp.cells.eventMode="static",this.gameApp.cells.hitArea=new Ri(0,0,this.gameApp.pixi.screen.width,this.gameApp.pixi.screen.height),this.gameApp.cells.on("pointerdown",this.startDrag.bind(this)),this.gameApp.cells.on("pointermove",this.updateDrag.bind(this)),this.gameApp.cells.on("pointerup",this.endDrag.bind(this)),this.gameApp.cells.on("pointerupoutside",this.endDrag.bind(this))}startDrag(e){if(!this.gameApp.levelManager.canAcceptInput())return;const i=e.global;this.isDragging=!0,this.currentDragCell=null,this.dragCellQueue=[],this.currentDragCell=this.findCellAtPoint(i),this.currentDragCell&&(this.dragCellQueue.push(this.currentDragCell),this.currentDragCell.setHighlight(!0))}updateDrag(e){if(!this.gameApp.levelManager.canAcceptInput())return;const i=e.global;if(!this.isDragging)return;const n=this.currentDragCell;if(this.currentDragCell=this.findCellAtPoint(i),this.currentDragCell&&this.currentDragCell!==n){const s=this.dragCellQueue.length>0?this.dragCellQueue[this.dragCellQueue.length-1]:null;s&&this.currentDragCell.colorIndex===s.colorIndex?this.dragCellQueue.includes(this.currentDragCell)||(this.dragCellQueue.push(this.currentDragCell),this.currentDragCell.setHighlight(!0)):(!s||this.currentDragCell&&!this.dragCellQueue.includes(this.currentDragCell))&&(this.clearDragQueue(),this.dragCellQueue.push(this.currentDragCell),this.currentDragCell.setHighlight(!0))}}endDrag(e){if(!this.isDragging||(this.isDragging=!1,this.currentDragCell=null,this.dragCellQueue.length===0))return;const i=this.dragCellQueue[0],n=this.countRemainingCellsOfColor(i.colorIndex);this.dragCellQueue.length>=3||n<3?this.processDragMatch():this.clearDragQueue()}clearDragQueue(){this.dragCellQueue.forEach(e=>{e&&!e.isDestroyed&&e.setHighlight(!1)}),this.dragCellQueue=[]}findCellAtPoint(e){for(let i=this.gameApp.cells.children.length-1;i>=0;i--){const n=this.gameApp.cells.children[i],s=n.getDisplayPoints();if(!n.isDestroyed&&this.isPointInPolygon([e.x,e.y],s.map(o=>[o.x,o.y])))return n}return null}isPointInPolygon(e,i){let n=!1;const s=e[0],o=e[1];for(let a=0,l=i.length-1;a<i.length;l=a++){const c=i[a][0],u=i[a][1],d=i[l][0],p=i[l][1];u>o!=p>o&&s<(d-c)*(o-u)/(p-u)+c&&(n=!n)}return n}processDragMatch(){this.dragCellQueue.forEach(i=>{i&&!i.isDestroyed&&(i.isRemoved=!0,i.setHighlight(!1))});let e=!1;this.dragCellQueue.forEach((i,n)=>{const s=n+1;setTimeout(()=>{if(i&&!i.isDestroyed&&i.isRemoved){const o=this.gameApp.levelManager.updateScore(s,i.colorIndex);o&&o.levelCompleted&&(e=!0),this.gameApp.animationManager.playCellBreakAnim(i,o),this.gameApp.removeCell(i)}},n*150)}),this.dragCellQueue=[],setTimeout(e?()=>{this.gameApp.levelManager.endGame(!0)}:()=>{this.gameApp.levelManager.checkAndGenerateCells()},500)}countRemainingCellsOfColor(e){let i=0;for(let n=0;n<this.gameApp.cells.children.length;n++){const s=this.gameApp.cells.children[n];!s.isDestroyed&&s.colorIndex===e&&i++}return i}destroy(){this.gameApp.cells&&(this.gameApp.cells.off("pointerdown",this.startDrag.bind(this)),this.gameApp.cells.off("pointermove",this.updateDrag.bind(this)),this.gameApp.cells.off("pointerup",this.endDrag.bind(this)),this.gameApp.cells.off("pointerupoutside",this.endDrag.bind(this)))}}class oJe extends Ii{constructor(e,i){super(),this.color=e,this.collectCount=i,this.currentProgress=0,this.background=new En,this.background.beginFill(e),this.background.drawCircle(0,0,60),this.background.endFill(),this.addChild(this.background),this.progressText=new Vn("0/0",{fontFamily:"Arial",fontSize:40,fill:16777215,align:"center"}),this.progressText.anchor.set(.5,.5),this.addChild(this.progressText),this.updateProgress(0)}updateProgress(e){this.currentProgress=Math.min(e,this.collectCount),this.progressText.text=`${this.currentProgress}/${this.collectCount}`}playHitEffect(e){this.scale.set(1*.9);const n=new En;n.beginFill(this.color,.5),n.drawCircle(0,0,70),n.endFill(),this.addChild(n),setTimeout(()=>{this.scale.set(1),this.children.includes(n)&&this.removeChild(n),console.log("playHitEffect",e),e.levelCompleted&&vr.levelManager.endGame(!0)},100),this.updateProgress(e.count)}}class aJe{constructor(e){this.gameApp=e,this.levelInfoUI=null,this.levelInfoStaticText=null,this.levelColorIndicators=[]}initLevelInfoUI(){if(!this.gameApp.levelManager||!this.gameApp.levelManager.currentLevelConfig)return;const e=this.gameApp.levelManager.currentLevelConfig;this.levelInfoUI&&this.gameApp.ui.removeChild(this.levelInfoUI),this.levelInfoUI=new Ii,this.gameApp.ui.addChild(this.levelInfoUI),this.levelInfoStaticText=new Vn(`第${e.id}关`,{fontFamily:"Arial",fontSize:66,fill:16777215,align:"center"}),this.levelInfoStaticText.x=0,this.levelInfoStaticText.y=0,this.levelInfoStaticText.anchor.set(.5,.5),this.levelInfoUI.addChild(this.levelInfoStaticText),this.levelColorIndicators=[];const i=120,n=30,o=-(e.colorIndex.length*i+(e.colorIndex.length-1)*n)/2;e.colorIndex.forEach((a,l)=>{const c=new oJe(this.gameApp.colors[a],e.collectCount[l]);c.x=o+l*(i+n)+i/2,c.y=120,this.levelInfoUI.addChild(c),this.levelColorIndicators.push(c)}),this.initLevelProgressUI(),this.levelInfoUI.x=this.gameApp.pixi.screen.width/2,this.levelInfoUI.y=120}initLevelProgressUI(){if(!this.levelInfoUI||!this.gameApp.levelManager||!this.gameApp.levelManager.currentLevelConfig)return;const e=this.gameApp.levelManager.currentLevelConfig,i=this.gameApp.levelManager.countByColor||{};e.colorIndex.forEach((n,s)=>{const o=i[n]||0;this.levelColorIndicators[s]&&this.levelColorIndicators[s].updateProgress(o)})}playColorIndicatorHitEffect(e){this.levelColorIndicators[e.colorIndex]&&this.levelColorIndicators[e.colorIndex].playHitEffect(e)}destroy(){this.levelInfoUI&&(this.gameApp.ui.removeChild(this.levelInfoUI),this.levelInfoUI=null),this.levelColorIndicators=[]}}class lJe{constructor(e){this.gameApp=e}clearCellGraphics(){this.gameApp.normalCellGraphic&&this.gameApp.normalCellGraphic.clear(),this.gameApp.highlightBorderGraphic&&this.gameApp.highlightBorderGraphic.clear(),this.gameApp.highlightCellGraphic&&this.gameApp.highlightCellGraphic.clear(),this.gameApp.effectGraphic&&this.gameApp.effectGraphic.clear()}drawAllCellGraphics(){this.gameApp.normalCellGraphic.clear(),this.gameApp.highlightBorderGraphic.clear(),this.gameApp.highlightCellGraphic.clear(),this.gameApp.cells.children.forEach(e=>{e.isDestroyed||this.drawCell(e)})}drawCell(e){const i=e.getDisplayPoints();if(i.length<3)return;const n="catmull";e.highlighted?(this.gameApp.highlightCellGraphic.lineStyle(0),this.gameApp.highlightCellGraphic.beginFill(e.color),this.drawPath(this.gameApp.highlightCellGraphic,i,n),this.gameApp.highlightCellGraphic.closePath(),this.gameApp.highlightCellGraphic.endFill(),this.gameApp.highlightBorderGraphic.lineStyle(20,16777215,1),this.gameApp.highlightBorderGraphic.beginFill(16777215,.1),this.drawPath(this.gameApp.highlightBorderGraphic,i,n),this.gameApp.highlightBorderGraphic.closePath(),this.gameApp.highlightBorderGraphic.endFill()):(this.gameApp.normalCellGraphic.lineStyle(0),this.gameApp.normalCellGraphic.beginFill(e.color),this.drawPath(this.gameApp.normalCellGraphic,i,n),this.gameApp.normalCellGraphic.closePath(),this.gameApp.normalCellGraphic.endFill())}drawPath(e,i,n){switch(n){case"line":this.drawLinePath(e,i);break;case"quadratic":this.drawQuadraticPath(e,i);break;case"cubic":this.drawCubicPath(e,i);break;case"smooth":this.drawSmoothPath(e,i);break;case"catmull":default:this.drawCatmullPath(e,i);break}}drawLinePath(e,i){e.moveTo(i[0].x,i[0].y);for(let n=1;n<i.length;n++)e.lineTo(i[n].x,i[n].y)}drawQuadraticPath(e,i){const n=i,s=n.length;if(s<3){this.drawLinePath(e,i);return}e.moveTo(n[0].x,n[0].y);for(let o=0;o<s;o++){const a=n[o],l=n[(o+1)%s];n[(o+2)%s];const c=(a.x+l.x)/2,u=(a.y+l.y)/2;e.quadraticCurveTo(c,u,l.x,l.y)}}drawCubicPath(e,i){const n=i,s=n.length;if(s<4){this.drawQuadraticPath(e,i);return}e.moveTo(n[0].x,n[0].y);for(let o=0;o<s;o++){const a=n[o],l=n[(o+1)%s],c=n[(o+2)%s];n[(o+3)%s];const u=a.x+(l.x-a.x)*.5,d=a.y+(l.y-a.y)*.5,p=l.x+(c.x-l.x)*.5,m=l.y+(c.y-l.y)*.5;e.bezierCurveTo(u,d,p,m,l.x,l.y)}}drawSmoothPath(e,i){const n=i,s=n.length;e.moveTo(n[0].x,n[0].y);for(let o=1;o<s;o++){const a=n[o-1],l=n[o],c=n[(o+1)%s],u=.3,d=a.x+(l.x-a.x)*(1-u),p=a.y+(l.y-a.y)*(1-u),m=l.x+(c.x-l.x)*u,g=l.y+(c.y-l.y)*u;e.bezierCurveTo(d,p,m,g,l.x,l.y)}}drawCatmullPath(e,i){const n=i,s=n.length;e.moveTo(n[0].x,n[0].y);const o=10;for(let a=0;a<s;a++){const l=n[(a-1+s)%s],c=n[a],u=n[(a+1)%s],d=n[(a+2)%s];for(let p=1;p<=o;p++){const m=p/o,g=m*m,y=g*m,_=.5*(2*c.x+(-l.x+u.x)*m+(2*l.x-5*c.x+4*u.x-d.x)*g+(-l.x+3*c.x-3*u.x+d.x)*y),x=.5*(2*c.y+(-l.y+u.y)*m+(2*l.y-5*c.y+4*u.y-d.y)*g+(-l.y+3*c.y-3*u.y+d.y)*y);e.lineTo(_,x)}}}destroy(){}}class hJe{constructor(e){this.gameApp=e,this.container=null,this.isVisible=!1,this.settlementData=null,this.initSettlementContainer()}initSettlementContainer(){this.container=new Ii,this.container.visible=!1,this.container.zIndex=1e3,this.gameApp.pixi.stage.addChild(this.container)}showSettlement(e){this.settlementData=e,this.isVisible=!0,this.clearSettlement(),this.createSettlementUI(),this.container.visible=!0,this.playShowAnimation()}hideSettlement(){this.isVisible=!1,this.container.visible=!1,this.clearSettlement()}clearSettlement(){for(;this.container.children.length>0;)this.container.removeChildAt(0)}createSettlementUI(){const e=this.gameApp.pixi.screen.width,i=this.gameApp.pixi.screen.height;this.calculateElementPositions(e,i),this.createBackgroundMask(e,i),this.createMainPanel(),this.createTitle(),this.createResultInfo(),this.createButtons(),this.playAnimationSequence()}calculateElementPositions(e,i){const n=this.settlementData.levelConfig.colorIndex.length,s=600,l=n*(90+20),c=s+l;this.panelConfig={width:Math.max(800,600+n*50),height:Math.max(1e3,c),x:(e-Math.max(800,600+n*50))/2,y:(i-Math.max(1e3,c))/2},this.fontConfig={title:Math.max(72,96-(n-2)*8),levelInfo:Math.max(36,48-(n-2)*4),score:Math.max(48,64-(n-2)*6),colorTitle:Math.max(40,52-(n-2)*4),colorCount:Math.max(36,48-(n-2)*4),colorScore:Math.max(32,44-(n-2)*4),button:Math.max(28,36-(n-2)*2),colorIndicator:Math.max(20,30-(n-2)*2),buttonWidth:Math.max(240,280-(n-2)*10),buttonHeight:Math.max(70,90-(n-2)*5)},this.titleConfig={x:this.panelConfig.x+this.panelConfig.width/2,y:this.panelConfig.y+50},this.infoContainerConfig={x:this.panelConfig.x+this.panelConfig.width/2,y:this.titleConfig.y+120},this.levelInfoConfig={y:0},this.scoreInfoConfig={y:80},this.colorCollectionConfig={y:180},this.calculateColorItemPositions(),this.calculateButtonPositions(e,i)}calculateColorItemPositions(){const e=this.settlementData.levelConfig.colorIndex.length;this.colorItemConfigs=[];const o=Math.max(70,Math.min(120,90-(e-2)*5));let a=100;for(let l=0;l<e;l++){const c=-220-(e>3?(e-3)*20:0),u=-60-(e>3?(e-3)*10:0),d=140+(e>3?(e-3)*10:0);this.colorItemConfigs.push({y:a,colorIndicator:{x:c,y:a},collectText:{x:u,y:a},scoreText:{x:d,y:a}}),a+=o}}calculateButtonPositions(e,i){this.settlementData.levelConfig.colorIndex.length;const o=this.panelConfig.y+this.panelConfig.height-150-120,a=this.fontConfig.buttonWidth+40;this.buttonConfig={x:this.panelConfig.x+this.panelConfig.width/2,y:o,restartButton:{x:-a/2},nextButton:{x:a/2}}}createBackgroundMask(e,i){const n=new En;n.beginFill(0,.7),n.drawRect(0,0,e,i),n.endFill(),n.eventMode="static",n.on("pointerdown",()=>{}),this.container.addChild(n)}createMainPanel(){const e=new En;e.beginFill(2899536,.95),e.lineStyle(4,3447003,1),e.drawRoundedRect(this.panelConfig.x,this.panelConfig.y,this.panelConfig.width,this.panelConfig.height,20),e.endFill();const i=new En;i.beginFill(3447003,.3),i.drawRoundedRect(this.panelConfig.x+10,this.panelConfig.y+10,this.panelConfig.width-20,80,15),i.endFill(),this.container.addChild(e),this.container.addChild(i)}createTitle(){const e=this.settlementData.isWin?"关卡完成！":"游戏结束",i=this.settlementData.isWin?3066993:15158332,n=new Vn(e,{fontFamily:"Arial",fontSize:this.fontConfig.title,fontWeight:"bold",fill:i,stroke:16777215,strokeThickness:3,align:"center"});n.anchor.set(.5,0),n.x=this.titleConfig.x,n.y=this.titleConfig.y,this.container.addChild(n)}createResultInfo(){const e=new Ii;e.x=this.infoContainerConfig.x,e.y=this.infoContainerConfig.y;const i=new Vn(`关卡 ${this.settlementData.levelId}: ${this.settlementData.levelName}`,{fontFamily:"Arial",fontSize:this.fontConfig.levelInfo,fill:16777215,align:"center"});i.anchor.set(.5,0),i.y=this.levelInfoConfig.y,e.addChild(i);const n=new Vn(`得分: ${this.settlementData.currentScore}`,{fontFamily:"Arial",fontSize:this.fontConfig.score,fontWeight:"bold",fill:15965202,align:"center"});n.anchor.set(.5,0),n.y=this.scoreInfoConfig.y,n.alpha=0,e.addChild(n);const s=this.createColorCollectionInfo();s.alpha=0,e.addChild(s),this.animationElements={scoreText:n,colorContainer:s},this.container.addChild(e)}createColorCollectionInfo(){const e=new Ii;e.y=this.colorCollectionConfig.y;const i=new Vn("收集进度:",{fontFamily:"Arial",fontSize:this.fontConfig.colorTitle,fontWeight:"bold",fill:16777215,align:"center"});i.anchor.set(.5,0),e.addChild(i);const n=this.gameApp.colors;return this.colorElements=[],this.settlementData.levelConfig.colorIndex.forEach((s,o)=>{const a=n[s],l=this.settlementData.countByColor[s]||0,c=this.settlementData.targetCounts[o],u=this.settlementData.scoreByColor[s]||0,d=this.colorItemConfigs[o],p=new Ii;p.alpha=0;const m=new En;m.beginFill(a),m.drawCircle(0,0,this.fontConfig.colorIndicator),m.endFill(),m.x=d.colorIndicator.x,m.y=d.colorIndicator.y;const g=new Vn(`${l}/${c}`,{fontFamily:"Arial",fontSize:this.fontConfig.colorCount,fill:l>=c?3066993:16777215,align:"center"});g.anchor.set(.5,.5),g.x=d.collectText.x,g.y=d.collectText.y;const y=new Vn(`+${u}`,{fontFamily:"Arial",fontSize:this.fontConfig.colorScore,fill:15965202,align:"center"});y.anchor.set(.5,.5),y.x=d.scoreText.x,y.y=d.scoreText.y,p.addChild(m),p.addChild(g),p.addChild(y),e.addChild(p),this.colorElements.push(p)}),e}createButtons(){const e=new Ii;e.x=this.buttonConfig.x,e.y=this.buttonConfig.y,e.alpha=0;const i=this.createButton("重新开始",15158332,()=>{this.onRestartClick()});i.x=this.buttonConfig.restartButton.x,e.addChild(i);const n=iJe().length;if(this.settlementData.isWin&&this.settlementData.levelId<n){const s=this.createButton("下一关",3066993,()=>{this.onNextLevelClick()});s.x=this.buttonConfig.nextButton.x,e.addChild(s)}this.buttonContainer=e,this.container.addChild(e)}createButton(e,i,n){const s=new Ii;s.eventMode="static";const o=new En;o.beginFill(i),o.lineStyle(3,16777215,1),o.drawRoundedRect(-this.fontConfig.buttonWidth/2,-this.fontConfig.buttonHeight/2,this.fontConfig.buttonWidth,this.fontConfig.buttonHeight,20),o.endFill();const a=new Vn(e,{fontFamily:"Arial",fontSize:this.fontConfig.button,fontWeight:"bold",fill:16777215,align:"center"});return a.anchor.set(.5,.5),s.addChild(o),s.addChild(a),s.on("pointerdown",n),s.on("pointerover",()=>{o.tint=13421772}),s.on("pointerout",()=>{o.tint=16777215}),s}playAnimationSequence(){this.playShowAnimation(()=>{this.playColorAnimations(()=>{this.playTotalAnimations(()=>{this.showButtons()})})})}playShowAnimation(e){this.container.alpha=0,this.container.scale.set(.8);let i=0;const n=()=>{i+=.08,i>=1&&(i=1,this.gameApp.pixi.ticker.remove(n),e&&e());const s=1-Math.pow(1-i,3);this.container.alpha=s,this.container.scale.set(.8+(1-.8)*s)};this.gameApp.pixi.ticker.add(n)}playColorAnimations(e){let i=0;const n=()=>{if(i>=this.colorElements.length){e&&e();return}const s=this.colorElements[i];s.alpha=0,s.scale.set(.5);let o=0;const a=()=>{o+=.15,o>=1&&(o=1,this.gameApp.pixi.ticker.remove(a),i++,setTimeout(n,100));const l=1-Math.pow(1-o,2);s.alpha=l,s.scale.set(.5+(1-.5)*l)};this.gameApp.pixi.ticker.add(a)};n()}playTotalAnimations(e){if(this.animationElements.scoreText){this.animationElements.scoreText.alpha=0,this.animationElements.scoreText.scale.set(.8);let i=0;const n=()=>{if(i+=.12,i>=1){i=1,this.gameApp.pixi.ticker.remove(n),this.animationElements.colorContainer.alpha=0,this.animationElements.colorContainer.scale.set(.8);let o=0;const a=()=>{o+=.12,o>=1&&(o=1,this.gameApp.pixi.ticker.remove(a),e&&e());const l=1-Math.pow(1-o,2);this.animationElements.colorContainer.alpha=l,this.animationElements.colorContainer.scale.set(.8+(1-.8)*l)};this.gameApp.pixi.ticker.add(a)}const s=1-Math.pow(1-i,2);this.animationElements.scoreText.alpha=s,this.animationElements.scoreText.scale.set(.8+(1-.8)*s)};this.gameApp.pixi.ticker.add(n)}else e&&e()}showButtons(){if(this.buttonContainer){this.buttonContainer.alpha=0,this.buttonContainer.scale.set(.8);let e=0;const i=()=>{e+=.12,e>=1&&(e=1,this.gameApp.pixi.ticker.remove(i));const n=1-Math.pow(1-e,2);this.buttonContainer.alpha=n,this.buttonContainer.scale.set(.8+(1-.8)*n)};this.gameApp.pixi.ticker.add(i)}}onRestartClick(){this.hideSettlement(),this.gameApp.levelManager.loadLevel(this.settlementData.levelId)}onNextLevelClick(){this.hideSettlement();const e=this.settlementData.levelId+1;this.gameApp.levelManager.loadLevel(e)}destroy(){this.hideSettlement(),this.container&&this.container.parent&&this.container.parent.removeChild(this.container),this.container=null}}class cJe{constructor(){Xi(this,"pixi",null);Xi(this,"cells",null);Xi(this,"physicsWorld",null);Xi(this,"timeStep",1/60);Xi(this,"velocityIterations",8);Xi(this,"positionIterations",3);Xi(this,"PPM",50);Xi(this,"colors",[4886754,8311585,16098851,15158332,10181046,1752220,15105570,3447003,3066993,15965202,15277667,48340]);Xi(this,"animationManager",null);Xi(this,"levelManager",null);Xi(this,"dragManager",null);Xi(this,"uiManager",null);Xi(this,"renderManager",null);Xi(this,"settlementManager",null);Xi(this,"normalCellGraphic",null);Xi(this,"highlightBorderGraphic",null);Xi(this,"highlightCellGraphic",null);Xi(this,"effectGraphic",null);Xi(this,"ui",null)}init(e){this.pixi=new Jp({width:e.clientWidth,height:e.clientHeight,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,view:e}),this.initRenderLayers(),this.initPlanck(),this.initBounds(),this.pixi.ticker.add(this.updatePhysics.bind(this)),this.renderManager=new lJe(this),this.animationManager=new eJe(this),this.levelManager=new rJe(this),this.dragManager=new sJe(this),this.uiManager=new aJe(this),this.settlementManager=new hJe(this)}initRenderLayers(){this.cells=new Ii,this.pixi.stage.addChild(this.cells),this.normalCellGraphic=new En,this.pixi.stage.addChild(this.normalCellGraphic),this.highlightBorderGraphic=new En,this.pixi.stage.addChild(this.highlightBorderGraphic),this.highlightCellGraphic=new En,this.pixi.stage.addChild(this.highlightCellGraphic),this.effectGraphic=new En,this.pixi.stage.addChild(this.effectGraphic),this.ui=new Ii,this.pixi.stage.addChild(this.ui)}initPlanck(){this.physicsWorld=new wS({gravity:new X(0,9.8)})}updatePhysics(){this.physicsWorld.step(1/60,2,1),this.renderManager.drawAllCellGraphics()}initBounds(){const e=this.pixi.screen.width,i=this.pixi.screen.height,n=this.physicsWorld.createBody();n.createFixture(new YT(new X(0,0),new X(e/this.PPM,0))),n.createFixture(new YT(new X(0,i/this.PPM),new X(e/this.PPM,i/this.PPM))),n.createFixture(new YT(new X(0,0),new X(0,i/this.PPM))),n.createFixture(new YT(new X(e/this.PPM,0),new X(e/this.PPM,i/this.PPM))),this.bounds=n}getBounds(){return this.bounds}isInBounds(e){if(!this.bounds||!e)return!0;const i=e.getPosition(),n=this.pixi.screen.width,s=this.pixi.screen.height;return i.x*this.PPM>=0&&i.x*this.PPM<=n&&i.y*this.PPM>=0&&i.y*this.PPM<=s}addBody(e){return e}removeBody(e){e&&e.getWorld()&&e.getWorld().destroyBody(e)}addJoint(e){return e}removeJoint(e){e&&e.getWorld()&&e.getWorld().destroyJoint(e)}addConstraint(e){return this.addJoint(e)}removeConstraint(e){return this.removeJoint(e)}addCell(e){e&&this.cells.addChild(e)}removeCell(e){!e||e.isDestroyed||(e.isDestroyed=!0,e.bodies.forEach(i=>{this.physicsWorld.destroyBody(i)}),e.joints.forEach(i=>{this.physicsWorld.destroyJoint(i)}),this.cells.removeChild(e))}findAndRemoveMatches(e){if(!e)return;const i=this.cells.children.concat([]),n=[e],s=[e],o=new Set([e]);for(;n.length>0;){const a=n.pop();for(const l of i)o.has(l)||this.areCellsConnected(a,l)&&a.colorIndex===l.colorIndex&&(o.add(l),s.push(l),n.push(l))}s.length>=2&&s.forEach(a=>this.removeCell(a))}areCellsConnected(e,i){const n=e.bodies,s=i.bodies;for(const o of n)for(const a of s)if(o===a)return!0;return!1}initDom(e,i={}){const n=window.innerWidth,s=window.innerHeight,o=Math.min(n/i.designWidth,s/i.designHeight)*i.scale;i.designWidth*o,i.designHeight*o,e.style.width=i.designWidth+"px",e.style.height=i.designHeight+"px",e.style.transform=`scale(${o})`,this.windowWidth=n,this.windowHeight=s,this.scale=o,this.designWidth=i.designWidth,this.designHeight=i.designHeight,this.width=i.designWidth,this.height=i.designHeight}destroy(){this.pixi&&this.pixi.ticker&&this.pixi.ticker.remove(this.updatePhysics),this.dragManager&&this.dragManager.destroy(),this.uiManager&&this.uiManager.destroy(),this.renderManager&&this.renderManager.destroy(),this.settlementManager&&this.settlementManager.destroy(),this.cells&&(this.cells.destroy(),this.cells=null),this.ui&&(this.ui.destroy(),this.ui=null),this.normalCellGraphic&&(this.normalCellGraphic.destroy(),this.normalCellGraphic=null),this.highlightBorderGraphic&&(this.highlightBorderGraphic.destroy(),this.highlightBorderGraphic=null),this.highlightCellGraphic&&(this.highlightCellGraphic.destroy(),this.highlightCellGraphic=null),this.effectGraphic&&(this.effectGraphic.destroy(),this.effectGraphic=null),this.physicsWorld&&(this.physicsWorld=null),this.bounds&&(this.bounds&&this.bounds.getWorld()&&this.bounds.getWorld().destroyBody(this.bounds),this.bounds=null),this.pixi&&(this.pixi.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this.pixi=null)}}const uJe=new cJe,vr=uJe,dJe={class:"game-container"},fJe={__name:"GameMatch",setup(r){const e=lt(null);nr(()=>{i(),vr.levelManager.loadLevel(1)});function i(){window.gameApp=vr;const n={designWidth:1080,designHeight:1920,scale:.9};vr.initDom(e.value,n),vr.init(e.value)}return ta(()=>{vr.destroy()}),(n,s)=>(ci(),pn("div",dJe,[It("canvas",{ref_key:"pixiContainer",ref:e},null,512)]))}},pJe=zd(fJe,[["__scopeId","data-v-d0c23696"]]),mJe=It("div",{class:"loading"},"加载中...",-1),gJe={key:1},vJe=["onClick"],yJe={__name:"App",setup(r){const e=[{id:"TankMain",title:"坦克大战",comp:lNe},{id:"KonvaMain",title:"Konva示例",comp:hVe},{id:"CoinKnight",title:"金币骑士",comp:R1,link:"CoinKnight/index.html"},{id:"FarmMine",title:"田园扫雷",comp:R1,link:"FarmMine/index.html"},{id:"jigsaw",title:"拼图游戏",comp:R1,link:"jigsaw/index.html"},{id:"tetris",title:"俄罗斯方块",comp:R1,link:"tetris/index.html"},{id:"heart",title:"跳动的爱心",comp:R1,link:"webui/heart.html"},{id:"KonvaStageTest",title:"KonvaStageTest",comp:yVe},{id:"GridSquare",title:"矩形网格",comp:dVe},{id:"GridParallelogramH",title:"横向平行四边形网格",comp:pVe},{id:"GridParallelogramV",title:"纵向平行四边形网格",comp:gVe},{id:"TrigoCalc",title:"三角函数计算器",comp:xVe},{id:"ShaderFragBase",title:"Shader-函数入门",comp:H9e},{id:"ShaderImageBase",title:"Shader-图像入门",comp:Z9e},{id:"d-puzzle",title:"d-拼图演示",comp:DR,link:"video/puzzle.mp4"},{id:"d-ice",title:"d-冰块演示",comp:DR,link:"video/ice.mp4"},{id:"d-door",title:"d-传送门",comp:DR,link:"video/door.mp4"},{id:"BallGame",title:"抓住狗屎运",comp:Eqe},{id:"CurveRope",title:"曲线绳子(Three)",comp:$qe},{id:"CurveRopePixi",title:"曲线绳子(Pixi)",comp:Kqe},{id:"PixiHello",title:"PixiHello",comp:Jqe},{id:"ThreeHello",title:"ThreeHello",comp:Rqe},{id:"Game2048",title:"Game2048",comp:aZe},{id:"SplitImage",title:"SplitImage",comp:pZe},{id:"Shooter",title:"Shooter",comp:MZe},{id:"GameMatch",title:"GameMatch",comp:pJe}],i=lt(window.location.hash.slice(1));window.addEventListener("hashchange",()=>{i.value=window.location.hash.slice(1),document.title="Project:"+i.value});const n=tr(()=>e.find(a=>a.id===i.value)),s=tr(()=>{var a;return(a=n.value)==null?void 0:a.comp});function o(a){window.location.hash=a.id}return(a,l)=>s.value?(ci(),Es(Iq,{key:0},{default:Je(()=>[(ci(),Es(Pq(s.value),iq(rN(n.value.link?{link:n.value.link}:{})),null,16))]),fallback:Je(()=>[mJe]),_:1})):(ci(),pn("div",gJe,[ke(li(EM.Row),{gutter:16},{default:Je(()=>[(ci(),pn(Fn,null,au(e,c=>ke(li(EM.Col),{key:c.id,span:4,xs:12,sm:8,md:6,lg:4,xl:4},{default:Je(()=>[It("div",{onClick:u=>o(c)},[ke(hCe,{routeData:c},null,8,["routeData"])],8,vJe)]),_:2},1024)),64))]),_:1})]))}};var yk=HZ(yJe);yk.use(lZe);yk.use(EIe);yk.use(nie);yk.mount("#app");
