var XH=Object.defineProperty;var YH=(i,e,n)=>e in i?XH(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Lm=(i,e,n)=>(YH(i,typeof e!="symbol"?e+"":e,n),n);function JH(i,e){for(var n=0;n<e.length;n++){const t=e[n];if(typeof t!="string"&&!Array.isArray(t)){for(const s in t)if(s!=="default"&&!(s in i)){const a=Object.getOwnPropertyDescriptor(t,s);a&&Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:()=>t[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function H0(i,e){const n=new Set(i.split(","));return t=>n.has(t)}const Dn={},Nu=[],Or=()=>{},ZH=()=>!1,dp=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),rx=i=>i.startsWith("onUpdate:"),Jn=Object.assign,sx=(i,e)=>{const n=i.indexOf(e);n>-1&&i.splice(n,1)},QH=Object.prototype.hasOwnProperty,Sn=(i,e)=>QH.call(i,e),St=Array.isArray,Ru=i=>fh(i)==="[object Map]",Ec=i=>fh(i)==="[object Set]",nM=i=>fh(i)==="[object Date]",eG=i=>fh(i)==="[object RegExp]",Ht=i=>typeof i=="function",ti=i=>typeof i=="string",Za=i=>typeof i=="symbol",Un=i=>i!==null&&typeof i=="object",ax=i=>(Un(i)||Ht(i))&&Ht(i.then)&&Ht(i.catch),_A=Object.prototype.toString,fh=i=>_A.call(i),tG=i=>fh(i).slice(8,-1),xA=i=>fh(i)==="[object Object]",ox=i=>ti(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Du=H0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),G0=i=>{const e=Object.create(null);return n=>e[n]||(e[n]=i(n))},nG=/-(\w)/g,gr=G0(i=>i.replace(nG,(e,n)=>n?n.toUpperCase():"")),iG=/\B([A-Z])/g,is=G0(i=>i.replace(iG,"-$1").toLowerCase()),fp=G0(i=>i.charAt(0).toUpperCase()+i.slice(1)),Cf=G0(i=>i?`on${fp(i)}`:""),Gs=(i,e)=>!Object.is(i,e),Lu=(i,e)=>{for(let n=0;n<i.length;n++)i[n](e)},wA=(i,e,n,t=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:t,value:n})},m0=i=>{const e=parseFloat(i);return isNaN(e)?i:e},g0=i=>{const e=ti(i)?Number(i):NaN;return isNaN(e)?i:e};let iM;const CA=()=>iM||(iM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),rG="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",sG=H0(rG);function Mc(i){if(St(i)){const e={};for(let n=0;n<i.length;n++){const t=i[n],s=ti(t)?cG(t):Mc(t);if(s)for(const a in s)e[a]=s[a]}return e}else if(ti(i)||Un(i))return i}const aG=/;(?![^(]*\))/g,oG=/:([^]+)/,lG=/\/\*[^]*?\*\//g;function cG(i){const e={};return i.replace(lG,"").split(aG).forEach(n=>{if(n){const t=n.split(oG);t.length>1&&(e[t[0].trim()]=t[1].trim())}}),e}function ph(i){let e="";if(ti(i))e=i;else if(St(i))for(let n=0;n<i.length;n++){const t=ph(i[n]);t&&(e+=t+" ")}else if(Un(i))for(const n in i)i[n]&&(e+=n+" ");return e.trim()}function uG(i){if(!i)return null;let{class:e,style:n}=i;return e&&!ti(e)&&(i.class=ph(e)),n&&(i.style=Mc(n)),i}const hG="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dG=H0(hG);function SA(i){return!!i||i===""}function fG(i,e){if(i.length!==e.length)return!1;let n=!0;for(let t=0;n&&t<i.length;t++)n=nl(i[t],e[t]);return n}function nl(i,e){if(i===e)return!0;let n=nM(i),t=nM(e);if(n||t)return n&&t?i.getTime()===e.getTime():!1;if(n=Za(i),t=Za(e),n||t)return i===e;if(n=St(i),t=St(e),n||t)return n&&t?fG(i,e):!1;if(n=Un(i),t=Un(e),n||t){if(!n||!t)return!1;const s=Object.keys(i).length,a=Object.keys(e).length;if(s!==a)return!1;for(const l in i){const c=i.hasOwnProperty(l),h=e.hasOwnProperty(l);if(c&&!h||!c&&h||!nl(i[l],e[l]))return!1}}return String(i)===String(e)}function W0(i,e){return i.findIndex(n=>nl(n,e))}const EA=i=>ti(i)?i:i==null?"":St(i)||Un(i)&&(i.toString===_A||!Ht(i.toString))?JSON.stringify(i,MA,2):String(i),MA=(i,e)=>e&&e.__v_isRef?MA(i,e.value):Ru(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[t,s],a)=>(n[c1(t,a)+" =>"]=s,n),{})}:Ec(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>c1(n))}:Za(e)?c1(e):Un(e)&&!St(e)&&!xA(e)?String(e):e,c1=(i,e="")=>{var n;return Za(i)?`Symbol(${(n=i.description)!=null?n:e})`:i};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let es;class lx{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=es,!e&&es&&(this.index=(es.scopes||(es.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=es;try{return es=this,e()}finally{es=n}}}on(){es=this}off(){es=this.parent}stop(e){if(this._active){let n,t;for(n=0,t=this.effects.length;n<t;n++)this.effects[n].stop();for(n=0,t=this.cleanups.length;n<t;n++)this.cleanups[n]();if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function pG(i){return new lx(i)}function TA(i,e=es){e&&e.active&&e.effects.push(i)}function j0(){return es}function cx(i){es&&es.cleanups.push(i)}let sc;class Ku{constructor(e,n,t,s){this.fn=e,this.trigger=n,this.scheduler=t,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,TA(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,cl();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(mG(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ul()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Qo,n=sc;try{return Qo=!0,sc=this,this._runnings++,rM(this),this.fn()}finally{sM(this),this._runnings--,sc=n,Qo=e}}stop(){this.active&&(rM(this),sM(this),this.onStop&&this.onStop(),this.active=!1)}}function mG(i){return i.value}function rM(i){i._trackId++,i._depsLength=0}function sM(i){if(i.deps.length>i._depsLength){for(let e=i._depsLength;e<i.deps.length;e++)kA(i.deps[e],i);i.deps.length=i._depsLength}}function kA(i,e){const n=i.get(e);n!==void 0&&e._trackId!==n&&(i.delete(e),i.size===0&&i.cleanup())}function gG(i,e){i.effect instanceof Ku&&(i=i.effect.fn);const n=new Ku(i,Or,()=>{n.dirty&&n.run()});e&&(Jn(n,e),e.scope&&TA(n,e.scope)),(!e||!e.lazy)&&n.run();const t=n.run.bind(n);return t.effect=n,t}function vG(i){i.effect.stop()}let Qo=!0,Ob=0;const AA=[];function cl(){AA.push(Qo),Qo=!1}function ul(){const i=AA.pop();Qo=i===void 0?!0:i}function ux(){Ob++}function hx(){for(Ob--;!Ob&&Vb.length;)Vb.shift()()}function PA(i,e,n){if(e.get(i)!==i._trackId){e.set(i,i._trackId);const t=i.deps[i._depsLength];t!==e?(t&&kA(t,i),i.deps[i._depsLength++]=e):i._depsLength++}}const Vb=[];function IA(i,e,n){ux();for(const t of i.keys()){let s;t._dirtyLevel<e&&(s??(s=i.get(t)===t._trackId))&&(t._shouldSchedule||(t._shouldSchedule=t._dirtyLevel===0),t._dirtyLevel=e),t._shouldSchedule&&(s??(s=i.get(t)===t._trackId))&&(t.trigger(),(!t._runnings||t.allowRecurse)&&t._dirtyLevel!==2&&(t._shouldSchedule=!1,t.scheduler&&Vb.push(t.scheduler)))}hx()}const NA=(i,e)=>{const n=new Map;return n.cleanup=i,n.computed=e,n},v0=new WeakMap,ac=Symbol(""),Fb=Symbol("");function zr(i,e,n){if(Qo&&sc){let t=v0.get(i);t||v0.set(i,t=new Map);let s=t.get(n);s||t.set(n,s=NA(()=>t.delete(n))),PA(sc,s)}}function ja(i,e,n,t,s,a){const l=v0.get(i);if(!l)return;let c=[];if(e==="clear")c=[...l.values()];else if(n==="length"&&St(i)){const h=Number(t);l.forEach((d,p)=>{(p==="length"||!Za(p)&&p>=h)&&c.push(d)})}else switch(n!==void 0&&c.push(l.get(n)),e){case"add":St(i)?ox(n)&&c.push(l.get("length")):(c.push(l.get(ac)),Ru(i)&&c.push(l.get(Fb)));break;case"delete":St(i)||(c.push(l.get(ac)),Ru(i)&&c.push(l.get(Fb)));break;case"set":Ru(i)&&c.push(l.get(ac));break}ux();for(const h of c)h&&IA(h,4);hx()}function yG(i,e){const n=v0.get(i);return n&&n.get(e)}const bG=H0("__proto__,__v_isRef,__isVue"),RA=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Za)),aM=_G();function _G(){const i={};return["includes","indexOf","lastIndexOf"].forEach(e=>{i[e]=function(...n){const t=Cn(this);for(let a=0,l=this.length;a<l;a++)zr(t,"get",a+"");const s=t[e](...n);return s===-1||s===!1?t[e](...n.map(Cn)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{i[e]=function(...n){cl(),ux();const t=Cn(this)[e].apply(this,n);return hx(),ul(),t}}),i}function xG(i){Za(i)||(i=String(i));const e=Cn(this);return zr(e,"has",i),e.hasOwnProperty(i)}class DA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,t){const s=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return a;if(n==="__v_raw")return t===(s?a?UA:FA:a?VA:OA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(t)?e:void 0;const l=St(e);if(!s){if(l&&Sn(aM,n))return Reflect.get(aM,n,t);if(n==="hasOwnProperty")return xG}const c=Reflect.get(e,n,t);return(Za(n)?RA.has(n):bG(n))||(s||zr(e,"get",n),a)?c:Ci(c)?l&&ox(n)?c:c.value:Un(c)?s?gc(c):mh(c):c}}class LA extends DA{constructor(e=!1){super(!1,e)}set(e,n,t,s){let a=e[n];if(!this._isShallow){const h=qu(a);if(!Bf(t)&&!qu(t)&&(a=Cn(a),t=Cn(t)),!St(e)&&Ci(a)&&!Ci(t))return h?!1:(a.value=t,!0)}const l=St(e)&&ox(n)?Number(n)<e.length:Sn(e,n),c=Reflect.set(e,n,t,s);return e===Cn(s)&&(l?Gs(t,a)&&ja(e,"set",n,t):ja(e,"add",n,t)),c}deleteProperty(e,n){const t=Sn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&t&&ja(e,"delete",n,void 0),s}has(e,n){const t=Reflect.has(e,n);return(!Za(n)||!RA.has(n))&&zr(e,"has",n),t}ownKeys(e){return zr(e,"iterate",St(e)?"length":ac),Reflect.ownKeys(e)}}class BA extends DA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const wG=new LA,CG=new BA,SG=new LA(!0),EG=new BA(!0),dx=i=>i,K0=i=>Reflect.getPrototypeOf(i);function Bm(i,e,n=!1,t=!1){i=i.__v_raw;const s=Cn(i),a=Cn(e);n||(Gs(e,a)&&zr(s,"get",e),zr(s,"get",a));const{has:l}=K0(s),c=t?dx:n?px:Of;if(l.call(s,e))return c(i.get(e));if(l.call(s,a))return c(i.get(a));i!==s&&i.get(e)}function Om(i,e=!1){const n=this.__v_raw,t=Cn(n),s=Cn(i);return e||(Gs(i,s)&&zr(t,"has",i),zr(t,"has",s)),i===s?n.has(i):n.has(i)||n.has(s)}function Vm(i,e=!1){return i=i.__v_raw,!e&&zr(Cn(i),"iterate",ac),Reflect.get(i,"size",i)}function oM(i){i=Cn(i);const e=Cn(this);return K0(e).has.call(e,i)||(e.add(i),ja(e,"add",i,i)),this}function lM(i,e){e=Cn(e);const n=Cn(this),{has:t,get:s}=K0(n);let a=t.call(n,i);a||(i=Cn(i),a=t.call(n,i));const l=s.call(n,i);return n.set(i,e),a?Gs(e,l)&&ja(n,"set",i,e):ja(n,"add",i,e),this}function cM(i){const e=Cn(this),{has:n,get:t}=K0(e);let s=n.call(e,i);s||(i=Cn(i),s=n.call(e,i)),t&&t.call(e,i);const a=e.delete(i);return s&&ja(e,"delete",i,void 0),a}function uM(){const i=Cn(this),e=i.size!==0,n=i.clear();return e&&ja(i,"clear",void 0,void 0),n}function Fm(i,e){return function(t,s){const a=this,l=a.__v_raw,c=Cn(l),h=e?dx:i?px:Of;return!i&&zr(c,"iterate",ac),l.forEach((d,p)=>t.call(s,h(d),h(p),a))}}function Um(i,e,n){return function(...t){const s=this.__v_raw,a=Cn(s),l=Ru(a),c=i==="entries"||i===Symbol.iterator&&l,h=i==="keys"&&l,d=s[i](...t),p=n?dx:e?px:Of;return!e&&zr(a,"iterate",h?Fb:ac),{next(){const{value:m,done:v}=d.next();return v?{value:m,done:v}:{value:c?[p(m[0]),p(m[1])]:p(m),done:v}},[Symbol.iterator](){return this}}}}function Ao(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function MG(){const i={get(a){return Bm(this,a)},get size(){return Vm(this)},has:Om,add:oM,set:lM,delete:cM,clear:uM,forEach:Fm(!1,!1)},e={get(a){return Bm(this,a,!1,!0)},get size(){return Vm(this)},has:Om,add:oM,set:lM,delete:cM,clear:uM,forEach:Fm(!1,!0)},n={get(a){return Bm(this,a,!0)},get size(){return Vm(this,!0)},has(a){return Om.call(this,a,!0)},add:Ao("add"),set:Ao("set"),delete:Ao("delete"),clear:Ao("clear"),forEach:Fm(!0,!1)},t={get(a){return Bm(this,a,!0,!0)},get size(){return Vm(this,!0)},has(a){return Om.call(this,a,!0)},add:Ao("add"),set:Ao("set"),delete:Ao("delete"),clear:Ao("clear"),forEach:Fm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{i[a]=Um(a,!1,!1),n[a]=Um(a,!0,!1),e[a]=Um(a,!1,!0),t[a]=Um(a,!0,!0)}),[i,n,e,t]}const[TG,kG,AG,PG]=MG();function q0(i,e){const n=e?i?PG:AG:i?kG:TG;return(t,s,a)=>s==="__v_isReactive"?!i:s==="__v_isReadonly"?i:s==="__v_raw"?t:Reflect.get(Sn(n,s)&&s in t?n:t,s,a)}const IG={get:q0(!1,!1)},NG={get:q0(!1,!0)},RG={get:q0(!0,!1)},DG={get:q0(!0,!0)},OA=new WeakMap,VA=new WeakMap,FA=new WeakMap,UA=new WeakMap;function LG(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BG(i){return i.__v_skip||!Object.isExtensible(i)?0:LG(tG(i))}function mh(i){return qu(i)?i:X0(i,!1,wG,IG,OA)}function zA(i){return X0(i,!1,SG,NG,VA)}function gc(i){return X0(i,!0,CG,RG,FA)}function OG(i){return X0(i,!0,EG,DG,UA)}function X0(i,e,n,t,s){if(!Un(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const a=s.get(i);if(a)return a;const l=BG(i);if(l===0)return i;const c=new Proxy(i,l===2?t:n);return s.set(i,c),c}function Bu(i){return qu(i)?Bu(i.__v_raw):!!(i&&i.__v_isReactive)}function qu(i){return!!(i&&i.__v_isReadonly)}function Bf(i){return!!(i&&i.__v_isShallow)}function fx(i){return i?!!i.__v_raw:!1}function Cn(i){const e=i&&i.__v_raw;return e?Cn(e):i}function $A(i){return Object.isExtensible(i)&&wA(i,"__v_skip",!0),i}const Of=i=>Un(i)?mh(i):i,px=i=>Un(i)?gc(i):i;class HA{constructor(e,n,t,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ku(()=>e(this._value),()=>Ou(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=t}get value(){const e=Cn(this);return(!e._cacheable||e.effect.dirty)&&Gs(e._value,e._value=e.effect.run())&&Ou(e,4),mx(e),e.effect._dirtyLevel>=2&&Ou(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function VG(i,e,n=!1){let t,s;const a=Ht(i);return a?(t=i,s=Or):(t=i.get,s=i.set),new HA(t,s,a||!s,n)}function mx(i){var e;Qo&&sc&&(i=Cn(i),PA(sc,(e=i.dep)!=null?e:i.dep=NA(()=>i.dep=void 0,i instanceof HA?i:void 0)))}function Ou(i,e=4,n){i=Cn(i);const t=i.dep;t&&IA(t,e)}function Ci(i){return!!(i&&i.__v_isRef===!0)}function Ct(i){return GA(i,!1)}function Dr(i){return GA(i,!0)}function GA(i,e){return Ci(i)?i:new FG(i,e)}class FG{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Cn(e),this._value=n?e:Of(e)}get value(){return mx(this),this._value}set value(e){const n=this.__v_isShallow||Bf(e)||qu(e);e=n?e:Cn(e),Gs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Of(e),Ou(this,4))}}function UG(i){Ou(i,4)}function on(i){return Ci(i)?i.value:i}function zG(i){return Ht(i)?i():on(i)}const $G={get:(i,e,n)=>on(Reflect.get(i,e,n)),set:(i,e,n,t)=>{const s=i[e];return Ci(s)&&!Ci(n)?(s.value=n,!0):Reflect.set(i,e,n,t)}};function gx(i){return Bu(i)?i:new Proxy(i,$G)}class HG{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:t}=e(()=>mx(this),()=>Ou(this));this._get=n,this._set=t}get value(){return this._get()}set value(e){this._set(e)}}function vx(i){return new HG(i)}function pp(i){const e=St(i)?new Array(i.length):{};for(const n in i)e[n]=WA(i,n);return e}class GG{constructor(e,n,t){this._object=e,this._key=n,this._defaultValue=t,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return yG(Cn(this._object),this._key)}}class WG{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function jG(i,e,n){return Ci(i)?i:Ht(i)?new WG(i):Un(i)&&arguments.length>1?WA(i,e,n):Ct(i)}function WA(i,e,n){const t=i[e];return Ci(t)?t:new GG(i,e,n)}const KG={GET:"get",HAS:"has",ITERATE:"iterate"},qG={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function XG(i,e){}const YG={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},JG={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function Ka(i,e,n,t){try{return t?i(...t):i()}catch(s){Tc(s,e,n)}}function as(i,e,n,t){if(Ht(i)){const s=Ka(i,e,n,t);return s&&ax(s)&&s.catch(a=>{Tc(a,e,n)}),s}if(St(i)){const s=[];for(let a=0;a<i.length;a++)s.push(as(i[a],e,n,t));return s}}function Tc(i,e,n,t=!0){const s=e?e.vnode:null;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](i,l,c)===!1)return}a=a.parent}const h=e.appContext.config.errorHandler;if(h){cl(),Ka(h,null,10,[i,l,c]),ul();return}}ZG(i,n,s,t)}function ZG(i,e,n,t=!0){console.error(i)}let Vf=!1,Ub=!1;const Zi=[];let aa=0;const Vu=[];let jo=null,Jl=0;const jA=Promise.resolve();let yx=null;function mp(i){const e=yx||jA;return i?e.then(this?i.bind(this):i):e}function QG(i){let e=aa+1,n=Zi.length;for(;e<n;){const t=e+n>>>1,s=Zi[t],a=Ff(s);a<i||a===i&&s.pre?e=t+1:n=t}return e}function Y0(i){(!Zi.length||!Zi.includes(i,Vf&&i.allowRecurse?aa+1:aa))&&(i.id==null?Zi.push(i):Zi.splice(QG(i.id),0,i),KA())}function KA(){!Vf&&!Ub&&(Ub=!0,yx=jA.then(qA))}function eW(i){const e=Zi.indexOf(i);e>aa&&Zi.splice(e,1)}function y0(i){St(i)?Vu.push(...i):(!jo||!jo.includes(i,i.allowRecurse?Jl+1:Jl))&&Vu.push(i),KA()}function hM(i,e,n=Vf?aa+1:0){for(;n<Zi.length;n++){const t=Zi[n];if(t&&t.pre){if(i&&t.id!==i.uid)continue;Zi.splice(n,1),n--,t()}}}function b0(i){if(Vu.length){const e=[...new Set(Vu)].sort((n,t)=>Ff(n)-Ff(t));if(Vu.length=0,jo){jo.push(...e);return}for(jo=e,Jl=0;Jl<jo.length;Jl++)jo[Jl]();jo=null,Jl=0}}const Ff=i=>i.id==null?1/0:i.id,tW=(i,e)=>{const n=Ff(i)-Ff(e);if(n===0){if(i.pre&&!e.pre)return-1;if(e.pre&&!i.pre)return 1}return n};function qA(i){Ub=!1,Vf=!0,Zi.sort(tW);try{for(aa=0;aa<Zi.length;aa++){const e=Zi[aa];e&&e.active!==!1&&Ka(e,null,14)}}finally{aa=0,Zi.length=0,b0(),Vf=!1,yx=null,(Zi.length||Vu.length)&&qA()}}let Mu,zm=[];function XA(i,e){var n,t;Mu=i,Mu?(Mu.enabled=!0,zm.forEach(({event:s,args:a})=>Mu.emit(s,...a)),zm=[]):typeof window<"u"&&window.HTMLElement&&!((t=(n=window.navigator)==null?void 0:n.userAgent)!=null&&t.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(a=>{XA(a,e)}),setTimeout(()=>{Mu||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,zm=[])},3e3)):zm=[]}function nW(i,e,...n){if(i.isUnmounted)return;const t=i.vnode.props||Dn;let s=n;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in t){const p=`${l==="modelValue"?"model":l}Modifiers`,{number:m,trim:v}=t[p]||Dn;v&&(s=n.map(y=>ti(y)?y.trim():y)),m&&(s=n.map(m0))}let c,h=t[c=Cf(e)]||t[c=Cf(gr(e))];!h&&a&&(h=t[c=Cf(is(e))]),h&&as(h,i,6,s);const d=t[c+"Once"];if(d){if(!i.emitted)i.emitted={};else if(i.emitted[c])return;i.emitted[c]=!0,as(d,i,6,s)}}function YA(i,e,n=!1){const t=e.emitsCache,s=t.get(i);if(s!==void 0)return s;const a=i.emits;let l={},c=!1;if(!Ht(i)){const h=d=>{const p=YA(d,e,!0);p&&(c=!0,Jn(l,p))};!n&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}return!a&&!c?(Un(i)&&t.set(i,null),null):(St(a)?a.forEach(h=>l[h]=null):Jn(l,a),Un(i)&&t.set(i,l),l)}function J0(i,e){return!i||!dp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Sn(i,e[0].toLowerCase()+e.slice(1))||Sn(i,is(e))||Sn(i,e))}let xi=null,Z0=null;function Uf(i){const e=xi;return xi=i,Z0=i&&i.type.__scopeId||null,e}function iW(i){Z0=i}function rW(){Z0=null}const sW=i=>pt;function pt(i,e=xi,n){if(!e||i._n)return i;const t=(...s)=>{t._d&&qb(-1);const a=Uf(e);let l;try{l=i(...s)}finally{Uf(a),t._d&&qb(1)}return l};return t._n=!0,t._c=!0,t._d=!0,t}function Qg(i){const{type:e,vnode:n,proxy:t,withProxy:s,propsOptions:[a],slots:l,attrs:c,emit:h,render:d,renderCache:p,props:m,data:v,setupState:y,ctx:b,inheritAttrs:S}=i,C=Uf(i);let E,w;try{if(n.shapeFlag&4){const M=s||t,P=M;E=ns(d.call(P,M,p,m,y,v,b)),w=c}else{const M=e;E=ns(M.length>1?M(m,{attrs:c,slots:l,emit:h}):M(m,null)),w=e.props?c:oW(c)}}catch(M){Mf.length=0,Tc(M,i,1),E=Fe(Hi)}let x=E;if(w&&S!==!1){const M=Object.keys(w),{shapeFlag:P}=x;M.length&&P&7&&(a&&M.some(rx)&&(w=lW(w,a)),x=ua(x,w,!1,!0))}return n.dirs&&(x=ua(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),E=x,Uf(C),E}function aW(i,e=!0){let n;for(let t=0;t<i.length;t++){const s=i[t];if(il(s)){if(s.type!==Hi||s.children==="v-if"){if(n)return;n=s}}else return}return n}const oW=i=>{let e;for(const n in i)(n==="class"||n==="style"||dp(n))&&((e||(e={}))[n]=i[n]);return e},lW=(i,e)=>{const n={};for(const t in i)(!rx(t)||!(t.slice(9)in e))&&(n[t]=i[t]);return n};function cW(i,e,n){const{props:t,children:s,component:a}=i,{props:l,children:c,patchFlag:h}=e,d=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return t?dM(t,l,d):!!l;if(h&8){const p=e.dynamicProps;for(let m=0;m<p.length;m++){const v=p[m];if(l[v]!==t[v]&&!J0(d,v))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:t===l?!1:t?l?dM(t,l,d):!0:!!l;return!1}function dM(i,e,n){const t=Object.keys(e);if(t.length!==Object.keys(i).length)return!0;for(let s=0;s<t.length;s++){const a=t[s];if(e[a]!==i[a]&&!J0(n,a))return!0}return!1}function bx({vnode:i,parent:e},n){for(;e;){const t=e.subTree;if(t.suspense&&t.suspense.activeBranch===i&&(t.el=i.el),t===i)(i=e.vnode).el=n,e=e.parent;else break}}const _x="components",uW="directives";function zt(i,e){return xx(_x,i,!0,e)||i}const JA=Symbol.for("v-ndc");function ZA(i){return ti(i)?xx(_x,i,!1)||i:i||JA}function hW(i){return xx(uW,i)}function xx(i,e,n=!0,t=!1){const s=xi||Ti;if(s){const a=s.type;if(i===_x){const c=Qb(a,!1);if(c&&(c===e||c===gr(e)||c===fp(gr(e))))return a}const l=fM(s[i]||a[i],e)||fM(s.appContext[i],e);return!l&&t?a:l}}function fM(i,e){return i&&(i[e]||i[gr(e)]||i[fp(gr(e))])}const QA=i=>i.__isSuspense;let zb=0;const dW={name:"Suspense",__isSuspense:!0,process(i,e,n,t,s,a,l,c,h,d){if(i==null)fW(e,n,t,s,a,l,c,h,d);else{if(a&&a.deps>0&&!i.suspense.isInFallback){e.suspense=i.suspense,e.suspense.vnode=e,e.el=i.el;return}pW(i,e,n,t,s,l,c,h,d)}},hydrate:mW,create:wx,normalize:gW},e4=dW;function zf(i,e){const n=i.props&&i.props[e];Ht(n)&&n()}function fW(i,e,n,t,s,a,l,c,h){const{p:d,o:{createElement:p}}=h,m=p("div"),v=i.suspense=wx(i,s,t,e,m,n,a,l,c,h);d(null,v.pendingBranch=i.ssContent,m,null,t,v,a,l),v.deps>0?(zf(i,"onPending"),zf(i,"onFallback"),d(null,i.ssFallback,e,n,t,null,a,l),Fu(v,i.ssFallback)):v.resolve(!1,!0)}function pW(i,e,n,t,s,a,l,c,{p:h,um:d,o:{createElement:p}}){const m=e.suspense=i.suspense;m.vnode=e,e.el=i.el;const v=e.ssContent,y=e.ssFallback,{activeBranch:b,pendingBranch:S,isInFallback:C,isHydrating:E}=m;if(S)m.pendingBranch=v,zs(v,S)?(h(S,v,m.hiddenContainer,null,s,m,a,l,c),m.deps<=0?m.resolve():C&&(E||(h(b,y,n,t,s,null,a,l,c),Fu(m,y)))):(m.pendingId=zb++,E?(m.isHydrating=!1,m.activeBranch=S):d(S,s,m),m.deps=0,m.effects.length=0,m.hiddenContainer=p("div"),C?(h(null,v,m.hiddenContainer,null,s,m,a,l,c),m.deps<=0?m.resolve():(h(b,y,n,t,s,null,a,l,c),Fu(m,y))):b&&zs(v,b)?(h(b,v,n,t,s,m,a,l,c),m.resolve(!0)):(h(null,v,m.hiddenContainer,null,s,m,a,l,c),m.deps<=0&&m.resolve()));else if(b&&zs(v,b))h(b,v,n,t,s,m,a,l,c),Fu(m,v);else if(zf(e,"onPending"),m.pendingBranch=v,v.shapeFlag&512?m.pendingId=v.component.suspenseId:m.pendingId=zb++,h(null,v,m.hiddenContainer,null,s,m,a,l,c),m.deps<=0)m.resolve();else{const{timeout:w,pendingId:x}=m;w>0?setTimeout(()=>{m.pendingId===x&&m.fallback(y)},w):w===0&&m.fallback(y)}}function wx(i,e,n,t,s,a,l,c,h,d,p=!1){const{p:m,m:v,um:y,n:b,o:{parentNode:S,remove:C}}=d;let E;const w=vW(i);w&&e&&e.pendingBranch&&(E=e.pendingId,e.deps++);const x=i.props?g0(i.props.timeout):void 0,M=a,P={vnode:i,parent:e,parentComponent:n,namespace:l,container:t,hiddenContainer:s,deps:0,pendingId:zb++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!p,isHydrating:p,isUnmounted:!1,effects:[],resolve(I=!1,D=!1){const{vnode:A,activeBranch:N,pendingBranch:T,pendingId:L,effects:V,parentComponent:R,container:B}=P;let F=!1;P.isHydrating?P.isHydrating=!1:I||(F=N&&T.transition&&T.transition.mode==="out-in",F&&(N.transition.afterLeave=()=>{L===P.pendingId&&(v(T,B,a===M?b(N):a,0),y0(V))}),N&&(S(N.el)!==P.hiddenContainer&&(a=b(N)),y(N,R,P,!0)),F||v(T,B,a,0)),Fu(P,T),P.pendingBranch=null,P.isInFallback=!1;let U=P.parent,q=!1;for(;U;){if(U.pendingBranch){U.effects.push(...V),q=!0;break}U=U.parent}!q&&!F&&y0(V),P.effects=[],w&&e&&e.pendingBranch&&E===e.pendingId&&(e.deps--,e.deps===0&&!D&&e.resolve()),zf(A,"onResolve")},fallback(I){if(!P.pendingBranch)return;const{vnode:D,activeBranch:A,parentComponent:N,container:T,namespace:L}=P;zf(D,"onFallback");const V=b(A),R=()=>{P.isInFallback&&(m(null,I,T,V,N,null,L,c,h),Fu(P,I))},B=I.transition&&I.transition.mode==="out-in";B&&(A.transition.afterLeave=R),P.isInFallback=!0,y(A,N,null,!0),B||R()},move(I,D,A){P.activeBranch&&v(P.activeBranch,I,D,A),P.container=I},next(){return P.activeBranch&&b(P.activeBranch)},registerDep(I,D){const A=!!P.pendingBranch;A&&P.deps++;const N=I.vnode.el;I.asyncDep.catch(T=>{Tc(T,I,0)}).then(T=>{if(I.isUnmounted||P.isUnmounted||P.pendingId!==I.suspenseId)return;I.asyncResolved=!0;const{vnode:L}=I;Jb(I,T,!1),N&&(L.el=N);const V=!N&&I.subTree.el;D(I,L,S(N||I.subTree.el),N?null:b(I.subTree),P,l,h),V&&C(V),bx(I,L.el),A&&--P.deps===0&&P.resolve()})},unmount(I,D){P.isUnmounted=!0,P.activeBranch&&y(P.activeBranch,n,I,D),P.pendingBranch&&y(P.pendingBranch,n,I,D)}};return P}function mW(i,e,n,t,s,a,l,c,h){const d=e.suspense=wx(e,t,n,i.parentNode,document.createElement("div"),null,s,a,l,c,!0),p=h(i,d.pendingBranch=e.ssContent,n,d,a,l);return d.deps===0&&d.resolve(!1,!0),p}function gW(i){const{shapeFlag:e,children:n}=i,t=e&32;i.ssContent=pM(t?n.default:n),i.ssFallback=t?pM(n.fallback):Fe(Hi)}function pM(i){let e;if(Ht(i)){const n=bc&&i._c;n&&(i._d=!1,Bn()),i=i(),n&&(i._d=!0,e=Vr,O4())}return St(i)&&(i=aW(i)),i=ns(i),e&&!i.dynamicChildren&&(i.dynamicChildren=e.filter(n=>n!==i)),i}function t4(i,e){e&&e.pendingBranch?St(i)?e.effects.push(...i):e.effects.push(i):y0(i)}function Fu(i,e){i.activeBranch=e;const{vnode:n,parentComponent:t}=i;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,t&&t.subTree===n&&(t.vnode.el=s,bx(t,s))}function vW(i){const e=i.props&&i.props.suspensible;return e!=null&&e!==!1}const n4=Symbol.for("v-scx"),i4=()=>zu(n4);function qa(i,e){return gp(i,null,e)}function r4(i,e){return gp(i,null,{flush:"post"})}function s4(i,e){return gp(i,null,{flush:"sync"})}const $m={};function hi(i,e,n){return gp(i,e,n)}function gp(i,e,{immediate:n,deep:t,flush:s,once:a,onTrack:l,onTrigger:c}=Dn){if(e&&a){const I=e;e=(...D)=>{I(...D),P()}}const h=Ti,d=I=>t===!0?I:Ql(I,t===!1?1:void 0);let p,m=!1,v=!1;if(Ci(i)?(p=()=>i.value,m=Bf(i)):Bu(i)?(p=()=>d(i),m=!0):St(i)?(v=!0,m=i.some(I=>Bu(I)||Bf(I)),p=()=>i.map(I=>{if(Ci(I))return I.value;if(Bu(I))return d(I);if(Ht(I))return Ka(I,h,2)})):Ht(i)?e?p=()=>Ka(i,h,2):p=()=>(y&&y(),as(i,h,3,[b])):p=Or,e&&t){const I=p;p=()=>Ql(I())}let y,b=I=>{y=x.onStop=()=>{Ka(I,h,4),y=x.onStop=void 0}},S;if(yp)if(b=Or,e?n&&as(e,h,3,[p(),v?[]:void 0,b]):p(),s==="sync"){const I=i4();S=I.__watcherHandles||(I.__watcherHandles=[])}else return Or;let C=v?new Array(i.length).fill($m):$m;const E=()=>{if(!(!x.active||!x.dirty))if(e){const I=x.run();(t||m||(v?I.some((D,A)=>Gs(D,C[A])):Gs(I,C)))&&(y&&y(),as(e,h,3,[I,C===$m?void 0:v&&C[0]===$m?[]:C,b]),C=I)}else x.run()};E.allowRecurse=!!e;let w;s==="sync"?w=E:s==="post"?w=()=>$i(E,h&&h.suspense):(E.pre=!0,h&&(E.id=h.uid),w=()=>Y0(E));const x=new Ku(p,Or,w),M=j0(),P=()=>{x.stop(),M&&sx(M.effects,x)};return e?n?E():C=x.run():s==="post"?$i(x.run.bind(x),h&&h.suspense):x.run(),S&&S.push(P),P}function yW(i,e,n){const t=this.proxy,s=ti(i)?i.includes(".")?a4(t,i):()=>t[i]:i.bind(t,t);let a;Ht(e)?a=e:(a=e.handler,n=e);const l=_c(this),c=gp(s,a.bind(t),n);return l(),c}function a4(i,e){const n=e.split(".");return()=>{let t=i;for(let s=0;s<n.length&&t;s++)t=t[n[s]];return t}}function Ql(i,e=1/0,n){if(e<=0||!Un(i)||i.__v_skip||(n=n||new Set,n.has(i)))return i;if(n.add(i),e--,Ci(i))Ql(i.value,e,n);else if(St(i))for(let t=0;t<i.length;t++)Ql(i[t],e,n);else if(Ec(i)||Ru(i))i.forEach(t=>{Ql(t,e,n)});else if(xA(i))for(const t in i)Ql(i[t],e,n);return i}function bW(i,e){if(xi===null)return i;const n=iv(xi)||xi.proxy,t=i.dirs||(i.dirs=[]);for(let s=0;s<e.length;s++){let[a,l,c,h=Dn]=e[s];a&&(Ht(a)&&(a={mounted:a,updated:a}),a.deep&&Ql(l),t.push({dir:a,instance:n,value:l,oldValue:void 0,arg:c,modifiers:h}))}return i}function ra(i,e,n,t){const s=i.dirs,a=e&&e.dirs;for(let l=0;l<s.length;l++){const c=s[l];a&&(c.oldValue=a[l].value);let h=c.dir[t];h&&(cl(),as(h,n,8,[i.el,c,i,e]),ul())}}const Ko=Symbol("_leaveCb"),Hm=Symbol("_enterCb");function Cx(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return br(()=>{i.isMounted=!0}),nv(()=>{i.isUnmounting=!0}),i}const ms=[Function,Array],Sx={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ms,onEnter:ms,onAfterEnter:ms,onEnterCancelled:ms,onBeforeLeave:ms,onLeave:ms,onAfterLeave:ms,onLeaveCancelled:ms,onBeforeAppear:ms,onAppear:ms,onAfterAppear:ms,onAppearCancelled:ms},_W={name:"BaseTransition",props:Sx,setup(i,{slots:e}){const n=ls(),t=Cx();return()=>{const s=e.default&&Q0(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const v of s)if(v.type!==Hi){a=v;break}}const l=Cn(i),{mode:c}=l;if(t.isLeaving)return u1(a);const h=mM(a);if(!h)return u1(a);const d=Xu(h,l,t,n);vc(h,d);const p=n.subTree,m=p&&mM(p);if(m&&m.type!==Hi&&!zs(h,m)){const v=Xu(m,l,t,n);if(vc(m,v),c==="out-in"&&h.type!==Hi)return t.isLeaving=!0,v.afterLeave=()=>{t.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},u1(a);c==="in-out"&&h.type!==Hi&&(v.delayLeave=(y,b,S)=>{const C=l4(t,m);C[String(m.key)]=m,y[Ko]=()=>{b(),y[Ko]=void 0,delete d.delayedLeave},d.delayedLeave=S})}return a}}},o4=_W;function l4(i,e){const{leavingVNodes:n}=i;let t=n.get(e.type);return t||(t=Object.create(null),n.set(e.type,t)),t}function Xu(i,e,n,t){const{appear:s,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:m,onLeave:v,onAfterLeave:y,onLeaveCancelled:b,onBeforeAppear:S,onAppear:C,onAfterAppear:E,onAppearCancelled:w}=e,x=String(i.key),M=l4(n,i),P=(A,N)=>{A&&as(A,t,9,N)},I=(A,N)=>{const T=N[1];P(A,N),St(A)?A.every(L=>L.length<=1)&&T():A.length<=1&&T()},D={mode:a,persisted:l,beforeEnter(A){let N=c;if(!n.isMounted)if(s)N=S||c;else return;A[Ko]&&A[Ko](!0);const T=M[x];T&&zs(i,T)&&T.el[Ko]&&T.el[Ko](),P(N,[A])},enter(A){let N=h,T=d,L=p;if(!n.isMounted)if(s)N=C||h,T=E||d,L=w||p;else return;let V=!1;const R=A[Hm]=B=>{V||(V=!0,B?P(L,[A]):P(T,[A]),D.delayedLeave&&D.delayedLeave(),A[Hm]=void 0)};N?I(N,[A,R]):R()},leave(A,N){const T=String(i.key);if(A[Hm]&&A[Hm](!0),n.isUnmounting)return N();P(m,[A]);let L=!1;const V=A[Ko]=R=>{L||(L=!0,N(),R?P(b,[A]):P(y,[A]),A[Ko]=void 0,M[T]===i&&delete M[T])};M[T]=i,v?I(v,[A,V]):V()},clone(A){return Xu(A,e,n,t)}};return D}function u1(i){if(vp(i))return i=ua(i),i.children=null,i}function mM(i){if(!vp(i))return i;const{shapeFlag:e,children:n}=i;if(n){if(e&16)return n[0];if(e&32&&Ht(n.default))return n.default()}}function vc(i,e){i.shapeFlag&6&&i.component?vc(i.component.subTree,e):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function Q0(i,e=!1,n){let t=[],s=0;for(let a=0;a<i.length;a++){let l=i[a];const c=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===mi?(l.patchFlag&128&&s++,t=t.concat(Q0(l.children,e,c))):(e||l.type!==Hi)&&t.push(c!=null?ua(l,{key:c}):l)}if(s>1)for(let a=0;a<t.length;a++)t[a].patchFlag=-2;return t}/*! #__NO_SIDE_EFFECTS__ */function Qa(i,e){return Ht(i)?Jn({name:i.name},e,{setup:i}):i}const oc=i=>!!i.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function xW(i){Ht(i)&&(i={loader:i});const{loader:e,loadingComponent:n,errorComponent:t,delay:s=200,timeout:a,suspensible:l=!0,onError:c}=i;let h=null,d,p=0;const m=()=>(p++,h=null,v()),v=()=>{let y;return h||(y=h=e().catch(b=>{if(b=b instanceof Error?b:new Error(String(b)),c)return new Promise((S,C)=>{c(b,()=>S(m()),()=>C(b),p+1)});throw b}).then(b=>y!==h&&h?h:(b&&(b.__esModule||b[Symbol.toStringTag]==="Module")&&(b=b.default),d=b,b)))};return Qa({name:"AsyncComponentWrapper",__asyncLoader:v,get __asyncResolved(){return d},setup(){const y=Ti;if(d)return()=>h1(d,y);const b=w=>{h=null,Tc(w,y,13,!t)};if(l&&y.suspense||yp)return v().then(w=>()=>h1(w,y)).catch(w=>(b(w),()=>t?Fe(t,{error:w}):null));const S=Ct(!1),C=Ct(),E=Ct(!!s);return s&&setTimeout(()=>{E.value=!1},s),a!=null&&setTimeout(()=>{if(!S.value&&!C.value){const w=new Error(`Async component timed out after ${a}ms.`);b(w),C.value=w}},a),v().then(()=>{S.value=!0,y.parent&&vp(y.parent.vnode)&&(y.parent.effect.dirty=!0,Y0(y.parent.update))}).catch(w=>{b(w),C.value=w}),()=>{if(S.value&&d)return h1(d,y);if(C.value&&t)return Fe(t,{error:C.value});if(n&&!E.value)return Fe(n)}}})}function h1(i,e){const{ref:n,props:t,children:s,ce:a}=e.vnode,l=Fe(i,t,s);return l.ref=n,l.ce=a,delete e.vnode.ce,l}const vp=i=>i.type.__isKeepAlive,wW={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(i,{slots:e}){const n=ls(),t=n.ctx;if(!t.renderer)return()=>{const w=e.default&&e.default();return w&&w.length===1?w[0]:w};const s=new Map,a=new Set;let l=null;const c=n.suspense,{renderer:{p:h,m:d,um:p,o:{createElement:m}}}=t,v=m("div");t.activate=(w,x,M,P,I)=>{const D=w.component;d(w,x,M,0,c),h(D.vnode,w,x,M,D,c,P,w.slotScopeIds,I),$i(()=>{D.isDeactivated=!1,D.a&&Lu(D.a);const A=w.props&&w.props.onVnodeMounted;A&&Nr(A,D.parent,w)},c)},t.deactivate=w=>{const x=w.component;d(w,v,null,1,c),$i(()=>{x.da&&Lu(x.da);const M=w.props&&w.props.onVnodeUnmounted;M&&Nr(M,x.parent,w),x.isDeactivated=!0},c)};function y(w){d1(w),p(w,n,c,!0)}function b(w){s.forEach((x,M)=>{const P=Qb(x.type);P&&(!w||!w(P))&&S(M)})}function S(w){const x=s.get(w);!l||!zs(x,l)?y(x):l&&d1(l),s.delete(w),a.delete(w)}hi(()=>[i.include,i.exclude],([w,x])=>{w&&b(M=>vf(w,M)),x&&b(M=>!vf(x,M))},{flush:"post",deep:!0});let C=null;const E=()=>{C!=null&&s.set(C,f1(n.subTree))};return br(E),tv(E),nv(()=>{s.forEach(w=>{const{subTree:x,suspense:M}=n,P=f1(x);if(w.type===P.type&&w.key===P.key){d1(P);const I=P.component.da;I&&$i(I,M);return}y(w)})}),()=>{if(C=null,!e.default)return null;const w=e.default(),x=w[0];if(w.length>1)return l=null,w;if(!il(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return l=null,x;let M=f1(x);const P=M.type,I=Qb(oc(M)?M.type.__asyncResolved||{}:P),{include:D,exclude:A,max:N}=i;if(D&&(!I||!vf(D,I))||A&&I&&vf(A,I))return l=M,x;const T=M.key==null?P:M.key,L=s.get(T);return M.el&&(M=ua(M),x.shapeFlag&128&&(x.ssContent=M)),C=T,L?(M.el=L.el,M.component=L.component,M.transition&&vc(M,M.transition),M.shapeFlag|=512,a.delete(T),a.add(T)):(a.add(T),N&&a.size>parseInt(N,10)&&S(a.values().next().value)),M.shapeFlag|=256,l=M,QA(x.type)?x:M}}},CW=wW;function vf(i,e){return St(i)?i.some(n=>vf(n,e)):ti(i)?i.split(",").includes(e):eG(i)?i.test(e):!1}function c4(i,e){h4(i,"a",e)}function u4(i,e){h4(i,"da",e)}function h4(i,e,n=Ti){const t=i.__wdc||(i.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return i()});if(ev(e,t,n),n){let s=n.parent;for(;s&&s.parent;)vp(s.parent.vnode)&&SW(t,e,n,s),s=s.parent}}function SW(i,e,n,t){const s=ev(e,i,t,!0);Ks(()=>{sx(t[e],s)},n)}function d1(i){i.shapeFlag&=-257,i.shapeFlag&=-513}function f1(i){return i.shapeFlag&128?i.ssContent:i}function ev(i,e,n=Ti,t=!1){if(n){const s=n[i]||(n[i]=[]),a=e.__weh||(e.__weh=(...l)=>{if(n.isUnmounted)return;cl();const c=_c(n),h=as(e,n,i,l);return c(),ul(),h});return t?s.unshift(a):s.push(a),a}}const ao=i=>(e,n=Ti)=>(!yp||i==="sp")&&ev(i,(...t)=>e(...t),n),d4=ao("bm"),br=ao("m"),f4=ao("bu"),tv=ao("u"),nv=ao("bum"),Ks=ao("um"),p4=ao("sp"),m4=ao("rtg"),g4=ao("rtc");function v4(i,e=Ti){ev("ec",i,e)}function Ex(i,e,n,t){let s;const a=n&&n[t];if(St(i)||ti(i)){s=new Array(i.length);for(let l=0,c=i.length;l<c;l++)s[l]=e(i[l],l,void 0,a&&a[l])}else if(typeof i=="number"){s=new Array(i);for(let l=0;l<i;l++)s[l]=e(l+1,l,void 0,a&&a[l])}else if(Un(i))if(i[Symbol.iterator])s=Array.from(i,(l,c)=>e(l,c,void 0,a&&a[c]));else{const l=Object.keys(i);s=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];s[c]=e(i[d],d,c,a&&a[c])}}else s=[];return n&&(n[t]=s),s}function EW(i,e){for(let n=0;n<e.length;n++){const t=e[n];if(St(t))for(let s=0;s<t.length;s++)i[t[s].name]=t[s].fn;else t&&(i[t.name]=t.key?(...s)=>{const a=t.fn(...s);return a&&(a.key=t.key),a}:t.fn)}return i}function y4(i,e,n={},t,s){if(xi.isCE||xi.parent&&oc(xi.parent)&&xi.parent.isCE)return e!=="default"&&(n.name=e),Fe("slot",n,t&&t());let a=i[e];a&&a._c&&(a._d=!1),Bn();const l=a&&b4(a(n)),c=Ws(mi,{key:n.key||l&&l.key||`_${e}`},l||(t?t():[]),l&&i._===1?64:-2);return!s&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),a&&a._c&&(a._d=!0),c}function b4(i){return i.some(e=>il(e)?!(e.type===Hi||e.type===mi&&!b4(e.children)):!0)?i:null}function MW(i,e){const n={};for(const t in i)n[e&&/[A-Z]/.test(t)?`on:${t}`:Cf(t)]=i[t];return n}const $b=i=>i?H4(i)?iv(i)||i.proxy:$b(i.parent):null,Sf=Jn(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>$b(i.parent),$root:i=>$b(i.root),$emit:i=>i.emit,$options:i=>Tx(i),$forceUpdate:i=>i.f||(i.f=()=>{i.effect.dirty=!0,Y0(i.update)}),$nextTick:i=>i.n||(i.n=mp.bind(i.proxy)),$watch:i=>yW.bind(i)}),p1=(i,e)=>i!==Dn&&!i.__isScriptSetup&&Sn(i,e),Hb={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:t,data:s,props:a,accessCache:l,type:c,appContext:h}=i;let d;if(e[0]!=="$"){const y=l[e];if(y!==void 0)switch(y){case 1:return t[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(p1(t,e))return l[e]=1,t[e];if(s!==Dn&&Sn(s,e))return l[e]=2,s[e];if((d=i.propsOptions[0])&&Sn(d,e))return l[e]=3,a[e];if(n!==Dn&&Sn(n,e))return l[e]=4,n[e];Gb&&(l[e]=0)}}const p=Sf[e];let m,v;if(p)return e==="$attrs"&&zr(i.attrs,"get",""),p(i);if((m=c.__cssModules)&&(m=m[e]))return m;if(n!==Dn&&Sn(n,e))return l[e]=4,n[e];if(v=h.config.globalProperties,Sn(v,e))return v[e]},set({_:i},e,n){const{data:t,setupState:s,ctx:a}=i;return p1(s,e)?(s[e]=n,!0):t!==Dn&&Sn(t,e)?(t[e]=n,!0):Sn(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(a[e]=n,!0)},has({_:{data:i,setupState:e,accessCache:n,ctx:t,appContext:s,propsOptions:a}},l){let c;return!!n[l]||i!==Dn&&Sn(i,l)||p1(e,l)||(c=a[0])&&Sn(c,l)||Sn(t,l)||Sn(Sf,l)||Sn(s.config.globalProperties,l)},defineProperty(i,e,n){return n.get!=null?i._.accessCache[e]=0:Sn(n,"value")&&this.set(i,e,n.value,null),Reflect.defineProperty(i,e,n)}},TW=Jn({},Hb,{get(i,e){if(e!==Symbol.unscopables)return Hb.get(i,e,i)},has(i,e){return e[0]!=="_"&&!sG(e)}});function kW(){return null}function AW(){return null}function PW(i){}function IW(i){}function NW(){return null}function RW(){}function DW(i,e){return null}function Mx(){return x4().slots}function _4(){return x4().attrs}function x4(){const i=ls();return i.setupContext||(i.setupContext=j4(i))}function $f(i){return St(i)?i.reduce((e,n)=>(e[n]=null,e),{}):i}function LW(i,e){const n=$f(i);for(const t in e){if(t.startsWith("__skip"))continue;let s=n[t];s?St(s)||Ht(s)?s=n[t]={type:s,default:e[t]}:s.default=e[t]:s===null&&(s=n[t]={default:e[t]}),s&&e[`__skip_${t}`]&&(s.skipFactory=!0)}return n}function BW(i,e){return!i||!e?i||e:St(i)&&St(e)?i.concat(e):Jn({},$f(i),$f(e))}function OW(i,e){const n={};for(const t in i)e.includes(t)||Object.defineProperty(n,t,{enumerable:!0,get:()=>i[t]});return n}function VW(i){const e=ls();let n=i();return Yb(),ax(n)&&(n=n.catch(t=>{throw _c(e),t})),[n,()=>_c(e)]}let Gb=!0;function FW(i){const e=Tx(i),n=i.proxy,t=i.ctx;Gb=!1,e.beforeCreate&&gM(e.beforeCreate,i,"bc");const{data:s,computed:a,methods:l,watch:c,provide:h,inject:d,created:p,beforeMount:m,mounted:v,beforeUpdate:y,updated:b,activated:S,deactivated:C,beforeDestroy:E,beforeUnmount:w,destroyed:x,unmounted:M,render:P,renderTracked:I,renderTriggered:D,errorCaptured:A,serverPrefetch:N,expose:T,inheritAttrs:L,components:V,directives:R,filters:B}=e;if(d&&UW(d,t,null),l)for(const q in l){const Y=l[q];Ht(Y)&&(t[q]=Y.bind(n))}if(s){const q=s.call(n,n);Un(q)&&(i.data=mh(q))}if(Gb=!0,a)for(const q in a){const Y=a[q],ne=Ht(Y)?Y.bind(n,n):Ht(Y.get)?Y.get.bind(n,n):Or,de=!Ht(Y)&&Ht(Y.set)?Y.set.bind(n):Or,ve=Gn({get:ne,set:de});Object.defineProperty(t,q,{enumerable:!0,configurable:!0,get:()=>ve.value,set:Re=>ve.value=Re})}if(c)for(const q in c)w4(c[q],t,n,q);if(h){const q=Ht(h)?h.call(n):h;Reflect.ownKeys(q).forEach(Y=>{Hf(Y,q[Y])})}p&&gM(p,i,"c");function U(q,Y){St(Y)?Y.forEach(ne=>q(ne.bind(n))):Y&&q(Y.bind(n))}if(U(d4,m),U(br,v),U(f4,y),U(tv,b),U(c4,S),U(u4,C),U(v4,A),U(g4,I),U(m4,D),U(nv,w),U(Ks,M),U(p4,N),St(T))if(T.length){const q=i.exposed||(i.exposed={});T.forEach(Y=>{Object.defineProperty(q,Y,{get:()=>n[Y],set:ne=>n[Y]=ne})})}else i.exposed||(i.exposed={});P&&i.render===Or&&(i.render=P),L!=null&&(i.inheritAttrs=L),V&&(i.components=V),R&&(i.directives=R)}function UW(i,e,n=Or){St(i)&&(i=Wb(i));for(const t in i){const s=i[t];let a;Un(s)?"default"in s?a=zu(s.from||t,s.default,!0):a=zu(s.from||t):a=zu(s),Ci(a)?Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[t]=a}}function gM(i,e,n){as(St(i)?i.map(t=>t.bind(e.proxy)):i.bind(e.proxy),e,n)}function w4(i,e,n,t){const s=t.includes(".")?a4(n,t):()=>n[t];if(ti(i)){const a=e[i];Ht(a)&&hi(s,a)}else if(Ht(i))hi(s,i.bind(n));else if(Un(i))if(St(i))i.forEach(a=>w4(a,e,n,t));else{const a=Ht(i.handler)?i.handler.bind(n):e[i.handler];Ht(a)&&hi(s,a,i)}}function Tx(i){const e=i.type,{mixins:n,extends:t}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:l}}=i.appContext,c=a.get(e);let h;return c?h=c:!s.length&&!n&&!t?h=e:(h={},s.length&&s.forEach(d=>_0(h,d,l,!0)),_0(h,e,l)),Un(e)&&a.set(e,h),h}function _0(i,e,n,t=!1){const{mixins:s,extends:a}=e;a&&_0(i,a,n,!0),s&&s.forEach(l=>_0(i,l,n,!0));for(const l in e)if(!(t&&l==="expose")){const c=zW[l]||n&&n[l];i[l]=c?c(i[l],e[l]):e[l]}return i}const zW={data:vM,props:yM,emits:yM,methods:yf,computed:yf,beforeCreate:dr,created:dr,beforeMount:dr,mounted:dr,beforeUpdate:dr,updated:dr,beforeDestroy:dr,beforeUnmount:dr,destroyed:dr,unmounted:dr,activated:dr,deactivated:dr,errorCaptured:dr,serverPrefetch:dr,components:yf,directives:yf,watch:HW,provide:vM,inject:$W};function vM(i,e){return e?i?function(){return Jn(Ht(i)?i.call(this,this):i,Ht(e)?e.call(this,this):e)}:e:i}function $W(i,e){return yf(Wb(i),Wb(e))}function Wb(i){if(St(i)){const e={};for(let n=0;n<i.length;n++)e[i[n]]=i[n];return e}return i}function dr(i,e){return i?[...new Set([].concat(i,e))]:e}function yf(i,e){return i?Jn(Object.create(null),i,e):e}function yM(i,e){return i?St(i)&&St(e)?[...new Set([...i,...e])]:Jn(Object.create(null),$f(i),$f(e??{})):e}function HW(i,e){if(!i)return e;if(!e)return i;const n=Jn(Object.create(null),i);for(const t in e)n[t]=dr(i[t],e[t]);return n}function C4(){return{app:null,config:{isNativeTag:ZH,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GW=0;function WW(i,e){return function(t,s=null){Ht(t)||(t=Jn({},t)),s!=null&&!Un(s)&&(s=null);const a=C4(),l=new WeakSet;let c=!1;const h=a.app={_uid:GW++,_component:t,_props:s,_container:null,_context:a,_instance:null,version:X4,get config(){return a.config},set config(d){},use(d,...p){return l.has(d)||(d&&Ht(d.install)?(l.add(d),d.install(h,...p)):Ht(d)&&(l.add(d),d(h,...p))),h},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),h},component(d,p){return p?(a.components[d]=p,h):a.components[d]},directive(d,p){return p?(a.directives[d]=p,h):a.directives[d]},mount(d,p,m){if(!c){const v=Fe(t,s);return v.appContext=a,m===!0?m="svg":m===!1&&(m=void 0),p&&e?e(v,d):i(v,d,m),c=!0,h._container=d,d.__vue_app__=h,iv(v.component)||v.component.proxy}},unmount(){c&&(i(null,h._container),delete h._container.__vue_app__)},provide(d,p){return a.provides[d]=p,h},runWithContext(d){const p=Uu;Uu=h;try{return d()}finally{Uu=p}}};return h}}let Uu=null;function Hf(i,e){if(Ti){let n=Ti.provides;const t=Ti.parent&&Ti.parent.provides;t===n&&(n=Ti.provides=Object.create(t)),n[i]=e}}function zu(i,e,n=!1){const t=Ti||xi;if(t||Uu){const s=t?t.parent==null?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides:Uu._context.provides;if(s&&i in s)return s[i];if(arguments.length>1)return n&&Ht(e)?e.call(t&&t.proxy):e}}function jW(){return!!(Ti||xi||Uu)}const S4={},E4=()=>Object.create(S4),M4=i=>Object.getPrototypeOf(i)===S4;function KW(i,e,n,t=!1){const s={},a=E4();i.propsDefaults=Object.create(null),T4(i,e,s,a);for(const l in i.propsOptions[0])l in s||(s[l]=void 0);n?i.props=t?s:zA(s):i.type.props?i.props=s:i.props=a,i.attrs=a}function qW(i,e,n,t){const{props:s,attrs:a,vnode:{patchFlag:l}}=i,c=Cn(s),[h]=i.propsOptions;let d=!1;if((t||l>0)&&!(l&16)){if(l&8){const p=i.vnode.dynamicProps;for(let m=0;m<p.length;m++){let v=p[m];if(J0(i.emitsOptions,v))continue;const y=e[v];if(h)if(Sn(a,v))y!==a[v]&&(a[v]=y,d=!0);else{const b=gr(v);s[b]=jb(h,c,b,y,i,!1)}else y!==a[v]&&(a[v]=y,d=!0)}}}else{T4(i,e,s,a)&&(d=!0);let p;for(const m in c)(!e||!Sn(e,m)&&((p=is(m))===m||!Sn(e,p)))&&(h?n&&(n[m]!==void 0||n[p]!==void 0)&&(s[m]=jb(h,c,m,void 0,i,!0)):delete s[m]);if(a!==c)for(const m in a)(!e||!Sn(e,m))&&(delete a[m],d=!0)}d&&ja(i.attrs,"set","")}function T4(i,e,n,t){const[s,a]=i.propsOptions;let l=!1,c;if(e)for(let h in e){if(Du(h))continue;const d=e[h];let p;s&&Sn(s,p=gr(h))?!a||!a.includes(p)?n[p]=d:(c||(c={}))[p]=d:J0(i.emitsOptions,h)||(!(h in t)||d!==t[h])&&(t[h]=d,l=!0)}if(a){const h=Cn(n),d=c||Dn;for(let p=0;p<a.length;p++){const m=a[p];n[m]=jb(s,h,m,d[m],i,!Sn(d,m))}}return l}function jb(i,e,n,t,s,a){const l=i[n];if(l!=null){const c=Sn(l,"default");if(c&&t===void 0){const h=l.default;if(l.type!==Function&&!l.skipFactory&&Ht(h)){const{propsDefaults:d}=s;if(n in d)t=d[n];else{const p=_c(s);t=d[n]=h.call(null,e),p()}}else t=h}l[0]&&(a&&!c?t=!1:l[1]&&(t===""||t===is(n))&&(t=!0))}return t}function k4(i,e,n=!1){const t=e.propsCache,s=t.get(i);if(s)return s;const a=i.props,l={},c=[];let h=!1;if(!Ht(i)){const p=m=>{h=!0;const[v,y]=k4(m,e,!0);Jn(l,v),y&&c.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(p),i.extends&&p(i.extends),i.mixins&&i.mixins.forEach(p)}if(!a&&!h)return Un(i)&&t.set(i,Nu),Nu;if(St(a))for(let p=0;p<a.length;p++){const m=gr(a[p]);bM(m)&&(l[m]=Dn)}else if(a)for(const p in a){const m=gr(p);if(bM(m)){const v=a[p],y=l[m]=St(v)||Ht(v)?{type:v}:Jn({},v);if(y){const b=wM(Boolean,y.type),S=wM(String,y.type);y[0]=b>-1,y[1]=S<0||b<S,(b>-1||Sn(y,"default"))&&c.push(m)}}}const d=[l,c];return Un(i)&&t.set(i,d),d}function bM(i){return i[0]!=="$"&&!Du(i)}function _M(i){return i===null?"null":typeof i=="function"?i.name||"":typeof i=="object"&&i.constructor&&i.constructor.name||""}function xM(i,e){return _M(i)===_M(e)}function wM(i,e){return St(e)?e.findIndex(n=>xM(n,i)):Ht(e)&&xM(e,i)?0:-1}const A4=i=>i[0]==="_"||i==="$stable",kx=i=>St(i)?i.map(ns):[ns(i)],XW=(i,e,n)=>{if(e._n)return e;const t=pt((...s)=>kx(e(...s)),n);return t._c=!1,t},P4=(i,e,n)=>{const t=i._ctx;for(const s in i){if(A4(s))continue;const a=i[s];if(Ht(a))e[s]=XW(s,a,t);else if(a!=null){const l=kx(a);e[s]=()=>l}}},I4=(i,e)=>{const n=kx(e);i.slots.default=()=>n},YW=(i,e)=>{const n=i.slots=E4();if(i.vnode.shapeFlag&32){const t=e._;t?(Jn(n,e),wA(n,"_",t,!0)):P4(e,n)}else e&&I4(i,e)},JW=(i,e,n)=>{const{vnode:t,slots:s}=i;let a=!0,l=Dn;if(t.shapeFlag&32){const c=e._;c?n&&c===1?a=!1:(Jn(s,e),!n&&c===1&&delete s._):(a=!e.$stable,P4(e,s)),l=e}else e&&(I4(i,e),l={default:1});if(a)for(const c in s)!A4(c)&&l[c]==null&&delete s[c]};function x0(i,e,n,t,s=!1){if(St(i)){i.forEach((v,y)=>x0(v,e&&(St(e)?e[y]:e),n,t,s));return}if(oc(t)&&!s)return;const a=t.shapeFlag&4?iv(t.component)||t.component.proxy:t.el,l=s?null:a,{i:c,r:h}=i,d=e&&e.r,p=c.refs===Dn?c.refs={}:c.refs,m=c.setupState;if(d!=null&&d!==h&&(ti(d)?(p[d]=null,Sn(m,d)&&(m[d]=null)):Ci(d)&&(d.value=null)),Ht(h))Ka(h,c,12,[l,p]);else{const v=ti(h),y=Ci(h);if(v||y){const b=()=>{if(i.f){const S=v?Sn(m,h)?m[h]:p[h]:h.value;s?St(S)&&sx(S,a):St(S)?S.includes(a)||S.push(a):v?(p[h]=[a],Sn(m,h)&&(m[h]=p[h])):(h.value=[a],i.k&&(p[i.k]=h.value))}else v?(p[h]=l,Sn(m,h)&&(m[h]=l)):y&&(h.value=l,i.k&&(p[i.k]=l))};l?(b.id=-1,$i(b,n)):b()}}}let Po=!1;const ZW=i=>i.namespaceURI.includes("svg")&&i.tagName!=="foreignObject",QW=i=>i.namespaceURI.includes("MathML"),Gm=i=>{if(ZW(i))return"svg";if(QW(i))return"mathml"},Wm=i=>i.nodeType===8;function ej(i){const{mt:e,p:n,o:{patchProp:t,createText:s,nextSibling:a,parentNode:l,remove:c,insert:h,createComment:d}}=i,p=(x,M)=>{if(!M.hasChildNodes()){n(null,x,M),b0(),M._vnode=x;return}Po=!1,m(M.firstChild,x,null,null,null),b0(),M._vnode=x,Po&&console.error("Hydration completed but contains mismatches.")},m=(x,M,P,I,D,A=!1)=>{A=A||!!M.dynamicChildren;const N=Wm(x)&&x.data==="[",T=()=>S(x,M,P,I,D,N),{type:L,ref:V,shapeFlag:R,patchFlag:B}=M;let F=x.nodeType;M.el=x,B===-2&&(A=!1,M.dynamicChildren=null);let U=null;switch(L){case yc:F!==3?M.children===""?(h(M.el=s(""),l(x),x),U=x):U=T():(x.data!==M.children&&(Po=!0,x.data=M.children),U=a(x));break;case Hi:w(x)?(U=a(x),E(M.el=x.content.firstChild,x,P)):F!==8||N?U=T():U=a(x);break;case lc:if(N&&(x=a(x),F=x.nodeType),F===1||F===3){U=x;const q=!M.children.length;for(let Y=0;Y<M.staticCount;Y++)q&&(M.children+=U.nodeType===1?U.outerHTML:U.data),Y===M.staticCount-1&&(M.anchor=U),U=a(U);return N?a(U):U}else T();break;case mi:N?U=b(x,M,P,I,D,A):U=T();break;default:if(R&1)(F!==1||M.type.toLowerCase()!==x.tagName.toLowerCase())&&!w(x)?U=T():U=v(x,M,P,I,D,A);else if(R&6){M.slotScopeIds=D;const q=l(x);if(N?U=C(x):Wm(x)&&x.data==="teleport start"?U=C(x,x.data,"teleport end"):U=a(x),e(M,q,null,P,I,Gm(q),A),oc(M)){let Y;N?(Y=Fe(mi),Y.anchor=U?U.previousSibling:q.lastChild):Y=x.nodeType===3?Rr(""):Fe("div"),Y.el=x,M.component.subTree=Y}}else R&64?F!==8?U=T():U=M.type.hydrate(x,M,P,I,D,A,i,y):R&128&&(U=M.type.hydrate(x,M,P,I,Gm(l(x)),D,A,i,m))}return V!=null&&x0(V,null,I,M),U},v=(x,M,P,I,D,A)=>{A=A||!!M.dynamicChildren;const{type:N,props:T,patchFlag:L,shapeFlag:V,dirs:R,transition:B}=M,F=N==="input"||N==="option";if(F||L!==-1){R&&ra(M,null,P,"created");let U=!1;if(w(x)){U=D4(I,B)&&P&&P.vnode.props&&P.vnode.props.appear;const Y=x.content.firstChild;U&&B.beforeEnter(Y),E(Y,x,P),M.el=x=Y}if(V&16&&!(T&&(T.innerHTML||T.textContent))){let Y=y(x.firstChild,M,x,P,I,D,A);for(;Y;){Po=!0;const ne=Y;Y=Y.nextSibling,c(ne)}}else V&8&&x.textContent!==M.children&&(Po=!0,x.textContent=M.children);if(T)if(F||!A||L&48)for(const Y in T)(F&&(Y.endsWith("value")||Y==="indeterminate")||dp(Y)&&!Du(Y)||Y[0]===".")&&t(x,Y,null,T[Y],void 0,void 0,P);else T.onClick&&t(x,"onClick",null,T.onClick,void 0,void 0,P);let q;(q=T&&T.onVnodeBeforeMount)&&Nr(q,P,M),R&&ra(M,null,P,"beforeMount"),((q=T&&T.onVnodeMounted)||R||U)&&t4(()=>{q&&Nr(q,P,M),U&&B.enter(x),R&&ra(M,null,P,"mounted")},I)}return x.nextSibling},y=(x,M,P,I,D,A,N)=>{N=N||!!M.dynamicChildren;const T=M.children,L=T.length;for(let V=0;V<L;V++){const R=N?T[V]:T[V]=ns(T[V]);if(x)x=m(x,R,I,D,A,N);else{if(R.type===yc&&!R.children)continue;Po=!0,n(null,R,P,null,I,D,Gm(P),A)}}return x},b=(x,M,P,I,D,A)=>{const{slotScopeIds:N}=M;N&&(D=D?D.concat(N):N);const T=l(x),L=y(a(x),M,T,P,I,D,A);return L&&Wm(L)&&L.data==="]"?a(M.anchor=L):(Po=!0,h(M.anchor=d("]"),T,L),L)},S=(x,M,P,I,D,A)=>{if(Po=!0,M.el=null,A){const L=C(x);for(;;){const V=a(x);if(V&&V!==L)c(V);else break}}const N=a(x),T=l(x);return c(x),n(null,M,T,N,P,I,Gm(T),D),N},C=(x,M="[",P="]")=>{let I=0;for(;x;)if(x=a(x),x&&Wm(x)&&(x.data===M&&I++,x.data===P)){if(I===0)return a(x);I--}return x},E=(x,M,P)=>{const I=M.parentNode;I&&I.replaceChild(x,M);let D=P;for(;D;)D.vnode.el===M&&(D.vnode.el=D.subTree.el=x),D=D.parent},w=x=>x.nodeType===1&&x.tagName.toLowerCase()==="template";return[p,m]}const $i=t4;function Ax(i){return R4(i)}function N4(i){return R4(i,ej)}function R4(i,e){const n=CA();n.__VUE__=!0;const{insert:t,remove:s,patchProp:a,createElement:l,createText:c,createComment:h,setText:d,setElementText:p,parentNode:m,nextSibling:v,setScopeId:y=Or,insertStaticContent:b}=i,S=(K,X,oe,fe=null,be=null,ke=null,J=void 0,W=null,ue=!!X.dynamicChildren)=>{if(K===X)return;K&&!zs(K,X)&&(fe=ee(K),Re(K,be,ke,!0),K=null),X.patchFlag===-2&&(ue=!1,X.dynamicChildren=null);const{type:he,ref:xe,shapeFlag:Te}=X;switch(he){case yc:C(K,X,oe,fe);break;case Hi:E(K,X,oe,fe);break;case lc:K==null&&w(X,oe,fe,J);break;case mi:V(K,X,oe,fe,be,ke,J,W,ue);break;default:Te&1?P(K,X,oe,fe,be,ke,J,W,ue):Te&6?R(K,X,oe,fe,be,ke,J,W,ue):(Te&64||Te&128)&&he.process(K,X,oe,fe,be,ke,J,W,ue,$)}xe!=null&&be&&x0(xe,K&&K.ref,ke,X||K,!X)},C=(K,X,oe,fe)=>{if(K==null)t(X.el=c(X.children),oe,fe);else{const be=X.el=K.el;X.children!==K.children&&d(be,X.children)}},E=(K,X,oe,fe)=>{K==null?t(X.el=h(X.children||""),oe,fe):X.el=K.el},w=(K,X,oe,fe)=>{[K.el,K.anchor]=b(K.children,X,oe,fe,K.el,K.anchor)},x=({el:K,anchor:X},oe,fe)=>{let be;for(;K&&K!==X;)be=v(K),t(K,oe,fe),K=be;t(X,oe,fe)},M=({el:K,anchor:X})=>{let oe;for(;K&&K!==X;)oe=v(K),s(K),K=oe;s(X)},P=(K,X,oe,fe,be,ke,J,W,ue)=>{X.type==="svg"?J="svg":X.type==="math"&&(J="mathml"),K==null?I(X,oe,fe,be,ke,J,W,ue):N(K,X,be,ke,J,W,ue)},I=(K,X,oe,fe,be,ke,J,W)=>{let ue,he;const{props:xe,shapeFlag:Te,transition:He,dirs:Be}=K;if(ue=K.el=l(K.type,ke,xe&&xe.is,xe),Te&8?p(ue,K.children):Te&16&&A(K.children,ue,null,fe,be,m1(K,ke),J,W),Be&&ra(K,null,fe,"created"),D(ue,K,K.scopeId,J,fe),xe){for(const tt in xe)tt!=="value"&&!Du(tt)&&a(ue,tt,null,xe[tt],ke,K.children,fe,be,Me);"value"in xe&&a(ue,"value",null,xe.value,ke),(he=xe.onVnodeBeforeMount)&&Nr(he,fe,K)}Be&&ra(K,null,fe,"beforeMount");const ze=D4(be,He);ze&&He.beforeEnter(ue),t(ue,X,oe),((he=xe&&xe.onVnodeMounted)||ze||Be)&&$i(()=>{he&&Nr(he,fe,K),ze&&He.enter(ue),Be&&ra(K,null,fe,"mounted")},be)},D=(K,X,oe,fe,be)=>{if(oe&&y(K,oe),fe)for(let ke=0;ke<fe.length;ke++)y(K,fe[ke]);if(be){let ke=be.subTree;if(X===ke){const J=be.vnode;D(K,J,J.scopeId,J.slotScopeIds,be.parent)}}},A=(K,X,oe,fe,be,ke,J,W,ue=0)=>{for(let he=ue;he<K.length;he++){const xe=K[he]=W?qo(K[he]):ns(K[he]);S(null,xe,X,oe,fe,be,ke,J,W)}},N=(K,X,oe,fe,be,ke,J)=>{const W=X.el=K.el;let{patchFlag:ue,dynamicChildren:he,dirs:xe}=X;ue|=K.patchFlag&16;const Te=K.props||Dn,He=X.props||Dn;let Be;if(oe&&Il(oe,!1),(Be=He.onVnodeBeforeUpdate)&&Nr(Be,oe,X,K),xe&&ra(X,K,oe,"beforeUpdate"),oe&&Il(oe,!0),he?T(K.dynamicChildren,he,W,oe,fe,m1(X,be),ke):J||Y(K,X,W,null,oe,fe,m1(X,be),ke,!1),ue>0){if(ue&16)L(W,X,Te,He,oe,fe,be);else if(ue&2&&Te.class!==He.class&&a(W,"class",null,He.class,be),ue&4&&a(W,"style",Te.style,He.style,be),ue&8){const ze=X.dynamicProps;for(let tt=0;tt<ze.length;tt++){const je=ze[tt],et=Te[je],bt=He[je];(bt!==et||je==="value")&&a(W,je,et,bt,be,K.children,oe,fe,Me)}}ue&1&&K.children!==X.children&&p(W,X.children)}else!J&&he==null&&L(W,X,Te,He,oe,fe,be);((Be=He.onVnodeUpdated)||xe)&&$i(()=>{Be&&Nr(Be,oe,X,K),xe&&ra(X,K,oe,"updated")},fe)},T=(K,X,oe,fe,be,ke,J)=>{for(let W=0;W<X.length;W++){const ue=K[W],he=X[W],xe=ue.el&&(ue.type===mi||!zs(ue,he)||ue.shapeFlag&70)?m(ue.el):oe;S(ue,he,xe,null,fe,be,ke,J,!0)}},L=(K,X,oe,fe,be,ke,J)=>{if(oe!==fe){if(oe!==Dn)for(const W in oe)!Du(W)&&!(W in fe)&&a(K,W,oe[W],null,J,X.children,be,ke,Me);for(const W in fe){if(Du(W))continue;const ue=fe[W],he=oe[W];ue!==he&&W!=="value"&&a(K,W,he,ue,J,X.children,be,ke,Me)}"value"in fe&&a(K,"value",oe.value,fe.value,J)}},V=(K,X,oe,fe,be,ke,J,W,ue)=>{const he=X.el=K?K.el:c(""),xe=X.anchor=K?K.anchor:c("");let{patchFlag:Te,dynamicChildren:He,slotScopeIds:Be}=X;Be&&(W=W?W.concat(Be):Be),K==null?(t(he,oe,fe),t(xe,oe,fe),A(X.children||[],oe,xe,be,ke,J,W,ue)):Te>0&&Te&64&&He&&K.dynamicChildren?(T(K.dynamicChildren,He,oe,be,ke,J,W),(X.key!=null||be&&X===be.subTree)&&Px(K,X,!0)):Y(K,X,oe,xe,be,ke,J,W,ue)},R=(K,X,oe,fe,be,ke,J,W,ue)=>{X.slotScopeIds=W,K==null?X.shapeFlag&512?be.ctx.activate(X,oe,fe,J,ue):B(X,oe,fe,be,ke,J,ue):F(K,X,ue)},B=(K,X,oe,fe,be,ke,J)=>{const W=K.component=$4(K,fe,be);if(vp(K)&&(W.ctx.renderer=$),G4(W),W.asyncDep){if(be&&be.registerDep(W,U),!K.el){const ue=W.subTree=Fe(Hi);E(null,ue,X,oe)}}else U(W,K,X,oe,be,ke,J)},F=(K,X,oe)=>{const fe=X.component=K.component;if(cW(K,X,oe))if(fe.asyncDep&&!fe.asyncResolved){q(fe,X,oe);return}else fe.next=X,eW(fe.update),fe.effect.dirty=!0,fe.update();else X.el=K.el,fe.vnode=X},U=(K,X,oe,fe,be,ke,J)=>{const W=()=>{if(K.isMounted){let{next:xe,bu:Te,u:He,parent:Be,vnode:ze}=K;{const _t=L4(K);if(_t){xe&&(xe.el=ze.el,q(K,xe,J)),_t.asyncDep.then(()=>{K.isUnmounted||W()});return}}let tt=xe,je;Il(K,!1),xe?(xe.el=ze.el,q(K,xe,J)):xe=ze,Te&&Lu(Te),(je=xe.props&&xe.props.onVnodeBeforeUpdate)&&Nr(je,Be,xe,ze),Il(K,!0);const et=Qg(K),bt=K.subTree;K.subTree=et,S(bt,et,m(bt.el),ee(bt),K,be,ke),xe.el=et.el,tt===null&&bx(K,et.el),He&&$i(He,be),(je=xe.props&&xe.props.onVnodeUpdated)&&$i(()=>Nr(je,Be,xe,ze),be)}else{let xe;const{el:Te,props:He}=X,{bm:Be,m:ze,parent:tt}=K,je=oc(X);if(Il(K,!1),Be&&Lu(Be),!je&&(xe=He&&He.onVnodeBeforeMount)&&Nr(xe,tt,X),Il(K,!0),Te&&le){const et=()=>{K.subTree=Qg(K),le(Te,K.subTree,K,be,null)};je?X.type.__asyncLoader().then(()=>!K.isUnmounted&&et()):et()}else{const et=K.subTree=Qg(K);S(null,et,oe,fe,K,be,ke),X.el=et.el}if(ze&&$i(ze,be),!je&&(xe=He&&He.onVnodeMounted)){const et=X;$i(()=>Nr(xe,tt,et),be)}(X.shapeFlag&256||tt&&oc(tt.vnode)&&tt.vnode.shapeFlag&256)&&K.a&&$i(K.a,be),K.isMounted=!0,X=oe=fe=null}},ue=K.effect=new Ku(W,Or,()=>Y0(he),K.scope),he=K.update=()=>{ue.dirty&&ue.run()};he.id=K.uid,Il(K,!0),he()},q=(K,X,oe)=>{X.component=K;const fe=K.vnode.props;K.vnode=X,K.next=null,qW(K,X.props,fe,oe),JW(K,X.children,oe),cl(),hM(K),ul()},Y=(K,X,oe,fe,be,ke,J,W,ue=!1)=>{const he=K&&K.children,xe=K?K.shapeFlag:0,Te=X.children,{patchFlag:He,shapeFlag:Be}=X;if(He>0){if(He&128){de(he,Te,oe,fe,be,ke,J,W,ue);return}else if(He&256){ne(he,Te,oe,fe,be,ke,J,W,ue);return}}Be&8?(xe&16&&Me(he,be,ke),Te!==he&&p(oe,Te)):xe&16?Be&16?de(he,Te,oe,fe,be,ke,J,W,ue):Me(he,be,ke,!0):(xe&8&&p(oe,""),Be&16&&A(Te,oe,fe,be,ke,J,W,ue))},ne=(K,X,oe,fe,be,ke,J,W,ue)=>{K=K||Nu,X=X||Nu;const he=K.length,xe=X.length,Te=Math.min(he,xe);let He;for(He=0;He<Te;He++){const Be=X[He]=ue?qo(X[He]):ns(X[He]);S(K[He],Be,oe,null,be,ke,J,W,ue)}he>xe?Me(K,be,ke,!0,!1,Te):A(X,oe,fe,be,ke,J,W,ue,Te)},de=(K,X,oe,fe,be,ke,J,W,ue)=>{let he=0;const xe=X.length;let Te=K.length-1,He=xe-1;for(;he<=Te&&he<=He;){const Be=K[he],ze=X[he]=ue?qo(X[he]):ns(X[he]);if(zs(Be,ze))S(Be,ze,oe,null,be,ke,J,W,ue);else break;he++}for(;he<=Te&&he<=He;){const Be=K[Te],ze=X[He]=ue?qo(X[He]):ns(X[He]);if(zs(Be,ze))S(Be,ze,oe,null,be,ke,J,W,ue);else break;Te--,He--}if(he>Te){if(he<=He){const Be=He+1,ze=Be<xe?X[Be].el:fe;for(;he<=He;)S(null,X[he]=ue?qo(X[he]):ns(X[he]),oe,ze,be,ke,J,W,ue),he++}}else if(he>He)for(;he<=Te;)Re(K[he],be,ke,!0),he++;else{const Be=he,ze=he,tt=new Map;for(he=ze;he<=He;he++){const we=X[he]=ue?qo(X[he]):ns(X[he]);we.key!=null&&tt.set(we.key,he)}let je,et=0;const bt=He-ze+1;let _t=!1,at=0;const Rt=new Array(bt);for(he=0;he<bt;he++)Rt[he]=0;for(he=Be;he<=Te;he++){const we=K[he];if(et>=bt){Re(we,be,ke,!0);continue}let Oe;if(we.key!=null)Oe=tt.get(we.key);else for(je=ze;je<=He;je++)if(Rt[je-ze]===0&&zs(we,X[je])){Oe=je;break}Oe===void 0?Re(we,be,ke,!0):(Rt[Oe-ze]=he+1,Oe>=at?at=Oe:_t=!0,S(we,X[Oe],oe,null,be,ke,J,W,ue),et++)}const Yt=_t?tj(Rt):Nu;for(je=Yt.length-1,he=bt-1;he>=0;he--){const we=ze+he,Oe=X[we],pe=we+1<xe?X[we+1].el:fe;Rt[he]===0?S(null,Oe,oe,pe,be,ke,J,W,ue):_t&&(je<0||he!==Yt[je]?ve(Oe,oe,pe,2):je--)}}},ve=(K,X,oe,fe,be=null)=>{const{el:ke,type:J,transition:W,children:ue,shapeFlag:he}=K;if(he&6){ve(K.component.subTree,X,oe,fe);return}if(he&128){K.suspense.move(X,oe,fe);return}if(he&64){J.move(K,X,oe,$);return}if(J===mi){t(ke,X,oe);for(let Te=0;Te<ue.length;Te++)ve(ue[Te],X,oe,fe);t(K.anchor,X,oe);return}if(J===lc){x(K,X,oe);return}if(fe!==2&&he&1&&W)if(fe===0)W.beforeEnter(ke),t(ke,X,oe),$i(()=>W.enter(ke),be);else{const{leave:Te,delayLeave:He,afterLeave:Be}=W,ze=()=>t(ke,X,oe),tt=()=>{Te(ke,()=>{ze(),Be&&Be()})};He?He(ke,ze,tt):tt()}else t(ke,X,oe)},Re=(K,X,oe,fe=!1,be=!1)=>{const{type:ke,props:J,ref:W,children:ue,dynamicChildren:he,shapeFlag:xe,patchFlag:Te,dirs:He}=K;if(W!=null&&x0(W,null,oe,K,!0),xe&256){X.ctx.deactivate(K);return}const Be=xe&1&&He,ze=!oc(K);let tt;if(ze&&(tt=J&&J.onVnodeBeforeUnmount)&&Nr(tt,X,K),xe&6)Ce(K.component,oe,fe);else{if(xe&128){K.suspense.unmount(oe,fe);return}Be&&ra(K,null,X,"beforeUnmount"),xe&64?K.type.remove(K,X,oe,be,$,fe):he&&(ke!==mi||Te>0&&Te&64)?Me(he,X,oe,!1,!0):(ke===mi&&Te&384||!be&&xe&16)&&Me(ue,X,oe),fe&&Ee(K)}(ze&&(tt=J&&J.onVnodeUnmounted)||Be)&&$i(()=>{tt&&Nr(tt,X,K),Be&&ra(K,null,X,"unmounted")},oe)},Ee=K=>{const{type:X,el:oe,anchor:fe,transition:be}=K;if(X===mi){ce(oe,fe);return}if(X===lc){M(K);return}const ke=()=>{s(oe),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(K.shapeFlag&1&&be&&!be.persisted){const{leave:J,delayLeave:W}=be,ue=()=>J(oe,ke);W?W(K.el,ke,ue):ue()}else ke()},ce=(K,X)=>{let oe;for(;K!==X;)oe=v(K),s(K),K=oe;s(X)},Ce=(K,X,oe)=>{const{bum:fe,scope:be,update:ke,subTree:J,um:W}=K;fe&&Lu(fe),be.stop(),ke&&(ke.active=!1,Re(J,K,X,oe)),W&&$i(W,X),$i(()=>{K.isUnmounted=!0},X),X&&X.pendingBranch&&!X.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===X.pendingId&&(X.deps--,X.deps===0&&X.resolve())},Me=(K,X,oe,fe=!1,be=!1,ke=0)=>{for(let J=ke;J<K.length;J++)Re(K[J],X,oe,fe,be)},ee=K=>K.shapeFlag&6?ee(K.component.subTree):K.shapeFlag&128?K.suspense.next():v(K.anchor||K.el);let re=!1;const H=(K,X,oe)=>{K==null?X._vnode&&Re(X._vnode,null,null,!0):S(X._vnode||null,K,X,null,null,null,oe),re||(re=!0,hM(),b0(),re=!1),X._vnode=K},$={p:S,um:Re,m:ve,r:Ee,mt:B,mc:A,pc:Y,pbc:T,n:ee,o:i};let te,le;return e&&([te,le]=e($)),{render:H,hydrate:te,createApp:WW(H,te)}}function m1({type:i,props:e},n){return n==="svg"&&i==="foreignObject"||n==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Il({effect:i,update:e},n){i.allowRecurse=e.allowRecurse=n}function D4(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function Px(i,e,n=!1){const t=i.children,s=e.children;if(St(t)&&St(s))for(let a=0;a<t.length;a++){const l=t[a];let c=s[a];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[a]=qo(s[a]),c.el=l.el),n||Px(l,c)),c.type===yc&&(c.el=l.el)}}function tj(i){const e=i.slice(),n=[0];let t,s,a,l,c;const h=i.length;for(t=0;t<h;t++){const d=i[t];if(d!==0){if(s=n[n.length-1],i[s]<d){e[t]=s,n.push(t);continue}for(a=0,l=n.length-1;a<l;)c=a+l>>1,i[n[c]]<d?a=c+1:l=c;d<i[n[a]]&&(a>0&&(e[t]=n[a-1]),n[a]=t)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=e[l];return n}function L4(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:L4(e)}const nj=i=>i.__isTeleport,Ef=i=>i&&(i.disabled||i.disabled===""),CM=i=>typeof SVGElement<"u"&&i instanceof SVGElement,SM=i=>typeof MathMLElement=="function"&&i instanceof MathMLElement,Kb=(i,e)=>{const n=i&&i.to;return ti(n)?e?e(n):null:n},ij={name:"Teleport",__isTeleport:!0,process(i,e,n,t,s,a,l,c,h,d){const{mc:p,pc:m,pbc:v,o:{insert:y,querySelector:b,createText:S,createComment:C}}=d,E=Ef(e.props);let{shapeFlag:w,children:x,dynamicChildren:M}=e;if(i==null){const P=e.el=S(""),I=e.anchor=S("");y(P,n,t),y(I,n,t);const D=e.target=Kb(e.props,b),A=e.targetAnchor=S("");D&&(y(A,D),l==="svg"||CM(D)?l="svg":(l==="mathml"||SM(D))&&(l="mathml"));const N=(T,L)=>{w&16&&p(x,T,L,s,a,l,c,h)};E?N(n,I):D&&N(D,A)}else{e.el=i.el;const P=e.anchor=i.anchor,I=e.target=i.target,D=e.targetAnchor=i.targetAnchor,A=Ef(i.props),N=A?n:I,T=A?P:D;if(l==="svg"||CM(I)?l="svg":(l==="mathml"||SM(I))&&(l="mathml"),M?(v(i.dynamicChildren,M,N,s,a,l,c),Px(i,e,!0)):h||m(i,e,N,T,s,a,l,c,!1),E)A?e.props&&i.props&&e.props.to!==i.props.to&&(e.props.to=i.props.to):jm(e,n,P,d,1);else if((e.props&&e.props.to)!==(i.props&&i.props.to)){const L=e.target=Kb(e.props,b);L&&jm(e,L,null,d,0)}else A&&jm(e,I,D,d,1)}B4(e)},remove(i,e,n,t,{um:s,o:{remove:a}},l){const{shapeFlag:c,children:h,anchor:d,targetAnchor:p,target:m,props:v}=i;if(m&&a(p),l&&a(d),c&16){const y=l||!Ef(v);for(let b=0;b<h.length;b++){const S=h[b];s(S,e,n,y,!!S.dynamicChildren)}}},move:jm,hydrate:rj};function jm(i,e,n,{o:{insert:t},m:s},a=2){a===0&&t(i.targetAnchor,e,n);const{el:l,anchor:c,shapeFlag:h,children:d,props:p}=i,m=a===2;if(m&&t(l,e,n),(!m||Ef(p))&&h&16)for(let v=0;v<d.length;v++)s(d[v],e,n,2);m&&t(c,e,n)}function rj(i,e,n,t,s,a,{o:{nextSibling:l,parentNode:c,querySelector:h}},d){const p=e.target=Kb(e.props,h);if(p){const m=p._lpa||p.firstChild;if(e.shapeFlag&16)if(Ef(e.props))e.anchor=d(l(i),e,c(i),n,t,s,a),e.targetAnchor=m;else{e.anchor=l(i);let v=m;for(;v;)if(v=l(v),v&&v.nodeType===8&&v.data==="teleport anchor"){e.targetAnchor=v,p._lpa=e.targetAnchor&&l(e.targetAnchor);break}d(m,e,p,n,t,s,a)}B4(e)}return e.anchor&&l(e.anchor)}const sj=ij;function B4(i){const e=i.ctx;if(e&&e.ut){let n=i.children[0].el;for(;n&&n!==i.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const mi=Symbol.for("v-fgt"),yc=Symbol.for("v-txt"),Hi=Symbol.for("v-cmt"),lc=Symbol.for("v-stc"),Mf=[];let Vr=null;function Bn(i=!1){Mf.push(Vr=i?null:[])}function O4(){Mf.pop(),Vr=Mf[Mf.length-1]||null}let bc=1;function qb(i){bc+=i}function V4(i){return i.dynamicChildren=bc>0?Vr||Nu:null,O4(),bc>0&&Vr&&Vr.push(i),i}function Vi(i,e,n,t,s,a){return V4(jn(i,e,n,t,s,a,!0))}function Ws(i,e,n,t,s){return V4(Fe(i,e,n,t,s,!0))}function il(i){return i?i.__v_isVNode===!0:!1}function zs(i,e){return i.type===e.type&&i.key===e.key}function aj(i){}const F4=({key:i})=>i??null,e0=({ref:i,ref_key:e,ref_for:n})=>(typeof i=="number"&&(i=""+i),i!=null?ti(i)||Ci(i)||Ht(i)?{i:xi,r:i,k:e,f:!!n}:i:null);function jn(i,e=null,n=null,t=0,s=null,a=i===mi?0:1,l=!1,c=!1){const h={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&F4(e),ref:e&&e0(e),scopeId:Z0,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:t,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:xi};return c?(Nx(h,n),a&128&&i.normalize(h)):n&&(h.shapeFlag|=ti(n)?8:16),bc>0&&!l&&Vr&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&Vr.push(h),h}const Fe=oj;function oj(i,e=null,n=null,t=0,s=null,a=!1){if((!i||i===JA)&&(i=Hi),il(i)){const c=ua(i,e,!0);return n&&Nx(c,n),bc>0&&!a&&Vr&&(c.shapeFlag&6?Vr[Vr.indexOf(i)]=c:Vr.push(c)),c.patchFlag|=-2,c}if(mj(i)&&(i=i.__vccOpts),e){e=U4(e);let{class:c,style:h}=e;c&&!ti(c)&&(e.class=ph(c)),Un(h)&&(fx(h)&&!St(h)&&(h=Jn({},h)),e.style=Mc(h))}const l=ti(i)?1:QA(i)?128:nj(i)?64:Un(i)?4:Ht(i)?2:0;return jn(i,e,n,t,s,l,a,!0)}function U4(i){return i?fx(i)||M4(i)?Jn({},i):i:null}function ua(i,e,n=!1,t=!1){const{props:s,ref:a,patchFlag:l,children:c,transition:h}=i,d=e?z4(s||{},e):s,p={__v_isVNode:!0,__v_skip:!0,type:i.type,props:d,key:d&&F4(d),ref:e&&e.ref?n&&a?St(a)?a.concat(e0(e)):[a,e0(e)]:e0(e):a,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:c,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==mi?l===-1?16:l|16:l,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:h,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&ua(i.ssContent),ssFallback:i.ssFallback&&ua(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return h&&t&&(p.transition=h.clone(p)),p}function Rr(i=" ",e=0){return Fe(yc,null,i,e)}function lj(i,e){const n=Fe(lc,null,i);return n.staticCount=e,n}function Ix(i="",e=!1){return e?(Bn(),Ws(Hi,null,i)):Fe(Hi,null,i)}function ns(i){return i==null||typeof i=="boolean"?Fe(Hi):St(i)?Fe(mi,null,i.slice()):typeof i=="object"?qo(i):Fe(yc,null,String(i))}function qo(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:ua(i)}function Nx(i,e){let n=0;const{shapeFlag:t}=i;if(e==null)e=null;else if(St(e))n=16;else if(typeof e=="object")if(t&65){const s=e.default;s&&(s._c&&(s._d=!1),Nx(i,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!M4(e)?e._ctx=xi:s===3&&xi&&(xi.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else Ht(e)?(e={default:e,_ctx:xi},n=32):(e=String(e),t&64?(n=16,e=[Rr(e)]):n=8);i.children=e,i.shapeFlag|=n}function z4(...i){const e={};for(let n=0;n<i.length;n++){const t=i[n];for(const s in t)if(s==="class")e.class!==t.class&&(e.class=ph([e.class,t.class]));else if(s==="style")e.style=Mc([e.style,t.style]);else if(dp(s)){const a=e[s],l=t[s];l&&a!==l&&!(St(a)&&a.includes(l))&&(e[s]=a?[].concat(a,l):l)}else s!==""&&(e[s]=t[s])}return e}function Nr(i,e,n,t=null){as(i,e,7,[n,t])}const cj=C4();let uj=0;function $4(i,e,n){const t=i.type,s=(e?e.appContext:i.appContext)||cj,a={uid:uj++,vnode:i,type:t,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new lx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:k4(t,s),emitsOptions:YA(t,s),emit:null,emitted:null,propsDefaults:Dn,inheritAttrs:t.inheritAttrs,ctx:Dn,data:Dn,props:Dn,attrs:Dn,slots:Dn,refs:Dn,setupState:Dn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=nW.bind(null,a),i.ce&&i.ce(a),a}let Ti=null;const ls=()=>Ti||xi;let w0,Xb;{const i=CA(),e=(n,t)=>{let s;return(s=i[n])||(s=i[n]=[]),s.push(t),a=>{s.length>1?s.forEach(l=>l(a)):s[0](a)}};w0=e("__VUE_INSTANCE_SETTERS__",n=>Ti=n),Xb=e("__VUE_SSR_SETTERS__",n=>yp=n)}const _c=i=>{const e=Ti;return w0(i),i.scope.on(),()=>{i.scope.off(),w0(e)}},Yb=()=>{Ti&&Ti.scope.off(),w0(null)};function H4(i){return i.vnode.shapeFlag&4}let yp=!1;function G4(i,e=!1){e&&Xb(e);const{props:n,children:t}=i.vnode,s=H4(i);KW(i,n,s,e),YW(i,t);const a=s?hj(i,e):void 0;return e&&Xb(!1),a}function hj(i,e){const n=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,Hb);const{setup:t}=n;if(t){const s=i.setupContext=t.length>1?j4(i):null,a=_c(i);cl();const l=Ka(t,i,0,[i.props,s]);if(ul(),a(),ax(l)){if(l.then(Yb,Yb),e)return l.then(c=>{Jb(i,c,e)}).catch(c=>{Tc(c,i,0)});i.asyncDep=l}else Jb(i,l,e)}else W4(i,e)}function Jb(i,e,n){Ht(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:Un(e)&&(i.setupState=gx(e)),W4(i,n)}let C0,Zb;function dj(i){C0=i,Zb=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,TW))}}const fj=()=>!C0;function W4(i,e,n){const t=i.type;if(!i.render){if(!e&&C0&&!t.render){const s=t.template||Tx(i).template;if(s){const{isCustomElement:a,compilerOptions:l}=i.appContext.config,{delimiters:c,compilerOptions:h}=t,d=Jn(Jn({isCustomElement:a,delimiters:c},l),h);t.render=C0(s,d)}}i.render=t.render||Or,Zb&&Zb(i)}{const s=_c(i);cl();try{FW(i)}finally{ul(),s()}}}const pj={get(i,e){return zr(i,"get",""),i[e]}};function j4(i){const e=n=>{i.exposed=n||{}};return{attrs:new Proxy(i.attrs,pj),slots:i.slots,emit:i.emit,expose:e}}function iv(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(gx($A(i.exposed)),{get(e,n){if(n in e)return e[n];if(n in Sf)return Sf[n](i)},has(e,n){return n in e||n in Sf}}))}function Qb(i,e=!0){return Ht(i)?i.displayName||i.name:i.name||e&&i.__name}function mj(i){return Ht(i)&&"__vccOpts"in i}const Gn=(i,e)=>VG(i,e,yp);function K4(i,e,n=Dn){const t=ls(),s=gr(e),a=is(e),l=vx((h,d)=>{let p;return s4(()=>{const m=i[e];Gs(p,m)&&(p=m,d())}),{get(){return h(),n.get?n.get(p):p},set(m){const v=t.vnode.props;!(v&&(e in v||s in v||a in v)&&(`onUpdate:${e}`in v||`onUpdate:${s}`in v||`onUpdate:${a}`in v))&&Gs(m,p)&&(p=m,d()),t.emit(`update:${e}`,n.set?n.set(m):m)}}}),c=e==="modelValue"?"modelModifiers":`${e}Modifiers`;return l[Symbol.iterator]=()=>{let h=0;return{next(){return h<2?{value:h++?i[c]||{}:l,done:!1}:{done:!0}}}},l}function S0(i,e,n){const t=arguments.length;return t===2?Un(e)&&!St(e)?il(e)?Fe(i,null,[e]):Fe(i,e):Fe(i,null,e):(t>3?n=Array.prototype.slice.call(arguments,2):t===3&&il(n)&&(n=[n]),Fe(i,e,n))}function gj(){}function vj(i,e,n,t){const s=n[t];if(s&&q4(s,i))return s;const a=e();return a.memo=i.slice(),n[t]=a}function q4(i,e){const n=i.memo;if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(Gs(n[t],e[t]))return!1;return bc>0&&Vr&&Vr.push(i),!0}const X4="3.4.27",yj=Or,bj=JG,_j=Mu,xj=XA,wj={createComponentInstance:$4,setupComponent:G4,renderComponentRoot:Qg,setCurrentRenderingInstance:Uf,isVNode:il,normalizeVNode:ns},Cj=wj,Sj=null,Ej=null,Mj=null;/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Tj="http://www.w3.org/2000/svg",kj="http://www.w3.org/1998/Math/MathML",Xo=typeof document<"u"?document:null,EM=Xo&&Xo.createElement("template"),Aj={insert:(i,e,n)=>{e.insertBefore(i,n||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,n,t)=>{const s=e==="svg"?Xo.createElementNS(Tj,i):e==="mathml"?Xo.createElementNS(kj,i):Xo.createElement(i,n?{is:n}:void 0);return i==="select"&&t&&t.multiple!=null&&s.setAttribute("multiple",t.multiple),s},createText:i=>Xo.createTextNode(i),createComment:i=>Xo.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Xo.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,n,t,s,a){const l=n?n.previousSibling:e.lastChild;if(s&&(s===a||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===a||!(s=s.nextSibling)););else{EM.innerHTML=t==="svg"?`<svg>${i}</svg>`:t==="mathml"?`<math>${i}</math>`:i;const c=EM.content;if(t==="svg"||t==="mathml"){const h=c.firstChild;for(;h.firstChild;)c.appendChild(h.firstChild);c.removeChild(h)}e.insertBefore(c,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Io="transition",ld="animation",Yu=Symbol("_vtc"),Rx=(i,{slots:e})=>S0(o4,J4(i),e);Rx.displayName="Transition";const Y4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Pj=Rx.props=Jn({},Sx,Y4),Nl=(i,e=[])=>{St(i)?i.forEach(n=>n(...e)):i&&i(...e)},MM=i=>i?St(i)?i.some(e=>e.length>1):i.length>1:!1;function J4(i){const e={};for(const V in i)V in Y4||(e[V]=i[V]);if(i.css===!1)return e;const{name:n="v",type:t,duration:s,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:h=a,appearActiveClass:d=l,appearToClass:p=c,leaveFromClass:m=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=i,b=Ij(s),S=b&&b[0],C=b&&b[1],{onBeforeEnter:E,onEnter:w,onEnterCancelled:x,onLeave:M,onLeaveCancelled:P,onBeforeAppear:I=E,onAppear:D=w,onAppearCancelled:A=x}=e,N=(V,R,B)=>{Wo(V,R?p:c),Wo(V,R?d:l),B&&B()},T=(V,R)=>{V._isLeaving=!1,Wo(V,m),Wo(V,y),Wo(V,v),R&&R()},L=V=>(R,B)=>{const F=V?D:w,U=()=>N(R,V,B);Nl(F,[R,U]),TM(()=>{Wo(R,V?h:a),Va(R,V?p:c),MM(F)||kM(R,t,S,U)})};return Jn(e,{onBeforeEnter(V){Nl(E,[V]),Va(V,a),Va(V,l)},onBeforeAppear(V){Nl(I,[V]),Va(V,h),Va(V,d)},onEnter:L(!1),onAppear:L(!0),onLeave(V,R){V._isLeaving=!0;const B=()=>T(V,R);Va(V,m),Va(V,v),Q4(),TM(()=>{V._isLeaving&&(Wo(V,m),Va(V,y),MM(M)||kM(V,t,C,B))}),Nl(M,[V,B])},onEnterCancelled(V){N(V,!1),Nl(x,[V])},onAppearCancelled(V){N(V,!0),Nl(A,[V])},onLeaveCancelled(V){T(V),Nl(P,[V])}})}function Ij(i){if(i==null)return null;if(Un(i))return[g1(i.enter),g1(i.leave)];{const e=g1(i);return[e,e]}}function g1(i){return g0(i)}function Va(i,e){e.split(/\s+/).forEach(n=>n&&i.classList.add(n)),(i[Yu]||(i[Yu]=new Set)).add(e)}function Wo(i,e){e.split(/\s+/).forEach(t=>t&&i.classList.remove(t));const n=i[Yu];n&&(n.delete(e),n.size||(i[Yu]=void 0))}function TM(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let Nj=0;function kM(i,e,n,t){const s=i._endId=++Nj,a=()=>{s===i._endId&&t()};if(n)return setTimeout(a,n);const{type:l,timeout:c,propCount:h}=Z4(i,e);if(!l)return t();const d=l+"end";let p=0;const m=()=>{i.removeEventListener(d,v),a()},v=y=>{y.target===i&&++p>=h&&m()};setTimeout(()=>{p<h&&m()},c+1),i.addEventListener(d,v)}function Z4(i,e){const n=window.getComputedStyle(i),t=b=>(n[b]||"").split(", "),s=t(`${Io}Delay`),a=t(`${Io}Duration`),l=AM(s,a),c=t(`${ld}Delay`),h=t(`${ld}Duration`),d=AM(c,h);let p=null,m=0,v=0;e===Io?l>0&&(p=Io,m=l,v=a.length):e===ld?d>0&&(p=ld,m=d,v=h.length):(m=Math.max(l,d),p=m>0?l>d?Io:ld:null,v=p?p===Io?a.length:h.length:0);const y=p===Io&&/\b(transform|all)(,|$)/.test(t(`${Io}Property`).toString());return{type:p,timeout:m,propCount:v,hasTransform:y}}function AM(i,e){for(;i.length<e.length;)i=i.concat(i);return Math.max(...e.map((n,t)=>PM(n)+PM(i[t])))}function PM(i){return i==="auto"?0:Number(i.slice(0,-1).replace(",","."))*1e3}function Q4(){return document.body.offsetHeight}function Rj(i,e,n){const t=i[Yu];t&&(e=(e?[e,...t]:[...t]).join(" ")),e==null?i.removeAttribute("class"):n?i.setAttribute("class",e):i.className=e}const E0=Symbol("_vod"),eP=Symbol("_vsh"),tP={beforeMount(i,{value:e},{transition:n}){i[E0]=i.style.display==="none"?"":i.style.display,n&&e?n.beforeEnter(i):cd(i,e)},mounted(i,{value:e},{transition:n}){n&&e&&n.enter(i)},updated(i,{value:e,oldValue:n},{transition:t}){!e!=!n&&(t?e?(t.beforeEnter(i),cd(i,!0),t.enter(i)):t.leave(i,()=>{cd(i,!1)}):cd(i,e))},beforeUnmount(i,{value:e}){cd(i,e)}};function cd(i,e){i.style.display=e?i[E0]:"none",i[eP]=!e}function Dj(){tP.getSSRProps=({value:i})=>{if(!i)return{style:{display:"none"}}}}const nP=Symbol("");function Lj(i){const e=ls();if(!e)return;const n=e.ut=(s=i(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(a=>t_(a,s))},t=()=>{const s=i(e.proxy);e_(e.subTree,s),n(s)};br(()=>{r4(t);const s=new MutationObserver(t);s.observe(e.subTree.el.parentNode,{childList:!0}),Ks(()=>s.disconnect())})}function e_(i,e){if(i.shapeFlag&128){const n=i.suspense;i=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{e_(n.activeBranch,e)})}for(;i.component;)i=i.component.subTree;if(i.shapeFlag&1&&i.el)t_(i.el,e);else if(i.type===mi)i.children.forEach(n=>e_(n,e));else if(i.type===lc){let{el:n,anchor:t}=i;for(;n&&(t_(n,e),n!==t);)n=n.nextSibling}}function t_(i,e){if(i.nodeType===1){const n=i.style;let t="";for(const s in e)n.setProperty(`--${s}`,e[s]),t+=`--${s}: ${e[s]};`;n[nP]=t}}const Bj=/(^|;)\s*display\s*:/;function Oj(i,e,n){const t=i.style,s=ti(n);let a=!1;if(n&&!s){if(e)if(ti(e))for(const l of e.split(";")){const c=l.slice(0,l.indexOf(":")).trim();n[c]==null&&t0(t,c,"")}else for(const l in e)n[l]==null&&t0(t,l,"");for(const l in n)l==="display"&&(a=!0),t0(t,l,n[l])}else if(s){if(e!==n){const l=t[nP];l&&(n+=";"+l),t.cssText=n,a=Bj.test(n)}}else e&&i.removeAttribute("style");E0 in i&&(i[E0]=a?t.display:"",i[eP]&&(t.display="none"))}const IM=/\s*!important$/;function t0(i,e,n){if(St(n))n.forEach(t=>t0(i,e,t));else if(n==null&&(n=""),e.startsWith("--"))i.setProperty(e,n);else{const t=Vj(i,e);IM.test(n)?i.setProperty(is(t),n.replace(IM,""),"important"):i[t]=n}}const NM=["Webkit","Moz","ms"],v1={};function Vj(i,e){const n=v1[e];if(n)return n;let t=gr(e);if(t!=="filter"&&t in i)return v1[e]=t;t=fp(t);for(let s=0;s<NM.length;s++){const a=NM[s]+t;if(a in i)return v1[e]=a}return e}const RM="http://www.w3.org/1999/xlink";function Fj(i,e,n,t,s){if(t&&e.startsWith("xlink:"))n==null?i.removeAttributeNS(RM,e.slice(6,e.length)):i.setAttributeNS(RM,e,n);else{const a=dG(e);n==null||a&&!SA(n)?i.removeAttribute(e):i.setAttribute(e,a?"":n)}}function Uj(i,e,n,t,s,a,l){if(e==="innerHTML"||e==="textContent"){t&&l(t,s,a),i[e]=n??"";return}const c=i.tagName;if(e==="value"&&c!=="PROGRESS"&&!c.includes("-")){const d=c==="OPTION"?i.getAttribute("value")||"":i.value,p=n??"";(d!==p||!("_value"in i))&&(i.value=p),n==null&&i.removeAttribute(e),i._value=n;return}let h=!1;if(n===""||n==null){const d=typeof i[e];d==="boolean"?n=SA(n):n==null&&d==="string"?(n="",h=!0):d==="number"&&(n=0,h=!0)}try{i[e]=n}catch{}h&&i.removeAttribute(e)}function Ua(i,e,n,t){i.addEventListener(e,n,t)}function zj(i,e,n,t){i.removeEventListener(e,n,t)}const DM=Symbol("_vei");function $j(i,e,n,t,s=null){const a=i[DM]||(i[DM]={}),l=a[e];if(t&&l)l.value=t;else{const[c,h]=Hj(e);if(t){const d=a[e]=jj(t,s);Ua(i,c,d,h)}else l&&(zj(i,c,l,h),a[e]=void 0)}}const LM=/(?:Once|Passive|Capture)$/;function Hj(i){let e;if(LM.test(i)){e={};let t;for(;t=i.match(LM);)i=i.slice(0,i.length-t[0].length),e[t[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):is(i.slice(2)),e]}let y1=0;const Gj=Promise.resolve(),Wj=()=>y1||(Gj.then(()=>y1=0),y1=Date.now());function jj(i,e){const n=t=>{if(!t._vts)t._vts=Date.now();else if(t._vts<=n.attached)return;as(Kj(t,n.value),e,5,[t])};return n.value=i,n.attached=Wj(),n}function Kj(i,e){if(St(e)){const n=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{n.call(i),i._stopped=!0},e.map(t=>s=>!s._stopped&&t&&t(s))}else return e}const BM=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,qj=(i,e,n,t,s,a,l,c,h)=>{const d=s==="svg";e==="class"?Rj(i,t,d):e==="style"?Oj(i,n,t):dp(e)?rx(e)||$j(i,e,n,t,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Xj(i,e,t,d))?Uj(i,e,t,a,l,c,h):(e==="true-value"?i._trueValue=t:e==="false-value"&&(i._falseValue=t),Fj(i,e,t,d))};function Xj(i,e,n,t){if(t)return!!(e==="innerHTML"||e==="textContent"||e in i&&BM(e)&&Ht(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=i.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return BM(e)&&ti(n)?!1:e in i}/*! #__NO_SIDE_EFFECTS__ */function iP(i,e){const n=Qa(i);class t extends rv{constructor(a){super(n,a,e)}}return t.def=n,t}/*! #__NO_SIDE_EFFECTS__ */const Yj=i=>iP(i,pP),Jj=typeof HTMLElement<"u"?HTMLElement:class{};class rv extends Jj{constructor(e,n={},t){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&t?t(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),mp(()=>{this._connected||(k0(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let t=0;t<this.attributes.length;t++)this._setAttr(this.attributes[t].name);this._ob=new MutationObserver(t=>{for(const s of t)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(t,s=!1)=>{const{props:a,styles:l}=t;let c;if(a&&!St(a))for(const h in a){const d=a[h];(d===Number||d&&d.type===Number)&&(h in this._props&&(this._props[h]=g0(this._props[h])),(c||(c=Object.create(null)))[gr(h)]=!0)}this._numberProps=c,s&&this._resolveProps(t),this._applyStyles(l),this._update()},n=this._def.__asyncLoader;n?n().then(t=>e(t,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,t=St(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&t.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of t.map(gr))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(a){this._setProp(s,a)}})}_setAttr(e){let n=this.hasAttribute(e)?this.getAttribute(e):void 0;const t=gr(e);this._numberProps&&this._numberProps[t]&&(n=g0(n)),this._setProp(t,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,t=!0,s=!0){n!==this._props[e]&&(this._props[e]=n,s&&this._instance&&this._update(),t&&(n===!0?this.setAttribute(is(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(is(e),n+""):n||this.removeAttribute(is(e))))}_update(){k0(this._createVNode(),this.shadowRoot)}_createVNode(){const e=Fe(this._def,Jn({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const t=(a,l)=>{this.dispatchEvent(new CustomEvent(a,{detail:l}))};n.emit=(a,...l)=>{t(a,l),is(a)!==a&&t(is(a),l)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof rv){n.parent=s._instance,n.provides=s._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const t=document.createElement("style");t.textContent=n,this.shadowRoot.appendChild(t)})}}function Zj(i="$style"){{const e=ls();if(!e)return Dn;const n=e.type.__cssModules;if(!n)return Dn;const t=n[i];return t||Dn}}const rP=new WeakMap,sP=new WeakMap,M0=Symbol("_moveCb"),OM=Symbol("_enterCb"),aP={name:"TransitionGroup",props:Jn({},Pj,{tag:String,moveClass:String}),setup(i,{slots:e}){const n=ls(),t=Cx();let s,a;return tv(()=>{if(!s.length)return;const l=i.moveClass||`${i.name||"v"}-move`;if(!rK(s[0].el,n.vnode.el,l))return;s.forEach(tK),s.forEach(nK);const c=s.filter(iK);Q4(),c.forEach(h=>{const d=h.el,p=d.style;Va(d,l),p.transform=p.webkitTransform=p.transitionDuration="";const m=d[M0]=v=>{v&&v.target!==d||(!v||/transform$/.test(v.propertyName))&&(d.removeEventListener("transitionend",m),d[M0]=null,Wo(d,l))};d.addEventListener("transitionend",m)})}),()=>{const l=Cn(i),c=J4(l);let h=l.tag||mi;if(s=[],a)for(let d=0;d<a.length;d++){const p=a[d];p.el&&p.el instanceof Element&&(s.push(p),vc(p,Xu(p,c,t,n)),rP.set(p,p.el.getBoundingClientRect()))}a=e.default?Q0(e.default()):[];for(let d=0;d<a.length;d++){const p=a[d];p.key!=null&&vc(p,Xu(p,c,t,n))}return Fe(h,null,a)}}},Qj=i=>delete i.mode;aP.props;const eK=aP;function tK(i){const e=i.el;e[M0]&&e[M0](),e[OM]&&e[OM]()}function nK(i){sP.set(i,i.el.getBoundingClientRect())}function iK(i){const e=rP.get(i),n=sP.get(i),t=e.left-n.left,s=e.top-n.top;if(t||s){const a=i.el.style;return a.transform=a.webkitTransform=`translate(${t}px,${s}px)`,a.transitionDuration="0s",i}}function rK(i,e,n){const t=i.cloneNode(),s=i[Yu];s&&s.forEach(c=>{c.split(/\s+/).forEach(h=>h&&t.classList.remove(h))}),n.split(/\s+/).forEach(c=>c&&t.classList.add(c)),t.style.display="none";const a=e.nodeType===1?e:e.parentNode;a.appendChild(t);const{hasTransform:l}=Z4(t);return a.removeChild(t),l}const rl=i=>{const e=i.props["onUpdate:modelValue"]||!1;return St(e)?n=>Lu(e,n):e};function sK(i){i.target.composing=!0}function VM(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Cs=Symbol("_assign"),T0={created(i,{modifiers:{lazy:e,trim:n,number:t}},s){i[Cs]=rl(s);const a=t||s.props&&s.props.type==="number";Ua(i,e?"change":"input",l=>{if(l.target.composing)return;let c=i.value;n&&(c=c.trim()),a&&(c=m0(c)),i[Cs](c)}),n&&Ua(i,"change",()=>{i.value=i.value.trim()}),e||(Ua(i,"compositionstart",sK),Ua(i,"compositionend",VM),Ua(i,"change",VM))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,modifiers:{lazy:n,trim:t,number:s}},a){if(i[Cs]=rl(a),i.composing)return;const l=(s||i.type==="number")&&!/^0\d/.test(i.value)?m0(i.value):i.value,c=e??"";l!==c&&(document.activeElement===i&&i.type!=="range"&&(n||t&&i.value.trim()===c)||(i.value=c))}},Dx={deep:!0,created(i,e,n){i[Cs]=rl(n),Ua(i,"change",()=>{const t=i._modelValue,s=Ju(i),a=i.checked,l=i[Cs];if(St(t)){const c=W0(t,s),h=c!==-1;if(a&&!h)l(t.concat(s));else if(!a&&h){const d=[...t];d.splice(c,1),l(d)}}else if(Ec(t)){const c=new Set(t);a?c.add(s):c.delete(s),l(c)}else l(lP(i,a))})},mounted:FM,beforeUpdate(i,e,n){i[Cs]=rl(n),FM(i,e,n)}};function FM(i,{value:e,oldValue:n},t){i._modelValue=e,St(e)?i.checked=W0(e,t.props.value)>-1:Ec(e)?i.checked=e.has(t.props.value):e!==n&&(i.checked=nl(e,lP(i,!0)))}const Lx={created(i,{value:e},n){i.checked=nl(e,n.props.value),i[Cs]=rl(n),Ua(i,"change",()=>{i[Cs](Ju(i))})},beforeUpdate(i,{value:e,oldValue:n},t){i[Cs]=rl(t),e!==n&&(i.checked=nl(e,t.props.value))}},oP={deep:!0,created(i,{value:e,modifiers:{number:n}},t){const s=Ec(e);Ua(i,"change",()=>{const a=Array.prototype.filter.call(i.options,l=>l.selected).map(l=>n?m0(Ju(l)):Ju(l));i[Cs](i.multiple?s?new Set(a):a:a[0]),i._assigning=!0,mp(()=>{i._assigning=!1})}),i[Cs]=rl(t)},mounted(i,{value:e,modifiers:{number:n}}){UM(i,e)},beforeUpdate(i,e,n){i[Cs]=rl(n)},updated(i,{value:e,modifiers:{number:n}}){i._assigning||UM(i,e)}};function UM(i,e,n){const t=i.multiple,s=St(e);if(!(t&&!s&&!Ec(e))){for(let a=0,l=i.options.length;a<l;a++){const c=i.options[a],h=Ju(c);if(t)if(s){const d=typeof h;d==="string"||d==="number"?c.selected=e.some(p=>String(p)===String(h)):c.selected=W0(e,h)>-1}else c.selected=e.has(h);else if(nl(Ju(c),e)){i.selectedIndex!==a&&(i.selectedIndex=a);return}}!t&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function Ju(i){return"_value"in i?i._value:i.value}function lP(i,e){const n=e?"_trueValue":"_falseValue";return n in i?i[n]:e}const cP={created(i,e,n){Km(i,e,n,null,"created")},mounted(i,e,n){Km(i,e,n,null,"mounted")},beforeUpdate(i,e,n,t){Km(i,e,n,t,"beforeUpdate")},updated(i,e,n,t){Km(i,e,n,t,"updated")}};function uP(i,e){switch(i){case"SELECT":return oP;case"TEXTAREA":return T0;default:switch(e){case"checkbox":return Dx;case"radio":return Lx;default:return T0}}}function Km(i,e,n,t,s){const l=uP(i.tagName,n.props&&n.props.type)[s];l&&l(i,e,n,t)}function aK(){T0.getSSRProps=({value:i})=>({value:i}),Lx.getSSRProps=({value:i},e)=>{if(e.props&&nl(e.props.value,i))return{checked:!0}},Dx.getSSRProps=({value:i},e)=>{if(St(i)){if(e.props&&W0(i,e.props.value)>-1)return{checked:!0}}else if(Ec(i)){if(e.props&&i.has(e.props.value))return{checked:!0}}else if(i)return{checked:!0}},cP.getSSRProps=(i,e)=>{if(typeof e.type!="string")return;const n=uP(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(i,e)}}const oK=["ctrl","shift","alt","meta"],lK={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>oK.some(n=>i[`${n}Key`]&&!e.includes(n))},cK=(i,e)=>{const n=i._withMods||(i._withMods={}),t=e.join(".");return n[t]||(n[t]=(s,...a)=>{for(let l=0;l<e.length;l++){const c=lK[e[l]];if(c&&c(s,e))return}return i(s,...a)})},uK={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},hK=(i,e)=>{const n=i._withKeys||(i._withKeys={}),t=e.join(".");return n[t]||(n[t]=s=>{if(!("key"in s))return;const a=is(s.key);if(e.some(l=>l===a||uK[l]===a))return i(s)})},hP=Jn({patchProp:qj},Aj);let Tf,zM=!1;function dP(){return Tf||(Tf=Ax(hP))}function fP(){return Tf=zM?Tf:N4(hP),zM=!0,Tf}const k0=(...i)=>{dP().render(...i)},pP=(...i)=>{fP().hydrate(...i)},mP=(...i)=>{const e=dP().createApp(...i),{mount:n}=e;return e.mount=t=>{const s=vP(t);if(!s)return;const a=e._component;!Ht(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.innerHTML="";const l=n(s,!1,gP(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),l},e},dK=(...i)=>{const e=fP().createApp(...i),{mount:n}=e;return e.mount=t=>{const s=vP(t);if(s)return n(s,!0,gP(s))},e};function gP(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function vP(i){return ti(i)?document.querySelector(i):i}let $M=!1;const fK=()=>{$M||($M=!0,aK(),Dj())};/**
* vue v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const pK=()=>{},mK=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:o4,BaseTransitionPropsValidators:Sx,Comment:Hi,DeprecationTypes:Mj,EffectScope:lx,ErrorCodes:YG,ErrorTypeStrings:bj,Fragment:mi,KeepAlive:CW,ReactiveEffect:Ku,Static:lc,Suspense:e4,Teleport:sj,Text:yc,TrackOpTypes:KG,Transition:Rx,TransitionGroup:eK,TriggerOpTypes:qG,VueElement:rv,assertNumber:XG,callWithAsyncErrorHandling:as,callWithErrorHandling:Ka,camelize:gr,capitalize:fp,cloneVNode:ua,compatUtils:Ej,compile:pK,computed:Gn,createApp:mP,createBlock:Ws,createCommentVNode:Ix,createElementBlock:Vi,createElementVNode:jn,createHydrationRenderer:N4,createPropsRestProxy:OW,createRenderer:Ax,createSSRApp:dK,createSlots:EW,createStaticVNode:lj,createTextVNode:Rr,createVNode:Fe,customRef:vx,defineAsyncComponent:xW,defineComponent:Qa,defineCustomElement:iP,defineEmits:AW,defineExpose:PW,defineModel:RW,defineOptions:IW,defineProps:kW,defineSSRCustomElement:Yj,defineSlots:NW,devtools:_j,effect:gG,effectScope:pG,getCurrentInstance:ls,getCurrentScope:j0,getTransitionRawChildren:Q0,guardReactiveProps:U4,h:S0,handleError:Tc,hasInjectionContext:jW,hydrate:pP,initCustomFormatter:gj,initDirectivesForSSR:fK,inject:zu,isMemoSame:q4,isProxy:fx,isReactive:Bu,isReadonly:qu,isRef:Ci,isRuntimeOnly:fj,isShallow:Bf,isVNode:il,markRaw:$A,mergeDefaults:LW,mergeModels:BW,mergeProps:z4,nextTick:mp,normalizeClass:ph,normalizeProps:uG,normalizeStyle:Mc,onActivated:c4,onBeforeMount:d4,onBeforeUnmount:nv,onBeforeUpdate:f4,onDeactivated:u4,onErrorCaptured:v4,onMounted:br,onRenderTracked:g4,onRenderTriggered:m4,onScopeDispose:cx,onServerPrefetch:p4,onUnmounted:Ks,onUpdated:tv,openBlock:Bn,popScopeId:rW,provide:Hf,proxyRefs:gx,pushScopeId:iW,queuePostFlushCb:y0,reactive:mh,readonly:gc,ref:Ct,registerRuntimeCompiler:dj,render:k0,renderList:Ex,renderSlot:y4,resolveComponent:zt,resolveDirective:hW,resolveDynamicComponent:ZA,resolveFilter:Sj,resolveTransitionHooks:Xu,setBlockTracking:qb,setDevtoolsHook:xj,setTransitionHooks:vc,shallowReactive:zA,shallowReadonly:OG,shallowRef:Dr,ssrContextKey:n4,ssrUtils:Cj,stop:vG,toDisplayString:EA,toHandlerKey:Cf,toHandlers:MW,toRaw:Cn,toRef:jG,toRefs:pp,toValue:zG,transformVNodeArgs:aj,triggerRef:UG,unref:on,useAttrs:_4,useCssModule:Zj,useCssVars:Lj,useModel:K4,useSSRContext:i4,useSlots:Mx,useTransitionState:Cx,vModelCheckbox:Dx,vModelDynamic:cP,vModelRadio:Lx,vModelSelect:oP,vModelText:T0,vShow:tP,version:X4,warn:yj,watch:hi,watchEffect:qa,watchPostEffect:r4,watchSyncEffect:s4,withAsyncContext:VW,withCtx:pt,withDefaults:DW,withDirectives:bW,withKeys:hK,withMemo:vj,withModifiers:cK,withScopeId:sW},Symbol.toStringTag,{value:"Module"})),gK={style:{width:"100%","text-align":"center"}},vK={__name:"AppItem",props:{routeData:{id:"",title:"",comp:null,desc:""}},setup(i){const e=i;function n(){location.hash=e.routeData.id}return(t,s)=>{const a=zt("Icon"),l=zt("Button");return Bn(),Vi("div",gK,[Fe(l,{type:"success",size:"large",onClick:n},{default:pt(()=>[Fe(a,{type:"md-eye"}),Rr(" "+EA(i.routeData.title),1)]),_:1})])}}};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const gh="164",ql={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Fa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yP=0,n_=1,bP=2,yK=3,bK=0,Bx=1,Ox=2,ia=3,eo=0,er=1,Lr=2,Xa=0,cc=1,A0=2,i_=3,r_=4,_P=5,Yo=100,xP=101,wP=102,CP=103,SP=104,EP=200,MP=201,TP=202,kP=203,P0=204,I0=205,AP=206,PP=207,IP=208,NP=209,RP=210,DP=211,LP=212,BP=213,OP=214,VP=0,FP=1,UP=2,Gf=3,zP=4,$P=5,HP=6,GP=7,bp=0,WP=1,jP=2,Ya=0,KP=1,qP=2,XP=3,Vx=4,YP=5,JP=6,ZP=7,s_="attached",QP="detached",sv=300,to=301,sl=302,Zu=303,Wf=304,vh=306,al=1e3,mr=1001,Qu=1002,ki=1003,av=1004,_K=1004,ec=1005,xK=1005,gi=1006,$u=1007,wK=1007,$s=1008,CK=1008,js=1009,eI=1010,tI=1011,Fx=1012,Ux=1013,xc=1014,_s=1015,yh=1016,zx=1017,$x=1018,bh=1020,nI=35902,iI=1021,rI=1022,Fr=1023,sI=1024,aI=1025,uc=1026,eh=1027,Hx=1028,Gx=1029,oI=1030,Wx=1031,jx=1033,n0=33776,i0=33777,r0=33778,s0=33779,a_=35840,o_=35841,l_=35842,c_=35843,u_=36196,h_=37492,d_=37496,f_=37808,p_=37809,m_=37810,g_=37811,v_=37812,y_=37813,b_=37814,__=37815,x_=37816,w_=37817,C_=37818,S_=37819,E_=37820,M_=37821,a0=36492,T_=36494,k_=36495,lI=36283,A_=36284,P_=36285,I_=36286,cI=2200,uI=2201,hI=2202,th=2300,nh=2301,o0=2302,tc=2400,nc=2401,jf=2402,ov=2500,Kx=2501,SK=0,EK=1,MK=2,dI=3200,fI=3201,hl=0,pI=1,za="",ts="srgb",oo="srgb-linear",lv="display-p3",_p="display-p3-linear",Kf="linear",Hn="srgb",qf="rec709",Xf="p3",TK=0,Xl=7680,kK=7681,AK=7682,PK=7683,IK=34055,NK=34056,RK=5386,DK=512,LK=513,BK=514,OK=515,VK=516,FK=517,UK=518,N_=519,mI=512,gI=513,vI=514,qx=515,yI=516,bI=517,_I=518,xI=519,Yf=35044,zK=35048,$K=35040,HK=35045,GK=35049,WK=35041,jK=35046,KK=35050,qK=35042,XK="100",R_="300 es",oa=2e3,Jf=2001;class ma{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(n)===-1&&t[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const a=s.indexOf(n);a!==-1&&s.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const s=t.slice(0);for(let a=0,l=s.length;a<l;a++)s[a].call(this,e);e.target=null}}}const Xi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let HM=1234567;const hc=Math.PI/180,ih=180/Math.PI;function os(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(Xi[i&255]+Xi[i>>8&255]+Xi[i>>16&255]+Xi[i>>24&255]+"-"+Xi[e&255]+Xi[e>>8&255]+"-"+Xi[e>>16&15|64]+Xi[e>>24&255]+"-"+Xi[n&63|128]+Xi[n>>8&255]+"-"+Xi[n>>16&255]+Xi[n>>24&255]+Xi[t&255]+Xi[t>>8&255]+Xi[t>>16&255]+Xi[t>>24&255]).toLowerCase()}function ui(i,e,n){return Math.max(e,Math.min(n,i))}function Xx(i,e){return(i%e+e)%e}function YK(i,e,n,t,s){return t+(i-e)*(s-t)/(n-e)}function JK(i,e,n){return i!==e?(n-i)/(e-i):0}function kf(i,e,n){return(1-n)*i+n*e}function ZK(i,e,n,t){return kf(i,e,1-Math.exp(-n*t))}function QK(i,e=1){return e-Math.abs(Xx(i,e*2)-e)}function eq(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*(3-2*i))}function tq(i,e,n){return i<=e?0:i>=n?1:(i=(i-e)/(n-e),i*i*i*(i*(i*6-15)+10))}function nq(i,e){return i+Math.floor(Math.random()*(e-i+1))}function iq(i,e){return i+Math.random()*(e-i)}function rq(i){return i*(.5-Math.random())}function sq(i){i!==void 0&&(HM=i);let e=HM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function aq(i){return i*hc}function oq(i){return i*ih}function lq(i){return(i&i-1)===0&&i!==0}function cq(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function uq(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function hq(i,e,n,t,s){const a=Math.cos,l=Math.sin,c=a(n/2),h=l(n/2),d=a((e+t)/2),p=l((e+t)/2),m=a((e-t)/2),v=l((e-t)/2),y=a((t-e)/2),b=l((t-e)/2);switch(s){case"XYX":i.set(c*p,h*m,h*v,c*d);break;case"YZY":i.set(h*v,c*p,h*m,c*d);break;case"ZXZ":i.set(h*m,h*v,c*p,c*d);break;case"XZX":i.set(c*p,h*b,h*y,c*d);break;case"YXY":i.set(h*y,c*p,h*b,c*d);break;case"ZYZ":i.set(h*b,h*y,c*p,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function pr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function nn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const Qi={DEG2RAD:hc,RAD2DEG:ih,generateUUID:os,clamp:ui,euclideanModulo:Xx,mapLinear:YK,inverseLerp:JK,lerp:kf,damp:ZK,pingpong:QK,smoothstep:eq,smootherstep:tq,randInt:nq,randFloat:iq,randFloatSpread:rq,seededRandom:sq,degToRad:aq,radToDeg:oq,isPowerOfTwo:lq,ceilPowerOfTwo:cq,floorPowerOfTwo:uq,setQuaternionFromProperEuler:hq,normalize:nn,denormalize:pr};class Ge{constructor(e=0,n=0){Ge.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,t=this.y,s=e.elements;return this.x=s[0]*n+s[3]*t+s[6],this.y=s[1]*n+s[4]*t+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(n,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const t=this.dot(e)/n;return Math.acos(ui(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,t=this.y-e.y;return n*n+t*t}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,t){return this.x=e.x+(n.x-e.x)*t,this.y=e.y+(n.y-e.y)*t,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const t=Math.cos(n),s=Math.sin(n),a=this.x-e.x,l=this.y-e.y;return this.x=a*t-l*s+e.x,this.y=a*s+l*t+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qt{constructor(e,n,t,s,a,l,c,h,d){Qt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,t,s,a,l,c,h,d)}set(e,n,t,s,a,l,c,h,d){const p=this.elements;return p[0]=e,p[1]=s,p[2]=c,p[3]=n,p[4]=a,p[5]=h,p[6]=t,p[7]=l,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,t=e.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this}extractBasis(e,n,t){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const t=e.elements,s=n.elements,a=this.elements,l=t[0],c=t[3],h=t[6],d=t[1],p=t[4],m=t[7],v=t[2],y=t[5],b=t[8],S=s[0],C=s[3],E=s[6],w=s[1],x=s[4],M=s[7],P=s[2],I=s[5],D=s[8];return a[0]=l*S+c*w+h*P,a[3]=l*C+c*x+h*I,a[6]=l*E+c*M+h*D,a[1]=d*S+p*w+m*P,a[4]=d*C+p*x+m*I,a[7]=d*E+p*M+m*D,a[2]=v*S+y*w+b*P,a[5]=v*C+y*x+b*I,a[8]=v*E+y*M+b*D,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],t=e[1],s=e[2],a=e[3],l=e[4],c=e[5],h=e[6],d=e[7],p=e[8];return n*l*p-n*c*d-t*a*p+t*c*h+s*a*d-s*l*h}invert(){const e=this.elements,n=e[0],t=e[1],s=e[2],a=e[3],l=e[4],c=e[5],h=e[6],d=e[7],p=e[8],m=p*l-c*d,v=c*h-p*a,y=d*a-l*h,b=n*m+t*v+s*y;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/b;return e[0]=m*S,e[1]=(s*d-p*t)*S,e[2]=(c*t-s*l)*S,e[3]=v*S,e[4]=(p*n-s*h)*S,e[5]=(s*a-c*n)*S,e[6]=y*S,e[7]=(t*h-d*n)*S,e[8]=(l*n-t*a)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,t,s,a,l,c){const h=Math.cos(a),d=Math.sin(a);return this.set(t*h,t*d,-t*(h*l+d*c)+l+e,-s*d,s*h,-s*(-d*l+h*c)+c+n,0,0,1),this}scale(e,n){return this.premultiply(b1.makeScale(e,n)),this}rotate(e){return this.premultiply(b1.makeRotation(-e)),this}translate(e,n){return this.premultiply(b1.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),t=Math.sin(e);return this.set(n,-t,0,t,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,t=e.elements;for(let s=0;s<9;s++)if(n[s]!==t[s])return!1;return!0}fromArray(e,n=0){for(let t=0;t<9;t++)this.elements[t]=e[t+n];return this}toArray(e=[],n=0){const t=this.elements;return e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3],e[n+4]=t[4],e[n+5]=t[5],e[n+6]=t[6],e[n+7]=t[7],e[n+8]=t[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const b1=new Qt;function wI(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const dq={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ku(i,e){return new dq[i](e)}function Zf(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function CI(){const i=Zf("canvas");return i.style.display="block",i}const GM={};function SI(i){i in GM||(GM[i]=!0,console.warn(i))}const WM=new Qt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),jM=new Qt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),qm={[oo]:{transfer:Kf,primaries:qf,toReference:i=>i,fromReference:i=>i},[ts]:{transfer:Hn,primaries:qf,toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[_p]:{transfer:Kf,primaries:Xf,toReference:i=>i.applyMatrix3(jM),fromReference:i=>i.applyMatrix3(WM)},[lv]:{transfer:Hn,primaries:Xf,toReference:i=>i.convertSRGBToLinear().applyMatrix3(jM),fromReference:i=>i.applyMatrix3(WM).convertLinearToSRGB()}},fq=new Set([oo,_p]),Rn={enabled:!0,_workingColorSpace:oo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!fq.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,n){if(this.enabled===!1||e===n||!e||!n)return i;const t=qm[e].toReference,s=qm[n].fromReference;return s(t(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return qm[i].primaries},getTransfer:function(i){return i===za?Kf:qm[i].transfer}};function Hu(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function _1(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Qc;class EI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Qc===void 0&&(Qc=Zf("canvas")),Qc.width=e.width,Qc.height=e.height;const t=Qc.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),n=Qc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Zf("canvas");n.width=e.width,n.height=e.height;const t=n.getContext("2d");t.drawImage(e,0,0,e.width,e.height);const s=t.getImageData(0,0,e.width,e.height),a=s.data;for(let l=0;l<a.length;l++)a[l]=Hu(a[l]/255)*255;return t.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let t=0;t<n.length;t++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[t]=Math.floor(Hu(n[t]/255)*255):n[t]=Hu(n[t]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let pq=0;class ic{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:pq++}),this.uuid=os(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const t={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let l=0,c=s.length;l<c;l++)s[l].isDataTexture?a.push(x1(s[l].image)):a.push(x1(s[l]))}else a=x1(s);t.url=a}return n||(e.images[this.uuid]=t),t}}function x1(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?EI.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mq=0;class Wn extends ma{constructor(e=Wn.DEFAULT_IMAGE,n=Wn.DEFAULT_MAPPING,t=mr,s=mr,a=gi,l=$s,c=Fr,h=js,d=Wn.DEFAULT_ANISOTROPY,p=za){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mq++}),this.uuid=os(),this.name="",this.source=new ic(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=t,this.wrapT=s,this.magFilter=a,this.minFilter=l,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=h,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const t={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(t.userData=this.userData),n||(e.textures[this.uuid]=t),t}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case al:e.x=e.x-Math.floor(e.x);break;case mr:e.x=e.x<0?0:1;break;case Qu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case al:e.y=e.y-Math.floor(e.y);break;case mr:e.y=e.y<0?0:1;break;case Qu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Wn.DEFAULT_IMAGE=null;Wn.DEFAULT_MAPPING=sv;Wn.DEFAULT_ANISOTROPY=1;class ln{constructor(e=0,n=0,t=0,s=1){ln.prototype.isVector4=!0,this.x=e,this.y=n,this.z=t,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,t,s){return this.x=e,this.y=n,this.z=t,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,t=this.y,s=this.z,a=this.w,l=e.elements;return this.x=l[0]*n+l[4]*t+l[8]*s+l[12]*a,this.y=l[1]*n+l[5]*t+l[9]*s+l[13]*a,this.z=l[2]*n+l[6]*t+l[10]*s+l[14]*a,this.w=l[3]*n+l[7]*t+l[11]*s+l[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,t,s,a;const h=e.elements,d=h[0],p=h[4],m=h[8],v=h[1],y=h[5],b=h[9],S=h[2],C=h[6],E=h[10];if(Math.abs(p-v)<.01&&Math.abs(m-S)<.01&&Math.abs(b-C)<.01){if(Math.abs(p+v)<.1&&Math.abs(m+S)<.1&&Math.abs(b+C)<.1&&Math.abs(d+y+E-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(d+1)/2,M=(y+1)/2,P=(E+1)/2,I=(p+v)/4,D=(m+S)/4,A=(b+C)/4;return x>M&&x>P?x<.01?(t=0,s=.707106781,a=.707106781):(t=Math.sqrt(x),s=I/t,a=D/t):M>P?M<.01?(t=.707106781,s=0,a=.707106781):(s=Math.sqrt(M),t=I/s,a=A/s):P<.01?(t=.707106781,s=.707106781,a=0):(a=Math.sqrt(P),t=D/a,s=A/a),this.set(t,s,a,n),this}let w=Math.sqrt((C-b)*(C-b)+(m-S)*(m-S)+(v-p)*(v-p));return Math.abs(w)<.001&&(w=1),this.x=(C-b)/w,this.y=(m-S)/w,this.z=(v-p)/w,this.w=Math.acos((d+y+E-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(n,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,t){return this.x=e.x+(n.x-e.x)*t,this.y=e.y+(n.y-e.y)*t,this.z=e.z+(n.z-e.z)*t,this.w=e.w+(n.w-e.w)*t,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class MI extends ma{constructor(e=1,n=1,t={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new ln(0,0,e,n),this.scissorTest=!1,this.viewport=new ln(0,0,e,n);const s={width:e,height:n,depth:1};t=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:gi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},t);const a=new Wn(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace);a.flipY=!1,a.generateMipmaps=t.generateMipmaps,a.internalFormat=t.internalFormat,this.textures=[];const l=t.count;for(let c=0;c<l;c++)this.textures[c]=a.clone(),this.textures[c].isRenderTargetTexture=!0;this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,this.depthTexture=t.depthTexture,this.samples=t.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,t=1){if(this.width!==e||this.height!==n||this.depth!==t){this.width=e,this.height=n,this.depth=t;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=n,this.textures[s].image.depth=t;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,s=e.textures.length;t<s;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new ic(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ss extends MI{constructor(e=1,n=1,t={}){super(e,n,t),this.isWebGLRenderTarget=!0}}class cv extends Wn{constructor(e=null,n=1,t=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:t,depth:s},this.magFilter=ki,this.minFilter=ki,this.wrapR=mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gq extends Ss{constructor(e=1,n=1,t=1,s={}){super(e,n,s),this.isWebGLArrayRenderTarget=!0,this.depth=t,this.texture=new cv(null,e,n,t),this.texture.isRenderTargetTexture=!0}}class Yx extends Wn{constructor(e=null,n=1,t=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:t,depth:s},this.magFilter=ki,this.minFilter=ki,this.wrapR=mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vq extends Ss{constructor(e=1,n=1,t=1,s={}){super(e,n,s),this.isWebGL3DRenderTarget=!0,this.depth=t,this.texture=new Yx(null,e,n,t),this.texture.isRenderTargetTexture=!0}}class wi{constructor(e=0,n=0,t=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=t,this._w=s}static slerpFlat(e,n,t,s,a,l,c){let h=t[s+0],d=t[s+1],p=t[s+2],m=t[s+3];const v=a[l+0],y=a[l+1],b=a[l+2],S=a[l+3];if(c===0){e[n+0]=h,e[n+1]=d,e[n+2]=p,e[n+3]=m;return}if(c===1){e[n+0]=v,e[n+1]=y,e[n+2]=b,e[n+3]=S;return}if(m!==S||h!==v||d!==y||p!==b){let C=1-c;const E=h*v+d*y+p*b+m*S,w=E>=0?1:-1,x=1-E*E;if(x>Number.EPSILON){const P=Math.sqrt(x),I=Math.atan2(P,E*w);C=Math.sin(C*I)/P,c=Math.sin(c*I)/P}const M=c*w;if(h=h*C+v*M,d=d*C+y*M,p=p*C+b*M,m=m*C+S*M,C===1-c){const P=1/Math.sqrt(h*h+d*d+p*p+m*m);h*=P,d*=P,p*=P,m*=P}}e[n]=h,e[n+1]=d,e[n+2]=p,e[n+3]=m}static multiplyQuaternionsFlat(e,n,t,s,a,l){const c=t[s],h=t[s+1],d=t[s+2],p=t[s+3],m=a[l],v=a[l+1],y=a[l+2],b=a[l+3];return e[n]=c*b+p*m+h*y-d*v,e[n+1]=h*b+p*v+d*m-c*y,e[n+2]=d*b+p*y+c*v-h*m,e[n+3]=p*b-c*m-h*v-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,t,s){return this._x=e,this._y=n,this._z=t,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const t=e._x,s=e._y,a=e._z,l=e._order,c=Math.cos,h=Math.sin,d=c(t/2),p=c(s/2),m=c(a/2),v=h(t/2),y=h(s/2),b=h(a/2);switch(l){case"XYZ":this._x=v*p*m+d*y*b,this._y=d*y*m-v*p*b,this._z=d*p*b+v*y*m,this._w=d*p*m-v*y*b;break;case"YXZ":this._x=v*p*m+d*y*b,this._y=d*y*m-v*p*b,this._z=d*p*b-v*y*m,this._w=d*p*m+v*y*b;break;case"ZXY":this._x=v*p*m-d*y*b,this._y=d*y*m+v*p*b,this._z=d*p*b+v*y*m,this._w=d*p*m-v*y*b;break;case"ZYX":this._x=v*p*m-d*y*b,this._y=d*y*m+v*p*b,this._z=d*p*b-v*y*m,this._w=d*p*m+v*y*b;break;case"YZX":this._x=v*p*m+d*y*b,this._y=d*y*m+v*p*b,this._z=d*p*b-v*y*m,this._w=d*p*m-v*y*b;break;case"XZY":this._x=v*p*m-d*y*b,this._y=d*y*m-v*p*b,this._z=d*p*b+v*y*m,this._w=d*p*m+v*y*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const t=n/2,s=Math.sin(t);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,t=n[0],s=n[4],a=n[8],l=n[1],c=n[5],h=n[9],d=n[2],p=n[6],m=n[10],v=t+c+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(p-h)*y,this._y=(a-d)*y,this._z=(l-s)*y}else if(t>c&&t>m){const y=2*Math.sqrt(1+t-c-m);this._w=(p-h)/y,this._x=.25*y,this._y=(s+l)/y,this._z=(a+d)/y}else if(c>m){const y=2*Math.sqrt(1+c-t-m);this._w=(a-d)/y,this._x=(s+l)/y,this._y=.25*y,this._z=(h+p)/y}else{const y=2*Math.sqrt(1+m-t-c);this._w=(l-s)/y,this._x=(a+d)/y,this._y=(h+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let t=e.dot(n)+1;return t<Number.EPSILON?(t=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=t):(this._x=0,this._y=-e.z,this._z=e.y,this._w=t)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=t),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ui(this.dot(e),-1,1)))}rotateTowards(e,n){const t=this.angleTo(e);if(t===0)return this;const s=Math.min(1,n/t);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const t=e._x,s=e._y,a=e._z,l=e._w,c=n._x,h=n._y,d=n._z,p=n._w;return this._x=t*p+l*c+s*d-a*h,this._y=s*p+l*h+a*c-t*d,this._z=a*p+l*d+t*h-s*c,this._w=l*p-t*c-s*h-a*d,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const t=this._x,s=this._y,a=this._z,l=this._w;let c=l*e._w+t*e._x+s*e._y+a*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=l,this._x=t,this._y=s,this._z=a,this;const h=1-c*c;if(h<=Number.EPSILON){const y=1-n;return this._w=y*l+n*this._w,this._x=y*t+n*this._x,this._y=y*s+n*this._y,this._z=y*a+n*this._z,this.normalize(),this}const d=Math.sqrt(h),p=Math.atan2(d,c),m=Math.sin((1-n)*p)/d,v=Math.sin(n*p)/d;return this._w=l*m+this._w*v,this._x=t*m+this._x*v,this._y=s*m+this._y*v,this._z=a*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,n,t){return this.copy(e).slerp(n,t)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),t=Math.random(),s=Math.sqrt(1-t),a=Math.sqrt(t);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,n=0,t=0){Q.prototype.isVector3=!0,this.x=e,this.y=n,this.z=t}set(e,n,t){return t===void 0&&(t=this.z),this.x=e,this.y=n,this.z=t,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(KM.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(KM.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,t=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[3]*t+a[6]*s,this.y=a[1]*n+a[4]*t+a[7]*s,this.z=a[2]*n+a[5]*t+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,t=this.y,s=this.z,a=e.elements,l=1/(a[3]*n+a[7]*t+a[11]*s+a[15]);return this.x=(a[0]*n+a[4]*t+a[8]*s+a[12])*l,this.y=(a[1]*n+a[5]*t+a[9]*s+a[13])*l,this.z=(a[2]*n+a[6]*t+a[10]*s+a[14])*l,this}applyQuaternion(e){const n=this.x,t=this.y,s=this.z,a=e.x,l=e.y,c=e.z,h=e.w,d=2*(l*s-c*t),p=2*(c*n-a*s),m=2*(a*t-l*n);return this.x=n+h*d+l*m-c*p,this.y=t+h*p+c*d-a*m,this.z=s+h*m+a*p-l*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,t=this.y,s=this.z,a=e.elements;return this.x=a[0]*n+a[4]*t+a[8]*s,this.y=a[1]*n+a[5]*t+a[9]*s,this.z=a[2]*n+a[6]*t+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(n,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,t){return this.x=e.x+(n.x-e.x)*t,this.y=e.y+(n.y-e.y)*t,this.z=e.z+(n.z-e.z)*t,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const t=e.x,s=e.y,a=e.z,l=n.x,c=n.y,h=n.z;return this.x=s*h-a*c,this.y=a*l-t*h,this.z=t*c-s*l,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const t=e.dot(this)/n;return this.copy(e).multiplyScalar(t)}projectOnPlane(e){return w1.copy(this).projectOnVector(e),this.sub(w1)}reflect(e){return this.sub(w1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const t=this.dot(e)/n;return Math.acos(ui(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,t=this.y-e.y,s=this.z-e.z;return n*n+t*t+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,t){const s=Math.sin(n)*e;return this.x=s*Math.sin(t),this.y=Math.cos(n)*e,this.z=s*Math.cos(t),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,t){return this.x=e*Math.sin(n),this.y=t,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),t=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=t,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,t=Math.sqrt(1-n*n);return this.x=t*Math.cos(e),this.y=n,this.z=t*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const w1=new Q,KM=new wi;class Gi{constructor(e=new Q(1/0,1/0,1/0),n=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,t=e.length;n<t;n+=3)this.expandByPoint(Os.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,t=e.count;n<t;n++)this.expandByPoint(Os.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,t=e.length;n<t;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const t=Os.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const t=e.geometry;if(t!==void 0){const a=t.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let l=0,c=a.count;l<c;l++)e.isMesh===!0?e.getVertexPosition(l,Os):Os.fromBufferAttribute(a,l),Os.applyMatrix4(e.matrixWorld),this.expandByPoint(Os);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Xm.copy(e.boundingBox)):(t.boundingBox===null&&t.computeBoundingBox(),Xm.copy(t.boundingBox)),Xm.applyMatrix4(e.matrixWorld),this.union(Xm)}const s=e.children;for(let a=0,l=s.length;a<l;a++)this.expandByObject(s[a],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Os),Os.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,t;return e.normal.x>0?(n=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),n<=-e.constant&&t>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ud),Ym.subVectors(this.max,ud),eu.subVectors(e.a,ud),tu.subVectors(e.b,ud),nu.subVectors(e.c,ud),No.subVectors(tu,eu),Ro.subVectors(nu,tu),Rl.subVectors(eu,nu);let n=[0,-No.z,No.y,0,-Ro.z,Ro.y,0,-Rl.z,Rl.y,No.z,0,-No.x,Ro.z,0,-Ro.x,Rl.z,0,-Rl.x,-No.y,No.x,0,-Ro.y,Ro.x,0,-Rl.y,Rl.x,0];return!C1(n,eu,tu,nu,Ym)||(n=[1,0,0,0,1,0,0,0,1],!C1(n,eu,tu,nu,Ym))?!1:(Jm.crossVectors(No,Ro),n=[Jm.x,Jm.y,Jm.z],C1(n,eu,tu,nu,Ym))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Os).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Os).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Aa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Aa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Aa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Aa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Aa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Aa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Aa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Aa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Aa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Aa=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],Os=new Q,Xm=new Gi,eu=new Q,tu=new Q,nu=new Q,No=new Q,Ro=new Q,Rl=new Q,ud=new Q,Ym=new Q,Jm=new Q,Dl=new Q;function C1(i,e,n,t,s){for(let a=0,l=i.length-3;a<=l;a+=3){Dl.fromArray(i,a);const c=s.x*Math.abs(Dl.x)+s.y*Math.abs(Dl.y)+s.z*Math.abs(Dl.z),h=e.dot(Dl),d=n.dot(Dl),p=t.dot(Dl);if(Math.max(-Math.max(h,d,p),Math.min(h,d,p))>c)return!1}return!0}const yq=new Gi,hd=new Q,S1=new Q;class Wi{constructor(e=new Q,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const t=this.center;n!==void 0?t.copy(n):yq.setFromPoints(e).getCenter(t);let s=0;for(let a=0,l=e.length;a<l;a++)s=Math.max(s,t.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const t=this.center.distanceToSquared(e);return n.copy(e),t>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hd.subVectors(e,this.center);const n=hd.lengthSq();if(n>this.radius*this.radius){const t=Math.sqrt(n),s=(t-this.radius)*.5;this.center.addScaledVector(hd,s/t),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(S1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hd.copy(e.center).add(S1)),this.expandByPoint(hd.copy(e.center).sub(S1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Pa=new Q,E1=new Q,Zm=new Q,Do=new Q,M1=new Q,Qm=new Q,T1=new Q;class kc{constructor(e=new Q,n=new Q(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pa)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const t=n.dot(this.direction);return t<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,t)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Pa.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Pa.copy(this.origin).addScaledVector(this.direction,n),Pa.distanceToSquared(e))}distanceSqToSegment(e,n,t,s){E1.copy(e).add(n).multiplyScalar(.5),Zm.copy(n).sub(e).normalize(),Do.copy(this.origin).sub(E1);const a=e.distanceTo(n)*.5,l=-this.direction.dot(Zm),c=Do.dot(this.direction),h=-Do.dot(Zm),d=Do.lengthSq(),p=Math.abs(1-l*l);let m,v,y,b;if(p>0)if(m=l*h-c,v=l*c-h,b=a*p,m>=0)if(v>=-b)if(v<=b){const S=1/p;m*=S,v*=S,y=m*(m+l*v+2*c)+v*(l*m+v+2*h)+d}else v=a,m=Math.max(0,-(l*v+c)),y=-m*m+v*(v+2*h)+d;else v=-a,m=Math.max(0,-(l*v+c)),y=-m*m+v*(v+2*h)+d;else v<=-b?(m=Math.max(0,-(-l*a+c)),v=m>0?-a:Math.min(Math.max(-a,-h),a),y=-m*m+v*(v+2*h)+d):v<=b?(m=0,v=Math.min(Math.max(-a,-h),a),y=v*(v+2*h)+d):(m=Math.max(0,-(l*a+c)),v=m>0?a:Math.min(Math.max(-a,-h),a),y=-m*m+v*(v+2*h)+d);else v=l>0?-a:a,m=Math.max(0,-(l*v+c)),y=-m*m+v*(v+2*h)+d;return t&&t.copy(this.origin).addScaledVector(this.direction,m),s&&s.copy(E1).addScaledVector(Zm,v),y}intersectSphere(e,n){Pa.subVectors(e.center,this.origin);const t=Pa.dot(this.direction),s=Pa.dot(Pa)-t*t,a=e.radius*e.radius;if(s>a)return null;const l=Math.sqrt(a-s),c=t-l,h=t+l;return h<0?null:c<0?this.at(h,n):this.at(c,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const t=-(this.origin.dot(e.normal)+e.constant)/n;return t>=0?t:null}intersectPlane(e,n){const t=this.distanceToPlane(e);return t===null?null:this.at(t,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let t,s,a,l,c,h;const d=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,v=this.origin;return d>=0?(t=(e.min.x-v.x)*d,s=(e.max.x-v.x)*d):(t=(e.max.x-v.x)*d,s=(e.min.x-v.x)*d),p>=0?(a=(e.min.y-v.y)*p,l=(e.max.y-v.y)*p):(a=(e.max.y-v.y)*p,l=(e.min.y-v.y)*p),t>l||a>s||((a>t||isNaN(t))&&(t=a),(l<s||isNaN(s))&&(s=l),m>=0?(c=(e.min.z-v.z)*m,h=(e.max.z-v.z)*m):(c=(e.max.z-v.z)*m,h=(e.min.z-v.z)*m),t>h||c>s)||((c>t||t!==t)&&(t=c),(h<s||s!==s)&&(s=h),s<0)?null:this.at(t>=0?t:s,n)}intersectsBox(e){return this.intersectBox(e,Pa)!==null}intersectTriangle(e,n,t,s,a){M1.subVectors(n,e),Qm.subVectors(t,e),T1.crossVectors(M1,Qm);let l=this.direction.dot(T1),c;if(l>0){if(s)return null;c=1}else if(l<0)c=-1,l=-l;else return null;Do.subVectors(this.origin,e);const h=c*this.direction.dot(Qm.crossVectors(Do,Qm));if(h<0)return null;const d=c*this.direction.dot(M1.cross(Do));if(d<0||h+d>l)return null;const p=-c*Do.dot(T1);return p<0?null:this.at(p/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ct{constructor(e,n,t,s,a,l,c,h,d,p,m,v,y,b,S,C){ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,t,s,a,l,c,h,d,p,m,v,y,b,S,C)}set(e,n,t,s,a,l,c,h,d,p,m,v,y,b,S,C){const E=this.elements;return E[0]=e,E[4]=n,E[8]=t,E[12]=s,E[1]=a,E[5]=l,E[9]=c,E[13]=h,E[2]=d,E[6]=p,E[10]=m,E[14]=v,E[3]=y,E[7]=b,E[11]=S,E[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ct().fromArray(this.elements)}copy(e){const n=this.elements,t=e.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],this}copyPosition(e){const n=this.elements,t=e.elements;return n[12]=t[12],n[13]=t[13],n[14]=t[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,t){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(e,n,t){return this.set(e.x,n.x,t.x,0,e.y,n.y,t.y,0,e.z,n.z,t.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,t=e.elements,s=1/iu.setFromMatrixColumn(e,0).length(),a=1/iu.setFromMatrixColumn(e,1).length(),l=1/iu.setFromMatrixColumn(e,2).length();return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n[3]=0,n[4]=t[4]*a,n[5]=t[5]*a,n[6]=t[6]*a,n[7]=0,n[8]=t[8]*l,n[9]=t[9]*l,n[10]=t[10]*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,t=e.x,s=e.y,a=e.z,l=Math.cos(t),c=Math.sin(t),h=Math.cos(s),d=Math.sin(s),p=Math.cos(a),m=Math.sin(a);if(e.order==="XYZ"){const v=l*p,y=l*m,b=c*p,S=c*m;n[0]=h*p,n[4]=-h*m,n[8]=d,n[1]=y+b*d,n[5]=v-S*d,n[9]=-c*h,n[2]=S-v*d,n[6]=b+y*d,n[10]=l*h}else if(e.order==="YXZ"){const v=h*p,y=h*m,b=d*p,S=d*m;n[0]=v+S*c,n[4]=b*c-y,n[8]=l*d,n[1]=l*m,n[5]=l*p,n[9]=-c,n[2]=y*c-b,n[6]=S+v*c,n[10]=l*h}else if(e.order==="ZXY"){const v=h*p,y=h*m,b=d*p,S=d*m;n[0]=v-S*c,n[4]=-l*m,n[8]=b+y*c,n[1]=y+b*c,n[5]=l*p,n[9]=S-v*c,n[2]=-l*d,n[6]=c,n[10]=l*h}else if(e.order==="ZYX"){const v=l*p,y=l*m,b=c*p,S=c*m;n[0]=h*p,n[4]=b*d-y,n[8]=v*d+S,n[1]=h*m,n[5]=S*d+v,n[9]=y*d-b,n[2]=-d,n[6]=c*h,n[10]=l*h}else if(e.order==="YZX"){const v=l*h,y=l*d,b=c*h,S=c*d;n[0]=h*p,n[4]=S-v*m,n[8]=b*m+y,n[1]=m,n[5]=l*p,n[9]=-c*p,n[2]=-d*p,n[6]=y*m+b,n[10]=v-S*m}else if(e.order==="XZY"){const v=l*h,y=l*d,b=c*h,S=c*d;n[0]=h*p,n[4]=-m,n[8]=d*p,n[1]=v*m+S,n[5]=l*p,n[9]=y*m-b,n[2]=b*m-y,n[6]=c*p,n[10]=S*m+v}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bq,e,_q)}lookAt(e,n,t){const s=this.elements;return Jr.subVectors(e,n),Jr.lengthSq()===0&&(Jr.z=1),Jr.normalize(),Lo.crossVectors(t,Jr),Lo.lengthSq()===0&&(Math.abs(t.z)===1?Jr.x+=1e-4:Jr.z+=1e-4,Jr.normalize(),Lo.crossVectors(t,Jr)),Lo.normalize(),eg.crossVectors(Jr,Lo),s[0]=Lo.x,s[4]=eg.x,s[8]=Jr.x,s[1]=Lo.y,s[5]=eg.y,s[9]=Jr.y,s[2]=Lo.z,s[6]=eg.z,s[10]=Jr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const t=e.elements,s=n.elements,a=this.elements,l=t[0],c=t[4],h=t[8],d=t[12],p=t[1],m=t[5],v=t[9],y=t[13],b=t[2],S=t[6],C=t[10],E=t[14],w=t[3],x=t[7],M=t[11],P=t[15],I=s[0],D=s[4],A=s[8],N=s[12],T=s[1],L=s[5],V=s[9],R=s[13],B=s[2],F=s[6],U=s[10],q=s[14],Y=s[3],ne=s[7],de=s[11],ve=s[15];return a[0]=l*I+c*T+h*B+d*Y,a[4]=l*D+c*L+h*F+d*ne,a[8]=l*A+c*V+h*U+d*de,a[12]=l*N+c*R+h*q+d*ve,a[1]=p*I+m*T+v*B+y*Y,a[5]=p*D+m*L+v*F+y*ne,a[9]=p*A+m*V+v*U+y*de,a[13]=p*N+m*R+v*q+y*ve,a[2]=b*I+S*T+C*B+E*Y,a[6]=b*D+S*L+C*F+E*ne,a[10]=b*A+S*V+C*U+E*de,a[14]=b*N+S*R+C*q+E*ve,a[3]=w*I+x*T+M*B+P*Y,a[7]=w*D+x*L+M*F+P*ne,a[11]=w*A+x*V+M*U+P*de,a[15]=w*N+x*R+M*q+P*ve,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],t=e[4],s=e[8],a=e[12],l=e[1],c=e[5],h=e[9],d=e[13],p=e[2],m=e[6],v=e[10],y=e[14],b=e[3],S=e[7],C=e[11],E=e[15];return b*(+a*h*m-s*d*m-a*c*v+t*d*v+s*c*y-t*h*y)+S*(+n*h*y-n*d*v+a*l*v-s*l*y+s*d*p-a*h*p)+C*(+n*d*m-n*c*y-a*l*m+t*l*y+a*c*p-t*d*p)+E*(-s*c*p-n*h*m+n*c*v+s*l*m-t*l*v+t*h*p)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,t){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=t),this}invert(){const e=this.elements,n=e[0],t=e[1],s=e[2],a=e[3],l=e[4],c=e[5],h=e[6],d=e[7],p=e[8],m=e[9],v=e[10],y=e[11],b=e[12],S=e[13],C=e[14],E=e[15],w=m*C*d-S*v*d+S*h*y-c*C*y-m*h*E+c*v*E,x=b*v*d-p*C*d-b*h*y+l*C*y+p*h*E-l*v*E,M=p*S*d-b*m*d+b*c*y-l*S*y-p*c*E+l*m*E,P=b*m*h-p*S*h-b*c*v+l*S*v+p*c*C-l*m*C,I=n*w+t*x+s*M+a*P;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/I;return e[0]=w*D,e[1]=(S*v*a-m*C*a-S*s*y+t*C*y+m*s*E-t*v*E)*D,e[2]=(c*C*a-S*h*a+S*s*d-t*C*d-c*s*E+t*h*E)*D,e[3]=(m*h*a-c*v*a-m*s*d+t*v*d+c*s*y-t*h*y)*D,e[4]=x*D,e[5]=(p*C*a-b*v*a+b*s*y-n*C*y-p*s*E+n*v*E)*D,e[6]=(b*h*a-l*C*a-b*s*d+n*C*d+l*s*E-n*h*E)*D,e[7]=(l*v*a-p*h*a+p*s*d-n*v*d-l*s*y+n*h*y)*D,e[8]=M*D,e[9]=(b*m*a-p*S*a-b*t*y+n*S*y+p*t*E-n*m*E)*D,e[10]=(l*S*a-b*c*a+b*t*d-n*S*d-l*t*E+n*c*E)*D,e[11]=(p*c*a-l*m*a-p*t*d+n*m*d+l*t*y-n*c*y)*D,e[12]=P*D,e[13]=(p*S*s-b*m*s+b*t*v-n*S*v-p*t*C+n*m*C)*D,e[14]=(b*c*s-l*S*s-b*t*h+n*S*h+l*t*C-n*c*C)*D,e[15]=(l*m*s-p*c*s+p*t*h-n*m*h-l*t*v+n*c*v)*D,this}scale(e){const n=this.elements,t=e.x,s=e.y,a=e.z;return n[0]*=t,n[4]*=s,n[8]*=a,n[1]*=t,n[5]*=s,n[9]*=a,n[2]*=t,n[6]*=s,n[10]*=a,n[3]*=t,n[7]*=s,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],t=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,t,s))}makeTranslation(e,n,t){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,t,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),t=Math.sin(e);return this.set(1,0,0,0,0,n,-t,0,0,t,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),t=Math.sin(e);return this.set(n,0,t,0,0,1,0,0,-t,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),t=Math.sin(e);return this.set(n,-t,0,0,t,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const t=Math.cos(n),s=Math.sin(n),a=1-t,l=e.x,c=e.y,h=e.z,d=a*l,p=a*c;return this.set(d*l+t,d*c-s*h,d*h+s*c,0,d*c+s*h,p*c+t,p*h-s*l,0,d*h-s*c,p*h+s*l,a*h*h+t,0,0,0,0,1),this}makeScale(e,n,t){return this.set(e,0,0,0,0,n,0,0,0,0,t,0,0,0,0,1),this}makeShear(e,n,t,s,a,l){return this.set(1,t,a,0,e,1,l,0,n,s,1,0,0,0,0,1),this}compose(e,n,t){const s=this.elements,a=n._x,l=n._y,c=n._z,h=n._w,d=a+a,p=l+l,m=c+c,v=a*d,y=a*p,b=a*m,S=l*p,C=l*m,E=c*m,w=h*d,x=h*p,M=h*m,P=t.x,I=t.y,D=t.z;return s[0]=(1-(S+E))*P,s[1]=(y+M)*P,s[2]=(b-x)*P,s[3]=0,s[4]=(y-M)*I,s[5]=(1-(v+E))*I,s[6]=(C+w)*I,s[7]=0,s[8]=(b+x)*D,s[9]=(C-w)*D,s[10]=(1-(v+S))*D,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,t){const s=this.elements;let a=iu.set(s[0],s[1],s[2]).length();const l=iu.set(s[4],s[5],s[6]).length(),c=iu.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],Vs.copy(this);const d=1/a,p=1/l,m=1/c;return Vs.elements[0]*=d,Vs.elements[1]*=d,Vs.elements[2]*=d,Vs.elements[4]*=p,Vs.elements[5]*=p,Vs.elements[6]*=p,Vs.elements[8]*=m,Vs.elements[9]*=m,Vs.elements[10]*=m,n.setFromRotationMatrix(Vs),t.x=a,t.y=l,t.z=c,this}makePerspective(e,n,t,s,a,l,c=oa){const h=this.elements,d=2*a/(n-e),p=2*a/(t-s),m=(n+e)/(n-e),v=(t+s)/(t-s);let y,b;if(c===oa)y=-(l+a)/(l-a),b=-2*l*a/(l-a);else if(c===Jf)y=-l/(l-a),b=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return h[0]=d,h[4]=0,h[8]=m,h[12]=0,h[1]=0,h[5]=p,h[9]=v,h[13]=0,h[2]=0,h[6]=0,h[10]=y,h[14]=b,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,n,t,s,a,l,c=oa){const h=this.elements,d=1/(n-e),p=1/(t-s),m=1/(l-a),v=(n+e)*d,y=(t+s)*p;let b,S;if(c===oa)b=(l+a)*m,S=-2*m;else if(c===Jf)b=a*m,S=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return h[0]=2*d,h[4]=0,h[8]=0,h[12]=-v,h[1]=0,h[5]=2*p,h[9]=0,h[13]=-y,h[2]=0,h[6]=0,h[10]=S,h[14]=-b,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const n=this.elements,t=e.elements;for(let s=0;s<16;s++)if(n[s]!==t[s])return!1;return!0}fromArray(e,n=0){for(let t=0;t<16;t++)this.elements[t]=e[t+n];return this}toArray(e=[],n=0){const t=this.elements;return e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3],e[n+4]=t[4],e[n+5]=t[5],e[n+6]=t[6],e[n+7]=t[7],e[n+8]=t[8],e[n+9]=t[9],e[n+10]=t[10],e[n+11]=t[11],e[n+12]=t[12],e[n+13]=t[13],e[n+14]=t[14],e[n+15]=t[15],e}}const iu=new Q,Vs=new ct,bq=new Q(0,0,0),_q=new Q(1,1,1),Lo=new Q,eg=new Q,Jr=new Q,qM=new ct,XM=new wi;class Ai{constructor(e=0,n=0,t=0,s=Ai.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=t,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,t,s=this._order){return this._x=e,this._y=n,this._z=t,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,t=!0){const s=e.elements,a=s[0],l=s[4],c=s[8],h=s[1],d=s[5],p=s[9],m=s[2],v=s[6],y=s[10];switch(n){case"XYZ":this._y=Math.asin(ui(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-ui(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(c,y),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-m,a),this._z=0);break;case"ZXY":this._x=Math.asin(ui(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(h,a));break;case"ZYX":this._y=Math.asin(-ui(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(ui(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-m,a)):(this._x=0,this._y=Math.atan2(c,y));break;case"XZY":this._z=Math.asin(-ui(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,t===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,t){return qM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(qM,n,t)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return XM.setFromEuler(this),this.setFromQuaternion(XM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ai.DEFAULT_ORDER="XYZ";class uv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let xq=0;const YM=new Q,ru=new wi,Ia=new ct,tg=new Q,dd=new Q,wq=new Q,Cq=new wi,JM=new Q(1,0,0),ZM=new Q(0,1,0),QM=new Q(0,0,1),eT={type:"added"},Sq={type:"removed"},su={type:"childadded",child:null},k1={type:"childremoved",child:null};class _n extends ma{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xq++}),this.uuid=os(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_n.DEFAULT_UP.clone();const e=new Q,n=new Ai,t=new wi,s=new Q(1,1,1);function a(){t.setFromEuler(n,!1)}function l(){n.setFromQuaternion(t,void 0,!1)}n._onChange(a),t._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ct},normalMatrix:{value:new Qt}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=_n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new uv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return ru.setFromAxisAngle(e,n),this.quaternion.multiply(ru),this}rotateOnWorldAxis(e,n){return ru.setFromAxisAngle(e,n),this.quaternion.premultiply(ru),this}rotateX(e){return this.rotateOnAxis(JM,e)}rotateY(e){return this.rotateOnAxis(ZM,e)}rotateZ(e){return this.rotateOnAxis(QM,e)}translateOnAxis(e,n){return YM.copy(e).applyQuaternion(this.quaternion),this.position.add(YM.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(JM,e)}translateY(e){return this.translateOnAxis(ZM,e)}translateZ(e){return this.translateOnAxis(QM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ia.copy(this.matrixWorld).invert())}lookAt(e,n,t){e.isVector3?tg.copy(e):tg.set(e,n,t);const s=this.parent;this.updateWorldMatrix(!0,!1),dd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ia.lookAt(dd,tg,this.up):Ia.lookAt(tg,dd,this.up),this.quaternion.setFromRotationMatrix(Ia),s&&(Ia.extractRotation(s.matrixWorld),ru.setFromRotationMatrix(Ia),this.quaternion.premultiply(ru.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(eT),su.child=e,this.dispatchEvent(su),su.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Sq),k1.child=e,this.dispatchEvent(k1),k1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ia.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ia.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ia),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(eT),su.child=e,this.dispatchEvent(su),su.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let t=0,s=this.children.length;t<s;t++){const l=this.children[t].getObjectByProperty(e,n);if(l!==void 0)return l}}getObjectsByProperty(e,n,t=[]){this[e]===n&&t.push(this);const s=this.children;for(let a=0,l=s.length;a<l;a++)s[a].getObjectsByProperty(e,n,t);return t}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dd,e,wq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dd,Cq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let t=0,s=n.length;t<s;t++)n[t].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let t=0,s=n.length;t<s;t++)n[t].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let t=0,s=n.length;t<s;t++){const a=n[t];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const t=this.parent;if(e===!0&&t!==null&&t.matrixWorldAutoUpdate===!0&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const s=this.children;for(let a=0,l=s.length;a<l;a++){const c=s[a];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",t={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function a(c,h){return c[h.uuid]===void 0&&(c[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const h=c.shapes;if(Array.isArray(h))for(let d=0,p=h.length;d<p;d++){const m=h[d];a(e.shapes,m)}else a(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let h=0,d=this.material.length;h<d;h++)c.push(a(e.materials,this.material[h]));s.material=c}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){const h=this.animations[c];s.animations.push(a(e.animations,h))}}if(n){const c=l(e.geometries),h=l(e.materials),d=l(e.textures),p=l(e.images),m=l(e.shapes),v=l(e.skeletons),y=l(e.animations),b=l(e.nodes);c.length>0&&(t.geometries=c),h.length>0&&(t.materials=h),d.length>0&&(t.textures=d),p.length>0&&(t.images=p),m.length>0&&(t.shapes=m),v.length>0&&(t.skeletons=v),y.length>0&&(t.animations=y),b.length>0&&(t.nodes=b)}return t.object=s,t;function l(c){const h=[];for(const d in c){const p=c[d];delete p.metadata,h.push(p)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let t=0;t<e.children.length;t++){const s=e.children[t];this.add(s.clone())}return this}}_n.DEFAULT_UP=new Q(0,1,0);_n.DEFAULT_MATRIX_AUTO_UPDATE=!0;_n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Fs=new Q,Na=new Q,A1=new Q,Ra=new Q,au=new Q,ou=new Q,tT=new Q,P1=new Q,I1=new Q,N1=new Q;class Br{constructor(e=new Q,n=new Q,t=new Q){this.a=e,this.b=n,this.c=t}static getNormal(e,n,t,s){s.subVectors(t,n),Fs.subVectors(e,n),s.cross(Fs);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,n,t,s,a){Fs.subVectors(s,n),Na.subVectors(t,n),A1.subVectors(e,n);const l=Fs.dot(Fs),c=Fs.dot(Na),h=Fs.dot(A1),d=Na.dot(Na),p=Na.dot(A1),m=l*d-c*c;if(m===0)return a.set(0,0,0),null;const v=1/m,y=(d*h-c*p)*v,b=(l*p-c*h)*v;return a.set(1-y-b,b,y)}static containsPoint(e,n,t,s){return this.getBarycoord(e,n,t,s,Ra)===null?!1:Ra.x>=0&&Ra.y>=0&&Ra.x+Ra.y<=1}static getInterpolation(e,n,t,s,a,l,c,h){return this.getBarycoord(e,n,t,s,Ra)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(a,Ra.x),h.addScaledVector(l,Ra.y),h.addScaledVector(c,Ra.z),h)}static isFrontFacing(e,n,t,s){return Fs.subVectors(t,n),Na.subVectors(e,n),Fs.cross(Na).dot(s)<0}set(e,n,t){return this.a.copy(e),this.b.copy(n),this.c.copy(t),this}setFromPointsAndIndices(e,n,t,s){return this.a.copy(e[n]),this.b.copy(e[t]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,t,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,t),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Fs.subVectors(this.c,this.b),Na.subVectors(this.a,this.b),Fs.cross(Na).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Br.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Br.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,t,s,a){return Br.getInterpolation(e,this.a,this.b,this.c,n,t,s,a)}containsPoint(e){return Br.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Br.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const t=this.a,s=this.b,a=this.c;let l,c;au.subVectors(s,t),ou.subVectors(a,t),P1.subVectors(e,t);const h=au.dot(P1),d=ou.dot(P1);if(h<=0&&d<=0)return n.copy(t);I1.subVectors(e,s);const p=au.dot(I1),m=ou.dot(I1);if(p>=0&&m<=p)return n.copy(s);const v=h*m-p*d;if(v<=0&&h>=0&&p<=0)return l=h/(h-p),n.copy(t).addScaledVector(au,l);N1.subVectors(e,a);const y=au.dot(N1),b=ou.dot(N1);if(b>=0&&y<=b)return n.copy(a);const S=y*d-h*b;if(S<=0&&d>=0&&b<=0)return c=d/(d-b),n.copy(t).addScaledVector(ou,c);const C=p*b-y*m;if(C<=0&&m-p>=0&&y-b>=0)return tT.subVectors(a,s),c=(m-p)/(m-p+(y-b)),n.copy(s).addScaledVector(tT,c);const E=1/(C+S+v);return l=S*E,c=v*E,n.copy(t).addScaledVector(au,l).addScaledVector(ou,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const TI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bo={h:0,s:0,l:0},ng={h:0,s:0,l:0};function R1(i,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(e-i)*6*n:n<1/2?e:n<2/3?i+(e-i)*6*(2/3-n):i}class Qe{constructor(e,n,t){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,t)}set(e,n,t){if(n===void 0&&t===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,n,t);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ts){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Rn.toWorkingColorSpace(this,n),this}setRGB(e,n,t,s=Rn.workingColorSpace){return this.r=e,this.g=n,this.b=t,Rn.toWorkingColorSpace(this,s),this}setHSL(e,n,t,s=Rn.workingColorSpace){if(e=Xx(e,1),n=ui(n,0,1),t=ui(t,0,1),n===0)this.r=this.g=this.b=t;else{const a=t<=.5?t*(1+n):t+n-t*n,l=2*t-a;this.r=R1(l,a,e+1/3),this.g=R1(l,a,e),this.b=R1(l,a,e-1/3)}return Rn.toWorkingColorSpace(this,s),this}setStyle(e,n=ts){function t(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const l=s[1],c=s[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return t(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return t(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return t(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(l===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ts){const t=TI[e.toLowerCase()];return t!==void 0?this.setHex(t,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hu(e.r),this.g=Hu(e.g),this.b=Hu(e.b),this}copyLinearToSRGB(e){return this.r=_1(e.r),this.g=_1(e.g),this.b=_1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ts){return Rn.fromWorkingColorSpace(Yi.copy(this),e),Math.round(ui(Yi.r*255,0,255))*65536+Math.round(ui(Yi.g*255,0,255))*256+Math.round(ui(Yi.b*255,0,255))}getHexString(e=ts){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Rn.workingColorSpace){Rn.fromWorkingColorSpace(Yi.copy(this),n);const t=Yi.r,s=Yi.g,a=Yi.b,l=Math.max(t,s,a),c=Math.min(t,s,a);let h,d;const p=(c+l)/2;if(c===l)h=0,d=0;else{const m=l-c;switch(d=p<=.5?m/(l+c):m/(2-l-c),l){case t:h=(s-a)/m+(s<a?6:0);break;case s:h=(a-t)/m+2;break;case a:h=(t-s)/m+4;break}h/=6}return e.h=h,e.s=d,e.l=p,e}getRGB(e,n=Rn.workingColorSpace){return Rn.fromWorkingColorSpace(Yi.copy(this),n),e.r=Yi.r,e.g=Yi.g,e.b=Yi.b,e}getStyle(e=ts){Rn.fromWorkingColorSpace(Yi.copy(this),e);const n=Yi.r,t=Yi.g,s=Yi.b;return e!==ts?`color(${e} ${n.toFixed(3)} ${t.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(t*255)},${Math.round(s*255)})`}offsetHSL(e,n,t){return this.getHSL(Bo),this.setHSL(Bo.h+e,Bo.s+n,Bo.l+t)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,t){return this.r=e.r+(n.r-e.r)*t,this.g=e.g+(n.g-e.g)*t,this.b=e.b+(n.b-e.b)*t,this}lerpHSL(e,n){this.getHSL(Bo),e.getHSL(ng);const t=kf(Bo.h,ng.h,n),s=kf(Bo.s,ng.s,n),a=kf(Bo.l,ng.l,n);return this.setHSL(t,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,t=this.g,s=this.b,a=e.elements;return this.r=a[0]*n+a[3]*t+a[6]*s,this.g=a[1]*n+a[4]*t+a[7]*s,this.b=a[2]*n+a[5]*t+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Yi=new Qe;Qe.NAMES=TI;let Eq=0;class tr extends ma{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Eq++}),this.uuid=os(),this.name="",this.type="Material",this.blending=cc,this.side=eo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=P0,this.blendDst=I0,this.blendEquation=Yo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Qe(0,0,0),this.blendAlpha=0,this.depthFunc=Gf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=N_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xl,this.stencilZFail=Xl,this.stencilZPass=Xl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const t=e[n];if(t===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(t):s&&s.isVector3&&t&&t.isVector3?s.copy(t):this[n]=t}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const t={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(t.dispersion=this.dispersion),this.iridescence!==void 0&&(t.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(t.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(t.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(t.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(t.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(t.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(t.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(t.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(e).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapRotation!==void 0&&(t.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==cc&&(t.blending=this.blending),this.side!==eo&&(t.side=this.side),this.vertexColors===!0&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=!0),this.blendSrc!==P0&&(t.blendSrc=this.blendSrc),this.blendDst!==I0&&(t.blendDst=this.blendDst),this.blendEquation!==Yo&&(t.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(t.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(t.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(t.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(t.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(t.blendAlpha=this.blendAlpha),this.depthFunc!==Gf&&(t.depthFunc=this.depthFunc),this.depthTest===!1&&(t.depthTest=this.depthTest),this.depthWrite===!1&&(t.depthWrite=this.depthWrite),this.colorWrite===!1&&(t.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(t.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==N_&&(t.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(t.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(t.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Xl&&(t.stencilFail=this.stencilFail),this.stencilZFail!==Xl&&(t.stencilZFail=this.stencilZFail),this.stencilZPass!==Xl&&(t.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(t.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaHash===!0&&(t.alphaHash=!0),this.alphaToCoverage===!0&&(t.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=!0),this.forceSinglePass===!0&&(t.forceSinglePass=!0),this.wireframe===!0&&(t.wireframe=!0),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),Object.keys(this.userData).length>0&&(t.userData=this.userData);function s(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}if(n){const a=s(e.textures),l=s(e.images);a.length>0&&(t.textures=a),l.length>0&&(t.images=l)}return t}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let t=null;if(n!==null){const s=n.length;t=new Array(s);for(let a=0;a!==s;++a)t[a]=n[a].clone()}return this.clippingPlanes=t,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ga extends tr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.combine=bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $a=Mq();function Mq(){const i=new ArrayBuffer(4),e=new Float32Array(i),n=new Uint32Array(i),t=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const d=h-127;d<-27?(t[h]=0,t[h|256]=32768,s[h]=24,s[h|256]=24):d<-14?(t[h]=1024>>-d-14,t[h|256]=1024>>-d-14|32768,s[h]=-d-1,s[h|256]=-d-1):d<=15?(t[h]=d+15<<10,t[h|256]=d+15<<10|32768,s[h]=13,s[h|256]=13):d<128?(t[h]=31744,t[h|256]=64512,s[h]=24,s[h|256]=24):(t[h]=31744,t[h|256]=64512,s[h]=13,s[h|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let h=1;h<1024;++h){let d=h<<13,p=0;for(;!(d&8388608);)d<<=1,p-=8388608;d&=-8388609,p+=947912704,a[h]=d|p}for(let h=1024;h<2048;++h)a[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(c[h]=1024);return{floatView:e,uint32View:n,baseTable:t,shiftTable:s,mantissaTable:a,exponentTable:l,offsetTable:c}}function kr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=ui(i,-65504,65504),$a.floatView[0]=i;const e=$a.uint32View[0],n=e>>23&511;return $a.baseTable[n]+((e&8388607)>>$a.shiftTable[n])}function bf(i){const e=i>>10;return $a.uint32View[0]=$a.mantissaTable[$a.offsetTable[e]+(i&1023)]+$a.exponentTable[e],$a.floatView[0]}const Tq={toHalfFloat:kr,fromHalfFloat:bf},_i=new Q,ig=new Ge;class wn{constructor(e,n,t=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=t,this.usage=Yf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=_s,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return SI("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,t){e*=this.itemSize,t*=n.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=n.array[t+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,t=this.count;n<t;n++)ig.fromBufferAttribute(this,n),ig.applyMatrix3(e),this.setXY(n,ig.x,ig.y);else if(this.itemSize===3)for(let n=0,t=this.count;n<t;n++)_i.fromBufferAttribute(this,n),_i.applyMatrix3(e),this.setXYZ(n,_i.x,_i.y,_i.z);return this}applyMatrix4(e){for(let n=0,t=this.count;n<t;n++)_i.fromBufferAttribute(this,n),_i.applyMatrix4(e),this.setXYZ(n,_i.x,_i.y,_i.z);return this}applyNormalMatrix(e){for(let n=0,t=this.count;n<t;n++)_i.fromBufferAttribute(this,n),_i.applyNormalMatrix(e),this.setXYZ(n,_i.x,_i.y,_i.z);return this}transformDirection(e){for(let n=0,t=this.count;n<t;n++)_i.fromBufferAttribute(this,n),_i.transformDirection(e),this.setXYZ(n,_i.x,_i.y,_i.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let t=this.array[e*this.itemSize+n];return this.normalized&&(t=pr(t,this.array)),t}setComponent(e,n,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+n]=t,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=pr(n,this.array)),n}setX(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=pr(n,this.array)),n}setY(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=pr(n,this.array)),n}setZ(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=pr(n,this.array)),n}setW(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,t){return e*=this.itemSize,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array)),this.array[e+0]=n,this.array[e+1]=t,this}setXYZ(e,n,t,s){return e*=this.itemSize,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array),s=nn(s,this.array)),this.array[e+0]=n,this.array[e+1]=t,this.array[e+2]=s,this}setXYZW(e,n,t,s,a){return e*=this.itemSize,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array),s=nn(s,this.array),a=nn(a,this.array)),this.array[e+0]=n,this.array[e+1]=t,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Yf&&(e.usage=this.usage),e}}class kq extends wn{constructor(e,n,t){super(new Int8Array(e),n,t)}}class Aq extends wn{constructor(e,n,t){super(new Uint8Array(e),n,t)}}class Pq extends wn{constructor(e,n,t){super(new Uint8ClampedArray(e),n,t)}}class Iq extends wn{constructor(e,n,t){super(new Int16Array(e),n,t)}}class hv extends wn{constructor(e,n,t){super(new Uint16Array(e),n,t)}}class Nq extends wn{constructor(e,n,t){super(new Int32Array(e),n,t)}}class Jx extends wn{constructor(e,n,t){super(new Uint32Array(e),n,t)}}class Rq extends wn{constructor(e,n,t){super(new Uint16Array(e),n,t),this.isFloat16BufferAttribute=!0}getX(e){let n=bf(this.array[e*this.itemSize]);return this.normalized&&(n=pr(n,this.array)),n}setX(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize]=kr(n),this}getY(e){let n=bf(this.array[e*this.itemSize+1]);return this.normalized&&(n=pr(n,this.array)),n}setY(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize+1]=kr(n),this}getZ(e){let n=bf(this.array[e*this.itemSize+2]);return this.normalized&&(n=pr(n,this.array)),n}setZ(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize+2]=kr(n),this}getW(e){let n=bf(this.array[e*this.itemSize+3]);return this.normalized&&(n=pr(n,this.array)),n}setW(e,n){return this.normalized&&(n=nn(n,this.array)),this.array[e*this.itemSize+3]=kr(n),this}setXY(e,n,t){return e*=this.itemSize,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array)),this.array[e+0]=kr(n),this.array[e+1]=kr(t),this}setXYZ(e,n,t,s){return e*=this.itemSize,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array),s=nn(s,this.array)),this.array[e+0]=kr(n),this.array[e+1]=kr(t),this.array[e+2]=kr(s),this}setXYZW(e,n,t,s,a){return e*=this.itemSize,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array),s=nn(s,this.array),a=nn(a,this.array)),this.array[e+0]=kr(n),this.array[e+1]=kr(t),this.array[e+2]=kr(s),this.array[e+3]=kr(a),this}}class yt extends wn{constructor(e,n,t){super(new Float32Array(e),n,t)}}let Dq=0;const gs=new ct,D1=new _n,lu=new Q,Zr=new Gi,fd=new Gi,Oi=new Q;class Xt extends ma{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Dq++}),this.uuid=os(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wI(e)?Jx:hv)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,t=0){this.groups.push({start:e,count:n,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const a=new Qt().getNormalMatrix(e);t.applyNormalMatrix(a),t.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return gs.makeRotationFromQuaternion(e),this.applyMatrix4(gs),this}rotateX(e){return gs.makeRotationX(e),this.applyMatrix4(gs),this}rotateY(e){return gs.makeRotationY(e),this.applyMatrix4(gs),this}rotateZ(e){return gs.makeRotationZ(e),this.applyMatrix4(gs),this}translate(e,n,t){return gs.makeTranslation(e,n,t),this.applyMatrix4(gs),this}scale(e,n,t){return gs.makeScale(e,n,t),this.applyMatrix4(gs),this}lookAt(e){return D1.lookAt(e),D1.updateMatrix(),this.applyMatrix4(D1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lu).negate(),this.translate(lu.x,lu.y,lu.z),this}setFromPoints(e){const n=[];for(let t=0,s=e.length;t<s;t++){const a=e[t];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new yt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let t=0,s=n.length;t<s;t++){const a=n[t];Zr.setFromBufferAttribute(a),this.morphTargetsRelative?(Oi.addVectors(this.boundingBox.min,Zr.min),this.boundingBox.expandByPoint(Oi),Oi.addVectors(this.boundingBox.max,Zr.max),this.boundingBox.expandByPoint(Oi)):(this.boundingBox.expandByPoint(Zr.min),this.boundingBox.expandByPoint(Zr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Wi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Q,1/0);return}if(e){const t=this.boundingSphere.center;if(Zr.setFromBufferAttribute(e),n)for(let a=0,l=n.length;a<l;a++){const c=n[a];fd.setFromBufferAttribute(c),this.morphTargetsRelative?(Oi.addVectors(Zr.min,fd.min),Zr.expandByPoint(Oi),Oi.addVectors(Zr.max,fd.max),Zr.expandByPoint(Oi)):(Zr.expandByPoint(fd.min),Zr.expandByPoint(fd.max))}Zr.getCenter(t);let s=0;for(let a=0,l=e.count;a<l;a++)Oi.fromBufferAttribute(e,a),s=Math.max(s,t.distanceToSquared(Oi));if(n)for(let a=0,l=n.length;a<l;a++){const c=n[a],h=this.morphTargetsRelative;for(let d=0,p=c.count;d<p;d++)Oi.fromBufferAttribute(c,d),h&&(lu.fromBufferAttribute(e,d),Oi.add(lu)),s=Math.max(s,t.distanceToSquared(Oi))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=n.position,s=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wn(new Float32Array(4*t.count),4));const l=this.getAttribute("tangent"),c=[],h=[];for(let A=0;A<t.count;A++)c[A]=new Q,h[A]=new Q;const d=new Q,p=new Q,m=new Q,v=new Ge,y=new Ge,b=new Ge,S=new Q,C=new Q;function E(A,N,T){d.fromBufferAttribute(t,A),p.fromBufferAttribute(t,N),m.fromBufferAttribute(t,T),v.fromBufferAttribute(a,A),y.fromBufferAttribute(a,N),b.fromBufferAttribute(a,T),p.sub(d),m.sub(d),y.sub(v),b.sub(v);const L=1/(y.x*b.y-b.x*y.y);isFinite(L)&&(S.copy(p).multiplyScalar(b.y).addScaledVector(m,-y.y).multiplyScalar(L),C.copy(m).multiplyScalar(y.x).addScaledVector(p,-b.x).multiplyScalar(L),c[A].add(S),c[N].add(S),c[T].add(S),h[A].add(C),h[N].add(C),h[T].add(C))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let A=0,N=w.length;A<N;++A){const T=w[A],L=T.start,V=T.count;for(let R=L,B=L+V;R<B;R+=3)E(e.getX(R+0),e.getX(R+1),e.getX(R+2))}const x=new Q,M=new Q,P=new Q,I=new Q;function D(A){P.fromBufferAttribute(s,A),I.copy(P);const N=c[A];x.copy(N),x.sub(P.multiplyScalar(P.dot(N))).normalize(),M.crossVectors(I,N);const L=M.dot(h[A])<0?-1:1;l.setXYZW(A,x.x,x.y,x.z,L)}for(let A=0,N=w.length;A<N;++A){const T=w[A],L=T.start,V=T.count;for(let R=L,B=L+V;R<B;R+=3)D(e.getX(R+0)),D(e.getX(R+1)),D(e.getX(R+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new wn(new Float32Array(n.count*3),3),this.setAttribute("normal",t);else for(let v=0,y=t.count;v<y;v++)t.setXYZ(v,0,0,0);const s=new Q,a=new Q,l=new Q,c=new Q,h=new Q,d=new Q,p=new Q,m=new Q;if(e)for(let v=0,y=e.count;v<y;v+=3){const b=e.getX(v+0),S=e.getX(v+1),C=e.getX(v+2);s.fromBufferAttribute(n,b),a.fromBufferAttribute(n,S),l.fromBufferAttribute(n,C),p.subVectors(l,a),m.subVectors(s,a),p.cross(m),c.fromBufferAttribute(t,b),h.fromBufferAttribute(t,S),d.fromBufferAttribute(t,C),c.add(p),h.add(p),d.add(p),t.setXYZ(b,c.x,c.y,c.z),t.setXYZ(S,h.x,h.y,h.z),t.setXYZ(C,d.x,d.y,d.z)}else for(let v=0,y=n.count;v<y;v+=3)s.fromBufferAttribute(n,v+0),a.fromBufferAttribute(n,v+1),l.fromBufferAttribute(n,v+2),p.subVectors(l,a),m.subVectors(s,a),p.cross(m),t.setXYZ(v+0,p.x,p.y,p.z),t.setXYZ(v+1,p.x,p.y,p.z),t.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),t.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,t=e.count;n<t;n++)Oi.fromBufferAttribute(e,n),Oi.normalize(),e.setXYZ(n,Oi.x,Oi.y,Oi.z)}toNonIndexed(){function e(c,h){const d=c.array,p=c.itemSize,m=c.normalized,v=new d.constructor(h.length*p);let y=0,b=0;for(let S=0,C=h.length;S<C;S++){c.isInterleavedBufferAttribute?y=h[S]*c.data.stride+c.offset:y=h[S]*p;for(let E=0;E<p;E++)v[b++]=d[y++]}return new wn(v,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Xt,t=this.index.array,s=this.attributes;for(const c in s){const h=s[c],d=e(h,t);n.setAttribute(c,d)}const a=this.morphAttributes;for(const c in a){const h=[],d=a[c];for(let p=0,m=d.length;p<m;p++){const v=d[p],y=e(v,t);h.push(y)}n.morphAttributes[c]=h}n.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,h=l.length;c<h;c++){const d=l[c];n.addGroup(d.start,d.count,d.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const t=this.attributes;for(const h in t){const d=t[h];e.data.attributes[h]=d.toJSON(e.data)}const s={};let a=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],p=[];for(let m=0,v=d.length;m<v;m++){const y=d[m];p.push(y.toJSON(e.data))}p.length>0&&(s[h]=p,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const t=e.index;t!==null&&this.setIndex(t.clone(n));const s=e.attributes;for(const d in s){const p=s[d];this.setAttribute(d,p.clone(n))}const a=e.morphAttributes;for(const d in a){const p=[],m=a[d];for(let v=0,y=m.length;v<y;v++)p.push(m[v].clone(n));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let d=0,p=l.length;d<p;d++){const m=l[d];this.addGroup(m.start,m.count,m.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const nT=new ct,Ll=new kc,rg=new Wi,iT=new Q,cu=new Q,uu=new Q,hu=new Q,L1=new Q,sg=new Q,ag=new Ge,og=new Ge,lg=new Ge,rT=new Q,sT=new Q,aT=new Q,cg=new Q,ug=new Q;class Fn extends _n{constructor(e=new Xt,n=new ga){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,t=Object.keys(n);if(t.length>0){const s=n[t[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const c=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}getVertexPosition(e,n){const t=this.geometry,s=t.attributes.position,a=t.morphAttributes.position,l=t.morphTargetsRelative;n.fromBufferAttribute(s,e);const c=this.morphTargetInfluences;if(a&&c){sg.set(0,0,0);for(let h=0,d=a.length;h<d;h++){const p=c[h],m=a[h];p!==0&&(L1.fromBufferAttribute(m,e),l?sg.addScaledVector(L1,p):sg.addScaledVector(L1.sub(n),p))}n.add(sg)}return n}raycast(e,n){const t=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),rg.copy(t.boundingSphere),rg.applyMatrix4(a),Ll.copy(e.ray).recast(e.near),!(rg.containsPoint(Ll.origin)===!1&&(Ll.intersectSphere(rg,iT)===null||Ll.origin.distanceToSquared(iT)>(e.far-e.near)**2))&&(nT.copy(a).invert(),Ll.copy(e.ray).applyMatrix4(nT),!(t.boundingBox!==null&&Ll.intersectsBox(t.boundingBox)===!1)&&this._computeIntersections(e,n,Ll)))}_computeIntersections(e,n,t){let s;const a=this.geometry,l=this.material,c=a.index,h=a.attributes.position,d=a.attributes.uv,p=a.attributes.uv1,m=a.attributes.normal,v=a.groups,y=a.drawRange;if(c!==null)if(Array.isArray(l))for(let b=0,S=v.length;b<S;b++){const C=v[b],E=l[C.materialIndex],w=Math.max(C.start,y.start),x=Math.min(c.count,Math.min(C.start+C.count,y.start+y.count));for(let M=w,P=x;M<P;M+=3){const I=c.getX(M),D=c.getX(M+1),A=c.getX(M+2);s=hg(this,E,e,t,d,p,m,I,D,A),s&&(s.faceIndex=Math.floor(M/3),s.face.materialIndex=C.materialIndex,n.push(s))}}else{const b=Math.max(0,y.start),S=Math.min(c.count,y.start+y.count);for(let C=b,E=S;C<E;C+=3){const w=c.getX(C),x=c.getX(C+1),M=c.getX(C+2);s=hg(this,l,e,t,d,p,m,w,x,M),s&&(s.faceIndex=Math.floor(C/3),n.push(s))}}else if(h!==void 0)if(Array.isArray(l))for(let b=0,S=v.length;b<S;b++){const C=v[b],E=l[C.materialIndex],w=Math.max(C.start,y.start),x=Math.min(h.count,Math.min(C.start+C.count,y.start+y.count));for(let M=w,P=x;M<P;M+=3){const I=M,D=M+1,A=M+2;s=hg(this,E,e,t,d,p,m,I,D,A),s&&(s.faceIndex=Math.floor(M/3),s.face.materialIndex=C.materialIndex,n.push(s))}}else{const b=Math.max(0,y.start),S=Math.min(h.count,y.start+y.count);for(let C=b,E=S;C<E;C+=3){const w=C,x=C+1,M=C+2;s=hg(this,l,e,t,d,p,m,w,x,M),s&&(s.faceIndex=Math.floor(C/3),n.push(s))}}}}function Lq(i,e,n,t,s,a,l,c){let h;if(e.side===er?h=t.intersectTriangle(l,a,s,!0,c):h=t.intersectTriangle(s,a,l,e.side===eo,c),h===null)return null;ug.copy(c),ug.applyMatrix4(i.matrixWorld);const d=n.ray.origin.distanceTo(ug);return d<n.near||d>n.far?null:{distance:d,point:ug.clone(),object:i}}function hg(i,e,n,t,s,a,l,c,h,d){i.getVertexPosition(c,cu),i.getVertexPosition(h,uu),i.getVertexPosition(d,hu);const p=Lq(i,e,n,t,cu,uu,hu,cg);if(p){s&&(ag.fromBufferAttribute(s,c),og.fromBufferAttribute(s,h),lg.fromBufferAttribute(s,d),p.uv=Br.getInterpolation(cg,cu,uu,hu,ag,og,lg,new Ge)),a&&(ag.fromBufferAttribute(a,c),og.fromBufferAttribute(a,h),lg.fromBufferAttribute(a,d),p.uv1=Br.getInterpolation(cg,cu,uu,hu,ag,og,lg,new Ge)),l&&(rT.fromBufferAttribute(l,c),sT.fromBufferAttribute(l,h),aT.fromBufferAttribute(l,d),p.normal=Br.getInterpolation(cg,cu,uu,hu,rT,sT,aT,new Q),p.normal.dot(t.direction)>0&&p.normal.multiplyScalar(-1));const m={a:c,b:h,c:d,normal:new Q,materialIndex:0};Br.getNormal(cu,uu,hu,m.normal),p.face=m}return p}class dl extends Xt{constructor(e=1,n=1,t=1,s=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:t,widthSegments:s,heightSegments:a,depthSegments:l};const c=this;s=Math.floor(s),a=Math.floor(a),l=Math.floor(l);const h=[],d=[],p=[],m=[];let v=0,y=0;b("z","y","x",-1,-1,t,n,e,l,a,0),b("z","y","x",1,-1,t,n,-e,l,a,1),b("x","z","y",1,1,e,t,n,s,l,2),b("x","z","y",1,-1,e,t,-n,s,l,3),b("x","y","z",1,-1,e,n,t,s,a,4),b("x","y","z",-1,-1,e,n,-t,s,a,5),this.setIndex(h),this.setAttribute("position",new yt(d,3)),this.setAttribute("normal",new yt(p,3)),this.setAttribute("uv",new yt(m,2));function b(S,C,E,w,x,M,P,I,D,A,N){const T=M/D,L=P/A,V=M/2,R=P/2,B=I/2,F=D+1,U=A+1;let q=0,Y=0;const ne=new Q;for(let de=0;de<U;de++){const ve=de*L-R;for(let Re=0;Re<F;Re++){const Ee=Re*T-V;ne[S]=Ee*w,ne[C]=ve*x,ne[E]=B,d.push(ne.x,ne.y,ne.z),ne[S]=0,ne[C]=0,ne[E]=I>0?1:-1,p.push(ne.x,ne.y,ne.z),m.push(Re/D),m.push(1-de/A),q+=1}}for(let de=0;de<A;de++)for(let ve=0;ve<D;ve++){const Re=v+ve+F*de,Ee=v+ve+F*(de+1),ce=v+(ve+1)+F*(de+1),Ce=v+(ve+1)+F*de;h.push(Re,Ee,Ce),h.push(Ee,ce,Ce),Y+=6}c.addGroup(y,Y,N),y+=Y,v+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function rh(i){const e={};for(const n in i){e[n]={};for(const t in i[n]){const s=i[n][t];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][t]=null):e[n][t]=s.clone():Array.isArray(s)?e[n][t]=s.slice():e[n][t]=s}}return e}function fr(i){const e={};for(let n=0;n<i.length;n++){const t=rh(i[n]);for(const s in t)e[s]=t[s]}return e}function Bq(i){const e=[];for(let n=0;n<i.length;n++)e.push(i[n].clone());return e}function kI(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Rn.workingColorSpace}const xp={clone:rh,merge:fr};var Oq=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Vq=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yr extends tr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Oq,this.fragmentShader=Vq,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rh(e.uniforms),this.uniformsGroups=Bq(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const l=this.uniforms[s].value;l&&l.isTexture?n.uniforms[s]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?n.uniforms[s]={type:"c",value:l.getHex()}:l&&l.isVector2?n.uniforms[s]={type:"v2",value:l.toArray()}:l&&l.isVector3?n.uniforms[s]={type:"v3",value:l.toArray()}:l&&l.isVector4?n.uniforms[s]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?n.uniforms[s]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?n.uniforms[s]={type:"m4",value:l.toArray()}:n.uniforms[s]={value:l}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const t={};for(const s in this.extensions)this.extensions[s]===!0&&(t[s]=!0);return Object.keys(t).length>0&&(n.extensions=t),n}}class wp extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct,this.coordinateSystem=oa}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Oo=new Q,oT=new Ge,lT=new Ge;class Ln extends wp{constructor(e=50,n=1,t=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=t,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=ih*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ih*2*Math.atan(Math.tan(hc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,t){Oo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Oo.x,Oo.y).multiplyScalar(-e/Oo.z),Oo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Oo.x,Oo.y).multiplyScalar(-e/Oo.z)}getViewSize(e,n){return this.getViewBounds(e,oT,lT),n.subVectors(lT,oT)}setViewOffset(e,n,t,s,a,l){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=t,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(hc*.5*this.fov)/this.zoom,t=2*n,s=this.aspect*t,a=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,d=l.fullHeight;a+=l.offsetX*s/h,n-=l.offsetY*t/d,s*=l.width/h,t*=l.height/d}const c=this.filmOffset;c!==0&&(a+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,n,n-t,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const du=-90,fu=1;class AI extends _n{constructor(e,n,t){super(),this.type="CubeCamera",this.renderTarget=t,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Ln(du,fu,e,n);s.layers=this.layers,this.add(s);const a=new Ln(du,fu,e,n);a.layers=this.layers,this.add(a);const l=new Ln(du,fu,e,n);l.layers=this.layers,this.add(l);const c=new Ln(du,fu,e,n);c.layers=this.layers,this.add(c);const h=new Ln(du,fu,e,n);h.layers=this.layers,this.add(h);const d=new Ln(du,fu,e,n);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[t,s,a,l,c,h]=n;for(const d of n)this.remove(d);if(e===oa)t.up.set(0,1,0),t.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===Jf)t.up.set(0,-1,0),t.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of n)this.add(d),d.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:t,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,l,c,h,d,p]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const S=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,e.setRenderTarget(t,0,s),e.render(n,a),e.setRenderTarget(t,1,s),e.render(n,l),e.setRenderTarget(t,2,s),e.render(n,c),e.setRenderTarget(t,3,s),e.render(n,h),e.setRenderTarget(t,4,s),e.render(n,d),t.texture.generateMipmaps=S,e.setRenderTarget(t,5,s),e.render(n,p),e.setRenderTarget(m,v,y),e.xr.enabled=b,t.texture.needsPMREMUpdate=!0}}class Cp extends Wn{constructor(e,n,t,s,a,l,c,h,d,p){e=e!==void 0?e:[],n=n!==void 0?n:to,super(e,n,t,s,a,l,c,h,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PI extends Ss{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const t={width:e,height:e,depth:1},s=[t,t,t,t,t,t];this.texture=new Cp(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:gi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new dl(5,5,5),a=new yr({name:"CubemapFromEquirect",uniforms:rh(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:er,blending:Xa});a.uniforms.tEquirect.value=n;const l=new Fn(s,a),c=n.minFilter;return n.minFilter===$s&&(n.minFilter=gi),new AI(1,10,this).update(e,l),n.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,n,t,s){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(n,t,s);e.setRenderTarget(a)}}const B1=new Q,Fq=new Q,Uq=new Qt;class sa{constructor(e=new Q(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,t,s){return this.normal.set(e,n,t),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,t){const s=B1.subVectors(t,n).cross(Fq.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const t=e.delta(B1),s=this.normal.dot(t);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:n.copy(e.start).addScaledVector(t,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),t=this.distanceToPoint(e.end);return n<0&&t>0||t<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const t=n||Uq.getNormalMatrix(e),s=this.coplanarPoint(B1).applyMatrix4(e),a=this.normal.applyMatrix3(t).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Bl=new Wi,dg=new Q;class Sp{constructor(e=new sa,n=new sa,t=new sa,s=new sa,a=new sa,l=new sa){this.planes=[e,n,t,s,a,l]}set(e,n,t,s,a,l){const c=this.planes;return c[0].copy(e),c[1].copy(n),c[2].copy(t),c[3].copy(s),c[4].copy(a),c[5].copy(l),this}copy(e){const n=this.planes;for(let t=0;t<6;t++)n[t].copy(e.planes[t]);return this}setFromProjectionMatrix(e,n=oa){const t=this.planes,s=e.elements,a=s[0],l=s[1],c=s[2],h=s[3],d=s[4],p=s[5],m=s[6],v=s[7],y=s[8],b=s[9],S=s[10],C=s[11],E=s[12],w=s[13],x=s[14],M=s[15];if(t[0].setComponents(h-a,v-d,C-y,M-E).normalize(),t[1].setComponents(h+a,v+d,C+y,M+E).normalize(),t[2].setComponents(h+l,v+p,C+b,M+w).normalize(),t[3].setComponents(h-l,v-p,C-b,M-w).normalize(),t[4].setComponents(h-c,v-m,C-S,M-x).normalize(),n===oa)t[5].setComponents(h+c,v+m,C+S,M+x).normalize();else if(n===Jf)t[5].setComponents(c,m,S,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Bl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Bl.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Bl)}intersectsSprite(e){return Bl.center.set(0,0,0),Bl.radius=.7071067811865476,Bl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bl)}intersectsSphere(e){const n=this.planes,t=e.center,s=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(t)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let t=0;t<6;t++){const s=n[t];if(dg.x=s.normal.x>0?e.max.x:e.min.x,dg.y=s.normal.y>0?e.max.y:e.min.y,dg.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(dg)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let t=0;t<6;t++)if(n[t].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function II(){let i=null,e=!1,n=null,t=null;function s(a,l){n(a,l),t=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(t=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(t),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){i=a}}}function zq(i){const e=new WeakMap;function n(c,h){const d=c.array,p=c.usage,m=d.byteLength,v=i.createBuffer();i.bindBuffer(h,v),i.bufferData(h,d,p),c.onUploadCallback();let y;if(d instanceof Float32Array)y=i.FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=i.SHORT;else if(d instanceof Uint32Array)y=i.UNSIGNED_INT;else if(d instanceof Int32Array)y=i.INT;else if(d instanceof Int8Array)y=i.BYTE;else if(d instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:m}}function t(c,h,d){const p=h.array,m=h._updateRange,v=h.updateRanges;if(i.bindBuffer(d,c),m.count===-1&&v.length===0&&i.bufferSubData(d,0,p),v.length!==0){for(let y=0,b=v.length;y<b;y++){const S=v[y];i.bufferSubData(d,S.start*p.BYTES_PER_ELEMENT,p,S.start,S.count)}h.clearUpdateRanges()}m.count!==-1&&(i.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count),m.count=-1),h.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=e.get(c);h&&(i.deleteBuffer(h.buffer),e.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const p=e.get(c);(!p||p.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=e.get(c);if(d===void 0)e.set(c,n(c,h));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");t(d.buffer,c,h),d.version=c.version}}return{get:s,remove:a,update:l}}class fl extends Xt{constructor(e=1,n=1,t=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:t,heightSegments:s};const a=e/2,l=n/2,c=Math.floor(t),h=Math.floor(s),d=c+1,p=h+1,m=e/c,v=n/h,y=[],b=[],S=[],C=[];for(let E=0;E<p;E++){const w=E*v-l;for(let x=0;x<d;x++){const M=x*m-a;b.push(M,-w,0),S.push(0,0,1),C.push(x/c),C.push(1-E/h)}}for(let E=0;E<h;E++)for(let w=0;w<c;w++){const x=w+d*E,M=w+d*(E+1),P=w+1+d*(E+1),I=w+1+d*E;y.push(x,M,I),y.push(M,P,I)}this.setIndex(y),this.setAttribute("position",new yt(b,3)),this.setAttribute("normal",new yt(S,3)),this.setAttribute("uv",new yt(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fl(e.width,e.height,e.widthSegments,e.heightSegments)}}var $q=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Hq=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Gq=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Wq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jq=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Kq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,qq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Xq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Yq=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Jq=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Zq=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Qq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,eX=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,tX=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,nX=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iX=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,rX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,aX=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,oX=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,lX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,cX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,uX=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,hX=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,dX=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,fX=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,pX=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,mX=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gX=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vX=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yX="gl_FragColor = linearToOutputTexel( gl_FragColor );",bX=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,_X=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xX=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,wX=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CX=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,SX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,EX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,MX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,TX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,kX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,AX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,PX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IX=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,NX=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,RX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,DX=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,LX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,BX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,OX=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,VX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,FX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,UX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,zX=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$X=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,HX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,GX=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,WX=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jX=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KX=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,qX=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,XX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,YX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,JX=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,QX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,eY=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,tY=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,iY=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,rY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,sY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,aY=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,oY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,uY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,hY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,dY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,fY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,pY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,vY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,yY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bY=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_Y=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xY=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wY=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CY=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,SY=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,EY=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,MY=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,TY=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,kY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,AY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,PY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,NY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,RY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,DY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,LY=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,BY=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,OY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,FY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,UY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const zY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$Y=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,GY=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jY=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KY=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qY=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,XY=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,YY=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,JY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZY=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,QY=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,aJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_J=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rn={alphahash_fragment:$q,alphahash_pars_fragment:Hq,alphamap_fragment:Gq,alphamap_pars_fragment:Wq,alphatest_fragment:jq,alphatest_pars_fragment:Kq,aomap_fragment:qq,aomap_pars_fragment:Xq,batching_pars_vertex:Yq,batching_vertex:Jq,begin_vertex:Zq,beginnormal_vertex:Qq,bsdfs:eX,iridescence_fragment:tX,bumpmap_pars_fragment:nX,clipping_planes_fragment:iX,clipping_planes_pars_fragment:rX,clipping_planes_pars_vertex:sX,clipping_planes_vertex:aX,color_fragment:oX,color_pars_fragment:lX,color_pars_vertex:cX,color_vertex:uX,common:hX,cube_uv_reflection_fragment:dX,defaultnormal_vertex:fX,displacementmap_pars_vertex:pX,displacementmap_vertex:mX,emissivemap_fragment:gX,emissivemap_pars_fragment:vX,colorspace_fragment:yX,colorspace_pars_fragment:bX,envmap_fragment:_X,envmap_common_pars_fragment:xX,envmap_pars_fragment:wX,envmap_pars_vertex:CX,envmap_physical_pars_fragment:DX,envmap_vertex:SX,fog_vertex:EX,fog_pars_vertex:MX,fog_fragment:TX,fog_pars_fragment:kX,gradientmap_pars_fragment:AX,lightmap_pars_fragment:PX,lights_lambert_fragment:IX,lights_lambert_pars_fragment:NX,lights_pars_begin:RX,lights_toon_fragment:LX,lights_toon_pars_fragment:BX,lights_phong_fragment:OX,lights_phong_pars_fragment:VX,lights_physical_fragment:FX,lights_physical_pars_fragment:UX,lights_fragment_begin:zX,lights_fragment_maps:$X,lights_fragment_end:HX,logdepthbuf_fragment:GX,logdepthbuf_pars_fragment:WX,logdepthbuf_pars_vertex:jX,logdepthbuf_vertex:KX,map_fragment:qX,map_pars_fragment:XX,map_particle_fragment:YX,map_particle_pars_fragment:JX,metalnessmap_fragment:ZX,metalnessmap_pars_fragment:QX,morphinstance_vertex:eY,morphcolor_vertex:tY,morphnormal_vertex:nY,morphtarget_pars_vertex:iY,morphtarget_vertex:rY,normal_fragment_begin:sY,normal_fragment_maps:aY,normal_pars_fragment:oY,normal_pars_vertex:lY,normal_vertex:cY,normalmap_pars_fragment:uY,clearcoat_normal_fragment_begin:hY,clearcoat_normal_fragment_maps:dY,clearcoat_pars_fragment:fY,iridescence_pars_fragment:pY,opaque_fragment:mY,packing:gY,premultiplied_alpha_fragment:vY,project_vertex:yY,dithering_fragment:bY,dithering_pars_fragment:_Y,roughnessmap_fragment:xY,roughnessmap_pars_fragment:wY,shadowmap_pars_fragment:CY,shadowmap_pars_vertex:SY,shadowmap_vertex:EY,shadowmask_pars_fragment:MY,skinbase_vertex:TY,skinning_pars_vertex:kY,skinning_vertex:AY,skinnormal_vertex:PY,specularmap_fragment:IY,specularmap_pars_fragment:NY,tonemapping_fragment:RY,tonemapping_pars_fragment:DY,transmission_fragment:LY,transmission_pars_fragment:BY,uv_pars_fragment:OY,uv_pars_vertex:VY,uv_vertex:FY,worldpos_vertex:UY,background_vert:zY,background_frag:$Y,backgroundCube_vert:HY,backgroundCube_frag:GY,cube_vert:WY,cube_frag:jY,depth_vert:KY,depth_frag:qY,distanceRGBA_vert:XY,distanceRGBA_frag:YY,equirect_vert:JY,equirect_frag:ZY,linedashed_vert:QY,linedashed_frag:eJ,meshbasic_vert:tJ,meshbasic_frag:nJ,meshlambert_vert:iJ,meshlambert_frag:rJ,meshmatcap_vert:sJ,meshmatcap_frag:aJ,meshnormal_vert:oJ,meshnormal_frag:lJ,meshphong_vert:cJ,meshphong_frag:uJ,meshphysical_vert:hJ,meshphysical_frag:dJ,meshtoon_vert:fJ,meshtoon_frag:pJ,points_vert:mJ,points_frag:gJ,shadow_vert:vJ,shadow_frag:yJ,sprite_vert:bJ,sprite_frag:_J},it={common:{diffuse:{value:new Qe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qt}},envmap:{envMap:{value:null},envMapRotation:{value:new Qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qt},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0},uvTransform:{value:new Qt}},sprite:{diffuse:{value:new Qe(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}}},ys={basic:{uniforms:fr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:rn.meshbasic_vert,fragmentShader:rn.meshbasic_frag},lambert:{uniforms:fr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new Qe(0)}}]),vertexShader:rn.meshlambert_vert,fragmentShader:rn.meshlambert_frag},phong:{uniforms:fr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new Qe(0)},specular:{value:new Qe(1118481)},shininess:{value:30}}]),vertexShader:rn.meshphong_vert,fragmentShader:rn.meshphong_frag},standard:{uniforms:fr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new Qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag},toon:{uniforms:fr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new Qe(0)}}]),vertexShader:rn.meshtoon_vert,fragmentShader:rn.meshtoon_frag},matcap:{uniforms:fr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:rn.meshmatcap_vert,fragmentShader:rn.meshmatcap_frag},points:{uniforms:fr([it.points,it.fog]),vertexShader:rn.points_vert,fragmentShader:rn.points_frag},dashed:{uniforms:fr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rn.linedashed_vert,fragmentShader:rn.linedashed_frag},depth:{uniforms:fr([it.common,it.displacementmap]),vertexShader:rn.depth_vert,fragmentShader:rn.depth_frag},normal:{uniforms:fr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:rn.meshnormal_vert,fragmentShader:rn.meshnormal_frag},sprite:{uniforms:fr([it.sprite,it.fog]),vertexShader:rn.sprite_vert,fragmentShader:rn.sprite_frag},background:{uniforms:{uvTransform:{value:new Qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rn.background_vert,fragmentShader:rn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qt}},vertexShader:rn.backgroundCube_vert,fragmentShader:rn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rn.cube_vert,fragmentShader:rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rn.equirect_vert,fragmentShader:rn.equirect_frag},distanceRGBA:{uniforms:fr([it.common,it.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rn.distanceRGBA_vert,fragmentShader:rn.distanceRGBA_frag},shadow:{uniforms:fr([it.lights,it.fog,{color:{value:new Qe(0)},opacity:{value:1}}]),vertexShader:rn.shadow_vert,fragmentShader:rn.shadow_frag}};ys.physical={uniforms:fr([ys.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qt},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qt},sheen:{value:0},sheenColor:{value:new Qe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qt},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qt},attenuationDistance:{value:0},attenuationColor:{value:new Qe(0)},specularColor:{value:new Qe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qt},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qt}}]),vertexShader:rn.meshphysical_vert,fragmentShader:rn.meshphysical_frag};const fg={r:0,b:0,g:0},Ol=new Ai,xJ=new ct;function wJ(i,e,n,t,s,a,l){const c=new Qe(0);let h=a===!0?0:1,d,p,m=null,v=0,y=null;function b(w){let x=w.isScene===!0?w.background:null;return x&&x.isTexture&&(x=(w.backgroundBlurriness>0?n:e).get(x)),x}function S(w){let x=!1;const M=b(w);M===null?E(c,h):M&&M.isColor&&(E(M,1),x=!0);const P=i.xr.getEnvironmentBlendMode();P==="additive"?t.buffers.color.setClear(0,0,0,1,l):P==="alpha-blend"&&t.buffers.color.setClear(0,0,0,0,l),(i.autoClear||x)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil)}function C(w,x){const M=b(x);M&&(M.isCubeTexture||M.mapping===vh)?(p===void 0&&(p=new Fn(new dl(1,1,1),new yr({name:"BackgroundCubeMaterial",uniforms:rh(ys.backgroundCube.uniforms),vertexShader:ys.backgroundCube.vertexShader,fragmentShader:ys.backgroundCube.fragmentShader,side:er,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(P,I,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(p)),Ol.copy(x.backgroundRotation),Ol.x*=-1,Ol.y*=-1,Ol.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Ol.y*=-1,Ol.z*=-1),p.material.uniforms.envMap.value=M,p.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(xJ.makeRotationFromEuler(Ol)),p.material.toneMapped=Rn.getTransfer(M.colorSpace)!==Hn,(m!==M||v!==M.version||y!==i.toneMapping)&&(p.material.needsUpdate=!0,m=M,v=M.version,y=i.toneMapping),p.layers.enableAll(),w.unshift(p,p.geometry,p.material,0,0,null)):M&&M.isTexture&&(d===void 0&&(d=new Fn(new fl(2,2),new yr({name:"BackgroundMaterial",uniforms:rh(ys.background.uniforms),vertexShader:ys.background.vertexShader,fragmentShader:ys.background.fragmentShader,side:eo,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(d)),d.material.uniforms.t2D.value=M,d.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,d.material.toneMapped=Rn.getTransfer(M.colorSpace)!==Hn,M.matrixAutoUpdate===!0&&M.updateMatrix(),d.material.uniforms.uvTransform.value.copy(M.matrix),(m!==M||v!==M.version||y!==i.toneMapping)&&(d.material.needsUpdate=!0,m=M,v=M.version,y=i.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null))}function E(w,x){w.getRGB(fg,kI(i)),t.buffers.color.setClear(fg.r,fg.g,fg.b,x,l)}return{getClearColor:function(){return c},setClearColor:function(w,x=1){c.set(w),h=x,E(c,h)},getClearAlpha:function(){return h},setClearAlpha:function(w){h=w,E(c,h)},render:S,addToRenderList:C}}function CJ(i,e){const n=i.getParameter(i.MAX_VERTEX_ATTRIBS),t={},s=v(null);let a=s,l=!1;function c(T,L,V,R,B){let F=!1;const U=m(R,V,L);a!==U&&(a=U,d(a.object)),F=y(T,R,V,B),F&&b(T,R,V,B),B!==null&&e.update(B,i.ELEMENT_ARRAY_BUFFER),(F||l)&&(l=!1,M(T,L,V,R),B!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(B).buffer))}function h(){return i.createVertexArray()}function d(T){return i.bindVertexArray(T)}function p(T){return i.deleteVertexArray(T)}function m(T,L,V){const R=V.wireframe===!0;let B=t[T.id];B===void 0&&(B={},t[T.id]=B);let F=B[L.id];F===void 0&&(F={},B[L.id]=F);let U=F[R];return U===void 0&&(U=v(h()),F[R]=U),U}function v(T){const L=[],V=[],R=[];for(let B=0;B<n;B++)L[B]=0,V[B]=0,R[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:V,attributeDivisors:R,object:T,attributes:{},index:null}}function y(T,L,V,R){const B=a.attributes,F=L.attributes;let U=0;const q=V.getAttributes();for(const Y in q)if(q[Y].location>=0){const de=B[Y];let ve=F[Y];if(ve===void 0&&(Y==="instanceMatrix"&&T.instanceMatrix&&(ve=T.instanceMatrix),Y==="instanceColor"&&T.instanceColor&&(ve=T.instanceColor)),de===void 0||de.attribute!==ve||ve&&de.data!==ve.data)return!0;U++}return a.attributesNum!==U||a.index!==R}function b(T,L,V,R){const B={},F=L.attributes;let U=0;const q=V.getAttributes();for(const Y in q)if(q[Y].location>=0){let de=F[Y];de===void 0&&(Y==="instanceMatrix"&&T.instanceMatrix&&(de=T.instanceMatrix),Y==="instanceColor"&&T.instanceColor&&(de=T.instanceColor));const ve={};ve.attribute=de,de&&de.data&&(ve.data=de.data),B[Y]=ve,U++}a.attributes=B,a.attributesNum=U,a.index=R}function S(){const T=a.newAttributes;for(let L=0,V=T.length;L<V;L++)T[L]=0}function C(T){E(T,0)}function E(T,L){const V=a.newAttributes,R=a.enabledAttributes,B=a.attributeDivisors;V[T]=1,R[T]===0&&(i.enableVertexAttribArray(T),R[T]=1),B[T]!==L&&(i.vertexAttribDivisor(T,L),B[T]=L)}function w(){const T=a.newAttributes,L=a.enabledAttributes;for(let V=0,R=L.length;V<R;V++)L[V]!==T[V]&&(i.disableVertexAttribArray(V),L[V]=0)}function x(T,L,V,R,B,F,U){U===!0?i.vertexAttribIPointer(T,L,V,B,F):i.vertexAttribPointer(T,L,V,R,B,F)}function M(T,L,V,R){S();const B=R.attributes,F=V.getAttributes(),U=L.defaultAttributeValues;for(const q in F){const Y=F[q];if(Y.location>=0){let ne=B[q];if(ne===void 0&&(q==="instanceMatrix"&&T.instanceMatrix&&(ne=T.instanceMatrix),q==="instanceColor"&&T.instanceColor&&(ne=T.instanceColor)),ne!==void 0){const de=ne.normalized,ve=ne.itemSize,Re=e.get(ne);if(Re===void 0)continue;const Ee=Re.buffer,ce=Re.type,Ce=Re.bytesPerElement,Me=ce===i.INT||ce===i.UNSIGNED_INT||ne.gpuType===Ux;if(ne.isInterleavedBufferAttribute){const ee=ne.data,re=ee.stride,H=ne.offset;if(ee.isInstancedInterleavedBuffer){for(let $=0;$<Y.locationSize;$++)E(Y.location+$,ee.meshPerAttribute);T.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let $=0;$<Y.locationSize;$++)C(Y.location+$);i.bindBuffer(i.ARRAY_BUFFER,Ee);for(let $=0;$<Y.locationSize;$++)x(Y.location+$,ve/Y.locationSize,ce,de,re*Ce,(H+ve/Y.locationSize*$)*Ce,Me)}else{if(ne.isInstancedBufferAttribute){for(let ee=0;ee<Y.locationSize;ee++)E(Y.location+ee,ne.meshPerAttribute);T.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let ee=0;ee<Y.locationSize;ee++)C(Y.location+ee);i.bindBuffer(i.ARRAY_BUFFER,Ee);for(let ee=0;ee<Y.locationSize;ee++)x(Y.location+ee,ve/Y.locationSize,ce,de,ve*Ce,ve/Y.locationSize*ee*Ce,Me)}}else if(U!==void 0){const de=U[q];if(de!==void 0)switch(de.length){case 2:i.vertexAttrib2fv(Y.location,de);break;case 3:i.vertexAttrib3fv(Y.location,de);break;case 4:i.vertexAttrib4fv(Y.location,de);break;default:i.vertexAttrib1fv(Y.location,de)}}}}w()}function P(){A();for(const T in t){const L=t[T];for(const V in L){const R=L[V];for(const B in R)p(R[B].object),delete R[B];delete L[V]}delete t[T]}}function I(T){if(t[T.id]===void 0)return;const L=t[T.id];for(const V in L){const R=L[V];for(const B in R)p(R[B].object),delete R[B];delete L[V]}delete t[T.id]}function D(T){for(const L in t){const V=t[L];if(V[T.id]===void 0)continue;const R=V[T.id];for(const B in R)p(R[B].object),delete R[B];delete V[T.id]}}function A(){N(),l=!0,a!==s&&(a=s,d(a.object))}function N(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:c,reset:A,resetDefaultState:N,dispose:P,releaseStatesOfGeometry:I,releaseStatesOfProgram:D,initAttributes:S,enableAttribute:C,disableUnusedAttributes:w}}function SJ(i,e,n){let t;function s(d){t=d}function a(d,p){i.drawArrays(t,d,p),n.update(p,t,1)}function l(d,p,m){m!==0&&(i.drawArraysInstanced(t,d,p,m),n.update(p,t,m))}function c(d,p,m){if(m===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let y=0;y<m;y++)this.render(d[y],p[y]);else{v.multiDrawArraysWEBGL(t,d,0,p,0,m);let y=0;for(let b=0;b<m;b++)y+=p[b];n.update(y,t,1)}}function h(d,p,m,v){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let b=0;b<d.length;b++)l(d[b],p[b],v[b]);else{y.multiDrawArraysInstancedWEBGL(t,d,0,p,0,v,0,m);let b=0;for(let S=0;S<m;S++)b+=p[S];for(let S=0;S<v.length;S++)n.update(b,t,v[S])}}this.setMode=s,this.render=a,this.renderInstances=l,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function EJ(i,e,n,t){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function l(I){return!(I!==Fr&&t.convert(I)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(I){const D=I===yh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==js&&t.convert(I)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==_s&&!D)}function h(I){if(I==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=n.precision!==void 0?n.precision:"highp";const p=h(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const m=n.logarithmicDepthBuffer===!0,v=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),y=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_TEXTURE_SIZE),S=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),C=i.getParameter(i.MAX_VERTEX_ATTRIBS),E=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),w=i.getParameter(i.MAX_VARYING_VECTORS),x=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),M=y>0,P=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:h,textureFormatReadable:l,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:m,maxTextures:v,maxVertexTextures:y,maxTextureSize:b,maxCubemapSize:S,maxAttributes:C,maxVertexUniforms:E,maxVaryings:w,maxFragmentUniforms:x,vertexTextures:M,maxSamples:P}}function MJ(i){const e=this;let n=null,t=0,s=!1,a=!1;const l=new sa,c=new Qt,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const y=m.length!==0||v||t!==0||s;return s=v,t=m.length,y},this.beginShadows=function(){a=!0,p(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(m,v){n=p(m,v,0)},this.setState=function(m,v,y){const b=m.clippingPlanes,S=m.clipIntersection,C=m.clipShadows,E=i.get(m);if(!s||b===null||b.length===0||a&&!C)a?p(null):d();else{const w=a?0:t,x=w*4;let M=E.clippingState||null;h.value=M,M=p(b,v,x,y);for(let P=0;P!==x;++P)M[P]=n[P];E.clippingState=M,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=w}};function d(){h.value!==n&&(h.value=n,h.needsUpdate=t>0),e.numPlanes=t,e.numIntersection=0}function p(m,v,y,b){const S=m!==null?m.length:0;let C=null;if(S!==0){if(C=h.value,b!==!0||C===null){const E=y+S*4,w=v.matrixWorldInverse;c.getNormalMatrix(w),(C===null||C.length<E)&&(C=new Float32Array(E));for(let x=0,M=y;x!==S;++x,M+=4)l.copy(m[x]).applyMatrix4(w,c),l.normal.toArray(C,M),C[M+3]=l.constant}h.value=C,h.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,C}}function TJ(i){let e=new WeakMap;function n(l,c){return c===Zu?l.mapping=to:c===Wf&&(l.mapping=sl),l}function t(l){if(l&&l.isTexture){const c=l.mapping;if(c===Zu||c===Wf)if(e.has(l)){const h=e.get(l).texture;return n(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const d=new PI(h.height);return d.fromEquirectangularTexture(i,l),e.set(l,d),l.addEventListener("dispose",s),n(d.texture,l.mapping)}else return null}}return l}function s(l){const c=l.target;c.removeEventListener("dispose",s);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function a(){e=new WeakMap}return{get:t,dispose:a}}class xs extends wp{constructor(e=-1,n=1,t=1,s=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=t,this.bottom=s,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,t,s,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=t,this.view.offsetY=s,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=t-e,l=t+e,c=s+n,h=s-n;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=d*this.view.offsetX,l=a+d*this.view.width,c-=p*this.view.offsetY,h=c-p*this.view.height}this.projectionMatrix.makeOrthographic(a,l,c,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Au=4,cT=[.125,.215,.35,.446,.526,.582],Zl=20,O1=new xs,uT=new Qe;let V1=null,F1=0,U1=0,z1=!1;const Yl=(1+Math.sqrt(5))/2,pu=1/Yl,hT=[new Q(-Yl,pu,0),new Q(Yl,pu,0),new Q(-pu,0,Yl),new Q(pu,0,Yl),new Q(0,Yl,-pu),new Q(0,Yl,pu),new Q(-1,1,-1),new Q(1,1,-1),new Q(-1,1,1),new Q(1,1,1)];class D_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,t=.1,s=100){V1=this._renderer.getRenderTarget(),F1=this._renderer.getActiveCubeFace(),U1=this._renderer.getActiveMipmapLevel(),z1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,t,s,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=pT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=fT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(V1,F1,U1),this._renderer.xr.enabled=z1,e.scissorTest=!1,pg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===to||e.mapping===sl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),V1=this._renderer.getRenderTarget(),F1=this._renderer.getActiveCubeFace(),U1=this._renderer.getActiveMipmapLevel(),z1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const t=n||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,t={magFilter:gi,minFilter:gi,generateMipmaps:!1,type:yh,format:Fr,colorSpace:oo,depthBuffer:!1},s=dT(e,n,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=dT(e,n,t);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=kJ(a)),this._blurMaterial=AJ(a,e,n)}return s}_compileMaterial(e){const n=new Fn(this._lodPlanes[0],e);this._renderer.compile(n,O1)}_sceneToCubeUV(e,n,t,s){const c=new Ln(90,1,n,t),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,v=p.toneMapping;p.getClearColor(uT),p.toneMapping=Ya,p.autoClear=!1;const y=new ga({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1}),b=new Fn(new dl,y);let S=!1;const C=e.background;C?C.isColor&&(y.color.copy(C),e.background=null,S=!0):(y.color.copy(uT),S=!0);for(let E=0;E<6;E++){const w=E%3;w===0?(c.up.set(0,h[E],0),c.lookAt(d[E],0,0)):w===1?(c.up.set(0,0,h[E]),c.lookAt(0,d[E],0)):(c.up.set(0,h[E],0),c.lookAt(0,0,d[E]));const x=this._cubeSize;pg(s,w*x,E>2?x:0,x,x),p.setRenderTarget(s),S&&p.render(b,c),p.render(e,c)}b.geometry.dispose(),b.material.dispose(),p.toneMapping=v,p.autoClear=m,e.background=C}_textureToCubeUV(e,n){const t=this._renderer,s=e.mapping===to||e.mapping===sl;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=pT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=fT());const a=s?this._cubemapMaterial:this._equirectMaterial,l=new Fn(this._lodPlanes[0],a),c=a.uniforms;c.envMap.value=e;const h=this._cubeSize;pg(n,0,0,3*h,2*h),t.setRenderTarget(n),t.render(l,O1)}_applyPMREM(e){const n=this._renderer,t=n.autoClear;n.autoClear=!1;const s=this._lodPlanes.length;for(let a=1;a<s;a++){const l=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),c=hT[(s-a-1)%hT.length];this._blur(e,a-1,a,l,c)}n.autoClear=t}_blur(e,n,t,s,a){const l=this._pingPongRenderTarget;this._halfBlur(e,l,n,t,s,"latitudinal",a),this._halfBlur(l,e,t,t,s,"longitudinal",a)}_halfBlur(e,n,t,s,a,l,c){const h=this._renderer,d=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new Fn(this._lodPlanes[s],d),v=d.uniforms,y=this._sizeLods[t]-1,b=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*Zl-1),S=a/b,C=isFinite(a)?1+Math.floor(p*S):Zl;C>Zl&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${Zl}`);const E=[];let w=0;for(let D=0;D<Zl;++D){const A=D/S,N=Math.exp(-A*A/2);E.push(N),D===0?w+=N:D<C&&(w+=2*N)}for(let D=0;D<E.length;D++)E[D]=E[D]/w;v.envMap.value=e.texture,v.samples.value=C,v.weights.value=E,v.latitudinal.value=l==="latitudinal",c&&(v.poleAxis.value=c);const{_lodMax:x}=this;v.dTheta.value=b,v.mipInt.value=x-t;const M=this._sizeLods[s],P=3*M*(s>x-Au?s-x+Au:0),I=4*(this._cubeSize-M);pg(n,P,I,3*M,2*M),h.setRenderTarget(n),h.render(m,O1)}}function kJ(i){const e=[],n=[],t=[];let s=i;const a=i-Au+1+cT.length;for(let l=0;l<a;l++){const c=Math.pow(2,s);n.push(c);let h=1/c;l>i-Au?h=cT[l-i+Au-1]:l===0&&(h=0),t.push(h);const d=1/(c-2),p=-d,m=1+d,v=[p,p,m,p,m,m,p,p,m,m,p,m],y=6,b=6,S=3,C=2,E=1,w=new Float32Array(S*b*y),x=new Float32Array(C*b*y),M=new Float32Array(E*b*y);for(let I=0;I<y;I++){const D=I%3*2/3-1,A=I>2?0:-1,N=[D,A,0,D+2/3,A,0,D+2/3,A+1,0,D,A,0,D+2/3,A+1,0,D,A+1,0];w.set(N,S*b*I),x.set(v,C*b*I);const T=[I,I,I,I,I,I];M.set(T,E*b*I)}const P=new Xt;P.setAttribute("position",new wn(w,S)),P.setAttribute("uv",new wn(x,C)),P.setAttribute("faceIndex",new wn(M,E)),e.push(P),s>Au&&s--}return{lodPlanes:e,sizeLods:n,sigmas:t}}function dT(i,e,n){const t=new Ss(i,e,n);return t.texture.mapping=vh,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function pg(i,e,n,t,s){i.viewport.set(e,n,t,s),i.scissor.set(e,n,t,s)}function AJ(i,e,n){const t=new Float32Array(Zl),s=new Q(0,1,0);return new yr({name:"SphericalGaussianBlur",defines:{n:Zl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Zx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function fT(){return new yr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Zx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function pT(){return new yr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Zx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function Zx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PJ(i){let e=new WeakMap,n=null;function t(c){if(c&&c.isTexture){const h=c.mapping,d=h===Zu||h===Wf,p=h===to||h===sl;if(d||p){let m=e.get(c);const v=m!==void 0?m.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==v)return n===null&&(n=new D_(i)),m=d?n.fromEquirectangular(c,m):n.fromCubemap(c,m),m.texture.pmremVersion=c.pmremVersion,e.set(c,m),m.texture;if(m!==void 0)return m.texture;{const y=c.image;return d&&y&&y.height>0||p&&y&&s(y)?(n===null&&(n=new D_(i)),m=d?n.fromEquirectangular(c):n.fromCubemap(c),m.texture.pmremVersion=c.pmremVersion,e.set(c,m),c.addEventListener("dispose",a),m.texture):null}}}return c}function s(c){let h=0;const d=6;for(let p=0;p<d;p++)c[p]!==void 0&&h++;return h===d}function a(c){const h=c.target;h.removeEventListener("dispose",a);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function l(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:t,dispose:l}}function IJ(i){const e={};function n(t){if(e[t]!==void 0)return e[t];let s;switch(t){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(t)}return e[t]=s,s}return{has:function(t){return n(t)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const s=n(t);return s===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),s}}}function NJ(i,e,n,t){const s={},a=new WeakMap;function l(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const b in v.attributes)e.remove(v.attributes[b]);for(const b in v.morphAttributes){const S=v.morphAttributes[b];for(let C=0,E=S.length;C<E;C++)e.remove(S[C])}v.removeEventListener("dispose",l),delete s[v.id];const y=a.get(v);y&&(e.remove(y),a.delete(v)),t.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,n.memory.geometries--}function c(m,v){return s[v.id]===!0||(v.addEventListener("dispose",l),s[v.id]=!0,n.memory.geometries++),v}function h(m){const v=m.attributes;for(const b in v)e.update(v[b],i.ARRAY_BUFFER);const y=m.morphAttributes;for(const b in y){const S=y[b];for(let C=0,E=S.length;C<E;C++)e.update(S[C],i.ARRAY_BUFFER)}}function d(m){const v=[],y=m.index,b=m.attributes.position;let S=0;if(y!==null){const w=y.array;S=y.version;for(let x=0,M=w.length;x<M;x+=3){const P=w[x+0],I=w[x+1],D=w[x+2];v.push(P,I,I,D,D,P)}}else if(b!==void 0){const w=b.array;S=b.version;for(let x=0,M=w.length/3-1;x<M;x+=3){const P=x+0,I=x+1,D=x+2;v.push(P,I,I,D,D,P)}}else return;const C=new(wI(v)?Jx:hv)(v,1);C.version=S;const E=a.get(m);E&&e.remove(E),a.set(m,C)}function p(m){const v=a.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&d(m)}else d(m);return a.get(m)}return{get:c,update:h,getWireframeAttribute:p}}function RJ(i,e,n){let t;function s(v){t=v}let a,l;function c(v){a=v.type,l=v.bytesPerElement}function h(v,y){i.drawElements(t,y,a,v*l),n.update(y,t,1)}function d(v,y,b){b!==0&&(i.drawElementsInstanced(t,y,a,v*l,b),n.update(y,t,b))}function p(v,y,b){if(b===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let C=0;C<b;C++)this.render(v[C]/l,y[C]);else{S.multiDrawElementsWEBGL(t,y,0,a,v,0,b);let C=0;for(let E=0;E<b;E++)C+=y[E];n.update(C,t,1)}}function m(v,y,b,S){if(b===0)return;const C=e.get("WEBGL_multi_draw");if(C===null)for(let E=0;E<v.length;E++)d(v[E]/l,y[E],S[E]);else{C.multiDrawElementsInstancedWEBGL(t,y,0,a,v,0,S,0,b);let E=0;for(let w=0;w<b;w++)E+=y[w];for(let w=0;w<S.length;w++)n.update(E,t,S[w])}}this.setMode=s,this.setIndex=c,this.render=h,this.renderInstances=d,this.renderMultiDraw=p,this.renderMultiDrawInstances=m}function DJ(i){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function t(a,l,c){switch(n.calls++,l){case i.TRIANGLES:n.triangles+=c*(a/3);break;case i.LINES:n.lines+=c*(a/2);break;case i.LINE_STRIP:n.lines+=c*(a-1);break;case i.LINE_LOOP:n.lines+=c*a;break;case i.POINTS:n.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:t}}function LJ(i,e,n){const t=new WeakMap,s=new ln;function a(l,c,h){const d=l.morphTargetInfluences,p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=p!==void 0?p.length:0;let v=t.get(c);if(v===void 0||v.count!==m){let T=function(){A.dispose(),t.delete(c),c.removeEventListener("dispose",T)};var y=T;v!==void 0&&v.texture.dispose();const b=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let M=0;b===!0&&(M=1),S===!0&&(M=2),C===!0&&(M=3);let P=c.attributes.position.count*M,I=1;P>e.maxTextureSize&&(I=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const D=new Float32Array(P*I*4*m),A=new cv(D,P,I,m);A.type=_s,A.needsUpdate=!0;const N=M*4;for(let L=0;L<m;L++){const V=E[L],R=w[L],B=x[L],F=P*I*4*L;for(let U=0;U<V.count;U++){const q=U*N;b===!0&&(s.fromBufferAttribute(V,U),D[F+q+0]=s.x,D[F+q+1]=s.y,D[F+q+2]=s.z,D[F+q+3]=0),S===!0&&(s.fromBufferAttribute(R,U),D[F+q+4]=s.x,D[F+q+5]=s.y,D[F+q+6]=s.z,D[F+q+7]=0),C===!0&&(s.fromBufferAttribute(B,U),D[F+q+8]=s.x,D[F+q+9]=s.y,D[F+q+10]=s.z,D[F+q+11]=B.itemSize===4?s.w:1)}}v={count:m,texture:A,size:new Ge(P,I)},t.set(c,v),c.addEventListener("dispose",T)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)h.getUniforms().setValue(i,"morphTexture",l.morphTexture,n);else{let b=0;for(let C=0;C<d.length;C++)b+=d[C];const S=c.morphTargetsRelative?1:1-b;h.getUniforms().setValue(i,"morphTargetBaseInfluence",S),h.getUniforms().setValue(i,"morphTargetInfluences",d)}h.getUniforms().setValue(i,"morphTargetsTexture",v.texture,n),h.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:a}}function BJ(i,e,n,t){let s=new WeakMap;function a(h){const d=t.render.frame,p=h.geometry,m=e.get(h,p);if(s.get(m)!==d&&(e.update(m),s.set(m,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",c)===!1&&h.addEventListener("dispose",c),s.get(h)!==d&&(n.update(h.instanceMatrix,i.ARRAY_BUFFER),h.instanceColor!==null&&n.update(h.instanceColor,i.ARRAY_BUFFER),s.set(h,d))),h.isSkinnedMesh){const v=h.skeleton;s.get(v)!==d&&(v.update(),s.set(v,d))}return m}function l(){s=new WeakMap}function c(h){const d=h.target;d.removeEventListener("dispose",c),n.remove(d.instanceMatrix),d.instanceColor!==null&&n.remove(d.instanceColor)}return{update:a,dispose:l}}class Qx extends Wn{constructor(e,n,t,s,a,l,c,h,d,p){if(p=p!==void 0?p:uc,p!==uc&&p!==eh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&p===uc&&(t=xc),t===void 0&&p===eh&&(t=bh),super(null,s,a,l,c,h,p,t,d),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=c!==void 0?c:ki,this.minFilter=h!==void 0?h:ki,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const NI=new Wn,RI=new Qx(1,1);RI.compareFunction=qx;const DI=new cv,LI=new Yx,BI=new Cp,mT=[],gT=[],vT=new Float32Array(16),yT=new Float32Array(9),bT=new Float32Array(4);function _h(i,e,n){const t=i[0];if(t<=0||t>0)return i;const s=e*n;let a=mT[s];if(a===void 0&&(a=new Float32Array(s),mT[s]=a),e!==0){t.toArray(a,0);for(let l=1,c=0;l!==e;++l)c+=n,i[l].toArray(a,c)}return a}function Ii(i,e){if(i.length!==e.length)return!1;for(let n=0,t=i.length;n<t;n++)if(i[n]!==e[n])return!1;return!0}function Ni(i,e){for(let n=0,t=e.length;n<t;n++)i[n]=e[n]}function dv(i,e){let n=gT[e];n===void 0&&(n=new Int32Array(e),gT[e]=n);for(let t=0;t!==e;++t)n[t]=i.allocateTextureUnit();return n}function OJ(i,e){const n=this.cache;n[0]!==e&&(i.uniform1f(this.addr,e),n[0]=e)}function VJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ii(n,e))return;i.uniform2fv(this.addr,e),Ni(n,e)}}function FJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ii(n,e))return;i.uniform3fv(this.addr,e),Ni(n,e)}}function UJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ii(n,e))return;i.uniform4fv(this.addr,e),Ni(n,e)}}function zJ(i,e){const n=this.cache,t=e.elements;if(t===void 0){if(Ii(n,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ni(n,e)}else{if(Ii(n,t))return;bT.set(t),i.uniformMatrix2fv(this.addr,!1,bT),Ni(n,t)}}function $J(i,e){const n=this.cache,t=e.elements;if(t===void 0){if(Ii(n,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ni(n,e)}else{if(Ii(n,t))return;yT.set(t),i.uniformMatrix3fv(this.addr,!1,yT),Ni(n,t)}}function HJ(i,e){const n=this.cache,t=e.elements;if(t===void 0){if(Ii(n,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ni(n,e)}else{if(Ii(n,t))return;vT.set(t),i.uniformMatrix4fv(this.addr,!1,vT),Ni(n,t)}}function GJ(i,e){const n=this.cache;n[0]!==e&&(i.uniform1i(this.addr,e),n[0]=e)}function WJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ii(n,e))return;i.uniform2iv(this.addr,e),Ni(n,e)}}function jJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ii(n,e))return;i.uniform3iv(this.addr,e),Ni(n,e)}}function KJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ii(n,e))return;i.uniform4iv(this.addr,e),Ni(n,e)}}function qJ(i,e){const n=this.cache;n[0]!==e&&(i.uniform1ui(this.addr,e),n[0]=e)}function XJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ii(n,e))return;i.uniform2uiv(this.addr,e),Ni(n,e)}}function YJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ii(n,e))return;i.uniform3uiv(this.addr,e),Ni(n,e)}}function JJ(i,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ii(n,e))return;i.uniform4uiv(this.addr,e),Ni(n,e)}}function ZJ(i,e,n){const t=this.cache,s=n.allocateTextureUnit();t[0]!==s&&(i.uniform1i(this.addr,s),t[0]=s);const a=this.type===i.SAMPLER_2D_SHADOW?RI:NI;n.setTexture2D(e||a,s)}function QJ(i,e,n){const t=this.cache,s=n.allocateTextureUnit();t[0]!==s&&(i.uniform1i(this.addr,s),t[0]=s),n.setTexture3D(e||LI,s)}function eZ(i,e,n){const t=this.cache,s=n.allocateTextureUnit();t[0]!==s&&(i.uniform1i(this.addr,s),t[0]=s),n.setTextureCube(e||BI,s)}function tZ(i,e,n){const t=this.cache,s=n.allocateTextureUnit();t[0]!==s&&(i.uniform1i(this.addr,s),t[0]=s),n.setTexture2DArray(e||DI,s)}function nZ(i){switch(i){case 5126:return OJ;case 35664:return VJ;case 35665:return FJ;case 35666:return UJ;case 35674:return zJ;case 35675:return $J;case 35676:return HJ;case 5124:case 35670:return GJ;case 35667:case 35671:return WJ;case 35668:case 35672:return jJ;case 35669:case 35673:return KJ;case 5125:return qJ;case 36294:return XJ;case 36295:return YJ;case 36296:return JJ;case 35678:case 36198:case 36298:case 36306:case 35682:return ZJ;case 35679:case 36299:case 36307:return QJ;case 35680:case 36300:case 36308:case 36293:return eZ;case 36289:case 36303:case 36311:case 36292:return tZ}}function iZ(i,e){i.uniform1fv(this.addr,e)}function rZ(i,e){const n=_h(e,this.size,2);i.uniform2fv(this.addr,n)}function sZ(i,e){const n=_h(e,this.size,3);i.uniform3fv(this.addr,n)}function aZ(i,e){const n=_h(e,this.size,4);i.uniform4fv(this.addr,n)}function oZ(i,e){const n=_h(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,n)}function lZ(i,e){const n=_h(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,n)}function cZ(i,e){const n=_h(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,n)}function uZ(i,e){i.uniform1iv(this.addr,e)}function hZ(i,e){i.uniform2iv(this.addr,e)}function dZ(i,e){i.uniform3iv(this.addr,e)}function fZ(i,e){i.uniform4iv(this.addr,e)}function pZ(i,e){i.uniform1uiv(this.addr,e)}function mZ(i,e){i.uniform2uiv(this.addr,e)}function gZ(i,e){i.uniform3uiv(this.addr,e)}function vZ(i,e){i.uniform4uiv(this.addr,e)}function yZ(i,e,n){const t=this.cache,s=e.length,a=dv(n,s);Ii(t,a)||(i.uniform1iv(this.addr,a),Ni(t,a));for(let l=0;l!==s;++l)n.setTexture2D(e[l]||NI,a[l])}function bZ(i,e,n){const t=this.cache,s=e.length,a=dv(n,s);Ii(t,a)||(i.uniform1iv(this.addr,a),Ni(t,a));for(let l=0;l!==s;++l)n.setTexture3D(e[l]||LI,a[l])}function _Z(i,e,n){const t=this.cache,s=e.length,a=dv(n,s);Ii(t,a)||(i.uniform1iv(this.addr,a),Ni(t,a));for(let l=0;l!==s;++l)n.setTextureCube(e[l]||BI,a[l])}function xZ(i,e,n){const t=this.cache,s=e.length,a=dv(n,s);Ii(t,a)||(i.uniform1iv(this.addr,a),Ni(t,a));for(let l=0;l!==s;++l)n.setTexture2DArray(e[l]||DI,a[l])}function wZ(i){switch(i){case 5126:return iZ;case 35664:return rZ;case 35665:return sZ;case 35666:return aZ;case 35674:return oZ;case 35675:return lZ;case 35676:return cZ;case 5124:case 35670:return uZ;case 35667:case 35671:return hZ;case 35668:case 35672:return dZ;case 35669:case 35673:return fZ;case 5125:return pZ;case 36294:return mZ;case 36295:return gZ;case 36296:return vZ;case 35678:case 36198:case 36298:case 36306:case 35682:return yZ;case 35679:case 36299:case 36307:return bZ;case 35680:case 36300:case 36308:case 36293:return _Z;case 36289:case 36303:case 36311:case 36292:return xZ}}class CZ{constructor(e,n,t){this.id=e,this.addr=t,this.cache=[],this.type=n.type,this.setValue=nZ(n.type)}}class SZ{constructor(e,n,t){this.id=e,this.addr=t,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=wZ(n.type)}}class EZ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,t){const s=this.seq;for(let a=0,l=s.length;a!==l;++a){const c=s[a];c.setValue(e,n[c.id],t)}}}const $1=/(\w+)(\])?(\[|\.)?/g;function _T(i,e){i.seq.push(e),i.map[e.id]=e}function MZ(i,e,n){const t=i.name,s=t.length;for($1.lastIndex=0;;){const a=$1.exec(t),l=$1.lastIndex;let c=a[1];const h=a[2]==="]",d=a[3];if(h&&(c=c|0),d===void 0||d==="["&&l+2===s){_T(n,d===void 0?new CZ(c,i,e):new SZ(c,i,e));break}else{let m=n.map[c];m===void 0&&(m=new EZ(c),_T(n,m)),n=m}}}class l0{constructor(e,n){this.seq=[],this.map={};const t=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let s=0;s<t;++s){const a=e.getActiveUniform(n,s),l=e.getUniformLocation(n,a.name);MZ(a,l,this)}}setValue(e,n,t,s){const a=this.map[n];a!==void 0&&a.setValue(e,t,s)}setOptional(e,n,t){const s=n[t];s!==void 0&&this.setValue(e,t,s)}static upload(e,n,t,s){for(let a=0,l=n.length;a!==l;++a){const c=n[a],h=t[c.id];h.needsUpdate!==!1&&c.setValue(e,h.value,s)}}static seqWithValue(e,n){const t=[];for(let s=0,a=e.length;s!==a;++s){const l=e[s];l.id in n&&t.push(l)}return t}}function xT(i,e,n){const t=i.createShader(e);return i.shaderSource(t,n),i.compileShader(t),t}const TZ=37297;let kZ=0;function AZ(i,e){const n=i.split(`
`),t=[],s=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let l=s;l<a;l++){const c=l+1;t.push(`${c===e?">":" "} ${c}: ${n[l]}`)}return t.join(`
`)}function PZ(i){const e=Rn.getPrimaries(Rn.workingColorSpace),n=Rn.getPrimaries(i);let t;switch(e===n?t="":e===Xf&&n===qf?t="LinearDisplayP3ToLinearSRGB":e===qf&&n===Xf&&(t="LinearSRGBToLinearDisplayP3"),i){case oo:case _p:return[t,"LinearTransferOETF"];case ts:case lv:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[t,"LinearTransferOETF"]}}function wT(i,e,n){const t=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(t&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const l=parseInt(a[1]);return n.toUpperCase()+`

`+s+`

`+AZ(i.getShaderSource(e),l)}else return s}function IZ(i,e){const n=PZ(e);return`vec4 ${i}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function NZ(i,e){let n;switch(e){case KP:n="Linear";break;case qP:n="Reinhard";break;case XP:n="OptimizedCineon";break;case Vx:n="ACESFilmic";break;case JP:n="AgX";break;case ZP:n="Neutral";break;case YP:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+i+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function RZ(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_f).join(`
`)}function DZ(i){const e=[];for(const n in i){const t=i[n];t!==!1&&e.push("#define "+n+" "+t)}return e.join(`
`)}function LZ(i,e){const n={},t=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<t;s++){const a=i.getActiveAttrib(e,s),l=a.name;let c=1;a.type===i.FLOAT_MAT2&&(c=2),a.type===i.FLOAT_MAT3&&(c=3),a.type===i.FLOAT_MAT4&&(c=4),n[l]={type:a.type,location:i.getAttribLocation(e,l),locationSize:c}}return n}function _f(i){return i!==""}function CT(i,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ST(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const BZ=/^[ \t]*#include +<([\w\d./]+)>/gm;function L_(i){return i.replace(BZ,VZ)}const OZ=new Map;function VZ(i,e){let n=rn[e];if(n===void 0){const t=OZ.get(e);if(t!==void 0)n=rn[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t);else throw new Error("Can not resolve #include <"+e+">")}return L_(n)}const FZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ET(i){return i.replace(FZ,UZ)}function UZ(i,e,n,t){let s="";for(let a=parseInt(e);a<parseInt(n);a++)s+=t.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function MT(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function zZ(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Bx?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Ox?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ia&&(e="SHADOWMAP_TYPE_VSM"),e}function $Z(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case to:case sl:e="ENVMAP_TYPE_CUBE";break;case vh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function HZ(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case sl:e="ENVMAP_MODE_REFRACTION";break}return e}function GZ(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case bp:e="ENVMAP_BLENDING_MULTIPLY";break;case WP:e="ENVMAP_BLENDING_MIX";break;case jP:e="ENVMAP_BLENDING_ADD";break}return e}function WZ(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,t=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:t,maxMip:n}}function jZ(i,e,n,t){const s=i.getContext(),a=n.defines;let l=n.vertexShader,c=n.fragmentShader;const h=zZ(n),d=$Z(n),p=HZ(n),m=GZ(n),v=WZ(n),y=RZ(n),b=DZ(a),S=s.createProgram();let C,E,w=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(C=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(_f).join(`
`),C.length>0&&(C+=`
`),E=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(_f).join(`
`),E.length>0&&(E+=`
`)):(C=[MT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_f).join(`
`),E=[MT(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",n.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ya?"#define TONE_MAPPING":"",n.toneMapping!==Ya?rn.tonemapping_pars_fragment:"",n.toneMapping!==Ya?NZ("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",rn.colorspace_pars_fragment,IZ("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(_f).join(`
`)),l=L_(l),l=CT(l,n),l=ST(l,n),c=L_(c),c=CT(c,n),c=ST(c,n),l=ET(l),c=ET(c),n.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,C=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,E=["#define varying in",n.glslVersion===R_?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===R_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const x=w+C+l,M=w+E+c,P=xT(s,s.VERTEX_SHADER,x),I=xT(s,s.FRAGMENT_SHADER,M);s.attachShader(S,P),s.attachShader(S,I),n.index0AttributeName!==void 0?s.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(S,0,"position"),s.linkProgram(S);function D(L){if(i.debug.checkShaderErrors){const V=s.getProgramInfoLog(S).trim(),R=s.getShaderInfoLog(P).trim(),B=s.getShaderInfoLog(I).trim();let F=!0,U=!0;if(s.getProgramParameter(S,s.LINK_STATUS)===!1)if(F=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,S,P,I);else{const q=wT(s,P,"vertex"),Y=wT(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(S,s.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+V+`
`+q+`
`+Y)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(R===""||B==="")&&(U=!1);U&&(L.diagnostics={runnable:F,programLog:V,vertexShader:{log:R,prefix:C},fragmentShader:{log:B,prefix:E}})}s.deleteShader(P),s.deleteShader(I),A=new l0(s,S),N=LZ(s,S)}let A;this.getUniforms=function(){return A===void 0&&D(this),A};let N;this.getAttributes=function(){return N===void 0&&D(this),N};let T=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=s.getProgramParameter(S,TZ)),T},this.destroy=function(){t.releaseStatesOfProgram(this),s.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=kZ++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=P,this.fragmentShader=I,this}let KZ=0;class qZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,t=e.fragmentShader,s=this._getShaderStage(n),a=this._getShaderStage(t),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(a)===!1&&(l.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const t of n)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let t=n.get(e);return t===void 0&&(t=new Set,n.set(e,t)),t}_getShaderStage(e){const n=this.shaderCache;let t=n.get(e);return t===void 0&&(t=new XZ(e),n.set(e,t)),t}}class XZ{constructor(e){this.id=KZ++,this.code=e,this.usedTimes=0}}function YZ(i,e,n,t,s,a,l){const c=new uv,h=new qZ,d=new Set,p=[],m=s.logarithmicDepthBuffer,v=s.vertexTextures;let y=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(N){return d.add(N),N===0?"uv":`uv${N}`}function C(N,T,L,V,R){const B=V.fog,F=R.geometry,U=N.isMeshStandardMaterial?V.environment:null,q=(N.isMeshStandardMaterial?n:e).get(N.envMap||U),Y=q&&q.mapping===vh?q.image.height:null,ne=b[N.type];N.precision!==null&&(y=s.getMaxPrecision(N.precision),y!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",y,"instead."));const de=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,ve=de!==void 0?de.length:0;let Re=0;F.morphAttributes.position!==void 0&&(Re=1),F.morphAttributes.normal!==void 0&&(Re=2),F.morphAttributes.color!==void 0&&(Re=3);let Ee,ce,Ce,Me;if(ne){const an=ys[ne];Ee=an.vertexShader,ce=an.fragmentShader}else Ee=N.vertexShader,ce=N.fragmentShader,h.update(N),Ce=h.getVertexShaderID(N),Me=h.getFragmentShaderID(N);const ee=i.getRenderTarget(),re=R.isInstancedMesh===!0,H=R.isBatchedMesh===!0,$=!!N.map,te=!!N.matcap,le=!!q,K=!!N.aoMap,X=!!N.lightMap,oe=!!N.bumpMap,fe=!!N.normalMap,be=!!N.displacementMap,ke=!!N.emissiveMap,J=!!N.metalnessMap,W=!!N.roughnessMap,ue=N.anisotropy>0,he=N.clearcoat>0,xe=N.dispersion>0,Te=N.iridescence>0,He=N.sheen>0,Be=N.transmission>0,ze=ue&&!!N.anisotropyMap,tt=he&&!!N.clearcoatMap,je=he&&!!N.clearcoatNormalMap,et=he&&!!N.clearcoatRoughnessMap,bt=Te&&!!N.iridescenceMap,_t=Te&&!!N.iridescenceThicknessMap,at=He&&!!N.sheenColorMap,Rt=He&&!!N.sheenRoughnessMap,Yt=!!N.specularMap,we=!!N.specularColorMap,Oe=!!N.specularIntensityMap,pe=Be&&!!N.transmissionMap,Ve=Be&&!!N.thicknessMap,$e=!!N.gradientMap,Ze=!!N.alphaMap,ot=N.alphaTest>0,hn=!!N.alphaHash,dn=!!N.extensions;let xn=Ya;N.toneMapped&&(ee===null||ee.isXRRenderTarget===!0)&&(xn=i.toneMapping);const Zn={shaderID:ne,shaderType:N.type,shaderName:N.name,vertexShader:Ee,fragmentShader:ce,defines:N.defines,customVertexShaderID:Ce,customFragmentShaderID:Me,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:y,batching:H,instancing:re,instancingColor:re&&R.instanceColor!==null,instancingMorph:re&&R.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:ee===null?i.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:oo,alphaToCoverage:!!N.alphaToCoverage,map:$,matcap:te,envMap:le,envMapMode:le&&q.mapping,envMapCubeUVHeight:Y,aoMap:K,lightMap:X,bumpMap:oe,normalMap:fe,displacementMap:v&&be,emissiveMap:ke,normalMapObjectSpace:fe&&N.normalMapType===pI,normalMapTangentSpace:fe&&N.normalMapType===hl,metalnessMap:J,roughnessMap:W,anisotropy:ue,anisotropyMap:ze,clearcoat:he,clearcoatMap:tt,clearcoatNormalMap:je,clearcoatRoughnessMap:et,dispersion:xe,iridescence:Te,iridescenceMap:bt,iridescenceThicknessMap:_t,sheen:He,sheenColorMap:at,sheenRoughnessMap:Rt,specularMap:Yt,specularColorMap:we,specularIntensityMap:Oe,transmission:Be,transmissionMap:pe,thicknessMap:Ve,gradientMap:$e,opaque:N.transparent===!1&&N.blending===cc&&N.alphaToCoverage===!1,alphaMap:Ze,alphaTest:ot,alphaHash:hn,combine:N.combine,mapUv:$&&S(N.map.channel),aoMapUv:K&&S(N.aoMap.channel),lightMapUv:X&&S(N.lightMap.channel),bumpMapUv:oe&&S(N.bumpMap.channel),normalMapUv:fe&&S(N.normalMap.channel),displacementMapUv:be&&S(N.displacementMap.channel),emissiveMapUv:ke&&S(N.emissiveMap.channel),metalnessMapUv:J&&S(N.metalnessMap.channel),roughnessMapUv:W&&S(N.roughnessMap.channel),anisotropyMapUv:ze&&S(N.anisotropyMap.channel),clearcoatMapUv:tt&&S(N.clearcoatMap.channel),clearcoatNormalMapUv:je&&S(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&S(N.clearcoatRoughnessMap.channel),iridescenceMapUv:bt&&S(N.iridescenceMap.channel),iridescenceThicknessMapUv:_t&&S(N.iridescenceThicknessMap.channel),sheenColorMapUv:at&&S(N.sheenColorMap.channel),sheenRoughnessMapUv:Rt&&S(N.sheenRoughnessMap.channel),specularMapUv:Yt&&S(N.specularMap.channel),specularColorMapUv:we&&S(N.specularColorMap.channel),specularIntensityMapUv:Oe&&S(N.specularIntensityMap.channel),transmissionMapUv:pe&&S(N.transmissionMap.channel),thicknessMapUv:Ve&&S(N.thicknessMap.channel),alphaMapUv:Ze&&S(N.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(fe||ue),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,pointsUvs:R.isPoints===!0&&!!F.attributes.uv&&($||Ze),fog:!!B,useFog:N.fog===!0,fogExp2:!!B&&B.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:m,skinning:R.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:ve,morphTextureStride:Re,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&L.length>0,shadowMapType:i.shadowMap.type,toneMapping:xn,useLegacyLights:i._useLegacyLights,decodeVideoTexture:$&&N.map.isVideoTexture===!0&&Rn.getTransfer(N.map.colorSpace)===Hn,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Lr,flipSided:N.side===er,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:dn&&N.extensions.clipCullDistance===!0&&t.has("WEBGL_clip_cull_distance"),extensionMultiDraw:dn&&N.extensions.multiDraw===!0&&t.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:t.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Zn.vertexUv1s=d.has(1),Zn.vertexUv2s=d.has(2),Zn.vertexUv3s=d.has(3),d.clear(),Zn}function E(N){const T=[];if(N.shaderID?T.push(N.shaderID):(T.push(N.customVertexShaderID),T.push(N.customFragmentShaderID)),N.defines!==void 0)for(const L in N.defines)T.push(L),T.push(N.defines[L]);return N.isRawShaderMaterial===!1&&(w(T,N),x(T,N),T.push(i.outputColorSpace)),T.push(N.customProgramCacheKey),T.join()}function w(N,T){N.push(T.precision),N.push(T.outputColorSpace),N.push(T.envMapMode),N.push(T.envMapCubeUVHeight),N.push(T.mapUv),N.push(T.alphaMapUv),N.push(T.lightMapUv),N.push(T.aoMapUv),N.push(T.bumpMapUv),N.push(T.normalMapUv),N.push(T.displacementMapUv),N.push(T.emissiveMapUv),N.push(T.metalnessMapUv),N.push(T.roughnessMapUv),N.push(T.anisotropyMapUv),N.push(T.clearcoatMapUv),N.push(T.clearcoatNormalMapUv),N.push(T.clearcoatRoughnessMapUv),N.push(T.iridescenceMapUv),N.push(T.iridescenceThicknessMapUv),N.push(T.sheenColorMapUv),N.push(T.sheenRoughnessMapUv),N.push(T.specularMapUv),N.push(T.specularColorMapUv),N.push(T.specularIntensityMapUv),N.push(T.transmissionMapUv),N.push(T.thicknessMapUv),N.push(T.combine),N.push(T.fogExp2),N.push(T.sizeAttenuation),N.push(T.morphTargetsCount),N.push(T.morphAttributeCount),N.push(T.numDirLights),N.push(T.numPointLights),N.push(T.numSpotLights),N.push(T.numSpotLightMaps),N.push(T.numHemiLights),N.push(T.numRectAreaLights),N.push(T.numDirLightShadows),N.push(T.numPointLightShadows),N.push(T.numSpotLightShadows),N.push(T.numSpotLightShadowsWithMaps),N.push(T.numLightProbes),N.push(T.shadowMapType),N.push(T.toneMapping),N.push(T.numClippingPlanes),N.push(T.numClipIntersection),N.push(T.depthPacking)}function x(N,T){c.disableAll(),T.supportsVertexTextures&&c.enable(0),T.instancing&&c.enable(1),T.instancingColor&&c.enable(2),T.instancingMorph&&c.enable(3),T.matcap&&c.enable(4),T.envMap&&c.enable(5),T.normalMapObjectSpace&&c.enable(6),T.normalMapTangentSpace&&c.enable(7),T.clearcoat&&c.enable(8),T.iridescence&&c.enable(9),T.alphaTest&&c.enable(10),T.vertexColors&&c.enable(11),T.vertexAlphas&&c.enable(12),T.vertexUv1s&&c.enable(13),T.vertexUv2s&&c.enable(14),T.vertexUv3s&&c.enable(15),T.vertexTangents&&c.enable(16),T.anisotropy&&c.enable(17),T.alphaHash&&c.enable(18),T.batching&&c.enable(19),T.dispersion&&c.enable(20),N.push(c.mask),c.disableAll(),T.fog&&c.enable(0),T.useFog&&c.enable(1),T.flatShading&&c.enable(2),T.logarithmicDepthBuffer&&c.enable(3),T.skinning&&c.enable(4),T.morphTargets&&c.enable(5),T.morphNormals&&c.enable(6),T.morphColors&&c.enable(7),T.premultipliedAlpha&&c.enable(8),T.shadowMapEnabled&&c.enable(9),T.useLegacyLights&&c.enable(10),T.doubleSided&&c.enable(11),T.flipSided&&c.enable(12),T.useDepthPacking&&c.enable(13),T.dithering&&c.enable(14),T.transmission&&c.enable(15),T.sheen&&c.enable(16),T.opaque&&c.enable(17),T.pointsUvs&&c.enable(18),T.decodeVideoTexture&&c.enable(19),T.alphaToCoverage&&c.enable(20),N.push(c.mask)}function M(N){const T=b[N.type];let L;if(T){const V=ys[T];L=xp.clone(V.uniforms)}else L=N.uniforms;return L}function P(N,T){let L;for(let V=0,R=p.length;V<R;V++){const B=p[V];if(B.cacheKey===T){L=B,++L.usedTimes;break}}return L===void 0&&(L=new jZ(i,T,N,a),p.push(L)),L}function I(N){if(--N.usedTimes===0){const T=p.indexOf(N);p[T]=p[p.length-1],p.pop(),N.destroy()}}function D(N){h.remove(N)}function A(){h.dispose()}return{getParameters:C,getProgramCacheKey:E,getUniforms:M,acquireProgram:P,releaseProgram:I,releaseShaderCache:D,programs:p,dispose:A}}function JZ(){let i=new WeakMap;function e(a){let l=i.get(a);return l===void 0&&(l={},i.set(a,l)),l}function n(a){i.delete(a)}function t(a,l,c){i.get(a)[l]=c}function s(){i=new WeakMap}return{get:e,remove:n,update:t,dispose:s}}function ZZ(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function TT(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function kT(){const i=[];let e=0;const n=[],t=[],s=[];function a(){e=0,n.length=0,t.length=0,s.length=0}function l(m,v,y,b,S,C){let E=i[e];return E===void 0?(E={id:m.id,object:m,geometry:v,material:y,groupOrder:b,renderOrder:m.renderOrder,z:S,group:C},i[e]=E):(E.id=m.id,E.object=m,E.geometry=v,E.material=y,E.groupOrder=b,E.renderOrder=m.renderOrder,E.z=S,E.group=C),e++,E}function c(m,v,y,b,S,C){const E=l(m,v,y,b,S,C);y.transmission>0?t.push(E):y.transparent===!0?s.push(E):n.push(E)}function h(m,v,y,b,S,C){const E=l(m,v,y,b,S,C);y.transmission>0?t.unshift(E):y.transparent===!0?s.unshift(E):n.unshift(E)}function d(m,v){n.length>1&&n.sort(m||ZZ),t.length>1&&t.sort(v||TT),s.length>1&&s.sort(v||TT)}function p(){for(let m=e,v=i.length;m<v;m++){const y=i[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:n,transmissive:t,transparent:s,init:a,push:c,unshift:h,finish:p,sort:d}}function QZ(){let i=new WeakMap;function e(t,s){const a=i.get(t);let l;return a===void 0?(l=new kT,i.set(t,[l])):s>=a.length?(l=new kT,a.push(l)):l=a[s],l}function n(){i=new WeakMap}return{get:e,dispose:n}}function eQ(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Q,color:new Qe};break;case"SpotLight":n={position:new Q,direction:new Q,color:new Qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Q,color:new Qe,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Q,skyColor:new Qe,groundColor:new Qe};break;case"RectAreaLight":n={color:new Qe,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return i[e.id]=n,n}}}function tQ(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=n,n}}}let nQ=0;function iQ(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function rQ(i){const e=new eQ,n=tQ(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)t.probe.push(new Q);const s=new Q,a=new ct,l=new ct;function c(d,p){let m=0,v=0,y=0;for(let L=0;L<9;L++)t.probe[L].set(0,0,0);let b=0,S=0,C=0,E=0,w=0,x=0,M=0,P=0,I=0,D=0,A=0;d.sort(iQ);const N=p===!0?Math.PI:1;for(let L=0,V=d.length;L<V;L++){const R=d[L],B=R.color,F=R.intensity,U=R.distance,q=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)m+=B.r*F*N,v+=B.g*F*N,y+=B.b*F*N;else if(R.isLightProbe){for(let Y=0;Y<9;Y++)t.probe[Y].addScaledVector(R.sh.coefficients[Y],F);A++}else if(R.isDirectionalLight){const Y=e.get(R);if(Y.color.copy(R.color).multiplyScalar(R.intensity*N),R.castShadow){const ne=R.shadow,de=n.get(R);de.shadowBias=ne.bias,de.shadowNormalBias=ne.normalBias,de.shadowRadius=ne.radius,de.shadowMapSize=ne.mapSize,t.directionalShadow[b]=de,t.directionalShadowMap[b]=q,t.directionalShadowMatrix[b]=R.shadow.matrix,x++}t.directional[b]=Y,b++}else if(R.isSpotLight){const Y=e.get(R);Y.position.setFromMatrixPosition(R.matrixWorld),Y.color.copy(B).multiplyScalar(F*N),Y.distance=U,Y.coneCos=Math.cos(R.angle),Y.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),Y.decay=R.decay,t.spot[C]=Y;const ne=R.shadow;if(R.map&&(t.spotLightMap[I]=R.map,I++,ne.updateMatrices(R),R.castShadow&&D++),t.spotLightMatrix[C]=ne.matrix,R.castShadow){const de=n.get(R);de.shadowBias=ne.bias,de.shadowNormalBias=ne.normalBias,de.shadowRadius=ne.radius,de.shadowMapSize=ne.mapSize,t.spotShadow[C]=de,t.spotShadowMap[C]=q,P++}C++}else if(R.isRectAreaLight){const Y=e.get(R);Y.color.copy(B).multiplyScalar(F),Y.halfWidth.set(R.width*.5,0,0),Y.halfHeight.set(0,R.height*.5,0),t.rectArea[E]=Y,E++}else if(R.isPointLight){const Y=e.get(R);if(Y.color.copy(R.color).multiplyScalar(R.intensity*N),Y.distance=R.distance,Y.decay=R.decay,R.castShadow){const ne=R.shadow,de=n.get(R);de.shadowBias=ne.bias,de.shadowNormalBias=ne.normalBias,de.shadowRadius=ne.radius,de.shadowMapSize=ne.mapSize,de.shadowCameraNear=ne.camera.near,de.shadowCameraFar=ne.camera.far,t.pointShadow[S]=de,t.pointShadowMap[S]=q,t.pointShadowMatrix[S]=R.shadow.matrix,M++}t.point[S]=Y,S++}else if(R.isHemisphereLight){const Y=e.get(R);Y.skyColor.copy(R.color).multiplyScalar(F*N),Y.groundColor.copy(R.groundColor).multiplyScalar(F*N),t.hemi[w]=Y,w++}}E>0&&(i.has("OES_texture_float_linear")===!0?(t.rectAreaLTC1=it.LTC_FLOAT_1,t.rectAreaLTC2=it.LTC_FLOAT_2):(t.rectAreaLTC1=it.LTC_HALF_1,t.rectAreaLTC2=it.LTC_HALF_2)),t.ambient[0]=m,t.ambient[1]=v,t.ambient[2]=y;const T=t.hash;(T.directionalLength!==b||T.pointLength!==S||T.spotLength!==C||T.rectAreaLength!==E||T.hemiLength!==w||T.numDirectionalShadows!==x||T.numPointShadows!==M||T.numSpotShadows!==P||T.numSpotMaps!==I||T.numLightProbes!==A)&&(t.directional.length=b,t.spot.length=C,t.rectArea.length=E,t.point.length=S,t.hemi.length=w,t.directionalShadow.length=x,t.directionalShadowMap.length=x,t.pointShadow.length=M,t.pointShadowMap.length=M,t.spotShadow.length=P,t.spotShadowMap.length=P,t.directionalShadowMatrix.length=x,t.pointShadowMatrix.length=M,t.spotLightMatrix.length=P+I-D,t.spotLightMap.length=I,t.numSpotLightShadowsWithMaps=D,t.numLightProbes=A,T.directionalLength=b,T.pointLength=S,T.spotLength=C,T.rectAreaLength=E,T.hemiLength=w,T.numDirectionalShadows=x,T.numPointShadows=M,T.numSpotShadows=P,T.numSpotMaps=I,T.numLightProbes=A,t.version=nQ++)}function h(d,p){let m=0,v=0,y=0,b=0,S=0;const C=p.matrixWorldInverse;for(let E=0,w=d.length;E<w;E++){const x=d[E];if(x.isDirectionalLight){const M=t.directional[m];M.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(C),m++}else if(x.isSpotLight){const M=t.spot[y];M.position.setFromMatrixPosition(x.matrixWorld),M.position.applyMatrix4(C),M.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(C),y++}else if(x.isRectAreaLight){const M=t.rectArea[b];M.position.setFromMatrixPosition(x.matrixWorld),M.position.applyMatrix4(C),l.identity(),a.copy(x.matrixWorld),a.premultiply(C),l.extractRotation(a),M.halfWidth.set(x.width*.5,0,0),M.halfHeight.set(0,x.height*.5,0),M.halfWidth.applyMatrix4(l),M.halfHeight.applyMatrix4(l),b++}else if(x.isPointLight){const M=t.point[v];M.position.setFromMatrixPosition(x.matrixWorld),M.position.applyMatrix4(C),v++}else if(x.isHemisphereLight){const M=t.hemi[S];M.direction.setFromMatrixPosition(x.matrixWorld),M.direction.transformDirection(C),S++}}}return{setup:c,setupView:h,state:t}}function AT(i){const e=new rQ(i),n=[],t=[];function s(p){d.camera=p,n.length=0,t.length=0}function a(p){n.push(p)}function l(p){t.push(p)}function c(p){e.setup(n,p)}function h(p){e.setupView(n,p)}const d={lightsArray:n,shadowsArray:t,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:d,setupLights:c,setupLightsView:h,pushLight:a,pushShadow:l}}function sQ(i){let e=new WeakMap;function n(s,a=0){const l=e.get(s);let c;return l===void 0?(c=new AT(i),e.set(s,[c])):a>=l.length?(c=new AT(i),l.push(c)):c=l[a],c}function t(){e=new WeakMap}return{get:n,dispose:t}}class ew extends tr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=dI,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tw extends tr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const aQ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,oQ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function lQ(i,e,n){let t=new Sp;const s=new Ge,a=new Ge,l=new ln,c=new ew({depthPacking:fI}),h=new tw,d={},p=n.maxTextureSize,m={[eo]:er,[er]:eo,[Lr]:Lr},v=new yr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:aQ,fragmentShader:oQ}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const b=new Xt;b.setAttribute("position",new wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Fn(b,v),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bx;let E=this.type;this.render=function(I,D,A){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||I.length===0)return;const N=i.getRenderTarget(),T=i.getActiveCubeFace(),L=i.getActiveMipmapLevel(),V=i.state;V.setBlending(Xa),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const R=E!==ia&&this.type===ia,B=E===ia&&this.type!==ia;for(let F=0,U=I.length;F<U;F++){const q=I[F],Y=q.shadow;if(Y===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;s.copy(Y.mapSize);const ne=Y.getFrameExtents();if(s.multiply(ne),a.copy(Y.mapSize),(s.x>p||s.y>p)&&(s.x>p&&(a.x=Math.floor(p/ne.x),s.x=a.x*ne.x,Y.mapSize.x=a.x),s.y>p&&(a.y=Math.floor(p/ne.y),s.y=a.y*ne.y,Y.mapSize.y=a.y)),Y.map===null||R===!0||B===!0){const ve=this.type!==ia?{minFilter:ki,magFilter:ki}:{};Y.map!==null&&Y.map.dispose(),Y.map=new Ss(s.x,s.y,ve),Y.map.texture.name=q.name+".shadowMap",Y.camera.updateProjectionMatrix()}i.setRenderTarget(Y.map),i.clear();const de=Y.getViewportCount();for(let ve=0;ve<de;ve++){const Re=Y.getViewport(ve);l.set(a.x*Re.x,a.y*Re.y,a.x*Re.z,a.y*Re.w),V.viewport(l),Y.updateMatrices(q,ve),t=Y.getFrustum(),M(D,A,Y.camera,q,this.type)}Y.isPointLightShadow!==!0&&this.type===ia&&w(Y,A),Y.needsUpdate=!1}E=this.type,C.needsUpdate=!1,i.setRenderTarget(N,T,L)};function w(I,D){const A=e.update(S);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,y.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Ss(s.x,s.y)),v.uniforms.shadow_pass.value=I.map.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(D,null,A,v,S,null),y.uniforms.shadow_pass.value=I.mapPass.texture,y.uniforms.resolution.value=I.mapSize,y.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(D,null,A,y,S,null)}function x(I,D,A,N){let T=null;const L=A.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(L!==void 0)T=L;else if(T=A.isPointLight===!0?h:c,i.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const V=T.uuid,R=D.uuid;let B=d[V];B===void 0&&(B={},d[V]=B);let F=B[R];F===void 0&&(F=T.clone(),B[R]=F,D.addEventListener("dispose",P)),T=F}if(T.visible=D.visible,T.wireframe=D.wireframe,N===ia?T.side=D.shadowSide!==null?D.shadowSide:D.side:T.side=D.shadowSide!==null?D.shadowSide:m[D.side],T.alphaMap=D.alphaMap,T.alphaTest=D.alphaTest,T.map=D.map,T.clipShadows=D.clipShadows,T.clippingPlanes=D.clippingPlanes,T.clipIntersection=D.clipIntersection,T.displacementMap=D.displacementMap,T.displacementScale=D.displacementScale,T.displacementBias=D.displacementBias,T.wireframeLinewidth=D.wireframeLinewidth,T.linewidth=D.linewidth,A.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const V=i.properties.get(T);V.light=A}return T}function M(I,D,A,N,T){if(I.visible===!1)return;if(I.layers.test(D.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&T===ia)&&(!I.frustumCulled||t.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,I.matrixWorld);const R=e.update(I),B=I.material;if(Array.isArray(B)){const F=R.groups;for(let U=0,q=F.length;U<q;U++){const Y=F[U],ne=B[Y.materialIndex];if(ne&&ne.visible){const de=x(I,ne,N,T);I.onBeforeShadow(i,I,D,A,R,de,Y),i.renderBufferDirect(A,null,R,de,I,Y),I.onAfterShadow(i,I,D,A,R,de,Y)}}}else if(B.visible){const F=x(I,B,N,T);I.onBeforeShadow(i,I,D,A,R,F,null),i.renderBufferDirect(A,null,R,F,I,null),I.onAfterShadow(i,I,D,A,R,F,null)}}const V=I.children;for(let R=0,B=V.length;R<B;R++)M(V[R],D,A,N,T)}function P(I){I.target.removeEventListener("dispose",P);for(const A in d){const N=d[A],T=I.target.uuid;T in N&&(N[T].dispose(),delete N[T])}}}function cQ(i){function e(){let pe=!1;const Ve=new ln;let $e=null;const Ze=new ln(0,0,0,0);return{setMask:function(ot){$e!==ot&&!pe&&(i.colorMask(ot,ot,ot,ot),$e=ot)},setLocked:function(ot){pe=ot},setClear:function(ot,hn,dn,xn,Zn){Zn===!0&&(ot*=xn,hn*=xn,dn*=xn),Ve.set(ot,hn,dn,xn),Ze.equals(Ve)===!1&&(i.clearColor(ot,hn,dn,xn),Ze.copy(Ve))},reset:function(){pe=!1,$e=null,Ze.set(-1,0,0,0)}}}function n(){let pe=!1,Ve=null,$e=null,Ze=null;return{setTest:function(ot){ot?Me(i.DEPTH_TEST):ee(i.DEPTH_TEST)},setMask:function(ot){Ve!==ot&&!pe&&(i.depthMask(ot),Ve=ot)},setFunc:function(ot){if($e!==ot){switch(ot){case VP:i.depthFunc(i.NEVER);break;case FP:i.depthFunc(i.ALWAYS);break;case UP:i.depthFunc(i.LESS);break;case Gf:i.depthFunc(i.LEQUAL);break;case zP:i.depthFunc(i.EQUAL);break;case $P:i.depthFunc(i.GEQUAL);break;case HP:i.depthFunc(i.GREATER);break;case GP:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}$e=ot}},setLocked:function(ot){pe=ot},setClear:function(ot){Ze!==ot&&(i.clearDepth(ot),Ze=ot)},reset:function(){pe=!1,Ve=null,$e=null,Ze=null}}}function t(){let pe=!1,Ve=null,$e=null,Ze=null,ot=null,hn=null,dn=null,xn=null,Zn=null;return{setTest:function(an){pe||(an?Me(i.STENCIL_TEST):ee(i.STENCIL_TEST))},setMask:function(an){Ve!==an&&!pe&&(i.stencilMask(an),Ve=an)},setFunc:function(an,Ri,ni){($e!==an||Ze!==Ri||ot!==ni)&&(i.stencilFunc(an,Ri,ni),$e=an,Ze=Ri,ot=ni)},setOp:function(an,Ri,ni){(hn!==an||dn!==Ri||xn!==ni)&&(i.stencilOp(an,Ri,ni),hn=an,dn=Ri,xn=ni)},setLocked:function(an){pe=an},setClear:function(an){Zn!==an&&(i.clearStencil(an),Zn=an)},reset:function(){pe=!1,Ve=null,$e=null,Ze=null,ot=null,hn=null,dn=null,xn=null,Zn=null}}}const s=new e,a=new n,l=new t,c=new WeakMap,h=new WeakMap;let d={},p={},m=new WeakMap,v=[],y=null,b=!1,S=null,C=null,E=null,w=null,x=null,M=null,P=null,I=new Qe(0,0,0),D=0,A=!1,N=null,T=null,L=null,V=null,R=null;const B=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,U=0;const q=i.getParameter(i.VERSION);q.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(q)[1]),F=U>=1):q.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),F=U>=2);let Y=null,ne={};const de=i.getParameter(i.SCISSOR_BOX),ve=i.getParameter(i.VIEWPORT),Re=new ln().fromArray(de),Ee=new ln().fromArray(ve);function ce(pe,Ve,$e,Ze){const ot=new Uint8Array(4),hn=i.createTexture();i.bindTexture(pe,hn),i.texParameteri(pe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(pe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let dn=0;dn<$e;dn++)pe===i.TEXTURE_3D||pe===i.TEXTURE_2D_ARRAY?i.texImage3D(Ve,0,i.RGBA,1,1,Ze,0,i.RGBA,i.UNSIGNED_BYTE,ot):i.texImage2D(Ve+dn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ot);return hn}const Ce={};Ce[i.TEXTURE_2D]=ce(i.TEXTURE_2D,i.TEXTURE_2D,1),Ce[i.TEXTURE_CUBE_MAP]=ce(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ce[i.TEXTURE_2D_ARRAY]=ce(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ce[i.TEXTURE_3D]=ce(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Me(i.DEPTH_TEST),a.setFunc(Gf),oe(!1),fe(n_),Me(i.CULL_FACE),K(Xa);function Me(pe){d[pe]!==!0&&(i.enable(pe),d[pe]=!0)}function ee(pe){d[pe]!==!1&&(i.disable(pe),d[pe]=!1)}function re(pe,Ve){return p[pe]!==Ve?(i.bindFramebuffer(pe,Ve),p[pe]=Ve,pe===i.DRAW_FRAMEBUFFER&&(p[i.FRAMEBUFFER]=Ve),pe===i.FRAMEBUFFER&&(p[i.DRAW_FRAMEBUFFER]=Ve),!0):!1}function H(pe,Ve){let $e=v,Ze=!1;if(pe){$e=m.get(Ve),$e===void 0&&($e=[],m.set(Ve,$e));const ot=pe.textures;if($e.length!==ot.length||$e[0]!==i.COLOR_ATTACHMENT0){for(let hn=0,dn=ot.length;hn<dn;hn++)$e[hn]=i.COLOR_ATTACHMENT0+hn;$e.length=ot.length,Ze=!0}}else $e[0]!==i.BACK&&($e[0]=i.BACK,Ze=!0);Ze&&i.drawBuffers($e)}function $(pe){return y!==pe?(i.useProgram(pe),y=pe,!0):!1}const te={[Yo]:i.FUNC_ADD,[xP]:i.FUNC_SUBTRACT,[wP]:i.FUNC_REVERSE_SUBTRACT};te[CP]=i.MIN,te[SP]=i.MAX;const le={[EP]:i.ZERO,[MP]:i.ONE,[TP]:i.SRC_COLOR,[P0]:i.SRC_ALPHA,[RP]:i.SRC_ALPHA_SATURATE,[IP]:i.DST_COLOR,[AP]:i.DST_ALPHA,[kP]:i.ONE_MINUS_SRC_COLOR,[I0]:i.ONE_MINUS_SRC_ALPHA,[NP]:i.ONE_MINUS_DST_COLOR,[PP]:i.ONE_MINUS_DST_ALPHA,[DP]:i.CONSTANT_COLOR,[LP]:i.ONE_MINUS_CONSTANT_COLOR,[BP]:i.CONSTANT_ALPHA,[OP]:i.ONE_MINUS_CONSTANT_ALPHA};function K(pe,Ve,$e,Ze,ot,hn,dn,xn,Zn,an){if(pe===Xa){b===!0&&(ee(i.BLEND),b=!1);return}if(b===!1&&(Me(i.BLEND),b=!0),pe!==_P){if(pe!==S||an!==A){if((C!==Yo||x!==Yo)&&(i.blendEquation(i.FUNC_ADD),C=Yo,x=Yo),an)switch(pe){case cc:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case A0:i.blendFunc(i.ONE,i.ONE);break;case i_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case r_:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case cc:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case A0:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case i_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case r_:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}E=null,w=null,M=null,P=null,I.set(0,0,0),D=0,S=pe,A=an}return}ot=ot||Ve,hn=hn||$e,dn=dn||Ze,(Ve!==C||ot!==x)&&(i.blendEquationSeparate(te[Ve],te[ot]),C=Ve,x=ot),($e!==E||Ze!==w||hn!==M||dn!==P)&&(i.blendFuncSeparate(le[$e],le[Ze],le[hn],le[dn]),E=$e,w=Ze,M=hn,P=dn),(xn.equals(I)===!1||Zn!==D)&&(i.blendColor(xn.r,xn.g,xn.b,Zn),I.copy(xn),D=Zn),S=pe,A=!1}function X(pe,Ve){pe.side===Lr?ee(i.CULL_FACE):Me(i.CULL_FACE);let $e=pe.side===er;Ve&&($e=!$e),oe($e),pe.blending===cc&&pe.transparent===!1?K(Xa):K(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),a.setFunc(pe.depthFunc),a.setTest(pe.depthTest),a.setMask(pe.depthWrite),s.setMask(pe.colorWrite);const Ze=pe.stencilWrite;l.setTest(Ze),Ze&&(l.setMask(pe.stencilWriteMask),l.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),l.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),ke(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?Me(i.SAMPLE_ALPHA_TO_COVERAGE):ee(i.SAMPLE_ALPHA_TO_COVERAGE)}function oe(pe){N!==pe&&(pe?i.frontFace(i.CW):i.frontFace(i.CCW),N=pe)}function fe(pe){pe!==yP?(Me(i.CULL_FACE),pe!==T&&(pe===n_?i.cullFace(i.BACK):pe===bP?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):ee(i.CULL_FACE),T=pe}function be(pe){pe!==L&&(F&&i.lineWidth(pe),L=pe)}function ke(pe,Ve,$e){pe?(Me(i.POLYGON_OFFSET_FILL),(V!==Ve||R!==$e)&&(i.polygonOffset(Ve,$e),V=Ve,R=$e)):ee(i.POLYGON_OFFSET_FILL)}function J(pe){pe?Me(i.SCISSOR_TEST):ee(i.SCISSOR_TEST)}function W(pe){pe===void 0&&(pe=i.TEXTURE0+B-1),Y!==pe&&(i.activeTexture(pe),Y=pe)}function ue(pe,Ve,$e){$e===void 0&&(Y===null?$e=i.TEXTURE0+B-1:$e=Y);let Ze=ne[$e];Ze===void 0&&(Ze={type:void 0,texture:void 0},ne[$e]=Ze),(Ze.type!==pe||Ze.texture!==Ve)&&(Y!==$e&&(i.activeTexture($e),Y=$e),i.bindTexture(pe,Ve||Ce[pe]),Ze.type=pe,Ze.texture=Ve)}function he(){const pe=ne[Y];pe!==void 0&&pe.type!==void 0&&(i.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function xe(){try{i.compressedTexImage2D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Te(){try{i.compressedTexImage3D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function He(){try{i.texSubImage2D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Be(){try{i.texSubImage3D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ze(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function tt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function je(){try{i.texStorage2D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function et(){try{i.texStorage3D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function bt(){try{i.texImage2D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function _t(){try{i.texImage3D.apply(i,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function at(pe){Re.equals(pe)===!1&&(i.scissor(pe.x,pe.y,pe.z,pe.w),Re.copy(pe))}function Rt(pe){Ee.equals(pe)===!1&&(i.viewport(pe.x,pe.y,pe.z,pe.w),Ee.copy(pe))}function Yt(pe,Ve){let $e=h.get(Ve);$e===void 0&&($e=new WeakMap,h.set(Ve,$e));let Ze=$e.get(pe);Ze===void 0&&(Ze=i.getUniformBlockIndex(Ve,pe.name),$e.set(pe,Ze))}function we(pe,Ve){const Ze=h.get(Ve).get(pe);c.get(Ve)!==Ze&&(i.uniformBlockBinding(Ve,Ze,pe.__bindingPointIndex),c.set(Ve,Ze))}function Oe(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},Y=null,ne={},p={},m=new WeakMap,v=[],y=null,b=!1,S=null,C=null,E=null,w=null,x=null,M=null,P=null,I=new Qe(0,0,0),D=0,A=!1,N=null,T=null,L=null,V=null,R=null,Re.set(0,0,i.canvas.width,i.canvas.height),Ee.set(0,0,i.canvas.width,i.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:Me,disable:ee,bindFramebuffer:re,drawBuffers:H,useProgram:$,setBlending:K,setMaterial:X,setFlipSided:oe,setCullFace:fe,setLineWidth:be,setPolygonOffset:ke,setScissorTest:J,activeTexture:W,bindTexture:ue,unbindTexture:he,compressedTexImage2D:xe,compressedTexImage3D:Te,texImage2D:bt,texImage3D:_t,updateUBOMapping:Yt,uniformBlockBinding:we,texStorage2D:je,texStorage3D:et,texSubImage2D:He,texSubImage3D:Be,compressedTexSubImage2D:ze,compressedTexSubImage3D:tt,scissor:at,viewport:Rt,reset:Oe}}function uQ(i,e,n,t,s,a,l){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Ge,p=new WeakMap;let m;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(J,W){return y?new OffscreenCanvas(J,W):Zf("canvas")}function S(J,W,ue){let he=1;const xe=ke(J);if((xe.width>ue||xe.height>ue)&&(he=ue/Math.max(xe.width,xe.height)),he<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Te=Math.floor(he*xe.width),He=Math.floor(he*xe.height);m===void 0&&(m=b(Te,He));const Be=W?b(Te,He):m;return Be.width=Te,Be.height=He,Be.getContext("2d").drawImage(J,0,0,Te,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+Te+"x"+He+")."),Be}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),J;return J}function C(J){return J.generateMipmaps&&J.minFilter!==ki&&J.minFilter!==gi}function E(J){i.generateMipmap(J)}function w(J,W,ue,he,xe=!1){if(J!==null){if(i[J]!==void 0)return i[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Te=W;if(W===i.RED&&(ue===i.FLOAT&&(Te=i.R32F),ue===i.HALF_FLOAT&&(Te=i.R16F),ue===i.UNSIGNED_BYTE&&(Te=i.R8)),W===i.RED_INTEGER&&(ue===i.UNSIGNED_BYTE&&(Te=i.R8UI),ue===i.UNSIGNED_SHORT&&(Te=i.R16UI),ue===i.UNSIGNED_INT&&(Te=i.R32UI),ue===i.BYTE&&(Te=i.R8I),ue===i.SHORT&&(Te=i.R16I),ue===i.INT&&(Te=i.R32I)),W===i.RG&&(ue===i.FLOAT&&(Te=i.RG32F),ue===i.HALF_FLOAT&&(Te=i.RG16F),ue===i.UNSIGNED_BYTE&&(Te=i.RG8)),W===i.RG_INTEGER&&(ue===i.UNSIGNED_BYTE&&(Te=i.RG8UI),ue===i.UNSIGNED_SHORT&&(Te=i.RG16UI),ue===i.UNSIGNED_INT&&(Te=i.RG32UI),ue===i.BYTE&&(Te=i.RG8I),ue===i.SHORT&&(Te=i.RG16I),ue===i.INT&&(Te=i.RG32I)),W===i.RGB&&ue===i.UNSIGNED_INT_5_9_9_9_REV&&(Te=i.RGB9_E5),W===i.RGBA){const He=xe?Kf:Rn.getTransfer(he);ue===i.FLOAT&&(Te=i.RGBA32F),ue===i.HALF_FLOAT&&(Te=i.RGBA16F),ue===i.UNSIGNED_BYTE&&(Te=He===Hn?i.SRGB8_ALPHA8:i.RGBA8),ue===i.UNSIGNED_SHORT_4_4_4_4&&(Te=i.RGBA4),ue===i.UNSIGNED_SHORT_5_5_5_1&&(Te=i.RGB5_A1)}return(Te===i.R16F||Te===i.R32F||Te===i.RG16F||Te===i.RG32F||Te===i.RGBA16F||Te===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function x(J,W){return C(J)===!0||J.isFramebufferTexture&&J.minFilter!==ki&&J.minFilter!==gi?Math.log2(Math.max(W.width,W.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?W.mipmaps.length:1}function M(J){const W=J.target;W.removeEventListener("dispose",M),I(W),W.isVideoTexture&&p.delete(W)}function P(J){const W=J.target;W.removeEventListener("dispose",P),A(W)}function I(J){const W=t.get(J);if(W.__webglInit===void 0)return;const ue=J.source,he=v.get(ue);if(he){const xe=he[W.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&D(J),Object.keys(he).length===0&&v.delete(ue)}t.remove(J)}function D(J){const W=t.get(J);i.deleteTexture(W.__webglTexture);const ue=J.source,he=v.get(ue);delete he[W.__cacheKey],l.memory.textures--}function A(J){const W=t.get(J);if(J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(W.__webglFramebuffer[he]))for(let xe=0;xe<W.__webglFramebuffer[he].length;xe++)i.deleteFramebuffer(W.__webglFramebuffer[he][xe]);else i.deleteFramebuffer(W.__webglFramebuffer[he]);W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer[he])}else{if(Array.isArray(W.__webglFramebuffer))for(let he=0;he<W.__webglFramebuffer.length;he++)i.deleteFramebuffer(W.__webglFramebuffer[he]);else i.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&i.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&i.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let he=0;he<W.__webglColorRenderbuffer.length;he++)W.__webglColorRenderbuffer[he]&&i.deleteRenderbuffer(W.__webglColorRenderbuffer[he]);W.__webglDepthRenderbuffer&&i.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const ue=J.textures;for(let he=0,xe=ue.length;he<xe;he++){const Te=t.get(ue[he]);Te.__webglTexture&&(i.deleteTexture(Te.__webglTexture),l.memory.textures--),t.remove(ue[he])}t.remove(J)}let N=0;function T(){N=0}function L(){const J=N;return J>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+s.maxTextures),N+=1,J}function V(J){const W=[];return W.push(J.wrapS),W.push(J.wrapT),W.push(J.wrapR||0),W.push(J.magFilter),W.push(J.minFilter),W.push(J.anisotropy),W.push(J.internalFormat),W.push(J.format),W.push(J.type),W.push(J.generateMipmaps),W.push(J.premultiplyAlpha),W.push(J.flipY),W.push(J.unpackAlignment),W.push(J.colorSpace),W.join()}function R(J,W){const ue=t.get(J);if(J.isVideoTexture&&fe(J),J.isRenderTargetTexture===!1&&J.version>0&&ue.__version!==J.version){const he=J.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Re(ue,J,W);return}}n.bindTexture(i.TEXTURE_2D,ue.__webglTexture,i.TEXTURE0+W)}function B(J,W){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Re(ue,J,W);return}n.bindTexture(i.TEXTURE_2D_ARRAY,ue.__webglTexture,i.TEXTURE0+W)}function F(J,W){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Re(ue,J,W);return}n.bindTexture(i.TEXTURE_3D,ue.__webglTexture,i.TEXTURE0+W)}function U(J,W){const ue=t.get(J);if(J.version>0&&ue.__version!==J.version){Ee(ue,J,W);return}n.bindTexture(i.TEXTURE_CUBE_MAP,ue.__webglTexture,i.TEXTURE0+W)}const q={[al]:i.REPEAT,[mr]:i.CLAMP_TO_EDGE,[Qu]:i.MIRRORED_REPEAT},Y={[ki]:i.NEAREST,[av]:i.NEAREST_MIPMAP_NEAREST,[ec]:i.NEAREST_MIPMAP_LINEAR,[gi]:i.LINEAR,[$u]:i.LINEAR_MIPMAP_NEAREST,[$s]:i.LINEAR_MIPMAP_LINEAR},ne={[mI]:i.NEVER,[xI]:i.ALWAYS,[gI]:i.LESS,[qx]:i.LEQUAL,[vI]:i.EQUAL,[_I]:i.GEQUAL,[yI]:i.GREATER,[bI]:i.NOTEQUAL};function de(J,W){if(W.type===_s&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===gi||W.magFilter===$u||W.magFilter===ec||W.magFilter===$s||W.minFilter===gi||W.minFilter===$u||W.minFilter===ec||W.minFilter===$s)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(J,i.TEXTURE_WRAP_S,q[W.wrapS]),i.texParameteri(J,i.TEXTURE_WRAP_T,q[W.wrapT]),(J===i.TEXTURE_3D||J===i.TEXTURE_2D_ARRAY)&&i.texParameteri(J,i.TEXTURE_WRAP_R,q[W.wrapR]),i.texParameteri(J,i.TEXTURE_MAG_FILTER,Y[W.magFilter]),i.texParameteri(J,i.TEXTURE_MIN_FILTER,Y[W.minFilter]),W.compareFunction&&(i.texParameteri(J,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(J,i.TEXTURE_COMPARE_FUNC,ne[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===ki||W.minFilter!==ec&&W.minFilter!==$s||W.type===_s&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||t.get(W).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");i.texParameterf(J,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,s.getMaxAnisotropy())),t.get(W).__currentAnisotropy=W.anisotropy}}}function ve(J,W){let ue=!1;J.__webglInit===void 0&&(J.__webglInit=!0,W.addEventListener("dispose",M));const he=W.source;let xe=v.get(he);xe===void 0&&(xe={},v.set(he,xe));const Te=V(W);if(Te!==J.__cacheKey){xe[Te]===void 0&&(xe[Te]={texture:i.createTexture(),usedTimes:0},l.memory.textures++,ue=!0),xe[Te].usedTimes++;const He=xe[J.__cacheKey];He!==void 0&&(xe[J.__cacheKey].usedTimes--,He.usedTimes===0&&D(W)),J.__cacheKey=Te,J.__webglTexture=xe[Te].texture}return ue}function Re(J,W,ue){let he=i.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(he=i.TEXTURE_2D_ARRAY),W.isData3DTexture&&(he=i.TEXTURE_3D);const xe=ve(J,W),Te=W.source;n.bindTexture(he,J.__webglTexture,i.TEXTURE0+ue);const He=t.get(Te);if(Te.version!==He.__version||xe===!0){n.activeTexture(i.TEXTURE0+ue);const Be=Rn.getPrimaries(Rn.workingColorSpace),ze=W.colorSpace===za?null:Rn.getPrimaries(W.colorSpace),tt=W.colorSpace===za||Be===ze?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt);let je=S(W.image,!1,s.maxTextureSize);je=be(W,je);const et=a.convert(W.format,W.colorSpace),bt=a.convert(W.type);let _t=w(W.internalFormat,et,bt,W.colorSpace,W.isVideoTexture);de(he,W);let at;const Rt=W.mipmaps,Yt=W.isVideoTexture!==!0,we=He.__version===void 0||xe===!0,Oe=Te.dataReady,pe=x(W,je);if(W.isDepthTexture)_t=i.DEPTH_COMPONENT16,W.type===_s?_t=i.DEPTH_COMPONENT32F:W.type===xc?_t=i.DEPTH_COMPONENT24:W.type===bh&&(_t=i.DEPTH24_STENCIL8),we&&(Yt?n.texStorage2D(i.TEXTURE_2D,1,_t,je.width,je.height):n.texImage2D(i.TEXTURE_2D,0,_t,je.width,je.height,0,et,bt,null));else if(W.isDataTexture)if(Rt.length>0){Yt&&we&&n.texStorage2D(i.TEXTURE_2D,pe,_t,Rt[0].width,Rt[0].height);for(let Ve=0,$e=Rt.length;Ve<$e;Ve++)at=Rt[Ve],Yt?Oe&&n.texSubImage2D(i.TEXTURE_2D,Ve,0,0,at.width,at.height,et,bt,at.data):n.texImage2D(i.TEXTURE_2D,Ve,_t,at.width,at.height,0,et,bt,at.data);W.generateMipmaps=!1}else Yt?(we&&n.texStorage2D(i.TEXTURE_2D,pe,_t,je.width,je.height),Oe&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,je.width,je.height,et,bt,je.data)):n.texImage2D(i.TEXTURE_2D,0,_t,je.width,je.height,0,et,bt,je.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){Yt&&we&&n.texStorage3D(i.TEXTURE_2D_ARRAY,pe,_t,Rt[0].width,Rt[0].height,je.depth);for(let Ve=0,$e=Rt.length;Ve<$e;Ve++)at=Rt[Ve],W.format!==Fr?et!==null?Yt?Oe&&n.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ve,0,0,0,at.width,at.height,je.depth,et,at.data,0,0):n.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Ve,_t,at.width,at.height,je.depth,0,at.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Yt?Oe&&n.texSubImage3D(i.TEXTURE_2D_ARRAY,Ve,0,0,0,at.width,at.height,je.depth,et,bt,at.data):n.texImage3D(i.TEXTURE_2D_ARRAY,Ve,_t,at.width,at.height,je.depth,0,et,bt,at.data)}else{Yt&&we&&n.texStorage2D(i.TEXTURE_2D,pe,_t,Rt[0].width,Rt[0].height);for(let Ve=0,$e=Rt.length;Ve<$e;Ve++)at=Rt[Ve],W.format!==Fr?et!==null?Yt?Oe&&n.compressedTexSubImage2D(i.TEXTURE_2D,Ve,0,0,at.width,at.height,et,at.data):n.compressedTexImage2D(i.TEXTURE_2D,Ve,_t,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Yt?Oe&&n.texSubImage2D(i.TEXTURE_2D,Ve,0,0,at.width,at.height,et,bt,at.data):n.texImage2D(i.TEXTURE_2D,Ve,_t,at.width,at.height,0,et,bt,at.data)}else if(W.isDataArrayTexture)Yt?(we&&n.texStorage3D(i.TEXTURE_2D_ARRAY,pe,_t,je.width,je.height,je.depth),Oe&&n.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,et,bt,je.data)):n.texImage3D(i.TEXTURE_2D_ARRAY,0,_t,je.width,je.height,je.depth,0,et,bt,je.data);else if(W.isData3DTexture)Yt?(we&&n.texStorage3D(i.TEXTURE_3D,pe,_t,je.width,je.height,je.depth),Oe&&n.texSubImage3D(i.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,et,bt,je.data)):n.texImage3D(i.TEXTURE_3D,0,_t,je.width,je.height,je.depth,0,et,bt,je.data);else if(W.isFramebufferTexture){if(we)if(Yt)n.texStorage2D(i.TEXTURE_2D,pe,_t,je.width,je.height);else{let Ve=je.width,$e=je.height;for(let Ze=0;Ze<pe;Ze++)n.texImage2D(i.TEXTURE_2D,Ze,_t,Ve,$e,0,et,bt,null),Ve>>=1,$e>>=1}}else if(Rt.length>0){if(Yt&&we){const Ve=ke(Rt[0]);n.texStorage2D(i.TEXTURE_2D,pe,_t,Ve.width,Ve.height)}for(let Ve=0,$e=Rt.length;Ve<$e;Ve++)at=Rt[Ve],Yt?Oe&&n.texSubImage2D(i.TEXTURE_2D,Ve,0,0,et,bt,at):n.texImage2D(i.TEXTURE_2D,Ve,_t,et,bt,at);W.generateMipmaps=!1}else if(Yt){if(we){const Ve=ke(je);n.texStorage2D(i.TEXTURE_2D,pe,_t,Ve.width,Ve.height)}Oe&&n.texSubImage2D(i.TEXTURE_2D,0,0,0,et,bt,je)}else n.texImage2D(i.TEXTURE_2D,0,_t,et,bt,je);C(W)&&E(he),He.__version=Te.version,W.onUpdate&&W.onUpdate(W)}J.__version=W.version}function Ee(J,W,ue){if(W.image.length!==6)return;const he=ve(J,W),xe=W.source;n.bindTexture(i.TEXTURE_CUBE_MAP,J.__webglTexture,i.TEXTURE0+ue);const Te=t.get(xe);if(xe.version!==Te.__version||he===!0){n.activeTexture(i.TEXTURE0+ue);const He=Rn.getPrimaries(Rn.workingColorSpace),Be=W.colorSpace===za?null:Rn.getPrimaries(W.colorSpace),ze=W.colorSpace===za||He===Be?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,W.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,W.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const tt=W.isCompressedTexture||W.image[0].isCompressedTexture,je=W.image[0]&&W.image[0].isDataTexture,et=[];for(let $e=0;$e<6;$e++)!tt&&!je?et[$e]=S(W.image[$e],!0,s.maxCubemapSize):et[$e]=je?W.image[$e].image:W.image[$e],et[$e]=be(W,et[$e]);const bt=et[0],_t=a.convert(W.format,W.colorSpace),at=a.convert(W.type),Rt=w(W.internalFormat,_t,at,W.colorSpace),Yt=W.isVideoTexture!==!0,we=Te.__version===void 0||he===!0,Oe=xe.dataReady;let pe=x(W,bt);de(i.TEXTURE_CUBE_MAP,W);let Ve;if(tt){Yt&&we&&n.texStorage2D(i.TEXTURE_CUBE_MAP,pe,Rt,bt.width,bt.height);for(let $e=0;$e<6;$e++){Ve=et[$e].mipmaps;for(let Ze=0;Ze<Ve.length;Ze++){const ot=Ve[Ze];W.format!==Fr?_t!==null?Yt?Oe&&n.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze,0,0,ot.width,ot.height,_t,ot.data):n.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze,Rt,ot.width,ot.height,0,ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yt?Oe&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze,0,0,ot.width,ot.height,_t,at,ot.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze,Rt,ot.width,ot.height,0,_t,at,ot.data)}}}else{if(Ve=W.mipmaps,Yt&&we){Ve.length>0&&pe++;const $e=ke(et[0]);n.texStorage2D(i.TEXTURE_CUBE_MAP,pe,Rt,$e.width,$e.height)}for(let $e=0;$e<6;$e++)if(je){Yt?Oe&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,et[$e].width,et[$e].height,_t,at,et[$e].data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,Rt,et[$e].width,et[$e].height,0,_t,at,et[$e].data);for(let Ze=0;Ze<Ve.length;Ze++){const hn=Ve[Ze].image[$e].image;Yt?Oe&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze+1,0,0,hn.width,hn.height,_t,at,hn.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze+1,Rt,hn.width,hn.height,0,_t,at,hn.data)}}else{Yt?Oe&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,_t,at,et[$e]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,Rt,_t,at,et[$e]);for(let Ze=0;Ze<Ve.length;Ze++){const ot=Ve[Ze];Yt?Oe&&n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze+1,0,0,_t,at,ot.image[$e]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Ze+1,Rt,_t,at,ot.image[$e])}}}C(W)&&E(i.TEXTURE_CUBE_MAP),Te.__version=xe.version,W.onUpdate&&W.onUpdate(W)}J.__version=W.version}function ce(J,W,ue,he,xe,Te){const He=a.convert(ue.format,ue.colorSpace),Be=a.convert(ue.type),ze=w(ue.internalFormat,He,Be,ue.colorSpace);if(!t.get(W).__hasExternalTextures){const je=Math.max(1,W.width>>Te),et=Math.max(1,W.height>>Te);xe===i.TEXTURE_3D||xe===i.TEXTURE_2D_ARRAY?n.texImage3D(xe,Te,ze,je,et,W.depth,0,He,Be,null):n.texImage2D(xe,Te,ze,je,et,0,He,Be,null)}n.bindFramebuffer(i.FRAMEBUFFER,J),oe(W)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,he,xe,t.get(ue).__webglTexture,0,X(W)):(xe===i.TEXTURE_2D||xe>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,he,xe,t.get(ue).__webglTexture,Te),n.bindFramebuffer(i.FRAMEBUFFER,null)}function Ce(J,W,ue){if(i.bindRenderbuffer(i.RENDERBUFFER,J),W.depthBuffer&&!W.stencilBuffer){let he=i.DEPTH_COMPONENT24;if(ue||oe(W)){const xe=W.depthTexture;xe&&xe.isDepthTexture&&(xe.type===_s?he=i.DEPTH_COMPONENT32F:xe.type===xc&&(he=i.DEPTH_COMPONENT24));const Te=X(W);oe(W)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Te,he,W.width,W.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Te,he,W.width,W.height)}else i.renderbufferStorage(i.RENDERBUFFER,he,W.width,W.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,J)}else if(W.depthBuffer&&W.stencilBuffer){const he=X(W);ue&&oe(W)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,he,i.DEPTH24_STENCIL8,W.width,W.height):oe(W)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,he,i.DEPTH24_STENCIL8,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,W.width,W.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,J)}else{const he=W.textures;for(let xe=0;xe<he.length;xe++){const Te=he[xe],He=a.convert(Te.format,Te.colorSpace),Be=a.convert(Te.type),ze=w(Te.internalFormat,He,Be,Te.colorSpace),tt=X(W);ue&&oe(W)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,tt,ze,W.width,W.height):oe(W)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,tt,ze,W.width,W.height):i.renderbufferStorage(i.RENDERBUFFER,ze,W.width,W.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Me(J,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(i.FRAMEBUFFER,J),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),R(W.depthTexture,0);const he=t.get(W.depthTexture).__webglTexture,xe=X(W);if(W.depthTexture.format===uc)oe(W)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,he,0,xe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,he,0);else if(W.depthTexture.format===eh)oe(W)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,he,0,xe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,he,0);else throw new Error("Unknown depthTexture format")}function ee(J){const W=t.get(J),ue=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!W.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");Me(W.__webglFramebuffer,J)}else if(ue){W.__webglDepthbuffer=[];for(let he=0;he<6;he++)n.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer[he]),W.__webglDepthbuffer[he]=i.createRenderbuffer(),Ce(W.__webglDepthbuffer[he],J,!1)}else n.bindFramebuffer(i.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer=i.createRenderbuffer(),Ce(W.__webglDepthbuffer,J,!1);n.bindFramebuffer(i.FRAMEBUFFER,null)}function re(J,W,ue){const he=t.get(J);W!==void 0&&ce(he.__webglFramebuffer,J,J.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ue!==void 0&&ee(J)}function H(J){const W=J.texture,ue=t.get(J),he=t.get(W);J.addEventListener("dispose",P);const xe=J.textures,Te=J.isWebGLCubeRenderTarget===!0,He=xe.length>1;if(He||(he.__webglTexture===void 0&&(he.__webglTexture=i.createTexture()),he.__version=W.version,l.memory.textures++),Te){ue.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)if(W.mipmaps&&W.mipmaps.length>0){ue.__webglFramebuffer[Be]=[];for(let ze=0;ze<W.mipmaps.length;ze++)ue.__webglFramebuffer[Be][ze]=i.createFramebuffer()}else ue.__webglFramebuffer[Be]=i.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){ue.__webglFramebuffer=[];for(let Be=0;Be<W.mipmaps.length;Be++)ue.__webglFramebuffer[Be]=i.createFramebuffer()}else ue.__webglFramebuffer=i.createFramebuffer();if(He)for(let Be=0,ze=xe.length;Be<ze;Be++){const tt=t.get(xe[Be]);tt.__webglTexture===void 0&&(tt.__webglTexture=i.createTexture(),l.memory.textures++)}if(J.samples>0&&oe(J)===!1){ue.__webglMultisampledFramebuffer=i.createFramebuffer(),ue.__webglColorRenderbuffer=[],n.bindFramebuffer(i.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Be=0;Be<xe.length;Be++){const ze=xe[Be];ue.__webglColorRenderbuffer[Be]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ue.__webglColorRenderbuffer[Be]);const tt=a.convert(ze.format,ze.colorSpace),je=a.convert(ze.type),et=w(ze.internalFormat,tt,je,ze.colorSpace,J.isXRRenderTarget===!0),bt=X(J);i.renderbufferStorageMultisample(i.RENDERBUFFER,bt,et,J.width,J.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Be,i.RENDERBUFFER,ue.__webglColorRenderbuffer[Be])}i.bindRenderbuffer(i.RENDERBUFFER,null),J.depthBuffer&&(ue.__webglDepthRenderbuffer=i.createRenderbuffer(),Ce(ue.__webglDepthRenderbuffer,J,!0)),n.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Te){n.bindTexture(i.TEXTURE_CUBE_MAP,he.__webglTexture),de(i.TEXTURE_CUBE_MAP,W);for(let Be=0;Be<6;Be++)if(W.mipmaps&&W.mipmaps.length>0)for(let ze=0;ze<W.mipmaps.length;ze++)ce(ue.__webglFramebuffer[Be][ze],J,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ze);else ce(ue.__webglFramebuffer[Be],J,W,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0);C(W)&&E(i.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(He){for(let Be=0,ze=xe.length;Be<ze;Be++){const tt=xe[Be],je=t.get(tt);n.bindTexture(i.TEXTURE_2D,je.__webglTexture),de(i.TEXTURE_2D,tt),ce(ue.__webglFramebuffer,J,tt,i.COLOR_ATTACHMENT0+Be,i.TEXTURE_2D,0),C(tt)&&E(i.TEXTURE_2D)}n.unbindTexture()}else{let Be=i.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(Be=J.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),n.bindTexture(Be,he.__webglTexture),de(Be,W),W.mipmaps&&W.mipmaps.length>0)for(let ze=0;ze<W.mipmaps.length;ze++)ce(ue.__webglFramebuffer[ze],J,W,i.COLOR_ATTACHMENT0,Be,ze);else ce(ue.__webglFramebuffer,J,W,i.COLOR_ATTACHMENT0,Be,0);C(W)&&E(Be),n.unbindTexture()}J.depthBuffer&&ee(J)}function $(J){const W=J.textures;for(let ue=0,he=W.length;ue<he;ue++){const xe=W[ue];if(C(xe)){const Te=J.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,He=t.get(xe).__webglTexture;n.bindTexture(Te,He),E(Te),n.unbindTexture()}}}const te=[],le=[];function K(J){if(J.samples>0){if(oe(J)===!1){const W=J.textures,ue=J.width,he=J.height;let xe=i.COLOR_BUFFER_BIT;const Te=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,He=t.get(J),Be=W.length>1;if(Be)for(let ze=0;ze<W.length;ze++)n.bindFramebuffer(i.FRAMEBUFFER,He.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.RENDERBUFFER,null),n.bindFramebuffer(i.FRAMEBUFFER,He.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.TEXTURE_2D,null,0);n.bindFramebuffer(i.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let ze=0;ze<W.length;ze++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(xe|=i.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(xe|=i.STENCIL_BUFFER_BIT)),Be){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,He.__webglColorRenderbuffer[ze]);const tt=t.get(W[ze]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,tt,0)}i.blitFramebuffer(0,0,ue,he,0,0,ue,he,xe,i.NEAREST),h===!0&&(te.length=0,le.length=0,te.push(i.COLOR_ATTACHMENT0+ze),J.depthBuffer&&J.resolveDepthBuffer===!1&&(te.push(Te),le.push(Te),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,le)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,te))}if(n.bindFramebuffer(i.READ_FRAMEBUFFER,null),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Be)for(let ze=0;ze<W.length;ze++){n.bindFramebuffer(i.FRAMEBUFFER,He.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.RENDERBUFFER,He.__webglColorRenderbuffer[ze]);const tt=t.get(W[ze]).__webglTexture;n.bindFramebuffer(i.FRAMEBUFFER,He.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ze,i.TEXTURE_2D,tt,0)}n.bindFramebuffer(i.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&h){const W=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[W])}}}function X(J){return Math.min(s.maxSamples,J.samples)}function oe(J){const W=t.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function fe(J){const W=l.render.frame;p.get(J)!==W&&(p.set(J,W),J.update())}function be(J,W){const ue=J.colorSpace,he=J.format,xe=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||ue!==oo&&ue!==za&&(Rn.getTransfer(ue)===Hn?(he!==Fr||xe!==js)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),W}function ke(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(d.width=J.naturalWidth||J.width,d.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(d.width=J.displayWidth,d.height=J.displayHeight):(d.width=J.width,d.height=J.height),d}this.allocateTextureUnit=L,this.resetTextureUnits=T,this.setTexture2D=R,this.setTexture2DArray=B,this.setTexture3D=F,this.setTextureCube=U,this.rebindTextures=re,this.setupRenderTarget=H,this.updateRenderTargetMipmap=$,this.updateMultisampleRenderTarget=K,this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=ce,this.useMultisampledRTT=oe}function OI(i,e){function n(t,s=za){let a;const l=Rn.getTransfer(s);if(t===js)return i.UNSIGNED_BYTE;if(t===zx)return i.UNSIGNED_SHORT_4_4_4_4;if(t===$x)return i.UNSIGNED_SHORT_5_5_5_1;if(t===nI)return i.UNSIGNED_INT_5_9_9_9_REV;if(t===eI)return i.BYTE;if(t===tI)return i.SHORT;if(t===Fx)return i.UNSIGNED_SHORT;if(t===Ux)return i.INT;if(t===xc)return i.UNSIGNED_INT;if(t===_s)return i.FLOAT;if(t===yh)return i.HALF_FLOAT;if(t===iI)return i.ALPHA;if(t===rI)return i.RGB;if(t===Fr)return i.RGBA;if(t===sI)return i.LUMINANCE;if(t===aI)return i.LUMINANCE_ALPHA;if(t===uc)return i.DEPTH_COMPONENT;if(t===eh)return i.DEPTH_STENCIL;if(t===Hx)return i.RED;if(t===Gx)return i.RED_INTEGER;if(t===oI)return i.RG;if(t===Wx)return i.RG_INTEGER;if(t===jx)return i.RGBA_INTEGER;if(t===n0||t===i0||t===r0||t===s0)if(l===Hn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(t===n0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(t===i0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(t===r0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(t===s0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(t===n0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===i0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===r0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===s0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(t===a_||t===o_||t===l_||t===c_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(t===a_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===o_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===l_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===c_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(t===u_||t===h_||t===d_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(t===u_||t===h_)return l===Hn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(t===d_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(t===f_||t===p_||t===m_||t===g_||t===v_||t===y_||t===b_||t===__||t===x_||t===w_||t===C_||t===S_||t===E_||t===M_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(t===f_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(t===p_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(t===m_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(t===g_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(t===v_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(t===y_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(t===b_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(t===__)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(t===x_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(t===w_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(t===C_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(t===S_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(t===E_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(t===M_)return l===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(t===a0||t===T_||t===k_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(t===a0)return l===Hn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(t===T_)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(t===k_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(t===lI||t===A_||t===P_||t===I_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(t===a0)return a.COMPRESSED_RED_RGTC1_EXT;if(t===A_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(t===P_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(t===I_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return t===bh?i.UNSIGNED_INT_24_8:i[t]!==void 0?i[t]:null}return{convert:n}}class VI extends Ln{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Ha=class extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}};const hQ={type:"move"};class H1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ha,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ha,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ha,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const t of e.hand.values())this._getHandJoint(n,t)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,t){let s=null,a=null,l=null;const c=this._targetRay,h=this._grip,d=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(d&&e.hand){l=!0;for(const S of e.hand.values()){const C=n.getJointPose(S,t),E=this._getHandJoint(d,S);C!==null&&(E.matrix.fromArray(C.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=C.radius),E.visible=C!==null}const p=d.joints["index-finger-tip"],m=d.joints["thumb-tip"],v=p.position.distanceTo(m.position),y=.02,b=.005;d.inputState.pinching&&v>y+b?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=y-b&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,t),a!==null&&(h.matrix.fromArray(a.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,a.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(a.linearVelocity)):h.hasLinearVelocity=!1,a.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(a.angularVelocity)):h.hasAngularVelocity=!1));c!==null&&(s=n.getPose(e.targetRaySpace,t),s===null&&a!==null&&(s=a),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(hQ)))}return c!==null&&(c.visible=s!==null),h!==null&&(h.visible=a!==null),d!==null&&(d.visible=l!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const t=new Ha;t.matrixAutoUpdate=!1,t.visible=!1,e.joints[n.jointName]=t,e.add(t)}return e.joints[n.jointName]}}const dQ=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fQ=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class pQ{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,t){if(this.texture===null){const s=new Wn,a=e.properties.get(s);a.__webglTexture=n.texture,(n.depthNear!=t.depthNear||n.depthFar!=t.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=s}}render(e,n){if(this.texture!==null){if(this.mesh===null){const t=n.cameras[0].viewport,s=new yr({vertexShader:dQ,fragmentShader:fQ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Fn(new fl(20,20),s)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class mQ extends ma{constructor(e,n){super();const t=this;let s=null,a=1,l=null,c="local-floor",h=1,d=null,p=null,m=null,v=null,y=null,b=null;const S=new pQ,C=n.getContextAttributes();let E=null,w=null;const x=[],M=[],P=new Ge;let I=null;const D=new Ln;D.layers.enable(1),D.viewport=new ln;const A=new Ln;A.layers.enable(2),A.viewport=new ln;const N=[D,A],T=new VI;T.layers.enable(1),T.layers.enable(2);let L=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let Ce=x[ce];return Ce===void 0&&(Ce=new H1,x[ce]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(ce){let Ce=x[ce];return Ce===void 0&&(Ce=new H1,x[ce]=Ce),Ce.getGripSpace()},this.getHand=function(ce){let Ce=x[ce];return Ce===void 0&&(Ce=new H1,x[ce]=Ce),Ce.getHandSpace()};function R(ce){const Ce=M.indexOf(ce.inputSource);if(Ce===-1)return;const Me=x[Ce];Me!==void 0&&(Me.update(ce.inputSource,ce.frame,d||l),Me.dispatchEvent({type:ce.type,data:ce.inputSource}))}function B(){s.removeEventListener("select",R),s.removeEventListener("selectstart",R),s.removeEventListener("selectend",R),s.removeEventListener("squeeze",R),s.removeEventListener("squeezestart",R),s.removeEventListener("squeezeend",R),s.removeEventListener("end",B),s.removeEventListener("inputsourceschange",F);for(let ce=0;ce<x.length;ce++){const Ce=M[ce];Ce!==null&&(M[ce]=null,x[ce].disconnect(Ce))}L=null,V=null,S.reset(),e.setRenderTarget(E),y=null,v=null,m=null,s=null,w=null,Ee.stop(),t.isPresenting=!1,e.setPixelRatio(I),e.setSize(P.width,P.height,!1),t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){a=ce,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){c=ce,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||l},this.setReferenceSpace=function(ce){d=ce},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return m},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(ce){if(s=ce,s!==null){if(E=e.getRenderTarget(),s.addEventListener("select",R),s.addEventListener("selectstart",R),s.addEventListener("selectend",R),s.addEventListener("squeeze",R),s.addEventListener("squeezestart",R),s.addEventListener("squeezeend",R),s.addEventListener("end",B),s.addEventListener("inputsourceschange",F),C.xrCompatible!==!0&&await n.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(P),s.renderState.layers===void 0){const Ce={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(s,n,Ce),s.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),w=new Ss(y.framebufferWidth,y.framebufferHeight,{format:Fr,type:js,colorSpace:e.outputColorSpace,stencilBuffer:C.stencil})}else{let Ce=null,Me=null,ee=null;C.depth&&(ee=C.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Ce=C.stencil?eh:uc,Me=C.stencil?bh:xc);const re={colorFormat:n.RGBA8,depthFormat:ee,scaleFactor:a};m=new XRWebGLBinding(s,n),v=m.createProjectionLayer(re),s.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),w=new Ss(v.textureWidth,v.textureHeight,{format:Fr,type:js,depthTexture:new Qx(v.textureWidth,v.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,Ce),stencilBuffer:C.stencil,colorSpace:e.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(h),d=null,l=await s.requestReferenceSpace(c),Ee.setContext(s),Ee.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function F(ce){for(let Ce=0;Ce<ce.removed.length;Ce++){const Me=ce.removed[Ce],ee=M.indexOf(Me);ee>=0&&(M[ee]=null,x[ee].disconnect(Me))}for(let Ce=0;Ce<ce.added.length;Ce++){const Me=ce.added[Ce];let ee=M.indexOf(Me);if(ee===-1){for(let H=0;H<x.length;H++)if(H>=M.length){M.push(Me),ee=H;break}else if(M[H]===null){M[H]=Me,ee=H;break}if(ee===-1)break}const re=x[ee];re&&re.connect(Me)}}const U=new Q,q=new Q;function Y(ce,Ce,Me){U.setFromMatrixPosition(Ce.matrixWorld),q.setFromMatrixPosition(Me.matrixWorld);const ee=U.distanceTo(q),re=Ce.projectionMatrix.elements,H=Me.projectionMatrix.elements,$=re[14]/(re[10]-1),te=re[14]/(re[10]+1),le=(re[9]+1)/re[5],K=(re[9]-1)/re[5],X=(re[8]-1)/re[0],oe=(H[8]+1)/H[0],fe=$*X,be=$*oe,ke=ee/(-X+oe),J=ke*-X;Ce.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(J),ce.translateZ(ke),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert();const W=$+ke,ue=te+ke,he=fe-J,xe=be+(ee-J),Te=le*te/ue*W,He=K*te/ue*W;ce.projectionMatrix.makePerspective(he,xe,Te,He,W,ue),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}function ne(ce,Ce){Ce===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(Ce.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(s===null)return;S.texture!==null&&(ce.near=S.depthNear,ce.far=S.depthFar),T.near=A.near=D.near=ce.near,T.far=A.far=D.far=ce.far,(L!==T.near||V!==T.far)&&(s.updateRenderState({depthNear:T.near,depthFar:T.far}),L=T.near,V=T.far,D.near=L,D.far=V,A.near=L,A.far=V,D.updateProjectionMatrix(),A.updateProjectionMatrix(),ce.updateProjectionMatrix());const Ce=ce.parent,Me=T.cameras;ne(T,Ce);for(let ee=0;ee<Me.length;ee++)ne(Me[ee],Ce);Me.length===2?Y(T,D,A):T.projectionMatrix.copy(D.projectionMatrix),de(ce,T,Ce)};function de(ce,Ce,Me){Me===null?ce.matrix.copy(Ce.matrixWorld):(ce.matrix.copy(Me.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(Ce.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(Ce.projectionMatrix),ce.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=ih*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(v===null&&y===null))return h},this.setFoveation=function(ce){h=ce,v!==null&&(v.fixedFoveation=ce),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ce)},this.hasDepthSensing=function(){return S.texture!==null};let ve=null;function Re(ce,Ce){if(p=Ce.getViewerPose(d||l),b=Ce,p!==null){const Me=p.views;y!==null&&(e.setRenderTargetFramebuffer(w,y.framebuffer),e.setRenderTarget(w));let ee=!1;Me.length!==T.cameras.length&&(T.cameras.length=0,ee=!0);for(let H=0;H<Me.length;H++){const $=Me[H];let te=null;if(y!==null)te=y.getViewport($);else{const K=m.getViewSubImage(v,$);te=K.viewport,H===0&&(e.setRenderTargetTextures(w,K.colorTexture,v.ignoreDepthValues?void 0:K.depthStencilTexture),e.setRenderTarget(w))}let le=N[H];le===void 0&&(le=new Ln,le.layers.enable(H),le.viewport=new ln,N[H]=le),le.matrix.fromArray($.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray($.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(te.x,te.y,te.width,te.height),H===0&&(T.matrix.copy(le.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ee===!0&&T.cameras.push(le)}const re=s.enabledFeatures;if(re&&re.includes("depth-sensing")){const H=m.getDepthInformation(Me[0]);H&&H.isValid&&H.texture&&S.init(e,H,s.renderState)}}for(let Me=0;Me<x.length;Me++){const ee=M[Me],re=x[Me];ee!==null&&re!==void 0&&re.update(ee,Ce,d||l)}S.render(e,T),ve&&ve(ce,Ce),Ce.detectedPlanes&&t.dispatchEvent({type:"planesdetected",data:Ce}),b=null}const Ee=new II;Ee.setAnimationLoop(Re),this.setAnimationLoop=function(ce){ve=ce},this.dispose=function(){}}}const Vl=new Ai,gQ=new ct;function vQ(i,e){function n(C,E){C.matrixAutoUpdate===!0&&C.updateMatrix(),E.value.copy(C.matrix)}function t(C,E){E.color.getRGB(C.fogColor.value,kI(i)),E.isFog?(C.fogNear.value=E.near,C.fogFar.value=E.far):E.isFogExp2&&(C.fogDensity.value=E.density)}function s(C,E,w,x,M){E.isMeshBasicMaterial||E.isMeshLambertMaterial?a(C,E):E.isMeshToonMaterial?(a(C,E),m(C,E)):E.isMeshPhongMaterial?(a(C,E),p(C,E)):E.isMeshStandardMaterial?(a(C,E),v(C,E),E.isMeshPhysicalMaterial&&y(C,E,M)):E.isMeshMatcapMaterial?(a(C,E),b(C,E)):E.isMeshDepthMaterial?a(C,E):E.isMeshDistanceMaterial?(a(C,E),S(C,E)):E.isMeshNormalMaterial?a(C,E):E.isLineBasicMaterial?(l(C,E),E.isLineDashedMaterial&&c(C,E)):E.isPointsMaterial?h(C,E,w,x):E.isSpriteMaterial?d(C,E):E.isShadowMaterial?(C.color.value.copy(E.color),C.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function a(C,E){C.opacity.value=E.opacity,E.color&&C.diffuse.value.copy(E.color),E.emissive&&C.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(C.map.value=E.map,n(E.map,C.mapTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,n(E.alphaMap,C.alphaMapTransform)),E.bumpMap&&(C.bumpMap.value=E.bumpMap,n(E.bumpMap,C.bumpMapTransform),C.bumpScale.value=E.bumpScale,E.side===er&&(C.bumpScale.value*=-1)),E.normalMap&&(C.normalMap.value=E.normalMap,n(E.normalMap,C.normalMapTransform),C.normalScale.value.copy(E.normalScale),E.side===er&&C.normalScale.value.negate()),E.displacementMap&&(C.displacementMap.value=E.displacementMap,n(E.displacementMap,C.displacementMapTransform),C.displacementScale.value=E.displacementScale,C.displacementBias.value=E.displacementBias),E.emissiveMap&&(C.emissiveMap.value=E.emissiveMap,n(E.emissiveMap,C.emissiveMapTransform)),E.specularMap&&(C.specularMap.value=E.specularMap,n(E.specularMap,C.specularMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest);const w=e.get(E),x=w.envMap,M=w.envMapRotation;if(x&&(C.envMap.value=x,Vl.copy(M),Vl.x*=-1,Vl.y*=-1,Vl.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Vl.y*=-1,Vl.z*=-1),C.envMapRotation.value.setFromMatrix4(gQ.makeRotationFromEuler(Vl)),C.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=E.reflectivity,C.ior.value=E.ior,C.refractionRatio.value=E.refractionRatio),E.lightMap){C.lightMap.value=E.lightMap;const P=i._useLegacyLights===!0?Math.PI:1;C.lightMapIntensity.value=E.lightMapIntensity*P,n(E.lightMap,C.lightMapTransform)}E.aoMap&&(C.aoMap.value=E.aoMap,C.aoMapIntensity.value=E.aoMapIntensity,n(E.aoMap,C.aoMapTransform))}function l(C,E){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,E.map&&(C.map.value=E.map,n(E.map,C.mapTransform))}function c(C,E){C.dashSize.value=E.dashSize,C.totalSize.value=E.dashSize+E.gapSize,C.scale.value=E.scale}function h(C,E,w,x){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,C.size.value=E.size*w,C.scale.value=x*.5,E.map&&(C.map.value=E.map,n(E.map,C.uvTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,n(E.alphaMap,C.alphaMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest)}function d(C,E){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,C.rotation.value=E.rotation,E.map&&(C.map.value=E.map,n(E.map,C.mapTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,n(E.alphaMap,C.alphaMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest)}function p(C,E){C.specular.value.copy(E.specular),C.shininess.value=Math.max(E.shininess,1e-4)}function m(C,E){E.gradientMap&&(C.gradientMap.value=E.gradientMap)}function v(C,E){C.metalness.value=E.metalness,E.metalnessMap&&(C.metalnessMap.value=E.metalnessMap,n(E.metalnessMap,C.metalnessMapTransform)),C.roughness.value=E.roughness,E.roughnessMap&&(C.roughnessMap.value=E.roughnessMap,n(E.roughnessMap,C.roughnessMapTransform)),E.envMap&&(C.envMapIntensity.value=E.envMapIntensity)}function y(C,E,w){C.ior.value=E.ior,E.sheen>0&&(C.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),C.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(C.sheenColorMap.value=E.sheenColorMap,n(E.sheenColorMap,C.sheenColorMapTransform)),E.sheenRoughnessMap&&(C.sheenRoughnessMap.value=E.sheenRoughnessMap,n(E.sheenRoughnessMap,C.sheenRoughnessMapTransform))),E.clearcoat>0&&(C.clearcoat.value=E.clearcoat,C.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(C.clearcoatMap.value=E.clearcoatMap,n(E.clearcoatMap,C.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,n(E.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(C.clearcoatNormalMap.value=E.clearcoatNormalMap,n(E.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===er&&C.clearcoatNormalScale.value.negate())),E.dispersion>0&&(C.dispersion.value=E.dispersion),E.iridescence>0&&(C.iridescence.value=E.iridescence,C.iridescenceIOR.value=E.iridescenceIOR,C.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(C.iridescenceMap.value=E.iridescenceMap,n(E.iridescenceMap,C.iridescenceMapTransform)),E.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=E.iridescenceThicknessMap,n(E.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),E.transmission>0&&(C.transmission.value=E.transmission,C.transmissionSamplerMap.value=w.texture,C.transmissionSamplerSize.value.set(w.width,w.height),E.transmissionMap&&(C.transmissionMap.value=E.transmissionMap,n(E.transmissionMap,C.transmissionMapTransform)),C.thickness.value=E.thickness,E.thicknessMap&&(C.thicknessMap.value=E.thicknessMap,n(E.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=E.attenuationDistance,C.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(C.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(C.anisotropyMap.value=E.anisotropyMap,n(E.anisotropyMap,C.anisotropyMapTransform))),C.specularIntensity.value=E.specularIntensity,C.specularColor.value.copy(E.specularColor),E.specularColorMap&&(C.specularColorMap.value=E.specularColorMap,n(E.specularColorMap,C.specularColorMapTransform)),E.specularIntensityMap&&(C.specularIntensityMap.value=E.specularIntensityMap,n(E.specularIntensityMap,C.specularIntensityMapTransform))}function b(C,E){E.matcap&&(C.matcap.value=E.matcap)}function S(C,E){const w=e.get(E).light;C.referencePosition.value.setFromMatrixPosition(w.matrixWorld),C.nearDistance.value=w.shadow.camera.near,C.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:t,refreshMaterialUniforms:s}}function yQ(i,e,n,t){let s={},a={},l=[];const c=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function h(w,x){const M=x.program;t.uniformBlockBinding(w,M)}function d(w,x){let M=s[w.id];M===void 0&&(b(w),M=p(w),s[w.id]=M,w.addEventListener("dispose",C));const P=x.program;t.updateUBOMapping(w,P);const I=e.render.frame;a[w.id]!==I&&(v(w),a[w.id]=I)}function p(w){const x=m();w.__bindingPointIndex=x;const M=i.createBuffer(),P=w.__size,I=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,M),i.bufferData(i.UNIFORM_BUFFER,P,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,x,M),M}function m(){for(let w=0;w<c;w++)if(l.indexOf(w)===-1)return l.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(w){const x=s[w.id],M=w.uniforms,P=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,x);for(let I=0,D=M.length;I<D;I++){const A=Array.isArray(M[I])?M[I]:[M[I]];for(let N=0,T=A.length;N<T;N++){const L=A[N];if(y(L,I,N,P)===!0){const V=L.__offset,R=Array.isArray(L.value)?L.value:[L.value];let B=0;for(let F=0;F<R.length;F++){const U=R[F],q=S(U);typeof U=="number"||typeof U=="boolean"?(L.__data[0]=U,i.bufferSubData(i.UNIFORM_BUFFER,V+B,L.__data)):U.isMatrix3?(L.__data[0]=U.elements[0],L.__data[1]=U.elements[1],L.__data[2]=U.elements[2],L.__data[3]=0,L.__data[4]=U.elements[3],L.__data[5]=U.elements[4],L.__data[6]=U.elements[5],L.__data[7]=0,L.__data[8]=U.elements[6],L.__data[9]=U.elements[7],L.__data[10]=U.elements[8],L.__data[11]=0):(U.toArray(L.__data,B),B+=q.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,V,L.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(w,x,M,P){const I=w.value,D=x+"_"+M;if(P[D]===void 0)return typeof I=="number"||typeof I=="boolean"?P[D]=I:P[D]=I.clone(),!0;{const A=P[D];if(typeof I=="number"||typeof I=="boolean"){if(A!==I)return P[D]=I,!0}else if(A.equals(I)===!1)return A.copy(I),!0}return!1}function b(w){const x=w.uniforms;let M=0;const P=16;for(let D=0,A=x.length;D<A;D++){const N=Array.isArray(x[D])?x[D]:[x[D]];for(let T=0,L=N.length;T<L;T++){const V=N[T],R=Array.isArray(V.value)?V.value:[V.value];for(let B=0,F=R.length;B<F;B++){const U=R[B],q=S(U),Y=M%P;Y!==0&&P-Y<q.boundary&&(M+=P-Y),V.__data=new Float32Array(q.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=M,M+=q.storage}}}const I=M%P;return I>0&&(M+=P-I),w.__size=M,w.__cache={},this}function S(w){const x={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(x.boundary=4,x.storage=4):w.isVector2?(x.boundary=8,x.storage=8):w.isVector3||w.isColor?(x.boundary=16,x.storage=12):w.isVector4?(x.boundary=16,x.storage=16):w.isMatrix3?(x.boundary=48,x.storage=48):w.isMatrix4?(x.boundary=64,x.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),x}function C(w){const x=w.target;x.removeEventListener("dispose",C);const M=l.indexOf(x.__bindingPointIndex);l.splice(M,1),i.deleteBuffer(s[x.id]),delete s[x.id],delete a[x.id]}function E(){for(const w in s)i.deleteBuffer(s[w]);l=[],s={},a={}}return{bind:h,update:d,dispose:E}}class Af{constructor(e={}){const{canvas:n=CI(),context:t=null,depth:s=!0,stencil:a=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1}=e;this.isWebGLRenderer=!0;let v;if(t!==null){if(typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=t.getContextAttributes().alpha}else v=l;const y=new Uint32Array(4),b=new Int32Array(4);let S=null,C=null;const E=[],w=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ts,this._useLegacyLights=!1,this.toneMapping=Ya,this.toneMappingExposure=1;const x=this;let M=!1,P=0,I=0,D=null,A=-1,N=null;const T=new ln,L=new ln;let V=null;const R=new Qe(0);let B=0,F=n.width,U=n.height,q=1,Y=null,ne=null;const de=new ln(0,0,F,U),ve=new ln(0,0,F,U);let Re=!1;const Ee=new Sp;let ce=!1,Ce=!1;const Me=new ct,ee=new Q,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return D===null?q:1}let $=t;function te(se,Ae){return n.getContext(se,Ae)}try{const se={alpha:!0,depth:s,stencil:a,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${gh}`),n.addEventListener("webglcontextlost",pe,!1),n.addEventListener("webglcontextrestored",Ve,!1),n.addEventListener("webglcontextcreationerror",$e,!1),$===null){const Ae="webgl2";if($=te(Ae,se),$===null)throw te(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}let le,K,X,oe,fe,be,ke,J,W,ue,he,xe,Te,He,Be,ze,tt,je,et,bt,_t,at,Rt,Yt;function we(){le=new IJ($),le.init(),at=new OI($,le),K=new EJ($,le,e,at),X=new cQ($),oe=new DJ($),fe=new JZ,be=new uQ($,le,X,fe,K,at,oe),ke=new TJ(x),J=new PJ(x),W=new zq($),Rt=new CJ($,W),ue=new NJ($,W,oe,Rt),he=new BJ($,ue,W,oe),et=new LJ($,K,be),ze=new MJ(fe),xe=new YZ(x,ke,J,le,K,Rt,ze),Te=new vQ(x,fe),He=new QZ,Be=new sQ(le),je=new wJ(x,ke,J,X,he,v,h),tt=new lQ(x,he,K),Yt=new yQ($,oe,K,X),bt=new SJ($,le,oe),_t=new RJ($,le,oe),oe.programs=xe.programs,x.capabilities=K,x.extensions=le,x.properties=fe,x.renderLists=He,x.shadowMap=tt,x.state=X,x.info=oe}we();const Oe=new mQ(x,$);this.xr=Oe,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const se=le.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=le.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(se){se!==void 0&&(q=se,this.setSize(F,U,!1))},this.getSize=function(se){return se.set(F,U)},this.setSize=function(se,Ae,Ue=!0){if(Oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=se,U=Ae,n.width=Math.floor(se*q),n.height=Math.floor(Ae*q),Ue===!0&&(n.style.width=se+"px",n.style.height=Ae+"px"),this.setViewport(0,0,se,Ae)},this.getDrawingBufferSize=function(se){return se.set(F*q,U*q).floor()},this.setDrawingBufferSize=function(se,Ae,Ue){F=se,U=Ae,q=Ue,n.width=Math.floor(se*Ue),n.height=Math.floor(Ae*Ue),this.setViewport(0,0,se,Ae)},this.getCurrentViewport=function(se){return se.copy(T)},this.getViewport=function(se){return se.copy(de)},this.setViewport=function(se,Ae,Ue,Le){se.isVector4?de.set(se.x,se.y,se.z,se.w):de.set(se,Ae,Ue,Le),X.viewport(T.copy(de).multiplyScalar(q).round())},this.getScissor=function(se){return se.copy(ve)},this.setScissor=function(se,Ae,Ue,Le){se.isVector4?ve.set(se.x,se.y,se.z,se.w):ve.set(se,Ae,Ue,Le),X.scissor(L.copy(ve).multiplyScalar(q).round())},this.getScissorTest=function(){return Re},this.setScissorTest=function(se){X.setScissorTest(Re=se)},this.setOpaqueSort=function(se){Y=se},this.setTransparentSort=function(se){ne=se},this.getClearColor=function(se){return se.copy(je.getClearColor())},this.setClearColor=function(){je.setClearColor.apply(je,arguments)},this.getClearAlpha=function(){return je.getClearAlpha()},this.setClearAlpha=function(){je.setClearAlpha.apply(je,arguments)},this.clear=function(se=!0,Ae=!0,Ue=!0){let Le=0;if(se){let De=!1;if(D!==null){const lt=D.texture.format;De=lt===jx||lt===Wx||lt===Gx}if(De){const lt=D.texture.type,Tt=lt===js||lt===xc||lt===Fx||lt===bh||lt===zx||lt===$x,Pt=je.getClearColor(),Vt=je.getClearAlpha(),Kt=Pt.r,Zt=Pt.g,en=Pt.b;Tt?(y[0]=Kt,y[1]=Zt,y[2]=en,y[3]=Vt,$.clearBufferuiv($.COLOR,0,y)):(b[0]=Kt,b[1]=Zt,b[2]=en,b[3]=Vt,$.clearBufferiv($.COLOR,0,b))}else Le|=$.COLOR_BUFFER_BIT}Ae&&(Le|=$.DEPTH_BUFFER_BIT),Ue&&(Le|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(Le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",pe,!1),n.removeEventListener("webglcontextrestored",Ve,!1),n.removeEventListener("webglcontextcreationerror",$e,!1),He.dispose(),Be.dispose(),fe.dispose(),ke.dispose(),J.dispose(),he.dispose(),Rt.dispose(),Yt.dispose(),xe.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",an),Oe.removeEventListener("sessionend",Ri),ni.stop()};function pe(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Ve(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const se=oe.autoReset,Ae=tt.enabled,Ue=tt.autoUpdate,Le=tt.needsUpdate,De=tt.type;we(),oe.autoReset=se,tt.enabled=Ae,tt.autoUpdate=Ue,tt.needsUpdate=Le,tt.type=De}function $e(se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",se.statusMessage)}function Ze(se){const Ae=se.target;Ae.removeEventListener("dispose",Ze),ot(Ae)}function ot(se){hn(se),fe.remove(se)}function hn(se){const Ae=fe.get(se).programs;Ae!==void 0&&(Ae.forEach(function(Ue){xe.releaseProgram(Ue)}),se.isShaderMaterial&&xe.releaseShaderCache(se))}this.renderBufferDirect=function(se,Ae,Ue,Le,De,lt){Ae===null&&(Ae=re);const Tt=De.isMesh&&De.matrixWorld.determinant()<0,Pt=Kv(se,Ae,Ue,Le,De);X.setMaterial(Le,Tt);let Vt=Ue.index,Kt=1;if(Le.wireframe===!0){if(Vt=ue.getWireframeAttribute(Ue),Vt===void 0)return;Kt=2}const Zt=Ue.drawRange,en=Ue.attributes.position;let tn=Zt.start*Kt,On=(Zt.start+Zt.count)*Kt;lt!==null&&(tn=Math.max(tn,lt.start*Kt),On=Math.min(On,(lt.start+lt.count)*Kt)),Vt!==null?(tn=Math.max(tn,0),On=Math.min(On,Vt.count)):en!=null&&(tn=Math.max(tn,0),On=Math.min(On,en.count));const rr=On-tn;if(rr<0||rr===1/0)return;Rt.setup(De,Le,Pt,Ue,Vt);let us,En=bt;if(Vt!==null&&(us=W.get(Vt),En=_t,En.setIndex(us)),De.isMesh)Le.wireframe===!0?(X.setLineWidth(Le.wireframeLinewidth*H()),En.setMode($.LINES)):En.setMode($.TRIANGLES);else if(De.isLine){let Jt=Le.linewidth;Jt===void 0&&(Jt=1),X.setLineWidth(Jt*H()),De.isLineSegments?En.setMode($.LINES):De.isLineLoop?En.setMode($.LINE_LOOP):En.setMode($.LINE_STRIP)}else De.isPoints?En.setMode($.POINTS):De.isSprite&&En.setMode($.TRIANGLES);if(De.isBatchedMesh)De._multiDrawInstances!==null?En.renderMultiDrawInstances(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount,De._multiDrawInstances):En.renderMultiDraw(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount);else if(De.isInstancedMesh)En.renderInstances(tn,rr,De.count);else if(Ue.isInstancedBufferGeometry){const Jt=Ue._maxInstanceCount!==void 0?Ue._maxInstanceCount:1/0,vl=Math.min(Ue.instanceCount,Jt);En.renderInstances(tn,rr,vl)}else En.render(tn,rr)};function dn(se,Ae,Ue){se.transparent===!0&&se.side===Lr&&se.forceSinglePass===!1?(se.side=er,se.needsUpdate=!0,Pn(se,Ae,Ue),se.side=eo,se.needsUpdate=!0,Pn(se,Ae,Ue),se.side=Lr):Pn(se,Ae,Ue)}this.compile=function(se,Ae,Ue=null){Ue===null&&(Ue=se),C=Be.get(Ue),C.init(Ae),w.push(C),Ue.traverseVisible(function(De){De.isLight&&De.layers.test(Ae.layers)&&(C.pushLight(De),De.castShadow&&C.pushShadow(De))}),se!==Ue&&se.traverseVisible(function(De){De.isLight&&De.layers.test(Ae.layers)&&(C.pushLight(De),De.castShadow&&C.pushShadow(De))}),C.setupLights(x._useLegacyLights);const Le=new Set;return se.traverse(function(De){const lt=De.material;if(lt)if(Array.isArray(lt))for(let Tt=0;Tt<lt.length;Tt++){const Pt=lt[Tt];dn(Pt,Ue,De),Le.add(Pt)}else dn(lt,Ue,De),Le.add(lt)}),w.pop(),C=null,Le},this.compileAsync=function(se,Ae,Ue=null){const Le=this.compile(se,Ae,Ue);return new Promise(De=>{function lt(){if(Le.forEach(function(Tt){fe.get(Tt).currentProgram.isReady()&&Le.delete(Tt)}),Le.size===0){De(se);return}setTimeout(lt,10)}le.get("KHR_parallel_shader_compile")!==null?lt():setTimeout(lt,10)})};let xn=null;function Zn(se){xn&&xn(se)}function an(){ni.stop()}function Ri(){ni.start()}const ni=new II;ni.setAnimationLoop(Zn),typeof self<"u"&&ni.setContext(self),this.setAnimationLoop=function(se){xn=se,Oe.setAnimationLoop(se),se===null?ni.stop():ni.start()},Oe.addEventListener("sessionstart",an),Oe.addEventListener("sessionend",Ri),this.render=function(se,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Ae.parent===null&&Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),Oe.enabled===!0&&Oe.isPresenting===!0&&(Oe.cameraAutoUpdate===!0&&Oe.updateCamera(Ae),Ae=Oe.getCamera()),se.isScene===!0&&se.onBeforeRender(x,se,Ae,D),C=Be.get(se,w.length),C.init(Ae),w.push(C),Me.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),Ee.setFromProjectionMatrix(Me),Ce=this.localClippingEnabled,ce=ze.init(this.clippingPlanes,Ce),S=He.get(se,E.length),S.init(),E.push(S),Sh(se,Ae,0,x.sortObjects),S.finish(),x.sortObjects===!0&&S.sort(Y,ne);const Ue=Oe.enabled===!1||Oe.isPresenting===!1||Oe.hasDepthSensing()===!1;Ue&&je.addToRenderList(S,se),this.info.render.frame++,ce===!0&&ze.beginShadows();const Le=C.state.shadowsArray;tt.render(Le,se,Ae),ce===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const De=S.opaque,lt=S.transmissive;if(C.setupLights(x._useLegacyLights),Ae.isArrayCamera){const Tt=Ae.cameras;if(lt.length>0)for(let Pt=0,Vt=Tt.length;Pt<Vt;Pt++){const Kt=Tt[Pt];$p(De,lt,se,Kt)}Ue&&je.render(se);for(let Pt=0,Vt=Tt.length;Pt<Vt;Pt++){const Kt=Tt[Pt];Si(S,se,Kt,Kt.viewport)}}else lt.length>0&&$p(De,lt,se,Ae),Ue&&je.render(se),Si(S,se,Ae);D!==null&&(be.updateMultisampleRenderTarget(D),be.updateRenderTargetMipmap(D)),se.isScene===!0&&se.onAfterRender(x,se,Ae),Rt.resetDefaultState(),A=-1,N=null,w.pop(),w.length>0?(C=w[w.length-1],ce===!0&&ze.setGlobalState(x.clippingPlanes,C.state.camera)):C=null,E.pop(),E.length>0?S=E[E.length-1]:S=null};function Sh(se,Ae,Ue,Le){if(se.visible===!1)return;if(se.layers.test(Ae.layers)){if(se.isGroup)Ue=se.renderOrder;else if(se.isLOD)se.autoUpdate===!0&&se.update(Ae);else if(se.isLight)C.pushLight(se),se.castShadow&&C.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||Ee.intersectsSprite(se)){Le&&ee.setFromMatrixPosition(se.matrixWorld).applyMatrix4(Me);const Tt=he.update(se),Pt=se.material;Pt.visible&&S.push(se,Tt,Pt,Ue,ee.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(!se.frustumCulled||Ee.intersectsObject(se))){const Tt=he.update(se),Pt=se.material;if(Le&&(se.boundingSphere!==void 0?(se.boundingSphere===null&&se.computeBoundingSphere(),ee.copy(se.boundingSphere.center)):(Tt.boundingSphere===null&&Tt.computeBoundingSphere(),ee.copy(Tt.boundingSphere.center)),ee.applyMatrix4(se.matrixWorld).applyMatrix4(Me)),Array.isArray(Pt)){const Vt=Tt.groups;for(let Kt=0,Zt=Vt.length;Kt<Zt;Kt++){const en=Vt[Kt],tn=Pt[en.materialIndex];tn&&tn.visible&&S.push(se,Tt,tn,Ue,ee.z,en)}}else Pt.visible&&S.push(se,Tt,Pt,Ue,ee.z,null)}}const lt=se.children;for(let Tt=0,Pt=lt.length;Tt<Pt;Tt++)Sh(lt[Tt],Ae,Ue,Le)}function Si(se,Ae,Ue,Le){const De=se.opaque,lt=se.transmissive,Tt=se.transparent;C.setupLightsView(Ue),ce===!0&&ze.setGlobalState(x.clippingPlanes,Ue),Le&&X.viewport(T.copy(Le)),De.length>0&&gl(De,Ae,Ue),lt.length>0&&gl(lt,Ae,Ue),Tt.length>0&&gl(Tt,Ae,Ue),X.buffers.depth.setTest(!0),X.buffers.depth.setMask(!0),X.buffers.color.setMask(!0),X.setPolygonOffset(!1)}function $p(se,Ae,Ue,Le){if((Ue.isScene===!0?Ue.overrideMaterial:null)!==null)return;C.state.transmissionRenderTarget[Le.id]===void 0&&(C.state.transmissionRenderTarget[Le.id]=new Ss(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")||le.has("EXT_color_buffer_float")?yh:js,minFilter:$s,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const lt=C.state.transmissionRenderTarget[Le.id],Tt=Le.viewport||T;lt.setSize(Tt.z,Tt.w);const Pt=x.getRenderTarget();x.setRenderTarget(lt),x.getClearColor(R),B=x.getClearAlpha(),B<1&&x.setClearColor(16777215,.5),x.clear();const Vt=x.toneMapping;x.toneMapping=Ya;const Kt=Le.viewport;if(Le.viewport!==void 0&&(Le.viewport=void 0),C.setupLightsView(Le),ce===!0&&ze.setGlobalState(x.clippingPlanes,Le),gl(se,Ue,Le),be.updateMultisampleRenderTarget(lt),be.updateRenderTargetMipmap(lt),le.has("WEBGL_multisampled_render_to_texture")===!1){let Zt=!1;for(let en=0,tn=Ae.length;en<tn;en++){const On=Ae[en],rr=On.object,us=On.geometry,En=On.material,Jt=On.group;if(En.side===Lr&&rr.layers.test(Le.layers)){const vl=En.side;En.side=er,En.needsUpdate=!0,co(rr,Ue,Le,us,En,Jt),En.side=vl,En.needsUpdate=!0,Zt=!0}}Zt===!0&&(be.updateMultisampleRenderTarget(lt),be.updateRenderTargetMipmap(lt))}x.setRenderTarget(Pt),x.setClearColor(R,B),Kt!==void 0&&(Le.viewport=Kt),x.toneMapping=Vt}function gl(se,Ae,Ue){const Le=Ae.isScene===!0?Ae.overrideMaterial:null;for(let De=0,lt=se.length;De<lt;De++){const Tt=se[De],Pt=Tt.object,Vt=Tt.geometry,Kt=Le===null?Tt.material:Le,Zt=Tt.group;Pt.layers.test(Ue.layers)&&co(Pt,Ae,Ue,Vt,Kt,Zt)}}function co(se,Ae,Ue,Le,De,lt){se.onBeforeRender(x,Ae,Ue,Le,De,lt),se.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),De.onBeforeRender(x,Ae,Ue,Le,se,lt),De.transparent===!0&&De.side===Lr&&De.forceSinglePass===!1?(De.side=er,De.needsUpdate=!0,x.renderBufferDirect(Ue,Ae,Le,De,se,lt),De.side=eo,De.needsUpdate=!0,x.renderBufferDirect(Ue,Ae,Le,De,se,lt),De.side=Lr):x.renderBufferDirect(Ue,Ae,Le,De,se,lt),se.onAfterRender(x,Ae,Ue,Le,De,lt)}function Pn(se,Ae,Ue){Ae.isScene!==!0&&(Ae=re);const Le=fe.get(se),De=C.state.lights,lt=C.state.shadowsArray,Tt=De.state.version,Pt=xe.getParameters(se,De.state,lt,Ae,Ue),Vt=xe.getProgramCacheKey(Pt);let Kt=Le.programs;Le.environment=se.isMeshStandardMaterial?Ae.environment:null,Le.fog=Ae.fog,Le.envMap=(se.isMeshStandardMaterial?J:ke).get(se.envMap||Le.environment),Le.envMapRotation=Le.environment!==null&&se.envMap===null?Ae.environmentRotation:se.envMapRotation,Kt===void 0&&(se.addEventListener("dispose",Ze),Kt=new Map,Le.programs=Kt);let Zt=Kt.get(Vt);if(Zt!==void 0){if(Le.currentProgram===Zt&&Le.lightsStateVersion===Tt)return uo(se,Pt),Zt}else Pt.uniforms=xe.getUniforms(se),se.onBuild(Ue,Pt,x),se.onBeforeCompile(Pt,x),Zt=xe.acquireProgram(Pt,Vt),Kt.set(Vt,Zt),Le.uniforms=Pt.uniforms;const en=Le.uniforms;return(!se.isShaderMaterial&&!se.isRawShaderMaterial||se.clipping===!0)&&(en.clippingPlanes=ze.uniform),uo(se,Pt),Le.needsLights=Xv(se),Le.lightsStateVersion=Tt,Le.needsLights&&(en.ambientLightColor.value=De.state.ambient,en.lightProbe.value=De.state.probe,en.directionalLights.value=De.state.directional,en.directionalLightShadows.value=De.state.directionalShadow,en.spotLights.value=De.state.spot,en.spotLightShadows.value=De.state.spotShadow,en.rectAreaLights.value=De.state.rectArea,en.ltc_1.value=De.state.rectAreaLTC1,en.ltc_2.value=De.state.rectAreaLTC2,en.pointLights.value=De.state.point,en.pointLightShadows.value=De.state.pointShadow,en.hemisphereLights.value=De.state.hemi,en.directionalShadowMap.value=De.state.directionalShadowMap,en.directionalShadowMatrix.value=De.state.directionalShadowMatrix,en.spotShadowMap.value=De.state.spotShadowMap,en.spotLightMatrix.value=De.state.spotLightMatrix,en.spotLightMap.value=De.state.spotLightMap,en.pointShadowMap.value=De.state.pointShadowMap,en.pointShadowMatrix.value=De.state.pointShadowMatrix),Le.currentProgram=Zt,Le.uniformsList=null,Zt}function Ms(se){if(se.uniformsList===null){const Ae=se.currentProgram.getUniforms();se.uniformsList=l0.seqWithValue(Ae.seq,se.uniforms)}return se.uniformsList}function uo(se,Ae){const Ue=fe.get(se);Ue.outputColorSpace=Ae.outputColorSpace,Ue.batching=Ae.batching,Ue.instancing=Ae.instancing,Ue.instancingColor=Ae.instancingColor,Ue.instancingMorph=Ae.instancingMorph,Ue.skinning=Ae.skinning,Ue.morphTargets=Ae.morphTargets,Ue.morphNormals=Ae.morphNormals,Ue.morphColors=Ae.morphColors,Ue.morphTargetsCount=Ae.morphTargetsCount,Ue.numClippingPlanes=Ae.numClippingPlanes,Ue.numIntersection=Ae.numClipIntersection,Ue.vertexAlphas=Ae.vertexAlphas,Ue.vertexTangents=Ae.vertexTangents,Ue.toneMapping=Ae.toneMapping}function Kv(se,Ae,Ue,Le,De){Ae.isScene!==!0&&(Ae=re),be.resetTextureUnits();const lt=Ae.fog,Tt=Le.isMeshStandardMaterial?Ae.environment:null,Pt=D===null?x.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:oo,Vt=(Le.isMeshStandardMaterial?J:ke).get(Le.envMap||Tt),Kt=Le.vertexColors===!0&&!!Ue.attributes.color&&Ue.attributes.color.itemSize===4,Zt=!!Ue.attributes.tangent&&(!!Le.normalMap||Le.anisotropy>0),en=!!Ue.morphAttributes.position,tn=!!Ue.morphAttributes.normal,On=!!Ue.morphAttributes.color;let rr=Ya;Le.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(rr=x.toneMapping);const us=Ue.morphAttributes.position||Ue.morphAttributes.normal||Ue.morphAttributes.color,En=us!==void 0?us.length:0,Jt=fe.get(Le),vl=C.state.lights;if(ce===!0&&(Ce===!0||se!==N)){const ji=se===N&&Le.id===A;ze.setState(Le,se,ji)}let $n=!1;Le.version===Jt.__version?(Jt.needsLights&&Jt.lightsStateVersion!==vl.state.version||Jt.outputColorSpace!==Pt||De.isBatchedMesh&&Jt.batching===!1||!De.isBatchedMesh&&Jt.batching===!0||De.isInstancedMesh&&Jt.instancing===!1||!De.isInstancedMesh&&Jt.instancing===!0||De.isSkinnedMesh&&Jt.skinning===!1||!De.isSkinnedMesh&&Jt.skinning===!0||De.isInstancedMesh&&Jt.instancingColor===!0&&De.instanceColor===null||De.isInstancedMesh&&Jt.instancingColor===!1&&De.instanceColor!==null||De.isInstancedMesh&&Jt.instancingMorph===!0&&De.morphTexture===null||De.isInstancedMesh&&Jt.instancingMorph===!1&&De.morphTexture!==null||Jt.envMap!==Vt||Le.fog===!0&&Jt.fog!==lt||Jt.numClippingPlanes!==void 0&&(Jt.numClippingPlanes!==ze.numPlanes||Jt.numIntersection!==ze.numIntersection)||Jt.vertexAlphas!==Kt||Jt.vertexTangents!==Zt||Jt.morphTargets!==en||Jt.morphNormals!==tn||Jt.morphColors!==On||Jt.toneMapping!==rr||Jt.morphTargetsCount!==En)&&($n=!0):($n=!0,Jt.__version=Le.version);let sr=Jt.currentProgram;$n===!0&&(sr=Pn(Le,Ae,De));let yl=!1,bl=!1,Eh=!1;const ii=sr.getUniforms(),Xs=Jt.uniforms;if(X.useProgram(sr.program)&&(yl=!0,bl=!0,Eh=!0),Le.id!==A&&(A=Le.id,bl=!0),yl||N!==se){ii.setValue($,"projectionMatrix",se.projectionMatrix),ii.setValue($,"viewMatrix",se.matrixWorldInverse);const ji=ii.map.cameraPosition;ji!==void 0&&ji.setValue($,ee.setFromMatrixPosition(se.matrixWorld)),K.logarithmicDepthBuffer&&ii.setValue($,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial)&&ii.setValue($,"isOrthographic",se.isOrthographicCamera===!0),N!==se&&(N=se,bl=!0,Eh=!0)}if(De.isSkinnedMesh){ii.setOptional($,De,"bindMatrix"),ii.setOptional($,De,"bindMatrixInverse");const ji=De.skeleton;ji&&(ji.boneTexture===null&&ji.computeBoneTexture(),ii.setValue($,"boneTexture",ji.boneTexture,be))}De.isBatchedMesh&&(ii.setOptional($,De,"batchingTexture"),ii.setValue($,"batchingTexture",De._matricesTexture,be));const Mh=Ue.morphAttributes;if((Mh.position!==void 0||Mh.normal!==void 0||Mh.color!==void 0)&&et.update(De,Ue,sr),(bl||Jt.receiveShadow!==De.receiveShadow)&&(Jt.receiveShadow=De.receiveShadow,ii.setValue($,"receiveShadow",De.receiveShadow)),Le.isMeshGouraudMaterial&&Le.envMap!==null&&(Xs.envMap.value=Vt,Xs.flipEnvMap.value=Vt.isCubeTexture&&Vt.isRenderTargetTexture===!1?-1:1),Le.isMeshStandardMaterial&&Le.envMap===null&&Ae.environment!==null&&(Xs.envMapIntensity.value=Ae.environmentIntensity),bl&&(ii.setValue($,"toneMappingExposure",x.toneMappingExposure),Jt.needsLights&&qv(Xs,Eh),lt&&Le.fog===!0&&Te.refreshFogUniforms(Xs,lt),Te.refreshMaterialUniforms(Xs,Le,q,U,C.state.transmissionRenderTarget[se.id]),l0.upload($,Ms(Jt),Xs,be)),Le.isShaderMaterial&&Le.uniformsNeedUpdate===!0&&(l0.upload($,Ms(Jt),Xs,be),Le.uniformsNeedUpdate=!1),Le.isSpriteMaterial&&ii.setValue($,"center",De.center),ii.setValue($,"modelViewMatrix",De.modelViewMatrix),ii.setValue($,"normalMatrix",De.normalMatrix),ii.setValue($,"modelMatrix",De.matrixWorld),Le.isShaderMaterial||Le.isRawShaderMaterial){const ji=Le.uniformsGroups;for(let wr=0,Yv=ji.length;wr<Yv;wr++){const Hp=ji[wr];Yt.update(Hp,sr),Yt.bind(Hp,sr)}}return sr}function qv(se,Ae){se.ambientLightColor.needsUpdate=Ae,se.lightProbe.needsUpdate=Ae,se.directionalLights.needsUpdate=Ae,se.directionalLightShadows.needsUpdate=Ae,se.pointLights.needsUpdate=Ae,se.pointLightShadows.needsUpdate=Ae,se.spotLights.needsUpdate=Ae,se.spotLightShadows.needsUpdate=Ae,se.rectAreaLights.needsUpdate=Ae,se.hemisphereLights.needsUpdate=Ae}function Xv(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&se.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(se,Ae,Ue){fe.get(se.texture).__webglTexture=Ae,fe.get(se.depthTexture).__webglTexture=Ue;const Le=fe.get(se);Le.__hasExternalTextures=!0,Le.__autoAllocateDepthBuffer=Ue===void 0,Le.__autoAllocateDepthBuffer||le.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Le.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(se,Ae){const Ue=fe.get(se);Ue.__webglFramebuffer=Ae,Ue.__useDefaultFramebuffer=Ae===void 0},this.setRenderTarget=function(se,Ae=0,Ue=0){D=se,P=Ae,I=Ue;let Le=!0,De=null,lt=!1,Tt=!1;if(se){const Vt=fe.get(se);Vt.__useDefaultFramebuffer!==void 0?(X.bindFramebuffer($.FRAMEBUFFER,null),Le=!1):Vt.__webglFramebuffer===void 0?be.setupRenderTarget(se):Vt.__hasExternalTextures&&be.rebindTextures(se,fe.get(se.texture).__webglTexture,fe.get(se.depthTexture).__webglTexture);const Kt=se.texture;(Kt.isData3DTexture||Kt.isDataArrayTexture||Kt.isCompressedArrayTexture)&&(Tt=!0);const Zt=fe.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(Array.isArray(Zt[Ae])?De=Zt[Ae][Ue]:De=Zt[Ae],lt=!0):se.samples>0&&be.useMultisampledRTT(se)===!1?De=fe.get(se).__webglMultisampledFramebuffer:Array.isArray(Zt)?De=Zt[Ue]:De=Zt,T.copy(se.viewport),L.copy(se.scissor),V=se.scissorTest}else T.copy(de).multiplyScalar(q).floor(),L.copy(ve).multiplyScalar(q).floor(),V=Re;if(X.bindFramebuffer($.FRAMEBUFFER,De)&&Le&&X.drawBuffers(se,De),X.viewport(T),X.scissor(L),X.setScissorTest(V),lt){const Vt=fe.get(se.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Vt.__webglTexture,Ue)}else if(Tt){const Vt=fe.get(se.texture),Kt=Ae||0;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,Vt.__webglTexture,Ue||0,Kt)}A=-1},this.readRenderTargetPixels=function(se,Ae,Ue,Le,De,lt,Tt){if(!(se&&se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pt=fe.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&Tt!==void 0&&(Pt=Pt[Tt]),Pt){X.bindFramebuffer($.FRAMEBUFFER,Pt);try{const Vt=se.texture,Kt=Vt.format,Zt=Vt.type;if(!K.textureFormatReadable(Kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!K.textureTypeReadable(Zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ae>=0&&Ae<=se.width-Le&&Ue>=0&&Ue<=se.height-De&&$.readPixels(Ae,Ue,Le,De,at.convert(Kt),at.convert(Zt),lt)}finally{const Vt=D!==null?fe.get(D).__webglFramebuffer:null;X.bindFramebuffer($.FRAMEBUFFER,Vt)}}},this.copyFramebufferToTexture=function(se,Ae,Ue=0){const Le=Math.pow(2,-Ue),De=Math.floor(Ae.image.width*Le),lt=Math.floor(Ae.image.height*Le);be.setTexture2D(Ae,0),$.copyTexSubImage2D($.TEXTURE_2D,Ue,0,0,se.x,se.y,De,lt),X.unbindTexture()},this.copyTextureToTexture=function(se,Ae,Ue,Le=0){const De=Ae.image.width,lt=Ae.image.height,Tt=at.convert(Ue.format),Pt=at.convert(Ue.type);be.setTexture2D(Ue,0),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,Ue.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,Ue.unpackAlignment),Ae.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Le,se.x,se.y,De,lt,Tt,Pt,Ae.image.data):Ae.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Le,se.x,se.y,Ae.mipmaps[0].width,Ae.mipmaps[0].height,Tt,Ae.mipmaps[0].data):$.texSubImage2D($.TEXTURE_2D,Le,se.x,se.y,Tt,Pt,Ae.image),Le===0&&Ue.generateMipmaps&&$.generateMipmap($.TEXTURE_2D),X.unbindTexture()},this.copyTextureToTexture3D=function(se,Ae,Ue,Le,De=0){const lt=se.max.x-se.min.x,Tt=se.max.y-se.min.y,Pt=se.max.z-se.min.z,Vt=at.convert(Le.format),Kt=at.convert(Le.type);let Zt;if(Le.isData3DTexture)be.setTexture3D(Le,0),Zt=$.TEXTURE_3D;else if(Le.isDataArrayTexture||Le.isCompressedArrayTexture)be.setTexture2DArray(Le,0),Zt=$.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,Le.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,Le.unpackAlignment);const en=$.getParameter($.UNPACK_ROW_LENGTH),tn=$.getParameter($.UNPACK_IMAGE_HEIGHT),On=$.getParameter($.UNPACK_SKIP_PIXELS),rr=$.getParameter($.UNPACK_SKIP_ROWS),us=$.getParameter($.UNPACK_SKIP_IMAGES),En=Ue.isCompressedTexture?Ue.mipmaps[De]:Ue.image;$.pixelStorei($.UNPACK_ROW_LENGTH,En.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,En.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,se.min.x),$.pixelStorei($.UNPACK_SKIP_ROWS,se.min.y),$.pixelStorei($.UNPACK_SKIP_IMAGES,se.min.z),Ue.isDataTexture||Ue.isData3DTexture?$.texSubImage3D(Zt,De,Ae.x,Ae.y,Ae.z,lt,Tt,Pt,Vt,Kt,En.data):Le.isCompressedArrayTexture?$.compressedTexSubImage3D(Zt,De,Ae.x,Ae.y,Ae.z,lt,Tt,Pt,Vt,En.data):$.texSubImage3D(Zt,De,Ae.x,Ae.y,Ae.z,lt,Tt,Pt,Vt,Kt,En),$.pixelStorei($.UNPACK_ROW_LENGTH,en),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,tn),$.pixelStorei($.UNPACK_SKIP_PIXELS,On),$.pixelStorei($.UNPACK_SKIP_ROWS,rr),$.pixelStorei($.UNPACK_SKIP_IMAGES,us),De===0&&Le.generateMipmaps&&$.generateMipmap(Zt),X.unbindTexture()},this.initTexture=function(se){se.isCubeTexture?be.setTextureCube(se,0):se.isData3DTexture?be.setTexture3D(se,0):se.isDataArrayTexture||se.isCompressedArrayTexture?be.setTexture2DArray(se,0):be.setTexture2D(se,0),X.unbindTexture()},this.resetState=function(){P=0,I=0,D=null,X.reset(),Rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return oa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===lv?"display-p3":"srgb",n.unpackColorSpace=Rn.workingColorSpace===_p?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class fv{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Qe(e),this.density=n}clone(){return new fv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class pv{constructor(e,n=1,t=1e3){this.isFog=!0,this.name="",this.color=new Qe(e),this.near=n,this.far=t}clone(){return new pv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class sh extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ai,this.environmentIntensity=1,this.environmentRotation=new Ai,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class Ep{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Yf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=os()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return SI("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,t){e*=this.stride,t*=n.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=n.array[t+s];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=os()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),t=new this.constructor(n,this.stride);return t.setUsage(this.usage),t}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=os()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const hr=new Q;class no{constructor(e,n,t,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=t,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,t=this.data.count;n<t;n++)hr.fromBufferAttribute(this,n),hr.applyMatrix4(e),this.setXYZ(n,hr.x,hr.y,hr.z);return this}applyNormalMatrix(e){for(let n=0,t=this.count;n<t;n++)hr.fromBufferAttribute(this,n),hr.applyNormalMatrix(e),this.setXYZ(n,hr.x,hr.y,hr.z);return this}transformDirection(e){for(let n=0,t=this.count;n<t;n++)hr.fromBufferAttribute(this,n),hr.transformDirection(e),this.setXYZ(n,hr.x,hr.y,hr.z);return this}getComponent(e,n){let t=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(t=pr(t,this.array)),t}setComponent(e,n,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+n]=t,this}setX(e,n){return this.normalized&&(n=nn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=nn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=nn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=nn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=pr(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=pr(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=pr(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=pr(n,this.array)),n}setXY(e,n,t){return e=e*this.data.stride+this.offset,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=t,this}setXYZ(e,n,t,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array),s=nn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=t,this.data.array[e+2]=s,this}setXYZW(e,n,t,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=nn(n,this.array),t=nn(t,this.array),s=nn(s,this.array),a=nn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=t,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let t=0;t<this.count;t++){const s=t*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[s+a])}return new wn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new no(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let t=0;t<this.count;t++){const s=t*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nw extends tr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Qe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let mu;const pd=new Q,gu=new Q,vu=new Q,yu=new Ge,md=new Ge,FI=new ct,mg=new Q,gd=new Q,gg=new Q,PT=new Ge,G1=new Ge,IT=new Ge;let UI=class extends _n{constructor(e=new nw){if(super(),this.isSprite=!0,this.type="Sprite",mu===void 0){mu=new Xt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Ep(n,5);mu.setIndex([0,1,2,0,2,3]),mu.setAttribute("position",new no(t,3,0,!1)),mu.setAttribute("uv",new no(t,2,3,!1))}this.geometry=mu,this.material=e,this.center=new Ge(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gu.setFromMatrixScale(this.matrixWorld),FI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gu.multiplyScalar(-vu.z);const t=this.material.rotation;let s,a;t!==0&&(a=Math.cos(t),s=Math.sin(t));const l=this.center;vg(mg.set(-.5,-.5,0),vu,l,gu,s,a),vg(gd.set(.5,-.5,0),vu,l,gu,s,a),vg(gg.set(.5,.5,0),vu,l,gu,s,a),PT.set(0,0),G1.set(1,0),IT.set(1,1);let c=e.ray.intersectTriangle(mg,gd,gg,!1,pd);if(c===null&&(vg(gd.set(-.5,.5,0),vu,l,gu,s,a),G1.set(0,1),c=e.ray.intersectTriangle(mg,gg,gd,!1,pd),c===null))return;const h=e.ray.origin.distanceTo(pd);h<e.near||h>e.far||n.push({distance:h,point:pd.clone(),uv:Br.getInterpolation(pd,mg,gd,gg,PT,G1,IT,new Ge),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function vg(i,e,n,t,s,a){yu.subVectors(i,n).addScalar(.5).multiply(t),s!==void 0?(md.x=a*yu.x-s*yu.y,md.y=s*yu.x+a*yu.y):md.copy(yu),i.copy(e),i.x+=md.x,i.y+=md.y,i.applyMatrix4(FI)}const yg=new Q,NT=new Q;class zI extends _n{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let t=0,s=n.length;t<s;t++){const a=n[t];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,t=0){n=Math.abs(n);const s=this.levels;let a;for(a=0;a<s.length&&!(n<s[a].distance);a++);return s.splice(a,0,{distance:n,hysteresis:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let t,s;for(t=1,s=n.length;t<s;t++){let a=n[t].distance;if(n[t].object.visible&&(a-=a*n[t].hysteresis),e<a)break}return n[t-1].object}return null}raycast(e,n){if(this.levels.length>0){yg.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(yg);this.getObjectForDistance(s).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){yg.setFromMatrixPosition(e.matrixWorld),NT.setFromMatrixPosition(this.matrixWorld);const t=yg.distanceTo(NT)/e.zoom;n[0].object.visible=!0;let s,a;for(s=1,a=n.length;s<a;s++){let l=n[s].distance;if(n[s].object.visible&&(l-=l*n[s].hysteresis),t>=l)n[s-1].object.visible=!1,n[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<a;s++)n[s].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const t=this.levels;for(let s=0,a=t.length;s<a;s++){const l=t[s];n.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return n}}const RT=new Q,DT=new ln,LT=new ln,bQ=new Q,BT=new ct,bg=new Q,W1=new Wi,OT=new ct,j1=new kc;class iw extends Fn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=s_,this.bindMatrix=new ct,this.bindMatrixInverse=new ct,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Gi),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let t=0;t<n.count;t++)this.getVertexPosition(t,bg),this.boundingBox.expandByPoint(bg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Wi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let t=0;t<n.count;t++)this.getVertexPosition(t,bg),this.boundingSphere.expandByPoint(bg)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const t=this.material,s=this.matrixWorld;t!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),W1.copy(this.boundingSphere),W1.applyMatrix4(s),e.ray.intersectsSphere(W1)!==!1&&(OT.copy(s).invert(),j1.copy(e.ray).applyMatrix4(OT),!(this.boundingBox!==null&&j1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,j1)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ln,n=this.geometry.attributes.skinWeight;for(let t=0,s=n.count;t<s;t++){e.fromBufferAttribute(n,t);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(t,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===s_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===QP?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const t=this.skeleton,s=this.geometry;DT.fromBufferAttribute(s.attributes.skinIndex,e),LT.fromBufferAttribute(s.attributes.skinWeight,e),RT.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const l=LT.getComponent(a);if(l!==0){const c=DT.getComponent(a);BT.multiplyMatrices(t.bones[c].matrixWorld,t.boneInverses[c]),n.addScaledVector(bQ.copy(RT).applyMatrix4(BT),l)}}return n.applyMatrix4(this.bindMatrixInverse)}}class Qf extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class el extends Wn{constructor(e=null,n=1,t=1,s,a,l,c,h,d=ki,p=ki,m,v){super(null,l,c,h,d,p,s,a,m,v),this.isDataTexture=!0,this.image={data:e,width:n,height:t},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const VT=new ct,_Q=new ct;class Mp{constructor(e=[],n=[]){this.uuid=os(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,s=this.bones.length;t<s;t++)this.boneInverses.push(new ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const t=new ct;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,n=this.boneInverses,t=this.boneMatrices,s=this.boneTexture;for(let a=0,l=e.length;a<l;a++){const c=e[a]?e[a].matrixWorld:_Q;VT.multiplyMatrices(c,n[a]),VT.toArray(t,a*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Mp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const t=new el(n,e,e,Fr,_s);return t.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=t,this}getBoneByName(e){for(let n=0,t=this.bones.length;n<t;n++){const s=this.bones[n];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let t=0,s=e.bones.length;t<s;t++){const a=e.bones[t];let l=n[a];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new Qf),this.bones.push(l),this.boneInverses.push(new ct().fromArray(e.boneInverses[t]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,t=this.boneInverses;for(let s=0,a=n.length;s<a;s++){const l=n[s];e.bones.push(l.uuid);const c=t[s];e.boneInverses.push(c.toArray())}return e}}class ah extends wn{constructor(e,n,t,s=1){super(e,n,t),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bu=new ct,FT=new ct,_g=[],UT=new Gi,xQ=new ct,vd=new Fn,yd=new Wi;class $I extends Fn{constructor(e,n,t){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new ah(new Float32Array(t*16),16),this.instanceColor=null,this.morphTexture=null,this.count=t,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<t;s++)this.setMatrixAt(s,xQ)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Gi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let t=0;t<n;t++)this.getMatrixAt(t,bu),UT.copy(e.boundingBox).applyMatrix4(bu),this.boundingBox.union(UT)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Wi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let t=0;t<n;t++)this.getMatrixAt(t,bu),yd.copy(e.boundingSphere).applyMatrix4(bu),this.boundingSphere.union(yd)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const t=n.morphTargetInfluences,s=this.morphTexture.source.data.data,a=t.length+1,l=e*a+1;for(let c=0;c<t.length;c++)t[c]=s[l+c]}raycast(e,n){const t=this.matrixWorld,s=this.count;if(vd.geometry=this.geometry,vd.material=this.material,vd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),yd.copy(this.boundingSphere),yd.applyMatrix4(t),e.ray.intersectsSphere(yd)!==!1))for(let a=0;a<s;a++){this.getMatrixAt(a,bu),FT.multiplyMatrices(t,bu),vd.matrixWorld=FT,vd.raycast(e,_g);for(let l=0,c=_g.length;l<c;l++){const h=_g[l];h.instanceId=a,h.object=this,n.push(h)}_g.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new ah(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const t=n.morphTargetInfluences,s=t.length+1;this.morphTexture===null&&(this.morphTexture=new el(new Float32Array(s*this.count),s,this.count,Hx,_s));const a=this.morphTexture.source.data.data;let l=0;for(let d=0;d<t.length;d++)l+=t[d];const c=this.geometry.morphTargetsRelative?1:1-l,h=s*e;a[h]=c,a.set(t,h+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function wQ(i,e){return i.z-e.z}function CQ(i,e){return e.z-i.z}class SQ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const t=this.pool,s=this.list;this.index>=t.length&&t.push({start:-1,count:-1,z:-1});const a=t[this.index];s.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=n}reset(){this.list.length=0,this.index=0}}const _u="batchId",Vo=new ct,zT=new ct,EQ=new ct,$T=new ct,K1=new Sp,xg=new Gi,Fl=new Wi,bd=new Q,q1=new SQ,Ji=new Fn,wg=[];function MQ(i,e,n=0){const t=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let a=0;a<s;a++)for(let l=0;l<t;l++)e.setComponent(a+n,l,i.getComponent(a,l))}else e.array.set(i.array,n*t);e.needsUpdate=!0}class HI extends Fn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,t=n*2,s){super(new Xt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=t,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),t=new el(n,e,e,Fr,_s);this._matricesTexture=t}_initializeGeometry(e){const n=this.geometry,t=this._maxVertexCount,s=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const c in e.attributes){const h=e.getAttribute(c),{array:d,itemSize:p,normalized:m}=h,v=new d.constructor(t*p),y=new wn(v,p,m);n.setAttribute(c,y)}if(e.getIndex()!==null){const c=t>65536?new Uint32Array(a):new Uint16Array(a);n.setIndex(new wn(c,1))}const l=s>65536?new Uint32Array(t):new Uint16Array(t);n.setAttribute(_u,new wn(l,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(_u))throw new Error(`BatchedMesh: Geometry cannot use attribute "${_u}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const t in n.attributes){if(t===_u)continue;if(!e.hasAttribute(t))throw new Error(`BatchedMesh: Added geometry missing "${t}". All geometries must have consistent attributes.`);const s=e.getAttribute(t),a=n.getAttribute(t);if(s.itemSize!==a.itemSize||s.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gi);const e=this._geometryCount,n=this.boundingBox,t=this._active;n.makeEmpty();for(let s=0;s<e;s++)t[s]!==!1&&(this.getMatrixAt(s,Vo),this.getBoundingBoxAt(s,xg).applyMatrix4(Vo),n.union(xg))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Wi);const e=this._geometryCount,n=this.boundingSphere,t=this._active;n.makeEmpty();for(let s=0;s<e;s++)t[s]!==!1&&(this.getMatrixAt(s,Vo),this.getBoundingSphereAt(s,Fl).applyMatrix4(Vo),n.union(Fl))}addGeometry(e,n=-1,t=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const l=this._reservedRanges,c=this._drawRanges,h=this._bounds;this._geometryCount!==0&&(a=l[l.length-1]),n===-1?s.vertexCount=e.getAttribute("position").count:s.vertexCount=n,a===null?s.vertexStart=0:s.vertexStart=a.vertexStart+a.vertexCount;const d=e.getIndex(),p=d!==null;if(p&&(t===-1?s.indexCount=d.count:s.indexCount=t,a===null?s.indexStart=0:s.indexStart=a.indexStart+a.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const m=this._visibility,v=this._active,y=this._matricesTexture,b=this._matricesTexture.image.data;m.push(!0),v.push(!0);const S=this._geometryCount;this._geometryCount++,EQ.toArray(b,S*16),y.needsUpdate=!0,l.push(s),c.push({start:p?s.indexStart:s.vertexStart,count:-1}),h.push({boxInitialized:!1,box:new Gi,sphereInitialized:!1,sphere:new Wi});const C=this.geometry.getAttribute(_u);for(let E=0;E<s.vertexCount;E++)C.setX(s.vertexStart+E,S);return C.needsUpdate=!0,this.setGeometryAt(S,e),S}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const t=this.geometry,s=t.getIndex()!==null,a=t.getIndex(),l=n.getIndex(),c=this._reservedRanges[e];if(s&&l.count>c.indexCount||n.attributes.position.count>c.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const h=c.vertexStart,d=c.vertexCount;for(const y in t.attributes){if(y===_u)continue;const b=n.getAttribute(y),S=t.getAttribute(y);MQ(b,S,h);const C=b.itemSize;for(let E=b.count,w=d;E<w;E++){const x=h+E;for(let M=0;M<C;M++)S.setComponent(x,M,0)}S.needsUpdate=!0,S.addUpdateRange(h*C,d*C)}if(s){const y=c.indexStart;for(let b=0;b<l.count;b++)a.setX(y+b,h+l.getX(b));for(let b=l.count,S=c.indexCount;b<S;b++)a.setX(y+b,h);a.needsUpdate=!0,a.addUpdateRange(y,c.indexCount)}const p=this._bounds[e];n.boundingBox!==null?(p.box.copy(n.boundingBox),p.boxInitialized=!0):p.boxInitialized=!1,n.boundingSphere!==null?(p.sphere.copy(n.boundingSphere),p.sphereInitialized=!0):p.sphereInitialized=!1;const m=this._drawRanges[e],v=n.getAttribute("position");return m.count=s?l.count:v.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,n){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=n,e}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const s=this._bounds[e],a=s.box,l=this.geometry;if(s.boxInitialized===!1){a.makeEmpty();const c=l.index,h=l.attributes.position,d=this._drawRanges[e];for(let p=d.start,m=d.start+d.count;p<m;p++){let v=p;c&&(v=c.getX(v)),a.expandByPoint(bd.fromBufferAttribute(h,v))}s.boxInitialized=!0}return n.copy(a),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const s=this._bounds[e],a=s.sphere,l=this.geometry;if(s.sphereInitialized===!1){a.makeEmpty(),this.getBoundingBoxAt(e,xg),xg.getCenter(a.center);const c=l.index,h=l.attributes.position,d=this._drawRanges[e];let p=0;for(let m=d.start,v=d.start+d.count;m<v;m++){let y=m;c&&(y=c.getX(y)),bd.fromBufferAttribute(h,y),p=Math.max(p,a.center.distanceToSquared(bd))}a.radius=Math.sqrt(p),s.sphereInitialized=!0}return n.copy(a),n}setMatrixAt(e,n){const t=this._active,s=this._matricesTexture,a=this._matricesTexture.image.data,l=this._geometryCount;return e>=l||t[e]===!1?this:(n.toArray(a,e*16),s.needsUpdate=!0,this)}getMatrixAt(e,n){const t=this._active,s=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||t[e]===!1?null:n.fromArray(s,e*16)}setVisibleAt(e,n){const t=this._visibility,s=this._active,a=this._geometryCount;return e>=a||s[e]===!1||t[e]===n?this:(t[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,t=this._active,s=this._geometryCount;return e>=s||t[e]===!1?!1:n[e]}raycast(e,n){const t=this._visibility,s=this._active,a=this._drawRanges,l=this._geometryCount,c=this.matrixWorld,h=this.geometry;Ji.material=this.material,Ji.geometry.index=h.index,Ji.geometry.attributes=h.attributes,Ji.geometry.boundingBox===null&&(Ji.geometry.boundingBox=new Gi),Ji.geometry.boundingSphere===null&&(Ji.geometry.boundingSphere=new Wi);for(let d=0;d<l;d++){if(!t[d]||!s[d])continue;const p=a[d];Ji.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(d,Ji.matrixWorld).premultiply(c),this.getBoundingBoxAt(d,Ji.geometry.boundingBox),this.getBoundingSphereAt(d,Ji.geometry.boundingSphere),Ji.raycast(e,wg);for(let m=0,v=wg.length;m<v;m++){const y=wg[m];y.object=this,y.batchId=d,n.push(y)}wg.length=0}Ji.material=null,Ji.geometry.index=null,Ji.geometry.attributes={},Ji.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,t,s,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=s.getIndex(),c=l===null?1:l.array.BYTES_PER_ELEMENT,h=this._active,d=this._visibility,p=this._multiDrawStarts,m=this._multiDrawCounts,v=this._drawRanges,y=this.perObjectFrustumCulled;y&&($T.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse).multiply(this.matrixWorld),K1.setFromProjectionMatrix($T,e.coordinateSystem));let b=0;if(this.sortObjects){zT.copy(this.matrixWorld).invert(),bd.setFromMatrixPosition(t.matrixWorld).applyMatrix4(zT);for(let E=0,w=d.length;E<w;E++)if(d[E]&&h[E]){this.getMatrixAt(E,Vo),this.getBoundingSphereAt(E,Fl).applyMatrix4(Vo);let x=!1;if(y&&(x=!K1.intersectsSphere(Fl)),!x){const M=bd.distanceTo(Fl.center);q1.push(v[E],M)}}const S=q1.list,C=this.customSort;C===null?S.sort(a.transparent?CQ:wQ):C.call(this,S,t);for(let E=0,w=S.length;E<w;E++){const x=S[E];p[b]=x.start*c,m[b]=x.count,b++}q1.reset()}else for(let S=0,C=d.length;S<C;S++)if(d[S]&&h[S]){let E=!1;if(y&&(this.getMatrixAt(S,Vo),this.getBoundingSphereAt(S,Fl).applyMatrix4(Vo),E=!K1.intersectsSphere(Fl)),!E){const w=v[S];p[b]=w.start*c,m[b]=w.count,b++}}this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,n,t,s,a,l){this.onBeforeRender(e,null,s,a,l)}}class nr extends tr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Qe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const N0=new Q,R0=new Q,HT=new ct,_d=new kc,Cg=new Wi,X1=new Q,GT=new Q;let io=class extends _n{constructor(e=new Xt,n=new nr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,t=[0];for(let s=1,a=n.count;s<a;s++)N0.fromBufferAttribute(n,s-1),R0.fromBufferAttribute(n,s),t[s]=t[s-1],t[s]+=N0.distanceTo(R0);e.setAttribute("lineDistance",new yt(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const t=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,l=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),Cg.copy(t.boundingSphere),Cg.applyMatrix4(s),Cg.radius+=a,e.ray.intersectsSphere(Cg)===!1)return;HT.copy(s).invert(),_d.copy(e.ray).applyMatrix4(HT);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=this.isLineSegments?2:1,p=t.index,v=t.attributes.position;if(p!==null){const y=Math.max(0,l.start),b=Math.min(p.count,l.start+l.count);for(let S=y,C=b-1;S<C;S+=d){const E=p.getX(S),w=p.getX(S+1),x=Sg(this,e,_d,h,E,w);x&&n.push(x)}if(this.isLineLoop){const S=p.getX(b-1),C=p.getX(y),E=Sg(this,e,_d,h,S,C);E&&n.push(E)}}else{const y=Math.max(0,l.start),b=Math.min(v.count,l.start+l.count);for(let S=y,C=b-1;S<C;S+=d){const E=Sg(this,e,_d,h,S,S+1);E&&n.push(E)}if(this.isLineLoop){const S=Sg(this,e,_d,h,b-1,y);S&&n.push(S)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,t=Object.keys(n);if(t.length>0){const s=n[t[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const c=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}};function Sg(i,e,n,t,s,a){const l=i.geometry.attributes.position;if(N0.fromBufferAttribute(l,s),R0.fromBufferAttribute(l,a),n.distanceSqToSegment(N0,R0,X1,GT)>t)return;X1.applyMatrix4(i.matrixWorld);const h=e.ray.origin.distanceTo(X1);if(!(h<e.near||h>e.far))return{distance:h,point:GT.clone().applyMatrix4(i.matrixWorld),index:s,face:null,faceIndex:null,object:i}}const WT=new Q,jT=new Q;class va extends io{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,t=[];for(let s=0,a=n.count;s<a;s+=2)WT.fromBufferAttribute(n,s),jT.fromBufferAttribute(n,s+1),t[s]=s===0?0:t[s-1],t[s+1]=t[s]+WT.distanceTo(jT);e.setAttribute("lineDistance",new yt(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class GI extends io{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class rw extends tr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Qe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const KT=new ct,B_=new kc,Eg=new Wi,Mg=new Q;class WI extends _n{constructor(e=new Xt,n=new rw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const t=this.geometry,s=this.matrixWorld,a=e.params.Points.threshold,l=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),Eg.copy(t.boundingSphere),Eg.applyMatrix4(s),Eg.radius+=a,e.ray.intersectsSphere(Eg)===!1)return;KT.copy(s).invert(),B_.copy(e.ray).applyMatrix4(KT);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=t.index,m=t.attributes.position;if(d!==null){const v=Math.max(0,l.start),y=Math.min(d.count,l.start+l.count);for(let b=v,S=y;b<S;b++){const C=d.getX(b);Mg.fromBufferAttribute(m,C),qT(Mg,C,h,s,e,n,this)}}else{const v=Math.max(0,l.start),y=Math.min(m.count,l.start+l.count);for(let b=v,S=y;b<S;b++)Mg.fromBufferAttribute(m,b),qT(Mg,b,h,s,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,t=Object.keys(n);if(t.length>0){const s=n[t[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=s.length;a<l;a++){const c=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}}function qT(i,e,n,t,s,a,l){const c=B_.distanceSqToPoint(i);if(c<n){const h=new Q;B_.closestPointToPoint(i,h),h.applyMatrix4(t);const d=s.ray.origin.distanceTo(h);if(d<s.near||d>s.far)return;a.push({distance:d,distanceToRay:Math.sqrt(c),point:h,index:e,face:null,object:l})}}class TQ extends Wn{constructor(e,n,t,s,a,l,c,h,d){super(e,n,t,s,a,l,c,h,d),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:gi,this.magFilter=a!==void 0?a:gi,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class O_ extends Wn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=ki,this.minFilter=ki,this.generateMipmaps=!1,this.needsUpdate=!0}}class dc extends Wn{constructor(e,n,t,s,a,l,c,h,d,p,m,v){super(null,l,c,h,d,p,s,a,m,v),this.isCompressedTexture=!0,this.image={width:n,height:t},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class kQ extends dc{constructor(e,n,t,s,a,l){super(e,n,t,a,l),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=mr}}class AQ extends dc{constructor(e,n,t){super(void 0,e[0].width,e[0].height,n,t,to),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class PQ extends Wn{constructor(e,n,t,s,a,l,c,h,d){super(e,n,t,s,a,l,c,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Es{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const t=this.getUtoTmapping(e);return this.getPoint(t,n)}getPoints(e=5){const n=[];for(let t=0;t<=e;t++)n.push(this.getPoint(t/e));return n}getSpacedPoints(e=5){const n=[];for(let t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let t,s=this.getPoint(0),a=0;n.push(0);for(let l=1;l<=e;l++)t=this.getPoint(l/e),a+=t.distanceTo(s),n.push(a),s=t;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const t=this.getLengths();let s=0;const a=t.length;let l;n?l=n:l=e*t[a-1];let c=0,h=a-1,d;for(;c<=h;)if(s=Math.floor(c+(h-c)/2),d=t[s]-l,d<0)c=s+1;else if(d>0)h=s-1;else{h=s;break}if(s=h,t[s]===l)return s/(a-1);const p=t[s],v=t[s+1]-p,y=(l-p)/v;return(s+y)/(a-1)}getTangent(e,n){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const l=this.getPoint(s),c=this.getPoint(a),h=n||(l.isVector2?new Ge:new Q);return h.copy(c).sub(l).normalize(),h}getTangentAt(e,n){const t=this.getUtoTmapping(e);return this.getTangent(t,n)}computeFrenetFrames(e,n){const t=new Q,s=[],a=[],l=[],c=new Q,h=new ct;for(let y=0;y<=e;y++){const b=y/e;s[y]=this.getTangentAt(b,new Q)}a[0]=new Q,l[0]=new Q;let d=Number.MAX_VALUE;const p=Math.abs(s[0].x),m=Math.abs(s[0].y),v=Math.abs(s[0].z);p<=d&&(d=p,t.set(1,0,0)),m<=d&&(d=m,t.set(0,1,0)),v<=d&&t.set(0,0,1),c.crossVectors(s[0],t).normalize(),a[0].crossVectors(s[0],c),l[0].crossVectors(s[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),l[y]=l[y-1].clone(),c.crossVectors(s[y-1],s[y]),c.length()>Number.EPSILON){c.normalize();const b=Math.acos(ui(s[y-1].dot(s[y]),-1,1));a[y].applyMatrix4(h.makeRotationAxis(c,b))}l[y].crossVectors(s[y],a[y])}if(n===!0){let y=Math.acos(ui(a[0].dot(a[e]),-1,1));y/=e,s[0].dot(c.crossVectors(a[0],a[e]))>0&&(y=-y);for(let b=1;b<=e;b++)a[b].applyMatrix4(h.makeRotationAxis(s[b],y*b)),l[b].crossVectors(s[b],a[b])}return{tangents:s,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class mv extends Es{constructor(e=0,n=0,t=1,s=1,a=0,l=Math.PI*2,c=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=t,this.yRadius=s,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=c,this.aRotation=h}getPoint(e,n=new Ge){const t=n,s=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=s;for(;a>s;)a-=s;a<Number.EPSILON&&(l?a=0:a=s),this.aClockwise===!0&&!l&&(a===s?a=-s:a=a-s);const c=this.aStartAngle+e*a;let h=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=h-this.aX,y=d-this.aY;h=v*p-y*m+this.aX,d=v*m+y*p+this.aY}return t.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class jI extends mv{constructor(e,n,t,s,a,l){super(e,n,t,t,s,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function sw(){let i=0,e=0,n=0,t=0;function s(a,l,c,h){i=a,e=c,n=-3*a+3*l-2*c-h,t=2*a-2*l+c+h}return{initCatmullRom:function(a,l,c,h,d){s(l,c,d*(c-a),d*(h-l))},initNonuniformCatmullRom:function(a,l,c,h,d,p,m){let v=(l-a)/d-(c-a)/(d+p)+(c-l)/p,y=(c-l)/p-(h-l)/(p+m)+(h-c)/m;v*=p,y*=p,s(l,c,v,y)},calc:function(a){const l=a*a,c=l*a;return i+e*a+n*l+t*c}}}const Tg=new Q,Y1=new sw,J1=new sw,Z1=new sw;class KI extends Es{constructor(e=[],n=!1,t="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=t,this.tension=s}getPoint(e,n=new Q){const t=n,s=this.points,a=s.length,l=(a-(this.closed?0:1))*e;let c=Math.floor(l),h=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/a)+1)*a:h===0&&c===a-1&&(c=a-2,h=1);let d,p;this.closed||c>0?d=s[(c-1)%a]:(Tg.subVectors(s[0],s[1]).add(s[0]),d=Tg);const m=s[c%a],v=s[(c+1)%a];if(this.closed||c+2<a?p=s[(c+2)%a]:(Tg.subVectors(s[a-1],s[a-2]).add(s[a-1]),p=Tg),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let b=Math.pow(d.distanceToSquared(m),y),S=Math.pow(m.distanceToSquared(v),y),C=Math.pow(v.distanceToSquared(p),y);S<1e-4&&(S=1),b<1e-4&&(b=S),C<1e-4&&(C=S),Y1.initNonuniformCatmullRom(d.x,m.x,v.x,p.x,b,S,C),J1.initNonuniformCatmullRom(d.y,m.y,v.y,p.y,b,S,C),Z1.initNonuniformCatmullRom(d.z,m.z,v.z,p.z,b,S,C)}else this.curveType==="catmullrom"&&(Y1.initCatmullRom(d.x,m.x,v.x,p.x,this.tension),J1.initCatmullRom(d.y,m.y,v.y,p.y,this.tension),Z1.initCatmullRom(d.z,m.z,v.z,p.z,this.tension));return t.set(Y1.calc(h),J1.calc(h),Z1.calc(h)),t}copy(e){super.copy(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const s=e.points[n];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,t=this.points.length;n<t;n++){const s=this.points[n];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const s=e.points[n];this.points.push(new Q().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function XT(i,e,n,t,s){const a=(t-e)*.5,l=(s-n)*.5,c=i*i,h=i*c;return(2*n-2*t+a+l)*h+(-3*n+3*t-2*a-l)*c+a*i+n}function IQ(i,e){const n=1-i;return n*n*e}function NQ(i,e){return 2*(1-i)*i*e}function RQ(i,e){return i*i*e}function Pf(i,e,n,t){return IQ(i,e)+NQ(i,n)+RQ(i,t)}function DQ(i,e){const n=1-i;return n*n*n*e}function LQ(i,e){const n=1-i;return 3*n*n*i*e}function BQ(i,e){return 3*(1-i)*i*i*e}function OQ(i,e){return i*i*i*e}function If(i,e,n,t,s){return DQ(i,e)+LQ(i,n)+BQ(i,t)+OQ(i,s)}class aw extends Es{constructor(e=new Ge,n=new Ge,t=new Ge,s=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=t,this.v3=s}getPoint(e,n=new Ge){const t=n,s=this.v0,a=this.v1,l=this.v2,c=this.v3;return t.set(If(e,s.x,a.x,l.x,c.x),If(e,s.y,a.y,l.y,c.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class qI extends Es{constructor(e=new Q,n=new Q,t=new Q,s=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=t,this.v3=s}getPoint(e,n=new Q){const t=n,s=this.v0,a=this.v1,l=this.v2,c=this.v3;return t.set(If(e,s.x,a.x,l.x,c.x),If(e,s.y,a.y,l.y,c.y),If(e,s.z,a.z,l.z,c.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ow extends Es{constructor(e=new Ge,n=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ge){const t=n;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ge){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XI extends Es{constructor(e=new Q,n=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Q){const t=n;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Q){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lw extends Es{constructor(e=new Ge,n=new Ge,t=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=t}getPoint(e,n=new Ge){const t=n,s=this.v0,a=this.v1,l=this.v2;return t.set(Pf(e,s.x,a.x,l.x),Pf(e,s.y,a.y,l.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cw extends Es{constructor(e=new Q,n=new Q,t=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=t}getPoint(e,n=new Q){const t=n,s=this.v0,a=this.v1,l=this.v2;return t.set(Pf(e,s.x,a.x,l.x),Pf(e,s.y,a.y,l.y),Pf(e,s.z,a.z,l.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uw extends Es{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ge){const t=n,s=this.points,a=(s.length-1)*e,l=Math.floor(a),c=a-l,h=s[l===0?l:l-1],d=s[l],p=s[l>s.length-2?s.length-1:l+1],m=s[l>s.length-3?s.length-1:l+2];return t.set(XT(c,h.x,d.x,p.x,m.x),XT(c,h.y,d.y,p.y,m.y)),t}copy(e){super.copy(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const s=e.points[n];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,t=this.points.length;n<t;n++){const s=this.points[n];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,t=e.points.length;n<t;n++){const s=e.points[n];this.points.push(new Ge().fromArray(s))}return this}}var D0=Object.freeze({__proto__:null,ArcCurve:jI,CatmullRomCurve3:KI,CubicBezierCurve:aw,CubicBezierCurve3:qI,EllipseCurve:mv,LineCurve:ow,LineCurve3:XI,QuadraticBezierCurve:lw,QuadraticBezierCurve3:cw,SplineCurve:uw});class YI extends Es{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const t=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new D0[t](n,e))}return this}getPoint(e,n){const t=e*this.getLength(),s=this.getCurveLengths();let a=0;for(;a<s.length;){if(s[a]>=t){const l=s[a]-t,c=this.curves[a],h=c.getLength(),d=h===0?0:1-l/h;return c.getPointAt(d,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let t=0,s=this.curves.length;t<s;t++)n+=this.curves[t].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let t=0;t<=e;t++)n.push(this.getPoint(t/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let t;for(let s=0,a=this.curves;s<a.length;s++){const l=a[s],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(c);for(let d=0;d<h.length;d++){const p=h[d];t&&t.equals(p)||(n.push(p),t=p)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,t=e.curves.length;n<t;n++){const s=e.curves[n];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,t=this.curves.length;n<t;n++){const s=this.curves[n];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,t=e.curves.length;n<t;n++){const s=e.curves[n];this.curves.push(new D0[s.type]().fromJSON(s))}return this}}let ep=class extends YI{constructor(e){super(),this.type="Path",this.currentPoint=new Ge,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,t=e.length;n<t;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const t=new ow(this.currentPoint.clone(),new Ge(e,n));return this.curves.push(t),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,t,s){const a=new lw(this.currentPoint.clone(),new Ge(e,n),new Ge(t,s));return this.curves.push(a),this.currentPoint.set(t,s),this}bezierCurveTo(e,n,t,s,a,l){const c=new aw(this.currentPoint.clone(),new Ge(e,n),new Ge(t,s),new Ge(a,l));return this.curves.push(c),this.currentPoint.set(a,l),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),t=new uw(n);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,t,s,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+c,n+h,t,s,a,l),this}absarc(e,n,t,s,a,l){return this.absellipse(e,n,t,t,s,a,l),this}ellipse(e,n,t,s,a,l,c,h){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,n+p,t,s,a,l,c,h),this}absellipse(e,n,t,s,a,l,c,h){const d=new mv(e,n,t,s,a,l,c,h);if(this.curves.length>0){const m=d.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Tp extends Xt{constructor(e=[new Ge(0,-.5),new Ge(.5,0),new Ge(0,.5)],n=12,t=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:t,phiLength:s},n=Math.floor(n),s=ui(s,0,Math.PI*2);const a=[],l=[],c=[],h=[],d=[],p=1/n,m=new Q,v=new Ge,y=new Q,b=new Q,S=new Q;let C=0,E=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:C=e[w+1].x-e[w].x,E=e[w+1].y-e[w].y,y.x=E*1,y.y=-C,y.z=E*0,S.copy(y),y.normalize(),h.push(y.x,y.y,y.z);break;case e.length-1:h.push(S.x,S.y,S.z);break;default:C=e[w+1].x-e[w].x,E=e[w+1].y-e[w].y,y.x=E*1,y.y=-C,y.z=E*0,b.copy(y),y.x+=S.x,y.y+=S.y,y.z+=S.z,y.normalize(),h.push(y.x,y.y,y.z),S.copy(b)}for(let w=0;w<=n;w++){const x=t+w*p*s,M=Math.sin(x),P=Math.cos(x);for(let I=0;I<=e.length-1;I++){m.x=e[I].x*M,m.y=e[I].y,m.z=e[I].x*P,l.push(m.x,m.y,m.z),v.x=w/n,v.y=I/(e.length-1),c.push(v.x,v.y);const D=h[3*I+0]*M,A=h[3*I+1],N=h[3*I+0]*P;d.push(D,A,N)}}for(let w=0;w<n;w++)for(let x=0;x<e.length-1;x++){const M=x+w*e.length,P=M,I=M+e.length,D=M+e.length+1,A=M+1;a.push(P,I,A),a.push(D,A,I)}this.setIndex(a),this.setAttribute("position",new yt(l,3)),this.setAttribute("uv",new yt(c,2)),this.setAttribute("normal",new yt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tp(e.points,e.segments,e.phiStart,e.phiLength)}}class gv extends Tp{constructor(e=1,n=1,t=4,s=8){const a=new ep;a.absarc(0,-n/2,e,Math.PI*1.5,0),a.absarc(0,n/2,e,0,Math.PI*.5),super(a.getPoints(t),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:t,radialSegments:s}}static fromJSON(e){return new gv(e.radius,e.length,e.capSegments,e.radialSegments)}}class vv extends Xt{constructor(e=1,n=32,t=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:t,thetaLength:s},n=Math.max(3,n);const a=[],l=[],c=[],h=[],d=new Q,p=new Ge;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);for(let m=0,v=3;m<=n;m++,v+=3){const y=t+m/n*s;d.x=e*Math.cos(y),d.y=e*Math.sin(y),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(l[v]/e+1)/2,p.y=(l[v+1]/e+1)/2,h.push(p.x,p.y)}for(let m=1;m<=n;m++)a.push(m,m+1,0);this.setIndex(a),this.setAttribute("position",new yt(l,3)),this.setAttribute("normal",new yt(c,3)),this.setAttribute("uv",new yt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xh extends Xt{constructor(e=1,n=1,t=1,s=32,a=1,l=!1,c=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:t,radialSegments:s,heightSegments:a,openEnded:l,thetaStart:c,thetaLength:h};const d=this;s=Math.floor(s),a=Math.floor(a);const p=[],m=[],v=[],y=[];let b=0;const S=[],C=t/2;let E=0;w(),l===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(p),this.setAttribute("position",new yt(m,3)),this.setAttribute("normal",new yt(v,3)),this.setAttribute("uv",new yt(y,2));function w(){const M=new Q,P=new Q;let I=0;const D=(n-e)/t;for(let A=0;A<=a;A++){const N=[],T=A/a,L=T*(n-e)+e;for(let V=0;V<=s;V++){const R=V/s,B=R*h+c,F=Math.sin(B),U=Math.cos(B);P.x=L*F,P.y=-T*t+C,P.z=L*U,m.push(P.x,P.y,P.z),M.set(F,D,U).normalize(),v.push(M.x,M.y,M.z),y.push(R,1-T),N.push(b++)}S.push(N)}for(let A=0;A<s;A++)for(let N=0;N<a;N++){const T=S[N][A],L=S[N+1][A],V=S[N+1][A+1],R=S[N][A+1];p.push(T,L,R),p.push(L,V,R),I+=6}d.addGroup(E,I,0),E+=I}function x(M){const P=b,I=new Ge,D=new Q;let A=0;const N=M===!0?e:n,T=M===!0?1:-1;for(let V=1;V<=s;V++)m.push(0,C*T,0),v.push(0,T,0),y.push(.5,.5),b++;const L=b;for(let V=0;V<=s;V++){const B=V/s*h+c,F=Math.cos(B),U=Math.sin(B);D.x=N*U,D.y=C*T,D.z=N*F,m.push(D.x,D.y,D.z),v.push(0,T,0),I.x=F*.5+.5,I.y=U*.5*T+.5,y.push(I.x,I.y),b++}for(let V=0;V<s;V++){const R=P+V,B=L+V;M===!0?p.push(B,B+1,R):p.push(B+1,B,R),A+=3}d.addGroup(E,A,M===!0?1:2),E+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yv extends xh{constructor(e=1,n=1,t=32,s=1,a=!1,l=0,c=Math.PI*2){super(0,e,n,t,s,a,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:t,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c}}static fromJSON(e){return new yv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pl extends Xt{constructor(e=[],n=[],t=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:t,detail:s};const a=[],l=[];c(s),d(t),p(),this.setAttribute("position",new yt(a,3)),this.setAttribute("normal",new yt(a.slice(),3)),this.setAttribute("uv",new yt(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function c(w){const x=new Q,M=new Q,P=new Q;for(let I=0;I<n.length;I+=3)y(n[I+0],x),y(n[I+1],M),y(n[I+2],P),h(x,M,P,w)}function h(w,x,M,P){const I=P+1,D=[];for(let A=0;A<=I;A++){D[A]=[];const N=w.clone().lerp(M,A/I),T=x.clone().lerp(M,A/I),L=I-A;for(let V=0;V<=L;V++)V===0&&A===I?D[A][V]=N:D[A][V]=N.clone().lerp(T,V/L)}for(let A=0;A<I;A++)for(let N=0;N<2*(I-A)-1;N++){const T=Math.floor(N/2);N%2===0?(v(D[A][T+1]),v(D[A+1][T]),v(D[A][T])):(v(D[A][T+1]),v(D[A+1][T+1]),v(D[A+1][T]))}}function d(w){const x=new Q;for(let M=0;M<a.length;M+=3)x.x=a[M+0],x.y=a[M+1],x.z=a[M+2],x.normalize().multiplyScalar(w),a[M+0]=x.x,a[M+1]=x.y,a[M+2]=x.z}function p(){const w=new Q;for(let x=0;x<a.length;x+=3){w.x=a[x+0],w.y=a[x+1],w.z=a[x+2];const M=C(w)/2/Math.PI+.5,P=E(w)/Math.PI+.5;l.push(M,1-P)}b(),m()}function m(){for(let w=0;w<l.length;w+=6){const x=l[w+0],M=l[w+2],P=l[w+4],I=Math.max(x,M,P),D=Math.min(x,M,P);I>.9&&D<.1&&(x<.2&&(l[w+0]+=1),M<.2&&(l[w+2]+=1),P<.2&&(l[w+4]+=1))}}function v(w){a.push(w.x,w.y,w.z)}function y(w,x){const M=w*3;x.x=e[M+0],x.y=e[M+1],x.z=e[M+2]}function b(){const w=new Q,x=new Q,M=new Q,P=new Q,I=new Ge,D=new Ge,A=new Ge;for(let N=0,T=0;N<a.length;N+=9,T+=6){w.set(a[N+0],a[N+1],a[N+2]),x.set(a[N+3],a[N+4],a[N+5]),M.set(a[N+6],a[N+7],a[N+8]),I.set(l[T+0],l[T+1]),D.set(l[T+2],l[T+3]),A.set(l[T+4],l[T+5]),P.copy(w).add(x).add(M).divideScalar(3);const L=C(P);S(I,T+0,w,L),S(D,T+2,x,L),S(A,T+4,M,L)}}function S(w,x,M,P){P<0&&w.x===1&&(l[x]=w.x-1),M.x===0&&M.z===0&&(l[x]=P/2/Math.PI+.5)}function C(w){return Math.atan2(w.z,-w.x)}function E(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pl(e.vertices,e.indices,e.radius,e.details)}}class bv extends pl{constructor(e=1,n=0){const t=(1+Math.sqrt(5))/2,s=1/t,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-t,0,-s,t,0,s,-t,0,s,t,-s,-t,0,-s,t,0,s,-t,0,s,t,0,-t,0,-s,t,0,-s,-t,0,s,t,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new bv(e.radius,e.detail)}}const kg=new Q,Ag=new Q,Q1=new Q,Pg=new Br;class JI extends Xt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const s=Math.pow(10,4),a=Math.cos(hc*n),l=e.getIndex(),c=e.getAttribute("position"),h=l?l.count:c.count,d=[0,0,0],p=["a","b","c"],m=new Array(3),v={},y=[];for(let b=0;b<h;b+=3){l?(d[0]=l.getX(b),d[1]=l.getX(b+1),d[2]=l.getX(b+2)):(d[0]=b,d[1]=b+1,d[2]=b+2);const{a:S,b:C,c:E}=Pg;if(S.fromBufferAttribute(c,d[0]),C.fromBufferAttribute(c,d[1]),E.fromBufferAttribute(c,d[2]),Pg.getNormal(Q1),m[0]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,m[1]=`${Math.round(C.x*s)},${Math.round(C.y*s)},${Math.round(C.z*s)}`,m[2]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let w=0;w<3;w++){const x=(w+1)%3,M=m[w],P=m[x],I=Pg[p[w]],D=Pg[p[x]],A=`${M}_${P}`,N=`${P}_${M}`;N in v&&v[N]?(Q1.dot(v[N].normal)<=a&&(y.push(I.x,I.y,I.z),y.push(D.x,D.y,D.z)),v[N]=null):A in v||(v[A]={index0:d[w],index1:d[x],normal:Q1.clone()})}}for(const b in v)if(v[b]){const{index0:S,index1:C}=v[b];kg.fromBufferAttribute(c,S),Ag.fromBufferAttribute(c,C),y.push(kg.x,kg.y,kg.z),y.push(Ag.x,Ag.y,Ag.z)}this.setAttribute("position",new yt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let fc=class extends ep{constructor(e){super(e),this.uuid=os(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let t=0,s=this.holes.length;t<s;t++)n[t]=this.holes[t].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,t=e.holes.length;n<t;n++){const s=e.holes[n];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,t=this.holes.length;n<t;n++){const s=this.holes[n];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,t=e.holes.length;n<t;n++){const s=e.holes[n];this.holes.push(new ep().fromJSON(s))}return this}};const VQ={triangulate:function(i,e,n=2){const t=e&&e.length,s=t?e[0]*n:i.length;let a=ZI(i,0,s,n,!0);const l=[];if(!a||a.next===a.prev)return l;let c,h,d,p,m,v,y;if(t&&(a=HQ(i,e,a,n)),i.length>80*n){c=d=i[0],h=p=i[1];for(let b=n;b<s;b+=n)m=i[b],v=i[b+1],m<c&&(c=m),v<h&&(h=v),m>d&&(d=m),v>p&&(p=v);y=Math.max(d-c,p-h),y=y!==0?32767/y:0}return tp(a,l,n,c,h,y,0),l}};function ZI(i,e,n,t,s){let a,l;if(s===eee(i,e,n,t)>0)for(a=e;a<n;a+=t)l=YT(a,i[a],i[a+1],l);else for(a=n-t;a>=e;a-=t)l=YT(a,i[a],i[a+1],l);return l&&_v(l,l.next)&&(ip(l),l=l.next),l}function wc(i,e){if(!i)return i;e||(e=i);let n=i,t;do if(t=!1,!n.steiner&&(_v(n,n.next)||si(n.prev,n,n.next)===0)){if(ip(n),n=e=n.prev,n===n.next)break;t=!0}else n=n.next;while(t||n!==e);return e}function tp(i,e,n,t,s,a,l){if(!i)return;!l&&a&&qQ(i,t,s,a);let c=i,h,d;for(;i.prev!==i.next;){if(h=i.prev,d=i.next,a?UQ(i,t,s,a):FQ(i)){e.push(h.i/n|0),e.push(i.i/n|0),e.push(d.i/n|0),ip(i),i=d.next,c=d.next;continue}if(i=d,i===c){l?l===1?(i=zQ(wc(i),e,n),tp(i,e,n,t,s,a,2)):l===2&&$Q(i,e,n,t,s,a):tp(wc(i),e,n,t,s,a,1);break}}}function FQ(i){const e=i.prev,n=i,t=i.next;if(si(e,n,t)>=0)return!1;const s=e.x,a=n.x,l=t.x,c=e.y,h=n.y,d=t.y,p=s<a?s<l?s:l:a<l?a:l,m=c<h?c<d?c:d:h<d?h:d,v=s>a?s>l?s:l:a>l?a:l,y=c>h?c>d?c:d:h>d?h:d;let b=t.next;for(;b!==e;){if(b.x>=p&&b.x<=v&&b.y>=m&&b.y<=y&&Pu(s,c,a,h,l,d,b.x,b.y)&&si(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function UQ(i,e,n,t){const s=i.prev,a=i,l=i.next;if(si(s,a,l)>=0)return!1;const c=s.x,h=a.x,d=l.x,p=s.y,m=a.y,v=l.y,y=c<h?c<d?c:d:h<d?h:d,b=p<m?p<v?p:v:m<v?m:v,S=c>h?c>d?c:d:h>d?h:d,C=p>m?p>v?p:v:m>v?m:v,E=V_(y,b,e,n,t),w=V_(S,C,e,n,t);let x=i.prevZ,M=i.nextZ;for(;x&&x.z>=E&&M&&M.z<=w;){if(x.x>=y&&x.x<=S&&x.y>=b&&x.y<=C&&x!==s&&x!==l&&Pu(c,p,h,m,d,v,x.x,x.y)&&si(x.prev,x,x.next)>=0||(x=x.prevZ,M.x>=y&&M.x<=S&&M.y>=b&&M.y<=C&&M!==s&&M!==l&&Pu(c,p,h,m,d,v,M.x,M.y)&&si(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;x&&x.z>=E;){if(x.x>=y&&x.x<=S&&x.y>=b&&x.y<=C&&x!==s&&x!==l&&Pu(c,p,h,m,d,v,x.x,x.y)&&si(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;M&&M.z<=w;){if(M.x>=y&&M.x<=S&&M.y>=b&&M.y<=C&&M!==s&&M!==l&&Pu(c,p,h,m,d,v,M.x,M.y)&&si(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function zQ(i,e,n){let t=i;do{const s=t.prev,a=t.next.next;!_v(s,a)&&QI(s,t,t.next,a)&&np(s,a)&&np(a,s)&&(e.push(s.i/n|0),e.push(t.i/n|0),e.push(a.i/n|0),ip(t),ip(t.next),t=i=a),t=t.next}while(t!==i);return wc(t)}function $Q(i,e,n,t,s,a){let l=i;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&JQ(l,c)){let h=e5(l,c);l=wc(l,l.next),h=wc(h,h.next),tp(l,e,n,t,s,a,0),tp(h,e,n,t,s,a,0);return}c=c.next}l=l.next}while(l!==i)}function HQ(i,e,n,t){const s=[];let a,l,c,h,d;for(a=0,l=e.length;a<l;a++)c=e[a]*t,h=a<l-1?e[a+1]*t:i.length,d=ZI(i,c,h,t,!1),d===d.next&&(d.steiner=!0),s.push(YQ(d));for(s.sort(GQ),a=0;a<s.length;a++)n=WQ(s[a],n);return n}function GQ(i,e){return i.x-e.x}function WQ(i,e){const n=jQ(i,e);if(!n)return e;const t=e5(n,i);return wc(t,t.next),wc(n,n.next)}function jQ(i,e){let n=e,t=-1/0,s;const a=i.x,l=i.y;do{if(l<=n.y&&l>=n.next.y&&n.next.y!==n.y){const v=n.x+(l-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(v<=a&&v>t&&(t=v,s=n.x<n.next.x?n:n.next,v===a))return s}n=n.next}while(n!==e);if(!s)return null;const c=s,h=s.x,d=s.y;let p=1/0,m;n=s;do a>=n.x&&n.x>=h&&a!==n.x&&Pu(l<d?a:t,l,h,d,l<d?t:a,l,n.x,n.y)&&(m=Math.abs(l-n.y)/(a-n.x),np(n,i)&&(m<p||m===p&&(n.x>s.x||n.x===s.x&&KQ(s,n)))&&(s=n,p=m)),n=n.next;while(n!==c);return s}function KQ(i,e){return si(i.prev,i,e.prev)<0&&si(e.next,i,i.next)<0}function qQ(i,e,n,t){let s=i;do s.z===0&&(s.z=V_(s.x,s.y,e,n,t)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,XQ(s)}function XQ(i){let e,n,t,s,a,l,c,h,d=1;do{for(n=i,i=null,a=null,l=0;n;){for(l++,t=n,c=0,e=0;e<d&&(c++,t=t.nextZ,!!t);e++);for(h=d;c>0||h>0&&t;)c!==0&&(h===0||!t||n.z<=t.z)?(s=n,n=n.nextZ,c--):(s=t,t=t.nextZ,h--),a?a.nextZ=s:i=s,s.prevZ=a,a=s;n=t}a.nextZ=null,d*=2}while(l>1);return i}function V_(i,e,n,t,s){return i=(i-n)*s|0,e=(e-t)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function YQ(i){let e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function Pu(i,e,n,t,s,a,l,c){return(s-l)*(e-c)>=(i-l)*(a-c)&&(i-l)*(t-c)>=(n-l)*(e-c)&&(n-l)*(a-c)>=(s-l)*(t-c)}function JQ(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!ZQ(i,e)&&(np(i,e)&&np(e,i)&&QQ(i,e)&&(si(i.prev,i,e.prev)||si(i,e.prev,e))||_v(i,e)&&si(i.prev,i,i.next)>0&&si(e.prev,e,e.next)>0)}function si(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function _v(i,e){return i.x===e.x&&i.y===e.y}function QI(i,e,n,t){const s=Ng(si(i,e,n)),a=Ng(si(i,e,t)),l=Ng(si(n,t,i)),c=Ng(si(n,t,e));return!!(s!==a&&l!==c||s===0&&Ig(i,n,e)||a===0&&Ig(i,t,e)||l===0&&Ig(n,i,t)||c===0&&Ig(n,e,t))}function Ig(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function Ng(i){return i>0?1:i<0?-1:0}function ZQ(i,e){let n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&QI(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1}function np(i,e){return si(i.prev,i,i.next)<0?si(i,e,i.next)>=0&&si(i,i.prev,e)>=0:si(i,e,i.prev)<0||si(i,i.next,e)<0}function QQ(i,e){let n=i,t=!1;const s=(i.x+e.x)/2,a=(i.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&s<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(t=!t),n=n.next;while(n!==i);return t}function e5(i,e){const n=new F_(i.i,i.x,i.y),t=new F_(e.i,e.x,e.y),s=i.next,a=e.prev;return i.next=e,e.prev=i,n.next=s,s.prev=n,t.next=n,n.prev=t,a.next=t,t.prev=a,t}function YT(i,e,n,t){const s=new F_(i,e,n);return t?(s.next=t.next,s.prev=t,t.next.prev=s,t.next=s):(s.prev=s,s.next=s),s}function ip(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function F_(i,e,n){this.i=i,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eee(i,e,n,t){let s=0;for(let a=e,l=n-t;a<n;a+=t)s+=(i[l]-i[a])*(i[a+1]+i[l+1]),l=a;return s}class ca{static area(e){const n=e.length;let t=0;for(let s=n-1,a=0;a<n;s=a++)t+=e[s].x*e[a].y-e[a].x*e[s].y;return t*.5}static isClockWise(e){return ca.area(e)<0}static triangulateShape(e,n){const t=[],s=[],a=[];JT(e),ZT(t,e);let l=e.length;n.forEach(JT);for(let h=0;h<n.length;h++)s.push(l),l+=n[h].length,ZT(t,n[h]);const c=VQ.triangulate(t,s);for(let h=0;h<c.length;h+=3)a.push(c.slice(h,h+3));return a}}function JT(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function ZT(i,e){for(let n=0;n<e.length;n++)i.push(e[n].x),i.push(e[n].y)}class xv extends Xt{constructor(e=new fc([new Ge(.5,.5),new Ge(-.5,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const t=this,s=[],a=[];for(let c=0,h=e.length;c<h;c++){const d=e[c];l(d)}this.setAttribute("position",new yt(s,3)),this.setAttribute("uv",new yt(a,2)),this.computeVertexNormals();function l(c){const h=[],d=n.curveSegments!==void 0?n.curveSegments:12,p=n.steps!==void 0?n.steps:1,m=n.depth!==void 0?n.depth:1;let v=n.bevelEnabled!==void 0?n.bevelEnabled:!0,y=n.bevelThickness!==void 0?n.bevelThickness:.2,b=n.bevelSize!==void 0?n.bevelSize:y-.1,S=n.bevelOffset!==void 0?n.bevelOffset:0,C=n.bevelSegments!==void 0?n.bevelSegments:3;const E=n.extrudePath,w=n.UVGenerator!==void 0?n.UVGenerator:tee;let x,M=!1,P,I,D,A;E&&(x=E.getSpacedPoints(p),M=!0,v=!1,P=E.computeFrenetFrames(p,!1),I=new Q,D=new Q,A=new Q),v||(C=0,y=0,b=0,S=0);const N=c.extractPoints(d);let T=N.shape;const L=N.holes;if(!ca.isClockWise(T)){T=T.reverse();for(let le=0,K=L.length;le<K;le++){const X=L[le];ca.isClockWise(X)&&(L[le]=X.reverse())}}const R=ca.triangulateShape(T,L),B=T;for(let le=0,K=L.length;le<K;le++){const X=L[le];T=T.concat(X)}function F(le,K,X){return K||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().addScaledVector(K,X)}const U=T.length,q=R.length;function Y(le,K,X){let oe,fe,be;const ke=le.x-K.x,J=le.y-K.y,W=X.x-le.x,ue=X.y-le.y,he=ke*ke+J*J,xe=ke*ue-J*W;if(Math.abs(xe)>Number.EPSILON){const Te=Math.sqrt(he),He=Math.sqrt(W*W+ue*ue),Be=K.x-J/Te,ze=K.y+ke/Te,tt=X.x-ue/He,je=X.y+W/He,et=((tt-Be)*ue-(je-ze)*W)/(ke*ue-J*W);oe=Be+ke*et-le.x,fe=ze+J*et-le.y;const bt=oe*oe+fe*fe;if(bt<=2)return new Ge(oe,fe);be=Math.sqrt(bt/2)}else{let Te=!1;ke>Number.EPSILON?W>Number.EPSILON&&(Te=!0):ke<-Number.EPSILON?W<-Number.EPSILON&&(Te=!0):Math.sign(J)===Math.sign(ue)&&(Te=!0),Te?(oe=-J,fe=ke,be=Math.sqrt(he)):(oe=ke,fe=J,be=Math.sqrt(he/2))}return new Ge(oe/be,fe/be)}const ne=[];for(let le=0,K=B.length,X=K-1,oe=le+1;le<K;le++,X++,oe++)X===K&&(X=0),oe===K&&(oe=0),ne[le]=Y(B[le],B[X],B[oe]);const de=[];let ve,Re=ne.concat();for(let le=0,K=L.length;le<K;le++){const X=L[le];ve=[];for(let oe=0,fe=X.length,be=fe-1,ke=oe+1;oe<fe;oe++,be++,ke++)be===fe&&(be=0),ke===fe&&(ke=0),ve[oe]=Y(X[oe],X[be],X[ke]);de.push(ve),Re=Re.concat(ve)}for(let le=0;le<C;le++){const K=le/C,X=y*Math.cos(K*Math.PI/2),oe=b*Math.sin(K*Math.PI/2)+S;for(let fe=0,be=B.length;fe<be;fe++){const ke=F(B[fe],ne[fe],oe);ee(ke.x,ke.y,-X)}for(let fe=0,be=L.length;fe<be;fe++){const ke=L[fe];ve=de[fe];for(let J=0,W=ke.length;J<W;J++){const ue=F(ke[J],ve[J],oe);ee(ue.x,ue.y,-X)}}}const Ee=b+S;for(let le=0;le<U;le++){const K=v?F(T[le],Re[le],Ee):T[le];M?(D.copy(P.normals[0]).multiplyScalar(K.x),I.copy(P.binormals[0]).multiplyScalar(K.y),A.copy(x[0]).add(D).add(I),ee(A.x,A.y,A.z)):ee(K.x,K.y,0)}for(let le=1;le<=p;le++)for(let K=0;K<U;K++){const X=v?F(T[K],Re[K],Ee):T[K];M?(D.copy(P.normals[le]).multiplyScalar(X.x),I.copy(P.binormals[le]).multiplyScalar(X.y),A.copy(x[le]).add(D).add(I),ee(A.x,A.y,A.z)):ee(X.x,X.y,m/p*le)}for(let le=C-1;le>=0;le--){const K=le/C,X=y*Math.cos(K*Math.PI/2),oe=b*Math.sin(K*Math.PI/2)+S;for(let fe=0,be=B.length;fe<be;fe++){const ke=F(B[fe],ne[fe],oe);ee(ke.x,ke.y,m+X)}for(let fe=0,be=L.length;fe<be;fe++){const ke=L[fe];ve=de[fe];for(let J=0,W=ke.length;J<W;J++){const ue=F(ke[J],ve[J],oe);M?ee(ue.x,ue.y+x[p-1].y,x[p-1].x+X):ee(ue.x,ue.y,m+X)}}}ce(),Ce();function ce(){const le=s.length/3;if(v){let K=0,X=U*K;for(let oe=0;oe<q;oe++){const fe=R[oe];re(fe[2]+X,fe[1]+X,fe[0]+X)}K=p+C*2,X=U*K;for(let oe=0;oe<q;oe++){const fe=R[oe];re(fe[0]+X,fe[1]+X,fe[2]+X)}}else{for(let K=0;K<q;K++){const X=R[K];re(X[2],X[1],X[0])}for(let K=0;K<q;K++){const X=R[K];re(X[0]+U*p,X[1]+U*p,X[2]+U*p)}}t.addGroup(le,s.length/3-le,0)}function Ce(){const le=s.length/3;let K=0;Me(B,K),K+=B.length;for(let X=0,oe=L.length;X<oe;X++){const fe=L[X];Me(fe,K),K+=fe.length}t.addGroup(le,s.length/3-le,1)}function Me(le,K){let X=le.length;for(;--X>=0;){const oe=X;let fe=X-1;fe<0&&(fe=le.length-1);for(let be=0,ke=p+C*2;be<ke;be++){const J=U*be,W=U*(be+1),ue=K+oe+J,he=K+fe+J,xe=K+fe+W,Te=K+oe+W;H(ue,he,xe,Te)}}}function ee(le,K,X){h.push(le),h.push(K),h.push(X)}function re(le,K,X){$(le),$(K),$(X);const oe=s.length/3,fe=w.generateTopUV(t,s,oe-3,oe-2,oe-1);te(fe[0]),te(fe[1]),te(fe[2])}function H(le,K,X,oe){$(le),$(K),$(oe),$(K),$(X),$(oe);const fe=s.length/3,be=w.generateSideWallUV(t,s,fe-6,fe-3,fe-2,fe-1);te(be[0]),te(be[1]),te(be[3]),te(be[1]),te(be[2]),te(be[3])}function $(le){s.push(h[le*3+0]),s.push(h[le*3+1]),s.push(h[le*3+2])}function te(le){a.push(le.x),a.push(le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,t=this.parameters.options;return nee(n,t,e)}static fromJSON(e,n){const t=[];for(let a=0,l=e.shapes.length;a<l;a++){const c=n[e.shapes[a]];t.push(c)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new D0[s.type]().fromJSON(s)),new xv(t,e.options)}}const tee={generateTopUV:function(i,e,n,t,s){const a=e[n*3],l=e[n*3+1],c=e[t*3],h=e[t*3+1],d=e[s*3],p=e[s*3+1];return[new Ge(a,l),new Ge(c,h),new Ge(d,p)]},generateSideWallUV:function(i,e,n,t,s,a){const l=e[n*3],c=e[n*3+1],h=e[n*3+2],d=e[t*3],p=e[t*3+1],m=e[t*3+2],v=e[s*3],y=e[s*3+1],b=e[s*3+2],S=e[a*3],C=e[a*3+1],E=e[a*3+2];return Math.abs(c-p)<Math.abs(l-d)?[new Ge(l,1-h),new Ge(d,1-m),new Ge(v,1-b),new Ge(S,1-E)]:[new Ge(c,1-h),new Ge(p,1-m),new Ge(y,1-b),new Ge(C,1-E)]}};function nee(i,e,n){if(n.shapes=[],Array.isArray(i))for(let t=0,s=i.length;t<s;t++){const a=i[t];n.shapes.push(a.uuid)}else n.shapes.push(i.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class wv extends pl{constructor(e=1,n=0){const t=(1+Math.sqrt(5))/2,s=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new wv(e.radius,e.detail)}}class kp extends pl{constructor(e=1,n=0){const t=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(t,s,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new kp(e.radius,e.detail)}}class Cv extends Xt{constructor(e=.5,n=1,t=32,s=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:t,phiSegments:s,thetaStart:a,thetaLength:l},t=Math.max(3,t),s=Math.max(1,s);const c=[],h=[],d=[],p=[];let m=e;const v=(n-e)/s,y=new Q,b=new Ge;for(let S=0;S<=s;S++){for(let C=0;C<=t;C++){const E=a+C/t*l;y.x=m*Math.cos(E),y.y=m*Math.sin(E),h.push(y.x,y.y,y.z),d.push(0,0,1),b.x=(y.x/n+1)/2,b.y=(y.y/n+1)/2,p.push(b.x,b.y)}m+=v}for(let S=0;S<s;S++){const C=S*(t+1);for(let E=0;E<t;E++){const w=E+C,x=w,M=w+t+1,P=w+t+2,I=w+1;c.push(x,M,I),c.push(M,P,I)}}this.setIndex(c),this.setAttribute("position",new yt(h,3)),this.setAttribute("normal",new yt(d,3)),this.setAttribute("uv",new yt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Sv extends Xt{constructor(e=new fc([new Ge(0,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const t=[],s=[],a=[],l=[];let c=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(c,h,p),c+=h,h=0;this.setIndex(t),this.setAttribute("position",new yt(s,3)),this.setAttribute("normal",new yt(a,3)),this.setAttribute("uv",new yt(l,2));function d(p){const m=s.length/3,v=p.extractPoints(n);let y=v.shape;const b=v.holes;ca.isClockWise(y)===!1&&(y=y.reverse());for(let C=0,E=b.length;C<E;C++){const w=b[C];ca.isClockWise(w)===!0&&(b[C]=w.reverse())}const S=ca.triangulateShape(y,b);for(let C=0,E=b.length;C<E;C++){const w=b[C];y=y.concat(w)}for(let C=0,E=y.length;C<E;C++){const w=y[C];s.push(w.x,w.y,0),a.push(0,0,1),l.push(w.x,w.y)}for(let C=0,E=S.length;C<E;C++){const w=S[C],x=w[0]+m,M=w[1]+m,P=w[2]+m;t.push(x,M,P),h+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return iee(n,e)}static fromJSON(e,n){const t=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=n[e.shapes[s]];t.push(l)}return new Sv(t,e.curveSegments)}}function iee(i,e){if(e.shapes=[],Array.isArray(i))for(let n=0,t=i.length;n<t;n++){const s=i[n];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class Ap extends Xt{constructor(e=1,n=32,t=16,s=0,a=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:t,phiStart:s,phiLength:a,thetaStart:l,thetaLength:c},n=Math.max(3,Math.floor(n)),t=Math.max(2,Math.floor(t));const h=Math.min(l+c,Math.PI);let d=0;const p=[],m=new Q,v=new Q,y=[],b=[],S=[],C=[];for(let E=0;E<=t;E++){const w=[],x=E/t;let M=0;E===0&&l===0?M=.5/n:E===t&&h===Math.PI&&(M=-.5/n);for(let P=0;P<=n;P++){const I=P/n;m.x=-e*Math.cos(s+I*a)*Math.sin(l+x*c),m.y=e*Math.cos(l+x*c),m.z=e*Math.sin(s+I*a)*Math.sin(l+x*c),b.push(m.x,m.y,m.z),v.copy(m).normalize(),S.push(v.x,v.y,v.z),C.push(I+M,1-x),w.push(d++)}p.push(w)}for(let E=0;E<t;E++)for(let w=0;w<n;w++){const x=p[E][w+1],M=p[E][w],P=p[E+1][w],I=p[E+1][w+1];(E!==0||l>0)&&y.push(x,M,I),(E!==t-1||h<Math.PI)&&y.push(M,P,I)}this.setIndex(y),this.setAttribute("position",new yt(b,3)),this.setAttribute("normal",new yt(S,3)),this.setAttribute("uv",new yt(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ap(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ev extends pl{constructor(e=1,n=0){const t=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(t,s,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Ev(e.radius,e.detail)}}class Mv extends Xt{constructor(e=1,n=.4,t=12,s=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:t,tubularSegments:s,arc:a},t=Math.floor(t),s=Math.floor(s);const l=[],c=[],h=[],d=[],p=new Q,m=new Q,v=new Q;for(let y=0;y<=t;y++)for(let b=0;b<=s;b++){const S=b/s*a,C=y/t*Math.PI*2;m.x=(e+n*Math.cos(C))*Math.cos(S),m.y=(e+n*Math.cos(C))*Math.sin(S),m.z=n*Math.sin(C),c.push(m.x,m.y,m.z),p.x=e*Math.cos(S),p.y=e*Math.sin(S),v.subVectors(m,p).normalize(),h.push(v.x,v.y,v.z),d.push(b/s),d.push(y/t)}for(let y=1;y<=t;y++)for(let b=1;b<=s;b++){const S=(s+1)*y+b-1,C=(s+1)*(y-1)+b-1,E=(s+1)*(y-1)+b,w=(s+1)*y+b;l.push(S,C,w),l.push(C,E,w)}this.setIndex(l),this.setAttribute("position",new yt(c,3)),this.setAttribute("normal",new yt(h,3)),this.setAttribute("uv",new yt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Tv extends Xt{constructor(e=1,n=.4,t=64,s=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:t,radialSegments:s,p:a,q:l},t=Math.floor(t),s=Math.floor(s);const c=[],h=[],d=[],p=[],m=new Q,v=new Q,y=new Q,b=new Q,S=new Q,C=new Q,E=new Q;for(let x=0;x<=t;++x){const M=x/t*a*Math.PI*2;w(M,a,l,e,y),w(M+.01,a,l,e,b),C.subVectors(b,y),E.addVectors(b,y),S.crossVectors(C,E),E.crossVectors(S,C),S.normalize(),E.normalize();for(let P=0;P<=s;++P){const I=P/s*Math.PI*2,D=-n*Math.cos(I),A=n*Math.sin(I);m.x=y.x+(D*E.x+A*S.x),m.y=y.y+(D*E.y+A*S.y),m.z=y.z+(D*E.z+A*S.z),h.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),d.push(v.x,v.y,v.z),p.push(x/t),p.push(P/s)}}for(let x=1;x<=t;x++)for(let M=1;M<=s;M++){const P=(s+1)*(x-1)+(M-1),I=(s+1)*x+(M-1),D=(s+1)*x+M,A=(s+1)*(x-1)+M;c.push(P,I,A),c.push(I,D,A)}this.setIndex(c),this.setAttribute("position",new yt(h,3)),this.setAttribute("normal",new yt(d,3)),this.setAttribute("uv",new yt(p,2));function w(x,M,P,I,D){const A=Math.cos(x),N=Math.sin(x),T=P/M*x,L=Math.cos(T);D.x=I*(2+L)*.5*A,D.y=I*(2+L)*N*.5,D.z=I*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class kv extends Xt{constructor(e=new cw(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),n=64,t=1,s=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:t,radialSegments:s,closed:a};const l=e.computeFrenetFrames(n,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new Q,h=new Q,d=new Ge;let p=new Q;const m=[],v=[],y=[],b=[];S(),this.setIndex(b),this.setAttribute("position",new yt(m,3)),this.setAttribute("normal",new yt(v,3)),this.setAttribute("uv",new yt(y,2));function S(){for(let x=0;x<n;x++)C(x);C(a===!1?n:0),w(),E()}function C(x){p=e.getPointAt(x/n,p);const M=l.normals[x],P=l.binormals[x];for(let I=0;I<=s;I++){const D=I/s*Math.PI*2,A=Math.sin(D),N=-Math.cos(D);h.x=N*M.x+A*P.x,h.y=N*M.y+A*P.y,h.z=N*M.z+A*P.z,h.normalize(),v.push(h.x,h.y,h.z),c.x=p.x+t*h.x,c.y=p.y+t*h.y,c.z=p.z+t*h.z,m.push(c.x,c.y,c.z)}}function E(){for(let x=1;x<=n;x++)for(let M=1;M<=s;M++){const P=(s+1)*(x-1)+(M-1),I=(s+1)*x+(M-1),D=(s+1)*x+M,A=(s+1)*(x-1)+M;b.push(P,I,A),b.push(I,D,A)}}function w(){for(let x=0;x<=n;x++)for(let M=0;M<=s;M++)d.x=x/n,d.y=M/s,y.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new kv(new D0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class t5 extends Xt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],t=new Set,s=new Q,a=new Q;if(e.index!==null){const l=e.attributes.position,c=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,p=h.length;d<p;++d){const m=h[d],v=m.start,y=m.count;for(let b=v,S=v+y;b<S;b+=3)for(let C=0;C<3;C++){const E=c.getX(b+C),w=c.getX(b+(C+1)%3);s.fromBufferAttribute(l,E),a.fromBufferAttribute(l,w),QT(s,a,t)===!0&&(n.push(s.x,s.y,s.z),n.push(a.x,a.y,a.z))}}}else{const l=e.attributes.position;for(let c=0,h=l.count/3;c<h;c++)for(let d=0;d<3;d++){const p=3*c+d,m=3*c+(d+1)%3;s.fromBufferAttribute(l,p),a.fromBufferAttribute(l,m),QT(s,a,t)===!0&&(n.push(s.x,s.y,s.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new yt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function QT(i,e,n){const t=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return n.has(t)===!0||n.has(s)===!0?!1:(n.add(t),n.add(s),!0)}var e3=Object.freeze({__proto__:null,BoxGeometry:dl,CapsuleGeometry:gv,CircleGeometry:vv,ConeGeometry:yv,CylinderGeometry:xh,DodecahedronGeometry:bv,EdgesGeometry:JI,ExtrudeGeometry:xv,IcosahedronGeometry:wv,LatheGeometry:Tp,OctahedronGeometry:kp,PlaneGeometry:fl,PolyhedronGeometry:pl,RingGeometry:Cv,ShapeGeometry:Sv,SphereGeometry:Ap,TetrahedronGeometry:Ev,TorusGeometry:Mv,TorusKnotGeometry:Tv,TubeGeometry:kv,WireframeGeometry:t5});class n5 extends tr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Qe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Nf extends yr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class hw extends tr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Qe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class i5 extends hw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ui(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Qe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Qe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Qe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Rf extends tr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Qe(16777215),this.specular=new Qe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.combine=bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class r5 extends tr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Qe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class s5 extends tr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class dw extends tr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ai,this.combine=bp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class a5 extends tr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Qe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class o5 extends nr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rc(i,e,n){return!i||!n&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function l5(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function c5(i){function e(s,a){return i[s]-i[a]}const n=i.length,t=new Array(n);for(let s=0;s!==n;++s)t[s]=s;return t.sort(e),t}function U_(i,e,n){const t=i.length,s=new i.constructor(t);for(let a=0,l=0;l!==t;++a){const c=n[a]*e;for(let h=0;h!==e;++h)s[l++]=i[c+h]}return s}function fw(i,e,n,t){let s=1,a=i[0];for(;a!==void 0&&a[t]===void 0;)a=i[s++];if(a===void 0)return;let l=a[t];if(l!==void 0)if(Array.isArray(l))do l=a[t],l!==void 0&&(e.push(a.time),n.push.apply(n,l)),a=i[s++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[t],l!==void 0&&(e.push(a.time),l.toArray(n,n.length)),a=i[s++];while(a!==void 0);else do l=a[t],l!==void 0&&(e.push(a.time),n.push(l)),a=i[s++];while(a!==void 0)}function ree(i,e,n,t,s=30){const a=i.clone();a.name=e;const l=[];for(let h=0;h<a.tracks.length;++h){const d=a.tracks[h],p=d.getValueSize(),m=[],v=[];for(let y=0;y<d.times.length;++y){const b=d.times[y]*s;if(!(b<n||b>=t)){m.push(d.times[y]);for(let S=0;S<p;++S)v.push(d.values[y*p+S])}}m.length!==0&&(d.times=rc(m,d.times.constructor),d.values=rc(v,d.values.constructor),l.push(d))}a.tracks=l;let c=1/0;for(let h=0;h<a.tracks.length;++h)c>a.tracks[h].times[0]&&(c=a.tracks[h].times[0]);for(let h=0;h<a.tracks.length;++h)a.tracks[h].shift(-1*c);return a.resetDuration(),a}function see(i,e=0,n=i,t=30){t<=0&&(t=30);const s=n.tracks.length,a=e/t;for(let l=0;l<s;++l){const c=n.tracks[l],h=c.ValueTypeName;if(h==="bool"||h==="string")continue;const d=i.tracks.find(function(E){return E.name===c.name&&E.ValueTypeName===h});if(d===void 0)continue;let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let v=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const b=c.times.length-1;let S;if(a<=c.times[0]){const E=p,w=m-p;S=c.values.slice(E,w)}else if(a>=c.times[b]){const E=b*m+p,w=E+m-p;S=c.values.slice(E,w)}else{const E=c.createInterpolant(),w=p,x=m-p;E.evaluate(a),S=E.resultBuffer.slice(w,x)}h==="quaternion"&&new wi().fromArray(S).normalize().conjugate().toArray(S);const C=d.times.length;for(let E=0;E<C;++E){const w=E*y+v;if(h==="quaternion")wi.multiplyQuaternionsFlat(d.values,w,S,0,d.values,w);else{const x=y-v*2;for(let M=0;M<x;++M)d.values[w+M]-=S[M]}}}return i.blendMode=Kx,i}const aee={convertArray:rc,isTypedArray:l5,getKeyframeOrder:c5,sortedArray:U_,flattenJSON:fw,subclip:ree,makeClipAdditive:see};class Pp{constructor(e,n,t,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new n.constructor(t),this.sampleValues=n,this.valueSize=t,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let t=this._cachedIndex,s=n[t],a=n[t-1];e:{t:{let l;n:{i:if(!(e<s)){for(let c=t+2;;){if(s===void 0){if(e<a)break i;return t=n.length,this._cachedIndex=t,this.copySampleValue_(t-1)}if(t===c)break;if(a=s,s=n[++t],e<s)break t}l=n.length;break n}if(!(e>=a)){const c=n[1];e<c&&(t=2,a=c);for(let h=t-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(t===h)break;if(s=a,a=n[--t-1],e>=a)break t}l=t,t=0;break n}break e}for(;t<l;){const c=t+l>>>1;e<n[c]?l=c:t=c+1}if(s=n[t],a=n[t-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return t=n.length,this._cachedIndex=t,this.copySampleValue_(t-1)}this._cachedIndex=t,this.intervalChanged_(t,a,s)}return this.interpolate_(t,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,t=this.sampleValues,s=this.valueSize,a=e*s;for(let l=0;l!==s;++l)n[l]=t[a+l];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class u5 extends Pp{constructor(e,n,t,s){super(e,n,t,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tc,endingEnd:tc}}intervalChanged_(e,n,t){const s=this.parameterPositions;let a=e-2,l=e+1,c=s[a],h=s[l];if(c===void 0)switch(this.getSettings_().endingStart){case nc:a=e,c=2*n-t;break;case jf:a=s.length-2,c=n+s[a]-s[a+1];break;default:a=e,c=t}if(h===void 0)switch(this.getSettings_().endingEnd){case nc:l=e,h=2*t-n;break;case jf:l=1,h=t+s[1]-s[0];break;default:l=e-1,h=n}const d=(t-n)*.5,p=this.valueSize;this._weightPrev=d/(n-c),this._weightNext=d/(h-t),this._offsetPrev=a*p,this._offsetNext=l*p}interpolate_(e,n,t,s){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=e*c,d=h-c,p=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,b=(t-n)/(s-n),S=b*b,C=S*b,E=-v*C+2*v*S-v*b,w=(1+v)*C+(-1.5-2*v)*S+(-.5+v)*b+1,x=(-1-y)*C+(1.5+y)*S+.5*b,M=y*C-y*S;for(let P=0;P!==c;++P)a[P]=E*l[p+P]+w*l[d+P]+x*l[h+P]+M*l[m+P];return a}}class pw extends Pp{constructor(e,n,t,s){super(e,n,t,s)}interpolate_(e,n,t,s){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=e*c,d=h-c,p=(t-n)/(s-n),m=1-p;for(let v=0;v!==c;++v)a[v]=l[d+v]*m+l[h+v]*p;return a}}class h5 extends Pp{constructor(e,n,t,s){super(e,n,t,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class qs{constructor(e,n,t,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rc(n,this.TimeBufferType),this.values=rc(t,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let t;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:rc(e.times,Array),values:rc(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(t.interpolation=s)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new h5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new u5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case th:n=this.InterpolantFactoryMethodDiscrete;break;case nh:n=this.InterpolantFactoryMethodLinear;break;case o0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return th;case this.InterpolantFactoryMethodLinear:return nh;case this.InterpolantFactoryMethodSmooth:return o0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let t=0,s=n.length;t!==s;++t)n[t]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let t=0,s=n.length;t!==s;++t)n[t]*=e}return this}trim(e,n){const t=this.times,s=t.length;let a=0,l=s-1;for(;a!==s&&t[a]<e;)++a;for(;l!==-1&&t[l]>n;)--l;if(++l,a!==0||l!==s){a>=l&&(l=Math.max(l,1),a=l-1);const c=this.getValueSize();this.times=t.slice(a,l),this.values=this.values.slice(a*c,l*c)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const t=this.times,s=this.values,a=t.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==a;c++){const h=t[c];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,h,l),e=!1;break}l=h}if(s!==void 0&&l5(s))for(let c=0,h=s.length;c!==h;++c){const d=s[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),t=this.getValueSize(),s=this.getInterpolation()===o0,a=e.length-1;let l=1;for(let c=1;c<a;++c){let h=!1;const d=e[c],p=e[c+1];if(d!==p&&(c!==1||d!==e[0]))if(s)h=!0;else{const m=c*t,v=m-t,y=m+t;for(let b=0;b!==t;++b){const S=n[m+b];if(S!==n[v+b]||S!==n[y+b]){h=!0;break}}}if(h){if(c!==l){e[l]=e[c];const m=c*t,v=l*t;for(let y=0;y!==t;++y)n[v+y]=n[m+y]}++l}}if(a>0){e[l]=e[a];for(let c=a*t,h=l*t,d=0;d!==t;++d)n[h+d]=n[c+d];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=n.slice(0,l*t)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),t=this.constructor,s=new t(this.name,e,n);return s.createInterpolant=this.createInterpolant,s}}qs.prototype.TimeBufferType=Float32Array;qs.prototype.ValueBufferType=Float32Array;qs.prototype.DefaultInterpolation=nh;class Ac extends qs{}Ac.prototype.ValueTypeName="bool";Ac.prototype.ValueBufferType=Array;Ac.prototype.DefaultInterpolation=th;Ac.prototype.InterpolantFactoryMethodLinear=void 0;Ac.prototype.InterpolantFactoryMethodSmooth=void 0;class mw extends qs{}mw.prototype.ValueTypeName="color";class oh extends qs{}oh.prototype.ValueTypeName="number";class d5 extends Pp{constructor(e,n,t,s){super(e,n,t,s)}interpolate_(e,n,t,s){const a=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=(t-n)/(s-n);let d=e*c;for(let p=d+c;d!==p;d+=4)wi.slerpFlat(a,0,l,d-c,l,d,h);return a}}class Pc extends qs{InterpolantFactoryMethodLinear(e){return new d5(this.times,this.values,this.getValueSize(),e)}}Pc.prototype.ValueTypeName="quaternion";Pc.prototype.DefaultInterpolation=nh;Pc.prototype.InterpolantFactoryMethodSmooth=void 0;class Ic extends qs{}Ic.prototype.ValueTypeName="string";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=th;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;class lh extends qs{}lh.prototype.ValueTypeName="vector";class ch{constructor(e="",n=-1,t=[],s=ov){this.name=e,this.tracks=t,this.duration=n,this.blendMode=s,this.uuid=os(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],t=e.tracks,s=1/(e.fps||1);for(let l=0,c=t.length;l!==c;++l)n.push(lee(t[l]).scale(s));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],t=e.tracks,s={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,l=t.length;a!==l;++a)n.push(qs.toJSON(t[a]));return s}static CreateFromMorphTargetSequence(e,n,t,s){const a=n.length,l=[];for(let c=0;c<a;c++){let h=[],d=[];h.push((c+a-1)%a,c,(c+1)%a),d.push(0,1,0);const p=c5(h);h=U_(h,1,p),d=U_(d,1,p),!s&&h[0]===0&&(h.push(a),d.push(d[0])),l.push(new oh(".morphTargetInfluences["+n[c].name+"]",h,d).scale(1/t))}return new this(e,-1,l)}static findByName(e,n){let t=e;if(!Array.isArray(e)){const s=e;t=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<t.length;s++)if(t[s].name===n)return t[s];return null}static CreateClipsFromMorphTargetSequences(e,n,t){const s={},a=/^([\w-]*?)([\d]+)$/;for(let c=0,h=e.length;c<h;c++){const d=e[c],p=d.name.match(a);if(p&&p.length>1){const m=p[1];let v=s[m];v||(s[m]=v=[]),v.push(d)}}const l=[];for(const c in s)l.push(this.CreateFromMorphTargetSequence(c,s[c],n,t));return l}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const t=function(m,v,y,b,S){if(y.length!==0){const C=[],E=[];fw(y,C,E,b),C.length!==0&&S.push(new m(v,C,E))}},s=[],a=e.name||"default",l=e.fps||30,c=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const v=d[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let S=0;S<v[b].morphTargets.length;S++)y[v[b].morphTargets[S]]=-1;for(const S in y){const C=[],E=[];for(let w=0;w!==v[b].morphTargets.length;++w){const x=v[b];C.push(x.time),E.push(x.morphTarget===S?1:0)}s.push(new oh(".morphTargetInfluence["+S+"]",C,E))}h=y.length*l}else{const y=".bones["+n[m].name+"]";t(lh,y+".position",v,"pos",s),t(Pc,y+".quaternion",v,"rot",s),t(lh,y+".scale",v,"scl",s)}}return s.length===0?null:new this(a,h,s,c)}resetDuration(){const e=this.tracks;let n=0;for(let t=0,s=e.length;t!==s;++t){const a=this.tracks[t];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function oee(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return oh;case"vector":case"vector2":case"vector3":case"vector4":return lh;case"color":return mw;case"quaternion":return Pc;case"bool":case"boolean":return Ac;case"string":return Ic}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function lee(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=oee(i.type);if(i.times===void 0){const n=[],t=[];fw(i.keys,n,t,"value"),i.times=n,i.values=t}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Ga={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class gw{constructor(e,n,t){const s=this;let a=!1,l=0,c=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=t,this.itemStart=function(p){c++,a===!1&&s.onStart!==void 0&&s.onStart(p,l,c),a=!0},this.itemEnd=function(p){l++,s.onProgress!==void 0&&s.onProgress(p,l,c),l===c&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(p){s.onError!==void 0&&s.onError(p)},this.resolveURL=function(p){return h?h(p):p},this.setURLModifier=function(p){return h=p,this},this.addHandler=function(p,m){return d.push(p,m),this},this.removeHandler=function(p){const m=d.indexOf(p);return m!==-1&&d.splice(m,2),this},this.getHandler=function(p){for(let m=0,v=d.length;m<v;m+=2){const y=d[m],b=d[m+1];if(y.global&&(y.lastIndex=0),y.test(p))return b}return null}}}const f5=new gw;class _r{constructor(e){this.manager=e!==void 0?e:f5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const t=this;return new Promise(function(s,a){t.load(e,s,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}_r.DEFAULT_MATERIAL_NAME="__DEFAULT";const Da={};class cee extends Error{constructor(e,n){super(e),this.response=n}}class ha extends _r{constructor(e){super(e)}load(e,n,t,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Ga.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Da[e]!==void 0){Da[e].push({onLoad:n,onProgress:t,onError:s});return}Da[e]=[],Da[e].push({onLoad:n,onProgress:t,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,h=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=Da[e],m=d.body.getReader(),v=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),y=v?parseInt(v):0,b=y!==0;let S=0;const C=new ReadableStream({start(E){w();function w(){m.read().then(({done:x,value:M})=>{if(x)E.close();else{S+=M.byteLength;const P=new ProgressEvent("progress",{lengthComputable:b,loaded:S,total:y});for(let I=0,D=p.length;I<D;I++){const A=p[I];A.onProgress&&A.onProgress(P)}E.enqueue(M),w()}})}}});return new Response(C)}else throw new cee(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,c));case"json":return d.json();default:if(c===void 0)return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(c),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return d.arrayBuffer().then(b=>y.decode(b))}}}).then(d=>{Ga.add(e,d);const p=Da[e];delete Da[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onLoad&&y.onLoad(d)}}).catch(d=>{const p=Da[e];if(p===void 0)throw this.manager.itemError(e),d;delete Da[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onError&&y.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uee extends _r{constructor(e){super(e)}load(e,n,t,s){const a=this,l=new ha(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{n(a.parse(JSON.parse(c)))}catch(h){s?s(h):console.error(h),a.manager.itemError(e)}},t,s)}parse(e){const n=[];for(let t=0;t<e.length;t++){const s=ch.parse(e[t]);n.push(s)}return n}}class hee extends _r{constructor(e){super(e)}load(e,n,t,s){const a=this,l=[],c=new dc,h=new ha(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(a.withCredentials);let d=0;function p(m){h.load(e[m],function(v){const y=a.parse(v,!0);l[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},d+=1,d===6&&(y.mipmapCount===1&&(c.minFilter=gi),c.image=l,c.format=y.format,c.needsUpdate=!0,n&&n(c))},t,s)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)p(m);else h.load(e,function(m){const v=a.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let b=0;b<y;b++){l[b]={mipmaps:[]};for(let S=0;S<v.mipmapCount;S++)l[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+S]),l[b].format=v.format,l[b].width=v.width,l[b].height=v.height}c.image=l}else c.image.width=v.width,c.image.height=v.height,c.mipmaps=v.mipmaps;v.mipmapCount===1&&(c.minFilter=gi),c.format=v.format,c.needsUpdate=!0,n&&n(c)},t,s);return c}}class rp extends _r{constructor(e){super(e)}load(e,n,t,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=Ga.get(e);if(l!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(l),a.manager.itemEnd(e)},0),l;const c=Zf("img");function h(){p(),Ga.add(e,this),n&&n(this),a.manager.itemEnd(e)}function d(m){p(),s&&s(m),a.manager.itemError(e),a.manager.itemEnd(e)}function p(){c.removeEventListener("load",h,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",h,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(e),c.src=e,c}}class dee extends _r{constructor(e){super(e)}load(e,n,t,s){const a=new Cp;a.colorSpace=ts;const l=new rp(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function h(d){l.load(e[d],function(p){a.images[d]=p,c++,c===6&&(a.needsUpdate=!0,n&&n(a))},void 0,s)}for(let d=0;d<e.length;++d)h(d);return a}}class fee extends _r{constructor(e){super(e)}load(e,n,t,s){const a=this,l=new el,c=new ha(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(a.withCredentials),c.load(e,function(h){let d;try{d=a.parse(h)}catch(p){if(s!==void 0)s(p);else{console.error(p);return}}d.image!==void 0?l.image=d.image:d.data!==void 0&&(l.image.width=d.width,l.image.height=d.height,l.image.data=d.data),l.wrapS=d.wrapS!==void 0?d.wrapS:mr,l.wrapT=d.wrapT!==void 0?d.wrapT:mr,l.magFilter=d.magFilter!==void 0?d.magFilter:gi,l.minFilter=d.minFilter!==void 0?d.minFilter:gi,l.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(l.colorSpace=d.colorSpace),d.flipY!==void 0&&(l.flipY=d.flipY),d.format!==void 0&&(l.format=d.format),d.type!==void 0&&(l.type=d.type),d.mipmaps!==void 0&&(l.mipmaps=d.mipmaps,l.minFilter=$s),d.mipmapCount===1&&(l.minFilter=gi),d.generateMipmaps!==void 0&&(l.generateMipmaps=d.generateMipmaps),l.needsUpdate=!0,n&&n(l,d)},t,s),l}}class p5 extends _r{constructor(e){super(e)}load(e,n,t,s){const a=new Wn,l=new rp(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){a.image=c,a.needsUpdate=!0,n!==void 0&&n(a)},t,s),a}}class ml extends _n{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Qe(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class m5 extends ml{constructor(e,n,t){super(e,t),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Qe(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const eb=new ct,t3=new Q,n3=new Q;class vw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sp,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,t=this.matrix;t3.setFromMatrixPosition(e.matrixWorld),n.position.copy(t3),n3.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(n3),n.updateMatrixWorld(),eb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eb),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(eb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pee extends vw{constructor(){super(new Ln(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,t=ih*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(t!==n.fov||s!==n.aspect||a!==n.far)&&(n.fov=t,n.aspect=s,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Av extends ml{constructor(e,n,t=0,s=Math.PI/3,a=0,l=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=t,this.angle=s,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new pee}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const i3=new ct,xd=new Q,tb=new Q;class mee extends vw{constructor(){super(new Ln(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(e,n=0){const t=this.camera,s=this.matrix,a=e.distance||t.far;a!==t.far&&(t.far=a,t.updateProjectionMatrix()),xd.setFromMatrixPosition(e.matrixWorld),t.position.copy(xd),tb.copy(t.position),tb.add(this._cubeDirections[n]),t.up.copy(this._cubeUps[n]),t.lookAt(tb),t.updateMatrixWorld(),s.makeTranslation(-xd.x,-xd.y,-xd.z),i3.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i3)}}class L0 extends ml{constructor(e,n,t=0,s=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=t,this.decay=s,this.shadow=new mee}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class gee extends vw{constructor(){super(new xs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class yw extends ml{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new gee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class bw extends ml{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class g5 extends ml{constructor(e,n,t=10,s=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=t,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class v5{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Q)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const t=e.x,s=e.y,a=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.282095),n.addScaledVector(l[1],.488603*s),n.addScaledVector(l[2],.488603*a),n.addScaledVector(l[3],.488603*t),n.addScaledVector(l[4],1.092548*(t*s)),n.addScaledVector(l[5],1.092548*(s*a)),n.addScaledVector(l[6],.315392*(3*a*a-1)),n.addScaledVector(l[7],1.092548*(t*a)),n.addScaledVector(l[8],.546274*(t*t-s*s)),n}getIrradianceAt(e,n){const t=e.x,s=e.y,a=e.z,l=this.coefficients;return n.copy(l[0]).multiplyScalar(.886227),n.addScaledVector(l[1],2*.511664*s),n.addScaledVector(l[2],2*.511664*a),n.addScaledVector(l[3],2*.511664*t),n.addScaledVector(l[4],2*.429043*t*s),n.addScaledVector(l[5],2*.429043*s*a),n.addScaledVector(l[6],.743125*a*a-.247708),n.addScaledVector(l[7],2*.429043*t*a),n.addScaledVector(l[8],.429043*(t*t-s*s)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let t=0;t<9;t++)this.coefficients[t].addScaledVector(e.coefficients[t],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let t=0;t<9;t++)this.coefficients[t].lerp(e.coefficients[t],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const t=this.coefficients;for(let s=0;s<9;s++)t[s].fromArray(e,n+s*3);return this}toArray(e=[],n=0){const t=this.coefficients;for(let s=0;s<9;s++)t[s].toArray(e,n+s*3);return e}static getBasisAt(e,n){const t=e.x,s=e.y,a=e.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*a,n[3]=.488603*t,n[4]=1.092548*t*s,n[5]=1.092548*s*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*t*a,n[8]=.546274*(t*t-s*s)}}class y5 extends ml{constructor(e=new v5,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Pv extends _r{constructor(e){super(e),this.textures={}}load(e,n,t,s){const a=this,l=new ha(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{n(a.parse(JSON.parse(c)))}catch(h){s?s(h):console.error(h),a.manager.itemError(e)}},t,s)}parse(e){const n=this.textures;function t(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const s=Pv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Qe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const l=e.uniforms[a];switch(s.uniforms[a]={},l.type){case"t":s.uniforms[a].value=t(l.value);break;case"c":s.uniforms[a].value=new Qe().setHex(l.value);break;case"v2":s.uniforms[a].value=new Ge().fromArray(l.value);break;case"v3":s.uniforms[a].value=new Q().fromArray(l.value);break;case"v4":s.uniforms[a].value=new ln().fromArray(l.value);break;case"m3":s.uniforms[a].value=new Qt().fromArray(l.value);break;case"m4":s.uniforms[a].value=new ct().fromArray(l.value);break;default:s.uniforms[a].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)s.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=t(e.map)),e.matcap!==void 0&&(s.matcap=t(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=t(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=t(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=t(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),s.normalScale=new Ge().fromArray(a)}return e.displacementMap!==void 0&&(s.displacementMap=t(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=t(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=t(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=t(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=t(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=t(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=t(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=t(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=t(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=t(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=t(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=t(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=t(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=t(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Ge().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=t(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=t(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=t(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=t(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=t(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=t(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=t(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:n5,SpriteMaterial:nw,RawShaderMaterial:Nf,ShaderMaterial:yr,PointsMaterial:rw,MeshPhysicalMaterial:i5,MeshStandardMaterial:hw,MeshPhongMaterial:Rf,MeshToonMaterial:r5,MeshNormalMaterial:s5,MeshLambertMaterial:dw,MeshDepthMaterial:ew,MeshDistanceMaterial:tw,MeshBasicMaterial:ga,MeshMatcapMaterial:a5,LineDashedMaterial:o5,LineBasicMaterial:nr,Material:tr};return new n[e]}}class uh{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let t=0,s=e.length;t<s;t++)n+=String.fromCharCode(e[t]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class b5 extends Xt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class _5 extends _r{constructor(e){super(e)}load(e,n,t,s){const a=this,l=new ha(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(c){try{n(a.parse(JSON.parse(c)))}catch(h){s?s(h):console.error(h),a.manager.itemError(e)}},t,s)}parse(e){const n={},t={};function s(y,b){if(n[b]!==void 0)return n[b];const C=y.interleavedBuffers[b],E=a(y,C.buffer),w=ku(C.type,E),x=new Ep(w,C.stride);return x.uuid=C.uuid,n[b]=x,x}function a(y,b){if(t[b]!==void 0)return t[b];const C=y.arrayBuffers[b],E=new Uint32Array(C).buffer;return t[b]=E,E}const l=e.isInstancedBufferGeometry?new b5:new Xt,c=e.data.index;if(c!==void 0){const y=ku(c.type,c.array);l.setIndex(new wn(y,1))}const h=e.data.attributes;for(const y in h){const b=h[y];let S;if(b.isInterleavedBufferAttribute){const C=s(e.data,b.data);S=new no(C,b.itemSize,b.offset,b.normalized)}else{const C=ku(b.type,b.array),E=b.isInstancedBufferAttribute?ah:wn;S=new E(C,b.itemSize,b.normalized)}b.name!==void 0&&(S.name=b.name),b.usage!==void 0&&S.setUsage(b.usage),l.setAttribute(y,S)}const d=e.data.morphAttributes;if(d)for(const y in d){const b=d[y],S=[];for(let C=0,E=b.length;C<E;C++){const w=b[C];let x;if(w.isInterleavedBufferAttribute){const M=s(e.data,w.data);x=new no(M,w.itemSize,w.offset,w.normalized)}else{const M=ku(w.type,w.array);x=new wn(M,w.itemSize,w.normalized)}w.name!==void 0&&(x.name=w.name),S.push(x)}l.morphAttributes[y]=S}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,b=m.length;y!==b;++y){const S=m[y];l.addGroup(S.start,S.count,S.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new Q;v.center!==void 0&&y.fromArray(v.center),l.boundingSphere=new Wi(y,v.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class vee extends _r{constructor(e){super(e)}load(e,n,t,s){const a=this,l=this.path===""?uh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new ha(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){let d=null;try{d=JSON.parse(h)}catch(m){s!==void 0&&s(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(d,n)},t,s)}async loadAsync(e,n){const t=this,s=this.path===""?uh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new ha(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(e,n),c=JSON.parse(l),h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await t.parseAsync(c)}parse(e,n){const t=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){n!==void 0&&n(d)}),c=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,a,h,c,t),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),n!==void 0){let m=!1;for(const v in l)if(l[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&n(d)}return d}async parseAsync(e){const n=this.parseAnimations(e.animations),t=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,t),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,c,l,n),d=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,d),h}parseShapes(e){const n={};if(e!==void 0)for(let t=0,s=e.length;t<s;t++){const a=new fc().fromJSON(e[t]);n[a.uuid]=a}return n}parseSkeletons(e,n){const t={},s={};if(n.traverse(function(a){a.isBone&&(s[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){const c=new Mp().fromJSON(e[a],s);t[c.uuid]=c}return t}parseGeometries(e,n){const t={};if(e!==void 0){const s=new _5;for(let a=0,l=e.length;a<l;a++){let c;const h=e[a];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(h);break;default:h.type in e3?c=e3[h.type].fromJSON(h,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}c.uuid=h.uuid,h.name!==void 0&&(c.name=h.name),h.userData!==void 0&&(c.userData=h.userData),t[h.uuid]=c}}return t}parseMaterials(e,n){const t={},s={};if(e!==void 0){const a=new Pv;a.setTextures(n);for(let l=0,c=e.length;l<c;l++){const h=e[l];t[h.uuid]===void 0&&(t[h.uuid]=a.parse(h)),s[h.uuid]=t[h.uuid]}}return s}parseAnimations(e){const n={};if(e!==void 0)for(let t=0;t<e.length;t++){const s=e[t],a=ch.parse(s);n[a.uuid]=a}return n}parseImages(e,n){const t=this,s={};let a;function l(h){return t.manager.itemStart(h),a.load(h,function(){t.manager.itemEnd(h)},void 0,function(){t.manager.itemError(h),t.manager.itemEnd(h)})}function c(h){if(typeof h=="string"){const d=h,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:t.resourcePath+d;return l(p)}else return h.data?{data:ku(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new gw(n);a=new rp(h),a.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const m=e[d],v=m.url;if(Array.isArray(v)){const y=[];for(let b=0,S=v.length;b<S;b++){const C=v[b],E=c(C);E!==null&&(E instanceof HTMLImageElement?y.push(E):y.push(new el(E.data,E.width,E.height)))}s[m.uuid]=new ic(y)}else{const y=c(m.url);s[m.uuid]=new ic(y)}}}return s}async parseImagesAsync(e){const n=this,t={};let s;async function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return await s.loadAsync(h)}else return l.data?{data:ku(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new rp(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const h=e[l],d=h.url;if(Array.isArray(d)){const p=[];for(let m=0,v=d.length;m<v;m++){const y=d[m],b=await a(y);b!==null&&(b instanceof HTMLImageElement?p.push(b):p.push(new el(b.data,b.width,b.height)))}t[h.uuid]=new ic(p)}else{const p=await a(h.url);t[h.uuid]=new ic(p)}}}return t}parseTextures(e,n){function t(a,l){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const s={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){const c=e[a];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),n[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const h=n[c.image],d=h.data;let p;Array.isArray(d)?(p=new Cp,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new el:p=new Wn,d&&(p.needsUpdate=!0)),p.source=h,p.uuid=c.uuid,c.name!==void 0&&(p.name=c.name),c.mapping!==void 0&&(p.mapping=t(c.mapping,yee)),c.channel!==void 0&&(p.channel=c.channel),c.offset!==void 0&&p.offset.fromArray(c.offset),c.repeat!==void 0&&p.repeat.fromArray(c.repeat),c.center!==void 0&&p.center.fromArray(c.center),c.rotation!==void 0&&(p.rotation=c.rotation),c.wrap!==void 0&&(p.wrapS=t(c.wrap[0],r3),p.wrapT=t(c.wrap[1],r3)),c.format!==void 0&&(p.format=c.format),c.internalFormat!==void 0&&(p.internalFormat=c.internalFormat),c.type!==void 0&&(p.type=c.type),c.colorSpace!==void 0&&(p.colorSpace=c.colorSpace),c.minFilter!==void 0&&(p.minFilter=t(c.minFilter,s3)),c.magFilter!==void 0&&(p.magFilter=t(c.magFilter,s3)),c.anisotropy!==void 0&&(p.anisotropy=c.anisotropy),c.flipY!==void 0&&(p.flipY=c.flipY),c.generateMipmaps!==void 0&&(p.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(p.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(p.compareFunction=c.compareFunction),c.userData!==void 0&&(p.userData=c.userData),s[c.uuid]=p}return s}parseObject(e,n,t,s,a){let l;function c(v){return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),n[v]}function h(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let b=0,S=v.length;b<S;b++){const C=v[b];t[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",C),y.push(t[C])}return y}return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),t[v]}}function d(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let p,m;switch(e.type){case"Scene":l=new sh,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Qe(e.background):l.background=d(e.background)),e.environment!==void 0&&(l.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new pv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new fv(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new Ln(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new xs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new bw(e.color,e.intensity);break;case"DirectionalLight":l=new yw(e.color,e.intensity);break;case"PointLight":l=new L0(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new g5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new Av(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new m5(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new y5().fromJSON(e);break;case"SkinnedMesh":p=c(e.geometry),m=h(e.material),l=new iw(p,m),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":p=c(e.geometry),m=h(e.material),l=new Fn(p,m);break;case"InstancedMesh":p=c(e.geometry),m=h(e.material);const v=e.count,y=e.instanceMatrix,b=e.instanceColor;l=new $I(p,m,v),l.instanceMatrix=new ah(new Float32Array(y.array),16),b!==void 0&&(l.instanceColor=new ah(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":p=c(e.geometry),m=h(e.material),l=new HI(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,m),l.geometry=p,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._visibility=e.visibility,l._active=e.active,l._bounds=e.bounds.map(S=>{const C=new Gi;C.min.fromArray(S.boxMin),C.max.fromArray(S.boxMax);const E=new Wi;return E.radius=S.sphereRadius,E.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:C,sphereInitialized:S.sphereInitialized,sphere:E}}),l._maxGeometryCount=e.maxGeometryCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._geometryCount=e.geometryCount,l._matricesTexture=d(e.matricesTexture.uuid);break;case"LOD":l=new zI;break;case"Line":l=new io(c(e.geometry),h(e.material));break;case"LineLoop":l=new GI(c(e.geometry),h(e.material));break;case"LineSegments":l=new va(c(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new WI(c(e.geometry),h(e.material));break;case"Sprite":l=new UI(h(e.material));break;case"Group":l=new Ha;break;case"Bone":l=new Qf;break;default:l=new _n}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)l.add(this.parseObject(v[y],n,t,s,a))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const b=v[y];l.animations.push(a[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const b=v[y],S=l.getObjectByProperty("uuid",b.object);S!==void 0&&l.addLevel(S,b.distance,b.hysteresis)}}return l}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(t){if(t.isSkinnedMesh===!0&&t.skeleton!==void 0){const s=n[t.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(s,t.bindMatrix)}})}}const yee={UVMapping:sv,CubeReflectionMapping:to,CubeRefractionMapping:sl,EquirectangularReflectionMapping:Zu,EquirectangularRefractionMapping:Wf,CubeUVReflectionMapping:vh},r3={RepeatWrapping:al,ClampToEdgeWrapping:mr,MirroredRepeatWrapping:Qu},s3={NearestFilter:ki,NearestMipmapNearestFilter:av,NearestMipmapLinearFilter:ec,LinearFilter:gi,LinearMipmapNearestFilter:$u,LinearMipmapLinearFilter:$s};class bee extends _r{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,t,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=Ga.get(e);if(l!==void 0){if(a.manager.itemStart(e),l.then){l.then(d=>{n&&n(d),a.manager.itemEnd(e)}).catch(d=>{s&&s(d)});return}return setTimeout(function(){n&&n(l),a.manager.itemEnd(e)},0),l}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const h=fetch(e,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(d){return Ga.add(e,d),n&&n(d),a.manager.itemEnd(e),d}).catch(function(d){s&&s(d),Ga.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});Ga.add(e,h),a.manager.itemStart(e)}}let Rg;class _w{static getContext(){return Rg===void 0&&(Rg=new(window.AudioContext||window.webkitAudioContext)),Rg}static setContext(e){Rg=e}}class _ee extends _r{constructor(e){super(e)}load(e,n,t,s){const a=this,l=new ha(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{const d=h.slice(0);_w.getContext().decodeAudioData(d,function(m){n(m)}).catch(c)}catch(d){c(d)}},t,s);function c(h){s?s(h):console.error(h),a.manager.itemError(e)}}}const a3=new ct,o3=new ct,Ul=new ct;class xee{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ln,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ln,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Ul.copy(e.projectionMatrix);const s=n.eyeSep/2,a=s*n.near/n.focus,l=n.near*Math.tan(hc*n.fov*.5)/n.zoom;let c,h;o3.elements[12]=-s,a3.elements[12]=s,c=-l*n.aspect+a,h=l*n.aspect+a,Ul.elements[0]=2*n.near/(h-c),Ul.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(Ul),c=-l*n.aspect-a,h=l*n.aspect-a,Ul.elements[0]=2*n.near/(h-c),Ul.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(Ul)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(o3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(a3)}}class xw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=l3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=l3();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function l3(){return(typeof performance>"u"?Date:performance).now()}const zl=new Q,c3=new wi,wee=new Q,$l=new Q;class Cee extends _n{constructor(){super(),this.type="AudioListener",this.context=_w.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,t=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(zl,c3,wee),$l.set(0,0,-1).applyQuaternion(c3),n.positionX){const s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(zl.x,s),n.positionY.linearRampToValueAtTime(zl.y,s),n.positionZ.linearRampToValueAtTime(zl.z,s),n.forwardX.linearRampToValueAtTime($l.x,s),n.forwardY.linearRampToValueAtTime($l.y,s),n.forwardZ.linearRampToValueAtTime($l.z,s),n.upX.linearRampToValueAtTime(t.x,s),n.upY.linearRampToValueAtTime(t.y,s),n.upZ.linearRampToValueAtTime(t.z,s)}else n.setPosition(zl.x,zl.y,zl.z),n.setOrientation($l.x,$l.y,$l.z,t.x,t.y,t.z)}}class x5 extends _n{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Hl=new Q,u3=new wi,See=new Q,Gl=new Q;class Eee extends x5{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,t){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=t,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Hl,u3,See),Gl.set(0,0,1).applyQuaternion(u3);const n=this.panner;if(n.positionX){const t=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Hl.x,t),n.positionY.linearRampToValueAtTime(Hl.y,t),n.positionZ.linearRampToValueAtTime(Hl.z,t),n.orientationX.linearRampToValueAtTime(Gl.x,t),n.orientationY.linearRampToValueAtTime(Gl.y,t),n.orientationZ.linearRampToValueAtTime(Gl.z,t)}else n.setPosition(Hl.x,Hl.y,Hl.z),n.setOrientation(Gl.x,Gl.y,Gl.z)}}class Mee{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let t=0;t<n.length;t++)e+=n[t];return e/n.length}}class w5{constructor(e,n,t){this.binding=e,this.valueSize=t;let s,a,l;switch(n){case"quaternion":s=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":s=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:s=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const t=this.buffer,s=this.valueSize,a=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==s;++c)t[a+c]=t[c];l=n}else{l+=n;const c=n/l;this._mixBufferRegion(t,a,0,c,s)}this.cumulativeWeight=l}accumulateAdditive(e){const n=this.buffer,t=this.valueSize,s=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,s,0,e,t),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,t=this.buffer,s=e*n+n,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const h=n*this._origIndex;this._mixBufferRegion(t,s,h,1-a,n)}l>0&&this._mixBufferRegionAdditive(t,s,this._addIndex*n,1,n);for(let h=n,d=n+n;h!==d;++h)if(t[h]!==t[h+n]){c.setValue(t,s);break}}saveOriginalState(){const e=this.binding,n=this.buffer,t=this.valueSize,s=t*this._origIndex;e.getValue(n,s);for(let a=t,l=s;a!==l;++a)n[a]=n[s+a%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let t=e;t<n;t++)this.buffer[t]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[n+t]=this.buffer[e+t]}_select(e,n,t,s,a){if(s>=.5)for(let l=0;l!==a;++l)e[n+l]=e[t+l]}_slerp(e,n,t,s){wi.slerpFlat(e,n,e,n,e,t,s)}_slerpAdditive(e,n,t,s,a){const l=this._workIndex*a;wi.multiplyQuaternionsFlat(e,l,e,n,e,t),wi.slerpFlat(e,n,e,n,e,l,s)}_lerp(e,n,t,s,a){const l=1-s;for(let c=0;c!==a;++c){const h=n+c;e[h]=e[h]*l+e[t+c]*s}}_lerpAdditive(e,n,t,s,a){for(let l=0;l!==a;++l){const c=n+l;e[c]=e[c]+e[t+l]*s}}}const ww="\\[\\]\\.:\\/",Tee=new RegExp("["+ww+"]","g"),Cw="[^"+ww+"]",kee="[^"+ww.replace("\\.","")+"]",Aee=/((?:WC+[\/:])*)/.source.replace("WC",Cw),Pee=/(WCOD+)?/.source.replace("WCOD",kee),Iee=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cw),Nee=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cw),Ree=new RegExp("^"+Aee+Pee+Iee+Nee+"$"),Dee=["material","materials","bones","map"];class Lee{constructor(e,n,t){const s=t||sn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,s)}getValue(e,n){this.bind();const t=this._targetGroup.nCachedObjects_,s=this._bindings[t];s!==void 0&&s.getValue(e,n)}setValue(e,n){const t=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=t.length;s!==a;++s)t[s].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,t=e.length;n!==t;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,t=e.length;n!==t;++n)e[n].unbind()}}class sn{constructor(e,n,t){this.path=n,this.parsedPath=t||sn.parseTrackName(n),this.node=sn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,t){return e&&e.isAnimationObjectGroup?new sn.Composite(e,n,t):new sn(e,n,t)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Tee,"")}static parseTrackName(e){const n=Ree.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const t={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=t.nodeName&&t.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const a=t.nodeName.substring(s+1);Dee.indexOf(a)!==-1&&(t.nodeName=t.nodeName.substring(0,s),t.objectName=a)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const t=e.skeleton.getBoneByName(n);if(t!==void 0)return t}if(e.children){const t=function(a){for(let l=0;l<a.length;l++){const c=a[l];if(c.name===n||c.uuid===n)return c;const h=t(c.children);if(h)return h}return null},s=t(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const t=this.resolvedProperty;for(let s=0,a=t.length;s!==a;++s)e[n++]=t[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const t=this.resolvedProperty;for(let s=0,a=t.length;s!==a;++s)t[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const t=this.resolvedProperty;for(let s=0,a=t.length;s!==a;++s)t[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const t=this.resolvedProperty;for(let s=0,a=t.length;s!==a;++s)t[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,t=n.objectName,s=n.propertyName;let a=n.propertyIndex;if(e||(e=sn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(t){let d=n.objectIndex;switch(t){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[t]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const l=e[s];if(l===void 0){const d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+s+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}sn.Composite=Lee;sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};sn.prototype.GetterByBindingType=[sn.prototype._getValue_direct,sn.prototype._getValue_array,sn.prototype._getValue_arrayElement,sn.prototype._getValue_toArray];sn.prototype.SetterByBindingTypeAndVersioning=[[sn.prototype._setValue_direct,sn.prototype._setValue_direct_setNeedsUpdate,sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_array,sn.prototype._setValue_array_setNeedsUpdate,sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_arrayElement,sn.prototype._setValue_arrayElement_setNeedsUpdate,sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_fromArray,sn.prototype._setValue_fromArray_setNeedsUpdate,sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Bee{constructor(){this.isAnimationObjectGroup=!0,this.uuid=os(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,s=arguments.length;t!==s;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,t=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length;let c,h=e.length,d=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const v=arguments[p],y=v.uuid;let b=n[y];if(b===void 0){b=h++,n[y]=b,e.push(v);for(let S=0,C=l;S!==C;++S)a[S].push(new sn(v,t[S],s[S]))}else if(b<d){c=e[b];const S=--d,C=e[S];n[C.uuid]=b,e[b]=C,n[y]=S,e[S]=v;for(let E=0,w=l;E!==w;++E){const x=a[E],M=x[S];let P=x[b];x[b]=M,P===void 0&&(P=new sn(v,t[E],s[E])),x[S]=P}}else e[b]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,n=this._indicesByUUID,t=this._bindings,s=t.length;let a=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const h=arguments[l],d=h.uuid,p=n[d];if(p!==void 0&&p>=a){const m=a++,v=e[m];n[v.uuid]=p,e[p]=v,n[d]=m,e[m]=h;for(let y=0,b=s;y!==b;++y){const S=t[y],C=S[m],E=S[p];S[p]=C,S[m]=E}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,t=this._bindings,s=t.length;let a=this.nCachedObjects_,l=e.length;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],p=d.uuid,m=n[p];if(m!==void 0)if(delete n[p],m<a){const v=--a,y=e[v],b=--l,S=e[b];n[y.uuid]=m,e[m]=y,n[S.uuid]=v,e[v]=S,e.pop();for(let C=0,E=s;C!==E;++C){const w=t[C],x=w[v],M=w[b];w[m]=x,w[v]=M,w.pop()}}else{const v=--l,y=e[v];v>0&&(n[y.uuid]=m),e[m]=y,e.pop();for(let b=0,S=s;b!==S;++b){const C=t[b];C[m]=C[v],C.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const t=this._bindingsIndicesByPath;let s=t[e];const a=this._bindings;if(s!==void 0)return a[s];const l=this._paths,c=this._parsedPaths,h=this._objects,d=h.length,p=this.nCachedObjects_,m=new Array(d);s=a.length,t[e]=s,l.push(e),c.push(n),a.push(m);for(let v=p,y=h.length;v!==y;++v){const b=h[v];m[v]=new sn(b,e,n)}return m}unsubscribe_(e){const n=this._bindingsIndicesByPath,t=n[e];if(t!==void 0){const s=this._paths,a=this._parsedPaths,l=this._bindings,c=l.length-1,h=l[c],d=e[c];n[d]=t,l[t]=h,l.pop(),a[t]=a[c],a.pop(),s[t]=s[c],s.pop()}}}class C5{constructor(e,n,t=null,s=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=t,this.blendMode=s;const a=n.tracks,l=a.length,c=new Array(l),h={endingStart:tc,endingEnd:tc};for(let d=0;d!==l;++d){const p=a[d].createInterpolant(null);c[d]=p,p.settings=h}this._interpolantSettings=h,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=uI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,t){if(e.fadeOut(n),this.fadeIn(n),t){const s=this._clip.duration,a=e._clip.duration,l=a/s,c=s/a;e.warp(1,l,n),this.warp(c,1,n)}return this}crossFadeTo(e,n,t){return e.crossFadeFrom(this,n,t)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,t){const s=this._mixer,a=s.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=s._lendControlInterpolant(),this._timeScaleInterpolant=c);const h=c.parameterPositions,d=c.sampleValues;return h[0]=a,h[1]=a+t,d[0]=e/l,d[1]=n/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,t,s){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const h=(e-a)*t;h<0||t===0?n=0:(this._startTime=null,n=t*h)}n*=this._updateTimeScale(e);const l=this._updateTime(n),c=this._updateWeight(e);if(c>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case Kx:for(let p=0,m=h.length;p!==m;++p)h[p].evaluate(l),d[p].accumulateAdditive(c);break;case ov:default:for(let p=0,m=h.length;p!==m;++p)h[p].evaluate(l),d[p].accumulate(s,c)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const t=this._weightInterpolant;if(t!==null){const s=t.evaluate(e)[0];n*=s,e>t.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const t=this._timeScaleInterpolant;if(t!==null){const s=t.evaluate(e)[0];n*=s,e>t.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,t=this.loop;let s=this.time+e,a=this._loopCount;const l=t===hI;if(e===0)return a===-1?s:l&&(a&1)===1?n-s:s;if(t===cI){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=n||s<0){const c=Math.floor(s/n);s-=n*c,a+=Math.abs(c);const h=this.repetitions-a;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=s;if(l&&(a&1)===1)return n-s}return s}_setEndings(e,n,t){const s=this._interpolantSettings;t?(s.endingStart=nc,s.endingEnd=nc):(e?s.endingStart=this.zeroSlopeAtStart?nc:tc:s.endingStart=jf,n?s.endingEnd=this.zeroSlopeAtEnd?nc:tc:s.endingEnd=jf)}_scheduleFading(e,n,t){const s=this._mixer,a=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=a,h[0]=n,c[1]=a+e,h[1]=t,this}}const Oee=new Float32Array(1);class Vee extends ma{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const t=e._localRoot||this._root,s=e._clip.tracks,a=s.length,l=e._propertyBindings,c=e._interpolants,h=t.uuid,d=this._bindingsByRootAndName;let p=d[h];p===void 0&&(p={},d[h]=p);for(let m=0;m!==a;++m){const v=s[m],y=v.name;let b=p[y];if(b!==void 0)++b.referenceCount,l[m]=b;else{if(b=l[m],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,h,y));continue}const S=n&&n._propertyBindings[m].binding.parsedPath;b=new w5(sn.create(t,y,S),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,h,y),l[m]=b}c[m].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const t=(e._localRoot||this._root).uuid,s=e._clip.uuid,a=this._actionsByClip[s];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,s,t)}const n=e._propertyBindings;for(let t=0,s=n.length;t!==s;++t){const a=n[t];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let t=0,s=n.length;t!==s;++t){const a=n[t];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,t){const s=this._actions,a=this._actionsByClip;let l=a[n];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[t]=e}_removeInactiveAction(e){const n=this._actions,t=n[n.length-1],s=e._cacheIndex;t._cacheIndex=s,n[s]=t,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,c=l[a],h=c.knownActions,d=h[h.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,h[p]=d,h.pop(),e._byClipCacheIndex=null;const m=c.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],h.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let t=0,s=n.length;t!==s;++t){const a=n[t];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,t=e._cacheIndex,s=this._nActiveActions++,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=t,n[t]=a}_takeBackAction(e){const n=this._actions,t=e._cacheIndex,s=--this._nActiveActions,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=t,n[t]=a}_addInactiveBinding(e,n,t){const s=this._bindingsByRootAndName,a=this._bindings;let l=s[n];l===void 0&&(l={},s[n]=l),l[t]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,t=e.binding,s=t.rootNode.uuid,a=t.path,l=this._bindingsByRootAndName,c=l[s],h=n[n.length-1],d=e._cacheIndex;h._cacheIndex=d,n[d]=h,n.pop(),delete c[a],Object.keys(c).length===0&&delete l[s]}_lendBinding(e){const n=this._bindings,t=e._cacheIndex,s=this._nActiveBindings++,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=t,n[t]=a}_takeBackBinding(e){const n=this._bindings,t=e._cacheIndex,s=--this._nActiveBindings,a=n[s];e._cacheIndex=s,n[s]=e,a._cacheIndex=t,n[t]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let t=e[n];return t===void 0&&(t=new pw(new Float32Array(2),new Float32Array(2),1,Oee),t.__cacheIndex=n,e[n]=t),t}_takeBackControlInterpolant(e){const n=this._controlInterpolants,t=e.__cacheIndex,s=--this._nActiveControlInterpolants,a=n[s];e.__cacheIndex=s,n[s]=e,a.__cacheIndex=t,n[t]=a}clipAction(e,n,t){const s=n||this._root,a=s.uuid;let l=typeof e=="string"?ch.findByName(s,e):e;const c=l!==null?l.uuid:e,h=this._actionsByClip[c];let d=null;if(t===void 0&&(l!==null?t=l.blendMode:t=ov),h!==void 0){const m=h.actionByRoot[a];if(m!==void 0&&m.blendMode===t)return m;d=h.knownActions[0],l===null&&(l=d._clip)}if(l===null)return null;const p=new C5(this,l,n,t);return this._bindAction(p,d),this._addInactiveAction(p,c,a),p}existingAction(e,n){const t=n||this._root,s=t.uuid,a=typeof e=="string"?ch.findByName(t,e):e,l=a?a.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[s]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let t=n-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const n=this._actions,t=this._nActiveActions,s=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let d=0;d!==t;++d)n[d]._update(s,e,a,l);const c=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)c[d].apply(l);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,t=e.uuid,s=this._actionsByClip,a=s[t];if(a!==void 0){const l=a.knownActions;for(let c=0,h=l.length;c!==h;++c){const d=l[c];this._deactivateAction(d);const p=d._cacheIndex,m=n[n.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,m._cacheIndex=p,n[p]=m,n.pop(),this._removeInactiveBindingsForAction(d)}delete s[t]}}uncacheRoot(e){const n=e.uuid,t=this._actionsByClip;for(const l in t){const c=t[l].actionByRoot,h=c[n];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,a=s[n];if(a!==void 0)for(const l in a){const c=a[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,n){const t=this.existingAction(e,n);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}}class Iv{constructor(e){this.value=e}clone(){return new Iv(this.value.clone===void 0?this.value:this.value.clone())}}let Fee=0;class Uee extends ma{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Fee++}),this.name="",this.usage=Yf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let t=0,s=n.length;t<s;t++){const a=Array.isArray(n[t])?n[t]:[n[t]];for(let l=0;l<a.length;l++)this.uniforms.push(a[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class zee extends Ep{constructor(e,n,t=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=t}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class $ee{constructor(e,n,t,s,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=t,this.elementSize=s,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const h3=new ct;class S5{constructor(e,n,t=0,s=1/0){this.ray=new kc(e,n),this.near=t,this.far=s,this.camera=null,this.layers=new uv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return h3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(h3),this}intersectObject(e,n=!0,t=[]){return z_(e,this,t,n),t.sort(d3),t}intersectObjects(e,n=!0,t=[]){for(let s=0,a=e.length;s<a;s++)z_(e[s],this,t,n);return t.sort(d3),t}}function d3(i,e){return i.distance-e.distance}function z_(i,e,n,t){if(i.layers.test(e.layers)&&i.raycast(e,n),t===!0){const s=i.children;for(let a=0,l=s.length;a<l;a++)z_(s[a],e,n,!0)}}class $_{constructor(e=1,n=0,t=0){return this.radius=e,this.phi=n,this.theta=t,this}set(e,n,t){return this.radius=e,this.phi=n,this.theta=t,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,t){return this.radius=Math.sqrt(e*e+n*n+t*t),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,t),this.phi=Math.acos(ui(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Hee{constructor(e=1,n=0,t=0){return this.radius=e,this.theta=n,this.y=t,this}set(e,n,t){return this.radius=e,this.theta=n,this.y=t,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,t){return this.radius=Math.sqrt(e*e+t*t),this.theta=Math.atan2(e,t),this.y=n,this}clone(){return new this.constructor().copy(this)}}const f3=new Ge;class E5{constructor(e=new Ge(1/0,1/0),n=new Ge(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,t=e.length;n<t;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const t=f3.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,f3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const p3=new Q,Dg=new Q;class M5{constructor(e=new Q,n=new Q){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){p3.subVectors(e,this.start),Dg.subVectors(this.end,this.start);const t=Dg.dot(Dg);let a=Dg.dot(p3)/t;return n&&(a=ui(a,0,1)),a}closestPointToPoint(e,n,t){const s=this.closestPointToPointParameter(e,n);return this.delta(t).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const m3=new Q;class Gee extends _n{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const t=new Xt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,h=32;l<h;l++,c++){const d=l/h*Math.PI*2,p=c/h*Math.PI*2;s.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}t.setAttribute("position",new yt(s,3));const a=new nr({fog:!1,toneMapped:!1});this.cone=new va(t,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),m3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(m3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Fo=new Q,Lg=new ct,nb=new ct;class Wee extends va{constructor(e){const n=T5(e),t=new Xt,s=[],a=[],l=new Qe(0,0,1),c=new Qe(0,1,0);for(let d=0;d<n.length;d++){const p=n[d];p.parent&&p.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),a.push(l.r,l.g,l.b),a.push(c.r,c.g,c.b))}t.setAttribute("position",new yt(s,3)),t.setAttribute("color",new yt(a,3));const h=new nr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(t,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,t=this.geometry,s=t.getAttribute("position");nb.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<n.length;a++){const c=n[a];c.parent&&c.parent.isBone&&(Lg.multiplyMatrices(nb,c.matrixWorld),Fo.setFromMatrixPosition(Lg),s.setXYZ(l,Fo.x,Fo.y,Fo.z),Lg.multiplyMatrices(nb,c.parent.matrixWorld),Fo.setFromMatrixPosition(Lg),s.setXYZ(l+1,Fo.x,Fo.y,Fo.z),l+=2)}t.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function T5(i){const e=[];i.isBone===!0&&e.push(i);for(let n=0;n<i.children.length;n++)e.push.apply(e,T5(i.children[n]));return e}class jee extends Fn{constructor(e,n,t){const s=new Ap(n,4,2),a=new ga({wireframe:!0,fog:!1,toneMapped:!1});super(s,a),this.light=e,this.color=t,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Kee=new Q,g3=new Qe,v3=new Qe;class qee extends _n{constructor(e,n,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="HemisphereLightHelper";const s=new kp(n);s.rotateY(Math.PI*.5),this.material=new ga({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=s.getAttribute("position"),l=new Float32Array(a.count*3);s.setAttribute("color",new wn(l,3)),this.add(new Fn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");g3.copy(this.light.color),v3.copy(this.light.groundColor);for(let t=0,s=n.count;t<s;t++){const a=t<s/2?g3:v3;n.setXYZ(t,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Kee.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Xee extends va{constructor(e=10,n=10,t=4473924,s=8947848){t=new Qe(t),s=new Qe(s);const a=n/2,l=e/n,c=e/2,h=[],d=[];for(let v=0,y=0,b=-c;v<=n;v++,b+=l){h.push(-c,0,b,c,0,b),h.push(b,0,-c,b,0,c);const S=v===a?t:s;S.toArray(d,y),y+=3,S.toArray(d,y),y+=3,S.toArray(d,y),y+=3,S.toArray(d,y),y+=3}const p=new Xt;p.setAttribute("position",new yt(h,3)),p.setAttribute("color",new yt(d,3));const m=new nr({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yee extends va{constructor(e=10,n=16,t=8,s=64,a=4473924,l=8947848){a=new Qe(a),l=new Qe(l);const c=[],h=[];if(n>1)for(let m=0;m<n;m++){const v=m/n*(Math.PI*2),y=Math.sin(v)*e,b=Math.cos(v)*e;c.push(0,0,0),c.push(y,0,b);const S=m&1?a:l;h.push(S.r,S.g,S.b),h.push(S.r,S.g,S.b)}for(let m=0;m<t;m++){const v=m&1?a:l,y=e-e/t*m;for(let b=0;b<s;b++){let S=b/s*(Math.PI*2),C=Math.sin(S)*y,E=Math.cos(S)*y;c.push(C,0,E),h.push(v.r,v.g,v.b),S=(b+1)/s*(Math.PI*2),C=Math.sin(S)*y,E=Math.cos(S)*y,c.push(C,0,E),h.push(v.r,v.g,v.b)}}const d=new Xt;d.setAttribute("position",new yt(c,3)),d.setAttribute("color",new yt(h,3));const p=new nr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const y3=new Q,Bg=new Q,b3=new Q;class Jee extends _n{constructor(e,n,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="DirectionalLightHelper",n===void 0&&(n=1);let s=new Xt;s.setAttribute("position",new yt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new nr({fog:!1,toneMapped:!1});this.lightPlane=new io(s,a),this.add(this.lightPlane),s=new Xt,s.setAttribute("position",new yt([0,0,0,0,0,1],3)),this.targetLine=new io(s,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),y3.setFromMatrixPosition(this.light.matrixWorld),Bg.setFromMatrixPosition(this.light.target.matrixWorld),b3.subVectors(Bg,y3),this.lightPlane.lookAt(Bg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Bg),this.targetLine.scale.z=b3.length()}}const Og=new Q,li=new wp;class Zee extends va{constructor(e){const n=new Xt,t=new nr({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],a=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(b,S){h(b),h(S)}function h(b){s.push(0,0,0),a.push(0,0,0),l[b]===void 0&&(l[b]=[]),l[b].push(s.length/3-1)}n.setAttribute("position",new yt(s,3)),n.setAttribute("color",new yt(a,3)),super(n,t),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const d=new Qe(16755200),p=new Qe(16711680),m=new Qe(43775),v=new Qe(16777215),y=new Qe(3355443);this.setColors(d,p,m,v,y)}setColors(e,n,t,s,a){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,n.r,n.g,n.b),c.setXYZ(25,n.r,n.g,n.b),c.setXYZ(26,n.r,n.g,n.b),c.setXYZ(27,n.r,n.g,n.b),c.setXYZ(28,n.r,n.g,n.b),c.setXYZ(29,n.r,n.g,n.b),c.setXYZ(30,n.r,n.g,n.b),c.setXYZ(31,n.r,n.g,n.b),c.setXYZ(32,t.r,t.g,t.b),c.setXYZ(33,t.r,t.g,t.b),c.setXYZ(34,t.r,t.g,t.b),c.setXYZ(35,t.r,t.g,t.b),c.setXYZ(36,t.r,t.g,t.b),c.setXYZ(37,t.r,t.g,t.b),c.setXYZ(38,s.r,s.g,s.b),c.setXYZ(39,s.r,s.g,s.b),c.setXYZ(40,a.r,a.g,a.b),c.setXYZ(41,a.r,a.g,a.b),c.setXYZ(42,a.r,a.g,a.b),c.setXYZ(43,a.r,a.g,a.b),c.setXYZ(44,a.r,a.g,a.b),c.setXYZ(45,a.r,a.g,a.b),c.setXYZ(46,a.r,a.g,a.b),c.setXYZ(47,a.r,a.g,a.b),c.setXYZ(48,a.r,a.g,a.b),c.setXYZ(49,a.r,a.g,a.b),c.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,t=1,s=1;li.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fi("c",n,e,li,0,0,-1),fi("t",n,e,li,0,0,1),fi("n1",n,e,li,-t,-s,-1),fi("n2",n,e,li,t,-s,-1),fi("n3",n,e,li,-t,s,-1),fi("n4",n,e,li,t,s,-1),fi("f1",n,e,li,-t,-s,1),fi("f2",n,e,li,t,-s,1),fi("f3",n,e,li,-t,s,1),fi("f4",n,e,li,t,s,1),fi("u1",n,e,li,t*.7,s*1.1,-1),fi("u2",n,e,li,-t*.7,s*1.1,-1),fi("u3",n,e,li,0,s*2,-1),fi("cf1",n,e,li,-t,0,1),fi("cf2",n,e,li,t,0,1),fi("cf3",n,e,li,0,-s,1),fi("cf4",n,e,li,0,s,1),fi("cn1",n,e,li,-t,0,-1),fi("cn2",n,e,li,t,0,-1),fi("cn3",n,e,li,0,-s,-1),fi("cn4",n,e,li,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fi(i,e,n,t,s,a,l){Og.set(s,a,l).unproject(t);const c=e[i];if(c!==void 0){const h=n.getAttribute("position");for(let d=0,p=c.length;d<p;d++)h.setXYZ(c[d],Og.x,Og.y,Og.z)}}const Vg=new Gi;class Qee extends va{constructor(e,n=16776960){const t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),a=new Xt;a.setIndex(new wn(t,1)),a.setAttribute("position",new wn(s,3)),super(a,new nr({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Vg.setFromObject(this.object),Vg.isEmpty())return;const n=Vg.min,t=Vg.max,s=this.geometry.attributes.position,a=s.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=n.x,a[4]=t.y,a[5]=t.z,a[6]=n.x,a[7]=n.y,a[8]=t.z,a[9]=t.x,a[10]=n.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=n.z,a[15]=n.x,a[16]=t.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=t.x,a[22]=n.y,a[23]=n.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ete extends va{constructor(e,n=16776960){const t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Xt;a.setIndex(new wn(t,1)),a.setAttribute("position",new yt(s,3)),super(a,new nr({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class tte extends io{constructor(e,n=1,t=16776960){const s=t,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Xt;l.setAttribute("position",new yt(a,3)),l.computeBoundingSphere(),super(l,new nr({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new Xt;h.setAttribute("position",new yt(c,3)),h.computeBoundingSphere(),this.add(new Fn(h,new ga({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _3=new Q;let Fg,ib;class nte extends _n{constructor(e=new Q(0,0,1),n=new Q(0,0,0),t=1,s=16776960,a=t*.2,l=a*.2){super(),this.type="ArrowHelper",Fg===void 0&&(Fg=new Xt,Fg.setAttribute("position",new yt([0,0,0,0,1,0],3)),ib=new xh(0,.5,1,5,1),ib.translate(0,-.5,0)),this.position.copy(n),this.line=new io(Fg,new nr({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fn(ib,new ga({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(t,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_3.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(_3,n)}}setLength(e,n=e*.2,t=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(t,n,t),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ite extends va{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],t=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Xt;s.setAttribute("position",new yt(n,3)),s.setAttribute("color",new yt(t,3));const a=new nr({vertexColors:!0,toneMapped:!1});super(s,a),this.type="AxesHelper"}setColors(e,n,t){const s=new Qe,a=this.geometry.attributes.color.array;return s.set(e),s.toArray(a,0),s.toArray(a,3),s.set(n),s.toArray(a,6),s.toArray(a,9),s.set(t),s.toArray(a,12),s.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class k5{constructor(){this.type="ShapePath",this.color=new Qe,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new ep,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,t,s){return this.currentPath.quadraticCurveTo(e,n,t,s),this}bezierCurveTo(e,n,t,s,a,l){return this.currentPath.bezierCurveTo(e,n,t,s,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(E){const w=[];for(let x=0,M=E.length;x<M;x++){const P=E[x],I=new fc;I.curves=P.curves,w.push(I)}return w}function t(E,w){const x=w.length;let M=!1;for(let P=x-1,I=0;I<x;P=I++){let D=w[P],A=w[I],N=A.x-D.x,T=A.y-D.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(D=w[I],N=-N,A=w[P],T=-T),E.y<D.y||E.y>A.y)continue;if(E.y===D.y){if(E.x===D.x)return!0}else{const L=T*(E.x-D.x)-N*(E.y-D.y);if(L===0)return!0;if(L<0)continue;M=!M}}else{if(E.y!==D.y)continue;if(A.x<=E.x&&E.x<=D.x||D.x<=E.x&&E.x<=A.x)return!0}}return M}const s=ca.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,c,h;const d=[];if(a.length===1)return c=a[0],h=new fc,h.curves=c.curves,d.push(h),d;let p=!s(a[0].getPoints());p=e?!p:p;const m=[],v=[];let y=[],b=0,S;v[b]=void 0,y[b]=[];for(let E=0,w=a.length;E<w;E++)c=a[E],S=c.getPoints(),l=s(S),l=e?!l:l,l?(!p&&v[b]&&b++,v[b]={s:new fc,p:S},v[b].s.curves=c.curves,p&&b++,y[b]=[]):y[b].push({h:c,p:S[0]});if(!v[0])return n(a);if(v.length>1){let E=!1,w=0;for(let x=0,M=v.length;x<M;x++)m[x]=[];for(let x=0,M=v.length;x<M;x++){const P=y[x];for(let I=0;I<P.length;I++){const D=P[I];let A=!0;for(let N=0;N<v.length;N++)t(D.p,v[N].p)&&(x!==N&&w++,A?(A=!1,m[N].push(D)):E=!0);A&&m[x].push(D)}}w>0&&E===!1&&(y=m)}let C;for(let E=0,w=v.length;E<w;E++){h=v[E].s,d.push(h),C=y[E];for(let x=0,M=C.length;x<M;x++)h.holes.push(C[x].h)}return d}}class rte extends Ss{constructor(e=1,n=1,t=1,s={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...s,count:t}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gh);const ste=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Vx,AddEquation:Yo,AddOperation:jP,AdditiveAnimationBlendMode:Kx,AdditiveBlending:A0,AgXToneMapping:JP,AlphaFormat:iI,AlwaysCompare:xI,AlwaysDepth:FP,AlwaysStencilFunc:N_,AmbientLight:bw,AnimationAction:C5,AnimationClip:ch,AnimationLoader:uee,AnimationMixer:Vee,AnimationObjectGroup:Bee,AnimationUtils:aee,ArcCurve:jI,ArrayCamera:VI,ArrowHelper:nte,AttachedBindMode:s_,Audio:x5,AudioAnalyser:Mee,AudioContext:_w,AudioListener:Cee,AudioLoader:_ee,AxesHelper:ite,BackSide:er,BasicDepthPacking:dI,BasicShadowMap:bK,BatchedMesh:HI,Bone:Qf,BooleanKeyframeTrack:Ac,Box2:E5,Box3:Gi,Box3Helper:ete,BoxGeometry:dl,BoxHelper:Qee,BufferAttribute:wn,BufferGeometry:Xt,BufferGeometryLoader:_5,ByteType:eI,Cache:Ga,Camera:wp,CameraHelper:Zee,CanvasTexture:PQ,CapsuleGeometry:gv,CatmullRomCurve3:KI,CineonToneMapping:XP,CircleGeometry:vv,ClampToEdgeWrapping:mr,Clock:xw,Color:Qe,ColorKeyframeTrack:mw,ColorManagement:Rn,CompressedArrayTexture:kQ,CompressedCubeTexture:AQ,CompressedTexture:dc,CompressedTextureLoader:hee,ConeGeometry:yv,ConstantAlphaFactor:BP,ConstantColorFactor:DP,CubeCamera:AI,CubeReflectionMapping:to,CubeRefractionMapping:sl,CubeTexture:Cp,CubeTextureLoader:dee,CubeUVReflectionMapping:vh,CubicBezierCurve:aw,CubicBezierCurve3:qI,CubicInterpolant:u5,CullFaceBack:n_,CullFaceFront:bP,CullFaceFrontBack:yK,CullFaceNone:yP,Curve:Es,CurvePath:YI,CustomBlending:_P,CustomToneMapping:YP,CylinderGeometry:xh,Cylindrical:Hee,Data3DTexture:Yx,DataArrayTexture:cv,DataTexture:el,DataTextureLoader:fee,DataUtils:Tq,DecrementStencilOp:PK,DecrementWrapStencilOp:NK,DefaultLoadingManager:f5,DepthFormat:uc,DepthStencilFormat:eh,DepthTexture:Qx,DetachedBindMode:QP,DirectionalLight:yw,DirectionalLightHelper:Jee,DiscreteInterpolant:h5,DisplayP3ColorSpace:lv,DodecahedronGeometry:bv,DoubleSide:Lr,DstAlphaFactor:AP,DstColorFactor:IP,DynamicCopyUsage:KK,DynamicDrawUsage:zK,DynamicReadUsage:GK,EdgesGeometry:JI,EllipseCurve:mv,EqualCompare:vI,EqualDepth:zP,EqualStencilFunc:BK,EquirectangularReflectionMapping:Zu,EquirectangularRefractionMapping:Wf,Euler:Ai,EventDispatcher:ma,ExtrudeGeometry:xv,FileLoader:ha,Float16BufferAttribute:Rq,Float32BufferAttribute:yt,FloatType:_s,Fog:pv,FogExp2:fv,FramebufferTexture:O_,FrontSide:eo,Frustum:Sp,GLBufferAttribute:$ee,GLSL1:XK,GLSL3:R_,GreaterCompare:yI,GreaterDepth:HP,GreaterEqualCompare:_I,GreaterEqualDepth:$P,GreaterEqualStencilFunc:UK,GreaterStencilFunc:VK,GridHelper:Xee,Group:Ha,HalfFloatType:yh,HemisphereLight:m5,HemisphereLightHelper:qee,IcosahedronGeometry:wv,ImageBitmapLoader:bee,ImageLoader:rp,ImageUtils:EI,IncrementStencilOp:AK,IncrementWrapStencilOp:IK,InstancedBufferAttribute:ah,InstancedBufferGeometry:b5,InstancedInterleavedBuffer:zee,InstancedMesh:$I,Int16BufferAttribute:Iq,Int32BufferAttribute:Nq,Int8BufferAttribute:kq,IntType:Ux,InterleavedBuffer:Ep,InterleavedBufferAttribute:no,Interpolant:Pp,InterpolateDiscrete:th,InterpolateLinear:nh,InterpolateSmooth:o0,InvertStencilOp:RK,KeepStencilOp:Xl,KeyframeTrack:qs,LOD:zI,LatheGeometry:Tp,Layers:uv,LessCompare:gI,LessDepth:UP,LessEqualCompare:qx,LessEqualDepth:Gf,LessEqualStencilFunc:OK,LessStencilFunc:LK,Light:ml,LightProbe:y5,Line:io,Line3:M5,LineBasicMaterial:nr,LineCurve:ow,LineCurve3:XI,LineDashedMaterial:o5,LineLoop:GI,LineSegments:va,LinearDisplayP3ColorSpace:_p,LinearFilter:gi,LinearInterpolant:pw,LinearMipMapLinearFilter:CK,LinearMipMapNearestFilter:wK,LinearMipmapLinearFilter:$s,LinearMipmapNearestFilter:$u,LinearSRGBColorSpace:oo,LinearToneMapping:KP,LinearTransfer:Kf,Loader:_r,LoaderUtils:uh,LoadingManager:gw,LoopOnce:cI,LoopPingPong:hI,LoopRepeat:uI,LuminanceAlphaFormat:aI,LuminanceFormat:sI,MOUSE:ql,Material:tr,MaterialLoader:Pv,MathUtils:Qi,Matrix3:Qt,Matrix4:ct,MaxEquation:SP,Mesh:Fn,MeshBasicMaterial:ga,MeshDepthMaterial:ew,MeshDistanceMaterial:tw,MeshLambertMaterial:dw,MeshMatcapMaterial:a5,MeshNormalMaterial:s5,MeshPhongMaterial:Rf,MeshPhysicalMaterial:i5,MeshStandardMaterial:hw,MeshToonMaterial:r5,MinEquation:CP,MirroredRepeatWrapping:Qu,MixOperation:WP,MultiplyBlending:r_,MultiplyOperation:bp,NearestFilter:ki,NearestMipMapLinearFilter:xK,NearestMipMapNearestFilter:_K,NearestMipmapLinearFilter:ec,NearestMipmapNearestFilter:av,NeutralToneMapping:ZP,NeverCompare:mI,NeverDepth:VP,NeverStencilFunc:DK,NoBlending:Xa,NoColorSpace:za,NoToneMapping:Ya,NormalAnimationBlendMode:ov,NormalBlending:cc,NotEqualCompare:bI,NotEqualDepth:GP,NotEqualStencilFunc:FK,NumberKeyframeTrack:oh,Object3D:_n,ObjectLoader:vee,ObjectSpaceNormalMap:pI,OctahedronGeometry:kp,OneFactor:MP,OneMinusConstantAlphaFactor:OP,OneMinusConstantColorFactor:LP,OneMinusDstAlphaFactor:PP,OneMinusDstColorFactor:NP,OneMinusSrcAlphaFactor:I0,OneMinusSrcColorFactor:kP,OrthographicCamera:xs,P3Primaries:Xf,PCFShadowMap:Bx,PCFSoftShadowMap:Ox,PMREMGenerator:D_,Path:ep,PerspectiveCamera:Ln,Plane:sa,PlaneGeometry:fl,PlaneHelper:tte,PointLight:L0,PointLightHelper:jee,Points:WI,PointsMaterial:rw,PolarGridHelper:Yee,PolyhedronGeometry:pl,PositionalAudio:Eee,PropertyBinding:sn,PropertyMixer:w5,QuadraticBezierCurve:lw,QuadraticBezierCurve3:cw,Quaternion:wi,QuaternionKeyframeTrack:Pc,QuaternionLinearInterpolant:d5,RED_GREEN_RGTC2_Format:P_,RED_RGTC1_Format:lI,REVISION:gh,RGBADepthPacking:fI,RGBAFormat:Fr,RGBAIntegerFormat:jx,RGBA_ASTC_10x10_Format:S_,RGBA_ASTC_10x5_Format:x_,RGBA_ASTC_10x6_Format:w_,RGBA_ASTC_10x8_Format:C_,RGBA_ASTC_12x10_Format:E_,RGBA_ASTC_12x12_Format:M_,RGBA_ASTC_4x4_Format:f_,RGBA_ASTC_5x4_Format:p_,RGBA_ASTC_5x5_Format:m_,RGBA_ASTC_6x5_Format:g_,RGBA_ASTC_6x6_Format:v_,RGBA_ASTC_8x5_Format:y_,RGBA_ASTC_8x6_Format:b_,RGBA_ASTC_8x8_Format:__,RGBA_BPTC_Format:a0,RGBA_ETC2_EAC_Format:d_,RGBA_PVRTC_2BPPV1_Format:c_,RGBA_PVRTC_4BPPV1_Format:l_,RGBA_S3TC_DXT1_Format:i0,RGBA_S3TC_DXT3_Format:r0,RGBA_S3TC_DXT5_Format:s0,RGBFormat:rI,RGB_BPTC_SIGNED_Format:T_,RGB_BPTC_UNSIGNED_Format:k_,RGB_ETC1_Format:u_,RGB_ETC2_Format:h_,RGB_PVRTC_2BPPV1_Format:o_,RGB_PVRTC_4BPPV1_Format:a_,RGB_S3TC_DXT1_Format:n0,RGFormat:oI,RGIntegerFormat:Wx,RawShaderMaterial:Nf,Ray:kc,Raycaster:S5,Rec709Primaries:qf,RectAreaLight:g5,RedFormat:Hx,RedIntegerFormat:Gx,ReinhardToneMapping:qP,RenderTarget:MI,RepeatWrapping:al,ReplaceStencilOp:kK,ReverseSubtractEquation:wP,RingGeometry:Cv,SIGNED_RED_GREEN_RGTC2_Format:I_,SIGNED_RED_RGTC1_Format:A_,SRGBColorSpace:ts,SRGBTransfer:Hn,Scene:sh,ShaderChunk:rn,ShaderLib:ys,ShaderMaterial:yr,ShadowMaterial:n5,Shape:fc,ShapeGeometry:Sv,ShapePath:k5,ShapeUtils:ca,ShortType:tI,Skeleton:Mp,SkeletonHelper:Wee,SkinnedMesh:iw,Source:ic,Sphere:Wi,SphereGeometry:Ap,Spherical:$_,SphericalHarmonics3:v5,SplineCurve:uw,SpotLight:Av,SpotLightHelper:Gee,Sprite:UI,SpriteMaterial:nw,SrcAlphaFactor:P0,SrcAlphaSaturateFactor:RP,SrcColorFactor:TP,StaticCopyUsage:jK,StaticDrawUsage:Yf,StaticReadUsage:HK,StereoCamera:xee,StreamCopyUsage:qK,StreamDrawUsage:$K,StreamReadUsage:WK,StringKeyframeTrack:Ic,SubtractEquation:xP,SubtractiveBlending:i_,TOUCH:Fa,TangentSpaceNormalMap:hl,TetrahedronGeometry:Ev,Texture:Wn,TextureLoader:p5,TorusGeometry:Mv,TorusKnotGeometry:Tv,Triangle:Br,TriangleFanDrawMode:MK,TriangleStripDrawMode:EK,TrianglesDrawMode:SK,TubeGeometry:kv,UVMapping:sv,Uint16BufferAttribute:hv,Uint32BufferAttribute:Jx,Uint8BufferAttribute:Aq,Uint8ClampedBufferAttribute:Pq,Uniform:Iv,UniformsGroup:Uee,UniformsLib:it,UniformsUtils:xp,UnsignedByteType:js,UnsignedInt248Type:bh,UnsignedInt5999Type:nI,UnsignedIntType:xc,UnsignedShort4444Type:zx,UnsignedShort5551Type:$x,UnsignedShortType:Fx,VSMShadowMap:ia,Vector2:Ge,Vector3:Q,Vector4:ln,VectorKeyframeTrack:lh,VideoTexture:TQ,WebGL3DRenderTarget:vq,WebGLArrayRenderTarget:gq,WebGLCoordinateSystem:oa,WebGLCubeRenderTarget:PI,WebGLMultipleRenderTargets:rte,WebGLRenderTarget:Ss,WebGLRenderer:Af,WebGLUtils:OI,WebGPUCoordinateSystem:Jf,WireframeGeometry:t5,WrapAroundEnding:jf,ZeroCurvatureEnding:tc,ZeroFactor:EP,ZeroSlopeEnding:nc,ZeroStencilOp:TK,createCanvasElement:CI},Symbol.toStringTag,{value:"Module"}));function ro(i){return j0()?(cx(i),!0):!1}function sp(){const i=new Set,e=s=>{i.delete(s)};return{on:s=>{i.add(s);const a=()=>e(s);return ro(a),{off:a}},off:e,trigger:(...s)=>Promise.all(Array.from(i).map(a=>a(...s)))}}function Xn(i){return typeof i=="function"?i():on(i)}const H_=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ate=i=>i!=null,ote=Object.prototype.toString,lte=i=>ote.call(i)==="[object Object]",G_=()=>{};function cte(i,e){function n(...t){return new Promise((s,a)=>{Promise.resolve(i(()=>e.apply(this,t),{fn:e,thisArg:this,args:t})).then(s).catch(a)})}return n}function ute(i,e={}){let n,t,s=G_;const a=c=>{clearTimeout(c),s(),s=G_};return c=>{const h=Xn(i),d=Xn(e.maxWait);return n&&a(n),h<=0||d!==void 0&&d<=0?(t&&(a(t),t=null),Promise.resolve(c())):new Promise((p,m)=>{s=e.rejectOnCancel?m:p,d&&!t&&(t=setTimeout(()=>{n&&a(n),t=null,p(c())},d)),n=setTimeout(()=>{t&&a(t),t=null,p(c())},h)})}}function hte(i,e,n=!1){return e.reduce((t,s)=>(s in i&&(!n||i[s]!==void 0)&&(t[s]=i[s]),t),{})}function dte(i){return ls()}function fte(i,e=200,n={}){return cte(ute(e,n),i)}function x3(i,e=200,n={}){const t=Ct(i.value),s=fte(()=>{t.value=i.value},e,n);return hi(i,()=>s()),t}function pte(i,e={}){if(!Ci(i))return pp(i);const n=Array.isArray(i.value)?Array.from({length:i.value.length}):{};for(const t in i.value)n[t]=vx(()=>({get(){return i.value[t]},set(s){var a;if((a=Xn(e.replaceRef))!=null?a:!0)if(Array.isArray(i.value)){const c=[...i.value];c[t]=s,i.value=c}else{const c={...i.value,[t]:s};Object.setPrototypeOf(c,Object.getPrototypeOf(i.value)),i.value=c}else i.value[t]=s}}));return n}function Sw(i,e=!0,n){dte()?br(i,n):e?i():mp(i)}function mte(i,e=1e3,n={}){const{immediate:t=!0,immediateCallback:s=!1}=n;let a=null;const l=Ct(!1);function c(){a&&(clearInterval(a),a=null)}function h(){l.value=!1,c()}function d(){const p=Xn(e);p<=0||(l.value=!0,s&&i(),c(),a=setInterval(i,p))}if(t&&H_&&d(),Ci(e)||typeof e=="function"){const p=hi(e,()=>{l.value&&H_&&d()});ro(p)}return ro(h),{isActive:l,pause:h,resume:d}}function Hs(i){var e;const n=Xn(i);return(e=n==null?void 0:n.$el)!=null?e:n}const lo=H_?window:void 0;function ap(...i){let e,n,t,s;if(typeof i[0]=="string"||Array.isArray(i[0])?([n,t,s]=i,e=lo):[e,n,t,s]=i,!e)return G_;Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const a=[],l=()=>{a.forEach(p=>p()),a.length=0},c=(p,m,v,y)=>(p.addEventListener(m,v,y),()=>p.removeEventListener(m,v,y)),h=hi(()=>[Hs(e),Xn(s)],([p,m])=>{if(l(),!p)return;const v=lte(m)?{...m}:m;a.push(...n.flatMap(y=>t.map(b=>c(p,y,b,v))))},{immediate:!0,flush:"post"}),d=()=>{h(),l()};return ro(d),d}function gte(){const i=Ct(!1),e=ls();return e&&br(()=>{i.value=!0},e),i}function Nv(i){const e=gte();return Gn(()=>(e.value,!!i()))}function vte(i,e,n={}){const{window:t=lo,...s}=n;let a;const l=Nv(()=>t&&"MutationObserver"in t),c=()=>{a&&(a.disconnect(),a=void 0)},h=Gn(()=>{const v=Xn(i),y=(Array.isArray(v)?v:[v]).map(Hs).filter(ate);return new Set(y)}),d=hi(()=>h.value,v=>{c(),l.value&&v.size&&(a=new MutationObserver(e),v.forEach(y=>a.observe(y,s)))},{immediate:!0,flush:"post"}),p=()=>a==null?void 0:a.takeRecords(),m=()=>{c(),d()};return ro(m),{isSupported:l,stop:m,takeRecords:p}}function Ew(i,e={}){const{immediate:n=!0,fpsLimit:t=void 0,window:s=lo}=e,a=Ct(!1),l=t?1e3/t:null;let c=0,h=null;function d(v){if(!a.value||!s)return;c||(c=v);const y=v-c;if(l&&y<l){h=s.requestAnimationFrame(d);return}c=v,i({delta:y,timestamp:v}),h=s.requestAnimationFrame(d)}function p(){!a.value&&s&&(a.value=!0,c=0,h=s.requestAnimationFrame(d))}function m(){a.value=!1,h!=null&&s&&(s.cancelAnimationFrame(h),h=null)}return n&&p(),ro(m),{isActive:gc(a),pause:m,resume:p}}function yte(i,e={}){const{window:n=lo}=e,t=Nv(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const a=Ct(!1),l=d=>{a.value=d.matches},c=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",l):s.removeListener(l))},h=qa(()=>{t.value&&(c(),s=n.matchMedia(Xn(i)),"addEventListener"in s?s.addEventListener("change",l):s.addListener(l),a.value=s.matches)});return ro(()=>{h(),c(),s=void 0}),a}function bte(i={}){const{window:e=lo}=i,n=Ct(1);if(e){let t=function(){n.value=e.devicePixelRatio,s(),a=e.matchMedia(`(resolution: ${n.value}dppx)`),a.addEventListener("change",t,{once:!0})},s=function(){a==null||a.removeEventListener("change",t)},a;t(),ro(s)}return{pixelRatio:n}}function A5(i,e,n={}){const{window:t=lo,...s}=n;let a;const l=Nv(()=>t&&"ResizeObserver"in t),c=()=>{a&&(a.disconnect(),a=void 0)},h=Gn(()=>Array.isArray(i)?i.map(m=>Hs(m)):[Hs(i)]),d=hi(h,m=>{if(c(),l.value&&t){a=new ResizeObserver(e);for(const v of m)v&&a.observe(v,s)}},{immediate:!0,flush:"post"}),p=()=>{c(),d()};return ro(p),{isSupported:l,stop:p}}function _te(i,e={}){const{reset:n=!0,windowResize:t=!0,windowScroll:s=!0,immediate:a=!0}=e,l=Ct(0),c=Ct(0),h=Ct(0),d=Ct(0),p=Ct(0),m=Ct(0),v=Ct(0),y=Ct(0);function b(){const S=Hs(i);if(!S){n&&(l.value=0,c.value=0,h.value=0,d.value=0,p.value=0,m.value=0,v.value=0,y.value=0);return}const C=S.getBoundingClientRect();l.value=C.height,c.value=C.bottom,h.value=C.left,d.value=C.right,p.value=C.top,m.value=C.width,v.value=C.x,y.value=C.y}return A5(i,b),hi(()=>Hs(i),S=>!S&&b()),vte(i,b,{attributeFilter:["style","class"]}),s&&ap("scroll",b,{capture:!0,passive:!0}),t&&ap("resize",b,{passive:!0}),Sw(()=>{a&&b()}),{height:l,bottom:c,left:h,right:d,top:p,width:m,x:v,y,update:b}}function xte(i,e={width:0,height:0},n={}){const{window:t=lo,box:s="content-box"}=n,a=Gn(()=>{var m,v;return(v=(m=Hs(i))==null?void 0:m.namespaceURI)==null?void 0:v.includes("svg")}),l=Ct(e.width),c=Ct(e.height),{stop:h}=A5(i,([m])=>{const v=s==="border-box"?m.borderBoxSize:s==="content-box"?m.contentBoxSize:m.devicePixelContentBoxSize;if(t&&a.value){const y=Hs(i);if(y){const b=y.getBoundingClientRect();l.value=b.width,c.value=b.height}}else if(v){const y=Array.isArray(v)?v:[v];l.value=y.reduce((b,{inlineSize:S})=>b+S,0),c.value=y.reduce((b,{blockSize:S})=>b+S,0)}else l.value=m.contentRect.width,c.value=m.contentRect.height},n);Sw(()=>{const m=Hs(i);m&&(l.value="offsetWidth"in m?m.offsetWidth:e.width,c.value="offsetHeight"in m?m.offsetHeight:e.height)});const d=hi(()=>Hs(i),m=>{l.value=m?e.width:0,c.value=m?e.height:0});function p(){h(),d()}return{width:l,height:c,stop:p}}function wte(i){var e;const n=Ct(0);if(typeof performance>"u")return n;const t=(e=i==null?void 0:i.every)!=null?e:10;let s=performance.now(),a=0;return Ew(()=>{if(a+=1,a>=t){const l=performance.now(),c=l-s;n.value=Math.round(1e3/(c/a)),s=l,a=0}}),n}function Cte(i={}){const e=Ct(),n=Nv(()=>typeof performance<"u"&&"memory"in performance);if(n.value){const{interval:t=1e3}=i;mte(()=>{e.value=performance.memory},t,{immediate:i.immediate,immediateCallback:i.immediateCallback})}return{isSupported:n,memory:e}}const P5={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},Ste=Object.keys(P5);function Ete(i={}){const{target:e=lo}=i,n=Ct(!1),t=Ct(i.initialValue||{});Object.assign(t.value,P5,t.value);const s=a=>{n.value=!0,!(i.pointerTypes&&!i.pointerTypes.includes(a.pointerType))&&(t.value=hte(a,Ste,!1))};if(e){const a={passive:!0};ap(e,["pointerdown","pointermove","pointerup"],s,a),ap(e,"pointerleave",()=>n.value=!1,a)}return{...pte(t),isInside:n}}function Mte(i={}){const{window:e=lo,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:t=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:a=!0}=i,l=Ct(n),c=Ct(t),h=()=>{e&&(a?(l.value=e.innerWidth,c.value=e.innerHeight):(l.value=e.document.documentElement.clientWidth,c.value=e.document.documentElement.clientHeight))};if(h(),Sw(h),ap("resize",h,{passive:!0}),s){const d=yte("(orientation: portrait)");hi(d,()=>h())}return{width:l,height:c}}var Tte=Object.defineProperty,kte=(i,e,n)=>e in i?Tte(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,w3=(i,e,n)=>(kte(i,typeof e!="symbol"?e+"":e,n),n);const Ate="@tresjs/core",Pte="module",Ite="3.9.0",Nte="pnpm@8.15.6",Rte="Declarative ThreeJS using Vue Components",Dte="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",Lte="MIT",Bte=["vue","3d","threejs","three","threejs-vue"],Ote=!1,Vte={".":{types:"./dist/index.d.ts",import:"./dist/tres.js",require:"./dist/tres.umd.cjs"},"./components":{types:"./dist/src/components/index.d.ts"},"./composables":{types:"./dist/src/composables/index.d.ts"},"./types":{types:"./dist/src/types/index.d.ts"},"./utils":{types:"./dist/src/utils/index.d.ts"},"./*":"./*"},Fte="./dist/tres.js",Ute="./dist/tres.js",zte="./dist/index.d.ts",$te=["*.d.ts","dist"],Hte={access:"public"},Gte={dev:"cd playground && npm run dev",build:"vite build",playground:"cd playground && npm run dev",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui",release:"release-it",coverage:"vitest run --coverage",lint:"eslint .","lint:fix":"eslint . --fix","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts",prepare:"node .husky/install.mjs"},Wte={three:">=0.133",vue:">=3.3"},jte={"@alvarosabu/utils":"^3.1.1","@vue/devtools-api":"^6.6.1","@vueuse/core":"^10.7.0"},Kte={"@release-it/conventional-changelog":"^8.0.1","@stackblitz/sdk":"^1.9.0","@tresjs/cientos":"3.8.0","@tresjs/eslint-config":"^1.0.0","@tresjs/eslint-config-vue":"^0.2.1","@types/three":"^0.163.0","@typescript-eslint/eslint-plugin":"^7.7.1","@typescript-eslint/parser":"^7.7.1","@vitejs/plugin-vue":"^5.0.4","@vitest/coverage-c8":"^0.33.0","@vitest/ui":"^1.5.0","@vue/test-utils":"^2.4.3",eslint:"^9.1.1","eslint-plugin-vue":"^9.25.0",esno:"^4.0.0",gsap:"^3.12.3",husky:"^9.0.11",jsdom:"^24.0.0",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^1.1.1","release-it":"^17.2.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.11.0",three:"^0.163.0",unocss:"^0.59.4",unplugin:"^1.10.1","unplugin-vue-components":"^0.26.0",vite:"^5.2.10","vite-plugin-banner":"^0.7.1","vite-plugin-dts":"3.9.0","vite-plugin-inspect":"^0.8.4","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.1.3",vitest:"^1.5.0",vue:"^3.4.24","vue-demi":"^0.14.6"},qte={name:Ate,type:Pte,version:Ite,packageManager:Nte,description:Rte,author:Dte,license:Lte,keywords:Bte,sideEffects:Ote,exports:Vte,main:Fte,module:Ute,types:zte,files:$te,publishConfig:Hte,scripts:Gte,peerDependencies:Wte,dependencies:jte,devDependencies:Kte},Xte=({sizes:i,scene:e})=>{const n=Ct([]),t=Gn(()=>n.value[0]),s=c=>{const h=c instanceof wp?c:n.value.find(p=>p.uuid===c);if(!h)return;const d=n.value.filter(({uuid:p})=>p!==h.uuid);n.value=[h,...d]},a=(c,h=!1)=>{n.value.some(({uuid:d})=>d===c.uuid)||(h?s(c):n.value.push(c))},l=c=>{n.value=n.value.filter(({uuid:h})=>h!==c.uuid)};return qa(()=>{i.aspectRatio.value&&n.value.forEach(c=>{c instanceof Ln&&(c.aspect=i.aspectRatio.value),(c instanceof Ln||c instanceof xs)&&c.updateProjectionMatrix()})}),e.userData.tres__registerCamera=a,e.userData.tres__deregisterCamera=l,Ks(()=>{n.value=[]}),{camera:t,cameras:n,registerCamera:a,deregisterCamera:l,setCameraActive:s}},I5=sp(),N5=sp(),Mw=sp(),Df=new xw;let c0=0,u0=0;const{pause:Yte,resume:Jte,isActive:Zte}=Ew(()=>{I5.trigger({delta:c0,elapsed:u0,clock:Df}),N5.trigger({delta:c0,elapsed:u0,clock:Df}),Mw.trigger({delta:c0,elapsed:u0,clock:Df})},{immediate:!1});Mw.on(()=>{c0=Df.getDelta(),u0=Df.getElapsedTime()});const Ip=()=>({onBeforeLoop:I5.on,onLoop:N5.on,onAfterLoop:Mw.on,pause:Yte,resume:Jte,isActive:Zte}),Ug="[TresJS   ] ";function Rv(){function i(...t){typeof t[0]=="string"?t[0]=Ug+t[0]:t.unshift(Ug),console.error(...t)}function e(...t){typeof t[0]=="string"?t[0]=Ug+t[0]:t.unshift(Ug),console.warn(...t)}function n(t,s){}return{logError:i,logWarning:e,logMessage:n}}function Qte(i){return i instanceof Qe?i:Array.isArray(i)?new Qe(...i):new Qe(i)}class ene extends Fn{constructor(...e){super(...e),w3(this,"type","HightlightMesh"),w3(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const e=(Date.now()-this.createTime)/1e3,n=1+.07*Math.sin(2.5*e);this.scale.set(n,n,n)}}const R5=(i,e)=>{for(const n of Object.keys(e))e[n]instanceof Object&&Object.assign(e[n],R5(i[n],e[n]));return Object.assign(i||{},e),i},tne="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",nne=ine(tne);function C3(i){return i&&i.nodeType===1}function zg(i){return i.replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function ine(i,e){const n=Object.create(null),t=i.split(",");for(let s=0;s<t.length;s++)n[t[s]]=!0;return s=>!!n[s]}const rne=(i,e)=>{const n=new Set,t=[];for(const s of i){const a=e(s);n.has(a)||(n.add(a),t.push(s))}return t},S3=(i,e)=>{if(!e)return;const n=Array.isArray(e)?e:e.match(/([^[.\]])+/g);return n==null?void 0:n.reduce((t,s)=>t&&t[s],i)},sne=(i,e,n)=>{const t=Array.isArray(e)?e:e.match(/([^[.\]])+/g);t&&t.reduce((s,a,l)=>(s[a]===void 0&&(s[a]={}),l===t.length-1&&(s[a]=n),s[a]),i)};function D5(i,e){if(C3(i)&&C3(e)){const s=i.attributes,a=e.attributes;return s.length!==a.length?!1:Array.from(s).every(({name:l,value:c})=>e.getAttribute(l)===c)}if(i===e)return!0;if(i===null||typeof i!="object"||e===null||typeof e!="object")return!1;const n=Object.keys(i),t=Object.keys(e);if(n.length!==t.length)return!1;for(const s of n)if(!t.includes(s)||!D5(i[s],e[s]))return!1;return!0}function ane(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(!D5(i[n],e[n]))return!1;return!0}function one(i,e,n,t){const s=h=>{if(h.uuid===e)return h;for(const d of h.children){const p=s(d);if(p)return p}},a=s(i);if(!a){console.warn("Object with UUID not found in the scene.");return}let l=a;for(let h=0;h<n.length-1;h++)if(l[n[h]]!==void 0)l=l[n[h]];else{console.warn(`Property path is not valid: ${n.join(".")}`);return}const c=n[n.length-1];l[c]!==void 0?l[c]=t:console.warn(`Property path is not valid: ${n.join(".")}`)}function lne(i){const e=new ga({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:Lr});return new ene(i.geometry.clone(),e)}const cne=Number.parseInt(gh.replace("dev","")),$g={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:ts,toneMapping:Vx,toneMappingExposure:3,shadowMap:{enabled:!0,type:Ox}}};function une({scene:i,canvas:e,options:n,disableRender:t,contextParts:{sizes:s,camera:a}}){const l=Gn(()=>({alpha:Xn(n.alpha),depth:Xn(n.depth),canvas:Hs(e),context:Xn(n.context),stencil:Xn(n.stencil),antialias:Xn(n.antialias)===void 0?!0:Xn(n.antialias),precision:Xn(n.precision),powerPreference:Xn(n.powerPreference),premultipliedAlpha:Xn(n.premultipliedAlpha),preserveDrawingBuffer:Xn(n.preserveDrawingBuffer),logarithmicDepthBuffer:Xn(n.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:Xn(n.failIfMajorPerformanceCaveat)})),c=Dr(new Af(l.value));hi(l,()=>{c.value.dispose(),c.value=new Af(l.value)}),qa(()=>{c.value.setSize(s.width.value,s.height.value)});const{pixelRatio:h}=bte();qa(()=>{c.value.setPixelRatio(h.value)});const{logError:d}=Rv(),p=(()=>{const b=new Af,S={shadowMap:{enabled:b.shadowMap.enabled,type:b.shadowMap.type},toneMapping:b.toneMapping,toneMappingExposure:b.toneMappingExposure,outputColorSpace:b.outputColorSpace};return b.dispose(),S})();qa(()=>{const b=Xn(n.preset);b&&(b in $g||d(`Renderer Preset must be one of these: ${Object.keys($g).join(", ")}`),R5(c.value,$g[b]));const S=(w,x)=>{const M=Xn(w),P=()=>{if(b)return S3($g[b],x)};if(M!==void 0)return M;const I=P();return I!==void 0?I:S3(p,x)},C=(w,x)=>sne(c.value,x,S(w,x));C(n.shadows,"shadowMap.enabled"),C(n.toneMapping,"toneMapping"),C(n.shadowMapType,"shadowMap.type"),cne<150&&C(!n.useLegacyLights,"physicallyCorrectLights"),C(n.outputColorSpace,"outputColorSpace"),C(n.toneMappingExposure,"toneMappingExposure");const E=S(n.clearColor,"clearColor");E&&c.value.setClearColor(E?Qte(E):new Qe(0))});const{pause:m,resume:v,onLoop:y}=Ip();return y(()=>{a.value&&!Xn(t)&&c.value.render(i,a.value)}),v(),Ks(()=>{m(),c.value.dispose(),c.value.forceContextLoss()}),{renderer:c}}const E3=i=>typeof i=="function",hne=i=>!!i&&i.constructor===Array;function dne(i){const e={nodes:{},materials:{}};return i&&i.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}async function fne(i,e,n,t,s){const{logError:a}=Rv(),l=new i,c=(Array.isArray(e)?e:[e]).map(h=>new Promise((d,p)=>{l.load(h,m=>{m.scene&&Object.assign(m,dne(m.scene)),d(m)},t,m=>p(a("[useLoader] - Failed to load resource",m)))}));return hne(e)?await Promise.all(c):await c[0]}const pne=(i,{renderer:e,camera:n,raycaster:t})=>{const s=Gn(()=>e.value.domElement),{x:a,y:l}=Ete({target:s}),{width:c,height:h,top:d,left:p}=_te(s),m=({x:D,y:A})=>{if(s.value)return{x:(D-p.value)/c.value*2-1,y:-((A-d.value)/h.value)*2+1}},v=({x:D,y:A})=>{if(n.value)return t.value.setFromCamera(new Ge(D,A),n.value),t.value.intersectObjects(i.value,!1)},y=D=>{const A=m({x:(D==null?void 0:D.clientX)??a.value,y:(D==null?void 0:D.clientY)??l.value});return A?v(A)||[]:[]},b=Gn(()=>y()),S=sp(),C=sp(),E=(D,A)=>{D.trigger({event:A,intersects:y(A)})},w=D=>{E(C,D)};let x;const M=D=>{var A;x=(A=y(D)[0])==null?void 0:A.object},P=D=>{var A;D instanceof PointerEvent&&x===((A=y(D)[0])==null?void 0:A.object)&&E(S,D)},I=D=>C.trigger({event:D,intersects:[]});return s.value.addEventListener("pointerup",P),s.value.addEventListener("pointerdown",M),s.value.addEventListener("pointermove",w),s.value.addEventListener("pointerleave",I),Ks(()=>{s!=null&&s.value&&(s.value.removeEventListener("pointerup",P),s.value.removeEventListener("pointerdown",M),s.value.removeEventListener("pointermove",w),s.value.removeEventListener("pointerleave",I))}),{intersects:b,onClick:D=>S.on(D).off,onPointerMove:D=>C.on(D).off}},mne=({scene:i,contextParts:e})=>{const n=mh({click:new Map,pointerMove:new Map,pointerEnter:new Map,pointerLeave:new Map}),t=Ct(new Set),s=v=>{t.value.add(v)},a=v=>{t.value.delete(v)},l=v=>{Object.values(n).forEach(y=>y.delete(v)),a(v)},c=v=>{const{onClick:y,onPointerMove:b,onPointerEnter:S,onPointerLeave:C}=v;y&&n.click.set(v,y),b&&n.pointerMove.set(v,b),S&&n.pointerEnter.set(v,S),C&&n.pointerLeave.set(v,C)};i.userData.tres__registerAtPointerEventHandler=c,i.userData.tres__deregisterAtPointerEventHandler=l,i.userData.tres__registerBlockingObjectAtPointerEventHandler=s,i.userData.tres__deregisterBlockingObjectAtPointerEventHandler=a;const h=Gn(()=>rne([...Array.from(t.value),...Object.values(n).map(v=>Array.from(v.keys())).flat()],({uuid:v})=>v)),{onClick:d,onPointerMove:p}=pne(h,e);d(({intersects:v,event:y})=>{var b;v.length&&((b=n.click.get(v[0].object))==null||b(v[0],y))});let m;return p(({intersects:v,event:y})=>{var b,S,C,E;const w=(b=v==null?void 0:v[0])==null?void 0:b.object,{pointerLeave:x,pointerEnter:M,pointerMove:P}=n;m&&m!==w&&((S=x.get(m))==null||S(m,y)),w&&(m!==w&&((C=M.get(w))==null||C(v[0],y)),(E=P.get(w))==null||E(v[0],y)),m=w||null}),{registerObject:c,deregisterObject:l}};function L5(i){let e=0;return i.traverse(n=>{if(n.isMesh&&n.geometry){const t=n.geometry,s=t.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,a=t.index?t.index.count*Uint32Array.BYTES_PER_ELEMENT:0,l=t.attributes.normal?t.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,c=t.attributes.uv?t.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,h=s+a+l+c;e+=h}}),e}function gne(i){return(i/1024).toFixed(2)}const W_=Ct({}),Tw=i=>Object.assign(W_.value,i);function vne(i,e,n=10){const t=Xn(i)?Mte():xte(Gn(()=>Xn(e).parentElement)),s=gc(x3(t.width,n)),a=gc(x3(t.height,n)),l=Gn(()=>s.value/a.value);return{height:a,width:s,aspectRatio:l}}function yne({scene:i,canvas:e,windowSize:n,disableRender:t,rendererOptions:s}){const a=vne(n,e),l=Dr(i),{camera:c,cameras:h,registerCamera:d,deregisterCamera:p,setCameraActive:m}=Xte({sizes:a,scene:i}),{renderer:v}=une({scene:i,canvas:e,options:s,contextParts:{sizes:a,camera:c},disableRender:t}),y={sizes:a,scene:l,camera:c,cameras:gc(h),renderer:v,raycaster:Dr(new S5),controls:Ct(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},extend:Tw,registerCamera:d,setCameraActive:m,deregisterCamera:p};Hf("useTres",y);const b=100,S=wte({every:b}),{isSupported:C,memory:E}=Cte({interval:b}),w=160;let x=performance.now();const M=({timestamp:A})=>{y.scene.value&&(y.perf.memory.allocatedMem=L5(y.scene.value)),A-x>=b&&(x=A,y.perf.fps.accumulator.push(S.value),y.perf.fps.accumulator.length>w&&y.perf.fps.accumulator.shift(),y.perf.fps.value=S.value,C.value&&E.value&&(y.perf.memory.accumulator.push(E.value.usedJSHeapSize/1024/1024),y.perf.memory.accumulator.length>w&&y.perf.memory.accumulator.shift(),y.perf.memory.currentMem=y.perf.memory.accumulator.reduce((N,T)=>N+T,0)/y.perf.memory.accumulator.length))};let P=0;const I=1,{pause:D}=Ew(({delta:A})=>{window.__TRES__DEVTOOLS__&&(M({timestamp:performance.now()}),P+=A,P>=I&&(window.__TRES__DEVTOOLS__.cb(y),P=0))},{immediate:!0});return Ks(()=>{D()}),y}function kw(){const i=zu("useTres");if(!i)throw new Error("useTresContext must be used together with useTresContextProvider");return i}let ci=null;const{logError:M3}=Rv(),rb=["onClick","onPointerMove","onPointerEnter","onPointerLeave"],bne={createElement(i,e,n,t){var s,a;if(t||(t={}),t.args||(t.args=[]),i==="template"||nne(i))return null;let l=i.replace("Tres",""),c;if(i==="primitive"){(t==null?void 0:t.object)===void 0&&M3("Tres primitives need a prop 'object'");const h=t.object;l=h.type,c=Object.assign(h,{type:l,attach:t.attach,primitive:!0})}else{const h=W_.value[l];h||M3(`${l} is not defined on the THREE namespace. Use extend to add it to the catalog.`),c=new h(...t.args)}return c.isCamera&&(t!=null&&t.position||c.position.set(3,3,3),t!=null&&t.lookAt||c.lookAt(0,0,0)),(t==null?void 0:t.attach)===void 0&&(c.isMaterial?c.attach="material":c.isBufferGeometry&&(c.attach="geometry")),c.isObject3D&&((s=t==null?void 0:t.material)!=null&&s.isMaterial&&(c.userData.tres__materialViaProp=!0),(a=t==null?void 0:t.geometry)!=null&&a.isBufferGeometry&&(c.userData.tres__geometryViaProp=!0)),c.userData={...c.userData,tres__name:l},c},insert(i,e){var n,t,s,a;e&&e.isScene&&(ci=e);const l=e||ci;if(i!=null&&i.isObject3D){if(i!=null&&i.isCamera){if(!(ci!=null&&ci.userData.tres__registerCamera))throw new Error("could not find tres__registerCamera on scene's userData");(t=ci==null?void 0:(n=ci.userData).tres__registerCamera)==null||t.call(n,i)}if(i&&rb.some(c=>i[c])){if(!(ci!=null&&ci.userData.tres__registerAtPointerEventHandler))throw new Error("could not find tres__registerAtPointerEventHandler on scene's userData");(a=ci==null?void 0:(s=ci.userData).tres__registerAtPointerEventHandler)==null||a.call(s,i)}}i!=null&&i.isObject3D&&l!=null&&l.isObject3D?(l.add(i),i.dispatchEvent({type:"added"})):i!=null&&i.isFog?l.fog=i:typeof(i==null?void 0:i.attach)=="string"&&(i.__previousAttach=i[l==null?void 0:l.attach],l&&(l[i.attach]=i))},remove(i){var e,n;if(i){if(i.isObject3D){const t=i,s=d=>{var p,m;const v=d;d.userData.tres__materialViaProp||((p=v.material)==null||p.dispose(),v.material=void 0),d.userData.tres__geometryViaProp||((m=v.geometry)==null||m.dispose(),v.geometry=void 0)},a=ci==null?void 0:ci.userData.tres__deregisterAtPointerEventHandler,l=ci==null?void 0:ci.userData.tres__deregisterBlockingObjectAtPointerEventHandler,c=d=>{var p,m;if(!l)throw new Error("could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData");if((m=ci==null?void 0:(p=ci.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||m.call(p,d),!a)throw new Error("could not find tres__deregisterAtPointerEventHandler on scene's userData");d&&rb.some(v=>d[v])&&(a==null||a(d))},h=d=>{const p=ci==null?void 0:ci.userData.tres__deregisterCamera;if(!p)throw new Error("could not find tres__deregisterCamera on scene's userData");d.isCamera&&(p==null||p(d))};(e=i.removeFromParent)==null||e.call(i),t.traverse(d=>{s(d),h(d),c==null||c(d)}),s(t),h(t),c==null||c(t)}(n=i.dispose)==null||n.call(i)}},patchProp(i,e,n,t){var s,a,l,c;if(i){let h=i,d=e;if(i.isObject3D&&d==="blocks-pointer-events"){t||t===""?(a=ci==null?void 0:(s=ci.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||a.call(s,i):(c=ci==null?void 0:(l=ci.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||c.call(l,i);return}let p=zg(d),m=h==null?void 0:h[p];if(d==="args"){const y=i,b=n??[],S=t??[],C=i.userData.tres__name||i.type;C&&b.length&&!ane(b,S)&&(h=Object.assign(y,new W_.value[C](...t)));return}if(h.type==="BufferGeometry"){if(d==="args")return;h.setAttribute(zg(d),new wn(...t));return}if(d.includes("-")&&m===void 0){const y=d.split("-");m=y.reduce((b,S)=>b[zg(S)],h),d=y.pop(),p=d.toLowerCase(),m!=null&&m.set||(h=y.reduce((b,S)=>b[zg(S)],h))}let v=t;if(v===""&&(v=!0),E3(m)){rb.includes(e)||(Array.isArray(v)?i[p](...v):i[p](v));return}!(m!=null&&m.set)&&!E3(m)?h[p]=v:m.constructor===v.constructor&&m!=null&&m.copy?m==null||m.copy(v):Array.isArray(v)?m.set(...v):!m.isColor&&m.setScalar?m.setScalar(v):m.set(v)}},parentNode(i){return(i==null?void 0:i.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}},{render:_ne}=Ax(bne);Tw(ste);function xne(){return B5().__VUE_DEVTOOLS_GLOBAL_HOOK__}function B5(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const wne=typeof Proxy=="function",Cne="devtools-plugin:setup",Sne="plugin:settings:set";let wd,j_;function Ene(){var i;return wd!==void 0||(typeof window<"u"&&window.performance?(wd=!0,j_=window.performance):typeof globalThis<"u"&&!((i=globalThis.perf_hooks)===null||i===void 0)&&i.performance?(wd=!0,j_=globalThis.perf_hooks.performance):wd=!1),wd}function Mne(){return Ene()?j_.now():Date.now()}class Tne{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const t={};if(e.settings)for(const l in e.settings){const c=e.settings[l];t[l]=c.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let a=Object.assign({},t);try{const l=localStorage.getItem(s),c=JSON.parse(l);Object.assign(a,c)}catch{}this.fallbacks={getSettings(){return a},setSettings(l){try{localStorage.setItem(s,JSON.stringify(l))}catch{}a=l},now(){return Mne()}},n&&n.on(Sne,(l,c)=>{l===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(l,c)=>this.target?this.target.on[c]:(...h)=>{this.onQueue.push({method:c,args:h})}}),this.proxiedTarget=new Proxy({},{get:(l,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...h)=>(this.targetQueue.push({method:c,args:h,resolve:()=>{}}),this.fallbacks[c](...h)):(...h)=>new Promise(d=>{this.targetQueue.push({method:c,args:h,resolve:d})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function kne(i,e){const n=i,t=B5(),s=xne(),a=wne&&n.enableEarlyProxy;if(s&&(t.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))s.emit(Cne,i,e);else{const l=a?new Tne(n,s):null;(t.__VUE_DEVTOOLS_PLUGINS__=t.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:l}),l&&e(l.proxiedTarget)}}function Ane(i,e){const n=`  ${i}`;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):console.log(n)}const O5=i=>{const e={id:i.uuid,label:i.type,children:[],tags:[]};i.name!==""&&e.tags.push({label:i.name,textColor:5750629,backgroundColor:15793395});const n=L5(i);return n>0&&e.tags.push({label:`${gne(n)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),i.type.includes("Light")&&(e.tags.push({label:`${i.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),e.tags.push({label:`#${i.color.getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),i.type.includes("Camera")&&(e.tags.push({label:`${i.fov}`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),e.tags.push({label:`x: ${Math.round(i.position.x)} y: ${Math.round(i.position.y)} z: ${Math.round(i.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),e};function V5(i,e){i.children.forEach(n=>{if(n.type==="HightlightMesh")return;const t=O5(n);e.children.push(t),V5(n,t)})}const Pne=[],Cd="tres:inspector",Ine=mh({sceneGraph:null});function Nne(i,e){kne({id:"dev.esm.tres",label:"TresJS ",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:Pne,app:i},n=>{typeof n.now!="function"&&Ane("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addInspector({id:Cd,label:"TresJS ",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{n.sendInspectorTree(Cd)},1e3),setInterval(()=>{n.notifyComponentUpdate()},5e3),n.on.getInspectorTree(a=>{if(a.inspectorId===Cd){const l=O5(e.scene.value);V5(e.scene.value,l),Ine.sceneGraph=l,a.rootNodes=[l]}});let t=null,s=null;n.on.getInspectorState(a=>{if(a.inspectorId===Cd){const[l]=e.scene.value.getObjectsByProperty("uuid",a.nodeId);if(!l)return;if(s&&t&&t.parent&&s.remove(t),l.isMesh){const c=lne(l);l.add(c),t=c,s=l}a.state={object:[{key:"uuid",editable:!0,value:l.uuid},{key:"name",editable:!0,value:l.name},{key:"type",editable:!0,value:l.type},{key:"position",editable:!0,value:l.position},{key:"rotation",editable:!0,value:l.rotation},{key:"scale",editable:!0,value:l.scale},{key:"geometry",value:l.geometry},{key:"material",value:l.material},{key:"color",editable:!0,value:l.color},{key:"intensity",editable:!0,value:l.intensity},{key:"castShadow",editable:!0,value:l.castShadow},{key:"receiveShadow",editable:!0,value:l.receiveShadow},{key:"frustumCulled",editable:!0,value:l.frustumCulled},{key:"matrixAutoUpdate",editable:!0,value:l.matrixAutoUpdate},{key:"matrixWorldNeedsUpdate",editable:!0,value:l.matrixWorldNeedsUpdate},{key:"matrixWorld",value:l.matrixWorld},{key:"visible",editable:!0,value:l.visible}]}}}),n.on.editInspectorState(a=>{a.inspectorId===Cd&&one(e.scene.value,a.nodeId,a.path,a.state.value)})})}const Rne=["data-scene","data-tres"],Dne=Qa({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},disableRender:{type:Boolean,default:void 0},context:{},precision:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},logarithmicDepthBuffer:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0}},setup(i,{expose:e}){var n;const t=i,s=Mx(),{logWarning:a}=Rv(),l=Ct(),c=Dr(new sh),{resume:h}=Ip(),d=(n=ls())==null?void 0:n.appContext.app,p=S=>Qa({setup(){var C;const E=(C=ls())==null?void 0:C.appContext;return E&&(E.app=d),Hf("useTres",S),Hf("extend",Tw),typeof window<"u"&&Nne(E.app,S),()=>S0(mi,null,s!=null&&s.default?s.default():[])}}),m=S=>{const C=p(S);_ne(S0(C),c.value)},v=(S,C=!1)=>{c.value.children=[],C&&(S.renderer.value.dispose(),S.renderer.value.renderLists.dispose(),S.renderer.value.forceContextLoss()),m(S),h()},y=Gn(()=>t.disableRender),b=Dr(null);return e({context:b,dispose:()=>v(b.value,!0)}),br(()=>{const S=l;b.value=yne({scene:c.value,canvas:S,windowSize:t.windowSize,disableRender:y,rendererOptions:t}),mne({scene:c.value,contextParts:b.value});const{registerCamera:C,camera:E,cameras:w,deregisterCamera:x}=b.value;m(b.value);const M=()=>{const P=new Ln(45,window.innerWidth/window.innerHeight,.1,1e3);P.position.set(3,3,3),P.lookAt(0,0,0),C(P);const I=qa(()=>{w.value.length>=2&&(P.removeFromParent(),x(P),I==null||I())})};hi(()=>t.camera,(P,I)=>{P&&C(P),I&&(I.removeFromParent(),x(I))},{immediate:!0}),E.value||(a("No camera found. Creating a default perspective camera. To have full control over a camera, please add one to the scene."),M())}),(S,C)=>(Bn(),Vi("canvas",{ref_key:"canvas",ref:l,"data-scene":c.value.uuid,class:ph(S.$attrs.class),"data-tres":`tresjs ${on(qte).version}`,style:Mc({display:"block",width:"100%",height:"100%",position:S.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...S.$attrs.style})},null,14,Rne))}}),Lne={install(i){i.component("TresCanvas",Dne)}};/*! Tweakpane 4.0.3 (c) 2016 cocopon, licensed under the MIT license. */function ai(i){return i==null}function Aw(i){return i!==null&&typeof i=="object"}function K_(i){return i!==null&&typeof i=="object"}function Bne(i,e){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==e[n])return!1;return!0}function Cc(i,e){return Array.from(new Set([...Object.keys(i),...Object.keys(e)])).reduce((t,s)=>{const a=i[s],l=e[s];return K_(a)&&K_(l)?Object.assign(Object.assign({},t),{[s]:Cc(a,l)}):Object.assign(Object.assign({},t),{[s]:s in e?l:a})},{})}function One(i){return Aw(i)?"target"in i:!1}const Vne={alreadydisposed:()=>"View has been already disposed",invalidparams:i=>`Invalid parameters for '${i.name}'`,nomatchingcontroller:i=>`No matching controller for '${i.key}'`,nomatchingview:i=>`No matching view for '${JSON.stringify(i.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:i=>`Not compatible with  plugin '${i.id}'`,propertynotfound:i=>`Property '${i.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class rs{static alreadyDisposed(){return new rs({type:"alreadydisposed"})}static notBindable(){return new rs({type:"notbindable"})}static notCompatible(e,n){return new rs({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new rs({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new rs({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=Vne[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class B0{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const t=this.read();if(!B0.isBindable(t))throw rs.notBindable();if(!(e in t))throw rs.propertyNotFound(e);t[e]=n}}class cs{constructor(){this.observers_={}}on(e,n,t){var s;let a=this.observers_[e];return a||(a=this.observers_[e]=[]),a.push({handler:n,key:(s=t==null?void 0:t.key)!==null&&s!==void 0?s:n}),this}off(e,n){const t=this.observers_[e];return t&&(this.observers_[e]=t.filter(s=>s.key!==n)),this}emit(e,n){const t=this.observers_[e];t&&t.forEach(s=>{s.handler(n)})}}class Fne{constructor(e,n){var t;this.constraint_=n==null?void 0:n.constraint,this.equals_=(t=n==null?void 0:n.equals)!==null&&t!==void 0?t:(s,a)=>s===a,this.emitter=new cs,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const t=n??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(e):e,a=this.rawValue_;this.equals_(a,s)&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:t,previousRawValue:a,rawValue:s,sender:this}))}}class Une{constructor(e){this.emitter=new cs,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const t=n??{forceEmit:!1,last:!0},s=this.value_;s===e&&!t.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:t,previousRawValue:s,rawValue:this.value_,sender:this}))}}class zne{constructor(e){this.emitter=new cs,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Fi(i,e){const n=e==null?void 0:e.constraint,t=e==null?void 0:e.equals;return!n&&!t?new Une(i):new Fne(i,e)}function $ne(i){return[new zne(i),(e,n)=>{i.setRawValue(e,n)}]}class kn{constructor(e){this.emitter=new cs,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((t,s)=>Object.assign(t,{[s]:Fi(e[s])}),{})}static fromObject(e){const n=this.createCore(e);return new kn(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class Dv{constructor(e){this.values=kn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),t=this.values.get("min");return Math.min(Math.max(e,t),n)}}class Hne{constructor(e){this.values=kn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),t=this.values.get("min");let s=e;return ai(t)||(s=Math.max(s,t)),ai(n)||(s=Math.min(s,n)),s}}class Gne{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,t=Math.round((e-n)/this.step);return n+t*this.step}}class Wne{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const jne={"**":(i,e)=>Math.pow(i,e),"*":(i,e)=>i*e,"/":(i,e)=>i/e,"%":(i,e)=>i%e,"+":(i,e)=>i+e,"-":(i,e)=>i-e,"<<":(i,e)=>i<<e,">>":(i,e)=>i>>e,">>>":(i,e)=>i>>>e,"&":(i,e)=>i&e,"^":(i,e)=>i^e,"|":(i,e)=>i|e};class Kne{constructor(e,n,t){this.left=n,this.operator=e,this.right=t}evaluate(){const e=jne[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const qne={"+":i=>i,"-":i=>-i,"~":i=>~i};class Xne{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=qne[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Pw(i){return(e,n)=>{for(let t=0;t<i.length;t++){const s=i[t](e,n);if(s!=="")return s}return""}}function op(i,e){var n;const t=i.substr(e).match(/^\s+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function Yne(i,e){const n=i.substr(e,1);return n.match(/^[1-9]$/)?n:""}function lp(i,e){var n;const t=i.substr(e).match(/^[0-9]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function Jne(i,e){const n=lp(i,e);if(n!=="")return n;const t=i.substr(e,1);if(e+=1,t!=="-"&&t!=="+")return"";const s=lp(i,e);return s===""?"":t+s}function Iw(i,e){const n=i.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const t=Jne(i,e);return t===""?"":n+t}function F5(i,e){const n=i.substr(e,1);if(n==="0")return n;const t=Yne(i,e);return e+=t.length,t===""?"":t+lp(i,e)}function Zne(i,e){const n=F5(i,e);if(e+=n.length,n==="")return"";const t=i.substr(e,1);if(e+=t.length,t!==".")return"";const s=lp(i,e);return e+=s.length,n+t+s+Iw(i,e)}function Qne(i,e){const n=i.substr(e,1);if(e+=n.length,n!==".")return"";const t=lp(i,e);return e+=t.length,t===""?"":n+t+Iw(i,e)}function eie(i,e){const n=F5(i,e);return e+=n.length,n===""?"":n+Iw(i,e)}const tie=Pw([Zne,Qne,eie]);function nie(i,e){var n;const t=i.substr(e).match(/^[01]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function iie(i,e){const n=i.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const t=nie(i,e);return t===""?"":n+t}function rie(i,e){var n;const t=i.substr(e).match(/^[0-7]+/);return(n=t&&t[0])!==null&&n!==void 0?n:""}function sie(i,e){const n=i.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const t=rie(i,e);return t===""?"":n+t}function aie(i,e){var n;const t=i.substr(e).match(/^[0-9a-f]+/i);return(n=t&&t[0])!==null&&n!==void 0?n:""}function oie(i,e){const n=i.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const t=aie(i,e);return t===""?"":n+t}const lie=Pw([iie,sie,oie]),cie=Pw([lie,tie]);function uie(i,e){const n=cie(i,e);return e+=n.length,n===""?null:{evaluable:new Wne(n),cursor:e}}function hie(i,e){const n=i.substr(e,1);if(e+=n.length,n!=="(")return null;const t=z5(i,e);if(!t)return null;e=t.cursor,e+=op(i,e).length;const s=i.substr(e,1);return e+=s.length,s!==")"?null:{evaluable:t.evaluable,cursor:e}}function die(i,e){var n;return(n=uie(i,e))!==null&&n!==void 0?n:hie(i,e)}function U5(i,e){const n=die(i,e);if(n)return n;const t=i.substr(e,1);if(e+=t.length,t!=="+"&&t!=="-"&&t!=="~")return null;const s=U5(i,e);return s?(e=s.cursor,{cursor:e,evaluable:new Xne(t,s.evaluable)}):null}function fie(i,e,n){n+=op(e,n).length;const t=i.filter(s=>e.startsWith(s,n))[0];return t?(n+=t.length,n+=op(e,n).length,{cursor:n,operator:t}):null}function pie(i,e){return(n,t)=>{const s=i(n,t);if(!s)return null;t=s.cursor;let a=s.evaluable;for(;;){const l=fie(e,n,t);if(!l)break;t=l.cursor;const c=i(n,t);if(!c)return null;t=c.cursor,a=new Kne(l.operator,a,c.evaluable)}return a?{cursor:t,evaluable:a}:null}}const mie=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((i,e)=>pie(i,e),U5);function z5(i,e){return e+=op(i,e).length,mie(i,e)}function gie(i){const e=z5(i,0);return!e||e.cursor+op(i,e.cursor).length!==i.length?null:e.evaluable}function ol(i){var e;const n=gie(i);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function $5(i){if(typeof i=="number")return i;if(typeof i=="string"){const e=ol(i);if(!ai(e))return e}return 0}function $r(i){return e=>e.toFixed(Math.max(Math.min(i,20),0))}function Nn(i,e,n,t,s){const a=(i-e)/(n-e);return t+a*(s-t)}function T3(i){return String(i.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Pi(i,e,n){return Math.min(Math.max(i,e),n)}function H5(i,e){return(i%e+e)%e}function vie(i,e){return ai(i.step)?Math.max(T3(e),2):T3(i.step)}function G5(i){var e;return(e=i.step)!==null&&e!==void 0?e:1}function yie(i,e){var n;const t=Math.abs((n=i.step)!==null&&n!==void 0?n:e);return t===0?.1:Math.pow(10,Math.floor(Math.log10(t))-1)}function W5(i,e){return ai(i.step)?null:new Gne(i.step,e)}function j5(i){return!ai(i.max)&&!ai(i.min)?new Dv({max:i.max,min:i.min}):!ai(i.max)||!ai(i.min)?new Hne({max:i.max,min:i.min}):null}function K5(i,e){var n,t,s;return{formatter:(n=i.format)!==null&&n!==void 0?n:$r(vie(i,e)),keyScale:(t=i.keyScale)!==null&&t!==void 0?t:G5(i),pointerScale:(s=i.pointerScale)!==null&&s!==void 0?s:yie(i,e)}}function q5(i){return{format:i.optional.function,keyScale:i.optional.number,max:i.optional.number,min:i.optional.number,pointerScale:i.optional.number,step:i.optional.number}}function Nw(i){return{constraint:i.constraint,textProps:kn.fromObject(K5(i.params,i.initialValue))}}class Rw{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class Lv{constructor(e){this.target=e}}class X5 extends Lv{constructor(e,n,t){super(e),this.value=n,this.last=t??!0}}class bie extends Lv{constructor(e,n){super(e),this.expanded=n}}class _ie extends Lv{constructor(e,n){super(e),this.index=n}}class xie extends Lv{constructor(e,n){super(e),this.native=n}}class Dw extends Rw{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new cs,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const t=n.bind(this);return this.emitter_.on(e,s=>{t(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new X5(this,n.binding.target.read(),e.options.last))}}function wie(i,e){const t=Object.keys(e).reduce((s,a)=>{if(s===void 0)return;const l=e[a],c=l(i[a]);return c.succeeded?Object.assign(Object.assign({},s),{[a]:c.value}):void 0},{});return t}function Cie(i,e){return i.reduce((n,t)=>{if(n===void 0)return;const s=e(t);if(!(!s.succeeded||s.value===void 0))return[...n,s.value]},[])}function Sie(i){return i===null?!1:typeof i=="object"}function La(i){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const t=i(n);return t!==void 0?{succeeded:!0,value:t}:{succeeded:!1,value:void 0}}}function k3(i){return{custom:e=>La(e)(i),boolean:La(e=>typeof e=="boolean"?e:void 0)(i),number:La(e=>typeof e=="number"?e:void 0)(i),string:La(e=>typeof e=="string"?e:void 0)(i),function:La(e=>typeof e=="function"?e:void 0)(i),constant:e=>La(n=>n===e?e:void 0)(i),raw:La(e=>e)(i),object:e=>La(n=>{if(Sie(n))return wie(n,e)})(i),array:e=>La(n=>{if(Array.isArray(n))return Cie(n,e)})(i)}}const q_={optional:k3(!0),required:k3(!1)};function ir(i,e){const n=e(q_),t=q_.required.object(n)(i);return t.succeeded?t.value:void 0}function ya(i,e,n,t){if(e&&!e(i))return!1;const s=ir(i,n);return s?t(s):!1}function ba(i,e){var n;return Cc((n=i==null?void 0:i())!==null&&n!==void 0?n:{},e)}function h0(i){return"value"in i}function Eie(i){if(!Aw(i)||!("binding"in i))return!1;const e=i.binding;return One(e)}const la="http://www.w3.org/2000/svg";function O0(i){i.offsetHeight}function Mie(i,e){const n=i.style.transition;i.style.transition="none",e(),i.style.transition=n}function Lw(i){return i.ontouchstart!==void 0}function Tie(i){const e=i.ownerDocument.defaultView;return e&&"document"in e?i.getContext("2d",{willReadFrequently:!0}):null}const kie={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Bv(i,e){const n=i.createElementNS(la,"svg");return n.innerHTML=kie[e],n}function Y5(i,e,n){i.insertBefore(e,i.children[n])}function Bw(i){i.parentElement&&i.parentElement.removeChild(i)}function J5(i){for(;i.children.length>0;)i.removeChild(i.children[0])}function Aie(i){for(;i.childNodes.length>0;)i.removeChild(i.childNodes[0])}function Z5(i){return i.relatedTarget?i.relatedTarget:"explicitOriginalTarget"in i?i.explicitOriginalTarget:null}function Ja(i,e){i.emitter.on("change",n=>{e(n.rawValue)}),e(i.rawValue)}function da(i,e,n){Ja(i.value(e),n)}const Pie="tp";function An(i){return(n,t)=>[Pie,"-",i,"v",n?`_${n}`:"",t?`-${t}`:""].join("")}const Sd=An("lbl");function Iie(i,e){const n=i.createDocumentFragment();return e.split(`
`).map(s=>i.createTextNode(s)).forEach((s,a)=>{a>0&&n.appendChild(i.createElement("br")),n.appendChild(s)}),n}class Nie{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Sd()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(Sd("l")),da(n.props,"label",a=>{ai(a)?this.element.classList.add(Sd(void 0,"nol")):(this.element.classList.remove(Sd(void 0,"nol")),Aie(t),t.appendChild(Iie(e,a)))}),this.element.appendChild(t),this.labelElement=t;const s=e.createElement("div");s.classList.add(Sd("v")),this.element.appendChild(s),this.valueElement=s}}class Rie{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Nie(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return ya(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return ba(null,{label:this.props.get("label")})}}function Die(){return["veryfirst","first","last","verylast"]}const A3=An(""),P3={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Q5{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Die().forEach(t=>{n.classList.remove(A3(void 0,P3[t]))}),this.blade.get("positions").forEach(t=>{n.classList.add(A3(void 0,P3[t]))})}),this.viewProps.handleDispose(()=>{Bw(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return ya(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return ba(null,Object.assign({},this.viewProps.exportState()))}}class Lie extends Rw{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const t=n.bind(this);return this.controller.buttonController.emitter.on(e,a=>{t(new xie(this,a.nativeEvent))}),this}off(e,n){return this.controller.buttonController.emitter.off(e,n),this}}function Bie(i,e,n){n?i.classList.add(e):i.classList.remove(e)}function wh(i,e){return n=>{Bie(i,e,n)}}function Ow(i,e){Ja(i,n=>{e.textContent=n??""})}const sb=An("btn");class Oie{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sb()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("button");t.classList.add(sb("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const s=e.createElement("div");s.classList.add(sb("t")),Ow(n.props.value("title"),s),this.buttonElement.appendChild(s)}}class Vie{constructor(e,n){this.emitter=new cs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Oie(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return ya(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return ba(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class I3 extends Q5{constructor(e,n){const t=new Vie(e,{props:n.buttonProps,viewProps:n.viewProps}),s=new Rie(e,{blade:n.blade,props:n.labelProps,valueController:t});super({blade:n.blade,view:s.view,viewProps:n.viewProps}),this.buttonController=t,this.labelController=s}importState(e){return ya(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return ba(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class e6{constructor(e){const[n,t]=e.split("-"),s=n.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=t??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const Fie=new e6("2.0.3");function xr(i){return Object.assign({core:Fie},i)}xr({id:"button",type:"blade",accept(i){const e=ir(i,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(i){return new I3(i.document,{blade:i.blade,buttonProps:kn.fromObject({title:i.params.title}),labelProps:kn.fromObject({label:i.params.label}),viewProps:i.viewProps})},api(i){return i.controller instanceof I3?new Lie(i.controller):null}});function Uie(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function zie(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function $ie(i,e){return i.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Hie(i){return Aw(i)?"refresh"in i&&typeof i.refresh=="function":!1}function Gie(i,e){if(!B0.isBindable(i))throw rs.notBindable();return new B0(i,e)}class Wie{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new cs,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,t){const s=t??{},a=this.controller_.element.ownerDocument,l=this.pool_.createBinding(a,Gie(e,n),s),c=this.pool_.createBindingApi(l);return this.add(c,s.index)}addFolder(e){return zie(this,e)}addButton(e){return Uie(this,e)}addTab(e){return $ie(this,e)}add(e,n){const t=e.controller;return this.controller_.rack.add(t,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,t=this.pool_.createBlade(n,e),s=this.pool_.createApi(t);return this.add(s,e.index)}on(e,n){const t=n.bind(this);return this.emitter_.on(e,s=>{t(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}refresh(){this.children.forEach(e=>{Hie(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,t=this.pool_.createApi(n),s=Eie(n.value)?n.value.binding:null;this.emitter_.emit("change",new X5(t,s?s.target.read():n.value.rawValue,e.options.last))}}class Vw extends Rw{constructor(e,n){super(e),this.rackApi_=new Wie(e.rackController,n)}refresh(){this.rackApi_.refresh()}}class Fw extends Q5{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return ya(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((t,s)=>t.importState(n.children[s])))}exportState(){return ba(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function X_(i){return"rackController"in i}class jie{constructor(e){this.emitter=new cs,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw rs.shouldNeverHappen();const t=n!==void 0?n:this.items_.length;this.items_.splice(t,0,e),this.cache_.add(e);const s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(a=>{this.cache_.add(a)})),this.emitter.emit("add",{index:t,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const t=this.extract_(e);t&&(t.allItems().forEach(s=>{this.cache_.delete(s)}),t.emitter.off("add",this.onSubListAdd_),t.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function Kie(i,e){for(let n=0;n<i.length;n++){const t=i[n];if(h0(t)&&t.value===e)return t}return null}function qie(i){return X_(i)?i.rackController.rack.bcSet_:null}class Xie{constructor(e){var n,t;this.emitter=new cs,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(t=this.blade_)===null||t===void 0||t.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new jie(qie),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var t;(t=e.parent)===null||t===void 0||t.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const t=e.item;if(t.viewProps.emitter.on("change",this.onChildViewPropsChange_),t.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),t.viewProps.handleDispose(this.onChildDispose_),h0(t))t.value.emitter.on("change",this.onChildValueChange_);else if(X_(t)){const s=t.rackController.rack;if(s){const a=s.emitter;a.on("layout",this.onRackLayout_),a.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const t=e.item;if(h0(t))t.value.emitter.off("change",this.onChildValueChange_);else if(X_(t)){const s=t.rackController.rack;if(s){const a=s.emitter;a.off("layout",this.onRackLayout_),a.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),n=e[0],t=e[e.length-1];this.bcSet_.items.forEach(s=>{const a=[];s===n&&(a.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&a.push("veryfirst")),s===t&&(a.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&a.push("verylast")),s.blade.set("positions",a)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=Kie(this.find(h0),e.sender);if(!n)throw rs.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Uw{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new Xie({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Y5(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Bw(e.bladeController.view.element)}}function t6(){return new kn({positions:Fi([],{equals:Bne})})}class Np extends kn{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},t=kn.createCore(n);return new Np(t)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!ai(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const t=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};da(this,"expanded",t),da(this,"temporaryExpanded",t)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Yie(i,e){let n=0;return Mie(e,()=>{i.set("expandedHeight",null),i.set("temporaryExpanded",!0),O0(e),n=e.clientHeight,i.set("temporaryExpanded",null),O0(e)}),n}function N3(i,e){e.style.height=i.styleHeight}function zw(i,e){i.value("expanded").emitter.on("beforechange",()=>{if(i.set("completed",!1),ai(i.get("expandedHeight"))){const n=Yie(i,e);n>0&&i.set("expandedHeight",n)}i.set("shouldFixHeight",!0),O0(e)}),i.emitter.on("change",()=>{N3(i,e)}),N3(i,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&i.cleanUpTransition()})}class Jie extends Vw{constructor(e,n){super(e,n),this.emitter_=new cs,this.controller.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",new bie(this,t.sender.rawValue))}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,t){return this.rackApi_.addBinding(e,n,t)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const t=n.bind(this);return this.emitter_.on(e,s=>{t(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}}const n6=An("cnt");class Zie{constructor(e,n){var t;this.className_=An((t=n.viewName)!==null&&t!==void 0?t:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),n6()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),da(this.foldable_,"completed",wh(this.element,this.className_(void 0,"cpl")));const s=e.createElement("button");s.classList.add(this.className_("b")),da(n.props,"title",d=>{ai(d)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const a=e.createElement("div");a.classList.add(this.className_("i")),this.element.appendChild(a);const l=e.createElement("div");l.classList.add(this.className_("t")),Ow(n.props.value("title"),l),this.buttonElement.appendChild(l),this.titleElement=l;const c=e.createElement("div");c.classList.add(this.className_("m")),this.buttonElement.appendChild(c);const h=e.createElement("div");h.classList.add(this.className_("c")),this.element.appendChild(h),this.containerElement=h}}class R3 extends Fw{constructor(e,n){var t;const s=Np.create((t=n.expanded)!==null&&t!==void 0?t:!0),a=new Zie(e,{foldable:s,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Uw({blade:n.blade,element:a.containerElement,root:n.root,viewProps:n.viewProps}),view:a})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=s,zw(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return ya(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return ba(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}xr({id:"folder",type:"blade",accept(i){const e=ir(i,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(i){return new R3(i.document,{blade:i.blade,expanded:i.params.expanded,props:kn.fromObject({title:i.params.title}),viewProps:i.viewProps})},api(i){return i.controller instanceof R3?new Jie(i.controller,i.pool):null}});const Qie=An("");function D3(i,e){return wh(i,Qie(void 0,e))}class Rp extends kn{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=$ne(Fi(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,t,s;const a=e??{};return new Rp(kn.createCore({disabled:(n=a.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(t=a.hidden)!==null&&t!==void 0?t:!1,parent:(s=a.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Ja(this.globalDisabled_,D3(e,"disabled")),da(this,"hidden",D3(e,"hidden"))}bindDisabled(e){Ja(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Ja(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const t=e.previousRawValue;t==null||t.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const L3=An("tbp");class ere{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(L3()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(L3("c")),this.element.appendChild(t),this.containerElement=t}}const Ed=An("tbi");class tre{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ed()),n.viewProps.bindClassModifiers(this.element),da(n.props,"selected",a=>{a?this.element.classList.add(Ed(void 0,"sel")):this.element.classList.remove(Ed(void 0,"sel"))});const t=e.createElement("button");t.classList.add(Ed("b")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.buttonElement=t;const s=e.createElement("div");s.classList.add(Ed("t")),Ow(n.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class nre{constructor(e,n){this.emitter=new cs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new tre(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Y_ extends Fw{constructor(e,n){const t=new ere(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new Uw({blade:n.blade,element:t.containerElement,viewProps:n.viewProps}),view:t})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new nre(e,{props:n.itemProps,viewProps:Rp.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,da(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(e){return ya(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return ba(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class ire extends Vw{constructor(e,n){super(e,n),this.emitter_=new cs,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",t=>{this.emitter_.emit("change",t)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,t=new Y_(n,{blade:t6(),itemProps:kn.fromObject({selected:!1,title:e.title}),props:kn.fromObject({selected:!1}),viewProps:Rp.create()}),s=this.pool_.createApi(t);return this.rackApi_.add(s,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const t=n.bind(this);return this.emitter_.on(e,s=>{t(s)},{key:n}),this}off(e,n){return this.emitter_.off(e,n),this}onSelect_(e){this.emitter_.emit("select",new _ie(this,e.rawValue))}}class rre extends Vw{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,t){return this.rackApi_.addBinding(e,n,t)}addBlade(e){return this.rackApi_.addBlade(e)}}const B3=-1;class sre{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Fi(!0),this.selectedIndex=Fi(B3),this.items_=[]}add(e,n){const t=n??this.items_.length;this.items_.splice(t,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=B3,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,t)=>{n.rawValue=t===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,t)=>{n.rawValue=t===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(t=>t===e.sender);this.items_.forEach((t,s)=>{t.rawValue=s===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const Md=An("tab");class are{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Md(),n6()),n.viewProps.bindClassModifiers(this.element),Ja(n.empty,wh(this.element,Md(void 0,"nop")));const t=e.createElement("div");t.classList.add(Md("t")),this.element.appendChild(t),this.itemsElement=t;const s=e.createElement("div");s.classList.add(Md("i")),this.element.appendChild(s);const a=e.createElement("div");a.classList.add(Md("c")),this.element.appendChild(a),this.contentsElement=a}}class O3 extends Fw{constructor(e,n){const t=new sre,s=new are(e,{empty:t.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new Uw({blade:n.blade,element:s.contentsElement,viewProps:n.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const a=this.rackController.rack;a.emitter.on("add",this.onRackAdd_),a.emitter.on("remove",this.onRackRemove_),this.tab=t}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;Y5(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;Bw(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}xr({id:"tab",type:"blade",accept(i){const e=ir(i,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(i){const e=new O3(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(n=>{const t=new Y_(i.document,{blade:t6(),itemProps:kn.fromObject({selected:!1,title:n.title}),props:kn.fromObject({selected:!1}),viewProps:Rp.create()});e.add(t)}),e},api(i){return i.controller instanceof O3?new ire(i.controller,i.pool):i.controller instanceof Y_?new rre(i.controller,i.pool):null}});class $w extends Dw{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class Dp{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,t)=>t.constrain(n),e)}}function V0(i,e){if(i instanceof e)return i;if(i instanceof Dp){const n=i.constraints.reduce((t,s)=>t||(s instanceof e?s:null),null);if(n)return n}return null}class Ov{constructor(e){this.values=kn.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(s=>s.value===e).length>0?e:n[0].value}}function Vv(i){var e;const n=q_;if(Array.isArray(i))return(e=ir({items:i},t=>({items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof i=="object")return n.required.raw(i).value}function i6(i){if(Array.isArray(i))return i;const e=[];return Object.keys(i).forEach(n=>{e.push({text:n,value:i[n]})}),e}function Hw(i){return ai(i)?null:new Ov(i6(i))}const ab=An("lst");class ore{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(ab()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("select");t.classList.add(ab("s")),n.viewProps.bindDisabled(t),this.element.appendChild(t),this.selectElement=t;const s=e.createElement("div");s.classList.add(ab("m")),s.appendChild(Bv(e,"dropdown")),this.element.appendChild(s),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,da(this.props_,"options",a=>{J5(this.selectElement),a.forEach(l=>{const c=e.createElement("option");c.textContent=l.text,this.selectElement.appendChild(c)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class hh{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new ore(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return ya(e,null,n=>({options:n.required.custom(Vv)}),n=>(this.props.set("options",i6(n.options)),!0))}exportProps(){return ba(null,{options:this.props.get("options")})}}const V3=An("pop");class lre{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(V3()),n.viewProps.bindClassModifiers(this.element),Ja(n.shows,wh(this.element,V3(void 0,"v")))}}class r6{constructor(e,n){this.shows=Fi(!1),this.viewProps=n.viewProps,this.view=new lre(e,{shows:this.shows,viewProps:this.viewProps})}}const F3=An("txt");class cre{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(F3()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const t=e.createElement("input");t.classList.add(F3("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Gw{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new cre(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget.value,s=this.parser_(t);ai(s)||(this.value.rawValue=s),this.view.refresh()}}function ure(i){return String(i)}function s6(i){return i==="false"?!1:!!i}function U3(i){return ure(i)}function hre(i){return e=>i.reduce((n,t)=>n!==null?n:t(e),null)}const dre=$r(0);function F0(i){return dre(i)+"%"}function a6(i){return String(i)}function J_(i){return i}function Ch({primary:i,secondary:e,forward:n,backward:t}){let s=!1;function a(l){s||(s=!0,l(),s=!1)}i.emitter.on("change",l=>{a(()=>{e.setRawValue(n(i.rawValue,e.rawValue),l.options)})}),e.emitter.on("change",l=>{a(()=>{i.setRawValue(t(i.rawValue,e.rawValue),l.options)}),a(()=>{e.setRawValue(n(i.rawValue,e.rawValue),l.options)})}),a(()=>{e.setRawValue(n(i.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ur(i,e){const n=i*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function cp(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}function so(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}function fre(i){return i==="ArrowUp"||i==="ArrowDown"}function o6(i){return fre(i)||i==="ArrowLeft"||i==="ArrowRight"}function ob(i,e){var n,t;const s=e.ownerDocument.defaultView,a=e.getBoundingClientRect();return{x:i.pageX-(((n=s&&s.scrollX)!==null&&n!==void 0?n:0)+a.left),y:i.pageY-(((t=s&&s.scrollY)!==null&&t!==void 0?t:0)+a.top)}}class Nc{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new cs,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const t=this.elem_.ownerDocument;t.addEventListener("mousemove",this.onDocumentMouseMove_),t.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(ob(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(ob(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(ob(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),t=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-t.left,y:n.clientY-t.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const t=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-s.left,y:t.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const vs=An("txt");class pre{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(vs(),vs(void 0,"num")),n.arrayPosition&&this.element.classList.add(vs(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("input");t.classList.add(vs("i")),t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(vs()),this.inputElement.classList.add(vs("i"));const s=e.createElement("div");s.classList.add(vs("k")),this.element.appendChild(s),this.knobElement=s;const a=e.createElementNS(la,"svg");a.classList.add(vs("g")),this.knobElement.appendChild(a);const l=e.createElementNS(la,"path");l.classList.add(vs("gb")),a.appendChild(l),this.guideBodyElem_=l;const c=e.createElementNS(la,"path");c.classList.add(vs("gh")),a.appendChild(c),this.guideHeadElem_=c;const h=e.createElement("div");h.classList.add(An("tt")()),this.knobElement.appendChild(h),this.tooltipElem_=h,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(vs(void 0,"drg"));return}this.element.classList.add(vs(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),t=n+(n>0?-1:n<0?1:0),s=Pi(-t,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${t+s},0 L${t},4 L${t+s},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const a=this.props_.get("formatter");this.tooltipElem_.textContent=a(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class Lp{constructor(e,n){var t;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(t=n.sliderProps)!==null&&t!==void 0?t:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Fi(null),this.view=new pre(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new Nc(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,t;const s=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),a=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("max");let l=e;return s!==void 0&&(l=Math.max(l,s)),a!==void 0&&(l=Math.min(l,a)),l}onInputChange_(e){const t=e.currentTarget.value,s=this.parser_(t);ai(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(e){const n=Ur(this.props.get("keyScale"),cp(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ur(this.props.get("keyScale"),cp(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const lb=An("sld");class mre{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(lb()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(lb("t")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.trackElement=t;const s=e.createElement("div");s.classList.add(lb("k")),this.trackElement.appendChild(s),this.knobElement=s,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Pi(Nn(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class gre{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new mre(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nc(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Nn(Pi(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ur(this.props.get("keyScale"),so(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Ur(this.props.get("keyScale"),so(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const cb=An("sldtxt");class vre{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(cb());const t=e.createElement("div");t.classList.add(cb("s")),this.sliderView_=n.sliderView,t.appendChild(this.sliderView_.element),this.element.appendChild(t);const s=e.createElement("div");s.classList.add(cb("t")),this.textView_=n.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class z3{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new gre(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new Lp(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new vre(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return ya(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const t=this.sliderC_.props;return t.set("max",n.max),t.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return ba(null,{max:e.get("max"),min:e.get("min")})}}function yre(i){return{sliderProps:new kn({keyScale:i.keyScale,max:i.max,min:i.min}),textProps:new kn({formatter:Fi(i.formatter),keyScale:i.keyScale,pointerScale:Fi(i.pointerScale)})}}const bre={containerUnitSize:"cnt-usz"};function l6(i){return`--${bre[i]}`}function up(i){return q5(i)}function Zo(i){if(K_(i))return ir(i,up)}function Wa(i,e){if(!i)return;const n=[],t=W5(i,e);t&&n.push(t);const s=j5(i);return s&&n.push(s),new Dp(n)}function c6(i){if(i==="inline"||i==="popup")return i}function Bp(i,e){i.write(e)}const Hg=An("ckb");class _re{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Hg()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("label");t.classList.add(Hg("l")),this.element.appendChild(t),this.labelElement=t;const s=e.createElement("input");s.classList.add(Hg("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,n.viewProps.bindDisabled(this.inputElement);const a=e.createElement("div");a.classList.add(Hg("w")),this.labelElement.appendChild(a);const l=Bv(e,"check");a.appendChild(l),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class xre{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new _re(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function wre(i){const e=[],n=Hw(i.options);return n&&e.push(n),new Dp(e)}xr({id:"input-bool",type:"input",accept:(i,e)=>{if(typeof i!="boolean")return null;const n=ir(e,t=>({options:t.optional.custom(Vv),readonly:t.optional.constant(!1)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>s6,constraint:i=>wre(i.params),writer:i=>Bp},controller:i=>{const e=i.document,n=i.value,t=i.constraint,s=t&&V0(t,Ov);return s?new hh(e,{props:new kn({options:s.values.value("options")}),value:n,viewProps:i.viewProps}):new xre(e,{value:n,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="boolean"?null:i.controller.valueController instanceof hh?new $w(i.controller):null}});const Wl=An("col");class Cre{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Wl()),n.foldable.bindExpandedClass(this.element,Wl(void 0,"expanded")),da(n.foldable,"completed",wh(this.element,Wl(void 0,"cpl")));const t=e.createElement("div");t.classList.add(Wl("h")),this.element.appendChild(t);const s=e.createElement("div");s.classList.add(Wl("s")),t.appendChild(s),this.swatchElement=s;const a=e.createElement("div");if(a.classList.add(Wl("t")),t.appendChild(a),this.textElement=a,n.pickerLayout==="inline"){const l=e.createElement("div");l.classList.add(Wl("p")),this.element.appendChild(l),this.pickerElement=l}else this.pickerElement=null}}function Sre(i,e,n){const t=Pi(i/255,0,1),s=Pi(e/255,0,1),a=Pi(n/255,0,1),l=Math.max(t,s,a),c=Math.min(t,s,a),h=l-c;let d=0,p=0;const m=(c+l)/2;return h!==0&&(p=h/(1-Math.abs(l+c-1)),t===l?d=(s-a)/h:s===l?d=2+(a-t)/h:d=4+(t-s)/h,d=d/6+(d<0?1:0)),[d*360,p*100,m*100]}function Ere(i,e,n){const t=(i%360+360)%360,s=Pi(e/100,0,1),a=Pi(n/100,0,1),l=(1-Math.abs(2*a-1))*s,c=l*(1-Math.abs(t/60%2-1)),h=a-l/2;let d,p,m;return t>=0&&t<60?[d,p,m]=[l,c,0]:t>=60&&t<120?[d,p,m]=[c,l,0]:t>=120&&t<180?[d,p,m]=[0,l,c]:t>=180&&t<240?[d,p,m]=[0,c,l]:t>=240&&t<300?[d,p,m]=[c,0,l]:[d,p,m]=[l,0,c],[(d+h)*255,(p+h)*255,(m+h)*255]}function Mre(i,e,n){const t=Pi(i/255,0,1),s=Pi(e/255,0,1),a=Pi(n/255,0,1),l=Math.max(t,s,a),c=Math.min(t,s,a),h=l-c;let d;h===0?d=0:l===t?d=60*(((s-a)/h%6+6)%6):l===s?d=60*((a-t)/h+2):d=60*((t-s)/h+4);const p=l===0?0:h/l,m=l;return[d,p*100,m*100]}function u6(i,e,n){const t=H5(i,360),s=Pi(e/100,0,1),a=Pi(n/100,0,1),l=a*s,c=l*(1-Math.abs(t/60%2-1)),h=a-l;let d,p,m;return t>=0&&t<60?[d,p,m]=[l,c,0]:t>=60&&t<120?[d,p,m]=[c,l,0]:t>=120&&t<180?[d,p,m]=[0,l,c]:t>=180&&t<240?[d,p,m]=[0,c,l]:t>=240&&t<300?[d,p,m]=[c,0,l]:[d,p,m]=[l,0,c],[(d+h)*255,(p+h)*255,(m+h)*255]}function Tre(i,e,n){const t=n+e*(100-Math.abs(2*n-100))/200;return[i,t!==0?e*(100-Math.abs(2*n-100))/t:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function kre(i,e,n){const t=100-Math.abs(n*(200-e)/100-100);return[i,t!==0?e*n/t:0,n*(200-e)/(2*100)]}function fa(i){return[i[0],i[1],i[2]]}function Fv(i,e){return[i[0],i[1],i[2],e]}const Are={hsl:{hsl:(i,e,n)=>[i,e,n],hsv:Tre,rgb:Ere},hsv:{hsl:kre,hsv:(i,e,n)=>[i,e,n],rgb:u6},rgb:{hsl:Sre,hsv:Mre,rgb:(i,e,n)=>[i,e,n]}};function dh(i,e){return[e==="float"?1:i==="rgb"?255:360,e==="float"?1:i==="rgb"?255:100,e==="float"?1:i==="rgb"?255:100]}function Pre(i,e){return i===e?e:H5(i,e)}function h6(i,e,n){var t;const s=dh(e,n);return[e==="rgb"?Pi(i[0],0,s[0]):Pre(i[0],s[0]),Pi(i[1],0,s[1]),Pi(i[2],0,s[2]),Pi((t=i[3])!==null&&t!==void 0?t:1,0,1)]}function $3(i,e,n,t){const s=dh(e,n),a=dh(e,t);return i.map((l,c)=>l/s[c]*a[c])}function d6(i,e,n){const t=$3(i,e.mode,e.type,"int"),s=Are[e.mode][n.mode](...t);return $3(s,n.mode,"int",n.type)}class Mn{static black(){return new Mn([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=h6(e,n,this.type)}getComponents(e){return Fv(d6(fa(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Uo=An("colp");class Ire{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Uo()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(Uo("hsv"));const s=e.createElement("div");s.classList.add(Uo("sv")),this.svPaletteView_=n.svPaletteView,s.appendChild(this.svPaletteView_.element),t.appendChild(s);const a=e.createElement("div");a.classList.add(Uo("h")),this.hPaletteView_=n.hPaletteView,a.appendChild(this.hPaletteView_.element),t.appendChild(a),this.element.appendChild(t);const l=e.createElement("div");if(l.classList.add(Uo("rgb")),this.textsView_=n.textsView,l.appendChild(this.textsView_.element),this.element.appendChild(l),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const c=e.createElement("div");c.classList.add(Uo("a"));const h=e.createElement("div");h.classList.add(Uo("ap")),h.appendChild(this.alphaViews_.palette.element),c.appendChild(h);const d=e.createElement("div");d.classList.add(Uo("at")),d.appendChild(this.alphaViews_.text.element),c.appendChild(d),this.element.appendChild(c)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function Nre(i){return i==="int"?"int":i==="float"?"float":void 0}function Ww(i){return ir(i,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Nre)}),expanded:e.optional.boolean,picker:e.optional.custom(c6),readonly:e.optional.constant(!1)}))}function Sc(i){return i?.1:1}function f6(i){var e;return(e=i.color)===null||e===void 0?void 0:e.type}class jw{constructor(e,n){this.type="float",this.mode=n,this.comps_=h6(e,n,this.type)}getComponents(e){return Fv(d6(fa(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Rre={int:(i,e)=>new Mn(i,e),float:(i,e)=>new jw(i,e)};function Kw(i,e,n){return Rre[n](i,e)}function Dre(i){return i.type==="float"}function Lre(i){return i.type==="int"}function Bre(i){const e=i.getComponents(),n=dh(i.mode,"int");return new Mn([Math.round(Nn(e[0],0,1,0,n[0])),Math.round(Nn(e[1],0,1,0,n[1])),Math.round(Nn(e[2],0,1,0,n[2])),e[3]],i.mode)}function Ore(i){const e=i.getComponents(),n=dh(i.mode,"int");return new jw([Nn(e[0],0,n[0],0,1),Nn(e[1],0,n[1],0,1),Nn(e[2],0,n[2],0,1),e[3]],i.mode)}function vr(i,e){if(i.type===e)return i;if(Lre(i)&&e==="float")return Ore(i);if(Dre(i)&&e==="int")return Bre(i);throw rs.shouldNeverHappen()}function Vre(i,e){return i.alpha===e.alpha&&i.mode===e.mode&&i.notation===e.notation&&i.type===e.type}function ws(i,e){const n=i.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(i),e)}const Fre={deg:i=>i,grad:i=>i*360/400,rad:i=>i*360/(2*Math.PI),turn:i=>i*360};function p6(i){const e=i.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(i);const n=parseFloat(e[1]),t=e[2];return Fre[t](n)}function m6(i){const e=i.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[ws(e[1],255),ws(e[2],255),ws(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ure(i){const e=m6(i);return e?new Mn(e,"rgb"):null}function g6(i){const e=i.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[ws(e[1],255),ws(e[2],255),ws(e[3],255),ws(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function zre(i){const e=g6(i);return e?new Mn(e,"rgb"):null}function v6(i){const e=i.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[p6(e[1]),ws(e[2],100),ws(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function $re(i){const e=v6(i);return e?new Mn(e,"hsl"):null}function y6(i){const e=i.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[p6(e[1]),ws(e[2],100),ws(e[3],100),ws(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Hre(i){const e=y6(i);return e?new Mn(e,"hsl"):null}function b6(i){const e=i.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=i.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Gre(i){const e=b6(i);return e?new Mn(e,"rgb"):null}function _6(i){const e=i.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Nn(parseInt(e[4]+e[4],16),0,255,0,1)];const n=i.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Nn(parseInt(n[4],16),0,255,0,1)]:null}function Wre(i){const e=_6(i);return e?new Mn(e,"rgb"):null}function x6(i){const e=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function jre(i){return e=>{const n=x6(e);return n?Kw(n,"rgb",i):null}}function w6(i){const e=i.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Kre(i){return e=>{const n=w6(e);return n?Kw(n,"rgb",i):null}}const qre=[{parser:b6,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:_6,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:m6,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:g6,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:v6,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:y6,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:x6,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:w6,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Xre(i){return qre.reduce((e,{parser:n,result:t})=>e||(n(i)?t:null),null)}function Yre(i,e="int"){const n=Xre(i);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function Op(i){const e=[Gre,Wre,Ure,zre,$re,Hre];e.push(jre("int"),Kre("int"));const n=hre(e);return t=>{const s=n(t);return s?vr(s,i):null}}function Jre(i){const e=Op("int");if(typeof i!="string")return Mn.black();const n=e(i);return n??Mn.black()}function C6(i){const e=Pi(Math.floor(i),0,255).toString(16);return e.length===1?`0${e}`:e}function qw(i,e="#"){const n=fa(i.getComponents("rgb")).map(C6).join("");return`${e}${n}`}function Xw(i,e="#"){const n=i.getComponents("rgb"),t=[n[0],n[1],n[2],n[3]*255].map(C6).join("");return`${e}${t}`}function S6(i){const e=$r(0),n=vr(i,"int");return`rgb(${fa(n.getComponents("rgb")).map(s=>e(s)).join(", ")})`}function d0(i){const e=$r(2),n=$r(0);return`rgba(${vr(i,"int").getComponents("rgb").map((a,l)=>(l===3?e:n)(a)).join(", ")})`}function Zre(i){const e=[$r(0),F0,F0],n=vr(i,"int");return`hsl(${fa(n.getComponents("hsl")).map((s,a)=>e[a](s)).join(", ")})`}function Qre(i){const e=[$r(0),F0,F0,$r(2)];return`hsla(${vr(i,"int").getComponents("hsl").map((s,a)=>e[a](s)).join(", ")})`}function E6(i,e){const n=$r(e==="float"?2:0),t=["r","g","b"],s=vr(i,e);return`{${fa(s.getComponents("rgb")).map((l,c)=>`${t[c]}: ${n(l)}`).join(", ")}}`}function ese(i){return e=>E6(e,i)}function M6(i,e){const n=$r(2),t=$r(e==="float"?2:0),s=["r","g","b","a"];return`{${vr(i,e).getComponents("rgb").map((c,h)=>{const d=h===3?n:t;return`${s[h]}: ${d(c)}`}).join(", ")}}`}function tse(i){return e=>M6(e,i)}const nse=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:qw},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Xw},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:S6},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:d0},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Zre},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Qre},...["int","float"].reduce((i,e)=>[...i,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:ese(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:tse(e)}],[])];function T6(i){return nse.reduce((e,n)=>e||(Vre(n.format,i)?n.stringifier:null),null)}const Td=An("apl");class ise{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Td()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=e.createElement("div");t.classList.add(Td("b")),this.element.appendChild(t);const s=e.createElement("div");s.classList.add(Td("c")),t.appendChild(s),this.colorElem_=s;const a=e.createElement("div");a.classList.add(Td("m")),this.element.appendChild(a),this.markerElem_=a;const l=e.createElement("div");l.classList.add(Td("p")),this.markerElem_.appendChild(l),this.previewElem_=l,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),t=new Mn([n[0],n[1],n[2],0],"rgb"),s=new Mn([n[0],n[1],n[2],255],"rgb"),a=["to right",d0(t),d0(s)];this.colorElem_.style.background=`linear-gradient(${a.join(",")})`,this.previewElem_.style.backgroundColor=d0(e);const l=Nn(n[3],0,1,0,100);this.markerElem_.style.left=`${l}%`}onValueChange_(){this.update_()}}class rse{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new ise(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nc(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=e.point.x/e.bounds.width,s=this.value.rawValue,[a,l,c]=s.getComponents("hsv");this.value.setRawValue(new Mn([a,l,c,t],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ur(Sc(!0),so(e));if(n===0)return;const t=this.value.rawValue,[s,a,l,c]=t.getComponents("hsv");this.value.setRawValue(new Mn([s,a,l,c+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ur(Sc(!0),so(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const xu=An("coltxt");function sse(i){const e=i.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((t,s)=>{const a=i.createElement("option");return a.textContent=s.text,a.value=s.value,t.appendChild(a),t},i.createDocumentFragment())),e}class ase{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(xu()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(xu("m")),this.modeElem_=sse(e),this.modeElem_.classList.add(xu("ms")),t.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const s=e.createElement("div");s.classList.add(xu("mm")),s.appendChild(Bv(e,"dropdown")),t.appendChild(s),this.element.appendChild(t);const a=e.createElement("div");a.classList.add(xu("w")),this.element.appendChild(a),this.inputsElem_=a,this.inputViews_=n.inputViews,this.applyInputViews_(),Ja(n.mode,l=>{this.modeElem_.value=l})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){J5(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const t=e.createElement("div");t.classList.add(xu("c")),t.appendChild(n.element),this.inputsElem_.appendChild(t)})}}function ose(i){return $r(i==="float"?2:0)}function lse(i,e,n){const t=dh(i,e)[n];return new Dv({min:0,max:t})}function cse(i,e,n){return new Lp(i,{arrayPosition:n===0?"fst":n===2?"lst":"mid",parser:e.parser,props:kn.fromObject({formatter:ose(e.colorType),keyScale:Sc(!1),pointerScale:e.colorType==="float"?.01:1}),value:Fi(0,{constraint:lse(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function use(i,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:ol,viewProps:e.viewProps};return[0,1,2].map(t=>{const s=cse(i,n,t);return Ch({primary:e.value,secondary:s.value,forward(a){return vr(a,e.colorType).getComponents(e.colorMode)[t]},backward(a,l){const c=e.colorMode,d=vr(a,e.colorType).getComponents(c);d[t]=l;const p=Kw(Fv(fa(d),d[3]),c,e.colorType);return vr(p,"int")}}),s})}function hse(i,e){const n=new Gw(i,{parser:Op("int"),props:kn.fromObject({formatter:qw}),value:Fi(Mn.black()),viewProps:e.viewProps});return Ch({primary:e.value,secondary:n.value,forward:t=>new Mn(fa(t.getComponents()),t.mode),backward:(t,s)=>new Mn(Fv(fa(s.getComponents(t.mode)),t.getComponents()[3]),t.mode)}),[n]}function dse(i){return i!=="hex"}class fse{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Fi(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new ase(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return dse(n)?use(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):hse(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(t=>t.view)}}const ub=An("hpl");class pse{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(ub()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=e.createElement("div");t.classList.add(ub("c")),this.element.appendChild(t);const s=e.createElement("div");s.classList.add(ub("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=S6(new Mn([n,100,100],"hsv"));const t=Nn(n,0,360,0,100);this.markerElem_.style.left=`${t}%`}onValueChange_(){this.update_()}}class mse{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new pse(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nc(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=Nn(Pi(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),s=this.value.rawValue,[,a,l,c]=s.getComponents("hsv");this.value.setRawValue(new Mn([t,a,l,c],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ur(Sc(!1),so(e));if(n===0)return;const t=this.value.rawValue,[s,a,l,c]=t.getComponents("hsv");this.value.setRawValue(new Mn([s+n,a,l,c],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ur(Sc(!1),so(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const hb=An("svp"),H3=64;class gse{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(hb()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const t=e.createElement("canvas");t.height=H3,t.width=H3,t.classList.add(hb("c")),this.element.appendChild(t),this.canvasElement=t;const s=e.createElement("div");s.classList.add(hb("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=Tie(this.canvasElement);if(!e)return;const t=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,a=this.canvasElement.height,l=e.getImageData(0,0,s,a),c=l.data;for(let p=0;p<a;p++)for(let m=0;m<s;m++){const v=Nn(m,0,s,0,100),y=Nn(p,0,a,100,0),b=u6(t[0],v,y),S=(p*s+m)*4;c[S]=b[0],c[S+1]=b[1],c[S+2]=b[2],c[S+3]=255}e.putImageData(l,0,0);const h=Nn(t[1],0,100,0,100);this.markerElem_.style.left=`${h}%`;const d=Nn(t[2],0,100,100,0);this.markerElem_.style.top=`${d}%`}onValueChange_(){this.update_()}}class vse{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new gse(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nc(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=Nn(e.point.x,0,e.bounds.width,0,100),s=Nn(e.point.y,0,e.bounds.height,100,0),[a,,,l]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Mn([a,t,s,l],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){o6(e.key)&&e.preventDefault();const[n,t,s,a]=this.value.rawValue.getComponents("hsv"),l=Sc(!1),c=Ur(l,so(e)),h=Ur(l,cp(e));c===0&&h===0||this.value.setRawValue(new Mn([n,t+c,s+h,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Sc(!1),t=Ur(n,so(e)),s=Ur(n,cp(e));t===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class yse{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new mse(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new vse(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new rse(e,{value:this.value,viewProps:this.viewProps}),text:new Lp(e,{parser:ol,props:kn.fromObject({pointerScale:.01,keyScale:.1,formatter:$r(2)}),value:Fi(0,{constraint:new Dv({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Ch({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.getComponents()[3],backward:(t,s)=>{const a=t.getComponents();return a[3]=s,new Mn(a,t.mode)}}),this.textsC_=new fse(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Ire(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const db=An("colsw");class bse{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(db()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(db("sw")),this.element.appendChild(t),this.swatchElem_=t;const s=e.createElement("button");s.classList.add(db("b")),n.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=Xw(e)}onValueChange_(){this.update_()}}class _se{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new bse(e,{value:this.value,viewProps:this.viewProps})}}class Yw{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Np.create(n.expanded),this.swatchC_=new _se(e,{value:this.value,viewProps:this.viewProps});const t=this.swatchC_.view.buttonElement;t.addEventListener("blur",this.onButtonBlur_),t.addEventListener("click",this.onButtonClick_),this.textC_=new Gw(e,{parser:n.parser,props:kn.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Cre(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new r6(e,{viewProps:this.viewProps}):null;const s=new yse(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(a=>{a.addEventListener("blur",this.onPopupChildBlur_),a.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),Ch({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:a=>a,backward:(a,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),zw(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,t=e.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,t=Z5(e);t&&n.contains(t)||t&&t===this.swatchC_.view.buttonElement&&!Lw(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function xse(i){return fa(i.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function wse(i){return i.getComponents("rgb").reduce((e,n,t)=>{const s=Math.floor(t===3?n*255:n)&255;return e<<8|s},0)>>>0}function Cse(i){return new Mn([i>>16&255,i>>8&255,i&255],"rgb")}function Sse(i){return new Mn([i>>24&255,i>>16&255,i>>8&255,Nn(i&255,0,255,0,1)],"rgb")}function Ese(i){return typeof i!="number"?Mn.black():Cse(i)}function Mse(i){return typeof i!="number"?Mn.black():Sse(i)}function f0(i,e){return typeof i!="object"||ai(i)?!1:e in i&&typeof i[e]=="number"}function k6(i){return f0(i,"r")&&f0(i,"g")&&f0(i,"b")}function A6(i){return k6(i)&&f0(i,"a")}function P6(i){return k6(i)}function Jw(i,e){if(i.mode!==e.mode||i.type!==e.type)return!1;const n=i.getComponents(),t=e.getComponents();for(let s=0;s<n.length;s++)if(n[s]!==t[s])return!1;return!0}function G3(i){return"a"in i?[i.r,i.g,i.b,i.a]:[i.r,i.g,i.b]}function Tse(i){const e=T6(i);return e?(n,t)=>{Bp(n,e(t))}:null}function kse(i){const e=i?wse:xse;return(n,t)=>{Bp(n,e(t))}}function Ase(i,e,n){const s=vr(e,n).toRgbaObject();i.writeProperty("r",s.r),i.writeProperty("g",s.g),i.writeProperty("b",s.b),i.writeProperty("a",s.a)}function Pse(i,e,n){const s=vr(e,n).toRgbaObject();i.writeProperty("r",s.r),i.writeProperty("g",s.g),i.writeProperty("b",s.b)}function Ise(i,e){return(n,t)=>{i?Ase(n,t,e):Pse(n,t,e)}}function Nse(i){var e;return!!(!((e=i==null?void 0:i.color)===null||e===void 0)&&e.alpha)}function Rse(i){return i?e=>Xw(e,"0x"):e=>qw(e,"0x")}function Dse(i){return"color"in i||i.view==="color"}xr({id:"input-color-number",type:"input",accept:(i,e)=>{if(typeof i!="number"||!Dse(e))return null;const n=Ww(e);return n?{initialValue:i,params:Object.assign(Object.assign({},n),{supportsAlpha:Nse(e)})}:null},binding:{reader:i=>i.params.supportsAlpha?Mse:Ese,equals:Jw,writer:i=>kse(i.params.supportsAlpha)},controller:i=>{var e,n;return new Yw(i.document,{colorType:"int",expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:Rse(i.params.supportsAlpha),parser:Op("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:i.params.supportsAlpha,value:i.value,viewProps:i.viewProps})}});function Lse(i,e){if(!P6(i))return vr(Mn.black(),e);if(e==="int"){const n=G3(i);return new Mn(n,"rgb")}if(e==="float"){const n=G3(i);return new jw(n,"rgb")}return vr(Mn.black(),"int")}function Bse(i){return A6(i)}function Ose(i){return e=>{const n=Lse(e,i);return vr(n,"int")}}function Vse(i,e){return n=>i?M6(n,e):E6(n,e)}xr({id:"input-color-object",type:"input",accept:(i,e)=>{var n;if(!P6(i))return null;const t=Ww(e);return t?{initialValue:i,params:Object.assign(Object.assign({},t),{colorType:(n=f6(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:i=>Ose(i.params.colorType),equals:Jw,writer:i=>Ise(Bse(i.initialValue),i.params.colorType)},controller:i=>{var e,n;const t=A6(i.initialValue);return new Yw(i.document,{colorType:i.params.colorType,expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:Vse(t,i.params.colorType),parser:Op("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t,value:i.value,viewProps:i.viewProps})}});xr({id:"input-color-string",type:"input",accept:(i,e)=>{if(typeof i!="string"||e.view==="text")return null;const n=Yre(i,f6(e));if(!n)return null;const t=T6(n);if(!t)return null;const s=Ww(e);return s?{initialValue:i,params:Object.assign(Object.assign({},s),{format:n,stringifier:t})}:null},binding:{reader:()=>Jre,equals:Jw,writer:i=>{const e=Tse(i.params.format);if(!e)throw rs.notBindable();return e}},controller:i=>{var e,n;return new Yw(i.document,{colorType:i.params.format.type,expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,formatter:i.params.stringifier,parser:Op("int"),pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:i.params.format.alpha,value:i.value,viewProps:i.viewProps})}});class Zw{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((t,s)=>{var a,l;return(l=(a=this.components[s])===null||a===void 0?void 0:a.constrain(t))!==null&&l!==void 0?l:t});return this.asm_.fromComponents(n)}}const W3=An("pndtxt");class Fse{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(W3()),this.textViews.forEach(t=>{const s=e.createElement("div");s.classList.add(W3("a")),s.appendChild(t.element),this.element.appendChild(s)})}}function Use(i,e,n){return new Lp(i,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Fi(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class Qw{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((t,s)=>Use(e,n,s)),this.acs_.forEach((t,s)=>{Ch({primary:this.value,secondary:t.value,forward:a=>n.assembly.toComponents(a)[s],backward:(a,l)=>{const c=n.assembly.toComponents(a);return c[s]=l,n.assembly.fromComponents(c)}})}),this.view=new Fse(e,{textViews:this.acs_.map(t=>t.view)})}get textControllers(){return this.acs_}}class zse extends Dw{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function $se(i,e){const n=[],t=W5(i,e);t&&n.push(t);const s=j5(i);s&&n.push(s);const a=Hw(i.options);return a&&n.push(a),new Dp(n)}xr({id:"input-number",type:"input",accept:(i,e)=>{if(typeof i!="number")return null;const n=ir(e,t=>Object.assign(Object.assign({},q5(t)),{options:t.optional.custom(Vv),readonly:t.optional.constant(!1)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>$5,constraint:i=>$se(i.params,i.initialValue),writer:i=>Bp},controller:i=>{const e=i.value,n=i.constraint,t=n&&V0(n,Ov);if(t)return new hh(i.document,{props:new kn({options:t.values.value("options")}),value:e,viewProps:i.viewProps});const s=K5(i.params,e.rawValue),a=n&&V0(n,Dv);return a?new z3(i.document,Object.assign(Object.assign({},yre(Object.assign(Object.assign({},s),{keyScale:Fi(s.keyScale),max:a.values.value("max"),min:a.values.value("min")}))),{parser:ol,value:e,viewProps:i.viewProps})):new Lp(i.document,{parser:ol,props:kn.fromObject(s),value:e,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="number"?null:i.controller.valueController instanceof z3?new zse(i.controller):i.controller.valueController instanceof hh?new $w(i.controller):null}});class tl{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(ai(e))return!1;const n=e.x,t=e.y;return!(typeof n!="number"||typeof t!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const I6={toComponents:i=>i.getComponents(),fromComponents:i=>new tl(...i)},wu=An("p2d");class Hse{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(wu()),n.viewProps.bindClassModifiers(this.element),Ja(n.expanded,wh(this.element,wu(void 0,"expanded")));const t=e.createElement("div");t.classList.add(wu("h")),this.element.appendChild(t);const s=e.createElement("button");s.classList.add(wu("b")),s.appendChild(Bv(e,"p2dpad")),n.viewProps.bindDisabled(s),t.appendChild(s),this.buttonElement=s;const a=e.createElement("div");if(a.classList.add(wu("t")),t.appendChild(a),this.textElement=a,n.pickerLayout==="inline"){const l=e.createElement("div");l.classList.add(wu("p")),this.element.appendChild(l),this.pickerElement=l}else this.pickerElement=null}}const zo=An("p2dp");class Gse{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(zo()),n.layout==="popup"&&this.element.classList.add(zo(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("div");t.classList.add(zo("p")),n.viewProps.bindTabIndex(t),this.element.appendChild(t),this.padElement=t;const s=e.createElementNS(la,"svg");s.classList.add(zo("g")),this.padElement.appendChild(s),this.svgElem_=s;const a=e.createElementNS(la,"line");a.classList.add(zo("ax")),a.setAttributeNS(null,"x1","0"),a.setAttributeNS(null,"y1","50%"),a.setAttributeNS(null,"x2","100%"),a.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(a);const l=e.createElementNS(la,"line");l.classList.add(zo("ax")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","0"),l.setAttributeNS(null,"x2","50%"),l.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(l);const c=e.createElementNS(la,"line");c.classList.add(zo("l")),c.setAttributeNS(null,"x1","50%"),c.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(c),this.lineElem_=c;const h=e.createElement("div");h.classList.add(zo("m")),this.padElement.appendChild(h),this.markerElem_=h,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),t=this.props_.get("max"),s=Nn(e,-t,+t,0,100),a=Nn(n,-t,+t,0,100),l=this.props_.get("invertsY")?100-a:a;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${l}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function j3(i,e,n){return[Ur(e[0],so(i)),Ur(e[1],cp(i))*(n?1:-1)]}class Wse{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Gse(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Nc(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const t=this.props.get("max"),s=Nn(e.point.x,0,e.bounds.width,-t,+t),a=Nn(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-t,+t);this.value.setRawValue(new tl(s,a),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){o6(e.key)&&e.preventDefault();const[n,t]=j3(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(new tl(this.value.rawValue.x+n,this.value.rawValue.y+t),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,t]=j3(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&t===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class jse{constructor(e,n){var t,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Np.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new r6(e,{viewProps:this.viewProps}):null;const a=new Wse(e,{layout:n.pickerLayout,props:new kn({invertsY:Fi(n.invertsY),max:Fi(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach(l=>{l.addEventListener("blur",this.onPopupChildBlur_),l.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=a,this.textC_=new Qw(e,{assembly:I6,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Hse(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(t=this.view.buttonElement)===null||t===void 0||t.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Ch({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:l=>l,backward:(l,c)=>c})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),zw(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,t=e.relatedTarget;(!t||!n.contains(t))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,t=Z5(e);t&&n.contains(t)||t&&t===this.view.buttonElement&&!Lw(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function Kse(i){return tl.isObject(i)?new tl(i.x,i.y):new tl}function qse(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y)}function Xse(i,e){return new Zw({assembly:I6,components:[Wa(Object.assign(Object.assign({},i),i.x),e.x),Wa(Object.assign(Object.assign({},i),i.y),e.y)]})}function K3(i,e){var n,t;if(!ai(i.min)||!ai(i.max))return Math.max(Math.abs((n=i.min)!==null&&n!==void 0?n:0),Math.abs((t=i.max)!==null&&t!==void 0?t:0));const s=G5(i);return Math.max(Math.abs(s)*10,Math.abs(e)*10)}function Yse(i,e){var n,t;const s=K3(Cc(i,(n=i.x)!==null&&n!==void 0?n:{}),e.x),a=K3(Cc(i,(t=i.y)!==null&&t!==void 0?t:{}),e.y);return Math.max(s,a)}function Jse(i){if(!("y"in i))return!1;const e=i.y;return e&&"inverted"in e?!!e.inverted:!1}xr({id:"input-point2d",type:"input",accept:(i,e)=>{if(!tl.isObject(i))return null;const n=ir(e,t=>Object.assign(Object.assign({},up(t)),{expanded:t.optional.boolean,picker:t.optional.custom(c6),readonly:t.optional.constant(!1),x:t.optional.custom(Zo),y:t.optional.object(Object.assign(Object.assign({},up(t)),{inverted:t.optional.boolean}))}));return n?{initialValue:i,params:n}:null},binding:{reader:()=>Kse,constraint:i=>Xse(i.params,i.initialValue),equals:tl.equals,writer:()=>qse},controller:i=>{var e,n;const t=i.document,s=i.value,a=i.constraint,l=[i.params.x,i.params.y];return new jse(t,{axes:s.rawValue.getComponents().map((c,h)=>{var d;return Nw({constraint:a.components[h],initialValue:c,params:Cc(i.params,(d=l[h])!==null&&d!==void 0?d:{})})}),expanded:(e=i.params.expanded)!==null&&e!==void 0?e:!1,invertsY:Jse(i.params),max:Yse(i.params,s.rawValue),parser:ol,pickerLayout:(n=i.params.picker)!==null&&n!==void 0?n:"popup",value:s,viewProps:i.viewProps})}});class Gu{constructor(e=0,n=0,t=0){this.x=e,this.y=n,this.z=t}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(ai(e))return!1;const n=e.x,t=e.y,s=e.z;return!(typeof n!="number"||typeof t!="number"||typeof s!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const N6={toComponents:i=>i.getComponents(),fromComponents:i=>new Gu(...i)};function Zse(i){return Gu.isObject(i)?new Gu(i.x,i.y,i.z):new Gu}function Qse(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z)}function eae(i,e){return new Zw({assembly:N6,components:[Wa(Object.assign(Object.assign({},i),i.x),e.x),Wa(Object.assign(Object.assign({},i),i.y),e.y),Wa(Object.assign(Object.assign({},i),i.z),e.z)]})}xr({id:"input-point3d",type:"input",accept:(i,e)=>{if(!Gu.isObject(i))return null;const n=ir(e,t=>Object.assign(Object.assign({},up(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Zo),y:t.optional.custom(Zo),z:t.optional.custom(Zo)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>Zse,constraint:i=>eae(i.params,i.initialValue),equals:Gu.equals,writer:i=>Qse},controller:i=>{const e=i.value,n=i.constraint,t=[i.params.x,i.params.y,i.params.z];return new Qw(i.document,{assembly:N6,axes:e.rawValue.getComponents().map((s,a)=>{var l;return Nw({constraint:n.components[a],initialValue:s,params:Cc(i.params,(l=t[a])!==null&&l!==void 0?l:{})})}),parser:ol,value:e,viewProps:i.viewProps})}});class Wu{constructor(e=0,n=0,t=0,s=0){this.x=e,this.y=n,this.z=t,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(ai(e))return!1;const n=e.x,t=e.y,s=e.z,a=e.w;return!(typeof n!="number"||typeof t!="number"||typeof s!="number"||typeof a!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const R6={toComponents:i=>i.getComponents(),fromComponents:i=>new Wu(...i)};function tae(i){return Wu.isObject(i)?new Wu(i.x,i.y,i.z,i.w):new Wu}function nae(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z),i.writeProperty("w",e.w)}function iae(i,e){return new Zw({assembly:R6,components:[Wa(Object.assign(Object.assign({},i),i.x),e.x),Wa(Object.assign(Object.assign({},i),i.y),e.y),Wa(Object.assign(Object.assign({},i),i.z),e.z),Wa(Object.assign(Object.assign({},i),i.w),e.w)]})}xr({id:"input-point4d",type:"input",accept:(i,e)=>{if(!Wu.isObject(i))return null;const n=ir(e,t=>Object.assign(Object.assign({},up(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Zo),x:t.optional.custom(Zo),y:t.optional.custom(Zo),z:t.optional.custom(Zo)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>tae,constraint:i=>iae(i.params,i.initialValue),equals:Wu.equals,writer:i=>nae},controller:i=>{const e=i.value,n=i.constraint,t=[i.params.x,i.params.y,i.params.z,i.params.w];return new Qw(i.document,{assembly:R6,axes:e.rawValue.getComponents().map((s,a)=>{var l;return Nw({constraint:n.components[a],initialValue:s,params:Cc(i.params,(l=t[a])!==null&&l!==void 0?l:{})})}),parser:ol,value:e,viewProps:i.viewProps})}});function rae(i){const e=[],n=Hw(i.options);return n&&e.push(n),new Dp(e)}xr({id:"input-string",type:"input",accept:(i,e)=>{if(typeof i!="string")return null;const n=ir(e,t=>({readonly:t.optional.constant(!1),options:t.optional.custom(Vv)}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>a6,constraint:i=>rae(i.params),writer:i=>Bp},controller:i=>{const e=i.document,n=i.value,t=i.constraint,s=t&&V0(t,Ov);return s?new hh(e,{props:new kn({options:s.values.value("options")}),value:n,viewProps:i.viewProps}):new Gw(e,{parser:a=>a,props:kn.fromObject({formatter:J_}),value:n,viewProps:i.viewProps})},api(i){return typeof i.controller.value.rawValue!="string"?null:i.controller.valueController instanceof hh?new $w(i.controller):null}});const Uv={monitor:{defaultInterval:200,defaultRows:3}},q3=An("mll");class sae{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(q3()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("textarea");t.classList.add(q3("i")),t.style.height=`calc(var(${l6("containerUnitSize")}) * ${n.rows})`,t.readOnly=!0,n.viewProps.bindDisabled(t),this.element.appendChild(t),this.textareaElem_=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,t=[];this.value.rawValue.forEach(s=>{s!==void 0&&t.push(this.formatter_(s))}),e.textContent=t.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class eC{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new sae(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const X3=An("sgl");class aae{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(X3()),n.viewProps.bindClassModifiers(this.element);const t=e.createElement("input");t.classList.add(X3("i")),t.readOnly=!0,t.type="text",n.viewProps.bindDisabled(t),this.element.appendChild(t),this.inputElement=t,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class tC{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new aae(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}xr({id:"monitor-bool",type:"monitor",accept:(i,e)=>{if(typeof i!="boolean")return null;const n=ir(e,t=>({readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>s6},controller:i=>{var e;return i.value.rawValue.length===1?new tC(i.document,{formatter:U3,value:i.value,viewProps:i.viewProps}):new eC(i.document,{formatter:U3,rows:(e=i.params.rows)!==null&&e!==void 0?e:Uv.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}});class oae extends Dw{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const $o=An("grl");class lae{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add($o()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const t=e.createElementNS(la,"svg");t.classList.add($o("g")),t.style.height=`calc(var(${l6("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(t),this.svgElem_=t;const s=e.createElementNS(la,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const a=e.createElement("div");a.classList.add($o("t"),An("tt")()),this.element.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:n}=this.element,t=this.value.rawValue.length-1,s=this.props_.get("min"),a=this.props_.get("max"),l=[];this.value.rawValue.forEach((m,v)=>{if(m===void 0)return;const y=Nn(v,0,t,0,e),b=Nn(m,s,a,n,0);l.push([y,b].join(","))}),this.lineElem_.setAttributeNS(null,"points",l.join(" "));const c=this.tooltipElem_,h=this.value.rawValue[this.cursor_.rawValue];if(h===void 0){c.classList.remove($o("t","a"));return}const d=Nn(this.cursor_.rawValue,0,t,0,e),p=Nn(h,s,a,n,0);c.style.left=`${d}px`,c.style.top=`${p}px`,c.textContent=`${this.formatter_(h)}`,c.classList.contains($o("t","a"))||(c.classList.add($o("t","a"),$o("t","in")),O0(c),c.classList.remove($o("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class D6{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Fi(-1),this.view=new lae(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Lw(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const t=new Nc(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return ya(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return ba(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:n}=this.view.element;this.cursor_.rawValue=Math.floor(Nn(e.offsetX,0,n,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Nn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Z_(i){return ai(i.format)?$r(2):i.format}function cae(i){var e;return i.value.rawValue.length===1?new tC(i.document,{formatter:Z_(i.params),value:i.value,viewProps:i.viewProps}):new eC(i.document,{formatter:Z_(i.params),rows:(e=i.params.rows)!==null&&e!==void 0?e:Uv.monitor.defaultRows,value:i.value,viewProps:i.viewProps})}function uae(i){var e,n,t;return new D6(i.document,{formatter:Z_(i.params),rows:(e=i.params.rows)!==null&&e!==void 0?e:Uv.monitor.defaultRows,props:kn.fromObject({max:(n=i.params.max)!==null&&n!==void 0?n:100,min:(t=i.params.min)!==null&&t!==void 0?t:0}),value:i.value,viewProps:i.viewProps})}function Y3(i){return i.view==="graph"}xr({id:"monitor-number",type:"monitor",accept:(i,e)=>{if(typeof i!="number")return null;const n=ir(e,t=>({format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}));return n?{initialValue:i,params:n}:null},binding:{defaultBufferSize:i=>Y3(i)?64:1,reader:i=>$5},controller:i=>Y3(i.params)?uae(i):cae(i),api:i=>i.controller.valueController instanceof D6?new oae(i.controller):null});xr({id:"monitor-string",type:"monitor",accept:(i,e)=>{if(typeof i!="string")return null;const n=ir(e,t=>({multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}));return n?{initialValue:i,params:n}:null},binding:{reader:i=>a6},controller:i=>{var e;const n=i.value;return n.rawValue.length>1||i.params.multiline?new eC(i.document,{formatter:J_,rows:(e=i.params.rows)!==null&&e!==void 0?e:Uv.monitor.defaultRows,value:n,viewProps:i.viewProps}):new tC(i.document,{formatter:J_,value:n,viewProps:i.viewProps})}});new e6("4.0.3");const hae=parseInt(gh.replace(/\D+/g,""));var dae=Object.defineProperty,fae=(i,e,n)=>e in i?dae(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,pae=(i,e,n)=>(fae(i,e+"",n),n);async function J3(i){const e=await i.arrayBuffer(),n=btoa(String.fromCharCode(...new Uint8Array(e)));return`data:${i.type||""};base64,${n}`}let Gg,fb,Cu,Wg;function pb(i,e=1/0,n=null){fb||(fb=new fl(2,2,1,1)),Cu||(Cu=new yr({uniforms:{blitTexture:new Iv(i)},vertexShader:`
        varying vec2 vUv;
        void main(){
            vUv = uv;
            gl_Position = vec4(position.xy * 1.0,0.,.999999);
        }
      `,fragmentShader:`
          uniform sampler2D blitTexture; 
          varying vec2 vUv;

          void main(){ 
              gl_FragColor = vec4(vUv.xy, 0, 1);
              
              #ifdef IS_SRGB
              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
              #else
              gl_FragColor = texture2D( blitTexture, vUv);
              #endif
          }
      `})),Cu.uniforms.blitTexture.value=i,Cu.defines.IS_SRGB="colorSpace"in i?i.colorSpace==="srgb":i.encoding===3001,Cu.needsUpdate=!0,Wg||(Wg=new Fn(fb,Cu),Wg.frustrumCulled=!1);const t=new Ln,s=new sh;s.add(Wg),n||(n=Gg=new Af({antialias:!1})),n.setSize(Math.min(i.image.width,e),Math.min(i.image.height,e)),n.clear(),n.render(s,t);const a=new Wn(n.domElement);return a.minFilter=i.minFilter,a.magFilter=i.magFilter,a.wrapS=i.wrapS,a.wrapT=i.wrapT,a.name=i.name,Gg&&(Gg.dispose(),Gg=null),a}const Z3={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class L6{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Sae(e)}),this.register(function(e){return new Eae(e)}),this.register(function(e){return new kae(e)}),this.register(function(e){return new Aae(e)}),this.register(function(e){return new Pae(e)}),this.register(function(e){return new Iae(e)}),this.register(function(e){return new Mae(e)}),this.register(function(e){return new Tae(e)}),this.register(function(e){return new Nae(e)}),this.register(function(e){return new Rae(e)}),this.register(function(e){return new Dae(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,s){const a=new Cae,l=[];for(let c=0,h=this.pluginCallbacks.length;c<h;c++)l.push(this.pluginCallbacks[c](a));a.setPlugins(l),a.write(e,n,s).catch(t)}parseAsync(e,n){const t=this;return new Promise(function(s,a){t.parse(e,s,a,n)})}}pae(L6,"Utils",{insertKeyframe:function(i,e){const n=i.getValueSize(),t=new i.TimeBufferType(i.times.length+1),s=new i.ValueBufferType(i.values.length+n),a=i.createInterpolant(new i.ValueBufferType(n));let l;if(i.times.length===0){t[0]=e;for(let c=0;c<n;c++)s[c]=0;l=0}else if(e<i.times[0]){if(Math.abs(i.times[0]-e)<.001)return 0;t[0]=e,t.set(i.times,1),s.set(a.evaluate(e),0),s.set(i.values,n),l=0}else if(e>i.times[i.times.length-1]){if(Math.abs(i.times[i.times.length-1]-e)<.001)return i.times.length-1;t[t.length-1]=e,t.set(i.times,0),s.set(i.values,0),s.set(a.evaluate(e),i.values.length),l=t.length-1}else for(let c=0;c<i.times.length;c++){if(Math.abs(i.times[c]-e)<.001)return c;if(i.times[c]<e&&i.times[c+1]>e){t.set(i.times.slice(0,c+1),0),t[c+1]=e,t.set(i.times.slice(c+1),c+2),s.set(i.values.slice(0,(c+1)*n),0),s.set(a.evaluate(e),(c+1)*n),s.set(i.values.slice((c+1)*n),(c+2)*n),l=c+1;break}}return i.times=t,i.values=s,l},mergeMorphTargetTracks:function(i,e){const n=[],t={},s=i.tracks;for(let a=0;a<s.length;++a){let l=s[a];const c=sn.parseTrackName(l.name),h=sn.findNode(e,c.nodeName);if(c.propertyName!=="morphTargetInfluences"||c.propertyIndex===void 0){n.push(l);continue}if(l.createInterpolant!==l.InterpolantFactoryMethodDiscrete&&l.createInterpolant!==l.InterpolantFactoryMethodLinear){if(l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),l=l.clone(),l.setInterpolation(nh)}const d=h.morphTargetInfluences.length,p=h.morphTargetDictionary[c.propertyIndex];if(p===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+c.propertyIndex);let m;if(t[h.uuid]===void 0){m=l.clone();const y=new m.ValueBufferType(d*m.times.length);for(let b=0;b<m.times.length;b++)y[b*d+p]=m.values[b];m.name=(c.nodeName||"")+".morphTargetInfluences",m.values=y,t[h.uuid]=m,n.push(m);continue}const v=l.createInterpolant(new l.ValueBufferType(1));m=t[h.uuid];for(let y=0;y<m.times.length;y++)m.values[y*d+p]=v.evaluate(m.times[y]);for(let y=0;y<l.times.length;y++){const b=this.insertKeyframe(m,l.times[y]);m.values[b*d+p]=l.values[y]}}return i.tracks=n,i}});const bn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},mb="KHR_mesh_quantization",ss={};ss[ki]=bn.NEAREST;ss[av]=bn.NEAREST_MIPMAP_NEAREST;ss[ec]=bn.NEAREST_MIPMAP_LINEAR;ss[gi]=bn.LINEAR;ss[$u]=bn.LINEAR_MIPMAP_NEAREST;ss[$s]=bn.LINEAR_MIPMAP_LINEAR;ss[mr]=bn.CLAMP_TO_EDGE;ss[al]=bn.REPEAT;ss[Qu]=bn.MIRRORED_REPEAT;const Q3={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},mae=new Qe,ek=12,gae=1179937895,vae=2,tk=8,yae=1313821514,bae=5130562;function xf(i,e){return i.length===e.length&&i.every(function(n,t){return n===e[t]})}function _ae(i){return new TextEncoder().encode(i).buffer}function xae(i){return xf(i.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function wae(i,e,n){const t={min:new Array(i.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(i.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+n;s++)for(let a=0;a<i.itemSize;a++){let l;i.itemSize>4?l=i.array[s*i.itemSize+a]:(a===0?l=i.getX(s):a===1?l=i.getY(s):a===2?l=i.getZ(s):a===3&&(l=i.getW(s)),i.normalized===!0&&(l=Qi.normalize(l,i.array))),t.min[a]=Math.min(t.min[a],l),t.max[a]=Math.max(t.max[a],l)}return t}function B6(i){return Math.ceil(i/4)*4}function gb(i,e=0){const n=B6(i.byteLength);if(n!==i.byteLength){const t=new Uint8Array(n);if(t.set(new Uint8Array(i)),e!==0)for(let s=i.byteLength;s<n;s++)t[s]=e;return t.buffer}return i}function nk(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function ik(i,e){if(i.toBlob!==void 0)return new Promise(t=>i.toBlob(t,e));let n;return e==="image/jpeg"?n=.92:e==="image/webp"&&(n=.8),i.convertToBlob({type:e,quality:n})}class Cae{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,n,t={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},t),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const s=this,a=s.buffers,l=s.json;t=s.options;const c=s.extensionsUsed,h=s.extensionsRequired,d=new Blob(a,{type:"application/octet-stream"}),p=Object.keys(c),m=Object.keys(h);p.length>0&&(l.extensionsUsed=p),m.length>0&&(l.extensionsRequired=m),l.buffers&&l.buffers.length>0&&(l.buffers[0].byteLength=d.size),t.binary===!0?d.arrayBuffer().then(v=>{const y=gb(v),b=new DataView(new ArrayBuffer(tk));b.setUint32(0,y.byteLength,!0),b.setUint32(4,bae,!0);const S=gb(_ae(JSON.stringify(l)),32),C=new DataView(new ArrayBuffer(tk));C.setUint32(0,S.byteLength,!0),C.setUint32(4,yae,!0);const E=new ArrayBuffer(ek),w=new DataView(E);w.setUint32(0,gae,!0),w.setUint32(4,vae,!0);const x=ek+C.byteLength+S.byteLength+b.byteLength+y.byteLength;w.setUint32(8,x,!0),new Blob([E,C,S,b,y],{type:"application/octet-stream"}).arrayBuffer().then(n)}):l.buffers&&l.buffers.length>0?J3(d).then(v=>{l.buffers[0].uri=v,n(l)}):n(l)}serializeUserData(e,n){if(Object.keys(e.userData).length===0)return;const t=this.options,s=this.extensionsUsed;try{const a=JSON.parse(JSON.stringify(e.userData));if(t.includeCustomExtensions&&a.gltfExtensions){n.extensions===void 0&&(n.extensions={});for(const l in a.gltfExtensions)n.extensions[l]=a.gltfExtensions[l],s[l]=!0;delete a.gltfExtensions}Object.keys(a).length>0&&(n.extras=a)}catch(a){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+a.message)}}getUID(e,n=!1){if(this.uids.has(e)===!1){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(n)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new Q;for(let t=0,s=e.count;t<s;t++)if(Math.abs(n.fromBufferAttribute(e,t).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const n=this.cache;if(n.attributesNormalized.has(e))return n.attributesNormalized.get(e);const t=e.clone(),s=new Q;for(let a=0,l=t.count;a<l;a++)s.fromBufferAttribute(t,a),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),t.setXYZ(a,s.x,s.y,s.z);return n.attributesNormalized.set(e,t),t}applyTextureTransform(e,n){let t=!1;const s={};(n.offset.x!==0||n.offset.y!==0)&&(s.offset=n.offset.toArray(),t=!0),n.rotation!==0&&(s.rotation=n.rotation,t=!0),(n.repeat.x!==1||n.repeat.y!==1)&&(s.scale=n.repeat.toArray(),t=!0),t&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,n){if(e===n)return e;function t(v){return("colorSpace"in v?v.colorSpace==="srgb":v.encoding===3001)?function(y){return y<.04045?y*.0773993808:Math.pow(y*.9478672986+.0521327014,2.4)}:function(y){return y}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof dc&&(e=pb(e)),n instanceof dc&&(n=pb(n));const s=e?e.image:null,a=n?n.image:null,l=Math.max(s?s.width:0,a?a.width:0),c=Math.max(s?s.height:0,a?a.height:0),h=nk();h.width=l,h.height=c;const d=h.getContext("2d");d.fillStyle="#00ffff",d.fillRect(0,0,l,c);const p=d.getImageData(0,0,l,c);if(s){d.drawImage(s,0,0,l,c);const v=t(e),y=d.getImageData(0,0,l,c).data;for(let b=2;b<y.length;b+=4)p.data[b]=v(y[b]/256)*256}if(a){d.drawImage(a,0,0,l,c);const v=t(n),y=d.getImageData(0,0,l,c).data;for(let b=1;b<y.length;b+=4)p.data[b]=v(y[b]/256)*256}d.putImageData(p,0,0);const m=(e||n).clone();return m.source=new Wn(h).source,"colorSpace"in m?m.colorSpace="":m.encoding=3e3,m.channel=(e||n).channel,e&&n&&e.channel!==n.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),m}processBuffer(e){const n=this.json,t=this.buffers;return n.buffers||(n.buffers=[{byteLength:0}]),t.push(e),0}processBufferView(e,n,t,s,a){const l=this.json;l.bufferViews||(l.bufferViews=[]);let c;switch(n){case bn.BYTE:case bn.UNSIGNED_BYTE:c=1;break;case bn.SHORT:case bn.UNSIGNED_SHORT:c=2;break;default:c=4}const h=B6(s*e.itemSize*c),d=new DataView(new ArrayBuffer(h));let p=0;for(let v=t;v<t+s;v++)for(let y=0;y<e.itemSize;y++){let b;e.itemSize>4?b=e.array[v*e.itemSize+y]:(y===0?b=e.getX(v):y===1?b=e.getY(v):y===2?b=e.getZ(v):y===3&&(b=e.getW(v)),e.normalized===!0&&(b=Qi.normalize(b,e.array))),n===bn.FLOAT?d.setFloat32(p,b,!0):n===bn.INT?d.setInt32(p,b,!0):n===bn.UNSIGNED_INT?d.setUint32(p,b,!0):n===bn.SHORT?d.setInt16(p,b,!0):n===bn.UNSIGNED_SHORT?d.setUint16(p,b,!0):n===bn.BYTE?d.setInt8(p,b):n===bn.UNSIGNED_BYTE&&d.setUint8(p,b),p+=c}const m={buffer:this.processBuffer(d.buffer),byteOffset:this.byteOffset,byteLength:h};return a!==void 0&&(m.target=a),a===bn.ARRAY_BUFFER&&(m.byteStride=e.itemSize*c),this.byteOffset+=h,l.bufferViews.push(m),{id:l.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const n=this,t=n.json;return t.bufferViews||(t.bufferViews=[]),e.arrayBuffer().then(s=>{const a=gb(s),l={buffer:n.processBuffer(a),byteOffset:n.byteOffset,byteLength:a.byteLength};return n.byteOffset+=a.byteLength,t.bufferViews.push(l)-1})}processAccessor(e,n,t,s){const a=this.json,l={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let c;if(e.array.constructor===Float32Array)c=bn.FLOAT;else if(e.array.constructor===Int32Array)c=bn.INT;else if(e.array.constructor===Uint32Array)c=bn.UNSIGNED_INT;else if(e.array.constructor===Int16Array)c=bn.SHORT;else if(e.array.constructor===Uint16Array)c=bn.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)c=bn.BYTE;else if(e.array.constructor===Uint8Array)c=bn.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(t===void 0&&(t=0),s===void 0&&(s=e.count),s===0)return null;const h=wae(e,t,s);let d;n!==void 0&&(d=e===n.index?bn.ELEMENT_ARRAY_BUFFER:bn.ARRAY_BUFFER);const p=this.processBufferView(e,c,t,s,d),m={bufferView:p.id,byteOffset:p.byteOffset,componentType:c,count:s,max:h.max,min:h.min,type:l[e.itemSize]};return e.normalized===!0&&(m.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(m)-1}processImage(e,n,t,s="image/png"){if(e!==null){const a=this,l=a.cache,c=a.json,h=a.options,d=a.pending;l.images.has(e)||l.images.set(e,{});const p=l.images.get(e),m=s+":flipY/"+t.toString();if(p[m]!==void 0)return p[m];c.images||(c.images=[]);const v={mimeType:s},y=nk();y.width=Math.min(e.width,h.maxTextureSize),y.height=Math.min(e.height,h.maxTextureSize);const b=y.getContext("2d");if(t===!0&&(b.translate(0,y.height),b.scale(1,-1)),e.data!==void 0){n!==Fr&&console.error("GLTFExporter: Only RGBAFormat is supported.",n),(e.width>h.maxTextureSize||e.height>h.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const C=new Uint8ClampedArray(e.height*e.width*4);for(let E=0;E<C.length;E+=4)C[E+0]=e.data[E+0],C[E+1]=e.data[E+1],C[E+2]=e.data[E+2],C[E+3]=e.data[E+3];b.putImageData(new ImageData(C,e.width,e.height),0,0)}else b.drawImage(e,0,0,y.width,y.height);h.binary===!0?d.push(ik(y,s).then(C=>a.processBufferViewImage(C)).then(C=>{v.bufferView=C})):y.toDataURL!==void 0?v.uri=y.toDataURL(s):d.push(ik(y,s).then(J3).then(C=>{v.uri=C}));const S=c.images.push(v)-1;return p[m]=S,S}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const n=this.json;n.samplers||(n.samplers=[]);const t={magFilter:ss[e.magFilter],minFilter:ss[e.minFilter],wrapS:ss[e.wrapS],wrapT:ss[e.wrapT]};return n.samplers.push(t)-1}processTexture(e){const n=this.options,t=this.cache,s=this.json;if(t.textures.has(e))return t.textures.get(e);s.textures||(s.textures=[]),e instanceof dc&&(e=pb(e,n.maxTextureSize));let a=e.userData.mimeType;a==="image/webp"&&(a="image/png");const l={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,a)};e.name&&(l.name=e.name),this._invokeAll(function(h){h.writeTexture&&h.writeTexture(e,l)});const c=s.textures.push(l)-1;return t.textures.set(e,c),c}processMaterial(e){const n=this.cache,t=this.json;if(n.materials.has(e))return n.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;t.materials||(t.materials=[]);const s={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const a=e.color.toArray().concat([e.opacity]);if(xf(a,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=a),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=.5,s.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const c=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),h={index:this.processTexture(c),channel:c.channel};this.applyTextureTransform(h,c),s.pbrMetallicRoughness.metallicRoughnessTexture=h}if(e.map){const c={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(c,e.map),s.pbrMetallicRoughness.baseColorTexture=c}if(e.emissive){const c=e.emissive;if(Math.max(c.r,c.g,c.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const h={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(h,e.emissiveMap),s.emissiveTexture=h}}if(e.normalMap){const c={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),s.normalTexture=c}if(e.aoMap){const c={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(c.strength=e.aoMapIntensity),this.applyTextureTransform(c,e.aoMap),s.occlusionTexture=c}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===Lr&&(s.doubleSided=!0),e.name!==""&&(s.name=e.name),this.serializeUserData(e,s),this._invokeAll(function(c){c.writeMaterial&&c.writeMaterial(e,s)});const l=t.materials.push(s)-1;return n.materials.set(e,l),l}processMesh(e){const n=this.cache,t=this.json,s=[e.geometry.uuid];if(Array.isArray(e.material))for(let x=0,M=e.material.length;x<M;x++)s.push(e.material[x].uuid);else s.push(e.material.uuid);const a=s.join(":");if(n.meshes.has(a))return n.meshes.get(a);const l=e.geometry;let c;e.isLineSegments?c=bn.LINES:e.isLineLoop?c=bn.LINE_LOOP:e.isLine?c=bn.LINE_STRIP:e.isPoints?c=bn.POINTS:c=e.material.wireframe?bn.LINES:bn.TRIANGLES;const h={},d={},p=[],m=[],v={...hae>=152?{uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3"}:{uv:"TEXCOORD_0",uv2:"TEXCOORD_1"},color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},y=l.getAttribute("normal");y!==void 0&&!this.isNormalizedNormalAttribute(y)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),l.setAttribute("normal",this.createNormalizedNormalAttribute(y)));let b=null;for(let x in l.attributes){if(x.slice(0,5)==="morph")continue;const M=l.attributes[x];if(x=v[x]||x.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(x)||(x="_"+x),n.attributes.has(this.getUID(M))){d[x]=n.attributes.get(this.getUID(M));continue}b=null;const P=M.array;x==="JOINTS_0"&&!(P instanceof Uint16Array)&&!(P instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),b=new wn(new Uint16Array(P),M.itemSize,M.normalized));const I=this.processAccessor(b||M,l);I!==null&&(x.startsWith("_")||this.detectMeshQuantization(x,M),d[x]=I,n.attributes.set(this.getUID(M),I))}if(y!==void 0&&l.setAttribute("normal",y),Object.keys(d).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const x=[],M=[],P={};if(e.morphTargetDictionary!==void 0)for(const I in e.morphTargetDictionary)P[e.morphTargetDictionary[I]]=I;for(let I=0;I<e.morphTargetInfluences.length;++I){const D={};let A=!1;for(const N in l.morphAttributes){if(N!=="position"&&N!=="normal"){A||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),A=!0);continue}const T=l.morphAttributes[N][I],L=N.toUpperCase(),V=l.attributes[N];if(n.attributes.has(this.getUID(T,!0))){D[L]=n.attributes.get(this.getUID(T,!0));continue}const R=T.clone();if(!l.morphTargetsRelative)for(let B=0,F=T.count;B<F;B++)for(let U=0;U<T.itemSize;U++)U===0&&R.setX(B,T.getX(B)-V.getX(B)),U===1&&R.setY(B,T.getY(B)-V.getY(B)),U===2&&R.setZ(B,T.getZ(B)-V.getZ(B)),U===3&&R.setW(B,T.getW(B)-V.getW(B));D[L]=this.processAccessor(R,l),n.attributes.set(this.getUID(V,!0),D[L])}m.push(D),x.push(e.morphTargetInfluences[I]),e.morphTargetDictionary!==void 0&&M.push(P[I])}h.weights=x,M.length>0&&(h.extras={},h.extras.targetNames=M)}const S=Array.isArray(e.material);if(S&&l.groups.length===0)return null;const C=S?e.material:[e.material],E=S?l.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let x=0,M=E.length;x<M;x++){const P={mode:c,attributes:d};if(this.serializeUserData(l,P),m.length>0&&(P.targets=m),l.index!==null){let D=this.getUID(l.index);(E[x].start!==void 0||E[x].count!==void 0)&&(D+=":"+E[x].start+":"+E[x].count),n.attributes.has(D)?P.indices=n.attributes.get(D):(P.indices=this.processAccessor(l.index,l,E[x].start,E[x].count),n.attributes.set(D,P.indices)),P.indices===null&&delete P.indices}const I=this.processMaterial(C[E[x].materialIndex]);I!==null&&(P.material=I),p.push(P)}h.primitives=p,t.meshes||(t.meshes=[]),this._invokeAll(function(x){x.writeMesh&&x.writeMesh(e,h)});const w=t.meshes.push(h)-1;return n.meshes.set(a,w),w}detectMeshQuantization(e,n){if(this.extensionsUsed[mb])return;let t;switch(n.array.constructor){case Int8Array:t="byte";break;case Uint8Array:t="unsigned byte";break;case Int16Array:t="short";break;case Uint16Array:t="unsigned short";break;default:return}n.normalized&&(t+=" normalized");const s=e.split("_",1)[0];Z3[s]&&Z3[s].includes(t)&&(this.extensionsUsed[mb]=!0,this.extensionsRequired[mb]=!0)}processCamera(e){const n=this.json;n.cameras||(n.cameras=[]);const t=e.isOrthographicCamera,s={type:t?"orthographic":"perspective"};return t?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:Qi.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),n.cameras.push(s)-1}processAnimation(e,n){const t=this.json,s=this.nodeMap;t.animations||(t.animations=[]),e=L6.Utils.mergeMorphTargetTracks(e.clone(),n);const a=e.tracks,l=[],c=[];for(let h=0;h<a.length;++h){const d=a[h],p=sn.parseTrackName(d.name);let m=sn.findNode(n,p.nodeName);const v=Q3[p.propertyName];if(p.objectName==="bones"&&(m.isSkinnedMesh===!0?m=m.skeleton.getBoneByName(p.objectIndex):m=void 0),!m||!v)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',d.name),null;const y=1;let b=d.values.length/d.times.length;v===Q3.morphTargetInfluences&&(b/=m.morphTargetInfluences.length);let S;d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(S="CUBICSPLINE",b/=3):d.getInterpolation()===th?S="STEP":S="LINEAR",c.push({input:this.processAccessor(new wn(d.times,y)),output:this.processAccessor(new wn(d.values,b)),interpolation:S}),l.push({sampler:c.length-1,target:{node:s.get(m),path:v}})}return t.animations.push({name:e.name||"clip_"+t.animations.length,samplers:c,channels:l}),t.animations.length-1}processSkin(e){const n=this.json,t=this.nodeMap,s=n.nodes[t.get(e)],a=e.skeleton;if(a===void 0)return null;const l=e.skeleton.bones[0];if(l===void 0)return null;const c=[],h=new Float32Array(a.bones.length*16),d=new ct;for(let p=0;p<a.bones.length;++p)c.push(t.get(a.bones[p])),d.copy(a.boneInverses[p]),d.multiply(e.bindMatrix).toArray(h,p*16);return n.skins===void 0&&(n.skins=[]),n.skins.push({inverseBindMatrices:this.processAccessor(new wn(h,16)),joints:c,skeleton:t.get(l)}),s.skin=n.skins.length-1}processNode(e){const n=this.json,t=this.options,s=this.nodeMap;n.nodes||(n.nodes=[]);const a={};if(t.trs){const c=e.quaternion.toArray(),h=e.position.toArray(),d=e.scale.toArray();xf(c,[0,0,0,1])||(a.rotation=c),xf(h,[0,0,0])||(a.translation=h),xf(d,[1,1,1])||(a.scale=d)}else e.matrixAutoUpdate&&e.updateMatrix(),xae(e.matrix)===!1&&(a.matrix=e.matrix.elements);if(e.name!==""&&(a.name=String(e.name)),this.serializeUserData(e,a),e.isMesh||e.isLine||e.isPoints){const c=this.processMesh(e);c!==null&&(a.mesh=c)}else e.isCamera&&(a.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const c=[];for(let h=0,d=e.children.length;h<d;h++){const p=e.children[h];if(p.visible||t.onlyVisible===!1){const m=this.processNode(p);m!==null&&c.push(m)}}c.length>0&&(a.children=c)}this._invokeAll(function(c){c.writeNode&&c.writeNode(e,a)});const l=n.nodes.push(a)-1;return s.set(e,l),l}processScene(e){const n=this.json,t=this.options;n.scenes||(n.scenes=[],n.scene=0);const s={};e.name!==""&&(s.name=e.name),n.scenes.push(s);const a=[];for(let l=0,c=e.children.length;l<c;l++){const h=e.children[l];if(h.visible||t.onlyVisible===!1){const d=this.processNode(h);d!==null&&a.push(d)}}a.length>0&&(s.nodes=a),this.serializeUserData(e,s)}processObjects(e){const n=new sh;n.name="AuxScene";for(let t=0;t<e.length;t++)n.children.push(e[t]);this.processScene(n)}processInput(e){const n=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(s){s.beforeParse&&s.beforeParse(e)});const t=[];for(let s=0;s<e.length;s++)e[s]instanceof sh?this.processScene(e[s]):t.push(e[s]);t.length>0&&this.processObjects(t);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<n.animations.length;++s)this.processAnimation(n.animations[s],e[0]);this._invokeAll(function(s){s.afterParse&&s.afterParse(e)})}_invokeAll(e){for(let n=0,t=this.plugins.length;n<t;n++)e(this.plugins[n])}}class Sae{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,n){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const t=this.writer,s=t.json,a=t.extensionsUsed,l={};e.name&&(l.name=e.name),l.color=e.color.toArray(),l.intensity=e.intensity,e.isDirectionalLight?l.type="directional":e.isPointLight?(l.type="point",e.distance>0&&(l.range=e.distance)):e.isSpotLight&&(l.type="spot",e.distance>0&&(l.range=e.distance),l.spot={},l.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,l.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),a[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},a[this.name]=!0);const c=s.extensions[this.name].lights;c.push(l),n.extensions=n.extensions||{},n.extensions[this.name]={light:c.length-1}}}let Eae=class{constructor(i){this.writer=i,this.name="KHR_materials_unlit"}writeMaterial(i,e){if(!i.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}},Mae=class{constructor(i){this.writer=i,this.name="KHR_materials_clearcoat"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.clearcoat===0)return;const n=this.writer,t=n.extensionsUsed,s={};if(s.clearcoatFactor=i.clearcoat,i.clearcoatMap){const a={index:n.processTexture(i.clearcoatMap),texCoord:i.clearcoatMap.channel};n.applyTextureTransform(a,i.clearcoatMap),s.clearcoatTexture=a}if(s.clearcoatRoughnessFactor=i.clearcoatRoughness,i.clearcoatRoughnessMap){const a={index:n.processTexture(i.clearcoatRoughnessMap),texCoord:i.clearcoatRoughnessMap.channel};n.applyTextureTransform(a,i.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=a}if(i.clearcoatNormalMap){const a={index:n.processTexture(i.clearcoatNormalMap),texCoord:i.clearcoatNormalMap.channel};n.applyTextureTransform(a,i.clearcoatNormalMap),s.clearcoatNormalTexture=a}e.extensions=e.extensions||{},e.extensions[this.name]=s,t[this.name]=!0}},Tae=class{constructor(i){this.writer=i,this.name="KHR_materials_iridescence"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.iridescence===0)return;const n=this.writer,t=n.extensionsUsed,s={};if(s.iridescenceFactor=i.iridescence,i.iridescenceMap){const a={index:n.processTexture(i.iridescenceMap),texCoord:i.iridescenceMap.channel};n.applyTextureTransform(a,i.iridescenceMap),s.iridescenceTexture=a}if(s.iridescenceIor=i.iridescenceIOR,s.iridescenceThicknessMinimum=i.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=i.iridescenceThicknessRange[1],i.iridescenceThicknessMap){const a={index:n.processTexture(i.iridescenceThicknessMap),texCoord:i.iridescenceThicknessMap.channel};n.applyTextureTransform(a,i.iridescenceThicknessMap),s.iridescenceThicknessTexture=a}e.extensions=e.extensions||{},e.extensions[this.name]=s,t[this.name]=!0}},kae=class{constructor(i){this.writer=i,this.name="KHR_materials_transmission"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.transmission===0)return;const n=this.writer,t=n.extensionsUsed,s={};if(s.transmissionFactor=i.transmission,i.transmissionMap){const a={index:n.processTexture(i.transmissionMap),texCoord:i.transmissionMap.channel};n.applyTextureTransform(a,i.transmissionMap),s.transmissionTexture=a}e.extensions=e.extensions||{},e.extensions[this.name]=s,t[this.name]=!0}},Aae=class{constructor(i){this.writer=i,this.name="KHR_materials_volume"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.transmission===0)return;const n=this.writer,t=n.extensionsUsed,s={};if(s.thicknessFactor=i.thickness,i.thicknessMap){const a={index:n.processTexture(i.thicknessMap),texCoord:i.thicknessMap.channel};n.applyTextureTransform(a,i.thicknessMap),s.thicknessTexture=a}s.attenuationDistance=i.attenuationDistance,s.attenuationColor=i.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,t[this.name]=!0}},Pae=class{constructor(i){this.writer=i,this.name="KHR_materials_ior"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.ior===1.5)return;const n=this.writer.extensionsUsed,t={};t.ior=i.ior,e.extensions=e.extensions||{},e.extensions[this.name]=t,n[this.name]=!0}},Iae=class{constructor(i){this.writer=i,this.name="KHR_materials_specular"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.specularIntensity===1&&i.specularColor.equals(mae)&&!i.specularIntensityMap&&!i.specularColorTexture)return;const n=this.writer,t=n.extensionsUsed,s={};if(i.specularIntensityMap){const a={index:n.processTexture(i.specularIntensityMap),texCoord:i.specularIntensityMap.channel};n.applyTextureTransform(a,i.specularIntensityMap),s.specularTexture=a}if(i.specularColorMap){const a={index:n.processTexture(i.specularColorMap),texCoord:i.specularColorMap.channel};n.applyTextureTransform(a,i.specularColorMap),s.specularColorTexture=a}s.specularFactor=i.specularIntensity,s.specularColorFactor=i.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,t[this.name]=!0}},Nae=class{constructor(i){this.writer=i,this.name="KHR_materials_sheen"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.sheen==0)return;const n=this.writer,t=n.extensionsUsed,s={};if(i.sheenRoughnessMap){const a={index:n.processTexture(i.sheenRoughnessMap),texCoord:i.sheenRoughnessMap.channel};n.applyTextureTransform(a,i.sheenRoughnessMap),s.sheenRoughnessTexture=a}if(i.sheenColorMap){const a={index:n.processTexture(i.sheenColorMap),texCoord:i.sheenColorMap.channel};n.applyTextureTransform(a,i.sheenColorMap),s.sheenColorTexture=a}s.sheenRoughnessFactor=i.sheenRoughness,s.sheenColorFactor=i.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=s,t[this.name]=!0}},Rae=class{constructor(i){this.writer=i,this.name="KHR_materials_anisotropy"}writeMaterial(i,e){if(!i.isMeshPhysicalMaterial||i.anisotropy==0)return;const n=this.writer,t=n.extensionsUsed,s={};if(i.anisotropyMap){const a={index:n.processTexture(i.anisotropyMap)};n.applyTextureTransform(a,i.anisotropyMap),s.anisotropyTexture=a}s.anisotropyStrength=i.anisotropy,s.anisotropyRotation=i.anisotropyRotation,e.extensions=e.extensions||{},e.extensions[this.name]=s,t[this.name]=!0}},Dae=class{constructor(i){this.writer=i,this.name="KHR_materials_emissive_strength"}writeMaterial(i,e){if(!i.isMeshStandardMaterial||i.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,t={};t.emissiveStrength=i.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=t,n[this.name]=!0}};var bs=Uint8Array,pc=Uint16Array,Q_=Uint32Array,O6=new bs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),V6=new bs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lae=new bs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F6=function(i,e){for(var n=new pc(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var s=new Q_(n[30]),t=1;t<30;++t)for(var a=n[t];a<n[t+1];++a)s[a]=a-n[t]<<5|t;return[n,s]},U6=F6(O6,2),z6=U6[0],Bae=U6[1];z6[28]=258,Bae[258]=28;var Oae=F6(V6,0),Vae=Oae[0],$6=new pc(32768);for(var Yn=0;Yn<32768;++Yn){var Ho=(Yn&43690)>>>1|(Yn&21845)<<1;Ho=(Ho&52428)>>>2|(Ho&13107)<<2,Ho=(Ho&61680)>>>4|(Ho&3855)<<4,$6[Yn]=((Ho&65280)>>>8|(Ho&255)<<8)>>>1}var Lf=function(i,e,n){for(var t=i.length,s=0,a=new pc(e);s<t;++s)++a[i[s]-1];var l=new pc(e);for(s=0;s<e;++s)l[s]=l[s-1]+a[s-1]<<1;var c;{c=new pc(1<<e);var h=15-e;for(s=0;s<t;++s)if(i[s])for(var d=s<<4|i[s],p=e-i[s],m=l[i[s]-1]++<<p,v=m|(1<<p)-1;m<=v;++m)c[$6[m]>>>h]=d}return c},Vp=new bs(288);for(var Yn=0;Yn<144;++Yn)Vp[Yn]=8;for(var Yn=144;Yn<256;++Yn)Vp[Yn]=9;for(var Yn=256;Yn<280;++Yn)Vp[Yn]=7;for(var Yn=280;Yn<288;++Yn)Vp[Yn]=8;var H6=new bs(32);for(var Yn=0;Yn<32;++Yn)H6[Yn]=5;var Fae=Lf(Vp,9),Uae=Lf(H6,5),vb=function(i){for(var e=i[0],n=1;n<i.length;++n)i[n]>e&&(e=i[n]);return e},Us=function(i,e,n){var t=e/8|0;return(i[t]|i[t+1]<<8)>>(e&7)&n},yb=function(i,e){var n=e/8|0;return(i[n]|i[n+1]<<8|i[n+2]<<16)>>(e&7)},zae=function(i){return(i/8|0)+(i&7&&1)},$ae=function(i,e,n){(n==null||n>i.length)&&(n=i.length);var t=new(i instanceof pc?pc:i instanceof Q_?Q_:bs)(n-e);return t.set(i.subarray(e,n)),t},Hae=function(i,e,n){var t=i.length;if(!t||n&&!n.l&&t<5)return e||new bs(0);var s=!e||n,a=!n||n.i;n||(n={}),e||(e=new bs(t*3));var l=function(Me){var ee=e.length;if(Me>ee){var re=new bs(Math.max(ee*2,Me));re.set(e),e=re}},c=n.f||0,h=n.p||0,d=n.b||0,p=n.l,m=n.d,v=n.m,y=n.n,b=t*8;do{if(!p){n.f=c=Us(i,h,1);var S=Us(i,h+1,3);if(h+=3,S)if(S==1)p=Fae,m=Uae,v=9,y=5;else if(S==2){var C=Us(i,h,31)+257,E=Us(i,h+10,15)+4,w=C+Us(i,h+5,31)+1;h+=14;for(var x=new bs(w),M=new bs(19),P=0;P<E;++P)M[Lae[P]]=Us(i,h+P*3,7);h+=E*3;for(var I=vb(M),D=(1<<I)-1,A=Lf(M,I),P=0;P<w;){var N=A[Us(i,h,D)];h+=N&15;var T=N>>>4;if(T<16)x[P++]=T;else{var L=0,V=0;for(T==16?(V=3+Us(i,h,3),h+=2,L=x[P-1]):T==17?(V=3+Us(i,h,7),h+=3):T==18&&(V=11+Us(i,h,127),h+=7);V--;)x[P++]=L}}var R=x.subarray(0,C),B=x.subarray(C);v=vb(R),y=vb(B),p=Lf(R,v),m=Lf(B,y)}else throw"invalid block type";else{var T=zae(h)+4,F=i[T-4]|i[T-3]<<8,U=T+F;if(U>t){if(a)throw"unexpected EOF";break}s&&l(d+F),e.set(i.subarray(T,U),d),n.b=d+=F,n.p=h=U*8;continue}if(h>b){if(a)throw"unexpected EOF";break}}s&&l(d+131072);for(var q=(1<<v)-1,Y=(1<<y)-1,ne=h;;ne=h){var L=p[yb(i,h)&q],de=L>>>4;if(h+=L&15,h>b){if(a)throw"unexpected EOF";break}if(!L)throw"invalid length/literal";if(de<256)e[d++]=de;else if(de==256){ne=h,p=null;break}else{var ve=de-254;if(de>264){var P=de-257,Re=O6[P];ve=Us(i,h,(1<<Re)-1)+z6[P],h+=Re}var Ee=m[yb(i,h)&Y],ce=Ee>>>4;if(!Ee)throw"invalid distance";h+=Ee&15;var B=Vae[ce];if(ce>3){var Re=V6[ce];B+=yb(i,h)&(1<<Re)-1,h+=Re}if(h>b){if(a)throw"unexpected EOF";break}s&&l(d+131072);for(var Ce=d+ve;d<Ce;d+=4)e[d]=e[d-B],e[d+1]=e[d+1-B],e[d+2]=e[d+2-B],e[d+3]=e[d+3-B];d=Ce}}n.l=p,n.p=ne,n.b=d,p&&(c=1,n.m=v,n.d=m,n.n=y)}while(!c);return d==e.length?e:$ae(e,0,d)},Gae=new bs(0),Wae=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function jae(i,e){return Hae((Wae(i),i.subarray(2,-4)),e)}var Kae=typeof TextDecoder<"u"&&new TextDecoder,qae=0;try{Kae.decode(Gae,{stream:!0}),qae=1}catch{}new Br;new Q;new Ai(0,0,0,"YXZ");new Q;var Xae=Object.defineProperty,Yae=(i,e,n)=>e in i?Xae(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,Wt=(i,e,n)=>(Yae(i,typeof e!="symbol"?e+"":e,n),n);const jg=new kc,rk=new sa,Jae=Math.cos(70*(Math.PI/180)),sk=(i,e)=>(i%e+e)%e;class Zae extends ma{constructor(e,n){super(),Wt(this,"object"),Wt(this,"domElement"),Wt(this,"enabled",!0),Wt(this,"target",new Q),Wt(this,"minDistance",0),Wt(this,"maxDistance",1/0),Wt(this,"minZoom",0),Wt(this,"maxZoom",1/0),Wt(this,"minPolarAngle",0),Wt(this,"maxPolarAngle",Math.PI),Wt(this,"minAzimuthAngle",-1/0),Wt(this,"maxAzimuthAngle",1/0),Wt(this,"enableDamping",!1),Wt(this,"dampingFactor",.05),Wt(this,"enableZoom",!0),Wt(this,"zoomSpeed",1),Wt(this,"enableRotate",!0),Wt(this,"rotateSpeed",1),Wt(this,"enablePan",!0),Wt(this,"panSpeed",1),Wt(this,"screenSpacePanning",!0),Wt(this,"keyPanSpeed",7),Wt(this,"zoomToCursor",!1),Wt(this,"autoRotate",!1),Wt(this,"autoRotateSpeed",2),Wt(this,"reverseOrbit",!1),Wt(this,"reverseHorizontalOrbit",!1),Wt(this,"reverseVerticalOrbit",!1),Wt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Wt(this,"mouseButtons",{LEFT:ql.ROTATE,MIDDLE:ql.DOLLY,RIGHT:ql.PAN}),Wt(this,"touches",{ONE:Fa.ROTATE,TWO:Fa.DOLLY_PAN}),Wt(this,"target0"),Wt(this,"position0"),Wt(this,"zoom0"),Wt(this,"_domElementKeyEvents",null),Wt(this,"getPolarAngle"),Wt(this,"getAzimuthalAngle"),Wt(this,"setPolarAngle"),Wt(this,"setAzimuthalAngle"),Wt(this,"getDistance"),Wt(this,"listenToKeyEvents"),Wt(this,"stopListenToKeyEvents"),Wt(this,"saveState"),Wt(this,"reset"),Wt(this,"update"),Wt(this,"connect"),Wt(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=we=>{let Oe=sk(we,2*Math.PI),pe=p.phi;pe<0&&(pe+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let Ve=Math.abs(Oe-pe);2*Math.PI-Ve<Ve&&(Oe<pe?Oe+=2*Math.PI:pe+=2*Math.PI),m.phi=Oe-pe,t.update()},this.setAzimuthalAngle=we=>{let Oe=sk(we,2*Math.PI),pe=p.theta;pe<0&&(pe+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let Ve=Math.abs(Oe-pe);2*Math.PI-Ve<Ve&&(Oe<pe?Oe+=2*Math.PI:pe+=2*Math.PI),m.theta=Oe-pe,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=we=>{we.addEventListener("keydown",tt),this._domElementKeyEvents=we},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",tt),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(s),t.update(),h=c.NONE},this.update=(()=>{const we=new Q,Oe=new Q(0,1,0),pe=new wi().setFromUnitVectors(e.up,Oe),Ve=pe.clone().invert(),$e=new Q,Ze=new wi,ot=2*Math.PI;return function(){const hn=t.object.position;pe.setFromUnitVectors(e.up,Oe),Ve.copy(pe).invert(),we.copy(hn).sub(t.target),we.applyQuaternion(pe),p.setFromVector3(we),t.autoRotate&&h===c.NONE&&B(V()),t.enableDamping?(p.theta+=m.theta*t.dampingFactor,p.phi+=m.phi*t.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi);let dn=t.minAzimuthAngle,xn=t.maxAzimuthAngle;isFinite(dn)&&isFinite(xn)&&(dn<-Math.PI?dn+=ot:dn>Math.PI&&(dn-=ot),xn<-Math.PI?xn+=ot:xn>Math.PI&&(xn-=ot),dn<=xn?p.theta=Math.max(dn,Math.min(xn,p.theta)):p.theta=p.theta>(dn+xn)/2?Math.max(dn,p.theta):Math.min(xn,p.theta)),p.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,p.phi)),p.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(y,t.dampingFactor):t.target.add(y),t.zoomToCursor&&N||t.object.isOrthographicCamera?p.radius=Re(p.radius):p.radius=Re(p.radius*v),we.setFromSpherical(p),we.applyQuaternion(Ve),hn.copy(t.target).add(we),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(m.theta*=1-t.dampingFactor,m.phi*=1-t.dampingFactor,y.multiplyScalar(1-t.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let Zn=!1;if(t.zoomToCursor&&N){let an=null;if(t.object instanceof Ln&&t.object.isPerspectiveCamera){const Ri=we.length();an=Re(Ri*v);const ni=Ri-an;t.object.position.addScaledVector(D,ni),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const Ri=new Q(A.x,A.y,0);Ri.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/v)),t.object.updateProjectionMatrix(),Zn=!0;const ni=new Q(A.x,A.y,0);ni.unproject(t.object),t.object.position.sub(ni).add(Ri),t.object.updateMatrixWorld(),an=we.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;an!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(an).add(t.object.position):(jg.origin.copy(t.object.position),jg.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(jg.direction))<Jae?e.lookAt(t.target):(rk.setFromNormalAndCoplanarPoint(t.object.up,t.target),jg.intersectPlane(rk,t.target))))}else t.object instanceof xs&&t.object.isOrthographicCamera&&(Zn=v!==1,Zn&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/v)),t.object.updateProjectionMatrix()));return v=1,N=!1,Zn||$e.distanceToSquared(t.object.position)>d||8*(1-Ze.dot(t.object.quaternion))>d?(t.dispatchEvent(s),$e.copy(t.object.position),Ze.copy(t.object.quaternion),Zn=!1,!0):!1}})(),this.connect=we=>{we===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=we,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",bt),t.domElement.addEventListener("pointerdown",ue),t.domElement.addEventListener("pointercancel",Te),t.domElement.addEventListener("wheel",ze,{passive:!0})},this.dispose=()=>{var we,Oe,pe,Ve,$e,Ze;t.domElement&&(t.domElement.style.touchAction="auto"),(we=t.domElement)==null||we.removeEventListener("contextmenu",bt),(Oe=t.domElement)==null||Oe.removeEventListener("pointerdown",ue),(pe=t.domElement)==null||pe.removeEventListener("pointercancel",Te),(Ve=t.domElement)==null||Ve.removeEventListener("wheel",ze),($e=t.domElement)==null||$e.ownerDocument.removeEventListener("pointermove",he),(Ze=t.domElement)==null||Ze.ownerDocument.removeEventListener("pointerup",xe),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",tt)};const t=this,s={type:"change"},a={type:"start"},l={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=c.NONE;const d=1e-6,p=new $_,m=new $_;let v=1;const y=new Q,b=new Ge,S=new Ge,C=new Ge,E=new Ge,w=new Ge,x=new Ge,M=new Ge,P=new Ge,I=new Ge,D=new Q,A=new Ge;let N=!1;const T=[],L={};function V(){return 2*Math.PI/60/60*t.autoRotateSpeed}function R(){return Math.pow(.95,t.zoomSpeed)}function B(we){t.reverseOrbit||t.reverseHorizontalOrbit?m.theta+=we:m.theta-=we}function F(we){t.reverseOrbit||t.reverseVerticalOrbit?m.phi+=we:m.phi-=we}const U=(()=>{const we=new Q;return function(Oe,pe){we.setFromMatrixColumn(pe,0),we.multiplyScalar(-Oe),y.add(we)}})(),q=(()=>{const we=new Q;return function(Oe,pe){t.screenSpacePanning===!0?we.setFromMatrixColumn(pe,1):(we.setFromMatrixColumn(pe,0),we.crossVectors(t.object.up,we)),we.multiplyScalar(Oe),y.add(we)}})(),Y=(()=>{const we=new Q;return function(Oe,pe){const Ve=t.domElement;if(Ve&&t.object instanceof Ln&&t.object.isPerspectiveCamera){const $e=t.object.position;we.copy($e).sub(t.target);let Ze=we.length();Ze*=Math.tan(t.object.fov/2*Math.PI/180),U(2*Oe*Ze/Ve.clientHeight,t.object.matrix),q(2*pe*Ze/Ve.clientHeight,t.object.matrix)}else Ve&&t.object instanceof xs&&t.object.isOrthographicCamera?(U(Oe*(t.object.right-t.object.left)/t.object.zoom/Ve.clientWidth,t.object.matrix),q(pe*(t.object.top-t.object.bottom)/t.object.zoom/Ve.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function ne(we){t.object instanceof Ln&&t.object.isPerspectiveCamera||t.object instanceof xs&&t.object.isOrthographicCamera?v/=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function de(we){t.object instanceof Ln&&t.object.isPerspectiveCamera||t.object instanceof xs&&t.object.isOrthographicCamera?v*=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function ve(we){if(!t.zoomToCursor||!t.domElement)return;N=!0;const Oe=t.domElement.getBoundingClientRect(),pe=we.clientX-Oe.left,Ve=we.clientY-Oe.top,$e=Oe.width,Ze=Oe.height;A.x=pe/$e*2-1,A.y=-(Ve/Ze)*2+1,D.set(A.x,A.y,1).unproject(t.object).sub(t.object.position).normalize()}function Re(we){return Math.max(t.minDistance,Math.min(t.maxDistance,we))}function Ee(we){b.set(we.clientX,we.clientY)}function ce(we){ve(we),M.set(we.clientX,we.clientY)}function Ce(we){E.set(we.clientX,we.clientY)}function Me(we){S.set(we.clientX,we.clientY),C.subVectors(S,b).multiplyScalar(t.rotateSpeed);const Oe=t.domElement;Oe&&(B(2*Math.PI*C.x/Oe.clientHeight),F(2*Math.PI*C.y/Oe.clientHeight)),b.copy(S),t.update()}function ee(we){P.set(we.clientX,we.clientY),I.subVectors(P,M),I.y>0?ne(R()):I.y<0&&de(R()),M.copy(P),t.update()}function re(we){w.set(we.clientX,we.clientY),x.subVectors(w,E).multiplyScalar(t.panSpeed),Y(x.x,x.y),E.copy(w),t.update()}function H(we){ve(we),we.deltaY<0?de(R()):we.deltaY>0&&ne(R()),t.update()}function $(we){let Oe=!1;switch(we.code){case t.keys.UP:Y(0,t.keyPanSpeed),Oe=!0;break;case t.keys.BOTTOM:Y(0,-t.keyPanSpeed),Oe=!0;break;case t.keys.LEFT:Y(t.keyPanSpeed,0),Oe=!0;break;case t.keys.RIGHT:Y(-t.keyPanSpeed,0),Oe=!0;break}Oe&&(we.preventDefault(),t.update())}function te(){if(T.length==1)b.set(T[0].pageX,T[0].pageY);else{const we=.5*(T[0].pageX+T[1].pageX),Oe=.5*(T[0].pageY+T[1].pageY);b.set(we,Oe)}}function le(){if(T.length==1)E.set(T[0].pageX,T[0].pageY);else{const we=.5*(T[0].pageX+T[1].pageX),Oe=.5*(T[0].pageY+T[1].pageY);E.set(we,Oe)}}function K(){const we=T[0].pageX-T[1].pageX,Oe=T[0].pageY-T[1].pageY,pe=Math.sqrt(we*we+Oe*Oe);M.set(0,pe)}function X(){t.enableZoom&&K(),t.enablePan&&le()}function oe(){t.enableZoom&&K(),t.enableRotate&&te()}function fe(we){if(T.length==1)S.set(we.pageX,we.pageY);else{const pe=Yt(we),Ve=.5*(we.pageX+pe.x),$e=.5*(we.pageY+pe.y);S.set(Ve,$e)}C.subVectors(S,b).multiplyScalar(t.rotateSpeed);const Oe=t.domElement;Oe&&(B(2*Math.PI*C.x/Oe.clientHeight),F(2*Math.PI*C.y/Oe.clientHeight)),b.copy(S)}function be(we){if(T.length==1)w.set(we.pageX,we.pageY);else{const Oe=Yt(we),pe=.5*(we.pageX+Oe.x),Ve=.5*(we.pageY+Oe.y);w.set(pe,Ve)}x.subVectors(w,E).multiplyScalar(t.panSpeed),Y(x.x,x.y),E.copy(w)}function ke(we){const Oe=Yt(we),pe=we.pageX-Oe.x,Ve=we.pageY-Oe.y,$e=Math.sqrt(pe*pe+Ve*Ve);P.set(0,$e),I.set(0,Math.pow(P.y/M.y,t.zoomSpeed)),ne(I.y),M.copy(P)}function J(we){t.enableZoom&&ke(we),t.enablePan&&be(we)}function W(we){t.enableZoom&&ke(we),t.enableRotate&&fe(we)}function ue(we){var Oe,pe;t.enabled!==!1&&(T.length===0&&((Oe=t.domElement)==null||Oe.ownerDocument.addEventListener("pointermove",he),(pe=t.domElement)==null||pe.ownerDocument.addEventListener("pointerup",xe)),_t(we),we.pointerType==="touch"?je(we):He(we))}function he(we){t.enabled!==!1&&(we.pointerType==="touch"?et(we):Be(we))}function xe(we){var Oe,pe,Ve;at(we),T.length===0&&((Oe=t.domElement)==null||Oe.releasePointerCapture(we.pointerId),(pe=t.domElement)==null||pe.ownerDocument.removeEventListener("pointermove",he),(Ve=t.domElement)==null||Ve.ownerDocument.removeEventListener("pointerup",xe)),t.dispatchEvent(l),h=c.NONE}function Te(we){at(we)}function He(we){let Oe;switch(we.button){case 0:Oe=t.mouseButtons.LEFT;break;case 1:Oe=t.mouseButtons.MIDDLE;break;case 2:Oe=t.mouseButtons.RIGHT;break;default:Oe=-1}switch(Oe){case ql.DOLLY:if(t.enableZoom===!1)return;ce(we),h=c.DOLLY;break;case ql.ROTATE:if(we.ctrlKey||we.metaKey||we.shiftKey){if(t.enablePan===!1)return;Ce(we),h=c.PAN}else{if(t.enableRotate===!1)return;Ee(we),h=c.ROTATE}break;case ql.PAN:if(we.ctrlKey||we.metaKey||we.shiftKey){if(t.enableRotate===!1)return;Ee(we),h=c.ROTATE}else{if(t.enablePan===!1)return;Ce(we),h=c.PAN}break;default:h=c.NONE}h!==c.NONE&&t.dispatchEvent(a)}function Be(we){if(t.enabled!==!1)switch(h){case c.ROTATE:if(t.enableRotate===!1)return;Me(we);break;case c.DOLLY:if(t.enableZoom===!1)return;ee(we);break;case c.PAN:if(t.enablePan===!1)return;re(we);break}}function ze(we){t.enabled===!1||t.enableZoom===!1||h!==c.NONE&&h!==c.ROTATE||(t.dispatchEvent(a),H(we),t.dispatchEvent(l))}function tt(we){t.enabled===!1||t.enablePan===!1||$(we)}function je(we){switch(Rt(we),T.length){case 1:switch(t.touches.ONE){case Fa.ROTATE:if(t.enableRotate===!1)return;te(),h=c.TOUCH_ROTATE;break;case Fa.PAN:if(t.enablePan===!1)return;le(),h=c.TOUCH_PAN;break;default:h=c.NONE}break;case 2:switch(t.touches.TWO){case Fa.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;X(),h=c.TOUCH_DOLLY_PAN;break;case Fa.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;oe(),h=c.TOUCH_DOLLY_ROTATE;break;default:h=c.NONE}break;default:h=c.NONE}h!==c.NONE&&t.dispatchEvent(a)}function et(we){switch(Rt(we),h){case c.TOUCH_ROTATE:if(t.enableRotate===!1)return;fe(we),t.update();break;case c.TOUCH_PAN:if(t.enablePan===!1)return;be(we),t.update();break;case c.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;J(we),t.update();break;case c.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;W(we),t.update();break;default:h=c.NONE}}function bt(we){t.enabled!==!1&&we.preventDefault()}function _t(we){T.push(we)}function at(we){delete L[we.pointerId];for(let Oe=0;Oe<T.length;Oe++)if(T[Oe].pointerId==we.pointerId){T.splice(Oe,1);return}}function Rt(we){let Oe=L[we.pointerId];Oe===void 0&&(Oe=new Ge,L[we.pointerId]=Oe),Oe.set(we.pageX,we.pageY)}function Yt(we){const Oe=we.pointerId===T[0].pointerId?T[1]:T[0];return L[Oe.pointerId]}n!==void 0&&this.connect(n),this.update()}}new ct;new Q;function G6(i,e,n){const t=n.length-i-1;if(e>=n[t])return t-1;if(e<=n[i])return i;let s=i,a=t,l=Math.floor((s+a)/2);for(;e<n[l]||e>=n[l+1];)e<n[l]?a=l:s=l,l=Math.floor((s+a)/2);return l}function Qae(i,e,n,t){const s=[],a=[],l=[];s[0]=1;for(let c=1;c<=n;++c){a[c]=e-t[i+1-c],l[c]=t[i+c]-e;let h=0;for(let d=0;d<c;++d){const p=l[d+1],m=a[c-d],v=s[d]/(p+m);s[d]=h+p*v,h=m*v}s[c]=h}return s}function eoe(i,e,n,t){const s=G6(i,t,e),a=Qae(s,t,i,e),l=new ln(0,0,0,0);for(let c=0;c<=i;++c){const h=n[s-i+c],d=a[c],p=h.w*d;l.x+=h.x*p,l.y+=h.y*p,l.z+=h.z*p,l.w+=h.w*d}return l}function toe(i,e,n,t,s){const a=[];for(let m=0;m<=n;++m)a[m]=0;const l=[];for(let m=0;m<=t;++m)l[m]=a.slice(0);const c=[];for(let m=0;m<=n;++m)c[m]=a.slice(0);c[0][0]=1;const h=a.slice(0),d=a.slice(0);for(let m=1;m<=n;++m){h[m]=e-s[i+1-m],d[m]=s[i+m]-e;let v=0;for(let y=0;y<m;++y){const b=d[y+1],S=h[m-y];c[m][y]=b+S;const C=c[y][m-1]/c[m][y];c[y][m]=v+b*C,v=S*C}c[m][m]=v}for(let m=0;m<=n;++m)l[0][m]=c[m][n];for(let m=0;m<=n;++m){let v=0,y=1;const b=[];for(let S=0;S<=n;++S)b[S]=a.slice(0);b[0][0]=1;for(let S=1;S<=t;++S){let C=0;const E=m-S,w=n-S;m>=S&&(b[y][0]=b[v][0]/c[w+1][E],C=b[y][0]*c[E][w]);const x=E>=-1?1:-E,M=m-1<=w?S-1:n-m;for(let I=x;I<=M;++I)b[y][I]=(b[v][I]-b[v][I-1])/c[w+1][E+I],C+=b[y][I]*c[E+I][w];m<=w&&(b[y][S]=-b[v][S-1]/c[w+1][m],C+=b[y][S]*c[m][w]),l[S][m]=C;const P=v;v=y,y=P}}let p=n;for(let m=1;m<=t;++m){for(let v=0;v<=n;++v)l[m][v]*=p;p*=n-m}return l}function noe(i,e,n,t,s){const a=s<i?s:i,l=[],c=G6(i,t,e),h=toe(c,t,i,a,e),d=[];for(let p=0;p<n.length;++p){const m=n[p].clone(),v=m.w;m.x*=v,m.y*=v,m.z*=v,d[p]=m}for(let p=0;p<=a;++p){const m=d[c-i].clone().multiplyScalar(h[p][0]);for(let v=1;v<=i;++v)m.add(d[c-i+v].clone().multiplyScalar(h[p][v]));l[p]=m}for(let p=a+1;p<=s+1;++p)l[p]=new ln(0,0,0);return l}function ioe(i,e){let n=1;for(let s=2;s<=i;++s)n*=s;let t=1;for(let s=2;s<=e;++s)t*=s;for(let s=2;s<=i-e;++s)t*=s;return n/t}function roe(i){const e=i.length,n=[],t=[];for(let a=0;a<e;++a){const l=i[a];n[a]=new Q(l.x,l.y,l.z),t[a]=l.w}const s=[];for(let a=0;a<e;++a){const l=n[a].clone();for(let c=1;c<=a;++c)l.sub(s[a-c].clone().multiplyScalar(ioe(a,c)*t[c]));s[a]=l.divideScalar(t[0])}return s}function soe(i,e,n,t,s){const a=noe(i,e,n,t,s);return roe(a)}class ak extends Es{constructor(e,n,t,s,a){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=a||this.knots.length-1;for(let l=0;l<t.length;++l){const c=t[l];this.controlPoints[l]=new ln(c.x,c.y,c.z,c.w)}}getPoint(e,n){const t=n||new Q,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=eoe(this.degree,this.knots,this.controlPoints,s);return a.w!=1&&a.divideScalar(a.w),t.set(a.x,a.y,a.z)}getTangent(e,n){const t=n||new Q,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=soe(this.degree,this.knots,this.controlPoints,s,1);return t.copy(a[1]).normalize(),t}}let fn,pi,Pr;class aoe extends _r{constructor(e){super(e)}load(e,n,t,s){const a=this,l=a.path===""?uh.extractUrlBase(e):a.path,c=new ha(this.manager);c.setPath(a.path),c.setResponseType("arraybuffer"),c.setRequestHeader(a.requestHeader),c.setWithCredentials(a.withCredentials),c.load(e,function(h){try{n(a.parse(h,l))}catch(d){s?s(d):console.error(d),a.manager.itemError(e)}},t,s)}parse(e,n){if(doe(e))fn=new hoe().parse(e);else{const s=q6(e);if(!foe(s))throw new Error("THREE.FBXLoader: Unknown format.");if(lk(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+lk(s));fn=new uoe().parse(s)}const t=new p5(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new ooe(t,this.manager).parse(fn)}}class ooe{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){pi=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),t=this.parseMaterials(n),s=this.parseDeformers(),a=new loe().parse(s);return this.parseScene(s,a,t),Pr}parseConnections(){const e=new Map;return"Connections"in fn&&fn.Connections.connections.forEach(function(n){const t=n[0],s=n[1],a=n[2];e.has(t)||e.set(t,{parents:[],children:[]});const l={ID:s,relationship:a};e.get(t).parents.push(l),e.has(s)||e.set(s,{parents:[],children:[]});const c={ID:t,relationship:a};e.get(s).children.push(c)}),e}parseImages(){const e={},n={};if("Video"in fn.Objects){const t=fn.Objects.Video;for(const s in t){const a=t[s],l=parseInt(s);if(e[l]=a.RelativeFilename||a.Filename,"Content"in a){const c=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,h=typeof a.Content=="string"&&a.Content!=="";if(c||h){const d=this.parseImage(t[s]);n[a.RelativeFilename||a.Filename]=d}}}}for(const t in e){const s=e[t];n[s]!==void 0?e[t]=n[s]:e[t]=e[t].split("\\").pop()}return e}parseImage(e){const n=e.Content,t=e.RelativeFilename||e.Filename,s=t.slice(t.lastIndexOf(".")+1).toLowerCase();let a;switch(s){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",t),a="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+a+";base64,"+n;{const l=new Uint8Array(n);return window.URL.createObjectURL(new Blob([l],{type:a}))}}parseTextures(e){const n=new Map;if("Texture"in fn.Objects){const t=fn.Objects.Texture;for(const s in t){const a=this.parseTexture(t[s],e);n.set(parseInt(s),a)}}return n}parseTexture(e,n){const t=this.loadTexture(e,n);t.ID=e.id,t.name=e.attrName;const s=e.WrapModeU,a=e.WrapModeV,l=s!==void 0?s.value:0,c=a!==void 0?a.value:0;if(t.wrapS=l===0?al:mr,t.wrapT=c===0?al:mr,"Scaling"in e){const h=e.Scaling.value;t.repeat.x=h[0],t.repeat.y=h[1]}return t}loadTexture(e,n){let t;const s=this.textureLoader.path,a=pi.get(e.id).children;a!==void 0&&a.length>0&&n[a[0].ID]!==void 0&&(t=n[a[0].ID],(t.indexOf("blob:")===0||t.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let l;const c=e.FileName.slice(-3).toLowerCase();if(c==="tga"){const h=this.manager.getHandler(".tga");h===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),l=new Wn):(h.setPath(this.textureLoader.path),l=h.load(t))}else c==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),l=new Wn):l=this.textureLoader.load(t);return this.textureLoader.setPath(s),l}parseMaterials(e){const n=new Map;if("Material"in fn.Objects){const t=fn.Objects.Material;for(const s in t){const a=this.parseMaterial(t[s],e);a!==null&&n.set(parseInt(s),a)}}return n}parseMaterial(e,n){const t=e.id,s=e.attrName;let a=e.ShadingModel;if(typeof a=="object"&&(a=a.value),!pi.has(t))return null;const l=this.parseParameters(e,n,t);let c;switch(a.toLowerCase()){case"phong":c=new Rf;break;case"lambert":c=new dw;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),c=new Rf;break}return c.setValues(l),c.name=s,c}parseParameters(e,n,t){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new Qe().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=new Qe().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new Qe().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=new Qe().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new Qe().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new Qe().fromArray(e.SpecularColor.value));const a=this;return pi.get(t).children.forEach(function(l){const c=l.relationship;switch(c){case"Bump":s.bumpMap=a.getTexture(n,l.ID);break;case"Maya|TEX_ao_map":s.aoMap=a.getTexture(n,l.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=a.getTexture(n,l.ID),s.map!==void 0&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=a.getTexture(n,l.ID);break;case"EmissiveColor":s.emissiveMap=a.getTexture(n,l.ID),s.emissiveMap!==void 0&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=a.getTexture(n,l.ID);break;case"ReflectionColor":s.envMap=a.getTexture(n,l.ID),s.envMap!==void 0&&(s.envMap.mapping=Zu,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=a.getTexture(n,l.ID),s.specularMap!==void 0&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=a.getTexture(n,l.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",c);break}}),s}getTexture(e,n){return"LayeredTexture"in fn.Objects&&n in fn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=pi.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in fn.Objects){const t=fn.Objects.Deformer;for(const s in t){const a=t[s],l=pi.get(parseInt(s));if(a.attrType==="Skin"){const c=this.parseSkeleton(l,t);c.ID=s,l.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=l.parents[0].ID,e[s]=c}else if(a.attrType==="BlendShape"){const c={id:s};c.rawTargets=this.parseMorphTargets(l,t),c.id=s,l.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=c}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const t=[];return e.children.forEach(function(s){const a=n[s.ID];if(a.attrType!=="Cluster")return;const l={ID:s.ID,indices:[],weights:[],transformLink:new ct().fromArray(a.TransformLink.a)};"Indexes"in a&&(l.indices=a.Indexes.a,l.weights=a.Weights.a),t.push(l)}),{rawBones:t,bones:[]}}parseMorphTargets(e,n){const t=[];for(let s=0;s<e.children.length;s++){const a=e.children[s],l=n[a.ID],c={name:l.attrName,initialWeight:l.DeformPercent,id:l.id,fullWeights:l.FullWeights.a};if(l.attrType!=="BlendShapeChannel")return;c.geoID=pi.get(parseInt(a.ID)).children.filter(function(h){return h.relationship===void 0})[0].ID,t.push(c)}return t}parseScene(e,n,t){Pr=new Ha;const s=this.parseModels(e.skeletons,n,t),a=fn.Objects.Model,l=this;s.forEach(function(h){const d=a[h.ID];l.setLookAtProperties(h,d),pi.get(h.ID).parents.forEach(function(p){const m=s.get(p.ID);m!==void 0&&m.add(h)}),h.parent===null&&Pr.add(h)}),this.bindSkeleton(e.skeletons,n,s),this.createAmbientLight(),Pr.traverse(function(h){if(h.userData.transformData){h.parent&&(h.userData.transformData.parentMatrix=h.parent.matrix,h.userData.transformData.parentMatrixWorld=h.parent.matrixWorld);const d=j6(h.userData.transformData);h.applyMatrix4(d),h.updateWorldMatrix()}});const c=new coe().parse();Pr.children.length===1&&Pr.children[0].isGroup&&(Pr.children[0].animations=c,Pr=Pr.children[0]),Pr.animations=c}parseModels(e,n,t){const s=new Map,a=fn.Objects.Model;for(const l in a){const c=parseInt(l),h=a[l],d=pi.get(c);let p=this.buildSkeleton(d,e,c,h.attrName);if(!p){switch(h.attrType){case"Camera":p=this.createCamera(d);break;case"Light":p=this.createLight(d);break;case"Mesh":p=this.createMesh(d,n,t);break;case"NurbsCurve":p=this.createCurve(d,n);break;case"LimbNode":case"Root":p=new Qf;break;case"Null":default:p=new Ha;break}p.name=h.attrName?sn.sanitizeNodeName(h.attrName):"",p.ID=c}this.getTransformData(p,h),s.set(c,p)}return s}buildSkeleton(e,n,t,s){let a=null;return e.parents.forEach(function(l){for(const c in n){const h=n[c];h.rawBones.forEach(function(d,p){if(d.ID===l.ID){const m=a;a=new Qf,a.matrixWorld.copy(d.transformLink),a.name=s?sn.sanitizeNodeName(s):"",a.ID=t,h.bones[p]=a,m!==null&&a.add(m)}})}}),a}createCamera(e){let n,t;if(e.children.forEach(function(s){const a=fn.Objects.NodeAttribute[s.ID];a!==void 0&&(t=a)}),t===void 0)n=new _n;else{let s=0;t.CameraProjectionType!==void 0&&t.CameraProjectionType.value===1&&(s=1);let a=1;t.NearPlane!==void 0&&(a=t.NearPlane.value/1e3);let l=1e3;t.FarPlane!==void 0&&(l=t.FarPlane.value/1e3);let c=window.innerWidth,h=window.innerHeight;t.AspectWidth!==void 0&&t.AspectHeight!==void 0&&(c=t.AspectWidth.value,h=t.AspectHeight.value);const d=c/h;let p=45;t.FieldOfView!==void 0&&(p=t.FieldOfView.value);const m=t.FocalLength?t.FocalLength.value:null;switch(s){case 0:n=new Ln(p,d,a,l),m!==null&&n.setFocalLength(m);break;case 1:n=new xs(-c/2,c/2,h/2,-h/2,a,l);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new _n;break}}return n}createLight(e){let n,t;if(e.children.forEach(function(s){const a=fn.Objects.NodeAttribute[s.ID];a!==void 0&&(t=a)}),t===void 0)n=new _n;else{let s;t.LightType===void 0?s=0:s=t.LightType.value;let a=16777215;t.Color!==void 0&&(a=new Qe().fromArray(t.Color.value));let l=t.Intensity===void 0?1:t.Intensity.value/100;t.CastLightOnObject!==void 0&&t.CastLightOnObject.value===0&&(l=0);let c=0;t.FarAttenuationEnd!==void 0&&(t.EnableFarAttenuation!==void 0&&t.EnableFarAttenuation.value===0?c=0:c=t.FarAttenuationEnd.value);const h=1;switch(s){case 0:n=new L0(a,l,c,h);break;case 1:n=new yw(a,l);break;case 2:let d=Math.PI/3;t.InnerAngle!==void 0&&(d=Qi.degToRad(t.InnerAngle.value));let p=0;t.OuterAngle!==void 0&&(p=Qi.degToRad(t.OuterAngle.value),p=Math.max(p,1)),n=new Av(a,l,c,d,p,h);break;default:console.warn("THREE.FBXLoader: Unknown light type "+t.LightType.value+", defaulting to a PointLight."),n=new L0(a,l);break}t.CastShadows!==void 0&&t.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,t){let s,a=null,l=null;const c=[];return e.children.forEach(function(h){n.has(h.ID)&&(a=n.get(h.ID)),t.has(h.ID)&&c.push(t.get(h.ID))}),c.length>1?l=c:c.length>0?l=c[0]:(l=new Rf({color:13421772}),c.push(l)),"color"in a.attributes&&c.forEach(function(h){h.vertexColors=!0}),a.FBX_Deformer?(s=new iw(a,l),s.normalizeSkinWeights()):s=new Fn(a,l),s}createCurve(e,n){const t=e.children.reduce(function(a,l){return n.has(l.ID)&&(a=n.get(l.ID)),a},null),s=new nr({color:3342591,linewidth:1});return new io(t,s)}getTransformData(e,n){const t={};"InheritType"in n&&(t.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?t.eulerOrder=K6(n.RotationOrder.value):t.eulerOrder="ZYX","Lcl_Translation"in n&&(t.translation=n.Lcl_Translation.value),"PreRotation"in n&&(t.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(t.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(t.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(t.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(t.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(t.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(t.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(t.rotationPivot=n.RotationPivot.value),e.userData.transformData=t}setLookAtProperties(e,n){"LookAtProperty"in n&&pi.get(e.ID).children.forEach(function(t){if(t.relationship==="LookAtProperty"){const s=fn.Objects.Model[t.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),Pr.add(e.target)):e.lookAt(new Q().fromArray(a))}}})}bindSkeleton(e,n,t){const s=this.parsePoseNodes();for(const a in e){const l=e[a];pi.get(parseInt(l.ID)).parents.forEach(function(c){if(n.has(c.ID)){const h=c.ID;pi.get(h).parents.forEach(function(d){t.has(d.ID)&&t.get(d.ID).bind(new Mp(l.bones),s[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in fn.Objects){const n=fn.Objects.Pose;for(const t in n)if(n[t].attrType==="BindPose"&&n[t].NbPoseNodes>0){const s=n[t].PoseNode;Array.isArray(s)?s.forEach(function(a){e[a.Node]=new ct().fromArray(a.Matrix.a)}):e[s.Node]=new ct().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in fn&&"AmbientColor"in fn.GlobalSettings){const e=fn.GlobalSettings.AmbientColor.value,n=e[0],t=e[1],s=e[2];if(n!==0||t!==0||s!==0){const a=new Qe(n,t,s);Pr.add(new bw(a,1))}}}}class loe{parse(e){const n=new Map;if("Geometry"in fn.Objects){const t=fn.Objects.Geometry;for(const s in t){const a=pi.get(parseInt(s)),l=this.parseGeometry(a,t[s],e);n.set(parseInt(s),l)}}return n}parseGeometry(e,n,t){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,t);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,t){const s=t.skeletons,a=[],l=e.parents.map(function(m){return fn.Objects.Model[m.ID]});if(l.length===0)return;const c=e.children.reduce(function(m,v){return s[v.ID]!==void 0&&(m=s[v.ID]),m},null);e.children.forEach(function(m){t.morphTargets[m.ID]!==void 0&&a.push(t.morphTargets[m.ID])});const h=l[0],d={};"RotationOrder"in h&&(d.eulerOrder=K6(h.RotationOrder.value)),"InheritType"in h&&(d.inheritType=parseInt(h.InheritType.value)),"GeometricTranslation"in h&&(d.translation=h.GeometricTranslation.value),"GeometricRotation"in h&&(d.rotation=h.GeometricRotation.value),"GeometricScaling"in h&&(d.scale=h.GeometricScaling.value);const p=j6(d);return this.genGeometry(n,c,a,p)}genGeometry(e,n,t,s){const a=new Xt;e.attrName&&(a.name=e.attrName);const l=this.parseGeoNode(e,n),c=this.genBuffers(l),h=new yt(c.vertex,3);if(h.applyMatrix4(s),a.setAttribute("position",h),c.colors.length>0&&a.setAttribute("color",new yt(c.colors,3)),n&&(a.setAttribute("skinIndex",new hv(c.weightsIndices,4)),a.setAttribute("skinWeight",new yt(c.vertexWeights,4)),a.FBX_Deformer=n),c.normal.length>0){const d=new Qt().getNormalMatrix(s),p=new yt(c.normal,3);p.applyNormalMatrix(d),a.setAttribute("normal",p)}if(c.uvs.forEach(function(d,p){let m="uv"+(p+1).toString();p===0&&(m="uv"),a.setAttribute(m,new yt(c.uvs[p],2))}),l.material&&l.material.mappingType!=="AllSame"){let d=c.materialIndex[0],p=0;if(c.materialIndex.forEach(function(m,v){m!==d&&(a.addGroup(p,v-p,d),d=m,p=v)}),a.groups.length>0){const m=a.groups[a.groups.length-1],v=m.start+m.count;v!==c.materialIndex.length&&a.addGroup(v,c.materialIndex.length-v,d)}a.groups.length===0&&a.addGroup(0,c.materialIndex.length,c.materialIndex[0])}return this.addMorphTargets(a,e,t,s),a}parseGeoNode(e,n){const t={};if(t.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],t.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(t.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(t.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(t.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){t.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&t.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return t.weightTable={},n!==null&&(t.skeleton=n,n.rawBones.forEach(function(s,a){s.indices.forEach(function(l,c){t.weightTable[l]===void 0&&(t.weightTable[l]=[]),t.weightTable[l].push({id:a,weight:s.weights[c]})})})),t}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let t=0,s=0,a=!1,l=[],c=[],h=[],d=[],p=[],m=[];const v=this;return e.vertexIndices.forEach(function(y,b){let S,C=!1;y<0&&(y=y^-1,C=!0);let E=[],w=[];if(l.push(y*3,y*3+1,y*3+2),e.color){const x=Kg(b,t,y,e.color);h.push(x[0],x[1],x[2])}if(e.skeleton){if(e.weightTable[y]!==void 0&&e.weightTable[y].forEach(function(x){w.push(x.weight),E.push(x.id)}),w.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);const x=[0,0,0,0],M=[0,0,0,0];w.forEach(function(P,I){let D=P,A=E[I];M.forEach(function(N,T,L){if(D>N){L[T]=D,D=N;const V=x[T];x[T]=A,A=V}})}),E=x,w=M}for(;w.length<4;)w.push(0),E.push(0);for(let x=0;x<4;++x)p.push(w[x]),m.push(E[x])}if(e.normal){const x=Kg(b,t,y,e.normal);c.push(x[0],x[1],x[2])}e.material&&e.material.mappingType!=="AllSame"&&(S=Kg(b,t,y,e.material)[0]),e.uv&&e.uv.forEach(function(x,M){const P=Kg(b,t,y,x);d[M]===void 0&&(d[M]=[]),d[M].push(P[0]),d[M].push(P[1])}),s++,C&&(v.genFace(n,e,l,S,c,h,d,p,m,s),t++,s=0,l=[],c=[],h=[],d=[],p=[],m=[])}),n}genFace(e,n,t,s,a,l,c,h,d,p){for(let m=2;m<p;m++)e.vertex.push(n.vertexPositions[t[0]]),e.vertex.push(n.vertexPositions[t[1]]),e.vertex.push(n.vertexPositions[t[2]]),e.vertex.push(n.vertexPositions[t[(m-1)*3]]),e.vertex.push(n.vertexPositions[t[(m-1)*3+1]]),e.vertex.push(n.vertexPositions[t[(m-1)*3+2]]),e.vertex.push(n.vertexPositions[t[m*3]]),e.vertex.push(n.vertexPositions[t[m*3+1]]),e.vertex.push(n.vertexPositions[t[m*3+2]]),n.skeleton&&(e.vertexWeights.push(h[0]),e.vertexWeights.push(h[1]),e.vertexWeights.push(h[2]),e.vertexWeights.push(h[3]),e.vertexWeights.push(h[(m-1)*4]),e.vertexWeights.push(h[(m-1)*4+1]),e.vertexWeights.push(h[(m-1)*4+2]),e.vertexWeights.push(h[(m-1)*4+3]),e.vertexWeights.push(h[m*4]),e.vertexWeights.push(h[m*4+1]),e.vertexWeights.push(h[m*4+2]),e.vertexWeights.push(h[m*4+3]),e.weightsIndices.push(d[0]),e.weightsIndices.push(d[1]),e.weightsIndices.push(d[2]),e.weightsIndices.push(d[3]),e.weightsIndices.push(d[(m-1)*4]),e.weightsIndices.push(d[(m-1)*4+1]),e.weightsIndices.push(d[(m-1)*4+2]),e.weightsIndices.push(d[(m-1)*4+3]),e.weightsIndices.push(d[m*4]),e.weightsIndices.push(d[m*4+1]),e.weightsIndices.push(d[m*4+2]),e.weightsIndices.push(d[m*4+3])),n.color&&(e.colors.push(l[0]),e.colors.push(l[1]),e.colors.push(l[2]),e.colors.push(l[(m-1)*3]),e.colors.push(l[(m-1)*3+1]),e.colors.push(l[(m-1)*3+2]),e.colors.push(l[m*3]),e.colors.push(l[m*3+1]),e.colors.push(l[m*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),n.normal&&(e.normal.push(a[0]),e.normal.push(a[1]),e.normal.push(a[2]),e.normal.push(a[(m-1)*3]),e.normal.push(a[(m-1)*3+1]),e.normal.push(a[(m-1)*3+2]),e.normal.push(a[m*3]),e.normal.push(a[m*3+1]),e.normal.push(a[m*3+2])),n.uv&&n.uv.forEach(function(v,y){e.uvs[y]===void 0&&(e.uvs[y]=[]),e.uvs[y].push(c[y][0]),e.uvs[y].push(c[y][1]),e.uvs[y].push(c[y][(m-1)*2]),e.uvs[y].push(c[y][(m-1)*2+1]),e.uvs[y].push(c[y][m*2]),e.uvs[y].push(c[y][m*2+1])})}addMorphTargets(e,n,t,s){if(t.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const a=this;t.forEach(function(l){l.rawTargets.forEach(function(c){const h=fn.Objects.Geometry[c.geoID];h!==void 0&&a.genMorphGeometry(e,n,h,s,c.name)})})}genMorphGeometry(e,n,t,s,a){const l=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],c=t.Vertices!==void 0?t.Vertices.a:[],h=t.Indexes!==void 0?t.Indexes.a:[],d=e.attributes.position.count*3,p=new Float32Array(d);for(let b=0;b<h.length;b++){const S=h[b]*3;p[S]=c[b*3],p[S+1]=c[b*3+1],p[S+2]=c[b*3+2]}const m={vertexIndices:l,vertexPositions:p},v=this.genBuffers(m),y=new yt(v.vertex,3);y.name=a||t.attrName,y.applyMatrix4(s),e.morphAttributes.position.push(y)}parseNormals(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.Normals.a;let a=[];return t==="IndexToDirect"&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:a,mappingType:n,referenceType:t}}parseUVs(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.UV.a;let a=[];return t==="IndexToDirect"&&(a=e.UVIndex.a),{dataSize:2,buffer:s,indices:a,mappingType:n,referenceType:t}}parseVertexColors(e){const n=e.MappingInformationType,t=e.ReferenceInformationType,s=e.Colors.a;let a=[];return t==="IndexToDirect"&&(a=e.ColorIndex.a),{dataSize:4,buffer:s,indices:a,mappingType:n,referenceType:t}}parseMaterialIndices(e){const n=e.MappingInformationType,t=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:t};const s=e.Materials.a,a=[];for(let l=0;l<s.length;++l)a.push(l);return{dataSize:1,buffer:s,indices:a,mappingType:n,referenceType:t}}parseNurbsGeometry(e){if(ak===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Xt;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Xt;const t=n-1,s=e.KnotVector.a,a=[],l=e.Points.a;for(let p=0,m=l.length;p<m;p+=4)a.push(new ln().fromArray(l,p));let c,h;if(e.Form==="Closed")a.push(a[0]);else if(e.Form==="Periodic"){c=t,h=s.length-1-c;for(let p=0;p<t;++p)a.push(a[p])}const d=new ak(t,s,a,c,h).getPoints(a.length*12);return new Xt().setFromPoints(d)}}class coe{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const t in n){const s=n[t],a=this.addClip(s);e.push(a)}return e}parseClips(){if(fn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=fn.Objects.AnimationCurveNode,n=new Map;for(const t in e){const s=e[t];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const a={id:s.id,attr:s.attrName,curves:{}};n.set(a.id,a)}}return n}parseAnimationCurves(e){const n=fn.Objects.AnimationCurve;for(const t in n){const s={id:n[t].id,times:n[t].KeyTime.a.map(poe),values:n[t].KeyValueFloat.a},a=pi.get(s.id);if(a!==void 0){const l=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?e.get(l).curves.x=s:c.match(/Y/)?e.get(l).curves.y=s:c.match(/Z/)?e.get(l).curves.z=s:c.match(/d|DeformPercent/)&&e.has(l)&&(e.get(l).curves.morph=s)}}}parseAnimationLayers(e){const n=fn.Objects.AnimationLayer,t=new Map;for(const s in n){const a=[],l=pi.get(parseInt(s));l!==void 0&&(l.children.forEach(function(c,h){if(e.has(c.ID)){const d=e.get(c.ID);if(d.curves.x!==void 0||d.curves.y!==void 0||d.curves.z!==void 0){if(a[h]===void 0){const p=pi.get(c.ID).parents.filter(function(m){return m.relationship!==void 0})[0].ID;if(p!==void 0){const m=fn.Objects.Model[p.toString()];if(m===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",c);return}const v={modelName:m.attrName?sn.sanitizeNodeName(m.attrName):"",ID:m.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Pr.traverse(function(y){y.ID===m.id&&(v.transform=y.matrix,y.userData.transformData&&(v.eulerOrder=y.userData.transformData.eulerOrder))}),v.transform||(v.transform=new ct),"PreRotation"in m&&(v.preRotation=m.PreRotation.value),"PostRotation"in m&&(v.postRotation=m.PostRotation.value),a[h]=v}}a[h]&&(a[h][d.attr]=d)}else if(d.curves.morph!==void 0){if(a[h]===void 0){const p=pi.get(c.ID).parents.filter(function(C){return C.relationship!==void 0})[0].ID,m=pi.get(p).parents[0].ID,v=pi.get(m).parents[0].ID,y=pi.get(v).parents[0].ID,b=fn.Objects.Model[y],S={modelName:b.attrName?sn.sanitizeNodeName(b.attrName):"",morphName:fn.Objects.Deformer[p].attrName};a[h]=S}a[h][d.attr]=d}}}),t.set(parseInt(s),a))}return t}parseAnimStacks(e){const n=fn.Objects.AnimationStack,t={};for(const s in n){const a=pi.get(parseInt(s)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const l=e.get(a[0].ID);t[s]={name:n[s].attrName,layer:l}}return t}addClip(e){let n=[];const t=this;return e.layer.forEach(function(s){n=n.concat(t.generateTracks(s))}),new ch(e.name,-1,n)}generateTracks(e){const n=[];let t=new Q,s=new wi,a=new Q;if(e.transform&&e.transform.decompose(t,s,a),t=t.toArray(),s=new Ai().setFromQuaternion(s,e.eulerOrder).toArray(),a=a.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const l=this.generateVectorTrack(e.modelName,e.T.curves,t,"position");l!==void 0&&n.push(l)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const l=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);l!==void 0&&n.push(l)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const l=this.generateVectorTrack(e.modelName,e.S.curves,a,"scale");l!==void 0&&n.push(l)}if(e.DeformPercent!==void 0){const l=this.generateMorphTrack(e);l!==void 0&&n.push(l)}return n}generateVectorTrack(e,n,t,s){const a=this.getTimesForAllAxes(n),l=this.getKeyframeTrackValues(a,n,t);return new lh(e+"."+s,a,l)}generateRotationTrack(e,n,t,s,a,l){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(Qi.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(Qi.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(Qi.degToRad));const c=this.getTimesForAllAxes(n),h=this.getKeyframeTrackValues(c,n,t);s!==void 0&&(s=s.map(Qi.degToRad),s.push(l),s=new Ai().fromArray(s),s=new wi().setFromEuler(s)),a!==void 0&&(a=a.map(Qi.degToRad),a.push(l),a=new Ai().fromArray(a),a=new wi().setFromEuler(a).invert());const d=new wi,p=new Ai,m=[];for(let v=0;v<h.length;v+=3)p.set(h[v],h[v+1],h[v+2],l),d.setFromEuler(p),s!==void 0&&d.premultiply(s),a!==void 0&&d.multiply(a),d.toArray(m,v/3*4);return new Pc(e+".quaternion",c,m)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,t=n.values.map(function(a){return a/100}),s=Pr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new oh(e.modelName+".morphTargetInfluences["+s+"]",n.times,t)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(t,s){return t-s}),n.length>1){let t=1,s=n[0];for(let a=1;a<n.length;a++){const l=n[a];l!==s&&(n[t]=l,s=l,t++)}n=n.slice(0,t)}return n}getKeyframeTrackValues(e,n,t){const s=t,a=[];let l=-1,c=-1,h=-1;return e.forEach(function(d){if(n.x&&(l=n.x.times.indexOf(d)),n.y&&(c=n.y.times.indexOf(d)),n.z&&(h=n.z.times.indexOf(d)),l!==-1){const p=n.x.values[l];a.push(p),s[0]=p}else a.push(s[0]);if(c!==-1){const p=n.y.values[c];a.push(p),s[1]=p}else a.push(s[1]);if(h!==-1){const p=n.z.values[h];a.push(p),s[2]=p}else a.push(s[2])}),a}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const t=e.values[n-1],s=e.values[n]-t,a=Math.abs(s);if(a>=180){const l=a/180,c=s/l;let h=t+c;const d=e.times[n-1],p=(e.times[n]-d)/l;let m=d+p;const v=[],y=[];for(;m<e.times[n];)v.push(m),m+=p,y.push(h),h+=c;e.times=ck(e.times,n,v),e.values=ck(e.values,n,y)}}}}class uoe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new W6,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,t=e.split(/[\r\n]+/);return t.forEach(function(s,a){const l=s.match(/^[\s\t]*;/),c=s.match(/^[\s\t]*$/);if(l||c)return;const h=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),d=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),p=s.match("^\\t{"+(n.currentIndent-1)+"}}");h?n.parseNodeBegin(s,h):d?n.parseNodeProperty(s,d,t[++a]):p?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,n){const t=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(h){return h.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:t},l=this.parseNodeAttr(s),c=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(t,a):t in c?(t==="PoseNode"?c.PoseNode.push(a):c[t].id!==void 0&&(c[t]={},c[t][c[t].id]=c[t]),l.id!==""&&(c[t][l.id]=a)):typeof l.id=="number"?(c[t]={},c[t][l.id]=a):t!=="Properties70"&&(t==="PoseNode"?c[t]=[a]:c[t]=a),typeof l.id=="number"&&(a.id=l.id),l.name!==""&&(a.attrName=l.name),l.type!==""&&(a.attrType=l.type),this.pushStack(a)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let t="",s="";return e.length>1&&(t=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:n,name:t,type:s}}parseNodeProperty(e,n,t){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),a=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&a===","&&(a=t.replace(/"/g,"").replace(/,$/,"").trim());const l=this.getCurrentNode();if(l.name==="Properties70"){this.parseNodeSpecialProperty(e,s,a);return}if(s==="C"){const c=a.split(",").slice(1),h=parseInt(c[0]),d=parseInt(c[1]);let p=a.split(",").slice(3);p=p.map(function(m){return m.trim().replace(/^"/,"")}),s="connections",a=[h,d],goe(a,p),l[s]===void 0&&(l[s]=[])}s==="Node"&&(l.id=a),s in l&&Array.isArray(l[s])?l[s].push(a):s!=="a"?l[s]=a:l.a=a,this.setCurrentProp(l,s),s==="a"&&a.slice(-1)!==","&&(l.a=_b(a))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=_b(n.a))}parseNodeSpecialProperty(e,n,t){const s=t.split('",').map(function(p){return p.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=s[0],l=s[1],c=s[2],h=s[3];let d=s[4];switch(l){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":d=parseFloat(d);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":d=_b(d);break}this.getPrevNode()[a]={type:l,type2:c,flag:h,value:d},this.setCurrentProp(this.getPrevNode(),a)}}class hoe{parse(e){const n=new ok(e);n.skip(23);const t=n.getUint32();if(t<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+t);const s=new W6;for(;!this.endOfContent(n);){const a=this.parseNode(n,t);a!==null&&s.add(a.name,a)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const t={},s=n>=7500?e.getUint64():e.getUint32(),a=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const l=e.getUint8(),c=e.getString(l);if(s===0)return null;const h=[];for(let v=0;v<a;v++)h.push(this.parseProperty(e));const d=h.length>0?h[0]:"",p=h.length>1?h[1]:"",m=h.length>2?h[2]:"";for(t.singleProperty=a===1&&e.getOffset()===s;s>e.getOffset();){const v=this.parseNode(e,n);v!==null&&this.parseSubNode(c,t,v)}return t.propertyList=h,typeof d=="number"&&(t.id=d),p!==""&&(t.attrName=p),m!==""&&(t.attrType=m),c!==""&&(t.name=c),t}parseSubNode(e,n,t){if(t.singleProperty===!0){const s=t.propertyList[0];Array.isArray(s)?(n[t.name]=t,t.a=s):n[t.name]=s}else if(e==="Connections"&&t.name==="C"){const s=[];t.propertyList.forEach(function(a,l){l!==0&&s.push(a)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(t.name==="Properties70")Object.keys(t).forEach(function(s){n[s]=t[s]});else if(e==="Properties70"&&t.name==="P"){let s=t.propertyList[0],a=t.propertyList[1];const l=t.propertyList[2],c=t.propertyList[3];let h;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?h=[t.propertyList[4],t.propertyList[5],t.propertyList[6]]:h=t.propertyList[4],n[s]={type:a,type2:l,flag:c,value:h}}else n[t.name]===void 0?typeof t.id=="number"?(n[t.name]={},n[t.name][t.id]=t):n[t.name]=t:t.name==="PoseNode"?(Array.isArray(n[t.name])||(n[t.name]=[n[t.name]]),n[t.name].push(t)):n[t.name][t.id]===void 0&&(n[t.name][t.id]=t)}parseProperty(e){const n=e.getString(1);let t;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),a=e.getUint32(),l=e.getUint32();if(a===0)switch(n){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const c=jae(new Uint8Array(e.getArrayBuffer(l))),h=new ok(c.buffer);switch(n){case"b":case"c":return h.getBooleanArray(s);case"d":return h.getFloat64Array(s);case"f":return h.getFloat32Array(s);case"i":return h.getInt32Array(s);case"l":return h.getInt64Array(s)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class ok{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let t=0;t<e;t++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let t=0;t<e;t++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let s=0;s<e;s++)n[s]=this.getUint8();const t=n.indexOf(0);return t>=0&&(n=n.slice(0,t)),uh.decodeText(new Uint8Array(n))}}class W6{add(e,n){this[e]=n}}function doe(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===q6(i,0,e.length)}function foe(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function t(s){const a=i[s-1];return i=i.slice(n+s),n++,a}for(let s=0;s<e.length;++s)if(t(1)===e[s])return!1;return!0}function lk(i){const e=/FBXVersion: (\d+)/,n=i.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function poe(i){return i/46186158e3}const moe=[];function Kg(i,e,n,t){let s;switch(t.mappingType){case"ByPolygonVertex":s=i;break;case"ByPolygon":s=e;break;case"ByVertice":s=n;break;case"AllSame":s=t.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+t.mappingType)}t.referenceType==="IndexToDirect"&&(s=t.indices[s]);const a=s*t.dataSize,l=a+t.dataSize;return voe(moe,t.buffer,a,l)}const bb=new Ai,Su=new Q;function j6(i){const e=new ct,n=new ct,t=new ct,s=new ct,a=new ct,l=new ct,c=new ct,h=new ct,d=new ct,p=new ct,m=new ct,v=new ct,y=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(Su.fromArray(i.translation)),i.preRotation){const T=i.preRotation.map(Qi.degToRad);T.push(i.eulerOrder),n.makeRotationFromEuler(bb.fromArray(T))}if(i.rotation){const T=i.rotation.map(Qi.degToRad);T.push(i.eulerOrder),t.makeRotationFromEuler(bb.fromArray(T))}if(i.postRotation){const T=i.postRotation.map(Qi.degToRad);T.push(i.eulerOrder),s.makeRotationFromEuler(bb.fromArray(T)),s.invert()}i.scale&&a.scale(Su.fromArray(i.scale)),i.scalingOffset&&c.setPosition(Su.fromArray(i.scalingOffset)),i.scalingPivot&&l.setPosition(Su.fromArray(i.scalingPivot)),i.rotationOffset&&h.setPosition(Su.fromArray(i.rotationOffset)),i.rotationPivot&&d.setPosition(Su.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(m.copy(i.parentMatrix),p.copy(i.parentMatrixWorld));const b=n.clone().multiply(t).multiply(s),S=new ct;S.extractRotation(p);const C=new ct;C.copyPosition(p);const E=C.clone().invert().multiply(p),w=S.clone().invert().multiply(E),x=a,M=new ct;if(y===0)M.copy(S).multiply(b).multiply(w).multiply(x);else if(y===1)M.copy(S).multiply(w).multiply(b).multiply(x);else{const T=new ct().scale(new Q().setFromMatrixScale(m)).clone().invert(),L=w.clone().multiply(T);M.copy(S).multiply(b).multiply(L).multiply(x)}const P=d.clone().invert(),I=l.clone().invert();let D=e.clone().multiply(h).multiply(d).multiply(n).multiply(t).multiply(s).multiply(P).multiply(c).multiply(l).multiply(a).multiply(I);const A=new ct().copyPosition(D),N=p.clone().multiply(A);return v.copyPosition(N),D=v.clone().multiply(M),D.premultiply(p.invert()),D}function K6(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function _b(i){return i.split(",").map(function(e){return parseFloat(e)})}function q6(i,e,n){return e===void 0&&(e=0),n===void 0&&(n=i.byteLength),uh.decodeText(new Uint8Array(i,e,n))}function goe(i,e){for(let n=0,t=i.length,s=e.length;n<s;n++,t++)i[t]=e[n]}function voe(i,e,n,t){for(let s=n,a=0;s<t;s++,a++)i[a]=e[s];return i}function ck(i,e,n){return i.slice(0,e).concat(n).concat(i.slice(e))}var yoe=Object.defineProperty,boe=(i,e,n)=>e in i?yoe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,nC=(i,e,n)=>(boe(i,typeof e!="symbol"?e+"":e,n),n);class X6{constructor(e){nC(this,"data"),this.data=e}generateShapes(e,n=100,t){const s=[],a={letterSpacing:0,lineHeight:1,...t},l=_oe(e,n,this.data,a);for(let c=0,h=l.length;c<h;c++)Array.prototype.push.apply(s,l[c].toShapes(!1));return s}}nC(X6,"isFont");nC(X6,"type");function _oe(i,e,n,t){const s=Array.from(i),a=e/n.resolution,l=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a,c=[];let h=0,d=0;for(let p=0;p<s.length;p++){const m=s[p];if(m===`
`)h=0,d-=l*t.lineHeight;else{const v=xoe(m,a,h,d,n);v&&(h+=v.offsetX+t.letterSpacing,c.push(v.path))}}return c}function xoe(i,e,n,t,s){const a=s.glyphs[i]||s.glyphs["?"];if(!a){console.error('THREE.Font: character "'+i+'" does not exists in font family '+s.familyName+".");return}const l=new k5;let c,h,d,p,m,v,y,b;if(a.o){const S=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let C=0,E=S.length;C<E;)switch(S[C++]){case"m":c=parseInt(S[C++])*e+n,h=parseInt(S[C++])*e+t,l.moveTo(c,h);break;case"l":c=parseInt(S[C++])*e+n,h=parseInt(S[C++])*e+t,l.lineTo(c,h);break;case"q":d=parseInt(S[C++])*e+n,p=parseInt(S[C++])*e+t,m=parseInt(S[C++])*e+n,v=parseInt(S[C++])*e+t,l.quadraticCurveTo(m,v,d,p);break;case"b":d=parseInt(S[C++])*e+n,p=parseInt(S[C++])*e+t,m=parseInt(S[C++])*e+n,v=parseInt(S[C++])*e+t,y=parseInt(S[C++])*e+n,b=parseInt(S[C++])*e+t,l.bezierCurveTo(m,v,y,b,d,p);break}}return{offsetX:a.ha*e,path:l}}class hp extends Fn{constructor(e,n={}){super(e),this.isReflector=!0,this.type="Reflector",this.camera=new Ln;const t=this,s=n.color!==void 0?new Qe(n.color):new Qe(8355711),a=n.textureWidth||512,l=n.textureHeight||512,c=n.clipBias||0,h=n.shader||hp.ReflectorShader,d=n.multisample!==void 0?n.multisample:4,p=new sa,m=new Q,v=new Q,y=new Q,b=new ct,S=new Q(0,0,-1),C=new ln,E=new Q,w=new Q,x=new ln,M=new ct,P=this.camera,I=new Ss(a,l,{samples:d,type:yh}),D=new yr({name:h.name!==void 0?h.name:"unspecified",uniforms:xp.clone(h.uniforms),fragmentShader:h.fragmentShader,vertexShader:h.vertexShader});D.uniforms.tDiffuse.value=I.texture,D.uniforms.color.value=s,D.uniforms.textureMatrix.value=M,this.material=D,this.onBeforeRender=function(A,N,T){if(v.setFromMatrixPosition(t.matrixWorld),y.setFromMatrixPosition(T.matrixWorld),b.extractRotation(t.matrixWorld),m.set(0,0,1),m.applyMatrix4(b),E.subVectors(v,y),E.dot(m)>0)return;E.reflect(m).negate(),E.add(v),b.extractRotation(T.matrixWorld),S.set(0,0,-1),S.applyMatrix4(b),S.add(y),w.subVectors(v,S),w.reflect(m).negate(),w.add(v),P.position.copy(E),P.up.set(0,1,0),P.up.applyMatrix4(b),P.up.reflect(m),P.lookAt(w),P.far=T.far,P.updateMatrixWorld(),P.projectionMatrix.copy(T.projectionMatrix),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(P.projectionMatrix),M.multiply(P.matrixWorldInverse),M.multiply(t.matrixWorld),p.setFromNormalAndCoplanarPoint(m,v),p.applyMatrix4(P.matrixWorldInverse),C.set(p.normal.x,p.normal.y,p.normal.z,p.constant);const L=P.projectionMatrix;x.x=(Math.sign(C.x)+L.elements[8])/L.elements[0],x.y=(Math.sign(C.y)+L.elements[9])/L.elements[5],x.z=-1,x.w=(1+L.elements[10])/L.elements[14],C.multiplyScalar(2/C.dot(x)),L.elements[2]=C.x,L.elements[6]=C.y,L.elements[10]=C.z+1-c,L.elements[14]=C.w,t.visible=!1;const V=A.getRenderTarget(),R=A.xr.enabled,B=A.shadowMap.autoUpdate;A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(I),A.state.buffers.depth.setMask(!0),A.autoClear===!1&&A.clear(),A.render(N,P),A.xr.enabled=R,A.shadowMap.autoUpdate=B,A.setRenderTarget(V);const F=T.viewport;F!==void 0&&A.state.viewport(F),t.visible=!0},this.getRenderTarget=function(){return I},this.dispose=function(){I.dispose(),t.material.dispose()}}}hp.ReflectorShader={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const woe=["args","material-uniforms-color-value"],Coe=jn("TresPlaneGeometry",{args:[5,5]},null,-1);hp.ReflectorShader;function Soe(i){return j0()?(cx(i),!0):!1}function Y6(i){return typeof i=="function"?i():on(i)}const Eoe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Moe=Object.prototype.toString,Toe=i=>Moe.call(i)==="[object Object]",koe=()=>{};function Aoe(i){var e;const n=Y6(i);return(e=n==null?void 0:n.$el)!=null?e:n}const Poe=Eoe?window:void 0;function xb(...i){let e,n,t,s;if(typeof i[0]=="string"||Array.isArray(i[0])?([n,t,s]=i,e=Poe):[e,n,t,s]=i,!e)return koe;Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const a=[],l=()=>{a.forEach(p=>p()),a.length=0},c=(p,m,v,y)=>(p.addEventListener(m,v,y),()=>p.removeEventListener(m,v,y)),h=hi(()=>[Aoe(e),Y6(s)],([p,m])=>{if(l(),!p)return;const v=Toe(m)?{...m}:m;a.push(...n.flatMap(y=>t.map(b=>c(p,y,b,v))))},{immediate:!0,flush:"post"}),d=()=>{h(),l()};return Soe(d),d}class U0 extends Fn{constructor(){super(U0.Geometry,new ga({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new Q,n=new Q,t=new O_(16,16),s=new O_(16,16);let a=js;const l=U0.Geometry,c=new Nf({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),h=new Nf({uniforms:{map:{value:t},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),d=new Fn(l,c),p=[],m=J6.Shader,v=new Nf({name:m.name,uniforms:{map:{value:null},occlusionMap:{value:s},color:{value:new Qe(16777215)},scale:{value:new Ge},screenPosition:{value:new Q}},vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,blending:A0,transparent:!0,depthWrite:!1}),y=new Fn(l,v);this.addElement=function(w){p.push(w)};const b=new Ge,S=new Ge,C=new E5,E=new ln;this.onBeforeRender=function(w,x,M){w.getCurrentViewport(E);const P=w.getRenderTarget(),I=P!==null?P.texture.type:js;a!==I&&(t.dispose(),s.dispose(),t.type=s.type=I,a=I);const D=E.w/E.z,A=E.z/2,N=E.w/2;let T=16/E.w;if(b.set(T*D,T),C.min.set(E.x,E.y),C.max.set(E.x+(E.z-16),E.y+(E.w-16)),n.setFromMatrixPosition(this.matrixWorld),n.applyMatrix4(M.matrixWorldInverse),!(n.z>0)&&(e.copy(n).applyMatrix4(M.projectionMatrix),S.x=E.x+e.x*A+A-8,S.y=E.y+e.y*N+N-8,C.containsPoint(S))){w.copyFramebufferToTexture(S,t);let L=c.uniforms;L.scale.value=b,L.screenPosition.value=e,w.renderBufferDirect(M,null,l,c,d,null),w.copyFramebufferToTexture(S,s),L=h.uniforms,L.scale.value=b,L.screenPosition.value=e,w.renderBufferDirect(M,null,l,h,d,null);const V=-e.x*2,R=-e.y*2;for(let B=0,F=p.length;B<F;B++){const U=p[B],q=v.uniforms;q.color.value.copy(U.color),q.map.value=U.texture,q.screenPosition.value.x=e.x+V*U.distance,q.screenPosition.value.y=e.y+R*U.distance,T=U.size/E.w;const Y=E.w/E.z;q.scale.value.set(T*Y,T),v.uniformsNeedUpdate=!0,w.renderBufferDirect(M,null,l,v,y,null)}}},this.dispose=function(){c.dispose(),h.dispose(),v.dispose(),t.dispose(),s.dispose();for(let w=0,x=p.length;w<x;w++)p[w].texture.dispose()}}}class J6{constructor(e,n=1,t=0,s=new Qe(16777215)){this.texture=e,this.size=n,this.distance=t,this.color=s}}J6.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};U0.Geometry=function(){const i=new Xt,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),n=new Ep(e,5);return i.setIndex([0,1,2,0,2,3]),i.setAttribute("position",new no(n,3,0,!1)),i.setAttribute("uv",new no(n,2,3,!1)),i}();Qi.clamp;Qi.lerp;async function Ioe(i){return await fne(aoe,i)}const Noe=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","args"],Roe=Qa({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!0},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:Number.POSITIVE_INFINITY},minAzimuthAngle:{default:Number.NEGATIVE_INFINITY},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:Number.POSITIVE_INFINITY},minZoom:{default:0},maxZoom:{default:Number.POSITIVE_INFINITY},touches:{default:()=>({ONE:Fa.ROTATE,TWO:Fa.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start","end"],setup(i,{expose:e,emit:n}){const t=i,s=n,{makeDefault:a,autoRotate:l,autoRotateSpeed:c,enableDamping:h,dampingFactor:d,enablePan:p,keyPanSpeed:m,maxAzimuthAngle:v,minAzimuthAngle:y,maxPolarAngle:b,minPolarAngle:S,minDistance:C,maxDistance:E,minZoom:w,maxZoom:x,enableZoom:M,zoomSpeed:P,enableRotate:I,touches:D,rotateSpeed:A,target:N}=pp(t),{camera:T,renderer:L,extend:V,controls:R}=kw(),B=Ct(null);V({OrbitControls:Zae}),hi(B,q=>{F(),q&&a.value?R.value=q:R.value=null});function F(){xb(B.value,"change",()=>s("change",B.value)),xb(B.value,"start",()=>s("start",B.value)),xb(B.value,"end",()=>s("end",B.value))}const{onLoop:U}=Ip();return U(()=>{B.value&&(h.value||l.value)&&B.value.update()}),Ks(()=>{B.value&&B.value.dispose()}),e({value:B}),(q,Y)=>(q.camera||on(T))&&(q.domElement||on(L))?(Bn(),Vi("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:B,target:on(N),"auto-rotate":on(l),"auto-rotate-speed":on(c),"enable-damping":on(h),"damping-factor":on(d),"enable-pan":on(p),"key-pan-speed":on(m),keys:q.keys,"max-azimuth-angle":on(v),"min-azimuth-angle":on(y),"max-polar-angle":on(b),"min-polar-angle":on(S),"min-distance":on(C),"max-distance":on(E),"min-zoom":on(w),"max-zoom":on(x),touches:on(D),"enable-zoom":on(M),"zoom-speed":on(P),"enable-rotate":on(I),"rotate-speed":on(A),args:[q.camera||on(T),q.domElement||on(L).domElement]},null,8,Noe)):Ix("",!0)}});var wb;/Mac/.test((wb=globalThis==null?void 0:globalThis.navigator)===null||wb===void 0?void 0:wb.platform);var Doe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qg(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Loe={exports:{}};(function(i,e){(function(n){i.exports=n()})(function(){return function n(t,s,a){function l(d,p){if(!s[d]){if(!t[d]){var m=typeof qg=="function"&&qg;if(!p&&m)return m(d,!0);if(c)return c(d,!0);throw new Error("Cannot find module '"+d+"'")}p=s[d]={exports:{}},t[d][0].call(p.exports,function(v){var y=t[d][1][v];return l(y||v)},p,p.exports,n,t,s,a)}return s[d].exports}for(var c=typeof qg=="function"&&qg,h=0;h<a.length;h++)l(a[h]);return l}({1:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){var b=n("crypto");function S(I,D){D=w(I,D);var A;return(A=D.algorithm!=="passthrough"?b.createHash(D.algorithm):new P).write===void 0&&(A.write=A.update,A.end=A.update),M(D,A).dispatch(I),A.update||A.end(""),A.digest?A.digest(D.encoding==="buffer"?void 0:D.encoding):(I=A.read(),D.encoding!=="buffer"?I.toString(D.encoding):I)}(s=t.exports=S).sha1=function(I){return S(I)},s.keys=function(I){return S(I,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(I){return S(I,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(I){return S(I,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var C=b.getHashes?b.getHashes().slice():["sha1","md5"],E=(C.push("passthrough"),["buffer","hex","binary","base64"]);function w(I,D){var A={};if(A.algorithm=(D=D||{}).algorithm||"sha1",A.encoding=D.encoding||"hex",A.excludeValues=!!D.excludeValues,A.algorithm=A.algorithm.toLowerCase(),A.encoding=A.encoding.toLowerCase(),A.ignoreUnknown=D.ignoreUnknown===!0,A.respectType=D.respectType!==!1,A.respectFunctionNames=D.respectFunctionNames!==!1,A.respectFunctionProperties=D.respectFunctionProperties!==!1,A.unorderedArrays=D.unorderedArrays===!0,A.unorderedSets=D.unorderedSets!==!1,A.unorderedObjects=D.unorderedObjects!==!1,A.replacer=D.replacer||void 0,A.excludeKeys=D.excludeKeys||void 0,I===void 0)throw new Error("Object argument required.");for(var N=0;N<C.length;++N)C[N].toLowerCase()===A.algorithm.toLowerCase()&&(A.algorithm=C[N]);if(C.indexOf(A.algorithm)===-1)throw new Error('Algorithm "'+A.algorithm+'"  not supported. supported values: '+C.join(", "));if(E.indexOf(A.encoding)===-1&&A.algorithm!=="passthrough")throw new Error('Encoding "'+A.encoding+'"  not supported. supported values: '+E.join(", "));return A}function x(I){if(typeof I=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(I))!=null}function M(I,D,A){A=A||[];function N(T){return D.update?D.update(T,"utf8"):D.write(T,"utf8")}return{dispatch:function(T){return this["_"+((T=I.replacer?I.replacer(T):T)===null?"null":typeof T)](T)},_object:function(T){var L,V=Object.prototype.toString.call(T),R=/\[object (.*)\]/i.exec(V);if(R=(R=R?R[1]:"unknown:["+V+"]").toLowerCase(),0<=(V=A.indexOf(T)))return this.dispatch("[CIRCULAR:"+V+"]");if(A.push(T),c!==void 0&&c.isBuffer&&c.isBuffer(T))return N("buffer:"),N(T);if(R==="object"||R==="function"||R==="asyncfunction")return V=Object.keys(T),I.unorderedObjects&&(V=V.sort()),I.respectType===!1||x(T)||V.splice(0,0,"prototype","__proto__","constructor"),I.excludeKeys&&(V=V.filter(function(B){return!I.excludeKeys(B)})),N("object:"+V.length+":"),L=this,V.forEach(function(B){L.dispatch(B),N(":"),I.excludeValues||L.dispatch(T[B]),N(",")});if(!this["_"+R]){if(I.ignoreUnknown)return N("["+R+"]");throw new Error('Unknown object type "'+R+'"')}this["_"+R](T)},_array:function(T,B){B=B!==void 0?B:I.unorderedArrays!==!1;var V=this;if(N("array:"+T.length+":"),!B||T.length<=1)return T.forEach(function(F){return V.dispatch(F)});var R=[],B=T.map(function(F){var U=new P,q=A.slice();return M(I,U,q).dispatch(F),R=R.concat(q.slice(A.length)),U.read().toString()});return A=A.concat(R),B.sort(),this._array(B,!1)},_date:function(T){return N("date:"+T.toJSON())},_symbol:function(T){return N("symbol:"+T.toString())},_error:function(T){return N("error:"+T.toString())},_boolean:function(T){return N("bool:"+T.toString())},_string:function(T){N("string:"+T.length+":"),N(T.toString())},_function:function(T){N("fn:"),x(T)?this.dispatch("[native]"):this.dispatch(T.toString()),I.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(T.name)),I.respectFunctionProperties&&this._object(T)},_number:function(T){return N("number:"+T.toString())},_xml:function(T){return N("xml:"+T.toString())},_null:function(){return N("Null")},_undefined:function(){return N("Undefined")},_regexp:function(T){return N("regex:"+T.toString())},_uint8array:function(T){return N("uint8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint8clampedarray:function(T){return N("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(T))},_int8array:function(T){return N("int8array:"),this.dispatch(Array.prototype.slice.call(T))},_uint16array:function(T){return N("uint16array:"),this.dispatch(Array.prototype.slice.call(T))},_int16array:function(T){return N("int16array:"),this.dispatch(Array.prototype.slice.call(T))},_uint32array:function(T){return N("uint32array:"),this.dispatch(Array.prototype.slice.call(T))},_int32array:function(T){return N("int32array:"),this.dispatch(Array.prototype.slice.call(T))},_float32array:function(T){return N("float32array:"),this.dispatch(Array.prototype.slice.call(T))},_float64array:function(T){return N("float64array:"),this.dispatch(Array.prototype.slice.call(T))},_arraybuffer:function(T){return N("arraybuffer:"),this.dispatch(new Uint8Array(T))},_url:function(T){return N("url:"+T.toString())},_map:function(T){return N("map:"),T=Array.from(T),this._array(T,I.unorderedSets!==!1)},_set:function(T){return N("set:"),T=Array.from(T),this._array(T,I.unorderedSets!==!1)},_file:function(T){return N("file:"),this.dispatch([T.name,T.size,T.type,T.lastModfied])},_blob:function(){if(I.ignoreUnknown)return N("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return N("domwindow")},_bigint:function(T){return N("bigint:"+T.toString())},_process:function(){return N("process")},_timer:function(){return N("timer")},_pipe:function(){return N("pipe")},_tcp:function(){return N("tcp")},_udp:function(){return N("udp")},_tty:function(){return N("tty")},_statwatcher:function(){return N("statwatcher")},_securecontext:function(){return N("securecontext")},_connection:function(){return N("connection")},_zlib:function(){return N("zlib")},_context:function(){return N("context")},_nodescript:function(){return N("nodescript")},_httpparser:function(){return N("httpparser")},_dataview:function(){return N("dataview")},_signal:function(){return N("signal")},_fsevent:function(){return N("fsevent")},_tlswrap:function(){return N("tlswrap")}}}function P(){return{buf:"",write:function(I){this.buf+=I},end:function(I){this.buf+=I},read:function(){return this.buf}}}s.writeToStream=function(I,D,A){return A===void 0&&(A=D,D={}),M(D=w(I,D),A).dispatch(I)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){(function(b){var S=typeof Uint8Array<"u"?Uint8Array:Array,C=43,E=47,w=48,x=97,M=65,P=45,I=95;function D(A){return A=A.charCodeAt(0),A===C||A===P?62:A===E||A===I?63:A<w?-1:A<w+10?A-w+26+26:A<M+26?A-M:A<x+26?A-x+26:void 0}b.toByteArray=function(A){var N,T;if(0<A.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var L=A.length,L=A.charAt(L-2)==="="?2:A.charAt(L-1)==="="?1:0,V=new S(3*A.length/4-L),R=0<L?A.length-4:A.length,B=0;function F(U){V[B++]=U}for(N=0;N<R;N+=4,0)F((16711680&(T=D(A.charAt(N))<<18|D(A.charAt(N+1))<<12|D(A.charAt(N+2))<<6|D(A.charAt(N+3))))>>16),F((65280&T)>>8),F(255&T);return L==2?F(255&(T=D(A.charAt(N))<<2|D(A.charAt(N+1))>>4)):L==1&&(F((T=D(A.charAt(N))<<10|D(A.charAt(N+1))<<4|D(A.charAt(N+2))>>2)>>8&255),F(255&T)),V},b.fromByteArray=function(A){var N,T,L,V,R=A.length%3,B="";function F(U){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(U)}for(N=0,L=A.length-R;N<L;N+=3)T=(A[N]<<16)+(A[N+1]<<8)+A[N+2],B+=F((V=T)>>18&63)+F(V>>12&63)+F(V>>6&63)+F(63&V);switch(R){case 1:B=(B+=F((T=A[A.length-1])>>2))+F(T<<4&63)+"==";break;case 2:B=(B=(B+=F((T=(A[A.length-2]<<8)+A[A.length-1])>>10))+F(T>>4&63))+F(T<<2&63)+"="}return B}})(s===void 0?this.base64js={}:s)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,t,s){(function(a,l,C,h,d,p,m,v,y){var b=n("base64-js"),S=n("ieee754");function C(H,$,te){if(!(this instanceof C))return new C(H,$,te);var le,K,X,oe,fe=typeof H;if($==="base64"&&fe=="string")for(H=(oe=H).trim?oe.trim():oe.replace(/^\s+|\s+$/g,"");H.length%4!=0;)H+="=";if(fe=="number")le=Y(H);else if(fe=="string")le=C.byteLength(H,$);else{if(fe!="object")throw new Error("First argument needs to be a number, array or string.");le=Y(H.length)}if(C._useTypedArrays?K=C._augment(new Uint8Array(le)):((K=this).length=le,K._isBuffer=!0),C._useTypedArrays&&typeof H.byteLength=="number")K._set(H);else if(ne(oe=H)||C.isBuffer(oe)||oe&&typeof oe=="object"&&typeof oe.length=="number")for(X=0;X<le;X++)C.isBuffer(H)?K[X]=H.readUInt8(X):K[X]=H[X];else if(fe=="string")K.write(H,0,$);else if(fe=="number"&&!C._useTypedArrays&&!te)for(X=0;X<le;X++)K[X]=0;return K}function E(H,$,te,le){return C._charsWritten=Ee(function(K){for(var X=[],oe=0;oe<K.length;oe++)X.push(255&K.charCodeAt(oe));return X}($),H,te,le)}function w(H,$,te,le){return C._charsWritten=Ee(function(K){for(var X,oe,fe=[],be=0;be<K.length;be++)oe=K.charCodeAt(be),X=oe>>8,oe=oe%256,fe.push(oe),fe.push(X);return fe}($),H,te,le)}function x(H,$,te){var le="";te=Math.min(H.length,te);for(var K=$;K<te;K++)le+=String.fromCharCode(H[K]);return le}function M(H,$,te,X){X||(re(typeof te=="boolean","missing or invalid endian"),re($!=null,"missing offset"),re($+1<H.length,"Trying to read beyond buffer length"));var K,X=H.length;if(!(X<=$))return te?(K=H[$],$+1<X&&(K|=H[$+1]<<8)):(K=H[$]<<8,$+1<X&&(K|=H[$+1])),K}function P(H,$,te,X){X||(re(typeof te=="boolean","missing or invalid endian"),re($!=null,"missing offset"),re($+3<H.length,"Trying to read beyond buffer length"));var K,X=H.length;if(!(X<=$))return te?($+2<X&&(K=H[$+2]<<16),$+1<X&&(K|=H[$+1]<<8),K|=H[$],$+3<X&&(K+=H[$+3]<<24>>>0)):($+1<X&&(K=H[$+1]<<16),$+2<X&&(K|=H[$+2]<<8),$+3<X&&(K|=H[$+3]),K+=H[$]<<24>>>0),K}function I(H,$,te,le){if(le||(re(typeof te=="boolean","missing or invalid endian"),re($!=null,"missing offset"),re($+1<H.length,"Trying to read beyond buffer length")),!(H.length<=$))return le=M(H,$,te,!0),32768&le?-1*(65535-le+1):le}function D(H,$,te,le){if(le||(re(typeof te=="boolean","missing or invalid endian"),re($!=null,"missing offset"),re($+3<H.length,"Trying to read beyond buffer length")),!(H.length<=$))return le=P(H,$,te,!0),2147483648&le?-1*(4294967295-le+1):le}function A(H,$,te,le){return le||(re(typeof te=="boolean","missing or invalid endian"),re($+3<H.length,"Trying to read beyond buffer length")),S.read(H,$,te,23,4)}function N(H,$,te,le){return le||(re(typeof te=="boolean","missing or invalid endian"),re($+7<H.length,"Trying to read beyond buffer length")),S.read(H,$,te,52,8)}function T(H,$,te,le,K){if(K||(re($!=null,"missing value"),re(typeof le=="boolean","missing or invalid endian"),re(te!=null,"missing offset"),re(te+1<H.length,"trying to write beyond buffer length"),Ce($,65535)),K=H.length,!(K<=te))for(var X=0,oe=Math.min(K-te,2);X<oe;X++)H[te+X]=($&255<<8*(le?X:1-X))>>>8*(le?X:1-X)}function L(H,$,te,le,K){if(K||(re($!=null,"missing value"),re(typeof le=="boolean","missing or invalid endian"),re(te!=null,"missing offset"),re(te+3<H.length,"trying to write beyond buffer length"),Ce($,4294967295)),K=H.length,!(K<=te))for(var X=0,oe=Math.min(K-te,4);X<oe;X++)H[te+X]=$>>>8*(le?X:3-X)&255}function V(H,$,te,le,K){K||(re($!=null,"missing value"),re(typeof le=="boolean","missing or invalid endian"),re(te!=null,"missing offset"),re(te+1<H.length,"Trying to write beyond buffer length"),Me($,32767,-32768)),H.length<=te||T(H,0<=$?$:65535+$+1,te,le,K)}function R(H,$,te,le,K){K||(re($!=null,"missing value"),re(typeof le=="boolean","missing or invalid endian"),re(te!=null,"missing offset"),re(te+3<H.length,"Trying to write beyond buffer length"),Me($,2147483647,-2147483648)),H.length<=te||L(H,0<=$?$:4294967295+$+1,te,le,K)}function B(H,$,te,le,K){K||(re($!=null,"missing value"),re(typeof le=="boolean","missing or invalid endian"),re(te!=null,"missing offset"),re(te+3<H.length,"Trying to write beyond buffer length"),ee($,34028234663852886e22,-34028234663852886e22)),H.length<=te||S.write(H,$,te,le,23,4)}function F(H,$,te,le,K){K||(re($!=null,"missing value"),re(typeof le=="boolean","missing or invalid endian"),re(te!=null,"missing offset"),re(te+7<H.length,"Trying to write beyond buffer length"),ee($,17976931348623157e292,-17976931348623157e292)),H.length<=te||S.write(H,$,te,le,52,8)}s.Buffer=C,s.SlowBuffer=C,s.INSPECT_MAX_BYTES=50,C.poolSize=8192,C._useTypedArrays=function(){try{var H=new ArrayBuffer(0),$=new Uint8Array(H);return $.foo=function(){return 42},$.foo()===42&&typeof $.subarray=="function"}catch{return!1}}(),C.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.isBuffer=function(H){return!(H==null||!H._isBuffer)},C.byteLength=function(H,$){var te;switch(H+="",$||"utf8"){case"hex":te=H.length/2;break;case"utf8":case"utf-8":te=ve(H).length;break;case"ascii":case"binary":case"raw":te=H.length;break;case"base64":te=Re(H).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":te=2*H.length;break;default:throw new Error("Unknown encoding")}return te},C.concat=function(H,$){if(re(ne(H),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),H.length===0)return new C(0);if(H.length===1)return H[0];if(typeof $!="number")for(K=$=0;K<H.length;K++)$+=H[K].length;for(var te=new C($),le=0,K=0;K<H.length;K++){var X=H[K];X.copy(te,le),le+=X.length}return te},C.prototype.write=function(H,$,te,le){isFinite($)?isFinite(te)||(le=te,te=void 0):(be=le,le=$,$=te,te=be),$=Number($)||0;var K,X,oe,fe,be=this.length-$;switch((!te||be<(te=Number(te)))&&(te=be),le=String(le||"utf8").toLowerCase()){case"hex":K=function(ke,J,W,ue){W=Number(W)||0;var he=ke.length-W;(!ue||he<(ue=Number(ue)))&&(ue=he),re((he=J.length)%2==0,"Invalid hex string"),he/2<ue&&(ue=he/2);for(var xe=0;xe<ue;xe++){var Te=parseInt(J.substr(2*xe,2),16);re(!isNaN(Te),"Invalid hex string"),ke[W+xe]=Te}return C._charsWritten=2*xe,xe}(this,H,$,te);break;case"utf8":case"utf-8":X=this,oe=$,fe=te,K=C._charsWritten=Ee(ve(H),X,oe,fe);break;case"ascii":case"binary":K=E(this,H,$,te);break;case"base64":X=this,oe=$,fe=te,K=C._charsWritten=Ee(Re(H),X,oe,fe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":K=w(this,H,$,te);break;default:throw new Error("Unknown encoding")}return K},C.prototype.toString=function(H,$,te){var le,K,X,oe,fe=this;if(H=String(H||"utf8").toLowerCase(),$=Number($)||0,(te=te!==void 0?Number(te):fe.length)===$)return"";switch(H){case"hex":le=function(be,ke,J){var W=be.length;(!ke||ke<0)&&(ke=0),(!J||J<0||W<J)&&(J=W);for(var ue="",he=ke;he<J;he++)ue+=de(be[he]);return ue}(fe,$,te);break;case"utf8":case"utf-8":le=function(be,ke,J){var W="",ue="";J=Math.min(be.length,J);for(var he=ke;he<J;he++)be[he]<=127?(W+=ce(ue)+String.fromCharCode(be[he]),ue=""):ue+="%"+be[he].toString(16);return W+ce(ue)}(fe,$,te);break;case"ascii":case"binary":le=x(fe,$,te);break;case"base64":K=fe,oe=te,le=(X=$)===0&&oe===K.length?b.fromByteArray(K):b.fromByteArray(K.slice(X,oe));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":le=function(be,ke,J){for(var W=be.slice(ke,J),ue="",he=0;he<W.length;he+=2)ue+=String.fromCharCode(W[he]+256*W[he+1]);return ue}(fe,$,te);break;default:throw new Error("Unknown encoding")}return le},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},C.prototype.copy=function(H,$,te,le){if($=$||0,(le=le||le===0?le:this.length)!==(te=te||0)&&H.length!==0&&this.length!==0){re(te<=le,"sourceEnd < sourceStart"),re(0<=$&&$<H.length,"targetStart out of bounds"),re(0<=te&&te<this.length,"sourceStart out of bounds"),re(0<=le&&le<=this.length,"sourceEnd out of bounds"),le>this.length&&(le=this.length);var K=(le=H.length-$<le-te?H.length-$+te:le)-te;if(K<100||!C._useTypedArrays)for(var X=0;X<K;X++)H[X+$]=this[X+te];else H._set(this.subarray(te,te+K),$)}},C.prototype.slice=function(H,$){var te=this.length;if(H=q(H,te,0),$=q($,te,te),C._useTypedArrays)return C._augment(this.subarray(H,$));for(var le=$-H,K=new C(le,void 0,!0),X=0;X<le;X++)K[X]=this[X+H];return K},C.prototype.get=function(H){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(H)},C.prototype.set=function(H,$){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(H,$)},C.prototype.readUInt8=function(H,$){if($||(re(H!=null,"missing offset"),re(H<this.length,"Trying to read beyond buffer length")),!(H>=this.length))return this[H]},C.prototype.readUInt16LE=function(H,$){return M(this,H,!0,$)},C.prototype.readUInt16BE=function(H,$){return M(this,H,!1,$)},C.prototype.readUInt32LE=function(H,$){return P(this,H,!0,$)},C.prototype.readUInt32BE=function(H,$){return P(this,H,!1,$)},C.prototype.readInt8=function(H,$){if($||(re(H!=null,"missing offset"),re(H<this.length,"Trying to read beyond buffer length")),!(H>=this.length))return 128&this[H]?-1*(255-this[H]+1):this[H]},C.prototype.readInt16LE=function(H,$){return I(this,H,!0,$)},C.prototype.readInt16BE=function(H,$){return I(this,H,!1,$)},C.prototype.readInt32LE=function(H,$){return D(this,H,!0,$)},C.prototype.readInt32BE=function(H,$){return D(this,H,!1,$)},C.prototype.readFloatLE=function(H,$){return A(this,H,!0,$)},C.prototype.readFloatBE=function(H,$){return A(this,H,!1,$)},C.prototype.readDoubleLE=function(H,$){return N(this,H,!0,$)},C.prototype.readDoubleBE=function(H,$){return N(this,H,!1,$)},C.prototype.writeUInt8=function(H,$,te){te||(re(H!=null,"missing value"),re($!=null,"missing offset"),re($<this.length,"trying to write beyond buffer length"),Ce(H,255)),$>=this.length||(this[$]=H)},C.prototype.writeUInt16LE=function(H,$,te){T(this,H,$,!0,te)},C.prototype.writeUInt16BE=function(H,$,te){T(this,H,$,!1,te)},C.prototype.writeUInt32LE=function(H,$,te){L(this,H,$,!0,te)},C.prototype.writeUInt32BE=function(H,$,te){L(this,H,$,!1,te)},C.prototype.writeInt8=function(H,$,te){te||(re(H!=null,"missing value"),re($!=null,"missing offset"),re($<this.length,"Trying to write beyond buffer length"),Me(H,127,-128)),$>=this.length||(0<=H?this.writeUInt8(H,$,te):this.writeUInt8(255+H+1,$,te))},C.prototype.writeInt16LE=function(H,$,te){V(this,H,$,!0,te)},C.prototype.writeInt16BE=function(H,$,te){V(this,H,$,!1,te)},C.prototype.writeInt32LE=function(H,$,te){R(this,H,$,!0,te)},C.prototype.writeInt32BE=function(H,$,te){R(this,H,$,!1,te)},C.prototype.writeFloatLE=function(H,$,te){B(this,H,$,!0,te)},C.prototype.writeFloatBE=function(H,$,te){B(this,H,$,!1,te)},C.prototype.writeDoubleLE=function(H,$,te){F(this,H,$,!0,te)},C.prototype.writeDoubleBE=function(H,$,te){F(this,H,$,!1,te)},C.prototype.fill=function(H,$,te){if($=$||0,te=te||this.length,re(typeof(H=typeof(H=H||0)=="string"?H.charCodeAt(0):H)=="number"&&!isNaN(H),"value is not a number"),re($<=te,"end < start"),te!==$&&this.length!==0){re(0<=$&&$<this.length,"start out of bounds"),re(0<=te&&te<=this.length,"end out of bounds");for(var le=$;le<te;le++)this[le]=H}},C.prototype.inspect=function(){for(var H=[],$=this.length,te=0;te<$;te++)if(H[te]=de(this[te]),te===s.INSPECT_MAX_BYTES){H[te+1]="...";break}return"<Buffer "+H.join(" ")+">"},C.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(C._useTypedArrays)return new C(this).buffer;for(var H=new Uint8Array(this.length),$=0,te=H.length;$<te;$+=1)H[$]=this[$];return H.buffer};var U=C.prototype;function q(H,$,te){return typeof H!="number"?te:$<=(H=~~H)?$:0<=H||0<=(H+=$)?H:0}function Y(H){return(H=~~Math.ceil(+H))<0?0:H}function ne(H){return(Array.isArray||function($){return Object.prototype.toString.call($)==="[object Array]"})(H)}function de(H){return H<16?"0"+H.toString(16):H.toString(16)}function ve(H){for(var $=[],te=0;te<H.length;te++){var le=H.charCodeAt(te);if(le<=127)$.push(H.charCodeAt(te));else for(var K=te,X=(55296<=le&&le<=57343&&te++,encodeURIComponent(H.slice(K,te+1)).substr(1).split("%")),oe=0;oe<X.length;oe++)$.push(parseInt(X[oe],16))}return $}function Re(H){return b.toByteArray(H)}function Ee(H,$,te,le){for(var K=0;K<le&&!(K+te>=$.length||K>=H.length);K++)$[K+te]=H[K];return K}function ce(H){try{return decodeURIComponent(H)}catch{return""}}function Ce(H,$){re(typeof H=="number","cannot write a non-number as a number"),re(0<=H,"specified a negative value for writing an unsigned value"),re(H<=$,"value is larger than maximum value for type"),re(Math.floor(H)===H,"value has a fractional component")}function Me(H,$,te){re(typeof H=="number","cannot write a non-number as a number"),re(H<=$,"value larger than maximum allowed value"),re(te<=H,"value smaller than minimum allowed value"),re(Math.floor(H)===H,"value has a fractional component")}function ee(H,$,te){re(typeof H=="number","cannot write a non-number as a number"),re(H<=$,"value larger than maximum allowed value"),re(te<=H,"value smaller than minimum allowed value")}function re(H,$){if(!H)throw new Error($||"Failed assertion")}C._augment=function(H){return H._isBuffer=!0,H._get=H.get,H._set=H.set,H.get=U.get,H.set=U.set,H.write=U.write,H.toString=U.toString,H.toLocaleString=U.toString,H.toJSON=U.toJSON,H.copy=U.copy,H.slice=U.slice,H.readUInt8=U.readUInt8,H.readUInt16LE=U.readUInt16LE,H.readUInt16BE=U.readUInt16BE,H.readUInt32LE=U.readUInt32LE,H.readUInt32BE=U.readUInt32BE,H.readInt8=U.readInt8,H.readInt16LE=U.readInt16LE,H.readInt16BE=U.readInt16BE,H.readInt32LE=U.readInt32LE,H.readInt32BE=U.readInt32BE,H.readFloatLE=U.readFloatLE,H.readFloatBE=U.readFloatBE,H.readDoubleLE=U.readDoubleLE,H.readDoubleBE=U.readDoubleBE,H.writeUInt8=U.writeUInt8,H.writeUInt16LE=U.writeUInt16LE,H.writeUInt16BE=U.writeUInt16BE,H.writeUInt32LE=U.writeUInt32LE,H.writeUInt32BE=U.writeUInt32BE,H.writeInt8=U.writeInt8,H.writeInt16LE=U.writeInt16LE,H.writeInt16BE=U.writeInt16BE,H.writeInt32LE=U.writeInt32LE,H.writeInt32BE=U.writeInt32BE,H.writeFloatLE=U.writeFloatLE,H.writeFloatBE=U.writeFloatBE,H.writeDoubleLE=U.writeDoubleLE,H.writeDoubleBE=U.writeDoubleBE,H.fill=U.fill,H.inspect=U.inspect,H.toArrayBuffer=U.toArrayBuffer,H}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,t,s){(function(a,l,b,h,d,p,m,v,y){var b=n("buffer").Buffer,S=4,C=new b(S);C.fill(0),t.exports={hash:function(E,w,x,M){for(var P=w(function(T,L){T.length%S!=0&&(V=T.length+(S-T.length%S),T=b.concat([T,C],V));for(var V,R=[],B=L?T.readInt32BE:T.readInt32LE,F=0;F<T.length;F+=S)R.push(B.call(T,F));return R}(E=b.isBuffer(E)?E:new b(E),M),8*E.length),w=M,I=new b(x),D=w?I.writeInt32BE:I.writeInt32LE,A=0;A<P.length;A++)D.call(I,P[A],4*A,!0);return I}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,t,s){(function(a,l,b,h,d,p,m,v,y){var b=n("buffer").Buffer,S=n("./sha"),C=n("./sha256"),E=n("./rng"),w={sha1:S,sha256:C,md5:n("./md5")},x=64,M=new b(x);function P(T,L){var V=w[T=T||"sha1"],R=[];return V||I("algorithm:",T,"is not yet supported"),{update:function(B){return b.isBuffer(B)||(B=new b(B)),R.push(B),B.length,this},digest:function(B){var F=b.concat(R),F=L?function(U,q,Y){b.isBuffer(q)||(q=new b(q)),b.isBuffer(Y)||(Y=new b(Y)),q.length>x?q=U(q):q.length<x&&(q=b.concat([q,M],x));for(var ne=new b(x),de=new b(x),ve=0;ve<x;ve++)ne[ve]=54^q[ve],de[ve]=92^q[ve];return Y=U(b.concat([ne,Y])),U(b.concat([de,Y]))}(V,L,F):V(F);return R=null,B?F.toString(B):F}}}function I(){var T=[].slice.call(arguments).join(" ");throw new Error([T,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}M.fill(0),s.createHash=function(T){return P(T)},s.createHmac=P,s.randomBytes=function(T,L){if(!L||!L.call)return new b(E(T));try{L.call(this,void 0,new b(E(T)))}catch(V){L(V)}};var D,A=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],N=function(T){s[T]=function(){I("sorry,",T,"is not implemented yet")}};for(D in A)N(A[D])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){var b=n("./helpers");function S(I,D){I[D>>5]|=128<<D%32,I[14+(D+64>>>9<<4)]=D;for(var A=1732584193,N=-271733879,T=-1732584194,L=271733878,V=0;V<I.length;V+=16){var R=A,B=N,F=T,U=L,A=E(A,N,T,L,I[V+0],7,-680876936),L=E(L,A,N,T,I[V+1],12,-389564586),T=E(T,L,A,N,I[V+2],17,606105819),N=E(N,T,L,A,I[V+3],22,-1044525330);A=E(A,N,T,L,I[V+4],7,-176418897),L=E(L,A,N,T,I[V+5],12,1200080426),T=E(T,L,A,N,I[V+6],17,-1473231341),N=E(N,T,L,A,I[V+7],22,-45705983),A=E(A,N,T,L,I[V+8],7,1770035416),L=E(L,A,N,T,I[V+9],12,-1958414417),T=E(T,L,A,N,I[V+10],17,-42063),N=E(N,T,L,A,I[V+11],22,-1990404162),A=E(A,N,T,L,I[V+12],7,1804603682),L=E(L,A,N,T,I[V+13],12,-40341101),T=E(T,L,A,N,I[V+14],17,-1502002290),A=w(A,N=E(N,T,L,A,I[V+15],22,1236535329),T,L,I[V+1],5,-165796510),L=w(L,A,N,T,I[V+6],9,-1069501632),T=w(T,L,A,N,I[V+11],14,643717713),N=w(N,T,L,A,I[V+0],20,-373897302),A=w(A,N,T,L,I[V+5],5,-701558691),L=w(L,A,N,T,I[V+10],9,38016083),T=w(T,L,A,N,I[V+15],14,-660478335),N=w(N,T,L,A,I[V+4],20,-405537848),A=w(A,N,T,L,I[V+9],5,568446438),L=w(L,A,N,T,I[V+14],9,-1019803690),T=w(T,L,A,N,I[V+3],14,-187363961),N=w(N,T,L,A,I[V+8],20,1163531501),A=w(A,N,T,L,I[V+13],5,-1444681467),L=w(L,A,N,T,I[V+2],9,-51403784),T=w(T,L,A,N,I[V+7],14,1735328473),A=x(A,N=w(N,T,L,A,I[V+12],20,-1926607734),T,L,I[V+5],4,-378558),L=x(L,A,N,T,I[V+8],11,-2022574463),T=x(T,L,A,N,I[V+11],16,1839030562),N=x(N,T,L,A,I[V+14],23,-35309556),A=x(A,N,T,L,I[V+1],4,-1530992060),L=x(L,A,N,T,I[V+4],11,1272893353),T=x(T,L,A,N,I[V+7],16,-155497632),N=x(N,T,L,A,I[V+10],23,-1094730640),A=x(A,N,T,L,I[V+13],4,681279174),L=x(L,A,N,T,I[V+0],11,-358537222),T=x(T,L,A,N,I[V+3],16,-722521979),N=x(N,T,L,A,I[V+6],23,76029189),A=x(A,N,T,L,I[V+9],4,-640364487),L=x(L,A,N,T,I[V+12],11,-421815835),T=x(T,L,A,N,I[V+15],16,530742520),A=M(A,N=x(N,T,L,A,I[V+2],23,-995338651),T,L,I[V+0],6,-198630844),L=M(L,A,N,T,I[V+7],10,1126891415),T=M(T,L,A,N,I[V+14],15,-1416354905),N=M(N,T,L,A,I[V+5],21,-57434055),A=M(A,N,T,L,I[V+12],6,1700485571),L=M(L,A,N,T,I[V+3],10,-1894986606),T=M(T,L,A,N,I[V+10],15,-1051523),N=M(N,T,L,A,I[V+1],21,-2054922799),A=M(A,N,T,L,I[V+8],6,1873313359),L=M(L,A,N,T,I[V+15],10,-30611744),T=M(T,L,A,N,I[V+6],15,-1560198380),N=M(N,T,L,A,I[V+13],21,1309151649),A=M(A,N,T,L,I[V+4],6,-145523070),L=M(L,A,N,T,I[V+11],10,-1120210379),T=M(T,L,A,N,I[V+2],15,718787259),N=M(N,T,L,A,I[V+9],21,-343485551),A=P(A,R),N=P(N,B),T=P(T,F),L=P(L,U)}return Array(A,N,T,L)}function C(I,D,A,N,T,L){return P((D=P(P(D,I),P(N,L)))<<T|D>>>32-T,A)}function E(I,D,A,N,T,L,V){return C(D&A|~D&N,I,D,T,L,V)}function w(I,D,A,N,T,L,V){return C(D&N|A&~N,I,D,T,L,V)}function x(I,D,A,N,T,L,V){return C(D^A^N,I,D,T,L,V)}function M(I,D,A,N,T,L,V){return C(A^(D|~N),I,D,T,L,V)}function P(I,D){var A=(65535&I)+(65535&D);return(I>>16)+(D>>16)+(A>>16)<<16|65535&A}t.exports=function(I){return b.hash(I,S,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){t.exports=function(b){for(var S,C=new Array(b),E=0;E<b;E++)!(3&E)&&(S=4294967296*Math.random()),C[E]=S>>>((3&E)<<3)&255;return C}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){var b=n("./helpers");function S(w,x){w[x>>5]|=128<<24-x%32,w[15+(x+64>>9<<4)]=x;for(var M,P,I,D=Array(80),A=1732584193,N=-271733879,T=-1732584194,L=271733878,V=-1009589776,R=0;R<w.length;R+=16){for(var B=A,F=N,U=T,q=L,Y=V,ne=0;ne<80;ne++){D[ne]=ne<16?w[R+ne]:E(D[ne-3]^D[ne-8]^D[ne-14]^D[ne-16],1);var de=C(C(E(A,5),(de=N,P=T,I=L,(M=ne)<20?de&P|~de&I:!(M<40)&&M<60?de&P|de&I|P&I:de^P^I)),C(C(V,D[ne]),(M=ne)<20?1518500249:M<40?1859775393:M<60?-1894007588:-899497514)),V=L,L=T,T=E(N,30),N=A,A=de}A=C(A,B),N=C(N,F),T=C(T,U),L=C(L,q),V=C(V,Y)}return Array(A,N,T,L,V)}function C(w,x){var M=(65535&w)+(65535&x);return(w>>16)+(x>>16)+(M>>16)<<16|65535&M}function E(w,x){return w<<x|w>>>32-x}t.exports=function(w){return b.hash(w,S,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){function b(x,M){var P=(65535&x)+(65535&M);return(x>>16)+(M>>16)+(P>>16)<<16|65535&P}function S(x,M){var P,I=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),D=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),A=new Array(64);x[M>>5]|=128<<24-M%32,x[15+(M+64>>9<<4)]=M;for(var N,T,L=0;L<x.length;L+=16){for(var V=D[0],R=D[1],B=D[2],F=D[3],U=D[4],q=D[5],Y=D[6],ne=D[7],de=0;de<64;de++)A[de]=de<16?x[de+L]:b(b(b((T=A[de-2],E(T,17)^E(T,19)^w(T,10)),A[de-7]),(T=A[de-15],E(T,7)^E(T,18)^w(T,3))),A[de-16]),P=b(b(b(b(ne,E(T=U,6)^E(T,11)^E(T,25)),U&q^~U&Y),I[de]),A[de]),N=b(E(N=V,2)^E(N,13)^E(N,22),V&R^V&B^R&B),ne=Y,Y=q,q=U,U=b(F,P),F=B,B=R,R=V,V=b(P,N);D[0]=b(V,D[0]),D[1]=b(R,D[1]),D[2]=b(B,D[2]),D[3]=b(F,D[3]),D[4]=b(U,D[4]),D[5]=b(q,D[5]),D[6]=b(Y,D[6]),D[7]=b(ne,D[7])}return D}var C=n("./helpers"),E=function(x,M){return x>>>M|x<<32-M},w=function(x,M){return x>>>M};t.exports=function(x){return C.hash(x,S,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){s.read=function(b,S,C,E,L){var x,M,P=8*L-E-1,I=(1<<P)-1,D=I>>1,A=-7,N=C?L-1:0,T=C?-1:1,L=b[S+N];for(N+=T,x=L&(1<<-A)-1,L>>=-A,A+=P;0<A;x=256*x+b[S+N],N+=T,A-=8);for(M=x&(1<<-A)-1,x>>=-A,A+=E;0<A;M=256*M+b[S+N],N+=T,A-=8);if(x===0)x=1-D;else{if(x===I)return M?NaN:1/0*(L?-1:1);M+=Math.pow(2,E),x-=D}return(L?-1:1)*M*Math.pow(2,x-E)},s.write=function(b,S,C,E,w,V){var M,P,I=8*V-w-1,D=(1<<I)-1,A=D>>1,N=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=E?0:V-1,L=E?1:-1,V=S<0||S===0&&1/S<0?1:0;for(S=Math.abs(S),isNaN(S)||S===1/0?(P=isNaN(S)?1:0,M=D):(M=Math.floor(Math.log(S)/Math.LN2),S*(E=Math.pow(2,-M))<1&&(M--,E*=2),2<=(S+=1<=M+A?N/E:N*Math.pow(2,1-A))*E&&(M++,E/=2),D<=M+A?(P=0,M=D):1<=M+A?(P=(S*E-1)*Math.pow(2,w),M+=A):(P=S*Math.pow(2,A-1)*Math.pow(2,w),M=0));8<=w;b[C+T]=255&P,T+=L,P/=256,w-=8);for(M=M<<w|P,I+=w;0<I;b[C+T]=255&M,T+=L,M/=256,I-=8);b[C+T-L]|=128*V}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,t,s){(function(a,l,c,h,d,p,m,v,y){var b,S,C;function E(){}(a=t.exports={}).nextTick=(S=typeof window<"u"&&window.setImmediate,C=typeof window<"u"&&window.postMessage&&window.addEventListener,S?function(w){return window.setImmediate(w)}:C?(b=[],window.addEventListener("message",function(w){var x=w.source;x!==window&&x!==null||w.data!=="process-tick"||(w.stopPropagation(),0<b.length&&b.shift()())},!0),function(w){b.push(w),window.postMessage("process-tick","*")}):function(w){setTimeout(w,0)}),a.title="browser",a.browser=!0,a.env={},a.argv=[],a.on=E,a.addListener=E,a.once=E,a.off=E,a.removeListener=E,a.removeAllListeners=E,a.emit=E,a.binding=function(w){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(w){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Loe);var Boe=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],ex=Boe;ex=ex.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)});ex.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function Ooe(i,e){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var t=n.call(i,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Voe(i){var e=Ooe(i,"string");return typeof e=="symbol"?e:String(e)}function Vn(i,e,n){return e=Voe(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}var jt={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},Mr,Eu;Mr={},Vn(Mr,"".concat(jt.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(jt.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),Vn(Mr,"".concat(jt.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(jt.position,`;
  `)}),Vn(Mr,"".concat(jt.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(jt.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),Vn(Mr,"".concat(jt.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(jt.pointSize,`;
    `)}),Vn(Mr,"".concat(jt.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(jt.diffuseColor,`;
  `)}),Vn(Mr,"".concat(jt.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(jt.fragColor,`;
  `)}),Vn(Mr,"".concat(jt.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(jt.emissive,`;
    `)}),Vn(Mr,"".concat(jt.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(jt.roughness,`;
    `)}),Vn(Mr,"".concat(jt.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(jt.metalness,`;
    `)}),Vn(Mr,"".concat(jt.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(jt.ao,`;
    `)}),Vn(Mr,"".concat(jt.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(jt.bump," - (dot(").concat(jt.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),Vn(Mr,"".concat(jt.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(jt.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(jt.depthAlpha,`;
    `)});Eu={},Vn(Eu,"".concat(jt.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(jt.position,`, 1.0 );
  `)}),Vn(Eu,"".concat(jt.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(jt.position,`;
  `)}),Vn(Eu,"".concat(jt.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(jt.diffuseColor,`;
  `)}),Vn(Eu,"".concat(jt.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(jt.fragColor,`;
  `)});var Tr;Tr={},Vn(Tr,"".concat(jt.position),"*"),Vn(Tr,"".concat(jt.positionRaw),"*"),Vn(Tr,"".concat(jt.normal),"*"),Vn(Tr,"".concat(jt.pointSize),["PointsMaterial"]),Vn(Tr,"".concat(jt.diffuseColor),"*"),Vn(Tr,"".concat(jt.fragColor),"*"),Vn(Tr,"".concat(jt.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),Vn(Tr,"".concat(jt.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Vn(Tr,"".concat(jt.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Vn(Tr,"".concat(jt.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),Vn(Tr,"".concat(jt.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),Vn(Tr,"".concat(jt.depthAlpha),"*");new Gi;new Q;it.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ge(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ys.line={uniforms:xp.merge([it.common,it.fog,it.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new Q;new Q;new ln;new ln;new ln;new Q;new ct;new M5;new Q;new Gi;new Wi;new ln;const Foe={key:0,args:[0,1,64]},Uoe={key:1,args:[.5,1,64]},zoe={key:2},$oe=["tone-mapped","map","side","color"];new Qe(16777215);class iC extends Fn{constructor(){const e=iC.SkyShader,n=new yr({name:e.name,uniforms:xp.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:er,depthWrite:!1});super(new dl(1,1,1),n),this.isSky=!0}}iC.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Q},up:{value:new Q(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var Hoe={exports:{}};(function(i,e){(function(n,t){i.exports=t()})(Doe,function(){var n=function(){function t(y){return l.appendChild(y.dom),y}function s(y){for(var b=0;b<l.children.length;b++)l.children[b].style.display=b===y?"block":"none";a=y}var a=0,l=document.createElement("div");l.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",l.addEventListener("click",function(y){y.preventDefault(),s(++a%l.children.length)},!1);var c=(performance||Date).now(),h=c,d=0,p=t(new n.Panel("FPS","#0ff","#002")),m=t(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var v=t(new n.Panel("MB","#f08","#201"));return s(0),{REVISION:16,dom:l,addPanel:t,showPanel:s,begin:function(){c=(performance||Date).now()},end:function(){d++;var y=(performance||Date).now();if(m.update(y-c,200),y>h+1e3&&(p.update(1e3*d/(y-h),100),h=y,d=0,v)){var b=performance.memory;v.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return y},update:function(){c=this.end()},domElement:l,setMode:s}};return n.Panel=function(t,s,a){var l=1/0,c=0,h=Math.round,d=h(window.devicePixelRatio||1),p=80*d,m=48*d,v=3*d,y=2*d,b=3*d,S=15*d,C=74*d,E=30*d,w=document.createElement("canvas");w.width=p,w.height=m,w.style.cssText="width:80px;height:48px";var x=w.getContext("2d");return x.font="bold "+9*d+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=a,x.fillRect(0,0,p,m),x.fillStyle=s,x.fillText(t,v,y),x.fillRect(b,S,C,E),x.fillStyle=a,x.globalAlpha=.9,x.fillRect(b,S,C,E),{dom:w,update:function(M,P){l=Math.min(l,M),c=Math.max(c,M),x.fillStyle=a,x.globalAlpha=1,x.fillRect(0,0,p,S),x.fillStyle=s,x.fillText(h(M)+" "+t+" ("+h(l)+"-"+h(c)+")",v,y),x.drawImage(w,b+d,S,C-d,E,b,S,C-d,E),x.fillRect(b+C-d,S,d,E),x.fillStyle=a,x.globalAlpha=.9,x.fillRect(b+C-d,S,d,h((1-M/P)*E))}}},n})})(Hoe);var Goe=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,Woe=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const Fp=new Q(0,0,0),rC=new Q(0,0,0),joe=new Q(0,0,0);function uk(i,e,n){const t=Fp.setFromMatrixPosition(i.matrixWorld);t.project(e);const s=n.width/2,a=n.height/2;return[(Number.isNaN(t.x)?0:t.x)*s+s,-(t.y*a)+a]}function Koe(i,e){const n=Fp.setFromMatrixPosition(i.matrixWorld),t=rC.setFromMatrixPosition(e.matrixWorld),s=n.sub(t),a=e.getWorldDirection(joe);return s.angleTo(a)>Math.PI/2}function qoe(i,e,n,t){const s=Fp.setFromMatrixPosition(i.matrixWorld),a=s.clone();a.project(e),n.setFromCamera(new Ge(a.x,a.y),e);const l=n.intersectObjects(t,!0);if(l.length>0){const c=l[0].distance;return s.distanceTo(n.ray.origin)<c}return!0}function Xoe(i,e){if(e instanceof xs)return e.zoom;if(e instanceof Ln){const n=Fp.setFromMatrixPosition(i.matrixWorld),t=rC.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,a=n.distanceTo(t);return 1/(2*Math.tan(s/2)*a)}else return 1}function Yoe(i,e,n){if(e instanceof Ln||e instanceof xs){const t=Fp.setFromMatrixPosition(i.matrixWorld),s=rC.setFromMatrixPosition(e.matrixWorld),a=t.distanceTo(s),l=(n[1]-n[0])/(e.far-e.near),c=n[1]-l*e.far;return Math.round(l*a+c)}}const tx=i=>Math.abs(i)<1e-10?0:i;function Z6(i,e,n=""){let t="matrix3d(";for(let s=0;s!==16;s++)t+=tx(e[s]*i.elements[s])+(s!==15?",":")");return n+t}const Joe=(i=>e=>Z6(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Zoe=(i=>(e,n)=>Z6(e,i(n),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]),Qoe=["geometry","material"];new fl;var mc=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-mc.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?mc.Bounce.In(i*2)*.5:mc.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),wf=function(){return performance.now()},ele=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,n){e===void 0&&(e=wf()),n===void 0&&(n=!1);var t=Object.keys(this._tweens);if(t.length===0)return!1;for(;t.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<t.length;s++){var a=this._tweens[t[s]],l=!n;a&&a.update(e,l)===!1&&!n&&delete this._tweens[t[s]]}t=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),Iu={Linear:function(i,e){var n=i.length-1,t=n*e,s=Math.floor(t),a=Iu.Utils.Linear;return e<0?a(i[0],i[1],t):e>1?a(i[n],i[n-1],n-t):a(i[s],i[s+1>n?n:s+1],t-s)},Bezier:function(i,e){for(var n=0,t=i.length-1,s=Math.pow,a=Iu.Utils.Bernstein,l=0;l<=t;l++)n+=s(1-e,t-l)*s(e,l)*i[l]*a(t,l);return n},CatmullRom:function(i,e){var n=i.length-1,t=n*e,s=Math.floor(t),a=Iu.Utils.CatmullRom;return i[0]===i[n]?(e<0&&(s=Math.floor(t=n*(1+e))),a(i[(s-1+n)%n],i[s],i[(s+1)%n],i[(s+2)%n],t-s)):e<0?i[0]-(a(i[0],i[0],i[1],i[1],-t)-i[0]):e>1?i[n]-(a(i[n],i[n],i[n-1],i[n-1],t-n)-i[n]):a(i[s?s-1:0],i[s],i[n<s+1?n:s+1],i[n<s+2?n:s+2],t-s)},Utils:{Linear:function(i,e,n){return(e-i)*n+i},Bernstein:function(i,e){var n=Iu.Utils.Factorial;return n(i)/n(e)/n(i-e)},Factorial:function(){var i=[1];return function(e){var n=1;if(i[e])return i[e];for(var t=e;t>1;t--)n*=t;return i[e]=n,n}}(),CatmullRom:function(i,e,n,t,s){var a=(n-i)*.5,l=(t-e)*.5,c=s*s,h=s*c;return(2*e-2*n+a+l)*h+(-3*e+3*n-2*a-l)*c+a*s+e}}},tle=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),nx=new ele,nle=function(){function i(e,n){n===void 0&&(n=nx),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=mc.Linear.None,this._interpolationFunction=Iu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=tle.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,n){if(e===void 0&&(e=wf()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var t in this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var a in this._valuesEnd)s[a]=this._valuesEnd[a];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,n,t,s,a){for(var l in t){var c=e[l],h=Array.isArray(c),d=h?"array":typeof c,p=!h&&Array.isArray(t[l]);if(!(d==="undefined"||d==="function")){if(p){var m=t[l];if(m.length===0)continue;for(var v=[c],y=0,b=m.length;y<b;y+=1){var S=this._handleRelativeValue(c,m[y]);if(isNaN(S)){p=!1,console.warn("Found invalid interpolation list. Skipping.");break}v.push(S)}p&&(t[l]=v)}if((d==="object"||h)&&c&&!p){n[l]=h?[]:{};var C=c;for(var E in C)n[l][E]=C[E];s[l]=h?[]:{};var m=t[l];if(!this._isDynamic){var w={};for(var E in m)w[E]=m[E];t[l]=m=w}this._setupProperties(C,n[l],m,s[l],a)}else(typeof n[l]>"u"||a)&&(n[l]=c),h||(n[l]*=1),p?s[l]=t[l].slice().reverse():s[l]=n[l]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=wf()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=wf()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=nx),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=mc.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=Iu.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,n){var t;if(e===void 0&&(e=wf()),n===void 0&&(n=!0),this._isPaused)return!0;var s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;n&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((t=this._repeatDelayTime)!==null&&t!==void 0?t:this._delayTime),c=this._duration+this._repeat*l,h=this._calculateElapsedPortion(a,l,c),d=this._easingFunction(h),p=this._calculateCompletionStatus(a,l);if(p==="repeat"&&this._processRepetition(a,l),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),p==="about-to-repeat"&&this._processRepetition(a,l),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),p==="repeat"||p==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(p==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var m=0,v=this._chainedTweens.length;m<v;m++)this._chainedTweens[m].start(this._startTime+this._duration,!1)}return p!=="completed"},i.prototype._calculateElapsedPortion=function(e,n,t){if(this._duration===0||e>t)return 1;var s=e%n,a=Math.min(s/this._duration,1);return a===0&&e!==0&&e%this._duration===0?1:a},i.prototype._calculateCompletionStatus=function(e,n){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},i.prototype._processRepetition=function(e,n){var t=Math.min(Math.trunc((e-this._duration)/n)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=t);for(var s in this._valuesStartRepeat){var a=this._valuesEnd[s];!this._yoyo&&typeof a=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(a)),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=n*t},i.prototype._updateProperties=function(e,n,t,s){for(var a in t)if(n[a]!==void 0){var l=n[a]||0,c=t[a],h=Array.isArray(e[a]),d=Array.isArray(c),p=!h&&d;p?e[a]=this._interpolationFunction(c,s):typeof c=="object"&&c?this._updateProperties(e[a],l,c,s):(c=this._handleRelativeValue(l,c),typeof c=="number"&&(e[a]=l+(c-l)*s))}},i.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},i.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],t=this._valuesEnd[e];typeof t=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(t):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},i}(),pa=nx;pa.getAll.bind(pa);pa.removeAll.bind(pa);pa.add.bind(pa);pa.remove.bind(pa);var ile=pa.update.bind(pa);class rle{constructor(){this.TileType={Brick:1,Iron:2,Grass:3,Water:4,Home:9},this.Direction={None:0,Up:1,Right:2,Down:3,Left:4},this.CampType={Player:"Player",Enermy:"Enermy"},this.ObjectType={Tank:"Tank",Bullet:"Bullet"},this.GameState={Prepare:"Prepare",Gaming:"Gaming",Finish:"Finish"},this.maps=this.getMapDatas()}makeTween(e){var n=new nle(e);return n}makeTweenTankAppear(e,n){e.position.y=-1,this.makeTween(e.position).to({y:0},1e3).easing(mc.Back.Out).onComplete(n).start()}randInt(e,n){if(n<e)return e;var t=n+1-e;return Math.floor(Math.random()*t)+e}randSplice(e){var n=this.randInt(0,e.length-1);return e.splice(n,1)[0]}formatNum(e,n){if(typeof e=="number")return this.formatNumImpl(e,n);if(e instanceof Q)return e.x=this.formatNumImpl(e.x,n),e.y=this.formatNumImpl(e.y,n),e.z=this.formatNumImpl(e.z,n),e}formatNumImpl(e,n){if(n==0)return Math.abs(e)<1e-4?0:e;var t=Math.round(e/n);return n*t}getDirectionRotation(e){return[0,0,-Math.PI/2,Math.PI,Math.PI/2][e]}isEqual(e,n){return Math.abs(e-n)<=1e-4}removeArrayValue(e,n){for(var t=e.indexOf(n);t>=0;)e.splice(t,1),t=e.indexOf(n)}removeArrayValueIf(e,n){for(var t=e.findIndex(n);t>=0;)e.splice(t,1),t=e.indexOf(n)}getMapDatas(){const e=this.getSrcMaps(),n=[];for(let t=0;t<e.length;++t){const s=e[t],a=this.getMapData(s);n.push(a)}return n}getMapData(e){var n=e.split(`
`);n.shift(),n.pop();var t=[];for(let a=0;a<n.length;a++){var s=n[a].trim().split("	").map(c=>parseInt(c)||0);t[a]=s}return t}getDirectionVector(e){var t=[null,new Q(0,0,-1),new Q(1,0,0),new Q(0,0,1),new Q(-1,0,0)][e];return t?t.clone():null}getSrcMaps(){return[`1
            0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0	0
            0																									0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1	1	1	1	1			1	1			1	1		0
            0		1	1			1	1			1	1			1	1			1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0		1	1			1	1											1	1			1	1		0
            0										1	1			1	1										0
            0										1	1			1	1										0
            1	1			1	1	1	1											1	1	1	1			1	1
            2	2			1	1	1	1											1	1	1	1			2	2
            0										1	1			1	1										0
            0										1	1	1	1	1	1										0
            0		1	1			1	1			1	1	1	1	1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1			1	1			1	1		1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1										1	1			1	1			0
            0		1	1			1	1				1	1	1	1			1	1			1	1			0
            0											1	9		1											0
            0	0	0	0	0	0	0	0	0	0	0	1			1	0	0	0	0	0	0	0	0	0	0	0
`]}}const rt=new rle;class sle{constructor(){this.Rows=24,this.Cols=26,this.Width=this.Cols*.5,this.Height=this.Rows*.5,this.HalfWidth=this.Width/2,this.HalfHeight=this.Height/2}getRCByIndex(e){let n={};return n.r=Math.floor(e/this.Cols),n.c=e%this.Cols,n}getIndexByRC(e,n){if(typeof e=="object")var{r:e,c:n}=e;return e*this.Cols+n}getIndexByPosition(e){return this.getIndexByRC(getRCByPosition(e))}getPositionByRC(e,n){if(typeof e=="object")var{r:e,c:n}=e;return new Q(n*.5-6.25,0,e*.5-5.75)}getRCByPosition(e){let n={};return n.r=Math.floor((e.z+6)/.5),n.c=Math.floor((e.x+6.5)/.5),n}isIndexInBound(e){return e>=0&&e<this.Rows*this.Cols}isRCInBound(e,n){if(typeof e=="object")var{r:e,c:n}=e;return e>=0&&e<this.Rows&&n>=0&&n<this.Cols}isGridInBound(e){return!(e.minR<0||e.minC<0||e.maxR>=this.Rows||e.maxC>=this.Cols)}getStandGrid(e,n){let t={};const s=new Q(e.x-n/2,0,e.z-n/2),a=new Q(e.x+n/2,0,e.z+n/2),l=this.getRCByPosition(s),c=this.getRCByPosition(a);return t.minR=Math.min(l.r,c.r),t.minC=Math.min(l.c,c.c),t.maxR=Math.max(l.r,c.r),t.maxC=Math.max(l.c,c.c),Number.isInteger(a.x/.5)&&(t.maxC-=1),Number.isInteger(a.z/.5)&&(t.maxR-=1),t}}var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sC(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ale(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(t){var s=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(n,t,s.get?s:{enumerable:!0,get:function(){return i[t]}})}),n}var Up=function(e,n,t,s,a){var l=s-e,c=a-n;return l*l+c*c<=t*t},ole=function(e,n,t,s,a,l){var c=e-s,h=a-n,d=t+l;return c*c+h*h<=d*d},zv=function(e,n,t,s,a,l,c){var h=[a-e,l-n],d=[t-e,s-n],p=Cb(d,d),m=Cb(h,d),v=m/p;v=v<0?0:v,v=v>1?1:v;var y=[d[0]*v+e-a,d[1]*v+n-l],b=Cb(y,y);return b<=c*c};function Cb(i,e){return i[0]*e[0]+i[1]*e[1]}var lle=zv,cle=function(e,n,t,s,a,l,c){return lle(s,a,l,c,e,n,t)},aC=function(e,n,t,s,a,l,c){var h=t/2,d=s/2,p=Math.abs(a-(e+t/2)),m=Math.abs(l-(n+s/2));if(p>h+c||m>d+c)return!1;if(p<=h||m<=d)return!0;var v=p-h,y=m-d;return v*v+y*y<=c*c},ule=aC,hle=function(e,n,t,s,a,l,c){return ule(s,a,l,c,e,n,t)};function Sb(i,e,n,t){return Math.sqrt(Math.pow(i-n,2)+Math.pow(e-t,2))}var oC=function(e,n,t,s,a,l,c){return c=c||1,Math.abs(Sb(e,n,t,s)-(Sb(e,n,a,l)+Sb(t,s,a,l)))<=c};const dle=oC;var zp=function(e,n,t,s){var a=e.length,l=!1,c,h;for(c=0,h=a-2;c<a;c+=2)e[c+1]>t!=e[h+1]>t&&n<(e[h]-e[c])*(t-e[c+1])/(e[h+1]-e[c+1])+e[c]&&(l=!l),h=c;if(l)return!0;for(c=0;c<a;c+=2){var d=e[c],p=e[c+1],m,v;if(c===a-2?(m=e[0],v=e[1]):(m=e[c+2],v=e[c+3]),dle(d,p,m,v,n,t,s))return!0}return!1},fle=zp,hk=zv,Q6=function(e,n,t,s,a){if(fle(e,n,t,a))return!0;for(var l=e.length,c=0;c<l-2;c+=2)if(hk(e[c],e[c+1],e[c+2],e[c+3],n,t,s))return!0;return hk(e[0],e[1],e[l-2],e[l-1],n,t,s)},ple=Q6,mle=function(e,n,t,s,a){return ple(s,e,n,t,a)},eN=10,z0,$0,lC;function tN(){z0=[],$0=[];for(var i=0;i<=eN;i++){var e=4<<i;z0[i]=.5/Math.cos(4*Math.acos(0)/e),$0[i]=.5/(Math.cos(2*Math.acos(0)/e)*Math.cos(2*Math.acos(0)/e))}lC=!0}function nN(i,e,n,t,s,a,l){for(var c=1;c<=eN;c++){var h=(n+s)*z0[c],d=(t+a)*z0[c],p=i-h,m=e-d;if(p*p+m*m<=l)return!0;var v=s-h,y=a-d;if(p*v+m*y>=0&&p*v+m*y<=v*v+y*y&&(m*v-p*y>=0||l*(v*v+y*y)>=(m*v-p*y)*(m*v-p*y)))return!0;var b=n-h,S=t-d;if(p*b+m*S>=0&&p*b+m*S<=b*b+S*S&&(m*b-p*S<=0||l*(b*b+S*S)>=(m*b-p*S)*(m*b-p*S)))return!0;var C=(n+h)*$0[c],E=(t+d)*$0[c];if((C-i)*(C-i)+(E-e)*(E-e)<l){s=h,a=d;continue}var w=h-C+h,x=d-E+d;if((w-i)*(w-i)+(x-e)*(x-e)<l){n=h,t=d;continue}var M=C-h,P=E-d;if(m*M-p*P<=0||l*(M*M+P*P)>(m*M-p*P)*(m*M-p*P)){if(p*M+m*P>0){if(Math.abs(p*M+m*P)<=M*M+P*P||(i-C)*(n-C)+(e-E)*(t-E)>=0){s=h,a=d;continue}}else if(-(p*M+m*P)<=M*M+P*P||(i-w)*(s-w)+(e-x)*(a-x)>=0){n=h,t=d;continue}}return!1}return!1}function gle(i,e,n,t,s,a,l,c){lC||tN();var h=Math.abs(s-i)*c,d=Math.abs(a-e)*l;n*=c,t*=l;var p=l*c;return h*h+(t-d)*(t-d)<=p*p||(n-h)*(n-h)+d*d<=p*p||h*t+d*n<=n*t||(h*t+d*n-n*t)*(h*t+d*n-n*t)<=p*p*(n*n+t*t)&&h*n-d*t>=-t*t&&h*n-d*t<=n*n?!0:(h-n)*(h-n)+(d-t)*(d-t)<=p*p||h<=n&&d-p<=t||d<=t&&h-p<=n?nN(h,d,n,0,0,t,p*p):!1}function vle(i,e,n,t,s,a,l){lC||tN();var c=Math.abs(s-i),h=Math.abs(a-e);return c*c+(t-h)*(t-h)<=l*l||(n-c)*(n-c)+h*h<=l*l||c*t+h*n<=n*t||(c*t+h*n-n*t)*(c*t+h*n-n*t)<=l*l*(n*n+t*t)&&c*n-h*t>=-t*t&&c*n-h*t<=n*n?!0:(c-n)*(c-n)+(h-t)*(h-t)<=l*l||c<=n&&h-l<=t||h<=t&&c-l<=n?nN(c,h,n,0,0,t,l*l):!1}var iN={ellipseCircle:vle,ellipseEllipse:gle},yle=iN,rN=function(e,n,t,s,a,l,c){return yle.ellipseCircle(e,n,t,s,a,l,c)},ble=rN,_le=function(e,n,t,s,a,l,c){return ble(s,a,l,c,e,n,t)},Go=Up,xle=aC,sN=function(e,n,t,s,a,l,c,h){h=h||1;var d=0;if(d+=Go(e,n,t,s,a)?1:0,d+=Go(e,n,t,s+l,a)?1:0,d+=Go(e,n,t,s,a+c)?1:0,d+=Go(e,n,t,s+l,a+c)?1:0,d===0)return xle(s,a,l,c,e,n,t);if(d>=1&&d<=3)return!0;if(d===4)return!Go(e,n,t-h,s,a)||!Go(e,n,t-h,s+l,a)||!Go(e,n,t-h,s,a+c)||!Go(e,n,t-h,s+l,a+c)},wle=zv,dk=Up,aN=function(e,n,t,s,a,l,c,h){return h=h||1,wle(s,a,l,c,e,n,t)&&!(dk(e,n,t-h,s,a)&&dk(e,n,t-h,l,c))},fk=Up,oN=function(e,n,t,s,a,l){return l=l||1,fk(e,n,t,s,a)&&!fk(e,n,t-l,s,a)},lN=function(e,n,t,s,a,l,c,h){var d=t-e,p=s-n,m=c-a,v=h-l,y=(-p*(e-a)+d*(n-l))/(-m*p+d*v),b=(m*(n-l)-v*(e-a))/(-m*p+d*v);return y>=0&&y<=1&&b>=0&&b<=1},Cle=zp,Sle=lN,cC=function(e,n,t,s,a,l){var c=a.length;if(Cle(a,e,n,l))return!0;for(var h=0;h<c;h+=2){var d=(h+2)%c;if(Sle(e,n,t,s,a[h],a[h+1],a[d],a[d+1]))return!0}return!1},Ele=cC,Mle=function(e,n,t,s,a,l){return Ele(n,t,s,a,e,l)},uC=function(e,n){for(var t=e,s=n,a=[t,s],l,c,h,d,p,m,v=0;v<a.length;v++)for(var y=a[v],b=0;b<y.length;b+=2){var S=(b+2)%y.length,C={x:y[S+1]-y[b+1],y:y[b]-y[S]};for(l=c=null,m=0;m<t.length;m+=2)h=C.x*t[m]+C.y*t[m+1],(l===null||h<l)&&(l=h),(c===null||h>c)&&(c=h);for(d=p=null,m=0;m<s.length;m+=2)h=C.x*s[m]+C.y*s[m+1],(d===null||h<d)&&(d=h),(p===null||h>p)&&(p=h);if(c<d||p<l)return!1}return!0},Tle=uC,cN=function(e,n,t,s,a){var l=[n,t,n+s,t,n+s,t+a,n,t+a];return Tle(e,l)},hC=function(e,n,t,s,a,l,c,h){a-=e,c-=e,l-=n,h-=n;var d=Math.pow(c-a,2)/t/t+Math.pow(h-l,2)/s/s,p=2*a*(c-a)/t/t+2*l*(h-l)/s/s,m=a*a/t/t+l*l/s/s-1,v=p*p-4*d*m;if(v===0){var y=-p/2/d;return y>=0&&y<=1}else if(v>0){var b=Math.sqrt(v),S=(-p+b)/2/d,C=(-p-b)/2/d;return S>=0&&S<=1||C>=0&&C<=1}else return!1},kle=hC,uN=function(e,n,t,s,a,l,c,h){return kle(a,l,c,h,e,n,t,s)},Ale=zp,pk=uN,hN=function(e,n,t,s,a){if(Ale(e,n,t))return!0;for(var l=e.length,c=0;c<l-2;c+=2)if(pk(e[c],e[c+1],e[c+2],e[c+3],n,t,s,a))return!0;return pk(e[0],e[1],e[l-2],e[l-1],n,t,s,a)},$v=function(e,n,t,s,a,l){return a>=e&&a<=e+t&&l>=n&&l<=n+s},Ple=function(e,n,t,s,a,l,c,h){return e<a+c&&e+t>a&&n<l+h&&n+s>l},Ile=function(e,n,t,s,a){const l=Math.atan2(s-n,t-e)-Math.PI/2,c=a/2,h=Math.cos(l)*c,d=Math.sin(l)*c;return[e-h,n-d,t-h,s-d,t+h,s+d,e+h,n+d]};const Xg=Ile,Nle=uC,mk=cC,Rle=lN;var dN=function(e,n,t,s,a,l,c,h,d,p){return d||p?Dle(e,n,t,s,a,l,c,h,d,p):Rle(e,n,t,s,a,l,c,h)};function Dle(i,e,n,t,s,a,l,c,h,d){if(h&&d)return Nle(Xg(i,e,n,t,h),Xg(s,a,l,c,d));if(h)return mk(s,a,l,c,Xg(i,e,n,t,h));if(d)return mk(i,e,n,t,Xg(s,a,l,c,h))}var gk=$v,Yg=dN,fN=function(e,n,t,s,a,l,c,h){return gk(a,l,c,h,e,n)||gk(a,l,c,h,t,s)?!0:Yg(e,n,t,s,a,l,a+c,l)||Yg(e,n,t,s,a+c,l,a+c,l+h)||Yg(e,n,t,s,a,l+h,a+c,l+h)||Yg(e,n,t,s,a,l,a,l+h)},Lle=fN,Ble=function(e,n,t,s,a,l,c,h){return Lle(a,l,c,h,e,n,t,s)},Ole=cN,Vle=function(e,n,t,s,a){return Ole(a,e,n,t,s)},Jg=hC,Fle=$v,pN=function(e,n,t,s,a,l,c,h){return Fle(a,l,c,h,e,n)||Jg(e,n,t,s,a,l,a+c,l)||Jg(e,n,t,s,a,l+h,a+c,l+h)||Jg(e,n,t,s,a,l,a,l+h)||Jg(e,n,t,s,a+c,l,a+c,l+h)},Ule=pN,zle=function(e,n,t,s,a,l,c,h){return Ule(a,l,c,h,e,n,t,s)},$le=sN,Hle=function(e,n,t,s,a,l,c,h){return $le(a,l,c,e,n,t,s,h)},Gle=$v,Wle=function(e,n,t,s,a,l){return Gle(t,s,a,l,e,n)},jle=zp,Kle=function(e,n,t,s){return jle(t,e,n,s)},qle=Up,Xle=function(e,n,t,s,a){return qle(t,s,a,e,n)},Yle=oC,Jle=function(e,n,t,s,a,l){return Yle(t,s,a,l,e,n)},mN=function(e,n,t,s,a,l){var c=Math.pow(a-e,2)/(t*t),h=Math.pow(l-n,2)/(s*s);return c+h<=1},Zle=mN,Qle=function(e,n,t,s,a,l){return Zle(t,s,a,l,e,n)},ece=oN,tce=function(e,n,t,s,a,l){return ece(e,n,t,s,a,l)},nce=aN,ice=function(e,n,t,s,a,l,c,h){return nce(a,l,c,e,n,t,s,h)},rce=iN,sce=function(e,n,t,s,a,l,c,h){return rce.ellipseEllipse(e,n,t,s,a,l,c,h)},ace=hN,oce=function(e,n,t,s,a){return ace(a,e,n,t,s)},Zg={circlePoint:Up,circleCircle:ole,circleLine:cle,circleBox:hle,circlePolygon:mle,circleEllipse:_le,circleOutlineBox:sN,circleOutlineLine:aN,circleOutlinePoint:oN,polygonPoint:zp,polygonLine:Mle,polygonPolygon:uC,polygonBox:cN,polygonCircle:Q6,polygonEllipse:hN,boxPoint:$v,boxBox:Ple,boxLine:Ble,boxPolygon:Vle,boxCircle:aC,boxEllipse:zle,boxCircleOutline:Hle,pointBox:Wle,pointPolygon:Kle,pointCircle:Xle,pointLine:Jle,pointEllipse:Qle,pointCircleOutline:tce,lineLine:dN,lineBox:fN,linePolygon:cC,lineCircle:zv,linePoint:oC,lineEllipse:uN,lineCircleOutline:ice,ellipsePoint:mN,ellipseLine:hC,ellipseBox:pN,ellipseCircle:rN,ellipseEllipse:sce,ellipsePolygon:oce};const Ir=class Ir{constructor(e,n){this.shapeType=e,e==Ir.Box?this.size=n:e==Ir.Circle&&(this.radius=n)}get center(){return this._center}set center(e){this._center=e}intersect(e){if(this.shapeType==Ir.Box&&e.shapeType==Ir.Box){var n=this.center.x-this.size/2,t=this.center.z-this.size/2,s=this.size,a=this.size,l=e.center.x-e.size/2,c=e.center.z-e.size/2,h=e.size,d=e.size,p=Zg.boxBox(n,t,s,a,l,c,h,d);return p}else if(this.shapeType==Ir.Box&&e.shapeType==Ir.Circle){var n=this.center.x-this.size/2,t=this.center.z-this.size/2,s=this.size,a=this.size,m=e.center.x,v=e.center.z,y=e.radius,p=Zg.boxCircle(n,t,s,a,m,v,y);return p}else if(this.shapeType==Ir.Circle&&e.shapeType==Ir.Box){var m=this.center.x,v=this.center.z,y=this.radius,l=e.center.x-e.size/2,c=e.center.z-e.size/2,h=e.size,d=e.size,p=Zg.circleBox(m,v,y,n,t,s,a);return p}else if(this.shapeType==Ir.Circle&&e.shapeType==Ir.Circle){var n=this.center.x,t=this.center.z,b=this.radius,l=this.center.x,c=this.center.z,S=this.radius,p=Zg.circleCircle(n,t,b,l,c,S);return p}}};Lm(Ir,"Box","Box"),Lm(Ir,"Circle","Circle");let ll=Ir;class lce{constructor(){this.obj=this.createObject(),this.speed=4,this.power=1,game.timer.tick(this.update.bind(this)),this.shape=new ll(ll.Circle,.15)}createObject(){var e=game.ResStore.bullet_player.clone();return e}get CampType(){return rt.CampType.Player}get ObjectType(){return rt.ObjectType.Bullet}get Shape(){return this.shape.center=this.obj.position,this.shape}init(e){this.tank=e;var n=e.position.clone().add(new Q(0,.5,0));this.obj.position.copy(n),this.direction=e.getDirection(),this.speed=this.initBulletSpeed(),this.canHitTileTypes=this.initCanHitTileTypes(),this.power=this.initPower()}initBulletSpeed(){return this.tank.starCount<=0?4:8}initPower(){return this.tank.starCount<=2?1:2}initCanHitTileTypes(){var e=[];return e.push(rt.TileType.Home),e.push(rt.TileType.Brick),this.tank.getStarCount()>=3&&e.push(rt.TileType.Iron),e}onRemove(){}update({delta:e,elapsed:n}){var t=this.speed*e,s=rt.getDirectionVector(this.direction).multiplyScalar(t);this.obj.position.add(s)}}class cce{constructor(){this.obj=this.createObject(),this.moveSpeed=2,this.shootDiff=.1,this.shootAcc=0,this.starCount=1,this.bullets=[],this.shape=new ll(ll.Box,1)}getMaxBulletCount(){return this.starCount<=1?1:2}getStarCount(){return this.starCount}createObject(){var e=game.ResStore.tank_player_1.clone();this.lightTarget=new _n,e.add(this.lightTarget),this.lightTarget.position.set(0,.5,-10);var n=new Av(16777215);return n.position.set(0,.5,-.3),n.castShadow=!0,n.target=this.lightTarget,n.angle=Math.PI/4,n.intensity=10,n.penumbra=.2,e.add(n),this.spotLight=n,e}init(){game.onAddController.push(this.onAddController.bind(this)),game.onRemoveController.push(this.onRemoveController.bind(this))}onRemove(){rt.removeArrayValue(game.onAddController,this.onAddController.bind(this)),rt.removeArrayValue(game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e.CampType==rt.CampType.Player&&e.ObjectType==rt.ObjectType.Bullet&&this.bullets.push(e)}onRemoveController(e){e.CampType==rt.CampType.Player&&e.ObjectType==rt.ObjectType.Bullet&&rt.removeArrayValue(this.bullets,e)}get CampType(){return rt.CampType.Player}get ObjectType(){return rt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}ITank_update({delta:e,elapsed:n}){window.game.gameState==rt.GameState.Gaming&&(this.checkMove({delta:e,elapsed:n}),this.checkShoot({delta:e,elapsed:n}))}checkMove({delta:e,elapsed:n}){var t=game.getMoveDirection();if(t){var s=rt.getDirectionRotation(t);s!=this.rotation.y&&(this.rotation.y=s,rt.formatNum(this.position,.25));var a=game.getCanMoveLength(this,t);if(a>0){var l=this.moveSpeed*e;l>a&&(l=a);var c=rt.getDirectionVector(t).multiplyScalar(l);this.position.add(c)}}}getDirection(){return this.rotation.y==0?rt.Direction.Up:this.rotation.y==Math.PI?rt.Direction.Down:this.rotation.y==-Math.PI/2?rt.Direction.Right:this.rotation.y==Math.PI/2?rt.Direction.Left:rt.Direction.Up}shootPressed(){return game.inputs.c||game.inputs.j||game.inputs.f}checkShoot({delta:e,elapsed:n}){this.bullets.length>=this.getMaxBulletCount()||(this.shootAcc+=e,this.shootPressed()&&this.shootAcc>=this.shootDiff&&(this.shootAcc=0,this.doShoot()))}doShoot(){var e=new lce;game.addController(e),e.init(this)}get position(){return this.obj.position}get rotation(){return this.obj.rotation}}class uce{constructor(){this.delta=0,this.elapsed=0,this.records=[],this.shouldRemoves=[],this.shouldAdds=[]}update({delta:e,elapsed:n}){this.delta=e,this.elapsed=n;for(let s=0;s<this.records.length;++s){var t=this.records[s];t.acc+=e,t.acc>=t.second&&(t.callback({delta:t.acc,elapsed:n}),t.acc=0,t.times&&(t.times-=1,t.times<=0&&this.shouldRemoves.push(t.callback)))}this.checkRemove(),this.checkAdd()}checkAdd(){for(let e=0;e<this.shouldAdds.length;++e)this.records.push(this.shouldAdds[e]);this.shouldAdds.length=0}checkRemove(){for(let n=0;n<this.shouldRemoves.length;++n){var e=t=>t.callback==this.shouldRemoves[n];rt.removeArrayValueIf(this.records,e),rt.removeArrayValueIf(this.shouldAdds,e)}this.shouldRemoves.length=0}tick(e,n){n=n||0;var t={second:n,callback:e,acc:0};this.shouldAdds.push(t)}tickOnce(e,n){n=n||0;var t={second:n,callback:e,acc:0,times:1};this.shouldAdds.push(t)}untick(e){this.shouldRemoves.push(e)}}class Eb{constructor(e,n,t){this.enermyMan=e,this.bornIndex=n,this.tankType=t,this.obj=this.createObject(),this.obj.position.copy(this.getBornPos(this.bornIndex)),this.obj.rotation.y=rt.getDirectionRotation(rt.Direction.Down),this.state=0,this.shape=new ll(ll.Box,1),this.moveSpeed=this.getSpeedTemplate(),this.blood=this.getBloodTemplate(),this.direction=this.getRandDirection(),this.moveDirectAcc=0,this.moveDirectMax=3}get position(){return this.obj.position}get rotation(){return this.obj.rotation}createObject(){var e=window.game.ResStore[`enermy${this.tankType+1}`],n=e.clone();return n}getSpeedTemplate(){var e=[2,3,4,2];return e[this.tankType]}getBloodTemplate(){var e=[1,2,1,4];return e[this.tankType]}getRandDirection(){for(var e=[rt.Direction.Up,rt.Direction.Right,rt.Direction.Down,rt.Direction.Left],n=[window.game.getCanMoveLength(this,rt.Direction.Up),window.game.getCanMoveLength(this,rt.Direction.Right),window.game.getCanMoveLength(this,rt.Direction.Down),window.game.getCanMoveLength(this,rt.Direction.Left)],t=n.findIndex(s=>s<=0);t>=0;)e.splice(t,1),n.splice(t,1),t=n.findIndex(s=>s<=0);return e.length>0?rt.randSplice(e):rt.Direction.Down}onAppearFinish(){this.state=1}get CampType(){return rt.CampType.Enermy}get ObjectType(){return rt.ObjectType.Tank}get Shape(){return this.shape.center=this.obj.position,this.shape}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new Q(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new Q(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new Q(.25,0,.25))}ITank_update({delta:e}){this.state!=0&&(this.wantChangeDirection&&(this.direction=this.getRandDirection(),this.wantChangeDirection=!1,this.moveDirectAcc=0,this.moveDirectMax=1e3,rt.randInt(1,5)),this.checkMove({delta:e}),this.moveDirectAcc>=this.moveDirectMax&&(this.wantChangeDirection=!0))}checkMove({delta:e}){var n=rt.getDirectionRotation(this.direction);n!=this.rotation.y&&(this.rotation.y=n,rt.formatNum(this.position,.25));var t=game.getCanMoveLength(this,this.direction);if(t>0){var s=this.moveSpeed*e;s>t&&(s=t);var a=rt.getDirectionVector(this.direction).multiplyScalar(s);this.position.add(a),this.moveDirectAcc+=e}else this.wantChangeDirection=!0}}class hce{constructor(){this.tanks=[],this.bornIndex=0,this.bornTime={},this.totalCount=20,this.destroyCount=0,console.log("EnermyMan")}start(){window.game.timer.tick(this.update.bind(this),1),window.game.onAddController.push(this.onAddController.bind(this)),window.game.onRemoveController.push(this.onRemoveController.bind(this))}dispose(){window.game.timer.untick(this.update.bind(this)),rt.removeArrayValue(window.game.onAddController,this.onAddController.bind(this)),rt.removeArrayValue(window.game.onRemoveController,this.onRemoveController.bind(this))}onAddController(e){e instanceof Eb&&this.tanks.push(e)}onRemoveController(e){e instanceof Eb&&(rt.removeArrayValue(this.tanks,e),this.destroyCount+=1)}getBornPos(e){if(e=e%3,e==0)return window.game.rc.getPositionByRC(0,0).add(new Q(.25,0,.25));if(e==1)return window.game.rc.getPositionByRC(0,12).add(new Q(.25,0,.25));if(e==2)return window.game.rc.getPositionByRC(0,24).add(new Q(.25,0,.25))}isEmptyBorn(){var e=this.bornTime[this.bornIndex]||0;return Date.now()-e>2e3}update({delta:e,elapsed:n}){for(;this.tanks.length<1&&this.isEmptyBorn();)this.makeEnermy()}makeEnermy(){var e=rt.randInt(0,3),n=new Eb(this,this.bornIndex,e);window.game.addController(n),rt.makeTweenTankAppear(n.obj,n.onAppearFinish.bind(n)),this.bornTime[this.bornIndex]=Date.now(),this.bornIndex+=1,this.bornIndex=this.bornIndex%3}}const{onLoop:dce}=Ip();class fce{constructor(e){Lm(this,"tick",0);this.scene=e.value.context.scene.value,this.camera=e.value.context.camera.value}startGame(){this.rc=new sle,this.inputs={},this.tiles=[],this.player_1=null,this.controllers=[],this.playerBullets=[],this.controllerShouldAdd=[],this.controllerShouldRemove=[],this.ITank_updates=[],this.onAddController=[],this.onRemoveController=[],this.timer=new uce,dce(this.update.bind(this));var e=this.ResStore.platform.clone();this.scene.add(e),this.tileRoot=new Ha,this.scene.add(this.tileRoot),this.startLevel(0),this.initInput(),e.visible=this.visible,this.tileRoot.visible=this.visible}startLevel(e){for(this.gameState=rt.GameState.Prepare;this.tileRoot.children.length>0;)this.tileRoot.remove(this.tileRoot.children[0]);this.initMap(e),this.initPlayer(),this.enermyMan&&this.enermyMan.dispose(),this.enermyMan=new hce,this.timer.tickOnce(()=>{this.showPlayerAppear()},1)}initPlayer(){this.player_1&&this.removeController(this.player_1),this.player_1=new cce,this.addController(this.player_1),this.player_1.position.copy(this.rc.getPositionByRC(22,9).add(new Q(-.25,-1,.25))),this.player_1.init()}showPlayerAppear(){rt.makeTween(this.player_1.obj.position).to({y:0},1e3).easing(mc.Back.Out).onComplete(()=>{this.gameState=rt.GameState.Gaming,this.enermyMan.start()}).start()}run(){this.loadResource()}loadResource(){this.ResStore={};const e=["tank/platform.fbx","tank/tile1.fbx","tank/tile2.fbx","tank/tile9.fbx","tank/enermy1.fbx","tank/enermy2.fbx","tank/enermy3.fbx","tank/enermy4.fbx","tank/bullet_player.fbx","tank/tank_player_1.fbx"];Ioe(e).then(n=>{for(let s=0;s<n.length;++s){const a=n[s],l=e[s];this.ResStore[l]=a;var t=l.split("/");t=t[t.length-1],t=t.split("."),t=t[0],this.ResStore[t]=a}this.brickHitMaterial=this.ResStore.tile1.children[0].material.clone(),this.brickHitMaterial.color.setHex(8912896),this.startGame()})}initInput(){document.addEventListener("keydown",e=>{this.inputs[e.key]=1}),document.addEventListener("keyup",e=>{this.inputs[e.key]=0})}initMap(e){var n=rt.maps[e];for(let l=0;l<n.length;l++){const c=n[l];for(let h=0;h<c.length;h++){const d=c[h],p=this.rc.getIndexByRC(l,h);var t=null,s=0;if(d==rt.TileType.Brick){var t=this.ResStore.tile1.clone();this.tileRoot.add(t),t.position.copy(this.rc.getPositionByRC(l,h)),s=1}else if(d==rt.TileType.Iron){var t=this.ResStore.tile2.clone();this.tileRoot.add(t),t.position.copy(this.rc.getPositionByRC(l,h)),s=1}else if(d==rt.TileType.Home){var t=this.ResStore.tile9.clone();this.tileRoot.add(t),t.position.x=h*.5-6,t.position.z=l*.5-5.5,s=2}if(s==1){var a={tileType:d,obj:t,blood:2};this.tiles[p]=a}else if(s==2){var a={tileType:d,obj:t,blood:1};this.tiles[p]=a,this.tiles[this.rc.getIndexByRC(l,h+1)]=a,this.tiles[this.rc.getIndexByRC(l+1,h)]=a,this.tiles[this.rc.getIndexByRC(l+1,h+1)]=a}if(!this.tiles[p]){var a={tileType:d,obj:t};this.tiles[p]=a}}}}getTile(e,n){var t=this.rc.getIndexByRC(e,n);return this.tiles[t]}getTilesByGrid(e){var n=[];for(let s=e.minR;s<=e.maxR;++s)for(let a=e.minC;a<=e.maxC;++a){var t=this.getTile(s,a);t.tileType&&n.push(t)}return n}getMoveDirection(){return this.inputs.w?rt.Direction.Up:this.inputs.s?rt.Direction.Down:this.inputs.a?rt.Direction.Left:this.inputs.d?rt.Direction.Right:rt.Direction.None}getBlockTileRCs(e,n){let t=[];if(n==rt.Direction.Up)for(let a=e.minR;a>=0;--a)for(let l=e.minC;l<=e.maxC;++l){var s=this.getTile(a,l);s.tileType&&t.push({r:a,c:l})}else if(n==rt.Direction.Down)for(let a=e.maxR;a<=this.rc.Rows-1;++a)for(let l=e.minC;l<=e.maxC;++l){var s=this.getTile(a,l);s.tileType&&t.push({r:a,c:l})}else if(n==rt.Direction.Left)for(let a=e.minC;a>=0;--a)for(let l=e.minR;l<=e.maxR;++l){var s=this.getTile(l,a);s.tileType&&t.push({r:l,c:a})}else if(n==rt.Direction.Right)for(let a=e.maxC;a<=this.rc.Cols-1;++a)for(let l=e.minR;l<=e.maxR;++l){var s=this.getTile(l,a);s.tileType&&t.push({r:l,c:a})}return t}getCanMoveLength(e,n){var t=e.position.clone(),s=this.rc.getStandGrid(e.position,1),a=this.getBlockTileRCs(s,n),l=a[0],c=0;if(!l)n==rt.Direction.Up?c=t.z- -5.5:n==rt.Direction.Down?c=5.5-t.z:n==rt.Direction.Left?c=t.x- -6:n==rt.Direction.Right&&(c=6-t.x);else{var h=this.rc.getPositionByRC(l);n==rt.Direction.Up?c=t.z-.5-(h.z+.25):n==rt.Direction.Down?c=h.z-.25-(t.z+.5):n==rt.Direction.Left?c=t.x-.5-(h.x+.25):n==rt.Direction.Right&&(c=h.x-.25-(t.x+.5))}return c}update({delta:e,elapsed:n}){ile(),this.checkRemoveController(),this.checkAddController();for(let t=0;t<this.ITank_updates.length;t++)this.ITank_updates[t].ITank_update({delta:e,elapsed:n});this.timer.update({delta:e,elapsed:n}),this.checkCollision({delta:e,elapsed:n}),this.checkRemoveController(),this.checkAddController(),this.makeCameraFollow({delta:e,elapsed:n})}makeCameraFollow({delta:e,elapsed:n}){}addController(e){e.obj&&this.tileRoot.add(e.obj),this.controllerShouldAdd.push(e),e.ITank_update&&this.ITank_updates.push(e);for(let t=0;t<this.onAddController.length;++t){var n=this.onAddController[t];n(e)}}checkAddController(){for(let e=0;e<this.controllerShouldAdd.length;e++){const n=this.controllerShouldAdd[e];this.controllers.push(n),n.CampType==rt.CampType.Player&&n.ObjectType==rt.ObjectType.Bullet&&this.playerBullets.push(n)}this.controllerShouldAdd.length=0}removeController(e){this.controllerShouldRemove.push(e),e.ITank_update&&rt.removeArrayValue(this.ITank_updates,e),e.onRemove&&e.onRemove();for(let t=0;t<this.onRemoveController.length;++t){var n=this.onRemoveController[t];n(e)}}checkRemoveController(){for(let e=0;e<this.controllerShouldRemove.length;e++){const n=this.controllerShouldRemove[e];rt.removeArrayValue(this.controllers,n),rt.removeArrayValue(this.playerBullets,n),this.tileRoot.remove(n.obj)}this.controllerShouldRemove.length=0}checkCollision({delta:e,elapsed:n}){for(let t=0;t<this.playerBullets.length;t++){const s=this.playerBullets[t];let a=this.rc.getStandGrid(s.obj.position,.5);if(this.rc.isGridInBound(a)){let l=this.getTilesByGrid(a);l.length>0&&this.onCollisionTiles(l,s)}else this.removeController(s)}for(let t=0;t<this.playerBullets.length;t++){const s=this.playerBullets[t];for(let a=0;a<this.enermyMan.tanks.length;a++){const l=this.enermyMan.tanks[a];if(l.Shape.intersect(s.Shape)){this.onCollisionBulletVsTank(s,l);break}}}}removeTile(e,n){}onCollisionTiles(e,n){this.removeController(n);for(let s=0;s<e.length;++s){var t=e[s];n.canHitTileTypes.indexOf(t.tileType)<0||(t.blood-=n.power,t.tileType==rt.TileType.Brick&&t.blood==1&&(t.obj.children[0].material=this.brickHitMaterial),t.blood<=0&&(t.tileType=0,this.tileRoot.remove(t.obj),t.obj=null))}}onCollisionBulletVsTank(e,n){this.removeController(e),this.removeController(n)}}const pce=jn("TresPerspectiveCamera",{position:[0,20,0],rotation:[0,0,0]},null,-1),mce=jn("TresAmbientLight",{intensity:1},null,-1),gce=jn("TresAxesHelper",null,null,-1),vce={__name:"TankMain",setup(i){const e=Dr(null);return hi(e,()=>{window.game=new fce(e),window.game.run()}),(n,t)=>{const s=zt("TresCanvas");return Bn(),Vi("div",null,[Fe(s,{ref_key:"canvasRef",ref:e,"clear-color":"#FDF5E6","window-size":""},{default:pt(()=>[pce,mce,gce,Fe(on(Roe))]),_:1},512)])}}};var p0={exports:{}},kd={},Mb={},Tb={},vk;function cn(){return vk||(vk=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i._registerNode=i.Konva=i.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}i.glob=typeof ju<"u"?ju:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},i.Konva={_global:i.glob,version:"9.3.12",isBrowser:n(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return i.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return i.Konva.DD.isDragging},isTransforming(){var s;return(s=i.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!i.Konva.DD.node},releaseCanvasOnDestroy:!0,document:i.glob.document,_injectGlobal(s){i.glob.Konva=s}};const t=s=>{i.Konva[s.prototype.getClassName()]=s};i._registerNode=t,i.Konva._injectGlobal(i.Konva)}(Tb)),Tb}var kb={},yk;function di(){return yk||(yk=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.Transform=void 0;const e=cn();class n{constructor(M=[1,0,0,1,0,0]){this.dirty=!1,this.m=M&&M.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(M){M.m[0]=this.m[0],M.m[1]=this.m[1],M.m[2]=this.m[2],M.m[3]=this.m[3],M.m[4]=this.m[4],M.m[5]=this.m[5]}point(M){var P=this.m;return{x:P[0]*M.x+P[2]*M.y+P[4],y:P[1]*M.x+P[3]*M.y+P[5]}}translate(M,P){return this.m[4]+=this.m[0]*M+this.m[2]*P,this.m[5]+=this.m[1]*M+this.m[3]*P,this}scale(M,P){return this.m[0]*=M,this.m[1]*=M,this.m[2]*=P,this.m[3]*=P,this}rotate(M){var P=Math.cos(M),I=Math.sin(M),D=this.m[0]*P+this.m[2]*I,A=this.m[1]*P+this.m[3]*I,N=this.m[0]*-I+this.m[2]*P,T=this.m[1]*-I+this.m[3]*P;return this.m[0]=D,this.m[1]=A,this.m[2]=N,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(M,P){var I=this.m[0]+this.m[2]*P,D=this.m[1]+this.m[3]*P,A=this.m[2]+this.m[0]*M,N=this.m[3]+this.m[1]*M;return this.m[0]=I,this.m[1]=D,this.m[2]=A,this.m[3]=N,this}multiply(M){var P=this.m[0]*M.m[0]+this.m[2]*M.m[1],I=this.m[1]*M.m[0]+this.m[3]*M.m[1],D=this.m[0]*M.m[2]+this.m[2]*M.m[3],A=this.m[1]*M.m[2]+this.m[3]*M.m[3],N=this.m[0]*M.m[4]+this.m[2]*M.m[5]+this.m[4],T=this.m[1]*M.m[4]+this.m[3]*M.m[5]+this.m[5];return this.m[0]=P,this.m[1]=I,this.m[2]=D,this.m[3]=A,this.m[4]=N,this.m[5]=T,this}invert(){var M=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),P=this.m[3]*M,I=-this.m[1]*M,D=-this.m[2]*M,A=this.m[0]*M,N=M*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=M*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=P,this.m[1]=I,this.m[2]=D,this.m[3]=A,this.m[4]=N,this.m[5]=T,this}getMatrix(){return this.m}decompose(){var M=this.m[0],P=this.m[1],I=this.m[2],D=this.m[3],A=this.m[4],N=this.m[5],T=M*D-P*I;let L={x:A,y:N,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(M!=0||P!=0){var V=Math.sqrt(M*M+P*P);L.rotation=P>0?Math.acos(M/V):-Math.acos(M/V),L.scaleX=V,L.scaleY=T/V,L.skewX=(M*I+P*D)/T,L.skewY=0}else if(I!=0||D!=0){var R=Math.sqrt(I*I+D*D);L.rotation=Math.PI/2-(D>0?Math.acos(-I/R):-Math.acos(I/R)),L.scaleX=T/R,L.scaleY=R,L.skewX=0,L.skewY=(M*I+P*D)/T}return L.rotation=i.Util._getRotation(L.rotation),L}}i.Transform=n;var t="[object Array]",s="[object Number]",a="[object String]",l="[object Boolean]",c=Math.PI/180,h=180/Math.PI,d="#",p="",m="0",v="Konva warning: ",y="Konva error: ",b="rgb(",S={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},C=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,E=[];const w=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(x){setTimeout(x,60)};i.Util={_isElement(x){return!!(x&&x.nodeType==1)},_isFunction(x){return!!(x&&x.constructor&&x.call&&x.apply)},_isPlainObject(x){return!!x&&x.constructor===Object},_isArray(x){return Object.prototype.toString.call(x)===t},_isNumber(x){return Object.prototype.toString.call(x)===s&&!isNaN(x)&&isFinite(x)},_isString(x){return Object.prototype.toString.call(x)===a},_isBoolean(x){return Object.prototype.toString.call(x)===l},isObject(x){return x instanceof Object},isValidSelector(x){if(typeof x!="string")return!1;var M=x[0];return M==="#"||M==="."||M===M.toUpperCase()},_sign(x){return x===0||x>0?1:-1},requestAnimFrame(x){E.push(x),E.length===1&&w(function(){const M=E;E=[],M.forEach(function(P){P()})})},createCanvasElement(){var x=document.createElement("canvas");try{x.style=x.style||{}}catch{}return x},createImageElement(){return document.createElement("img")},_isInDocument(x){for(;x=x.parentNode;)if(x==document)return!0;return!1},_urlToImage(x,M){var P=i.Util.createImageElement();P.onload=function(){M(P)},P.src=x},_rgbToHex(x,M,P){return((1<<24)+(x<<16)+(M<<8)+P).toString(16).slice(1)},_hexToRgb(x){x=x.replace(d,p);var M=parseInt(x,16);return{r:M>>16&255,g:M>>8&255,b:M&255}},getRandomColor(){for(var x=(Math.random()*16777215<<0).toString(16);x.length<6;)x=m+x;return d+x},getRGB(x){var M;return x in S?(M=S[x],{r:M[0],g:M[1],b:M[2]}):x[0]===d?this._hexToRgb(x.substring(1)):x.substr(0,4)===b?(M=C.exec(x.replace(/ /g,"")),{r:parseInt(M[1],10),g:parseInt(M[2],10),b:parseInt(M[3],10)}):{r:0,g:0,b:0}},colorToRGBA(x){return x=x||"black",i.Util._namedColorToRBA(x)||i.Util._hex3ColorToRGBA(x)||i.Util._hex4ColorToRGBA(x)||i.Util._hex6ColorToRGBA(x)||i.Util._hex8ColorToRGBA(x)||i.Util._rgbColorToRGBA(x)||i.Util._rgbaColorToRGBA(x)||i.Util._hslColorToRGBA(x)},_namedColorToRBA(x){var M=S[x.toLowerCase()];return M?{r:M[0],g:M[1],b:M[2],a:1}:null},_rgbColorToRGBA(x){if(x.indexOf("rgb(")===0){x=x.match(/rgb\(([^)]+)\)/)[1];var M=x.split(/ *, */).map(Number);return{r:M[0],g:M[1],b:M[2],a:1}}},_rgbaColorToRGBA(x){if(x.indexOf("rgba(")===0){x=x.match(/rgba\(([^)]+)\)/)[1];var M=x.split(/ *, */).map((P,I)=>P.slice(-1)==="%"?I===3?parseInt(P)/100:parseInt(P)/100*255:Number(P));return{r:M[0],g:M[1],b:M[2],a:M[3]}}},_hex8ColorToRGBA(x){if(x[0]==="#"&&x.length===9)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:parseInt(x.slice(7,9),16)/255}},_hex6ColorToRGBA(x){if(x[0]==="#"&&x.length===7)return{r:parseInt(x.slice(1,3),16),g:parseInt(x.slice(3,5),16),b:parseInt(x.slice(5,7),16),a:1}},_hex4ColorToRGBA(x){if(x[0]==="#"&&x.length===5)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:parseInt(x[4]+x[4],16)/255}},_hex3ColorToRGBA(x){if(x[0]==="#"&&x.length===4)return{r:parseInt(x[1]+x[1],16),g:parseInt(x[2]+x[2],16),b:parseInt(x[3]+x[3],16),a:1}},_hslColorToRGBA(x){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(x)){const[M,...P]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(x),I=Number(P[0])/360,D=Number(P[1])/100,A=Number(P[2])/100;let N,T,L;if(D===0)return L=A*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};A<.5?N=A*(1+D):N=A+D-A*D;const V=2*A-N,R=[0,0,0];for(let B=0;B<3;B++)T=I+1/3*-(B-1),T<0&&T++,T>1&&T--,6*T<1?L=V+(N-V)*6*T:2*T<1?L=N:3*T<2?L=V+(N-V)*(2/3-T)*6:L=V,R[B]=L*255;return{r:Math.round(R[0]),g:Math.round(R[1]),b:Math.round(R[2]),a:1}}},haveIntersection(x,M){return!(M.x>x.x+x.width||M.x+M.width<x.x||M.y>x.y+x.height||M.y+M.height<x.y)},cloneObject(x){var M={};for(var P in x)this._isPlainObject(x[P])?M[P]=this.cloneObject(x[P]):this._isArray(x[P])?M[P]=this.cloneArray(x[P]):M[P]=x[P];return M},cloneArray(x){return x.slice(0)},degToRad(x){return x*c},radToDeg(x){return x*h},_degToRad(x){return i.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),i.Util.degToRad(x)},_radToDeg(x){return i.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),i.Util.radToDeg(x)},_getRotation(x){return e.Konva.angleDeg?i.Util.radToDeg(x):x},_capitalize(x){return x.charAt(0).toUpperCase()+x.slice(1)},throw(x){throw new Error(y+x)},error(x){console.error(y+x)},warn(x){e.Konva.showWarnings&&console.warn(v+x)},each(x,M){for(var P in x)M(P,x[P])},_inRange(x,M,P){return M<=x&&x<P},_getProjectionToSegment(x,M,P,I,D,A){var N,T,L,V=(x-P)*(x-P)+(M-I)*(M-I);if(V==0)N=x,T=M,L=(D-P)*(D-P)+(A-I)*(A-I);else{var R=((D-x)*(P-x)+(A-M)*(I-M))/V;R<0?(N=x,T=M,L=(x-D)*(x-D)+(M-A)*(M-A)):R>1?(N=P,T=I,L=(P-D)*(P-D)+(I-A)*(I-A)):(N=x+R*(P-x),T=M+R*(I-M),L=(N-D)*(N-D)+(T-A)*(T-A))}return[N,T,L]},_getProjectionToLine(x,M,P){var I=i.Util.cloneObject(x),D=Number.MAX_VALUE;return M.forEach(function(A,N){if(!(!P&&N===M.length-1)){var T=M[(N+1)%M.length],L=i.Util._getProjectionToSegment(A.x,A.y,T.x,T.y,x.x,x.y),V=L[0],R=L[1],B=L[2];B<D&&(I.x=V,I.y=R,D=B)}}),I},_prepareArrayForTween(x,M,P){var I,D=[],A=[];if(x.length>M.length){var N=M;M=x,x=N}for(I=0;I<x.length;I+=2)D.push({x:x[I],y:x[I+1]});for(I=0;I<M.length;I+=2)A.push({x:M[I],y:M[I+1]});var T=[];return A.forEach(function(L){var V=i.Util._getProjectionToLine(L,D,P);T.push(V.x),T.push(V.y)}),T},_prepareToStringify(x){var M;x.visitedByCircularReferenceRemoval=!0;for(var P in x)if(x.hasOwnProperty(P)&&x[P]&&typeof x[P]=="object"){if(M=Object.getOwnPropertyDescriptor(x,P),x[P].visitedByCircularReferenceRemoval||i.Util._isElement(x[P]))if(M.configurable)delete x[P];else return null;else if(i.Util._prepareToStringify(x[P])===null)if(M.configurable)delete x[P];else return null}return delete x.visitedByCircularReferenceRemoval,x},_assign(x,M){for(var P in M)x[P]=M[P];return x},_getFirstPointerId(x){return x.touches?x.changedTouches[0].identifier:x.pointerId||999},releaseCanvas(...x){e.Konva.releaseCanvasOnDestroy&&x.forEach(M=>{M.width=0,M.height=0})},drawRoundedRectPath(x,M,P,I){let D=0,A=0,N=0,T=0;typeof I=="number"?D=A=N=T=Math.min(I,M/2,P/2):(D=Math.min(I[0]||0,M/2,P/2),A=Math.min(I[1]||0,M/2,P/2),T=Math.min(I[2]||0,M/2,P/2),N=Math.min(I[3]||0,M/2,P/2)),x.moveTo(D,0),x.lineTo(M-A,0),x.arc(M-A,A,A,Math.PI*3/2,0,!1),x.lineTo(M,P-T),x.arc(M-T,P-T,T,0,Math.PI/2,!1),x.lineTo(N,P),x.arc(N,P-N,N,Math.PI/2,Math.PI,!1),x.lineTo(0,D),x.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}}(kb)),kb}var Ad={},Ab={},qn={},bk;function pn(){if(bk)return qn;bk=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.getComponentValidator=qn.getBooleanValidator=qn.getNumberArrayValidator=qn.getFunctionValidator=qn.getStringOrGradientValidator=qn.getStringValidator=qn.getNumberOrAutoValidator=qn.getNumberOrArrayOfNumbersValidator=qn.getNumberValidator=qn.alphaComponent=qn.RGBComponent=void 0;const i=cn(),e=di();function n(b){return e.Util._isString(b)?'"'+b+'"':Object.prototype.toString.call(b)==="[object Number]"||e.Util._isBoolean(b)?b:Object.prototype.toString.call(b)}function t(b){return b>255?255:b<0?0:Math.round(b)}qn.RGBComponent=t;function s(b){return b>1?1:b<1e-4?1e-4:b}qn.alphaComponent=s;function a(){if(i.Konva.isUnminified)return function(b,S){return e.Util._isNumber(b)||e.Util.warn(n(b)+' is a not valid value for "'+S+'" attribute. The value should be a number.'),b}}qn.getNumberValidator=a;function l(b){if(i.Konva.isUnminified)return function(S,C){let E=e.Util._isNumber(S),w=e.Util._isArray(S)&&S.length==b;return!E&&!w&&e.Util.warn(n(S)+' is a not valid value for "'+C+'" attribute. The value should be a number or Array<number>('+b+")"),S}}qn.getNumberOrArrayOfNumbersValidator=l;function c(){if(i.Konva.isUnminified)return function(b,S){var C=e.Util._isNumber(b),E=b==="auto";return C||E||e.Util.warn(n(b)+' is a not valid value for "'+S+'" attribute. The value should be a number or "auto".'),b}}qn.getNumberOrAutoValidator=c;function h(){if(i.Konva.isUnminified)return function(b,S){return e.Util._isString(b)||e.Util.warn(n(b)+' is a not valid value for "'+S+'" attribute. The value should be a string.'),b}}qn.getStringValidator=h;function d(){if(i.Konva.isUnminified)return function(b,S){const C=e.Util._isString(b),E=Object.prototype.toString.call(b)==="[object CanvasGradient]"||b&&b.addColorStop;return C||E||e.Util.warn(n(b)+' is a not valid value for "'+S+'" attribute. The value should be a string or a native gradient.'),b}}qn.getStringOrGradientValidator=d;function p(){if(i.Konva.isUnminified)return function(b,S){return e.Util._isFunction(b)||e.Util.warn(n(b)+' is a not valid value for "'+S+'" attribute. The value should be a function.'),b}}qn.getFunctionValidator=p;function m(){if(i.Konva.isUnminified)return function(b,S){const C=Int8Array?Object.getPrototypeOf(Int8Array):null;return C&&b instanceof C||(e.Util._isArray(b)?b.forEach(function(E){e.Util._isNumber(E)||e.Util.warn('"'+S+'" attribute has non numeric element '+E+". Make sure that all elements are numbers.")}):e.Util.warn(n(b)+' is a not valid value for "'+S+'" attribute. The value should be a array of numbers.')),b}}qn.getNumberArrayValidator=m;function v(){if(i.Konva.isUnminified)return function(b,S){var C=b===!0||b===!1;return C||e.Util.warn(n(b)+' is a not valid value for "'+S+'" attribute. The value should be a boolean.'),b}}qn.getBooleanValidator=v;function y(b){if(i.Konva.isUnminified)return function(S,C){return S==null||e.Util.isObject(S)||e.Util.warn(n(S)+' is a not valid value for "'+C+'" attribute. The value should be an object with properties '+b),S}}return qn.getComponentValidator=y,qn}var _k;function un(){return _k||(_k=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Factory=void 0;const e=di(),n=pn();var t="get",s="set";i.Factory={addGetterSetter(a,l,c,h,d){i.Factory.addGetter(a,l,c),i.Factory.addSetter(a,l,h,d),i.Factory.addOverloadedGetterSetter(a,l)},addGetter(a,l,c){var h=t+e.Util._capitalize(l);a.prototype[h]=a.prototype[h]||function(){var d=this.attrs[l];return d===void 0?c:d}},addSetter(a,l,c,h){var d=s+e.Util._capitalize(l);a.prototype[d]||i.Factory.overWriteSetter(a,l,c,h)},overWriteSetter(a,l,c,h){var d=s+e.Util._capitalize(l);a.prototype[d]=function(p){return c&&p!==void 0&&p!==null&&(p=c.call(this,p,l)),this._setAttr(l,p),h&&h.call(this),this}},addComponentsGetterSetter(a,l,c,h,d){var p=c.length,m=e.Util._capitalize,v=t+m(l),y=s+m(l),b,S;a.prototype[v]=function(){var E={};for(b=0;b<p;b++)S=c[b],E[S]=this.getAttr(l+m(S));return E};var C=(0,n.getComponentValidator)(c);a.prototype[y]=function(E){var w=this.attrs[l],x;h&&(E=h.call(this,E)),C&&C.call(this,E,l);for(x in E)E.hasOwnProperty(x)&&this._setAttr(l+m(x),E[x]);return E||c.forEach(M=>{this._setAttr(l+m(M),void 0)}),this._fireChangeEvent(l,w,E),d&&d.call(this),this},i.Factory.addOverloadedGetterSetter(a,l)},addOverloadedGetterSetter(a,l){var c=e.Util._capitalize(l),h=s+c,d=t+c;a.prototype[l]=function(){return arguments.length?(this[h](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(a,l,c,h){e.Util.error("Adding deprecated "+l);var d=t+e.Util._capitalize(l),p=l+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[d]=function(){e.Util.error(p);var m=this.attrs[l];return m===void 0?c:m},i.Factory.addSetter(a,l,h,function(){e.Util.error(p)}),i.Factory.addOverloadedGetterSetter(a,l)},backCompat(a,l){e.Util.each(l,function(c,h){var d=a.prototype[h],p=t+e.Util._capitalize(c),m=s+e.Util._capitalize(c);function v(){d.apply(this,arguments),e.Util.error('"'+c+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}a.prototype[c]=v,a.prototype[p]=v,a.prototype[m]=v})},afterSetFilter(){this._filterUpToDate=!1}}}(Ab)),Ab}var Ba={},Oa={},xk;function gN(){if(xk)return Oa;xk=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.HitContext=Oa.SceneContext=Oa.Context=void 0;const i=di(),e=cn();function n(E){var w=[],x=E.length,M=i.Util,P,I;for(P=0;P<x;P++)I=E[P],M._isNumber(I)?I=Math.round(I*1e3)/1e3:M._isString(I)||(I=I+""),w.push(I);return w}var t=",",s="(",a=")",l="([",c="])",h=";",d="()",p="=",m=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],v=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const y=100;let b=class{constructor(w){this.canvas=w,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(w){w.fillEnabled()&&this._fill(w)}_fill(w){}strokeShape(w){w.hasStroke()&&this._stroke(w)}_stroke(w){}fillStrokeShape(w){w.attrs.fillAfterStrokeEnabled?(this.strokeShape(w),this.fillShape(w)):(this.fillShape(w),this.strokeShape(w))}getTrace(w,x){var M=this.traceArr,P=M.length,I="",D,A,N,T;for(D=0;D<P;D++)A=M[D],N=A.method,N?(T=A.args,I+=N,w?I+=d:i.Util._isArray(T[0])?I+=l+T.join(t)+c:(x&&(T=T.map(L=>typeof L=="number"?Math.floor(L):L)),I+=s+T.join(t)+a)):(I+=A.property,w||(I+=p+A.val)),I+=h;return I}clearTrace(){this.traceArr=[]}_trace(w){var x=this.traceArr,M;x.push(w),M=x.length,M>=y&&x.shift()}reset(){var w=this.getCanvas().getPixelRatio();this.setTransform(1*w,0,0,1*w,0,0)}getCanvas(){return this.canvas}clear(w){var x=this.getCanvas();w?this.clearRect(w.x||0,w.y||0,w.width||0,w.height||0):this.clearRect(0,0,x.getWidth()/x.pixelRatio,x.getHeight()/x.pixelRatio)}_applyLineCap(w){const x=w.attrs.lineCap;x&&this.setAttr("lineCap",x)}_applyOpacity(w){var x=w.getAbsoluteOpacity();x!==1&&this.setAttr("globalAlpha",x)}_applyLineJoin(w){const x=w.attrs.lineJoin;x&&this.setAttr("lineJoin",x)}setAttr(w,x){this._context[w]=x}arc(w,x,M,P,I,D){this._context.arc(w,x,M,P,I,D)}arcTo(w,x,M,P,I){this._context.arcTo(w,x,M,P,I)}beginPath(){this._context.beginPath()}bezierCurveTo(w,x,M,P,I,D){this._context.bezierCurveTo(w,x,M,P,I,D)}clearRect(w,x,M,P){this._context.clearRect(w,x,M,P)}clip(...w){this._context.clip.apply(this._context,w)}closePath(){this._context.closePath()}createImageData(w,x){var M=arguments;if(M.length===2)return this._context.createImageData(w,x);if(M.length===1)return this._context.createImageData(w)}createLinearGradient(w,x,M,P){return this._context.createLinearGradient(w,x,M,P)}createPattern(w,x){return this._context.createPattern(w,x)}createRadialGradient(w,x,M,P,I,D){return this._context.createRadialGradient(w,x,M,P,I,D)}drawImage(w,x,M,P,I,D,A,N,T){var L=arguments,V=this._context;L.length===3?V.drawImage(w,x,M):L.length===5?V.drawImage(w,x,M,P,I):L.length===9&&V.drawImage(w,x,M,P,I,D,A,N,T)}ellipse(w,x,M,P,I,D,A,N){this._context.ellipse(w,x,M,P,I,D,A,N)}isPointInPath(w,x,M,P){return M?this._context.isPointInPath(M,w,x,P):this._context.isPointInPath(w,x,P)}fill(...w){this._context.fill.apply(this._context,w)}fillRect(w,x,M,P){this._context.fillRect(w,x,M,P)}strokeRect(w,x,M,P){this._context.strokeRect(w,x,M,P)}fillText(w,x,M,P){P?this._context.fillText(w,x,M,P):this._context.fillText(w,x,M)}measureText(w){return this._context.measureText(w)}getImageData(w,x,M,P){return this._context.getImageData(w,x,M,P)}lineTo(w,x){this._context.lineTo(w,x)}moveTo(w,x){this._context.moveTo(w,x)}rect(w,x,M,P){this._context.rect(w,x,M,P)}roundRect(w,x,M,P,I){this._context.roundRect(w,x,M,P,I)}putImageData(w,x,M){this._context.putImageData(w,x,M)}quadraticCurveTo(w,x,M,P){this._context.quadraticCurveTo(w,x,M,P)}restore(){this._context.restore()}rotate(w){this._context.rotate(w)}save(){this._context.save()}scale(w,x){this._context.scale(w,x)}setLineDash(w){this._context.setLineDash?this._context.setLineDash(w):"mozDash"in this._context?this._context.mozDash=w:"webkitLineDash"in this._context&&(this._context.webkitLineDash=w)}getLineDash(){return this._context.getLineDash()}setTransform(w,x,M,P,I,D){this._context.setTransform(w,x,M,P,I,D)}stroke(w){w?this._context.stroke(w):this._context.stroke()}strokeText(w,x,M,P){this._context.strokeText(w,x,M,P)}transform(w,x,M,P,I,D){this._context.transform(w,x,M,P,I,D)}translate(w,x){this._context.translate(w,x)}_enableTrace(){var w=this,x=m.length,M=this.setAttr,P,I,D=function(A){var N=w[A],T;w[A]=function(){return I=n(Array.prototype.slice.call(arguments,0)),T=N.apply(w,arguments),w._trace({method:A,args:I}),T}};for(P=0;P<x;P++)D(m[P]);w.setAttr=function(){M.apply(w,arguments);var A=arguments[0],N=arguments[1];(A==="shadowOffsetX"||A==="shadowOffsetY"||A==="shadowBlur")&&(N=N/this.canvas.getPixelRatio()),w._trace({property:A,val:N})}}_applyGlobalCompositeOperation(w){const x=w.attrs.globalCompositeOperation;var M=!x||x==="source-over";M||this.setAttr("globalCompositeOperation",x)}};Oa.Context=b,v.forEach(function(E){Object.defineProperty(b.prototype,E,{get(){return this._context[E]},set(w){this._context[E]=w}})});class S extends b{constructor(w,{willReadFrequently:x=!1}={}){super(w),this._context=w._canvas.getContext("2d",{willReadFrequently:x})}_fillColor(w){var x=w.fill();this.setAttr("fillStyle",x),w._fillFunc(this)}_fillPattern(w){this.setAttr("fillStyle",w._getFillPattern()),w._fillFunc(this)}_fillLinearGradient(w){var x=w._getLinearGradient();x&&(this.setAttr("fillStyle",x),w._fillFunc(this))}_fillRadialGradient(w){const x=w._getRadialGradient();x&&(this.setAttr("fillStyle",x),w._fillFunc(this))}_fill(w){const x=w.fill(),M=w.getFillPriority();if(x&&M==="color"){this._fillColor(w);return}const P=w.getFillPatternImage();if(P&&M==="pattern"){this._fillPattern(w);return}const I=w.getFillLinearGradientColorStops();if(I&&M==="linear-gradient"){this._fillLinearGradient(w);return}const D=w.getFillRadialGradientColorStops();if(D&&M==="radial-gradient"){this._fillRadialGradient(w);return}x?this._fillColor(w):P?this._fillPattern(w):I?this._fillLinearGradient(w):D&&this._fillRadialGradient(w)}_strokeLinearGradient(w){const x=w.getStrokeLinearGradientStartPoint(),M=w.getStrokeLinearGradientEndPoint(),P=w.getStrokeLinearGradientColorStops(),I=this.createLinearGradient(x.x,x.y,M.x,M.y);if(P){for(var D=0;D<P.length;D+=2)I.addColorStop(P[D],P[D+1]);this.setAttr("strokeStyle",I)}}_stroke(w){var x=w.dash(),M=w.getStrokeScaleEnabled();if(w.hasStroke()){if(!M){this.save();var P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(w),x&&w.dashEnabled()&&(this.setLineDash(x),this.setAttr("lineDashOffset",w.dashOffset())),this.setAttr("lineWidth",w.strokeWidth()),w.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var I=w.getStrokeLinearGradientColorStops();I?this._strokeLinearGradient(w):this.setAttr("strokeStyle",w.stroke()),w._strokeFunc(this),M||this.restore()}}_applyShadow(w){var x,M,P,I=(x=w.getShadowRGBA())!==null&&x!==void 0?x:"black",D=(M=w.getShadowBlur())!==null&&M!==void 0?M:5,A=(P=w.getShadowOffset())!==null&&P!==void 0?P:{x:0,y:0},N=w.getAbsoluteScale(),T=this.canvas.getPixelRatio(),L=N.x*T,V=N.y*T;this.setAttr("shadowColor",I),this.setAttr("shadowBlur",D*Math.min(Math.abs(L),Math.abs(V))),this.setAttr("shadowOffsetX",A.x*L),this.setAttr("shadowOffsetY",A.y*V)}}Oa.SceneContext=S;class C extends b{constructor(w){super(w),this._context=w._canvas.getContext("2d",{willReadFrequently:!0})}_fill(w){this.save(),this.setAttr("fillStyle",w.colorKey),w._fillFuncHit(this),this.restore()}strokeShape(w){w.hasHitStroke()&&this._stroke(w)}_stroke(w){if(w.hasHitStroke()){const I=w.getStrokeScaleEnabled();if(!I){this.save();var x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(w);var M=w.hitStrokeWidth(),P=M==="auto"?w.strokeWidth():M;this.setAttr("lineWidth",P),this.setAttr("strokeStyle",w.colorKey),w._strokeFuncHit(this),I||this.restore()}}}return Oa.HitContext=C,Oa}var wk;function Hv(){if(wk)return Ba;wk=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.HitCanvas=Ba.SceneCanvas=Ba.Canvas=void 0;const i=di(),e=gN(),n=cn(),t=un(),s=pn();var a;function l(){if(a)return a;var p=i.Util.createCanvasElement(),m=p.getContext("2d");return a=function(){var v=n.Konva._global.devicePixelRatio||1,y=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return v/y}(),i.Util.releaseCanvas(p),a}let c=class{constructor(m){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var v=m||{},y=v.pixelRatio||n.Konva.pixelRatio||l();this.pixelRatio=y,this._canvas=i.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(m){var v=this.pixelRatio;this.pixelRatio=m,this.setSize(this.getWidth()/v,this.getHeight()/v)}setWidth(m){this.width=this._canvas.width=m*this.pixelRatio,this._canvas.style.width=m+"px";var v=this.pixelRatio,y=this.getContext()._context;y.scale(v,v)}setHeight(m){this.height=this._canvas.height=m*this.pixelRatio,this._canvas.style.height=m+"px";var v=this.pixelRatio,y=this.getContext()._context;y.scale(v,v)}getWidth(){return this.width}getHeight(){return this.height}setSize(m,v){this.setWidth(m||0),this.setHeight(v||0)}toDataURL(m,v){try{return this._canvas.toDataURL(m,v)}catch{try{return this._canvas.toDataURL()}catch(b){return i.Util.error("Unable to get data URL. "+b.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Ba.Canvas=c,t.Factory.addGetterSetter(c,"pixelRatio",void 0,(0,s.getNumberValidator)());class h extends c{constructor(m={width:0,height:0,willReadFrequently:!1}){super(m),this.context=new e.SceneContext(this,{willReadFrequently:m.willReadFrequently}),this.setSize(m.width,m.height)}}Ba.SceneCanvas=h;class d extends c{constructor(m={width:0,height:0}){super(m),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(m.width,m.height)}}return Ba.HitCanvas=d,Ba}var Pb={},Ck;function dC(){return Ck||(Ck=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DD=void 0;const e=cn(),n=di();i.DD={get isDragging(){var t=!1;return i.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return i.DD._dragElements.forEach(s=>{t=s.node}),t},_dragElements:new Map,_drag(t){const s=[];i.DD._dragElements.forEach((a,l)=>{const{node:c}=a,h=c.getStage();h.setPointersPositions(t),a.pointerId===void 0&&(a.pointerId=n.Util._getFirstPointerId(t));const d=h._changedPointerPositions.find(v=>v.id===a.pointerId);if(d){if(a.dragStatus!=="dragging"){var p=c.dragDistance(),m=Math.max(Math.abs(d.x-a.startPointerPos.x),Math.abs(d.y-a.startPointerPos.y));if(m<p||(c.startDrag({evt:t}),!c.isDragging()))return}c._setDragPosition(t,a),s.push(c)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:t},!0)})},_endDragBefore(t){const s=[];i.DD._dragElements.forEach(a=>{const{node:l}=a,c=l.getStage();if(t&&c.setPointersPositions(t),!c._changedPointerPositions.find(p=>p.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(i.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,a.dragStatus="stopped");const d=a.node.getLayer()||a.node instanceof e.Konva.Stage&&a.node;d&&s.indexOf(d)===-1&&s.push(d)}),s.forEach(a=>{a.draw()})},_endDragAfter(t){i.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:t},!0),s.dragStatus!=="dragging"&&i.DD._dragElements.delete(a)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",i.DD._endDragBefore,!0),window.addEventListener("touchend",i.DD._endDragBefore,!0),window.addEventListener("mousemove",i.DD._drag),window.addEventListener("touchmove",i.DD._drag),window.addEventListener("mouseup",i.DD._endDragAfter,!1),window.addEventListener("touchend",i.DD._endDragAfter,!1))}(Pb)),Pb}var Sk;function vi(){if(Sk)return Ad;Sk=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.Node=void 0;const i=di(),e=un(),n=Hv(),t=cn(),s=dC(),a=pn();var l="absoluteOpacity",c="allEventListeners",h="absoluteTransform",d="absoluteScale",p="canvas",m="Change",v="children",y="konva",b="listening",S="mouseenter",C="mouseleave",E="set",w="Shape",x=" ",M="stage",P="transform",I="Stage",D="visible",A=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x);let N=1;class T{constructor(R){this._id=N++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(R),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(R){(R===P||R===h)&&this._cache.get(R)?this._cache.get(R).dirty=!0:R?this._cache.delete(R):this._cache.clear()}_getCache(R,B){var F=this._cache.get(R),U=R===P||R===h,q=F===void 0||U&&F.dirty===!0;return q&&(F=B.call(this),this._cache.set(R,F)),F}_calculate(R,B,F){if(!this._attachedDepsListeners.get(R)){const U=B.map(q=>q+"Change.konva").join(x);this.on(U,()=>{this._clearCache(R)}),this._attachedDepsListeners.set(R,!0)}return this._getCache(R,F)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(R){this._clearCache(R),R===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:R,filter:B,hit:F}=this._cache.get(p);i.Util.releaseCanvas(R,B,F),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(R){var B=R||{},F={};(B.x===void 0||B.y===void 0||B.width===void 0||B.height===void 0)&&(F=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var U=Math.ceil(B.width||F.width),q=Math.ceil(B.height||F.height),Y=B.pixelRatio,ne=B.x===void 0?Math.floor(F.x):B.x,de=B.y===void 0?Math.floor(F.y):B.y,ve=B.offset||0,Re=B.drawBorder||!1,Ee=B.hitCanvasPixelRatio||1;if(!U||!q){i.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ce=Math.abs(Math.round(F.x)-ne)>.5?1:0,Ce=Math.abs(Math.round(F.y)-de)>.5?1:0;U+=ve*2+ce,q+=ve*2+Ce,ne-=ve,de-=ve;var Me=new n.SceneCanvas({pixelRatio:Y,width:U,height:q}),ee=new n.SceneCanvas({pixelRatio:Y,width:0,height:0,willReadFrequently:!0}),re=new n.HitCanvas({pixelRatio:Ee,width:U,height:q}),H=Me.getContext(),$=re.getContext();return re.isCache=!0,Me.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,B.imageSmoothingEnabled===!1&&(Me.getContext()._context.imageSmoothingEnabled=!1,ee.getContext()._context.imageSmoothingEnabled=!1),H.save(),$.save(),H.translate(-ne,-de),$.translate(-ne,-de),this._isUnderCache=!0,this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(d),this.drawScene(Me,this),this.drawHit(re,this),this._isUnderCache=!1,H.restore(),$.restore(),Re&&(H.save(),H.beginPath(),H.rect(0,0,U,q),H.closePath(),H.setAttr("strokeStyle","red"),H.setAttr("lineWidth",5),H.stroke(),H.restore()),this._cache.set(p,{scene:Me,filter:ee,hit:re,x:ne,y:de}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(R){throw new Error('abstract "getClientRect" method call')}_transformedRect(R,B){var F=[{x:R.x,y:R.y},{x:R.x+R.width,y:R.y},{x:R.x+R.width,y:R.y+R.height},{x:R.x,y:R.y+R.height}],U=1/0,q=1/0,Y=-1/0,ne=-1/0,de=this.getAbsoluteTransform(B);return F.forEach(function(ve){var Re=de.point(ve);U===void 0&&(U=Y=Re.x,q=ne=Re.y),U=Math.min(U,Re.x),q=Math.min(q,Re.y),Y=Math.max(Y,Re.x),ne=Math.max(ne,Re.y)}),{x:U,y:q,width:Y-U,height:ne-q}}_drawCachedSceneCanvas(R){R.save(),R._applyOpacity(this),R._applyGlobalCompositeOperation(this);const B=this._getCanvasCache();R.translate(B.x,B.y);var F=this._getCachedSceneCanvas(),U=F.pixelRatio;R.drawImage(F._canvas,0,0,F.width/U,F.height/U),R.restore()}_drawCachedHitCanvas(R){var B=this._getCanvasCache(),F=B.hit;R.save(),R.translate(B.x,B.y),R.drawImage(F._canvas,0,0,F.width/F.pixelRatio,F.height/F.pixelRatio),R.restore()}_getCachedSceneCanvas(){var R=this.filters(),B=this._getCanvasCache(),F=B.scene,U=B.filter,q=U.getContext(),Y,ne,de,ve;if(R){if(!this._filterUpToDate){var Re=F.pixelRatio;U.setSize(F.width/F.pixelRatio,F.height/F.pixelRatio);try{for(Y=R.length,q.clear(),q.drawImage(F._canvas,0,0,F.getWidth()/Re,F.getHeight()/Re),ne=q.getImageData(0,0,U.getWidth(),U.getHeight()),de=0;de<Y;de++){if(ve=R[de],typeof ve!="function"){i.Util.error("Filter should be type of function, but got "+typeof ve+" instead. Please check correct filters");continue}ve.call(this,ne),q.putImageData(ne,0,0)}}catch(Ee){i.Util.error("Unable to apply filter. "+Ee.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return U}return F}on(R,B){if(this._cache&&this._cache.delete(c),arguments.length===3)return this._delegate.apply(this,arguments);var F=R.split(x),U=F.length,q,Y,ne,de,ve;for(q=0;q<U;q++)Y=F[q],ne=Y.split("."),de=ne[0],ve=ne[1]||"",this.eventListeners[de]||(this.eventListeners[de]=[]),this.eventListeners[de].push({name:ve,handler:B});return this}off(R,B){var F=(R||"").split(x),U=F.length,q,Y,ne,de,ve,Re;if(this._cache&&this._cache.delete(c),!R)for(Y in this.eventListeners)this._off(Y);for(q=0;q<U;q++)if(ne=F[q],de=ne.split("."),ve=de[0],Re=de[1],ve)this.eventListeners[ve]&&this._off(ve,Re,B);else for(Y in this.eventListeners)this._off(Y,Re,B);return this}dispatchEvent(R){var B={target:this,type:R.type,evt:R};return this.fire(R.type,B),this}addEventListener(R,B){return this.on(R,function(F){B.call(this,F.evt)}),this}removeEventListener(R){return this.off(R),this}_delegate(R,B,F){var U=this;this.on(R,function(q){for(var Y=q.target.findAncestors(B,!0,U),ne=0;ne<Y.length;ne++)q=i.Util.cloneObject(q),q.currentTarget=Y[ne],F.call(Y[ne],q)})}remove(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(D),this._clearSelfAndDescendantCache(b)}_remove(){this._clearCaches();var R=this.getParent();R&&R.children&&(R.children.splice(this.index,1),R._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(R){var B="get"+i.Util._capitalize(R);return i.Util._isFunction(this[B])?this[B]():this.attrs[R]}getAncestors(){for(var R=this.getParent(),B=[];R;)B.push(R),R=R.getParent();return B}getAttrs(){return this.attrs||{}}setAttrs(R){return this._batchTransformChanges(()=>{var B,F;if(!R)return this;for(B in R)B!==v&&(F=E+i.Util._capitalize(B),i.Util._isFunction(this[F])?this[F](R[B]):this._setAttr(B,R[B]))}),this}isListening(){return this._getCache(b,this._isListening)}_isListening(R){if(!this.listening())return!1;const F=this.getParent();return F&&F!==R&&this!==R?F._isListening(R):!0}isVisible(){return this._getCache(D,this._isVisible)}_isVisible(R){if(!this.visible())return!1;const F=this.getParent();return F&&F!==R&&this!==R?F._isVisible(R):!0}shouldDrawHit(R,B=!1){if(R)return this._isVisible(R)&&this._isListening(R);var F=this.getLayer(),U=!1;s.DD._dragElements.forEach(Y=>{Y.dragStatus==="dragging"&&(Y.node.nodeType==="Stage"||Y.node.getLayer()===F)&&(U=!0)});var q=!B&&!t.Konva.hitOnDragEnabled&&(U||t.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!q}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var R=this.getDepth(),B=this,F=0,U,q,Y,ne;function de(Re){for(U=[],q=Re.length,Y=0;Y<q;Y++)ne=Re[Y],F++,ne.nodeType!==w&&(U=U.concat(ne.getChildren().slice())),ne._id===B._id&&(Y=q);U.length>0&&U[0].getDepth()<=R&&de(U)}const ve=this.getStage();return B.nodeType!==I&&ve&&de(ve.getChildren()),F}getDepth(){for(var R=0,B=this.parent;B;)R++,B=B.parent;return R}_batchTransformChanges(R){this._batchingTransformChange=!0,R(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(P),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(R){return this._batchTransformChanges(()=>{this.x(R.x),this.y(R.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const R=this.getStage();if(!R)return null;var B=R.getPointerPosition();if(!B)return null;var F=this.getAbsoluteTransform().copy();return F.invert(),F.point(B)}getAbsolutePosition(R){let B=!1,F=this.parent;for(;F;){if(F.isCached()){B=!0;break}F=F.parent}B&&!R&&(R=!0);var U=this.getAbsoluteTransform(R).getMatrix(),q=new i.Transform,Y=this.offset();return q.m=U.slice(),q.translate(Y.x,Y.y),q.getTranslation()}setAbsolutePosition(R){const{x:B,y:F,...U}=this._clearTransform();this.attrs.x=B,this.attrs.y=F,this._clearCache(P);var q=this._getAbsoluteTransform().copy();return q.invert(),q.translate(R.x,R.y),R={x:this.attrs.x+q.getTranslation().x,y:this.attrs.y+q.getTranslation().y},this._setTransform(U),this.setPosition({x:R.x,y:R.y}),this._clearCache(P),this._clearSelfAndDescendantCache(h),this}_setTransform(R){var B;for(B in R)this.attrs[B]=R[B]}_clearTransform(){var R={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,R}move(R){var B=R.x,F=R.y,U=this.x(),q=this.y();return B!==void 0&&(U+=B),F!==void 0&&(q+=F),this.setPosition({x:U,y:q}),this}_eachAncestorReverse(R,B){var F=[],U=this.getParent(),q,Y;if(!(B&&B._id===this._id)){for(F.unshift(this);U&&(!B||U._id!==B._id);)F.unshift(U),U=U.parent;for(q=F.length,Y=0;Y<q;Y++)R(F[Y])}}rotate(R){return this.rotation(this.rotation()+R),this}moveToTop(){if(!this.parent)return i.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var R=this.index,B=this.parent.getChildren().length;return R<B-1?(this.parent.children.splice(R,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return i.Util.warn("Node has no parent. moveUp function is ignored."),!1;var R=this.index,B=this.parent.getChildren().length;return R<B-1?(this.parent.children.splice(R,1),this.parent.children.splice(R+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return i.Util.warn("Node has no parent. moveDown function is ignored."),!1;var R=this.index;return R>0?(this.parent.children.splice(R,1),this.parent.children.splice(R-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return i.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var R=this.index;return R>0?(this.parent.children.splice(R,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(R){if(!this.parent)return i.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(R<0||R>=this.parent.children.length)&&i.Util.warn("Unexpected value "+R+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var B=this.index;return this.parent.children.splice(B,1),this.parent.children.splice(R,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(l,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var R=this.opacity(),B=this.getParent();return B&&!B._isUnderCache&&(R*=B.getAbsoluteOpacity()),R}moveTo(R){return this.getParent()!==R&&(this._remove(),R.add(this)),this}toObject(){var R=this.getAttrs(),B,F,U,q,Y;const ne={attrs:{},className:this.getClassName()};for(B in R)F=R[B],Y=i.Util.isObject(F)&&!i.Util._isPlainObject(F)&&!i.Util._isArray(F),!Y&&(U=typeof this[B]=="function"&&this[B],delete R[B],q=U?U.call(this):null,R[B]=F,q!==F&&(ne.attrs[B]=F));return i.Util._prepareToStringify(ne)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(R,B,F){var U=[];B&&this._isMatch(R)&&U.push(this);for(var q=this.parent;q;){if(q===F)return U;q._isMatch(R)&&U.push(q),q=q.parent}return U}isAncestorOf(R){return!1}findAncestor(R,B,F){return this.findAncestors(R,B,F)[0]}_isMatch(R){if(!R)return!1;if(typeof R=="function")return R(this);var B=R.replace(/ /g,"").split(","),F=B.length,U,q;for(U=0;U<F;U++)if(q=B[U],i.Util.isValidSelector(q)||(i.Util.warn('Selector "'+q+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Util.warn("Konva is awesome, right?")),q.charAt(0)==="#"){if(this.id()===q.slice(1))return!0}else if(q.charAt(0)==="."){if(this.hasName(q.slice(1)))return!0}else if(this.className===q||this.nodeType===q)return!0;return!1}getLayer(){var R=this.getParent();return R?R.getLayer():null}getStage(){return this._getCache(M,this._getStage)}_getStage(){var R=this.getParent();return R?R.getStage():null}fire(R,B={},F){return B.target=B.target||this,F?this._fireAndBubble(R,B):this._fire(R,B),this}getAbsoluteTransform(R){return R?this._getAbsoluteTransform(R):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(R){var B;if(R)return B=new i.Transform,this._eachAncestorReverse(function(U){var q=U.transformsEnabled();q==="all"?B.multiply(U.getTransform()):q==="position"&&B.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},R),B;B=this._cache.get(h)||new i.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(B):B.reset();var F=this.transformsEnabled();if(F==="all")B.multiply(this.getTransform());else if(F==="position"){const U=this.attrs.x||0,q=this.attrs.y||0,Y=this.attrs.offsetX||0,ne=this.attrs.offsetY||0;B.translate(U-Y,q-ne)}return B.dirty=!1,B}getAbsoluteScale(R){for(var B=this;B;)B._isUnderCache&&(R=B),B=B.getParent();const U=this.getAbsoluteTransform(R).decompose();return{x:U.scaleX,y:U.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(P,this._getTransform)}_getTransform(){var R,B,F=this._cache.get(P)||new i.Transform;F.reset();var U=this.x(),q=this.y(),Y=t.Konva.getAngle(this.rotation()),ne=(R=this.attrs.scaleX)!==null&&R!==void 0?R:1,de=(B=this.attrs.scaleY)!==null&&B!==void 0?B:1,ve=this.attrs.skewX||0,Re=this.attrs.skewY||0,Ee=this.attrs.offsetX||0,ce=this.attrs.offsetY||0;return(U!==0||q!==0)&&F.translate(U,q),Y!==0&&F.rotate(Y),(ve!==0||Re!==0)&&F.skew(ve,Re),(ne!==1||de!==1)&&F.scale(ne,de),(Ee!==0||ce!==0)&&F.translate(-1*Ee,-1*ce),F.dirty=!1,F}clone(R){var B=i.Util.cloneObject(this.attrs),F,U,q,Y,ne;for(F in R)B[F]=R[F];var de=new this.constructor(B);for(F in this.eventListeners)for(U=this.eventListeners[F],q=U.length,Y=0;Y<q;Y++)ne=U[Y],ne.name.indexOf(y)<0&&(de.eventListeners[F]||(de.eventListeners[F]=[]),de.eventListeners[F].push(ne));return de}_toKonvaCanvas(R){R=R||{};var B=this.getClientRect(),F=this.getStage(),U=R.x!==void 0?R.x:Math.floor(B.x),q=R.y!==void 0?R.y:Math.floor(B.y),Y=R.pixelRatio||1,ne=new n.SceneCanvas({width:R.width||Math.ceil(B.width)||(F?F.width():0),height:R.height||Math.ceil(B.height)||(F?F.height():0),pixelRatio:Y}),de=ne.getContext();const ve=new n.SceneCanvas({width:ne.width/ne.pixelRatio+Math.abs(U),height:ne.height/ne.pixelRatio+Math.abs(q),pixelRatio:ne.pixelRatio});return R.imageSmoothingEnabled===!1&&(de._context.imageSmoothingEnabled=!1),de.save(),(U||q)&&de.translate(-1*U,-1*q),this.drawScene(ne,void 0,ve),de.restore(),ne}toCanvas(R){return this._toKonvaCanvas(R)._canvas}toDataURL(R){R=R||{};var B=R.mimeType||null,F=R.quality||null,U=this._toKonvaCanvas(R).toDataURL(B,F);return R.callback&&R.callback(U),U}toImage(R){return new Promise((B,F)=>{try{const U=R==null?void 0:R.callback;U&&delete R.callback,i.Util._urlToImage(this.toDataURL(R),function(q){B(q),U==null||U(q)})}catch(U){F(U)}})}toBlob(R){return new Promise((B,F)=>{try{const U=R==null?void 0:R.callback;U&&delete R.callback,this.toCanvas(R).toBlob(q=>{B(q),U==null||U(q)},R==null?void 0:R.mimeType,R==null?void 0:R.quality)}catch(U){F(U)}})}setSize(R){return this.width(R.width),this.height(R.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():t.Konva.dragDistance}_off(R,B,F){var U=this.eventListeners[R],q,Y,ne;for(q=0;q<U.length;q++)if(Y=U[q].name,ne=U[q].handler,(Y!=="konva"||B==="konva")&&(!B||Y===B)&&(!F||F===ne)){if(U.splice(q,1),U.length===0){delete this.eventListeners[R];break}q--}}_fireChangeEvent(R,B,F){this._fire(R+m,{oldVal:B,newVal:F})}addName(R){if(!this.hasName(R)){var B=this.name(),F=B?B+" "+R:R;this.name(F)}return this}hasName(R){if(!R)return!1;const B=this.name();if(!B)return!1;var F=(B||"").split(/\s/g);return F.indexOf(R)!==-1}removeName(R){var B=(this.name()||"").split(/\s/g),F=B.indexOf(R);return F!==-1&&(B.splice(F,1),this.name(B.join(" "))),this}setAttr(R,B){var F=this[E+i.Util._capitalize(R)];return i.Util._isFunction(F)?F.call(this,B):this._setAttr(R,B),this}_requestDraw(){if(t.Konva.autoDrawEnabled){const R=this.getLayer()||this.getStage();R==null||R.batchDraw()}}_setAttr(R,B){var F=this.attrs[R];F===B&&!i.Util.isObject(B)||(B==null?delete this.attrs[R]:this.attrs[R]=B,this._shouldFireChangeEvents&&this._fireChangeEvent(R,F,B),this._requestDraw())}_setComponentAttr(R,B,F){var U;F!==void 0&&(U=this.attrs[R],U||(this.attrs[R]=this.getAttr(R)),this.attrs[R][B]=F,this._fireChangeEvent(R,U,F))}_fireAndBubble(R,B,F){B&&this.nodeType===w&&(B.target=this);var U=(R===S||R===C)&&(F&&(this===F||this.isAncestorOf&&this.isAncestorOf(F))||this.nodeType==="Stage"&&!F);if(!U){this._fire(R,B);var q=(R===S||R===C)&&F&&F.isAncestorOf&&F.isAncestorOf(this)&&!F.isAncestorOf(this.parent);(B&&!B.cancelBubble||!B)&&this.parent&&this.parent.isListening()&&!q&&(F&&F.parent?this._fireAndBubble.call(this.parent,R,B,F):this._fireAndBubble.call(this.parent,R,B))}}_getProtoListeners(R){var B,F,U;const q=(B=this._cache.get(c))!==null&&B!==void 0?B:{};let Y=q==null?void 0:q[R];if(Y===void 0){Y=[];let ne=Object.getPrototypeOf(this);for(;ne;){const de=(U=(F=ne.eventListeners)===null||F===void 0?void 0:F[R])!==null&&U!==void 0?U:[];Y.push(...de),ne=Object.getPrototypeOf(ne)}q[R]=Y,this._cache.set(c,q)}return Y}_fire(R,B){B=B||{},B.currentTarget=this,B.type=R;const F=this._getProtoListeners(R);if(F)for(var U=0;U<F.length;U++)F[U].handler.call(this,B);const q=this.eventListeners[R];if(q)for(var U=0;U<q.length;U++)q[U].handler.call(this,B)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(R){var B=R?R.pointerId:void 0,F=this.getStage(),U=this.getAbsolutePosition();if(F){var q=F._getPointerById(B)||F._changedPointerPositions[0]||U;s.DD._dragElements.set(this._id,{node:this,startPointerPos:q,offset:{x:q.x-U.x,y:q.y-U.y},dragStatus:"ready",pointerId:B})}}startDrag(R,B=!0){s.DD._dragElements.has(this._id)||this._createDragElement(R);const F=s.DD._dragElements.get(this._id);F.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:R&&R.evt},B)}_setDragPosition(R,B){const F=this.getStage()._getPointerById(B.pointerId);if(F){var U={x:F.x-B.offset.x,y:F.y-B.offset.y},q=this.dragBoundFunc();if(q!==void 0){const Y=q.call(this,U,R);Y?U=Y:i.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==U.x||this._lastPos.y!==U.y)&&(this.setAbsolutePosition(U),this._requestDraw()),this._lastPos=U}}stopDrag(R){const B=s.DD._dragElements.get(this._id);B&&(B.dragStatus="stopped"),s.DD._endDragBefore(R),s.DD._endDragAfter(R)}setDraggable(R){this._setAttr("draggable",R),this._dragChange()}isDragging(){const R=s.DD._dragElements.get(this._id);return R?R.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(R){var B=R.evt.button!==void 0,F=!B||t.Konva.dragButtons.indexOf(R.evt.button)>=0;if(F&&!this.isDragging()){var U=!1;s.DD._dragElements.forEach(q=>{this.isAncestorOf(q.node)&&(U=!0)}),U||this._createDragElement(R)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var R=this.getStage();if(!R)return;const B=s.DD._dragElements.get(this._id),F=B&&B.dragStatus==="dragging",U=B&&B.dragStatus==="ready";F?this.stopDrag():U&&s.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(R={x:0,y:0}){const B=this.getStage();if(!B)return!1;const F={x:-R.x,y:-R.y,width:B.width()+2*R.x,height:B.height()+2*R.y};return i.Util.haveIntersection(F,this.getClientRect())}static create(R,B){return i.Util._isString(R)&&(R=JSON.parse(R)),this._createNode(R,B)}static _createNode(R,B){var F=T.prototype.getClassName.call(R),U=R.children,q,Y,ne;B&&(R.attrs.container=B),t.Konva[F]||(i.Util.warn('Can not find a node with class name "'+F+'". Fallback to "Shape".'),F="Shape");const de=t.Konva[F];if(q=new de(R.attrs),U)for(Y=U.length,ne=0;ne<Y;ne++)q.add(T._createNode(U[ne]));return q}}Ad.Node=T,T.prototype.nodeType="Node",T.prototype._attrsAffectingSize=[],T.prototype.eventListeners={},T.prototype.on.call(T.prototype,A,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(P),this._clearSelfAndDescendantCache(h)}),T.prototype.on.call(T.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(D)}),T.prototype.on.call(T.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(b)}),T.prototype.on.call(T.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(l)});const L=e.Factory.addGetterSetter;return L(T,"zIndex"),L(T,"absolutePosition"),L(T,"position"),L(T,"x",0,(0,a.getNumberValidator)()),L(T,"y",0,(0,a.getNumberValidator)()),L(T,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),L(T,"opacity",1,(0,a.getNumberValidator)()),L(T,"name","",(0,a.getStringValidator)()),L(T,"id","",(0,a.getStringValidator)()),L(T,"rotation",0,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"scale",["x","y"]),L(T,"scaleX",1,(0,a.getNumberValidator)()),L(T,"scaleY",1,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"skew",["x","y"]),L(T,"skewX",0,(0,a.getNumberValidator)()),L(T,"skewY",0,(0,a.getNumberValidator)()),e.Factory.addComponentsGetterSetter(T,"offset",["x","y"]),L(T,"offsetX",0,(0,a.getNumberValidator)()),L(T,"offsetY",0,(0,a.getNumberValidator)()),L(T,"dragDistance",null,(0,a.getNumberValidator)()),L(T,"width",0,(0,a.getNumberValidator)()),L(T,"height",0,(0,a.getNumberValidator)()),L(T,"listening",!0,(0,a.getBooleanValidator)()),L(T,"preventDefault",!0,(0,a.getBooleanValidator)()),L(T,"filters",null,function(V){return this._filterUpToDate=!1,V}),L(T,"visible",!0,(0,a.getBooleanValidator)()),L(T,"transformsEnabled","all",(0,a.getStringValidator)()),L(T,"size"),L(T,"dragBoundFunc"),L(T,"draggable",!1,(0,a.getBooleanValidator)()),e.Factory.backCompat(T,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Ad}var Pd={},Ek;function Gv(){if(Ek)return Pd;Ek=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.Container=void 0;const i=un(),e=vi(),n=pn();let t=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){if(!a)return this.children||[];const l=this.children||[];var c=[];return l.forEach(function(h){a(h)&&c.push(h)}),c}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(var l=0;l<a.length;l++)this.add(a[l]);return this}const c=a[0];return c.getParent()?(c.moveTo(this),this):(this._validateAdd(c),c.index=this.getChildren().length,c.parent=this,c._clearCaches(),this.getChildren().push(c),this._fire("add",{child:c}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){var l=this._generalFind(a,!0);return l.length>0?l[0]:void 0}_generalFind(a,l){var c=[];return this._descendants(h=>{const d=h._isMatch(a);return d&&c.push(h),!!(d&&l)}),c}_descendants(a){let l=!1;const c=this.getChildren();for(const h of c){if(l=a(h),l)return!0;if(h.hasChildren()&&(l=h._descendants(a),l))return!0}return!1}toObject(){var a=e.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(l=>{a.children.push(l.toObject())}),a}isAncestorOf(a){for(var l=a.getParent();l;){if(l._id===this._id)return!0;l=l.getParent()}return!1}clone(a){var l=e.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(c){l.add(c.clone())}),l}getAllIntersections(a){var l=[];return this.find("Shape").forEach(c=>{c.isVisible()&&c.intersects(a)&&l.push(c)}),l}_clearSelfAndDescendantCache(a){var l;super._clearSelfAndDescendantCache(a),!this.isCached()&&((l=this.children)===null||l===void 0||l.forEach(function(c){c._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(l,c){l.index=c}),this._requestDraw()}drawScene(a,l,c){var h=this.getLayer(),d=a||h&&h.getCanvas(),p=d&&d.getContext(),m=this._getCanvasCache(),v=m&&m.scene,y=d&&d.isCache;if(!this.isVisible()&&!y)return this;if(v){p.save();var b=this.getAbsoluteTransform(l).getMatrix();p.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedSceneCanvas(p),p.restore()}else this._drawChildren("drawScene",d,l,c);return this}drawHit(a,l){if(!this.shouldDrawHit(l))return this;var c=this.getLayer(),h=a||c&&c.hitCanvas,d=h&&h.getContext(),p=this._getCanvasCache(),m=p&&p.hit;if(m){d.save();var v=this.getAbsoluteTransform(l).getMatrix();d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(d),d.restore()}else this._drawChildren("drawHit",h,l);return this}_drawChildren(a,l,c,h){var d,p=l&&l.getContext(),m=this.clipWidth(),v=this.clipHeight(),y=this.clipFunc(),b=typeof m=="number"&&typeof v=="number"||y;const S=c===this;if(b){p.save();var C=this.getAbsoluteTransform(c),E=C.getMatrix();p.transform(E[0],E[1],E[2],E[3],E[4],E[5]),p.beginPath();let P;if(y)P=y.call(this,p,this);else{var w=this.clipX(),x=this.clipY();p.rect(w||0,x||0,m,v)}p.clip.apply(p,P),E=C.copy().invert().getMatrix(),p.transform(E[0],E[1],E[2],E[3],E[4],E[5])}var M=!S&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";M&&(p.save(),p._applyGlobalCompositeOperation(this)),(d=this.children)===null||d===void 0||d.forEach(function(P){P[a](l,c,h)}),M&&p.restore(),b&&p.restore()}getClientRect(a={}){var l,c=a.skipTransform,h=a.relativeTo,d,p,m,v,y={x:1/0,y:1/0,width:0,height:0},b=this;(l=this.children)===null||l===void 0||l.forEach(function(x){if(x.visible()){var M=x.getClientRect({relativeTo:b,skipShadow:a.skipShadow,skipStroke:a.skipStroke});M.width===0&&M.height===0||(d===void 0?(d=M.x,p=M.y,m=M.x+M.width,v=M.y+M.height):(d=Math.min(d,M.x),p=Math.min(p,M.y),m=Math.max(m,M.x+M.width),v=Math.max(v,M.y+M.height)))}});for(var S=this.find("Shape"),C=!1,E=0;E<S.length;E++){var w=S[E];if(w._isVisible(this)){C=!0;break}}return C&&d!==void 0?y={x:d,y:p,width:m-d,height:v-p}:y={x:0,y:0,width:0,height:0},c?y:this._transformedRect(y,h)}};return Pd.Container=t,i.Factory.addComponentsGetterSetter(t,"clip",["x","y","width","height"]),i.Factory.addGetterSetter(t,"clipX",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipY",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipWidth",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipHeight",void 0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(t,"clipFunc"),Pd}var Ib={},Qr={},Mk;function vN(){if(Mk)return Qr;Mk=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.releaseCapture=Qr.setPointerCapture=Qr.hasPointerCapture=Qr.createEvent=Qr.getCapturedShape=void 0;const i=cn(),e=new Map,n=i.Konva._global.PointerEvent!==void 0;function t(h){return e.get(h)}Qr.getCapturedShape=t;function s(h){return{evt:h,pointerId:h.pointerId}}Qr.createEvent=s;function a(h,d){return e.get(h)===d}Qr.hasPointerCapture=a;function l(h,d){c(h),d.getStage()&&(e.set(h,d),n&&d._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}Qr.setPointerCapture=l;function c(h,d){const p=e.get(h);if(!p)return;const m=p.getStage();m&&m.content,e.delete(h),n&&p._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return Qr.releaseCapture=c,Qr}var Tk;function yce(){return Tk||(Tk=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Stage=i.stages=void 0;const e=di(),n=un(),t=Gv(),s=cn(),a=Hv(),l=dC(),c=cn(),h=vN();var d="Stage",p="string",m="px",v="mouseout",y="mouseleave",b="mouseover",S="mouseenter",C="mousemove",E="mousedown",w="mouseup",x="pointermove",M="pointerdown",P="pointerup",I="pointercancel",D="lostpointercapture",A="pointerout",N="pointerleave",T="pointerover",L="pointerenter",V="contextmenu",R="touchstart",B="touchend",F="touchmove",U="touchcancel",q="wheel",Y=5,ne=[[S,"_pointerenter"],[E,"_pointerdown"],[C,"_pointermove"],[w,"_pointerup"],[y,"_pointerleave"],[R,"_pointerdown"],[F,"_pointermove"],[B,"_pointerup"],[U,"_pointercancel"],[b,"_pointerover"],[q,"_wheel"],[V,"_contextmenu"],[M,"_pointerdown"],[x,"_pointermove"],[P,"_pointerup"],[I,"_pointercancel"],[D,"_lostpointercapture"]];const de={mouse:{[A]:v,[N]:y,[T]:b,[L]:S,[x]:C,[M]:E,[P]:w,[I]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[N]:"touchleave",[T]:"touchover",[L]:"touchenter",[x]:F,[M]:R,[P]:B,[I]:U,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[N]:N,[T]:T,[L]:L,[x]:x,[M]:M,[P]:P,[I]:I,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ve=Me=>Me.indexOf("pointer")>=0?"pointer":Me.indexOf("touch")>=0?"touch":"mouse",Re=Me=>{const ee=ve(Me);if(ee==="pointer")return s.Konva.pointerEventsEnabled&&de.pointer;if(ee==="touch")return de.touch;if(ee==="mouse")return de.mouse};function Ee(Me={}){return(Me.clipFunc||Me.clipWidth||Me.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Me}const ce="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";i.stages=[];class Ce extends t.Container{constructor(ee){super(Ee(ee)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),i.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ee(this.attrs)}),this._checkVisibility()}_validateAdd(ee){const re=ee.getType()==="Layer",H=ee.getType()==="FastLayer";re||H||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const ee=this.visible()?"":"none";this.content.style.display=ee}setContainer(ee){if(typeof ee===p){if(ee.charAt(0)==="."){var re=ee.slice(1);ee=document.getElementsByClassName(re)[0]}else{var H;ee.charAt(0)!=="#"?H=ee:H=ee.slice(1),ee=document.getElementById(H)}if(!ee)throw"Can not find container in document with id "+H}return this._setAttr("container",ee),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),ee.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var ee=this.children,re=ee.length,H;for(H=0;H<re;H++)ee[H].clear();return this}clone(ee){return ee||(ee={}),ee.container=typeof document<"u"&&document.createElement("div"),t.Container.prototype.clone.call(this,ee)}destroy(){super.destroy();var ee=this.content;ee&&e.Util._isInDocument(ee)&&this.container().removeChild(ee);var re=i.stages.indexOf(this);return re>-1&&i.stages.splice(re,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const ee=this._pointerPositions[0]||this._changedPointerPositions[0];return ee?{x:ee.x,y:ee.y}:(e.Util.warn(ce),null)}_getPointerById(ee){return this._pointerPositions.find(re=>re.id===ee)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(ee){ee=ee||{},ee.x=ee.x||0,ee.y=ee.y||0,ee.width=ee.width||this.width(),ee.height=ee.height||this.height();var re=new a.SceneCanvas({width:ee.width,height:ee.height,pixelRatio:ee.pixelRatio||1}),H=re.getContext()._context,$=this.children;return(ee.x||ee.y)&&H.translate(-1*ee.x,-1*ee.y),$.forEach(function(te){if(te.isVisible()){var le=te._toKonvaCanvas(ee);H.drawImage(le._canvas,ee.x,ee.y,le.getWidth()/le.getPixelRatio(),le.getHeight()/le.getPixelRatio())}}),re}getIntersection(ee){if(!ee)return null;var re=this.children,H=re.length,$=H-1,te;for(te=$;te>=0;te--){const le=re[te].getIntersection(ee);if(le)return le}return null}_resizeDOM(){var ee=this.width(),re=this.height();this.content&&(this.content.style.width=ee+m,this.content.style.height=re+m),this.bufferCanvas.setSize(ee,re),this.bufferHitCanvas.setSize(ee,re),this.children.forEach(H=>{H.setSize({width:ee,height:re}),H.draw()})}add(ee,...re){if(arguments.length>1){for(var H=0;H<arguments.length;H++)this.add(arguments[H]);return this}super.add(ee);var $=this.children.length;return $>Y&&e.Util.warn("The stage has "+$+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),ee.setSize({width:this.width(),height:this.height()}),ee.draw(),s.Konva.isBrowser&&this.content.appendChild(ee.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(ee){return h.hasPointerCapture(ee,this)}setPointerCapture(ee){h.setPointerCapture(ee,this)}releaseCapture(ee){h.releaseCapture(ee,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&ne.forEach(([ee,re])=>{this.content.addEventListener(ee,H=>{this[re](H)},{passive:!1})})}_pointerenter(ee){this.setPointersPositions(ee);const re=Re(ee.type);re&&this._fire(re.pointerenter,{evt:ee,target:this,currentTarget:this})}_pointerover(ee){this.setPointersPositions(ee);const re=Re(ee.type);re&&this._fire(re.pointerover,{evt:ee,target:this,currentTarget:this})}_getTargetShape(ee){let re=this[ee+"targetShape"];return re&&!re.getStage()&&(re=null),re}_pointerleave(ee){const re=Re(ee.type),H=ve(ee.type);if(re){this.setPointersPositions(ee);var $=this._getTargetShape(H),te=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;$&&te?($._fireAndBubble(re.pointerout,{evt:ee}),$._fireAndBubble(re.pointerleave,{evt:ee}),this._fire(re.pointerleave,{evt:ee,target:this,currentTarget:this}),this[H+"targetShape"]=null):te&&(this._fire(re.pointerleave,{evt:ee,target:this,currentTarget:this}),this._fire(re.pointerout,{evt:ee,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(ee){const re=Re(ee.type),H=ve(ee.type);if(re){this.setPointersPositions(ee);var $=!1;this._changedPointerPositions.forEach(te=>{var le=this.getIntersection(te);if(l.DD.justDragged=!1,s.Konva["_"+H+"ListenClick"]=!0,!le||!le.isListening()){this[H+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&le.setPointerCapture(te.id),this[H+"ClickStartShape"]=le,le._fireAndBubble(re.pointerdown,{evt:ee,pointerId:te.id}),$=!0;const K=ee.type.indexOf("touch")>=0;le.preventDefault()&&ee.cancelable&&K&&ee.preventDefault()}),$||this._fire(re.pointerdown,{evt:ee,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(ee){const re=Re(ee.type),H=ve(ee.type);if(!re)return;s.Konva.isDragging()&&l.DD.node.preventDefault()&&ee.cancelable&&ee.preventDefault(),this.setPointersPositions(ee);var $=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;if(!$)return;var te={};let le=!1;var K=this._getTargetShape(H);this._changedPointerPositions.forEach(X=>{const oe=h.getCapturedShape(X.id)||this.getIntersection(X),fe=X.id,be={evt:ee,pointerId:fe};var ke=K!==oe;if(ke&&K&&(K._fireAndBubble(re.pointerout,{...be},oe),K._fireAndBubble(re.pointerleave,{...be},oe)),oe){if(te[oe._id])return;te[oe._id]=!0}oe&&oe.isListening()?(le=!0,ke&&(oe._fireAndBubble(re.pointerover,{...be},K),oe._fireAndBubble(re.pointerenter,{...be},K),this[H+"targetShape"]=oe),oe._fireAndBubble(re.pointermove,{...be})):K&&(this._fire(re.pointerover,{evt:ee,target:this,currentTarget:this,pointerId:fe}),this[H+"targetShape"]=null)}),le||this._fire(re.pointermove,{evt:ee,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(ee){const re=Re(ee.type),H=ve(ee.type);if(!re)return;this.setPointersPositions(ee);const $=this[H+"ClickStartShape"],te=this[H+"ClickEndShape"];var le={};let K=!1;this._changedPointerPositions.forEach(X=>{const oe=h.getCapturedShape(X.id)||this.getIntersection(X);if(oe){if(oe.releaseCapture(X.id),le[oe._id])return;le[oe._id]=!0}const fe=X.id,be={evt:ee,pointerId:fe};let ke=!1;s.Konva["_"+H+"InDblClickWindow"]?(ke=!0,clearTimeout(this[H+"DblTimeout"])):l.DD.justDragged||(s.Konva["_"+H+"InDblClickWindow"]=!0,clearTimeout(this[H+"DblTimeout"])),this[H+"DblTimeout"]=setTimeout(function(){s.Konva["_"+H+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),oe&&oe.isListening()?(K=!0,this[H+"ClickEndShape"]=oe,oe._fireAndBubble(re.pointerup,{...be}),s.Konva["_"+H+"ListenClick"]&&$&&$===oe&&(oe._fireAndBubble(re.pointerclick,{...be}),ke&&te&&te===oe&&oe._fireAndBubble(re.pointerdblclick,{...be}))):(this[H+"ClickEndShape"]=null,s.Konva["_"+H+"ListenClick"]&&this._fire(re.pointerclick,{evt:ee,target:this,currentTarget:this,pointerId:fe}),ke&&this._fire(re.pointerdblclick,{evt:ee,target:this,currentTarget:this,pointerId:fe}))}),K||this._fire(re.pointerup,{evt:ee,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+H+"ListenClick"]=!1,ee.cancelable&&H!=="touch"&&ee.preventDefault()}_contextmenu(ee){this.setPointersPositions(ee);var re=this.getIntersection(this.getPointerPosition());re&&re.isListening()?re._fireAndBubble(V,{evt:ee}):this._fire(V,{evt:ee,target:this,currentTarget:this})}_wheel(ee){this.setPointersPositions(ee);var re=this.getIntersection(this.getPointerPosition());re&&re.isListening()?re._fireAndBubble(q,{evt:ee}):this._fire(q,{evt:ee,target:this,currentTarget:this})}_pointercancel(ee){this.setPointersPositions(ee);const re=h.getCapturedShape(ee.pointerId)||this.getIntersection(this.getPointerPosition());re&&re._fireAndBubble(P,h.createEvent(ee)),h.releaseCapture(ee.pointerId)}_lostpointercapture(ee){h.releaseCapture(ee.pointerId)}setPointersPositions(ee){var re=this._getContentPosition(),H=null,$=null;ee=ee||window.event,ee.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(ee.touches,te=>{this._pointerPositions.push({id:te.identifier,x:(te.clientX-re.left)/re.scaleX,y:(te.clientY-re.top)/re.scaleY})}),Array.prototype.forEach.call(ee.changedTouches||ee.touches,te=>{this._changedPointerPositions.push({id:te.identifier,x:(te.clientX-re.left)/re.scaleX,y:(te.clientY-re.top)/re.scaleY})})):(H=(ee.clientX-re.left)/re.scaleX,$=(ee.clientY-re.top)/re.scaleY,this.pointerPos={x:H,y:$},this._pointerPositions=[{x:H,y:$,id:e.Util._getFirstPointerId(ee)}],this._changedPointerPositions=[{x:H,y:$,id:e.Util._getFirstPointerId(ee)}])}_setPointerPosition(ee){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(ee)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var ee=this.content.getBoundingClientRect();return{top:ee.top,left:ee.left,scaleX:ee.width/this.content.clientWidth||1,scaleY:ee.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!s.Konva.isBrowser){var ee=this.container();if(!ee)throw"Stage has no container. A container is required.";ee.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),ee.appendChild(this.content),this._resizeDOM()}}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(ee){ee.batchDraw()}),this}}i.Stage=Ce,Ce.prototype.nodeType=d,(0,c._registerNode)(Ce),n.Factory.addGetterSetter(Ce,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{i.stages.forEach(Me=>{Me.batchDraw()})})}(Ib)),Ib}var Id={},Nb={},kk;function Ui(){return kk||(kk=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Shape=i.shapes=void 0;const e=cn(),n=di(),t=un(),s=vi(),a=pn(),l=cn(),c=vN();var h="hasShadow",d="shadowRGBA",p="patternImage",m="linearGradient",v="radialGradient";let y;function b(){return y||(y=n.Util.createCanvasElement().getContext("2d"),y)}i.shapes={};function S(N){const T=this.attrs.fillRule;T?N.fill(T):N.fill()}function C(N){N.stroke()}function E(N){N.fill()}function w(N){N.stroke()}function x(){this._clearCache(h)}function M(){this._clearCache(d)}function P(){this._clearCache(p)}function I(){this._clearCache(m)}function D(){this._clearCache(v)}class A extends s.Node{constructor(T){super(T);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in i.shapes)););this.colorKey=L,i.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var T=b();const L=T.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const V=new n.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(e.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const R=V.getMatrix(),B=typeof DOMMatrix>"u"?{a:R[0],b:R[1],c:R[2],d:R[3],e:R[4],f:R[5]}:new DOMMatrix(R);L.setTransform(B)}return L}}_getLinearGradient(){return this._getCache(m,this.__getLinearGradient)}__getLinearGradient(){var T=this.fillLinearGradientColorStops();if(T){for(var L=b(),V=this.fillLinearGradientStartPoint(),R=this.fillLinearGradientEndPoint(),B=L.createLinearGradient(V.x,V.y,R.x,R.y),F=0;F<T.length;F+=2)B.addColorStop(T[F],T[F+1]);return B}}_getRadialGradient(){return this._getCache(v,this.__getRadialGradient)}__getRadialGradient(){var T=this.fillRadialGradientColorStops();if(T){for(var L=b(),V=this.fillRadialGradientStartPoint(),R=this.fillRadialGradientEndPoint(),B=L.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),R.x,R.y,this.fillRadialGradientEndRadius()),F=0;F<T.length;F+=2)B.addColorStop(T[F],T[F+1]);return B}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var T=n.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){var L=this.getStage();if(!L)return!1;const V=L.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const R=T||this.hasFill(),B=this.hasStroke(),F=this.getAbsoluteOpacity()!==1;if(R&&B&&F)return!0;const U=this.hasShadow(),q=this.shadowForStrokeEnabled();return!!(R&&B&&U&&q)}setStrokeHitEnabled(T){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let L=!1,V=this.getParent();for(;V;){if(V.isCached()){L=!0;break}V=V.getParent()}const R=T.skipTransform,B=T.relativeTo||L&&this.getStage()||void 0,F=this.getSelfRect(),q=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Y=F.width+q,ne=F.height+q,de=!T.skipShadow&&this.hasShadow(),ve=de?this.shadowOffsetX():0,Re=de?this.shadowOffsetY():0,Ee=Y+Math.abs(ve),ce=ne+Math.abs(Re),Ce=de&&this.shadowBlur()||0,Me=Ee+Ce*2,ee=ce+Ce*2,re={width:Me,height:ee,x:-(q/2+Ce)+Math.min(ve,0)+F.x,y:-(q/2+Ce)+Math.min(Re,0)+F.y};return R?re:this._transformedRect(re,B)}drawScene(T,L,V){var R=this.getLayer(),B=T||R.getCanvas(),F=B.getContext(),U=this._getCanvasCache(),q=this.getSceneFunc(),Y=this.hasShadow(),ne,de,ve=B.isCache,Re=L===this;if(!this.isVisible()&&!Re)return this;if(U){F.save();var Ee=this.getAbsoluteTransform(L).getMatrix();return F.transform(Ee[0],Ee[1],Ee[2],Ee[3],Ee[4],Ee[5]),this._drawCachedSceneCanvas(F),F.restore(),this}if(!q)return this;if(F.save(),this._useBufferCanvas()&&!ve){ne=this.getStage();const Me=V||ne.bufferCanvas;de=Me.getContext(),de.clear(),de.save(),de._applyLineJoin(this);var ce=this.getAbsoluteTransform(L).getMatrix();de.transform(ce[0],ce[1],ce[2],ce[3],ce[4],ce[5]),q.call(this,de,this),de.restore();var Ce=Me.pixelRatio;Y&&F._applyShadow(this),F._applyOpacity(this),F._applyGlobalCompositeOperation(this),F.drawImage(Me._canvas,0,0,Me.width/Ce,Me.height/Ce)}else{if(F._applyLineJoin(this),!Re){var ce=this.getAbsoluteTransform(L).getMatrix();F.transform(ce[0],ce[1],ce[2],ce[3],ce[4],ce[5]),F._applyOpacity(this),F._applyGlobalCompositeOperation(this)}Y&&F._applyShadow(this),q.call(this,F,this)}return F.restore(),this}drawHit(T,L,V=!1){if(!this.shouldDrawHit(L,V))return this;var R=this.getLayer(),B=T||R.hitCanvas,F=B&&B.getContext(),U=this.hitFunc()||this.sceneFunc(),q=this._getCanvasCache(),Y=q&&q.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Y){F.save();var ne=this.getAbsoluteTransform(L).getMatrix();return F.transform(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5]),this._drawCachedHitCanvas(F),F.restore(),this}if(!U)return this;if(F.save(),F._applyLineJoin(this),!(this===L)){var ve=this.getAbsoluteTransform(L).getMatrix();F.transform(ve[0],ve[1],ve[2],ve[3],ve[4],ve[5])}return U.call(this,F,this),F.restore(),this}drawHitFromCache(T=0){var L=this._getCanvasCache(),V=this._getCachedSceneCanvas(),R=L.hit,B=R.getContext(),F=R.getWidth(),U=R.getHeight(),q,Y,ne,de,ve,Re;B.clear(),B.drawImage(V._canvas,0,0,F,U);try{for(q=B.getImageData(0,0,F,U),Y=q.data,ne=Y.length,de=n.Util._hexToRgb(this.colorKey),ve=0;ve<ne;ve+=4)Re=Y[ve+3],Re>T?(Y[ve]=de.r,Y[ve+1]=de.g,Y[ve+2]=de.b,Y[ve+3]=255):Y[ve+3]=0;B.putImageData(q,0,0)}catch(Ee){n.Util.error("Unable to draw hit graph from cached scene canvas. "+Ee.message)}return this}hasPointerCapture(T){return c.hasPointerCapture(T,this)}setPointerCapture(T){c.setPointerCapture(T,this)}releaseCapture(T){c.releaseCapture(T,this)}}i.Shape=A,A.prototype._fillFunc=S,A.prototype._strokeFunc=C,A.prototype._fillFuncHit=E,A.prototype._strokeFuncHit=w,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,l._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",M),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",P),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",I),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),t.Factory.addGetterSetter(A,"stroke",void 0,(0,a.getStringOrGradientValidator)()),t.Factory.addGetterSetter(A,"strokeWidth",2,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),t.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),t.Factory.addGetterSetter(A,"lineJoin"),t.Factory.addGetterSetter(A,"lineCap"),t.Factory.addGetterSetter(A,"sceneFunc"),t.Factory.addGetterSetter(A,"hitFunc"),t.Factory.addGetterSetter(A,"dash"),t.Factory.addGetterSetter(A,"dashOffset",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"shadowColor",void 0,(0,a.getStringValidator)()),t.Factory.addGetterSetter(A,"shadowBlur",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"shadowOpacity",1,(0,a.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),t.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternImage"),t.Factory.addGetterSetter(A,"fill",void 0,(0,a.getStringOrGradientValidator)()),t.Factory.addGetterSetter(A,"fillPatternX",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternY",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),t.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),t.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),t.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),t.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),t.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),t.Factory.addGetterSetter(A,"fillEnabled",!0),t.Factory.addGetterSetter(A,"strokeEnabled",!0),t.Factory.addGetterSetter(A,"shadowEnabled",!0),t.Factory.addGetterSetter(A,"dashEnabled",!0),t.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),t.Factory.addGetterSetter(A,"fillPriority","color"),t.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),t.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),t.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,a.getNumberValidator)()),t.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),t.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),t.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),t.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),t.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),t.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),t.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),t.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),t.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),t.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),t.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),t.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),t.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),t.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),t.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),t.Factory.addGetterSetter(A,"fillPatternRotation",0),t.Factory.addGetterSetter(A,"fillRule",void 0,(0,a.getStringValidator)()),t.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Nb)),Nb}var Ak;function yN(){if(Ak)return Id;Ak=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.Layer=void 0;const i=di(),e=Gv(),n=vi(),t=un(),s=Hv(),a=pn(),l=Ui(),c=cn();var h="#",d="beforeDraw",p="draw",m=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],v=m.length;let y=class extends e.Container{constructor(S){super(S),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(S){return this.getContext().clear(S),this.getHitCanvas().getContext().clear(S),this}setZIndex(S){super.setZIndex(S);var C=this.getStage();return C&&C.content&&(C.content.removeChild(this.getNativeCanvasElement()),S<C.children.length-1?C.content.insertBefore(this.getNativeCanvasElement(),C.children[S+1].getCanvas()._canvas):C.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);var S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var S=n.Node.prototype.moveUp.call(this);if(!S)return!1;var C=this.getStage();return!C||!C.content?!1:(C.content.removeChild(this.getNativeCanvasElement()),this.index<C.children.length-1?C.content.insertBefore(this.getNativeCanvasElement(),C.children[this.index+1].getCanvas()._canvas):C.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){var S=this.getStage();if(S){var C=S.children;S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.insertBefore(this.getNativeCanvasElement(),C[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){var S=this.getStage();if(S){var C=S.children;S.content&&(S.content.removeChild(this.getNativeCanvasElement()),S.content.insertBefore(this.getNativeCanvasElement(),C[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var S=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),S&&S.parentNode&&i.Util._isInDocument(S)&&S.parentNode.removeChild(S),this}getStage(){return this.parent}setSize({width:S,height:C}){return this.canvas.setSize(S,C),this.hitCanvas.setSize(S,C),this._setSmoothEnabled(),this}_validateAdd(S){var C=S.getType();C!=="Group"&&C!=="Shape"&&i.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(S){return S=S||{},S.width=S.width||this.getWidth(),S.height=S.height||this.getHeight(),S.x=S.x!==void 0?S.x:this.x(),S.y=S.y!==void 0?S.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,S)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(S){if(!this.isListening()||!this.isVisible())return null;for(var C=1,E=!1;;){for(let w=0;w<v;w++){const x=m[w],M=this._getIntersection({x:S.x+x.x*C,y:S.y+x.y*C}),P=M.shape;if(P)return P;if(E=!!M.antialiased,!M.antialiased)break}if(E)C+=1;else return null}}_getIntersection(S){const C=this.hitCanvas.pixelRatio,E=this.hitCanvas.context.getImageData(Math.round(S.x*C),Math.round(S.y*C),1,1).data,w=E[3];if(w===255){const x=i.Util._rgbToHex(E[0],E[1],E[2]),M=l.shapes[h+x];return M?{shape:M}:{antialiased:!0}}else if(w>0)return{antialiased:!0};return{}}drawScene(S,C){var E=this.getLayer(),w=S||E&&E.getCanvas();return this._fire(d,{node:this}),this.clearBeforeDraw()&&w.getContext().clear(),e.Container.prototype.drawScene.call(this,w,C),this._fire(p,{node:this}),this}drawHit(S,C){var E=this.getLayer(),w=S||E&&E.hitCanvas;return E&&E.clearBeforeDraw()&&E.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,w,C),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(S){i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(S)}getHitGraphEnabled(S){return i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var S=this.parent,C=!!this.hitCanvas._canvas.parentNode;C?S.content.removeChild(this.hitCanvas._canvas):S.content.appendChild(this.hitCanvas._canvas)}}destroy(){return i.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return Id.Layer=y,y.prototype.nodeType="Layer",(0,c._registerNode)(y),t.Factory.addGetterSetter(y,"imageSmoothingEnabled",!0),t.Factory.addGetterSetter(y,"clearBeforeDraw",!0),t.Factory.addGetterSetter(y,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),Id}var Nd={},Pk;function bce(){if(Pk)return Nd;Pk=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.FastLayer=void 0;const i=di(),e=yN(),n=cn();let t=class extends e.Layer{constructor(a){super(a),this.listening(!1),i.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Nd.FastLayer=t,t.prototype.nodeType="FastLayer",(0,n._registerNode)(t),Nd}var Rd={},Ik;function fC(){if(Ik)return Rd;Ik=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.Group=void 0;const i=di(),e=Gv(),n=cn();let t=class extends e.Container{_validateAdd(a){var l=a.getType();l!=="Group"&&l!=="Shape"&&i.Util.throw("You may only add groups and shapes to groups.")}};return Rd.Group=t,t.prototype.nodeType="Group",(0,n._registerNode)(t),Rd}var Dd={},Nk;function pC(){if(Nk)return Dd;Nk=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.Animation=void 0;const i=cn(),e=di(),n=function(){return i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return new Date().getTime()}}();let t=class Tu{constructor(a,l){this.id=Tu.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=a,this.setLayers(l)}setLayers(a){let l=[];return a&&(l=Array.isArray(a)?a:[a]),this.layers=l,this}getLayers(){return this.layers}addLayer(a){const l=this.layers,c=l.length;for(let h=0;h<c;h++)if(l[h]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const l=Tu.animations,c=l.length;for(let h=0;h<c;h++)if(l[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),Tu._addAnimation(this),this}stop(){return Tu._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const l=a.id,c=this.animations,h=c.length;for(let d=0;d<h;d++)if(c[d].id===l){this.animations.splice(d,1);break}}static _runFrames(){const a={},l=this.animations;for(let c=0;c<l.length;c++){const h=l[c],d=h.layers,p=h.func;h._updateFrameObject(n());const m=d.length;let v;if(p?v=p.call(h,h.frame)!==!1:v=!0,!!v)for(let y=0;y<m;y++){const b=d[y];b._id!==void 0&&(a[b._id]=b)}}for(let c in a)a.hasOwnProperty(c)&&a[c].batchDraw()}static _animationLoop(){const a=Tu;a.animations.length?(a._runFrames(),e.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Dd.Animation=t,t.animations=[],t.animIdCounter=0,t.animRunning=!1,Dd}var Rb={},Rk;function _ce(){return Rk||(Rk=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Easings=i.Tween=void 0;const e=di(),n=pC(),t=vi(),s=cn();var a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=1,c=2,h=3,d=0,p=["fill","stroke","shadowColor"];class m{constructor(b,S,C,E,w,x,M){this.prop=b,this.propFunc=S,this.begin=E,this._pos=E,this.duration=x,this._change=0,this.prevPos=0,this.yoyo=M,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=C,this._change=w-this.begin,this.pause()}fire(b){var S=this[b];S&&S()}setTime(b){b>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():b<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=b,this.update())}getTime(){return this._time}setPosition(b){this.prevPos=this._pos,this.propFunc(b),this._pos=b}getPosition(b){return b===void 0&&(b=this._time),this.func(b,this.begin,this._change,this.duration)}play(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(b){this.pause(),this._time=b,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var b=this.getTimer()-this._startTime;this.state===c?this.setTime(b):this.state===h&&this.setTime(this.duration-b)}pause(){this.state=l,this.fire("onPause")}getTimer(){return new Date().getTime()}}class v{constructor(b){var S=this,C=b.node,E=C._id,w,x=b.easing||i.Easings.Linear,M=!!b.yoyo,P;typeof b.duration>"u"?w=.3:b.duration===0?w=.001:w=b.duration,this.node=C,this._id=d++;var I=C.getLayer()||(C instanceof s.Konva.Stage?C.getLayers():null);I||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){S.tween.onEnterFrame()},I),this.tween=new m(P,function(D){S._tweenFunc(D)},x,0,1,w*1e3,M),this._addListeners(),v.attrs[E]||(v.attrs[E]={}),v.attrs[E][this._id]||(v.attrs[E][this._id]={}),v.tweens[E]||(v.tweens[E]={});for(P in b)a[P]===void 0&&this._addAttr(P,b[P]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset,this.onUpdate=b.onUpdate}_addAttr(b,S){var C=this.node,E=C._id,w,x,M,P,I,D,A,N;if(M=v.tweens[E][b],M&&delete v.attrs[E][M][b],w=C.getAttr(b),e.Util._isArray(S))if(x=[],I=Math.max(S.length,w.length),b==="points"&&S.length!==w.length&&(S.length>w.length?(A=w,w=e.Util._prepareArrayForTween(w,S,C.closed())):(D=S,S=e.Util._prepareArrayForTween(S,w,C.closed()))),b.indexOf("fill")===0)for(P=0;P<I;P++)if(P%2===0)x.push(S[P]-w[P]);else{var T=e.Util.colorToRGBA(w[P]);N=e.Util.colorToRGBA(S[P]),w[P]=T,x.push({r:N.r-T.r,g:N.g-T.g,b:N.b-T.b,a:N.a-T.a})}else for(P=0;P<I;P++)x.push(S[P]-w[P]);else p.indexOf(b)!==-1?(w=e.Util.colorToRGBA(w),N=e.Util.colorToRGBA(S),x={r:N.r-w.r,g:N.g-w.g,b:N.b-w.b,a:N.a-w.a}):x=S-w;v.attrs[E][this._id][b]={start:w,diff:x,end:S,trueEnd:D,trueStart:A},v.tweens[E][b]=this._id}_tweenFunc(b){var S=this.node,C=v.attrs[S._id][this._id],E,w,x,M,P,I,D,A;for(E in C){if(w=C[E],x=w.start,M=w.diff,A=w.end,e.Util._isArray(x))if(P=[],D=Math.max(x.length,A.length),E.indexOf("fill")===0)for(I=0;I<D;I++)I%2===0?P.push((x[I]||0)+M[I]*b):P.push("rgba("+Math.round(x[I].r+M[I].r*b)+","+Math.round(x[I].g+M[I].g*b)+","+Math.round(x[I].b+M[I].b*b)+","+(x[I].a+M[I].a*b)+")");else for(I=0;I<D;I++)P.push((x[I]||0)+M[I]*b);else p.indexOf(E)!==-1?P="rgba("+Math.round(x.r+M.r*b)+","+Math.round(x.g+M.g*b)+","+Math.round(x.b+M.b*b)+","+(x.a+M.a*b)+")":P=x+M*b;S.setAttr(E,P)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var b=this.node,S=v.attrs[b._id][this._id];S.points&&S.points.trueEnd&&b.setAttr("points",S.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var b=this.node,S=v.attrs[b._id][this._id];S.points&&S.points.trueStart&&b.points(S.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(b){return this.tween.seek(b*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var b=this.node._id,S=this._id,C=v.tweens[b],E;this.pause();for(E in C)delete v.tweens[b][E];delete v.attrs[b][S]}}i.Tween=v,v.attrs={},v.tweens={},t.Node.prototype.to=function(y){var b=y.onFinish;y.node=this,y.onFinish=function(){this.destroy(),b&&b()};var S=new v(y);S.play()},i.Easings={BackEaseIn(y,b,S,C){var E=1.70158;return S*(y/=C)*y*((E+1)*y-E)+b},BackEaseOut(y,b,S,C){var E=1.70158;return S*((y=y/C-1)*y*((E+1)*y+E)+1)+b},BackEaseInOut(y,b,S,C){var E=1.70158;return(y/=C/2)<1?S/2*(y*y*(((E*=1.525)+1)*y-E))+b:S/2*((y-=2)*y*(((E*=1.525)+1)*y+E)+2)+b},ElasticEaseIn(y,b,S,C,E,w){var x=0;return y===0?b:(y/=C)===1?b+S:(w||(w=C*.3),!E||E<Math.abs(S)?(E=S,x=w/4):x=w/(2*Math.PI)*Math.asin(S/E),-(E*Math.pow(2,10*(y-=1))*Math.sin((y*C-x)*(2*Math.PI)/w))+b)},ElasticEaseOut(y,b,S,C,E,w){var x=0;return y===0?b:(y/=C)===1?b+S:(w||(w=C*.3),!E||E<Math.abs(S)?(E=S,x=w/4):x=w/(2*Math.PI)*Math.asin(S/E),E*Math.pow(2,-10*y)*Math.sin((y*C-x)*(2*Math.PI)/w)+S+b)},ElasticEaseInOut(y,b,S,C,E,w){var x=0;return y===0?b:(y/=C/2)===2?b+S:(w||(w=C*(.3*1.5)),!E||E<Math.abs(S)?(E=S,x=w/4):x=w/(2*Math.PI)*Math.asin(S/E),y<1?-.5*(E*Math.pow(2,10*(y-=1))*Math.sin((y*C-x)*(2*Math.PI)/w))+b:E*Math.pow(2,-10*(y-=1))*Math.sin((y*C-x)*(2*Math.PI)/w)*.5+S+b)},BounceEaseOut(y,b,S,C){return(y/=C)<1/2.75?S*(7.5625*y*y)+b:y<2/2.75?S*(7.5625*(y-=1.5/2.75)*y+.75)+b:y<2.5/2.75?S*(7.5625*(y-=2.25/2.75)*y+.9375)+b:S*(7.5625*(y-=2.625/2.75)*y+.984375)+b},BounceEaseIn(y,b,S,C){return S-i.Easings.BounceEaseOut(C-y,0,S,C)+b},BounceEaseInOut(y,b,S,C){return y<C/2?i.Easings.BounceEaseIn(y*2,0,S,C)*.5+b:i.Easings.BounceEaseOut(y*2-C,0,S,C)*.5+S*.5+b},EaseIn(y,b,S,C){return S*(y/=C)*y+b},EaseOut(y,b,S,C){return-S*(y/=C)*(y-2)+b},EaseInOut(y,b,S,C){return(y/=C/2)<1?S/2*y*y+b:-S/2*(--y*(y-2)-1)+b},StrongEaseIn(y,b,S,C){return S*(y/=C)*y*y*y*y+b},StrongEaseOut(y,b,S,C){return S*((y=y/C-1)*y*y*y*y+1)+b},StrongEaseInOut(y,b,S,C){return(y/=C/2)<1?S/2*y*y*y*y*y+b:S/2*((y-=2)*y*y*y*y+2)+b},Linear(y,b,S,C){return S*y/C+b}}}(Rb)),Rb}var Dk;function xce(){return Dk||(Dk=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;const e=cn(),n=di(),t=vi(),s=Gv(),a=yce(),l=yN(),c=bce(),h=fC(),d=dC(),p=Ui(),m=pC(),v=_ce(),y=gN(),b=Hv();i.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:t.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:l.Layer,FastLayer:c.FastLayer,Group:h.Group,DD:d.DD,Shape:p.Shape,shapes:p.shapes,Animation:m.Animation,Tween:v.Tween,Easings:v.Easings,Context:y.Context,Canvas:b.Canvas}),i.default=i.Konva}(Mb)),Mb}var Ld={},Lk;function wce(){if(Lk)return Ld;Lk=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.Arc=void 0;const i=un(),e=Ui(),n=cn(),t=pn(),s=cn();let a=class extends e.Shape{_sceneFunc(c){var h=n.Konva.getAngle(this.angle()),d=this.clockwise();c.beginPath(),c.arc(0,0,this.outerRadius(),0,h,d),c.arc(0,0,this.innerRadius(),h,0,!d),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}getSelfRect(){const c=this.innerRadius(),h=this.outerRadius(),d=this.clockwise(),p=n.Konva.getAngle(d?360-this.angle():this.angle()),m=Math.cos(Math.min(p,Math.PI)),v=1,y=Math.sin(Math.min(Math.max(Math.PI,p),3*Math.PI/2)),b=Math.sin(Math.min(p,Math.PI/2)),S=m*(m>0?c:h),C=v*h,E=y*(y>0?c:h),w=b*(b>0?h:c);return{x:S,y:d?-1*w:E,width:C-S,height:w-E}}};return Ld.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(a),i.Factory.addGetterSetter(a,"innerRadius",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(a,"outerRadius",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(a,"angle",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(a,"clockwise",!1,(0,t.getBooleanValidator)()),Ld}var Bd={},Od={},Bk;function bN(){if(Bk)return Od;Bk=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.Line=void 0;const i=un(),e=Ui(),n=pn(),t=cn();function s(c,h,d,p,m,v,y){var b=Math.sqrt(Math.pow(d-c,2)+Math.pow(p-h,2)),S=Math.sqrt(Math.pow(m-d,2)+Math.pow(v-p,2)),C=y*b/(b+S),E=y*S/(b+S),w=d-C*(m-c),x=p-C*(v-h),M=d+E*(m-c),P=p+E*(v-h);return[w,x,M,P]}function a(c,h){var d=c.length,p=[],m,v;for(m=2;m<d-2;m+=2)v=s(c[m-2],c[m-1],c[m],c[m+1],c[m+2],c[m+3],h),!isNaN(v[0])&&(p.push(v[0]),p.push(v[1]),p.push(c[m]),p.push(c[m+1]),p.push(v[2]),p.push(v[3]));return p}let l=class extends e.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){var d=this.points(),p=d.length,m=this.tension(),v=this.closed(),y=this.bezier(),b,S,C;if(p){if(h.beginPath(),h.moveTo(d[0],d[1]),m!==0&&p>4){for(b=this.getTensionPoints(),S=b.length,C=v?0:4,v||h.quadraticCurveTo(b[0],b[1],b[2],b[3]);C<S-2;)h.bezierCurveTo(b[C++],b[C++],b[C++],b[C++],b[C++],b[C++]);v||h.quadraticCurveTo(b[S-2],b[S-1],d[p-2],d[p-1])}else if(y)for(C=2;C<p;)h.bezierCurveTo(d[C++],d[C++],d[C++],d[C++],d[C++],d[C++]);else for(C=2;C<p;C+=2)h.lineTo(d[C],d[C+1]);v?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){var h=this.points(),d=h.length,p=this.tension(),m=s(h[d-2],h[d-1],h[0],h[1],h[2],h[3],p),v=s(h[d-4],h[d-3],h[d-2],h[d-1],h[0],h[1],p),y=a(h,p),b=[m[2],m[3]].concat(y).concat([v[0],v[1],h[d-2],h[d-1],v[2],v[3],m[0],m[1],h[0],h[1]]);return b}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();for(var d=h[0],p=h[0],m=h[1],v=h[1],y,b,S=0;S<h.length/2;S++)y=h[S*2],b=h[S*2+1],d=Math.min(d,y),p=Math.max(p,y),m=Math.min(m,b),v=Math.max(v,b);return{x:d,y:m,width:p-d,height:v-m}}};return Od.Line=l,l.prototype.className="Line",l.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(l),i.Factory.addGetterSetter(l,"closed",!1),i.Factory.addGetterSetter(l,"bezier",!1),i.Factory.addGetterSetter(l,"tension",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(l,"points",[],(0,n.getNumberArrayValidator)()),Od}var Vd={},Db={},Ok;function Cce(){return Ok||(Ok=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.t2length=i.getQuadraticArcLength=i.getCubicArcLength=i.binomialCoefficients=i.cValues=i.tValues=void 0,i.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],i.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],i.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(l,c,h)=>{let d,p,m;d=h/2,p=0;for(let y=0;y<20;y++)m=d*i.tValues[20][y]+d,p+=i.cValues[20][y]*t(l,c,m);return d*p};i.getCubicArcLength=e;const n=(l,c,h)=>{h===void 0&&(h=1);const d=l[0]-2*l[1]+l[2],p=c[0]-2*c[1]+c[2],m=2*l[1]-2*l[0],v=2*c[1]-2*c[0],y=4*(d*d+p*p),b=4*(d*m+p*v),S=m*m+v*v;if(y===0)return h*Math.sqrt(Math.pow(l[2]-l[0],2)+Math.pow(c[2]-c[0],2));const C=b/(2*y),E=S/y,w=h+C,x=E-C*C,M=w*w+x>0?Math.sqrt(w*w+x):0,P=C*C+x>0?Math.sqrt(C*C+x):0,I=C+Math.sqrt(C*C+x)!==0?x*Math.log(Math.abs((w+M)/(C+P))):0;return Math.sqrt(y)/2*(w*M-C*P+I)};i.getQuadraticArcLength=n;function t(l,c,h){const d=s(1,h,l),p=s(1,h,c),m=d*d+p*p;return Math.sqrt(m)}const s=(l,c,h)=>{const d=h.length-1;let p,m;if(d===0)return 0;if(l===0){m=0;for(let v=0;v<=d;v++)m+=i.binomialCoefficients[d][v]*Math.pow(1-c,d-v)*Math.pow(c,v)*h[v];return m}else{p=new Array(d);for(let v=0;v<d;v++)p[v]=d*(h[v+1]-h[v]);return s(l-1,c,p)}},a=(l,c,h)=>{let d=1,p=l/c,m=(l-h(p))/c,v=0;for(;d>.001;){const y=h(p+m),b=Math.abs(l-y)/c;if(b<d)d=b,p+=m;else{const S=h(p-m),C=Math.abs(l-S)/c;C<d?(d=C,p-=m):m/=2}if(v++,v>500)break}return p};i.t2length=a}(Db)),Db}var Vk;function mC(){if(Vk)return Vd;Vk=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.Path=void 0;const i=un(),e=Ui(),n=cn(),t=Cce();let s=class Ar extends e.Shape{constructor(l){super(l),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ar.parsePathData(this.data()),this.pathLength=Ar.getPathLength(this.dataArray)}_sceneFunc(l){var c=this.dataArray;l.beginPath();for(var h=!1,d=0;d<c.length;d++){var p=c[d].command,m=c[d].points;switch(p){case"L":l.lineTo(m[0],m[1]);break;case"M":l.moveTo(m[0],m[1]);break;case"C":l.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]);break;case"Q":l.quadraticCurveTo(m[0],m[1],m[2],m[3]);break;case"A":var v=m[0],y=m[1],b=m[2],S=m[3],C=m[4],E=m[5],w=m[6],x=m[7],M=b>S?b:S,P=b>S?1:b/S,I=b>S?S/b:1;l.translate(v,y),l.rotate(w),l.scale(P,I),l.arc(0,0,M,C,C+E,1-x),l.scale(1/P,1/I),l.rotate(-w),l.translate(-v,-y);break;case"z":h=!0,l.closePath();break}}!h&&!this.hasFill()?l.strokeShape(this):l.fillStrokeShape(this)}getSelfRect(){var l=[];this.dataArray.forEach(function(b){if(b.command==="A"){var S=b.points[4],C=b.points[5],E=b.points[4]+C,w=Math.PI/180;if(Math.abs(S-E)<w&&(w=Math.abs(S-E)),C<0)for(let x=S-w;x>E;x-=w){const M=Ar.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],x,0);l.push(M.x,M.y)}else for(let x=S+w;x<E;x+=w){const M=Ar.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],x,0);l.push(M.x,M.y)}}else if(b.command==="C")for(let x=0;x<=1;x+=.01){const M=Ar.getPointOnCubicBezier(x,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);l.push(M.x,M.y)}else l=l.concat(b.points)});for(var c=l[0],h=l[0],d=l[1],p=l[1],m,v,y=0;y<l.length/2;y++)m=l[y*2],v=l[y*2+1],isNaN(m)||(c=Math.min(c,m),h=Math.max(h,m)),isNaN(v)||(d=Math.min(d,v),p=Math.max(p,v));return{x:c,y:d,width:h-c,height:p-d}}getLength(){return this.pathLength}getPointAtLength(l){return Ar.getPointAtLengthOfDataArray(l,this.dataArray)}static getLineLength(l,c,h,d){return Math.sqrt((h-l)*(h-l)+(d-c)*(d-c))}static getPathLength(l){let c=0;for(var h=0;h<l.length;++h)c+=l[h].pathLength;return c}static getPointAtLengthOfDataArray(l,c){var h,d=0,p=c.length;if(!p)return null;for(;d<p&&l>c[d].pathLength;)l-=c[d].pathLength,++d;if(d===p)return h=c[d-1].points.slice(-2),{x:h[0],y:h[1]};if(l<.01)return h=c[d].points.slice(0,2),{x:h[0],y:h[1]};var m=c[d],v=m.points;switch(m.command){case"L":return Ar.getPointOnLine(l,m.start.x,m.start.y,v[0],v[1]);case"C":return Ar.getPointOnCubicBezier((0,t.t2length)(l,Ar.getPathLength(c),M=>(0,t.getCubicArcLength)([m.start.x,v[0],v[2],v[4]],[m.start.y,v[1],v[3],v[5]],M)),m.start.x,m.start.y,v[0],v[1],v[2],v[3],v[4],v[5]);case"Q":return Ar.getPointOnQuadraticBezier((0,t.t2length)(l,Ar.getPathLength(c),M=>(0,t.getQuadraticArcLength)([m.start.x,v[0],v[2]],[m.start.y,v[1],v[3]],M)),m.start.x,m.start.y,v[0],v[1],v[2],v[3]);case"A":var y=v[0],b=v[1],S=v[2],C=v[3],E=v[4],w=v[5],x=v[6];return E+=w*l/m.pathLength,Ar.getPointOnEllipticalArc(y,b,S,C,E,x)}return null}static getPointOnLine(l,c,h,d,p,m,v){m=m??c,v=v??h;const y=this.getLineLength(c,h,d,p);if(y<1e-10)return{x:c,y:h};if(d===c)return{x:m,y:v+(p>h?l:-l)};const b=(p-h)/(d-c),S=Math.sqrt(l*l/(1+b*b))*(d<c?-1:1),C=b*S;if(Math.abs(v-h-b*(m-c))<1e-10)return{x:m+S,y:v+C};const E=((m-c)*(d-c)+(v-h)*(p-h))/(y*y),w=c+E*(d-c),x=h+E*(p-h),M=this.getLineLength(m,v,w,x),P=Math.sqrt(l*l-M*M),I=Math.sqrt(P*P/(1+b*b))*(d<c?-1:1),D=b*I;return{x:w+I,y:x+D}}static getPointOnCubicBezier(l,c,h,d,p,m,v,y,b){function S(P){return P*P*P}function C(P){return 3*P*P*(1-P)}function E(P){return 3*P*(1-P)*(1-P)}function w(P){return(1-P)*(1-P)*(1-P)}var x=y*S(l)+m*C(l)+d*E(l)+c*w(l),M=b*S(l)+v*C(l)+p*E(l)+h*w(l);return{x,y:M}}static getPointOnQuadraticBezier(l,c,h,d,p,m,v){function y(w){return w*w}function b(w){return 2*w*(1-w)}function S(w){return(1-w)*(1-w)}var C=m*y(l)+d*b(l)+c*S(l),E=v*y(l)+p*b(l)+h*S(l);return{x:C,y:E}}static getPointOnEllipticalArc(l,c,h,d,p,m){var v=Math.cos(m),y=Math.sin(m),b={x:h*Math.cos(p),y:d*Math.sin(p)};return{x:l+(b.x*v-b.y*y),y:c+(b.x*y+b.y*v)}}static parsePathData(l){if(!l)return[];var c=l,h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];c=c.replace(new RegExp(" ","g"),",");for(var d=0;d<h.length;d++)c=c.replace(new RegExp(h[d],"g"),"|"+h[d]);var p=c.split("|"),m=[],v=[],y=0,b=0,S=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,C;for(d=1;d<p.length;d++){var E=p[d],w=E.charAt(0);for(E=E.slice(1),v.length=0;C=S.exec(E);)v.push(C[0]);for(var x=[],M=0,P=v.length;M<P;M++){if(v[M]==="00"){x.push(0,0);continue}var I=parseFloat(v[M]);isNaN(I)?x.push(0):x.push(I)}for(;x.length>0&&!isNaN(x[0]);){var D="",A=[],N=y,T=b,L,V,R,B,F,U,q,Y,ne,de;switch(w){case"l":y+=x.shift(),b+=x.shift(),D="L",A.push(y,b);break;case"L":y=x.shift(),b=x.shift(),A.push(y,b);break;case"m":var ve=x.shift(),Re=x.shift();if(y+=ve,b+=Re,D="M",m.length>2&&m[m.length-1].command==="z"){for(var Ee=m.length-2;Ee>=0;Ee--)if(m[Ee].command==="M"){y=m[Ee].points[0]+ve,b=m[Ee].points[1]+Re;break}}A.push(y,b),w="l";break;case"M":y=x.shift(),b=x.shift(),D="M",A.push(y,b),w="L";break;case"h":y+=x.shift(),D="L",A.push(y,b);break;case"H":y=x.shift(),D="L",A.push(y,b);break;case"v":b+=x.shift(),D="L",A.push(y,b);break;case"V":b=x.shift(),D="L",A.push(y,b);break;case"C":A.push(x.shift(),x.shift(),x.shift(),x.shift()),y=x.shift(),b=x.shift(),A.push(y,b);break;case"c":A.push(y+x.shift(),b+x.shift(),y+x.shift(),b+x.shift()),y+=x.shift(),b+=x.shift(),D="C",A.push(y,b);break;case"S":V=y,R=b,L=m[m.length-1],L.command==="C"&&(V=y+(y-L.points[2]),R=b+(b-L.points[3])),A.push(V,R,x.shift(),x.shift()),y=x.shift(),b=x.shift(),D="C",A.push(y,b);break;case"s":V=y,R=b,L=m[m.length-1],L.command==="C"&&(V=y+(y-L.points[2]),R=b+(b-L.points[3])),A.push(V,R,y+x.shift(),b+x.shift()),y+=x.shift(),b+=x.shift(),D="C",A.push(y,b);break;case"Q":A.push(x.shift(),x.shift()),y=x.shift(),b=x.shift(),A.push(y,b);break;case"q":A.push(y+x.shift(),b+x.shift()),y+=x.shift(),b+=x.shift(),D="Q",A.push(y,b);break;case"T":V=y,R=b,L=m[m.length-1],L.command==="Q"&&(V=y+(y-L.points[0]),R=b+(b-L.points[1])),y=x.shift(),b=x.shift(),D="Q",A.push(V,R,y,b);break;case"t":V=y,R=b,L=m[m.length-1],L.command==="Q"&&(V=y+(y-L.points[0]),R=b+(b-L.points[1])),y+=x.shift(),b+=x.shift(),D="Q",A.push(V,R,y,b);break;case"A":B=x.shift(),F=x.shift(),U=x.shift(),q=x.shift(),Y=x.shift(),ne=y,de=b,y=x.shift(),b=x.shift(),D="A",A=this.convertEndpointToCenterParameterization(ne,de,y,b,q,Y,B,F,U);break;case"a":B=x.shift(),F=x.shift(),U=x.shift(),q=x.shift(),Y=x.shift(),ne=y,de=b,y+=x.shift(),b+=x.shift(),D="A",A=this.convertEndpointToCenterParameterization(ne,de,y,b,q,Y,B,F,U);break}m.push({command:D||w,points:A,start:{x:N,y:T},pathLength:this.calcLength(N,T,D||w,A)})}(w==="z"||w==="Z")&&m.push({command:"z",points:[],start:void 0,pathLength:0})}return m}static calcLength(l,c,h,d){var p,m,v,y,b=Ar;switch(h){case"L":return b.getLineLength(l,c,d[0],d[1]);case"C":return(0,t.getCubicArcLength)([l,d[0],d[2],d[4]],[c,d[1],d[3],d[5]],1);case"Q":return(0,t.getQuadraticArcLength)([l,d[0],d[2]],[c,d[1],d[3]],1);case"A":p=0;var S=d[4],C=d[5],E=d[4]+C,w=Math.PI/180;if(Math.abs(S-E)<w&&(w=Math.abs(S-E)),m=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],S,0),C<0)for(y=S-w;y>E;y-=w)v=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],y,0),p+=b.getLineLength(m.x,m.y,v.x,v.y),m=v;else for(y=S+w;y<E;y+=w)v=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],y,0),p+=b.getLineLength(m.x,m.y,v.x,v.y),m=v;return v=b.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],E,0),p+=b.getLineLength(m.x,m.y,v.x,v.y),p}return 0}static convertEndpointToCenterParameterization(l,c,h,d,p,m,v,y,b){var S=b*(Math.PI/180),C=Math.cos(S)*(l-h)/2+Math.sin(S)*(c-d)/2,E=-1*Math.sin(S)*(l-h)/2+Math.cos(S)*(c-d)/2,w=C*C/(v*v)+E*E/(y*y);w>1&&(v*=Math.sqrt(w),y*=Math.sqrt(w));var x=Math.sqrt((v*v*(y*y)-v*v*(E*E)-y*y*(C*C))/(v*v*(E*E)+y*y*(C*C)));p===m&&(x*=-1),isNaN(x)&&(x=0);var M=x*v*E/y,P=x*-y*C/v,I=(l+h)/2+Math.cos(S)*M-Math.sin(S)*P,D=(c+d)/2+Math.sin(S)*M+Math.cos(S)*P,A=function(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1])},N=function(F,U){return(F[0]*U[0]+F[1]*U[1])/(A(F)*A(U))},T=function(F,U){return(F[0]*U[1]<F[1]*U[0]?-1:1)*Math.acos(N(F,U))},L=T([1,0],[(C-M)/v,(E-P)/y]),V=[(C-M)/v,(E-P)/y],R=[(-1*C-M)/v,(-1*E-P)/y],B=T(V,R);return N(V,R)<=-1&&(B=Math.PI),N(V,R)>=1&&(B=0),m===0&&B>0&&(B=B-2*Math.PI),m===1&&B<0&&(B=B+2*Math.PI),[I,D,v,y,L,B,S,m]}};return Vd.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(s),i.Factory.addGetterSetter(s,"data"),Vd}var Fk;function Sce(){if(Fk)return Bd;Fk=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.Arrow=void 0;const i=un(),e=bN(),n=pn(),t=cn(),s=mC();let a=class extends e.Line{_sceneFunc(c){super._sceneFunc(c);var h=Math.PI*2,d=this.points(),p=d,m=this.tension()!==0&&d.length>4;m&&(p=this.getTensionPoints());var v=this.pointerLength(),y=d.length,b,S;if(m){const w=[p[p.length-4],p[p.length-3],p[p.length-2],p[p.length-1],d[y-2],d[y-1]],x=s.Path.calcLength(p[p.length-4],p[p.length-3],"C",w),M=s.Path.getPointOnQuadraticBezier(Math.min(1,1-v/x),w[0],w[1],w[2],w[3],w[4],w[5]);b=d[y-2]-M.x,S=d[y-1]-M.y}else b=d[y-2]-d[y-4],S=d[y-1]-d[y-3];var C=(Math.atan2(S,b)+h)%h,E=this.pointerWidth();this.pointerAtEnding()&&(c.save(),c.beginPath(),c.translate(d[y-2],d[y-1]),c.rotate(C),c.moveTo(0,0),c.lineTo(-v,E/2),c.lineTo(-v,-E/2),c.closePath(),c.restore(),this.__fillStroke(c)),this.pointerAtBeginning()&&(c.save(),c.beginPath(),c.translate(d[0],d[1]),m?(b=(p[0]+p[2])/2-d[0],S=(p[1]+p[3])/2-d[1]):(b=d[2]-d[0],S=d[3]-d[1]),c.rotate((Math.atan2(-S,-b)+h)%h),c.moveTo(0,0),c.lineTo(-v,E/2),c.lineTo(-v,-E/2),c.closePath(),c.restore(),this.__fillStroke(c))}__fillStroke(c){var h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,c.setLineDash([])),c.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const c=super.getSelfRect(),h=this.pointerWidth()/2;return{x:c.x-h,y:c.y-h,width:c.width+h*2,height:c.height+h*2}}};return Bd.Arrow=a,a.prototype.className="Arrow",(0,t._registerNode)(a),i.Factory.addGetterSetter(a,"pointerLength",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(a,"pointerWidth",10,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(a,"pointerAtBeginning",!1),i.Factory.addGetterSetter(a,"pointerAtEnding",!0),Bd}var Fd={},Uk;function Ece(){if(Uk)return Fd;Uk=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.Circle=void 0;const i=un(),e=Ui(),n=pn(),t=cn();let s=class extends e.Shape{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(l){this.radius()!==l/2&&this.radius(l/2)}setHeight(l){this.radius()!==l/2&&this.radius(l/2)}};return Fd.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,t._registerNode)(s),i.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),Fd}var Ud={},zk;function Mce(){if(zk)return Ud;zk=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Ellipse=void 0;const i=un(),e=Ui(),n=pn(),t=cn();let s=class extends e.Shape{_sceneFunc(l){var c=this.radiusX(),h=this.radiusY();l.beginPath(),l.save(),c!==h&&l.scale(1,h/c),l.arc(0,0,c,0,Math.PI*2,!1),l.restore(),l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(l){this.radiusX(l/2)}setHeight(l){this.radiusY(l/2)}};return Ud.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,t._registerNode)(s),i.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),i.Factory.addGetterSetter(s,"radiusX",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"radiusY",0,(0,n.getNumberValidator)()),Ud}var zd={},$k;function Tce(){if($k)return zd;$k=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.Image=void 0;const i=di(),e=un(),n=Ui(),t=cn(),s=pn();let a=class _N extends n.Shape{constructor(c){super(c),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const c=this.image();c&&c.complete||c&&c.readyState===4||c&&c.addEventListener&&c.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(c){const h=this.getWidth(),d=this.getHeight(),p=this.cornerRadius(),m=this.attrs.image;let v;if(m){const y=this.attrs.cropWidth,b=this.attrs.cropHeight;y&&b?v=[m,this.cropX(),this.cropY(),y,b,0,0,h,d]:v=[m,0,0,h,d]}(this.hasFill()||this.hasStroke()||p)&&(c.beginPath(),p?i.Util.drawRoundedRectPath(c,h,d,p):c.rect(0,0,h,d),c.closePath(),c.fillStrokeShape(this)),m&&(p&&c.clip(),c.drawImage.apply(c,v))}_hitFunc(c){var h=this.width(),d=this.height(),p=this.cornerRadius();c.beginPath(),p?i.Util.drawRoundedRectPath(c,h,d,p):c.rect(0,0,h,d),c.closePath(),c.fillStrokeShape(this)}getWidth(){var c,h;return(c=this.attrs.width)!==null&&c!==void 0?c:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var c,h;return(c=this.attrs.height)!==null&&c!==void 0?c:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(c,h,d=null){var p=i.Util.createImageElement();p.onload=function(){var m=new _N({image:p});h(m)},p.onerror=d,p.crossOrigin="Anonymous",p.src=c}};return zd.Image=a,a.prototype.className="Image",(0,t._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(a,"image"),e.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),zd}var jl={},Hk;function kce(){if(Hk)return jl;Hk=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.Tag=jl.Label=void 0;const i=un(),e=Ui(),n=fC(),t=pn(),s=cn();var a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],l="Change.konva",c="none",h="up",d="right",p="down",m="left",v=a.length;let y=class extends n.Group{constructor(C){super(C),this.on("add.konva",function(E){this._addListeners(E.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(C){var E=this,w,x=function(){E._sync()};for(w=0;w<v;w++)C.on(a[w]+l,x)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var C=this.getText(),E=this.getTag(),w,x,M,P,I,D,A;if(C&&E){switch(w=C.width(),x=C.height(),M=E.pointerDirection(),P=E.pointerWidth(),A=E.pointerHeight(),I=0,D=0,M){case h:I=w/2,D=-1*A;break;case d:I=w+P,D=x/2;break;case p:I=w/2,D=x+A;break;case m:I=-1*P,D=x/2;break}E.setAttrs({x:-1*I,y:-1*D,width:w,height:x}),C.setAttrs({x:-1*I,y:-1*D})}}};jl.Label=y,y.prototype.className="Label",(0,s._registerNode)(y);class b extends e.Shape{_sceneFunc(C){var E=this.width(),w=this.height(),x=this.pointerDirection(),M=this.pointerWidth(),P=this.pointerHeight(),I=this.cornerRadius();let D=0,A=0,N=0,T=0;typeof I=="number"?D=A=N=T=Math.min(I,E/2,w/2):(D=Math.min(I[0]||0,E/2,w/2),A=Math.min(I[1]||0,E/2,w/2),T=Math.min(I[2]||0,E/2,w/2),N=Math.min(I[3]||0,E/2,w/2)),C.beginPath(),C.moveTo(D,0),x===h&&(C.lineTo((E-M)/2,0),C.lineTo(E/2,-1*P),C.lineTo((E+M)/2,0)),C.lineTo(E-A,0),C.arc(E-A,A,A,Math.PI*3/2,0,!1),x===d&&(C.lineTo(E,(w-P)/2),C.lineTo(E+M,w/2),C.lineTo(E,(w+P)/2)),C.lineTo(E,w-T),C.arc(E-T,w-T,T,0,Math.PI/2,!1),x===p&&(C.lineTo((E+M)/2,w),C.lineTo(E/2,w+P),C.lineTo((E-M)/2,w)),C.lineTo(N,w),C.arc(N,w-N,N,Math.PI/2,Math.PI,!1),x===m&&(C.lineTo(0,(w+P)/2),C.lineTo(-1*M,w/2),C.lineTo(0,(w-P)/2)),C.lineTo(0,D),C.arc(D,D,D,Math.PI,Math.PI*3/2,!1),C.closePath(),C.fillStrokeShape(this)}getSelfRect(){var C=0,E=0,w=this.pointerWidth(),x=this.pointerHeight(),M=this.pointerDirection(),P=this.width(),I=this.height();return M===h?(E-=x,I+=x):M===p?I+=x:M===m?(C-=w*1.5,P+=w):M===d&&(P+=w*1.5),{x:C,y:E,width:P,height:I}}}return jl.Tag=b,b.prototype.className="Tag",(0,s._registerNode)(b),i.Factory.addGetterSetter(b,"pointerDirection",c),i.Factory.addGetterSetter(b,"pointerWidth",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(b,"pointerHeight",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(b,"cornerRadius",0,(0,t.getNumberOrArrayOfNumbersValidator)(4)),jl}var $d={},Gk;function xN(){if(Gk)return $d;Gk=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.Rect=void 0;const i=un(),e=Ui(),n=cn(),t=di(),s=pn();let a=class extends e.Shape{_sceneFunc(c){var h=this.cornerRadius(),d=this.width(),p=this.height();c.beginPath(),h?t.Util.drawRoundedRectPath(c,d,p,h):c.rect(0,0,d,p),c.closePath(),c.fillStrokeShape(this)}};return $d.Rect=a,a.prototype.className="Rect",(0,n._registerNode)(a),i.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),$d}var Hd={},Wk;function Ace(){if(Wk)return Hd;Wk=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.RegularPolygon=void 0;const i=un(),e=Ui(),n=pn(),t=cn();let s=class extends e.Shape{_sceneFunc(l){const c=this._getPoints();l.beginPath(),l.moveTo(c[0].x,c[0].y);for(var h=1;h<c.length;h++)l.lineTo(c[h].x,c[h].y);l.closePath(),l.fillStrokeShape(this)}_getPoints(){const l=this.attrs.sides,c=this.attrs.radius||0,h=[];for(var d=0;d<l;d++)h.push({x:c*Math.sin(d*2*Math.PI/l),y:-1*c*Math.cos(d*2*Math.PI/l)});return h}getSelfRect(){const l=this._getPoints();var c=l[0].x,h=l[0].y,d=l[0].x,p=l[0].y;return l.forEach(m=>{c=Math.min(c,m.x),h=Math.max(h,m.x),d=Math.min(d,m.y),p=Math.max(p,m.y)}),{x:c,y:d,width:h-c,height:p-d}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(l){this.radius(l/2)}setHeight(l){this.radius(l/2)}};return Hd.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,t._registerNode)(s),i.Factory.addGetterSetter(s,"radius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"sides",0,(0,n.getNumberValidator)()),Hd}var Gd={},jk;function Pce(){if(jk)return Gd;jk=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.Ring=void 0;const i=un(),e=Ui(),n=pn(),t=cn();var s=Math.PI*2;let a=class extends e.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.innerRadius(),0,s,!1),c.moveTo(this.outerRadius(),0),c.arc(0,0,this.outerRadius(),s,0,!0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}};return Gd.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,t._registerNode)(a),i.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),Gd}var Wd={},Kk;function Ice(){if(Kk)return Wd;Kk=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.Sprite=void 0;const i=un(),e=Ui(),n=pC(),t=pn(),s=cn();let a=class extends e.Shape{constructor(c){super(c),this._updated=!0,this.anim=new n.Animation(()=>{var h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(c){var h=this.animation(),d=this.frameIndex(),p=d*4,m=this.animations()[h],v=this.frameOffsets(),y=m[p+0],b=m[p+1],S=m[p+2],C=m[p+3],E=this.image();if((this.hasFill()||this.hasStroke())&&(c.beginPath(),c.rect(0,0,S,C),c.closePath(),c.fillStrokeShape(this)),E)if(v){var w=v[h],x=d*2;c.drawImage(E,y,b,S,C,w[x+0],w[x+1],S,C)}else c.drawImage(E,y,b,S,C,0,0,S,C)}_hitFunc(c){var h=this.animation(),d=this.frameIndex(),p=d*4,m=this.animations()[h],v=this.frameOffsets(),y=m[p+2],b=m[p+3];if(c.beginPath(),v){var S=v[h],C=d*2;c.rect(S[C+0],S[C+1],y,b)}else c.rect(0,0,y,b);c.closePath(),c.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var c=this;this.interval=setInterval(function(){c._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var c=this.getLayer();this.anim.setLayers(c),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var c=this.frameIndex(),h=this.animation(),d=this.animations(),p=d[h],m=p.length/4;c<m-1?this.frameIndex(c+1):this.frameIndex(0)}};return Wd.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),i.Factory.addGetterSetter(a,"animation"),i.Factory.addGetterSetter(a,"animations"),i.Factory.addGetterSetter(a,"frameOffsets"),i.Factory.addGetterSetter(a,"image"),i.Factory.addGetterSetter(a,"frameIndex",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(a,"frameRate",17,(0,t.getNumberValidator)()),i.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Wd}var jd={},qk;function Nce(){if(qk)return jd;qk=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.Star=void 0;const i=un(),e=Ui(),n=pn(),t=cn();let s=class extends e.Shape{_sceneFunc(l){var c=this.innerRadius(),h=this.outerRadius(),d=this.numPoints();l.beginPath(),l.moveTo(0,0-h);for(var p=1;p<d*2;p++){var m=p%2===0?h:c,v=m*Math.sin(p*Math.PI/d),y=-1*m*Math.cos(p*Math.PI/d);l.lineTo(v,y)}l.closePath(),l.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}};return jd.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,t._registerNode)(s),i.Factory.addGetterSetter(s,"numPoints",5,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"innerRadius",0,(0,n.getNumberValidator)()),i.Factory.addGetterSetter(s,"outerRadius",0,(0,n.getNumberValidator)()),jd}var Kl={},Xk;function wN(){if(Xk)return Kl;Xk=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.Text=Kl.stringToArray=void 0;const i=di(),e=un(),n=Ui(),t=cn(),s=pn(),a=cn();function l(Re){return Array.from(Re)}Kl.stringToArray=l;var c="auto",h="center",d="inherit",p="justify",m="Change.konva",v="2d",y="-",b="left",S="text",C="Text",E="top",w="bottom",x="middle",M="normal",P="px ",I=" ",D="right",A="rtl",N="word",T="char",L="none",V="",R=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],B=R.length;function F(Re){return Re.split(",").map(Ee=>{Ee=Ee.trim();const ce=Ee.indexOf(" ")>=0,Ce=Ee.indexOf('"')>=0||Ee.indexOf("'")>=0;return ce&&!Ce&&(Ee=`"${Ee}"`),Ee}).join(", ")}var U;function q(){return U||(U=i.Util.createCanvasElement().getContext(v),U)}function Y(Re){Re.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ne(Re){Re.setAttr("miterLimit",2),Re.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function de(Re){return Re=Re||{},!Re.fillLinearGradientColorStops&&!Re.fillRadialGradientColorStops&&!Re.fillPatternImage&&(Re.fill=Re.fill||"black"),Re}let ve=class extends n.Shape{constructor(Ee){super(de(Ee)),this._partialTextX=0,this._partialTextY=0;for(var ce=0;ce<B;ce++)this.on(R[ce]+m,this._setTextData);this._setTextData()}_sceneFunc(Ee){var ce=this.textArr,Ce=ce.length;if(this.text()){var Me=this.padding(),ee=this.fontSize(),re=this.lineHeight()*ee,H=this.verticalAlign(),$=this.direction(),te=0,le=this.align(),K=this.getWidth(),X=this.letterSpacing(),oe=this.fill(),fe=this.textDecoration(),be=fe.indexOf("underline")!==-1,ke=fe.indexOf("line-through")!==-1,J;$=$===d?Ee.direction:$;var W=re/2,ue=x;if(t.Konva._fixTextRendering){var he=this.measureSize("M");ue="alphabetic",W=(he.fontBoundingBoxAscent-he.fontBoundingBoxDescent)/2+re/2}var xe=0,Te=0;for($===A&&Ee.setAttr("direction",$),Ee.setAttr("font",this._getContextFont()),Ee.setAttr("textBaseline",ue),Ee.setAttr("textAlign",b),H===x?te=(this.getHeight()-Ce*re-Me*2)/2:H===w&&(te=this.getHeight()-Ce*re-Me*2),Ee.translate(Me,te+Me),J=0;J<Ce;J++){var xe=0,Te=0,He=ce[J],Be=He.text,ze=He.width,tt=He.lastInParagraph,je,et,bt;if(Ee.save(),le===D?xe+=K-ze-Me*2:le===h&&(xe+=(K-ze-Me*2)/2),be){Ee.save(),Ee.beginPath();let Oe=t.Konva._fixTextRendering?Math.round(ee/4):Math.round(ee/2);const pe=xe,Ve=W+Te+Oe;Ee.moveTo(pe,Ve),je=Be.split(" ").length-1,et=je===0,bt=le===p&&!tt?K-Me*2:ze,Ee.lineTo(pe+Math.round(bt),Ve),Ee.lineWidth=ee/15;const $e=this._getLinearGradient();Ee.strokeStyle=$e||oe,Ee.stroke(),Ee.restore()}if(ke){Ee.save(),Ee.beginPath();let Oe=t.Konva._fixTextRendering?-Math.round(ee/4):0;Ee.moveTo(xe,W+Te+Oe),je=Be.split(" ").length-1,et=je===0,bt=le===p&&tt&&!et?K-Me*2:ze,Ee.lineTo(xe+Math.round(bt),W+Te+Oe),Ee.lineWidth=ee/15;const pe=this._getLinearGradient();Ee.strokeStyle=pe||oe,Ee.stroke(),Ee.restore()}if($!==A&&(X!==0||le===p)){je=Be.split(" ").length-1;for(var _t=l(Be),at=0;at<_t.length;at++){var Rt=_t[at];Rt===" "&&!tt&&le===p&&(xe+=(K-Me*2-ze)/je),this._partialTextX=xe,this._partialTextY=W+Te,this._partialText=Rt,Ee.fillStrokeShape(this),xe+=this.measureSize(Rt).width+X}}else X!==0&&Ee.setAttr("letterSpacing",`${X}px`),this._partialTextX=xe,this._partialTextY=W+Te,this._partialText=Be,Ee.fillStrokeShape(this);Ee.restore(),Ce>1&&(W+=re)}}}_hitFunc(Ee){var ce=this.getWidth(),Ce=this.getHeight();Ee.beginPath(),Ee.rect(0,0,ce,Ce),Ee.closePath(),Ee.fillStrokeShape(this)}setText(Ee){var ce=i.Util._isString(Ee)?Ee:Ee==null?"":Ee+"";return this._setAttr(S,ce),this}getWidth(){var Ee=this.attrs.width===c||this.attrs.width===void 0;return Ee?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var Ee=this.attrs.height===c||this.attrs.height===void 0;return Ee?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(Ee){var ce=q(),Ce=this.fontSize(),Me;return ce.save(),ce.font=this._getContextFont(),Me=ce.measureText(Ee),ce.restore(),{actualBoundingBoxAscent:Me.actualBoundingBoxAscent,actualBoundingBoxDescent:Me.actualBoundingBoxDescent,actualBoundingBoxLeft:Me.actualBoundingBoxLeft,actualBoundingBoxRight:Me.actualBoundingBoxRight,alphabeticBaseline:Me.alphabeticBaseline,emHeightAscent:Me.emHeightAscent,emHeightDescent:Me.emHeightDescent,fontBoundingBoxAscent:Me.fontBoundingBoxAscent,fontBoundingBoxDescent:Me.fontBoundingBoxDescent,hangingBaseline:Me.hangingBaseline,ideographicBaseline:Me.ideographicBaseline,width:Me.width,height:Ce}}_getContextFont(){return this.fontStyle()+I+this.fontVariant()+I+(this.fontSize()+P)+F(this.fontFamily())}_addTextLine(Ee){this.align()===p&&(Ee=Ee.trim());var Ce=this._getTextWidth(Ee);return this.textArr.push({text:Ee,width:Ce,lastInParagraph:!1})}_getTextWidth(Ee){var ce=this.letterSpacing(),Ce=Ee.length;return q().measureText(Ee).width+(Ce?ce*(Ce-1):0)}_setTextData(){var Ee=this.text().split(`
`),ce=+this.fontSize(),Ce=0,Me=this.lineHeight()*ce,ee=this.attrs.width,re=this.attrs.height,H=ee!==c&&ee!==void 0,$=re!==c&&re!==void 0,te=this.padding(),le=ee-te*2,K=re-te*2,X=0,oe=this.wrap(),fe=oe!==L,be=oe!==T&&fe,ke=this.ellipsis();this.textArr=[],q().font=this._getContextFont();for(var J=ke?this._getTextWidth(V):0,W=0,ue=Ee.length;W<ue;++W){var he=Ee[W],xe=this._getTextWidth(he);if(H&&xe>le)for(;he.length>0;){for(var Te=0,He=he.length,Be="",ze=0;Te<He;){var tt=Te+He>>>1,je=he.slice(0,tt+1),et=this._getTextWidth(je)+J;et<=le?(Te=tt+1,Be=je,ze=et):He=tt}if(Be){if(be){var bt,_t=he[Be.length],at=_t===I||_t===y;at&&ze<=le?bt=Be.length:bt=Math.max(Be.lastIndexOf(I),Be.lastIndexOf(y))+1,bt>0&&(Te=bt,Be=Be.slice(0,Te),ze=this._getTextWidth(Be))}Be=Be.trimRight(),this._addTextLine(Be),Ce=Math.max(Ce,ze),X+=Me;var Rt=this._shouldHandleEllipsis(X);if(Rt){this._tryToAddEllipsisToLastLine();break}if(he=he.slice(Te),he=he.trimLeft(),he.length>0&&(xe=this._getTextWidth(he),xe<=le)){this._addTextLine(he),X+=Me,Ce=Math.max(Ce,xe);break}}else break}else this._addTextLine(he),X+=Me,Ce=Math.max(Ce,xe),this._shouldHandleEllipsis(X)&&W<ue-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),$&&X+Me>K)break}this.textHeight=ce,this.textWidth=Ce}_shouldHandleEllipsis(Ee){var ce=+this.fontSize(),Ce=this.lineHeight()*ce,Me=this.attrs.height,ee=Me!==c&&Me!==void 0,re=this.padding(),H=Me-re*2,$=this.wrap(),te=$!==L;return!te||ee&&Ee+Ce>H}_tryToAddEllipsisToLastLine(){var Ee=this.attrs.width,ce=Ee!==c&&Ee!==void 0,Ce=this.padding(),Me=Ee-Ce*2,ee=this.ellipsis(),re=this.textArr[this.textArr.length-1];if(!(!re||!ee)){if(ce){var H=this._getTextWidth(re.text+V)<Me;H||(re.text=re.text.slice(0,re.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(re.text+V)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const Ee=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ce=this.hasShadow();return Ee&&ce?!0:super._useBufferCanvas()}};return Kl.Text=ve,ve.prototype._fillFunc=Y,ve.prototype._strokeFunc=ne,ve.prototype.className=C,ve.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(ve),e.Factory.overWriteSetter(ve,"width",(0,s.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(ve,"height",(0,s.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(ve,"direction",d),e.Factory.addGetterSetter(ve,"fontFamily","Arial"),e.Factory.addGetterSetter(ve,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ve,"fontStyle",M),e.Factory.addGetterSetter(ve,"fontVariant",M),e.Factory.addGetterSetter(ve,"padding",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ve,"align",b),e.Factory.addGetterSetter(ve,"verticalAlign",E),e.Factory.addGetterSetter(ve,"lineHeight",1,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ve,"wrap",N),e.Factory.addGetterSetter(ve,"ellipsis",!1,(0,s.getBooleanValidator)()),e.Factory.addGetterSetter(ve,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(ve,"text","",(0,s.getStringValidator)()),e.Factory.addGetterSetter(ve,"textDecoration",""),Kl}var Kd={},Yk;function Rce(){if(Yk)return Kd;Yk=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.TextPath=void 0;const i=di(),e=un(),n=Ui(),t=mC(),s=wN(),a=pn(),l=cn();var c="",h="normal";function d(v){v.fillText(this.partialText,0,0)}function p(v){v.strokeText(this.partialText,0,0)}let m=class extends n.Shape{constructor(y){super(y),this.dummyCanvas=i.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return t.Path.getPathLength(this.dataArray)}_getPointAtLength(y){if(!this.attrs.data)return null;const b=this.pathLength;return y-1>b?null:t.Path.getPointAtLengthOfDataArray(y,this.dataArray)}_readDataAttribute(){this.dataArray=t.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(y){y.setAttr("font",this._getContextFont()),y.setAttr("textBaseline",this.textBaseline()),y.setAttr("textAlign","left"),y.save();var b=this.textDecoration(),S=this.fill(),C=this.fontSize(),E=this.glyphInfo;b==="underline"&&y.beginPath();for(var w=0;w<E.length;w++){y.save();var x=E[w].p0;y.translate(x.x,x.y),y.rotate(E[w].rotation),this.partialText=E[w].text,y.fillStrokeShape(this),b==="underline"&&(w===0&&y.moveTo(0,C/2+1),y.lineTo(C,C/2+1)),y.restore()}b==="underline"&&(y.strokeStyle=S,y.lineWidth=C/20,y.stroke()),y.restore()}_hitFunc(y){y.beginPath();var b=this.glyphInfo;if(b.length>=1){var S=b[0].p0;y.moveTo(S.x,S.y)}for(var C=0;C<b.length;C++){var E=b[C].p1;y.lineTo(E.x,E.y)}y.setAttr("lineWidth",this.fontSize()),y.setAttr("strokeStyle",this.colorKey),y.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(y){return s.Text.prototype.setText.call(this,y)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(y){var b=this.dummyCanvas,S=b.getContext("2d");S.save(),S.font=this._getContextFont();var C=S.measureText(y);return S.restore(),{width:C.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:y,height:b}=this._getTextSize(this.attrs.text);if(this.textWidth=y,this.textHeight=b,this.glyphInfo=[],!this.attrs.data)return null;const S=this.letterSpacing(),C=this.align(),E=this.kerningFunc(),w=Math.max(this.textWidth+((this.attrs.text||"").length-1)*S,0);let x=0;C==="center"&&(x=Math.max(0,this.pathLength/2-w/2)),C==="right"&&(x=Math.max(0,this.pathLength-w));const M=(0,s.stringToArray)(this.text());let P=x;for(var I=0;I<M.length;I++){const D=this._getPointAtLength(P);if(!D)return;let A=this._getTextSize(M[I]).width+S;if(M[I]===" "&&C==="justify"){const B=this.text().split(" ").length-1;A+=(this.pathLength-w)/B}const N=this._getPointAtLength(P+A);if(!N)return;const T=t.Path.getLineLength(D.x,D.y,N.x,N.y);let L=0;if(E)try{L=E(M[I-1],M[I])*this.fontSize()}catch{L=0}D.x+=L,N.x+=L,this.textWidth+=L;const V=t.Path.getPointOnLine(L+T/2,D.x,D.y,N.x,N.y),R=Math.atan2(N.y-D.y,N.x-D.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:M[I],rotation:R,p0:D,p1:N}),P+=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var y=[];this.glyphInfo.forEach(function(I){y.push(I.p0.x),y.push(I.p0.y),y.push(I.p1.x),y.push(I.p1.y)});for(var b=y[0]||0,S=y[0]||0,C=y[1]||0,E=y[1]||0,w,x,M=0;M<y.length/2;M++)w=y[M*2],x=y[M*2+1],b=Math.min(b,w),S=Math.max(S,w),C=Math.min(C,x),E=Math.max(E,x);var P=this.fontSize();return{x:b-P/2,y:C-P/2,width:S-b+P,height:E-C+P}}destroy(){return i.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Kd.TextPath=m,m.prototype._fillFunc=d,m.prototype._strokeFunc=p,m.prototype._fillFuncHit=d,m.prototype._strokeFuncHit=p,m.prototype.className="TextPath",m.prototype._attrsAffectingSize=["text","fontSize","data"],(0,l._registerNode)(m),e.Factory.addGetterSetter(m,"data"),e.Factory.addGetterSetter(m,"fontFamily","Arial"),e.Factory.addGetterSetter(m,"fontSize",12,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(m,"fontStyle",h),e.Factory.addGetterSetter(m,"align","left"),e.Factory.addGetterSetter(m,"letterSpacing",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(m,"textBaseline","middle"),e.Factory.addGetterSetter(m,"fontVariant",h),e.Factory.addGetterSetter(m,"text",c),e.Factory.addGetterSetter(m,"textDecoration",null),e.Factory.addGetterSetter(m,"kerningFunc",null),Kd}var qd={},Jk;function Dce(){if(Jk)return qd;Jk=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.Transformer=void 0;const i=di(),e=un(),n=vi(),t=Ui(),s=xN(),a=fC(),l=cn(),c=pn(),h=cn();var d="tr-konva",p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(N=>N+`.${d}`).join(" "),m="nodesRect",v=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],y={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const b="ontouchstart"in l.Konva._global;function S(N,T,L){if(N==="rotater")return L;T+=i.Util.degToRad(y[N]||0);var V=(i.Util.radToDeg(T)%360+360)%360;return i.Util._inRange(V,315+22.5,360)||i.Util._inRange(V,0,22.5)?"ns-resize":i.Util._inRange(V,45-22.5,45+22.5)?"nesw-resize":i.Util._inRange(V,90-22.5,90+22.5)?"ew-resize":i.Util._inRange(V,135-22.5,135+22.5)?"nwse-resize":i.Util._inRange(V,180-22.5,180+22.5)?"ns-resize":i.Util._inRange(V,225-22.5,225+22.5)?"nesw-resize":i.Util._inRange(V,270-22.5,270+22.5)?"ew-resize":i.Util._inRange(V,315-22.5,315+22.5)?"nwse-resize":(i.Util.error("Transformer has unknown angle for cursor detection: "+V),"pointer")}var C=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],E=1e8;function w(N){return{x:N.x+N.width/2*Math.cos(N.rotation)+N.height/2*Math.sin(-N.rotation),y:N.y+N.height/2*Math.cos(N.rotation)+N.width/2*Math.sin(N.rotation)}}function x(N,T,L){const V=L.x+(N.x-L.x)*Math.cos(T)-(N.y-L.y)*Math.sin(T),R=L.y+(N.x-L.x)*Math.sin(T)+(N.y-L.y)*Math.cos(T);return{...N,rotation:N.rotation+T,x:V,y:R}}function M(N,T){const L=w(N);return x(N,T,L)}function P(N,T,L){let V=T;for(let R=0;R<N.length;R++){const B=l.Konva.getAngle(N[R]),F=Math.abs(B-T)%(Math.PI*2);Math.min(F,Math.PI*2-F)<L&&(V=B)}return V}let I=0,D=class extends a.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(p,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return i.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return d+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const L=T.filter(R=>R.isAncestorOf(this)?(i.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=T=L,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(R=>{const B=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},F=R._attrsAffectingSize.map(U=>U+"Change."+this._getEventNamespace()).join(" ");R.on(F,B),R.on(v.map(U=>U+`.${this._getEventNamespace()}`).join(" "),B),R.on(`absoluteTransformChange.${this._getEventNamespace()}`,B),this._proxyDrag(R)}),this._resetTransformCache();var V=!!this.findOne(".top-left");return V&&this.update(),this}_proxyDrag(T){let L;T.on(`dragstart.${this._getEventNamespace()}`,V=>{L=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(V,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,V=>{if(!L)return;const R=T.getAbsolutePosition(),B=R.x-L.x,F=R.y-L.y;this.nodes().forEach(U=>{if(U===T||U.isDragging())return;const q=U.getAbsolutePosition();U.setAbsolutePosition({x:q.x+B,y:q.y+F}),U.startDrag(V)}),L=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(m),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(m,this.__getNodeRect)}__getNodeShape(T,L=this.rotation(),V){var R=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),B=T.getAbsoluteScale(V),F=T.getAbsolutePosition(V),U=R.x*B.x-T.offsetX()*B.x,q=R.y*B.y-T.offsetY()*B.y;const Y=(l.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),ne={x:F.x+U*Math.cos(Y)+q*Math.sin(-Y),y:F.y+q*Math.cos(Y)+U*Math.sin(Y),width:R.width*B.x,height:R.height*B.y,rotation:Y};return x(ne,-l.Konva.getAngle(L),{x:0,y:0})}__getNodeRect(){var T=this.getNode();if(!T)return{x:-E,y:-E,width:0,height:0,rotation:0};const L=[];this.nodes().map(Y=>{const ne=Y.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var de=[{x:ne.x,y:ne.y},{x:ne.x+ne.width,y:ne.y},{x:ne.x+ne.width,y:ne.y+ne.height},{x:ne.x,y:ne.y+ne.height}],ve=Y.getAbsoluteTransform();de.forEach(function(Re){var Ee=ve.point(Re);L.push(Ee)})});const V=new i.Transform;V.rotate(-l.Konva.getAngle(this.rotation()));var R=1/0,B=1/0,F=-1/0,U=-1/0;L.forEach(function(Y){var ne=V.point(Y);R===void 0&&(R=F=ne.x,B=U=ne.y),R=Math.min(R,ne.x),B=Math.min(B,ne.y),F=Math.max(F,ne.x),U=Math.max(U,ne.y)}),V.invert();const q=V.point({x:R,y:B});return{x:q.x,y:q.y,width:F-R,height:U-B,rotation:l.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),C.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){var L=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:b?10:"auto"}),V=this;L.on("mousedown touchstart",function(R){V._handleMouseDown(R)}),L.on("dragstart",R=>{L.stopDrag(),R.cancelBubble=!0}),L.on("dragend",R=>{R.cancelBubble=!0}),L.on("mouseenter",()=>{var R=l.Konva.getAngle(this.rotation()),B=this.rotateAnchorCursor(),F=S(T,R,B);L.getStage().content&&(L.getStage().content.style.cursor=F),this._cursorChange=!0}),L.on("mouseout",()=>{L.getStage().content&&(L.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(L)}_createBack(){var T=new t.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(L,V){var R=V.getParent(),B=R.padding();L.beginPath(),L.rect(-B,-B,V.width()+B*2,V.height()+B*2),L.moveTo(V.width()/2,-B),R.rotateEnabled()&&R.rotateLineVisible()&&L.lineTo(V.width()/2,-R.rotateAnchorOffset()*i.Util._sign(V.height())-B),L.fillStrokeShape(V)},hitFunc:(L,V)=>{if(this.shouldOverdrawWholeArea()){var R=this.padding();L.beginPath(),L.rect(-R,-R,V.width()+R*2,V.height()+R*2),L.fillStrokeShape(V)}}});this.add(T),this._proxyDrag(T),T.on("dragstart",L=>{L.cancelBubble=!0}),T.on("dragmove",L=>{L.cancelBubble=!0}),T.on("dragend",L=>{L.cancelBubble=!0}),this.on("dragmove",L=>{this.update()})}_handleMouseDown(T){if(!this._transforming){this._movingAnchorName=T.target.name().split(" ")[0];var L=this._getNodeRect(),V=L.width,R=L.height,B=Math.sqrt(Math.pow(V,2)+Math.pow(R,2));this.sin=Math.abs(R/B),this.cos=Math.abs(V/B),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var F=T.target.getAbsolutePosition(),U=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:U.x-F.x,y:U.y-F.y},I++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(q=>{q._fire("transformstart",{evt:T.evt,target:q})})}}_handleMouseMove(T){var L,V,R,B=this.findOne("."+this._movingAnchorName),F=B.getStage();F.setPointersPositions(T);const U=F.getPointerPosition();let q={x:U.x-this._anchorDragOffset.x,y:U.y-this._anchorDragOffset.y};const Y=B.getAbsolutePosition();this.anchorDragBoundFunc()&&(q=this.anchorDragBoundFunc()(Y,q,T)),B.setAbsolutePosition(q);const ne=B.getAbsolutePosition();if(!(Y.x===ne.x&&Y.y===ne.y)){if(this._movingAnchorName==="rotater"){var de=this._getNodeRect();L=B.x()-de.width/2,V=-B.y()+de.height/2;let ke=Math.atan2(-V,L)+Math.PI/2;de.height<0&&(ke-=Math.PI);var ve=l.Konva.getAngle(this.rotation());const J=ve+ke,W=l.Konva.getAngle(this.rotationSnapTolerance()),he=P(this.rotationSnaps(),J,W)-de.rotation,xe=M(de,he);this._fitNodesInto(xe,T);return}var Re=this.shiftBehavior(),Ee;Re==="inverted"?Ee=this.keepRatio()&&!T.shiftKey:Re==="none"?Ee=this.keepRatio():Ee=this.keepRatio()||T.shiftKey;var re=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(Ee){var ce=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};R=Math.sqrt(Math.pow(ce.x-B.x(),2)+Math.pow(ce.y-B.y(),2));var Ce=this.findOne(".top-left").x()>ce.x?-1:1,Me=this.findOne(".top-left").y()>ce.y?-1:1;L=R*this.cos*Ce,V=R*this.sin*Me,this.findOne(".top-left").x(ce.x-L),this.findOne(".top-left").y(ce.y-V)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(B.y());else if(this._movingAnchorName==="top-right"){if(Ee){var ce=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};R=Math.sqrt(Math.pow(B.x()-ce.x,2)+Math.pow(ce.y-B.y(),2));var Ce=this.findOne(".top-right").x()<ce.x?-1:1,Me=this.findOne(".top-right").y()>ce.y?-1:1;L=R*this.cos*Ce,V=R*this.sin*Me,this.findOne(".top-right").x(ce.x+L),this.findOne(".top-right").y(ce.y-V)}var ee=B.position();this.findOne(".top-left").y(ee.y),this.findOne(".bottom-right").x(ee.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(B.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(B.x());else if(this._movingAnchorName==="bottom-left"){if(Ee){var ce=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};R=Math.sqrt(Math.pow(ce.x-B.x(),2)+Math.pow(B.y()-ce.y,2));var Ce=ce.x<B.x()?-1:1,Me=B.y()<ce.y?-1:1;L=R*this.cos*Ce,V=R*this.sin*Me,B.x(ce.x-L),B.y(ce.y+V)}ee=B.position(),this.findOne(".top-left").x(ee.x),this.findOne(".bottom-right").y(ee.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(B.y());else if(this._movingAnchorName==="bottom-right"){if(Ee){var ce=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};R=Math.sqrt(Math.pow(B.x()-ce.x,2)+Math.pow(B.y()-ce.y,2));var Ce=this.findOne(".bottom-right").x()<ce.x?-1:1,Me=this.findOne(".bottom-right").y()<ce.y?-1:1;L=R*this.cos*Ce,V=R*this.sin*Me,this.findOne(".bottom-right").x(ce.x+L),this.findOne(".bottom-right").y(ce.y+V)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var re=this.centeredScaling()||T.altKey;if(re){var H=this.findOne(".top-left"),$=this.findOne(".bottom-right"),te=H.x(),le=H.y(),K=this.getWidth()-$.x(),X=this.getHeight()-$.y();$.move({x:-te,y:-le}),H.move({x:K,y:X})}var oe=this.findOne(".top-left").getAbsolutePosition();L=oe.x,V=oe.y;var fe=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),be=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:L,y:V,width:fe,height:be,rotation:l.Konva.getAngle(this.rotation())},T)}}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var L;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var V=this.getNode();I--,this._fire("transformend",{evt:T,target:V}),(L=this.getLayer())===null||L===void 0||L.batchDraw(),V&&this._nodes.forEach(R=>{var B;R._fire("transformend",{evt:T,target:R}),(B=R.getLayer())===null||B===void 0||B.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,L){var V=this._getNodeRect();const R=1;if(i.Util._inRange(T.width,-this.padding()*2-R,R)){this.update();return}if(i.Util._inRange(T.height,-this.padding()*2-R,R)){this.update();return}var B=new i.Transform;if(B.rotate(l.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const ve=B.point({x:-this.padding()*2,y:0});T.x+=ve.x,T.y+=ve.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=ve.x,this._anchorDragOffset.y-=ve.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const ve=B.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=ve.x,this._anchorDragOffset.y-=ve.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const ve=B.point({x:0,y:-this.padding()*2});T.x+=ve.x,T.y+=ve.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=ve.x,this._anchorDragOffset.y-=ve.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const ve=B.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=ve.x,this._anchorDragOffset.y-=ve.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const ve=this.boundBoxFunc()(V,T);ve?T=ve:i.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const F=1e7,U=new i.Transform;U.translate(V.x,V.y),U.rotate(V.rotation),U.scale(V.width/F,V.height/F);const q=new i.Transform,Y=T.width/F,ne=T.height/F;this.flipEnabled()===!1?(q.translate(T.x,T.y),q.rotate(T.rotation),q.translate(T.width<0?T.width:0,T.height<0?T.height:0),q.scale(Math.abs(Y),Math.abs(ne))):(q.translate(T.x,T.y),q.rotate(T.rotation),q.scale(Y,ne));const de=q.multiply(U.invert());this._nodes.forEach(ve=>{var Re;const Ee=ve.getParent().getAbsoluteTransform(),ce=ve.getTransform().copy();ce.translate(ve.offsetX(),ve.offsetY());const Ce=new i.Transform;Ce.multiply(Ee.copy().invert()).multiply(de).multiply(Ee).multiply(ce);const Me=Ce.decompose();ve.setAttrs(Me),(Re=ve.getLayer())===null||Re===void 0||Re.batchDraw()}),this.rotation(i.Util._getRotation(T.rotation)),this._nodes.forEach(ve=>{this._fire("transform",{evt:L,target:ve}),ve._fire("transform",{evt:L,target:ve})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,L){this.findOne(T).setAttrs(L)}update(){var T,L=this._getNodeRect();this.rotation(i.Util._getRotation(L.rotation));var V=L.width,R=L.height,B=this.enabledAnchors(),F=this.resizeEnabled(),U=this.padding(),q=this.anchorSize();const Y=this.find("._anchor");Y.forEach(de=>{de.setAttrs({width:q,height:q,offsetX:q/2,offsetY:q/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:q/2+U,offsetY:q/2+U,visible:F&&B.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:V/2,y:0,offsetY:q/2+U,visible:F&&B.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:V,y:0,offsetX:q/2-U,offsetY:q/2+U,visible:F&&B.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:R/2,offsetX:q/2+U,visible:F&&B.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:V,y:R/2,offsetX:q/2-U,visible:F&&B.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:R,offsetX:q/2+U,offsetY:q/2-U,visible:F&&B.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:V/2,y:R,offsetY:q/2-U,visible:F&&B.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:V,y:R,offsetX:q/2-U,offsetY:q/2-U,visible:F&&B.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:V/2,y:-this.rotateAnchorOffset()*i.Util._sign(R)-U,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:V,height:R,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const ne=this.anchorStyleFunc();ne&&Y.forEach(de=>{ne(de)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(T){var L=n.Node.prototype.clone.call(this,T);return L}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};qd.Transformer=D,D.isTransforming=()=>I>0;function A(N){return N instanceof Array||i.Util.warn("enabledAnchors value should be an array"),N instanceof Array&&N.forEach(function(T){C.indexOf(T)===-1&&i.Util.warn("Unknown anchor name: "+T+". Available names are: "+C.join(", "))}),N||[]}return D.prototype.className="Transformer",(0,h._registerNode)(D),e.Factory.addGetterSetter(D,"enabledAnchors",C,A),e.Factory.addGetterSetter(D,"flipEnabled",!0,(0,c.getBooleanValidator)()),e.Factory.addGetterSetter(D,"resizeEnabled",!0),e.Factory.addGetterSetter(D,"anchorSize",10,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(D,"rotateEnabled",!0),e.Factory.addGetterSetter(D,"rotateLineVisible",!0),e.Factory.addGetterSetter(D,"rotationSnaps",[]),e.Factory.addGetterSetter(D,"rotateAnchorOffset",50,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(D,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(D,"rotationSnapTolerance",5,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(D,"borderEnabled",!0),e.Factory.addGetterSetter(D,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(D,"anchorStrokeWidth",1,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(D,"anchorFill","white"),e.Factory.addGetterSetter(D,"anchorCornerRadius",0,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(D,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(D,"borderStrokeWidth",1,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(D,"borderDash"),e.Factory.addGetterSetter(D,"keepRatio",!0),e.Factory.addGetterSetter(D,"shiftBehavior","default"),e.Factory.addGetterSetter(D,"centeredScaling",!1),e.Factory.addGetterSetter(D,"ignoreStroke",!1),e.Factory.addGetterSetter(D,"padding",0,(0,c.getNumberValidator)()),e.Factory.addGetterSetter(D,"node"),e.Factory.addGetterSetter(D,"nodes"),e.Factory.addGetterSetter(D,"boundBoxFunc"),e.Factory.addGetterSetter(D,"anchorDragBoundFunc"),e.Factory.addGetterSetter(D,"anchorStyleFunc"),e.Factory.addGetterSetter(D,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(D,"useSingleNodeRotation",!0),e.Factory.backCompat(D,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),qd}var Xd={},Zk;function Lce(){if(Zk)return Xd;Zk=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.Wedge=void 0;const i=un(),e=Ui(),n=cn(),t=pn(),s=cn();let a=class extends e.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),c.lineTo(0,0),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(c){this.radius(c/2)}setHeight(c){this.radius(c/2)}};return Xd.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),i.Factory.addGetterSetter(a,"radius",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(a,"angle",0,(0,t.getNumberValidator)()),i.Factory.addGetterSetter(a,"clockwise",!1),i.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Xd}var Yd={},Qk;function Bce(){if(Qk)return Yd;Qk=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.Blur=void 0;const i=un(),e=vi(),n=pn();function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function l(h,d){var p=h.data,m=h.width,v=h.height,y,b,S,C,E,w,x,M,P,I,D,A,N,T,L,V,R,B,F,U,q,Y,ne,de,ve=d+d+1,Re=m-1,Ee=v-1,ce=d+1,Ce=ce*(ce+1)/2,Me=new t,ee=null,re=Me,H=null,$=null,te=s[d],le=a[d];for(S=1;S<ve;S++)re=re.next=new t,S===ce&&(ee=re);for(re.next=Me,x=w=0,b=0;b<v;b++){for(V=R=B=F=M=P=I=D=0,A=ce*(U=p[w]),N=ce*(q=p[w+1]),T=ce*(Y=p[w+2]),L=ce*(ne=p[w+3]),M+=Ce*U,P+=Ce*q,I+=Ce*Y,D+=Ce*ne,re=Me,S=0;S<ce;S++)re.r=U,re.g=q,re.b=Y,re.a=ne,re=re.next;for(S=1;S<ce;S++)C=w+((Re<S?Re:S)<<2),M+=(re.r=U=p[C])*(de=ce-S),P+=(re.g=q=p[C+1])*de,I+=(re.b=Y=p[C+2])*de,D+=(re.a=ne=p[C+3])*de,V+=U,R+=q,B+=Y,F+=ne,re=re.next;for(H=Me,$=ee,y=0;y<m;y++)p[w+3]=ne=D*te>>le,ne!==0?(ne=255/ne,p[w]=(M*te>>le)*ne,p[w+1]=(P*te>>le)*ne,p[w+2]=(I*te>>le)*ne):p[w]=p[w+1]=p[w+2]=0,M-=A,P-=N,I-=T,D-=L,A-=H.r,N-=H.g,T-=H.b,L-=H.a,C=x+((C=y+d+1)<Re?C:Re)<<2,V+=H.r=p[C],R+=H.g=p[C+1],B+=H.b=p[C+2],F+=H.a=p[C+3],M+=V,P+=R,I+=B,D+=F,H=H.next,A+=U=$.r,N+=q=$.g,T+=Y=$.b,L+=ne=$.a,V-=U,R-=q,B-=Y,F-=ne,$=$.next,w+=4;x+=m}for(y=0;y<m;y++){for(R=B=F=V=P=I=D=M=0,w=y<<2,A=ce*(U=p[w]),N=ce*(q=p[w+1]),T=ce*(Y=p[w+2]),L=ce*(ne=p[w+3]),M+=Ce*U,P+=Ce*q,I+=Ce*Y,D+=Ce*ne,re=Me,S=0;S<ce;S++)re.r=U,re.g=q,re.b=Y,re.a=ne,re=re.next;for(E=m,S=1;S<=d;S++)w=E+y<<2,M+=(re.r=U=p[w])*(de=ce-S),P+=(re.g=q=p[w+1])*de,I+=(re.b=Y=p[w+2])*de,D+=(re.a=ne=p[w+3])*de,V+=U,R+=q,B+=Y,F+=ne,re=re.next,S<Ee&&(E+=m);for(w=y,H=Me,$=ee,b=0;b<v;b++)C=w<<2,p[C+3]=ne=D*te>>le,ne>0?(ne=255/ne,p[C]=(M*te>>le)*ne,p[C+1]=(P*te>>le)*ne,p[C+2]=(I*te>>le)*ne):p[C]=p[C+1]=p[C+2]=0,M-=A,P-=N,I-=T,D-=L,A-=H.r,N-=H.g,T-=H.b,L-=H.a,C=y+((C=b+ce)<Ee?C:Ee)*m<<2,M+=V+=H.r=p[C],P+=R+=H.g=p[C+1],I+=B+=H.b=p[C+2],D+=F+=H.a=p[C+3],H=H.next,A+=U=$.r,N+=q=$.g,T+=Y=$.b,L+=ne=$.a,V-=U,R-=q,B-=Y,F-=ne,$=$.next,w+=m}}const c=function(d){var p=Math.round(this.blurRadius());p>0&&l(d,p)};return Yd.Blur=c,i.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Yd}var Jd={},eA;function Oce(){if(eA)return Jd;eA=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.Brighten=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=this.brightness()*255,l=s.data,c=l.length,h;for(h=0;h<c;h+=4)l[h]+=a,l[h+1]+=a,l[h+2]+=a};return Jd.Brighten=t,i.Factory.addGetterSetter(e.Node,"brightness",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Jd}var Zd={},tA;function Vce(){if(tA)return Zd;tA=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.Contrast=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=Math.pow((this.contrast()+100)/100,2),l=s.data,c=l.length,h=150,d=150,p=150,m;for(m=0;m<c;m+=4)h=l[m],d=l[m+1],p=l[m+2],h/=255,h-=.5,h*=a,h+=.5,h*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,p/=255,p-=.5,p*=a,p+=.5,p*=255,h=h<0?0:h>255?255:h,d=d<0?0:d>255?255:d,p=p<0?0:p>255?255:p,l[m]=h,l[m+1]=d,l[m+2]=p};return Zd.Contrast=t,i.Factory.addGetterSetter(e.Node,"contrast",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),Zd}var Qd={},nA;function Fce(){if(nA)return Qd;nA=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.Emboss=void 0;const i=un(),e=vi(),n=di(),t=pn(),s=function(a){var l=this.embossStrength()*10,c=this.embossWhiteLevel()*255,h=this.embossDirection(),d=this.embossBlend(),p=0,m=0,v=a.data,y=a.width,b=a.height,S=y*4,C=b;switch(h){case"top-left":p=-1,m=-1;break;case"top":p=-1,m=0;break;case"top-right":p=-1,m=1;break;case"right":p=0,m=1;break;case"bottom-right":p=1,m=1;break;case"bottom":p=1,m=0;break;case"bottom-left":p=1,m=-1;break;case"left":p=0,m=-1;break;default:n.Util.error("Unknown emboss direction: "+h)}do{var E=(C-1)*S,w=p;C+w<1&&(w=0),C+w>b&&(w=0);var x=(C-1+w)*y*4,M=y;do{var P=E+(M-1)*4,I=m;M+I<1&&(I=0),M+I>y&&(I=0);var D=x+(M-1+I)*4,A=v[P]-v[D],N=v[P+1]-v[D+1],T=v[P+2]-v[D+2],L=A,V=L>0?L:-L,R=N>0?N:-N,B=T>0?T:-T;if(R>V&&(L=N),B>V&&(L=T),L*=l,d){var F=v[P]+L,U=v[P+1]+L,q=v[P+2]+L;v[P]=F>255?255:F<0?0:F,v[P+1]=U>255?255:U<0?0:U,v[P+2]=q>255?255:q<0?0:q}else{var Y=c-L;Y<0?Y=0:Y>255&&(Y=255),v[P]=v[P+1]=v[P+2]=Y}}while(--M)}while(--C)};return Qd.Emboss=s,i.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"embossDirection","top-left",null,i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"embossBlend",!1,null,i.Factory.afterSetFilter),Qd}var ef={},iA;function Uce(){if(iA)return ef;iA=1,Object.defineProperty(ef,"__esModule",{value:!0}),ef.Enhance=void 0;const i=un(),e=vi(),n=pn();function t(a,l,c,h,d){var p=c-l,m=d-h,v;return p===0?h+m/2:m===0?h:(v=(a-l)/p,v=m*v+h,v)}const s=function(a){var l=a.data,c=l.length,h=l[0],d=h,p,m=l[1],v=m,y,b=l[2],S=b,C,E,w=this.enhance();if(w!==0){for(E=0;E<c;E+=4)p=l[E+0],p<h?h=p:p>d&&(d=p),y=l[E+1],y<m?m=y:y>v&&(v=y),C=l[E+2],C<b?b=C:C>S&&(S=C);d===h&&(d=255,h=0),v===m&&(v=255,m=0),S===b&&(S=255,b=0);var x,M,P,I,D,A,N,T,L;for(w>0?(M=d+w*(255-d),P=h-w*(h-0),D=v+w*(255-v),A=m-w*(m-0),T=S+w*(255-S),L=b-w*(b-0)):(x=(d+h)*.5,M=d+w*(d-x),P=h+w*(h-x),I=(v+m)*.5,D=v+w*(v-I),A=m+w*(m-I),N=(S+b)*.5,T=S+w*(S-N),L=b+w*(b-N)),E=0;E<c;E+=4)l[E+0]=t(l[E+0],h,d,P,M),l[E+1]=t(l[E+1],m,v,A,D),l[E+2]=t(l[E+2],b,S,L,T)}};return ef.Enhance=s,i.Factory.addGetterSetter(e.Node,"enhance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),ef}var tf={},rA;function zce(){if(rA)return tf;rA=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.Grayscale=void 0;const i=function(e){var n=e.data,t=n.length,s,a;for(s=0;s<t;s+=4)a=.34*n[s]+.5*n[s+1]+.16*n[s+2],n[s]=a,n[s+1]=a,n[s+2]=a};return tf.Grayscale=i,tf}var nf={},sA;function $ce(){if(sA)return nf;sA=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.HSL=void 0;const i=un(),e=vi(),n=pn();i.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"luminance",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter);const t=function(s){var a=s.data,l=a.length,c=1,h=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,p=this.luminance()*127,m,v=c*h*Math.cos(d*Math.PI/180),y=c*h*Math.sin(d*Math.PI/180),b=.299*c+.701*v+.167*y,S=.587*c-.587*v+.33*y,C=.114*c-.114*v-.497*y,E=.299*c-.299*v-.328*y,w=.587*c+.413*v+.035*y,x=.114*c-.114*v+.293*y,M=.299*c-.3*v+1.25*y,P=.587*c-.586*v-1.05*y,I=.114*c+.886*v-.2*y,D,A,N,T;for(m=0;m<l;m+=4)D=a[m+0],A=a[m+1],N=a[m+2],T=a[m+3],a[m+0]=b*D+S*A+C*N+p,a[m+1]=E*D+w*A+x*N+p,a[m+2]=M*D+P*A+I*N+p,a[m+3]=T};return nf.HSL=t,nf}var rf={},aA;function Hce(){if(aA)return rf;aA=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.HSV=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=s.data,l=a.length,c=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,p,m=c*h*Math.cos(d*Math.PI/180),v=c*h*Math.sin(d*Math.PI/180),y=.299*c+.701*m+.167*v,b=.587*c-.587*m+.33*v,S=.114*c-.114*m-.497*v,C=.299*c-.299*m-.328*v,E=.587*c+.413*m+.035*v,w=.114*c-.114*m+.293*v,x=.299*c-.3*m+1.25*v,M=.587*c-.586*m-1.05*v,P=.114*c+.886*m-.2*v,I,D,A,N;for(p=0;p<l;p+=4)I=a[p+0],D=a[p+1],A=a[p+2],N=a[p+3],a[p+0]=y*I+b*D+S*A,a[p+1]=C*I+E*D+w*A,a[p+2]=x*I+M*D+P*A,a[p+3]=N};return rf.HSV=t,i.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"value",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),rf}var sf={},oA;function Gce(){if(oA)return sf;oA=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.Invert=void 0;const i=function(e){var n=e.data,t=n.length,s;for(s=0;s<t;s+=4)n[s]=255-n[s],n[s+1]=255-n[s+1],n[s+2]=255-n[s+2]};return sf.Invert=i,sf}var af={},lA;function Wce(){if(lA)return af;lA=1,Object.defineProperty(af,"__esModule",{value:!0}),af.Kaleidoscope=void 0;const i=un(),e=vi(),n=di(),t=pn();var s=function(c,h,d){var p=c.data,m=h.data,v=c.width,y=c.height,b=d.polarCenterX||v/2,S=d.polarCenterY||y/2,C,E,w,x=0,M=0,P=0,I=0,D,A=Math.sqrt(b*b+S*S);E=v-b,w=y-S,D=Math.sqrt(E*E+w*w),A=D>A?D:A;var N=y,T=v,L,V,R=360/T*Math.PI/180,B,F;for(V=0;V<T;V+=1)for(B=Math.sin(V*R),F=Math.cos(V*R),L=0;L<N;L+=1)E=Math.floor(b+A*L/N*F),w=Math.floor(S+A*L/N*B),C=(w*v+E)*4,x=p[C+0],M=p[C+1],P=p[C+2],I=p[C+3],C=(V+L*v)*4,m[C+0]=x,m[C+1]=M,m[C+2]=P,m[C+3]=I},a=function(c,h,d){var p=c.data,m=h.data,v=c.width,y=c.height,b=d.polarCenterX||v/2,S=d.polarCenterY||y/2,C,E,w,x,M,P=0,I=0,D=0,A=0,N,T=Math.sqrt(b*b+S*S);E=v-b,w=y-S,N=Math.sqrt(E*E+w*w),T=N>T?N:T;var L=y,V=v,R,B,F=0,U,q;for(E=0;E<v;E+=1)for(w=0;w<y;w+=1)x=E-b,M=w-S,R=Math.sqrt(x*x+M*M)*L/T,B=(Math.atan2(M,x)*180/Math.PI+360+F)%360,B=B*V/360,U=Math.floor(B),q=Math.floor(R),C=(q*v+U)*4,P=p[C+0],I=p[C+1],D=p[C+2],A=p[C+3],C=(w*v+E)*4,m[C+0]=P,m[C+1]=I,m[C+2]=D,m[C+3]=A};const l=function(c){var h=c.width,d=c.height,p,m,v,y,b,S,C,E,w,x,M=Math.round(this.kaleidoscopePower()),P=Math.round(this.kaleidoscopeAngle()),I=Math.floor(h*(P%360)/360);if(!(M<1)){var D=n.Util.createCanvasElement();D.width=h,D.height=d;var A=D.getContext("2d").getImageData(0,0,h,d);n.Util.releaseCanvas(D),s(c,A,{polarCenterX:h/2,polarCenterY:d/2});for(var N=h/Math.pow(2,M);N<=8;)N=N*2,M-=1;N=Math.ceil(N);var T=N,L=0,V=T,R=1;for(I+N>h&&(L=T,V=0,R=-1),m=0;m<d;m+=1)for(p=L;p!==V;p+=R)v=Math.round(p+I)%h,w=(h*m+v)*4,b=A.data[w+0],S=A.data[w+1],C=A.data[w+2],E=A.data[w+3],x=(h*m+p)*4,A.data[x+0]=b,A.data[x+1]=S,A.data[x+2]=C,A.data[x+3]=E;for(m=0;m<d;m+=1)for(T=Math.floor(N),y=0;y<M;y+=1){for(p=0;p<T+1;p+=1)w=(h*m+p)*4,b=A.data[w+0],S=A.data[w+1],C=A.data[w+2],E=A.data[w+3],x=(h*m+T*2-p-1)*4,A.data[x+0]=b,A.data[x+1]=S,A.data[x+2]=C,A.data[x+3]=E;T*=2}a(A,c,{polarRotation:0})}};return af.Kaleidoscope=l,i.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),af}var of={},cA;function jce(){if(cA)return of;cA=1,Object.defineProperty(of,"__esModule",{value:!0}),of.Mask=void 0;const i=un(),e=vi(),n=pn();function t(v,y,b){var S=(b*v.width+y)*4,C=[];return C.push(v.data[S++],v.data[S++],v.data[S++],v.data[S++]),C}function s(v,y){return Math.sqrt(Math.pow(v[0]-y[0],2)+Math.pow(v[1]-y[1],2)+Math.pow(v[2]-y[2],2))}function a(v){for(var y=[0,0,0],b=0;b<v.length;b++)y[0]+=v[b][0],y[1]+=v[b][1],y[2]+=v[b][2];return y[0]/=v.length,y[1]/=v.length,y[2]/=v.length,y}function l(v,y){var b=t(v,0,0),S=t(v,v.width-1,0),C=t(v,0,v.height-1),E=t(v,v.width-1,v.height-1),w=y||10;if(s(b,S)<w&&s(S,E)<w&&s(E,C)<w&&s(C,b)<w){for(var x=a([S,b,E,C]),M=[],P=0;P<v.width*v.height;P++){var I=s(x,[v.data[P*4],v.data[P*4+1],v.data[P*4+2]]);M[P]=I<w?0:255}return M}}function c(v,y){for(var b=0;b<v.width*v.height;b++)v.data[4*b+3]=y[b]}function h(v,y,b){for(var S=[1,1,1,1,0,1,1,1,1],C=Math.round(Math.sqrt(S.length)),E=Math.floor(C/2),w=[],x=0;x<b;x++)for(var M=0;M<y;M++){for(var P=x*y+M,I=0,D=0;D<C;D++)for(var A=0;A<C;A++){var N=x+D-E,T=M+A-E;if(N>=0&&N<b&&T>=0&&T<y){var L=N*y+T,V=S[D*C+A];I+=v[L]*V}}w[P]=I===255*8?255:0}return w}function d(v,y,b){for(var S=[1,1,1,1,1,1,1,1,1],C=Math.round(Math.sqrt(S.length)),E=Math.floor(C/2),w=[],x=0;x<b;x++)for(var M=0;M<y;M++){for(var P=x*y+M,I=0,D=0;D<C;D++)for(var A=0;A<C;A++){var N=x+D-E,T=M+A-E;if(N>=0&&N<b&&T>=0&&T<y){var L=N*y+T,V=S[D*C+A];I+=v[L]*V}}w[P]=I>=255*4?255:0}return w}function p(v,y,b){for(var S=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],C=Math.round(Math.sqrt(S.length)),E=Math.floor(C/2),w=[],x=0;x<b;x++)for(var M=0;M<y;M++){for(var P=x*y+M,I=0,D=0;D<C;D++)for(var A=0;A<C;A++){var N=x+D-E,T=M+A-E;if(N>=0&&N<b&&T>=0&&T<y){var L=N*y+T,V=S[D*C+A];I+=v[L]*V}}w[P]=I}return w}const m=function(v){var y=this.threshold(),b=l(v,y);return b&&(b=h(b,v.width,v.height),b=d(b,v.width,v.height),b=p(b,v.width,v.height),c(v,b)),v};return of.Mask=m,i.Factory.addGetterSetter(e.Node,"threshold",0,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),of}var lf={},uA;function Kce(){if(uA)return lf;uA=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.Noise=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=this.noise()*255,l=s.data,c=l.length,h=a/2,d;for(d=0;d<c;d+=4)l[d+0]+=h-2*h*Math.random(),l[d+1]+=h-2*h*Math.random(),l[d+2]+=h-2*h*Math.random()};return lf.Noise=t,i.Factory.addGetterSetter(e.Node,"noise",.2,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),lf}var cf={},hA;function qce(){if(hA)return cf;hA=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.Pixelate=void 0;const i=un(),e=di(),n=vi(),t=pn(),s=function(a){var l=Math.ceil(this.pixelSize()),c=a.width,h=a.height,d,p,m,v,y,b,S,C=Math.ceil(c/l),E=Math.ceil(h/l),w,x,M,P,I,D,A,N=a.data;if(l<=0){e.Util.error("pixelSize value can not be <= 0");return}for(I=0;I<C;I+=1)for(D=0;D<E;D+=1){for(v=0,y=0,b=0,S=0,w=I*l,x=w+l,M=D*l,P=M+l,A=0,d=w;d<x;d+=1)if(!(d>=c))for(p=M;p<P;p+=1)p>=h||(m=(c*p+d)*4,v+=N[m+0],y+=N[m+1],b+=N[m+2],S+=N[m+3],A+=1);for(v=v/A,y=y/A,b=b/A,S=S/A,d=w;d<x;d+=1)if(!(d>=c))for(p=M;p<P;p+=1)p>=h||(m=(c*p+d)*4,N[m+0]=v,N[m+1]=y,N[m+2]=b,N[m+3]=S)}};return cf.Pixelate=s,i.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,t.getNumberValidator)(),i.Factory.afterSetFilter),cf}var uf={},dA;function Xce(){if(dA)return uf;dA=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.Posterize=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=Math.round(this.levels()*254)+1,l=s.data,c=l.length,h=255/a,d;for(d=0;d<c;d+=1)l[d]=Math.floor(l[d]/h)*h};return uf.Posterize=t,i.Factory.addGetterSetter(e.Node,"levels",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),uf}var hf={},fA;function Yce(){if(fA)return hf;fA=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.RGB=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=s.data,l=a.length,c=this.red(),h=this.green(),d=this.blue(),p,m;for(p=0;p<l;p+=4)m=(.34*a[p]+.5*a[p+1]+.16*a[p+2])/255,a[p]=m*c,a[p+1]=m*h,a[p+2]=m*d,a[p+3]=a[p+3]};return hf.RGB=t,i.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),i.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),i.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter),hf}var df={},pA;function Jce(){if(pA)return df;pA=1,Object.defineProperty(df,"__esModule",{value:!0}),df.RGBA=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=s.data,l=a.length,c=this.red(),h=this.green(),d=this.blue(),p=this.alpha(),m,v;for(m=0;m<l;m+=4)v=1-p,a[m]=c*p+a[m]*v,a[m+1]=h*p+a[m+1]*v,a[m+2]=d*p+a[m+2]*v};return df.RGBA=t,i.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),i.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),i.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,i.Factory.afterSetFilter),i.Factory.addGetterSetter(e.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),df}var ff={},mA;function Zce(){if(mA)return ff;mA=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.Sepia=void 0;const i=function(e){var n=e.data,t=n.length,s,a,l,c;for(s=0;s<t;s+=4)a=n[s+0],l=n[s+1],c=n[s+2],n[s+0]=Math.min(255,a*.393+l*.769+c*.189),n[s+1]=Math.min(255,a*.349+l*.686+c*.168),n[s+2]=Math.min(255,a*.272+l*.534+c*.131)};return ff.Sepia=i,ff}var pf={},gA;function Qce(){if(gA)return pf;gA=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.Solarize=void 0;const i=function(e){var n=e.data,t=e.width,s=e.height,a=t*4,l=s;do{var c=(l-1)*a,h=t;do{var d=c+(h-1)*4,p=n[d],m=n[d+1],v=n[d+2];p>127&&(p=255-p),m>127&&(m=255-m),v>127&&(v=255-v),n[d]=p,n[d+1]=m,n[d+2]=v}while(--h)}while(--l)};return pf.Solarize=i,pf}var mf={},vA;function eue(){if(vA)return mf;vA=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.Threshold=void 0;const i=un(),e=vi(),n=pn(),t=function(s){var a=this.threshold()*255,l=s.data,c=l.length,h;for(h=0;h<c;h+=1)l[h]=l[h]<a?0:255};return mf.Threshold=t,i.Factory.addGetterSetter(e.Node,"threshold",.5,(0,n.getNumberValidator)(),i.Factory.afterSetFilter),mf}var yA;function tue(){if(yA)return kd;yA=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.Konva=void 0;const i=xce(),e=wce(),n=Sce(),t=Ece(),s=Mce(),a=Tce(),l=kce(),c=bN(),h=mC(),d=xN(),p=Ace(),m=Pce(),v=Ice(),y=Nce(),b=wN(),S=Rce(),C=Dce(),E=Lce(),w=Bce(),x=Oce(),M=Vce(),P=Fce(),I=Uce(),D=zce(),A=$ce(),N=Hce(),T=Gce(),L=Wce(),V=jce(),R=Kce(),B=qce(),F=Xce(),U=Yce(),q=Jce(),Y=Zce(),ne=Qce(),de=eue();return kd.Konva=i.Konva.Util._assign(i.Konva,{Arc:e.Arc,Arrow:n.Arrow,Circle:t.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:l.Label,Tag:l.Tag,Line:c.Line,Path:h.Path,Rect:d.Rect,RegularPolygon:p.RegularPolygon,Ring:m.Ring,Sprite:v.Sprite,Star:y.Star,Text:b.Text,TextPath:S.TextPath,Transformer:C.Transformer,Wedge:E.Wedge,Filters:{Blur:w.Blur,Brighten:x.Brighten,Contrast:M.Contrast,Emboss:P.Emboss,Enhance:I.Enhance,Grayscale:D.Grayscale,HSL:A.HSL,HSV:N.HSV,Invert:T.Invert,Kaleidoscope:L.Kaleidoscope,Mask:V.Mask,Noise:R.Noise,Pixelate:B.Pixelate,Posterize:F.Posterize,RGB:U.RGB,RGBA:q.RGBA,Sepia:Y.Sepia,Solarize:ne.Solarize,Threshold:de.Threshold}}),kd}var nue=p0.exports,bA;function CN(){if(bA)return p0.exports;bA=1,Object.defineProperty(nue,"__esModule",{value:!0});const i=tue();return p0.exports=i.Konva,p0.exports}var Jo=CN();const iue=sC(Jo),rue=JH({__proto__:null,default:iue},[Jo]);var SN={exports:{}};const EN=ale(mK);/*!
 * vue-konva v3.0.1 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(i,e){(function(t,s){i.exports=s(EN,CN())})(ju,function(n,t){return function(s){var a={};function l(c){if(a[c])return a[c].exports;var h=a[c]={i:c,l:!1,exports:{}};return s[c].call(h.exports,h,h.exports,l),h.l=!0,h.exports}return l.m=s,l.c=a,l.d=function(c,h,d){l.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:d})},l.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},l.t=function(c,h){if(h&1&&(c=l(c)),h&8||h&4&&typeof c=="object"&&c&&c.__esModule)return c;var d=Object.create(null);if(l.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),h&2&&typeof c!="string")for(var p in c)l.d(d,p,(function(m){return c[m]}).bind(null,p));return d},l.n=function(c){var h=c&&c.__esModule?function(){return c.default}:function(){return c};return l.d(h,"a",h),h},l.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},l.p="",l(l.s=2)}([function(s,a){s.exports=n},function(s,a){s.exports=t},function(s,a,l){s.exports=l(3)},function(s,a,l){l.r(a);var c=l(0),h=l(1),d=l.n(h);function p(R){if(!d.a.autoDrawEnabled){var B=R.getLayer()||R.getStage();B&&B.batchDraw()}}var m={key:!0,style:!0,elm:!0,isRootInsert:!0},v=".vue-konva-event";function y(R,B,F,U){B===void 0&&(B={}),F===void 0&&(F={});var q=R.__konvaNode,Y={},ne=!1;for(var de in F)if(!m[de]){var ve=de.slice(0,2)==="on",Re=F[de]!==B[de];if(ve&&Re){var Ee=de.substr(2).toLowerCase();Ee.substr(0,7)==="content"&&(Ee="content"+Ee.substr(7,1).toUpperCase()+Ee.substr(8)),q.off(Ee+v,F[de])}var ce=!B.hasOwnProperty(de);ce&&q.setAttr(de,void 0)}for(var Ce in B)if(!m[Ce]){var Me=Ce.slice(0,2)==="on",ee=F[Ce]!==B[Ce];if(Me&&ee){var re=Ce.substr(2).toLowerCase();re.substr(0,7)==="content"&&(re="content"+re.substr(7,1).toUpperCase()+re.substr(8)),B[Ce]&&(q.off(re+v),q.on(re+v,B[Ce]))}!Me&&(B[Ce]!==F[Ce]||U&&B[Ce]!==q.getAttr(Ce))&&(ne=!0,Y[Ce]=B[Ce])}ne&&(q.setAttrs(Y),p(q))}var b="v";function S(R){function B(F){return F.__konvaNode?F:F.parent?B(F.parent):(console.error("vue-konva error: Can not find parent node"),{})}return B(R.parent)}function C(R){if(R!=null&&R.component)return R.component.__konvaNode||C(R.component.subTree)}function E(R){var B=R.el,F=R.component,U=C(R);if(B!=null&&B.tagName&&F&&!U){var q=B&&B.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+q+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return U}function w(R){var B=[];return R.children&&R.children.forEach(function(F){!F.component&&Array.isArray(F.children)&&F.children.forEach(function(U){!U.component&&Array.isArray(U.children)?B.push.apply(B,U.children):B.push(U)}),F.component&&B.push(F)}),B}function x(R,B){var F=w(R),U=[];F.forEach(function(Y){var ne=E(Y);ne&&U.push(ne)});var q=!1;U.forEach(function(Y,ne){Y.getZIndex()!==ne&&(Y.setZIndex(ne),q=!0)}),q&&p(B)}function M(){return M=Object.assign||function(R){for(var B=1;B<arguments.length;B++){var F=arguments[B];for(var U in F)Object.prototype.hasOwnProperty.call(F,U)&&(R[U]=F[U])}return R},M.apply(this,arguments)}var P={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup:function(B,F){var U=F.attrs,q=F.slots,Y=F.expose;F.emits;var ne=Object(c.getCurrentInstance)(),de=Object(c.reactive)({}),ve=Object(c.ref)(null),Re=new window.Konva.Stage({width:B.config.width,height:B.config.height,container:document.createElement("div")});ne.__konvaNode=Re,Ce();function Ee(){return ne.__konvaNode}function ce(){return ne.__konvaNode}function Ce(){var Me=de||{},ee=M({},U,B.config);y(ne,ee,Me,B.__useStrictMode),Object.assign(de,ee)}return Object(c.onMounted)(function(){ve.value.innerHTML="",Re.container(ve.value),Ce()}),Object(c.onUpdated)(function(){Ce(),x(ne.subTree,Re)}),Object(c.onBeforeUnmount)(function(){Re.destroy()}),Object(c.watch)(function(){return B.config},Ce,{deep:!0}),Y({getStage:ce,getNode:Ee}),function(){var Me;return Object(c.h)("div",{ref:ve},(Me=q.default)===null||Me===void 0?void 0:Me.call(q))}}};function I(){return I=Object.assign||function(R){for(var B=1;B<arguments.length;B++){var F=arguments[B];for(var U in F)Object.prototype.hasOwnProperty.call(F,U)&&(R[U]=F[U])}return R},I.apply(this,arguments)}var D=".vue-konva-event",A={Group:!0,Layer:!0,FastLayer:!0,Label:!0},N=function(R){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(F,U){var q=U.attrs,Y=U.slots,ne=U.expose,de=Object(c.getCurrentInstance)(),ve=Object(c.reactive)({}),Re=window.Konva[R];if(!Re){console.error("vue-konva error: Can not find node "+R);return}var Ee=new Re;de.__konvaNode=Ee,de.vnode.__konvaNode=Ee,Me();function ce(){return de.__konvaNode}function Ce(){return de.__konvaNode}function Me(){var re={};for(var H in de.vnode.props)H.slice(0,2)==="on"&&(re[H]=de.vnode.props[H]);var $=ve||{},te=I({},q,F.config,re);y(de,te,$,F.__useStrictMode),Object.assign(ve,te)}Object(c.onMounted)(function(){var re=S(de).__konvaNode;re.add(Ee),p(Ee)}),Object(c.onUnmounted)(function(){p(Ee),Ee.destroy(),Ee.off(D)}),Object(c.onUpdated)(function(){Me(),x(de.subTree,Ee)}),Object(c.watch)(function(){return F.config},Me,{deep:!0}),ne({getStage:Ce,getNode:ce});var ee=A[R];return ee?function(){var re;return Object(c.h)("template",{},(re=Y.default)===null||re===void 0?void 0:re.call(Y))}:function(){return null}}}};typeof window<"u"&&!window.Konva&&l(1);var T=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],L=[{name:"Stage",component:P}].concat(T.map(function(R){return{name:R,component:N(R)}})),V={install:function(B,F){var U=b;F&&F.prefix&&(U=F.prefix),L.forEach(function(q){B.component(""+U+q.name,q.component)})}};a.default=V}]).default})})(SN);var sue=SN.exports;const MN=sC(sue),Wv={__name:"KonvaStage",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i,{expose:e}){let n=0;function t(){return n+=1,n}let s={};function a(S){return s[S.uuid]}function l(S,C){if(S.uuid==C)return S;if(S.children)for(let w=0;w<S.children.length;w++){const x=S.children[w];var E=l(x,C);if(E)return E}return null}e({getObject:a});const c=K4(i,"modelValue");function h(S,C,E){var w=rue[S],x=new w(E);return x.uuid=E.uuid,s[E.uuid]=x,C&&C.add(x),d(x,E),x}function d(S,C){let E=["x","y","width","height","offsetX","offsetY","fill","opacity","stroke","name","rotation","scaleX","scaleY","shadowColor","shadowOffset","shadowBlur","lineJoin","draggable"];for(let w=0;w<E.length;w++){const x=E[w],M=`${x}Change`;S.on(M,P=>{C[x]=P.newVal})}}function p(S,C,E){var w=s[E.uuid];if(w?w.setAttrs(E):w=h(S,C,E),E.children)for(let x=0;x<E.children.length;x++){const M=E.children[x];p(M.type,w,M)}return w}function m(S){if(S.uuid||(S.uuid=t()),S.children)for(let C=0;C<S.children.length;C++){const E=S.children[C];m(E)}}function v(S){var C=l(c.value,S.uuid);if(!C){S.remove();return}var E=[];if(S.getChildren){var w=S.getChildren();for(let M=0;M<w.length;M++){const P=w[M];var x=l(c.value,P.uuid);x||E.push(P)}}for(let M=0;M<E.length;M++)E[M].remove();if(S.getChildren){var w=S.getChildren();for(let P=0;P<w.length;P++){const I=w[P];v(I)}}}function y(S){let C=document.getElementById(c.value.container);var E=c.value.width||C.clientWidth,w=c.value.height||C.clientHeight;S.width(E),S.height(w)}function b(){m(c.value);var S=p("Stage",null,c.value);y(S),v(S)}return hi(c.value,()=>{b()}),br(()=>{b()}),Ks(()=>{}),(S,C)=>null}},aue=jn("h1",null,"",-1),oue=jn("div",{class:"mylabel"},"(x,y)",-1),lue=jn("div",{class:"mylabel"},"(x,y)",-1),cue=jn("div",{class:"mylabel"},"(offset)",-1),uue=jn("div",{class:"mylabel"},"(w,h)",-1),hue=jn("div",{class:"mylabel"},"",-1),due=jn("div",{class:"mylabel"},"(scale)",-1),fue=jn("div",{class:"mylabel"},"(0-1)",-1),pue=jn("div",{class:"mylabel"},"",-1),mue=jn("div",{class:"mylabel"},"shadowOffset",-1),gue=jn("div",{class:"mylabel"},"shadowBlur",-1),vue=jn("div",{class:"mylabel"},"lineJoin",-1),Lb=800,Bb=600,yue={__name:"KonvaMain",setup(i){const e=Ct({stageConfig:{width:Lb,height:Bb,fill:"black"},backgroundConfig:{x:0,y:0,width:Lb,height:Bb,fill:"#fefae0",stroke:"black",strokeWidth:1},rectConfig:{x:100,y:100,gx:100,gy:100,width:200,height:100,offsetX:0,offsetY:0,fill:"#dda15e",opacity:.8,stroke:"black",name:"rect",rotation:0,scaleX:1,scaleY:1,shadowColor:"#A78EEB",shadowOffset:{x:3,y:3},shadowBlur:3,lineJoin:"miter",draggable:!0}}),n=Ct(null),t=Ct(null),s=Ct(null);function a(){if(n.value){var l=n.value.getNode();e.value.rectConfig.x=l.x(),e.value.rectConfig.y=l.y(),e.value.rectConfig.gx=l.absolutePosition().x,e.value.rectConfig.gy=l.absolutePosition().y,e.value.rectConfig.offsetX=l.offsetX(),e.value.rectConfig.offsetY=l.offsetY(),e.value.rectConfig.width=l.width(),e.value.rectConfig.height=l.height(),e.value.rectConfig.rotation=l.rotation(),e.value.rectConfig.rotation=l.rotation(),e.value.rectConfig.scaleX=l.scaleX(),e.value.rectConfig.scaleY=l.scaleY(),requestAnimationFrame(a)}}return br(()=>{requestAnimationFrame(a);var l=t.value.getNode(),c=s.value.getNode();l.on("click tap",function(h){var p,m;if(!h.target.hasName("rect")){(p=l.findOne("Transformer"))==null||p.destroy(),c.draw();return}(m=l.findOne("Transformer"))==null||m.destroy();var d=new Jo.Transformer;c.add(d),d.nodes([h.target]),c.draw()}),window.stage=l,window.coordConfig=e,window.VueKonva=MN}),(l,c)=>{const h=zt("v-rect"),d=zt("v-arrow"),p=zt("v-layer"),m=zt("v-stage"),v=zt("Col"),y=zt("Divider"),b=zt("InputNumber"),S=zt("Row"),C=zt("Slider"),E=zt("ColorPicker"),w=zt("Option"),x=zt("Select"),M=zt("Card");return Bn(),Vi(mi,null,[Fe(M,null,{title:pt(()=>[aue]),default:pt(()=>[Fe(S,null,{default:pt(()=>[Fe(v,null,{default:pt(()=>[jn("div",null,[Fe(m,{ref_key:"myStageRef",ref:t,config:e.value.stageConfig},{default:pt(()=>[Fe(p,{ref_key:"myLayerRef",ref:s},{default:pt(()=>[Fe(h,{config:e.value.backgroundConfig},null,8,["config"]),Fe(d,{config:{points:[0,0,Lb,0],fill:"black",stroke:"black"}},null,8,["config"]),Fe(d,{config:{points:[0,0,0,Bb],fill:"black",stroke:"black"}},null,8,["config"]),Fe(h,{ref_key:"myRectRef",ref:n,config:e.value.rectConfig,__useStrictMode:!0},null,8,["config"])]),_:1},512)]),_:1},8,["config"])])]),_:1}),Fe(v,null,{default:pt(()=>[jn("div",null,[Fe(S,null,{default:pt(()=>[Fe(v,null,{default:pt(()=>[Fe(y,null,{default:pt(()=>[Rr("")]),_:1}),Fe(S,null,{default:pt(()=>[oue,Fe(b,{modelValue:e.value.rectConfig.x,"onUpdate:modelValue":c[0]||(c[0]=P=>e.value.rectConfig.x=P),step:10},null,8,["modelValue"]),Fe(b,{modelValue:e.value.rectConfig.y,"onUpdate:modelValue":c[1]||(c[1]=P=>e.value.rectConfig.y=P),step:10},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[lue,Fe(b,{modelValue:e.value.rectConfig.gx,"onUpdate:modelValue":c[2]||(c[2]=P=>e.value.rectConfig.gx=P),readonly:!0},null,8,["modelValue"]),Fe(b,{modelValue:e.value.rectConfig.gy,"onUpdate:modelValue":c[3]||(c[3]=P=>e.value.rectConfig.gy=P),readonly:!0},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[cue,Fe(b,{modelValue:e.value.rectConfig.offsetX,"onUpdate:modelValue":c[4]||(c[4]=P=>e.value.rectConfig.offsetX=P),step:10},null,8,["modelValue"]),Fe(b,{modelValue:e.value.rectConfig.offsetY,"onUpdate:modelValue":c[5]||(c[5]=P=>e.value.rectConfig.offsetY=P),step:10},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[uue,Fe(b,{modelValue:e.value.rectConfig.width,"onUpdate:modelValue":c[6]||(c[6]=P=>e.value.rectConfig.width=P),step:10},null,8,["modelValue"]),Fe(b,{modelValue:e.value.rectConfig.height,"onUpdate:modelValue":c[7]||(c[7]=P=>e.value.rectConfig.height=P),step:10},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[hue,Fe(b,{modelValue:e.value.rectConfig.rotation,"onUpdate:modelValue":c[8]||(c[8]=P=>e.value.rectConfig.rotation=P),step:10},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[due,Fe(b,{modelValue:e.value.rectConfig.scaleX,"onUpdate:modelValue":c[9]||(c[9]=P=>e.value.rectConfig.scaleX=P),step:.1},null,8,["modelValue"]),Fe(b,{modelValue:e.value.rectConfig.scaleY,"onUpdate:modelValue":c[10]||(c[10]=P=>e.value.rectConfig.scaleY=P),step:.1},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[fue,Fe(C,{modelValue:e.value.rectConfig.opacity,"onUpdate:modelValue":c[11]||(c[11]=P=>e.value.rectConfig.opacity=P),min:0,max:1,step:.05,style:{width:"160px"}},null,8,["modelValue"])]),_:1}),Fe(y,null,{default:pt(()=>[Rr("")]),_:1}),Fe(S,null,{default:pt(()=>[pue,Fe(E,{modelValue:e.value.rectConfig.shadowColor,"onUpdate:modelValue":c[12]||(c[12]=P=>e.value.rectConfig.shadowColor=P)},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[mue,Fe(b,{modelValue:e.value.rectConfig.shadowOffsetX,"onUpdate:modelValue":c[13]||(c[13]=P=>e.value.rectConfig.shadowOffsetX=P)},null,8,["modelValue"]),Fe(b,{modelValue:e.value.rectConfig.shadowOffsetY,"onUpdate:modelValue":c[14]||(c[14]=P=>e.value.rectConfig.shadowOffsetY=P)},null,8,["modelValue"])]),_:1}),Fe(S,null,{default:pt(()=>[gue,Fe(b,{modelValue:e.value.rectConfig.shadowBlur,"onUpdate:modelValue":c[15]||(c[15]=P=>e.value.rectConfig.shadowBlur=P)},null,8,["modelValue"])]),_:1}),Fe(y,null,{default:pt(()=>[Rr("")]),_:1}),Fe(S,null,{default:pt(()=>[vue,Fe(x,{modelValue:e.value.rectConfig.lineJoin,"onUpdate:modelValue":c[16]||(c[16]=P=>e.value.rectConfig.lineJoin=P),style:{width:"160px"}},{default:pt(()=>[Fe(w,{value:"miter"},{default:pt(()=>[Rr("miter")]),_:1}),Fe(w,{value:"bevel"},{default:pt(()=>[Rr("bevel")]),_:1}),Fe(w,{value:"round"},{default:pt(()=>[Rr("round")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),Fe(Wv),Fe(M)],64)}}},bue=["src"],gf={__name:"EasyLink",props:{link:String,width:Number,height:Number},setup(i){const e=i,n=Ct(null);return br(()=>{var t=e.width?`${t}px`:"100%",s=e.height?`${s}px`:"100vh";n.value={width:t,height:s}}),(t,s)=>(Bn(),Vi("iframe",{src:e.link,style:Mc(n.value)},null,12,bue))}},_ue={__name:"GridSquare",setup(i){const e=Dr(null),n=Dr(null),t=Dr(null),s=Dr(null),a=Ct({rows:5,cols:8,boxWidth:100,boxHeight:50,offsetX:-400,offsetY:-125});hi(a.value,()=>{h()});const l=Dr(null);function c(){var p=t.value.getNode(),m=s.value.getNode(),v=p.getChildren();for(let E=0;E<a.value.rows;E++)for(let w=0;w<a.value.cols;w++){var y=E*a.value.cols+w,b=v[y];b.x(w*a.value.boxWidth+a.value.offsetX),b.y(E*a.value.boxHeight+a.value.offsetY)}var S=m.findOne("#arrowx");S.points([0,0,a.value.boxWidth*a.value.cols+a.value.offsetX,0]);var C=m.findOne("#arrowy");C.points([0,0,0,a.value.boxHeight*a.value.rows+a.value.offsetY])}function h(){var p=n.value.getNode(),m=t.value.getNode(),v=s.value.getNode();m.removeChildren(),v.removeChildren();for(let w=0;w<a.value.rows;w++)for(let x=0;x<a.value.cols;x++){var y=new Jo.Group({id:`${w}_${x}`});m.add(y);var b=new Jo.Rect({x:0,y:0,width:a.value.boxWidth,height:a.value.boxHeight,stroke:"black",strokeWidth:1,draggable:!0,id:"box"});y.add(b);var S=new Jo.Text({text:`(${w},${x})`,x:0,y:0,width:a.value.boxWidth,height:a.value.boxHeight,align:"center",verticalAlign:"middle",id:"text"});y.add(S)}var C=new Jo.Arrow({x:0,y:0,points:[0,0,p.width(),0],pointerLength:20,pointerWidth:20,fill:"red",stroke:"red",strokeWidth:4,id:"arrowx"});v.add(C);var E=new Jo.Arrow({x:0,y:0,points:[0,0,0,p.height()],pointerLength:20,pointerWidth:20,fill:"green",stroke:"green",strokeWidth:4,id:"arrowy"});v.add(E),c()}br(()=>{var p=n.value.getNode(),m=t.value.getNode();p.width(e.value.clientWidth),p.height(e.value.clientHeight),p.x(e.value.clientWidth/2),p.y(e.value.clientHeight/2),window.boxConfig=a,window.stage=p,window.layer=m,h(),p.on("wheel",v=>{v.evt.preventDefault();var y=p.scaleX(),b=p.getPointerPosition(),S={x:(b.x-p.x())/y,y:(b.y-p.y())/y};let C=v.evt.deltaY>0?1:-1;v.evt.ctrlKey&&(C=-C);const E=1.1;var w=C<0?y*E:y/E;p.scale({x:w,y:w});var x={x:b.x-S.x*w,y:b.y-S.y*w};p.position(x)}),p.on("mousemove",v=>{var y=p.getPointerPosition(),b=Math.floor((y.y-p.y()-a.value.offsetY)/a.value.boxHeight),S=Math.floor((y.x-p.x()-a.value.offsetX)/a.value.boxWidth),C=`#${b}_${S}`;if(l.value){var E=m.findOne(l.value);d(E,!1)}var E=m.findOne(C);d(E,!0),l.value=C})});function d(p,m){if(p){var v=p.findOne("#box");m?(console.log(v.fill()),v.fill("red")):v.fill(null)}}return(p,m)=>{const v=zt("v-layer"),y=zt("v-stage"),b=zt("Col"),S=zt("InputNumber"),C=zt("FormItem"),E=zt("Form"),w=zt("Row");return Bn(),Ws(w,null,{default:pt(()=>[Fe(b,{span:18},{default:pt(()=>[jn("div",{class:"boxborder",ref_key:"boxParentRef",ref:e},[Fe(y,{ref_key:"boxStageRef",ref:n,config:{width:100,height:100,draggable:!0}},{default:pt(()=>[Fe(v,{ref_key:"arrowLayerRef",ref:s},null,512),Fe(v,{ref_key:"boxLayerRef",ref:t},null,512)]),_:1},512)],512)]),_:1}),Fe(b,{span:6},{default:pt(()=>[Fe(E,{"label-width":100},{default:pt(()=>[Fe(C,{label:" / ",style:{width:"100%"}},{default:pt(()=>[Fe(S,{modelValue:a.value.rows,"onUpdate:modelValue":m[0]||(m[0]=x=>a.value.rows=x)},null,8,["modelValue"]),Fe(S,{modelValue:a.value.cols,"onUpdate:modelValue":m[1]||(m[1]=x=>a.value.cols=x)},null,8,["modelValue"])]),_:1}),Fe(C,{label:""},{default:pt(()=>[Fe(S,{modelValue:a.value.boxWidth,"onUpdate:modelValue":m[2]||(m[2]=x=>a.value.boxWidth=x)},null,8,["modelValue"]),Fe(S,{modelValue:a.value.boxHeight,"onUpdate:modelValue":m[3]||(m[3]=x=>a.value.boxHeight=x)},null,8,["modelValue"])]),_:1}),Fe(C,{label:""},{default:pt(()=>[Fe(S,{modelValue:a.value.offsetX,"onUpdate:modelValue":m[4]||(m[4]=x=>a.value.offsetX=x)},null,8,["modelValue"]),Fe(S,{modelValue:a.value.offsetY,"onUpdate:modelValue":m[5]||(m[5]=x=>a.value.offsetY=x)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},xue={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},wue={__name:"GridParallelogramH",setup(i){const e=Ct(100),n=Ct(100),t=Ct(60),s=Ct(4),a=Ct(5),l=Gn(()=>{var p=[];const m=e.value,v=n.value,y=t.value*Math.PI/180;for(let b=0;b<s.value;b++)for(let S=0;S<a.value;S++){const C=m*S,E=v*Math.sin(y)*b,w=C+m,x=E,M=w+v*Math.cos(y),P=(b+1)*v*Math.sin(y),I=C+v*Math.cos(y),A={type:"Line",points:[C,E,w,x,M,P,I,P],fill:"#00D2FF",stroke:"black",strokeWidth:1,closed:!0,name:`${b}_${S} line`};p.push(A)}return p}),c=Gn(()=>[{type:"Arrow",points:[0,0,e.value*a.value,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,n.value*s.value],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),h=Ct(null),d=Ct({container:"container",draggable:!0,x:100,y:600,scaleY:-1,children:[{type:"Layer",children:l},{type:"Layer",children:c}]});return br(()=>{window.shapes=l;var p=h.value.getObject(d.value),m=null;p.on("mousemove",v=>{m&&m.fill("#00D2FF"),v.target.hasName("line")&&(v.target.fill("red"),m=v.target)})}),(p,m)=>{const v=zt("Col"),y=zt("InputNumber"),b=zt("FormItem"),S=zt("Slider"),C=zt("Form"),E=zt("Row");return Bn(),Ws(E,null,{default:pt(()=>[Fe(v,{span:12},{default:pt(()=>[jn("div",xue,[Fe(Wv,{ref_key:"stageRef",ref:h,modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=w=>d.value=w)},null,8,["modelValue"])])]),_:1}),Fe(v,{span:4},{default:pt(()=>[Fe(C,{"label-width":100},{default:pt(()=>[Fe(b,{label:"(px)"},{default:pt(()=>[Fe(y,{modelValue:e.value,"onUpdate:modelValue":m[1]||(m[1]=w=>e.value=w)},null,8,["modelValue"])]),_:1}),Fe(b,{label:"(px)"},{default:pt(()=>[Fe(y,{modelValue:n.value,"onUpdate:modelValue":m[2]||(m[2]=w=>n.value=w)},null,8,["modelValue"])]),_:1}),Fe(b,{label:""},{default:pt(()=>[Fe(S,{modelValue:t.value,"onUpdate:modelValue":m[3]||(m[3]=w=>t.value=w),min:0,max:90},null,8,["modelValue"])]),_:1}),Fe(b,{label:" / "},{default:pt(()=>[Fe(y,{modelValue:s.value,"onUpdate:modelValue":m[4]||(m[4]=w=>s.value=w)},null,8,["modelValue"]),Fe(y,{modelValue:a.value,"onUpdate:modelValue":m[5]||(m[5]=w=>a.value=w)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Cue={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},Sue={__name:"GridParallelogramV",setup(i){const e=Ct(130),n=Ct(100),t=Ct(60),s=Ct(9),a=Ct(5),l=Gn(()=>{var p=[];const m=e.value,v=n.value;t.value*Math.PI/180;for(let b=0;b<s.value;b++)for(let S=0;S<a.value;S++){let C=null,E,w,x,M,P,I,D,A;b%2==0?(E=m*S+m/2,w=v*b/2,x=m*S+m,M=v*b/2+v/2,P=E,I=w+v,D=m*S,A=M):(E=m*S+m,w=v*b/2,x=E+m/2,M=v*b/2+v/2,P=E,I=w+v,D=E-m/2,A=M),w*=-1,M*=-1,I*=-1,A*=-1,C={type:"Line",points:[E,w,x,M,P,I,D,A],fill:"#c9ada7",stroke:"black",strokeWidth:1,closed:!0,name:`${b}_${S} line`},p.push(C);var y={type:"Text",text:`(${b},${S})`,x:D,y:M,align:"center",width:m,height:v};p.push(y)}return p}),c=Gn(()=>[{type:"Arrow",points:[0,0,e.value*a.value,0],pointerLength:20,pointerWidth:20,fill:"black",stroke:"red",strokeWidth:4},{type:"Arrow",points:[0,0,0,-n.value*s.value/2],pointerLength:20,pointerWidth:20,fill:"black",stroke:"green",strokeWidth:4}]),h=Ct(null),d=Ct({container:"container",draggable:!0,x:100,y:600,children:[{type:"Layer",children:l},{type:"Layer",children:c}]});return br(()=>{window.shapes=l;var p=h.value.getObject(d.value),m=null;p.on("mousemove",v=>{m&&m.fill("#c9ada7"),v.target.hasName("line")&&(v.target.fill("red"),m=v.target)})}),(p,m)=>{const v=zt("Col"),y=zt("Slider"),b=zt("FormItem"),S=zt("InputNumber"),C=zt("Form"),E=zt("Row");return Bn(),Ws(E,null,{default:pt(()=>[Fe(v,{span:12},{default:pt(()=>[jn("div",Cue,[Fe(Wv,{ref_key:"stageRef",ref:h,modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=w=>d.value=w)},null,8,["modelValue"])])]),_:1}),Fe(v,{span:4},{default:pt(()=>[Fe(C,{"label-width":100},{default:pt(()=>[Fe(b,{label:"(px)"},{default:pt(()=>[Fe(y,{modelValue:e.value,"onUpdate:modelValue":m[1]||(m[1]=w=>e.value=w),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Fe(b,{label:"(px)"},{default:pt(()=>[Fe(y,{modelValue:n.value,"onUpdate:modelValue":m[2]||(m[2]=w=>n.value=w),min:50,max:200,"show-input":!0},null,8,["modelValue"])]),_:1}),Fe(b,{label:" / "},{default:pt(()=>[Fe(S,{modelValue:s.value,"onUpdate:modelValue":m[3]||(m[3]=w=>s.value=w)},null,8,["modelValue"]),Fe(S,{modelValue:a.value,"onUpdate:modelValue":m[4]||(m[4]=w=>a.value=w)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Eue={id:"container",style:{"background-color":"antiquewhite",height:"80vh"}},Mue={__name:"KonvaStageTest",setup(i){const e=Ct([{type:"Rect",x:100,y:100,width:200,height:100,fill:"red",draggable:!0}]),n=Ct({type:"Stage",container:"container",wheel:!0,children:[{type:"Layer",children:e}]}),t=Dr(null);function s(a){a=="Rect"?e.value.push({type:"Rect",width:200,height:100,fill:"green",draggable:!0}):a=="Circle"?e.value.push({type:"Circle",radius:80,fill:"green",draggable:!0}):a=="Star"&&e.value.push({type:"Star",innerRadius:40,outerRadius:70,fill:"yellow",stroke:"black",strokeWidth:4,draggable:!0}),console.log(a)}return br(()=>{var a=t.value.getObject(n.value);a.on("wheel",l=>{l.evt.preventDefault();var c=a.scaleX(),h=a.getPointerPosition(),d={x:(h.x-a.x())/c,y:(h.y-a.y())/c};let p=l.evt.deltaY>0?1:-1;l.evt.ctrlKey&&(p=-p);var m=1.1,v=p<0?c*m:c/m;a.scale({x:v,y:v});var y={x:h.x-d.x*v,y:h.y-d.y*v};a.position(y)})}),(a,l)=>{const c=zt("Col"),h=zt("Icon"),d=zt("Button"),p=zt("DropdownItem"),m=zt("DropdownMenu"),v=zt("Dropdown"),y=zt("Space"),b=zt("FormItem"),S=zt("Divider"),C=zt("InputNumber"),E=zt("Form"),w=zt("Row");return Bn(),Ws(w,null,{default:pt(()=>[Fe(c,{span:12},{default:pt(()=>[jn("div",Eue,[Fe(Wv,{ref_key:"stageRef",ref:t,modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=x=>n.value=x)},null,8,["modelValue"])])]),_:1}),Fe(c,{span:12},{default:pt(()=>[Fe(E,{"label-width":100},{default:pt(()=>[Fe(b,{label:""},{default:pt(()=>[Fe(y,null,{default:pt(()=>[Fe(v,{onOnClick:s},{list:pt(()=>[Fe(m,null,{default:pt(()=>[Fe(p,{name:"Rect"},{default:pt(()=>[Rr("")]),_:1}),Fe(p,{name:"Circle"},{default:pt(()=>[Rr("")]),_:1}),Fe(p,{name:"Star"},{default:pt(()=>[Rr("")]),_:1})]),_:1})]),default:pt(()=>[Fe(d,{type:"primary"},{default:pt(()=>[Rr("  "),Fe(h,{type:"ios-arrow-down"})]),_:1})]),_:1})]),_:1})]),_:1}),Fe(S),(Bn(!0),Vi(mi,null,Ex(e.value,x=>(Bn(),Ws(b,{label:"x/y"},{default:pt(()=>[Fe(C,{modelValue:x.x,"onUpdate:modelValue":M=>x.x=M},null,8,["modelValue","onUpdate:modelValue"]),Fe(C,{modelValue:x.y,"onUpdate:modelValue":M=>x.y=M},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}},Tue={key:0},kue={key:1},Aue={__name:"App",setup(i){const e=[{id:"TankMain",title:"",comp:vce},{id:"KonvaMain",title:"Konva",comp:yue},{id:"CoinKnight",title:"",comp:gf,link:"CoinKnight/index.html"},{id:"FarmMine",title:"",comp:gf,link:"FarmMine/index.html"},{id:"jigsaw",title:"",comp:gf,link:"jigsaw/index.html"},{id:"shader",title:"shader",comp:gf,link:"shader/index.html"},{id:"tetris",title:"",comp:gf,link:"tetris/index.html"},{id:"KonvaStageTest",title:"KonvaStageTest",comp:Mue},{id:"GridSquare",title:"",comp:_ue},{id:"GridParallelogramH",title:"",comp:wue},{id:"GridParallelogramV",title:"",comp:Sue}],n=Ct(window.location.hash.slice(1));window.addEventListener("hashchange",()=>{n.value=window.location.hash.slice(1),document.title="Project:"+n.value});const t=Gn(()=>e.find(a=>a.id===n.value)),s=Gn(()=>{var a;return(a=t.value)==null?void 0:a.comp});return(a,l)=>{const c=zt("GridItem"),h=zt("Grid");return s.value?(Bn(),Vi("div",Tue,[(Bn(),Ws(e4,null,{default:pt(()=>[(Bn(),Ws(ZA(s.value),{link:t.value.link},null,8,["link"]))]),_:1}))])):(Bn(),Vi("div",kue,[Fe(h,{col:5},{default:pt(()=>[(Bn(),Vi(mi,null,Ex(e,d=>Fe(c,null,{default:pt(()=>[Fe(vK,{routeData:d},null,8,["routeData"])]),_:2},1024)),64))]),_:1})]))}}};var ix={exports:{}};(function(i,e){(function(n,t){t(e,EN)})(ju,function(n,t){const s=typeof window<"u",a=function(){return s&&document.addEventListener?function(r,o,u,_=!1){r&&o&&u&&r.addEventListener(o,u,_)}:function(r,o,u){r&&o&&u&&r.attachEvent("on"+o,u)}}(),l=function(){return s&&document.removeEventListener?function(r,o,u,_=!1){r&&o&&r.removeEventListener(o,u,_)}:function(r,o,u){r&&o&&r.detachEvent("on"+o,u)}}();var c=(r,o)=>{const u=r.__vccOpts||r;for(const[_,g]of o)u[_]=g;return u};const h="ivu-affix";function d(r,o){const u=o?"pageYOffset":"pageXOffset",_=o?"scrollTop":"scrollLeft";let g=r[u];return s&&typeof g!="number"&&(g=window.document.documentElement[_]),g}function p(r){if(!s)return;const o=r.getBoundingClientRect(),u=d(window,!0),_=d(window),g=window.document.body,f=g.clientTop||0,k=g.clientLeft||0;return{top:o.top+u-f,left:o.left+_-k}}const m={name:"Affix",emits:["on-change"],props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},useCapture:{type:Boolean,default:!1}},data(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType(){let r="top";return this.offsetBottom>=0&&(r="bottom"),r},classes(){return[{[`${h}`]:this.affix}]}},mounted(){a(window,"scroll",this.handleScroll,this.useCapture),a(window,"resize",this.handleScroll,this.useCapture),t.nextTick(()=>{this.handleScroll()})},beforeUnmount(){l(window,"scroll",this.handleScroll,this.useCapture),l(window,"resize",this.handleScroll,this.useCapture)},methods:{handleScroll(){if(!s)return;const r=this.affix,o=d(window,!0),u=p(this.$el),_=window.innerHeight,g=this.$el.getElementsByTagName("div")[0].offsetHeight;u.top-this.offsetTop<o&&this.offsetType=="top"&&!r?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${u.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):u.top-this.offsetTop>o&&this.offsetType=="top"&&r&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),u.top+this.offsetBottom+g>o+_&&this.offsetType=="bottom"&&!r?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${u.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):u.top+this.offsetBottom+g<o+_&&this.offsetType=="bottom"&&r&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};function v(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",null,[t.createElementVNode("div",{ref:"point",class:t.normalizeClass(f.classes),style:t.normalizeStyle(g.styles)},[t.renderSlot(r.$slots,"default")],6),t.withDirectives(t.createElementVNode("div",{style:t.normalizeStyle(g.slotStyle)},null,4),[[t.vShow,g.slot]])])}var y=c(m,[["render",v]]);const b="ivu-icon",S={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes(){return[`${b}`,{[`${b}-${this.type}`]:this.type!=="",[`${this.custom}`]:this.custom!==""}]},styles(){let r={};return this.size&&(r["font-size"]=`${this.size}px`),this.color&&(r.color=this.color),r}}};function C(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("i",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.styles)},null,6)}var E=c(S,[["render",C]]);function w(r,o){for(let u=0;u<o.length;u++)if(r===o[u])return!0;return!1}let x;function M(r){if(s&&x===void 0){const o=document.createElement("div");o.style.width="100%",o.style.height="200px";const u=document.createElement("div"),_=u.style;_.position="absolute",_.top=0,_.left=0,_.pointerEvents="none",_.visibility="hidden",_.width="200px",_.height="150px",_.overflow="hidden",u.appendChild(o),document.body.appendChild(u);const g=o.offsetWidth;u.style.overflow="scroll";let f=o.offsetWidth;g===f&&(f=u.clientWidth),document.body.removeChild(u),x=g-f}return x}const P=s&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||!1,I=/([\:\-\_]+(.))/g,D=/^moz([A-Z])/;function A(r){return r.replace(I,function(o,u,_,g){return g?_.toUpperCase():_}).replace(D,"Moz$1")}function N(r,o){if(s){if(!r||!o)return null;o=A(o),o==="float"&&(o="cssFloat");try{const u=document.defaultView.getComputedStyle(r,"");return r.style[o]||u?u[o]:null}catch{return r.style[o]}}}function T(r){return r.toString()[0].toUpperCase()+r.toString().slice(1)}function L(r){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(r)]}function V(r){const o=L(r);let u;if(o==="array")u=[];else if(o==="object")u={};else return r;if(o==="array")for(let _=0;_<r.length;_++)u.push(V(r[_]));else if(o==="object")for(let _ in r)u[_]=V(r[_]);return u}function R(r,o=0,u,_=500,g){if(!s)return;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(G){return window.setTimeout(G,1e3/60)});const f=Math.abs(o-u),k=Math.ceil(f/_*50);function O(G,z,j){if(G===z){g&&g();return}let ae=G+j>z?z:G+j;G>z&&(ae=G-j<z?z:G-j),r===window?window.scrollTo(ae,ae):r.scrollTop=ae,window.requestAnimationFrame(()=>O(ae,z,j))}O(o,u,k)}function B(r,o,u){typeof o=="string"?u=[o]:u=o;let _=r.$parent,g=_.$options.name;for(;_&&(!g||u.indexOf(g)<0);)_=_.$parent,_&&(g=_.$options.name);return _}function F(r,o){let u=[];const _=r.$parent;return _?(_.$options.name===o&&u.push(_),u.concat(F(_,o))):[]}const U=function(r){return(r||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function q(r,o){if(!r||!o)return!1;if(o.indexOf(" ")!==-1)throw new Error("className should not contain space.");return r.classList?r.classList.contains(o):(" "+r.className+" ").indexOf(" "+o+" ")>-1}function Y(r,o){if(!r)return;let u=r.className;const _=(o||"").split(" ");for(let g=0,f=_.length;g<f;g++){const k=_[g];!k||(r.classList?r.classList.add(k):q(r,k)||(u+=" "+k))}r.classList||(r.className=u)}function ne(r,o){if(!r||!o)return;const u=o.split(" ");let _=" "+r.className+" ";for(let g=0,f=u.length;g<f;g++){const k=u[g];!k||(r.classList?r.classList.remove(k):q(r,k)&&(_=_.replace(" "+k+" "," ")))}r.classList||(r.className=U(_))}const de={xs:"480px",sm:"576px",md:"768px",lg:"992px",xl:"1200px",xxl:"1600px"};function ve(){if(!s)return;const r=o=>({media:o,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||r}const Re=/#([^#]+)$/;async function Ee(r,o="unnamed"){if(!s)return Promise.reject();try{const u=await(await fetch(r)).blob();if(!u)return Promise.reject();const _=URL.createObjectURL(u),g=document.createElement("a");return g.setAttribute("href",_),g.setAttribute("download",o),g.click(),URL.revokeObjectURL(_),Promise.resolve()}catch(u){return Promise.reject(u)}}const ce="ivu-alert",Ce={name:"Alert",components:{Icon:E},props:{type:{validator(r){return w(r,["success","info","warning","error"])},default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},banner:{type:Boolean,default:!1},fade:{type:Boolean,default:!0}},data(){return{closed:!1,desc:!1}},computed:{wrapClasses(){return[`${ce}`,`${ce}-${this.type}`,{[`${ce}-with-icon`]:this.showIcon,[`${ce}-with-desc`]:this.desc,[`${ce}-with-banner`]:this.banner}]},messageClasses(){return`${ce}-message`},descClasses(){return`${ce}-desc`},closeClasses(){return`${ce}-close`},iconClasses(){return`${ce}-icon`},iconType(){let r="";switch(this.type){case"success":r="ios-checkmark-circle";break;case"info":r="ios-information-circle";break;case"warning":r="ios-alert";break;case"error":r="ios-close-circle";break}return this.desc&&(r+="-outline"),r}},methods:{close(r){this.closed=!0,this.$emit("on-close",r)}},mounted(){this.desc=this.$slots.desc!==void 0}};function Me(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Transition,{name:u.fade?"fade":""},{default:t.withCtx(()=>[g.closed?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.wrapClasses)},[u.showIcon?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(f.iconClasses)},[t.renderSlot(r.$slots,"icon",{},()=>[t.createVNode(k,{type:f.iconType},null,8,["type"])])],2)):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(f.messageClasses)},[t.renderSlot(r.$slots,"default")],2),t.createElementVNode("span",{class:t.normalizeClass(f.descClasses)},[t.renderSlot(r.$slots,"desc")],2),u.closable?(t.openBlock(),t.createElementBlock("a",{key:1,class:t.normalizeClass(f.closeClasses),onClick:o[0]||(o[0]=(...O)=>f.close&&f.close(...O))},[t.renderSlot(r.$slots,"close",{},()=>[t.createVNode(k,{type:"ios-close"})])],2)):t.createCommentVNode("",!0)],2))]),_:3},8,["name"])}var ee=c(Ce,[["render",Me]]);const re={name:"Anchor",provide(){return{AnchorInstance:this}},emits:["on-change","on-select"],props:{affix:{type:Boolean,default:!0},offsetTop:{type:Number,default:0},offsetBottom:Number,bounds:{type:Number,default:5},container:null,showInk:{type:Boolean,default:!1},scrollOffset:{type:Number,default:0}},data(){return{prefix:"ivu-anchor",isAffixed:!1,inkTop:0,animating:!1,currentLink:"",currentId:"",scrollContainer:null,scrollElement:null,wrapperTop:0,upperFirstTitle:!0,links:[]}},computed:{wrapperComponent(){return this.affix?"Affix":"div"},wrapperStyle(){return{maxHeight:this.offsetTop?`calc(100vh - ${this.offsetTop}px)`:"100vh"}},containerIsWindow(){return this.scrollContainer===window},titlesOffsetArr(){const r=this.links.map(u=>u.link.href).map(u=>u.split("#")[1]);let o=[];return s&&r.forEach(u=>{const _=document.getElementById(u);_&&o.push({link:`#${u}`,offset:_.offsetTop-this.scrollElement.offsetTop})}),o}},methods:{handleAffixStateChange(r){this.isAffixed=this.affix&&r},handleScroll(r){if(this.upperFirstTitle=!!this.titlesOffsetArr[0]&&r.target.scrollTop<this.titlesOffsetArr[0].offset,this.animating)return;const o=s?document.documentElement.scrollTop||document.body.scrollTop||r.target.scrollTop:0;this.getCurrentScrollAtTitleId(o)},handleHashChange(){if(!s)return;const r=window.location.href,o=Re.exec(r);!o||(this.currentLink=o[0],this.currentId=o[1])},handleScrollTo(){if(!s)return;const r=document.getElementById(this.currentId),o=document.querySelector(`a[data-href="${this.currentLink}"]`);let u=this.scrollOffset;if(o&&(u=parseFloat(o.getAttribute("data-scroll-offset"))),!r)return;const _=r.offsetTop-this.wrapperTop-u;this.animating=!0,R(this.scrollContainer,this.scrollElement.scrollTop,_,600,()=>{this.animating=!1}),this.handleSetInkTop()},handleSetInkTop(){if(!s)return;const r=document.querySelector(`a[data-href="${this.currentLink}"]`);if(!r)return;const o=r.offsetTop,u=o<0?this.offsetTop:o;this.inkTop=u},getCurrentScrollAtTitleId(r){let o=-1,u=this.titlesOffsetArr.length,_={link:"#",offset:0};for(r+=this.bounds;++o<u;){let g=this.titlesOffsetArr[o],f=this.titlesOffsetArr[o+1];if(r>=g.offset&&r<(f&&f.offset||1/0)){_=this.titlesOffsetArr[o];break}}this.currentLink=_.link,this.handleSetInkTop()},getContainer(){!s||(this.scrollContainer=this.container?typeof this.container=="string"?document.querySelector(this.container):this.container:window,this.scrollElement=this.container?this.scrollContainer:document.documentElement||document.body)},removeListener(){l(this.scrollContainer,"scroll",this.handleScroll),l(window,"hashchange",this.handleHashChange)},init(){this.handleHashChange(),t.nextTick(()=>{this.removeListener(),this.getContainer(),this.wrapperTop=this.containerIsWindow?0:this.scrollElement.offsetTop,this.handleScrollTo(),this.handleSetInkTop(),this.titlesOffsetArr[0]&&(this.upperFirstTitle=this.scrollElement.scrollTop<this.titlesOffsetArr[0].offset),a(this.scrollContainer,"scroll",this.handleScroll),a(window,"hashchange",this.handleHashChange)})},addLink(r,o){this.links.push({id:r,link:o})},removeLink(r){const o=this.links.findIndex(u=>u.id===r);this.links.splice(o,1)}},watch:{$route(){this.currentLink="",this.currentId="",this.handleHashChange(),t.nextTick(()=>{this.handleScrollTo()})},container(){this.init()},currentLink(r,o){this.$emit("on-change",r,o)}},mounted(){this.init()},beforeUnmount(){this.removeListener()}};function H(r,o,u,_,g,f){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(f.wrapperComponent),{"offset-top":u.offsetTop,"offset-bottom":u.offsetBottom,onOnChange:f.handleAffixStateChange},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(`${g.prefix}-wrapper`),style:t.normalizeStyle(f.wrapperStyle)},[t.createElementVNode("div",{class:t.normalizeClass(`${g.prefix}`)},[t.createElementVNode("div",{class:t.normalizeClass(`${g.prefix}-ink`)},[t.withDirectives(t.createElementVNode("span",{class:t.normalizeClass(`${g.prefix}-ink-ball`),style:t.normalizeStyle({top:`${g.inkTop}px`})},null,6),[[t.vShow,u.showInk]])],2),t.renderSlot(r.$slots,"default")],2)],6)]),_:3},40,["offset-top","offset-bottom","onOnChange"])}var $=c(re,[["render",H]]);function te(r=32){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",u=o.length;let _="";for(let g=0;g<r;g++)_+=o.charAt(Math.floor(Math.random()*u));return _}const le={name:"AnchorLink",inject:["AnchorInstance"],props:{href:String,title:String,scrollOffset:{type:Number,default(){return t.inject("AnchorInstance").scrollOffset}}},data(){return{prefix:"ivu-anchor-link",id:te(6)}},computed:{anchorLinkClasses(){return[this.prefix,this.AnchorInstance.currentLink===this.href?`${this.prefix}-active`:""]},linkTitleClasses(){return[`${this.prefix}-title`]}},methods:{goAnchor(){this.currentLink=this.href,this.AnchorInstance.handleHashChange(),this.AnchorInstance.handleScrollTo(),this.AnchorInstance.$emit("on-select",this.href),this.$router?this.$router.push(this.href,()=>{}):s&&(window.location.href=this.href)}},mounted(){this.AnchorInstance.addLink(this.id,this),t.nextTick(()=>{this.AnchorInstance.init()})},beforeUnmount(){this.AnchorInstance.removeLink(this.id)}},K=["href","data-scroll-offset","data-href","title"];function X(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.anchorLinkClasses)},[t.createElementVNode("a",{class:t.normalizeClass(f.linkTitleClasses),href:u.href,"data-scroll-offset":u.scrollOffset,"data-href":u.href,onClick:o[0]||(o[0]=t.withModifiers((...k)=>f.goAnchor&&f.goAnchor(...k),["prevent"])),title:u.title},t.toDisplayString(u.title),11,K),t.renderSlot(r.$slots,"default")],2)}var oe=c(le,[["render",X]]),fe={props:{to:{type:[Object,String]},replace:{type:Boolean,default:!1},target:{type:String,validator(r){return w(r,["_blank","_self","_parent","_top"])},default:"_self"},append:{type:Boolean,required:!1,default:!1}},computed:{linkUrl(){if(typeof this.to!="string")return null;if(this.to.includes("//"))return this.to;const r=this.$router;if(r){const o=this.$route,u=r.resolve(this.to,o,this.append);return u?u.href:this.to}return this.to}},methods:{handleOpenTo(){if(!s)return;const r=this.$router;let o=this.to;if(r){const u=this.$route,_=r.resolve(this.to,u,this.append);o=_?_.href:this.to}typeof this.to!="string"&&window.open(o)},handleClick(r=!1){const o=this.$router;!s||(r?this.handleOpenTo():o?typeof this.to=="string"&&this.to.includes("//")?window.location.href=this.to:this.replace?this.$router.replace(this.to,()=>{}):this.$router.push(this.to,()=>{}):window.location.href=this.to)},handleCheckClick(r,o=!1){if(this.to){if(this.target==="_blank")return this.handleOpenTo(),!1;r.preventDefault(),this.handleClick(o)}}}};function be(r,o){let u=!1;return o.forEach(_=>{r.includes(_)&&(u=!0)}),u}const ke={name:"Auth",mixins:[fe],emits:["click"],props:{authority:{type:[String,Array,Function,Boolean],default:!0},access:{type:[String,Array]},prevent:{type:Boolean,default:!1},message:{type:String,default:""},customTip:{type:Boolean,default:!1},display:{type:String}},computed:{isPermission(){let r;if(typeof this.authority=="boolean")r=this.authority;else if(this.authority instanceof Function)r=this.authority();else{const o=typeof this.authority=="string"?[this.authority]:this.authority,u=typeof this.access=="string"?[this.access]:this.access;r=be(o,u)}return r},options(){let r={};return this.display&&(r.display=this.display),{class:{"ivu-auth":!0,"ivu-auth-permission":this.isPermission,"ivu-auth-no-math":!this.isPermission,"ivu-auth-redirect":!this.isPermission&&this.to,"ivu-auth-prevent":this.prevent},style:r}}},render(){return this.isPermission?t.h("div",this.options,this.$slots.default()):this.to?t.h("div",this.options):this.prevent?t.h("div",Object.assign({},this.options,{onClick:this.handlePreventClick}),[t.h("div",{class:"ivu-auth-prevent-no-match"},this.$slots.default())]):t.h("div",this.options,this.$slots.noMatch())},methods:{handlePreventClick(r){this.isPermission||(this.customTip||this.$Message.info({content:this.message,duration:3}),this.$emit("click",r))}},created(){!this.isPermission&&this.to&&this.handleClick(!1)}};var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ju<"u"?ju:typeof self<"u"?self:{};function W(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ue={exports:{}};/**!
* @fileOverview Kickass library to create and place poppers near their reference elements.
* @version 1.16.1
* @license
* Copyright (c) 2016 Federico Zivolo and contributors
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*/(function(r,o){(function(u,_){r.exports=_()})(J,function(){var u=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",_=function(){for(var Z=["Edge","Trident","Firefox"],ge=0;ge<Z.length;ge+=1)if(u&&navigator.userAgent.indexOf(Z[ge])>=0)return 1;return 0}();function g(Z){var ge=!1;return function(){ge||(ge=!0,window.Promise.resolve().then(function(){ge=!1,Z()}))}}function f(Z){var ge=!1;return function(){ge||(ge=!0,setTimeout(function(){ge=!1,Z()},_))}}var k=u&&window.Promise,O=k?g:f;function G(Z){var ge={};return Z&&ge.toString.call(Z)==="[object Function]"}function z(Z,ge){if(Z.nodeType!==1)return[];var Se=Z.ownerDocument.defaultView,Ie=Se.getComputedStyle(Z,null);return ge?Ie[ge]:Ie}function j(Z){return Z.nodeName==="HTML"?Z:Z.parentNode||Z.host}function ae(Z){if(!Z)return document.body;switch(Z.nodeName){case"HTML":case"BODY":return Z.ownerDocument.body;case"#document":return Z.body}var ge=z(Z),Se=ge.overflow,Ie=ge.overflowX,Xe=ge.overflowY;return/(auto|scroll|overlay)/.test(Se+Xe+Ie)?Z:ae(j(Z))}function _e(Z){return Z&&Z.referenceNode?Z.referenceNode:Z}var ye=u&&!!(window.MSInputMethodContext&&document.documentMode),me=u&&/MSIE 10/.test(navigator.userAgent);function ie(Z){return Z===11?ye:Z===10?me:ye||me}function Pe(Z){if(!Z)return document.documentElement;for(var ge=ie(10)?document.body:null,Se=Z.offsetParent||null;Se===ge&&Z.nextElementSibling;)Se=(Z=Z.nextElementSibling).offsetParent;var Ie=Se&&Se.nodeName;return!Ie||Ie==="BODY"||Ie==="HTML"?Z?Z.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(Se.nodeName)!==-1&&z(Se,"position")==="static"?Pe(Se):Se}function At(Z){var ge=Z.nodeName;return ge==="BODY"?!1:ge==="HTML"||Pe(Z.firstElementChild)===Z}function ut(Z){return Z.parentNode!==null?ut(Z.parentNode):Z}function mt(Z,ge){if(!Z||!Z.nodeType||!ge||!ge.nodeType)return document.documentElement;var Se=Z.compareDocumentPosition(ge)&Node.DOCUMENT_POSITION_FOLLOWING,Ie=Se?Z:ge,Xe=Se?ge:Z,qe=document.createRange();qe.setStart(Ie,0),qe.setEnd(Xe,0);var Je=qe.commonAncestorContainer;if(Z!==Je&&ge!==Je||Ie.contains(Xe))return At(Je)?Je:Pe(Je);var nt=ut(Z);return nt.host?mt(nt.host,ge):mt(Z,ut(ge).host)}function We(Z){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",Se=ge==="top"?"scrollTop":"scrollLeft",Ie=Z.nodeName;if(Ie==="BODY"||Ie==="HTML"){var Xe=Z.ownerDocument.documentElement,qe=Z.ownerDocument.scrollingElement||Xe;return qe[Se]}return Z[Se]}function Ne(Z,ge){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ie=We(ge,"top"),Xe=We(ge,"left"),qe=Se?-1:1;return Z.top+=Ie*qe,Z.bottom+=Ie*qe,Z.left+=Xe*qe,Z.right+=Xe*qe,Z}function Ye(Z,ge){var Se=ge==="x"?"Left":"Top",Ie=Se==="Left"?"Right":"Bottom";return parseFloat(Z["border"+Se+"Width"])+parseFloat(Z["border"+Ie+"Width"])}function Ke(Z,ge,Se,Ie){return Math.max(ge["offset"+Z],ge["scroll"+Z],Se["client"+Z],Se["offset"+Z],Se["scroll"+Z],ie(10)?parseInt(Se["offset"+Z])+parseInt(Ie["margin"+(Z==="Height"?"Top":"Left")])+parseInt(Ie["margin"+(Z==="Height"?"Bottom":"Right")]):0)}function Dt(Z){var ge=Z.body,Se=Z.documentElement,Ie=ie(10)&&getComputedStyle(Se);return{height:Ke("Height",ge,Se,Ie),width:Ke("Width",ge,Se,Ie)}}var Lt=function(Z,ge){if(!(Z instanceof ge))throw new TypeError("Cannot call a class as a function")},xt=function(){function Z(ge,Se){for(var Ie=0;Ie<Se.length;Ie++){var Xe=Se[Ie];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(ge,Xe.key,Xe)}}return function(ge,Se,Ie){return Se&&Z(ge.prototype,Se),Ie&&Z(ge,Ie),ge}}(),gt=function(Z,ge,Se){return ge in Z?Object.defineProperty(Z,ge,{value:Se,enumerable:!0,configurable:!0,writable:!0}):Z[ge]=Se,Z},Et=Object.assign||function(Z){for(var ge=1;ge<arguments.length;ge++){var Se=arguments[ge];for(var Ie in Se)Object.prototype.hasOwnProperty.call(Se,Ie)&&(Z[Ie]=Se[Ie])}return Z};function Ot(Z){return Et({},Z,{right:Z.left+Z.width,bottom:Z.top+Z.height})}function wt(Z){var ge={};try{if(ie(10)){ge=Z.getBoundingClientRect();var Se=We(Z,"top"),Ie=We(Z,"left");ge.top+=Se,ge.left+=Ie,ge.bottom+=Se,ge.right+=Ie}else ge=Z.getBoundingClientRect()}catch{}var Xe={left:ge.left,top:ge.top,width:ge.right-ge.left,height:ge.bottom-ge.top},qe=Z.nodeName==="HTML"?Dt(Z.ownerDocument):{},Je=qe.width||Z.clientWidth||Xe.width,nt=qe.height||Z.clientHeight||Xe.height,dt=Z.offsetWidth-Je,Bt=Z.offsetHeight-nt;if(dt||Bt){var Ft=z(Z);dt-=Ye(Ft,"x"),Bt-=Ye(Ft,"y"),Xe.width-=dt,Xe.height-=Bt}return Ot(Xe)}function ht(Z,ge){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ie=ie(10),Xe=ge.nodeName==="HTML",qe=wt(Z),Je=wt(ge),nt=ae(Z),dt=z(ge),Bt=parseFloat(dt.borderTopWidth),Ft=parseFloat(dt.borderLeftWidth);Se&&Xe&&(Je.top=Math.max(Je.top,0),Je.left=Math.max(Je.left,0));var It=Ot({top:qe.top-Je.top-Bt,left:qe.left-Je.left-Ft,width:qe.width,height:qe.height});if(It.marginTop=0,It.marginLeft=0,!Ie&&Xe){var Ut=parseFloat(dt.marginTop),vn=parseFloat(dt.marginLeft);It.top-=Bt-Ut,It.bottom-=Bt-Ut,It.left-=Ft-vn,It.right-=Ft-vn,It.marginTop=Ut,It.marginLeft=vn}return(Ie&&!Se?ge.contains(nt):ge===nt&&nt.nodeName!=="BODY")&&(It=Ne(It,ge)),It}function st(Z){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Se=Z.ownerDocument.documentElement,Ie=ht(Z,Se),Xe=Math.max(Se.clientWidth,window.innerWidth||0),qe=Math.max(Se.clientHeight,window.innerHeight||0),Je=ge?0:We(Se),nt=ge?0:We(Se,"left"),dt={top:Je-Ie.top+Ie.marginTop,left:nt-Ie.left+Ie.marginLeft,width:Xe,height:qe};return Ot(dt)}function Mt(Z){var ge=Z.nodeName;if(ge==="BODY"||ge==="HTML")return!1;if(z(Z,"position")==="fixed")return!0;var Se=j(Z);return Se?Mt(Se):!1}function ft(Z){if(!Z||!Z.parentElement||ie())return document.documentElement;for(var ge=Z.parentElement;ge&&z(ge,"transform")==="none";)ge=ge.parentElement;return ge||document.documentElement}function Gt(Z,ge,Se,Ie){var Xe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,qe={top:0,left:0},Je=Xe?ft(Z):mt(Z,_e(ge));if(Ie==="viewport")qe=st(Je,Xe);else{var nt=void 0;Ie==="scrollParent"?(nt=ae(j(ge)),nt.nodeName==="BODY"&&(nt=Z.ownerDocument.documentElement)):Ie==="window"?nt=Z.ownerDocument.documentElement:nt=Ie;var dt=ht(nt,Je,Xe);if(nt.nodeName==="HTML"&&!Mt(Je)){var Bt=Dt(Z.ownerDocument),Ft=Bt.height,It=Bt.width;qe.top+=dt.top-dt.marginTop,qe.bottom=Ft+dt.top,qe.left+=dt.left-dt.marginLeft,qe.right=It+dt.left}else qe=dt}Se=Se||0;var Ut=typeof Se=="number";return qe.left+=Ut?Se:Se.left||0,qe.top+=Ut?Se:Se.top||0,qe.right-=Ut?Se:Se.right||0,qe.bottom-=Ut?Se:Se.bottom||0,qe}function qt(Z){var ge=Z.width,Se=Z.height;return ge*Se}function Tn(Z,ge,Se,Ie,Xe){var qe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(Z.indexOf("auto")===-1)return Z;var Je=Gt(Se,Ie,qe,Xe),nt={top:{width:Je.width,height:ge.top-Je.top},right:{width:Je.right-ge.right,height:Je.height},bottom:{width:Je.width,height:Je.bottom-ge.bottom},left:{width:ge.left-Je.left,height:Je.height}},dt=Object.keys(nt).map(function(Ut){return Et({key:Ut},nt[Ut],{area:qt(nt[Ut])})}).sort(function(Ut,vn){return vn.area-Ut.area}),Bt=dt.filter(function(Ut){var vn=Ut.width,yn=Ut.height;return vn>=Se.clientWidth&&yn>=Se.clientHeight}),Ft=Bt.length>0?Bt[0].key:dt[0].key,It=Z.split("-")[1];return Ft+(It?"-"+It:"")}function zn(Z,ge,Se){var Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Xe=Ie?ft(ge):mt(ge,_e(Se));return ht(Se,Xe,Ie)}function ei(Z){var ge=Z.ownerDocument.defaultView,Se=ge.getComputedStyle(Z),Ie=parseFloat(Se.marginTop||0)+parseFloat(Se.marginBottom||0),Xe=parseFloat(Se.marginLeft||0)+parseFloat(Se.marginRight||0),qe={width:Z.offsetWidth+Xe,height:Z.offsetHeight+Ie};return qe}function ri(Z){var ge={left:"right",right:"left",bottom:"top",top:"bottom"};return Z.replace(/left|right|bottom|top/g,function(Se){return ge[Se]})}function zi(Z,ge,Se){Se=Se.split("-")[0];var Ie=ei(Z),Xe={width:Ie.width,height:Ie.height},qe=["right","left"].indexOf(Se)!==-1,Je=qe?"top":"left",nt=qe?"left":"top",dt=qe?"height":"width",Bt=qe?"width":"height";return Xe[Je]=ge[Je]+ge[dt]/2-Ie[dt]/2,Se===nt?Xe[nt]=ge[nt]-Ie[Bt]:Xe[nt]=ge[ri(nt)],Xe}function Sr(Z,ge){return Array.prototype.find?Z.find(ge):Z.filter(ge)[0]}function Is(Z,ge,Se){if(Array.prototype.findIndex)return Z.findIndex(function(Xe){return Xe[ge]===Se});var Ie=Sr(Z,function(Xe){return Xe[ge]===Se});return Z.indexOf(Ie)}function Ns(Z,ge,Se){var Ie=Se===void 0?Z:Z.slice(0,Is(Z,"name",Se));return Ie.forEach(function(Xe){Xe.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var qe=Xe.function||Xe.fn;Xe.enabled&&G(qe)&&(ge.offsets.popper=Ot(ge.offsets.popper),ge.offsets.reference=Ot(ge.offsets.reference),ge=qe(ge,Xe))}),ge}function vt(){if(!this.state.isDestroyed){var Z={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};Z.offsets.reference=zn(this.state,this.popper,this.reference,this.options.positionFixed),Z.placement=Tn(this.options.placement,Z.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),Z.originalPlacement=Z.placement,Z.positionFixed=this.options.positionFixed,Z.offsets.popper=zi(this.popper,Z.offsets.reference,Z.placement),Z.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",Z=Ns(this.modifiers,Z),this.state.isCreated?this.options.onUpdate(Z):(this.state.isCreated=!0,this.options.onCreate(Z))}}function $t(Z,ge){return Z.some(function(Se){var Ie=Se.name,Xe=Se.enabled;return Xe&&Ie===ge})}function gn(Z){for(var ge=[!1,"ms","Webkit","Moz","O"],Se=Z.charAt(0).toUpperCase()+Z.slice(1),Ie=0;Ie<ge.length;Ie++){var Xe=ge[Ie],qe=Xe?""+Xe+Se:Z;if(typeof document.body.style[qe]<"u")return qe}return null}function Bi(){return this.state.isDestroyed=!0,$t(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[gn("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function cr(Z){var ge=Z.ownerDocument;return ge?ge.defaultView:window}function Ta(Z,ge,Se,Ie){var Xe=Z.nodeName==="BODY",qe=Xe?Z.ownerDocument.defaultView:Z;qe.addEventListener(ge,Se,{passive:!0}),Xe||Ta(ae(qe.parentNode),ge,Se,Ie),Ie.push(qe)}function To(Z,ge,Se,Ie){Se.updateBound=Ie,cr(Z).addEventListener("resize",Se.updateBound,{passive:!0});var Xe=ae(Z);return Ta(Xe,"scroll",Se.updateBound,Se.scrollParents),Se.scrollElement=Xe,Se.eventsEnabled=!0,Se}function ur(){this.state.eventsEnabled||(this.state=To(this.reference,this.options,this.state,this.scheduleUpdate))}function In(Z,ge){return cr(Z).removeEventListener("resize",ge.updateBound),ge.scrollParents.forEach(function(Se){Se.removeEventListener("scroll",ge.updateBound)}),ge.updateBound=null,ge.scrollParents=[],ge.scrollElement=null,ge.eventsEnabled=!1,ge}function Er(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=In(this.reference,this.state))}function Rs(Z){return Z!==""&&!isNaN(parseFloat(Z))&&isFinite(Z)}function Yr(Z,ge){Object.keys(ge).forEach(function(Se){var Ie="";["width","height","top","right","bottom","left"].indexOf(Se)!==-1&&Rs(ge[Se])&&(Ie="px"),Z.style[Se]=ge[Se]+Ie})}function Ds(Z,ge){Object.keys(ge).forEach(function(Se){var Ie=ge[Se];Ie!==!1?Z.setAttribute(Se,ge[Se]):Z.removeAttribute(Se)})}function Yc(Z){return Yr(Z.instance.popper,Z.styles),Ds(Z.instance.popper,Z.attributes),Z.arrowElement&&Object.keys(Z.arrowStyles).length&&Yr(Z.arrowElement,Z.arrowStyles),Z}function Pm(Z,ge,Se,Ie,Xe){var qe=zn(Xe,ge,Z,Se.positionFixed),Je=Tn(Se.placement,qe,ge,Z,Se.modifiers.flip.boundariesElement,Se.modifiers.flip.padding);return ge.setAttribute("x-placement",Je),Yr(ge,{position:Se.positionFixed?"fixed":"absolute"}),Se}function Jc(Z,ge){var Se=Z.offsets,Ie=Se.popper,Xe=Se.reference,qe=Math.round,Je=Math.floor,nt=function(na){return na},dt=qe(Xe.width),Bt=qe(Ie.width),Ft=["left","right"].indexOf(Z.placement)!==-1,It=Z.placement.indexOf("-")!==-1,Ut=dt%2===Bt%2,vn=dt%2===1&&Bt%2===1,yn=ge?Ft||It||Ut?qe:Je:nt,Mi=ge?qe:nt;return{left:yn(vn&&!It&&ge?Ie.left-1:Ie.left),top:Mi(Ie.top),bottom:Mi(Ie.bottom),right:yn(Ie.right)}}var Im=u&&/Firefox/i.test(navigator.userAgent);function Nm(Z,ge){var Se=ge.x,Ie=ge.y,Xe=Z.offsets.popper,qe=Sr(Z.instance.modifiers,function(Pl){return Pl.name==="applyStyle"}).gpuAcceleration;qe!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var Je=qe!==void 0?qe:ge.gpuAcceleration,nt=Pe(Z.instance.popper),dt=wt(nt),Bt={position:Xe.position},Ft=Jc(Z,window.devicePixelRatio<2||!Im),It=Se==="bottom"?"top":"bottom",Ut=Ie==="right"?"left":"right",vn=gn("transform"),yn=void 0,Mi=void 0;if(It==="bottom"?nt.nodeName==="HTML"?Mi=-nt.clientHeight+Ft.bottom:Mi=-dt.height+Ft.bottom:Mi=Ft.top,Ut==="right"?nt.nodeName==="HTML"?yn=-nt.clientWidth+Ft.right:yn=-dt.width+Ft.right:yn=Ft.left,Je&&vn)Bt[vn]="translate3d("+yn+"px, "+Mi+"px, 0)",Bt[It]=0,Bt[Ut]=0,Bt.willChange="transform";else{var na=It==="bottom"?-1:1,Zc=Ut==="right"?-1:1;Bt[It]=Mi*na,Bt[Ut]=yn*Zc,Bt.willChange=It+", "+Ut}var ps={"x-placement":Z.placement};return Z.attributes=Et({},ps,Z.attributes),Z.styles=Et({},Bt,Z.styles),Z.arrowStyles=Et({},Z.offsets.arrow,Z.arrowStyles),Z}function ad(Z,ge,Se){var Ie=Sr(Z,function(nt){var dt=nt.name;return dt===ge}),Xe=!!Ie&&Z.some(function(nt){return nt.name===Se&&nt.enabled&&nt.order<Ie.order});if(!Xe){var qe="`"+ge+"`",Je="`"+Se+"`";console.warn(Je+" modifier is required by "+qe+" modifier in order to work, be sure to include it before "+qe+"!")}return Xe}function bi(Z,ge){var Se;if(!ad(Z.instance.modifiers,"arrow","keepTogether"))return Z;var Ie=ge.element;if(typeof Ie=="string"){if(Ie=Z.instance.popper.querySelector(Ie),!Ie)return Z}else if(!Z.instance.popper.contains(Ie))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),Z;var Xe=Z.placement.split("-")[0],qe=Z.offsets,Je=qe.popper,nt=qe.reference,dt=["left","right"].indexOf(Xe)!==-1,Bt=dt?"height":"width",Ft=dt?"Top":"Left",It=Ft.toLowerCase(),Ut=dt?"left":"top",vn=dt?"bottom":"right",yn=ei(Ie)[Bt];nt[vn]-yn<Je[It]&&(Z.offsets.popper[It]-=Je[It]-(nt[vn]-yn)),nt[It]+yn>Je[vn]&&(Z.offsets.popper[It]+=nt[It]+yn-Je[vn]),Z.offsets.popper=Ot(Z.offsets.popper);var Mi=nt[It]+nt[Bt]/2-yn/2,na=z(Z.instance.popper),Zc=parseFloat(na["margin"+Ft]),ps=parseFloat(na["border"+Ft+"Width"]),Pl=Mi-Z.offsets.popper[It]-Zc-ps;return Pl=Math.max(Math.min(Je[Bt]-yn,Pl),0),Z.arrowElement=Ie,Z.offsets.arrow=(Se={},gt(Se,It,Math.round(Pl)),gt(Se,Ut,""),Se),Z}function Ls(Z){return Z==="end"?"start":Z==="start"?"end":Z}var ka=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Bs=ka.slice(3);function Rm(Z){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Se=Bs.indexOf(Z),Ie=Bs.slice(Se+1).concat(Bs.slice(0,Se));return ge?Ie.reverse():Ie}var ko={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function o1(Z,ge){if($t(Z.instance.modifiers,"inner")||Z.flipped&&Z.placement===Z.originalPlacement)return Z;var Se=Gt(Z.instance.popper,Z.instance.reference,ge.padding,ge.boundariesElement,Z.positionFixed),Ie=Z.placement.split("-")[0],Xe=ri(Ie),qe=Z.placement.split("-")[1]||"",Je=[];switch(ge.behavior){case ko.FLIP:Je=[Ie,Xe];break;case ko.CLOCKWISE:Je=Rm(Ie);break;case ko.COUNTERCLOCKWISE:Je=Rm(Ie,!0);break;default:Je=ge.behavior}return Je.forEach(function(nt,dt){if(Ie!==nt||Je.length===dt+1)return Z;Ie=Z.placement.split("-")[0],Xe=ri(Ie);var Bt=Z.offsets.popper,Ft=Z.offsets.reference,It=Math.floor,Ut=Ie==="left"&&It(Bt.right)>It(Ft.left)||Ie==="right"&&It(Bt.left)<It(Ft.right)||Ie==="top"&&It(Bt.bottom)>It(Ft.top)||Ie==="bottom"&&It(Bt.top)<It(Ft.bottom),vn=It(Bt.left)<It(Se.left),yn=It(Bt.right)>It(Se.right),Mi=It(Bt.top)<It(Se.top),na=It(Bt.bottom)>It(Se.bottom),Zc=Ie==="left"&&vn||Ie==="right"&&yn||Ie==="top"&&Mi||Ie==="bottom"&&na,ps=["top","bottom"].indexOf(Ie)!==-1,Pl=!!ge.flipVariations&&(ps&&qe==="start"&&vn||ps&&qe==="end"&&yn||!ps&&qe==="start"&&Mi||!ps&&qe==="end"&&na),qH=!!ge.flipVariationsByContent&&(ps&&qe==="start"&&yn||ps&&qe==="end"&&vn||!ps&&qe==="start"&&na||!ps&&qe==="end"&&Mi),tM=Pl||qH;(Ut||Zc||tM)&&(Z.flipped=!0,(Ut||Zc)&&(Ie=Je[dt+1]),tM&&(qe=Ls(qe)),Z.placement=Ie+(qe?"-"+qe:""),Z.offsets.popper=Et({},Z.offsets.popper,zi(Z.instance.popper,Z.offsets.reference,Z.placement)),Z=Ns(Z.instance.modifiers,Z,"flip"))}),Z}function od(Z){var ge=Z.offsets,Se=ge.popper,Ie=ge.reference,Xe=Z.placement.split("-")[0],qe=Math.floor,Je=["top","bottom"].indexOf(Xe)!==-1,nt=Je?"right":"bottom",dt=Je?"left":"top",Bt=Je?"width":"height";return Se[nt]<qe(Ie[dt])&&(Z.offsets.popper[dt]=qe(Ie[dt])-Se[Bt]),Se[dt]>qe(Ie[nt])&&(Z.offsets.popper[dt]=qe(Ie[nt])),Z}function l1(Z,ge,Se,Ie){var Xe=Z.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),qe=+Xe[1],Je=Xe[2];if(!qe)return Z;if(Je.indexOf("%")===0){var nt=void 0;switch(Je){case"%p":nt=Se;break;case"%":case"%r":default:nt=Ie}var dt=Ot(nt);return dt[ge]/100*qe}else if(Je==="vh"||Je==="vw"){var Bt=void 0;return Je==="vh"?Bt=Math.max(document.documentElement.clientHeight,window.innerHeight||0):Bt=Math.max(document.documentElement.clientWidth,window.innerWidth||0),Bt/100*qe}else return qe}function UH(Z,ge,Se,Ie){var Xe=[0,0],qe=["right","left"].indexOf(Ie)!==-1,Je=Z.split(/(\+|\-)/).map(function(Ft){return Ft.trim()}),nt=Je.indexOf(Sr(Je,function(Ft){return Ft.search(/,|\s/)!==-1}));Je[nt]&&Je[nt].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var dt=/\s*,\s*|\s+/,Bt=nt!==-1?[Je.slice(0,nt).concat([Je[nt].split(dt)[0]]),[Je[nt].split(dt)[1]].concat(Je.slice(nt+1))]:[Je];return Bt=Bt.map(function(Ft,It){var Ut=(It===1?!qe:qe)?"height":"width",vn=!1;return Ft.reduce(function(yn,Mi){return yn[yn.length-1]===""&&["+","-"].indexOf(Mi)!==-1?(yn[yn.length-1]=Mi,vn=!0,yn):vn?(yn[yn.length-1]+=Mi,vn=!1,yn):yn.concat(Mi)},[]).map(function(yn){return l1(yn,Ut,ge,Se)})}),Bt.forEach(function(Ft,It){Ft.forEach(function(Ut,vn){Rs(Ut)&&(Xe[It]+=Ut*(Ft[vn-1]==="-"?-1:1))})}),Xe}function zH(Z,ge){var Se=ge.offset,Ie=Z.placement,Xe=Z.offsets,qe=Xe.popper,Je=Xe.reference,nt=Ie.split("-")[0],dt=void 0;return Rs(+Se)?dt=[+Se,0]:dt=UH(Se,qe,Je,nt),nt==="left"?(qe.top+=dt[0],qe.left-=dt[1]):nt==="right"?(qe.top+=dt[0],qe.left+=dt[1]):nt==="top"?(qe.left+=dt[0],qe.top-=dt[1]):nt==="bottom"&&(qe.left+=dt[0],qe.top+=dt[1]),Z.popper=qe,Z}function $H(Z,ge){var Se=ge.boundariesElement||Pe(Z.instance.popper);Z.instance.reference===Se&&(Se=Pe(Se));var Ie=gn("transform"),Xe=Z.instance.popper.style,qe=Xe.top,Je=Xe.left,nt=Xe[Ie];Xe.top="",Xe.left="",Xe[Ie]="";var dt=Gt(Z.instance.popper,Z.instance.reference,ge.padding,Se,Z.positionFixed);Xe.top=qe,Xe.left=Je,Xe[Ie]=nt,ge.boundaries=dt;var Bt=ge.priority,Ft=Z.offsets.popper,It={primary:function(Ut){var vn=Ft[Ut];return Ft[Ut]<dt[Ut]&&!ge.escapeWithReference&&(vn=Math.max(Ft[Ut],dt[Ut])),gt({},Ut,vn)},secondary:function(Ut){var vn=Ut==="right"?"left":"top",yn=Ft[vn];return Ft[Ut]>dt[Ut]&&!ge.escapeWithReference&&(yn=Math.min(Ft[vn],dt[Ut]-(Ut==="right"?Ft.width:Ft.height))),gt({},vn,yn)}};return Bt.forEach(function(Ut){var vn=["left","top"].indexOf(Ut)!==-1?"primary":"secondary";Ft=Et({},Ft,It[vn](Ut))}),Z.offsets.popper=Ft,Z}function HH(Z){var ge=Z.placement,Se=ge.split("-")[0],Ie=ge.split("-")[1];if(Ie){var Xe=Z.offsets,qe=Xe.reference,Je=Xe.popper,nt=["bottom","top"].indexOf(Se)!==-1,dt=nt?"left":"top",Bt=nt?"width":"height",Ft={start:gt({},dt,qe[dt]),end:gt({},dt,qe[dt]+qe[Bt]-Je[Bt])};Z.offsets.popper=Et({},Je,Ft[Ie])}return Z}function GH(Z){if(!ad(Z.instance.modifiers,"hide","preventOverflow"))return Z;var ge=Z.offsets.reference,Se=Sr(Z.instance.modifiers,function(Ie){return Ie.name==="preventOverflow"}).boundaries;if(ge.bottom<Se.top||ge.left>Se.right||ge.top>Se.bottom||ge.right<Se.left){if(Z.hide===!0)return Z;Z.hide=!0,Z.attributes["x-out-of-boundaries"]=""}else{if(Z.hide===!1)return Z;Z.hide=!1,Z.attributes["x-out-of-boundaries"]=!1}return Z}function WH(Z){var ge=Z.placement,Se=ge.split("-")[0],Ie=Z.offsets,Xe=Ie.popper,qe=Ie.reference,Je=["left","right"].indexOf(Se)!==-1,nt=["top","left"].indexOf(Se)===-1;return Xe[Je?"left":"top"]=qe[Se]-(nt?Xe[Je?"width":"height"]:0),Z.placement=ri(ge),Z.offsets.popper=Ot(Xe),Z}var jH={shift:{order:100,enabled:!0,fn:HH},offset:{order:200,enabled:!0,fn:zH,offset:0},preventOverflow:{order:300,enabled:!0,fn:$H,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:od},arrow:{order:500,enabled:!0,fn:bi,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:o1,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:WH},hide:{order:800,enabled:!0,fn:GH},computeStyle:{order:850,enabled:!0,fn:Nm,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Yc,onLoad:Pm,gpuAcceleration:void 0}},KH={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:jH},Dm=function(){function Z(ge,Se){var Ie=this,Xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Lt(this,Z),this.scheduleUpdate=function(){return requestAnimationFrame(Ie.update)},this.update=O(this.update.bind(this)),this.options=Et({},Z.Defaults,Xe),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=ge&&ge.jquery?ge[0]:ge,this.popper=Se&&Se.jquery?Se[0]:Se,this.options.modifiers={},Object.keys(Et({},Z.Defaults.modifiers,Xe.modifiers)).forEach(function(Je){Ie.options.modifiers[Je]=Et({},Z.Defaults.modifiers[Je]||{},Xe.modifiers?Xe.modifiers[Je]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(Je){return Et({name:Je},Ie.options.modifiers[Je])}).sort(function(Je,nt){return Je.order-nt.order}),this.modifiers.forEach(function(Je){Je.enabled&&G(Je.onLoad)&&Je.onLoad(Ie.reference,Ie.popper,Ie.options,Je,Ie.state)}),this.update();var qe=this.options.eventsEnabled;qe&&this.enableEventListeners(),this.state.eventsEnabled=qe}return xt(Z,[{key:"update",value:function(){return vt.call(this)}},{key:"destroy",value:function(){return Bi.call(this)}},{key:"enableEventListeners",value:function(){return ur.call(this)}},{key:"disableEventListeners",value:function(){return Er.call(this)}}]),Z}();return Dm.Utils=(typeof window<"u"?window:J).PopperUtils,Dm.placements=ka,Dm.Defaults=KH,Dm})})(ue);var he=ue.exports;let xe=0,Te=0;function He(){xe++}function Be(){Te++}const ze={name:"Drop",emits:["mouseenter","mouseleave","click"],props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1},visible:{type:Boolean},classes:{type:Object,default:()=>{}},styles:{type:Object,default:()=>{}},transitionName:{type:String,default:"transition-drop"},boundariesElement:{default:"window"}},data(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{mergedStyle(){let r={};return this.width&&(r.minWidth=`${this.width}px`),this.transfer&&(r["z-index"]=1060+this.tIndex),Object.assign({},this.styles,r)},mergedClass(){return Object.assign({},this.classes,{[this.className]:this.className})}},methods:{update(){t.nextTick(()=>{this.popper?(this.popper.update(),this.popperStatus=!0):this.popper=new he(this.$parent.$refs.reference,this.$refs.drop,{eventsEnabled:this.eventsEnabled,placement:this.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:this.boundariesElement}},onCreate:()=>{this.resetTransformOrigin(),t.nextTick(this.popper.update())},onUpdate:()=>{this.resetTransformOrigin()}}),this.$parent.$options.name==="iSelect"&&(this.width=parseInt(N(this.$parent.$el,"width"))),this.tIndex=this.handleGetIndex()})},destroy(){this.popper&&setTimeout(()=>{this.popper&&!this.popperStatus&&(this.popper.popper.style.display="none",this.popper.destroy(),this.popper=null),this.popperStatus=!1},300)},resetTransformOrigin(){if(!this.popper)return;let r=this.popper.popper.getAttribute("x-placement"),o=r.split("-")[0],u=r.split("-")[1];r==="left"||r==="right"||(this.popper.popper.style.transformOrigin=o==="bottom"||o!=="top"&&u==="start"?"center top":"center bottom")},handleGetIndex(){return He(),xe},handleMouseenter(r){this.$emit("mouseenter",r)},handleMouseleave(r){this.$emit("mouseleave",r)},handleOnUpdatePopper(){this.update()},handleOnDestroyPopper(){this.destroy()},handleClick(r){this.$emit("click",r)}},beforeUnmount(){this.popper&&(this.popper.destroy(),this.popper=null)}};function tt(r,o,u,_,g,f){return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!u.transfer},[t.createVNode(t.Transition,{name:u.transitionName},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",t.mergeProps({class:["ivu-select-dropdown",f.mergedClass],ref:"drop",style:f.mergedStyle},r.$attrs,{onMouseenter:o[0]||(o[0]=(...k)=>f.handleMouseenter&&f.handleMouseenter(...k)),onMouseleave:o[1]||(o[1]=(...k)=>f.handleMouseleave&&f.handleMouseleave(...k)),onClick:o[2]||(o[2]=t.withModifiers((...k)=>f.handleClick&&f.handleClick(...k),["stop"]))}),[t.renderSlot(r.$slots,"default")],16),[[t.vShow,u.visible]])]),_:3},8,["name"])],8,["disabled"])}var je=c(ze,[["render",tt]]);function et(r){s&&typeof window.viewuiplus<"u"&&("langs"in viewuiplus||(viewuiplus.langs={}),viewuiplus.langs[r.i.locale]=r)}const bt={i:{locale:"zh-CN",select:{placeholder:"",noMatch:"",loading:""},table:{noDataText:"",noFilteredDataText:"",confirmFilter:"",resetFilter:"",clearFilter:"",sumText:""},datepicker:{selectDate:"",selectTime:"",startTime:"",endTime:"",clear:"",ok:"",datePanelLabel:"[yyyy] [m]",month:"",month1:"1 ",month2:"2 ",month3:"3 ",month4:"4 ",month5:"5 ",month6:"6 ",month7:"7 ",month8:"8 ",month9:"9 ",month10:"10 ",month11:"11 ",month12:"12 ",year:"",weekStartDay:"0",weeks:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},months:{m1:"1",m2:"2",m3:"3",m4:"4",m5:"5",m6:"6",m7:"7",m8:"8",m9:"9",m10:"10",m11:"11",m12:"12"}},transfer:{titles:{source:"",target:""},filterPlaceholder:"",notFoundText:""},modal:{okText:"",cancelText:""},poptip:{okText:"",cancelText:""},page:{prev:"",next:"",total:"",item:"",items:"",prev5:" 5 ",next5:" 5 ",page:"/",goto:"",p:""},rate:{star:"",stars:""},time:{before:"",after:"",just:"",seconds:"",minutes:"",hours:"",days:""},tree:{emptyText:""},image:{zoomIn:"",zoomOut:"",rotateLeft:"",rotateRight:"",fail:"",preview:""}}};et(bt);var _t=function(r){return at(r)&&!Rt(r)};function at(r){return!!r&&typeof r=="object"}function Rt(r){var o=Object.prototype.toString.call(r);return o==="[object RegExp]"||o==="[object Date]"||Oe(r)}var Yt=typeof Symbol=="function"&&Symbol.for,we=Yt?Symbol.for("react.element"):60103;function Oe(r){return r.$$typeof===we}function pe(r){return Array.isArray(r)?[]:{}}function Ve(r,o){return o.clone!==!1&&o.isMergeableObject(r)?ot(pe(r),r,o):r}function $e(r,o,u){return r.concat(o).map(function(_){return Ve(_,u)})}function Ze(r,o,u){var _={};return u.isMergeableObject(r)&&Object.keys(r).forEach(function(g){_[g]=Ve(r[g],u)}),Object.keys(o).forEach(function(g){!u.isMergeableObject(o[g])||!r[g]?_[g]=Ve(o[g],u):_[g]=ot(r[g],o[g],u)}),_}function ot(r,o,u){u=u||{},u.arrayMerge=u.arrayMerge||$e,u.isMergeableObject=u.isMergeableObject||_t;var _=Array.isArray(o),g=Array.isArray(r),f=_===g;return f?_?u.arrayMerge(r,o,u):Ze(r,o,u):Ve(o,u)}ot.all=function(r,o){if(!Array.isArray(r))throw new Error("first argument should be an array");return r.reduce(function(u,_){return ot(u,_,o)},{})};var hn=ot;const dn=/(%|)\{([0-9a-zA-Z_]+)\}/g;function xn(){function r(u,_){return Object.prototype.hasOwnProperty.call(u,_)}function o(u,..._){return _.length===1&&typeof _[0]=="object"&&(_=_[0]),(!_||!_.hasOwnProperty)&&(_={}),u===void 0?"":u.replace(dn,(g,f,k,O)=>{let G;return u[O-1]==="{"&&u[O+g.length]==="}"?k:(G=r(_,k)?_[k]:null,G??"")})}return o}const Zn=xn();let an=bt;const Ri={zh:bt};let ni=null,Sh={},Si=null,$p=function(){if(Reflect.has(this,"$t"))return this.$t(...arguments);if(Si&&Si.global)return Si.global.t(...arguments);if(Si&&Si.locale){if(!Sh[Si.locale]||ni!=Si.locale){Sh[Si.locale]=!0;let r=Si.getLocaleMessage(Si.locale)||{},o={};hn(o,Ri[Si.locale],r),an=o,Si.setLocaleMessage(Si.locale,o),ni=Si.locale}return Si.hlang(...arguments)}};const gl=function(r,o){let u=$p.apply(this,arguments);if(u!=null)return u;const _=r.split(".");let g=an;for(let f=0,k=_.length;f<k;f++){const O=_[f];if(u=g[O],f===k-1)return Zn(u,o);if(!u)return"";g=u}return""};var co={use:function(r){an=r||an},t:gl,i18n:function(r){Si=r}},Pn={methods:{t(...r){return gl.apply(this,r)}}},Ms={data(){return{globalConfig:{}}},created(){const r=t.getCurrentInstance();this.globalConfig=r.appContext.config.globalProperties.$VIEWUI}};const uo="ivu-select",Kv={name:"iSelectHead",mixins:[Pn,Ms],components:{Icon:E},emits:["on-input-focus","on-input-blur","on-keydown","on-enter","on-clear","on-query-change"],inject:["SelectInstance"],props:{disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},remote:{type:Boolean,default:!1},initialLabel:{type:[String,Number,Array]},values:{type:Array,default:()=>[]},clearable:{type:[Function,Boolean],default:!1},inputElementId:{type:String},placeholder:{type:String},queryProp:{type:String,default:""},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean},showCreateItem:{type:Boolean}},data(){return{prefixCls:uo,query:"",inputLength:20,remoteInitialLabel:this.initialLabel,preventRemoteCall:!1}},computed:{singleDisplayClasses(){const{filterable:r,multiple:o,showPlaceholder:u}=this;return[{[uo+"-head-with-prefix"]:this.showPrefix,[uo+"-placeholder"]:u&&!r,[uo+"-selected-value"]:!u&&!o&&!r}]},singleDisplayValue(){return this.multiple&&this.values.length>0||this.filterable?"":`${this.selectedSingle}`||this.localePlaceholder},showPlaceholder(){let r=!1;if(this.multiple)!this.values.length>0&&(r=!0);else{const o=this.values[0];(typeof o>"u"||String(o).trim()==="")&&(r=!this.remoteInitialLabel)}return r},resetSelect(){return!this.showPlaceholder&&this.clearable},inputStyle(){let r={};return this.multiple&&(this.showPlaceholder?r.width="100%":r.width=`${this.inputLength}px`),r},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},selectedSingle(){const r=this.values[0];return r?r.label:this.remoteInitialLabel||""},selectedMultiple(){return(this.multiple?this.values:[]).filter((r,o)=>this.maxTagCount===void 0||o<this.maxTagCount)},headCls(){return{[`${uo}-head-flex`]:this.filterable&&this.showPrefix}},arrowType(){const r=this.globalConfig;let o="ios-arrow-down";return r&&(r.select.customArrow?o="":r.select.arrow&&(o=r.select.arrow)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.select.customArrow&&(o=r.select.customArrow),o},showPrefix(){const r=this.$slots.prefix&&this.$slots.prefix();let o=!1;return r&&(o=r[0].children.length>0),o||this.prefix},arrowSize(){const r=this.globalConfig;let o="";return r&&r.select.arrowSize&&(o=r.select.arrowSize),o}},methods:{onInputFocus(){this.$emit("on-input-focus")},onInputBlur(){this.showCreateItem||(this.values.length||(this.query=""),this.$emit("on-input-blur"))},removeTag(r){if(this.disabled)return!1;this.SelectInstance.handleOnSelectSelected(r)},resetInputState(){this.inputLength=this.$refs.input.value.length*12+20,this.$emit("on-keydown")},handleInputDelete(r){const o=r.target.value;this.multiple&&this.selectedMultiple.length&&this.query===""&&o===""&&this.removeTag(this.selectedMultiple[this.selectedMultiple.length-1])},handleInputEnter(r){this.$emit("on-enter"),this.showCreateItem&&r.stopPropagation()},onHeaderClick(r){this.filterable&&r.target===this.$el&&this.$refs.input.focus()},onClear(){this.$emit("on-clear")}},watch:{values([r]){if(this.filterable){if(this.preventRemoteCall=!0,this.multiple){this.query="",this.preventRemoteCall=!1;return}typeof r>"u"||r===""||r===null?this.query="":this.query=r.label,t.nextTick(()=>this.preventRemoteCall=!1)}},query(r){if(this.preventRemoteCall){this.preventRemoteCall=!1;return}this.$emit("on-query-change",r)},queryProp(r){r!==this.query&&(this.query=r)}}},qv={key:1,class:"ivu-tag ivu-tag-checked"},Xv={class:"ivu-tag-text ivu-select-max-tag"},se=["id","disabled","placeholder"];function Ae(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{onClick:o[6]||(o[6]=(...O)=>f.onHeaderClick&&f.onHeaderClick(...O)),class:t.normalizeClass(f.headCls)},[f.showPrefix?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([g.prefixCls+"-prefix"])},[t.renderSlot(r.$slots,"prefix",{},()=>[u.prefix?(t.openBlock(),t.createBlock(k,{key:0,type:u.prefix},null,8,["type"])):t.createCommentVNode("",!0)])],2)):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.selectedMultiple,(O,G)=>(t.openBlock(),t.createElementBlock("div",{class:"ivu-tag ivu-tag-checked",key:G},[t.createElementVNode("span",{class:t.normalizeClass(["ivu-tag-text",{"ivu-select-multiple-tag-hidden":O.disabled}])},t.toDisplayString(O.tag!==void 0?O.tag:O.label),3),O.disabled?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(k,{key:0,type:"ios-close",onClick:t.withModifiers(z=>f.removeTag(O),["stop"])},null,8,["onClick"]))]))),128)),u.maxTagCount!==void 0&&u.values.length>u.maxTagCount?(t.openBlock(),t.createElementBlock("div",qv,[t.createElementVNode("span",Xv,[u.maxTagPlaceholder?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(u.maxTagPlaceholder(u.values.length-u.maxTagCount)),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode("+ "+t.toDisplayString(u.values.length-u.maxTagCount)+"...",1)],64))])])):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("span",{class:t.normalizeClass(f.singleDisplayClasses)},t.toDisplayString(f.singleDisplayValue),3),[[t.vShow,f.singleDisplayValue]]),u.filterable?t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:2,id:u.inputElementId,type:"text","onUpdate:modelValue":o[0]||(o[0]=O=>g.query=O),disabled:u.disabled,class:t.normalizeClass([g.prefixCls+"-input"]),placeholder:f.showPlaceholder?f.localePlaceholder:"",style:t.normalizeStyle(f.inputStyle),autocomplete:"off",spellcheck:"false",onKeydown:[o[1]||(o[1]=(...O)=>f.resetInputState&&f.resetInputState(...O)),o[2]||(o[2]=t.withKeys((...O)=>f.handleInputDelete&&f.handleInputDelete(...O),["delete"])),o[3]||(o[3]=t.withKeys((...O)=>f.handleInputEnter&&f.handleInputEnter(...O),["enter"]))],onFocus:o[4]||(o[4]=(...O)=>f.onInputFocus&&f.onInputFocus(...O)),onBlur:o[5]||(o[5]=(...O)=>f.onInputBlur&&f.onInputBlur(...O)),ref:"input"},null,46,se)),[[t.vModelText,g.query]]):t.createCommentVNode("",!0),f.resetSelect?(t.openBlock(),t.createBlock(k,{key:3,type:"ios-close-circle",class:t.normalizeClass([g.prefixCls+"-arrow"]),onClick:t.withModifiers(f.onClear,["stop"])},null,8,["class","onClick"])):t.createCommentVNode("",!0),!f.resetSelect&&!u.remote?(t.openBlock(),t.createBlock(k,{key:4,type:f.arrowType,custom:f.customArrowType,size:f.arrowSize,class:t.normalizeClass([g.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])):t.createCommentVNode("",!0)],2)}var Ue=c(Kv,[["render",Ae]]);const Le="click",De=Object.create(null),lt=Object.create(null),Tt=[De,lt],Pt=function(r,o,u){const{target:_}=u,g=function(k){const{el:O}=k;if(O!==_&&!O.contains(_)){const{binding:G}=k;G.modifiers.stop&&u.stopPropagation(),G.modifiers.prevent&&u.preventDefault(),G.value.call(r,u)}},f=function(k){return o[k].forEach(g)};Object.keys(o).forEach(f)},Vt=function(r){Pt(this,De,r)},Kt=function(r){Pt(this,lt,r)},Zt=function(r){return r?Vt:Kt},en=Object.defineProperties({},{$_captureInstances:{value:De},$_nonCaptureInstances:{value:lt},$_onCaptureEvent:{value:Vt},$_onNonCaptureEvent:{value:Kt},beforeMount:{value:function(r,o){if(typeof o.value!="function")throw new TypeError("Binding value must be a function.");let u;const _=o.modifiers;_.click?u="click":_.mousedown?u="mousedown":_.touchstart?u="touchstart":u=Le;const g=o.arg,f={...o,modifiers:{capture:!1,prevent:!1,stop:!1,...o.modifiers}},k=g?De:lt;Array.isArray(k[u])||(k[u]=[]),k[u].push({el:r,binding:f})===1&&typeof document=="object"&&document&&document.addEventListener(u,Zt(g),g)}},unmounted:{value:function(r){const o=function(_){return _.el!==r},u=function(_){const g=Object.keys(_);if(g.length){const f=_===De,k=function(O){const G=_[O].filter(o);G.length?_[O]=G:(typeof document=="object"&&document&&document.removeEventListener(O,Zt(f),f),delete _[O])};g.forEach(k)}};Tt.forEach(u)}},version:{enumerable:!0,value:"3.7.1"}});var tn={inject:{FormInstance:{default:""},FormItemInstance:{default:null}},computed:{itemDisabled(){let r=this.disabled;return!r&&this.FormInstance&&(r=this.FormInstance.disabled),r?!0:null}},methods:{handleFormItemChange(r,o){this.FormItemInstance&&(r==="blur"?this.FormItemInstance.formBlur(o):r==="change"&&this.FormItemInstance.formChange(o))}}};const On="ivu-select",rr=(r,o,u)=>{const _=JSON.stringify(r),g=JSON.stringify(o),f=JSON.stringify(u.map(k=>k.value));return _!==g||_!==f||f!==g},us=300,En={name:"iSelect",mixins:[Pn,tn],components:{Drop:je,SelectHead:Ue,Icon:E},directives:{clickOutside:en},emits:["on-set-default-options","on-clear","on-clickoutside","on-select","on-create","on-change","on-query-change","on-open-change","update:modelValue"],provide(){return{SelectInstance:this}},props:{modelValue:{type:[String,Number,Array],default:""},label:{type:[String,Number,Array],default:""},defaultLabel:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},filterable:{type:Boolean,default:!1},filterMethod:{type:Function},remoteMethod:{type:Function},loading:{type:Boolean,default:!1},loadingText:{type:String},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},labelInValue:{type:Boolean,default:!1},notFoundText:{type:String},placement:{validator(r){return w(r,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},autoComplete:{type:Boolean,default:!1},name:{type:String},elementId:{type:String},transferClassName:{type:String},prefix:{type:String},maxTagCount:{type:Number},maxTagPlaceholder:{type:Function},allowCreate:{type:Boolean,default:!1},capture:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return r.$VIEWUI?r.$VIEWUI.capture:!0}},filterByLabel:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1},hideNotFound:{type:Boolean,default:!1}},mounted(){if(!this.remote&&this.slotOptions.length>0&&(this.values=this.getInitialValue().map(r=>typeof r!="number"&&!r?null:this.getOptionData(r)).filter(Boolean)),this.checkUpdateStatus(),this.remote&&this.modelValue&&this.defaultLabel){if(!this.multiple)this.query=this.defaultLabel,this.modelValue&&this.defaultLabel&&this.values.push({label:this.defaultLabel,value:this.modelValue});else if(this.multiple&&this.defaultLabel instanceof Array&&this.modelValue.length===this.defaultLabel.length){const r=this.modelValue.map((o,u)=>({value:o,label:this.defaultLabel[u]}));setTimeout(()=>{this.values=r})}}},data(){return{prefixCls:On,values:[],dropDownWidth:0,visible:!1,focusIndex:-1,isFocused:!1,query:"",initialLabel:this.label,hasMouseHoverHead:!1,slotOptions:[],caretPosition:-1,lastRemoteQuery:"",unchangedQuery:!0,hasExpectedValue:!1,isTyping:!1,preventRemoteCall:!1,filterQueryChange:!1,slotOptionsMap:new Map,isLocking:!1}},computed:{classes(){return[`${On}`,{[`${On}-visible`]:this.visible,[`${On}-disabled`]:this.itemDisabled,[`${On}-multiple`]:this.multiple,[`${On}-single`]:!this.multiple,[`${On}-${this.size}`]:!!this.size}]},dropdownCls(){return{[On+"-dropdown-transfer"]:this.transfer,[On+"-multiple"]:this.multiple&&this.transfer,"ivu-auto-complete":this.autoComplete,[this.transferClassName]:this.transferClassName}},selectionCls(){return{[`${On}-selection`]:!this.autoComplete,[`${On}-selection-focused`]:this.isFocused}},localeNotFoundText(){return typeof this.notFoundText>"u"?this.t("i.select.noMatch"):this.notFoundText},localeLoadingText(){return typeof this.loadingText>"u"?this.t("i.select.loading"):this.loadingText},showCreateItem(){let r=!1;const{allowCreate:o,query:u,slotOptions:_}=this;return o&&u!==""&&(r=!0,(_||[]).find(g=>g.proxy&&g.proxy.showLabel===u)&&(r=!1)),r},transitionName(){return this.placement==="bottom"?"slide-up":"slide-down"},dropVisible(){let r=!0;const o=this.slotOptions.length===0;return!this.loading&&this.remote&&this.query===""&&o&&(r=!1),this.autoComplete&&o&&(r=!1),this.visible&&r},showNotFoundLabel(){const{loading:r,remote:o,slotOptions:u,hideNotFound:_}=this,g=u||[],f=g.find(k=>k.proxy.isShow);return(g.length===0||!f)&&(!o||o&&!r)&&!_},publicValue(){return this.multiple?this.values.map(r=>r.value):(this.values[0]||{}).value},canBeCleared(){const r=this.hasMouseHoverHead,o=!this.multiple&&!this.itemDisabled&&this.clearable;return r&&o&&this.reset},selectTabindex(){return this.itemDisabled||this.filterable?-1:0},remote(){return typeof this.remoteMethod=="function"}},methods:{setQuery(r){if(r){this.onQueryChange(r);return}r===null&&(this.onQueryChange(""),this.values=[],this.lastRemoteQuery="")},clearSingleSelect(){this.multiple||this.$emit("update:modelValue",""),this.$emit("on-clear"),this.hideMenu(),this.clearable&&this.reset()},getOptionData(r){const o=this.slotOptions.find(({props:g})=>g.value===r);if(!o)return null;const{optionLabel:u,disabled:_}=o.proxy||{};return{value:r,label:u,disabled:_}},getInitialValue(){const{multiple:r,remote:o,modelValue:u}=this;let _=Array.isArray(u)?u:[u];if(!r&&(typeof _[0]>"u"||String(_[0]).trim()===""&&!Number.isFinite(_[0]))&&(_=[]),o&&!r&&u){const g=this.getOptionData(u);this.query=g?g.label:String(u)}return _.filter(g=>!!g||g===0)},validateOption({children:r,elm:o,propsData:u}){const _=u.value,g=u.label||"",f=o&&o.textContent||(r||[]).reduce((G,z)=>{const j=z.elm?z.elm.textContent:z.text;return`${G} ${j}`},"")||"",k=this.filterByLabel?[g].toString():[_,g,f].toString(),O=this.query.toLowerCase().trim();return k.toLowerCase().includes(O)},toggleMenu(r,o){if(this.itemDisabled)return!1;this.visible=typeof o<"u"?o:!this.visible,this.visible&&(this.dropDownWidth=this.$el.getBoundingClientRect().width,this.$refs.dropdown.handleOnUpdatePopper())},hideMenu(){this.toggleMenu(null,!1),this.isTyping=!1,setTimeout(()=>this.unchangedQuery=!0,us)},onClickOutside(r){if(this.visible){if(r.type==="mousedown"){r.preventDefault();return}if(this.transfer){const o=this.$refs.dropdown.$refs.drop;if(o===r.target||o.contains(r.target))return}if(this.filterable){const o=this.$el.querySelector('input[type="text"]');this.caretPosition=o.selectionStart,t.nextTick(()=>{const u=this.caretPosition===-1?o.value.length:this.caretPosition;o.setSelectionRange(u,u)})}this.autoComplete||r.stopPropagation(),r.preventDefault(),this.hideMenu(),this.isFocused=!0,this.$emit("on-clickoutside",r)}else this.caretPosition=-1,this.isFocused=!1},reset(){this.query="",this.focusIndex=-1,this.unchangedQuery=!0,this.values=[],this.filterQueryChange=!1},handleKeydown(r){const o=r.key||r.code,u=r.keyCode||r.which;if(!(o==="Backspace"||u===8))if(this.visible){if(r.preventDefault(),o==="Tab"&&r.stopPropagation(),o==="Escape"&&(r.stopPropagation(),this.hideMenu()),o==="ArrowUp"&&this.navigateOptions(-1),o==="ArrowDown"&&this.navigateOptions(1),o==="Enter"){if(this.focusIndex===-1)return this.hideMenu();const _=this.slotOptions[this.focusIndex];if(_){const g=this.getOptionData(_.props.value);this.onOptionClick(g)}else this.hideMenu()}}else["ArrowUp","ArrowDown"].includes(r.key)&&this.toggleMenu(null,!0)},navigateOptions(r){const o=this.slotOptions,u=o.length-1;if(u<0)return;let _=this.focusIndex+r;_<0&&(_=u),_>u&&(_=0);let g,f=null;if(r>0){g=-1;for(let k=0;k<o.length;k++){const{proxy:O}=o[k];if(!O.disabled&&(g=k),O.isShow&&f===null)f=k;else if(!O.isShow){g=k;continue}if(g>=_)break}}else{g=o.length;for(let k=u;k>=0;k--){const{proxy:O}=o[k];if(!O.disabled&&(g=k),O.isShow&&f===null)f=k;else if(!O.isShow){g=k;continue}if(g<=_)break}}_=o[g].proxy.isShow?g:f,this.focusIndex=_},onOptionClick(r){if(this.multiple?(this.remote?this.lastRemoteQuery=this.lastRemoteQuery||this.query:this.lastRemoteQuery="",this.values.find(({value:o})=>o===r.value)?this.values=this.values.filter(({value:o})=>o!==r.value):this.values=this.values.concat(r),this.isFocused=!0):(this.query=String(r.label).trim(),this.values=[r],this.lastRemoteQuery="",this.hideMenu()),this.focusIndex=this.slotOptions.findIndex(o=>o?o.props.value===r.value:!1),this.filterable){const o=this.$el.querySelector('input[type="text"]');this.autoComplete||t.nextTick(()=>o.focus())}this.$emit("on-select",r),this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.filterQueryChange=!1},us)},onQueryChange(r){if(this.isTyping=!0,r.length>0&&r!==this.query)if(s&&this.autoComplete){let o=document.hasFocus&&document.hasFocus()&&document.activeElement===this.$el.querySelector("input");this.visible=o}else this.visible=!0;this.query=r,this.unchangedQuery=this.visible,this.filterQueryChange=!0},toggleHeaderFocus({type:r}){this.itemDisabled||(this.isFocused=r==="focus")},checkUpdateStatus(){this.getInitialValue().length>0&&this.slotOptions.length===0&&(this.hasExpectedValue=!0)},handleCreateItem(){if(this.allowCreate&&this.query!==""&&this.showCreateItem){const r=this.query;this.$emit("on-create",r),this.query="";const o={value:r,label:r,tag:void 0};this.$refs.dropdown.handleOnUpdatePopper(),setTimeout(()=>{this.onOptionClick(o)})}},handleOnSelectSelected(r){this.onOptionClick(r)},focus(){this.filterable&&(this.$refs.selectHead.$refs.input.focus(),this.toggleMenu())},lazyUpdateValue(r){const{getInitialValue:o,isLocking:u,defaultLabel:_,remote:g,modelValue:f,values:k}=this,O=!!(_&&_.length);(f&&f.length||k.length||O)&&g&&r||u||(this.isLocking=!0,t.nextTick(()=>{this.values=o().map(this.getOptionData).filter(Boolean),this.isLocking=!1}))}},watch:{modelValue(r){const{publicValue:o,values:u}=this;this.checkUpdateStatus(),r===""?(this.values=[],this.query=""):rr(r,o,u)&&(this.lazyUpdateValue(),this.multiple||this.handleFormItemChange("change",this.publicValue))},values(r,o){const u=JSON.stringify(r),_=JSON.stringify(o);let g=this.publicValue;if(u!==_&&g!==this.modelValue){let f=this.publicValue;this.labelInValue&&(this.multiple?f=this.values:f=this.values[0]),(Array.isArray(g)&&!g.length&&this.modelValue===null||g===void 0&&this.modelValue===null)&&(g=null),this.$emit("update:modelValue",g),this.$emit("on-change",f),this.handleFormItemChange("change",f)}},query(r){this.focusIndex=-1,this.$emit("on-query-change",r);const{remoteMethod:o,lastRemoteQuery:u}=this,_=o&&r!==""&&(r!==u||!u)&&!this.preventRemoteCall;if(this.preventRemoteCall=!1,_){const g=this.remoteMethod(r);this.initialLabel="",g&&g.then&&g.then(f=>{f&&(this.options=f)})}this.visible&&this.$refs.dropdown.handleOnUpdatePopper(),r!==""&&this.remote&&(this.lastRemoteQuery=r)},isFocused(r){(this.filterable?this.$el.querySelector('input[type="text"]'):this.$el)[this.isFocused?"focus":"blur"]();const[o]=this.values;if(o&&this.filterable&&!this.multiple&&!r){const u=String(o.label||o.value).trim();u&&this.query!==u&&(this.preventRemoteCall=!0,this.query=u)}},focusIndex(r){if(!(r<0||this.autoComplete)&&this.slotOptions[r]){const o=this.slotOptions[r].proxy.$el,u=this.$refs.dropdown.$refs.drop;let _=o.getBoundingClientRect().bottom-u.getBoundingClientRect().bottom,g=o.getBoundingClientRect().top-u.getBoundingClientRect().top;_>0&&(u.scrollTop+=_),g<0&&(u.scrollTop+=g)}},dropVisible(r){r?this.$refs.dropdown.handleOnUpdatePopper():this.$refs.dropdown.handleOnDestroyPopper()},visible(r){this.$emit("on-open-change",r)}}},Jt=["tabindex"],vl=["name","value"];function $n(r,o,u,_,g,f){const k=t.resolveComponent("select-head"),O=t.resolveComponent("Icon"),G=t.resolveComponent("Drop"),z=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass(f.selectionCls),tabindex:f.selectTabindex,onBlur:o[2]||(o[2]=(...j)=>f.toggleHeaderFocus&&f.toggleHeaderFocus(...j)),onFocus:o[3]||(o[3]=(...j)=>f.toggleHeaderFocus&&f.toggleHeaderFocus(...j)),onClick:o[4]||(o[4]=(...j)=>f.toggleMenu&&f.toggleMenu(...j)),onKeydown:[o[5]||(o[5]=t.withKeys((...j)=>f.handleKeydown&&f.handleKeydown(...j),["esc"])),o[6]||(o[6]=t.withKeys((...j)=>f.handleKeydown&&f.handleKeydown(...j),["enter"])),o[7]||(o[7]=t.withKeys(t.withModifiers((...j)=>f.handleKeydown&&f.handleKeydown(...j),["prevent"]),["up"])),o[8]||(o[8]=t.withKeys(t.withModifiers((...j)=>f.handleKeydown&&f.handleKeydown(...j),["prevent"]),["down"])),o[9]||(o[9]=t.withKeys((...j)=>f.handleKeydown&&f.handleKeydown(...j),["tab"])),o[10]||(o[10]=t.withKeys((...j)=>f.handleKeydown&&f.handleKeydown(...j),["delete"]))],onMouseenter:o[11]||(o[11]=j=>g.hasMouseHoverHead=!0),onMouseleave:o[12]||(o[12]=j=>g.hasMouseHoverHead=!1)},[t.renderSlot(r.$slots,"input",{},()=>[t.createElementVNode("input",{type:"hidden",name:u.name,value:f.publicValue},null,8,vl),t.createVNode(k,{ref:"selectHead",filterable:u.filterable,multiple:u.multiple,values:g.values,clearable:f.canBeCleared,prefix:u.prefix,disabled:r.itemDisabled,remote:f.remote,"input-element-id":u.elementId,"initial-label":g.initialLabel,placeholder:u.placeholder,"query-prop":g.query,"max-tag-count":u.maxTagCount,"max-tag-placeholder":u.maxTagPlaceholder,"allow-create":u.allowCreate,"show-create-item":f.showCreateItem,onOnQueryChange:f.onQueryChange,onOnInputFocus:o[0]||(o[0]=j=>g.isFocused=!0),onOnInputBlur:o[1]||(o[1]=j=>g.isFocused=!1),onOnClear:f.clearSingleSelect,onOnEnter:f.handleCreateItem},{prefix:t.withCtx(()=>[t.renderSlot(r.$slots,"prefix")]),_:3},8,["filterable","multiple","values","clearable","prefix","disabled","remote","input-element-id","initial-label","placeholder","query-prop","max-tag-count","max-tag-placeholder","allow-create","show-create-item","onOnQueryChange","onOnClear","onOnEnter"])])],42,Jt),t.createVNode(G,{ref:"dropdown",classes:f.dropdownCls,visible:f.dropVisible,placement:u.placement,eventsEnabled:u.eventsEnabled,transfer:u.transfer,"transition-name":"transition-drop"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls+"-not-found"])},[t.createElementVNode("li",null,t.toDisplayString(f.localeNotFoundText),1)],2),[[t.vShow,f.showNotFoundLabel&&!u.allowCreate]]),!f.remote||f.remote&&!u.loading?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass(g.prefixCls+"-dropdown-list")},[f.showCreateItem?(t.openBlock(),t.createElementBlock("li",{key:0,class:t.normalizeClass(g.prefixCls+"-item"),onClick:o[13]||(o[13]=(...j)=>f.handleCreateItem&&f.handleCreateItem(...j))},[t.createTextVNode(t.toDisplayString(g.query)+" ",1),t.createVNode(O,{type:"md-return-left",class:t.normalizeClass(g.prefixCls+"-item-enter")},null,8,["class"])],2)):t.createCommentVNode("",!0),t.renderSlot(r.$slots,"default")],2)):(t.openBlock(),t.createElementBlock("ul",{key:1,class:t.normalizeClass(g.prefixCls+"-dropdown-list")},[f.showCreateItem?(t.openBlock(),t.createElementBlock("li",{key:0,class:t.normalizeClass(g.prefixCls+"-item"),onClick:o[14]||(o[14]=(...j)=>f.handleCreateItem&&f.handleCreateItem(...j))},[t.createTextVNode(t.toDisplayString(g.query)+" ",1),t.createVNode(O,{type:"md-return-left",class:t.normalizeClass(g.prefixCls+"-item-enter")},null,8,["class"])],2)):t.createCommentVNode("",!0)],2)),t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls+"-loading"])},t.toDisplayString(f.localeLoadingText),3),[[t.vShow,u.loading]])]),_:3},8,["classes","visible","placement","eventsEnabled","transfer"])],2)),[[z,f.onClickOutside,u.capture],[z,f.onClickOutside,u.capture,{mousedown:!0}],[z,f.onClickOutside,u.capture,{touchstart:!0}]])}var sr=c(En,[["render",$n]]);const yl="ivu-select-item",bl={name:"iOption",componentName:"select-item",mixins:[tn],emits:["on-select-selected"],inject:{SelectInstance:{default:null},OptionGroupInstance:{default:null}},props:{value:{type:[String,Number],required:!0},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},tag:{type:[String,Number]}},data(){return{searchLabel:"",autoComplete:!1,id:te(6),instance:null}},computed:{classes(){return[`${yl}`,{[`${yl}-disabled`]:this.itemDisabled,[`${yl}-selected`]:this.selected&&!this.autoComplete,[`${yl}-focus`]:this.isFocused}]},showLabel(){return this.label?this.label:this.value},optionLabel(){return this.label||this.$el&&this.$el.textContent},isFocused(){const r=this.SelectInstance;let o=r.slotOptions||[];const u=r.focusIndex,_=r.$slots.default;if(this.autoComplete&&_){o=[];let f=_();for(;f.length>0;){const k=f.shift();k.type&&typeof k.type=="object"&&k.type.name==="iOption"?o.push(k):Array.isArray(k.children)&&(f=f.concat(k.children))}}const g=o[u];return g&&g.props&&g.props.value===this.value},isShow(){const r=this.SelectInstance,o=r.filterable,u=r.query.toLowerCase().trim(),_=r.filterByLabel,g=r.slotOptionsMap,{props:f}=g.get(this.value)||{props:{}},k=this.label||this.$el&&this.$el.textContent;let O=(k||f.value||"").toLowerCase();_&&(O=(k||"").toLowerCase());const G=O.includes(u);return!o||o&&(G||!r.filterQueryChange)||L(r.remoteMethod)==="function"},selected(){return(this.SelectInstance.values||[]).find(r=>r.value===this.value)}},methods:{select(){if(this.itemDisabled)return!1;this.SelectInstance.handleOnSelectSelected({value:this.value,label:this.optionLabel,tag:this.tag})},addOption(){const r=this.SelectInstance,o=this.OptionGroupInstance,{id:u,value:_,instance:g}=this;if(o&&o.optionList.push({...g,id:u,tag:"option"}),r){r.slotOptions.push({...g,id:u,tag:"option"}),r.slotOptionsMap.set(_,g);const{modelValue:f}=r;(f&&f.length||L(f)==="number")&&r.lazyUpdateValue(!0)}},removeOption(){const r=this.OptionGroupInstance,o=this.SelectInstance,{id:u,value:_}=this;if(r){const g=r.optionList.findIndex(f=>f.id===u);g!==-1&&r.optionList.splice(g,1)}if(o){const g=this.SelectInstance,f=g.slotOptions.findIndex(k=>k.id===u);f!==-1&&g.slotOptions.splice(f,1),g.slotOptionsMap.has(_)&&g.slotOptionsMap.delete(_)}}},created(){this.instance=t.getCurrentInstance()},mounted(){this.addOption();const r=B(this,"iSelect");r&&(this.autoComplete=r.autoComplete)},beforeUnmount(){t.nextTick(()=>{this.removeOption(),this.instance=null})}};function Eh(r,o,u,_,g,f){return t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.classes),onClick:o[0]||(o[0]=t.withModifiers((...k)=>f.select&&f.select(...k),["stop"])),onMousedown:o[1]||(o[1]=t.withModifiers(()=>{},["prevent"]))},[t.renderSlot(r.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(f.showLabel),1)])],34)),[[t.vShow,f.isShow]])}var ii=c(bl,[["render",Eh]]);const Xs=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,Mh=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];let ji={},wr;function Yv(r,o=!1){if(!s)return;const u=r.getAttribute("id")||r.getAttribute("data-reactid")||r.getAttribute("name");if(o&&ji[u])return ji[u];const _=window.getComputedStyle(r),g=_.getPropertyValue("box-sizing")||_.getPropertyValue("-moz-box-sizing")||_.getPropertyValue("-webkit-box-sizing"),f=parseFloat(_.getPropertyValue("padding-bottom"))+parseFloat(_.getPropertyValue("padding-top")),k=parseFloat(_.getPropertyValue("border-bottom-width"))+parseFloat(_.getPropertyValue("border-top-width")),O={sizingStyle:Mh.map(G=>`${G}:${_.getPropertyValue(G)}`).join(";"),paddingSize:f,borderSize:k,boxSizing:g};return o&&u&&(ji[u]=O),O}function Hp(r,o=null,u=null,_=!1){s&&!wr&&(wr=document.createElement("textarea"),document.body.appendChild(wr)),r.getAttribute("wrap")?wr.setAttribute("wrap",r.getAttribute("wrap")):wr.removeAttribute("wrap");let{paddingSize:g,borderSize:f,boxSizing:k,sizingStyle:O}=Yv(r,_);wr.setAttribute("style",`${O};${Xs}`),wr.value=r.value||r.placeholder||"";let G=Number.MIN_SAFE_INTEGER,z=Number.MAX_SAFE_INTEGER,j=wr.scrollHeight,ae;if(k==="border-box"?j=j+f:k==="content-box"&&(j=j-g),o!==null||u!==null){wr.value=" ";let _e=wr.scrollHeight-g;o!==null&&(G=_e*o,k==="border-box"&&(G=G+g+f),j=Math.max(G,j)),u!==null&&(z=_e*u,k==="border-box"&&(z=z+g+f),ae=j>z?"":"hidden",j=Math.min(z,j))}return u||(ae="hidden"),{height:`${j}px`,minHeight:`${G}px`,maxHeight:`${z}px`,overflowY:ae}}const yi="ivu-input",TN={name:"Input",mixins:[tn],emits:["on-enter","on-search","on-keydown","on-keypress","on-keyup","on-click","on-focus","on-blur","on-change","on-input-change","on-clear","update:modelValue"],props:{type:{validator(r){return w(r,["text","textarea","password","url","email","date","number","tel"])},default:"text"},modelValue:{type:[String,Number],default:""},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator(r){return w(r,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data(){return{currentValue:this.modelValue,prefixCls:yi,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType(){let r=this.type;return r==="password"&&this.password&&this.showPassword&&(r="text"),r},prepend(){let r=!1;return this.type!=="textarea"&&(r=this.$slots.prepend!==void 0),r},append(){let r=!1;return this.type!=="textarea"&&(r=this.$slots.append!==void 0),r},showPrefix(){let r=!1;return this.type!=="textarea"&&(r=this.prefix!==""||this.$slots.prefix!==void 0),r},showSuffix(){let r=!1;return this.type!=="textarea"&&(r=this.suffix!==""||this.$slots.suffix!==void 0),r},wrapClasses(){return[`${yi}-wrapper`,{[`${yi}-wrapper-${this.size}`]:!!this.size,[`${yi}-type-${this.type}`]:this.type,[`${yi}-group`]:this.prepend||this.append||this.search&&this.enterButton,[`${yi}-group-${this.size}`]:(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size,[`${yi}-group-with-prepend`]:this.prepend,[`${yi}-group-with-append`]:this.append||this.search&&this.enterButton,[`${yi}-hide-icon`]:this.append,[`${yi}-with-search`]:this.search&&this.enterButton,[`${yi}-wrapper-disabled`]:this.itemDisabled}]},inputClasses(){return[`${yi}`,{[`${yi}-${this.size}`]:!!this.size,[`${yi}-disabled`]:this.itemDisabled,[`${yi}-no-border`]:!this.border,[`${yi}-with-prefix`]:this.showPrefix,[`${yi}-with-suffix`]:this.showSuffix||this.search&&this.enterButton===!1}]},textareaClasses(){return[`${yi}`,{[`${yi}-disabled`]:this.itemDisabled,[`${yi}-no-border`]:!this.border}]},upperLimit(){return this.maxlength},textLength(){return typeof this.modelValue=="number"?String(this.modelValue).length:(this.modelValue||"").length},clearableStyles(){const r={};let o=this.clearableIconOffset;return o&&(r.transform=`translateX(-${o}px)`),r}},methods:{handleEnter(r){this.$emit("on-enter",r),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown(r){this.$emit("on-keydown",r)},handleKeypress(r){this.$emit("on-keypress",r)},handleKeyup(r){this.$emit("on-keyup",r)},handleIconClick(r){this.$emit("on-click",r)},handleFocus(r){this.$emit("on-focus",r)},handleBlur(r){this.$emit("on-blur",r),B(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},handleComposition(r){r.type==="compositionstart"&&(this.isOnComposition=!0),r.type==="compositionend"&&(this.isOnComposition=!1,this.handleInput(r))},handleInput(r){if(this.isOnComposition)return;let o=r.target.value;this.number&&o!==""&&(o=Number.isNaN(Number(o))?o:Number(o)),this.$emit("update:modelValue",o),this.setCurrentValue(o),this.$emit("on-change",r)},handleChange(r){this.$emit("on-input-change",r)},setCurrentValue(r){r!==this.currentValue&&(t.nextTick(()=>{this.resizeTextarea()}),this.currentValue=r,B(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("change",r))},resizeTextarea(){const r=this.autosize;if(!r||this.type!=="textarea")return!1;const o=r.minRows,u=r.maxRows;this.textareaStyles=Hp(this.$refs.textarea,o,u)},focus(r){const o=this.type==="textarea"?this.$refs.textarea:this.$refs.input;o.focus(r);const{cursor:u}=r||{};if(u){const _=o.value.length;switch(u){case"start":o.setSelectionRange(0,0);break;case"end":o.setSelectionRange(_,_);break;default:o.setSelectionRange(0,_)}}},blur(){this.type==="textarea"?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear(){const r={target:{value:""}};this.$emit("update:modelValue",""),this.setCurrentValue(""),this.$emit("on-change",r),this.$emit("on-clear")},handleSearch(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword(){if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();const r=this.currentValue.length;setTimeout(()=>{this.$refs.input.setSelectionRange(r,r)},0)},handleCalcIconOffset(){const r=this.$el.querySelectorAll(".ivu-input-group-append")[0];r?this.clearableIconOffset=r.offsetWidth:this.clearableIconOffset=0}},watch:{modelValue(r){this.setCurrentValue(r)},type(){t.nextTick(this.handleCalcIconOffset)}},mounted(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated(){t.nextTick(this.handleCalcIconOffset)}},kN={key:4,class:"ivu-input-suffix"},AN={key:5,class:"ivu-input-word-count"},PN={key:0,class:"ivu-icon ivu-icon-ios-eye-outline"},IN={key:1,class:"ivu-icon ivu-icon-ios-eye-off-outline"},NN=["id","autocomplete","spellcheck","type","placeholder","disabled","maxlength","readonly","name","value","number","autofocus"],RN={key:0,class:"ivu-icon ivu-icon-ios-search"},DN={key:9,class:"ivu-input-prefix"},LN=["id","wrap","autocomplete","spellcheck","placeholder","disabled","rows","maxlength","readonly","name","value","autofocus"],BN={key:0,class:"ivu-input-word-count"};function ON(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[u.type!=="textarea"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[f.prepend?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-group-prepend"])},[t.renderSlot(r.$slots,"prepend")],2)),[[t.vShow,g.slotReady]]):t.createCommentVNode("",!0),u.clearable&&g.currentValue&&!r.itemDisabled?(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(["ivu-icon",["ivu-icon-ios-close-circle",g.prefixCls+"-icon",g.prefixCls+"-icon-clear",g.prefixCls+"-icon-normal"]]),onClick:o[0]||(o[0]=(...k)=>f.handleClear&&f.handleClear(...k)),style:t.normalizeStyle(f.clearableStyles)},null,6)):u.icon?(t.openBlock(),t.createElementBlock("i",{key:2,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+u.icon,g.prefixCls+"-icon",g.prefixCls+"-icon-normal"]]),onClick:o[1]||(o[1]=(...k)=>f.handleIconClick&&f.handleIconClick(...k))},null,2)):u.search&&u.enterButton===!1?(t.openBlock(),t.createElementBlock("i",{key:3,class:t.normalizeClass(["ivu-icon ivu-icon-ios-search",[g.prefixCls+"-icon",g.prefixCls+"-icon-normal",g.prefixCls+"-search-icon"]]),onClick:o[2]||(o[2]=(...k)=>f.handleSearch&&f.handleSearch(...k))},null,2)):f.showSuffix?(t.openBlock(),t.createElementBlock("span",kN,[t.renderSlot(r.$slots,"suffix",{},()=>[u.suffix?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+u.suffix]])},null,2)):t.createCommentVNode("",!0)])])):u.showWordLimit?(t.openBlock(),t.createElementBlock("span",AN,t.toDisplayString(f.textLength)+"/"+t.toDisplayString(f.upperLimit),1)):u.password?(t.openBlock(),t.createElementBlock("span",{key:6,class:"ivu-input-suffix",onClick:o[3]||(o[3]=(...k)=>f.handleToggleShowPassword&&f.handleToggleShowPassword(...k))},[g.showPassword?(t.openBlock(),t.createElementBlock("i",PN)):(t.openBlock(),t.createElementBlock("i",IN))])):t.createCommentVNode("",!0),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[u.icon?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon ivu-icon-ios-loading ivu-load-loop",[g.prefixCls+"-icon",g.prefixCls+"-icon-validate"]])},null,2))]),_:1}),t.createElementVNode("input",{id:u.elementId,autocomplete:u.autocomplete,spellcheck:u.spellcheck,ref:"input",type:f.currentType,class:t.normalizeClass(f.inputClasses),placeholder:u.placeholder,disabled:r.itemDisabled,maxlength:u.maxlength,readonly:u.readonly,name:u.name,value:g.currentValue,number:u.number,autofocus:u.autofocus,onKeyup:[o[4]||(o[4]=t.withKeys((...k)=>f.handleEnter&&f.handleEnter(...k),["enter"])),o[5]||(o[5]=(...k)=>f.handleKeyup&&f.handleKeyup(...k))],onKeypress:o[6]||(o[6]=(...k)=>f.handleKeypress&&f.handleKeypress(...k)),onKeydown:o[7]||(o[7]=(...k)=>f.handleKeydown&&f.handleKeydown(...k)),onFocus:o[8]||(o[8]=(...k)=>f.handleFocus&&f.handleFocus(...k)),onBlur:o[9]||(o[9]=(...k)=>f.handleBlur&&f.handleBlur(...k)),onCompositionstart:o[10]||(o[10]=(...k)=>f.handleComposition&&f.handleComposition(...k)),onCompositionupdate:o[11]||(o[11]=(...k)=>f.handleComposition&&f.handleComposition(...k)),onCompositionend:o[12]||(o[12]=(...k)=>f.handleComposition&&f.handleComposition(...k)),onInput:o[13]||(o[13]=(...k)=>f.handleInput&&f.handleInput(...k)),onChange:o[14]||(o[14]=(...k)=>f.handleChange&&f.handleChange(...k))},null,42,NN),f.append?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:7,class:t.normalizeClass([g.prefixCls+"-group-append"])},[t.renderSlot(r.$slots,"append")],2)),[[t.vShow,g.slotReady]]):u.search&&u.enterButton?(t.openBlock(),t.createElementBlock("div",{key:8,class:t.normalizeClass([g.prefixCls+"-group-append",g.prefixCls+"-search"]),onClick:o[15]||(o[15]=(...k)=>f.handleSearch&&f.handleSearch(...k))},[u.enterButton===!0?(t.openBlock(),t.createElementBlock("i",RN)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(u.enterButton),1)],64))],2)):f.showPrefix?(t.openBlock(),t.createElementBlock("span",DN,[t.renderSlot(r.$slots,"prefix",{},()=>[u.prefix?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass(["ivu-icon",["ivu-icon-"+u.prefix]])},null,2)):t.createCommentVNode("",!0)])])):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("textarea",{id:u.elementId,wrap:u.wrap,autocomplete:u.autocomplete,spellcheck:u.spellcheck,ref:"textarea",class:t.normalizeClass(f.textareaClasses),style:t.normalizeStyle(g.textareaStyles),placeholder:u.placeholder,disabled:r.itemDisabled,rows:u.rows,maxlength:u.maxlength,readonly:u.readonly,name:u.name,value:g.currentValue,autofocus:u.autofocus,onKeyup:[o[16]||(o[16]=t.withKeys((...k)=>f.handleEnter&&f.handleEnter(...k),["enter"])),o[17]||(o[17]=(...k)=>f.handleKeyup&&f.handleKeyup(...k))],onKeypress:o[18]||(o[18]=(...k)=>f.handleKeypress&&f.handleKeypress(...k)),onKeydown:o[19]||(o[19]=(...k)=>f.handleKeydown&&f.handleKeydown(...k)),onFocus:o[20]||(o[20]=(...k)=>f.handleFocus&&f.handleFocus(...k)),onBlur:o[21]||(o[21]=(...k)=>f.handleBlur&&f.handleBlur(...k)),onCompositionstart:o[22]||(o[22]=(...k)=>f.handleComposition&&f.handleComposition(...k)),onCompositionupdate:o[23]||(o[23]=(...k)=>f.handleComposition&&f.handleComposition(...k)),onCompositionend:o[24]||(o[24]=(...k)=>f.handleComposition&&f.handleComposition(...k)),onInput:o[25]||(o[25]=(...k)=>f.handleInput&&f.handleInput(...k))},`
            `,46,LN),u.showWordLimit?(t.openBlock(),t.createElementBlock("span",BN,t.toDisplayString(f.textLength)+"/"+t.toDisplayString(f.upperLimit),1)):t.createCommentVNode("",!0)],64))],2)}var hs=c(TN,[["render",ON]]);const VN={name:"AutoComplete",mixins:[tn],components:{iSelect:sr,iOption:ii,iInput:hs},emits:["update:modelValue","on-change","on-search","on-select","on-focus","on-blur","on-clear"],props:{modelValue:{type:[String,Number],default:""},label:{type:[String,Number],default:""},data:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},icon:{type:String},filterMethod:{type:[Function,Boolean],default:!1},placement:{validator(r){return w(r,["top","bottom","top-start","bottom-start","top-end","bottom-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},transferClassName:{type:String},capture:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return r.$VIEWUI?r.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,disableEmitChange:!1}},computed:{inputIcon(){let r="";return this.clearable&&this.currentValue&&!this.disabled?r="ios-close-circle":this.icon&&(r=this.icon),r},filteredData(){return this.filterMethod?this.data.filter(r=>this.filterMethod(this.currentValue,r)):this.data}},watch:{modelValue(r){this.currentValue!==r&&(this.disableEmitChange=!0),this.currentValue=r},currentValue(r){if(this.$refs.select.setQuery(r),this.$emit("update:modelValue",r),this.disableEmitChange){this.disableEmitChange=!1;return}this.$emit("on-change",r),this.handleFormItemChange("change",r)}},methods:{remoteMethod(r){this.$emit("on-search",r)},handleSelect(r){const o=r.value;o!=null&&(this.currentValue=o,this.$refs.input.blur(),this.$emit("on-select",o))},handleFocus(r){this.$emit("on-focus",r)},handleBlur(r){this.$emit("on-blur",r)},handleClear(){!this.clearable||(this.currentValue="",this.$refs.select.reset(),this.$emit("on-clear"))},handleClickOutside(){t.nextTick(()=>{this.$refs.input.blur()})}}};function FN(r,o,u,_,g,f){const k=t.resolveComponent("i-input"),O=t.resolveComponent("i-option"),G=t.resolveComponent("i-select");return t.openBlock(),t.createBlock(G,{ref:"select",class:"ivu-auto-complete",label:u.label,disabled:r.itemDisabled,clearable:u.clearable,placeholder:u.placeholder,size:u.size,placement:u.placement,"model-value":g.currentValue,"transfer-class-name":u.transferClassName,filterable:"",remote:"","auto-complete":"","remote-method":f.remoteMethod,onOnSelect:f.handleSelect,onOnClickoutside:f.handleClickOutside,transfer:u.transfer,capture:u.capture,eventsEnabled:u.eventsEnabled},{input:t.withCtx(()=>[t.renderSlot(r.$slots,"input",{},()=>[t.createVNode(k,{"element-id":u.elementId,ref:"input",modelValue:g.currentValue,"onUpdate:modelValue":o[0]||(o[0]=z=>g.currentValue=z),name:u.name,placeholder:u.placeholder,disabled:r.itemDisabled,size:u.size,icon:f.inputIcon,onOnClick:f.handleClear,onOnFocus:f.handleFocus,onOnBlur:f.handleBlur},null,8,["element-id","modelValue","name","placeholder","disabled","size","icon","onOnClick","onOnFocus","onOnBlur"])])]),default:t.withCtx(()=>[t.renderSlot(r.$slots,"default",{},()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.filteredData,z=>(t.openBlock(),t.createBlock(O,{value:z,key:z},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(z),1)]),_:2},1032,["value"]))),128))])]),_:3},8,["label","disabled","clearable","placeholder","size","placement","model-value","transfer-class-name","remote-method","onOnSelect","onOnClickoutside","transfer","capture","eventsEnabled"])}var gC=c(VN,[["render",FN]]);const Rc="ivu-avatar",vC=["small","large","default"],UN={name:"Avatar",components:{Icon:E},emits:["on-error"],props:{shape:{validator(r){return w(r,["circle","square"])},default:"circle"},size:{type:[String,Number],default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},src:{type:String},icon:{type:String},customIcon:{type:String,default:""}},data(){return{prefixCls:Rc,scale:1,childrenWidth:0,isSlotShow:!1,slotTemp:null}},computed:{classes(){return[`${Rc}`,`${Rc}-${this.shape}`,{[`${Rc}-image`]:!!this.src,[`${Rc}-icon`]:!!this.icon||!!this.customIcon,[`${Rc}-${this.size}`]:w(this.size,vC)}]},styles(){let r={};return this.size&&!w(this.size,vC)&&(r.width=`${this.size}px`,r.height=`${this.size}px`,r.lineHeight=`${this.size}px`,r.fontSize=`${this.size/2}px`),r},childrenStyle(){let r={};return this.isSlotShow&&(r={msTransform:`scale(${this.scale})`,WebkitTransform:`scale(${this.scale})`,transform:`scale(${this.scale})`,position:"absolute",display:"inline-block",left:`calc(50% - ${Math.round(this.childrenWidth/2)}px)`}),r}},watch:{size(r,o){r!==o&&this.setScale()}},methods:{setScale(){if(this.isSlotShow=!this.src&&!this.icon,this.$refs.children){this.childrenWidth=this.$refs.children.offsetWidth;const r=this.$el.getBoundingClientRect().width;r-8<this.childrenWidth?this.scale=(r-8)/this.childrenWidth:this.scale=1}},handleError(r){this.$emit("on-error",r)}},beforeCreate(){this.slotTemp=this.$slots.default?this.$slots.default():null},mounted(){this.setScale()},updated(){const r=this.$slots.default?this.$slots.default():null;r&&r!==this.slotTemp&&this.setScale()}},zN=["src"];function $N(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.styles)},[u.src?(t.openBlock(),t.createElementBlock("img",{key:0,src:u.src,onError:o[0]||(o[0]=(...O)=>f.handleError&&f.handleError(...O))},null,40,zN)):u.icon||u.customIcon?(t.openBlock(),t.createBlock(k,{key:1,type:u.icon,custom:u.customIcon},null,8,["type","custom"])):(t.openBlock(),t.createElementBlock("span",{key:2,ref:"children",class:t.normalizeClass([g.prefixCls+"-string"]),style:t.normalizeStyle(f.childrenStyle)},[t.renderSlot(r.$slots,"default")],6))],6)}var Th=c(UN,[["render",$N]]),yC={emits:["on-popper-show","on-popper-hide","created","update:modelValue"],props:{eventsEnabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:Object,popper:Object,offset:{default:0},modelValue:{type:Boolean,default:!1},transition:String,options:{type:Object,default(){return{modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:"window"}}}}}},data(){return{visible:this.modelValue}},watch:{modelValue:{immediate:!0,handler(r){this.visible=r,this.$emit("update:modelValue",r)}},visible(r){r?(this.handleIndexIncrease&&this.handleIndexIncrease(),this.updatePopper(),this.$emit("on-popper-show")):this.$emit("on-popper-hide"),this.$emit("update:modelValue",r)}},methods:{createPopper(){if(!/^(top|bottom|left|right)(-start|-end)?$/g.test(this.placement))return;const r=this.options,o=this.popper||this.$refs.popper,u=this.reference||this.$refs.reference;!o||!u||(this.popperJS&&this.popperJS.hasOwnProperty("destroy")&&this.popperJS.destroy(),r.eventsEnabled=this.eventsEnabled,r.placement=this.placement,r.modifiers.offset||(r.modifiers.offset={}),r.modifiers.offset.offset=this.offset,r.onCreate=()=>{t.nextTick(this.updatePopper),this.$emit("created",this)},this.popperJS=new he(u,o,r))},updatePopper(){this.popperJS?this.popperJS.update():this.createPopper()},doDestroy(){this.visible||(this.popperJS.destroy(),this.popperJS=null)}},updated(){t.nextTick(()=>this.updatePopper())},beforeUnmount(){this.popperJS&&this.popperJS.destroy()}};const Dc="ivu-tooltip",HN={name:"Tooltip",mixins:[yC],props:{placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},content:{type:[String,Number],default:""},delay:{type:Number,default:100},disabled:{type:Boolean,default:!1},controlled:{type:Boolean,default:!1},always:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},theme:{validator(r){return w(r,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number]},transferClassName:{type:String}},data(){return{prefixCls:Dc,tIndex:this.handleGetIndex()}},computed:{innerStyles(){const r={};return this.maxWidth&&(r["max-width"]=`${this.maxWidth}px`),r},innerClasses(){return[`${Dc}-inner`,{[`${Dc}-inner-with-width`]:!!this.maxWidth}]},dropStyles(){let r={};return this.transfer&&(r["z-index"]=1060+this.tIndex),r},dropdownCls(){return[`${Dc}-popper`,`${Dc}-${this.theme}`,{[Dc+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]}},watch:{content(){this.updatePopper()}},methods:{handleShowPopper(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.visible=!0},this.delay),this.tIndex=this.handleGetIndex()},handleClosePopper(){this.timeout&&(clearTimeout(this.timeout),this.controlled||(this.timeout=setTimeout(()=>{this.visible=!1},100)))},handleGetIndex(){return He(),xe}},mounted(){this.always&&this.updatePopper()}};function GN(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls]),onMouseenter:o[2]||(o[2]=(...k)=>f.handleShowPopper&&f.handleShowPopper(...k)),onMouseleave:o[3]||(o[3]=(...k)=>f.handleClosePopper&&f.handleClosePopper(...k))},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-rel"]),ref:"reference"},[t.renderSlot(r.$slots,"default")],2),(t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!u.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{ref:"popper",class:t.normalizeClass(f.dropdownCls),style:t.normalizeStyle(f.dropStyles),onMouseenter:o[0]||(o[0]=(...k)=>f.handleShowPopper&&f.handleShowPopper(...k)),onMouseleave:o[1]||(o[1]=(...k)=>f.handleClosePopper&&f.handleClosePopper(...k))},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-arrow"])},null,2),t.createElementVNode("div",{class:t.normalizeClass(f.innerClasses),style:t.normalizeStyle(f.innerStyles)},[t.renderSlot(r.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(u.content),1)])],6)],2)],38),[[t.vShow,!u.disabled&&(r.visible||u.always)]])]),_:3})],8,["disabled"]))],34)}var _a=c(HN,[["render",GN]]);const WN={name:"AvatarList",components:{Avatar:Th,Tooltip:_a},props:{list:{type:Array,default(){return[]}},shape:{validator(r){return w(r,["circle","square"])},default:"circle"},size:{validator(r){return w(r,["small","large","default"])},default:"default"},excessStyle:{type:Object,default(){return{}}},max:{type:Number},tooltip:{type:Boolean,default:!0},placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}}},computed:{currentList(){const r=this.list.length,o=this.max;return r<=o?[...this.list]:[...this.list].slice(0,o)}}},jN={key:0,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"},KN={key:1,class:"ivu-avatar-list-item ivu-avatar-list-item-excess"};function qN(r,o,u,_,g,f){const k=t.resolveComponent("Avatar"),O=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-avatar-list","ivu-avatar-list-"+u.size])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.currentList,(G,z)=>(t.openBlock(),t.createElementBlock("div",{class:"ivu-avatar-list-item",key:z},[u.tooltip&&G.tip?(t.openBlock(),t.createBlock(O,{key:0,content:G.tip,placement:u.placement,transfer:u.transfer},{default:t.withCtx(()=>[t.createVNode(k,{src:G.src,size:u.size,shape:u.shape},null,8,["src","size","shape"])]),_:2},1032,["content","placement","transfer"])):(t.openBlock(),t.createBlock(k,{key:1,src:G.src,size:u.size,shape:u.shape},null,8,["src","size","shape"]))]))),128)),r.$slots.extra?(t.openBlock(),t.createElementBlock("div",jN,[t.createVNode(k,{size:u.size,shape:u.shape,style:t.normalizeStyle(u.excessStyle)},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"extra")]),_:3},8,["size","shape","style"])])):u.list.length>u.max?(t.openBlock(),t.createElementBlock("div",KN,[t.createVNode(k,{size:u.size,shape:u.shape,style:t.normalizeStyle(u.excessStyle)},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"excess",{},()=>[t.createTextVNode("+"+t.toDisplayString(u.list.length-u.max),1)])]),_:3},8,["size","shape","style"])])):t.createCommentVNode("",!0)],2)}var bC=c(WN,[["render",qN]]);const Jv="ivu-back-top",XN={name:"BackTop",emits:["on-click"],props:{height:{type:Number,default:400},bottom:{type:Number,default:30},right:{type:Number,default:30},duration:{type:Number,default:1e3}},data(){return{backTop:!1}},mounted(){a(window,"scroll",this.handleScroll),a(window,"resize",this.handleScroll)},beforeUnmount(){l(window,"scroll",this.handleScroll),l(window,"resize",this.handleScroll)},computed:{classes(){return[`${Jv}`,{[`${Jv}-show`]:this.backTop}]},styles(){return{bottom:`${this.bottom}px`,right:`${this.right}px`}},innerClasses(){return`${Jv}-inner`}},methods:{handleScroll(){!s||(this.backTop=window.pageYOffset>=this.height)},back(){if(!s)return;const r=document.documentElement.scrollTop||document.body.scrollTop;R(window,r,0,this.duration),this.$emit("on-click")}}},YN=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-up"},null,-1)];function JN(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.styles),onClick:o[0]||(o[0]=(...k)=>f.back&&f.back(...k))},[t.renderSlot(r.$slots,"default",{},()=>[t.createElementVNode("div",{class:t.normalizeClass(f.innerClasses)},YN,2)])],6)}var _C=c(XN,[["render",JN]]);const xC=["blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],Ys="ivu-badge",ZN={name:"Badge",props:{count:Number,dot:{type:Boolean,default:!1},overflowCount:{type:[Number,String],default:99},className:String,showZero:{type:Boolean,default:!1},text:{type:String,default:""},status:{validator(r){return w(r,["success","processing","default","error","warning"])}},type:{validator(r){return w(r,["success","primary","normal","error","warning","info"])}},offset:{type:Array},color:{type:String}},computed:{classes(){return`${Ys}`},dotClasses(){return`${Ys}-dot`},countClasses(){return[`${Ys}-count`,{[`${this.className}`]:!!this.className,[`${Ys}-count-alone`]:this.alone,[`${Ys}-count-${this.type}`]:!!this.type}]},customCountClasses(){return[`${Ys}-count`,`${Ys}-count-custom`,{[`${this.className}`]:!!this.className}]},statusClasses(){return[`${Ys}-status-dot`,{[`${Ys}-status-${this.status}`]:!!this.status,[`${Ys}-status-${this.color}`]:!!this.color&&w(this.color,xC)}]},statusStyles(){return w(this.color,xC)?{}:{backgroundColor:this.color}},styles(){const r={};return this.offset&&this.offset.length===2&&(r["margin-top"]=`${this.offset[0]}px`,r["margin-right"]=`${this.offset[1]}px`),r},finalCount(){return this.text!==""?this.text:parseInt(this.count)>=parseInt(this.overflowCount)?`${this.overflowCount}+`:this.count},badge(){let r=!1;return this.count&&(r=parseInt(this.count)!==0),this.dot&&(r=!0,this.count!==null&&parseInt(this.count)===0&&(r=!1)),this.text!==""&&(r=!0),r||this.showZero},hasCount(){return!!(this.count||this.text!==""||this.showZero&&parseInt(this.count)===0)},alone(){return this.$slots.default===void 0}}},QN={class:"ivu-badge-status-text"};function eR(r,o,u,_,g,f){return u.dot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(f.classes),ref:"badge"},[t.renderSlot(r.$slots,"default"),t.withDirectives(t.createElementVNode("sup",{class:t.normalizeClass(f.dotClasses),style:t.normalizeStyle(f.styles)},null,6),[[t.vShow,f.badge]])],2)):u.status||u.color?(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass([f.classes,"ivu-badge-status"]),ref:"badge"},[t.createElementVNode("span",{class:t.normalizeClass(f.statusClasses),style:t.normalizeStyle(f.statusStyles)},null,6),t.createElementVNode("span",QN,[t.renderSlot(r.$slots,"text",{},()=>[t.createTextVNode(t.toDisplayString(u.text),1)])])],2)):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(f.classes),ref:"badge"},[t.renderSlot(r.$slots,"default"),r.$slots.count?(t.openBlock(),t.createElementBlock("sup",{key:0,style:t.normalizeStyle(f.styles),class:t.normalizeClass(f.customCountClasses)},[t.renderSlot(r.$slots,"count")],6)):f.hasCount?t.withDirectives((t.openBlock(),t.createElementBlock("sup",{key:1,style:t.normalizeStyle(f.styles),class:t.normalizeClass(f.countClasses)},[t.renderSlot(r.$slots,"text",{},()=>[t.createTextVNode(t.toDisplayString(f.finalCount),1)])],6)),[[t.vShow,f.badge]]):t.createCommentVNode("",!0)],2))}var Gp=c(ZN,[["render",eR]]);const tR={name:"Breadcrumb",provide(){return{BreadcrumbInstance:this}},props:{separator:{type:String,default:"/"}}},nR={class:"ivu-breadcrumb"};function iR(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",nR,[t.renderSlot(r.$slots,"default")])}var Zv=c(tR,[["render",iR]]);const wC="ivu-breadcrumb-item",rR={name:"BreadcrumbItem",mixins:[fe],inject:["BreadcrumbInstance"],props:{},data(){return{showSeparator:!1}},computed:{linkClasses(){return`${wC}-link`},separatorClasses(){return`${wC}-separator`},separator(){return this.BreadcrumbInstance.separator}},mounted(){this.showSeparator=this.$slots.separator!==void 0}},sR=["href","target"],aR=["innerHTML"];function oR(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("span",null,[r.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:r.linkUrl,target:r.target,class:t.normalizeClass(f.linkClasses),onClick:[o[0]||(o[0]=t.withModifiers(k=>r.handleCheckClick(k,!1),["exact"])),o[1]||(o[1]=t.withModifiers(k=>r.handleCheckClick(k,!0),["ctrl"])),o[2]||(o[2]=t.withModifiers(k=>r.handleCheckClick(k,!0),["meta"]))]},[t.renderSlot(r.$slots,"default")],10,sR)):(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(f.linkClasses)},[t.renderSlot(r.$slots,"default")],2)),g.showSeparator?(t.openBlock(),t.createElementBlock("span",{key:3,class:t.normalizeClass(f.separatorClasses)},[t.renderSlot(r.$slots,"separator")],2)):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(f.separatorClasses),innerHTML:f.separator},null,10,aR))])}var Qv=c(rR,[["render",oR]]);const ho="ivu-btn",ar={name:"Button",mixins:[fe,tn],components:{Icon:E},emits:["click"],props:{type:{validator(r){return w(r,["default","primary","dashed","text","info","success","warning","error"])},default:"default"},shape:{validator(r){return w(r,["circle","circle-outline"])}},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},loading:Boolean,disabled:Boolean,htmlType:{default:"button",validator(r){return w(r,["button","submit","reset"])}},icon:{type:String,default:""},customIcon:{type:String,default:""},long:{type:Boolean,default:!1},ghost:{type:Boolean,default:!1}},computed:{showSlot(){return!!this.$slots.default},classes(){return[`${ho}`,`${ho}-${this.type}`,{[`${ho}-long`]:this.long,[`${ho}-${this.shape}`]:!!this.shape,[`${ho}-${this.size}`]:this.size!=="default",[`${ho}-loading`]:this.loading!=null&&this.loading,[`${ho}-icon-only`]:!this.showSlot&&(!!this.icon||!!this.customIcon||this.loading),[`${ho}-ghost`]:this.ghost}]},isHrefPattern(){const{to:r}=this;return!!r},tagName(){const{isHrefPattern:r}=this;return r?"a":"button"},tagProps(){const{isHrefPattern:r}=this;if(r){const{linkUrl:o,target:u}=this;return{href:o,target:u}}else{const{htmlType:o}=this;return{type:o}}}},methods:{handleClickLink(r){this.$emit("click",r);const o=r.ctrlKey||r.metaKey;this.handleCheckClick(r,o)}},render(){let r;this.tagName==="button"?r="button":this.tagName==="a"&&(r="a");let o=[];return this.loading&&o.push(t.h(E,{class:"ivu-load-loop",type:"ios-loading"})),(this.icon||this.customIcon)&&!this.loading&&o.push(t.h(E,{type:this.icon,custom:this.customIcon})),this.$slots.default&&o.push(t.h("span",{ref:"slot"},this.$slots.default())),t.h(r,{class:this.classes,disabled:this.itemDisabled,onClick:this.handleClickLink,...this.tagProps},o)}},Wp="ivu-btn-group",lR={name:"ButtonGroup",props:{size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},shape:{validator(r){return w(r,["circle","circle-outline"])}},vertical:{type:Boolean,default:!1}},computed:{classes(){return[`${Wp}`,{[`${Wp}-${this.size}`]:!!this.size,[`${Wp}-${this.shape}`]:!!this.shape,[`${Wp}-vertical`]:this.vertical}]}}};function cR(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.renderSlot(r.$slots,"default")],2)}var ey=c(lR,[["render",cR]]);const kh="ivu-radio-group";let uR=0;const hR=Date.now(),dR={name:"RadioGroup",mixins:[tn],emits:["update:modelValue","on-change"],provide(){return{RadioGroupInstance:this}},props:{modelValue:{type:[String,Number],default:""},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},type:{validator(r){return w(r,["button"])}},vertical:{type:Boolean,default:!1},name:{type:String,default:()=>`ivuRadioGroup_${hR}_${uR++}`},buttonStyle:{validator(r){return w(r,["default","solid"])},default:"default"}},data(){return{currentValue:this.modelValue,children:[]}},computed:{classes(){return[`${kh}`,{[`${kh}-${this.size}`]:!!this.size,[`ivu-radio-${this.size}`]:!!this.size,[`${kh}-${this.type}`]:!!this.type,[`${kh}-button-${this.buttonStyle}`]:this.type==="button"&&this.buttonStyle!=="default",[`${kh}-vertical`]:this.vertical}]}},methods:{change(r){this.currentValue=r.value,this.$emit("update:modelValue",r.value),this.$emit("on-change",r.value),this.handleFormItemChange("change",r.value)}},watch:{modelValue(){this.currentValue!==this.modelValue&&(this.currentValue=this.modelValue)}}},fR=["name"];function pR(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),name:u.name},[t.renderSlot(r.$slots,"default")],10,fR)}var jp=c(dR,[["render",pR]]);const Hr="ivu-radio",mR={name:"Radio",mixins:[tn],emits:["update:modelValue","on-change"],inject:{RadioGroupInstance:{default:null}},props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number]},disabled:{type:Boolean,default:!1},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{groupName:this.name,parent:this.RadioGroupInstance,focusWrapper:!1,focusInner:!1}},computed:{wrapClasses(){return[`${Hr}-wrapper`,{[`${Hr}-group-item`]:this.group,[`${Hr}-wrapper-checked`]:this.currentValue,[`${Hr}-wrapper-disabled`]:this.itemDisabled,[`${Hr}-${this.size}`]:!!this.size,[`${Hr}-focus`]:this.focusWrapper,[`${Hr}-border`]:this.border}]},radioClasses(){return[`${Hr}`,{[`${Hr}-checked`]:this.currentValue,[`${Hr}-disabled`]:this.itemDisabled}]},innerClasses(){return[`${Hr}-inner`,{[`${Hr}-focus`]:this.focusInner}]},inputClasses(){return`${Hr}-input`},currentValue(){return this.RadioGroupInstance?this.RadioGroupInstance.currentValue===this.label:this.modelValue===this.trueValue},group(){return!!this.RadioGroupInstance}},mounted(){this.parent&&(this.name&&this.name!==this.parent.name?console.warn&&console.warn("[View UI] Name does not match Radio Group name."):this.groupName=this.parent.name)},methods:{change(r){if(this.itemDisabled)return!1;const o=r.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",o),this.group?this.label!==void 0&&this.parent.change({value:this.label,checked:this.modelValue}):(this.$emit("on-change",o),this.handleFormItemChange("change",o))},onBlur(){this.focusWrapper=!1,this.focusInner=!1},onFocus(){this.group&&this.parent.type==="button"?this.focusWrapper=!0:this.focusInner=!0}},watch:{modelValue(r){if(!(r===this.trueValue||r===this.falseValue))throw"Value should be trueValue or falseValue."}}},gR=["disabled","checked","name"];function vR(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("label",{class:t.normalizeClass(f.wrapClasses)},[t.createElementVNode("span",{class:t.normalizeClass(f.radioClasses)},[t.createElementVNode("span",{class:t.normalizeClass(f.innerClasses)},null,2),t.createElementVNode("input",{type:"radio",class:t.normalizeClass(f.inputClasses),disabled:r.itemDisabled,checked:f.currentValue,name:g.groupName,onChange:o[0]||(o[0]=(...k)=>f.change&&f.change(...k)),onFocus:o[1]||(o[1]=(...k)=>f.onFocus&&f.onFocus(...k)),onBlur:o[2]||(o[2]=(...k)=>f.onBlur&&f.onBlur(...k))},null,42,gR)],2),t.renderSlot(r.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(u.label),1)])],2)}var Kp=c(mR,[["render",vR]]),CC={exports:{}};(function(r,o){(function(u,_){r.exports=_()})(J,function(){var u=1e3,_=6e4,g=36e5,f="millisecond",k="second",O="minute",G="hour",z="day",j="week",ae="month",_e="quarter",ye="year",me="date",ie="Invalid Date",Pe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,At=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ut={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(wt){var ht=["th","st","nd","rd"],st=wt%100;return"["+wt+(ht[(st-20)%10]||ht[st]||ht[0])+"]"}},mt=function(wt,ht,st){var Mt=String(wt);return!Mt||Mt.length>=ht?wt:""+Array(ht+1-Mt.length).join(st)+wt},We={s:mt,z:function(wt){var ht=-wt.utcOffset(),st=Math.abs(ht),Mt=Math.floor(st/60),ft=st%60;return(ht<=0?"+":"-")+mt(Mt,2,"0")+":"+mt(ft,2,"0")},m:function wt(ht,st){if(ht.date()<st.date())return-wt(st,ht);var Mt=12*(st.year()-ht.year())+(st.month()-ht.month()),ft=ht.clone().add(Mt,ae),Gt=st-ft<0,qt=ht.clone().add(Mt+(Gt?-1:1),ae);return+(-(Mt+(st-ft)/(Gt?ft-qt:qt-ft))||0)},a:function(wt){return wt<0?Math.ceil(wt)||0:Math.floor(wt)},p:function(wt){return{M:ae,y:ye,w:j,d:z,D:me,h:G,m:O,s:k,ms:f,Q:_e}[wt]||String(wt||"").toLowerCase().replace(/s$/,"")},u:function(wt){return wt===void 0}},Ne="en",Ye={};Ye[Ne]=ut;var Ke="$isDayjsObject",Dt=function(wt){return wt instanceof Et||!(!wt||!wt[Ke])},Lt=function wt(ht,st,Mt){var ft;if(!ht)return Ne;if(typeof ht=="string"){var Gt=ht.toLowerCase();Ye[Gt]&&(ft=Gt),st&&(Ye[Gt]=st,ft=Gt);var qt=ht.split("-");if(!ft&&qt.length>1)return wt(qt[0])}else{var Tn=ht.name;Ye[Tn]=ht,ft=Tn}return!Mt&&ft&&(Ne=ft),ft||!Mt&&Ne},xt=function(wt,ht){if(Dt(wt))return wt.clone();var st=typeof ht=="object"?ht:{};return st.date=wt,st.args=arguments,new Et(st)},gt=We;gt.l=Lt,gt.i=Dt,gt.w=function(wt,ht){return xt(wt,{locale:ht.$L,utc:ht.$u,x:ht.$x,$offset:ht.$offset})};var Et=function(){function wt(st){this.$L=Lt(st.locale,null,!0),this.parse(st),this.$x=this.$x||st.x||{},this[Ke]=!0}var ht=wt.prototype;return ht.parse=function(st){this.$d=function(Mt){var ft=Mt.date,Gt=Mt.utc;if(ft===null)return new Date(NaN);if(gt.u(ft))return new Date;if(ft instanceof Date)return new Date(ft);if(typeof ft=="string"&&!/Z$/i.test(ft)){var qt=ft.match(Pe);if(qt){var Tn=qt[2]-1||0,zn=(qt[7]||"0").substring(0,3);return Gt?new Date(Date.UTC(qt[1],Tn,qt[3]||1,qt[4]||0,qt[5]||0,qt[6]||0,zn)):new Date(qt[1],Tn,qt[3]||1,qt[4]||0,qt[5]||0,qt[6]||0,zn)}}return new Date(ft)}(st),this.init()},ht.init=function(){var st=this.$d;this.$y=st.getFullYear(),this.$M=st.getMonth(),this.$D=st.getDate(),this.$W=st.getDay(),this.$H=st.getHours(),this.$m=st.getMinutes(),this.$s=st.getSeconds(),this.$ms=st.getMilliseconds()},ht.$utils=function(){return gt},ht.isValid=function(){return this.$d.toString()!==ie},ht.isSame=function(st,Mt){var ft=xt(st);return this.startOf(Mt)<=ft&&ft<=this.endOf(Mt)},ht.isAfter=function(st,Mt){return xt(st)<this.startOf(Mt)},ht.isBefore=function(st,Mt){return this.endOf(Mt)<xt(st)},ht.$g=function(st,Mt,ft){return gt.u(st)?this[Mt]:this.set(ft,st)},ht.unix=function(){return Math.floor(this.valueOf()/1e3)},ht.valueOf=function(){return this.$d.getTime()},ht.startOf=function(st,Mt){var ft=this,Gt=!!gt.u(Mt)||Mt,qt=gt.p(st),Tn=function(vt,$t){var gn=gt.w(ft.$u?Date.UTC(ft.$y,$t,vt):new Date(ft.$y,$t,vt),ft);return Gt?gn:gn.endOf(z)},zn=function(vt,$t){return gt.w(ft.toDate()[vt].apply(ft.toDate("s"),(Gt?[0,0,0,0]:[23,59,59,999]).slice($t)),ft)},ei=this.$W,ri=this.$M,zi=this.$D,Sr="set"+(this.$u?"UTC":"");switch(qt){case ye:return Gt?Tn(1,0):Tn(31,11);case ae:return Gt?Tn(1,ri):Tn(0,ri+1);case j:var Is=this.$locale().weekStart||0,Ns=(ei<Is?ei+7:ei)-Is;return Tn(Gt?zi-Ns:zi+(6-Ns),ri);case z:case me:return zn(Sr+"Hours",0);case G:return zn(Sr+"Minutes",1);case O:return zn(Sr+"Seconds",2);case k:return zn(Sr+"Milliseconds",3);default:return this.clone()}},ht.endOf=function(st){return this.startOf(st,!1)},ht.$set=function(st,Mt){var ft,Gt=gt.p(st),qt="set"+(this.$u?"UTC":""),Tn=(ft={},ft[z]=qt+"Date",ft[me]=qt+"Date",ft[ae]=qt+"Month",ft[ye]=qt+"FullYear",ft[G]=qt+"Hours",ft[O]=qt+"Minutes",ft[k]=qt+"Seconds",ft[f]=qt+"Milliseconds",ft)[Gt],zn=Gt===z?this.$D+(Mt-this.$W):Mt;if(Gt===ae||Gt===ye){var ei=this.clone().set(me,1);ei.$d[Tn](zn),ei.init(),this.$d=ei.set(me,Math.min(this.$D,ei.daysInMonth())).$d}else Tn&&this.$d[Tn](zn);return this.init(),this},ht.set=function(st,Mt){return this.clone().$set(st,Mt)},ht.get=function(st){return this[gt.p(st)]()},ht.add=function(st,Mt){var ft,Gt=this;st=Number(st);var qt=gt.p(Mt),Tn=function(ri){var zi=xt(Gt);return gt.w(zi.date(zi.date()+Math.round(ri*st)),Gt)};if(qt===ae)return this.set(ae,this.$M+st);if(qt===ye)return this.set(ye,this.$y+st);if(qt===z)return Tn(1);if(qt===j)return Tn(7);var zn=(ft={},ft[O]=_,ft[G]=g,ft[k]=u,ft)[qt]||1,ei=this.$d.getTime()+st*zn;return gt.w(ei,this)},ht.subtract=function(st,Mt){return this.add(-1*st,Mt)},ht.format=function(st){var Mt=this,ft=this.$locale();if(!this.isValid())return ft.invalidDate||ie;var Gt=st||"YYYY-MM-DDTHH:mm:ssZ",qt=gt.z(this),Tn=this.$H,zn=this.$m,ei=this.$M,ri=ft.weekdays,zi=ft.months,Sr=ft.meridiem,Is=function($t,gn,Bi,cr){return $t&&($t[gn]||$t(Mt,Gt))||Bi[gn].slice(0,cr)},Ns=function($t){return gt.s(Tn%12||12,$t,"0")},vt=Sr||function($t,gn,Bi){var cr=$t<12?"AM":"PM";return Bi?cr.toLowerCase():cr};return Gt.replace(At,function($t,gn){return gn||function(Bi){switch(Bi){case"YY":return String(Mt.$y).slice(-2);case"YYYY":return gt.s(Mt.$y,4,"0");case"M":return ei+1;case"MM":return gt.s(ei+1,2,"0");case"MMM":return Is(ft.monthsShort,ei,zi,3);case"MMMM":return Is(zi,ei);case"D":return Mt.$D;case"DD":return gt.s(Mt.$D,2,"0");case"d":return String(Mt.$W);case"dd":return Is(ft.weekdaysMin,Mt.$W,ri,2);case"ddd":return Is(ft.weekdaysShort,Mt.$W,ri,3);case"dddd":return ri[Mt.$W];case"H":return String(Tn);case"HH":return gt.s(Tn,2,"0");case"h":return Ns(1);case"hh":return Ns(2);case"a":return vt(Tn,zn,!0);case"A":return vt(Tn,zn,!1);case"m":return String(zn);case"mm":return gt.s(zn,2,"0");case"s":return String(Mt.$s);case"ss":return gt.s(Mt.$s,2,"0");case"SSS":return gt.s(Mt.$ms,3,"0");case"Z":return qt}return null}($t)||qt.replace(":","")})},ht.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ht.diff=function(st,Mt,ft){var Gt,qt=this,Tn=gt.p(Mt),zn=xt(st),ei=(zn.utcOffset()-this.utcOffset())*_,ri=this-zn,zi=function(){return gt.m(qt,zn)};switch(Tn){case ye:Gt=zi()/12;break;case ae:Gt=zi();break;case _e:Gt=zi()/3;break;case j:Gt=(ri-ei)/6048e5;break;case z:Gt=(ri-ei)/864e5;break;case G:Gt=ri/g;break;case O:Gt=ri/_;break;case k:Gt=ri/u;break;default:Gt=ri}return ft?Gt:gt.a(Gt)},ht.daysInMonth=function(){return this.endOf(ae).$D},ht.$locale=function(){return Ye[this.$L]},ht.locale=function(st,Mt){if(!st)return this.$L;var ft=this.clone(),Gt=Lt(st,Mt,!0);return Gt&&(ft.$L=Gt),ft},ht.clone=function(){return gt.w(this.$d,this)},ht.toDate=function(){return new Date(this.valueOf())},ht.toJSON=function(){return this.isValid()?this.toISOString():null},ht.toISOString=function(){return this.$d.toISOString()},ht.toString=function(){return this.$d.toUTCString()},wt}(),Ot=Et.prototype;return xt.prototype=Ot,[["$ms",f],["$s",k],["$m",O],["$H",G],["$W",z],["$M",ae],["$y",ye],["$D",me]].forEach(function(wt){Ot[wt[1]]=function(ht){return this.$g(ht,wt[0],wt[1])}}),xt.extend=function(wt,ht){return wt.$i||(wt(ht,Et,xt),wt.$i=!0),xt},xt.locale=Lt,xt.isDayjs=Dt,xt.unix=function(wt){return xt(1e3*wt)},xt.en=Ye[Ne],xt.Ls=Ye,xt.p={},xt})})(CC);var Gr=CC.exports,SC=1/0,EC=9007199254740991,yR=17976931348623157e292,MC=NaN,bR="[object Function]",_R="[object GeneratorFunction]",xR="[object Symbol]",wR=/^\s+|\s+$/g,CR=/^[-+]0x[0-9a-f]+$/i,SR=/^0b[01]+$/i,ER=/^0o[0-7]+$/i,MR=/^(?:0|[1-9]\d*)$/,TR=parseInt,kR=Object.prototype,TC=kR.toString,AR=Math.ceil,PR=Math.max;function IR(r,o,u){var _=-1,g=r.length;o<0&&(o=-o>g?0:g+o),u=u>g?g:u,u<0&&(u+=g),g=o>u?0:u-o>>>0,o>>>=0;for(var f=Array(g);++_<g;)f[_]=r[_+o];return f}function NR(r,o){return o=o??EC,!!o&&(typeof r=="number"||MR.test(r))&&r>-1&&r%1==0&&r<o}function RR(r,o,u){if(!qp(u))return!1;var _=typeof o;return(_=="number"?BR(u)&&NR(o,u.length):_=="string"&&o in u)?LR(u[o],r):!1}function DR(r,o,u){(u?RR(r,o,u):o===void 0)?o=1:o=PR($R(o),0);var _=r?r.length:0;if(!_||o<1)return[];for(var g=0,f=0,k=Array(AR(_/o));g<_;)k[f++]=IR(r,g,g+=o);return k}function LR(r,o){return r===o||r!==r&&o!==o}function BR(r){return r!=null&&VR(r.length)&&!OR(r)}function OR(r){var o=qp(r)?TC.call(r):"";return o==bR||o==_R}function VR(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=EC}function qp(r){var o=typeof r;return!!r&&(o=="object"||o=="function")}function FR(r){return!!r&&typeof r=="object"}function UR(r){return typeof r=="symbol"||FR(r)&&TC.call(r)==xR}function zR(r){if(!r)return r===0?r:0;if(r=HR(r),r===SC||r===-SC){var o=r<0?-1:1;return o*yR}return r===r?r:0}function $R(r){var o=zR(r),u=o%1;return o===o?u?o-u:o:0}function HR(r){if(typeof r=="number")return r;if(UR(r))return MC;if(qp(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=qp(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=r.replace(wR,"");var u=SR.test(r);return u||ER.test(r)?TR(r.slice(2),u?2:8):CR.test(r)?MC:+r}var kC=DR,AC={emits:["on-cell-click","on-cell-contextmenu"],methods:{handleCellClick(r){this.CalendarInstance.$emit("on-cell-click",r)},handleCellContextmenu(r){this.CalendarInstance.$emit("on-cell-contextmenu",r)}}};const GR={name:"CalendarMonth",mixins:[AC],inject:["CalendarInstance"],props:{date:Object},data(){return{firstDayOfWeek:this.CalendarInstance.firstDayOfWeek,weekDays:this.CalendarInstance.locale.weekDays}},computed:{finalWeekDays(){return this.weekDays.slice(this.firstDayOfWeek).concat(this.weekDays.slice(0,this.firstDayOfWeek))},days(){let r=[];const o=Gr(this.date.format("YYYY-MM-01")),u=o.day(),_=this.firstDayOfWeek,g=_<=u?u-_:7-(_-u);for(let G=0;G<g;G++){const z=o.subtract(g-G,"day"),j={text:z.format("YYYY-MM-DD"),date:z.format("D"),type:"prev"};r.push(j)}const f=o.daysInMonth();for(let G=0;G<f;G++){const z=o.add(G,"day"),j={text:z.format("YYYY-MM-DD"),date:z.format("D"),type:"current"};r.push(j)}const k=42-r.length,O=o.add(1,"month");for(let G=0;G<k;G++){const z=O.add(G,"day"),j={text:z.format("YYYY-MM-DD"),date:z.format("D"),type:"next"};r.push(j)}return r},chunkDays(){return kC(this.days,7)},dayStyles(){let r={};return this.CalendarInstance.cellHeight!==100&&(r.height=`${this.CalendarInstance.cellHeight}px`),r},currentDate(){return this.date.format("YYYY-MM-DD")}},methods:{handleClickDate(r){this.CalendarInstance.handleChangeDate(Gr(r))}}},WR={class:"ivu-calendar-table",cellspacing:"0",cellpadding:"0"},jR=["onClick","onContextmenu"],KR=["onClick"],qR={class:"ivu-calendar-table-day-title"},XR={class:"ivu-calendar-table-day-slot"};function YR(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("table",WR,[t.createElementVNode("thead",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.finalWeekDays,k=>(t.openBlock(),t.createElementBlock("th",{key:k},t.toDisplayString(k),1))),128))]),t.createElementVNode("tbody",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.chunkDays,(k,O)=>(t.openBlock(),t.createElementBlock("tr",{key:O},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(k,G=>(t.openBlock(),t.createElementBlock("td",{key:G.text,onClick:z=>r.handleCellClick(G),onContextmenu:t.withModifiers(z=>r.handleCellContextmenu(G),["prevent"])},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-other":G.type!=="current","ivu-calendar-table-day-current":G.text===f.currentDate}]),style:t.normalizeStyle(f.dayStyles),onClick:z=>f.handleClickDate(G.text)},[t.createElementVNode("div",qR,t.toDisplayString(G.date),1),t.createElementVNode("div",XR,[t.renderSlot(r.$slots,"month",{date:new Date(G.date),data:{type:G.type+"-month",day:G.text,selected:G.text===f.currentDate}})])],14,KR)],40,jR))),128))]))),128))])])}var JR=c(GR,[["render",YR]]);const ZR={name:"CalendarYear",mixins:[AC],inject:["CalendarInstance"],props:{date:Object},data(){return{}},computed:{months(){let r=[];const o=Gr(this.date.format("YYYY-01-01"));for(let u=0;u<12;u++){const _=o.add(u,"month");r.push({text:_.format("YYYY-MM"),month:this.CalendarInstance.locale.months[u],type:"current"})}return r},chunkMonths(){return kC(this.months,3)},dayStyles(){let r={};return this.CalendarInstance.cellHeight!==100&&(r.height=`${this.CalendarInstance.cellHeight}px`),r},currentMonth(){return this.date.format("YYYY-MM")}},methods:{handleClickDate(r){this.CalendarInstance.handleChangeDate(Gr(r))}}},QR={class:"ivu-calendar-table ivu-calendar-table-year",cellspacing:"0",cellpadding:"0"},eD=["onClick","onContextmenu"],tD=["onClick"],nD={class:"ivu-calendar-table-day-title"},iD={class:"ivu-calendar-table-day-slot"};function rD(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("table",QR,[t.createElementVNode("tbody",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.chunkMonths,(k,O)=>(t.openBlock(),t.createElementBlock("tr",{key:O},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(k,G=>(t.openBlock(),t.createElementBlock("td",{key:G.text,onClick:z=>r.handleCellClick(G),onContextmenu:t.withModifiers(z=>r.handleCellContextmenu(G),["prevent"])},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-calendar-table-day",{"ivu-calendar-table-day-current":G.text===f.currentMonth}]),style:t.normalizeStyle(f.dayStyles),onClick:z=>f.handleClickDate(G.text)},[t.createElementVNode("div",nD,t.toDisplayString(G.month),1),t.createElementVNode("div",iD,[t.renderSlot(r.$slots,"year",{month:new Date(G.month),data:{type:G.type+"-year",month:G.text,selected:G.text===f.currentMonth}})])],14,tD)],40,eD))),128))]))),128))])])}var sD=c(ZR,[["render",rD]]);const aD={name:"Calendar",components:{CalendarMonth:JR,CalendarYear:sD,ButtonGroup:ey,Button:ar,RadioGroup:jp,Radio:Kp,Icon:E},emits:["on-type-change","on-prev","on-next","on-today","on-change","update:modelValue","on-cell-click","on-cell-contextmenu"],provide(){return{CalendarInstance:this}},props:{modelValue:{type:[Date,String,Number]},type:{validator(r){return w(r,["month","year"])},default:"month"},cellHeight:{type:Number,default:100},showHeader:{type:Boolean,default:!0},headerType:{validator(r){return w(r,["simple","full"])},default:"simple"},firstDayOfWeek:{validator(r){return w(r,[1,2,3,4,5,6,7])},default:1},hideType:{type:Boolean,default:!1},locale:{type:Object,default(){return{today:"",type:{month:"",year:""},weekDays:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"]}}}},data(){const r=this.modelValue?this.modelValue:new Date;return{currentValue:Gr(r),mode:this.type}},watch:{modelValue(r){const o=r||new Date;this.currentValue=Gr(o)},type(r){this.mode=r}},computed:{headerTitle(){if(this.mode==="month")return this.currentValue.format("YYYY  M ");if(this.mode==="year")return this.currentValue.format("YYYY ")}},methods:{handleChangeType(r){this.$emit("on-type-change",r)},handlePrev(){const r=this.currentValue.format("YYYY-MM-01");let o;this.mode==="month"?o=Gr(r).subtract(1,"month"):this.mode==="year"&&(o=Gr(r).subtract(1,"year")),this.handleChangeDate(o),this.$emit("on-prev")},handleNext(){const r=this.currentValue.format("YYYY-MM-01");let o;this.mode==="month"?o=Gr(r).add(1,"month"):this.mode==="year"&&(o=Gr(r).add(1,"year")),this.handleChangeDate(o),this.$emit("on-next")},handleToday(){const r=Gr(new Date),o=r.format("YYYY-MM-DD"),u=this.currentValue.format("YYYY-MM-DD");o!==u&&this.handleChangeDate(r),this.$emit("on-today")},handleChangeDate(r){this.currentValue=r;const o=new Date(r.format("YYYY-MM-DD"));this.$emit("update:modelValue",o),this.$emit("on-change",o)}}},oD={class:"ivu-calendar"},lD={key:0,class:"ivu-calendar-header"},cD={class:"ivu-calendar-header-title"},uD={class:"ivu-calendar-header-action"},hD={class:"ivu-calendar-body"};function dD(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Button"),G=t.resolveComponent("ButtonGroup"),z=t.resolveComponent("Radio"),j=t.resolveComponent("RadioGroup"),ae=t.resolveComponent("CalendarMonth"),_e=t.resolveComponent("CalendarYear");return t.openBlock(),t.createElementBlock("div",oD,[u.showHeader?(t.openBlock(),t.createElementBlock("div",lD,[t.renderSlot(r.$slots,"header",{},()=>[t.createElementVNode("div",cD,[t.renderSlot(r.$slots,"headerTitle",{},()=>[t.createTextVNode(t.toDisplayString(f.headerTitle),1)])]),t.createElementVNode("div",uD,[u.headerType==="simple"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(G,null,{default:t.withCtx(()=>[t.createVNode(O,{onClick:f.handlePrev},{default:t.withCtx(()=>[t.createVNode(k,{type:"ios-arrow-back"})]),_:1},8,["onClick"]),t.createVNode(O,{onClick:f.handleToday},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(u.locale.today),1)]),_:1},8,["onClick"]),t.createVNode(O,{onClick:f.handleNext},{default:t.withCtx(()=>[t.createVNode(k,{type:"ios-arrow-forward"})]),_:1},8,["onClick"])]),_:1}),u.hideType?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(j,{key:0,modelValue:g.mode,"onUpdate:modelValue":o[0]||(o[0]=ye=>g.mode=ye),type:"button",class:"ivu-ml",onOnChange:f.handleChangeType},{default:t.withCtx(()=>[t.createVNode(z,{label:"month"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(u.locale.type.month),1)]),_:1}),t.createVNode(z,{label:"year"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(u.locale.type.year),1)]),_:1})]),_:1},8,["modelValue","onOnChange"]))],64)):u.headerType==="full"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[],64)):t.createCommentVNode("",!0)])])])):t.createCommentVNode("",!0),t.createElementVNode("div",hD,[g.mode==="month"?(t.openBlock(),t.createBlock(ae,{key:0,date:g.currentValue},{month:t.withCtx(({date:ye,data:me})=>[t.renderSlot(r.$slots,"month",{date:ye,data:me})]),_:3},8,["date"])):g.mode==="year"?(t.openBlock(),t.createBlock(_e,{key:1,date:g.currentValue},{year:t.withCtx(({month:ye,data:me})=>[t.renderSlot(r.$slots,"year",{month:ye,data:me})]),_:3},8,["date"])):t.createCommentVNode("",!0)])])}var PC=c(aD,[["render",dD]]);const xa="ivu-col";function fD(r){return typeof r=="number"?`${r} ${r} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(r)?`0 0 ${r}`:r}const pD={name:"iCol",inject:["RowInstance"],props:{span:[Number,String],order:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],className:String,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object],xxl:[Number,Object],flex:{type:[Number,String],default:""}},computed:{gutter(){return this.RowInstance.gutter},classes(){let r=[`${xa}`,{[`${xa}-span-${this.span}`]:this.span,[`${xa}-order-${this.order}`]:this.order,[`${xa}-offset-${this.offset}`]:this.offset,[`${xa}-push-${this.push}`]:this.push,[`${xa}-pull-${this.pull}`]:this.pull,[`${this.className}`]:!!this.className}];return["xs","sm","md","lg","xl","xxl"].forEach(o=>{if(typeof this[o]=="number")r.push(`${xa}-span-${o}-${this[o]}`);else if(typeof this[o]=="object"){let u=this[o];Object.keys(u).forEach(_=>{r.push(_!=="span"?`${xa}-${o}-${_}-${u[_]}`:`${xa}-span-${o}-${u[_]}`)})}}),r},styles(){let r={};return this.gutter!==0&&(r={paddingLeft:this.gutter/2+"px",paddingRight:this.gutter/2+"px"}),this.flex&&(r.flex=fD(this.flex)),r}}};function mD(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.styles)},[t.renderSlot(r.$slots,"default")],6)}var Js=c(pD,[["render",mD]]);const _l="ivu-row",gD={name:"Row",provide(){return{RowInstance:this}},props:{type:{validator(r){return w(r,["flex"])}},align:{validator(r){return w(r,["top","middle","bottom"])}},justify:{validator(r){return w(r,["start","end","center","space-around","space-between"])}},gutter:{type:Number,default:0},className:String,wrap:{type:Boolean,default:!0}},computed:{classes(){return[`${_l}`,{[`${_l}-${this.type}`]:!!this.type,[`${_l}-${this.type}-${this.align}`]:!!this.align&&this.type,[`${_l}-${this.type}-${this.justify}`]:!!this.justify&&this.type,[`${_l}-${this.align}`]:!!this.align,[`${_l}-${this.justify}`]:!!this.justify,[`${this.className}`]:!!this.className,[`${_l}-no-wrap`]:!this.wrap}]},styles(){let r={};return this.gutter!==0&&(r={marginLeft:this.gutter/-2+"px",marginRight:this.gutter/-2+"px"}),r}}};function vD(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.styles)},[t.renderSlot(r.$slots,"default")],6)}var fo=c(gD,[["render",vD]]);function xl(){return xl=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var u=arguments[o];for(var _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(r[_]=u[_])}return r},xl.apply(this,arguments)}function yD(r,o){r.prototype=Object.create(o.prototype),r.prototype.constructor=r,Ah(r,o)}function ty(r){return ty=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ty(r)}function Ah(r,o){return Ah=Object.setPrototypeOf||function(u,_){return u.__proto__=_,u},Ah(r,o)}function bD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xp(r,o,u){return bD()?Xp=Reflect.construct:Xp=function(_,g,f){var k=[null];k.push.apply(k,g);var O=Function.bind.apply(_,k),G=new O;return f&&Ah(G,f.prototype),G},Xp.apply(null,arguments)}function _D(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function ny(r){var o=typeof Map=="function"?new Map:void 0;return ny=function(u){if(u===null||!_D(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(typeof o<"u"){if(o.has(u))return o.get(u);o.set(u,_)}function _(){return Xp(u,arguments,ty(this).constructor)}return _.prototype=Object.create(u.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),Ah(_,u)},ny(r)}var xD=/%[sdj%]/g,wD=function(){};function iy(r){if(!r||!r.length)return null;var o={};return r.forEach(function(u){var _=u.field;o[_]=o[_]||[],o[_].push(u)}),o}function Wr(){for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];var _=1,g=o[0],f=o.length;if(typeof g=="function")return g.apply(null,o.slice(1));if(typeof g=="string"){var k=String(g).replace(xD,function(O){if(O==="%%")return"%";if(_>=f)return O;switch(O){case"%s":return String(o[_++]);case"%d":return Number(o[_++]);case"%j":try{return JSON.stringify(o[_++])}catch{return"[Circular]"}break;default:return O}});return k}return g}function CD(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function Ei(r,o){return!!(r==null||o==="array"&&Array.isArray(r)&&!r.length||CD(o)&&typeof r=="string"&&!r)}function SD(r,o,u){var _=[],g=0,f=r.length;function k(O){_.push.apply(_,O),g++,g===f&&u(_)}r.forEach(function(O){o(O,k)})}function IC(r,o,u){var _=0,g=r.length;function f(k){if(k&&k.length){u(k);return}var O=_;_=_+1,O<g?o(r[O],f):u([])}f([])}function ED(r){var o=[];return Object.keys(r).forEach(function(u){o.push.apply(o,r[u])}),o}var NC=function(r){yD(o,r);function o(u,_){var g;return g=r.call(this,"Async Validation Error")||this,g.errors=u,g.fields=_,g}return o}(ny(Error));function MD(r,o,u,_){if(o.first){var g=new Promise(function(ae,_e){var ye=function(ie){return _(ie),ie.length?_e(new NC(ie,iy(ie))):ae()},me=ED(r);IC(me,u,ye)});return g.catch(function(ae){return ae}),g}var f=o.firstFields||[];f===!0&&(f=Object.keys(r));var k=Object.keys(r),O=k.length,G=0,z=[],j=new Promise(function(ae,_e){var ye=function(me){if(z.push.apply(z,me),G++,G===O)return _(z),z.length?_e(new NC(z,iy(z))):ae()};k.length||(_(z),ae()),k.forEach(function(me){var ie=r[me];f.indexOf(me)!==-1?IC(ie,u,ye):SD(ie,u,ye)})});return j.catch(function(ae){return ae}),j}function RC(r){return function(o){return o&&o.message?(o.field=o.field||r.fullField,o):{message:typeof o=="function"?o():o,field:o.field||r.fullField}}}function DC(r,o){if(o){for(var u in o)if(o.hasOwnProperty(u)){var _=o[u];typeof _=="object"&&typeof r[u]=="object"?r[u]=xl({},r[u],_):r[u]=_}}return r}function LC(r,o,u,_,g,f){r.required&&(!u.hasOwnProperty(r.field)||Ei(o,f||r.type))&&_.push(Wr(g.messages.required,r.fullField))}function TD(r,o,u,_,g){(/^\s+$/.test(o)||o==="")&&_.push(Wr(g.messages.whitespace,r.fullField))}var ry={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Ph={integer:function(r){return Ph.number(r)&&parseInt(r,10)===r},float:function(r){return Ph.number(r)&&!Ph.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!Ph.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&!!r.match(ry.email)&&r.length<255},url:function(r){return typeof r=="string"&&!!r.match(ry.url)},hex:function(r){return typeof r=="string"&&!!r.match(ry.hex)}};function kD(r,o,u,_,g){if(r.required&&o===void 0){LC(r,o,u,_,g);return}var f=["integer","float","array","regexp","object","method","email","number","date","url","hex"],k=r.type;f.indexOf(k)>-1?Ph[k](o)||_.push(Wr(g.messages.types[k],r.fullField,r.type)):k&&typeof o!==r.type&&_.push(Wr(g.messages.types[k],r.fullField,r.type))}function AD(r,o,u,_,g){var f=typeof r.len=="number",k=typeof r.min=="number",O=typeof r.max=="number",G=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,z=o,j=null,ae=typeof o=="number",_e=typeof o=="string",ye=Array.isArray(o);if(ae?j="number":_e?j="string":ye&&(j="array"),!j)return!1;ye&&(z=o.length),_e&&(z=o.replace(G,"_").length),f?z!==r.len&&_.push(Wr(g.messages[j].len,r.fullField,r.len)):k&&!O&&z<r.min?_.push(Wr(g.messages[j].min,r.fullField,r.min)):O&&!k&&z>r.max?_.push(Wr(g.messages[j].max,r.fullField,r.max)):k&&O&&(z<r.min||z>r.max)&&_.push(Wr(g.messages[j].range,r.fullField,r.min,r.max))}var Lc="enum";function PD(r,o,u,_,g){r[Lc]=Array.isArray(r[Lc])?r[Lc]:[],r[Lc].indexOf(o)===-1&&_.push(Wr(g.messages[Lc],r.fullField,r[Lc].join(", ")))}function ID(r,o,u,_,g){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(o)||_.push(Wr(g.messages.pattern.mismatch,r.fullField,o,r.pattern));else if(typeof r.pattern=="string"){var f=new RegExp(r.pattern);f.test(o)||_.push(Wr(g.messages.pattern.mismatch,r.fullField,o,r.pattern))}}}var mn={required:LC,whitespace:TD,type:kD,range:AD,enum:PD,pattern:ID};function ND(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o,"string")&&!r.required)return u();mn.required(r,o,_,f,g,"string"),Ei(o,"string")||(mn.type(r,o,_,f,g),mn.range(r,o,_,f,g),mn.pattern(r,o,_,f,g),r.whitespace===!0&&mn.whitespace(r,o,_,f,g))}u(f)}function RD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),o!==void 0&&mn.type(r,o,_,f,g)}u(f)}function DD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(o===""&&(o=void 0),Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),o!==void 0&&(mn.type(r,o,_,f,g),mn.range(r,o,_,f,g))}u(f)}function LD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),o!==void 0&&mn.type(r,o,_,f,g)}u(f)}function BD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),Ei(o)||mn.type(r,o,_,f,g)}u(f)}function OD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),o!==void 0&&(mn.type(r,o,_,f,g),mn.range(r,o,_,f,g))}u(f)}function VD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),o!==void 0&&(mn.type(r,o,_,f,g),mn.range(r,o,_,f,g))}u(f)}function FD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(o==null&&!r.required)return u();mn.required(r,o,_,f,g,"array"),o!=null&&(mn.type(r,o,_,f,g),mn.range(r,o,_,f,g))}u(f)}function UD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),o!==void 0&&mn.type(r,o,_,f,g)}u(f)}var zD="enum";function $D(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g),o!==void 0&&mn[zD](r,o,_,f,g)}u(f)}function HD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o,"string")&&!r.required)return u();mn.required(r,o,_,f,g),Ei(o,"string")||mn.pattern(r,o,_,f,g)}u(f)}function GD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o,"date")&&!r.required)return u();if(mn.required(r,o,_,f,g),!Ei(o,"date")){var O;o instanceof Date?O=o:O=new Date(o),mn.type(r,O,_,f,g),O&&mn.range(r,O.getTime(),_,f,g)}}u(f)}function WD(r,o,u,_,g){var f=[],k=Array.isArray(o)?"array":typeof o;mn.required(r,o,_,f,g,k),u(f)}function sy(r,o,u,_,g){var f=r.type,k=[],O=r.required||!r.required&&_.hasOwnProperty(r.field);if(O){if(Ei(o,f)&&!r.required)return u();mn.required(r,o,_,k,g,f),Ei(o,f)||mn.type(r,o,_,k,g)}u(k)}function jD(r,o,u,_,g){var f=[],k=r.required||!r.required&&_.hasOwnProperty(r.field);if(k){if(Ei(o)&&!r.required)return u();mn.required(r,o,_,f,g)}u(f)}var Ih={string:ND,method:RD,number:DD,boolean:LD,regexp:BD,integer:OD,float:VD,array:FD,object:UD,enum:$D,pattern:HD,date:GD,url:sy,hex:sy,email:sy,required:WD,any:jD};function ay(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var oy=ay();function po(r){this.rules=null,this._messages=oy,this.define(r)}po.prototype={messages:function(r){return r&&(this._messages=DC(ay(),r)),this._messages},define:function(r){if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={};var o,u;for(o in r)r.hasOwnProperty(o)&&(u=r[o],this.rules[o]=Array.isArray(u)?u:[u])},validate:function(r,o,u){var _=this;o===void 0&&(o={}),u===void 0&&(u=function(){});var g=r,f=o,k=u;if(typeof f=="function"&&(k=f,f={}),!this.rules||Object.keys(this.rules).length===0)return k&&k(),Promise.resolve();function O(me){var ie,Pe=[],At={};function ut(mt){if(Array.isArray(mt)){var We;Pe=(We=Pe).concat.apply(We,mt)}else Pe.push(mt)}for(ie=0;ie<me.length;ie++)ut(me[ie]);Pe.length?At=iy(Pe):(Pe=null,At=null),k(Pe,At)}if(f.messages){var G=this.messages();G===oy&&(G=ay()),DC(G,f.messages),f.messages=G}else f.messages=this.messages();var z,j,ae={},_e=f.keys||Object.keys(this.rules);_e.forEach(function(me){z=_.rules[me],j=g[me],z.forEach(function(ie){var Pe=ie;typeof Pe.transform=="function"&&(g===r&&(g=xl({},g)),j=g[me]=Pe.transform(j)),typeof Pe=="function"?Pe={validator:Pe}:Pe=xl({},Pe),Pe.validator=_.getValidationMethod(Pe),Pe.field=me,Pe.fullField=Pe.fullField||me,Pe.type=_.getType(Pe),Pe.validator&&(ae[me]=ae[me]||[],ae[me].push({rule:Pe,value:j,source:g,field:me}))})});var ye={};return MD(ae,f,function(me,ie){var Pe=me.rule,At=(Pe.type==="object"||Pe.type==="array")&&(typeof Pe.fields=="object"||typeof Pe.defaultField=="object");At=At&&(Pe.required||!Pe.required&&me.value),Pe.field=me.field;function ut(Ne,Ye){return xl({},Ye,{fullField:Pe.fullField+"."+Ne})}function mt(Ne){Ne===void 0&&(Ne=[]);var Ye=Ne;if(Array.isArray(Ye)||(Ye=[Ye]),!f.suppressWarning&&Ye.length&&po.warning("async-validator:",Ye),Ye.length&&Pe.message!==void 0&&(Ye=[].concat(Pe.message)),Ye=Ye.map(RC(Pe)),f.first&&Ye.length)return ye[Pe.field]=1,ie(Ye);if(!At)ie(Ye);else{if(Pe.required&&!me.value)return Pe.message!==void 0?Ye=[].concat(Pe.message).map(RC(Pe)):f.error&&(Ye=[f.error(Pe,Wr(f.messages.required,Pe.field))]),ie(Ye);var Ke={};if(Pe.defaultField)for(var Dt in me.value)me.value.hasOwnProperty(Dt)&&(Ke[Dt]=Pe.defaultField);Ke=xl({},Ke,me.rule.fields);for(var Lt in Ke)if(Ke.hasOwnProperty(Lt)){var xt=Array.isArray(Ke[Lt])?Ke[Lt]:[Ke[Lt]];Ke[Lt]=xt.map(ut.bind(null,Lt))}var gt=new po(Ke);gt.messages(f.messages),me.rule.options&&(me.rule.options.messages=f.messages,me.rule.options.error=f.error),gt.validate(me.value,me.rule.options||f,function(Et){var Ot=[];Ye&&Ye.length&&Ot.push.apply(Ot,Ye),Et&&Et.length&&Ot.push.apply(Ot,Et),ie(Ot.length?Ot:null)})}}var We;Pe.asyncValidator?We=Pe.asyncValidator(Pe,me.value,mt,me.source,f):Pe.validator&&(We=Pe.validator(Pe,me.value,mt,me.source,f),We===!0?mt():We===!1?mt(Pe.message||Pe.field+" fails"):We instanceof Array?mt(We):We instanceof Error&&mt(We.message)),We&&We.then&&We.then(function(){return mt()},function(Ne){return mt(Ne)})},function(me){O(me)})},getType:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Ih.hasOwnProperty(r.type))throw new Error(Wr("Unknown rule type %s",r.type));return r.type||"string"},getValidationMethod:function(r){if(typeof r.validator=="function")return r.validator;var o=Object.keys(r),u=o.indexOf("message");return u!==-1&&o.splice(u,1),o.length===1&&o[0]==="required"?Ih.required:Ih[this.getType(r)]||!1}},po.register=function(r,o){if(typeof o!="function")throw new Error("Cannot register a validator by type, validator is not a function");Ih[r]=o},po.warning=wD,po.messages=oy,po.validators=Ih;const Nh="ivu-form-item";function BC(r,o){let u=r;o=o.replace(/\[(\w+)\]/g,".$1"),o=o.replace(/^\./,"");let _=o.split("."),g=0;for(let f=_.length;g<f-1;++g){let k=_[g];if(k in u)u=u[k];else throw new Error("[View UI warn]: please transfer a valid prop path to form item!")}return{o:u,k:_[g],v:u[_[g]]}}const KD={name:"FormItem",inject:["FormInstance"],provide(){return{FormItemInstance:this}},props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0},labelFor:{type:String}},data(){return{prefixCls:Nh,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:{handler(r){this.validateMessage=r,this.validateState=r?"error":""},immediate:!0},validateStatus(r){this.validateState=r},rules(){this.setRules()},required(r,o){this.isRequired=r,o&&!r&&this.resetField()}},computed:{classes(){return[`${Nh}`,{[`${Nh}-required`]:this.required||this.isRequired,[`${Nh}-error`]:this.validateState==="error",[`${Nh}-validating`]:this.validateState==="validating"}]},fieldValue(){const r=this.FormInstance.model;if(!r||!this.prop)return;let o=this.prop;return o.indexOf(":")!==-1&&(o=o.replace(/:/,".")),BC(r,o).v},labelStyles(){let r={};const o=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(o||o===0)&&(r.width=`${o}px`),r},contentStyles(){let r={};const o=this.labelWidth===0||this.labelWidth?this.labelWidth:this.FormInstance.labelWidth;return(o||o===0)&&(r.marginLeft=`${o}px`),r}},methods:{setRules(){let r=this.getRules();r.length&&this.required||(r.length?r.every(o=>{this.isRequired=o.required}):this.required&&(this.isRequired=this.required))},getRules(){let r=this.FormInstance.rules;const o=this.rules;return r=r?r[this.prop]:[],[].concat(o||r||[])},getFilteredRule(r){return this.getRules().filter(o=>!o.trigger||o.trigger.indexOf(r)!==-1)},validate(r,o=function(){}){let u=this.getFilteredRule(r);if(!u||u.length===0)if(this.required)u=[{required:!0}];else return o(),!0;this.validateState="validating";let _={};_[this.prop]=u;const g=new po(_);let f={};f[this.prop]=this.fieldValue,g.validate(f,{firstFields:!0},k=>{this.validateState=k?"error":"success",this.validateMessage=k?k[0].message:"",o(this.validateMessage),this.FormInstance&&this.FormInstance.$emit("on-validate",this.prop,!k,this.validateMessage||null)}),this.validateDisabled=!1},resetField(){this.validateState="",this.validateMessage="";let r=this.FormInstance.model,o=this.fieldValue,u=this.prop;u.indexOf(":")!==-1&&(u=u.replace(/:/,"."));let _=BC(r,u);Array.isArray(o)&&this.initialValue!==null?(this.validateDisabled=!0,_.o[_.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,_.o[_.k]=this.initialValue)},onFieldBlur(){this.validate("blur")},onFieldChange(){if(this.validateDisabled){this.validateDisabled=!1;return}this.validate("change")},formBlur(){this.onFieldBlur()},formChange(){this.onFieldChange()}},mounted(){this.prop&&(this.FormInstance.addField(this),Object.defineProperty(this,"initialValue",{value:this.fieldValue}),this.setRules())},beforeUnmount(){this.FormInstance.removeField(this)}},qD=["for"];function XD(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[u.label||r.$slots.label?(t.openBlock(),t.createElementBlock("label",{key:0,class:t.normalizeClass([g.prefixCls+"-label"]),for:u.labelFor,style:t.normalizeStyle(f.labelStyles)},[t.renderSlot(r.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(u.label)+t.toDisplayString(f.FormInstance.colon),1)])],14,qD)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content"]),style:t.normalizeStyle(f.contentStyles)},[t.renderSlot(r.$slots,"default"),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[g.validateState==="error"&&u.showMessage&&f.FormInstance.showMessage?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-error-tip"])},t.toDisplayString(g.validateMessage),3)):t.createCommentVNode("",!0)]),_:1})],6)],2)}var Yp=c(KD,[["render",XD]]),ly={UserName:"",Password:"",Email:"",Mobile:"",Captcha:""},Rh={inject:["LoginInstance"],emits:["on-change"],props:{rules:{type:[Object,Array],default(){const r=t.getCurrentInstance().type.name;return[{required:!0,message:ly[r],trigger:"change"}]}},value:{type:String},name:{type:String,required:!0},enterToSubmit:{type:Boolean,default:!1}},data(){return{prop:""}},methods:{handleChange(r){this.LoginInstance.formValidate[this.prop]=r,this.$emit("on-change",r)},handleEnter(){this.enterToSubmit&&this.LoginInstance.handleSubmit()},handleSetValue(){const r=this.$props;r.value&&(this.LoginInstance.formValidate[this.prop]=r.value)},handleGetProps(){let r=this.$props.name;const o={prefix:this.prefix,placeholder:this.placeholder,type:this.type,size:"large",modelValue:this.LoginInstance.formValidate[this.prop]};return r&&(o.name=r),Object.assign(o,this.$attrs)}},render(){const r=this.handleGetProps(),o=t.h(hs,{...r,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),u=t.h(Yp,{prop:this.prop,rules:this.rules},()=>[o]);return t.h("div",{class:this.className},[u])},created(){const r=this.name,o=Object.assign({},this.LoginInstance.formValidate);o[r]="",this.LoginInstance.formValidate=o,this.prop=r,this.handleSetValue()}};const OC={name:"Captcha",mixins:[Rh],emits:["on-get-captcha"],props:{field:{type:[String,Array]},countDown:{type:Number,default:60},text:{type:String},unitText:{type:String,default:""},beforeClick:Function},data(){return{className:"ivu-login-captcha",prefix:"ios-keypad-outline",placeholder:"",type:"text",buttonDisabled:!1,limitCountDown:0}},methods:{handleClickCaptcha(){if(this.field){const r=typeof this.field=="string"?[this.field]:this.field;this.LoginInstance.handleValidate(r,o=>{o&&this.handleBeforeGetCaptcha()})}else this.handleBeforeGetCaptcha()},handleBeforeGetCaptcha(){if(!this.beforeClick)return this.handleGetCaptcha();const r=this.beforeClick();r&&r.then?r.then(()=>{this.handleGetCaptcha()}):this.handleGetCaptcha()},handleGetCaptcha(){this.countDown>0&&(this.buttonDisabled=!0,this.limitCountDown=this.countDown,this.handleCountDown()),this.$emit("on-get-captcha",this.LoginInstance.formValidate[this.prop],JSON.parse(JSON.stringify(this.LoginInstance.formValidate)))},handleCountDown(){this.timer=setTimeout(()=>{this.limitCountDown--,this.limitCountDown===0?(this.buttonDisabled=!1,clearTimeout(this.timer)):this.handleCountDown()},1e3)}},render(){const r=this.$attrs,o=this.handleGetProps(),u={size:"large",type:"default",long:!0,disabled:this.buttonDisabled};"size"in r&&(u.size=r.size),"button-type"in r&&(u.type=r["button-type"]);let _;this.$slots.text?_=this.$slots.text:this.limitCountDown!==0?_=()=>`${this.limitCountDown} ${this.unitText}`:this.text?_=()=>this.text:_=()=>"";const g=t.h(ar,{...u,onClick:this.handleClickCaptcha},_),f=t.h(hs,{...o,"onUpdate:modelValue":this.handleChange,"onOn-enter":this.handleEnter}),k=t.h(Js,{span:16},()=>[f]),O=t.h(Js,{span:8},()=>[g]),G=t.h(fo,{gutter:8},()=>[k,O]),z=t.h(Yp,{prop:this.prop,rules:this.rules},()=>[G]);return t.h("div",{class:this.className},[z])},beforeUnmount(){this.timer&&clearTimeout(this.timer)}},wl="ivu-card",VC=16,YD={name:"Card",mixins:[fe],components:{Icon:E},props:{bordered:{type:Boolean,default:!0},disHover:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},padding:{type:Number,default:VC},title:{type:String},icon:{type:String}},data(){return{showHead:!0,showExtra:!0}},computed:{classes(){return[`${wl}`,{[`${wl}-bordered`]:this.bordered&&!this.shadow,[`${wl}-dis-hover`]:this.disHover||this.shadow,[`${wl}-shadow`]:this.shadow}]},headClasses(){return`${wl}-head`},extraClasses(){return`${wl}-extra`},bodyClasses(){return`${wl}-body`},bodyStyles(){return this.padding!==VC?{padding:`${this.padding}px`}:""},isHrefPattern(){const{to:r}=this;return!!r},tagName(){const{isHrefPattern:r}=this;return r?"a":"div"},tagProps(){const{isHrefPattern:r}=this;if(r){const{linkUrl:o,target:u}=this;return{href:o,target:u}}else return{}}},methods:{handleClickLink(r){if(!this.isHrefPattern)return;const o=r.ctrlKey||r.metaKey;this.handleCheckClick(r,o)}},mounted(){this.showHead=this.title||this.$slots.title!==void 0,this.showExtra=this.$slots.extra!==void 0}},JD={key:0};function ZD(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.resolveDynamicComponent(f.tagName),t.mergeProps({class:f.classes},f.tagProps,{onClick:f.handleClickLink}),{default:t.withCtx(()=>[g.showHead?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.headClasses)},[t.renderSlot(r.$slots,"title",{},()=>[u.title?(t.openBlock(),t.createElementBlock("p",JD,[u.icon?(t.openBlock(),t.createBlock(k,{key:0,type:u.icon},null,8,["type"])):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(u.title),1)])):t.createCommentVNode("",!0)])],2)):t.createCommentVNode("",!0),g.showExtra?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(f.extraClasses)},[t.renderSlot(r.$slots,"extra")],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(f.bodyClasses),style:t.normalizeStyle(f.bodyStyles)},[t.renderSlot(r.$slots,"default")],6)]),_:3},16,["class","onClick"])}var FC=c(YD,[["render",ZD]]);const Bc="ivu-carousel",QD={name:"Carousel",provide(){return{CarouselInstance:this}},components:{Icon:E},emits:["on-change","on-click","update:modelValue"],props:{arrow:{type:String,default:"hover",validator(r){return w(r,["hover","always","never"])}},autoplay:{type:Boolean,default:!1},autoplaySpeed:{type:Number,default:2e3},loop:{type:Boolean,default:!1},easing:{type:String,default:"ease"},dots:{type:String,default:"inside",validator(r){return w(r,["inside","outside","none"])}},radiusDot:{type:Boolean,default:!1},trigger:{type:String,default:"click",validator(r){return w(r,["click","hover"])}},modelValue:{type:Number,default:0},height:{type:[String,Number],default:"auto",validator(r){return r==="auto"||Object.prototype.toString.call(r)==="[object Number]"}}},data(){return{prefixCls:Bc,listWidth:0,trackWidth:0,trackOffset:0,trackCopyOffset:0,showCopyTrack:!1,slides:[],slideInstances:[],timer:null,ready:!1,currentIndex:this.modelValue,trackIndex:this.modelValue,copyTrackIndex:this.modelValue,hideTrackPos:-1,carouselItemList:[]}},computed:{classes(){return[`${Bc}`]},trackStyles(){const r=this.trackIndex===-1?"hidden":"visible";return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,visibility:r}},copyTrackStyles(){return{width:`${this.trackWidth}px`,transform:`translate3d(${-this.trackCopyOffset}px, 0px, 0px)`,transition:`transform 500ms ${this.easing}`,position:"absolute"}},arrowClasses(){return[`${Bc}-arrow`,`${Bc}-arrow-${this.arrow}`]},dotsClasses(){return[`${Bc}-dots`,`${Bc}-dots-${this.dots}`]}},methods:{findChild(r){this.carouselItemList.length&&this.carouselItemList.forEach(o=>{r(o.carouselItem)})},initCopyTrackDom(){t.nextTick(()=>{this.$refs.copyTrack.innerHTML=this.$refs.originTrack.innerHTML})},updateSlides(r){let o=[],u=1;this.findChild(_=>{o.push({$el:_.$el}),_.index=u++,r&&this.slideInstances.push(_)}),this.slides=o,this.updatePos()},updatePos(){this.findChild(r=>{r.width=this.listWidth,r.height=typeof this.height=="number"?`${this.height}px`:this.height}),this.trackWidth=(this.slides.length||0)*this.listWidth},slotChange(){t.nextTick(()=>{this.slides=[],this.slideInstances=[],this.updateSlides(!0,!0),this.updatePos(),this.updateOffset()})},handleResize(){this.listWidth=parseInt(N(this.$el,"width")),this.updatePos(),this.updateOffset()},updateTrackPos(r){this.showCopyTrack?this.trackIndex=r:this.copyTrackIndex=r},updateTrackIndex(r){this.showCopyTrack?this.copyTrackIndex=r:this.trackIndex=r,this.currentIndex=r},add(r){let o=this.slides.length;this.loop&&(r>0?this.hideTrackPos=-1:this.hideTrackPos=o,this.updateTrackPos(this.hideTrackPos));const u=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;let _=u+r;for(;_<0;)_+=o;(r>0&&_===o||r<0&&_===o-1)&&this.loop?(this.showCopyTrack=!this.showCopyTrack,this.trackIndex+=r,this.copyTrackIndex+=r):(this.loop||(_=_%this.slides.length),this.updateTrackIndex(_)),this.currentIndex=_===this.slides.length?0:_,this.$emit("on-change",u,this.currentIndex),this.$emit("update:modelValue",this.currentIndex)},arrowEvent(r){this.setAutoplay(),this.add(r)},dotsEvent(r,o){let u=this.showCopyTrack?this.copyTrackIndex:this.trackIndex;const _=this.currentIndex;r===this.trigger&&u!==o&&(this.updateTrackIndex(o),this.$emit("on-change",_,this.currentIndex),this.$emit("update:modelValue",o),this.setAutoplay())},setAutoplay(){!s||(window.clearInterval(this.timer),this.autoplay&&(this.timer=window.setInterval(()=>{this.add(1)},this.autoplaySpeed)))},updateOffset(){t.nextTick(()=>{let r=this.copyTrackIndex>0?-1:1;this.trackOffset=this.trackIndex*this.listWidth,this.trackCopyOffset=this.copyTrackIndex*this.listWidth+r})},handleClick(r){this.$emit("on-click",this[r])}},watch:{autoplay(){this.setAutoplay()},autoplaySpeed(){this.setAutoplay()},trackIndex(){this.updateOffset()},copyTrackIndex(){this.updateOffset()},height(){this.updatePos()},modelValue(r){this.updateTrackIndex(r),this.setAutoplay()}},mounted(){this.updateSlides(!0),this.handleResize(),this.setAutoplay(),a(window,"resize",this.handleResize)},beforeUnmount(){l(window,"resize",this.handleResize)}},eL=["onClick","onMouseover"];function tL(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.createElementVNode("button",{type:"button",class:t.normalizeClass([f.arrowClasses,"left"]),onClick:o[0]||(o[0]=O=>f.arrowEvent(-1))},[t.createVNode(k,{type:"ios-arrow-back"})],2),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-list"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-track",g.showCopyTrack?"":"higher"]),style:t.normalizeStyle(f.trackStyles),ref:"originTrack",onClick:o[1]||(o[1]=O=>f.handleClick("currentIndex"))},[t.renderSlot(r.$slots,"default")],6),u.loop?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-track",g.showCopyTrack?"higher":""]),style:t.normalizeStyle(f.copyTrackStyles),ref:"copyTrack",onClick:o[2]||(o[2]=O=>f.handleClick("copyTrackIndex"))},null,6)):t.createCommentVNode("",!0)],2),t.createElementVNode("button",{type:"button",class:t.normalizeClass([f.arrowClasses,"right"]),onClick:o[3]||(o[3]=O=>f.arrowEvent(1))},[t.createVNode(k,{type:"ios-arrow-forward"})],2),t.createElementVNode("ul",{class:t.normalizeClass(f.dotsClasses)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.slides.length,O=>(t.openBlock(),t.createElementBlock("li",{key:O,class:t.normalizeClass([O-1===g.currentIndex?g.prefixCls+"-active":""]),onClick:G=>f.dotsEvent("click",O-1),onMouseover:G=>f.dotsEvent("hover",O-1)},[t.createElementVNode("button",{type:"button",class:t.normalizeClass([u.radiusDot?"radius":""])},null,2)],42,eL))),128))],2)],2)}var UC=c(QD,[["render",tL]]);const nL="ivu-carousel-item",iL={componentName:"carousel-item",name:"CarouselItem",inject:["CarouselInstance"],data(){return{prefixCls:nL,width:0,height:"auto",left:0,id:te(6)}},computed:{styles(){return{width:`${this.width}px`,height:`${this.height}`,left:`${this.left}px`}}},watch:{width(r){r&&this.CarouselInstance.loop&&t.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})},height(r){r&&this.CarouselInstance.loop&&t.nextTick(()=>{this.CarouselInstance.initCopyTrackDom()})}},methods:{addInstance(){const r=this.CarouselInstance;r.carouselItemList||(r.carouselItemList=[]),r.carouselItemList.push({id:this.id,carouselItem:this})},removeInstance(){const r=this.CarouselInstance;if(!r.carouselItemList)return;const o=r.carouselItemList.findIndex(u=>u.id===this.id);r.carouselItemList.splice(o,1)}},mounted(){this.addInstance(),this.CarouselInstance.slotChange()},beforeUnmount(){this.removeInstance(),this.CarouselInstance.slotChange()}};function rL(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(g.prefixCls),style:t.normalizeStyle(f.styles)},[t.renderSlot(r.$slots,"default")],6)}var zC=c(iL,[["render",rL]]);const sL={name:"Casitem",components:{Icon:E},mixins:[Ms],props:{data:Object,prefixCls:String,tmpItem:Object},computed:{classes(){return[`${this.prefixCls}-menu-item`,{[`${this.prefixCls}-menu-item-active`]:this.tmpItem.value===this.data.value,[`${this.prefixCls}-menu-item-disabled`]:this.data.disabled}]},showArrow(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},arrowType(){const r=this.globalConfig;let o="ios-arrow-forward";return r&&(r.cascader.customItemArrow?o="":r.cascader.itemArrow&&(o=r.cascader.itemArrow)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.cascader.customItemArrow&&(o=r.cascader.customItemArrow),o},arrowSize(){const r=this.globalConfig;let o="";return r&&r.cascader.itemArrowSize&&(o=r.cascader.itemArrowSize),o}}},aL={key:1,class:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"};function oL(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.classes)},[t.createTextVNode(t.toDisplayString(u.data.label)+" ",1),f.showArrow?(t.openBlock(),t.createBlock(k,{key:0,type:f.arrowType,custom:f.customArrowType,size:f.arrowSize},null,8,["type","custom","size"])):t.createCommentVNode("",!0),f.showLoading?(t.openBlock(),t.createElementBlock("i",aL)):t.createCommentVNode("",!0)],2)}var lL=c(sL,[["render",oL]]);let cL=1;const uL={name:"Caspanel",components:{Casitem:lL},inject:["CascaderInstance"],provide(){return{CaspanelInstance:this}},props:{data:{type:Array,default(){return[]}},disabled:Boolean,changeOnSelect:Boolean,trigger:String,prefixCls:String},data(){return{tmpItem:{},result:[],sublist:[],id:te(6),childCaspanelList:[]}},watch:{data(){this.sublist=[]}},methods:{handleClickItem(r){this.trigger!=="click"&&r.children&&r.children.length||this.handleTriggerItem(r,!1,!0)},handleHoverItem(r){this.trigger!=="hover"||!r.children||!r.children.length||this.handleTriggerItem(r,!1,!0)},handleTriggerItem(r,o=!1,u=!1){if(r.disabled)return;const _=B(this,"Cascader");if(r.loading!==void 0&&!r.children.length&&_&&_.loadData){_.loadData(r,()=>{u&&(_.isLoadedChildren=!0),r.children.length&&this.handleTriggerItem(r)});return}const g=this.getBaseItem(r);(this.changeOnSelect||g.label!==this.tmpItem.label||g.value!==this.tmpItem.value||g.label===this.tmpItem.label&&g.value===this.tmpItem.value)&&(this.tmpItem=g,this.emitUpdate([g])),r.children&&r.children.length?(this.sublist=r.children,this.CascaderInstance.handleOnResultChange({lastValue:!1,changeOnSelect:this.changeOnSelect,fromInit:o}),this.changeOnSelect&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)):(this.sublist=[],this.CascaderInstance.handleOnResultChange({lastValue:!0,changeOnSelect:this.changeOnSelect,fromInit:o})),_&&_.$refs.drop.update()},updateResult(r){this.result=[this.tmpItem].concat(r),this.emitUpdate(this.result)},getBaseItem(r){let o=Object.assign({},r);return o.children&&delete o.children,o},emitUpdate(r){this.$parent.$options.name==="Caspanel"?this.$parent.updateResult(r):this.CascaderInstance.updateResult(r)},getKey(){return cL++},handleOnFindSelected(r){let o=[...r.value];for(let u=0;u<o.length;u++)for(let _=0;_<this.data.length;_++)if(o[u]===this.data[_].value)return this.handleTriggerItem(this.data[_],!0),o.splice(0,1),t.nextTick(()=>{this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnFindSelected({value:o})}),!1},handleOnClear(r=!1){this.sublist=[],this.tmpItem={},r&&this.childCaspanelList.length&&this.childCaspanelList[0].caspanel.handleOnClear(!0)},addCaspanel(){const r=this.CascaderInstance;r.caspanelList||(r.caspanelList=[]),r.caspanelList.push({id:this.id,caspanel:this});const o=B(this,"Caspanel");o&&(o.childCaspanelList||(o.childCaspanelList=[]),o.childCaspanelList.push({id:this.id,caspanel:this}))},removeCaspanel(){const r=this.CascaderInstance;if(r.caspanelList&&r.caspanelList.length){const u=r.caspanelList.findIndex(_=>_.id===this.id);r.caspanelList.splice(u,1)}const o=B(this,"Caspanel");if(o&&o.childCaspanelList&&o.childCaspanelList.length){const u=o.childCaspanelList.findIndex(_=>_.id===this.id);o.childCaspanelList.splice(u,1)}}},mounted(){this.addCaspanel()},beforeUnmount(){this.removeCaspanel()}};function hL(r,o,u,_,g,f){const k=t.resolveComponent("Casitem"),O=t.resolveComponent("Caspanel",!0);return t.openBlock(),t.createElementBlock("span",null,[u.data&&u.data.length?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass([u.prefixCls+"-menu"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.data,(G,z)=>(t.openBlock(),t.createBlock(k,{key:z,"prefix-cls":u.prefixCls,data:G,"tmp-item":g.tmpItem,onClick:t.withModifiers(j=>f.handleClickItem(G),["stop"]),onMouseenter:t.withModifiers(j=>f.handleHoverItem(G),["stop"])},null,8,["prefix-cls","data","tmp-item","onClick","onMouseenter"]))),128))],2)):t.createCommentVNode("",!0),g.sublist&&g.sublist.length?(t.openBlock(),t.createBlock(O,{key:1,"prefix-cls":u.prefixCls,data:g.sublist,disabled:u.disabled,trigger:u.trigger,"change-on-select":u.changeOnSelect},null,8,["prefix-cls","data","disabled","trigger","change-on-select"])):t.createCommentVNode("",!0)])}var dL=c(uL,[["render",hL]]),cy={beforeMount(r,o,u){function _(g){if(r.contains(g.target))return!1;o.value(g)}r.__vueClickOutside__=_,s&&document.addEventListener("click",_)},unmounted(r,o){s&&document.removeEventListener("click",r.__vueClickOutside__),delete r.__vueClickOutside__}};const mo="ivu-cascader",fL="ivu-select",pL={name:"Cascader",mixins:[Pn,tn,Ms],components:{iInput:hs,Drop:je,Icon:E,Caspanel:dL},directives:{clickOutside:cy},emits:["on-change","on-visible-change","update:modelValue"],provide(){return{CascaderInstance:this}},props:{data:{type:Array,default(){return[]}},modelValue:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},trigger:{validator(r){return w(r,["click","hover"])},default:"click"},changeOnSelect:{type:Boolean,default:!1},renderFormat:{type:Function,default(r){return r.join(" / ")}},loadData:{type:Function},filterable:{type:Boolean,default:!1},notFoundText:{type:String},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},capture:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return r.$VIEWUI?r.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:mo,selectPrefixCls:fL,visible:!1,selected:[],tmpSelected:[],updatingValue:!1,currentValue:this.modelValue||[],query:"",validDataStr:"",isLoadedChildren:!1,isValueNull:!1,caspanelList:[]}},computed:{classes(){return[`${mo}`,{[`${mo}-show-clear`]:this.showCloseIcon,[`${mo}-size-${this.size}`]:!!this.size,[`${mo}-visible`]:this.visible,[`${mo}-disabled`]:this.itemDisabled,[`${mo}-not-found`]:this.filterable&&this.query!==""&&!this.querySelections.length}]},showCloseIcon(){return this.currentValue&&this.currentValue.length&&this.clearable&&!this.itemDisabled},displayRender(){let r=[];for(let o=0;o<this.selected.length;o++)r.push(this.selected[o].label);return this.renderFormat(r,this.selected)},displayInputRender(){return this.filterable?"":this.displayRender},localePlaceholder(){return this.placeholder===void 0?this.t("i.select.placeholder"):this.placeholder},inputPlaceholder(){return this.filterable&&this.currentValue.length?null:this.localePlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.select.noMatch"):this.notFoundText},querySelections(){let r=[];function o(u,_,g){const f=V(u);for(let k=0;k<f.length;k++){let O=f[k];O.__label=_?_+" / "+O.label:O.label,O.__value=g?g+","+O.value:O.value,O.children&&O.children.length?(o(O.children,O.__label,O.__value),delete O.__label,delete O.__value):r.push({label:O.__label,value:O.__value,display:O.__label,item:O,disabled:!!O.disabled})}}return o(this.data),r=r.filter(u=>u.label?u.label.indexOf(this.query)>-1:!1).map(u=>(u.display=u.display.replace(new RegExp(this.query,"g"),`<span>${this.query}</span>`),u)),r},arrowType(){const r=this.globalConfig;let o="ios-arrow-down";return r&&(r.cascader.customArrow?o="":r.cascader.arrow&&(o=r.cascader.arrow)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.cascader.customArrow&&(o=r.cascader.customArrow),o},arrowSize(){const r=this.globalConfig;let o="";return r&&r.cascader.arrowSize&&(o=r.cascader.arrowSize),o},dropdownCls(){return{[mo+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{clearSelect(){if(this.itemDisabled)return!1;const r=JSON.stringify(this.currentValue);this.currentValue=this.selected=this.tmpSelected=[],this.handleClose(),this.emitValue(this.currentValue,r),this.caspanelList.forEach(o=>{o.caspanel.handleOnClear()})},handleClose(){this.visible=!1},toggleOpen(){if(this.itemDisabled)return!1;this.visible?this.filterable||this.handleClose():this.onFocus()},onFocus(){this.visible=!0,this.currentValue.length||this.caspanelList.forEach(r=>{r.caspanel.handleOnClear()})},updateResult(r){this.tmpSelected=r},updateSelected(r=!1,o=!1){(!this.changeOnSelect||r||o)&&this.caspanelList.forEach(u=>{u.caspanel.handleOnFindSelected({value:this.currentValue})})},emitValue(r,o){JSON.stringify(r)!==o&&(this.$emit("on-change",this.currentValue,JSON.parse(JSON.stringify(this.selected))),t.nextTick(()=>{this.handleFormItemChange("change",{value:this.currentValue,selected:JSON.parse(JSON.stringify(this.selected))})}))},handleInput(r){this.query=r.target.value},handleSelectItem(r){const o=this.querySelections[r];if(o.item.disabled)return!1;this.query="",this.$refs.input.currentValue="";const u=JSON.stringify(this.currentValue);this.currentValue=o.value.split(","),setTimeout(()=>{this.emitValue(this.currentValue,u),this.handleClose()},0)},handleFocus(){this.$refs.input.focus()},getValidData(r){const o=V(r);function u(_){const g=Object.assign({},_);return"loading"in g&&delete g.loading,"__value"in g&&delete g.__value,"__label"in g&&delete g.__label,"children"in g&&g.children.length&&(g.children=g.children.map(f=>u(f))),g}return o.map(_=>u(_))},handleOnResultChange(r){const o=r.lastValue,u=r.changeOnSelect,_=r.fromInit;if(o||u){const g=JSON.stringify(this.currentValue);this.selected=this.tmpSelected;let f=[];this.selected.forEach(k=>{f.push(k.value)}),_||(this.updatingValue=!0,this.currentValue=f,this.emitValue(this.currentValue,g))}o&&!_&&this.handleClose()}},created(){this.validDataStr=JSON.stringify(this.getValidData(this.data))},mounted(){this.updateSelected(!0)},watch:{visible(r){r?(this.currentValue.length&&this.updateSelected(),this.transfer&&this.$refs.drop.update(),this.$refs.drop.handleOnUpdatePopper()):(this.filterable&&(this.query="",this.$refs.input.currentValue=""),this.transfer&&this.$refs.drop.destroy(),this.$refs.drop.handleOnDestroyPopper()),this.$emit("on-visible-change",r)},modelValue(r){r===null&&(this.isValueNull=!0),this.currentValue=r||[],(r===null||!r.length)&&(this.selected=[])},currentValue(){if(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",this.currentValue),this.updatingValue){this.updatingValue=!1;return}this.updateSelected(!0)},data:{deep:!0,handler(){const r=JSON.stringify(this.getValidData(this.data));r!==this.validDataStr&&(this.validDataStr=r,this.isLoadedChildren||t.nextTick(()=>this.updateSelected(!1,this.changeOnSelect)),this.isLoadedChildren=!1)}}}},mL=["name","value"],gL=["onClick","innerHTML"];function vL(r,o,u,_,g,f){const k=t.resolveComponent("i-input"),O=t.resolveComponent("Icon"),G=t.resolveComponent("Caspanel"),z=t.resolveComponent("Drop"),j=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-rel"]),onClick:o[1]||(o[1]=(...ae)=>f.toggleOpen&&f.toggleOpen(...ae)),ref:"reference"},[t.createElementVNode("input",{type:"hidden",name:u.name,value:g.currentValue},null,8,mL),t.renderSlot(r.$slots,"default",{},()=>[t.createVNode(k,{"element-id":u.elementId,ref:"input",readonly:!u.filterable,disabled:r.itemDisabled,modelValue:f.displayInputRender,onOnChange:f.handleInput,size:u.size,placeholder:f.inputPlaceholder},null,8,["element-id","readonly","disabled","modelValue","onOnChange","size","placeholder"]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-label"]),onClick:o[0]||(o[0]=(...ae)=>f.handleFocus&&f.handleFocus(...ae))},t.toDisplayString(f.displayRender),3),[[t.vShow,u.filterable&&g.query===""]]),t.withDirectives(t.createVNode(O,{type:"ios-close-circle",class:t.normalizeClass([g.prefixCls+"-arrow"]),onClick:t.withModifiers(f.clearSelect,["stop"])},null,8,["class","onClick"]),[[t.vShow,f.showCloseIcon]]),t.createVNode(O,{type:f.arrowType,custom:f.customArrowType,size:f.arrowSize,class:t.normalizeClass([g.prefixCls+"-arrow"])},null,8,["type","custom","size","class"])])],2),t.createVNode(z,{ref:"drop",visible:g.visible,classes:f.dropdownCls,eventsEnabled:u.eventsEnabled,"transition-name":"transition-drop",transfer:u.transfer},{default:t.withCtx(()=>[t.createElementVNode("div",null,[t.withDirectives(t.createVNode(G,{ref:"caspanel","prefix-cls":g.prefixCls,data:u.data,disabled:r.itemDisabled,"change-on-select":u.changeOnSelect,trigger:u.trigger},null,8,["prefix-cls","data","disabled","change-on-select","trigger"]),[[t.vShow,!u.filterable||u.filterable&&g.query===""]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-dropdown"])},[t.createElementVNode("ul",{class:t.normalizeClass([g.selectPrefixCls+"-dropdown-list"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.querySelections,(ae,_e)=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([g.selectPrefixCls+"-item",{[g.selectPrefixCls+"-item-disabled"]:ae.disabled}]),key:_e,onClick:ye=>f.handleSelectItem(_e),innerHTML:ae.display},null,10,gL))),128))],2)],2),[[t.vShow,u.filterable&&g.query!==""&&f.querySelections.length]]),t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls+"-not-found-tip"])},[t.createElementVNode("li",null,t.toDisplayString(f.localeNotFoundText),1)],2),[[t.vShow,u.filterable&&g.query!==""&&!f.querySelections.length||!u.data.length]])])]),_:1},8,["visible","classes","eventsEnabled","transfer"])],2)),[[j,f.handleClose]])}var $C=c(pL,[["render",vL]]);const yL={name:"CellItem",props:{title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""}}},bL={class:"ivu-cell-item"},_L={class:"ivu-cell-icon"},xL={class:"ivu-cell-main"},wL={class:"ivu-cell-title"},CL={class:"ivu-cell-label"},SL={class:"ivu-cell-footer"},EL={class:"ivu-cell-extra"};function ML(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",bL,[t.createElementVNode("div",_L,[t.renderSlot(r.$slots,"icon")]),t.createElementVNode("div",xL,[t.createElementVNode("div",wL,[t.renderSlot(r.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])]),t.createElementVNode("div",CL,[t.renderSlot(r.$slots,"label",{},()=>[t.createTextVNode(t.toDisplayString(u.label),1)])])]),t.createElementVNode("div",SL,[t.createElementVNode("span",EL,[t.renderSlot(r.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(u.extra),1)])])])])}var TL=c(yL,[["render",ML]]);const Dh="ivu-cell",kL={name:"Cell",inject:["CellGroupInstance"],mixins:[fe,Ms],components:{CellItem:TL,Icon:E},props:{name:{type:[String,Number]},title:{type:String,default:""},label:{type:String,default:""},extra:{type:String,default:""},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1}},data(){return{prefixCls:Dh}},computed:{classes(){return[`${Dh}`,{[`${Dh}-disabled`]:this.disabled,[`${Dh}-selected`]:this.selected,[`${Dh}-with-link`]:this.to}]},arrowType(){const r=this.globalConfig;let o="ios-arrow-forward";return r&&(r.cell.customArrow?o="":r.cell.arrow&&(o=r.cell.arrow)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.cell.customArrow&&(o=r.cell.customArrow),o},arrowSize(){const r=this.globalConfig;let o="";return r&&r.cell.arrowSize&&(o=r.cell.arrowSize),o}},methods:{handleClickItem(r,o){this.CellGroupInstance.handleClick(this.name),this.handleCheckClick(r,o)}}},AL=["href","target"],PL={key:2,class:"ivu-cell-arrow"};function IL(r,o,u,_,g,f){const k=t.resolveComponent("CellItem"),O=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[r.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:r.linkUrl,target:r.target,class:"ivu-cell-link",onClick:[o[0]||(o[0]=t.withModifiers(G=>f.handleClickItem(G,!1),["exact"])),o[1]||(o[1]=t.withModifiers(G=>f.handleClickItem(G,!0),["ctrl"])),o[2]||(o[2]=t.withModifiers(G=>f.handleClickItem(G,!0),["meta"]))]},[t.createVNode(k,{title:u.title,label:u.label,extra:u.extra},{icon:t.withCtx(()=>[t.renderSlot(r.$slots,"icon")]),default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),extra:t.withCtx(()=>[t.renderSlot(r.$slots,"extra")]),label:t.withCtx(()=>[t.renderSlot(r.$slots,"label")]),_:3},8,["title","label","extra"])],8,AL)):(t.openBlock(),t.createElementBlock("div",{key:1,class:"ivu-cell-link",onClick:o[3]||(o[3]=(...G)=>f.handleClickItem&&f.handleClickItem(...G))},[t.createVNode(k,{title:u.title,label:u.label,extra:u.extra},{icon:t.withCtx(()=>[t.renderSlot(r.$slots,"icon")]),default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),extra:t.withCtx(()=>[t.renderSlot(r.$slots,"extra")]),label:t.withCtx(()=>[t.renderSlot(r.$slots,"label")]),_:3},8,["title","label","extra"])])),r.to?(t.openBlock(),t.createElementBlock("div",PL,[t.renderSlot(r.$slots,"arrow",{},()=>[t.createVNode(O,{type:f.arrowType,custom:f.customArrowType,size:f.arrowSize},null,8,["type","custom","size"])])])):t.createCommentVNode("",!0)],2)}var HC=c(kL,[["render",IL]]);const NL={name:"CellGroup",emits:["on-click"],provide(){return{CellGroupInstance:this}},methods:{handleClick(r){this.$emit("on-click",r)}}},RL={class:"ivu-cell-group"};function DL(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",RL,[t.renderSlot(r.$slots,"default")])}var GC=c(NL,[["render",DL]]);const jr="ivu-checkbox",LL={name:"Checkbox",mixins:[tn],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[`${jr}-wrapper`,{[`${jr}-group-item`]:this.group,[`${jr}-wrapper-checked`]:this.currentValue,[`${jr}-wrapper-disabled`]:this.itemDisabled,[`${jr}-${this.size}`]:!!this.size,[`${jr}-border`]:this.border}]},checkboxClasses(){return[`${jr}`,{[`${jr}-checked`]:this.currentValue,[`${jr}-disabled`]:this.itemDisabled,[`${jr}-indeterminate`]:this.indeterminate}]},innerClasses(){return[`${jr}-inner`,{[`${jr}-focus`]:this.focusInner}]},inputClasses(){return`${jr}-input`},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=this.$slots.default!==void 0)},methods:{change(r){if(this.itemDisabled)return!1;const o=r.target.checked?this.trueValue:this.falseValue;this.$emit("update:modelValue",o),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",o),this.handleFormItemChange("change",o))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(r){if(!(r===this.trueValue||r===this.falseValue))throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(r){this.model=r||[]},immediate:!0}}},BL=["disabled","value","name"],OL=["disabled","checked","name"],VL={key:0,class:"ivu-checkbox-label-text"};function FL(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("label",{class:t.normalizeClass(f.wrapClasses)},[t.createElementVNode("span",{class:t.normalizeClass(f.checkboxClasses)},[t.createElementVNode("span",{class:t.normalizeClass(f.innerClasses)},null,2),f.group?t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:0,type:"checkbox",class:t.normalizeClass(f.inputClasses),disabled:r.itemDisabled,value:u.label,"onUpdate:modelValue":o[0]||(o[0]=k=>g.model=k),name:u.name,onChange:o[1]||(o[1]=(...k)=>f.change&&f.change(...k)),onFocus:o[2]||(o[2]=(...k)=>f.onFocus&&f.onFocus(...k)),onBlur:o[3]||(o[3]=(...k)=>f.onBlur&&f.onBlur(...k))},null,42,BL)),[[t.vModelCheckbox,g.model]]):(t.openBlock(),t.createElementBlock("input",{key:1,type:"checkbox",class:t.normalizeClass(f.inputClasses),disabled:r.itemDisabled,checked:f.currentValue,name:u.name,onChange:o[4]||(o[4]=(...k)=>f.change&&f.change(...k)),onFocus:o[5]||(o[5]=(...k)=>f.onFocus&&f.onFocus(...k)),onBlur:o[6]||(o[6]=(...k)=>f.onBlur&&f.onBlur(...k))},null,42,OL))],2),g.showSlot?(t.openBlock(),t.createElementBlock("span",VL,[t.renderSlot(r.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(u.label),1)])])):t.createCommentVNode("",!0)],2)}var Oc=c(LL,[["render",FL]]);const UL="ivu-checkbox-group",zL={name:"CheckboxGroup",mixins:[tn],emits:["update:modelValue","on-change"],provide(){return{CheckboxGroupInstance:this}},props:{modelValue:{type:Array,default(){return[]}},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}}},data(){return{currentValue:this.modelValue||[],children:[]}},computed:{classes(){return[`${UL}`,{[`ivu-checkbox-${this.size}`]:!!this.size}]}},methods:{change(r){this.currentValue=r,this.$emit("update:modelValue",r),this.$emit("on-change",r),this.handleFormItemChange("change",r)}}};function $L(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.renderSlot(r.$slots,"default")],2)}var uy=c(zL,[["render",$L]]);const WC="ivu-chart-circle",HL={name:"iCircle",props:{percent:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:6},strokeColor:{type:[String,Array],default:"#2d8cf0"},strokeLinecap:{validator(r){return w(r,["square","round"])},default:"round"},trailWidth:{type:Number,default:5},trailColor:{type:String,default:"#eaeef2"},dashboard:{type:Boolean,default:!1}},data(){return{id:`ivu-chart-circle-${te(3)}`}},computed:{circleSize(){return{width:`${this.size}px`,height:`${this.size}px`}},computedStrokeWidth(){return this.percent===0&&this.dashboard?0:this.strokeWidth},radius(){return 50-this.strokeWidth/2},pathString(){return this.dashboard?`M 50,50 m 0,${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}`:`M 50,50 m 0,-${this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,${2*this.radius}
                    a ${this.radius},${this.radius} 0 1 1 0,-${2*this.radius}`},len(){return Math.PI*2*this.radius},trailStyle(){let r={};return this.dashboard&&(r={"stroke-dasharray":`${this.len-75}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}),r},pathStyle(){let r={};return this.dashboard?r={"stroke-dasharray":`${this.percent/100*(this.len-75)}px ${this.len}px`,"stroke-dashoffset":`-${75/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .6s ease 0s, stroke .6s, stroke-width .06s ease .6s"}:r={"stroke-dasharray":`${this.len}px ${this.len}px`,"stroke-dashoffset":`${(100-this.percent)/100*this.len}px`,transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"},r},wrapClasses(){return`${WC}`},innerClasses(){return`${WC}-inner`},strokeValue(){let r=this.strokeColor;return typeof this.strokeColor!="string"&&(r=`url(#${this.id})`),r},showDefs(){return typeof this.strokeColor!="string"}}},GL={viewBox:"0 0 100 100"},WL={key:0},jL=["id"],KL=["stop-color"],qL=["stop-color"],XL=["d","stroke","stroke-width","stroke-linecap"],YL=["d","stroke-linecap","stroke","stroke-width"];function JL(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{style:t.normalizeStyle(f.circleSize),class:t.normalizeClass(f.wrapClasses)},[(t.openBlock(),t.createElementBlock("svg",GL,[f.showDefs?(t.openBlock(),t.createElementBlock("defs",WL,[t.createElementVNode("linearGradient",{id:g.id,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[t.createElementVNode("stop",{offset:"0%","stop-color":u.strokeColor[0]},null,8,KL),t.createElementVNode("stop",{offset:"100%","stop-color":u.strokeColor[1]},null,8,qL)],8,jL)])):t.createCommentVNode("",!0),t.createElementVNode("path",{d:f.pathString,stroke:u.trailColor,"stroke-width":u.trailWidth,"fill-opacity":0,style:t.normalizeStyle(f.trailStyle),"stroke-linecap":u.strokeLinecap},null,12,XL),t.createElementVNode("path",{d:f.pathString,"stroke-linecap":u.strokeLinecap,stroke:f.strokeValue,"stroke-width":f.computedStrokeWidth,"fill-opacity":"0",style:t.normalizeStyle(f.pathStyle)},null,12,YL)])),t.createElementVNode("div",{class:t.normalizeClass(f.innerClasses)},[t.renderSlot(r.$slots,"default")],2)],6)}var Jp=c(HL,[["render",JL]]);const Zp="ivu-dropdown",ZL={name:"Dropdown",directives:{clickOutside:cy},components:{Drop:je},emits:["on-visible-change","on-clickoutside","on-click","on-hover-click","on-haschild-click"],props:{trigger:{validator(r){return w(r,["click","hover","custom","contextMenu"])},default:"hover"},placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},visible:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},transferClassName:{type:String},stopPropagation:{type:Boolean,default:!1},capture:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return r.$VIEWUI?r.$VIEWUI.capture:!0}},eventsEnabled:{type:Boolean,default:!1},boundariesElement:{default:"window"}},computed:{transition(){return["bottom-start","bottom","bottom-end"].indexOf(this.placement)>-1?"slide-up":"fade"},dropdownCls(){return{[Zp+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}},relClasses(){return[`${Zp}-rel`,{[`${Zp}-rel-user-select-none`]:this.trigger==="contextMenu"}]}},data(){return{prefixCls:Zp,currentVisible:this.visible,timeout:null}},watch:{visible(r){this.currentVisible=r},currentVisible(r){r?this.$refs.drop.update():this.$refs.drop.destroy(),this.$emit("on-visible-change",r)}},methods:{handleClick(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.hasParent()||(this.currentVisible=!this.currentVisible)},handleRightClick(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!this.currentVisible},handleMouseenter(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!0},250)},handleMouseleave(){if(this.trigger==="custom"||this.trigger!=="hover")return!1;this.timeout&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.currentVisible=!1},150))},onClickoutside(r){this.handleClose(),this.handleRightClose(),this.currentVisible&&this.$emit("on-clickoutside",r)},handleClose(){if(this.trigger==="custom"||this.trigger!=="click")return!1;this.currentVisible=!1},handleRightClose(){if(this.trigger==="custom"||this.trigger!=="contextMenu")return!1;this.currentVisible=!1},hasParent(){return B(this,"Dropdown")||!1},handleHaschildClick(){t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!0});const r=this.hasParent();r&&r.handleHaschildClick()},handleItemClick(r){if(this.stopPropagation)return;const o=this.hasParent();o?o.handleItemClick(r):this.$emit("on-click",r)},handleHoverClick(){const r=this.hasParent();r?(t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1}),r.handleHoverClick()):t.nextTick(()=>{if(this.trigger==="custom")return!1;this.currentVisible=!1})}}};function QL(r,o,u,_,g,f){const k=t.resolveComponent("Drop"),O=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls]),onMouseenter:o[2]||(o[2]=(...G)=>f.handleMouseenter&&f.handleMouseenter(...G)),onMouseleave:o[3]||(o[3]=(...G)=>f.handleMouseleave&&f.handleMouseleave(...G))},[t.createElementVNode("div",{class:t.normalizeClass(f.relClasses),ref:"reference",onClick:o[0]||(o[0]=(...G)=>f.handleClick&&f.handleClick(...G)),onContextmenu:o[1]||(o[1]=t.withModifiers((...G)=>f.handleRightClick&&f.handleRightClick(...G),["prevent"]))},[t.renderSlot(r.$slots,"default")],34),t.createVNode(k,{ref:"drop",visible:g.currentVisible,classes:f.dropdownCls,placement:u.placement,eventsEnabled:u.eventsEnabled,boundariesElement:u.boundariesElement,transfer:u.transfer,"transition-name":"transition-drop",onMouseenter:f.handleMouseenter,onMouseleave:f.handleMouseleave},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"list")]),_:3},8,["visible","classes","placement","eventsEnabled","boundariesElement","transfer","onMouseenter","onMouseleave"])],34)),[[O,f.onClickoutside]])}var Cl=c(ZL,[["render",QL]]);const e8={name:"DropdownMenu"},t8={class:"ivu-dropdown-menu"};function n8(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("ul",t8,[t.renderSlot(r.$slots,"default")])}var Sl=c(e8,[["render",n8]]);const ds="ivu-tag",wa=["default","primary","success","warning","error","blue","green","red","yellow","pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],i8=["pink","magenta","volcano","orange","gold","lime","cyan","geekblue","purple"],r8={name:"Tag",components:{Icon:E},emits:["on-change","on-close"],props:{closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:!0},color:{type:String,default:"default"},type:{validator(r){return w(r,["border","dot"])}},name:{type:[String,Number]},size:{validator(r){return w(r,["default","medium","large"])},default:"default"}},data(){return{isChecked:this.checked}},computed:{classes(){return[`${ds}`,`${ds}-size-${this.size}`,{[`${ds}-${this.color}`]:!!this.color&&w(this.color,wa),[`${ds}-${this.type}`]:!!this.type,[`${ds}-closable`]:this.closable,[`${ds}-checked`]:this.isChecked,[`${ds}-checkable`]:this.checkable}]},wraperStyles(){return w(this.color,wa)?{}:{background:this.isChecked?this.defaultTypeColor:"transparent",borderWidth:"1px",borderStyle:"solid",borderColor:this.type!=="dot"&&this.type!=="border"&&this.isChecked?this.borderColor:this.lineColor,color:this.lineColor}},textClasses(){return[`${ds}-text`,this.type==="border"&&w(this.color,wa)?`${ds}-color-${this.color}`:"",this.type!=="dot"&&this.type!=="border"&&this.color!=="default"&&this.isChecked&&i8.indexOf(this.color)<0?`${ds}-color-white`:""]},dotClasses(){return`${ds}-dot-inner`},iconClass(){return this.type==="dot"?"":this.type==="border"?w(this.color,wa)?`${ds}-color-${this.color}`:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},showDot(){return!!this.type&&this.type==="dot"},lineColor(){return this.type==="dot"?"":this.type==="border"?this.color!==void 0?w(this.color,wa)?"":this.color:"":this.color!==void 0?this.color==="default"?"":"rgb(255, 255, 255)":""},borderColor(){return this.color!==void 0?this.color==="default"?"":this.color:""},dotColor(){return this.color!==void 0?w(this.color,wa)?"":this.color:""},textColorStyle(){return w(this.color,wa)?{}:this.type!=="dot"&&this.type!=="border"?this.isChecked?{color:this.lineColor}:{}:{color:this.lineColor}},bgColorStyle(){return w(this.color,wa)?{}:{background:this.dotColor}},defaultTypeColor(){return this.type!=="dot"&&this.type!=="border"&&this.color!==void 0?w(this.color,wa)?"":this.color:""}},methods:{close(r){this.name===void 0?this.$emit("on-close",r):this.$emit("on-close",r,this.name)},check(){if(!this.checkable)return;const r=!this.isChecked;this.isChecked=r,this.name===void 0?this.$emit("on-change",r):this.$emit("on-change",r,this.name)}},watch:{checked(r){this.isChecked=r}}};function s8(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),onClick:o[0]||(o[0]=t.withModifiers((...O)=>f.check&&f.check(...O),["stop"])),style:t.normalizeStyle(f.wraperStyles)},[f.showDot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(f.dotClasses),style:t.normalizeStyle(f.bgColorStyle)},null,6)):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(f.textClasses),style:t.normalizeStyle(f.textColorStyle)},[t.renderSlot(r.$slots,"default")],6),u.closable?(t.openBlock(),t.createBlock(k,{key:1,class:t.normalizeClass(f.iconClass),color:f.lineColor,type:"ios-close",onClick:t.withModifiers(f.close,["stop"])},null,8,["class","color","onClick"])):t.createCommentVNode("",!0)],6)}var Vc=c(r8,[["render",s8]]),jC={11e4:{l:"Z1",n:"",c:"110000",p:"86"},12e4:{l:"Z1",n:"",c:"120000",p:"86"},13e4:{l:"H",n:"",c:"130000",p:"86"},14e4:{l:"S",n:"",c:"140000",p:"86"},15e4:{l:"N",n:"",c:"150000",p:"86"},21e4:{l:"L",n:"",c:"210000",p:"86"},22e4:{l:"J",n:"",c:"220000",p:"86"},23e4:{l:"H",n:"",c:"230000",p:"86"},31e4:{l:"Z1",n:"",c:"310000",p:"86"},32e4:{l:"J",n:"",c:"320000",p:"86"},33e4:{l:"Z",n:"",c:"330000",p:"86"},34e4:{l:"A",n:"",c:"340000",p:"86"},35e4:{l:"F",n:"",c:"350000",p:"86"},36e4:{l:"J",n:"",c:"360000",p:"86"},37e4:{l:"S",n:"",c:"370000",p:"86"},41e4:{l:"H",n:"",c:"410000",p:"86"},42e4:{l:"H",n:"",c:"420000",p:"86"},43e4:{l:"H",n:"",c:"430000",p:"86"},44e4:{l:"G",n:"",c:"440000",p:"86"},45e4:{l:"G",n:"",c:"450000",p:"86"},46e4:{l:"H",n:"",c:"460000",p:"86"},5e5:{l:"Z1",n:"",c:"500000",p:"86"},51e4:{l:"S",n:"",c:"510000",p:"86"},52e4:{l:"G",n:"",c:"520000",p:"86"},53e4:{l:"Y",n:"",c:"530000",p:"86"},54e4:{l:"X",n:"",c:"540000",p:"86"},61e4:{l:"S",n:"",c:"610000",p:"86"},62e4:{l:"G",n:"",c:"620000",p:"86"},63e4:{l:"Q",n:"",c:"630000",p:"86"},64e4:{l:"N",n:"",c:"640000",p:"86"},65e4:{l:"X",n:"",c:"650000",p:"86"},71e4:{l:"T",n:"",c:"710000",p:"86"},81e4:{l:"Z2",n:"",c:"810000",p:"86"},82e4:{l:"Z2",n:"",c:"820000",p:"86"}},Fc={11e4:{l:"B",n:"",c:"110000",p:"86"},12e4:{l:"T",n:"",c:"120000",p:"86"},130100:{l:"S",n:"",c:"130100",p:"130000"},130200:{l:"T",n:"",c:"130200",p:"130000"},130300:{l:"Q",n:"",c:"130300",p:"130000"},130400:{l:"H",n:"",c:"130400",p:"130000"},130500:{l:"X",n:"",c:"130500",p:"130000"},130600:{l:"B",n:"",c:"130600",p:"130000"},130700:{l:"Z",n:"",c:"130700",p:"130000"},130800:{l:"C",n:"",c:"130800",p:"130000"},130900:{l:"C",n:"",c:"130900",p:"130000"},131e3:{l:"L",n:"",c:"131000",p:"130000"},131100:{l:"H",n:"",c:"131100",p:"130000"},139001:{l:"D",n:"",c:"139001",p:"130000"},139002:{l:"X",n:"",c:"139002",p:"130000"},140100:{l:"T",n:"",c:"140100",p:"140000"},140200:{l:"D",n:"",c:"140200",p:"140000"},140300:{l:"Y",n:"",c:"140300",p:"140000"},140400:{l:"C",n:"",c:"140400",p:"140000"},140500:{l:"J",n:"",c:"140500",p:"140000"},140600:{l:"S",n:"",c:"140600",p:"140000"},140700:{l:"J",n:"",c:"140700",p:"140000"},140800:{l:"Y",n:"",c:"140800",p:"140000"},140900:{l:"X",n:"",c:"140900",p:"140000"},141e3:{l:"L",n:"",c:"141000",p:"140000"},141100:{l:"L",n:"",c:"141100",p:"140000"},150100:{l:"H",n:"",c:"150100",p:"150000"},150200:{l:"B",n:"",c:"150200",p:"150000"},150300:{l:"W",n:"",c:"150300",p:"150000"},150400:{l:"C",n:"",c:"150400",p:"150000"},150500:{l:"T",n:"",c:"150500",p:"150000"},150600:{l:"E",n:"",c:"150600",p:"150000"},150700:{l:"H",n:"",c:"150700",p:"150000"},150800:{l:"B",n:"",c:"150800",p:"150000"},150900:{l:"W",n:"",c:"150900",p:"150000"},152200:{l:"X",n:"",c:"152200",p:"150000"},152500:{l:"X",n:"",c:"152500",p:"150000"},152900:{l:"A",n:"",c:"152900",p:"150000"},210100:{l:"S",n:"",c:"210100",p:"210000"},210200:{l:"D",n:"",c:"210200",p:"210000"},210300:{l:"A",n:"",c:"210300",p:"210000"},210400:{l:"F",n:"",c:"210400",p:"210000"},210500:{l:"B",n:"",c:"210500",p:"210000"},210600:{l:"D",n:"",c:"210600",p:"210000"},210700:{l:"J",n:"",c:"210700",p:"210000"},210800:{l:"Y",n:"",c:"210800",p:"210000"},210900:{l:"F",n:"",c:"210900",p:"210000"},211e3:{l:"L",n:"",c:"211000",p:"210000"},211100:{l:"P",n:"",c:"211100",p:"210000"},211200:{l:"T",n:"",c:"211200",p:"210000"},211300:{l:"C",n:"",c:"211300",p:"210000"},211400:{l:"H",n:"",c:"211400",p:"210000"},220100:{l:"C",n:"",c:"220100",p:"220000"},220200:{l:"J",n:"",c:"220200",p:"220000"},220300:{l:"S",n:"",c:"220300",p:"220000"},220400:{l:"L",n:"",c:"220400",p:"220000"},220500:{l:"T",n:"",c:"220500",p:"220000"},220600:{l:"B",n:"",c:"220600",p:"220000"},220700:{l:"S",n:"",c:"220700",p:"220000"},220800:{l:"B",n:"",c:"220800",p:"220000"},222400:{l:"Y",n:"",c:"222400",p:"220000"},230100:{l:"H",n:"",c:"230100",p:"230000"},230200:{l:"Q",n:"",c:"230200",p:"230000"},230300:{l:"J",n:"",c:"230300",p:"230000"},230400:{l:"H",n:"",c:"230400",p:"230000"},230500:{l:"S",n:"",c:"230500",p:"230000"},230600:{l:"D",n:"",c:"230600",p:"230000"},230700:{l:"Y",n:"",c:"230700",p:"230000"},230800:{l:"J",n:"",c:"230800",p:"230000"},230900:{l:"Q",n:"",c:"230900",p:"230000"},231e3:{l:"M",n:"",c:"231000",p:"230000"},231100:{l:"H",n:"",c:"231100",p:"230000"},231200:{l:"S",n:"",c:"231200",p:"230000"},232700:{l:"D",n:"",c:"232700",p:"230000"},31e4:{l:"S",n:"",c:"310000",p:"86"},320100:{l:"N",n:"",c:"320100",p:"320000"},320200:{l:"W",n:"",c:"320200",p:"320000"},320300:{l:"X",n:"",c:"320300",p:"320000"},320400:{l:"C",n:"",c:"320400",p:"320000"},320500:{l:"S",n:"",c:"320500",p:"320000"},320600:{l:"N",n:"",c:"320600",p:"320000"},320700:{l:"L",n:"",c:"320700",p:"320000"},320800:{l:"H",n:"",c:"320800",p:"320000"},320900:{l:"Y",n:"",c:"320900",p:"320000"},321e3:{l:"Y",n:"",c:"321000",p:"320000"},321100:{l:"Z",n:"",c:"321100",p:"320000"},321200:{l:"T",n:"",c:"321200",p:"320000"},321300:{l:"X",n:"",c:"321300",p:"320000"},330100:{l:"H",n:"",c:"330100",p:"330000"},330200:{l:"N",n:"",c:"330200",p:"330000"},330300:{l:"W",n:"",c:"330300",p:"330000"},330400:{l:"J",n:"",c:"330400",p:"330000"},330500:{l:"H",n:"",c:"330500",p:"330000"},330600:{l:"S",n:"",c:"330600",p:"330000"},330700:{l:"J",n:"",c:"330700",p:"330000"},330800:{l:"Q",n:"",c:"330800",p:"330000"},330900:{l:"Z",n:"",c:"330900",p:"330000"},331e3:{l:"T",n:"",c:"331000",p:"330000"},331100:{l:"L",n:"",c:"331100",p:"330000"},340100:{l:"H",n:"",c:"340100",p:"340000"},340200:{l:"W",n:"",c:"340200",p:"340000"},340300:{l:"B",n:"",c:"340300",p:"340000"},340400:{l:"H",n:"",c:"340400",p:"340000"},340500:{l:"M",n:"",c:"340500",p:"340000"},340600:{l:"H",n:"",c:"340600",p:"340000"},340700:{l:"T",n:"",c:"340700",p:"340000"},340800:{l:"A",n:"",c:"340800",p:"340000"},341e3:{l:"H",n:"",c:"341000",p:"340000"},341100:{l:"C",n:"",c:"341100",p:"340000"},341200:{l:"F",n:"",c:"341200",p:"340000"},341300:{l:"X",n:"",c:"341300",p:"340000"},341500:{l:"L",n:"",c:"341500",p:"340000"},341600:{l:"B",n:"",c:"341600",p:"340000"},341700:{l:"C",n:"",c:"341700",p:"340000"},341800:{l:"X",n:"",c:"341800",p:"340000"},350100:{l:"F",n:"",c:"350100",p:"350000"},350200:{l:"S",n:"",c:"350200",p:"350000"},350300:{l:"P",n:"",c:"350300",p:"350000"},350400:{l:"S",n:"",c:"350400",p:"350000"},350500:{l:"Q",n:"",c:"350500",p:"350000"},350600:{l:"Z",n:"",c:"350600",p:"350000"},350700:{l:"N",n:"",c:"350700",p:"350000"},350800:{l:"L",n:"",c:"350800",p:"350000"},350900:{l:"N",n:"",c:"350900",p:"350000"},360100:{l:"N",n:"",c:"360100",p:"360000"},360200:{l:"J",n:"",c:"360200",p:"360000"},360300:{l:"P",n:"",c:"360300",p:"360000"},360400:{l:"J",n:"",c:"360400",p:"360000"},360500:{l:"X",n:"",c:"360500",p:"360000"},360600:{l:"Y",n:"",c:"360600",p:"360000"},360700:{l:"G",n:"",c:"360700",p:"360000"},360800:{l:"J",n:"",c:"360800",p:"360000"},360900:{l:"Y",n:"",c:"360900",p:"360000"},361e3:{l:"F",n:"",c:"361000",p:"360000"},361100:{l:"S",n:"",c:"361100",p:"360000"},370100:{l:"J",n:"",c:"370100",p:"370000"},370200:{l:"Q",n:"",c:"370200",p:"370000"},370300:{l:"Z",n:"",c:"370300",p:"370000"},370400:{l:"Z",n:"",c:"370400",p:"370000"},370500:{l:"D",n:"",c:"370500",p:"370000"},370600:{l:"Y",n:"",c:"370600",p:"370000"},370700:{l:"W",n:"",c:"370700",p:"370000"},370800:{l:"J",n:"",c:"370800",p:"370000"},370900:{l:"T",n:"",c:"370900",p:"370000"},371e3:{l:"W",n:"",c:"371000",p:"370000"},371100:{l:"R",n:"",c:"371100",p:"370000"},371200:{l:"L",n:"",c:"371200",p:"370000"},371300:{l:"L",n:"",c:"371300",p:"370000"},371400:{l:"D",n:"",c:"371400",p:"370000"},371500:{l:"L",n:"",c:"371500",p:"370000"},371600:{l:"B",n:"",c:"371600",p:"370000"},371700:{l:"H",n:"",c:"371700",p:"370000"},410100:{l:"Z",n:"",c:"410100",p:"410000"},410200:{l:"K",n:"",c:"410200",p:"410000"},410300:{l:"L",n:"",c:"410300",p:"410000"},410400:{l:"P",n:"",c:"410400",p:"410000"},410500:{l:"A",n:"",c:"410500",p:"410000"},410600:{l:"H",n:"",c:"410600",p:"410000"},410700:{l:"X",n:"",c:"410700",p:"410000"},410800:{l:"J",n:"",c:"410800",p:"410000"},410900:{l:"P",n:"",c:"410900",p:"410000"},411e3:{l:"X",n:"",c:"411000",p:"410000"},411100:{l:"L",n:"",c:"411100",p:"410000"},411200:{l:"S",n:"",c:"411200",p:"410000"},411300:{l:"N",n:"",c:"411300",p:"410000"},411400:{l:"S",n:"",c:"411400",p:"410000"},411500:{l:"X",n:"",c:"411500",p:"410000"},411600:{l:"Z",n:"",c:"411600",p:"410000"},411700:{l:"Z",n:"",c:"411700",p:"410000"},419001:{l:"J",n:"",c:"419001",p:"410000"},420100:{l:"W",n:"",c:"420100",p:"420000"},420200:{l:"H",n:"",c:"420200",p:"420000"},420300:{l:"S",n:"",c:"420300",p:"420000"},420500:{l:"Y",n:"",c:"420500",p:"420000"},420600:{l:"X",n:"",c:"420600",p:"420000"},420700:{l:"E",n:"",c:"420700",p:"420000"},420800:{l:"J",n:"",c:"420800",p:"420000"},420900:{l:"X",n:"",c:"420900",p:"420000"},421e3:{l:"J",n:"",c:"421000",p:"420000"},421100:{l:"H",n:"",c:"421100",p:"420000"},421200:{l:"X",n:"",c:"421200",p:"420000"},421300:{l:"S",n:"",c:"421300",p:"420000"},422800:{l:"E",n:"",c:"422800",p:"420000"},429004:{l:"X",n:"",c:"429004",p:"420000"},429005:{l:"Q",n:"",c:"429005",p:"420000"},429006:{l:"T",n:"",c:"429006",p:"420000"},429021:{l:"S",n:"",c:"429021",p:"420000"},430100:{l:"C",n:"",c:"430100",p:"430000"},430200:{l:"Z",n:"",c:"430200",p:"430000"},430300:{l:"X",n:"",c:"430300",p:"430000"},430400:{l:"H",n:"",c:"430400",p:"430000"},430500:{l:"S",n:"",c:"430500",p:"430000"},430600:{l:"Y",n:"",c:"430600",p:"430000"},430700:{l:"C",n:"",c:"430700",p:"430000"},430800:{l:"Z",n:"",c:"430800",p:"430000"},430900:{l:"Y",n:"",c:"430900",p:"430000"},431e3:{l:"C",n:"",c:"431000",p:"430000"},431100:{l:"Y",n:"",c:"431100",p:"430000"},431200:{l:"H",n:"",c:"431200",p:"430000"},431300:{l:"L",n:"",c:"431300",p:"430000"},433100:{l:"X",n:"",c:"433100",p:"430000"},440100:{l:"G",n:"",c:"440100",p:"440000"},440200:{l:"S",n:"",c:"440200",p:"440000"},440300:{l:"S",n:"",c:"440300",p:"440000"},440400:{l:"Z",n:"",c:"440400",p:"440000"},440500:{l:"S",n:"",c:"440500",p:"440000"},440600:{l:"F",n:"",c:"440600",p:"440000"},440700:{l:"J",n:"",c:"440700",p:"440000"},440800:{l:"Z",n:"",c:"440800",p:"440000"},440900:{l:"M",n:"",c:"440900",p:"440000"},441200:{l:"Z",n:"",c:"441200",p:"440000"},441300:{l:"H",n:"",c:"441300",p:"440000"},441400:{l:"M",n:"",c:"441400",p:"440000"},441500:{l:"S",n:"",c:"441500",p:"440000"},441600:{l:"H",n:"",c:"441600",p:"440000"},441700:{l:"Y",n:"",c:"441700",p:"440000"},441800:{l:"Q",n:"",c:"441800",p:"440000"},441900:{l:"D",n:"",c:"441900",p:"440000"},442e3:{l:"Z",n:"",c:"442000",p:"440000"},445100:{l:"C",n:"",c:"445100",p:"440000"},445200:{l:"J",n:"",c:"445200",p:"440000"},445300:{l:"Y",n:"",c:"445300",p:"440000"},450100:{l:"N",n:"",c:"450100",p:"450000"},450200:{l:"L",n:"",c:"450200",p:"450000"},450300:{l:"G",n:"",c:"450300",p:"450000"},450400:{l:"W",n:"",c:"450400",p:"450000"},450500:{l:"B",n:"",c:"450500",p:"450000"},450600:{l:"F",n:"",c:"450600",p:"450000"},450700:{l:"Q",n:"",c:"450700",p:"450000"},450800:{l:"G",n:"",c:"450800",p:"450000"},450900:{l:"Y",n:"",c:"450900",p:"450000"},451e3:{l:"B",n:"",c:"451000",p:"450000"},451100:{l:"H",n:"",c:"451100",p:"450000"},451200:{l:"H",n:"",c:"451200",p:"450000"},451300:{l:"L",n:"",c:"451300",p:"450000"},451400:{l:"C",n:"",c:"451400",p:"450000"},460100:{l:"H",n:"",c:"460100",p:"460000"},460200:{l:"S",n:"",c:"460200",p:"460000"},460300:{l:"S",n:"",c:"460300",p:"460000"},460400:{l:"D",n:"",c:"460400",p:"460000"},469001:{l:"W",n:"",c:"469001",p:"460000"},469002:{l:"Q",n:"",c:"469002",p:"460000"},469005:{l:"W",n:"",c:"469005",p:"460000"},469006:{l:"W",n:"",c:"469006",p:"460000"},469007:{l:"D",n:"",c:"469007",p:"460000"},469021:{l:"D",n:"",c:"469021",p:"460000"},469022:{l:"T",n:"",c:"469022",p:"460000"},469023:{l:"C",n:"",c:"469023",p:"460000"},469024:{l:"L",n:"",c:"469024",p:"460000"},469025:{l:"B",n:"",c:"469025",p:"460000"},469026:{l:"C",n:"",c:"469026",p:"460000"},469027:{l:"L",n:"",c:"469027",p:"460000"},469028:{l:"L",n:"",c:"469028",p:"460000"},469029:{l:"B",n:"",c:"469029",p:"460000"},469030:{l:"Q",n:"",c:"469030",p:"460000"},5e5:{l:"C",n:"",c:"500000",p:"86"},510100:{l:"C",n:"",c:"510100",p:"510000"},510300:{l:"Z",n:"",c:"510300",p:"510000"},510400:{l:"P",n:"",c:"510400",p:"510000"},510500:{l:"L",n:"",c:"510500",p:"510000"},510600:{l:"D",n:"",c:"510600",p:"510000"},510700:{l:"M",n:"",c:"510700",p:"510000"},510800:{l:"G",n:"",c:"510800",p:"510000"},510900:{l:"S",n:"",c:"510900",p:"510000"},511e3:{l:"N",n:"",c:"511000",p:"510000"},511100:{l:"L",n:"",c:"511100",p:"510000"},511300:{l:"N",n:"",c:"511300",p:"510000"},511400:{l:"M",n:"",c:"511400",p:"510000"},511500:{l:"Y",n:"",c:"511500",p:"510000"},511600:{l:"G",n:"",c:"511600",p:"510000"},511700:{l:"D",n:"",c:"511700",p:"510000"},511800:{l:"Y",n:"",c:"511800",p:"510000"},511900:{l:"B",n:"",c:"511900",p:"510000"},512e3:{l:"Z",n:"",c:"512000",p:"510000"},513200:{l:"A",n:"",c:"513200",p:"510000"},513300:{l:"G",n:"",c:"513300",p:"510000"},513400:{l:"L",n:"",c:"513400",p:"510000"},520100:{l:"G",n:"",c:"520100",p:"520000"},520200:{l:"L",n:"",c:"520200",p:"520000"},520300:{l:"Z",n:"",c:"520300",p:"520000"},520400:{l:"A",n:"",c:"520400",p:"520000"},520500:{l:"B",n:"",c:"520500",p:"520000"},520600:{l:"T",n:"",c:"520600",p:"520000"},522300:{l:"Q",n:"",c:"522300",p:"520000"},522600:{l:"Q",n:"",c:"522600",p:"520000"},522700:{l:"Q",n:"",c:"522700",p:"520000"},530100:{l:"K",n:"",c:"530100",p:"530000"},530300:{l:"Q",n:"",c:"530300",p:"530000"},530400:{l:"Y",n:"",c:"530400",p:"530000"},530500:{l:"B",n:"",c:"530500",p:"530000"},530600:{l:"Z",n:"",c:"530600",p:"530000"},530700:{l:"L",n:"",c:"530700",p:"530000"},530800:{l:"P",n:"",c:"530800",p:"530000"},530900:{l:"L",n:"",c:"530900",p:"530000"},532300:{l:"C",n:"",c:"532300",p:"530000"},532500:{l:"H",n:"",c:"532500",p:"530000"},532600:{l:"W",n:"",c:"532600",p:"530000"},532800:{l:"X",n:"",c:"532800",p:"530000"},532900:{l:"D",n:"",c:"532900",p:"530000"},533100:{l:"D",n:"",c:"533100",p:"530000"},533300:{l:"N",n:"",c:"533300",p:"530000"},533400:{l:"D",n:"",c:"533400",p:"530000"},540100:{l:"L",n:"",c:"540100",p:"540000"},540200:{l:"R",n:"",c:"540200",p:"540000"},540300:{l:"C",n:"",c:"540300",p:"540000"},540400:{l:"L",n:"",c:"540400",p:"540000"},540500:{l:"S",n:"",c:"540500",p:"540000"},542400:{l:"N",n:"",c:"542400",p:"540000"},542500:{l:"A",n:"",c:"542500",p:"540000"},610100:{l:"X",n:"",c:"610100",p:"610000"},610200:{l:"T",n:"",c:"610200",p:"610000"},610300:{l:"B",n:"",c:"610300",p:"610000"},610400:{l:"X",n:"",c:"610400",p:"610000"},610500:{l:"W",n:"",c:"610500",p:"610000"},610600:{l:"Y",n:"",c:"610600",p:"610000"},610700:{l:"H",n:"",c:"610700",p:"610000"},610800:{l:"Y",n:"",c:"610800",p:"610000"},610900:{l:"A",n:"",c:"610900",p:"610000"},611e3:{l:"S",n:"",c:"611000",p:"610000"},620100:{l:"L",n:"",c:"620100",p:"620000"},620200:{l:"J",n:"",c:"620200",p:"620000"},620300:{l:"J",n:"",c:"620300",p:"620000"},620400:{l:"B",n:"",c:"620400",p:"620000"},620500:{l:"T",n:"",c:"620500",p:"620000"},620600:{l:"W",n:"",c:"620600",p:"620000"},620700:{l:"Z",n:"",c:"620700",p:"620000"},620800:{l:"P",n:"",c:"620800",p:"620000"},620900:{l:"J",n:"",c:"620900",p:"620000"},621e3:{l:"Q",n:"",c:"621000",p:"620000"},621100:{l:"D",n:"",c:"621100",p:"620000"},621200:{l:"L",n:"",c:"621200",p:"620000"},622900:{l:"L",n:"",c:"622900",p:"620000"},623e3:{l:"G",n:"",c:"623000",p:"620000"},630100:{l:"X",n:"",c:"630100",p:"630000"},630200:{l:"H",n:"",c:"630200",p:"630000"},632200:{l:"H",n:"",c:"632200",p:"630000"},632300:{l:"H",n:"",c:"632300",p:"630000"},632500:{l:"H",n:"",c:"632500",p:"630000"},632600:{l:"G",n:"",c:"632600",p:"630000"},632700:{l:"Y",n:"",c:"632700",p:"630000"},632800:{l:"H",n:"",c:"632800",p:"630000"},640100:{l:"Y",n:"",c:"640100",p:"640000"},640200:{l:"S",n:"",c:"640200",p:"640000"},640300:{l:"W",n:"",c:"640300",p:"640000"},640400:{l:"G",n:"",c:"640400",p:"640000"},640500:{l:"Z",n:"",c:"640500",p:"640000"},650100:{l:"W",n:"",c:"650100",p:"650000"},650200:{l:"K",n:"",c:"650200",p:"650000"},650400:{l:"T",n:"",c:"650400",p:"650000"},650500:{l:"H",n:"",c:"650500",p:"650000"},652300:{l:"C",n:"",c:"652300",p:"650000"},652700:{l:"B",n:"",c:"652700",p:"650000"},652800:{l:"B",n:"",c:"652800",p:"650000"},652900:{l:"A",n:"",c:"652900",p:"650000"},653e3:{l:"K",n:"",c:"653000",p:"650000"},653100:{l:"K",n:"",c:"653100",p:"650000"},653200:{l:"H",n:"",c:"653200",p:"650000"},654e3:{l:"Y",n:"",c:"654000",p:"650000"},654200:{l:"T",n:"",c:"654200",p:"650000"},654300:{l:"A",n:"",c:"654300",p:"650000"},659001:{l:"S",n:"",c:"659001",p:"650000"},659002:{l:"A",n:"",c:"659002",p:"650000"},659003:{l:"T",n:"",c:"659003",p:"650000"},659004:{l:"W",n:"",c:"659004",p:"650000"},659006:{l:"T",n:"",c:"659006",p:"650000"},710101:{l:"J",n:"",c:"710101",p:"710000"},710102:{l:"L",n:"",c:"710102",p:"710000"},710103:{l:"M",n:"",c:"710103",p:"710000"},710104:{l:"N",n:"",c:"710104",p:"710000"},710105:{l:"P",n:"",c:"710105",p:"710000"},710106:{l:"P",n:"",c:"710106",p:"710000"},710107:{l:"T",n:"",c:"710107",p:"710000"},710108:{l:"T",n:"",c:"710108",p:"710000"},710109:{l:"T",n:"",c:"710109",p:"710000"},710110:{l:"T",n:"",c:"710110",p:"710000"},710111:{l:"T",n:"",c:"710111",p:"710000"},710112:{l:"Y",n:"",c:"710112",p:"710000"},710113:{l:"X",n:"",c:"710113",p:"710000"},710114:{l:"Z",n:"",c:"710114",p:"710000"},710115:{l:"J",n:"",c:"710115",p:"710000"},710116:{l:"X",n:"",c:"710116",p:"710000"},710117:{l:"H",n:"",c:"710117",p:"710000"},710118:{l:"Y",n:"",c:"710118",p:"710000"},710119:{l:"G",n:"",c:"710119",p:"710000"},710120:{l:"J",n:"",c:"710120",p:"710000"},81e4:{l:"X",n:"",c:"810000",p:"86"},82e4:{l:"A",n:"",c:"820000",p:"86"}};function Lh(r){return r.replace("","").replace("","").replace("","")}function a8(){const r=V(Fc),o=[];for(let u in r){const _=r[u];_.n=Lh(_.n),o.push(_)}return o}function KC(r,o){if(!o)return"";const u=r.find(_=>_.n===o);return u?u.c:(console.error("[View UI warn]: City name error."),"")}function o8(r,o){return r.find(u=>u.c===o).n}const l8={name:"City",mixins:[tn],components:{Dropdown:Cl,DropdownMenu:Sl,Select:sr,Option:ii,Tag:Vc,Icon:E,RadioGroup:jp,Radio:Kp},emits:["on-change","update:modelValue"],props:{modelValue:{type:String},useName:{type:Boolean,default:!1},cities:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},placeholder:{type:String,default:""},searchPlaceholder:{type:String,default:""},transferClassName:{type:String}},data(){const r=a8();return{currentValue:this.useName?KC(r,this.modelValue):this.modelValue,visible:!1,provinceList:[],cityListByProvince:[],cityListByLetter:{},allCities:r,listType:"province",queryCity:""}},watch:{modelValue(r){const o=this.useName?KC(this.allCities,r):r;this.currentValue=o}},computed:{showCloseIcon(){return this.currentValue&&this.clearable&&!this.itemDisabled},classes(){return[{"ivu-city-show-clear":this.showCloseIcon,[`ivu-city-size-${this.size}`]:!!this.size,"ivu-city-visible":this.visible,"ivu-city-disabled":this.itemDisabled}]},transferClasses(){let r="ivu-city-transfer";return this.transferClassName&&(r+=` ${this.transferClassName}`),r},relCities(){const r=[];return this.cities.length&&this.cities.forEach(o=>{const u=Fc[o];u.n=Lh(u.n),r.push(u)}),r},codeToName(){if(!this.currentValue)return this.placeholder;const r=Fc[this.currentValue].n;return this.showSuffix?r:Lh(r)}},methods:{handleSelect(r){r&&(this.handleChangeValue(r),t.nextTick(()=>{this.queryCity=""}))},handleChangeValue(r){this.currentValue=r,this.visible=!1;const o=this.useName?o8(this.allCities,r):r;this.$emit("update:modelValue",o),this.$emit("on-change",Fc[r]),this.handleFormItemChange("change",r)},handleClickLetter(r){let o=r;o===""?o="Z1":o===""&&(o="Z2");const u=`.ivu-city-${o}`,_=this.$refs.list,g=_.querySelectorAll(u)[0].offsetTop,f=_.offsetTop;_.scrollTop=g-f},clearSelect(){if(this.itemDisabled)return!1},handleToggleOpen(){if(this.itemDisabled)return!1;this.visible=!this.visible},handleVisibleChange(r){this.visible=r},handleClickOutside(r){this.$refs.city.contains(r.target)||(this.visible=!1)},handleGetProvinceByLetter(){const r={A:{n:"A",p:[],c:[]},F:{n:"F",p:[],c:[]},G:{n:"G",p:[],c:[]},H:{n:"H",p:[],c:[]},J:{n:"J",p:[],c:[]},L:{n:"L",p:[],c:[]},N:{n:"N",p:[],c:[]},Q:{n:"Q",p:[],c:[]},S:{n:"S",p:[],c:[]},T:{n:"T",p:[],c:[]},X:{n:"X",p:[],c:[]},Y:{n:"Y",p:[],c:[]},Z:{n:"Z",p:[],c:[]},Z1:{n:"",p:[],c:[]},Z2:{n:"",p:[],c:[]}};for(let o in jC){const u=jC[o];r[u.l].p.push(u)}this.provinceList=r},handleGetCityByProvince(){const r=V(this.provinceList),o=[],u=V(Fc),_=[{p:{n:"",p:"86",l:"Z1"},c:[]},{p:{n:"",p:"86",l:"Z2"},c:[]}];for(let g in r){const f=r[g];for(let k=0;k<f.p.length;k++){const O=f.p[k],G=O.c,z={p:O,c:[]};for(let j in u){const ae=u[j];ae.n=Lh(ae.n),G===ae.p&&z.c.push(ae)}g==="Z1"?_[0].c.push(u[G]):g==="Z2"?_[1].c.push(u[G]):o.push(z)}}this.cityListByProvince=o.concat(_)},handleGetCityByLetter(){const r=V(Fc),o={A:[],B:[],C:[],D:[],E:[],F:[],G:[],H:[],J:[],K:[],L:[],M:[],N:[],P:[],Q:[],R:[],S:[],T:[],W:[],X:[],Y:[],Z:[]};for(let u in r){const _=r[u];_.n=Lh(_.n),o[_.l].push(_)}this.cityListByLetter=o}},created(){this.handleGetProvinceByLetter(),this.handleGetCityByProvince(),this.handleGetCityByLetter()}},c8=["name","value"],u8={class:"ivu-city-drop"},h8={key:0,class:"ivu-city-drop-cities"},d8=["onClick"],f8={class:"ivu-city-drop-menu"},p8={class:"ivu-city-drop-type"},m8={class:"ivu-city-drop-search"},g8={key:1,class:"ivu-city-drop-list"},v8={class:"ivu-city-drop-list-letter"},y8={class:"ivu-city-drop-list-main",ref:"list"},b8=["onClick"],_8={key:2,class:"ivu-city-drop-list"},x8={class:"ivu-city-drop-list-letter"},w8={class:"ivu-city-drop-list-main ivu-city-drop-list-main-city",ref:"list"},C8=["onClick"];function S8(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Radio"),G=t.resolveComponent("RadioGroup"),z=t.resolveComponent("Option"),j=t.resolveComponent("Select"),ae=t.resolveComponent("Tag"),_e=t.resolveComponent("DropdownMenu"),ye=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-city",f.classes]),ref:"city"},[t.createVNode(ye,{trigger:"custom",visible:g.visible,transfer:u.transfer,placement:"bottom-start","transfer-class-name":f.transferClasses,onOnVisibleChange:f.handleVisibleChange,onOnClickoutside:f.handleClickOutside},{list:t.withCtx(()=>[t.createVNode(_e,{onClick:o[3]||(o[3]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[t.createElementVNode("div",u8,[u.cities.length?(t.openBlock(),t.createElementBlock("div",h8,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.relCities,me=>(t.openBlock(),t.createElementBlock("span",{key:me.n,onClick:ie=>f.handleChangeValue(me.c)},t.toDisplayString(me.n),9,d8))),128))])):t.createCommentVNode("",!0),t.createElementVNode("div",f8,[t.createElementVNode("div",p8,[t.createVNode(G,{modelValue:g.listType,"onUpdate:modelValue":o[1]||(o[1]=me=>g.listType=me),type:"button",size:"small"},{default:t.withCtx(()=>[t.createVNode(O,{label:"province"},{default:t.withCtx(()=>[t.createTextVNode("")]),_:1}),t.createVNode(O,{label:"city"},{default:t.withCtx(()=>[t.createTextVNode("")]),_:1})]),_:1},8,["modelValue"])]),t.createElementVNode("div",m8,[t.createVNode(j,{modelValue:g.queryCity,"onUpdate:modelValue":o[2]||(o[2]=me=>g.queryCity=me),filterable:"",size:"small",transfer:"",placeholder:u.searchPlaceholder,onOnChange:f.handleSelect},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.allCities,me=>(t.openBlock(),t.createBlock(z,{value:me.c,key:me.c},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(me.n),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder","onOnChange"])])]),g.listType==="province"?(t.openBlock(),t.createElementBlock("div",g8,[t.createElementVNode("div",v8,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.provinceList,me=>(t.openBlock(),t.createBlock(ae,{onClick:ie=>f.handleClickLetter(me.n),type:"border",fade:!1,key:me.n},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(me.n),1)]),_:2},1032,["onClick"]))),128))]),t.createElementVNode("div",y8,[t.createElementVNode("dl",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.cityListByProvince,me=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:me.p.n},[t.createElementVNode("dt",{class:t.normalizeClass("ivu-city-"+me.p.l)},t.toDisplayString(me.p.n)+"",3),t.createElementVNode("dd",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(me.c,ie=>(t.openBlock(),t.createElementBlock("li",{key:ie.n,onClick:Pe=>f.handleChangeValue(ie.c)},t.toDisplayString(ie.n),9,b8))),128))])],64))),128))])],512)])):t.createCommentVNode("",!0),g.listType==="city"?(t.openBlock(),t.createElementBlock("div",_8,[t.createElementVNode("div",x8,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.cityListByLetter,(me,ie)=>(t.openBlock(),t.createBlock(ae,{onClick:Pe=>f.handleClickLetter(ie),type:"border",fade:!1,key:ie},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(ie),1)]),_:2},1032,["onClick"]))),128))]),t.createElementVNode("div",w8,[t.createElementVNode("dl",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.cityListByLetter,(me,ie)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:ie},[t.createElementVNode("dt",{class:t.normalizeClass("ivu-city-"+ie)},t.toDisplayString(ie)+"",3),t.createElementVNode("dd",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(me,Pe=>(t.openBlock(),t.createElementBlock("li",{key:Pe.n,onClick:At=>f.handleChangeValue(Pe.c)},t.toDisplayString(Pe.n),9,C8))),128))])],64))),128))])],512)])):t.createCommentVNode("",!0)])]),_:1})]),default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-city-rel",onClick:o[0]||(o[0]=t.withModifiers((...me)=>f.handleToggleOpen&&f.handleToggleOpen(...me),["prevent","stop"]))},[t.createElementVNode("input",{type:"hidden",name:u.name,value:g.currentValue},null,8,c8),t.renderSlot(r.$slots,"default",{},()=>[t.createElementVNode("span",null,t.toDisplayString(f.codeToName),1),t.withDirectives(t.createVNode(k,{type:"ios-close-circle",class:"ivu-city-arrow",onClick:t.withModifiers(f.clearSelect,["stop"])},null,8,["onClick"]),[[t.vShow,f.showCloseIcon]]),t.createVNode(k,{type:"ios-arrow-down",class:"ivu-city-arrow"})])])]),_:3},8,["visible","transfer","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],2)}var qC=c(l8,[["render",S8]]);const XC="ivu-collapse",E8={name:"Collapse",emits:["on-change","update:modelValue"],provide(){return{CollapseInstance:this}},props:{accordion:{type:Boolean,default:!1},modelValue:{type:[Array,String]},simple:{type:Boolean,default:!1}},data(){return{currentValue:this.modelValue,panelCount:0}},computed:{classes(){return[`${XC}`,{[`${XC}-simple`]:this.simple}]}},methods:{getActiveKey(){let r=this.currentValue||[];const o=this.accordion;Array.isArray(r)||(r=[r]),o&&r.length>1&&(r=[r[0]]);for(let u=0;u<r.length;u++)r[u]=r[u].toString();return r},toggle(r){const o=r.name.toString();let u=[];if(this.accordion)r.isActive||u.push(o);else{let _=this.getActiveKey();const g=_.indexOf(o);r.isActive?g>-1&&_.splice(g,1):g<0&&_.push(o),u=_}this.currentValue=u,this.$emit("update:modelValue",u),this.$emit("on-change",u)}},watch:{modelValue(r){this.currentValue=r}}};function M8(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.renderSlot(r.$slots,"default")],2)}var YC=c(E8,[["render",M8]]);function Qp(r){return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qp(r)}var T8=/^\s+/,k8=/\s+$/;function kt(r,o){if(r=r||"",o=o||{},r instanceof kt)return r;if(!(this instanceof kt))return new kt(r,o);var u=A8(r);this._originalInput=r,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||u.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=u.ok}kt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},getLuminance:function(){var r=this.toRgb(),o,u,_,g,f,k;return o=r.r/255,u=r.g/255,_=r.b/255,o<=.03928?g=o/12.92:g=Math.pow((o+.055)/1.055,2.4),u<=.03928?f=u/12.92:f=Math.pow((u+.055)/1.055,2.4),_<=.03928?k=_/12.92:k=Math.pow((_+.055)/1.055,2.4),.2126*g+.7152*f+.0722*k},setAlpha:function(r){return this._a=nS(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=ZC(this._r,this._g,this._b);return{h:r.h*360,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=ZC(this._r,this._g,this._b),o=Math.round(r.h*360),u=Math.round(r.s*100),_=Math.round(r.v*100);return this._a==1?"hsv("+o+", "+u+"%, "+_+"%)":"hsva("+o+", "+u+"%, "+_+"%, "+this._roundA+")"},toHsl:function(){var r=JC(this._r,this._g,this._b);return{h:r.h*360,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=JC(this._r,this._g,this._b),o=Math.round(r.h*360),u=Math.round(r.s*100),_=Math.round(r.l*100);return this._a==1?"hsl("+o+", "+u+"%, "+_+"%)":"hsla("+o+", "+u+"%, "+_+"%, "+this._roundA+")"},toHex:function(r){return QC(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return R8(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Qn(this._r,255)*100)+"%",g:Math.round(Qn(this._g,255)*100)+"%",b:Math.round(Qn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Qn(this._r,255)*100)+"%, "+Math.round(Qn(this._g,255)*100)+"%, "+Math.round(Qn(this._b,255)*100)+"%)":"rgba("+Math.round(Qn(this._r,255)*100)+"%, "+Math.round(Qn(this._g,255)*100)+"%, "+Math.round(Qn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:W8[QC(this._r,this._g,this._b,!0)]||!1},toFilter:function(r){var o="#"+eS(this._r,this._g,this._b,this._a),u=o,_=this._gradientType?"GradientType = 1, ":"";if(r){var g=kt(r);u="#"+eS(g._r,g._g,g._b,g._a)}return"progid:DXImageTransform.Microsoft.gradient("+_+"startColorstr="+o+",endColorstr="+u+")"},toString:function(r){var o=!!r;r=r||this._format;var u=!1,_=this._a<1&&this._a>=0,g=!o&&_&&(r==="hex"||r==="hex6"||r==="hex3"||r==="hex4"||r==="hex8"||r==="name");return g?r==="name"&&this._a===0?this.toName():this.toRgbString():(r==="rgb"&&(u=this.toRgbString()),r==="prgb"&&(u=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(u=this.toHexString()),r==="hex3"&&(u=this.toHexString(!0)),r==="hex4"&&(u=this.toHex8String(!0)),r==="hex8"&&(u=this.toHex8String()),r==="name"&&(u=this.toName()),r==="hsl"&&(u=this.toHslString()),r==="hsv"&&(u=this.toHsvString()),u||this.toHexString())},clone:function(){return kt(this.toString())},_applyModification:function(r,o){var u=r.apply(null,[this].concat([].slice.call(o)));return this._r=u._r,this._g=u._g,this._b=u._b,this.setAlpha(u._a),this},lighten:function(){return this._applyModification(O8,arguments)},brighten:function(){return this._applyModification(V8,arguments)},darken:function(){return this._applyModification(F8,arguments)},desaturate:function(){return this._applyModification(D8,arguments)},saturate:function(){return this._applyModification(L8,arguments)},greyscale:function(){return this._applyModification(B8,arguments)},spin:function(){return this._applyModification(U8,arguments)},_applyCombination:function(r,o){return r.apply(null,[this].concat([].slice.call(o)))},analogous:function(){return this._applyCombination(H8,arguments)},complement:function(){return this._applyCombination(z8,arguments)},monochromatic:function(){return this._applyCombination(G8,arguments)},splitcomplement:function(){return this._applyCombination($8,arguments)},triad:function(){return this._applyCombination(tS,[3])},tetrad:function(){return this._applyCombination(tS,[4])}},kt.fromRatio=function(r,o){if(Qp(r)=="object"){var u={};for(var _ in r)r.hasOwnProperty(_)&&(_==="a"?u[_]=r[_]:u[_]=Bh(r[_]));r=u}return kt(r,o)};function A8(r){var o={r:0,g:0,b:0},u=1,_=null,g=null,f=null,k=!1,O=!1;return typeof r=="string"&&(r=X8(r)),Qp(r)=="object"&&(Ca(r.r)&&Ca(r.g)&&Ca(r.b)?(o=P8(r.r,r.g,r.b),k=!0,O=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Ca(r.h)&&Ca(r.s)&&Ca(r.v)?(_=Bh(r.s),g=Bh(r.v),o=N8(r.h,_,g),k=!0,O="hsv"):Ca(r.h)&&Ca(r.s)&&Ca(r.l)&&(_=Bh(r.s),f=Bh(r.l),o=I8(r.h,_,f),k=!0,O="hsl"),r.hasOwnProperty("a")&&(u=r.a)),u=nS(u),{ok:k,format:r.format||O,r:Math.min(255,Math.max(o.r,0)),g:Math.min(255,Math.max(o.g,0)),b:Math.min(255,Math.max(o.b,0)),a:u}}function P8(r,o,u){return{r:Qn(r,255)*255,g:Qn(o,255)*255,b:Qn(u,255)*255}}function JC(r,o,u){r=Qn(r,255),o=Qn(o,255),u=Qn(u,255);var _=Math.max(r,o,u),g=Math.min(r,o,u),f,k,O=(_+g)/2;if(_==g)f=k=0;else{var G=_-g;switch(k=O>.5?G/(2-_-g):G/(_+g),_){case r:f=(o-u)/G+(o<u?6:0);break;case o:f=(u-r)/G+2;break;case u:f=(r-o)/G+4;break}f/=6}return{h:f,s:k,l:O}}function I8(r,o,u){var _,g,f;r=Qn(r,360),o=Qn(o,100),u=Qn(u,100);function k(z,j,ae){return ae<0&&(ae+=1),ae>1&&(ae-=1),ae<1/6?z+(j-z)*6*ae:ae<1/2?j:ae<2/3?z+(j-z)*(2/3-ae)*6:z}if(o===0)_=g=f=u;else{var O=u<.5?u*(1+o):u+o-u*o,G=2*u-O;_=k(G,O,r+1/3),g=k(G,O,r),f=k(G,O,r-1/3)}return{r:_*255,g:g*255,b:f*255}}function ZC(r,o,u){r=Qn(r,255),o=Qn(o,255),u=Qn(u,255);var _=Math.max(r,o,u),g=Math.min(r,o,u),f,k,O=_,G=_-g;if(k=_===0?0:G/_,_==g)f=0;else{switch(_){case r:f=(o-u)/G+(o<u?6:0);break;case o:f=(u-r)/G+2;break;case u:f=(r-o)/G+4;break}f/=6}return{h:f,s:k,v:O}}function N8(r,o,u){r=Qn(r,360)*6,o=Qn(o,100),u=Qn(u,100);var _=Math.floor(r),g=r-_,f=u*(1-o),k=u*(1-g*o),O=u*(1-(1-g)*o),G=_%6,z=[u,k,f,f,O,u][G],j=[O,u,u,k,f,f][G],ae=[f,f,O,u,u,k][G];return{r:z*255,g:j*255,b:ae*255}}function QC(r,o,u,_){var g=[Ts(Math.round(r).toString(16)),Ts(Math.round(o).toString(16)),Ts(Math.round(u).toString(16))];return _&&g[0].charAt(0)==g[0].charAt(1)&&g[1].charAt(0)==g[1].charAt(1)&&g[2].charAt(0)==g[2].charAt(1)?g[0].charAt(0)+g[1].charAt(0)+g[2].charAt(0):g.join("")}function R8(r,o,u,_,g){var f=[Ts(Math.round(r).toString(16)),Ts(Math.round(o).toString(16)),Ts(Math.round(u).toString(16)),Ts(iS(_))];return g&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1)&&f[3].charAt(0)==f[3].charAt(1)?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function eS(r,o,u,_){var g=[Ts(iS(_)),Ts(Math.round(r).toString(16)),Ts(Math.round(o).toString(16)),Ts(Math.round(u).toString(16))];return g.join("")}kt.equals=function(r,o){return!r||!o?!1:kt(r).toRgbString()==kt(o).toRgbString()},kt.random=function(){return kt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function D8(r,o){o=o===0?0:o||10;var u=kt(r).toHsl();return u.s-=o/100,u.s=em(u.s),kt(u)}function L8(r,o){o=o===0?0:o||10;var u=kt(r).toHsl();return u.s+=o/100,u.s=em(u.s),kt(u)}function B8(r){return kt(r).desaturate(100)}function O8(r,o){o=o===0?0:o||10;var u=kt(r).toHsl();return u.l+=o/100,u.l=em(u.l),kt(u)}function V8(r,o){o=o===0?0:o||10;var u=kt(r).toRgb();return u.r=Math.max(0,Math.min(255,u.r-Math.round(255*-(o/100)))),u.g=Math.max(0,Math.min(255,u.g-Math.round(255*-(o/100)))),u.b=Math.max(0,Math.min(255,u.b-Math.round(255*-(o/100)))),kt(u)}function F8(r,o){o=o===0?0:o||10;var u=kt(r).toHsl();return u.l-=o/100,u.l=em(u.l),kt(u)}function U8(r,o){var u=kt(r).toHsl(),_=(u.h+o)%360;return u.h=_<0?360+_:_,kt(u)}function z8(r){var o=kt(r).toHsl();return o.h=(o.h+180)%360,kt(o)}function tS(r,o){if(isNaN(o)||o<=0)throw new Error("Argument to polyad must be a positive number");for(var u=kt(r).toHsl(),_=[kt(r)],g=360/o,f=1;f<o;f++)_.push(kt({h:(u.h+f*g)%360,s:u.s,l:u.l}));return _}function $8(r){var o=kt(r).toHsl(),u=o.h;return[kt(r),kt({h:(u+72)%360,s:o.s,l:o.l}),kt({h:(u+216)%360,s:o.s,l:o.l})]}function H8(r,o,u){o=o||6,u=u||30;var _=kt(r).toHsl(),g=360/u,f=[kt(r)];for(_.h=(_.h-(g*o>>1)+720)%360;--o;)_.h=(_.h+g)%360,f.push(kt(_));return f}function G8(r,o){o=o||6;for(var u=kt(r).toHsv(),_=u.h,g=u.s,f=u.v,k=[],O=1/o;o--;)k.push(kt({h:_,s:g,v:f})),f=(f+O)%1;return k}kt.mix=function(r,o,u){u=u===0?0:u||50;var _=kt(r).toRgb(),g=kt(o).toRgb(),f=u/100,k={r:(g.r-_.r)*f+_.r,g:(g.g-_.g)*f+_.g,b:(g.b-_.b)*f+_.b,a:(g.a-_.a)*f+_.a};return kt(k)},kt.readability=function(r,o){var u=kt(r),_=kt(o);return(Math.max(u.getLuminance(),_.getLuminance())+.05)/(Math.min(u.getLuminance(),_.getLuminance())+.05)},kt.isReadable=function(r,o,u){var _=kt.readability(r,o),g,f;switch(f=!1,g=Y8(u),g.level+g.size){case"AAsmall":case"AAAlarge":f=_>=4.5;break;case"AAlarge":f=_>=3;break;case"AAAsmall":f=_>=7;break}return f},kt.mostReadable=function(r,o,u){var _=null,g=0,f,k,O,G;u=u||{},k=u.includeFallbackColors,O=u.level,G=u.size;for(var z=0;z<o.length;z++)f=kt.readability(r,o[z]),f>g&&(g=f,_=kt(o[z]));return kt.isReadable(r,_,{level:O,size:G})||!k?_:(u.includeFallbackColors=!1,kt.mostReadable(r,["#fff","#000"],u))};var hy=kt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},W8=kt.hexNames=j8(hy);function j8(r){var o={};for(var u in r)r.hasOwnProperty(u)&&(o[r[u]]=u);return o}function nS(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function Qn(r,o){K8(r)&&(r="100%");var u=q8(r);return r=Math.min(o,Math.max(0,parseFloat(r))),u&&(r=parseInt(r*o,10)/100),Math.abs(r-o)<1e-6?1:r%o/parseFloat(o)}function em(r){return Math.min(1,Math.max(0,r))}function Kr(r){return parseInt(r,16)}function K8(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function q8(r){return typeof r=="string"&&r.indexOf("%")!=-1}function Ts(r){return r.length==1?"0"+r:""+r}function Bh(r){return r<=1&&(r=r*100+"%"),r}function iS(r){return Math.round(parseFloat(r)*255).toString(16)}function rS(r){return Kr(r)/255}var ks=function(){var r="[-\\+]?\\d+%?",o="[-\\+]?\\d*\\.\\d+%?",u="(?:"+o+")|(?:"+r+")",_="[\\s|\\(]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",g="[\\s|\\(]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?";return{CSS_UNIT:new RegExp(u),rgb:new RegExp("rgb"+_),rgba:new RegExp("rgba"+g),hsl:new RegExp("hsl"+_),hsla:new RegExp("hsla"+g),hsv:new RegExp("hsv"+_),hsva:new RegExp("hsva"+g),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ca(r){return!!ks.CSS_UNIT.exec(r)}function X8(r){r=r.replace(T8,"").replace(k8,"").toLowerCase();var o=!1;if(hy[r])r=hy[r],o=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var u;return(u=ks.rgb.exec(r))?{r:u[1],g:u[2],b:u[3]}:(u=ks.rgba.exec(r))?{r:u[1],g:u[2],b:u[3],a:u[4]}:(u=ks.hsl.exec(r))?{h:u[1],s:u[2],l:u[3]}:(u=ks.hsla.exec(r))?{h:u[1],s:u[2],l:u[3],a:u[4]}:(u=ks.hsv.exec(r))?{h:u[1],s:u[2],v:u[3]}:(u=ks.hsva.exec(r))?{h:u[1],s:u[2],v:u[3],a:u[4]}:(u=ks.hex8.exec(r))?{r:Kr(u[1]),g:Kr(u[2]),b:Kr(u[3]),a:rS(u[4]),format:o?"name":"hex8"}:(u=ks.hex6.exec(r))?{r:Kr(u[1]),g:Kr(u[2]),b:Kr(u[3]),format:o?"name":"hex"}:(u=ks.hex4.exec(r))?{r:Kr(u[1]+""+u[1]),g:Kr(u[2]+""+u[2]),b:Kr(u[3]+""+u[3]),a:rS(u[4]+""+u[4]),format:o?"name":"hex8"}:(u=ks.hex3.exec(r))?{r:Kr(u[1]+""+u[1]),g:Kr(u[2]+""+u[2]),b:Kr(u[3]+""+u[3]),format:o?"name":"hex"}:!1}function Y8(r){var o,u;return r=r||{level:"AA",size:"small"},o=(r.level||"AA").toUpperCase(),u=(r.size||"small").toLowerCase(),o!=="AA"&&o!=="AAA"&&(o="AA"),u!=="small"&&u!=="large"&&(u="small"),{level:o,size:u}}var sS={inject:["ColorPickerInstance"],methods:{handleEscape(r){this.ColorPickerInstance.handleOnEscapeKeydown(r)}}},Oh={data(){return{prefixCls:"ivu-color-picker",inputPrefixCls:"ivu-input",iconPrefixCls:"ivu-icon",transferPrefixCls:"ivu-transfer"}}};function dy(r,o){const u=kt(r),{_a:_}=u;return _==null&&u.setAlpha(o||1),u}function J8(r,o){const u=o&&o.a;if(o){if(o.hsl)return dy(o.hsl,u);if(o.hex&&o.hex.length>0)return dy(o.hex,u)}return dy(o,u)}function Vh(r,o){const u=r===""?"#2d8cf0":r,_=J8(r,u),g=_.toHsl(),f=_.toHsv();return g.s===0&&(g.h=u.h||u.hsl&&u.hsl.h||o||0,f.h=g.h),f.v<.0164&&(f.h=u.h||u.hsv&&u.hsv.h||0,f.s=u.s||u.hsv&&u.hsv.s||0),g.l<.01&&(g.h=u.h||u.hsl&&u.hsl.h||0,g.s=u.s||u.hsl&&u.hsl.s||0),{hsl:g,hex:_.toHexString().toUpperCase(),rgba:_.toRgb(),hsv:f,oldHue:u.h||o||g.h,source:u.source,a:u.a||_.getAlpha()}}function As(r,o,u){return r<o?o:r>u?u:r}function aS(r,o,u){return w(r,o)?u:0}function oS(r,o){return r.touches?r.touches[0][o]:0}function Fh(r){const{r:o,g:u,b:_,a:g}=r;return`rgba(${[o,u,_,g].join(",")})`}const Z8={name:"RecommendedColors",mixins:[sS,Oh],emits:["picker-color","change"],props:{list:{type:Array,default:void 0}},data(){const r=Math.ceil(this.list.length/12),o=1;return{left:-o,right:o,up:-o,down:o,powerKey:"shiftKey",grid:{x:1,y:1},rows:r,columns:12}},computed:{hideClass(){return`${this.prefixCls}-hide`},linearIndex(){return this.getLinearIndex(this.grid)},currentCircle(){return this.$refs[`color-circle-${this.linearIndex}`][0]}},methods:{getLinearIndex(r){return this.columns*(r.y-1)+r.x-1},getMaxLimit(r){return r==="x"?this.columns:this.rows},handleArrow(r,o,u){r.preventDefault(),r.stopPropagation(),this.blurColor();const _={...this.grid};r[this.powerKey]?u<0?_[o]=1:_[o]=this.getMaxLimit(o):_[o]+=u;const g=this.getLinearIndex(_);g>=0&&g<this.list.length&&(this.grid[o]=As(_[o],1,this.getMaxLimit(o))),this.focusColor()},blurColor(){this.currentCircle.classList.add(this.hideClass)},focusColor(){this.currentCircle.classList.remove(this.hideClass)},handleEnter(r){this.handleClick(r,this.currentCircle)},handleClick(r,o){r.preventDefault(),r.stopPropagation(),this.$refs.reference.focus();const u=o||r.target,_=u.dataset.colorId||u.parentElement.dataset.colorId;if(_){this.blurColor();const g=Number(_)+1;this.grid.x=g%this.columns||this.columns,this.grid.y=Math.ceil(g/this.columns),this.focusColor(),this.$emit("picker-color",this.list[_]),this.$emit("change",{hex:this.list[_],source:"hex"})}},lineBreak(r,o){if(!o)return!1;const u=o+1;return u<r.length&&u%this.columns===0}}},Q8=["data-color-id"],eB={key:0};function tB(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{ref:"reference",tabindex:"0",onClick:o[0]||(o[0]=(...k)=>f.handleClick&&f.handleClick(...k)),onKeydown:[o[1]||(o[1]=t.withKeys((...k)=>r.handleEscape&&r.handleEscape(...k),["esc"])),o[2]||(o[2]=t.withKeys((...k)=>f.handleEnter&&f.handleEnter(...k),["enter"])),o[3]||(o[3]=t.withKeys(k=>f.handleArrow(k,"x",g.left),["left"])),o[4]||(o[4]=t.withKeys(k=>f.handleArrow(k,"x",g.right),["right"])),o[5]||(o[5]=t.withKeys(k=>f.handleArrow(k,"y",g.up),["up"])),o[6]||(o[6]=t.withKeys(k=>f.handleArrow(k,"y",g.down),["down"]))],onBlur:o[7]||(o[7]=(...k)=>f.blurColor&&f.blurColor(...k)),onFocus:o[8]||(o[8]=(...k)=>f.focusColor&&f.focusColor(...k))},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.list,(k,O)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:k+":"+O},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-picker-colors-wrapper"])},[t.createElementVNode("div",{"data-color-id":O},[t.createElementVNode("div",{style:t.normalizeStyle({background:k}),class:t.normalizeClass([r.prefixCls+"-picker-colors-wrapper-color"])},null,6),t.createElementVNode("div",{ref_for:!0,ref:"color-circle-"+O,class:t.normalizeClass([r.prefixCls+"-picker-colors-wrapper-circle",f.hideClass])},null,2)],8,Q8)],2),f.lineBreak(u.list,O)?(t.openBlock(),t.createElementBlock("br",eB)):t.createCommentVNode("",!0)],64))),128))],544)}var nB=c(Z8,[["render",tB]]),Uh={mixins:[sS],props:{focused:{type:Boolean,default:!1},value:{type:Object,default:void 0}},created(){this.focused&&setTimeout(()=>this.$el.focus(),1)},beforeUnmount(){this.unbindEventListeners()},methods:{handleLeft(r){this.handleSlide(r,this.left,"left")},handleRight(r){this.handleSlide(r,this.right,"right")},handleUp(r){this.handleSlide(r,this.up,"up")},handleDown(r){this.handleSlide(r,this.down,"down")},handleMouseDown(r){this.ColorPickerInstance.handleOnDragging(!0),this.handleChange(r,!0),a(window,"mousemove",this.handleChange),a(window,"mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){l(window,"mousemove",this.handleChange),l(window,"mouseup",this.handleMouseUp),setTimeout(()=>this.ColorPickerInstance.handleOnDragging(!1),1)},getLeft(r){if(!s)return;const{container:o}=this.$refs,u=o.getBoundingClientRect().left+window.pageXOffset;return(r.pageX||oS(r,"PageX"))-u},getTop(r){if(!s)return;const{container:o}=this.$refs,u=o.getBoundingClientRect().top+window.pageYOffset;return(r.pageY||oS(r,"PageY"))-u}}};const iB={name:"Saturation",mixins:[Uh,Oh],emits:["change"],data(){return{left:-.01,right:.01,up:.01,down:-.01,multiplier:10,powerKey:"shiftKey"}},computed:{bgColorStyle(){return{background:`hsl(${this.value.hsv.h}, 100%, 50%)`}},pointerStyle(){return{top:`${-(this.value.hsv.v*100)+1+100}%`,left:`${this.value.hsv.s*100}%`}}},methods:{change(r,o,u,_){this.$emit("change",{h:r,s:o,v:u,a:_,source:"hsva"})},handleSlide(r,o,u){r.preventDefault(),r.stopPropagation();const _=r[this.powerKey]?o*this.multiplier:o,{h:g,s:f,v:k,a:O}=this.value.hsv,G=As(f+aS(u,["left","right"],_),0,1),z=As(k+aS(u,["up","down"],_),0,1);this.change(g,G,z,O)},handleChange(r){r.preventDefault(),r.stopPropagation();const{clientWidth:o,clientHeight:u}=this.$refs.container,_=As(this.getLeft(r),0,o),g=As(this.getTop(r),0,u),f=_/o,k=As(1-g/u,0,1);this.change(this.value.hsv.h,f,k,this.value.hsv.a)},handleMouseDown(r){Uh.methods.handleMouseDown.call(this,r),a(window,"mouseup",this.handleChange)},unbindEventListeners(r){Uh.methods.unbindEventListeners.call(this,r),l(window,"mouseup",this.handleChange)}}};function rB(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([r.prefixCls+"-saturation-wrapper"]),tabindex:"0",onKeydown:[o[1]||(o[1]=t.withKeys((...k)=>r.handleEscape&&r.handleEscape(...k),["esc"])),o[3]||(o[3]=t.withKeys((...k)=>r.handleLeft&&r.handleLeft(...k),["left"])),o[4]||(o[4]=t.withKeys((...k)=>r.handleRight&&r.handleRight(...k),["right"])),o[5]||(o[5]=t.withKeys((...k)=>r.handleUp&&r.handleUp(...k),["up"])),o[6]||(o[6]=t.withKeys((...k)=>r.handleDown&&r.handleDown(...k),["down"]))],onClick:o[2]||(o[2]=k=>r.$el.focus())},[t.createElementVNode("div",{ref:"container",style:t.normalizeStyle(f.bgColorStyle),class:t.normalizeClass([r.prefixCls+"-saturation"]),onMousedown:o[0]||(o[0]=(...k)=>f.handleMouseDown&&f.handleMouseDown(...k))},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-saturation--white"])},null,2),t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-saturation--black"])},null,2),t.createElementVNode("div",{style:t.normalizeStyle(f.pointerStyle),class:t.normalizeClass([r.prefixCls+"-saturation-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-saturation-circle"])},null,2)],6)],38)],34)}var sB=c(iB,[["render",rB]]);const aB={name:"Hue",mixins:[Uh,Oh],emits:["change"],data(){const r=.06944444444444445,o=20*r;return{left:-r,right:r,up:o,down:-o,powerKey:"shiftKey",percent:As(this.value.hsl.h*100/360,0,100)}},watch:{value(){this.percent=As(this.value.hsl.h*100/360,0,100)}},methods:{change(r){this.percent=As(r,0,100);const{h:o,s:u,l:_,a:g}=this.value.hsl,f=As(r/100*360,0,360);o!==f&&this.$emit("change",{h:f,s:u,l:_,a:g,source:"hsl"})},handleSlide(r,o){if(r.preventDefault(),r.stopPropagation(),r[this.powerKey]){this.change(o<0?0:100);return}this.change(this.percent+o)},handleChange(r){r.preventDefault(),r.stopPropagation();const o=this.getLeft(r);if(o<0){this.change(0);return}const{clientWidth:u}=this.$refs.container;if(o>u){this.change(100);return}this.change(o*100/u)}}};function oB(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([r.prefixCls+"-hue"]),tabindex:"0",onClick:o[3]||(o[3]=k=>r.$el.focus()),onKeydown:[o[4]||(o[4]=t.withKeys((...k)=>r.handleEscape&&r.handleEscape(...k),["esc"])),o[5]||(o[5]=t.withKeys((...k)=>r.handleLeft&&r.handleLeft(...k),["left"])),o[6]||(o[6]=t.withKeys((...k)=>r.handleRight&&r.handleRight(...k),["right"])),o[7]||(o[7]=t.withKeys((...k)=>r.handleUp&&r.handleUp(...k),["up"])),o[8]||(o[8]=t.withKeys((...k)=>r.handleDown&&r.handleDown(...k),["down"]))]},[t.createElementVNode("div",{ref:"container",class:t.normalizeClass([r.prefixCls+"-hue-container"]),onMousedown:o[0]||(o[0]=(...k)=>r.handleMouseDown&&r.handleMouseDown(...k)),onTouchmove:o[1]||(o[1]=(...k)=>f.handleChange&&f.handleChange(...k)),onTouchstart:o[2]||(o[2]=(...k)=>f.handleChange&&f.handleChange(...k))},[t.createElementVNode("div",{style:t.normalizeStyle({top:0,left:`${g.percent}%`}),class:t.normalizeClass([r.prefixCls+"-hue-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-hue-picker"])},null,2)],6)],34)],34)}var lB=c(aB,[["render",oB]]);const cB={name:"Alpha",mixins:[Uh,Oh],emits:["change"],data(){return{left:-1,right:1,up:10,down:-10,powerKey:"shiftKey"}},computed:{gradientStyle(){const{r,g:o,b:u}=this.value.rgba,_=Fh({r,g:o,b:u,a:0}),g=Fh({r,g:o,b:u,a:1});return{background:`linear-gradient(to right, ${_} 0%, ${g} 100%)`}}},methods:{change(r){const{h:o,s:u,l:_}=this.value.hsl,{a:g}=this.value;g!==r&&this.$emit("change",{h:o,s:u,l:_,a:r,source:"rgba"})},handleSlide(r,o){r.preventDefault(),r.stopPropagation(),this.change(As(r[this.powerKey]?o:Math.round(this.value.hsl.a*100+o)/100,0,1))},handleChange(r){r.preventDefault(),r.stopPropagation();const o=this.getLeft(r);if(o<0){this.change(0);return}const{clientWidth:u}=this.$refs.container;if(o>u){this.change(1);return}this.change(Math.round(o*100/u)/100)}}};function uB(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([r.prefixCls+"-alpha"]),tabindex:"0",onClick:o[3]||(o[3]=k=>r.$el.focus()),onKeydown:[o[4]||(o[4]=t.withKeys((...k)=>r.handleEscape&&r.handleEscape(...k),["esc"])),o[5]||(o[5]=t.withKeys((...k)=>r.handleLeft&&r.handleLeft(...k),["left"])),o[6]||(o[6]=t.withKeys((...k)=>r.handleRight&&r.handleRight(...k),["right"])),o[7]||(o[7]=t.withKeys((...k)=>r.handleUp&&r.handleUp(...k),["up"])),o[8]||(o[8]=t.withKeys((...k)=>r.handleDown&&r.handleDown(...k),["down"]))]},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-alpha-checkboard-wrap"])},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-alpha-checkerboard"])},null,2)],2),t.createElementVNode("div",{style:t.normalizeStyle(f.gradientStyle),class:t.normalizeClass([r.prefixCls+"-alpha-gradient"])},null,6),t.createElementVNode("div",{ref:"container",class:t.normalizeClass([r.prefixCls+"-alpha-container"]),onMousedown:o[0]||(o[0]=(...k)=>r.handleMouseDown&&r.handleMouseDown(...k)),onTouchmove:o[1]||(o[1]=(...k)=>f.handleChange&&f.handleChange(...k)),onTouchstart:o[2]||(o[2]=(...k)=>f.handleChange&&f.handleChange(...k))},[t.createElementVNode("div",{style:t.normalizeStyle({top:0,left:`${r.value.a*100}%`}),class:t.normalizeClass([r.prefixCls+"-alpha-pointer"])},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-alpha-picker"])},null,2)],6)],34)],34)}var hB=c(cB,[["render",uB]]);const dB={name:"ColorPicker",components:{Drop:je,RecommendColors:nB,Saturation:sB,Hue:lB,Alpha:hB,iInput:hs,iButton:ar,Icon:E},directives:{clickOutside:en},mixins:[Pn,Oh,tn,Ms],emits:["on-active-change","on-open-change","on-change","on-pick-success","on-pick-clear","update:modelValue"],provide(){return{ColorPickerInstance:this}},props:{modelValue:{type:String,default:void 0},hue:{type:Boolean,default:!0},alpha:{type:Boolean,default:!1},recommend:{type:Boolean,default:!1},format:{type:String,validator(r){return w(r,["hsl","hsv","hex","rgb"])},default:void 0},colors:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},hideDropDown:{type:Boolean,default:!1},placement:{type:String,validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},name:{type:String,default:void 0},editable:{type:Boolean,default:!0},capture:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return r.$VIEWUI?r.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){return{val:Vh(this.modelValue||""),currentValue:this.modelValue||"",dragging:!1,visible:!1,recommendedColor:["#2d8cf0","#19be6b","#ff9900","#ed4014","#00b5ff","#19c919","#f9e31c","#ea1a1a","#9b1dea","#00c2b1","#ac7a33","#1d35ea","#8bc34a","#f16b62","#ea4ca3","#0d94aa","#febd79","#5d4037","#00bcd4","#f06292","#cddc39","#607d8b","#000000","#ffffff"]}},computed:{arrowClasses(){return[`${this.inputPrefixCls}-icon`,`${this.inputPrefixCls}-icon-normal`]},transition(){return w(this.placement,["bottom-start","bottom","bottom-end"])?"slide-up":"fade"},saturationColors:{get(){return this.val},set(r){this.val=r,this.$emit("on-active-change",this.formatColor)}},classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-transfer`]:this.transfer}]},wrapClasses(){return[`${this.prefixCls}-rel`,`${this.prefixCls}-${this.size}`,`${this.inputPrefixCls}-wrapper`,`${this.inputPrefixCls}-wrapper-${this.size}`,{[`${this.prefixCls}-disabled`]:this.itemDisabled}]},inputClasses(){return[`${this.prefixCls}-input`,`${this.inputPrefixCls}`,`${this.inputPrefixCls}-${this.size}`,{[`${this.prefixCls}-focused`]:this.visible,[`${this.prefixCls}-disabled`]:this.itemDisabled}]},dropClasses(){return{[`${this.transferPrefixCls}-no-max-height`]:!0,[`${this.prefixCls}-transfer`]:this.transfer,[`${this.prefixCls}-hide-drop`]:this.hideDropDown,[this.transferClassName]:this.transferClassName}},displayedColorStyle(){return{backgroundColor:Fh(this.visible?this.saturationColors.rgba:kt(this.modelValue).toRgb())}},formatColor(){const{format:r,saturationColors:o}=this;if(r){if(r==="hsl")return kt(o.hsl).toHslString();if(r==="hsv")return kt(o.hsv).toHsvString();if(r==="hex")return o.hex;if(r==="rgb")return Fh(o.rgba)}else if(this.alpha)return Fh(o.rgba);return o.hex},confirmColorClasses(){return[`${this.prefixCls}-confirm-color`,{[`${this.prefixCls}-confirm-color-editable`]:this.editable}]},arrowType(){const r=this.globalConfig;let o="ios-arrow-down";return r&&(r.colorPicker.customArrow?o="":r.colorPicker.arrow&&(o=r.colorPicker.arrow)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.colorPicker.customArrow&&(o=r.colorPicker.customArrow),o},arrowSize(){const r=this.globalConfig;let o="";return r&&r.colorPicker.arrowSize&&(o=r.colorPicker.arrowSize),o}},watch:{modelValue(r){this.val=Vh(r||"")},visible(r){this.val=Vh(this.modelValue||""),this.$refs.drop[r?"update":"destroy"](),this.$emit("on-open-change",!!r)}},methods:{setDragging(r){this.dragging=r},handleClose(r){if(this.visible){if(this.dragging||r.type==="mousedown"){this.$refs.editColorInput&&r.target!==this.$refs.editColorInput.$el.querySelector("input")&&r.preventDefault();return}if(this.transfer){const o=this.$refs.drop.$refs.drop;if(o===r.target||o.contains(r.target))return}this.closer(r);return}this.visible=!1},toggleVisible(){this.itemDisabled||(this.visible=!this.visible,this.$refs.input.focus())},childChange(r){this.colorChange(r)},colorChange(r,o){this.oldHue=this.saturationColors.hsl.h,this.saturationColors=Vh(r,o||this.oldHue)},closer(r){r&&(r.preventDefault(),r.stopPropagation()),this.visible=!1,this.$refs.input.focus()},handleButtons(r,o){this.currentValue=o,this.$emit("update:modelValue",o),this.$emit("on-change",o),this.handleFormItemChange("change",o),this.closer(r)},handleSuccess(r){this.handleButtons(r,this.formatColor),this.$emit("on-pick-success")},handleClear(r){this.handleButtons(r,""),this.$emit("on-pick-clear")},handleSelectColor(r){this.val=Vh(r),this.$emit("on-active-change",this.formatColor)},handleEditColor(r){const o=r.target.value;this.handleSelectColor(o)},handleFirstTab(r){r.shiftKey&&(r.preventDefault(),r.stopPropagation(),this.$refs.ok.$el.focus())},handleLastTab(r){r.shiftKey||(r.preventDefault(),r.stopPropagation(),this.$refs.saturation.$el.focus())},onTab(r){this.visible&&r.preventDefault()},onEscape(r){this.visible&&this.closer(r)},onArrow(r){this.visible||(r.preventDefault(),r.stopPropagation(),this.visible=!0)},handleOnEscapeKeydown(r){this.closer(r)},handleOnDragging(r){this.setDragging(r)}}},fB=["name","value"],pB=["tabindex"];function mB(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Saturation"),G=t.resolveComponent("Hue"),z=t.resolveComponent("Alpha"),j=t.resolveComponent("recommend-colors"),ae=t.resolveComponent("i-input"),_e=t.resolveComponent("i-button"),ye=t.resolveComponent("Drop"),me=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass(f.wrapClasses),onClick:o[4]||(o[4]=(...ie)=>f.toggleVisible&&f.toggleVisible(...ie))},[t.createElementVNode("input",{name:u.name,value:g.currentValue,type:"hidden"},null,8,fB),t.createVNode(k,{type:f.arrowType,custom:f.customArrowType,size:f.arrowSize,class:t.normalizeClass(f.arrowClasses)},null,8,["type","custom","size","class"]),t.createElementVNode("div",{ref:"input",tabindex:r.itemDisabled?void 0:0,class:t.normalizeClass(f.inputClasses),onKeydown:[o[0]||(o[0]=t.withKeys((...ie)=>f.onTab&&f.onTab(...ie),["tab"])),o[1]||(o[1]=t.withKeys((...ie)=>f.onEscape&&f.onEscape(...ie),["esc"])),o[2]||(o[2]=t.withKeys((...ie)=>f.onArrow&&f.onArrow(...ie),["up"])),o[3]||(o[3]=t.withKeys((...ie)=>f.onArrow&&f.onArrow(...ie),["down"]))]},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-color"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-color-empty"])},[t.createElementVNode("i",{class:t.normalizeClass([r.iconPrefixCls,r.iconPrefixCls+"-ios-close"])},null,2)],2),[[t.vShow,u.modelValue===""&&!g.visible]]),t.withDirectives(t.createElementVNode("div",{style:t.normalizeStyle(f.displayedColorStyle)},null,4),[[t.vShow,u.modelValue||g.visible]])],2)],42,pB)],2),t.createVNode(ye,{ref:"drop",visible:g.visible,placement:u.placement,transfer:u.transfer,classes:f.dropClasses,eventsEnabled:u.eventsEnabled,"transition-name":"transition-drop"},{default:t.withCtx(()=>[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[g.visible?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([r.prefixCls+"-picker"])},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-picker-wrapper"])},[t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-picker-panel"])},[t.createVNode(O,{ref:"saturation",value:f.saturationColors,focused:g.visible,onChange:f.childChange,onKeydown:t.withKeys(f.handleFirstTab,["tab"])},null,8,["value","focused","onChange","onKeydown"])],2),u.hue?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([r.prefixCls+"-picker-hue-slider"])},[t.createVNode(G,{value:f.saturationColors,onChange:f.childChange},null,8,["value","onChange"])],2)):t.createCommentVNode("",!0),u.alpha?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([r.prefixCls+"-picker-alpha-slider"])},[t.createVNode(z,{value:f.saturationColors,onChange:f.childChange},null,8,["value","onChange"])],2)):t.createCommentVNode("",!0),u.colors.length?(t.openBlock(),t.createBlock(j,{key:2,list:u.colors,class:t.normalizeClass([r.prefixCls+"-picker-colors"]),onPickerColor:f.handleSelectColor},null,8,["list","class","onPickerColor"])):t.createCommentVNode("",!0),!u.colors.length&&u.recommend?(t.openBlock(),t.createBlock(j,{key:3,list:g.recommendedColor,class:t.normalizeClass([r.prefixCls+"-picker-colors"]),onPickerColor:f.handleSelectColor},null,8,["list","class","onPickerColor"])):t.createCommentVNode("",!0)],2),t.createElementVNode("div",{class:t.normalizeClass([r.prefixCls+"-confirm"])},[t.createElementVNode("span",{class:t.normalizeClass(f.confirmColorClasses)},[u.editable?(t.openBlock(),t.createBlock(ae,{key:0,ref:"editColorInput",modelValue:f.formatColor,size:"small",onOnEnter:f.handleEditColor,onOnBlur:f.handleEditColor},null,8,["modelValue","onOnEnter","onOnBlur"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(f.formatColor),1)],64))],2),t.createVNode(_e,{class:t.normalizeClass([r.prefixCls+"-confirm-btn-cancel"]),ref:"clear",tabindex:0,size:"small",onClick:f.handleClear,onKeydown:[t.withKeys(f.handleClear,["enter"]),t.withKeys(f.closer,["esc"])]},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(r.t("i.datepicker.clear")),1)]),_:1},8,["class","onClick","onKeydown"]),t.createVNode(_e,{ref:"ok",tabindex:0,size:"small",type:"primary",onClick:f.handleSuccess,onKeydown:[t.withKeys(f.handleLastTab,["tab"]),t.withKeys(f.handleSuccess,["enter"]),t.withKeys(f.closer,["esc"])]},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(r.t("i.datepicker.ok")),1)]),_:1},8,["onClick","onKeydown"])],2)],2)):t.createCommentVNode("",!0)]),_:1})]),_:1},8,["visible","placement","transfer","classes","eventsEnabled"])],2)),[[me,f.handleClose,u.capture]])}var lS=c(dB,[["render",mB]]);const gB="ivu-layout",vB={name:"Content",computed:{wrapClasses(){return`${gB}-content`}}};function yB(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[t.renderSlot(r.$slots,"default")],2)}var fy=c(vB,[["render",yB]]);function bB(r){var o;if(r.nodeName==="SELECT")r.focus(),o=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var u=r.hasAttribute("readonly");u||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),u||r.removeAttribute("readonly"),o=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var _=window.getSelection(),g=document.createRange();g.selectNodeContents(r),_.removeAllRanges(),_.addRange(g),o=_.toString()}return o}var _B=bB,cS={name:"RenderCell",props:{render:Function},render(){return this.render(t.h)}};const xB={components:{RenderCell:cS},props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},withIcon:Boolean,render:{type:Function},hasTitle:Boolean,styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String},background:{type:Boolean,default:!1},msgType:{type:String}},data(){return{withDesc:!1}},computed:{baseClass(){return`${this.prefixCls}-notice`},renderFunc(){return this.render||function(){}},classes(){return[this.baseClass,{[`${this.className}`]:!!this.className,[`${this.baseClass}-closable`]:this.closable,[`${this.baseClass}-with-desc`]:this.withDesc,[`${this.baseClass}-with-background`]:this.background}]},contentClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]},messageContentClasses(){return[`${this.baseClass}-content`,{[`${this.baseClass}-content-${this.msgType}`]:this.msgType,[`${this.baseClass}-content-background`]:this.background}]},contentWithIcon(){return[this.withIcon?`${this.prefixCls}-content-with-icon`:"",!this.hasTitle&&this.withIcon?`${this.prefixCls}-content-with-render-notitle`:""]},messageClasses(){return[`${this.baseClass}-content`,this.render!==void 0?`${this.baseClass}-content-with-render`:""]}},methods:{clearCloseTimer(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close(){this.clearCloseTimer(),this.onClose(),this.$parent.$parent.close(this.name)},handleEnter(r){this.type==="message"&&(r.style.height=r.scrollHeight+"px")},handleLeave(r){this.type==="message"&&s&&document.getElementsByClassName("ivu-message-notice").length!==1&&(r.style.height=0,r.style.paddingTop=0,r.style.paddingBottom=0)}},mounted(){if(this.handleEnter(this.$el),this.clearCloseTimer(),this.duration!==0&&(this.closeTimer=setTimeout(()=>{this.close()},this.duration*1e3)),this.prefixCls==="ivu-notice"){let r=this.$refs.content.querySelectorAll(`.${this.prefixCls}-desc`)[0];this.withDesc=this.render?!0:r?r.innerHTML!=="":!1}},beforeUnmount(){this.handleLeave(this.$el),this.clearCloseTimer()}},wB=["innerHTML"],CB=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)],SB=["innerHTML"],EB=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-close"},null,-1)];function MB(r,o,u,_,g,f){const k=t.resolveComponent("render-cell");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(u.styles)},[u.type==="notice"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("div",{class:t.normalizeClass(f.contentClasses),ref:"content",innerHTML:u.content},null,10,wB),t.createElementVNode("div",{class:t.normalizeClass(f.contentWithIcon)},[t.createVNode(k,{render:f.renderFunc},null,8,["render"])],2),u.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([f.baseClass+"-close"]),onClick:o[0]||(o[0]=(...O)=>f.close&&f.close(...O))},CB,2)):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0),u.type==="message"?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(f.messageContentClasses),ref:"content"},[t.createElementVNode("div",{class:t.normalizeClass([f.baseClass+"-content-text"]),innerHTML:u.content},null,10,SB),t.createElementVNode("div",{class:t.normalizeClass([f.baseClass+"-content-text"])},[t.createVNode(k,{render:f.renderFunc},null,8,["render"])],2),u.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([f.baseClass+"-close"]),onClick:o[1]||(o[1]=(...O)=>f.close&&f.close(...O))},EB,2)):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0)],6)}var TB=c(xB,[["render",MB]]);const kB="ivu-notification";let AB=0;const PB=Date.now();function IB(){return"ivuNotification_"+PB+"_"+AB++}const NB={components:{Notice:TB},props:{prefixCls:{type:String,default:kB},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String},transitionName:{type:String}},data(){return{notices:[],tIndex:this.handleGetIndex()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.className}`]:!!this.className}]},wrapStyles(){let r=Object.assign({},this.styles);return r["z-index"]=1010+this.tIndex,r}},methods:{add(r){const o=r.name||IB();let u=Object.assign({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:o},r);this.notices.push(u),this.tIndex=this.handleGetIndex()},close(r){const o=this.notices;for(let u=0;u<o.length;u++)if(o[u].name===r){this.notices.splice(u,1);break}},closeAll(){this.notices=[]},handleGetIndex(){return He(),xe}}};function RB(r,o,u,_,g,f){const k=t.resolveComponent("Notice");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.wrapStyles)},[t.createVNode(t.TransitionGroup,{name:u.transitionName,appear:""},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.notices,O=>(t.openBlock(),t.createBlock(k,{key:O.name,"prefix-cls":u.prefixCls,styles:O.styles,type:O.type,content:O.content,duration:O.duration,render:O.render,"has-title":O.hasTitle,withIcon:O.withIcon,closable:O.closable,name:O.name,"transition-name":O.transitionName,background:O.background,"msg-type":O.msgType,"on-close":O.onClose},null,8,["prefix-cls","styles","type","content","duration","render","has-title","withIcon","closable","name","transition-name","background","msg-type","on-close"]))),128))]),_:1},8,["name"])],6)}var tm=c(NB,[["render",RB]]);tm.newInstance=r=>{if(!s)return;const o=r||{};let u=null;const _=t.createApp({render(){return t.h(tm,Object.assign({ref:"notification"},o))},created(){u=t.getCurrentInstance()}}),g=document.createElement("div");document.body.appendChild(g),_.mount(g);const f=u.refs.notification;return{notice(k){f.add(k)},remove(k){f.close(k)},component:f,destroy(k){f.closeAll(),s&&setTimeout(function(){document.body.removeChild(document.getElementsByClassName(k)[0])},500)}}};const py="ivu-message",uS="ivu-icon",hS="ivu_message_key_",Uc={top:24,duration:1.5,background:!1};let nm,dS=1;const DB={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle",loading:"ios-loading"},fS="move-up";function pS(){return nm=nm||tm.newInstance({prefixCls:py,styles:{top:`${Uc.top}px`},transitionName:fS}),nm}function LB(r="",o=Uc.duration,u,_=function(){},g=!1,f=function(){},k=Uc.background){const O=DB[u],G=u==="loading"?" ivu-load-loop":"";let z=pS();return z.notice({name:`${hS}${dS}`,duration:o,styles:{},transitionName:fS,content:`
            <div class="${py}-custom-content ${py}-${u}">
                <i class="${uS} ${uS}-${O} ${G}"></i>
                <span>${r}</span>
            </div>
        `,render:f,onClose:_,closable:g,type:"message",msgType:u,background:k}),function(){let j=dS++;return function(){z.remove(`${hS}${j}`)}}()}var zh={name:"Message",info(r){return this.message("info",r)},success(r){return this.message("success",r)},warning(r){return this.message("warning",r)},error(r){return this.message("error",r)},loading(r){return this.message("loading",r)},message(r,o){return typeof o=="string"&&(o={content:o}),LB(o.content,o.duration,r,o.onClose,o.closable,o.render,o.background)},config(r){(r.top||r.top===0)&&(Uc.top=r.top),(r.duration||r.duration===0)&&(Uc.duration=r.duration),r.background&&(Uc.background=r.background)},destroy(){let r=pS();nm=null,r.destroy("ivu-message")}};const BB="",OB="";function im({text:r="",successTip:o=BB,errorTip:u=OB,success:_,error:g,showTip:f=!0}){if(!s)return;const k=document.documentElement.getAttribute("dir")==="rtl",O=document.createElement("textarea");O.style.fontSize="12pt",O.style.border="0",O.style.padding="0",O.style.margin="0",O.style.position="absolute",O.style[k?"right":"left"]="-9999px";let G=window.pageYOffset||document.documentElement.scrollTop;O.style.top=`${G}px`,O.setAttribute("readonly",""),O.value=r,document.body.appendChild(O),_B(O);let z;try{z=document.execCommand("copy"),f&&zh.success({content:o}),document.body.removeChild(O),_&&_.call()}catch{z=!1,f&&zh.error({content:u}),document.body.removeChild(O),g&&g.call()}}function my(r){return r*1<10?`0${r}`:r}const VB={name:"CountDown",emits:["on-end"],props:{format:{type:Function},target:{type:[Date,Number]},interval:{type:Number,default:1e3}},data(){return{lastTime:""}},methods:{initTime(){let r=0,o=0;try{Object.prototype.toString.call(this.target)==="[object Date]"?o=this.target.getTime():o=new Date(this.target).getTime()}catch(u){throw new Error("invalid target prop",u)}return r=o-new Date().getTime(),r<0?0:r},tick(){let{lastTime:r}=this;this.timer=setTimeout(()=>{r<this.interval?(clearTimeout(this.timer),this.lastTime=0,this.$emit("on-end")):(r-=this.interval,this.lastTime=r,this.tick())},this.interval)},defaultFormat(r){const o=Math.floor(r/36e5),u=Math.floor((r-o*36e5)/6e4),_=Math.floor((r-o*36e5-u*6e4)/1e3);return`${my(o)}:${my(u)}:${my(_)}`}},computed:{result(){const{format:r=this.defaultFormat}=this;return r(this.lastTime)}},watch:{target(){this.timer&&clearTimeout(this.timer),this.lastTime=this.initTime(),this.tick()}},created(){this.lastTime=this.initTime()},mounted(){this.tick()},beforeUnmount(){this.timer&&clearTimeout(this.timer)}};function FB(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("span",null,t.toDisplayString(f.result),1)}var mS=c(VB,[["render",FB]]),gy={exports:{}};(function(r,o){(function(u,_){r.exports=_(W,o,r)})(J,function(u,_,g){var f=function(k,O,G,z,j,ae){function _e(We){var Ne,Ye,Ke,Dt,Lt,xt,gt=We<0;if(We=Math.abs(We).toFixed(ie.decimals),We+="",Ne=We.split("."),Ye=Ne[0],Ke=Ne.length>1?ie.options.decimal+Ne[1]:"",ie.options.useGrouping){for(Dt="",Lt=0,xt=Ye.length;Lt<xt;++Lt)Lt!==0&&Lt%3===0&&(Dt=ie.options.separator+Dt),Dt=Ye[xt-Lt-1]+Dt;Ye=Dt}return ie.options.numerals.length&&(Ye=Ye.replace(/[0-9]/g,function(Et){return ie.options.numerals[+Et]}),Ke=Ke.replace(/[0-9]/g,function(Et){return ie.options.numerals[+Et]})),(gt?"-":"")+ie.options.prefix+Ye+Ke+ie.options.suffix}function ye(We,Ne,Ye,Ke){return Ye*(-Math.pow(2,-10*We/Ke)+1)*1024/1023+Ne}function me(We){return typeof We=="number"&&!isNaN(We)}var ie=this;if(ie.version=function(){return"1.9.3"},ie.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:ye,formattingFn:_e,prefix:"",suffix:"",numerals:[]},ae&&typeof ae=="object")for(var Pe in ie.options)ae.hasOwnProperty(Pe)&&ae[Pe]!==null&&(ie.options[Pe]=ae[Pe]);ie.options.separator===""?ie.options.useGrouping=!1:ie.options.separator=""+ie.options.separator;for(var At=0,ut=["webkit","moz","ms","o"],mt=0;mt<ut.length&&!window.requestAnimationFrame;++mt)window.requestAnimationFrame=window[ut[mt]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ut[mt]+"CancelAnimationFrame"]||window[ut[mt]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(We,Ne){var Ye=new Date().getTime(),Ke=Math.max(0,16-(Ye-At)),Dt=window.setTimeout(function(){We(Ye+Ke)},Ke);return At=Ye+Ke,Dt}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(We){clearTimeout(We)}),ie.initialize=function(){return!!ie.initialized||(ie.error="",ie.d=typeof k=="string"?document.getElementById(k):k,ie.d?(ie.startVal=Number(O),ie.endVal=Number(G),me(ie.startVal)&&me(ie.endVal)?(ie.decimals=Math.max(0,z||0),ie.dec=Math.pow(10,ie.decimals),ie.duration=1e3*Number(j)||2e3,ie.countDown=ie.startVal>ie.endVal,ie.frameVal=ie.startVal,ie.initialized=!0,!0):(ie.error="[CountUp] startVal ("+O+") or endVal ("+G+") is not a number",!1)):(ie.error="[CountUp] target is null or undefined",!1))},ie.printValue=function(We){var Ne=ie.options.formattingFn(We);ie.d.tagName==="INPUT"?this.d.value=Ne:ie.d.tagName==="text"||ie.d.tagName==="tspan"?this.d.textContent=Ne:this.d.innerHTML=Ne},ie.count=function(We){ie.startTime||(ie.startTime=We),ie.timestamp=We;var Ne=We-ie.startTime;ie.remaining=ie.duration-Ne,ie.options.useEasing?ie.countDown?ie.frameVal=ie.startVal-ie.options.easingFn(Ne,0,ie.startVal-ie.endVal,ie.duration):ie.frameVal=ie.options.easingFn(Ne,ie.startVal,ie.endVal-ie.startVal,ie.duration):ie.countDown?ie.frameVal=ie.startVal-(ie.startVal-ie.endVal)*(Ne/ie.duration):ie.frameVal=ie.startVal+(ie.endVal-ie.startVal)*(Ne/ie.duration),ie.countDown?ie.frameVal=ie.frameVal<ie.endVal?ie.endVal:ie.frameVal:ie.frameVal=ie.frameVal>ie.endVal?ie.endVal:ie.frameVal,ie.frameVal=Math.round(ie.frameVal*ie.dec)/ie.dec,ie.printValue(ie.frameVal),Ne<ie.duration?ie.rAF=requestAnimationFrame(ie.count):ie.callback&&ie.callback()},ie.start=function(We){ie.initialize()&&(ie.callback=We,ie.rAF=requestAnimationFrame(ie.count))},ie.pauseResume=function(){ie.paused?(ie.paused=!1,delete ie.startTime,ie.duration=ie.remaining,ie.startVal=ie.frameVal,requestAnimationFrame(ie.count)):(ie.paused=!0,cancelAnimationFrame(ie.rAF))},ie.reset=function(){ie.paused=!1,delete ie.startTime,ie.initialized=!1,ie.initialize()&&(cancelAnimationFrame(ie.rAF),ie.printValue(ie.startVal))},ie.update=function(We){if(ie.initialize()){if(We=Number(We),!me(We))return void(ie.error="[CountUp] update() - new endVal is not a number: "+We);ie.error="",We!==ie.frameVal&&(cancelAnimationFrame(ie.rAF),ie.paused=!1,delete ie.startTime,ie.startVal=ie.frameVal,ie.endVal=We,ie.countDown=ie.startVal>ie.endVal,ie.rAF=requestAnimationFrame(ie.count))}},ie.initialize()&&ie.printValue(ie.startVal)};return f})})(gy,gy.exports);var UB=gy.exports;const zB={name:"CountUp",props:{start:{type:Number,required:!1,default:0},end:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1,default(){return{}}},callback:{type:Function,required:!1,default:()=>{}}},data(){return{CountUp:null}},watch:{end(r){this.CountUp&&this.CountUp.update&&this.CountUp.update(r)}},mounted(){this.init()},methods:{init(){this.CountUp||(this.CountUp=new UB(this.$el,this.start,this.end,this.decimals,this.duration,this.options),this.CountUp.start(()=>{this.callback(this.CountUp)}))},destroy(){this.CountUp=null}},beforeUnmounted(){this.destroy()},start(r){this.CountUp&&this.CountUp.start&&this.CountUp.start(()=>{r&&r(this.CountUp)})},pauseResume(){this.CountUp&&this.CountUp.pauseResume&&this.CountUp.pauseResume()},reset(){this.CountUp&&this.CountUp.reset&&this.CountUp.reset()},update(r){this.CountUp&&this.CountUp.update&&this.CountUp.update(r)}},$B={class:"ivu-count-up"};function HB(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("span",$B)}var gS=c(zB,[["render",HB]]),Ps={},vS=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,El=/\d\d?/,GB=/\d{3}/,WB=/\d{4}/,rm=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,yS=function(){};function bS(r,o){for(var u=[],_=0,g=r.length;_<g;_++)u.push(r[_].substr(0,o));return u}function _S(r){return function(o,u,_){var g=_[r].indexOf(u.charAt(0).toUpperCase()+u.substr(1).toLowerCase());~g&&(o.month=g)}}function Zs(r,o){for(r=String(r),o=o||2;r.length<o;)r="0"+r;return r}var xS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],wS=["January","February","March","April","May","June","July","August","September","October","November","December"],jB=bS(wS,3),KB=bS(xS,3);Ps.i18n={dayNamesShort:KB,dayNames:xS,monthNamesShort:jB,monthNames:wS,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10)*r%10]}};var CS={D:function(r){return r.getDay()},DD:function(r){return Zs(r.getDay())},Do:function(r,o){return o.DoFn(r.getDate())},d:function(r){return r.getDate()},dd:function(r){return Zs(r.getDate())},ddd:function(r,o){return o.dayNamesShort[r.getDay()]},dddd:function(r,o){return o.dayNames[r.getDay()]},M:function(r){return r.getMonth()+1},MM:function(r){return Zs(r.getMonth()+1)},MMM:function(r,o){return o.monthNamesShort[r.getMonth()]},MMMM:function(r,o){return o.monthNames[r.getMonth()]},yy:function(r){return String(r.getFullYear()).substr(2)},yyyy:function(r){return r.getFullYear()},h:function(r){return r.getHours()%12||12},hh:function(r){return Zs(r.getHours()%12||12)},H:function(r){return r.getHours()},HH:function(r){return Zs(r.getHours())},m:function(r){return r.getMinutes()},mm:function(r){return Zs(r.getMinutes())},s:function(r){return r.getSeconds()},ss:function(r){return Zs(r.getSeconds())},S:function(r){return Math.round(r.getMilliseconds()/100)},SS:function(r){return Zs(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return Zs(r.getMilliseconds(),3)},a:function(r,o){return r.getHours()<12?o.amPm[0]:o.amPm[1]},A:function(r,o){return r.getHours()<12?o.amPm[0].toUpperCase():o.amPm[1].toUpperCase()},ZZ:function(r){var o=r.getTimezoneOffset();return(o>0?"-":"+")+Zs(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4)}},oi={d:[El,function(r,o){r.day=o}],M:[El,function(r,o){r.month=o-1}],yy:[El,function(r,o){var u=new Date,_=+(""+u.getFullYear()).substr(0,2);r.year=""+(o>68?_-1:_)+o}],h:[El,function(r,o){r.hour=o}],m:[El,function(r,o){r.minute=o}],s:[El,function(r,o){r.second=o}],yyyy:[WB,function(r,o){r.year=o}],S:[/\d/,function(r,o){r.millisecond=o*100}],SS:[/\d{2}/,function(r,o){r.millisecond=o*10}],SSS:[GB,function(r,o){r.millisecond=o}],D:[El,yS],ddd:[rm,yS],MMM:[rm,_S("monthNamesShort")],MMMM:[rm,_S("monthNames")],a:[rm,function(r,o,u){var _=o.toLowerCase();_===u.amPm[0]?r.isPm=!1:_===u.amPm[1]&&(r.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(r,o){var u=(o+"").match(/([\+\-]|\d\d)/gi),_;u&&(_=+(u[1]*60)+parseInt(u[2],10),r.timezoneOffset=u[0]==="+"?_:-_)}]};oi.DD=oi.DD,oi.dddd=oi.ddd,oi.Do=oi.dd=oi.d,oi.mm=oi.m,oi.hh=oi.H=oi.HH=oi.h,oi.MM=oi.M,oi.ss=oi.s,oi.A=oi.a,Ps.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Ps.format=function(r,o,u){var _=u||Ps.i18n;if(typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date in fecha.format");return o=Ps.masks[o]||o||Ps.masks.default,o.replace(vS,function(g){return g in CS?CS[g](r,_):g.slice(1,g.length-1)})},Ps.parse=function(r,o,u){var _=u||Ps.i18n;if(typeof o!="string")throw new Error("Invalid format in fecha.parse");if(o=Ps.masks[o]||o,r.length>1e3)return!1;var g=!0,f={};if(o.replace(vS,function(G){if(oi[G]){var z=oi[G],j=r.search(z[0]);~j?r.replace(z[0],function(ae){return z[1](f,ae,_),r=r.substr(j+ae.length),ae}):g=!1}return oi[G]?"":G.slice(1,G.length-1)}),!g)return!1;var k=new Date;f.isPm===!0&&f.hour!=null&&+f.hour!=12?f.hour=+f.hour+12:f.isPm===!1&&+f.hour==12&&(f.hour=0);var O;return f.timezoneOffset!=null?(f.minute=+(f.minute||0)-+f.timezoneOffset,O=new Date(Date.UTC(f.year||k.getFullYear(),f.month||0,f.day||1,f.hour||0,f.minute||0,f.second||0,f.millisecond||0))):O=new Date(f.year||k.getFullYear(),f.month||0,f.day||1,f.hour||0,f.minute||0,f.second||0,f.millisecond||0),O};const vy=function(r){let o=new Date(r);return isNaN(o.getTime())&&typeof r=="string"&&(o=r.split("-").map(Number),o[1]+=1,o=new Date(...o)),isNaN(o.getTime())?null:o},or=function(r){const o=new Date(r);return o.setHours(0,0,0,0),o.getTime()},qB=(r,o,u)=>{if(!o||!u)return!1;const[_,g]=[o,u].sort();return r>=_&&r<=g},$h=function(r,o){return r=vy(r),r?Ps.format(r,o||"yyyy-MM-dd"):""},sm=function(r,o){return Ps.parse(r,o||"yyyy-MM-dd")},SS=function(r,o){return new Date(r,o+1,0).getDate()},ES=function(r,o){const u=new Date(r),_=u.getMonth()+o,g=SS(u.getFullYear(),_);return g<u.getDate()&&u.setDate(g),u.setMonth(_),u},Qs=function(){const r=new Date;return r.setHours(0),r.setMinutes(0),r.setSeconds(0),r},yy=function(){const r={yyyy:u=>u.getFullYear(),m:u=>u.getMonth()+1,mm:u=>("0"+(u.getMonth()+1)).slice(-2),mmm:(u,_)=>u.toLocaleDateString(_,{month:"long"}).slice(0,3),Mmm:(u,_)=>{const g=u.toLocaleDateString(_,{month:"long"});return(g[0].toUpperCase()+g.slice(1).toLowerCase()).slice(0,3)},mmmm:(u,_)=>u.toLocaleDateString(_,{month:"long"}),Mmmm:(u,_)=>{const g=u.toLocaleDateString(_,{month:"long"});return g[0].toUpperCase()+g.slice(1).toLowerCase()}},o=new RegExp(["yyyy","Mmmm","mmmm","Mmm","mmm","mm","m"].join("|"),"g");return function(u,_,g){const f=/(\[[^\]]+\])([^\[\]]+)(\[[^\]]+\])/,k=_.match(f).slice(1),O=k[1],G=[k[0],k[2]].map(z=>({label:z.replace(/\[[^\]]+\]/,j=>j.slice(1,-1).replace(o,ae=>r[ae](g,u))),type:z.indexOf("yy")!=-1?"year":"month"}));return{separator:O,labels:G}}}(),MS={date:"yyyy-MM-dd",month:"yyyy-MM",year:"yyyy",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",datetimerange:"yyyy-MM-dd HH:mm:ss"},Hh=function(r,o){return $h(r,o)},Gh=function(r,o){return sm(r,o)},by=function(r,o,u){if(Array.isArray(r)&&r.length===2){const _=r[0],g=r[1];if(_&&g)return $h(_,o)+u+$h(g,o)}else if(!Array.isArray(r)&&r instanceof Date)return $h(r,o);return""},_y=function(r,o,u){const _=Array.isArray(r)?r:r.split(u);if(_.length===2){const g=_[0],f=_[1];return[g instanceof Date?g:sm(g,o),f instanceof Date?f:sm(f,o)]}return[]},zc={default:{formatter(r){return r?""+r:""},parser(r){return r===void 0||r===""?null:r}},date:{formatter:Hh,parser:Gh},datetime:{formatter:Hh,parser:Gh},daterange:{formatter:by,parser:_y},datetimerange:{formatter:by,parser:_y},timerange:{formatter:by,parser:_y},time:{formatter:Hh,parser:Gh},month:{formatter:Hh,parser:Gh},year:{formatter:Hh,parser:Gh},multiple:{formatter:(r,o)=>r.filter(Boolean).map(u=>$h(u,o)).join(","),parser:(r,o)=>(typeof r=="string"?r.split(","):r).map(u=>u instanceof Date?u:(typeof u=="string"?u=u.trim():typeof u!="number"&&!u&&(u=""),sm(u,o)))},number:{formatter(r){return r?""+r:""},parser(r){let o=Number(r);return isNaN(r)?null:o}}},am="ivu-date-picker",XB="ivu-picker",YB=r=>r.reduce((o,u)=>o&&!u||typeof u=="string"&&u.trim()==="",!0),JB={40:"up",39:"right",38:"down",37:"left"},$c=(r,o,u)=>{if(r==="left")return o*-1;if(r==="right")return o*1;if(r==="up")return u*1;if(r==="down")return u*-1},ZB=r=>{const o="ivu-date-picker-btn-pulse";r.classList.add(o),setTimeout(()=>r.classList.remove(o),200)},xy=r=>r?[r.getHours(),r.getMinutes(),r.getSeconds()]:[0,0,0],QB={mixins:[tn,Ms],components:{iInput:hs,Drop:je,Icon:E},directives:{clickOutside:en},emits:["on-clickoutside","on-clear","on-change","on-ok","on-open-change","update:modelValue"],provide(){return{PickerInstance:this}},props:{format:{type:String},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},confirm:{type:Boolean,default:!1},open:{type:Boolean,default:null},multiple:{type:Boolean,default:!1},timePickerOptions:{type:Object,default:()=>({})},splitPanels:{type:Boolean,default:!1},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},placeholder:{type:String,default:""},placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom-start"},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},name:{type:String},elementId:{type:String},steps:{type:Array,default:()=>[]},modelValue:{type:[Date,String,Array]},options:{type:Object,default:()=>({})},separator:{type:String,default:" - "},capture:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return r.$VIEWUI?r.$VIEWUI.capture:!0}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data(){const r=this.type.includes("range"),o=r?[null,null]:[null],u=YB((r?this.modelValue:[this.modelValue])||[])?o:this.parseDate(this.modelValue),_=u.map(xy);return{prefixCls:am,showClose:!1,visible:!1,internalValue:u,disableClickOutSide:!1,disableCloseUnderTransfer:!1,selectionMode:this.onSelectionModeChange(this.type),forceInputRerender:1,isFocused:!1,focusedDate:u[0]||this.startDate||new Date,focusedTime:{column:0,picker:0,time:_,active:!1},internalFocus:!1,isValueNull:!1,timeSpinnerList:[],panelTableList:[]}},computed:{wrapperClasses(){return[am,{[am+"-focused"]:this.isFocused}]},publicVModelValue(){if(this.multiple)return this.internalValue.slice();{const r=this.type.includes("range");let o=this.internalValue.map(u=>u instanceof Date?new Date(u):u||"");return this.type.match(/^time/)&&(o=o.map(this.formatDate)),r||this.multiple?o:o[0]}},publicStringValue(){const{formatDate:r,publicVModelValue:o,type:u}=this;return u.match(/^time/)?o:this.multiple?r(o):Array.isArray(o)?o.map(r):r(o)},opened(){return this.open===null?this.visible:this.open},transition(){return this.placement.match(/^bottom/)?"slide-up":"slide-down"},visualValue(){return this.formatDate(this.internalValue)},isConfirm(){return this.confirm||this.type==="datetime"||this.type==="datetimerange"||this.multiple},arrowType(){const r=this.globalConfig;let o="";if(this.type==="time"||this.type==="timerange")o="ios-time-outline",r&&(r.timePicker.customIcon?o="":r.timePicker.icon&&(o=r.timePicker.icon));else{const u=this.globalConfig;o="ios-calendar-outline",u&&(u.datePicker.customIcon?o="":u.datePicker.icon&&(o=u.datePicker.icon))}return this.showClose&&(o="ios-close-circle"),o},customArrowType(){const r=this.globalConfig;let o="";return this.showClose||(this.type==="time"||this.type==="timerange"?r&&r.timePicker.customIcon&&(o=r.timePicker.customIcon):r&&r.datePicker.customIcon&&(o=r.datePicker.customIcon)),o},arrowSize(){const r=this.globalConfig;let o="";return this.showClose||(this.type==="time"||this.type==="timerange"?r&&r.timePicker.iconSize&&(o=r.timePicker.iconSize):r&&r.datePicker.iconSize&&(o=r.datePicker.iconSize)),o},dropdownCls(){return{[am+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}}},methods:{onSelectionModeChange(r){return r.match(/^date/)&&(r="date"),this.selectionMode=w(r,["year","month","date","time"])&&r,this.selectionMode},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(r){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(r&&r.type==="mousedown"&&this.visible){r.preventDefault(),r.stopPropagation();return}if(this.visible){const o=this.$refs.pickerPanel&&this.$refs.pickerPanel.$el;if(r&&o&&o.contains(r.target))return;this.visible=!1,r&&r.preventDefault(),r&&r.stopPropagation(),this.$emit("on-clickoutside",r);return}this.isFocused=!1,this.disableClickOutSide=!1},handleFocus(r){this.readonly||(this.isFocused=!0,!(r&&r.type==="focus")&&(this.itemDisabled||(this.visible=!0)))},handleBlur(r){if(this.internalFocus){this.internalFocus=!1;return}if(this.visible){r.preventDefault();return}this.isFocused=!1,this.onSelectionModeChange(this.type),this.internalValue=this.internalValue.slice(),this.reset(),this.$refs.pickerPanel.onToggleVisibility(!1)},handleKeydown(r){const o=r.keyCode;if(o===9)if(this.visible)if(r.stopPropagation(),r.preventDefault(),this.isConfirm){const _=`.${XB}-confirm > *`,g=this.$refs.drop.$el.querySelectorAll(_);this.internalFocus=!0,[...g][r.shiftKey?"pop":"shift"]().focus()}else this.handleClose();else this.focused=!1;const u=[37,38,39,40];if(!this.visible&&u.includes(o)){this.visible=!0;return}if(o===27&&this.visible&&(r.stopPropagation(),this.handleClose()),o===13){const _=this.timeSpinnerList.map(g=>g.timeSpinner);if(_.length>0){const g=_[0].showSeconds?3:2,f=Math.floor(this.focusedTime.column/g),k=this.focusedTime.time[f];_[f].chooseValue(k);return}if(this.type.match(/range/))this.$refs.pickerPanel.handleRangePick(this.focusedDate,"date");else{const g=this.panelTableList.map(k=>k.panelTable),f=k=>{const O=["year","month","date"].indexOf(this.type)+1;return[k.getFullYear(),k.getMonth(),k.getDate()].slice(0,O).join("-")};g.find(({cells:k})=>k.find(({date:O,disabled:G})=>f(O)===f(this.focusedDate)&&!G))&&this.onPick(this.focusedDate,!1,"date")}}!u.includes(o)||(this.focusedTime.active&&r.preventDefault(),this.navigateDatePanel(JB[o],r.shiftKey))},reset(){this.$refs.pickerPanel.reset&&this.$refs.pickerPanel.reset()},navigateTimePanel(r){this.focusedTime.active=!0;const o=r.match(/left|right/),u=r.match(/up|down/),_=this.timeSpinnerList.map(z=>z.timeSpinner),g=(_[0].showSeconds?3:2)*_.length,f=(z=>(z+(o?r==="left"?-1:1:0)+g)%g)(this.focusedTime.column),k=g/_.length,O=Math.floor(f/k),G=f%k;if(o){const z=this.internalValue.map(xy);this.focusedTime={...this.focusedTime,column:f,time:z},_.forEach((j,ae)=>{ae===O?j.updateFocusedTime(G,z[O]):j.updateFocusedTime(-1,j.focusedTime)})}if(u){const z=r==="up"?1:-1,j=["hours","minutes","seconds"],ae=_[O][`${j[G]}List`],_e=(ae.findIndex(({text:ie})=>this.focusedTime.time[O][G]===ie)+z+ae.length)%ae.length,ye=ae[_e].text,me=this.focusedTime.time.map((ie,Pe)=>(Pe!==O||(ie[G]=ye),ie));this.focusedTime={...this.focusedTime,time:me},_.forEach((ie,Pe)=>{Pe===O?ie.updateFocusedTime(G,me[Pe]):ie.updateFocusedTime(-1,ie.focusedTime)})}},navigateDatePanel(r,o){const u=this.timeSpinnerList.map(f=>f.timeSpinner);if(u.length>0){this.navigateTimePanel(r,o,u);return}if(o){this.type==="year"?this.focusedDate=new Date(this.focusedDate.getFullYear()+$c(r,0,10),this.focusedDate.getMonth(),this.focusedDate.getDate()):this.focusedDate=new Date(this.focusedDate.getFullYear()+$c(r,0,1),this.focusedDate.getMonth()+$c(r,1,0),this.focusedDate.getDate());const f=r.match(/left|down/)?"prev":"next",k=r.match(/up|down/)?"-double":"",O=this.$refs.drop.$el.querySelector(`.ivu-date-picker-${f}-btn-arrow${k}`);O&&ZB(O);return}const _=this.focusedDate||this.internalValue&&this.internalValue[0]||new Date,g=new Date(_);if(this.type.match(/^date/)){const f=SS(_.getFullYear(),_.getMonth()),k=_.getDate(),O=g.getDate()+$c(r,1,7);O<1?r.match(/left|right/)?(g.setMonth(g.getMonth()+1),g.setDate(O)):g.setDate(k+Math.floor((f-k)/7)*7):O>f?r.match(/left|right/)?(g.setMonth(g.getMonth()-1),g.setDate(O)):g.setDate(k%7):g.setDate(O)}this.type.match(/^month/)&&g.setMonth(g.getMonth()+$c(r,1,3)),this.type.match(/^year/)&&g.setFullYear(g.getFullYear()+$c(r,1,3)),this.focusedDate=g},handleInputChange(r){const o=this.type.includes("range")||this.multiple,u=this.visualValue,_=r.target.value,g=this.parseDate(_),f=this.options&&typeof this.options.disabledDate=="function"&&this.options.disabledDate,k=o?g:g[0],O=f&&f(k),G=g.reduce((z,j)=>z&&j instanceof Date,!0);_!==u&&!O&&G?(this.emitChange(this.type),this.internalValue=g):this.forceInputRerender++},handleInputMouseenter(){this.readonly||this.itemDisabled||this.visualValue&&this.clearable&&(this.showClose=!0)},handleInputMouseleave(){this.showClose=!1},handleIconClick(r){this.showClose?(r&&r.stopPropagation(),this.handleClear()):this.itemDisabled||this.handleFocus()},handleClear(){this.visible=!1,this.internalValue=this.internalValue.map(()=>null),this.$emit("on-clear"),this.handleFormItemChange("change",""),this.emitChange(this.type),this.reset(),setTimeout(()=>this.onSelectionModeChange(this.type),500)},emitChange(r){t.nextTick(()=>{this.$emit("on-change",this.publicStringValue,r),this.handleFormItemChange("change",this.publicStringValue)})},parseDate(r){const o=this.type.includes("range"),u=this.type,_=(zc[u]||zc.default).parser,g=this.format||MS[u],f=zc.multiple.parser;if(r&&u==="time"&&!(r instanceof Date))r=_(r,g,this.separator);else if(this.multiple&&r)r=f(r,g,this.separator);else if(o)if(!r)r=[null,null];else if(typeof r=="string")r=_(r,g,this.separator);else if(u==="timerange")r=_(r,g,this.separator).map(k=>k||"");else{const[k,O]=r;k instanceof Date&&O instanceof Date?r=r.map(G=>new Date(G)):typeof k=="string"&&typeof O=="string"?r=_(r.join(this.separator),g,this.separator):(!k||!O)&&(r=[null,null])}else typeof r=="string"&&u.indexOf("time")!==0&&(r=_(r,g)||null);return o||this.multiple?r||[]:[r]},formatDate(r){const o=MS[this.type];if(this.multiple){const u=zc.multiple.formatter;return u(r,this.format||o,this.separator)}else{const{formatter:u}=zc[this.type]||zc.default;return u(r,this.format||o,this.separator)}},onPick(r,o=!1,u){if(this.multiple){const _=r.getTime(),g=this.internalValue.findIndex(k=>k&&k.getTime()===_),f=[...this.internalValue,r].filter(Boolean).map(k=>k.getTime()).filter((k,O,G)=>G.indexOf(k)===O&&O!==g);this.internalValue=f.map(k=>new Date(k))}else r=this.parseDate(r),this.internalValue=Array.isArray(r)?r:[r];this.internalValue[0]&&(this.focusedDate=this.internalValue[0]),this.focusedTime={...this.focusedTime,time:this.internalValue.map(xy)},this.isConfirm||this.onSelectionModeChange(this.type),this.isConfirm||(this.visible=!!o),this.emitChange(u)},onPickSuccess(){this.visible=!1,this.$emit("on-ok"),this.focus(),this.reset()},focus(){this.$refs.input&&this.$refs.input.focus()},updatePopper(){this.$refs.drop.update()},handleOnFocusInput(){this.focus()},handleOnUpdatePopper(){this.updatePopper()}},watch:{visible(r){r===!1&&this.$refs.drop.destroy(),r&&this.$refs.drop.update(),this.$emit("on-open-change",r)},modelValue(r){r===null&&(this.isValueNull=!0),this.internalValue=this.parseDate(r)},open(r){this.visible=r===!0},type(r){this.onSelectionModeChange(r)},publicVModelValue(r,o){const u=JSON.stringify(r),_=JSON.stringify(o);(u!==_||typeof r!=typeof o)&&(this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",r))}},mounted(){this.open!==null&&(this.visible=this.open)}};function eO(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("i-input"),G=t.resolveComponent("Drop"),z=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapperClasses)},[t.createElementVNode("div",{ref:"reference",class:t.normalizeClass([g.prefixCls+"-rel"])},[t.renderSlot(r.$slots,"default",{},()=>[(t.openBlock(),t.createBlock(O,{key:g.forceInputRerender,"element-id":u.elementId,class:t.normalizeClass([g.prefixCls+"-editor"]),readonly:!u.editable||u.readonly,disabled:r.itemDisabled,size:u.size,placeholder:u.placeholder,"model-value":f.visualValue,name:u.name,ref:"input",onOnInputChange:f.handleInputChange,onOnFocus:f.handleFocus,onOnBlur:f.handleBlur,onClick:f.handleFocus,onKeydown:f.handleKeydown,onMouseenter:f.handleInputMouseenter,onMouseleave:f.handleInputMouseleave},{suffix:t.withCtx(()=>[t.createVNode(k,{onClick:f.handleIconClick,type:f.arrowType,custom:f.customArrowType,size:f.arrowSize},null,8,["onClick","type","custom","size"])]),_:1},8,["element-id","class","readonly","disabled","size","placeholder","model-value","name","onOnInputChange","onOnFocus","onOnBlur","onClick","onKeydown","onMouseenter","onMouseleave"]))])],2),t.createVNode(G,{ref:"drop",visible:f.opened,classes:f.dropdownCls,placement:u.placement,eventsEnabled:u.eventsEnabled,transfer:u.transfer,"transition-name":"transition-drop",onClick:f.handleTransferClick},{default:t.withCtx(()=>[t.createElementVNode("div",null,[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(r.panel),t.mergeProps({ref:"pickerPanel",visible:g.visible,showTime:r.type==="datetime"||r.type==="datetimerange",confirm:f.isConfirm,selectionMode:g.selectionMode,steps:u.steps,format:u.format,"model-value":g.internalValue,"start-date":u.startDate,"split-panels":u.splitPanels,"show-week-numbers":u.showWeekNumbers,"picker-type":r.type,multiple:u.multiple,"focused-date":g.focusedDate,"time-picker-options":u.timePickerOptions},r.ownPickerProps,{onOnPick:f.onPick,onOnPickClear:f.handleClear,onOnPickSuccess:f.onPickSuccess,onOnPickClick:o[0]||(o[0]=j=>g.disableClickOutSide=!0),onOnSelectionModeChange:f.onSelectionModeChange}),null,16,["visible","showTime","confirm","selectionMode","steps","format","model-value","start-date","split-panels","show-week-numbers","picker-type","multiple","focused-date","time-picker-options","onOnPick","onOnPickClear","onOnPickSuccess","onOnSelectionModeChange"]))])]),_:1},8,["visible","classes","placement","eventsEnabled","transfer","onClick"])],2)),[[z,f.handleClose,u.capture,{mousedown:!0}],[z,f.handleClose,u.capture,{touchstart:!0}],[z,f.handleClose,u.capture]])}var TS=c(QB,[["render",eO]]),kS=1e3*60*60*24;function AS(r,o){return new Date(r,o+1,0).getDate()}function PS(r,o,u){return o===0&&u>50?r-1:o===11&&u<10?r+1:r}function IS(r,o,u,_){o>11&&(o=0,r++);var g=new Date(r,o,u);_&&g.setDate(g.getDate()+4-(g.getDay()||7));var f=_?g.getFullYear():r,k=new Date(f,0,1),O=1+Math.round((g-k)/kS);_||(O+=k.getDay());var G=Math.ceil(O/7);if(!_){var z=new Date(r,o,u),j=new Date(r+1,0,1),ae=j.getDay();z.getTime()>=j.getTime()-kS*ae&&(G=1)}return G}function tO(r,o,u){for(var _=this.lang||"en",g=this.onlyDays,f=typeof this.weekStart>"u"?1:this.weekStart,k=f===1,O=[],G=new Date(r,o,1),z=G.getDay()||(k?7:0),j=f-z,ae=IS(r,o,1,k),_e=AS(r,o),ye=AS(r,o-1),me,ie,Pe,At=PS(r,o,ae),ut={month:o,year:r,daysInMonth:_e},mt=0;mt<7;mt++){Pe=j;for(var We=0;We<8;We++){mt>0&&We>0&&j++,j>_e||j<1?(ie=j>_e?j-_e:ye+j,me=j>_e?o+1:o-1):(ie=j,me=o);var Ne=function(){return We===0?"weekLabel":mt===0?"dayLabel":j<1?"prevMonth":j>_e?"nextMonth":"monthDay"}(),Ye=Pe!==j&&mt>0,Ke={desc:Ye?ie:ae,week:ae,type:Ne,format:k?"ISO 8601":"US",date:Ye?new Date(Date.UTC(r,me,ie)):!1,year:At,index:O.length};u&&(typeof u=="function"?Ke=u.call(ut,Ke,_):u.forEach(function(Dt){Ke=Dt.call(ut,Ke,_)})),g&&Ye?O.push(Ke):g||O.push(Ke)}mt>0&&(ae=IS(r,me,ie+1,k)),At=PS(r,o,ae)}return ut.cells=O,ut}var nO=function(r){return tO.bind(r)},iO={weekPlaceholder:"",columnNames:{en:{0:"w",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"},sv:{0:"v",1:"mndag",2:"tisdag",3:"onsdag",4:"torsdag",5:"fredag",6:"lrdag",7:"sndag"},pt:{0:"s",1:"segunda",2:"tera",3:"quarta",4:"quinta",5:"sexta",6:"sbado",7:"domingo"}},monthNames:{en:["January","February","March","April","May","June","July","August","September","October","November","December"],sv:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],pt:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},classes:{dayLabel:"day-of-week",weekLabel:"week-number",prevMonth:"inactive",nextMonth:"inactive",monthDay:"day-in-month"}},ea=iO;function rO(r){return r==null?!1:r.constructor===Array||r.constructor===Object}function NS(r,o){for(var u in r)o[u]?rO(r[u])&&NS(r[u],o[u]):o[u]=r[u]}function RS(r,o){var u=[ea.classes[r.type]];return r.class?r.class=(typeof r.class=="string"?[r.class]:r.class).concat(u):r.class=u,r.type.indexOf("Label")>0&&(r.index==0&&ea.weekPlaceholder?r.desc=ea.weekPlaceholder:r.index<8?r.desc=ea.columnNames[o][r.index]:r.index%8==0&&(r.desc=r.week)),r.date&&(r.monthName=ea.monthNames[o][r.date.getMonth()]),this.monthName||(this.monthName=ea.monthNames[o][this.month]),this.labels||(this.labels={monthNames:ea.monthNames[o],columnNames:ea.columnNames[o],classes:ea.classes}),r}RS.setLabels=function(r){NS(r,ea)};var sO=RS,aO={Generator:nO,addLabels:sO},wy={name:"PanelTable",emits:["on-pick","on-pick-click","on-change-range"],inject:["PickerInstance"],props:{tableDate:{type:Date,required:!0},disabledDate:{type:Function},selectionMode:{type:String,required:!0},modelValue:{type:Array,required:!0},rangeState:{type:Object,default:()=>({from:null,to:null,selecting:!1})},focusedDate:{type:Date,required:!0}},data(){return{id:te(6)}},computed:{dates(){const{selectionMode:r,modelValue:o,rangeState:u}=this;return r==="range"&&u.selecting?[u.from]:o}},methods:{handleClick(r,o){if(o.stopPropagation(),r.disabled||r.type==="weekLabel")return;const u=new Date(or(r.date));this.$emit("on-pick",u),this.$emit("on-pick-click")},handleMouseMove(r){if(!this.rangeState.selecting||r.disabled)return;const o=r.date;this.$emit("on-change-range",o)},addPanelTable(){const r=this.PickerInstance;r.panelTableList||(r.panelTableList=[]),r.panelTableList.push({id:this.id,panelTable:this})},removePanelTable(){const r=this.PickerInstance;if(r.panelTableList&&r.panelTableList.length){const o=r.panelTableList.findIndex(u=>u.id===this.id);r.panelTableList.splice(o,1)}}},mounted(){this.addPanelTable()},beforeUnmount(){this.removePanelTable()}},Kn="ivu-date-picker-cells";const oO={mixins:[Pn,wy],props:{showWeekNumbers:{type:Boolean,default:!1}},computed:{classes(){return[`${Kn}`,{[`${Kn}-show-week-numbers`]:this.showWeekNumbers}]},calendar(){const r=Number(this.t("i.datepicker.weekStartDay"));return new aO.Generator({onlyDays:!this.showWeekNumbers,weekStart:r})},headerDays(){const r=Number(this.t("i.datepicker.weekStartDay")),o=["sun","mon","tue","wed","thu","fri","sat"].map(_=>this.t("i.datepicker.weeks."+_)),u=o.splice(r,7-r).concat(o.splice(0,r));return this.showWeekNumbers?[""].concat(u):u},cells(){const r=this.tableDate.getFullYear(),o=this.tableDate.getMonth(),u=or(new Date),_=this.dates.filter(Boolean).map(or),[g,f]=this.dates.map(or),k=this.rangeState.from&&or(this.rangeState.from),O=this.rangeState.to&&or(this.rangeState.to),G=this.selectionMode==="range",z=typeof this.disabledDate=="function"&&this.disabledDate;return this.calendar(r,o,j=>{j.date instanceof Date&&j.date.setTime(j.date.getTime()+j.date.getTimezoneOffset()*6e4+480*60*1e3);const ae=j.date&&or(j.date),_e=j.date&&o===j.date.getMonth();return{...j,type:ae===u?"today":j.type,selected:_e&&_.includes(ae),disabled:j.date&&z&&z(new Date(ae)),range:_e&&G&&qB(ae,k,O),start:_e&&G&&ae===g,end:_e&&G&&ae===f}}).cells.slice(this.showWeekNumbers?8:0)}},methods:{getCellCls(r){return[`${Kn}-cell`,{[`${Kn}-cell-selected`]:r.selected||r.start||r.end,[`${Kn}-cell-disabled`]:r.disabled,[`${Kn}-cell-today`]:r.type==="today",[`${Kn}-cell-prev-month`]:r.type==="prevMonth",[`${Kn}-cell-next-month`]:r.type==="nextMonth",[`${Kn}-cell-week-label`]:r.type==="weekLabel",[`${Kn}-cell-range`]:r.range&&!r.start&&!r.end,[`${Kn}-focused`]:or(r.date)===or(this.focusedDate)}]}}},lO={class:"ivu-date-picker-cells-header"},cO=["onClick","onMouseenter"];function uO(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.createElementVNode("div",lO,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.headerDays,k=>(t.openBlock(),t.createElementBlock("span",{key:k},t.toDisplayString(k),1))),128))]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.cells,(k,O)=>(t.openBlock(),t.createElementBlock("span",{key:String(k.date)+O,class:t.normalizeClass(f.getCellCls(k)),onClick:G=>r.handleClick(k,G),onMouseenter:G=>r.handleMouseMove(k)},[t.createElementVNode("em",null,t.toDisplayString(k.desc),1)],42,cO))),128))],2)}var DS=c(oO,[["render",uO]]);const hO={mixins:[wy],props:{},computed:{classes(){return[`${Kn}`,`${Kn}-year`]},startYear(){return Math.floor(this.tableDate.getFullYear()/10)*10},cells(){let r=[];const o={text:"",selected:!1,disabled:!1},u=this.dates.filter(Boolean).map(g=>or(new Date(g.getFullYear(),0,1))),_=or(new Date(this.focusedDate.getFullYear(),0,1));for(let g=0;g<10;g++){const f=V(o);f.date=new Date(this.startYear+g,0,1),f.disabled=typeof this.disabledDate=="function"&&this.disabledDate(f.date)&&this.selectionMode==="year";const k=or(f.date);f.selected=u.includes(k),f.focused=k===_,r.push(f)}return r}},methods:{getCellCls(r){return[`${Kn}-cell`,{[`${Kn}-cell-selected`]:r.selected,[`${Kn}-cell-disabled`]:r.disabled,[`${Kn}-cell-focused`]:r.focused,[`${Kn}-cell-range`]:r.range&&!r.start&&!r.end}]}}},dO=["onClick","onMouseenter"];function fO(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.cells,k=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(f.getCellCls(k)),key:k.date,onClick:O=>r.handleClick(k,O),onMouseenter:O=>r.handleMouseMove(k)},[t.createElementVNode("em",null,t.toDisplayString(k.date.getFullYear()),1)],42,dO))),128))],2)}var LS=c(hO,[["render",fO]]);const pO={mixins:[Pn,wy],props:{},computed:{classes(){return[`${Kn}`,`${Kn}-month`]},cells(){let r=[];const o={text:"",selected:!1,disabled:!1},u=this.tableDate.getFullYear(),_=this.dates.filter(Boolean).map(f=>or(new Date(f.getFullYear(),f.getMonth(),1))),g=or(new Date(this.focusedDate.getFullYear(),this.focusedDate.getMonth(),1));for(let f=0;f<12;f++){const k=V(o);k.date=new Date(u,f,1),k.text=this.tCell(f+1);const O=or(k.date);k.disabled=typeof this.disabledDate=="function"&&this.disabledDate(k.date)&&this.selectionMode==="month",k.selected=_.includes(O),k.focused=O===g,r.push(k)}return r}},methods:{getCellCls(r){return[`${Kn}-cell`,{[`${Kn}-cell-selected`]:r.selected,[`${Kn}-cell-disabled`]:r.disabled,[`${Kn}-cell-focused`]:r.focused,[`${Kn}-cell-range`]:r.range&&!r.start&&!r.end}]},tCell(r){return this.t(`i.datepicker.months.m${r}`)}}},mO=["onClick","onMouseenter"];function gO(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.cells,k=>(t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(f.getCellCls(k)),key:k.text,onClick:O=>r.handleClick(k,O),onMouseenter:O=>r.handleMouseMove(k)},[t.createElementVNode("em",null,t.toDisplayString(k.text),1)],42,mO))),128))],2)}var BS=c(pO,[["render",gO]]),om={props:{disabledHours:{type:Array,default(){return[]}},disabledMinutes:{type:Array,default(){return[]}},disabledSeconds:{type:Array,default(){return[]}},hideDisabledOptions:{type:Boolean,default:!1}}};const Ml="ivu-time-picker-cells",Cy=["hours","minutes","seconds"],vO={name:"TimeSpinner",mixins:[om],emits:["on-change","on-pick-click"],inject:["PickerInstance"],props:{hours:{type:[Number,String],default:NaN},minutes:{type:[Number,String],default:NaN},seconds:{type:[Number,String],default:NaN},showSeconds:{type:Boolean,default:!0},steps:{type:Array,default:()=>[]}},data(){return{spinerSteps:[1,1,1].map((r,o)=>Math.abs(this.steps[o])||r),prefixCls:Ml,compiled:!1,focusedColumn:-1,focusedTime:[0,0,0],id:te(6)}},computed:{classes(){return[`${Ml}`,{[`${Ml}-with-seconds`]:this.showSeconds}]},hoursList(){let r=[];const o=this.spinerSteps[0],u=this.focusedColumn===0&&this.focusedTime[0],_={text:0,selected:!1,disabled:!1,hide:!1};for(let g=0;g<24;g+=o){const f=V(_);f.text=g,f.focused=g===u,this.disabledHours.length&&this.disabledHours.indexOf(g)>-1&&(f.disabled=!0,this.hideDisabledOptions&&(f.hide=!0)),this.hours===g&&(f.selected=!0),r.push(f)}return r},minutesList(){let r=[];const o=this.spinerSteps[1],u=this.focusedColumn===1&&this.focusedTime[1],_={text:0,selected:!1,disabled:!1,hide:!1};for(let g=0;g<60;g+=o){const f=V(_);f.text=g,f.focused=g===u,this.disabledMinutes.length&&this.disabledMinutes.indexOf(g)>-1&&(f.disabled=!0,this.hideDisabledOptions&&(f.hide=!0)),this.minutes===g&&(f.selected=!0),r.push(f)}return r},secondsList(){let r=[];const o=this.spinerSteps[2],u=this.focusedColumn===2&&this.focusedTime[2],_={text:0,selected:!1,disabled:!1,hide:!1};for(let g=0;g<60;g+=o){const f=V(_);f.text=g,f.focused=g===u,this.disabledSeconds.length&&this.disabledSeconds.indexOf(g)>-1&&(f.disabled=!0,this.hideDisabledOptions&&(f.hide=!0)),this.seconds===g&&(f.selected=!0),r.push(f)}return r}},methods:{getCellCls(r){return[`${Ml}-cell`,{[`${Ml}-cell-selected`]:r.selected,[`${Ml}-cell-focused`]:r.focused,[`${Ml}-cell-disabled`]:r.disabled}]},chooseValue(r){const o=Cy.reduce((u,_,g)=>{const f=r[g];return this[_]===f?u:{...u,[_]:f}},{});Object.keys(o).length>0&&this.emitChange(o)},handleClick(r,o){if(o.disabled)return;const u={[r]:o.text};this.emitChange(u)},emitChange(r){this.$emit("on-change",r),this.$emit("on-pick-click")},scroll(r,o){const u=this.$refs[r].scrollTop,_=24*this.getScrollIndex(r,o);R(this.$refs[r],u,_,500)},getScrollIndex(r,o){const u=T(r),_=this[`disabled${u}`];if(_.length&&this.hideDisabledOptions){let g=0;_.forEach(f=>f<=o?g++:""),o-=g}return o},updateScroll(){t.nextTick(()=>{Cy.forEach(r=>{this.$refs[r].scrollTop=24*this[`${r}List`].findIndex(o=>o.text==this[r])})})},formatTime(r){return r<10?"0"+r:r},updateFocusedTime(r,o){this.focusedColumn=r,this.focusedTime=o.slice()},addTimeSpinner(){const r=this.PickerInstance;r.timeSpinnerList||(r.timeSpinnerList=[]),r.timeSpinnerList.push({id:this.id,timeSpinner:this})},removeTimeSpinner(){const r=this.PickerInstance;if(r.timeSpinnerList&&r.timeSpinnerList.length){const o=r.timeSpinnerList.findIndex(u=>u.id===this.id);r.timeSpinnerList.splice(o,1)}}},watch:{hours(r){!this.compiled||this.scroll("hours",this.hoursList.findIndex(o=>o.text==r))},minutes(r){!this.compiled||this.scroll("minutes",this.minutesList.findIndex(o=>o.text==r))},seconds(r){!this.compiled||this.scroll("seconds",this.secondsList.findIndex(o=>o.text==r))},focusedTime(r,o){Cy.forEach((u,_)=>{if(r[_]===o[_]||typeof r[_]>"u")return;const g=this[`${u}List`].findIndex(f=>f.text===r[_]);this.scroll(u,g)})}},mounted(){this.addTimeSpinner(),t.nextTick(()=>this.compiled=!0)},beforeUnmount(){this.removeTimeSpinner()}},yO=["onClick"],bO=["onClick"],_O=["onClick"];function xO(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-list"]),ref:"hours"},[t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.hoursList,k=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.getCellCls(k)),key:k.text,onClick:O=>f.handleClick("hours",k)},t.toDisplayString(f.formatTime(k.text)),11,yO)),[[t.vShow,!k.hide]])),128))],2)],2),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-list"]),ref:"minutes"},[t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.minutesList,k=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.getCellCls(k)),key:k.text,onClick:O=>f.handleClick("minutes",k)},t.toDisplayString(f.formatTime(k.text)),11,bO)),[[t.vShow,!k.hide]])),128))],2)],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-list"]),ref:"seconds"},[t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls+"-ul"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.secondsList,k=>t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.getCellCls(k)),key:k.text,onClick:O=>f.handleClick("seconds",k)},t.toDisplayString(f.formatTime(k.text)),11,_O)),[[t.vShow,!k.hide]])),128))],2)],2),[[t.vShow,u.showSeconds]])],2)}var OS=c(vO,[["render",xO]]);const VS="ivu-picker",wO={mixins:[Pn],components:{iButton:ar},emits:["on-pick-clear","on-pick-success","on-pick-toggle-time"],inject:["PickerInstance"],props:{showTime:{type:Boolean,default:!1},isTime:{type:Boolean,default:!1},timeDisabled:{type:Boolean,default:!1}},data(){return{prefixCls:VS}},computed:{timeClasses(){return`${VS}-confirm-time`},labels(){const r=["time","clear","ok"],o=[this.isTime?"selectDate":"selectTime","clear","ok"];return r.reduce((u,_,g)=>(u[_]=this.t("i.datepicker."+o[g]),u),{})}},methods:{handleClear(){this.$emit("on-pick-clear")},handleSuccess(){this.$emit("on-pick-success")},handleToggleTime(){this.timeDisabled||(this.$emit("on-pick-toggle-time"),this.PickerInstance.handleOnFocusInput(),this.PickerInstance.handleOnUpdatePopper())},handleTab(r){const o=[...this.$el.children][r.shiftKey?"shift":"pop"]();s&&document.activeElement===o&&(r.preventDefault(),r.stopPropagation(),this.PickerInstance.handleOnFocusInput())}}};function CO(r,o,u,_,g,f){const k=t.resolveComponent("i-button");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls+"-confirm"]),onKeydownCapture:o[0]||(o[0]=t.withKeys((...O)=>f.handleTab&&f.handleTab(...O),["tab"]))},[u.showTime?(t.openBlock(),t.createBlock(k,{key:0,class:t.normalizeClass(f.timeClasses),size:"small",type:"text",disabled:u.timeDisabled,onClick:f.handleToggleTime},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(f.labels.time),1)]),_:1},8,["class","disabled","onClick"])):t.createCommentVNode("",!0),t.createVNode(k,{size:"small",class:"ivu-picker-confirm-btn-cancel",onClick:f.handleClear,onKeydown:t.withKeys(f.handleClear,["enter"])},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(f.labels.clear),1)]),_:1},8,["onClick","onKeydown"]),t.createVNode(k,{size:"small",type:"primary",onClick:f.handleSuccess,onKeydown:t.withKeys(f.handleSuccess,["enter"])},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(f.labels.ok),1)]),_:1},8,["onClick","onKeydown"])],34)}var lm=c(wO,[["render",CO]]);const SO="ivu-picker-panel",FS="ivu-date-picker";var cm={emits:["on-pick-clear","on-pick-success","on-pick-click","on-pick"],props:{confirm:{type:Boolean,default:!1}},methods:{iconBtnCls(r,o=""){return[`${SO}-icon-btn`,`${FS}-${r}-btn`,`${FS}-${r}-btn-arrow${o}`]},handleShortcutClick(r){r.value&&this.$emit("on-pick",r.value()),r.onClick&&r.onClick(this)},handlePickClear(){this.resetView(),this.$emit("on-pick-clear")},handlePickSuccess(){this.resetView(),this.$emit("on-pick-success")},handlePickClick(){this.$emit("on-pick-click")},resetView(){setTimeout(()=>this.currentView=this.selectionMode,500)},handleClear(){this.dates=this.dates.map(()=>null),this.rangeState={},this.$emit("on-pick",this.dates),this.handleConfirm()},handleConfirm(r,o){this.$emit("on-pick",this.dates,r,o||this.type)},onToggleVisibility(r){const{timeSpinner:o,timeSpinnerEnd:u}=this.$refs;r&&o&&o.updateScroll(),r&&u&&u.updateScroll()}}};const EO="ivu-picker-panel",MO="ivu-time-picker",TO=r=>r[0].toUpperCase()+r.slice(1),kO=(r,o,u,_)=>{const g=new Date(r.getTime());return g.setHours(o),g.setMinutes(u),g.setSeconds(_),g},AO=(r,o,u)=>u.indexOf(r)===o,US=()=>!1,PO={name:"TimePickerPanel",mixins:[cm,Pn,om],components:{TimeSpinner:OS,Confirm:lm},emits:["on-pick"],props:{disabledDate:{type:Function,default:US},steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){return{prefixCls:EO,timePrefixCls:MO,date:this.modelValue[0]||Qs(),showDate:!1}},computed:{showSeconds(){return!!(this.format||"").match(/ss/)},visibleDate(){const r=this.date,o=r.getMonth()+1,u=this.t("i.datepicker.year"),_=this.t(`i.datepicker.month${o}`);return`${r.getFullYear()}${u} ${_}`},timeSlots(){return this.modelValue[0]?["getHours","getMinutes","getSeconds"].map(r=>this.date[r]()):[]},disabledHMS(){const r=["disabledHours","disabledMinutes","disabledSeconds"];if(this.disabledDate===US||!this.modelValue[0])return r.reduce((o,u)=>(o[u]=this[u],o),{});{const o=[24,60,60],u=["Hours","Minutes","Seconds"].map(_=>this[`disabled${_}`]).map((_,g)=>{const f=o[g],k=_;for(let O=0;O<f;O+=this.steps[g]||1){const G=this.timeSlots.map((j,ae)=>ae===g?O:j),z=kO(this.date,...G);this.disabledDate(z,!0)&&k.push(O)}return k.filter(AO)});return r.reduce((_,g,f)=>(_[g]=u[f],_),{})}}},watch:{modelValue(r){let o=r[0]||Qs();o=new Date(o),this.date=o}},methods:{handleChange(r,o=!0){const u=new Date(this.date);Object.keys(r).forEach(_=>u[`set${TO(_)}`](r[_])),o&&this.$emit("on-pick",u,"time")}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function IO(r,o,u,_,g,f){const k=t.resolveComponent("time-spinner"),O=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls+"-body-wrapper"]),onMousedown:o[0]||(o[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"])},[g.showDate?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.timePrefixCls+"-header"])},t.toDisplayString(f.visibleDate),3)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content"])},[t.createVNode(k,{ref:"timeSpinner","show-seconds":f.showSeconds,steps:u.steps,hours:f.timeSlots[0],minutes:f.timeSlots[1],seconds:f.timeSlots[2],"disabled-hours":f.disabledHMS.disabledHours,"disabled-minutes":f.disabledHMS.disabledMinutes,"disabled-seconds":f.disabledHMS.disabledSeconds,"hide-disabled-options":r.hideDisabledOptions,onOnChange:f.handleChange,onOnPickClick:r.handlePickClick},null,8,["show-seconds","steps","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),r.confirm?(t.openBlock(),t.createBlock(O,{key:1,onOnPickClear:r.handlePickClear,onOnPickSuccess:r.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var zS=c(PO,[["render",IO]]);const NO={props:{datePanelLabel:Object,currentView:String,datePrefixCls:String}};function RO(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("span",null,[u.datePanelLabel?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([u.datePrefixCls+"-header-label"]),onClick:o[0]||(o[0]=(...k)=>u.datePanelLabel.labels[0].handler&&u.datePanelLabel.labels[0].handler(...k))},t.toDisplayString(u.datePanelLabel.labels[0].label),3)),[[t.vShow,u.datePanelLabel.labels[0].type==="year"||u.currentView==="date"]]):t.createCommentVNode("",!0),u.datePanelLabel&&u.currentView==="date"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(u.datePanelLabel.separator),1)],64)):t.createCommentVNode("",!0),u.datePanelLabel?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass([u.datePrefixCls+"-header-label"]),onClick:o[1]||(o[1]=(...k)=>u.datePanelLabel.labels[1].handler&&u.datePanelLabel.labels[1].handler(...k))},t.toDisplayString(u.datePanelLabel.labels[1].label),3)),[[t.vShow,u.datePanelLabel.labels[1].type==="year"||u.currentView==="date"]]):t.createCommentVNode("",!0)])}var $S=c(NO,[["render",RO]]),HS={props:{showTime:{type:Boolean,default:!1},format:{type:String,default:"yyyy-MM-dd"},selectionMode:{type:String,validator(r){return w(r,["year","month","date","time"])},default:"date"},shortcuts:{type:Array,default:()=>[]},disabledDate:{type:Function,default:()=>!1},modelValue:{type:Array,default:()=>[Qs(),Qs()]},timePickerOptions:{default:()=>({}),type:Object},showWeekNumbers:{type:Boolean,default:!1},startDate:{type:Date},pickerType:{type:String,require:!0},focusedDate:{type:Date,required:!0}},computed:{isTime(){return this.currentView==="time"}},methods:{handleToggleTime(){this.currentView=this.currentView==="time"?"date":"time"}}};const Sy="ivu-picker-panel",DO="ivu-date-picker",LO={name:"DatePickerPanel",mixins:[cm,Pn,HS],components:{Icon:E,DateTable:DS,YearTable:LS,MonthTable:BS,TimePicker:zS,Confirm:lm,datePanelLabel:$S},emits:["on-selection-mode-change","on-pick"],props:{multiple:{type:Boolean,default:!1}},data(){const{selectionMode:r,modelValue:o}=this,u=o.slice().sort();return{prefixCls:Sy,datePrefixCls:DO,currentView:r||"date",pickerTable:this.getTableType(r),dates:u,panelDate:this.startDate||u[0]||new Date}},computed:{classes(){return[`${Sy}-body-wrapper`,{[`${Sy}-with-sidebar`]:this.shortcuts.length}]},panelPickerHandlers(){return this.pickerTable===`${this.currentView}-table`?this.handlePick:this.handlePreSelection},datePanelLabel(){const r=this.t("i.locale"),o=this.t("i.datepicker.datePanelLabel"),u=this.panelDate,{labels:_,separator:g}=yy(r,o,u),f=k=>()=>this.pickerTable=this.getTableType(k);return{separator:g,labels:_.map(k=>(k.handler=f(k.type),k))}},timeDisabled(){return!this.dates[0]}},watch:{modelValue(r){this.dates=r;const o=this.multiple?this.dates[this.dates.length-1]:this.startDate||this.dates[0];this.panelDate=o||new Date},currentView(r){this.$emit("on-selection-mode-change",r),this.currentView==="time"&&t.nextTick(()=>{this.$refs.timePicker.$refs.timeSpinner.updateScroll()})},selectionMode(r){this.currentView=r,this.pickerTable=this.getTableType(r)},focusedDate(r){const o=r.getFullYear()!==this.panelDate.getFullYear(),u=o||r.getMonth()!==this.panelDate.getMonth();(o||u)&&(this.multiple||(this.panelDate=r))}},methods:{reset(){this.currentView=this.selectionMode,this.pickerTable=this.getTableType(this.currentView)},changeYear(r){this.selectionMode==="year"||this.pickerTable==="year-table"?this.panelDate=new Date(this.panelDate.getFullYear()+r*10,0,1):this.panelDate=ES(this.panelDate,r*12)},getTableType(r){return r.match(/^time/)?"time-picker":`${r}-table`},changeMonth(r){this.panelDate=ES(this.panelDate,r)},handlePreSelection(r){this.panelDate=r,this.pickerTable==="year-table"?this.pickerTable="month-table":this.pickerTable=this.getTableType(this.currentView)},handlePick(r,o){const{selectionMode:u,panelDate:_}=this;u==="year"?r=new Date(r.getFullYear(),0,1):u==="month"?r=new Date(_.getFullYear(),r.getMonth(),1):r=new Date(r),this.dates=[r],this.$emit("on-pick",r,!1,o||u)}}},BO=["onClick"];function OO(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("date-panel-label"),G=t.resolveComponent("time-picker"),z=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),onMousedown:o[4]||(o[4]=t.withModifiers(()=>{},["prevent"]))},[r.shortcuts.length?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-sidebar"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.shortcuts,j=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls+"-shortcut"]),key:j.text,onClick:ae=>r.handleShortcutClick(j)},t.toDisplayString(j.text),11,BO))),128))],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.datePrefixCls+"-header"])},[t.createElementVNode("span",{class:t.normalizeClass(r.iconBtnCls("prev","-double")),onClick:o[0]||(o[0]=j=>f.changeYear(-1))},[t.createVNode(k,{type:"ios-arrow-back"})],2),g.pickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(r.iconBtnCls("prev")),onClick:o[1]||(o[1]=j=>f.changeMonth(-1))},[t.createVNode(k,{type:"ios-arrow-back"})],2)),[[t.vShow,g.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(O,{"date-panel-label":f.datePanelLabel,"current-view":g.pickerTable.split("-").shift(),"date-prefix-cls":g.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),t.createElementVNode("span",{class:t.normalizeClass(r.iconBtnCls("next","-double")),onClick:o[2]||(o[2]=j=>f.changeYear(1))},[t.createVNode(k,{type:"ios-arrow-forward"})],2),g.pickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(r.iconBtnCls("next")),onClick:o[3]||(o[3]=j=>f.changeMonth(1))},[t.createVNode(k,{type:"ios-arrow-forward"})],2)),[[t.vShow,g.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,g.currentView!=="time"]]),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content"])},[g.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(g.pickerTable),{key:0,ref:"pickerTable","table-date":g.panelDate,"show-week-numbers":r.showWeekNumbers,"model-value":g.dates,"selection-mode":r.selectionMode,"disabled-date":r.disabledDate,"focused-date":r.focusedDate,onOnPick:f.panelPickerHandlers,onOnPickClick:r.handlePickClick},null,40,["table-date","show-week-numbers","model-value","selection-mode","disabled-date","focused-date","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content"])},[g.currentView==="time"?(t.openBlock(),t.createBlock(G,t.mergeProps({key:0,ref:"timePicker","model-value":g.dates,format:r.format,"time-disabled":f.timeDisabled,"disabled-date":r.disabledDate,"focused-date":r.focusedDate},r.timePickerOptions,{onOnPick:f.handlePick,onOnPickClick:r.handlePickClick,onOnPickClear:r.handlePickClear,onOnPickSuccess:r.handlePickSuccess,onOnPickToggleTime:r.handleToggleTime}),null,16,["model-value","format","time-disabled","disabled-date","focused-date","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):t.createCommentVNode("",!0)],2),[[t.vShow,r.isTime]]),r.confirm?(t.openBlock(),t.createBlock(z,{key:0,"show-time":r.showTime,"is-time":r.isTime,onOnPickToggleTime:r.handleToggleTime,onOnPickClear:r.handlePickClear,onOnPickSuccess:r.handlePickSuccess},null,8,["show-time","is-time","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var VO=c(LO,[["render",OO]]);const GS="ivu-picker-panel",Ey="ivu-time-picker",WS=r=>r[0].toUpperCase()+r.slice(1),FO={name:"RangeTimePickerPanel",mixins:[cm,Pn,om],components:{TimeSpinner:OS,Confirm:lm},emits:["on-pick"],props:{steps:{type:Array,default:()=>[]},format:{type:String,default:"HH:mm:ss"},modelValue:{type:Array,required:!0}},data(){const[r,o]=this.modelValue.slice();return{prefixCls:GS,timePrefixCls:Ey,showDate:!1,dateStart:r||Qs(),dateEnd:o||Qs()}},computed:{classes(){return[`${GS}-body-wrapper`,`${Ey}-with-range`,{[`${Ey}-with-seconds`]:this.showSeconds}]},showSeconds(){return!!(this.format||"").match(/ss/)},leftDatePanelLabel(){return this.panelLabelConfig(this.date)},rightDatePanelLabel(){return this.panelLabelConfig(this.dateEnd)}},watch:{modelValue(r){const[o,u]=r.slice();this.dateStart=o||Qs(),this.dateEnd=u||Qs()}},methods:{panelLabelConfig(r){const o=this.t("i.locale"),u=this.t("i.datepicker.datePanelLabel"),{labels:_,separator:g}=yy(o,u,r||Qs());return[_[0].label,g,_[1].label].join("")},handleChange(r,o,u=!0){const _=new Date(this.dateStart);let g=new Date(this.dateEnd);Object.keys(r).forEach(f=>{_[`set${WS(f)}`](r[f])}),Object.keys(o).forEach(f=>{g[`set${WS(f)}`](o[f])}),g<_&&(g=_),u&&this.$emit("on-pick",[_,g],"time")},handleStartChange(r){this.handleChange(r,{})},handleEndChange(r){this.handleChange({},r)},updateScroll(){this.$refs.timeSpinner.updateScroll(),this.$refs.timeSpinnerEnd.updateScroll()}},mounted(){this.$parent&&this.$parent.$options.name==="DatePicker"&&(this.showDate=!0)}};function UO(r,o,u,_,g,f){const k=t.resolveComponent("time-spinner"),O=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),onMousedown:o[0]||(o[0]=t.withModifiers(()=>{},["prevent"]))},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content",g.prefixCls+"-content-left"])},[t.createElementVNode("div",{class:t.normalizeClass([g.timePrefixCls+"-header"])},[g.showDate?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(f.leftDatePanelLabel),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(r.t("i.datepicker.startTime")),1)],64))],2),t.createVNode(k,{ref:"timeSpinner",steps:u.steps,"show-seconds":f.showSeconds,hours:u.modelValue[0]&&g.dateStart.getHours(),minutes:u.modelValue[0]&&g.dateStart.getMinutes(),seconds:u.modelValue[0]&&g.dateStart.getSeconds(),"disabled-hours":r.disabledHours,"disabled-minutes":r.disabledMinutes,"disabled-seconds":r.disabledSeconds,"hide-disabled-options":r.hideDisabledOptions,onOnChange:f.handleStartChange,onOnPickClick:r.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content",g.prefixCls+"-content-right"])},[t.createElementVNode("div",{class:t.normalizeClass([g.timePrefixCls+"-header"])},[g.showDate?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(f.rightDatePanelLabel),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(r.t("i.datepicker.endTime")),1)],64))],2),t.createVNode(k,{ref:"timeSpinnerEnd",steps:u.steps,"show-seconds":f.showSeconds,hours:u.modelValue[1]&&g.dateEnd.getHours(),minutes:u.modelValue[1]&&g.dateEnd.getMinutes(),seconds:u.modelValue[1]&&g.dateEnd.getSeconds(),"disabled-hours":r.disabledHours,"disabled-minutes":r.disabledMinutes,"disabled-seconds":r.disabledSeconds,"hide-disabled-options":r.hideDisabledOptions,onOnChange:f.handleEndChange,onOnPickClick:r.handlePickClick},null,8,["steps","show-seconds","hours","minutes","seconds","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","onOnChange","onOnPickClick"])],2),r.confirm?(t.openBlock(),t.createBlock(O,{key:0,onOnPickClear:r.handlePickClear,onOnPickSuccess:r.handlePickSuccess},null,8,["onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var jS=c(FO,[["render",UO]]);const Hc="ivu-picker-panel",My="ivu-date-picker",KS=(r,o)=>!r||!o?0:r.getTime()-o.getTime(),zO={name:"RangeDatePickerPanel",mixins:[cm,Pn,HS],components:{Icon:E,DateTable:DS,YearTable:LS,MonthTable:BS,TimePicker:jS,Confirm:lm,datePanelLabel:$S},props:{splitPanels:{type:Boolean,default:!1}},data(){const[r,o]=this.modelValue.map(_=>_||Qs()),u=this.startDate?this.startDate:r;return{prefixCls:Hc,datePrefixCls:My,dates:this.modelValue,rangeState:{from:this.modelValue[0],to:this.modelValue[1],selecting:r&&!o},currentView:this.selectionMode||"range",leftPickerTable:`${this.selectionMode}-table`,rightPickerTable:`${this.selectionMode}-table`,leftPanelDate:u,rightPanelDate:new Date(u.getFullYear(),u.getMonth()+1,1)}},computed:{classes(){return[`${Hc}-body-wrapper`,`${My}-with-range`,{[`${Hc}-with-sidebar`]:this.shortcuts.length,[`${My}-with-week-numbers`]:this.showWeekNumbers}]},panelBodyClasses(){return[Hc+"-body",{[Hc+"-body-time"]:this.showTime,[Hc+"-body-date"]:!this.showTime}]},leftDatePanelLabel(){return this.panelLabelConfig("left")},rightDatePanelLabel(){return this.panelLabelConfig("right")},leftDatePanelView(){return this.leftPickerTable.split("-").shift()},rightDatePanelView(){return this.rightPickerTable.split("-").shift()},timeDisabled(){return!(this.dates[0]&&this.dates[1])},preSelecting(){const r=`${this.currentView}-table`;return{left:this.leftPickerTable!==r,right:this.rightPickerTable!==r}},panelPickerHandlers(){return{left:this.preSelecting.left?this.handlePreSelection.bind(this,"left"):this.handleRangePick,right:this.preSelecting.right?this.handlePreSelection.bind(this,"right"):this.handleRangePick}}},watch:{modelValue(r){const o=r[0]?vy(r[0]):null,u=r[1]?vy(r[1]):null;this.dates=[o,u].sort(KS),this.rangeState={from:this.dates[0],to:this.dates[1],selecting:!1},this.setPanelDates(this.startDate||this.dates[0]||new Date)},currentView(r){const o=this.leftPanelDate.getMonth(),u=this.rightPanelDate.getMonth(),_=this.leftPanelDate.getFullYear()===this.rightPanelDate.getFullYear();r==="date"&&_&&o===u&&this.changePanelDate("right","Month",1),r==="month"&&_&&this.changePanelDate("right","FullYear",1),r==="year"&&_&&this.changePanelDate("right","FullYear",10)},selectionMode(r){this.currentView=r||"range"},focusedDate(r){this.setPanelDates(r||new Date)}},methods:{reset(){this.currentView=this.selectionMode,this.leftPickerTable=`${this.currentView}-table`,this.rightPickerTable=`${this.currentView}-table`},setPanelDates(r){this.leftPanelDate=r;const o=new Date(r.getFullYear(),r.getMonth()+1,1),u=this.dates[1]?this.dates[1].getTime():this.dates[1];this.rightPanelDate=this.splitPanels?new Date(Math.max(u,o.getTime())):o},panelLabelConfig(r){const o=this.t("i.locale"),u=this.t("i.datepicker.datePanelLabel"),_=O=>{const G=O=="month"?this.showMonthPicker:this.showYearPicker;return()=>G(r)},g=this[`${r}PanelDate`],{labels:f,separator:k}=yy(o,u,g);return{separator:k,labels:f.map(O=>(O.handler=_(O.type),O))}},prevYear(r){const o=this.currentView==="year"?-10:-1;this.changePanelDate(r,"FullYear",o)},nextYear(r){const o=this.currentView==="year"?10:1;this.changePanelDate(r,"FullYear",o)},prevMonth(r){this.changePanelDate(r,"Month",-1)},nextMonth(r){this.changePanelDate(r,"Month",1)},changePanelDate(r,o,u,_=!0){const g=new Date(this[`${r}PanelDate`]);if(o==="FullYear"?g[`set${o}`](g[`get${o}`]()+u):g[`set${o}`](g[`get${o}`]()+u,1),this[`${r}PanelDate`]=g,!!_)if(this.splitPanels){const f=r==="left"?"right":"left";r==="left"&&this.leftPanelDate>=this.rightPanelDate&&this.changePanelDate(f,o,1),r==="right"&&this.rightPanelDate<=this.leftPanelDate&&this.changePanelDate(f,o,-1)}else{const f=r==="left"?"right":"left",k=this[`${f}PanelDate`],O=new Date(k);if(o==="Month"){const G=new Date(O.getFullYear(),O.getMonth()+u+1,0).getDate();O.setDate(Math.min(G,O.getDate()))}O[`set${o}`](O[`get${o}`]()+u),this[`${f}PanelDate`]=O}},showYearPicker(r){this[`${r}PickerTable`]="year-table"},showMonthPicker(r){this[`${r}PickerTable`]="month-table"},handlePreSelection(r,o){if(this[`${r}PanelDate`]=o,this[`${r}PickerTable`]==="year-table"?this[`${r}PickerTable`]="month-table":this[`${r}PickerTable`]=`${this.currentView}-table`,!this.splitPanels){const u=r==="left"?"right":"left";this[`${u}PanelDate`]=o;const _=u==="left"?-1:1;this.changePanelDate(u,"Month",_,!1)}},handleRangePick(r,o){if(this.rangeState.selecting||this.currentView==="time"){if(this.currentView==="time")this.dates=r;else{const[u,_]=[this.rangeState.from,r].sort(KS);this.dates=[u,_],this.rangeState={from:u,to:_,selecting:!1}}this.handleConfirm(!1,o||"date")}else this.rangeState={from:r,to:null,selecting:!0}},handleChangeRange(r){this.rangeState.to=r}}},$O=["onClick"];function HO(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("date-panel-label"),G=t.resolveComponent("time-picker"),z=t.resolveComponent("Confirm");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),onMousedown:o[8]||(o[8]=t.withModifiers(()=>{},["prevent"]))},[r.shortcuts.length?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-sidebar"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.shortcuts,j=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls+"-shortcut"]),key:j.text,onClick:ae=>r.handleShortcutClick(j)},t.toDisplayString(j.text),11,$O))),128))],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(f.panelBodyClasses)},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content",g.prefixCls+"-content-left"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.datePrefixCls+"-header"])},[t.createElementVNode("span",{class:t.normalizeClass(r.iconBtnCls("prev","-double")),onClick:o[0]||(o[0]=j=>f.prevYear("left"))},[t.createVNode(k,{type:"ios-arrow-back"})],2),g.leftPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(r.iconBtnCls("prev")),onClick:o[1]||(o[1]=j=>f.prevMonth("left"))},[t.createVNode(k,{type:"ios-arrow-back"})],2)),[[t.vShow,g.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(O,{"date-panel-label":f.leftDatePanelLabel,"current-view":f.leftDatePanelView,"date-prefix-cls":g.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),u.splitPanels||g.leftPickerTable!=="date-table"?(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(r.iconBtnCls("next","-double")),onClick:o[2]||(o[2]=j=>f.nextYear("left"))},[t.createVNode(k,{type:"ios-arrow-forward"})],2)):t.createCommentVNode("",!0),u.splitPanels&&g.leftPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(r.iconBtnCls("next")),onClick:o[3]||(o[3]=j=>f.nextMonth("left"))},[t.createVNode(k,{type:"ios-arrow-forward"})],2)),[[t.vShow,g.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,g.currentView!=="time"]]),g.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(g.leftPickerTable),{key:0,ref:"leftYearTable","table-date":g.leftPanelDate,"selection-mode":"range","disabled-date":r.disabledDate,"range-state":g.rangeState,"show-week-numbers":r.showWeekNumbers,"model-value":f.preSelecting.left?[g.dates[0]]:g.dates,"focused-date":r.focusedDate,onOnChangeRange:f.handleChangeRange,onOnPick:f.panelPickerHandlers.left,onOnPickClick:r.handlePickClick},null,40,["table-date","disabled-date","range-state","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),[[t.vShow,!r.isTime]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content",g.prefixCls+"-content-right"])},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.datePrefixCls+"-header"])},[u.splitPanels||g.rightPickerTable!=="date-table"?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(r.iconBtnCls("prev","-double")),onClick:o[4]||(o[4]=j=>f.prevYear("right"))},[t.createVNode(k,{type:"ios-arrow-back"})],2)):t.createCommentVNode("",!0),u.splitPanels&&g.rightPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(r.iconBtnCls("prev")),onClick:o[5]||(o[5]=j=>f.prevMonth("right"))},[t.createVNode(k,{type:"ios-arrow-back"})],2)),[[t.vShow,g.currentView==="date"]]):t.createCommentVNode("",!0),t.createVNode(O,{"date-panel-label":f.rightDatePanelLabel,"current-view":f.rightDatePanelView,"date-prefix-cls":g.datePrefixCls},null,8,["date-panel-label","current-view","date-prefix-cls"]),t.createElementVNode("span",{class:t.normalizeClass(r.iconBtnCls("next","-double")),onClick:o[6]||(o[6]=j=>f.nextYear("right"))},[t.createVNode(k,{type:"ios-arrow-forward"})],2),g.rightPickerTable==="date-table"?t.withDirectives((t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(r.iconBtnCls("next")),onClick:o[7]||(o[7]=j=>f.nextMonth("right"))},[t.createVNode(k,{type:"ios-arrow-forward"})],2)),[[t.vShow,g.currentView==="date"]]):t.createCommentVNode("",!0)],2),[[t.vShow,g.currentView!=="time"]]),g.currentView!=="time"?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(g.rightPickerTable),{key:0,ref:"rightYearTable","table-date":g.rightPanelDate,"selection-mode":"range","range-state":g.rangeState,"disabled-date":r.disabledDate,"show-week-numbers":r.showWeekNumbers,"model-value":f.preSelecting.right?[g.dates[g.dates.length-1]]:g.dates,"focused-date":r.focusedDate,onOnChangeRange:f.handleChangeRange,onOnPick:f.panelPickerHandlers.right,onOnPickClick:r.handlePickClick},null,40,["table-date","range-state","disabled-date","show-week-numbers","model-value","focused-date","onOnChangeRange","onOnPick","onOnPickClick"])):t.createCommentVNode("",!0)],2),[[t.vShow,!r.isTime]]),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content"])},[g.currentView==="time"?(t.openBlock(),t.createBlock(G,t.mergeProps({key:0,ref:"timePicker","model-value":g.dates,format:r.format,"time-disabled":f.timeDisabled},r.timePickerOptions,{onOnPick:f.handleRangePick,onOnPickClick:r.handlePickClick,onOnPickClear:r.handlePickClear,onOnPickSuccess:r.handlePickSuccess,onOnPickToggleTime:r.handleToggleTime}),null,16,["model-value","format","time-disabled","onOnPick","onOnPickClick","onOnPickClear","onOnPickSuccess","onOnPickToggleTime"])):t.createCommentVNode("",!0)],2),[[t.vShow,r.isTime]]),r.confirm?(t.openBlock(),t.createBlock(z,{key:0,"show-time":r.showTime,"is-time":r.isTime,"time-disabled":f.timeDisabled,onOnPickToggleTime:r.handleToggleTime,onOnPickClear:r.handlePickClear,onOnPickSuccess:r.handlePickSuccess},null,8,["show-time","is-time","time-disabled","onOnPickToggleTime","onOnPickClear","onOnPickSuccess"])):t.createCommentVNode("",!0)],2)],34)}var GO=c(zO,[["render",HO]]),qS={name:"CalendarPicker",mixins:[TS],props:{type:{validator(r){return w(r,["year","month","date","daterange","datetime","datetimerange"])},default:"date"}},components:{DatePickerPanel:VO,RangeDatePickerPanel:GO},computed:{panel(){return this.type==="daterange"||this.type==="datetimerange"?"RangeDatePickerPanel":"DatePickerPanel"},ownPickerProps(){return this.options}}},WO={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};const XS={name:"Description",inject:["DescriptionListInstance"],props:{term:{type:String}},computed:{styles(){let r={};return this.DescriptionListInstance.gutter!==0&&(r={paddingLeft:this.DescriptionListInstance.gutter/2+"px",paddingRight:this.DescriptionListInstance.gutter/2+"px"}),r}},render(){let r;(this.term||this.$slots.term)&&(this.$slots.term?r=t.h("div",{class:"ivu-description-term"},this.$slots.term()):r=t.h("div",{class:"ivu-description-term"},this.term));const o=t.h("div",{class:"ivu-description-detail"},this.$slots.default()),u=r?[r,o]:[o];return t.h(Js,{...WO[this.DescriptionListInstance.col],style:this.styles},()=>u)}},jO={name:"DescriptionList",components:{Row:fo},provide(){return{DescriptionListInstance:this}},props:{layout:{validator(r){return w(r,["horizontal","vertical"])},default:"horizontal"},title:{type:String},gutter:{type:Number,default:32},col:{validator(r){return w(r,[1,2,3,4])},default:3}}},KO={key:0,class:"ivu-description-list-title"};function qO(r,o,u,_,g,f){const k=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-description-list",{"ivu-description-list-vertical":u.layout==="vertical"}])},[u.title||r.$slots.title?(t.openBlock(),t.createElementBlock("div",KO,[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])])):t.createCommentVNode("",!0),t.createVNode(k,{gutter:u.gutter},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),_:3},8,["gutter"])],2)}var YS=c(jO,[["render",qO]]);const go="ivu-divider",XO={name:"Divider",props:{type:{type:String,default:"horizontal",validator(r){return w(r,["horizontal","vertical"])}},orientation:{type:String,default:"center",validator(r){return w(r,["left","right","center"])}},dashed:{type:Boolean,default:!1},size:{validator(r){return w(r,["small","default"])},default:"default"},plain:{type:Boolean,default:!1}},computed:{hasSlot(){return!!this.$slots.default},classes(){return[`${go}`,`${go}-${this.type}`,`${go}-${this.size}`,{[`${go}-with-text`]:this.hasSlot&&this.orientation==="center",[`${go}-with-text-${this.orientation}`]:this.hasSlot,[`${go}-dashed`]:!!this.dashed,[`${go}-plain`]:this.plain}]},slotClasses(){return[`${go}-inner-text`]}}};function YO(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[f.hasSlot?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(f.slotClasses)},[t.renderSlot(r.$slots,"default")],2)):t.createCommentVNode("",!0)],2)}var um=c(XO,[["render",YO]]),Ty={props:{lockScroll:{type:Boolean,default:!0}},methods:{checkScrollBar(){if(!s)return;let r=window.innerWidth;if(!r){const o=document.documentElement.getBoundingClientRect();r=o.right-Math.abs(o.left)}this.bodyIsOverflowing=document.body.clientWidth<r,this.bodyIsOverflowing&&(this.scrollBarWidth=M())},checkMaskInVisible(){let r=s?document.getElementsByClassName("ivu-modal-mask")||[]:[];return Array.from(r).every(o=>o.style.display==="none"||o.classList.contains("fade-leave-to"))},setScrollBar(){s&&this.bodyIsOverflowing&&this.scrollBarWidth!==void 0&&(document.body.style.paddingRight=`${this.scrollBarWidth}px`)},resetScrollBar(){s&&(document.body.style.paddingRight="")},addScrollEffect(){!this.lockScroll||(this.checkScrollBar(),this.setScrollBar(),s&&(document.body.style.overflow="hidden"))},removeScrollEffect(){!this.lockScroll||s&&this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}};const lr="ivu-drawer",JO={name:"Drawer",mixins:[Ty],components:{Icon:E},emits:["on-close","on-resize-width","on-visible-change","update:modelValue","on-drag"],provide(){return{DrawerInstance:this}},props:{modelValue:{type:Boolean,default:!1},title:{type:String},width:{type:[Number,String],default:256},height:{type:[Number,String],default:256},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},maskStyle:{type:Object},styles:{type:Object},scrollable:{type:Boolean,default:!1},placement:{validator(r){return w(r,["left","right","top","bottom"])},default:"right"},zIndex:{type:Number,default:1e3},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!0:r.$VIEWUI.transfer}},className:{type:String},inner:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},beforeClose:Function},data(){return{prefixCls:lr,visible:this.modelValue,wrapShow:!1,showHead:!0,canMove:!1,dragWidth:this.width,dragHeight:this.height,wrapperWidth:this.width,wrapperHeight:this.height,wrapperLeft:0,minWidth:256,minHeight:256,id:te(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${lr}-wrap`,{[`${lr}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${lr}-no-mask`]:!this.mask,[`${lr}-wrap-inner`]:this.inner,[`${lr}-wrap-dragging`]:this.canMove}]},wrapStyles(){return{zIndex:this.zIndex}},mainStyles(){let r={};if(this.placement==="left"||this.placement==="right"){const o=parseInt(this.dragWidth),u={width:o<=100?`${o}%`:`${o}px`};Object.assign(r,u)}else{const o=parseInt(this.dragHeight),u={height:o<=100?`${o}%`:`${o}px`};Object.assign(r,u)}return r},contentClasses(){return[`${lr}-content`,{[`${lr}-content-no-mask`]:!this.mask}]},classes(){return[`${lr}`,`${lr}-${this.placement}`,{[`${lr}-no-header`]:!this.showHead,[`${lr}-inner`]:this.inner}]},maskClasses(){return[`${lr}-mask`,{[`${lr}-mask-inner`]:this.inner}]},transitionName(){return this.placement==="left"||this.placement==="right"?`move-${this.placement}`:this.placement==="top"?"move-up":"move-down"}},methods:{close(){if(!this.beforeClose)return this.handleClose();const r=this.beforeClose();r&&r.then?r.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-close")},handleMask(){this.maskClosable&&this.mask&&this.close()},handleWrapClick(r){const o=r.target.getAttribute("class");o&&o.indexOf(`${lr}-wrap`)>-1&&this.handleMask()},handleMousemove(r){if(!this.canMove||!this.draggable)return;this.handleSetWrapperWidth();const o=r.pageX-this.wrapperLeft;let u=this.placement==="right"?this.wrapperWidth-o:o;u=Math.max(u,parseFloat(this.minWidth)),r.atMin=u===parseFloat(this.minWidth),u<=100&&(u=u/this.wrapperWidth*100),this.dragWidth=u,this.$emit("on-resize-width",parseInt(this.dragWidth)),this.$emit("on-drag","dragging",parseInt(this.dragWidth))},handleSetWrapperWidth(){const{width:r,left:o}=this.$refs.drawer.getBoundingClientRect();this.wrapperWidth=r,this.wrapperLeft=o},handleMouseup(){!this.draggable||(this.canMove=!1,this.$emit("on-drag","end"))},handleTriggerMousedown(){this.canMove=!0,window.getSelection().removeAllRanges(),this.$emit("on-drag","start")},addDrawer(){const r=this.$root;r.drawerList||(r.drawerList=[]),r.drawerList.push({id:this.id,drawer:this})},removeDrawer(){const r=this.$root;if(!r.drawerList)return;const o=r.drawerList.findIndex(u=>u.id===this.id);r.drawerList.splice(o,1)}},mounted(){this.visible&&(this.wrapShow=!0);let r=!0;this.$slots.header===void 0&&!this.title&&(r=!1),this.showHead=r,this.addDrawer(),a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup),this.handleSetWrapperWidth()},beforeUnmount(){this.removeDrawer(),l(document,"mousemove",this.handleMousemove),l(document,"mouseup",this.handleMouseup),this.removeScrollEffect()},watch:{modelValue(r){this.visible=r},visible(r){r===!1?this.timer=setTimeout(()=>{this.wrapShow=!1,this.$root.drawerList.map(o=>o.drawer).filter(o=>o.id!==this.id).some(o=>o.visible&&!o.scrollable)||this.removeScrollEffect()},300):(this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(o=>{o.table.handleOnVisibleChange(r)}),this.sliderList.forEach(o=>{o.slider.handleOnVisibleChange(r)}),this.$emit("on-visible-change",r)},scrollable(r){r?this.removeScrollEffect():this.addScrollEffect()},title(r){this.$slots.header===void 0&&(this.showHead=!!r)},width(r){this.dragWidth=r},height(r){this.dragHeight=r}}},ZO={ref:"drawer"},QO=t.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger"},[t.createElementVNode("div",{class:"ivu-drawer-drag-move-trigger-point"},[t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i"),t.createElementVNode("i")])],-1);function eV(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!u.transfer},[t.createElementVNode("div",ZO,[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[u.mask?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.maskClasses),style:t.normalizeStyle(u.maskStyle),onClick:o[0]||(o[0]=(...O)=>f.handleMask&&f.handleMask(...O))},null,6)),[[t.vShow,g.visible]]):t.createCommentVNode("",!0)]),_:1}),t.createElementVNode("div",{class:t.normalizeClass(f.wrapClasses),style:t.normalizeStyle(f.wrapStyles),onClick:o[3]||(o[3]=(...O)=>f.handleWrapClick&&f.handleWrapClick(...O))},[t.createVNode(t.Transition,{name:f.transitionName},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.mainStyles)},[t.createElementVNode("div",{class:t.normalizeClass(f.contentClasses),ref:"content"},[u.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:"ivu-drawer-close",onClick:o[1]||(o[1]=(...O)=>f.close&&f.close(...O))},[t.renderSlot(r.$slots,"close",{},()=>[t.createVNode(k,{type:"ios-close"})])])):t.createCommentVNode("",!0),g.showHead?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([g.prefixCls+"-header"])},[t.renderSlot(r.$slots,"header",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-header-inner"])},t.toDisplayString(u.title),3)])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"]),style:t.normalizeStyle(u.styles)},[t.renderSlot(r.$slots,"default")],6)],2),u.draggable&&(u.placement==="left"||u.placement==="right")?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["ivu-drawer-drag","ivu-drawer-drag-"+u.placement]),onMousedown:o[2]||(o[2]=(...O)=>f.handleTriggerMousedown&&f.handleTriggerMousedown(...O))},[t.renderSlot(r.$slots,"trigger",{},()=>[QO])],34)):t.createCommentVNode("",!0)],6),[[t.vShow,g.visible]])]),_:3},8,["name"])],6)],512)],8,["disabled"])}var JS=c(JO,[["render",eV]]);const hm="ivu-dropdown-item",tV={name:"DropdownItem",props:{name:{type:[String,Number]},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},divided:{type:Boolean,default:!1}},computed:{classes(){return[`${hm}`,{[`${hm}-disabled`]:this.disabled,[`${hm}-selected`]:this.selected,[`${hm}-divided`]:this.divided}]}},methods:{handleClick(){if(this.disabled)return;const r=B(this,"Dropdown");this.$parent&&this.$parent.$options.name==="Dropdown"?this.$parent.handleHaschildClick():r&&r.$options.name==="Dropdown"&&r.handleHoverClick(),r.handleItemClick(this.name)}}};function nV(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.classes),onClick:o[0]||(o[0]=(...k)=>f.handleClick&&f.handleClick(...k))},[t.renderSlot(r.$slots,"default")],2)}var ZS=c(tV,[["render",nV]]);const iV=(r="")=>r.split("").reduce((o,u)=>{const _=u.charCodeAt(0);return _>=0&&_<=128?o+1:o+2},0),rV=(r="",o)=>{let u=0;return r.split("").reduce((_,g)=>{const f=g.charCodeAt(0);return f>=0&&f<=128?u+=1:u+=2,u<=o?_+g:_},"")},sV={name:"Ellipsis",components:{Tooltip:_a},emits:["on-show","on-hide"],props:{text:{type:String},height:{type:Number},lines:{type:Number},length:{type:Number},fullWidthRecognition:{type:Boolean,default:!1},autoResize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},theme:{validator(r){return w(r,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"}},data(){return{oversize:!1,computedReady:!1,computedText:""}},watch:{disabled(){this.init()},text(){this.init()},height(){this.init()}},mounted(){this.init()},methods:{init(){this.disabled||(this.computeText(),this.limitShow())},computeText(){this.oversize=!1,this.computedReady=!1,t.nextTick(()=>{let r=this.$refs.text,o=this.$el,u=this.$refs.more,_=1e3,g=this.text,f=this.height;if(!f&&this.lines&&(f=parseInt(N(o,"lineHeight"),10)*this.lines),r){if(this.length)(this.fullWidthRecognition?iV(g):g.length)>this.length&&(this.oversize=!0,u.style.display="inline-block",g=this.fullWidthRecognition?rV(g,this.length):g.slice(0,this.length));else if(o.offsetHeight>f)for(this.oversize=!0,u.style.display="inline-block";o.offsetHeight>f&&_>0;)o.offsetHeight>f*3?r.innerText=g=g.substring(0,Math.floor(g.length/2)):r.innerText=g=g.substring(0,g.length-1),_--}this.computedText=g})},limitShow(){this.computedReady=!0,t.nextTick(()=>{let r=this.$refs.text,o=this.$el;r&&(r.innerText=this.computedText,o.offsetHeight>this.height?this.$emit("on-hide"):this.$emit("on-show"))})}}},aV={class:"ivu-ellipsis"},oV={class:"ivu-ellipsis-more",ref:"more"},lV={class:"ivu-ellipsis-more",ref:"more"},cV={key:1,class:"ivu-ellipsis-hidden"},uV={class:"ivu-ellipsis-more",ref:"more"};function hV(r,o,u,_,g,f){const k=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",aV,[t.renderSlot(r.$slots,"prefix",{class:"ivu-ellipsis-prefix"}),g.computedReady?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[u.tooltip?(t.openBlock(),t.createBlock(k,{key:0,content:u.text,theme:u.theme,"max-width":u.maxWidth,placement:u.placement,transfer:u.transfer},{default:t.withCtx(()=>[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(u.text),513),t.withDirectives(t.createElementVNode("span",oV,[t.renderSlot(r.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,g.oversize]]),t.renderSlot(r.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]),_:3},8,["content","theme","max-width","placement","transfer"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(u.text),513),t.withDirectives(t.createElementVNode("span",lV,[t.renderSlot(r.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,g.oversize]]),t.renderSlot(r.$slots,"suffix",{class:"ivu-ellipsis-suffix"})],64))],64)):(t.openBlock(),t.createElementBlock("div",cV,[t.createElementVNode("span",{class:"ivu-ellipsis-text",ref:"text"},t.toDisplayString(u.text),513),t.withDirectives(t.createElementVNode("span",uV,[t.renderSlot(r.$slots,"more",{},()=>[t.createTextVNode("...")])],512),[[t.vShow,g.oversize]]),t.renderSlot(r.$slots,"suffix",{class:"ivu-ellipsis-suffix"})]))])}var QS=c(sV,[["render",hV]]);const e2={name:"Email",mixins:[Rh],data(){return{className:"ivu-login-mail",prefix:"ios-mail-outline",placeholder:"",type:"email"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:ly.Email,trigger:"change"},{type:"email",message:"",trigger:"change"}]}}}};var dm={403:{img:"https://file.iviewui.com/iview-pro/icon-403.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-403-color.svg",title:"403",desc:""},404:{img:"https://file.iviewui.com/iview-pro/icon-404.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-404-color.svg",title:"404",desc:""},500:{img:"https://file.iviewui.com/iview-pro/icon-500.svg",imgColor:"https://file.iviewui.com/iview-pro/icon-500-color.svg",title:"500",desc:""}};const dV={name:"Exception",components:{Button:ar},props:{type:{validator(r){return w(r,["403","404","500",403,404,500])},default:"404"},title:{type:String},desc:{type:String},img:{type:String},imgColor:{type:Boolean,default:!1},backText:{type:String,default:""},redirect:{type:String,default:"/"}},computed:{imgPath(){return this.img?this.img:this.imgColor?dm[this.type].imgColor:dm[this.type].img},titleText(){return this.title?this.title:dm[this.type].title},descText(){return this.desc?this.desc:dm[this.type].desc}}},fV={class:"ivu-exception"},pV={class:"ivu-exception-img"},mV={class:"ivu-exception-content"},gV={class:"ivu-exception-content-desc"},vV={class:"ivu-exception-content-actions"};function yV(r,o,u,_,g,f){const k=t.resolveComponent("Button");return t.openBlock(),t.createElementBlock("div",fV,[t.createElementVNode("div",pV,[t.createElementVNode("div",{class:"ivu-exception-img-element",style:t.normalizeStyle({"background-image":"url("+f.imgPath+")"})},null,4)]),t.createElementVNode("div",mV,[t.createElementVNode("h1",null,[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(f.titleText),1)])]),t.createElementVNode("div",gV,[t.renderSlot(r.$slots,"desc",{},()=>[t.createTextVNode(t.toDisplayString(f.descText),1)])]),t.createElementVNode("div",vV,[t.renderSlot(r.$slots,"actions",{},()=>[t.createVNode(k,{to:u.redirect,type:"primary",size:"large"},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(u.backText),1)]),_:1},8,["to"])])])])])}var t2=c(dV,[["render",yV]]);const bV="ivu-layout",_V={name:"Footer",computed:{wrapClasses(){return`${bV}-footer`}}};function xV(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[t.renderSlot(r.$slots,"default")],2)}var ky=c(_V,[["render",xV]]);const wV={name:"FooterToolbar",props:{extra:{type:String}}},CV={class:"ivu-footer-toolbar"},SV={key:0,class:"ivu-footer-toolbar-left"},EV={class:"ivu-footer-toolbar-right"};function MV(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",CV,[u.extra||r.$slots.extra?(t.openBlock(),t.createElementBlock("div",SV,[t.renderSlot(r.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(u.extra),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",EV,[t.renderSlot(r.$slots,"default")])])}var n2=c(wV,[["render",MV]]);const fm="ivu-form",TV={name:"iForm",emits:["on-validate"],provide(){return{FormInstance:this}},props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{validator(r){return w(r,["left","right","top"])},default:"right"},inline:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},autocomplete:{validator(r){return w(r,["on","off"])},default:"off"},hideRequiredMark:{type:Boolean,default:!1},labelColon:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1}},data(){return{fields:[]}},computed:{classes(){return[`${fm}`,`${fm}-label-${this.labelPosition}`,{[`${fm}-inline`]:this.inline,[`${fm}-hide-required-mark`]:this.hideRequiredMark}]},colon(){let r="";return this.labelColon&&(r=typeof this.labelColon=="boolean"?":":this.labelColon),r}},methods:{resetFields(){this.fields.forEach(r=>{r.resetField()})},validate(r){return new Promise(o=>{let u=!0,_=0;this.fields.length===0&&(o(u),typeof r=="function"&&r(u)),this.fields.forEach(g=>{g.validate("",f=>{f&&(u=!1),++_===this.fields.length&&(o(u),typeof r=="function"&&r(u))})})})},validateField(r,o){const u=this.fields.filter(_=>_.prop===r)[0];if(!u)throw new Error("[View UI warn]: must call validateField with valid prop string!");u.validate("",o)},addField(r){r&&this.fields.push(r)},removeField(r){r.prop&&this.fields.splice(this.fields.indexOf(r),1)}},watch:{rules(){this.validate()}}},kV=["autocomplete"];function AV(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("form",{class:t.normalizeClass(f.classes),autocomplete:u.autocomplete},[t.renderSlot(r.$slots,"default")],10,kV)}var pm=c(TV,[["render",AV]]);const PV={name:"GlobalFooter",components:{Icon:E},props:{links:{type:Array,default(){return[]}},copyright:{type:String}}},IV={class:"ivu-global-footer"},NV={key:0,class:"ivu-global-footer-links"},RV=["href","target","title"],DV={key:1,class:"ivu-global-footer-copyright"};function LV(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("footer",IV,[u.links.length||r.$slots.links?(t.openBlock(),t.createElementBlock("div",NV,[t.renderSlot(r.$slots,"links",{},()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.links,O=>(t.openBlock(),t.createElementBlock("a",{href:O.href,target:O.blankTarget?"_blank":"_self",key:O.key,title:O.title},[O.icon?(t.openBlock(),t.createBlock(k,{key:0,type:O.icon},null,8,["type"])):O.customIcon?(t.openBlock(),t.createBlock(k,{key:1,custom:O.customIcon},null,8,["custom"])):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(O.title),1)],8,RV))),128))])])):t.createCommentVNode("",!0),u.copyright||r.$slots.copyright?(t.openBlock(),t.createElementBlock("div",DV,[t.renderSlot(r.$slots,"copyright",{},()=>[t.createTextVNode(t.toDisplayString(u.copyright),1)])])):t.createCommentVNode("",!0)])}var i2=c(PV,[["render",LV]]),Ay={exports:{}},BV=Ay.exports={};BV.forEach=function(r,o){for(var u=0;u<r.length;u++){var _=o(r[u]);if(_)return _}};var OV=function(r){var o=r.stateHandler.getState;function u(k){var O=o(k);return O&&!!O.isDetectable}function _(k){o(k).isDetectable=!0}function g(k){return!!o(k).busy}function f(k,O){o(k).busy=!!O}return{isDetectable:u,markAsDetectable:_,isBusy:g,markBusy:f}},VV=function(r){var o={};function u(k){var O=r.get(k);return O===void 0?[]:o[O]||[]}function _(k,O){var G=r.get(k);o[G]||(o[G]=[]),o[G].push(O)}function g(k,O){for(var G=u(k),z=0,j=G.length;z<j;++z)if(G[z]===O){G.splice(z,1);break}}function f(k){var O=u(k);!O||(O.length=0)}return{get:u,add:_,removeListener:g,removeAllListeners:f}},FV=function(){var r=1;function o(){return r++}return{generate:o}},UV=function(r){var o=r.idGenerator,u=r.stateHandler.getState;function _(f){var k=u(f);return k&&k.id!==void 0?k.id:null}function g(f){var k=u(f);if(!k)throw new Error("setId required the element to have a resize detection state.");var O=o.generate();return k.id=O,O}return{get:_,set:g}},zV=function(r){function o(){}var u={log:o,warn:o,error:o};if(!r&&window.console){var _=function(g,f){g[f]=function(){var k=console[f];if(k.apply)k.apply(console,arguments);else for(var O=0;O<arguments.length;O++)k(arguments[O])}};_(u,"log"),_(u,"warn"),_(u,"error")}return u},Py={exports:{}},r2=Py.exports={};r2.isIE=function(r){function o(){var _=navigator.userAgent.toLowerCase();return _.indexOf("msie")!==-1||_.indexOf("trident")!==-1||_.indexOf(" edge/")!==-1}if(!o())return!1;if(!r)return!0;var u=function(){var _,g=3,f=document.createElement("div"),k=f.getElementsByTagName("i");do f.innerHTML="<!--[if gt IE "+ ++g+"]><i></i><![endif]-->";while(k[0]);return g>4?g:_}();return r===u},r2.isLegacyOpera=function(){return!!window.opera};var s2={exports:{}},$V=s2.exports={};$V.getOption=HV;function HV(r,o,u){var _=r[o];return _==null&&u!==void 0?u:_}var a2=s2.exports,GV=function(r){r=r||{};var o=r.reporter,u=a2.getOption(r,"async",!0),_=a2.getOption(r,"auto",!0);_&&!u&&(o&&o.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),u=!0);var g=o2(),f,k=!1;function O(ye,me){!k&&_&&u&&g.size()===0&&j(),g.add(ye,me)}function G(){for(k=!0;g.size();){var ye=g;g=o2(),ye.process()}k=!1}function z(ye){k||(ye===void 0&&(ye=u),f&&(ae(f),f=null),ye?j():G())}function j(){f=_e(G)}function ae(ye){var me=clearTimeout;return me(ye)}function _e(ye){var me=function(ie){return setTimeout(ie,0)};return me(ye)}return{add:O,force:z}};function o2(){var r={},o=0,u=0,_=0;function g(O,G){G||(G=O,O=0),O>u?u=O:O<_&&(_=O),r[O]||(r[O]=[]),r[O].push(G),o++}function f(){for(var O=_;O<=u;O++)for(var G=r[O],z=0;z<G.length;z++){var j=G[z];j()}}function k(){return o}return{add:g,process:f,size:k}}var Iy="_erd";function WV(r){return r[Iy]={},l2(r)}function l2(r){return r[Iy]}function jV(r){delete r[Iy]}var KV={initState:WV,getState:l2,cleanState:jV},Wh=Py.exports,qV=function(r){r=r||{};var o=r.reporter,u=r.batchProcessor,_=r.stateHandler.getState;if(!o)throw new Error("Missing required dependency: reporter.");function g(z,j){function ae(){j(z)}if(Wh.isIE(8))_(z).object={proxy:ae},z.attachEvent("onresize",ae);else{var _e=O(z);if(!_e)throw new Error("Element is not detectable by this strategy.");_e.contentDocument.defaultView.addEventListener("resize",ae)}}function f(z){var j=r.important?" !important; ":"; ";return(z.join(j)+j).trim()}function k(z,j,ae){ae||(ae=j,j=z,z=null),z=z||{},z.debug;function _e(ye,me){var ie=f(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Pe=!1,At=window.getComputedStyle(ye),ut=ye.offsetWidth,mt=ye.offsetHeight;_(ye).startSize={width:ut,height:mt};function We(){function Ne(){if(At.position==="static"){ye.style.setProperty("position","relative",z.important?"important":"");var Dt=function(Lt,xt,gt,Et){function Ot(ht){return ht.replace(/[^-\d\.]/g,"")}var wt=gt[Et];wt!=="auto"&&Ot(wt)!=="0"&&(Lt.warn("An element that is positioned static has style."+Et+"="+wt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Et+" will be set to 0. Element: ",xt),xt.style.setProperty(Et,"0",z.important?"important":""))};Dt(o,ye,At,"top"),Dt(o,ye,At,"right"),Dt(o,ye,At,"bottom"),Dt(o,ye,At,"left")}}function Ye(){Pe||Ne();function Dt(xt,gt){if(!xt.contentDocument){var Et=_(xt);Et.checkForObjectDocumentTimeoutId&&window.clearTimeout(Et.checkForObjectDocumentTimeoutId),Et.checkForObjectDocumentTimeoutId=setTimeout(function(){Et.checkForObjectDocumentTimeoutId=0,Dt(xt,gt)},100);return}gt(xt.contentDocument)}var Lt=this;Dt(Lt,function(xt){me(ye)})}At.position!==""&&(Ne(),Pe=!0);var Ke=document.createElement("object");Ke.style.cssText=ie,Ke.tabIndex=-1,Ke.type="text/html",Ke.setAttribute("aria-hidden","true"),Ke.onload=Ye,Wh.isIE()||(Ke.data="about:blank"),_(ye)&&(ye.appendChild(Ke),_(ye).object=Ke,Wh.isIE()&&(Ke.data="about:blank"))}u?u.add(We):We()}Wh.isIE(8)?ae(j):_e(j,ae)}function O(z){return _(z).object}function G(z){if(_(z)){var j=O(z);!j||(Wh.isIE(8)?z.detachEvent("onresize",j.proxy):z.removeChild(j),_(z).checkForObjectDocumentTimeoutId&&window.clearTimeout(_(z).checkForObjectDocumentTimeoutId),delete _(z).object)}}return{makeDetectable:k,addListener:g,uninstall:G}},XV=Ay.exports.forEach,YV=function(r){r=r||{};var o=r.reporter,u=r.batchProcessor,_=r.stateHandler.getState;r.stateHandler.hasState;var g=r.idHandler;if(!u)throw new Error("Missing required dependency: batchProcessor");if(!o)throw new Error("Missing required dependency: reporter.");var f=j(),k="erd_scroll_detection_scrollbar_style",O="erd_scroll_detection_container";function G(We){ae(We,k,O)}G(window.document);function z(We){var Ne=r.important?" !important; ":"; ";return(We.join(Ne)+Ne).trim()}function j(){var We=500,Ne=500,Ye=document.createElement("div");Ye.style.cssText=z(["position: absolute","width: "+We*2+"px","height: "+Ne*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Ke=document.createElement("div");Ke.style.cssText=z(["position: absolute","width: "+We+"px","height: "+Ne+"px","overflow: scroll","visibility: none","top: "+-We*3+"px","left: "+-Ne*3+"px","visibility: hidden","margin: 0","padding: 0"]),Ke.appendChild(Ye),document.body.insertBefore(Ke,document.body.firstChild);var Dt=We-Ke.clientWidth,Lt=Ne-Ke.clientHeight;return document.body.removeChild(Ke),{width:Dt,height:Lt}}function ae(We,Ne,Ye){function Ke(gt,Et){Et=Et||function(wt){We.head.appendChild(wt)};var Ot=We.createElement("style");return Ot.innerHTML=gt,Ot.id=Ne,Et(Ot),Ot}if(!We.getElementById(Ne)){var Dt=Ye+"_animation",Lt=Ye+"_animation_active",xt=`/* Created by the element-resize-detector library. */
`;xt+="."+Ye+" > div::-webkit-scrollbar { "+z(["display: none"])+` }

`,xt+="."+Lt+" { "+z(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+Dt,"animation-name: "+Dt])+` }
`,xt+="@-webkit-keyframes "+Dt+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,xt+="@keyframes "+Dt+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Ke(xt)}}function _e(We){We.className+=" "+O+"_animation_active"}function ye(We,Ne,Ye){if(We.addEventListener)We.addEventListener(Ne,Ye);else if(We.attachEvent)We.attachEvent("on"+Ne,Ye);else return o.error("[scroll] Don't know how to add event listeners.")}function me(We,Ne,Ye){if(We.removeEventListener)We.removeEventListener(Ne,Ye);else if(We.detachEvent)We.detachEvent("on"+Ne,Ye);else return o.error("[scroll] Don't know how to remove event listeners.")}function ie(We){return _(We).container.childNodes[0].childNodes[0].childNodes[0]}function Pe(We){return _(We).container.childNodes[0].childNodes[0].childNodes[1]}function At(We,Ne){var Ye=_(We).listeners;if(!Ye.push)throw new Error("Cannot add listener to an element that is not detectable.");_(We).listeners.push(Ne)}function ut(We,Ne,Ye){Ye||(Ye=Ne,Ne=We,We=null),We=We||{};function Ke(){if(We.debug){var vt=Array.prototype.slice.call(arguments);if(vt.unshift(g.get(Ne),"Scroll: "),o.log.apply)o.log.apply(null,vt);else for(var $t=0;$t<vt.length;$t++)o.log(vt[$t])}}function Dt(vt){function $t(gn){var Bi=gn.getRootNode&&gn.getRootNode().contains(gn);return gn===gn.ownerDocument.body||gn.ownerDocument.body.contains(gn)||Bi}return!$t(vt)||window.getComputedStyle(vt)===null}function Lt(vt){var $t=_(vt).container.childNodes[0],gn=window.getComputedStyle($t);return!gn.width||gn.width.indexOf("px")===-1}function xt(){var vt=window.getComputedStyle(Ne),$t={};return $t.position=vt.position,$t.width=Ne.offsetWidth,$t.height=Ne.offsetHeight,$t.top=vt.top,$t.right=vt.right,$t.bottom=vt.bottom,$t.left=vt.left,$t.widthCSS=vt.width,$t.heightCSS=vt.height,$t}function gt(){var vt=xt();_(Ne).startSize={width:vt.width,height:vt.height},Ke("Element start size",_(Ne).startSize)}function Et(){_(Ne).listeners=[]}function Ot(){if(Ke("storeStyle invoked."),!_(Ne)){Ke("Aborting because element has been uninstalled");return}var vt=xt();_(Ne).style=vt}function wt(vt,$t,gn){_(vt).lastWidth=$t,_(vt).lastHeight=gn}function ht(vt){return ie(vt).childNodes[0]}function st(){return 2*f.width+1}function Mt(){return 2*f.height+1}function ft(vt){return vt+10+st()}function Gt(vt){return vt+10+Mt()}function qt(vt){return vt*2+st()}function Tn(vt){return vt*2+Mt()}function zn(vt,$t,gn){var Bi=ie(vt),cr=Pe(vt),Ta=ft($t),To=Gt(gn),ur=qt($t),In=Tn(gn);Bi.scrollLeft=Ta,Bi.scrollTop=To,cr.scrollLeft=ur,cr.scrollTop=In}function ei(){var vt=_(Ne).container;if(!vt){vt=document.createElement("div"),vt.className=O,vt.style.cssText=z(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),_(Ne).container=vt,_e(vt),Ne.appendChild(vt);var $t=function(){_(Ne).onRendered&&_(Ne).onRendered()};ye(vt,"animationstart",$t),_(Ne).onAnimationStart=$t}return vt}function ri(){function vt(){var bi=_(Ne).style;if(bi.position==="static"){Ne.style.setProperty("position","relative",We.important?"important":"");var Ls=function(ka,Bs,Rm,ko){function o1(l1){return l1.replace(/[^-\d\.]/g,"")}var od=Rm[ko];od!=="auto"&&o1(od)!=="0"&&(ka.warn("An element that is positioned static has style."+ko+"="+od+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ko+" will be set to 0. Element: ",Bs),Bs.style[ko]=0)};Ls(o,Ne,bi,"top"),Ls(o,Ne,bi,"right"),Ls(o,Ne,bi,"bottom"),Ls(o,Ne,bi,"left")}}function $t(bi,Ls,ka,Bs){return bi=bi?bi+"px":"0",Ls=Ls?Ls+"px":"0",ka=ka?ka+"px":"0",Bs=Bs?Bs+"px":"0",["left: "+bi,"top: "+Ls,"right: "+Bs,"bottom: "+ka]}if(Ke("Injecting elements"),!_(Ne)){Ke("Aborting because element has been uninstalled");return}vt();var gn=_(Ne).container;gn||(gn=ei());var Bi=f.width,cr=f.height,Ta=z(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),To=z(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat($t(-(1+Bi),-(1+cr),-cr,-Bi))),ur=z(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),In=z(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Er=z(["position: absolute","left: 0","top: 0"]),Rs=z(["position: absolute","width: 200%","height: 200%"]),Yr=document.createElement("div"),Ds=document.createElement("div"),Yc=document.createElement("div"),Pm=document.createElement("div"),Jc=document.createElement("div"),Im=document.createElement("div");Yr.dir="ltr",Yr.style.cssText=Ta,Yr.className=O,Ds.className=O,Ds.style.cssText=To,Yc.style.cssText=ur,Pm.style.cssText=Er,Jc.style.cssText=In,Im.style.cssText=Rs,Yc.appendChild(Pm),Jc.appendChild(Im),Ds.appendChild(Yc),Ds.appendChild(Jc),Yr.appendChild(Ds),gn.appendChild(Yr);function Nm(){var bi=_(Ne);bi&&bi.onExpand?bi.onExpand():Ke("Aborting expand scroll handler: element has been uninstalled")}function ad(){var bi=_(Ne);bi&&bi.onShrink?bi.onShrink():Ke("Aborting shrink scroll handler: element has been uninstalled")}ye(Yc,"scroll",Nm),ye(Jc,"scroll",ad),_(Ne).onExpandScroll=Nm,_(Ne).onShrinkScroll=ad}function zi(){function vt(ur,In,Er){var Rs=ht(ur),Yr=ft(In),Ds=Gt(Er);Rs.style.setProperty("width",Yr+"px",We.important?"important":""),Rs.style.setProperty("height",Ds+"px",We.important?"important":"")}function $t(ur){var In=Ne.offsetWidth,Er=Ne.offsetHeight,Rs=In!==_(Ne).lastWidth||Er!==_(Ne).lastHeight;Ke("Storing current size",In,Er),wt(Ne,In,Er),u.add(0,function(){if(Rs){if(!_(Ne)){Ke("Aborting because element has been uninstalled");return}if(!gn()){Ke("Aborting because element container has not been initialized");return}if(We.debug){var Yr=Ne.offsetWidth,Ds=Ne.offsetHeight;(Yr!==In||Ds!==Er)&&o.warn(g.get(Ne),"Scroll: Size changed before updating detector elements.")}vt(Ne,In,Er)}}),u.add(1,function(){if(!_(Ne)){Ke("Aborting because element has been uninstalled");return}if(!gn()){Ke("Aborting because element container has not been initialized");return}zn(Ne,In,Er)}),Rs&&ur&&u.add(2,function(){if(!_(Ne)){Ke("Aborting because element has been uninstalled");return}if(!gn()){Ke("Aborting because element container has not been initialized");return}ur()})}function gn(){return!!_(Ne).container}function Bi(){function ur(){return _(Ne).lastNotifiedWidth===void 0}Ke("notifyListenersIfNeeded invoked");var In=_(Ne);if(ur()&&In.lastWidth===In.startSize.width&&In.lastHeight===In.startSize.height)return Ke("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(In.lastWidth===In.lastNotifiedWidth&&In.lastHeight===In.lastNotifiedHeight)return Ke("Not notifying: Size already notified");Ke("Current size not notified, notifying..."),In.lastNotifiedWidth=In.lastWidth,In.lastNotifiedHeight=In.lastHeight,XV(_(Ne).listeners,function(Er){Er(Ne)})}function cr(){if(Ke("startanimation triggered."),Lt(Ne)){Ke("Ignoring since element is still unrendered...");return}Ke("Element rendered.");var ur=ie(Ne),In=Pe(Ne);(ur.scrollLeft===0||ur.scrollTop===0||In.scrollLeft===0||In.scrollTop===0)&&(Ke("Scrollbars out of sync. Updating detector elements..."),$t(Bi))}function Ta(){if(Ke("Scroll detected."),Lt(Ne)){Ke("Scroll event fired while unrendered. Ignoring...");return}$t(Bi)}if(Ke("registerListenersAndPositionElements invoked."),!_(Ne)){Ke("Aborting because element has been uninstalled");return}_(Ne).onRendered=cr,_(Ne).onExpand=Ta,_(Ne).onShrink=Ta;var To=_(Ne).style;vt(Ne,To.width,To.height)}function Sr(){if(Ke("finalizeDomMutation invoked."),!_(Ne)){Ke("Aborting because element has been uninstalled");return}var vt=_(Ne).style;wt(Ne,vt.width,vt.height),zn(Ne,vt.width,vt.height)}function Is(){Ye(Ne)}function Ns(){Ke("Installing..."),Et(),gt(),u.add(0,Ot),u.add(1,ri),u.add(2,zi),u.add(3,Sr),u.add(4,Is)}Ke("Making detectable..."),Dt(Ne)?(Ke("Element is detached"),ei(),Ke("Waiting until element is attached..."),_(Ne).onRendered=function(){Ke("Element is now attached"),Ns()}):Ns()}function mt(We){var Ne=_(We);!Ne||(Ne.onExpandScroll&&me(ie(We),"scroll",Ne.onExpandScroll),Ne.onShrinkScroll&&me(Pe(We),"scroll",Ne.onShrinkScroll),Ne.onAnimationStart&&me(Ne.container,"animationstart",Ne.onAnimationStart),Ne.container&&We.removeChild(Ne.container))}return{makeDetectable:ut,addListener:At,uninstall:mt,initDocument:G}},jh=Ay.exports.forEach,JV=OV,ZV=VV,QV=FV,eF=UV,tF=zV,c2=Py.exports,nF=GV,vo=KV,iF=qV,rF=YV;function u2(r){return Array.isArray(r)||r.length!==void 0}function h2(r){if(Array.isArray(r))return r;var o=[];return jh(r,function(u){o.push(u)}),o}function d2(r){return r&&r.nodeType===1}var Gc=function(r){r=r||{};var o;if(r.idHandler)o={get:function(ut){return r.idHandler.get(ut,!0)},set:r.idHandler.set};else{var u=QV(),_=eF({idGenerator:u,stateHandler:vo});o=_}var g=r.reporter;if(!g){var f=g===!1;g=tF(f)}var k=yo(r,"batchProcessor",nF({reporter:g})),O={};O.callOnAdd=!!yo(r,"callOnAdd",!0),O.debug=!!yo(r,"debug",!1);var G=ZV(o),z=JV({stateHandler:vo}),j,ae=yo(r,"strategy","object"),_e=yo(r,"important",!1),ye={reporter:g,batchProcessor:k,stateHandler:vo,idHandler:o,important:_e};if(ae==="scroll"&&(c2.isLegacyOpera()?(g.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ae="object"):c2.isIE(9)&&(g.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ae="object")),ae==="scroll")j=rF(ye);else if(ae==="object")j=iF(ye);else throw new Error("Invalid strategy name: "+ae);var me={};function ie(ut,mt,We){function Ne(gt){var Et=G.get(gt);jh(Et,function(Ot){Ot(gt)})}function Ye(gt,Et,Ot){G.add(Et,Ot),gt&&Ot(Et)}if(We||(We=mt,mt=ut,ut={}),!mt)throw new Error("At least one element required.");if(!We)throw new Error("Listener required.");if(d2(mt))mt=[mt];else if(u2(mt))mt=h2(mt);else return g.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Ke=0,Dt=yo(ut,"callOnAdd",O.callOnAdd),Lt=yo(ut,"onReady",function(){}),xt=yo(ut,"debug",O.debug);jh(mt,function(gt){vo.getState(gt)||(vo.initState(gt),o.set(gt));var Et=o.get(gt);if(xt&&g.log("Attaching listener to element",Et,gt),!z.isDetectable(gt)){if(xt&&g.log(Et,"Not detectable."),z.isBusy(gt)){xt&&g.log(Et,"System busy making it detectable"),Ye(Dt,gt,We),me[Et]=me[Et]||[],me[Et].push(function(){Ke++,Ke===mt.length&&Lt()});return}return xt&&g.log(Et,"Making detectable..."),z.markBusy(gt,!0),j.makeDetectable({debug:xt,important:_e},gt,function(Ot){if(xt&&g.log(Et,"onElementDetectable"),vo.getState(Ot)){z.markAsDetectable(Ot),z.markBusy(Ot,!1),j.addListener(Ot,Ne),Ye(Dt,Ot,We);var wt=vo.getState(Ot);if(wt&&wt.startSize){var ht=Ot.offsetWidth,st=Ot.offsetHeight;(wt.startSize.width!==ht||wt.startSize.height!==st)&&Ne(Ot)}me[Et]&&jh(me[Et],function(Mt){Mt()})}else xt&&g.log(Et,"Element uninstalled before being detectable.");delete me[Et],Ke++,Ke===mt.length&&Lt()})}xt&&g.log(Et,"Already detecable, adding listener."),Ye(Dt,gt,We),Ke++}),Ke===mt.length&&Lt()}function Pe(ut){if(!ut)return g.error("At least one element is required.");if(d2(ut))ut=[ut];else if(u2(ut))ut=h2(ut);else return g.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");jh(ut,function(mt){G.removeAllListeners(mt),j.uninstall(mt),vo.cleanState(mt)})}function At(ut){j.initDocument&&j.initDocument(ut)}return{listenTo:ie,removeListener:G.removeListener,removeAllListeners:G.removeAllListeners,uninstall:Pe,initDocument:At}};function yo(r,o,u){var _=r[o];return _==null&&u!==void 0?u:_}var f2="Expected a function",p2=NaN,sF="[object Symbol]",aF=/^\s+|\s+$/g,oF=/^[-+]0x[0-9a-f]+$/i,lF=/^0b[01]+$/i,cF=/^0o[0-7]+$/i,uF=parseInt,hF=typeof J=="object"&&J&&J.Object===Object&&J,dF=typeof self=="object"&&self&&self.Object===Object&&self,fF=hF||dF||Function("return this")(),pF=Object.prototype,mF=pF.toString,gF=Math.max,vF=Math.min,Ny=function(){return fF.Date.now()};function yF(r,o,u){var _,g,f,k,O,G,z=0,j=!1,ae=!1,_e=!0;if(typeof r!="function")throw new TypeError(f2);o=m2(o)||0,mm(u)&&(j=!!u.leading,ae="maxWait"in u,f=ae?gF(m2(u.maxWait)||0,o):f,_e="trailing"in u?!!u.trailing:_e);function ye(Ye){var Ke=_,Dt=g;return _=g=void 0,z=Ye,k=r.apply(Dt,Ke),k}function me(Ye){return z=Ye,O=setTimeout(At,o),j?ye(Ye):k}function ie(Ye){var Ke=Ye-G,Dt=Ye-z,Lt=o-Ke;return ae?vF(Lt,f-Dt):Lt}function Pe(Ye){var Ke=Ye-G,Dt=Ye-z;return G===void 0||Ke>=o||Ke<0||ae&&Dt>=f}function At(){var Ye=Ny();if(Pe(Ye))return ut(Ye);O=setTimeout(At,ie(Ye))}function ut(Ye){return O=void 0,_e&&_?ye(Ye):(_=g=void 0,k)}function mt(){O!==void 0&&clearTimeout(O),z=0,_=G=g=O=void 0}function We(){return O===void 0?k:ut(Ny())}function Ne(){var Ye=Ny(),Ke=Pe(Ye);if(_=arguments,g=this,G=Ye,Ke){if(O===void 0)return me(G);if(ae)return O=setTimeout(At,o),ye(G)}return O===void 0&&(O=setTimeout(At,o)),k}return Ne.cancel=mt,Ne.flush=We,Ne}function bF(r,o,u){var _=!0,g=!0;if(typeof r!="function")throw new TypeError(f2);return mm(u)&&(_="leading"in u?!!u.leading:_,g="trailing"in u?!!u.trailing:g),yF(r,o,{leading:_,maxWait:o,trailing:g})}function mm(r){var o=typeof r;return!!r&&(o=="object"||o=="function")}function _F(r){return!!r&&typeof r=="object"}function xF(r){return typeof r=="symbol"||_F(r)&&mF.call(r)==sF}function m2(r){if(typeof r=="number")return r;if(xF(r))return p2;if(mm(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=mm(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=r.replace(aF,"");var u=lF.test(r);return u||cF.test(r)?uF(r.slice(2),u?2:8):oF.test(r)?p2:+r}var gm=bF;const wF={name:"Grid",provide(){return{GridInstance:this}},props:{col:{type:Number,default:3},square:{type:Boolean,default:!1},padding:{type:String,default:"24px"},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},hover:{type:Boolean,default:!1}},data(){return{resizeCount:0,handleResize:()=>{}}},computed:{classes(){return{"ivu-grid-center":this.center,"ivu-grid-border":this.border,"ivu-grid-hover":this.hover}}},methods:{onResize(){this.resizeCount++}},mounted(){this.handleResize=gm(this.onResize,150,{leading:!1}),this.observer=Gc(),this.observer.listenTo(this.$refs.grid,this.handleResize)},beforeUnmount(){this.observer.removeListener(this.$refs.grid,this.handleResize)}};function CF(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-grid",f.classes]),ref:"grid"},[t.renderSlot(r.$slots,"default")],2)}var g2=c(wF,[["render",CF]]);const SF={name:"GridItem",inject:["GridInstance"],data(){return{height:0}},computed:{col(){return this.GridInstance.col},square(){return this.GridInstance.square},styles(){const r={width:`${100/this.col}%`};return this.height&&this.square&&(r.height=`${this.height}px`),r},mainStyles(){return{padding:this.GridInstance.padding}}},watch:{col(){t.nextTick(()=>{this.handleChangeHeight()})},square(){this.handleChangeHeight()},"GridInstance.resizeCount"(){this.handleChangeHeight()}},methods:{handleChangeHeight(){if(this.square){const r=this.$refs.col;this.height=parseFloat(N(r,"width"))}}},mounted(){this.handleChangeHeight()}};function EF(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:"ivu-grid-item",style:t.normalizeStyle(f.styles),ref:"col"},[t.createElementVNode("div",{class:"ivu-grid-item-main",style:t.normalizeStyle(f.mainStyles)},[t.renderSlot(r.$slots,"default")],4)],4)}var v2=c(SF,[["render",EF]]);const MF="ivu-layout",TF={name:"Header",computed:{wrapClasses(){return`${MF}-header`}}};function kF(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[t.renderSlot(r.$slots,"default")],2)}var Ry=c(TF,[["render",kF]]);const Nt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent(r){const{keyCode:o}=r;if(r.altKey&&!r.ctrlKey||r.metaKey||o>=Nt.F1&&o<=Nt.F12)return!1;switch(o){case Nt.ALT:case Nt.CAPS_LOCK:case Nt.CONTEXT_MENU:case Nt.CTRL:case Nt.DOWN:case Nt.END:case Nt.ESC:case Nt.HOME:case Nt.INSERT:case Nt.LEFT:case Nt.MAC_FF_META:case Nt.META:case Nt.NUMLOCK:case Nt.NUM_CENTER:case Nt.PAGE_DOWN:case Nt.PAGE_UP:case Nt.PAUSE:case Nt.PRINT_SCREEN:case Nt.RIGHT:case Nt.SHIFT:case Nt.UP:case Nt.WIN_KEY:case Nt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey(r){if(r>=Nt.ZERO&&r<=Nt.NINE||r>=Nt.NUM_ZERO&&r<=Nt.NUM_MULTIPLY||r>=Nt.A&&r<=Nt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case Nt.SPACE:case Nt.QUESTION_MARK:case Nt.NUM_PLUS:case Nt.NUM_MINUS:case Nt.NUM_PERIOD:case Nt.NUM_DIVISION:case Nt.SEMICOLON:case Nt.DASH:case Nt.EQUALS:case Nt.COMMA:case Nt.PERIOD:case Nt.SLASH:case Nt.APOSTROPHE:case Nt.SINGLE_QUOTE:case Nt.OPEN_SQUARE_BRACKET:case Nt.BACKSLASH:case Nt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},bo="ivu-spin",AF={name:"Spin",mixins:[Ty],props:{size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},fix:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data(){return{showText:!1,visible:!1}},computed:{classes(){return[`${bo}`,{[`${bo}-${this.size}`]:!!this.size,[`${bo}-fix`]:this.fix,[`${bo}-show-text`]:this.showText,[`${bo}-fullscreen`]:this.fullscreen}]},mainClasses(){return`${bo}-main`},dotClasses(){return`${bo}-dot`},textClasses(){return`${bo}-text`},fullscreenVisible(){return this.fullscreen?this.visible:!0}},watch:{visible(r){r?this.addScrollEffect():this.removeScrollEffect()}},mounted(){this.showText=!!this.$slots.default&&this.$slots.default().some(r=>r.children&&r.children.length)}};function PF(r,o,u,_,g,f){return t.openBlock(),t.createBlock(t.Transition,{name:"fade"},{default:t.withCtx(()=>[f.fullscreenVisible&&u.show?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.classes)},[t.createElementVNode("div",{class:t.normalizeClass(f.mainClasses)},[t.createElementVNode("span",{class:t.normalizeClass(f.dotClasses)},null,2),t.createElementVNode("div",{class:t.normalizeClass(f.textClasses)},[t.renderSlot(r.$slots,"default")],2)],2)],2)):t.createCommentVNode("",!0)]),_:3})}var qr=c(AF,[["render",PF]]);const IF={name:"ImagePreview",mixins:[Pn],components:{Icon:E,Spin:qr,Row:fo,Col:Js},inheritAttrs:!1,emits:["update:modelValue","on-close","on-switch"],props:{modelValue:{type:Boolean,default:!1},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},toolbar:{type:Array,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||!r.$VIEWUI.image||r.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:r.$VIEWUI.image.toolbar}}},data(){return{currentIndex:0,scale:1,degree:0,translate:{x:0,y:0},startX:0,startY:0,transition:!0,original:!1,prevOverflow:"",status:"loading",zIndex:1e3,maskIndex:this.getMaskIndex(),downloading:!1}},computed:{imgClasses(){return["ivu-image-preview-image",{"ivu-image-preview-grabbing":!this.transition,"ivu-image-preview-hidden":this.status==="failed","ivu-image-preview-transition":this.transition,"ivu-image-preview-limit":!this.original}]},imageStyle(){let r=this.translate.x/this.scale,o=this.translate.y/this.scale;const u=this.degree%360;return[90,-270].includes(u)&&([r,o]=[o,-r]),[180,-180].includes(u)&&([r,o]=[-r,-o]),[270,-90].includes(u)&&([r,o]=[-o,r]),{transform:`
                        scale(${this.scale})
                        rotate(${this.degree}deg)
                        translate(${r}px, ${o}px)
                    `}},maskStyle(){return{zIndex:this.maskIndex+this.zIndex}},leftClasses(){return["ivu-image-preview-arrow-left",{"ivu-image-preview-arrow-disabled":this.hasLeftSwitchEnd}]},rightClasses(){return["ivu-image-preview-arrow-right",{"ivu-image-preview-arrow-disabled":this.hasRightSwitchEnd}]},hasRightSwitchEnd(){const{currentIndex:r,infinite:o,previewList:u}=this,_=u.length;return o?!1:r>=_-1},hasLeftSwitchEnd(){const{currentIndex:r,infinite:o}=this;return o?!1:r===0},currentSrc(){return this.previewList[this.currentIndex]},failLang(){return this.t("i.image.fail")}},methods:{resetStyle(){this.scale=1,this.degree=0,this.translate.x=0,this.translate.y=0},handleClose(){this.$emit("update:modelValue",!1),this.$emit("on-close")},handleClickMask(){!this.maskClosable||this.handleClose()},handleSwitch(r){r?this.currentIndex+1===this.previewList.length?this.infinite&&(this.resetStyle(),this.currentIndex=0):(this.resetStyle(),this.currentIndex+=1):this.currentIndex===0?this.infinite&&(this.resetStyle(),this.currentIndex=this.previewList.length-1):(this.resetStyle(),this.currentIndex-=1),this.$emit("on-switch",{currentIndex:this.currentIndex})},handleOperation(r){r==="zoomIn"&&this.scale<6&&(this.scale+=.25),r==="zoomOut"&&this.scale>.25&&(this.scale-=.25),r==="rotateLeft"&&(this.degree-=90),r==="rotateRight"&&(this.degree+=90),r==="original"&&(this.original=!this.original,this.transition=!1,this.resetStyle(),setTimeout(()=>{this.transition=!0},0)),r==="download"&&(this.downloading=!0,Ee(this.previewList[this.currentIndex]).then(()=>{this.downloading=!1}).catch(()=>{this.downloading=!1}))},handleKeydown(r){if(!this.modelValue)return;const{keyCode:o}=r;o===Nt.LEFT&&this.handleSwitch(!1),o===Nt.RIGHT&&this.handleSwitch(!0),o===Nt.UP&&this.handleOperation("zoomIn"),o===Nt.DOWN&&this.handleOperation("zoomOut"),o===Nt.SPACE&&(r.preventDefault(),this.original=!this.original)},handleKeyup(r){if(!this.modelValue)return;const{keyCode:o}=r;o===Nt.ESC&&this.handleClose()},handleWheel(r){if(!this.modelValue)return;const{deltaY:o}=r;this.handleOperation(o<0?"zoomIn":"zoomOut")},handleMousedown(r){const{pageX:o,pageY:u,which:_}=r;_===1&&(this.startX=o,this.startY=u,this.transition=!1,a(document,"mousemove",this.handleMousemove),a(document,"mouseup",this.handleMouseup))},handleMousemove:gm(function(r){r.stopPropagation();const{pageX:o,pageY:u}=r;this.translate.x+=o-this.startX,this.translate.y+=u-this.startY,this.startX=o,this.startY=u}),handleMouseup(){this.transition=!0,l(document,"mousemove",this.handleMousemove),l(document,"mouseup",this.handleMouseup)},getBodyOverflow(){return s?document.body.style.overflow:""},setBodyOverflow(r){!s||(document.body.style.overflow=r)},handleImageLoad(){this.status="loaded"},handleImageError(){this.status="failed"},getMaskIndex(){return He(),xe}},watch:{modelValue(r){r?(this.currentIndex=this.initialIndex,this.resetStyle(),this.original=!1,this.prevOverflow=this.getBodyOverflow(),this.setBodyOverflow("hidden"),this.maskIndex=this.getMaskIndex()):this.setBodyOverflow(this.prevOverflow)},currentIndex(){this.status="loading"}},mounted(){a(document,"keydown",this.handleKeydown),a(document,"keyup",this.handleKeyup),a(document,"wheel",this.handleWheel)},beforeUnmount(){l(document,"keydown",this.handleKeydown),l(document,"keyup",this.handleKeyup),l(document,"wheel",this.handleWheel)}},NF={key:1,class:"ivu-image-preview-fail"},RF=["src"],DF=[t.createElementVNode("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7198",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7199",fill:"#ffffff"},null,-1)],LF=[t.createElementVNode("path",{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z","p-id":"7413",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z","p-id":"7414",fill:"#ffffff"},null,-1)],BF=[t.createElementVNode("path",{d:"M358.058667 128H156.970667A28.970667 28.970667 0 0 0 128 157.013333v202.837334c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434666a14.506667 14.506667 0 0 0 14.506667-14.506666V200.448h157.610667a14.506667 14.506667 0 0 0 14.506666-14.506667V142.506667a14.506667 14.506667 0 0 0-14.506666-14.506667zM881.493333 649.642667h-43.434666a14.506667 14.506667 0 0 0-14.506667 14.506666v159.402667h-157.610667a14.506667 14.506667 0 0 0-14.506666 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506666 14.506667h201.088c16 0 28.970667-12.928 28.970667-29.013333v-202.837334a14.506667 14.506667 0 0 0-14.506667-14.506666zM358.058667 823.552H200.448v-159.402667a14.506667 14.506667 0 0 0-14.506667-14.506666H142.506667a14.506667 14.506667 0 0 0-14.506667 14.506666v202.88c0 16 12.970667 28.970667 29.013333 28.970667h201.045334a14.506667 14.506667 0 0 0 14.506666-14.506667v-43.434666a14.506667 14.506667 0 0 0-14.506666-14.506667zM866.986667 128h-201.088a14.506667 14.506667 0 0 0-14.506667 14.506667v43.434666c0 7.978667 6.570667 14.506667 14.506667 14.506667h157.610666v159.402667c0 7.978667 6.528 14.506667 14.506667 14.506666h43.434667a14.506667 14.506667 0 0 0 14.506666-14.506666V156.970667A28.928 28.928 0 0 0 866.986667 128z","p-id":"26673",fill:"#ffffff"},null,-1)],OF=[t.createElementVNode("path",{d:"M864 128H160c-19.2 0-32 12.8-32 32v704c0 19.2 12.8 32 32 32h704c19.2 0 32-12.8 32-32V160c0-19.2-12.8-32-32-32z m-32 704H192V192h640v640z","p-id":"1977",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M320 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32zM640 384v288c0 19.2 12.8 32 32 32s32-12.8 32-32V352c0-19.2-12.8-32-32-32h-32c-19.2 0-32 12.8-32 32s12.8 32 32 32z","p-id":"1978",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M512 384m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1979",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M512 640m-32 0a32 32 0 1 0 64 0 32 32 0 1 0-64 0Z","p-id":"1980",fill:"#ffffff"},null,-1)],VF=[t.createElementVNode("path",{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z m191.3-491.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z","p-id":"13309",fill:"#ffffff"},null,-1)],FF=[t.createElementVNode("path",{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8zM880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z","p-id":"13522",fill:"#ffffff"},null,-1)],UF=[t.createElementVNode("path",{d:"M505.7 621c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-72.1V120c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v346.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z","p-id":"8826",fill:"#ffffff"},null,-1),t.createElementVNode("path",{d:"M903 516h-64c-4.4 0-8 3.6-8 8v300c0 4.4-3.6 8-8 8H199c-4.4 0-8-3.6-8-8V524c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v372c0 8.8 7.2 16 16 16h768c8.8 0 16-7.2 16-16V524c0-4.4-3.6-8-8-8z","p-id":"8827",fill:"#ffffff"},null,-1)],zF={class:"ivu-image-preview-operations-item ivu-image-preview-operations-wait ivu-anim-loop",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7816",width:"200",height:"200"},$F=[t.createElementVNode("path",{d:"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z","p-id":"7817",fill:"#ffffff"},null,-1)];function HF(r,o,u,_,g,f){const k=t.resolveComponent("Spin"),O=t.resolveComponent("Col"),G=t.resolveComponent("Row"),z=t.resolveComponent("Icon");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!u.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[u.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-image-preview-mask",style:t.normalizeStyle(f.maskStyle)},null,4)):t.createCommentVNode("",!0)]),_:1}),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[u.modelValue?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-image-preview-wrap",style:t.normalizeStyle(f.maskStyle)},[t.createElementVNode("div",t.mergeProps({class:"ivu-image-preview"},r.$attrs,{onClick:o[14]||(o[14]=t.withModifiers((...j)=>f.handleClickMask&&f.handleClickMask(...j),["stop"]))}),[g.status==="loading"?(t.openBlock(),t.createBlock(k,{key:0,size:"large",class:"ivu-image-preview-loading"})):g.status==="failed"?(t.openBlock(),t.createElementBlock("div",NF,[t.createElementVNode("span",null,t.toDisplayString(f.failLang),1)])):t.createCommentVNode("",!0),(t.openBlock(),t.createElementBlock("img",{class:t.normalizeClass(f.imgClasses),style:t.normalizeStyle(f.imageStyle),src:f.currentSrc,key:g.currentIndex.toString(),onClick:o[0]||(o[0]=t.withModifiers(()=>{},["stop"])),onMousedown:o[1]||(o[1]=t.withModifiers((...j)=>f.handleMousedown&&f.handleMousedown(...j),["stop","prevent"])),onLoad:o[2]||(o[2]=(...j)=>f.handleImageLoad&&f.handleImageLoad(...j)),onError:o[3]||(o[3]=(...j)=>f.handleImageError&&f.handleImageError(...j))},null,46,RF)),u.toolbar&&u.toolbar.length>0?(t.openBlock(),t.createBlock(G,{key:2,"class-name":"ivu-image-preview-operations",wrap:!1,onClick:o[11]||(o[11]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[u.toolbar.indexOf("zoomIn")>-1?(t.openBlock(),t.createBlock(O,{key:0,flex:"1",order:u.toolbar.indexOf("zoomIn")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:o[4]||(o[4]=t.withModifiers(j=>f.handleOperation("zoomIn"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7197",width:"200",height:"200"},DF))]),_:1},8,["order"])):t.createCommentVNode("",!0),u.toolbar.indexOf("zoomOut")>-1?(t.openBlock(),t.createBlock(O,{key:1,flex:"1",order:u.toolbar.indexOf("zoomOut")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:o[5]||(o[5]=t.withModifiers(j=>f.handleOperation("zoomOut"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7412",width:"200",height:"200"},LF))]),_:1},8,["order"])):t.createCommentVNode("",!0),u.toolbar.indexOf("original")>-1?(t.openBlock(),t.createBlock(O,{key:2,flex:"1",order:u.toolbar.indexOf("original")+1},{default:t.withCtx(()=>[t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:o[6]||(o[6]=t.withModifiers(j=>f.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"26672",width:"200",height:"200"},BF,512)),[[t.vShow,!this.original]]),t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:o[7]||(o[7]=t.withModifiers(j=>f.handleOperation("original"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1976",width:"200",height:"200"},OF,512)),[[t.vShow,this.original]])]),_:1},8,["order"])):t.createCommentVNode("",!0),u.toolbar.indexOf("rotateLeft")>-1?(t.openBlock(),t.createBlock(O,{key:3,flex:"1",order:u.toolbar.indexOf("rotateLeft")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:o[8]||(o[8]=t.withModifiers(j=>f.handleOperation("rotateLeft"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13308",width:"200",height:"200"},VF))]),_:1},8,["order"])):t.createCommentVNode("",!0),u.toolbar.indexOf("rotateRight")>-1?(t.openBlock(),t.createBlock(O,{key:4,flex:"1",order:u.toolbar.indexOf("rotateRight")+1},{default:t.withCtx(()=>[(t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:o[9]||(o[9]=t.withModifiers(j=>f.handleOperation("rotateRight"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13521",width:"200",height:"200"},FF))]),_:1},8,["order"])):t.createCommentVNode("",!0),u.toolbar.indexOf("download")>-1?(t.openBlock(),t.createBlock(O,{key:5,flex:"1",order:u.toolbar.indexOf("download")+1},{default:t.withCtx(()=>[t.withDirectives((t.openBlock(),t.createElementBlock("svg",{class:"ivu-image-preview-operations-item",onClick:o[10]||(o[10]=t.withModifiers(j=>f.handleOperation("download"),["stop"])),viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8825",width:"200",height:"200"},UF,512)),[[t.vShow,!g.downloading]]),t.withDirectives((t.openBlock(),t.createElementBlock("svg",zF,$F,512)),[[t.vShow,g.downloading]])]),_:1},8,["order"])):t.createCommentVNode("",!0)]),_:1})):t.createCommentVNode("",!0),u.previewList.length>1?(t.openBlock(),t.createBlock(z,{key:3,class:t.normalizeClass(f.leftClasses),type:"ios-arrow-back",onClick:o[12]||(o[12]=t.withModifiers(j=>f.handleSwitch(!1),["stop"]))},null,8,["class"])):t.createCommentVNode("",!0),u.previewList.length>1?(t.openBlock(),t.createBlock(z,{key:4,class:t.normalizeClass(f.rightClasses),type:"ios-arrow-forward",onClick:o[13]||(o[13]=t.withModifiers(j=>f.handleSwitch(!0),["stop"]))},null,8,["class"])):t.createCommentVNode("",!0),t.createVNode(z,{class:"ivu-image-preview-arrow-close",type:"md-close",onClick:t.withModifiers(f.handleClose,["stop"])},null,8,["onClick"])],16)],4)):t.createCommentVNode("",!0)]),_:1})],8,["disabled"])}var _o=c(IF,[["render",HF]]);const GF=r=>typeof HTMLElement=="object"&&r instanceof HTMLElement,WF={name:"Image",mixins:[Pn],components:{ImagePreview:_o},emits:["on-load","on-error","on-switch","on-close","on-click"],props:{src:{type:String,default:""},alt:{type:String,default:""},preview:{type:Boolean,default:!1},referrerPolicy:{type:String,default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:[String],default:""},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},maskClosable:{type:Boolean,default:!0},previewList:{type:Array},infinite:{type:Boolean,default:!0},initialIndex:{type:Number,default:0},previewTip:{type:Boolean,default:!0},toolbar:{type:Array,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||!r.$VIEWUI.image||r.$VIEWUI.image.toolbar===""?["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"]:r.$VIEWUI.image.toolbar}}},data(){return{loadingImage:!1,loading:!1,imageError:!1,scrollElement:null,observer:null,imagePreviewModal:!1}},watch:{src(){this.loadImage()}},computed:{innerClasses(){return["ivu-image-inner",{"ivu-image-cursor":this.preview}]},imgClasses(){return["ivu-image-img",{"ivu-image-img-hidden":this.loading||this.imageError}]},fitStyle(){const r=["fill","contain","cover","none","scale-down"],{fit:o}=this;return r.includes(o)?`object-fit:${o};`:""},imageStyles(){return{width:typeof this.width=="number"?`${this.width}px`:this.width,height:typeof this.height=="number"?`${this.height}px`:this.height}},loadingLang(){return this.t("i.select.loading")},failLang(){return this.t("i.image.fail")},previewLang(){return this.t("i.image.preview")},loadingType(){return this.lazy?"lazy":"eager"}},mounted(){s&&this.handleImageEvent()},methods:{handleLazy(){const r=this.$refs.image;(this.observer=new IntersectionObserver(this.handlerObserveImage,{root:this.scrollElement,rootMargin:"0px",threshold:0})).observe(r)},handlerObserveImage(r){for(let o of r)o.isIntersecting&&(this.offObserver(),this.loadImage())},addLazyImageListener(){const{scrollContainer:r}=this;this.scrollElement=null,GF(r)?this.scrollElement=r:r&&typeof r=="string"&&(this.scrollElement=document.querySelector(r)),this.handleLazy()},handleImageLoad(){this.loading=!1,this.imageError=!1,this.$emit("on-load")},handleImageError(){this.loading=!1,this.imageError=!0,this.loadingImage=!1,this.$emit("on-error")},loadImage(){this.loading=!0,this.imageError=!1,this.loadingImage=!0},handleImageEvent(){const{lazy:r}=this;r?this.addLazyImageListener():this.loadImage()},offObserver(){const{observer:r}=this;r&&r.disconnect()},handlePreview(){const{preview:r,initialIndex:o}=this;r&&(this.imagePreviewModal=!0,this.$emit("on-click",{initialIndex:o}))},handleClose(){this.$emit("on-close")},handleSwitch(r){this.$emit("on-switch",r)}},beforeUnmount(){this.offObserver()}},jF={key:0,class:"ivu-image-placeholder"},KF={key:1,class:"ivu-image-error"},qF=["alt","src","loading","referrerPolicy"],XF={class:"ivu-image-mark"};function YF(r,o,u,_,g,f){const k=t.resolveComponent("ImagePreview");return t.openBlock(),t.createElementBlock("div",{class:"ivu-image",ref:"image",style:t.normalizeStyle(f.imageStyles)},[g.loading?(t.openBlock(),t.createElementBlock("div",jF,[t.renderSlot(r.$slots,"placeholder",{},()=>[t.createElementVNode("span",null,t.toDisplayString(f.loadingLang),1)])])):g.imageError?(t.openBlock(),t.createElementBlock("div",KF,[t.renderSlot(r.$slots,"error",{},()=>[t.createElementVNode("span",null,t.toDisplayString(f.failLang),1)])])):t.createCommentVNode("",!0),g.loadingImage?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(f.innerClasses),onClick:o[2]||(o[2]=(...O)=>f.handlePreview&&f.handlePreview(...O))},[t.createElementVNode("img",{class:t.normalizeClass(f.imgClasses),style:t.normalizeStyle([f.fitStyle]),alt:u.alt,src:u.src,loading:f.loadingType,referrerPolicy:u.referrerPolicy,onLoad:o[0]||(o[0]=(...O)=>f.handleImageLoad&&f.handleImageLoad(...O)),onError:o[1]||(o[1]=(...O)=>f.handleImageError&&f.handleImageError(...O))},null,46,qF),u.preview&&u.previewTip?t.renderSlot(r.$slots,"preview",{key:0},()=>[t.createElementVNode("div",XF,[t.createElementVNode("span",null,t.toDisplayString(f.previewLang),1)])]):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0),u.preview?(t.openBlock(),t.createBlock(k,{key:3,modelValue:g.imagePreviewModal,"onUpdate:modelValue":o[3]||(o[3]=O=>g.imagePreviewModal=O),"preview-list":u.previewList,"initial-index":u.initialIndex,infinite:u.infinite,"mask-closable":u.maskClosable,transfer:u.transfer,toolbar:u.toolbar,onOnClose:f.handleClose,onOnSwitch:f.handleSwitch},null,8,["modelValue","preview-list","initial-index","infinite","mask-closable","transfer","toolbar","onOnClose","onOnSwitch"])):t.createCommentVNode("",!0)],4)}var y2=c(WF,[["render",YF]]);_o.newInstance=r=>{if(!s)return;const o=r||{};let u=null;const _=t.createApp({data(){return Object.assign({},o,{visible:!1,previewList:[],initialIndex:0,toolbar:["zoomIn","zoomOut","original","rotateLeft","rotateRight","download"],infinite:!0,maskClosable:!0,transfer:!0})},render(){return t.h(_o,Object.assign({},o,{ref:"imagePreview",modelValue:this.visible,previewList:this.previewList,initialIndex:this.initialIndex,toolbar:this.toolbar,infinite:this.infinite,maskClosable:this.maskClosable,transfer:this.transfer,"onOn-close":this.close}))},methods:{close(){this.visible=!1,setTimeout(()=>{this.destroy(),this.onRemove()},300)},destroy(){_.unmount(),document.body.removeChild(g)},onRemove(){}},created(){u=t.getCurrentInstance()}}),g=document.createElement("div");document.body.appendChild(g),_.mount(g);const f=u.refs.imagePreview;return{show(k){Object.keys(k).forEach(O=>{f.$parent[O]=k[O]}),f.$parent.visible=!0},component:f}};let vm;function JF(){return vm=vm||_o.newInstance(),vm}_o.show=function(r={}){const o=JF();r.onRemove=function(){vm=null},o.show(r)};const Ki="ivu-input-number",ym="ivu-icon";function bm(r,o){let u,_,g;try{u=r.toString().split(".")[1].length}catch{u=0}try{_=o.toString().split(".")[1].length}catch{_=0}return g=Math.pow(10,Math.max(u,_)),(Math.round(r*g)+Math.round(o*g))/g}const ZF={name:"InputNumber",mixins:[tn],emits:["on-change","on-focus","on-blur","update:modelValue"],props:{max:{type:Number,default:1/0},min:{type:Number,default:-1/0},step:{type:Number,default:1},activeChange:{type:Boolean,default:!0},modelValue:{type:Number,default:1},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},name:{type:String},precision:{type:Number},elementId:{type:String},formatter:{type:Function},parser:{type:Function},placeholder:{type:String,default:""},controlsOutside:{type:Boolean,default:!1}},data(){return{focused:!1,upDisabled:!1,downDisabled:!1,currentValue:this.modelValue}},computed:{wrapClasses(){return[`${Ki}`,{[`${Ki}-${this.size}`]:!!this.size,[`${Ki}-disabled`]:this.itemDisabled,[`${Ki}-focused`]:this.focused,[`${Ki}-controls-outside`]:this.controlsOutside}]},handlerClasses(){return`${Ki}-handler-wrap`},upClasses(){return[`${Ki}-handler`,`${Ki}-handler-up`,{[`${Ki}-handler-up-disabled`]:this.upDisabled}]},innerUpClasses(){return`${Ki}-handler-up-inner ${ym} ${ym}-ios-arrow-up`},downClasses(){return[`${Ki}-handler`,`${Ki}-handler-down`,{[`${Ki}-handler-down-disabled`]:this.downDisabled}]},innerDownClasses(){return`${Ki}-handler-down-inner ${ym} ${ym}-ios-arrow-down`},inputWrapClasses(){return`${Ki}-input-wrap`},inputClasses(){return`${Ki}-input`},precisionValue(){return this.currentValue?this.precision?this.currentValue.toFixed(this.precision):this.currentValue:this.currentValue},formatterValue(){return this.formatter&&this.precisionValue!==null?this.formatter(this.precisionValue):this.precisionValue}},methods:{preventDefault(r){r.preventDefault()},up(r){const o=Number(r.target.value);if(this.upDisabled&&isNaN(o))return!1;this.changeStep("up",r)},down(r){const o=Number(r.target.value);if(this.downDisabled&&isNaN(o))return!1;this.changeStep("down",r)},changeStep(r,o){if(this.itemDisabled||this.readonly)return!1;const u=Number(o.target.value);let _=Number(this.currentValue);const g=Number(this.step);if(isNaN(_))return!1;if(!isNaN(u)){if(r==="up")if(bm(u,g)<=this.max)_=u;else return!1;else if(r==="down")if(bm(u,-g)>=this.min)_=u;else return!1}r==="up"?_=bm(_,g):r==="down"&&(_=bm(_,-g)),this.setValue(_)},setValue(r){r&&!isNaN(this.precision)&&(r=Number(Number(r).toFixed(this.precision)));const{min:o,max:u}=this;r!==null&&(r>u?r=u:r<o&&(r=o)),t.nextTick(()=>{this.currentValue=r,this.$emit("update:modelValue",r),this.$emit("on-change",r),this.handleFormItemChange("change",r)})},focus(r){this.focused=!0,this.$emit("on-focus",r)},blur(){this.focused=!1,this.$emit("on-blur"),B(this,["DatePicker","TimePicker","Cascader","Search"])||this.handleFormItemChange("blur",this.currentValue)},keyDown(r){r.keyCode===38?(r.preventDefault(),this.up(r)):r.keyCode===40&&(r.preventDefault(),this.down(r))},change(r){if(r.type==="change"&&this.activeChange||r.type==="input"&&!this.activeChange)return;let o=r.target.value.trim();if(this.parser&&(o=this.parser(o)),o.length===0){this.setValue(null);return}r.type==="input"&&o.match(/^\-?\.?$|\.$/)||(o=Number(o),isNaN(o)?r.target.value=this.currentValue:(this.currentValue=o,this.setValue(o)))},changeVal(r){if(r=Number(r),isNaN(r))this.upDisabled=!0,this.downDisabled=!0;else{const o=this.step;this.upDisabled=r+o>this.max,this.downDisabled=r-o<this.min}}},mounted(){this.changeVal(this.currentValue)},watch:{modelValue(r){this.currentValue=r},currentValue(r){this.changeVal(r)},min(){this.changeVal(this.currentValue)},max(){this.changeVal(this.currentValue)}}},QF=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-remove"},null,-1)],e9=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-add"},null,-1)],t9=["id","disabled","autofocus","readonly","name","value","placeholder"];function n9(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[u.controlsOutside?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.handlerClasses)},[t.createElementVNode("a",{onClick:o[1]||(o[1]=(...k)=>f.up&&f.up(...k)),class:t.normalizeClass(f.upClasses)},[t.createElementVNode("span",{class:t.normalizeClass(f.innerUpClasses),onClick:o[0]||(o[0]=(...k)=>f.preventDefault&&f.preventDefault(...k))},null,2)],2),t.createElementVNode("a",{onClick:o[3]||(o[3]=(...k)=>f.down&&f.down(...k)),class:t.normalizeClass(f.downClasses)},[t.createElementVNode("span",{class:t.normalizeClass(f.innerDownClasses),onClick:o[2]||(o[2]=(...k)=>f.preventDefault&&f.preventDefault(...k))},null,2)],2)],2)),u.controlsOutside?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-down",{"ivu-input-number-controls-outside-btn-disabled":g.downDisabled}]),onClick:o[4]||(o[4]=(...k)=>f.down&&f.down(...k))},QF,2)):t.createCommentVNode("",!0),u.controlsOutside?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(["ivu-input-number-controls-outside-btn ivu-input-number-controls-outside-up",{"ivu-input-number-controls-outside-btn-disabled":g.upDisabled}]),onClick:o[5]||(o[5]=(...k)=>f.up&&f.up(...k))},e9,2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(f.inputWrapClasses)},[t.createElementVNode("input",{id:u.elementId,class:t.normalizeClass(f.inputClasses),disabled:r.itemDisabled,autocomplete:"off",spellcheck:"false",autofocus:u.autofocus,onFocus:o[6]||(o[6]=(...k)=>f.focus&&f.focus(...k)),onBlur:o[7]||(o[7]=(...k)=>f.blur&&f.blur(...k)),onKeydown:o[8]||(o[8]=t.withModifiers((...k)=>f.keyDown&&f.keyDown(...k),["stop"])),onInput:o[9]||(o[9]=(...k)=>f.change&&f.change(...k)),onMouseup:o[10]||(o[10]=(...k)=>f.preventDefault&&f.preventDefault(...k)),onChange:o[11]||(o[11]=(...k)=>f.change&&f.change(...k)),readonly:u.readonly||!u.editable,name:u.name,value:f.formatterValue,placeholder:u.placeholder},null,42,t9)],2)],2)}var Dy=c(ZF,[["render",n9]]);const b2="ivu-layout",i9={name:"Layout",data(){return{hasSider:!1}},computed:{wrapClasses(){return[`${b2}`,{[`${b2}-has-sider`]:this.hasSider}]}},methods:{findSider(){return this.$slots.default().some(r=>r.type.name==="Sider")}},mounted(){this.hasSider=this.findSider()}};function r9(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[t.renderSlot(r.$slots,"default")],2)}var _2=c(i9,[["render",r9]]);const x2={tooltips:["",""],showTip:!1,successTip:"",errorTip:""},w2={tooltip:"",editing:!1,maxlength:"",autosize:!0,triggerType:"icon"},C2={rows:1,tooltip:!1,suffix:!1,expandable:!1,symbol:""};var Kh={emits:["update:modelValue"],mixins:[fe],props:{type:{validator(r){return w(r,["secondary","success","warning","danger",""])},default:""},copyable:{type:Boolean,default:!1},copyText:{type:String,default:""},copyConfig:{type:Object,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.typography.copyConfig===""?x2:r.$VIEWUI.typography.copyConfig}},editable:{type:Boolean,default:!1},editConfig:{type:Object,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.typography.editConfig===""?w2:r.$VIEWUI.typography.editConfig}},ellipsis:{type:Boolean,default:!1},ellipsisConfig:{type:Object,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.typography.ellipsisConfig===""?C2:r.$VIEWUI.typography.ellipsisConfig}},disabled:{type:Boolean,default:!1},code:{type:Boolean,default:!1},delete:{type:Boolean,default:!1},keyboard:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},strong:{type:Boolean,default:!1},underline:{type:Boolean,default:!1},italic:{type:Boolean,default:!1},modelValue:{type:String,default:""},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},theme:{validator(r){return w(r,["dark","light"])},default:"dark"},maxWidth:{type:[String,Number],default:250},placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"}},computed:{isHrefPattern(){const{to:r}=this;return!!r},linkProps(){if(this.isHrefPattern){const{linkUrl:r,target:o}=this;return{href:r,target:o}}else return{}},mergedCopyConfig(){return Object.assign({},x2,this.copyConfig)},mergedEditConfig(){return Object.assign({},w2,this.editConfig)},mergedEllipsisConfig(){return Object.assign({},C2,this.ellipsisConfig)}},methods:{commonSlots(){const r={};return this.$slots.default&&(r.default=()=>this.$slots.default()),this.$slots.copyIcon&&(r.copyIcon=o=>this.$slots.copyIcon(o)),this.$slots.editIcon&&(r.editIcon=o=>this.$slots.editIcon(o)),this.$slots.enterIcon&&(r.enterIcon=o=>this.$slots.enterIcon(o)),r},commonEvents(){return{"onUpdate:modelValue":this.handleOnUpdateModelValue}},handleOnUpdateModelValue(r){this.$emit("update:modelValue",r)}}};const _m={name:"TypographyBase",mixins:[Kh],emits:["on-copy-success","on-copy-error","on-edit-start","on-edit-end","on-edit-change","on-edit-cancel"],props:{component:{type:String,default:"div"},level:{type:Number,default:0}},data(){return{currentContent:this.modelValue,copied:!1,copyTimeout:null,editing:!1,editContent:"",lastKeyCode:"",isEditESC:!1,ellipsisText:"",ellipsisContent:"",isEllipsis:!1,ellipsisExpanded:!1,observer:null}},created(){this.editing=this.mergedEditConfig.editing||!1,this.editing&&(this.editContent=this.currentContent?this.currentContent:this.handleGetContent())},watch:{modelValue(r){this.currentContent=r},editing(r){r||t.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},isEllipsis(){t.nextTick(()=>{this.handleRemoveObserver(),this.handleCreateObserver()})},ellipsis:{handler(r){r?t.nextTick(()=>{this.handleUpdateEllipsisStatus(),this.handleCreateObserver()}):this.handleRemoveObserver()},immediate:!0}},computed:{classes(){return["ivu-typography",{[`ivu-typography-${this.type}`]:this.type,"ivu-typography-disabled":this.disabled,"ivu-typography-ellipsis-line-clamp":this.ellipsis&&!this.ellipsisExpanded,"ivu-typography-ellipsis-single-line":this.ellipsis&&!this.ellipsisExpanded&&this.mergedEllipsisConfig.rows===1}]}},methods:{wrapperDecorations(){let r=this.currentContent?this.currentContent:this.$slots.default?this.$slots.default():"";function o(u,_){!u||(r=t.h(_,r))}return o(this.strong,"strong"),o(this.underline,"u"),o(this.delete,"del"),o(this.code,"code"),o(this.mark,"mark"),o(this.keyboard,"kbd"),o(this.italic,"i"),r},handleClickContent(r){if(!this.isHrefPattern&&this.component!=="a"){const o=this.mergedEditConfig.triggerType;this.editable&&(o==="text"||o==="both")&&this.handleEdit()}else{const o=r.ctrlKey||r.metaKey;this.handleCheckClick(r,o)}},handleGetContent(){const r=document.createElement("div");document.body.appendChild(r);let o=null,u=null,_="";const g=this.wrapperDecorations();return o=t.createApp({render(){return t.h("div",{ref:"text",style:{display:"none"}},g)},created(){u=t.getCurrentInstance()}}),o.mount(r),_=u.refs.text.innerText,o.unmount(),document.body.removeChild(r),_},handleCopy(){let r="";this.copyText?r=this.copyText:this.currentContent?r=this.currentContent:this.$slots.default&&(r=this.handleGetContent()),im({text:this.copyText?this.copyText:r,showTip:this.mergedCopyConfig.showTip,successTip:this.mergedCopyConfig.successTip,errorTip:this.mergedCopyConfig.errorTip,success:()=>{this.$emit("on-copy-success"),this.copied=!0,this.copyTimeout&&clearTimeout(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.copied=!1},3e3)},error:()=>{this.$emit("on-copy-error")}})},handleEdit(){this.editContent=this.currentContent?this.currentContent:this.handleGetContent(),t.nextTick(()=>{this.editing=!0,this.$emit("on-edit-start"),t.nextTick(()=>{this.$refs.edit.focus({cursor:"end"})})})},handleEditBlur(){if(this.isEditESC){this.isEditESC=!1;return}this.handleEditSave(),this.$emit("on-edit-end",this.editContent)},handleEditChange(r){const o=r.target.value;this.editContent=o,this.$emit("on-edit-change",o)},handleEditSave(){this.$emit("update:modelValue",this.editContent),this.editing=!1},handleEditKeydown(r){const{keyCode:o}=r;o===Nt.ENTER&&r.preventDefault(),this.lastKeyCode=o},handleEditKeyup(r){const{keyCode:o,ctrlKey:u,altKey:_,metaKey:g,shiftKey:f}=r;this.lastKeyCode===o&&!u&&!_&&!g&&!f&&(o===Nt.ENTER?(this.handleEditSave(),this.$emit("on-edit-end",this.editContent)):o===Nt.ESC&&(this.isEditESC=!0,this.$emit("on-edit-cancel"),this.editing=!1))},handleUpdateEllipsisStatus(){if(this.ellipsis&&!this.ellipsisExpanded){const r=this.$refs.typography;this.isEllipsis=r.scrollHeight>r.clientHeight}else this.isEllipsis=!1},handleCreateObserver(){this.ellipsis&&!this.ellipsisExpanded&&(this.observer=Gc(),this.observer.listenTo(this.$refs.typography,this.handleUpdateEllipsisStatus))},handleRemoveObserver(){this.observer&&(this.observer.removeListener(this.$refs.typography,this.handleUpdateEllipsisStatus),this.observer=null)}},render(){let r=[];const o=this.wrapperDecorations();if(r.push(o),this.editable){const u=this.mergedEditConfig.triggerType;if(u==="icon"||u==="both"){const _=this.$slots.editIcon?this.$slots.editIcon():t.h(E,{type:"md-create"}),g=t.h("div",{class:"ivu-typography-edit",onClick:this.handleEdit},_);if(this.mergedEditConfig.tooltip){const f=t.h(_a,{content:this.mergedEditConfig.tooltip,placement:"top"},()=>g);r.push(f)}else r.push(g)}}if(this.copyable){const u=this.$slots.copyIcon?this.$slots.copyIcon({copied:this.copied}):t.h(E,{type:this.copied?"md-checkmark":"md-copy"}),_=t.h("div",{class:["ivu-typography-copy",{"ivu-typography-copy-success":this.copied}],onClick:this.handleCopy},u);if(this.mergedCopyConfig.tooltips instanceof Array&&this.mergedCopyConfig.tooltips.length===2){const g=t.h(_a,{content:this.copied?this.mergedCopyConfig.tooltips[1]:this.mergedCopyConfig.tooltips[0],placement:"top"},()=>_);r.push(g)}else r.push(_)}if(this.editing){const u=t.h(hs,{ref:"edit",modelValue:this.editContent,type:"textarea",autosize:this.mergedEditConfig.autosize,maxlength:this.mergedEditConfig.maxlength,"onOn-blur":this.handleEditBlur,"onOn-keydown":this.handleEditKeydown,"onOn-keyup":this.handleEditKeyup,"onOn-change":this.handleEditChange}),_=this.$slots.enterIcon?this.$slots.enterIcon():t.h(E,{type:"md-return-left"}),g=t.h("span",{class:"ivu-typography-edit-content-confirm"},_);return t.h("div",{class:["ivu-typography","ivu-typography-edit-content",{[`ivu-typography-h${this.level}`]:this.level,"ivu-typography-div":!this.level}]},[u,g])}else{const u={};this.ellipsis&&!this.ellipsisExpanded&&(u["-webkit-line-clamp"]=this.mergedEllipsisConfig.rows);const g=t.h(this.component,{ref:"typography",class:this.classes,...this.linkProps,style:u,onClick:this.handleClickContent},[r,null]);return this.ellipsis&&!this.ellipsisExpanded&&this.isEllipsis&&this.mergedEllipsisConfig.tooltip?t.h(_a,{content:this.mergedEllipsisConfig.tooltip===!0?this.handleGetContent():this.mergedEllipsisConfig.tooltip,placement:this.placement,transfer:this.transfer,theme:this.theme,maxWidth:this.maxWidth},()=>g):g}},beforeUnmount(){this.handleRemoveObserver()}},S2={name:"Link",mixins:[Kh],render(){return t.h(_m,{...this.$props,component:"a",...this.commonEvents()},this.commonSlots())}};function E2(){return He(),xe}let M2=E2();qr.newInstance=r=>{if(!s)return;const o=r||{};let u=null;const _=t.createApp({data(){return Object.assign({},o,{})},render(){let k="";return this.render?k=t.h(qr,{fix:!0,fullscreen:!0,ref:"spin"},[this.render(t.h)]):k=t.h(qr,{size:"large",fix:!0,fullscreen:!0,ref:"spin"}),t.h("div",{class:"ivu-spin-fullscreen ivu-spin-fullscreen-wrapper",style:{"z-index":2010+M2}},[k])},created(){u=t.getCurrentInstance()}}),g=document.createElement("div");document.body.appendChild(g),_.mount(g);const f=u.refs.spin;return{show(){t.nextTick(()=>{u.refs.spin.visible=!0,M2=E2()})},remove(k){f.visible=!1,setTimeout(function(){_.unmount(),document.body.removeChild(g),k()},500)},component:f}};let qh;function T2(r=void 0){return qh=qh||qr.newInstance({render:r}),qh}function s9(r){const o="render"in r?r.render:void 0;T2(o).show(r)}qr.show=function(r={}){return s9(r)},qr.hide=function(){if(!qh)return!1;T2().remove(()=>{qh=null})};const Xh="ivu-list",a9={name:"List",provide(){return{ListInstance:this}},components:{Spin:qr},props:{border:{type:Boolean,default:!1},itemLayout:{validator(r){return w(r,["horizontal","vertical"])},default:"horizontal"},header:{type:String,default:""},footer:{type:String,default:""},loading:{type:Boolean,default:!1},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},split:{type:Boolean,default:!0}},data(){return{}},computed:{classes(){return[`${Xh}`,`${Xh}-${this.size}`,`${Xh}-${this.itemLayout}`,{[`${Xh}-bordered`]:this.border,[`${Xh}-split`]:this.split}]}},methods:{}},o9={key:0,class:"ivu-list-header"},l9={class:"ivu-list-container"},c9={class:"ivu-list-items"},u9={key:2,class:"ivu-list-footer"};function h9(r,o,u,_,g,f){const k=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[u.header||r.$slots.header?(t.openBlock(),t.createElementBlock("div",o9,[t.renderSlot(r.$slots,"header",{},()=>[t.createTextVNode(t.toDisplayString(u.header),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",l9,[t.createElementVNode("ul",c9,[t.renderSlot(r.$slots,"default")])]),u.loading?(t.openBlock(),t.createBlock(k,{key:1,fix:"",size:"large"},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"spin")]),_:3})):t.createCommentVNode("",!0),u.footer||r.$slots.footer?(t.openBlock(),t.createElementBlock("div",u9,[t.renderSlot(r.$slots,"footer",{},()=>[t.createTextVNode(t.toDisplayString(u.footer),1)])])):t.createCommentVNode("",!0)],2)}var k2=c(a9,[["render",h9]]);const d9={name:"ListItem",inject:["ListInstance"],props:{},computed:{itemLayout(){return this.ListInstance.itemLayout},isItemContainsTextNode(){let r;return this.$slots.default().forEach(o=>{typeof o=="string"&&(r=!0)}),r},isFlexMode(){const r=this.$slots.extra;return this.itemLayout==="vertical"?!!r:!this.isItemContainsTextNode},classes(){return[{"ivu-list-item-no-flex":!this.isFlexMode}]}}},f9={class:"ivu-list-item-main"},p9={key:0,class:"ivu-list-item-action"},m9={class:"ivu-list-item-extra"},g9={key:0,class:"ivu-list-item-action"},v9={class:"ivu-list-item-extra"};function y9(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(["ivu-list-item",f.classes])},[f.itemLayout==="vertical"&&r.$slots.extra?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createElementVNode("div",f9,[t.renderSlot(r.$slots,"default"),r.$slots.action?(t.openBlock(),t.createElementBlock("ul",p9,[t.renderSlot(r.$slots,"action")])):t.createCommentVNode("",!0)]),t.createElementVNode("div",m9,[t.renderSlot(r.$slots,"extra")])],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.renderSlot(r.$slots,"default"),r.$slots.action?(t.openBlock(),t.createElementBlock("ul",g9,[t.renderSlot(r.$slots,"action")])):t.createCommentVNode("",!0),t.createElementVNode("div",v9,[t.renderSlot(r.$slots,"extra")])],64))],2)}var A2=c(d9,[["render",y9]]);const b9={name:"ListItemMeta",components:{Avatar:Th},props:{avatar:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""}}},_9={class:"ivu-list-item-meta"},x9={key:0,class:"ivu-list-item-meta-avatar"},w9={class:"ivu-list-item-meta-content"},C9={key:0,class:"ivu-list-item-meta-title"},S9={key:1,class:"ivu-list-item-meta-description"};function E9(r,o,u,_,g,f){const k=t.resolveComponent("Avatar");return t.openBlock(),t.createElementBlock("div",_9,[u.avatar||r.$slots.avatar?(t.openBlock(),t.createElementBlock("div",x9,[t.renderSlot(r.$slots,"avatar",{},()=>[t.createVNode(k,{src:u.avatar},null,8,["src"])])])):t.createCommentVNode("",!0),t.createElementVNode("div",w9,[u.title||r.$slots.title?(t.openBlock(),t.createElementBlock("div",C9,[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])])):t.createCommentVNode("",!0),u.description||r.$slots.description?(t.openBlock(),t.createElementBlock("div",S9,[t.renderSlot(r.$slots,"description",{},()=>[t.createTextVNode(t.toDisplayString(u.description),1)])])):t.createCommentVNode("",!0)])])}var P2=c(b9,[["render",E9]]);const xm="ivu-loading-bar",M9={name:"LoadingBar",props:{color:{type:String,default:"primary"},failedColor:{type:String,default:"error"},height:{type:Number,default:2}},data(){return{percent:0,status:"success",show:!1}},computed:{classes(){return`${xm}`},innerClasses(){return[`${xm}-inner`,{[`${xm}-inner-color-primary`]:this.color==="primary"&&this.status==="success",[`${xm}-inner-failed-color-error`]:this.failedColor==="error"&&this.status==="error"}]},outerStyles(){return{height:`${this.height}px`}},styles(){let r={width:`${this.percent}%`,height:`${this.height}px`};return this.color!=="primary"&&this.status==="success"&&(r.backgroundColor=this.color),this.failedColor!=="error"&&this.status==="error"&&(r.backgroundColor=this.failedColor),r}}};function T9(r,o,u,_,g,f){return t.openBlock(),t.createBlock(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.outerStyles)},[t.createElementVNode("div",{class:t.normalizeClass(f.innerClasses),style:t.normalizeStyle(f.styles)},null,6)],6),[[t.vShow,g.show]])]),_:1})}var Ly=c(M9,[["render",T9]]);Ly.newInstance=r=>{if(!s)return;const o=r||{};let u=null;const _=t.createApp({data(){return o},render(){return t.h(Ly,Object.assign({ref:"loadingBar"},o))},created(){u=t.getCurrentInstance()}}),g=document.createElement("div");document.body.appendChild(g),_.mount(g);const f=u.refs.loadingBar;return{update(k){"percent"in k&&(f.percent=k.percent),k.status&&(f.status=k.status),"show"in k&&(f.show=k.show)},component:f,destroy(){_.unmount(),document.body.removeChild(g)}}};let wm,I2="primary",N2=800,R2="error",D2=2,Yh;function L2(){return wm=wm||Ly.newInstance({color:I2,failedColor:R2,height:D2}),wm}function Tl(r){L2().update(r)}function B2(){setTimeout(()=>{Tl({show:!1}),setTimeout(()=>{Tl({percent:0})},200)},N2)}function Jh(){Yh&&(clearInterval(Yh),Yh=null)}var By={start(){if(Yh)return;let r=0;Tl({percent:r,status:"success",show:!0}),Yh=setInterval(()=>{r+=Math.floor(Math.random()*3+1),r>95&&Jh(),Tl({percent:r,status:"success",show:!0})},200)},update(r){Jh(),Tl({percent:r,status:"success",show:!0})},finish(){Jh(),Tl({percent:100,status:"success",show:!0}),B2()},error(){Jh(),Tl({percent:100,status:"error",show:!0}),B2()},config(r){r.color&&(I2=r.color),r.duration&&(N2=r.duration),r.failedColor&&(R2=r.failedColor),r.height&&(D2=r.height)},destroy(){Jh();let r=L2();wm=null,r.destroy()}};const k9={name:"Login",components:{Form:pm},emits:["on-submit"],provide(){return{LoginInstance:this}},props:{},data(){return{formValidate:{}}},methods:{handleSubmit(){this.$refs.form.validate(r=>{this.$emit("on-submit",r,JSON.parse(JSON.stringify(this.formValidate)))})},handleValidate(r,o){let u=!0;r.forEach(_=>{this.$refs.form.validateField(_,g=>{g&&(u=!1)})}),o(u)}}},A9={class:"ivu-login"};function P9(r,o,u,_,g,f){const k=t.resolveComponent("Form");return t.openBlock(),t.createElementBlock("div",A9,[t.createVNode(k,{ref:"form",model:g.formValidate,onSubmit:o[0]||(o[0]=t.withModifiers(()=>{},["prevent"]))},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),_:3},8,["model"])])}var O2=c(k9,[["render",P9]]);const Oy="ivu-menu",I9={name:"Menu",emits:["on-select","on-open-change"],provide(){return{MenuInstance:this}},props:{mode:{validator(r){return w(r,["horizontal","vertical"])},default:"vertical"},theme:{validator(r){return w(r,["light","dark","primary"])},default:"light"},activeName:{type:[String,Number]},openNames:{type:Array,default(){return[]}},accordion:{type:Boolean,default:!1},width:{type:String,default:"240px"}},data(){return{currentActiveName:this.activeName,openedNames:[],submenuList:[],menuItemList:[],ready:!1}},computed:{classes(){let r=this.theme;return this.mode==="vertical"&&this.theme==="primary"&&(r="light"),[`${Oy}`,`${Oy}-${r}`,{[`${Oy}-${this.mode}`]:this.mode}]},styles(){let r={};return this.mode==="vertical"&&(r.width=this.width),r}},methods:{updateActiveName(){this.currentActiveName===void 0&&(this.currentActiveName=-1),this.submenuList.map(r=>r.submenu).forEach(r=>{r.handleUpdateActiveName(!1)}),this.menuItemList.map(r=>r.menuitem).forEach(r=>{r.handleUpdateActiveName(this.currentActiveName)})},updateOpenKeys(r){const o=[...this.openedNames].indexOf(r),u=this.submenuList.map(g=>g.submenu);if(this.accordion&&u.forEach(g=>{g.opened=!1}),o>=0){let g=null;u.forEach(f=>{f.name===r&&(g=f,f.opened=!1)}),F(g,"Submenu").forEach(f=>{f.opened=!0}),g.childSubmenuList.map(f=>f.submenu).forEach(f=>{f.opened=!1})}else if(this.accordion){let g=null;u.forEach(f=>{f.name===r&&(g=f,f.opened=!0)}),F(g,"Submenu").forEach(f=>{f.opened=!0})}else this.submenuList.map(g=>g.submenu).forEach(g=>{g.name===r&&(g.opened=!0)});let _=u.filter(g=>g.opened).map(g=>g.name);this.openedNames=[..._],this.$emit("on-open-change",_)},updateOpened(){const r=(this.submenuList||[]).map(o=>o.submenu);r.length&&r.forEach(o=>{this.openedNames.indexOf(o.name)>-1?o.opened=!0:o.opened=!1})},handleEmitSelectEvent(r){this.$emit("on-select",r)},handleMenuItemSelect(r){this.currentActiveName=r,this.$emit("on-select",r)}},mounted(){this.openedNames=[...this.openNames],this.updateOpened(),t.nextTick(()=>{this.updateActiveName(),this.ready=!0})},watch:{openNames(r){this.openedNames=r},activeName(r){this.currentActiveName=r},currentActiveName(){this.updateActiveName()}}};function N9(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.styles)},[t.renderSlot(r.$slots,"default")],6)}var Vy=c(I9,[["render",N9]]),Fy={inject:{MenuInstance:{default:null},SubmenuInstance:{default:null}},data(){return{menu:this.MenuInstance}},computed:{hasParentSubmenu(){return!!this.SubmenuInstance},parentSubmenuNum(){return F(this,"Submenu").length},mode(){return this.MenuInstance.mode}}};const R9="ivu-menu",D9={name:"MenuGroup",mixins:[Fy],props:{title:{type:String,default:""}},data(){return{prefixCls:R9}},computed:{groupStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*28+"px"}:{}}}};function L9(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([g.prefixCls+"-item-group"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-item-group-title"]),style:t.normalizeStyle(f.groupStyle)},t.toDisplayString(u.title),7),t.createElementVNode("ul",null,[t.renderSlot(r.$slots,"default")])],2)}var V2=c(D9,[["render",L9]]);const Cm="ivu-menu",B9={name:"MenuItem",mixins:[Fy,fe],props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{active:!1,id:te(6)}},computed:{classes(){return[`${Cm}-item`,{[`${Cm}-item-active`]:this.active,[`${Cm}-item-selected`]:this.active,[`${Cm}-item-disabled`]:this.disabled}]},itemStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}}},methods:{handleClickItem(r,o=!1){if(!this.disabled)if(o||this.target==="_blank"){this.handleCheckClick(r,o);let u=B(this,"Menu");u&&u.handleEmitSelectEvent(this.name)}else B(this,"Submenu")?this.SubmenuInstance.handleMenuItemSelect(this.name):this.MenuInstance.handleMenuItemSelect(this.name),this.handleCheckClick(r,o)},handleUpdateActiveName(r){this.name===r?(this.active=!0,this.SubmenuInstance&&this.SubmenuInstance.handleUpdateActiveName(r)):this.active=!1},addMenuItem(){const r=this.MenuInstance;r.menuItemList||(r.menuItemList=[]),r.menuItemList.push({id:this.id,menuitem:this})},removeMenuItem(){const r=this.MenuInstance;if(r.menuItemList&&r.menuItemList.length){const o=r.menuItemList.findIndex(u=>u.id===this.id);r.menuItemList.splice(o,1)}}},mounted(){this.addMenuItem()},beforeUnmount(){this.removeMenuItem()}},O9=["href","target"];function V9(r,o,u,_,g,f){return r.to?(t.openBlock(),t.createElementBlock("a",{key:0,href:r.linkUrl,target:r.target,class:t.normalizeClass(f.classes),onClick:[o[0]||(o[0]=t.withModifiers(k=>f.handleClickItem(k,!1),["exact"])),o[1]||(o[1]=t.withModifiers(k=>f.handleClickItem(k,!0),["ctrl"])),o[2]||(o[2]=t.withModifiers(k=>f.handleClickItem(k,!0),["meta"]))],style:t.normalizeStyle(f.itemStyle)},[t.renderSlot(r.$slots,"default")],14,O9)):(t.openBlock(),t.createElementBlock("li",{key:1,class:t.normalizeClass(f.classes),onClick:o[3]||(o[3]=t.withModifiers((...k)=>f.handleClickItem&&f.handleClickItem(...k),["stop"])),style:t.normalizeStyle(f.itemStyle)},[t.renderSlot(r.$slots,"default")],6))}var F2=c(B9,[["render",V9]]);const U2={name:"Mobile",mixins:[Rh],data(){return{className:"ivu-login-mobile",prefix:"ios-phone-portrait",placeholder:"",type:"text"}},props:{rules:{type:[Object,Array],default(){return[{required:!0,message:ly.Mobile,trigger:"change"},{pattern:/^1\d{10}$/,message:"",trigger:"change"}]}}}},Cr="ivu-modal",z2={x:null,y:null,dragX:null,dragY:null,dragging:!1,rect:null},F9={inheritAttrs:!1,name:"Modal",mixins:[Pn,Ty],components:{Icon:E,iButton:ar},emits:["on-cancel","on-ok","on-hidden","on-visible-change","update:modelValue"],provide(){return{ModalInstance:this}},props:{modelValue:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maskClosable:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.modal.maskClosable===""?!0:r.$VIEWUI.modal.maskClosable}},title:{type:String},width:{type:[Number,String],default:520},okText:{type:String},cancelText:{type:String},loading:{type:Boolean,default:!1},styles:{type:Object,default(){return{}}},className:{type:String},footerHide:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},transitionNames:{type:Array,default(){return["ease","fade"]}},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!0:r.$VIEWUI.transfer}},fullscreen:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},stickyDistance:{type:Number,default:10},resetDragPosition:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},beforeClose:Function,render:Function},data(){return{prefixCls:Cr,wrapShow:!1,showHead:!0,buttonLoading:!1,visible:this.modelValue,dragData:V(z2),modalIndex:this.handleGetModalIndex(),isMouseTriggerIn:!1,id:te(6),tableList:[],sliderList:[]}},computed:{wrapClasses(){return[`${Cr}-wrap`,{[`${Cr}-hidden`]:!this.wrapShow,[`${this.className}`]:!!this.className,[`${Cr}-no-mask`]:!this.showMask}]},wrapStyles(){return{zIndex:this.modalIndex+this.zIndex}},maskClasses(){return`${Cr}-mask`},classes(){return[`${Cr}`,{[`${Cr}-fullscreen`]:this.fullscreen,[`${Cr}-fullscreen-no-header`]:this.fullscreen&&!this.showHead,[`${Cr}-fullscreen-no-footer`]:this.fullscreen&&this.footerHide}]},contentClasses(){return[`${Cr}-content`,{[`${Cr}-content-no-mask`]:!this.showMask,[`${Cr}-content-drag`]:this.draggable&&!this.fullscreen,[`${Cr}-content-dragging`]:this.draggable&&this.dragData.dragging}]},mainStyles(){let r={};const o=parseInt(this.width),u=this.dragData.x!==null?{top:0}:{width:o<=100?`${o}%`:`${o}px`},_=this.styles?this.styles:{};return Object.assign(r,u,_),r},contentStyles(){let r={};if(this.draggable&&!this.fullscreen){const o=this.styles.top?parseFloat(this.styles.top):0,u=this.styles.left?parseFloat(this.styles.left):0;this.dragData.x!==null&&(r.left=`${this.dragData.x-u}px`),this.dragData.y!==null&&(r.top=`${this.dragData.y}px`),this.dragData.y!==null&&(r.top=`${this.dragData.y-o}px`);const _=parseInt(this.width),g={width:_<=100?`${_}%`:`${_}px`};Object.assign(r,g)}return r},localeOkText(){return this.okText===void 0?this.t("i.modal.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.modal.cancelText"):this.cancelText},showMask(){return this.mask}},methods:{close(){if(!this.beforeClose)return this.handleClose();const r=this.beforeClose();r&&r.then?r.then(()=>{this.handleClose()}):this.handleClose()},handleClose(){this.visible=!1,this.$emit("update:modelValue",!1),this.$emit("on-cancel")},handleMask(){this.maskClosable&&this.showMask&&this.close()},handleWrapClick(r){if(this.isMouseTriggerIn){this.isMouseTriggerIn=!1;return}const o=r.target.getAttribute("class");o&&o.indexOf(`${Cr}-wrap`)>-1&&this.handleMask()},handleMousedown(){this.isMouseTriggerIn=!0},cancel(){this.close()},ok(){this.loading?this.buttonLoading=!0:(this.visible=!1,this.$emit("update:modelValue",!1)),this.$emit("on-ok")},EscClose(r){if(this.visible&&this.closable&&r.keyCode===27){const o=this.$root.modalList.map(u=>u.modal).filter(u=>u.$data.visible&&u.$props.closable).sort((u,_)=>u.$data.modalIndex<_.$data.modalIndex?1:-1)[0];setTimeout(()=>{o.close()},0)}},animationFinish(){this.$emit("on-hidden")},handleMoveStart(r){if(!this.draggable||this.fullscreen)return!1;const o=this.$refs.content.getBoundingClientRect();this.dragData.rect=o,this.dragData.x=o.x||o.left,this.dragData.y=o.y||o.top;const u={x:r.clientX,y:r.clientY};this.dragData.dragX=u.x,this.dragData.dragY=u.y,this.dragData.dragging=!0,a(window,"mousemove",this.handleMoveMove),a(window,"mouseup",this.handleMoveEnd)},handleMoveMove(r){if(!this.dragData.dragging||this.fullscreen)return!1;const o={x:r.clientX,y:r.clientY},u={x:o.x-this.dragData.dragX,y:o.y-this.dragData.dragY};if(s&&this.sticky){const _=document.documentElement.clientWidth,g=document.documentElement.clientHeight;this.dragData.x+u.x<=this.stickyDistance&&u.x<0?this.dragData.x=0:this.dragData.x+this.dragData.rect.width-_>-this.stickyDistance&&u.x>0?this.dragData.x=_-this.dragData.rect.width:this.dragData.x+=u.x,this.dragData.y+u.y<=this.stickyDistance&&u.y<0?this.dragData.y=0:this.dragData.y+this.dragData.rect.height-g>-this.stickyDistance&&u.y>0?this.dragData.y=g-this.dragData.rect.height:this.dragData.y+=u.y}else this.dragData.x+=u.x,this.dragData.y+=u.y;this.dragData.dragX=o.x,this.dragData.dragY=o.y},handleMoveEnd(){this.dragData.dragging=!1,l(window,"mousemove",this.handleMoveMove),l(window,"mouseup",this.handleMoveEnd)},handleGetModalIndex(){return He(),xe},handleClickModal(){if(this.draggable){if(Te!==this.lastVisibleIndex){this.lastVisibleIndex=Te;return}this.modalIndex=this.handleGetModalIndex()}},addModal(){const r=this.$root;r.modalList||(r.modalList=[]),r.modalList.push({id:this.id,modal:this})},removeModal(){const r=this.$root;if(!r.modalList)return;const o=r.modalList.findIndex(u=>u.id===this.id);r.modalList.splice(o,1)}},watch:{modelValue(r){this.visible=r},visible(r){r===!1?(this.buttonLoading=!1,this.timer=setTimeout(()=>{this.wrapShow=!1,this.removeScrollEffect()},300)):(this.lastVisible!==r&&(this.modalIndex=this.handleGetModalIndex(),Be()),this.timer&&clearTimeout(this.timer),this.wrapShow=!0,this.scrollable||this.addScrollEffect()),this.tableList.forEach(o=>{o.table.handleOnVisibleChange(r)}),this.sliderList.forEach(o=>{o.slider.handleOnVisibleChange(r)}),this.$emit("on-visible-change",r),this.lastVisible=r,this.lastVisibleIndex=Te,r&&this.resetDragPosition&&(this.dragData=V(z2))},loading(r){r||(this.buttonLoading=!1)},scrollable(r){r?this.removeScrollEffect():this.addScrollEffect()},title(r){this.$slots.header===void 0&&(this.showHead=!!r)}},mounted(){this.visible&&(this.wrapShow=!0);let r=!0;this.$slots.header===void 0&&!this.title&&(r=!1),this.showHead=r,this.addModal(),s&&document.addEventListener("keydown",this.EscClose)},beforeUnmount(){this.removeModal(),s&&document.removeEventListener("keydown",this.EscClose),this.removeScrollEffect()}};function U9(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("i-button");return t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!u.transfer},[t.createVNode(t.Transition,{name:u.transitionNames[1]},{default:t.withCtx(()=>[f.showMask?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.maskClasses),style:t.normalizeStyle(f.wrapStyles),onClick:o[0]||(o[0]=(...G)=>f.handleMask&&f.handleMask(...G))},null,6)),[[t.vShow,g.visible]]):t.createCommentVNode("",!0)]),_:1},8,["name"]),t.createElementVNode("div",{class:t.normalizeClass(f.wrapClasses),style:t.normalizeStyle(f.wrapStyles),onClick:o[5]||(o[5]=(...G)=>f.handleWrapClick&&f.handleWrapClick(...G))},[t.createVNode(t.Transition,{name:u.transitionNames[0],onAfterLeave:f.animationFinish},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",t.mergeProps(r.$attrs,{class:f.classes,style:f.mainStyles,onMousedown:o[4]||(o[4]=(...G)=>f.handleMousedown&&f.handleMousedown(...G))}),[t.createElementVNode("div",{class:t.normalizeClass(f.contentClasses),ref:"content",style:t.normalizeStyle(f.contentStyles),onClick:o[3]||(o[3]=(...G)=>f.handleClickModal&&f.handleClickModal(...G))},[u.closable?(t.openBlock(),t.createElementBlock("a",{key:0,class:t.normalizeClass([g.prefixCls+"-close"]),onClick:o[1]||(o[1]=(...G)=>f.close&&f.close(...G))},[t.renderSlot(r.$slots,"close",{},()=>[t.createVNode(k,{type:"ios-close"})])],2)):t.createCommentVNode("",!0),g.showHead?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([g.prefixCls+"-header"]),onMousedown:o[2]||(o[2]=(...G)=>f.handleMoveStart&&f.handleMoveStart(...G))},[t.renderSlot(r.$slots,"header",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-header-inner"])},t.toDisplayString(u.title),3)])],34)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"])},[t.renderSlot(r.$slots,"default")],2),u.footerHide?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass([g.prefixCls+"-footer"])},[t.renderSlot(r.$slots,"footer",{},()=>[t.createVNode(O,{type:"text",onClick:f.cancel},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(f.localeCancelText),1)]),_:1},8,["onClick"]),t.createVNode(O,{type:"primary",loading:g.buttonLoading,onClick:f.ok},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(f.localeOkText),1)]),_:1},8,["loading","onClick"])])],2))],6)],16),[[t.vShow,g.visible]])]),_:3},8,["name","onAfterLeave"])],6)],8,["disabled"])}var fs=c(F9,[["render",U9]]);const Sa="ivu-modal-confirm";fs.newInstance=r=>{if(!s)return;const o=r||{},u=document.createElement("div");document.body.appendChild(u);let _=null;const g=t.createApp({mixins:[Pn],data(){return Object.assign({},o,{visible:!1,width:416,title:"",body:"",iconType:"",iconName:"",okText:void 0,cancelText:void 0,showCancel:!1,loading:!1,buttonLoading:!1,scrollable:!1,closable:!1,closing:!1})},render(){let k=[];this.showCancel&&k.push(t.h(ar,{type:"text",onClick:this.cancel},()=>this.localeCancelText)),k.push(t.h(ar,{type:"primary",loading:this.buttonLoading,onClick:this.ok},()=>this.localeOkText));let O;this.render?O=t.h("div",{class:`${Sa}-body ${Sa}-body-render`},[this.render(t.h)]):O=t.h("div",{class:`${Sa}-body`},[t.h("div",{innerHTML:this.body})]);let G;return this.title&&(G=t.h("div",{class:`${Sa}-head`},[t.h("div",{class:this.iconTypeCls},[t.h("i",{class:this.iconNameCls})]),t.h("div",{class:`${Sa}-head-title`,innerHTML:this.title})])),t.h(fs,Object.assign({},o,{width:this.width,scrollable:this.scrollable,closable:this.closable,ref:"modal"},{modelValue:this.visible,"onUpdate:modelValue":z=>this.visible=z,"onOn-cancel":this.cancel}),()=>t.h("div",{class:Sa},[G,O,t.h("div",{class:`${Sa}-footer`},k)]))},computed:{iconTypeCls(){return[`${Sa}-head-icon`,`${Sa}-head-icon-${this.iconType}`]},iconNameCls(){return["ivu-icon",`ivu-icon-${this.iconName}`]},localeOkText(){return this.okText?this.okText:this.t("i.modal.okText")},localeCancelText(){return this.cancelText?this.cancelText:this.t("i.modal.cancelText")}},methods:{cancel(){this.closing||(this.$refs.modal.visible=!1,this.buttonLoading=!1,this.onCancel(),this.remove())},ok(){this.closing||(this.loading?this.buttonLoading=!0:(this.$refs.modal.visible=!1,this.remove()),this.onOk())},remove(){this.closing=!0,setTimeout(()=>{this.closing=!1,this.destroy()},300)},destroy(){g.unmount(),document.body.removeChild(u),this.onRemove()},onOk(){},onCancel(){},onRemove(){}},created(){_=t.getCurrentInstance()}});g.mount(u);const f=_.refs.modal;return{show(k){switch(f.$parent.showCancel=k.showCancel,f.$parent.iconType=k.icon,k.icon){case"info":f.$parent.iconName="ios-information-circle";break;case"success":f.$parent.iconName="ios-checkmark-circle";break;case"warning":f.$parent.iconName="ios-alert";break;case"error":f.$parent.iconName="ios-close-circle";break;case"confirm":f.$parent.iconName="ios-help-circle";break}"width"in k&&(f.$parent.width=k.width),"closable"in k&&(f.$parent.closable=k.closable),"title"in k&&(f.$parent.title=k.title),"content"in k&&(f.$parent.body=k.content),"okText"in k&&(f.$parent.okText=k.okText),"cancelText"in k&&(f.$parent.cancelText=k.cancelText),"onCancel"in k&&(f.$parent.onCancel=k.onCancel),"onOk"in k&&(f.$parent.onOk=k.onOk),"loading"in k&&(f.$parent.loading=k.loading),"scrollable"in k&&(f.$parent.scrollable=k.scrollable),f.$parent.onRemove=k.onRemove,f.visible=!0},remove(){f.visible=!1,f.$parent.buttonLoading=!1,f.$parent.remove()},component:f}};let Zh;function $2(r=void 0,o=!0){return Zh=Zh||fs.newInstance({closable:!1,maskClosable:!1,footerHide:!0,render:r,lockScroll:o}),Zh}function Qh(r){const o="render"in r?r.render:void 0,u="lockScroll"in r?r.lockScroll:!0;let _=$2(o,u);r.onRemove=function(){Zh=null},_.show(r)}fs.info=function(r={}){return r.icon="info",r.showCancel=!1,Qh(r)},fs.success=function(r={}){return r.icon="success",r.showCancel=!1,Qh(r)},fs.warning=function(r={}){return r.icon="warning",r.showCancel=!1,Qh(r)},fs.error=function(r={}){return r.icon="error",r.showCancel=!1,Qh(r)},fs.confirm=function(r={}){return r.icon="confirm",r.showCancel=!0,Qh(r)},fs.remove=function(){if(!Zh)return!1;$2().remove()};const Xr="ivu-notice",H2="ivu-icon",z9="ivu_notice_key_";let G2=24,W2=4.5,Wc,j2=1;const $9={info:"ios-information-circle",success:"ios-checkmark-circle",warning:"ios-alert",error:"ios-close-circle"},K2="move-notice";function q2(){return Wc=Wc||tm.newInstance({prefixCls:Xr,styles:{top:`${G2}px`,right:0},transitionName:K2}),Wc}function ed(r,o){const u=o.title||"",_=o.desc||"",g=o.name||`${z9}${j2}`,f=o.onClose||function(){},k=o.render,O=o.duration===0?0:o.duration||W2;j2++;let G=q2(),z,j;const ae=o.render&&!u?"":_||o.render?` ${Xr}-with-desc`:"";if(r==="normal")j=!1,z=`
            <div class="${Xr}-custom-content ${Xr}-with-normal ${ae}">
                <div class="${Xr}-title">${u}</div>
                <div class="${Xr}-desc">${_}</div>
            </div>
        `;else{const _e=$9[r],ye=ae===""?"":"-outline";j=!0,z=`
            <div class="${Xr}-custom-content ${Xr}-with-icon ${Xr}-with-${r} ${ae}">
                <span class="${Xr}-icon ${Xr}-icon-${r}">
                    <i class="${H2} ${H2}-${_e}${ye}"></i>
                </span>
                <div class="${Xr}-title">${u}</div>
                <div class="${Xr}-desc">${_}</div>
            </div>
        `}G.notice({name:g.toString(),duration:O,styles:{},transitionName:K2,content:z,withIcon:j,render:k,hasTitle:!!u,onClose:f,closable:!0,type:"notice"})}var Uy={open(r){return ed("normal",r)},info(r){return ed("info",r)},success(r){return ed("success",r)},warning(r){return ed("warning",r)},error(r){return ed("error",r)},config(r){r.top&&(G2=r.top),(r.duration||r.duration===0)&&(W2=r.duration)},close(r){if(r)r=r.toString(),Wc&&Wc.remove(r);else return!1},destroy(){let r=q2();Wc=null,r.destroy("ivu-notice")}};const Di="ivu-tabs",zy=300,X2=(r,o,u,_)=>{const g=(r.findIndex(k=>k.name===o)+u+r.length)%r.length,f=r[g];return f.disabled?X2(r,f.name,u):f},Y2=(r,o)=>{try{r.focus()}catch{}if(s&&document.activeElement==r&&r!==o)return!0;const u=r.children;for(let _ of u)if(Y2(_,o))return!0;return!1},H9={name:"Tabs",mixins:[Ms],emits:["on-click","on-dblclick","on-contextmenu","on-tab-remove","on-drag-drop","update:modelValue"],components:{Icon:E,Render:cS,Dropdown:Cl,DropdownMenu:Sl},provide(){return{TabsInstance:this}},props:{modelValue:{type:[String,Number]},type:{validator(r){return w(r,["line","card"])},default:"line"},size:{validator(r){return w(r,["small","default"])},default:"default"},animated:{type:Boolean,default:!0},captureFocus:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},beforeRemove:Function,name:{type:String},draggable:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:Di,navList:[],barWidth:0,barOffset:0,activeKey:this.modelValue,focusedKey:this.modelValue,showSlot:!1,navStyle:{transform:""},scrollable:!1,transitioning:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},paneList:[],tableList:[]}},computed:{classes(){return[`${Di}`,{[`${Di}-card`]:this.type==="card",[`${Di}-mini`]:this.size==="small"&&this.type==="line",[`${Di}-no-animation`]:!this.animated}]},contentClasses(){return[`${Di}-content`,{[`${Di}-content-animated`]:this.animated}]},barClasses(){return[`${Di}-ink-bar`,{[`${Di}-ink-bar-animated`]:this.animated}]},contentStyle(){const r=this.getTabIndex(this.activeKey),o=r===0?"0%":`-${r}00%`;let u={};return r>-1&&(u={transform:`translateX(${o}) translateZ(0px)`}),u},barStyle(){let r={visibility:"hidden",width:`${this.barWidth}px`};return this.type==="line"&&(r.visibility="visible"),this.animated?r.transform=`translate3d(${this.barOffset}px, 0px, 0px)`:r.left=`${this.barOffset}px`,r},arrowType(){const r=this.globalConfig;let o="ios-close";return r&&(r.tabs.customCloseIcon?o="":r.tabs.closeIcon&&(o=r.tabs.closeIcon)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.tabs.customCloseIcon&&(o=r.tabs.customCloseIcon),o},arrowSize(){const r=this.globalConfig;let o="";return r&&r.tabs.closeIconSize&&(o=r.tabs.closeIconSize),o}},methods:{getTabs(){const r=this.paneList.map(u=>u.pane),o=[];return r.forEach(u=>{u.tab&&this.name?u.tab===this.name&&o.push(u):o.push(u)}),o.sort((u,_)=>{if(u.index&&_.index)return u.index>_.index?1:-1}),o},updateNav(){this.navList=[],this.getTabs().forEach((r,o)=>{this.navList.push({labelType:typeof r.label,label:r.label,icon:r.icon||"",name:r.currentName||o,disabled:r.disabled,closable:r.closable,contextMenu:r.contextMenu}),r.currentName||(r.currentName=o),o===0&&(this.activeKey||(this.activeKey=r.currentName||o))}),this.updateStatus(),this.updateBar()},updateBar(){t.nextTick(()=>{const r=this.getTabIndex(this.activeKey);if(!this.$refs.nav)return;const o=this.$refs.nav.querySelectorAll(`.${Di}-tab`),u=o[r];if(this.barWidth=u?parseFloat(u.offsetWidth):0,r>0){let _=0;const g=this.size==="small"?0:16;for(let f=0;f<r;f++)_+=parseFloat(o[f].offsetWidth)+g;this.barOffset=_}else this.barOffset=0;this.updateNavScroll()})},updateStatus(){this.getTabs().forEach(r=>r.show=r.currentName===this.activeKey||this.animated)},tabCls(r){return[`${Di}-tab`,{[`${Di}-tab-disabled`]:r.disabled,[`${Di}-tab-active`]:r.name===this.activeKey,[`${Di}-tab-focused`]:r.name===this.focusedKey}]},handleChange(r){if(this.transitioning)return;this.transitioning=!0,setTimeout(()=>this.transitioning=!1,zy);const o=this.navList[r];!o||o.disabled||(this.activeKey=o.name,this.$emit("update:modelValue",o.name),this.$emit("on-click",o.name))},handleDblclick(r){const o=this.navList[r];!o||o.disabled||this.$emit("on-dblclick",o.name)},handleContextmenu(r,o){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const u=this.navList[r];if(!u||u.disabled||!u.contextMenu)return;o.preventDefault();const _=this.$refs.tabsWrap.getBoundingClientRect(),g={left:`${o.clientX-_.left}px`,top:`${o.clientY-_.top}px`};this.contextMenuStyles=g,this.contextMenuVisible=!0,this.$emit("on-contextmenu",u,o,g)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handlePreventSelect(r,o){const u=this.navList[r];!u||u.disabled||!u.contextMenu||o.preventDefault()},handleTabKeyNavigation(r){if(r.keyCode!==37&&r.keyCode!==39)return;const o=r.keyCode===39?1:-1,u=X2(this.navList,this.focusedKey,o);this.focusedKey=u.name},handleTabKeyboardSelect(r=!1){if(r)return;const o=this.focusedKey||0,u=this.getTabIndex(o);this.handleChange(u)},handleRemove(r){if(!this.beforeRemove)return this.handleRemoveTab(r);const o=this.beforeRemove(r);o&&o.then?o.then(()=>{this.handleRemoveTab(r)}):this.handleRemoveTab(r)},handleRemoveTab(r){const o=this.getTabs(),u=o[r];if(u.currentName===this.activeKey){const _=this.getTabs();let g=-1;if(_.length){const f=o.filter((O,G)=>!O.disabled&&G<r),k=o.filter((O,G)=>!O.disabled&&G>r);k.length?g=k[0].currentName:f.length?g=f[f.length-1].currentName:g=_[0].currentName}this.activeKey=g,this.$emit("update:modelValue",g)}this.$emit("on-tab-remove",u.currentName),this.updateNav()},showClose(r){return this.type==="card"?r.closable!==null?r.closable:this.closable:!1},scrollPrev(){const r=this.$refs.navScroll.offsetWidth,o=this.getCurrentScrollOffset();if(!o)return;let u=o>r?o-r:0;this.setOffset(u)},scrollNext(){const r=this.$refs.nav.offsetWidth,o=this.$refs.navScroll.offsetWidth,u=this.getCurrentScrollOffset();if(r-u<=o)return;let _=r-u>o*2?u+o:r-o;this.setOffset(_)},getCurrentScrollOffset(){const{navStyle:r}=this;return r.transform?Number(r.transform.match(/translateX\(-(\d+(\.\d+)*)px\)/)[1]):0},getTabIndex(r){return this.navList.findIndex(o=>o.name===r)},setOffset(r){this.navStyle.transform=`translateX(-${r}px)`},scrollToActiveTab(){if(!this.scrollable)return;const r=this.$refs.nav,o=this.$el.querySelector(`.${Di}-tab-active`);if(!o)return;const u=this.$refs.navScroll,_=o.getBoundingClientRect(),g=u.getBoundingClientRect(),f=r.getBoundingClientRect(),k=this.getCurrentScrollOffset();let O=k;f.right<g.right&&(O=r.offsetWidth-g.width),_.left<g.left?O=k-(g.left-_.left):_.right>g.right&&(O=k+_.right-g.right),k!==O&&this.setOffset(Math.max(O,0))},updateNavScroll(){const r=this.$refs.nav.offsetWidth,o=this.$refs.navScroll.offsetWidth,u=this.getCurrentScrollOffset();o<r?(this.scrollable=!0,r-u<o&&this.setOffset(r-o)):(this.scrollable=!1,u>0&&this.setOffset(0))},handleScroll(r){r.preventDefault(),r.stopPropagation();const o=r.type;let u=0;(o==="DOMMouseScroll"||o==="mousewheel")&&(u=r.wheelDelta?r.wheelDelta:-(r.detail||0)*40),u>0?this.scrollPrev():this.scrollNext()},handleResize(){this.updateNavScroll()},isInsideHiddenElement(){if(!s)return;let r=this.$el.parentNode;for(;r&&r!==document.body;){if(r.style&&r.style.display==="none")return r;r=r.parentNode}return!1},updateVisibility(r){[...this.$refs.panes.querySelectorAll(`.${Di}-tabpane`)].forEach((o,u)=>{r===u?([...o.children].filter(_=>_.classList.contains(`${Di}-tabpane`)).forEach(_=>_.style.visibility="visible"),this.captureFocus&&setTimeout(()=>Y2(o,o),zy)):setTimeout(()=>{[...o.children].filter(_=>_.classList.contains(`${Di}-tabpane`)).forEach(_=>_.style.visibility="hidden")},zy)})},handleDrag(r,o){const u=this.navList[r];u&&o.dataTransfer.setData("tab-name",u.name)},handleDrop(r,o){const u=this.navList[r];if(u){const _=o.dataTransfer.getData("tab-name");o.preventDefault();let g=this.navList.map(O=>O.name);const f=parseInt(g.findIndex(O=>O===_)),k=parseInt(g.findIndex(O=>O===u.name));g.splice(k,1,...g.splice(f,1,g[k])),this.$emit("on-drag-drop",_,u.name,f,k,g)}},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},watch:{modelValue(r){this.activeKey=r,this.focusedKey=r},activeKey(r){this.focusedKey=r,this.updateBar(),this.updateStatus(),this.tableList.forEach(u=>{u.table.handleOnVisibleChange(!0)}),t.nextTick(()=>{this.scrollToActiveTab()});const o=Math.max(this.getTabIndex(this.focusedKey),0);this.updateVisibility(o)}},mounted(){this.showSlot=this.$slots.extra!==void 0,this.observer=Gc(),this.observer.listenTo(this.$refs.navWrap,this.handleResize);const r=this.isInsideHiddenElement();r&&(this.mutationObserver=new P(()=>{r.style.display!=="none"&&(this.updateBar(),this.mutationObserver.disconnect())}),this.mutationObserver.observe(r,{attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]})),this.handleTabKeyboardSelect(!0),this.updateVisibility(this.getTabIndex(this.activeKey))},beforeUnmount(){this.observer.removeListener(this.$refs.navWrap,this.handleResize),this.mutationObserver&&this.mutationObserver.disconnect()}},G9=["onClick","onDblclick","onContextmenu","onSelectstart","draggable","onDragstart","onDrop"];function W9(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Render"),G=t.resolveComponent("DropdownMenu"),z=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),ref:"tabsWrap"},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-bar"])},[g.showSlot?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-nav-right"])},[t.renderSlot(r.$slots,"extra")],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-nav-container"]),tabindex:"0",ref:"navContainer",onKeydown:[o[5]||(o[5]=(...j)=>f.handleTabKeyNavigation&&f.handleTabKeyNavigation(...j)),o[6]||(o[6]=t.withKeys(t.withModifiers(j=>f.handleTabKeyboardSelect(!1),["prevent"]),["space"]))]},[t.createElementVNode("div",{ref:"navWrap",class:t.normalizeClass([g.prefixCls+"-nav-wrap",g.scrollable?g.prefixCls+"-nav-scrollable":""])},[t.createElementVNode("span",{class:t.normalizeClass([g.prefixCls+"-nav-prev",g.scrollable?"":g.prefixCls+"-nav-scroll-disabled"]),onClick:o[0]||(o[0]=(...j)=>f.scrollPrev&&f.scrollPrev(...j))},[t.createVNode(k,{type:"ios-arrow-back"})],2),t.createElementVNode("span",{class:t.normalizeClass([g.prefixCls+"-nav-next",g.scrollable?"":g.prefixCls+"-nav-scroll-disabled"]),onClick:o[1]||(o[1]=(...j)=>f.scrollNext&&f.scrollNext(...j))},[t.createVNode(k,{type:"ios-arrow-forward"})],2),t.createElementVNode("div",{ref:"navScroll",class:t.normalizeClass([g.prefixCls+"-nav-scroll"]),"on:DOMMouseScroll":o[3]||(o[3]=(...j)=>f.handleScroll&&f.handleScroll(...j)),onMousewheel:o[4]||(o[4]=(...j)=>f.handleScroll&&f.handleScroll(...j))},[t.createElementVNode("div",{ref:"nav",class:t.normalizeClass([g.prefixCls+"-nav"]),style:t.normalizeStyle(g.navStyle)},[t.createElementVNode("div",{class:t.normalizeClass(f.barClasses),style:t.normalizeStyle(f.barStyle)},null,6),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.navList,(j,ae)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.tabCls(j)),key:ae,onClick:_e=>f.handleChange(ae),onDblclick:_e=>f.handleDblclick(ae),onContextmenu:t.withModifiers(_e=>f.handleContextmenu(ae,_e),["stop"]),onSelectstart:t.withModifiers(_e=>f.handlePreventSelect(ae,_e),["stop"]),draggable:u.draggable,onDragstart:_e=>f.handleDrag(ae,_e),onDrop:_e=>f.handleDrop(ae,_e),onDragover:o[2]||(o[2]=t.withModifiers(()=>{},["prevent"]))},[j.icon!==""?(t.openBlock(),t.createBlock(k,{key:0,type:j.icon},null,8,["type"])):t.createCommentVNode("",!0),j.labelType==="function"?(t.openBlock(),t.createBlock(O,{key:1,render:j.label},null,8,["render"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[t.createTextVNode(t.toDisplayString(j.label),1)],64)),f.showClose(j)?(t.openBlock(),t.createBlock(k,{key:3,class:t.normalizeClass([g.prefixCls+"-close"]),type:f.arrowType,custom:f.customArrowType,size:f.arrowSize,onClick:t.withModifiers(_e=>f.handleRemove(ae),["stop"])},null,8,["class","type","custom","size","onClick"])):t.createCommentVNode("",!0)],42,G9))),128))],6)],34)],2)],34)],2),t.createElementVNode("div",{class:t.normalizeClass(f.contentClasses),style:t.normalizeStyle(f.contentStyle),ref:"panes"},[t.renderSlot(r.$slots,"default")],6),t.createElementVNode("div",{class:"ivu-tabs-context-menu",style:t.normalizeStyle(g.contextMenuStyles)},[t.createVNode(z,{trigger:"custom",visible:g.contextMenuVisible,transfer:"",onOnClick:f.handleClickDropdownItem,onOnClickoutside:f.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(G,null,{default:t.withCtx(()=>[t.renderSlot(r.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var Sm=c(H9,[["render",W9]]);const j9={name:"Notification",components:{Dropdown:Cl,DropdownMenu:Sl,Badge:Gp,Tabs:Sm},emits:["on-visible-change","on-item-click","on-clear","on-load-more","on-tab-change"],provide(){return{NotificationInstance:this}},props:{count:{type:Number},autoCount:{type:Boolean,default:!1},countType:{validator(r){return w(r,["text","badge"])},default:"text"},icon:{type:String,default:"md-notifications-outline"},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"bottom"},badgeProps:{type:Object,default(){return{}}},clearClose:{type:Boolean,default:!1},locale:{type:Object,default(){return{loadedAll:"",loading:"...",loadMore:"",clear:""}}},tab:{type:String},wide:{type:Boolean,default:!1},transferClassName:{type:String}},data(){return{visible:!1,countAll:0,tabList:[]}},computed:{finalCount(){return this.autoCount?this.countAll:this.count},transferClasses(){let r="ivu-notifications-transfer";return this.transferClassName&&(r+=` ${this.transferClassName}`),r}},watch:{visible(r){this.$emit("on-visible-change",r)}},methods:{handleVisibleChange(r){this.visible=r},handleClickOutside(r){this.$refs.notice.contains(r.target)||(this.visible=!1)},handleToggleOpen(){this.visible=!this.visible},handleGetCountAll(){if(this.autoCount){const r=this.tabList.map(u=>u.tab);let o=0;r.forEach(u=>{u.count&&(o+=u.count)}),this.countAll=o}},handleItemClick(r,o){this.$emit("on-item-click",r,o)},handleClear(r){this.$emit("on-clear",r),this.clearClose&&this.handleClose()},handleLoadMore(r){this.$emit("on-load-more",r)},handleClose(){this.visible=!1},handleTabChange(r){const o=this.tabList.map(_=>_.tab);let u={};o.forEach(_=>{_.$refs.tab.currentName===r&&(u=_.handleGetTabBaseInfo())}),this.$emit("on-tab-change",u)}}},K9={class:"ivu-notifications",ref:"notice"},q9={class:"ivu-notifications-tabs"},X9={key:0,class:"ivu-notifications-extra"};function Y9(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Badge"),G=t.resolveComponent("Tabs"),z=t.resolveComponent("DropdownMenu"),j=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",K9,[t.createVNode(j,{trigger:"custom",visible:g.visible,transfer:u.transfer,placement:u.placement,"transfer-class-name":f.transferClasses,onOnVisibleChange:f.handleVisibleChange,onOnClickoutside:f.handleClickOutside},{list:t.withCtx(()=>[r.$slots.default?(t.openBlock(),t.createBlock(z,{key:0,onClick:o[1]||(o[1]=t.withModifiers(()=>{},["stop"]))},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(["ivu-notifications-list",{"ivu-notifications-list-wide":u.wide}])},[t.createElementVNode("div",q9,[t.createVNode(G,{animated:!1,"model-value":u.tab,onOnClick:f.handleTabChange},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),_:3},8,["model-value","onOnClick"])])],2),r.$slots.extra?(t.openBlock(),t.createElementBlock("div",X9,[t.renderSlot(r.$slots,"extra")])):t.createCommentVNode("",!0)]),_:3})):t.createCommentVNode("",!0)]),default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-notifications-rel",onClick:o[0]||(o[0]=t.withModifiers((...ae)=>f.handleToggleOpen&&f.handleToggleOpen(...ae),["prevent","stop"]))},[t.createVNode(O,t.mergeProps({count:f.finalCount},u.badgeProps),{default:t.withCtx(()=>[t.renderSlot(r.$slots,"icon",{},()=>[t.createVNode(k,{type:u.icon,size:"24"},null,8,["type"])])]),_:3},16,["count"])])]),_:3},8,["visible","transfer","placement","transfer-class-name","onOnVisibleChange","onOnClickoutside"])],512)}var J2=c(j9,[["render",Y9]]);const J9=(r,o)=>r<=o,td=r=>r<10?"0"+r:r,Z2=(r,o)=>{const u=new Date(r),_=u.getFullYear(),g=td(u.getMonth()+1),f=td(u.getDate()),k=td(u.getHours()),O=td(u.getMinutes()),G=td(u.getSeconds());let z="";return o==="year"?z=_+"-"+g+"-"+f+" "+k+":"+O+":"+G:z=g+"-"+f+" "+k+":"+O,z},Z9=(r,o)=>{const u=new Date().getTime(),_=J9(r,u);let g=u-r;_||(g=-g);let f="",k=_?o("i.time.before")||"":o("i.time.after")||"";return g<1e3?f=o("i.time.just")||"":g<6e4?f=parseInt(g/1e3)+(o("i.time.seconds")||"")+k:g>=6e4&&g<36e5?f=Math.floor(g/6e4)+(o("i.time.minutes")||"")+k:g>=36e5&&g<864e5?f=Math.floor(g/36e5)+(o("i.time.hours")||"")+k:g>=864e5&&g<262386e4?f=Math.floor(g/864e5)+(o("i.time.days")||"")+k:g>=262386e4&&g<=3156786e4&&_?f=Z2(r):f=Z2(r,"year"),f};function Q9(r,o){return Z9(r,o)}const Q2="ivu-time",e7={name:"Time",mixins:[Pn],props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(r){return w(r,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},computed:{classes(){return[`${Q2}`,{[`${Q2}-with-hash`]:this.hash}]}},watch:{time(){this.setTime()}},methods:{handleClick(){s&&this.hash!==""&&(window.location.hash=this.hash)},setTime(){const r=typeof this.time;let o;if(r==="number"){const u=this.time.toString().length>10?this.time:this.time*1e3;o=new Date(u).getTime()}else r==="object"?o=this.time.getTime():r==="string"&&(o=Gr(this.time).valueOf());if(this.type==="relative")this.date=Q9(o,this.t);else{const u=new Date(this.time),_=u.getFullYear(),g=u.getMonth()+1<10?"0"+(u.getMonth()+1):u.getMonth()+1,f=u.getDate()<10?"0"+u.getDate():u.getDate(),k=u.getHours()<10?"0"+u.getHours():u.getHours(),O=u.getMinutes()<10?"0"+u.getMinutes():u.getMinutes(),G=u.getSeconds()<10?"0"+u.getSeconds():u.getSeconds();this.type==="datetime"?this.date=`${_}-${g}-${f} ${k}:${O}:${G}`:this.type==="date"&&(this.date=`${_}-${g}-${f}`)}}},mounted(){this.setTime(),this.interval!==0&&(this.timer=setInterval(()=>{this.setTime()},1e3*this.interval))},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function t7(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(f.classes),onClick:o[0]||(o[0]=(...k)=>f.handleClick&&f.handleClick(...k))},t.toDisplayString(g.date),3)}var Em=c(e7,[["render",t7]]);const n7={name:"NotificationItem",inject:["NotificationTabInstance","NotificationInstance"],components:{Row:fo,Col:Js,Avatar:Th,Tag:Vc,Time:Em},emits:["on-item-click"],props:{rowProps:{type:Object,default(){return{type:"flex",justify:"center",align:"middle"}}},read:{type:[Boolean,Number],default:!1},icon:{type:String},customIcon:{type:String},iconColor:{type:String},iconSize:{validator(r){return w(r,["small","default","large"])},default:"default"},avatar:{type:String},avatarShape:{validator(r){return w(r,["circle","square"])},default:"circle"},title:{type:String},content:{type:String},time:{type:[Number,Date,String]},timeProps:{type:Object,default(){return{}}},tag:{type:String},tagProps:{type:Object,default(){return{}}},clickClose:{type:Boolean,default:!1}},data(){return{id:te(6)}},computed:{classes(){return{"ivu-notifications-item-unread":this.read===!1||this.read===0}},contentSpan(){return this.icon||this.customIcon||this.avatar||this.$slots.avatar?20:24},iconStyle(){let r={};return this.iconColor&&(r={"background-color":this.iconColor}),r}},methods:{handleClick(){this.$emit("on-item-click",this.$attrs),this.NotificationTabInstance.handleItemClick(this.$attrs),this.clickClose&&this.NotificationInstance.handleClose()},addItem(){this.NotificationTabInstance.itemList.push({id:this.id,item:this})},removeItem(){const r=this.NotificationTabInstance,o=r.itemList.findIndex(u=>u.id===this.id);r.itemList.splice(o,1)}},mounted(){this.addItem(),this.NotificationTabInstance.handleGetItems()},unmounted(){this.NotificationTabInstance.handleGetItems()},beforeUnmount(){this.removeItem()}},i7={class:"ivu-notifications-item-title"},r7={key:0},s7={key:0,class:"ivu-notifications-item-tag"},a7={key:0,class:"ivu-notifications-item-desc"},o7={key:1,class:"ivu-notifications-item-time"};function l7(r,o,u,_,g,f){const k=t.resolveComponent("Avatar"),O=t.resolveComponent("Col"),G=t.resolveComponent("Tag"),z=t.resolveComponent("Time"),j=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-notifications-item",f.classes]),onClick:o[0]||(o[0]=(...ae)=>f.handleClick&&f.handleClick(...ae))},[t.renderSlot(r.$slots,"default",{},()=>[t.createVNode(j,t.normalizeProps(t.guardReactiveProps(u.rowProps)),{default:t.withCtx(()=>[u.icon||u.customIcon||u.avatar||r.$slots.avatar?(t.openBlock(),t.createBlock(O,{key:0,span:"4",class:"ivu-notifications-item-icon"},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"avatar",{},()=>[u.icon?(t.openBlock(),t.createBlock(k,{key:0,icon:u.icon,shape:u.avatarShape,size:u.iconSize,style:t.normalizeStyle(f.iconStyle)},null,8,["icon","shape","size","style"])):u.customIcon?(t.openBlock(),t.createBlock(k,{key:1,"custom-icon":u.customIcon,shape:u.avatarShape,size:u.iconSize,style:t.normalizeStyle(f.iconStyle)},null,8,["custom-icon","shape","size","style"])):u.avatar?(t.openBlock(),t.createBlock(k,{key:2,src:u.avatar,shape:u.avatarShape,size:u.iconSize,style:t.normalizeStyle(f.iconStyle)},null,8,["src","shape","size","style"])):t.createCommentVNode("",!0)])]),_:3})):t.createCommentVNode("",!0),t.createVNode(O,{span:f.contentSpan,class:"ivu-notifications-item-content"},{default:t.withCtx(()=>[t.createElementVNode("div",i7,[u.title||r.$slots.title?(t.openBlock(),t.createElementBlock("h4",r7,[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)]),u.tag?(t.openBlock(),t.createElementBlock("div",s7,[t.createVNode(G,t.normalizeProps(t.guardReactiveProps(u.tagProps)),{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(u.tag),1)]),_:1},16)])):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0)]),u.content||r.$slots.content?(t.openBlock(),t.createElementBlock("div",a7,[t.renderSlot(r.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(u.content),1)])])):t.createCommentVNode("",!0),u.time||r.$slots.time?(t.openBlock(),t.createElementBlock("div",o7,[t.renderSlot(r.$slots,"time",{},()=>[t.createVNode(z,t.mergeProps({time:u.time},u.timeProps),null,16,["time"])])])):t.createCommentVNode("",!0)]),_:3},8,["span"])]),_:3},16)])],2)}var eE=c(n7,[["render",l7]]);const c7="ivu-tabs-tabpane",u7={name:"TabPane",inject:["TabsInstance"],props:{name:{type:String},label:{type:[String,Function],default:""},icon:{type:String},disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:null},tab:{type:String},index:{type:Number},contextMenu:{type:Boolean,default:!1}},data(){return{prefixCls:c7,show:!0,currentName:this.name,id:te(6)}},computed:{contentStyle(){return{visibility:this.TabsInstance.activeKey!==this.currentName?"hidden":"visible"}}},methods:{updateNav(){this.TabsInstance.updateNav()},addPane(){const r=this.TabsInstance;r.paneList||(r.paneList=[]),r.paneList.push({id:this.id,pane:this})},removePane(){const r=this.TabsInstance;if(r.paneList&&r.paneList.length){const o=r.paneList.findIndex(u=>u.id===this.id);r.paneList.splice(o,1)}}},watch:{name(r){this.currentName=r,this.updateNav()},label(r){typeof r!="function"&&this.updateNav()},icon(){this.updateNav()},disabled(){this.updateNav()}},mounted(){this.addPane(),this.updateNav()},beforeUnmount(){this.removePane(),this.updateNav()}};function h7(r,o,u,_,g,f){return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(g.prefixCls),style:t.normalizeStyle(f.contentStyle)},[t.renderSlot(r.$slots,"default")],6)),[[t.vShow,g.show]])}var Mm=c(u7,[["render",h7]]);const d7={name:"NotificationTab",inject:["NotificationInstance"],components:{TabPane:Mm,Icon:E},provide(){return{NotificationTabInstance:this}},props:{count:{type:Number},title:{type:String,required:!0},name:{type:String},emptyText:{type:String,default:""},emptyImage:{type:String,default:"https://file.iviewui.com/iview-pro/icon-no-message.svg"},loadedAll:{type:Boolean,default:!0},showLoadedAll:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},scrollToLoad:{type:Boolean,default:!0},showClear:{type:Boolean,default:!0},showClearIcon:{type:Boolean,default:!0}},data(){return{customLabel:r=>r("div",[r("span",this.title),r(Gp,{count:this.count})]),itemCount:0,itemList:[],id:te(6)}},computed:{currentTitle(){const r=this.NotificationInstance.countType;if(r==="text"){const o=this.count?`(${this.count})`:"";return`${this.title} ${o}`}else if(r==="badge")return this.customLabel}},watch:{count:{handler(){this.NotificationInstance.handleGetCountAll()},immediate:!0}},methods:{handleGetTabBaseInfo(){return{name:this.name,title:this.title}},handleGetItems(){const r=this.itemList.map(o=>o.item);this.itemCount=r.length},handleItemClick(r){this.NotificationInstance.handleItemClick(this.handleGetTabBaseInfo(),r)},handleClear(){this.NotificationInstance.handleClear(this.handleGetTabBaseInfo())},handleLoadMore(){this.NotificationInstance.handleLoadMore(this.handleGetTabBaseInfo())},handleScroll(){if(!this.scrollToLoad)return;const r=this.$refs.scroll,o=r.scrollHeight-r.clientHeight-r.scrollTop;!this.loading&&o===0&&this.handleLoadMore()},addTab(){this.NotificationInstance.tabList.push({id:this.id,tab:this})},removeTab(){const r=this.NotificationInstance,o=r.tabList.findIndex(u=>u.id===this.id);r.tabList.splice(o,1)}},mounted(){this.addTab()},beforeUnmount(){this.removeTab()}},f7={class:"ivu-notifications-container-list"},p7={key:0,class:"ivu-notifications-tab-empty"},m7=["src"],g7={class:"ivu-notifications-tab-empty-text"},v7={class:"ivu-notifications-tab-loading"},y7={key:0,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-show"},b7={key:2,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-all"};function _7(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("TabPane");return t.openBlock(),t.createBlock(O,{label:f.currentTitle,name:u.name,ref:"tab",class:"ivu-notifications-tab"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:"ivu-notifications-container",onScroll:o[1]||(o[1]=(...G)=>f.handleScroll&&f.handleScroll(...G)),ref:"scroll"},[t.renderSlot(r.$slots,"top"),t.createElementVNode("div",f7,[t.renderSlot(r.$slots,"default")]),!u.loading&&g.itemCount===0?(t.openBlock(),t.createElementBlock("div",p7,[t.renderSlot(r.$slots,"empty",{},()=>[u.emptyImage?(t.openBlock(),t.createElementBlock("img",{key:0,class:"ivu-notifications-tab-empty-img",src:u.emptyImage},null,8,m7)):t.createCommentVNode("",!0),t.createElementVNode("div",g7,t.toDisplayString(u.emptyText),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",v7,[u.loading?(t.openBlock(),t.createElementBlock("div",y7,[t.renderSlot(r.$slots,"loading",{},()=>[t.createVNode(k,{type:"ios-loading",class:"ivu-load-loop"}),t.createTextVNode(" "+t.toDisplayString(f.NotificationInstance.locale.loading),1)])])):u.loadedAll?u.showLoadedAll&&u.loadedAll?(t.openBlock(),t.createElementBlock("div",b7,[t.renderSlot(r.$slots,"loaded-all",{},()=>[t.createTextVNode(t.toDisplayString(f.NotificationInstance.locale.loadedAll),1)])])):t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:"ivu-notifications-tab-loading-item ivu-notifications-tab-loading-more",onClick:o[0]||(o[0]=(...G)=>f.handleLoadMore&&f.handleLoadMore(...G))},[t.renderSlot(r.$slots,"load-more",{},()=>[t.createTextVNode(t.toDisplayString(f.NotificationInstance.locale.loadMore),1)])]))])],544),u.showClear&&g.itemCount!==0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-notifications-tab-clear",onClick:o[2]||(o[2]=(...G)=>f.handleClear&&f.handleClear(...G))},[t.renderSlot(r.$slots,"clear",{},()=>[u.showClearIcon?(t.openBlock(),t.createBlock(k,{key:0,type:"md-done-all"})):t.createCommentVNode("",!0),t.createElementVNode("span",null,t.toDisplayString(f.NotificationInstance.locale.clear)+t.toDisplayString(u.title),1)])])):t.createCommentVNode("",!0)]),_:3},8,["label","name"])}var tE=c(d7,[["render",_7]]);const x7={name:"Trend",components:{Icon:E},props:{flag:{validator(r){return w(r,["up","down"])}},colorful:{type:Boolean,default:!0},reverseColor:{type:Boolean,default:!1},textColor:{type:Boolean,default:!1},showTitle:{type:[Boolean,String],default:!1}},computed:{classes(){return[{"ivu-trend-up":this.flag==="up","ivu-trend-down":this.flag==="down","ivu-trend-reverse-color":this.reverseColor,"ivu-trend-colorful":this.colorful,"ivu-trend-text-color":this.textColor}]},flagType(){return this.flag==="up"?"md-arrow-dropup":this.flag==="down"?"md-arrow-dropdown":""}}},w7={class:"ivu-trend-text"};function C7(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-trend",f.classes])},[t.createElementVNode("span",w7,[t.renderSlot(r.$slots,"default")]),t.createVNode(k,{type:f.flagType,class:"ivu-trend-flag"},null,8,["type"])],2)}var $y=c(x7,[["render",C7]]);const S7={name:"NumberInfo",components:{Trend:$y},props:{title:{type:String},subTitle:{type:String},total:{type:[String,Number]},subTotal:{type:[String,Number]},status:{validator(r){return w(r,["up","down"])}},gap:{type:[String,Number],default:8}},computed:{valueStyle(){return{"margin-top":this.gap+"px"}}}},E7={class:"ivu-number-info"},M7={key:0,class:"ivu-number-info-title"},T7={key:1,class:"ivu-number-info-subTitle"},k7={class:"ivu-number-info-total"},A7={key:0,class:"ivu-number-info-subTotal"};function P7(r,o,u,_,g,f){const k=t.resolveComponent("Trend");return t.openBlock(),t.createElementBlock("div",E7,[u.title||r.$slots.title?(t.openBlock(),t.createElementBlock("div",M7,[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])])):t.createCommentVNode("",!0),u.subTitle||r.$slots.subTitle?(t.openBlock(),t.createElementBlock("div",T7,[t.renderSlot(r.$slots,"subTitle",{},()=>[t.createTextVNode(t.toDisplayString(u.subTitle),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"ivu-number-info-value",style:t.normalizeStyle(f.valueStyle)},[t.createElementVNode("span",k7,[t.renderSlot(r.$slots,"total",{},()=>[t.createTextVNode(t.toDisplayString(u.total),1)])]),u.subTotal||r.$slots.subTotal?(t.openBlock(),t.createElementBlock("span",A7,[t.renderSlot(r.$slots,"subTotal",{},()=>[t.createVNode(k,{flag:u.status},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(u.subTotal),1)]),_:1},8,["flag"])])])):t.createCommentVNode("",!0)],4)])}var nE=c(S7,[["render",P7]]),iE={exports:{}};/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(r){(function(o,u){r.exports?r.exports=u():o.numeral=u()})(J,function(){var o,u,_="2.0.6",g={},f={},k={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},O={currentLocale:k.currentLocale,zeroFormat:k.zeroFormat,nullFormat:k.nullFormat,defaultFormat:k.defaultFormat,scalePercentBy100:k.scalePercentBy100};function G(z,j){this._input=z,this._value=j}return o=function(z){var j,ae,_e,ye;if(o.isNumeral(z))j=z.value();else if(z===0||typeof z>"u")j=0;else if(z===null||u.isNaN(z))j=null;else if(typeof z=="string")if(O.zeroFormat&&z===O.zeroFormat)j=0;else if(O.nullFormat&&z===O.nullFormat||!z.replace(/[^0-9]+/g,"").length)j=null;else{for(ae in g)if(ye=typeof g[ae].regexps.unformat=="function"?g[ae].regexps.unformat():g[ae].regexps.unformat,ye&&z.match(ye)){_e=g[ae].unformat;break}_e=_e||o._.stringToNumber,j=_e(z)}else j=Number(z)||null;return new G(z,j)},o.version=_,o.isNumeral=function(z){return z instanceof G},o._=u={numberToFormat:function(z,j,ae){var _e=f[o.options.currentLocale],ye=!1,me=!1,ie=0,Pe="",At=1e12,ut=1e9,mt=1e6,We=1e3,Ne="",Ye=!1,Ke,Dt,Lt,xt,gt,Et,Ot;if(z=z||0,Dt=Math.abs(z),o._.includes(j,"(")?(ye=!0,j=j.replace(/[\(|\)]/g,"")):(o._.includes(j,"+")||o._.includes(j,"-"))&&(gt=o._.includes(j,"+")?j.indexOf("+"):z<0?j.indexOf("-"):-1,j=j.replace(/[\+|\-]/g,"")),o._.includes(j,"a")&&(Ke=j.match(/a(k|m|b|t)?/),Ke=Ke?Ke[1]:!1,o._.includes(j," a")&&(Pe=" "),j=j.replace(new RegExp(Pe+"a[kmbt]?"),""),Dt>=At&&!Ke||Ke==="t"?(Pe+=_e.abbreviations.trillion,z=z/At):Dt<At&&Dt>=ut&&!Ke||Ke==="b"?(Pe+=_e.abbreviations.billion,z=z/ut):Dt<ut&&Dt>=mt&&!Ke||Ke==="m"?(Pe+=_e.abbreviations.million,z=z/mt):(Dt<mt&&Dt>=We&&!Ke||Ke==="k")&&(Pe+=_e.abbreviations.thousand,z=z/We)),o._.includes(j,"[.]")&&(me=!0,j=j.replace("[.]",".")),Lt=z.toString().split(".")[0],xt=j.split(".")[1],Et=j.indexOf(","),ie=(j.split(".")[0].split(",")[0].match(/0/g)||[]).length,xt?(o._.includes(xt,"[")?(xt=xt.replace("]",""),xt=xt.split("["),Ne=o._.toFixed(z,xt[0].length+xt[1].length,ae,xt[1].length)):Ne=o._.toFixed(z,xt.length,ae),Lt=Ne.split(".")[0],o._.includes(Ne,".")?Ne=_e.delimiters.decimal+Ne.split(".")[1]:Ne="",me&&Number(Ne.slice(1))===0&&(Ne="")):Lt=o._.toFixed(z,0,ae),Pe&&!Ke&&Number(Lt)>=1e3&&Pe!==_e.abbreviations.trillion)switch(Lt=String(Number(Lt)/1e3),Pe){case _e.abbreviations.thousand:Pe=_e.abbreviations.million;break;case _e.abbreviations.million:Pe=_e.abbreviations.billion;break;case _e.abbreviations.billion:Pe=_e.abbreviations.trillion;break}if(o._.includes(Lt,"-")&&(Lt=Lt.slice(1),Ye=!0),Lt.length<ie)for(var wt=ie-Lt.length;wt>0;wt--)Lt="0"+Lt;return Et>-1&&(Lt=Lt.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+_e.delimiters.thousands)),j.indexOf(".")===0&&(Lt=""),Ot=Lt+Ne+(Pe||""),ye?Ot=(ye&&Ye?"(":"")+Ot+(ye&&Ye?")":""):gt>=0?Ot=gt===0?(Ye?"-":"+")+Ot:Ot+(Ye?"-":"+"):Ye&&(Ot="-"+Ot),Ot},stringToNumber:function(z){var j=f[O.currentLocale],ae=z,_e={thousand:3,million:6,billion:9,trillion:12},ye,me,ie;if(O.zeroFormat&&z===O.zeroFormat)me=0;else if(O.nullFormat&&z===O.nullFormat||!z.replace(/[^0-9]+/g,"").length)me=null;else{me=1,j.delimiters.decimal!=="."&&(z=z.replace(/\./g,"").replace(j.delimiters.decimal,"."));for(ye in _e)if(ie=new RegExp("[^a-zA-Z]"+j.abbreviations[ye]+"(?:\\)|(\\"+j.currency.symbol+")?(?:\\))?)?$"),ae.match(ie)){me*=Math.pow(10,_e[ye]);break}me*=(z.split("-").length+Math.min(z.split("(").length-1,z.split(")").length-1))%2?1:-1,z=z.replace(/[^0-9\.]+/g,""),me*=Number(z)}return me},isNaN:function(z){return typeof z=="number"&&isNaN(z)},includes:function(z,j){return z.indexOf(j)!==-1},insert:function(z,j,ae){return z.slice(0,ae)+j+z.slice(ae)},reduce:function(z,j){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof j!="function")throw new TypeError(j+" is not a function");var ae=Object(z),_e=ae.length>>>0,ye=0,me;if(arguments.length===3)me=arguments[2];else{for(;ye<_e&&!(ye in ae);)ye++;if(ye>=_e)throw new TypeError("Reduce of empty array with no initial value");me=ae[ye++]}for(;ye<_e;ye++)ye in ae&&(me=j(me,ae[ye],ye,ae));return me},multiplier:function(z){var j=z.toString().split(".");return j.length<2?1:Math.pow(10,j[1].length)},correctionFactor:function(){var z=Array.prototype.slice.call(arguments);return z.reduce(function(j,ae){var _e=u.multiplier(ae);return j>_e?j:_e},1)},toFixed:function(z,j,ae,_e){var ye=z.toString().split("."),me=j-(_e||0),ie,Pe,At,ut;return ye.length===2?ie=Math.min(Math.max(ye[1].length,me),j):ie=me,At=Math.pow(10,ie),ut=(ae(z+"e+"+ie)/At).toFixed(ie),_e>j-ie&&(Pe=new RegExp("\\.?0{1,"+(_e-(j-ie))+"}$"),ut=ut.replace(Pe,"")),ut}},o.options=O,o.formats=g,o.locales=f,o.locale=function(z){return z&&(O.currentLocale=z.toLowerCase()),O.currentLocale},o.localeData=function(z){if(!z)return f[O.currentLocale];if(z=z.toLowerCase(),!f[z])throw new Error("Unknown locale : "+z);return f[z]},o.reset=function(){for(var z in k)O[z]=k[z]},o.zeroFormat=function(z){O.zeroFormat=typeof z=="string"?z:null},o.nullFormat=function(z){O.nullFormat=typeof z=="string"?z:null},o.defaultFormat=function(z){O.defaultFormat=typeof z=="string"?z:"0.0"},o.register=function(z,j,ae){if(j=j.toLowerCase(),this[z+"s"][j])throw new TypeError(j+" "+z+" already registered.");return this[z+"s"][j]=ae,ae},o.validate=function(z,j){var ae,_e,ye,me,ie,Pe,At,ut;if(typeof z!="string"&&(z+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",z)),z=z.trim(),z.match(/^\d+$/))return!0;if(z==="")return!1;try{At=o.localeData(j)}catch{At=o.localeData(o.locale())}return ye=At.currency.symbol,ie=At.abbreviations,ae=At.delimiters.decimal,At.delimiters.thousands==="."?_e="\\.":_e=At.delimiters.thousands,ut=z.match(/^[^\d]+/),ut!==null&&(z=z.substr(1),ut[0]!==ye)||(ut=z.match(/[^\d]+$/),ut!==null&&(z=z.slice(0,-1),ut[0]!==ie.thousand&&ut[0]!==ie.million&&ut[0]!==ie.billion&&ut[0]!==ie.trillion))?!1:(Pe=new RegExp(_e+"{2}"),z.match(/[^\d.,]/g)?!1:(me=z.split(ae),me.length>2?!1:me.length<2?!!me[0].match(/^\d+.*\d$/)&&!me[0].match(Pe):me[0].length===1?!!me[0].match(/^\d+$/)&&!me[0].match(Pe)&&!!me[1].match(/^\d+$/):!!me[0].match(/^\d+.*\d$/)&&!me[0].match(Pe)&&!!me[1].match(/^\d+$/)))},o.fn=G.prototype={clone:function(){return o(this)},format:function(z,j){var ae=this._value,_e=z||O.defaultFormat,ye,me,ie;if(j=j||Math.round,ae===0&&O.zeroFormat!==null)me=O.zeroFormat;else if(ae===null&&O.nullFormat!==null)me=O.nullFormat;else{for(ye in g)if(_e.match(g[ye].regexps.format)){ie=g[ye].format;break}ie=ie||o._.numberToFormat,me=ie(ae,_e,j)}return me},value:function(){return this._value},input:function(){return this._input},set:function(z){return this._value=Number(z),this},add:function(z){var j=u.correctionFactor.call(null,this._value,z);function ae(_e,ye,me,ie){return _e+Math.round(j*ye)}return this._value=u.reduce([this._value,z],ae,0)/j,this},subtract:function(z){var j=u.correctionFactor.call(null,this._value,z);function ae(_e,ye,me,ie){return _e-Math.round(j*ye)}return this._value=u.reduce([z],ae,Math.round(this._value*j))/j,this},multiply:function(z){function j(ae,_e,ye,me){var ie=u.correctionFactor(ae,_e);return Math.round(ae*ie)*Math.round(_e*ie)/Math.round(ie*ie)}return this._value=u.reduce([this._value,z],j,1),this},divide:function(z){function j(ae,_e,ye,me){var ie=u.correctionFactor(ae,_e);return Math.round(ae*ie)/Math.round(_e*ie)}return this._value=u.reduce([this._value,z],j),this},difference:function(z){return Math.abs(o(this._value).subtract(z).value())}},o.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(z){var j=z%10;return~~(z%100/10)===1?"th":j===1?"st":j===2?"nd":j===3?"rd":"th"},currency:{symbol:"$"}}),function(){o.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(z,j,ae){var _e=o._.includes(j," BPS")?" ":"",ye;return z=z*1e4,j=j.replace(/\s?BPS/,""),ye=o._.numberToFormat(z,j,ae),o._.includes(ye,")")?(ye=ye.split(""),ye.splice(-1,0,_e+"BPS"),ye=ye.join("")):ye=ye+_e+"BPS",ye},unformat:function(z){return+(o._.stringToNumber(z)*1e-4).toFixed(15)}})}(),function(){var z={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},j={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},ae=z.suffixes.concat(j.suffixes.filter(function(ye){return z.suffixes.indexOf(ye)<0})),_e=ae.join("|");_e="("+_e.replace("B","B(?!PS)")+")",o.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(_e)},format:function(ye,me,ie){var Pe,At=o._.includes(me,"ib")?j:z,ut=o._.includes(me," b")||o._.includes(me," ib")?" ":"",mt,We,Ne;for(me=me.replace(/\s?i?b/,""),mt=0;mt<=At.suffixes.length;mt++)if(We=Math.pow(At.base,mt),Ne=Math.pow(At.base,mt+1),ye===null||ye===0||ye>=We&&ye<Ne){ut+=At.suffixes[mt],We>0&&(ye=ye/We);break}return Pe=o._.numberToFormat(ye,me,ie),Pe+ut},unformat:function(ye){var me=o._.stringToNumber(ye),ie,Pe;if(me){for(ie=z.suffixes.length-1;ie>=0;ie--){if(o._.includes(ye,z.suffixes[ie])){Pe=Math.pow(z.base,ie);break}if(o._.includes(ye,j.suffixes[ie])){Pe=Math.pow(j.base,ie);break}}me*=Pe||1}return me}})}(),function(){o.register("format","currency",{regexps:{format:/(\$)/},format:function(z,j,ae){var _e=o.locales[o.options.currentLocale],ye={before:j.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:j.match(/([\+|\-|\)|\s|\$]*)$/)[0]},me,ie,Pe;for(j=j.replace(/\s?\$\s?/,""),me=o._.numberToFormat(z,j,ae),z>=0?(ye.before=ye.before.replace(/[\-\(]/,""),ye.after=ye.after.replace(/[\-\)]/,"")):z<0&&!o._.includes(ye.before,"-")&&!o._.includes(ye.before,"(")&&(ye.before="-"+ye.before),Pe=0;Pe<ye.before.length;Pe++)switch(ie=ye.before[Pe],ie){case"$":me=o._.insert(me,_e.currency.symbol,Pe);break;case" ":me=o._.insert(me," ",Pe+_e.currency.symbol.length-1);break}for(Pe=ye.after.length-1;Pe>=0;Pe--)switch(ie=ye.after[Pe],ie){case"$":me=Pe===ye.after.length-1?me+_e.currency.symbol:o._.insert(me,_e.currency.symbol,-(ye.after.length-(1+Pe)));break;case" ":me=Pe===ye.after.length-1?me+" ":o._.insert(me," ",-(ye.after.length-(1+Pe)+_e.currency.symbol.length-1));break}return me}})}(),function(){o.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(z,j,ae){var _e,ye=typeof z=="number"&&!o._.isNaN(z)?z.toExponential():"0e+0",me=ye.split("e");return j=j.replace(/e[\+|\-]{1}0/,""),_e=o._.numberToFormat(Number(me[0]),j,ae),_e+"e"+me[1]},unformat:function(z){var j=o._.includes(z,"e+")?z.split("e+"):z.split("e-"),ae=Number(j[0]),_e=Number(j[1]);_e=o._.includes(z,"e-")?_e*=-1:_e;function ye(me,ie,Pe,At){var ut=o._.correctionFactor(me,ie),mt=me*ut*(ie*ut)/(ut*ut);return mt}return o._.reduce([ae,Math.pow(10,_e)],ye,1)}})}(),function(){o.register("format","ordinal",{regexps:{format:/(o)/},format:function(z,j,ae){var _e=o.locales[o.options.currentLocale],ye,me=o._.includes(j," o")?" ":"";return j=j.replace(/\s?o/,""),me+=_e.ordinal(z),ye=o._.numberToFormat(z,j,ae),ye+me}})}(),function(){o.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(z,j,ae){var _e=o._.includes(j," %")?" ":"",ye;return o.options.scalePercentBy100&&(z=z*100),j=j.replace(/\s?\%/,""),ye=o._.numberToFormat(z,j,ae),o._.includes(ye,")")?(ye=ye.split(""),ye.splice(-1,0,_e+"%"),ye=ye.join("")):ye=ye+_e+"%",ye},unformat:function(z){var j=o._.stringToNumber(z);return o.options.scalePercentBy100?j*.01:j}})}(),function(){o.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(z,j,ae){var _e=Math.floor(z/60/60),ye=Math.floor((z-_e*60*60)/60),me=Math.round(z-_e*60*60-ye*60);return _e+":"+(ye<10?"0"+ye:ye)+":"+(me<10?"0"+me:me)},unformat:function(z){var j=z.split(":"),ae=0;return j.length===3?(ae=ae+Number(j[0])*60*60,ae=ae+Number(j[1])*60,ae=ae+Number(j[2])):j.length===2&&(ae=ae+Number(j[0])*60,ae=ae+Number(j[1])),Number(ae)}})}(),o})})(iE);var I7=iE.exports;const N7={name:"Numeral",emits:["on-change"],props:{value:{type:[String,Number]},format:{type:String},prefix:{type:[String,Number]},suffix:{type:[String,Number]}},data(){return{currentValue:""}},watch:{value(){this.init()},format(){this.init()}},methods:{init(){if(this.value!==void 0){const r=I7(this.value);this.format?this.currentValue=r.format(this.format):this.currentValue=r.value(),this.$emit("on-change",this.currentValue)}},getValue(){return this.currentValue}},mounted(){this.init()}},R7={class:"ivu-numeral"};function D7(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("span",R7,[t.renderSlot(r.$slots,"prefix",{},()=>[t.createTextVNode(t.toDisplayString(u.prefix),1)]),t.createTextVNode(t.toDisplayString(g.currentValue),1),t.renderSlot(r.$slots,"suffix",{},()=>[t.createTextVNode(t.toDisplayString(u.suffix),1)])])}var rE=c(N7,[["render",D7]]);const L7="ivu-select-group",B7={name:"OptionGroup",props:{label:{type:String,default:""}},provide(){return{OptionGroupInstance:this}},inject:["SelectInstance"],data(){return{prefixCls:L7,hidden:!1,id:te(6),optionList:[]}},computed:{show(){return this.optionList.find(r=>r.proxy&&r.proxy.isShow)}}};function O7(r,o,u,_,g,f){return t.withDirectives((t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass([g.prefixCls+"-wrap"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-title"])},t.toDisplayString(u.label),3),t.createElementVNode("ul",null,[t.createElementVNode("li",{class:t.normalizeClass([g.prefixCls]),ref:"options"},[t.renderSlot(r.$slots,"default")],2)])],2)),[[t.vShow,f.show]])}var sE=c(B7,[["render",O7]]);const Hy="ivu-page";function V7(r){return/^[1-9][0-9]*$/.test(r+"")}const F7={name:"PageOption",mixins:[Pn],components:{iSelect:sr,iOption:ii},emits:["on-size","on-page"],props:{pageSizeOpts:Array,showSizer:Boolean,showElevator:Boolean,current:Number,_current:Number,pageSize:Number,allPages:Number,isSmall:Boolean,placement:String,transfer:Boolean,disabled:Boolean,eventsEnabled:Boolean},data(){return{currentPageSize:this.pageSize}},watch:{pageSize(r){this.currentPageSize=r}},computed:{size(){return this.isSmall?"small":"default"},optsClasses(){return[`${Hy}-options`]},sizerClasses(){return[`${Hy}-options-sizer`]},ElevatorClasses(){return[`${Hy}-options-elevator`]}},methods:{changeSize(){this.$emit("on-size",this.currentPageSize)},changePage(r){let o=r.target.value.trim(),u=0;if(V7(o)){if(o=Number(o),o!=this.current){const _=this.allPages;o>_?u=_:u=o}}else u=1;u&&(this.$emit("on-page",u),r.target.value=u)}}},U7=["value","disabled"];function z7(r,o,u,_,g,f){const k=t.resolveComponent("i-option"),O=t.resolveComponent("i-select");return u.showSizer||u.showElevator?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.optsClasses)},[u.showSizer?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.sizerClasses)},[t.createVNode(O,{modelValue:g.currentPageSize,"onUpdate:modelValue":o[0]||(o[0]=G=>g.currentPageSize=G),size:f.size,placement:u.placement,transfer:u.transfer,disabled:u.disabled,eventsEnabled:u.eventsEnabled,onOnChange:f.changeSize},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.pageSizeOpts,G=>(t.openBlock(),t.createBlock(k,{key:G,value:G,style:{"text-align":"center"}},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(G)+" "+t.toDisplayString(r.t("i.page.page")),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","size","placement","transfer","disabled","eventsEnabled","onOnChange"])],2)):t.createCommentVNode("",!0),u.showElevator?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(f.ElevatorClasses)},[t.createTextVNode(t.toDisplayString(r.t("i.page.goto"))+" ",1),t.createElementVNode("input",{type:"text",value:u._current,autocomplete:"off",spellcheck:"false",disabled:u.disabled,onKeyup:o[1]||(o[1]=t.withKeys((...G)=>f.changePage&&f.changePage(...G),["enter"]))},null,40,U7),t.createTextVNode(" "+t.toDisplayString(r.t("i.page.p")),1)],2)):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0)}var $7=c(F7,[["render",z7]]);const qi="ivu-page",H7={name:"Page",mixins:[Pn],components:{Options:$7},emits:["update:modelValue","on-change","on-prev","on-next","on-page-size-change"],props:{modelValue:{type:Number,default:1},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageSizeOpts:{type:Array,default(){return[10,20,30,40]}},placement:{validator(r){return w(r,["top","bottom"])},default:"bottom"},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},size:{validator(r){return w(r,["small","default"])}},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},showSizer:{type:Boolean,default:!1},className:{type:String},styles:{type:Object},prevText:{type:String,default:""},nextText:{type:String,default:""},disabled:{type:Boolean,default:!1},eventsEnabled:{type:Boolean,default:!1}},data(){return{prefixCls:qi,currentPage:this.modelValue,currentPageSize:this.pageSize}},watch:{total(r){let o=Math.ceil(r/this.currentPageSize);o<this.currentPage&&(this.currentPage=o===0?1:o)},modelValue(r){this.currentPage=r},pageSize(r){this.currentPageSize=r}},computed:{isSmall(){return this.size==="small"},allPages(){const r=Math.ceil(this.total/this.currentPageSize);return r===0?1:r},simpleWrapClasses(){return[`${qi}`,`${qi}-simple`,{[`${this.className}`]:!!this.className}]},simplePagerClasses(){return`${qi}-simple-pager`},wrapClasses(){return[`${qi}`,{[`${this.className}`]:!!this.className,[`${qi}-with-disabled`]:this.disabled,mini:this.size==="small"}]},prevClasses(){return[`${qi}-prev`,{[`${qi}-disabled`]:this.currentPage===1||this.disabled,[`${qi}-custom-text`]:this.prevText!==""}]},nextClasses(){return[`${qi}-next`,{[`${qi}-disabled`]:this.currentPage===this.allPages||this.disabled,[`${qi}-custom-text`]:this.nextText!==""}]},firstPageClasses(){return[`${qi}-item`,{[`${qi}-item-active`]:this.currentPage===1}]},lastPageClasses(){return[`${qi}-item`,{[`${qi}-item-active`]:this.currentPage===this.allPages}]}},methods:{changePage(r){this.disabled||this.currentPage!=r&&(this.currentPage=r,this.$emit("update:modelValue",r),this.$emit("on-change",r))},prev(){if(this.disabled)return;const r=this.currentPage;if(r<=1)return!1;this.changePage(r-1),this.$emit("on-prev",r-1)},next(){if(this.disabled)return;const r=this.currentPage;if(r>=this.allPages)return!1;this.changePage(r+1),this.$emit("on-next",r+1)},fastPrev(){if(this.disabled)return;const r=this.currentPage-5;r>0?this.changePage(r):this.changePage(1)},fastNext(){if(this.disabled)return;const r=this.currentPage+5;r>this.allPages?this.changePage(this.allPages):this.changePage(r)},onSize(r){this.disabled||(this.currentPageSize=r,this.$emit("on-page-size-change",r),this.changePage(1))},onPage(r){this.disabled||this.changePage(r)},keyDown(r){const o=r.keyCode;o>=48&&o<=57||o>=96&&o<=105||o===8||o===37||o===39||r.preventDefault()},keyUp(r){const o=r.keyCode,u=parseInt(r.target.value);if(o===38)this.prev();else if(o===40)this.next();else if(o===13){let _=1;u>this.allPages?_=this.allPages:u<=0||!u?_=1:_=u,r.target.value=_,this.changePage(_)}}}},G7=["title"],W7=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"})],-1)],j7=["title"],K7=["value","disabled"],q7=t.createElementVNode("span",null,"/",-1),X7=["title"],Y7=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"})],-1)],J7=["title"],Z7={key:1,class:"ivu-icon ivu-icon-ios-arrow-back"},Q7=[t.createElementVNode("a",null,"1",-1)],eU=["title"],tU=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-back"}),t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],nU=["title"],iU=["title"],rU=["title"],sU=["title"],aU=["title"],oU=["title"],lU=["title"],cU=["title"],uU=[t.createElementVNode("a",null,[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-arrow-forward"}),t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-more"})],-1)],hU=["title"],dU=["title"],fU={key:1,class:"ivu-icon ivu-icon-ios-arrow-forward"};function pU(r,o,u,_,g,f){const k=t.resolveComponent("Options");return u.simple?(t.openBlock(),t.createElementBlock("ul",{key:0,class:t.normalizeClass(f.simpleWrapClasses),style:t.normalizeStyle(u.styles)},[t.createElementVNode("li",{title:r.t("i.page.prev"),class:t.normalizeClass(f.prevClasses),onClick:o[0]||(o[0]=(...O)=>f.prev&&f.prev(...O))},W7,10,G7),t.createElementVNode("div",{class:t.normalizeClass(f.simplePagerClasses),title:g.currentPage+"/"+f.allPages},[t.createElementVNode("input",{type:"text",value:g.currentPage,autocomplete:"off",spellcheck:"false",disabled:u.disabled,onKeydown:o[1]||(o[1]=(...O)=>f.keyDown&&f.keyDown(...O)),onKeyup:o[2]||(o[2]=(...O)=>f.keyUp&&f.keyUp(...O)),onChange:o[3]||(o[3]=(...O)=>f.keyUp&&f.keyUp(...O))},null,40,K7),q7,t.createTextVNode(" "+t.toDisplayString(f.allPages),1)],10,j7),t.createElementVNode("li",{title:r.t("i.page.next"),class:t.normalizeClass(f.nextClasses),onClick:o[4]||(o[4]=(...O)=>f.next&&f.next(...O))},Y7,10,X7)],6)):(t.openBlock(),t.createElementBlock("ul",{key:1,class:t.normalizeClass(f.wrapClasses),style:t.normalizeStyle(u.styles)},[u.showTotal?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([g.prefixCls+"-total"])},[t.renderSlot(r.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(r.t("i.page.total"))+" "+t.toDisplayString(u.total)+" ",1),u.total<=1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(r.t("i.page.item")),1)],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createTextVNode(t.toDisplayString(r.t("i.page.items")),1)],64))])],2)):t.createCommentVNode("",!0),t.createElementVNode("li",{title:r.t("i.page.prev"),class:t.normalizeClass(f.prevClasses),onClick:o[5]||(o[5]=(...O)=>f.prev&&f.prev(...O))},[t.createElementVNode("a",null,[u.prevText!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(u.prevText),1)],64)):(t.openBlock(),t.createElementBlock("i",Z7))])],10,J7),t.createElementVNode("li",{title:"1",class:t.normalizeClass(f.firstPageClasses),onClick:o[6]||(o[6]=O=>f.changePage(1))},Q7,2),g.currentPage>5?(t.openBlock(),t.createElementBlock("li",{key:1,title:r.t("i.page.prev5"),class:t.normalizeClass([g.prefixCls+"-item-jump-prev"]),onClick:o[7]||(o[7]=(...O)=>f.fastPrev&&f.fastPrev(...O))},tU,10,eU)):t.createCommentVNode("",!0),g.currentPage===5?(t.openBlock(),t.createElementBlock("li",{key:2,title:g.currentPage-3,class:t.normalizeClass([g.prefixCls+"-item"]),onClick:o[8]||(o[8]=O=>f.changePage(g.currentPage-3))},[t.createElementVNode("a",null,t.toDisplayString(g.currentPage-3),1)],10,nU)):t.createCommentVNode("",!0),g.currentPage-2>1?(t.openBlock(),t.createElementBlock("li",{key:3,title:g.currentPage-2,class:t.normalizeClass([g.prefixCls+"-item"]),onClick:o[9]||(o[9]=O=>f.changePage(g.currentPage-2))},[t.createElementVNode("a",null,t.toDisplayString(g.currentPage-2),1)],10,iU)):t.createCommentVNode("",!0),g.currentPage-1>1?(t.openBlock(),t.createElementBlock("li",{key:4,title:g.currentPage-1,class:t.normalizeClass([g.prefixCls+"-item"]),onClick:o[10]||(o[10]=O=>f.changePage(g.currentPage-1))},[t.createElementVNode("a",null,t.toDisplayString(g.currentPage-1),1)],10,rU)):t.createCommentVNode("",!0),g.currentPage!=1&&g.currentPage!=f.allPages?(t.openBlock(),t.createElementBlock("li",{key:5,title:g.currentPage,class:t.normalizeClass([g.prefixCls+"-item",g.prefixCls+"-item-active"])},[t.createElementVNode("a",null,t.toDisplayString(g.currentPage),1)],10,sU)):t.createCommentVNode("",!0),g.currentPage+1<f.allPages?(t.openBlock(),t.createElementBlock("li",{key:6,title:g.currentPage+1,class:t.normalizeClass([g.prefixCls+"-item"]),onClick:o[11]||(o[11]=O=>f.changePage(g.currentPage+1))},[t.createElementVNode("a",null,t.toDisplayString(g.currentPage+1),1)],10,aU)):t.createCommentVNode("",!0),g.currentPage+2<f.allPages?(t.openBlock(),t.createElementBlock("li",{key:7,title:g.currentPage+2,class:t.normalizeClass([g.prefixCls+"-item"]),onClick:o[12]||(o[12]=O=>f.changePage(g.currentPage+2))},[t.createElementVNode("a",null,t.toDisplayString(g.currentPage+2),1)],10,oU)):t.createCommentVNode("",!0),f.allPages-g.currentPage===4?(t.openBlock(),t.createElementBlock("li",{key:8,title:g.currentPage+3,class:t.normalizeClass([g.prefixCls+"-item"]),onClick:o[13]||(o[13]=O=>f.changePage(g.currentPage+3))},[t.createElementVNode("a",null,t.toDisplayString(g.currentPage+3),1)],10,lU)):t.createCommentVNode("",!0),f.allPages-g.currentPage>=5?(t.openBlock(),t.createElementBlock("li",{key:9,title:r.t("i.page.next5"),class:t.normalizeClass([g.prefixCls+"-item-jump-next"]),onClick:o[14]||(o[14]=(...O)=>f.fastNext&&f.fastNext(...O))},uU,10,cU)):t.createCommentVNode("",!0),f.allPages>1?(t.openBlock(),t.createElementBlock("li",{key:10,title:f.allPages,class:t.normalizeClass(f.lastPageClasses),onClick:o[15]||(o[15]=O=>f.changePage(f.allPages))},[t.createElementVNode("a",null,t.toDisplayString(f.allPages),1)],10,hU)):t.createCommentVNode("",!0),t.createElementVNode("li",{title:r.t("i.page.next"),class:t.normalizeClass(f.nextClasses),onClick:o[16]||(o[16]=(...O)=>f.next&&f.next(...O))},[t.createElementVNode("a",null,[u.nextText!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(u.nextText),1)],64)):(t.openBlock(),t.createElementBlock("i",fU))])],10,dU),t.createVNode(k,{"show-sizer":u.showSizer,"page-size":g.currentPageSize,"page-size-opts":u.pageSizeOpts,placement:u.placement,transfer:u.transfer,"show-elevator":u.showElevator,_current:g.currentPage,current:g.currentPage,disabled:u.disabled,"all-pages":f.allPages,"is-small":f.isSmall,eventsEnabled:u.eventsEnabled,onOnSize:f.onSize,onOnPage:f.onPage},null,8,["show-sizer","page-size","page-size-opts","placement","transfer","show-elevator","_current","current","disabled","all-pages","is-small","eventsEnabled","onOnSize","onOnPage"])],6))}var aE=c(H7,[["render",pU]]);const mU={name:"PageHeader",components:{Breadcrumb:Zv,BreadcrumbItem:Qv,Divider:um,Icon:E,Tabs:Sm,TabPane:Mm},emits:["on-tab-change","on-back"],props:{title:{type:String},back:{type:Boolean,default:!1},logo:{type:String},action:{type:String},content:{type:String},extra:{type:String},breadcrumbList:{type:Array},hiddenBreadcrumb:{type:Boolean,default:!1},tabList:{type:Array},tabActiveKey:{type:String},wide:{type:Boolean,default:!1}},computed:{classes(){return{"ivu-page-header-wide":this.wide}}},methods:{handleTabChange(r){const o=this.tabList.find(u=>u.name===r);this.$emit("on-tab-change",JSON.parse(JSON.stringify(o)))},handleBack(){this.$emit("on-back")}}},gU={key:0,class:"ivu-page-header-breadcrumb"},vU={class:"ivu-page-header-detail"},yU={key:1,class:"ivu-page-header-logo"},bU=["src"],_U={class:"ivu-page-header-main"},xU={class:"ivu-page-header-row"},wU={key:1,class:"ivu-page-header-title"},CU={key:2,class:"ivu-page-header-action"},SU={class:"ivu-page-header-row"},EU={key:0,class:"ivu-page-header-content"},MU={key:1,class:"ivu-page-header-extra"},TU={key:1,class:"ivu-page-header-tabs"};function kU(r,o,u,_,g,f){const k=t.resolveComponent("BreadcrumbItem"),O=t.resolveComponent("Breadcrumb"),G=t.resolveComponent("Icon"),z=t.resolveComponent("Divider"),j=t.resolveComponent("TabPane"),ae=t.resolveComponent("Tabs");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-page-header",f.classes])},[r.$slots.breadcrumb||!u.hiddenBreadcrumb?(t.openBlock(),t.createElementBlock("div",gU,[t.renderSlot(r.$slots,"breadcrumb",{},()=>[t.createVNode(O,null,{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.breadcrumbList,(_e,ye)=>(t.openBlock(),t.createBlock(k,{key:ye,to:_e.to,replace:_e.replace,target:_e.target},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(_e.title),1)]),_:2},1032,["to","replace","target"]))),128))]),_:1})])])):t.createCommentVNode("",!0),t.createElementVNode("div",vU,[u.back||r.$slots.back?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:o[0]||(o[0]=(..._e)=>f.handleBack&&f.handleBack(..._e))},[t.renderSlot(r.$slots,"back",{},()=>[t.createVNode(G,{type:"md-arrow-back"})]),t.createVNode(z,{type:"vertical"})])):t.createCommentVNode("",!0),u.logo||r.$slots.logo?(t.openBlock(),t.createElementBlock("div",yU,[t.renderSlot(r.$slots,"logo",{},()=>[t.createElementVNode("img",{src:u.logo},null,8,bU)])])):t.createCommentVNode("",!0),t.createElementVNode("div",_U,[t.createElementVNode("div",xU,[u.back||r.$slots.back?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-page-header-back",onClick:o[1]||(o[1]=(..._e)=>f.handleBack&&f.handleBack(..._e))},[t.renderSlot(r.$slots,"back",{},()=>[t.createVNode(G,{type:"md-arrow-back"})]),t.createVNode(z,{type:"vertical"})])):t.createCommentVNode("",!0),u.title||r.$slots.title?(t.openBlock(),t.createElementBlock("div",wU,[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])])):t.createCommentVNode("",!0),u.action||r.$slots.action?(t.openBlock(),t.createElementBlock("div",CU,[t.renderSlot(r.$slots,"action",{},()=>[t.createTextVNode(t.toDisplayString(u.action),1)])])):t.createCommentVNode("",!0)]),t.createElementVNode("div",SU,[u.content||r.$slots.content?(t.openBlock(),t.createElementBlock("div",EU,[t.renderSlot(r.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(u.content),1)])])):t.createCommentVNode("",!0),u.extra||r.$slots.extra?(t.openBlock(),t.createElementBlock("div",MU,[t.renderSlot(r.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(u.extra),1)])])):t.createCommentVNode("",!0)])])]),u.tabList&&u.tabList.length?(t.openBlock(),t.createElementBlock("div",TU,[t.createVNode(ae,{animated:!1,"model-value":u.tabActiveKey,onOnClick:f.handleTabChange},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.tabList,(_e,ye)=>(t.openBlock(),t.createBlock(j,{key:ye,label:_e.label,name:_e.name},null,8,["label","name"]))),128))]),_:1},8,["model-value","onOnClick"])])):t.createCommentVNode("",!0)],2)}var oE=c(mU,[["render",kU]]);const AU=t.defineComponent({name:"CollapseTransition",props:{ready:{type:Boolean,default:!0}},setup(r){return{on:{beforeEnter(o){!r.ready||(Y(o,"collapse-transition"),o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.style.height="0",o.style.paddingTop=0,o.style.paddingBottom=0)},enter(o){!r.ready||(o.dataset.oldOverflow=o.style.overflow,o.scrollHeight!==0?(o.style.height=o.scrollHeight+"px",o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom):(o.style.height="",o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom),o.style.overflow="hidden")},afterEnter(o){!r.ready||(ne(o,"collapse-transition"),o.style.height="",o.style.overflow=o.dataset.oldOverflow)},beforeLeave(o){!r.ready||(o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.dataset.oldOverflow=o.style.overflow,o.style.height=o.scrollHeight+"px",o.style.overflow="hidden")},leave(o){!r.ready||o.scrollHeight!==0&&(Y(o,"collapse-transition"),o.style.height=0,o.style.paddingTop=0,o.style.paddingBottom=0)},afterLeave(o){!r.ready||(ne(o,"collapse-transition"),o.style.height="",o.style.overflow=o.dataset.oldOverflow,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom)}}}}});function PU(r,o,u,_,g,f){return t.openBlock(),t.createBlock(t.Transition,t.toHandlers(r.on),{default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),_:3},16)}var Gy=c(AU,[["render",PU]]);const nd="ivu-collapse",IU={name:"Panel",components:{Icon:E,CollapseTransition:Gy},inject:["CollapseInstance"],props:{name:{type:String},hideArrow:{type:Boolean,default:!1}},data(){return{index:0,mounted:!1}},computed:{itemClasses(){return[`${nd}-item`,{[`${nd}-item-active`]:this.isActive}]},headerClasses(){return`${nd}-header`},contentClasses(){return`${nd}-content`},boxClasses(){return`${nd}-content-box`},isActive(){const r=this.CollapseInstance.getActiveKey(),o=this.name||this.index.toString();return r.indexOf(o)>-1}},methods:{setIndex(){this.index=this.CollapseInstance.panelCount+1,this.CollapseInstance.panelCount=this.index},toggle(){this.CollapseInstance.toggle({name:this.name||this.index,isActive:this.isActive})}},mounted(){this.setIndex(),this.mounted=!0}};function NU(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("collapse-transition");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.itemClasses)},[t.createElementVNode("div",{class:t.normalizeClass(f.headerClasses),onClick:o[0]||(o[0]=(...G)=>f.toggle&&f.toggle(...G))},[u.hideArrow?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(k,{key:0,type:"ios-arrow-forward"})),t.renderSlot(r.$slots,"default")],2),g.mounted?(t.openBlock(),t.createBlock(O,{key:0},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(f.contentClasses)},[t.createElementVNode("div",{class:t.normalizeClass(f.boxClasses)},[t.renderSlot(r.$slots,"content")],2)],2),[[t.vShow,f.isActive]])]),_:3})):t.createCommentVNode("",!0)],2)}var lE=c(IU,[["render",NU]]);const cE={name:"Paragraph",mixins:[Kh],render(){return t.h(_m,{...this.$props,component:"div",...this.commonEvents()},this.commonSlots())}},uE={name:"Password",mixins:[Rh],data(){return{className:"ivu-login-password",prefix:"ios-lock-outline",placeholder:"",type:"password"}}},xo="ivu-poptip",RU={name:"Poptip",mixins:[yC,Pn],emits:["on-ok","on-cancel"],directives:{clickOutside:cy},components:{iButton:ar},props:{trigger:{validator(r){return w(r,["click","focus","hover"])},default:"click"},placement:{validator(r){return w(r,["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"])},default:"top"},title:{type:[String,Number]},content:{type:[String,Number],default:""},width:{type:[String,Number]},confirm:{type:Boolean,default:!1},okText:{type:String},cancelText:{type:String},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}},popperClass:{type:String},wordWrap:{type:Boolean,default:!1},padding:{type:String},disabled:{type:Boolean,default:!1},capture:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return r.$VIEWUI?r.$VIEWUI.capture:!1}},transferClassName:{type:String}},data(){return{prefixCls:xo,showTitle:!0,isInput:!1,disableCloseUnderTransfer:!1,tIndex:this.handleGetIndex()}},computed:{classes(){return[`${xo}`,{[`${xo}-confirm`]:this.confirm}]},popperClasses(){return[`${xo}-popper`,{[`${xo}-confirm`]:this.transfer&&this.confirm,[`${this.popperClass}`]:!!this.popperClass,[xo+"-transfer"]:this.transfer,[this.transferClassName]:this.transferClassName}]},styles(){let r={};return this.width&&(r.width=`${this.width}px`),this.transfer&&(r["z-index"]=1060+this.tIndex),r},localeOkText(){return this.okText===void 0?this.t("i.poptip.okText"):this.okText},localeCancelText(){return this.cancelText===void 0?this.t("i.poptip.cancelText"):this.cancelText},contentClasses(){return[`${xo}-body-content`,{[`${xo}-body-content-word-wrap`]:this.wordWrap}]},contentPaddingStyle(){const r={};return this.padding!==""&&(r.padding=this.padding),r}},methods:{handleClick(){if(!this.disabled){if(this.confirm)return this.visible=!this.visible,!0;if(this.trigger!=="click")return!1;this.visible=!this.visible}},handleTransferClick(){this.transfer&&(this.disableCloseUnderTransfer=!0)},handleClose(){if(this.disableCloseUnderTransfer)return this.disableCloseUnderTransfer=!1,!1;if(this.confirm)return this.visible=!1,!0;if(this.trigger!=="click")return!1;this.visible=!1},handleFocus(r=!0){if(!this.disabled){if(this.trigger!=="focus"||this.confirm||this.isInput&&!r)return!1;this.visible=!0}},handleBlur(r=!0){if(this.trigger!=="focus"||this.confirm||this.isInput&&!r)return!1;this.visible=!1},handleMouseenter(){if(!this.disabled){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!0},100)}},handleMouseleave(){if(this.trigger!=="hover"||this.confirm)return!1;this.enterTimer&&(clearTimeout(this.enterTimer),this.enterTimer=setTimeout(()=>{this.visible=!1},100))},cancel(){this.visible=!1,this.$emit("on-cancel")},ok(){this.visible=!1,this.$emit("on-ok")},getInputChildren(){const r=this.$refs.reference.querySelectorAll("input"),o=this.$refs.reference.querySelectorAll("textarea");let u=null;return r.length?u=r[0]:o.length&&(u=o[0]),u},handleGetIndex(){return He(),xe},handleIndexIncrease(){this.tIndex=this.handleGetIndex()}},mounted(){this.confirm||(this.showTitle=this.$slots.title!==void 0||this.title),this.trigger==="focus"&&t.nextTick(()=>{const r=this.getInputChildren();r&&(this.isInput=!0,r.addEventListener("focus",this.handleFocus,!1),r.addEventListener("blur",this.handleBlur,!1))})},beforeUnmount(){const r=this.getInputChildren();r&&(r.removeEventListener("focus",this.handleFocus,!1),r.removeEventListener("blur",this.handleBlur,!1))}},DU=t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-help-circle"},null,-1);function LU(r,o,u,_,g,f){const k=t.resolveComponent("i-button"),O=t.resolveDirective("click-outside");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),onMouseenter:o[6]||(o[6]=(...G)=>f.handleMouseenter&&f.handleMouseenter(...G)),onMouseleave:o[7]||(o[7]=(...G)=>f.handleMouseleave&&f.handleMouseleave(...G))},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-rel"]),ref:"reference",onClick:o[0]||(o[0]=(...G)=>f.handleClick&&f.handleClick(...G)),onMousedown:o[1]||(o[1]=G=>f.handleFocus(!1)),onMouseup:o[2]||(o[2]=G=>f.handleBlur(!1))},[t.renderSlot(r.$slots,"default")],34),(t.openBlock(),t.createBlock(t.Teleport,{to:"body",disabled:!u.transfer},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(f.popperClasses),style:t.normalizeStyle(f.styles),ref:"popper",onClick:o[3]||(o[3]=(...G)=>f.handleTransferClick&&f.handleTransferClick(...G)),onMouseenter:o[4]||(o[4]=(...G)=>f.handleMouseenter&&f.handleMouseenter(...G)),onMouseleave:o[5]||(o[5]=(...G)=>f.handleMouseleave&&f.handleMouseleave(...G))},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-content"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-arrow"])},null,2),u.confirm?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-inner"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"])},[DU,t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body-message"])},[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])],2)],2),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-footer"])},[t.createVNode(k,{type:"text",size:"small",onClick:f.cancel},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(f.localeCancelText),1)]),_:1},8,["onClick"]),t.createVNode(k,{type:"primary",size:"small",onClick:f.ok},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(f.localeOkText),1)]),_:1},8,["onClick"])],2)],2)):t.createCommentVNode("",!0),u.confirm?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([g.prefixCls+"-inner"])},[g.showTitle?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-title"]),style:t.normalizeStyle(f.contentPaddingStyle),ref:"title"},[t.renderSlot(r.$slots,"title",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-title-inner"])},t.toDisplayString(u.title),3)])],6)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"]),style:t.normalizeStyle(f.contentPaddingStyle)},[t.createElementVNode("div",{class:t.normalizeClass(f.contentClasses)},[t.renderSlot(r.$slots,"content",{},()=>[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body-content-inner"])},t.toDisplayString(u.content),3)])],2)],6)],2))],2)],38),[[t.vShow,r.visible]])]),_:3})],8,["disabled"]))],34)),[[O,f.handleClose]])}var Wy=c(RU,[["render",LU]]);const ta="ivu-progress",BU={name:"Progress",components:{Icon:E},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator(r){return w(r,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data(){return{currentStatus:this.status}},computed:{isStatus(){return this.currentStatus==="wrong"||this.currentStatus==="success"},statusIcon(){let r="";switch(this.currentStatus){case"wrong":r="ios-close-circle";break;case"success":r="ios-checkmark-circle";break}return r},bgStyle(){const r=this.vertical?{height:`${this.percent}%`,width:`${this.strokeWidth}px`}:{width:`${this.percent}%`,height:`${this.strokeWidth}px`};return this.strokeColor&&(typeof this.strokeColor=="string"?r["background-color"]=this.strokeColor:r["background-image"]=`linear-gradient(to right, ${this.strokeColor[0]} 0%, ${this.strokeColor[1]} 100%)`),r},successBgStyle(){return this.vertical?{height:`${this.successPercent}%`,width:`${this.strokeWidth}px`}:{width:`${this.successPercent}%`,height:`${this.strokeWidth}px`}},wrapClasses(){return[`${ta}`,`${ta}-${this.currentStatus}`,{[`${ta}-show-info`]:!this.hideInfo&&!this.textInside,[`${ta}-vertical`]:this.vertical}]},textClasses(){return`${ta}-text`},textInnerClasses(){return`${ta}-text-inner`},outerClasses(){return`${ta}-outer`},innerClasses(){return`${ta}-inner`},bgClasses(){return`${ta}-bg`},successBgClasses(){return`${ta}-success-bg`}},created(){this.handleStatus()},methods:{handleStatus(r){r?(this.currentStatus="normal",this.$emit("on-status-change","normal")):parseInt(this.percent,10)===100&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent(r,o){r<o?this.handleStatus(!0):this.handleStatus()},status(r){this.currentStatus=r}}},OU={key:0,class:"ivu-progress-inner-text"};function VU(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[t.createElementVNode("div",{class:t.normalizeClass(f.outerClasses)},[t.createElementVNode("div",{class:t.normalizeClass(f.innerClasses)},[t.createElementVNode("div",{class:t.normalizeClass(f.bgClasses),style:t.normalizeStyle(f.bgStyle)},[u.textInside?(t.openBlock(),t.createElementBlock("div",OU,t.toDisplayString(u.percent)+"%",1)):t.createCommentVNode("",!0)],6),t.createElementVNode("div",{class:t.normalizeClass(f.successBgClasses),style:t.normalizeStyle(f.successBgStyle)},null,6)],2)],2),!u.hideInfo&&!u.textInside?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(f.textClasses)},[t.renderSlot(r.$slots,"default",{},()=>[f.isStatus?(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass(f.textInnerClasses)},[t.createVNode(k,{type:f.statusIcon},null,8,["type"])],2)):(t.openBlock(),t.createElementBlock("span",{key:1,class:t.normalizeClass(f.textInnerClasses)},t.toDisplayString(u.percent)+"% ",3))])],2)):t.createCommentVNode("",!0)],2)}var Tm=c(BU,[["render",VU]]);const wo="ivu-rate",FU={name:"Rate",mixins:[Pn,tn],emits:["update:modelValue","on-change"],props:{count:{type:Number,default:5},modelValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},name:{type:String},clearable:{type:Boolean,default:!1},character:{type:String,default:""},icon:{type:String,default:""},customIcon:{type:String,default:""}},data(){const r=this.modelValue||0;return{prefixCls:wo,hoverIndex:-1,isHover:!1,isHalf:this.allowHalf&&r.toString().indexOf(".")>=0,currentValue:r}},computed:{classes(){return[`${wo}`,{[`${wo}-disabled`]:this.itemDisabled}]},iconClasses(){return["ivu-icon",{[`ivu-icon-${this.icon}`]:this.icon!=="",[`${this.customIcon}`]:this.customIcon!==""}]},showCharacter(){return this.character!==""||this.icon!==""||this.customIcon!==""}},watch:{modelValue(r){this.currentValue=r||0},currentValue(r){this.setHalf(r)}},methods:{starCls(r){const o=this.hoverIndex,u=this.isHover?o:this.currentValue;let _=!1,g=!1;return u>=r&&(_=!0),this.isHover?g=u===r:g=Math.ceil(this.currentValue)===r,[{[`${wo}-star`]:!this.showCharacter,[`${wo}-star-chart`]:this.showCharacter,[`${wo}-star-full`]:!g&&_||g&&!this.isHalf,[`${wo}-star-half`]:g&&this.isHalf,[`${wo}-star-zero`]:!_}]},handleMousemove(r,o){if(!this.itemDisabled){if(this.isHover=!0,this.allowHalf){const u=o.target.getAttribute("type")||!1;this.isHalf=u==="half"}else this.isHalf=!1;this.hoverIndex=r}},handleMouseleave(){this.itemDisabled||(this.isHover=!1,this.setHalf(this.currentValue),this.hoverIndex=-1)},setHalf(r){this.isHalf=this.allowHalf&&r.toString().indexOf(".")>=0},handleClick(r){this.itemDisabled||(this.isHalf&&(r-=.5),this.clearable&&Math.abs(r-this.currentValue)<.01&&(r=0),this.currentValue=r,this.$emit("update:modelValue",r),this.$emit("on-change",r),this.handleFormItemChange("change",r))}}},UU=["name","value"],zU=["onMousemove","onClick"],$U={key:0},HU={key:1};function GU(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),onMouseleave:o[0]||(o[0]=(...k)=>f.handleMouseleave&&f.handleMouseleave(...k))},[t.createElementVNode("input",{type:"hidden",name:u.name,value:g.currentValue},null,8,UU),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.count,k=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.starCls(k)),onMousemove:O=>f.handleMousemove(k,O),key:k,onClick:O=>f.handleClick(k)},[f.showCharacter?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("span",{class:t.normalizeClass([g.prefixCls+"-star-first"]),type:"half"},[u.character!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(u.character),1)],64)):(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(f.iconClasses),type:"half"},null,2))],2),t.createElementVNode("span",{class:t.normalizeClass([g.prefixCls+"-star-second"])},[u.character!==""?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(u.character),1)],64)):(t.openBlock(),t.createElementBlock("i",{key:1,class:t.normalizeClass(f.iconClasses)},null,2))],2)],64)):(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass([g.prefixCls+"-star-content"]),type:"half"},null,2))],42,zU))),128)),u.showText?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-text"])},[t.renderSlot(r.$slots,"default",{},()=>[t.createElementVNode("span",null,t.toDisplayString(g.currentValue),1),t.createTextVNode(),g.currentValue<=1?(t.openBlock(),t.createElementBlock("span",$U,t.toDisplayString(r.t("i.rate.star")),1)):(t.openBlock(),t.createElementBlock("span",HU,t.toDisplayString(r.t("i.rate.stars")),1))])],2)),[[t.vShow,g.currentValue>0]]):t.createCommentVNode("",!0)],34)}var hE=c(FU,[["render",GU]]);const WU={name:"Result",components:{Icon:E},props:{type:{validator(r){return w(r,["success","error","warning"])}},title:{type:String},desc:{type:String},extra:{type:String}},computed:{iconClasses(){return{"ivu-result-icon-success":this.type==="success","ivu-result-icon-error":this.type==="error","ivu-result-icon-warning":this.type==="warning"}}}},jU={class:"ivu-result"},KU={key:0,class:"ivu-result-title"},qU={key:1,class:"ivu-result-desc"},XU={key:2,class:"ivu-result-extra"},YU={key:3,class:"ivu-result-actions"};function JU(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",jU,[t.createElementVNode("div",{class:t.normalizeClass(["ivu-result-icon",f.iconClasses])},[u.type==="success"?(t.openBlock(),t.createBlock(k,{key:0,type:"ios-checkmark"})):t.createCommentVNode("",!0),u.type==="error"?(t.openBlock(),t.createBlock(k,{key:1,type:"ios-close"})):t.createCommentVNode("",!0),u.type==="warning"?(t.openBlock(),t.createBlock(k,{key:2,type:"ios-information"})):t.createCommentVNode("",!0)],2),u.title||r.$slots.title?(t.openBlock(),t.createElementBlock("div",KU,[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])])):t.createCommentVNode("",!0),u.desc||r.$slots.desc?(t.openBlock(),t.createElementBlock("div",qU,[t.renderSlot(r.$slots,"desc",{},()=>[t.createTextVNode(t.toDisplayString(u.desc),1)])])):t.createCommentVNode("",!0),u.extra||r.$slots.extra?(t.openBlock(),t.createElementBlock("div",XU,[t.renderSlot(r.$slots,"extra",{},()=>[t.createTextVNode(t.toDisplayString(u.extra),1)])])):t.createCommentVNode("",!0),r.$slots.actions?(t.openBlock(),t.createElementBlock("div",YU,[t.renderSlot(r.$slots,"actions")])):t.createCommentVNode("",!0)])}var dE=c(WU,[["render",JU]]);const id="ivu-scroll",ZU={props:["text","active","spinnerHeight"],components:{Spin:qr,Icon:E},computed:{wrapperClasses(){return[`${id}-loader-wrapper`,{[`${id}-loader-wrapper-active`]:this.active}]},spinnerClasses(){return`${id}-spinner`},iconClasses(){return`${id}-spinner-icon`},textClasses(){return`${id}-loader-text`}}};function QU(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapperClasses)},[t.createElementVNode("div",{class:t.normalizeClass(f.spinnerClasses)},[t.createVNode(O,{fix:""},{default:t.withCtx(()=>[t.createVNode(k,{type:"ios-loading",size:"18",class:t.normalizeClass(f.iconClasses)},null,8,["class"]),u.text?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.textClasses)},t.toDisplayString(u.text),3)):t.createCommentVNode("",!0)]),_:1})],2)],2)}var ez=c(ZU,[["render",QU]]);const jc="ivu-scroll",fE={sensitivity:10,minimumStartDragOffset:5},jy=()=>Promise.resolve(),tz={name:"Scroll",mixins:[Pn],components:{loader:ez},props:{height:{type:[Number,String],default:300},onReachTop:{type:Function},onReachBottom:{type:Function},onReachEdge:{type:Function},loadingText:{type:String},distanceToEdge:[Number,Array],stopSlide:{type:Boolean,default:!1}},data(){const r=this.calculateProximityThreshold();return{showTopLoader:!1,showBottomLoader:!1,showBodyLoader:!1,lastScroll:0,reachedTopScrollLimit:!0,reachedBottomScrollLimit:!1,topRubberPadding:0,bottomRubberPadding:0,rubberRollBackTimeout:!1,isLoading:!1,pointerTouchDown:null,touchScroll:!1,handleScroll:()=>{},pointerUpHandler:()=>{},pointerMoveHandler:()=>{},topProximityThreshold:r[0],bottomProximityThreshold:r[1]}},computed:{wrapClasses(){return`${jc}-wrapper`},scrollContainerClasses(){return[`${jc}-container`,{[`${jc}-container-loading`]:this.showBodyLoader&&this.stopSlide}]},slotContainerClasses(){return[`${jc}-content`,{[`${jc}-content-loading`]:this.showBodyLoader}]},loaderClasses(){return`${jc}-loader`},wrapperPadding(){return{paddingTop:this.topRubberPadding+"px",paddingBottom:this.bottomRubberPadding+"px"}},localeLoadingText(){return this.loadingText===void 0?this.t("i.select.loading"):this.loadingText}},methods:{waitOneSecond(){return new Promise(r=>{setTimeout(r,1e3)})},calculateProximityThreshold(){const r=this.distanceToEdge;return typeof r>"u"?[20,20]:Array.isArray(r)?r:[r,r]},onCallback(r){if(this.isLoading=!0,this.showBodyLoader=!0,r>0)this.showTopLoader=!0,this.topRubberPadding=20;else{this.showBottomLoader=!0,this.bottomRubberPadding=20;let _=0;const g=this.$refs.scrollContainer,f=g.scrollTop;for(let k=0;k<20;k++)setTimeout(()=>{_=Math.max(_,this.$refs.bottomLoader.getBoundingClientRect().height),g.scrollTop=f+_},k*50)}const o=[this.waitOneSecond(),this.onReachEdge?this.onReachEdge(r):jy()];o.push(r>0?this.onReachTop?this.onReachTop():jy():this.onReachBottom?this.onReachBottom():jy());let u=setTimeout(()=>{this.reset()},5e3);Promise.all(o).then(()=>{clearTimeout(u),this.reset()})},reset(){["showTopLoader","showBottomLoader","showBodyLoader","isLoading","reachedTopScrollLimit","reachedBottomScrollLimit"].forEach(r=>this[r]=!1),this.lastScroll=0,this.topRubberPadding=0,this.bottomRubberPadding=0,clearInterval(this.rubberRollBackTimeout),this.touchScroll&&setTimeout(()=>{l(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.removeEventListener("touchmove",this.pointerMoveHandler),this.touchScroll=!1},500)},onWheel(r){if(this.isLoading)return;const o=r.wheelDelta?r.wheelDelta:-(r.detail||r.deltaY);this.stretchEdge(o)},stretchEdge(r){if(clearTimeout(this.rubberRollBackTimeout),!this.onReachEdge){if(r>0){if(!this.onReachTop)return}else if(!this.onReachBottom)return}this.rubberRollBackTimeout=setTimeout(()=>{this.isLoading||this.reset()},250),r>0&&this.reachedTopScrollLimit?(this.topRubberPadding+=5-this.topRubberPadding/5,this.topRubberPadding>this.topProximityThreshold&&this.onCallback(1)):r<0&&this.reachedBottomScrollLimit?(this.bottomRubberPadding+=6-this.bottomRubberPadding/4,this.bottomRubberPadding>this.bottomProximityThreshold&&this.onCallback(-1)):this.onScroll()},onScroll(){const r=this.$refs.scrollContainer;if(this.isLoading||!r)return;const o=Math.sign(this.lastScroll-r.scrollTop),u=r.scrollHeight-r.clientHeight-r.scrollTop,_=this.topProximityThreshold<0?this.topProximityThreshold:0,g=this.bottomProximityThreshold<0?this.bottomProximityThreshold:0;o==-1&&u+g<=fE.sensitivity?this.reachedBottomScrollLimit=!0:o>=0&&r.scrollTop+_<=0?this.reachedTopScrollLimit=!0:(this.reachedTopScrollLimit=!1,this.reachedBottomScrollLimit=!1,this.lastScroll=r.scrollTop)},getTouchCoordinates(r){return{x:r.touches[0].pageX,y:r.touches[0].pageY}},onPointerDown(r){if(!this.isLoading){if(r.type=="touchstart"){const o=this.$refs.scrollContainer;this.reachedTopScrollLimit?o.scrollTop=5:this.reachedBottomScrollLimit&&(o.scrollTop-=5)}r.type=="touchstart"&&this.$refs.scrollContainer.scrollTop==0&&(this.$refs.scrollContainer.scrollTop=5),this.pointerTouchDown=this.getTouchCoordinates(r),a(window,"touchend",this.pointerUpHandler),this.$refs.scrollContainer.parentElement.addEventListener("touchmove",o=>{o.stopPropagation(),this.pointerMoveHandler(o)},{passive:!1,useCapture:!0})}},onPointerMove(r){if(!this.pointerTouchDown||this.isLoading)return;const o=this.getTouchCoordinates(r).y-this.pointerTouchDown.y;this.stretchEdge(o),this.touchScroll||Math.abs(o)>fE.minimumStartDragOffset&&(this.touchScroll=!0)},onPointerUp(){this.pointerTouchDown=null}},created(){this.handleScroll=gm(this.onScroll,150,{leading:!1}),this.pointerUpHandler=this.onPointerUp.bind(this),this.pointerMoveHandler=gm(this.onPointerMove,50,{leading:!1})}};function nz(r,o,u,_,g,f){const k=t.resolveComponent("loader");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses),style:{"touch-action":"none"}},[t.createElementVNode("div",{class:t.normalizeClass(f.scrollContainerClasses),style:t.normalizeStyle({height:u.height+"px"}),onScroll:o[0]||(o[0]=(...O)=>g.handleScroll&&g.handleScroll(...O)),onWheel:o[1]||(o[1]=(...O)=>f.onWheel&&f.onWheel(...O)),onTouchstart:o[2]||(o[2]=(...O)=>f.onPointerDown&&f.onPointerDown(...O)),ref:"scrollContainer"},[t.createElementVNode("div",{class:t.normalizeClass(f.loaderClasses),style:t.normalizeStyle({paddingTop:f.wrapperPadding.paddingTop}),ref:"toploader"},[t.createVNode(k,{text:f.localeLoadingText,active:g.showTopLoader},null,8,["text","active"])],6),t.createElementVNode("div",{class:t.normalizeClass(f.slotContainerClasses),ref:"scrollContent"},[t.renderSlot(r.$slots,"default")],2),t.createElementVNode("div",{class:t.normalizeClass(f.loaderClasses),style:t.normalizeStyle({paddingBottom:f.wrapperPadding.paddingBottom}),ref:"bottomLoader"},[t.createVNode(k,{text:f.localeLoadingText,active:g.showBottomLoader},null,8,["text","active"])],6)],38)],2)}var pE=c(tz,[["render",nz]]);const iz="COMPLETE",mE="CANCELED";function rz(r){if(s&&"requestAnimationFrame"in window)return window.requestAnimationFrame(r);setTimeout(r,16)}function gE(r,o,u){r===window?r.scrollTo(o,u):(r.scrollLeft=o,r.scrollTop=u)}function sz(r,o,u){if(!s)return;let _=r.getBoundingClientRect(),g=null,f=null,k=null,O=null,G=null,z=null,j=null,ae=u&&u.left!=null?u.left:.5,_e=u&&u.top!=null?u.top:.5,ye=u&&u.leftOffset!=null?u.leftOffset:0,me=u&&u.topOffset!=null?u.topOffset:0,ie=ae,Pe=_e;if(o===window)z=Math.min(_.width,window.innerWidth),j=Math.min(_.height,window.innerHeight),f=_.left+window.pageXOffset-window.innerWidth*ie+z*ie,k=_.top+window.pageYOffset-window.innerHeight*Pe+j*Pe,f-=ye,k-=me,O=f-window.pageXOffset,G=k-window.pageYOffset;else{z=_.width,j=_.height,g=o.getBoundingClientRect();let At=_.left-(g.left-o.scrollLeft),ut=_.top-(g.top-o.scrollTop);f=At+z*ie-o.clientWidth*ie,k=ut+j*Pe-o.clientHeight*Pe,f=Math.max(Math.min(f,o.scrollWidth-o.clientWidth),0),k=Math.max(Math.min(k,o.scrollHeight-o.clientHeight),0),f-=ye,k-=me,O=f-o.scrollLeft,G=k-o.scrollTop}return{x:f,y:k,differenceX:O,differenceY:G}}function vE(r){rz(function(){let o=r.scrollOption;if(!o)return;let u=sz(o.target,r,o.align),_=Date.now()-o.startTime,g=Math.min(1/o.time*_,1);if(_>o.time+20)return gE(r,u.x,u.y),r.scrollOption=null,o.end(iz);let f=1-o.ease(g);gE(r,u.x-u.differenceX*f,u.y-u.differenceY*f),vE(r)})}function az(r,o,u,_){let g=!o.scrollOption,f=o.scrollOption,k=Date.now(),O;f&&f.end(mE);function G(z){o.scrollOption=null,o.parentElement&&o.parentElement.scrollOption&&o.parentElement.scrollOption.end(z),_(z),o.removeEventListener("touchstart",O)}o.scrollOption={startTime:f?f.startTime:Date.now(),target:r,time:u.time+(f?k-f.startTime:0),ease:u.ease,align:u.align,end:G},O=G.bind(null,mE),o.addEventListener("touchstart",O),g&&vE(o)}function yE(r){if(s)return r===window||(r.scrollHeight!==r.clientHeight||r.scrollWidth!==r.clientWidth)&&getComputedStyle(r).overflow!=="hidden"}function oz(){return!0}function Ky(r,o,u){if(!r)return;typeof o=="function"&&(u=o,o=null),o||(o={}),o.time=isNaN(o.time)?1e3:o.time,o.ease=o.ease||function(G){return 1-Math.pow(1-G,G/2)};let _=r.parentElement,g=0;function f(G){g-=1,!g&&u&&u(G)}let k=o.validTarget||oz,O=o.isScrollable;for(;_;){if(k(_,g)&&(O?O(_,yE):yE(_))&&(g+=1,az(r,_,o,f)),_=_.parentElement,!_)return;_.tagName==="BODY"&&(_=window)}}function lz(r){if(s&&"requestAnimationFrame"in window)return window.requestAnimationFrame(r);setTimeout(r,16)}function qy(r,o,u){if(!r)return;typeof o=="function"&&(u=o,o=null),o||(o={}),o.time=isNaN(o.time)?500:o.time;const _=r.scrollTop,g=o.to||0,f=Math.abs(_-g),k=Math.ceil(f/o.time*50);function O(G,z,j){if(G===z){u&&u();return}let ae=G+j>z?z:G+j;G>z&&(ae=G-j<z?z:G-j),r.scrollTop=ae,lz(()=>O(ae,z,j))}O(_,g,k)}const Ea="ivu-layout-sider";ve();const cz={name:"Sider",emits:["on-collapse","update:modelValue"],props:{modelValue:{type:Boolean,default:!1},width:{type:[Number,String],default:200},collapsedWidth:{type:[Number,String],default:64},hideTrigger:{type:Boolean,default:!1},breakpoint:{type:String,validator(r){return w(r,["xs","sm","md","lg","xl","xxl"])}},collapsible:{type:Boolean,default:!1},defaultCollapsed:{type:Boolean,default:!1},reverseArrow:{type:Boolean,default:!1}},data(){return{prefixCls:Ea,mediaMatched:!1}},computed:{wrapClasses(){return[`${Ea}`,this.siderWidth?"":`${Ea}-zero-width`,this.modelValue?`${Ea}-collapsed`:""]},wrapStyles(){return{width:`${this.siderWidth}px`,minWidth:`${this.siderWidth}px`,maxWidth:`${this.siderWidth}px`,flex:`0 0 ${this.siderWidth}px`}},triggerClasses(){return[`${Ea}-trigger`,this.modelValue?`${Ea}-trigger-collapsed`:""]},childClasses(){return`${this.prefixCls}-children`},zeroWidthTriggerClasses(){return[`${Ea}-zero-width-trigger`,this.reverseArrow?`${Ea}-zero-width-trigger-left`:""]},triggerIconClasses(){return["ivu-icon",`ivu-icon-ios-arrow-${this.reverseArrow?"forward":"back"}`,`${Ea}-trigger-icon`]},siderWidth(){return this.collapsible?this.modelValue?this.mediaMatched?0:parseInt(this.collapsedWidth):parseInt(this.width):this.width},showZeroTrigger(){return this.collapsible?this.mediaMatched&&!this.hideTrigger||parseInt(this.collapsedWidth)===0&&this.modelValue&&!this.hideTrigger:!1},showBottomTrigger(){return this.collapsible?!this.mediaMatched&&!this.hideTrigger:!1}},methods:{toggleCollapse(){let r=this.collapsible?!this.modelValue:!1;this.$emit("update:modelValue",r)},matchMedia(){if(!s)return;let r;window.matchMedia&&(r=window.matchMedia);let o=this.mediaMatched;this.mediaMatched=r(`(max-width: ${de[this.breakpoint]})`).matches,this.mediaMatched!==o&&this.$emit("update:modelValue",this.mediaMatched)},onWindowResize(){this.matchMedia()}},watch:{modelValue(r){this.$emit("on-collapse",r)}},mounted(){this.defaultCollapsed&&this.$emit("update:modelValue",this.defaultCollapsed),this.breakpoint!==void 0&&(a(window,"resize",this.onWindowResize),this.matchMedia())},beforeUnmount(){this.breakpoint!==void 0&&l(window,"resize",this.onWindowResize)}},uz=[t.createElementVNode("i",{class:"ivu-icon ivu-icon-ios-menu"},null,-1)];function hz(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses),style:t.normalizeStyle(f.wrapStyles)},[t.withDirectives(t.createElementVNode("span",{onClick:o[0]||(o[0]=(...k)=>f.toggleCollapse&&f.toggleCollapse(...k)),class:t.normalizeClass(f.zeroWidthTriggerClasses)},uz,2),[[t.vShow,f.showZeroTrigger]]),t.createElementVNode("div",{class:t.normalizeClass(f.childClasses)},[t.renderSlot(r.$slots,"default")],2),t.renderSlot(r.$slots,"trigger",{},()=>[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(f.triggerClasses),onClick:o[1]||(o[1]=(...k)=>f.toggleCollapse&&f.toggleCollapse(...k)),style:t.normalizeStyle({width:f.siderWidth+"px"})},[t.createElementVNode("i",{class:t.normalizeClass(f.triggerIconClasses)},null,2)],6),[[t.vShow,f.showBottomTrigger]])])],6)}var bE=c(cz,[["render",hz]]);const Co="ivu-skeleton-item",dz={name:"SkeletonItem",components:{Icon:E},inject:{SkeletonInstance:{default:null}},props:{animated:{type:Boolean,default:!1},type:{validator(r){return w(r,["circle","square","rect","image"])},default:"rect"},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},width:{type:[String,Number]},height:{type:[String,Number]},block:{type:Boolean,default:!1},imgSrc:{type:String}},data(){return{prefixCls:Co}},computed:{classes(){return[Co,Co+"-"+this.type,Co+"-"+this.type+"-"+this.size,{[Co+"-animated"]:this.animated||!!this.SkeletonInstance&&this.SkeletonInstance.animated,[Co+"-inline"]:!this.block,[Co+"-with-image"]:this.showImage,[Co+"-round"]:!!this.SkeletonInstance&&this.SkeletonInstance.round}]},styles(){const r={};return["rect","image"].includes(this.type)&&(this.width&&(r.width=typeof this.width=="number"?`${this.width}px`:this.width),this.height&&(r.height=typeof this.height=="number"?`${this.height}px`:this.height),this.showImage&&(r.background=`no-repeat url(${this.imgSrc}) center center`,r.backgroundSize="contain")),r},showIcon(){return this.type==="image"&&!this.imgSrc},showImage(){return this.type==="image"&&!!this.imgSrc},iconSize(){let r=16;return this.size==="large"&&(r=32),this.size==="small"&&(r=10),r}}};function fz(r,o,u,_,g,f){const k=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(f.styles)},[f.showIcon?(t.openBlock(),t.createBlock(k,{key:0,class:t.normalizeClass(g.prefixCls+"-image-icon"),type:"ios-image",size:f.iconSize},null,8,["class","size"])):t.createCommentVNode("",!0)],6)}var Xy=c(dz,[["render",fz]]);const kl="ivu-skeleton",pz={name:"Skeleton",components:{SkeletonItem:Xy,Row:fo,Col:Js},provide(){return{SkeletonInstance:this}},props:{animated:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},round:{type:Boolean,default:!1},paragraph:{validator(r){return typeof r=="number"?r>=1:typeof r.rows=="number"&&r.rows>=1},type:[Number,Object],default:3},title:{validator(r){return typeof r=="object"&&r.width?["number","string"].includes(typeof r.width):!0},type:[Boolean,Object],default:!0},avatar:{validator(r){if(typeof r=="object"){if(r.type)return w(r.type,["circle","square"]);if(r.size)return w(r.size,["small","large","default"])}return!0},type:[Boolean,Object],default:!1}},data(){return{prefixCls:kl}},computed:{classes(){return[kl,{[kl+"-with-title"]:this.showTitle,[kl+"-with-avatar"]:this.showAvatar}]},rows(){return typeof this.paragraph=="number"?this.paragraph:this.paragraph.rows},rowsCount(){return this.rows+Number(this.showTitle)},showTitle(){return!!this.title},titleWidth(){return typeof this.title=="object"&&this.title.width?typeof this.title.width=="string"?this.title.width:`${this.title.width}px`:""},showAvatar(){return!!this.avatar},avatarType(){return typeof this.avatar=="object"&&this.avatar.type?this.avatar.type:"circle"},avatarSize(){return typeof this.avatar=="object"&&this.avatar.size?this.avatar.size:!this.$VIEWUI||this.$VIEWUI.size===""?"default":this.$VIEWUI.size}},methods:{rowClasses(r){return[kl+"-item-inner",{[kl+"-item-round"]:this.round,[kl+"-item-title"]:this.showTitle&&r===1}]},rowWidth(r){if(this.showTitle&&r===1)return this.titleWidth||"38%";if(typeof this.paragraph=="object"){if(typeof this.paragraph.width=="string")return this.paragraph.width;if(typeof this.paragraph.width=="number")return`${this.paragraph.width}px`;const o=r-1-Number(this.showTitle);if(Array.isArray(this.paragraph.width)&&this.paragraph.width[o])return typeof this.paragraph.width[o]=="number"?`${this.paragraph.width[o]}px`:this.paragraph.width[o]}return r===this.rowsCount?"62%":"100%"}}};function mz(r,o,u,_,g,f){const k=t.resolveComponent("SkeletonItem"),O=t.resolveComponent("Col"),G=t.resolveComponent("Row");return u.loading?(t.openBlock(),t.createElementBlock("div",t.mergeProps({key:0},r.$attrs,{class:f.classes}),[u.loading?t.renderSlot(r.$slots,"template",{key:0},()=>[t.createVNode(G,null,{default:t.withCtx(()=>[f.showAvatar?(t.openBlock(),t.createBlock(O,{key:0,flex:"0"},{default:t.withCtx(()=>[t.createVNode(k,{type:f.avatarType,size:f.avatarSize,animated:u.animated,class:t.normalizeClass(g.prefixCls+"-item-avatar")},null,8,["type","size","animated","class"])]),_:1})):t.createCommentVNode("",!0),t.createVNode(O,{flex:"1"},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.rowsCount,z=>(t.openBlock(),t.createBlock(k,{key:z,class:t.normalizeClass(f.rowClasses(z)),animated:u.animated,width:f.rowWidth(z),block:""},null,8,["class","animated","width"]))),128))]),_:1})]),_:1})]):t.createCommentVNode("",!0)],16)):t.renderSlot(r.$slots,"default",t.normalizeProps(t.mergeProps({key:1},r.$attrs)))}var _E=c(pz,[["render",mz]]),gz={name:"SliderMarker",props:{mark:{type:[String,Object]}},render(){let r=typeof this.mark=="string"?this.mark:[this.mark.label];return t.h("div",{class:"ivu-slider-marks-item",style:this.mark.style||{}},r)}};const Ma="ivu-slider",vz={name:"Slider",mixins:[tn],emits:["update:modelValue","on-input","on-change"],components:{InputNumber:Dy,Tooltip:_a,SliderMarker:gz},inject:{ModalInstance:{default:null},DrawerInstance:{default:null}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},disabled:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},inputSize:{type:String,default:"default",validator(r){return w(r,["small","large","default"])}},showStops:{type:Boolean,default:!1},tipFormat:{type:Function,default(r){return r}},showTip:{type:String,default:"hover",validator(r){return w(r,["hover","always","never"])}},name:{type:String},activeChange:{type:Boolean,default:!0},marks:{type:Object}},data(){let r=this.checkLimits(Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]);return this.range&&this.modelValue===null&&(r=[0,0]),{prefixCls:Ma,currentValue:r,dragging:!1,pointerDown:"",startX:0,currentX:0,startPos:0,oldValue:[...r],valueIndex:{min:0,max:1},sliderWidth:0,isValueNull:!1,id:te(6)}},watch:{modelValue(r){r===null&&(this.isValueNull=!0),r=this.checkLimits(Array.isArray(r)?r:[r]),!this.dragging&&(r[0]!==this.currentValue[0]||r[1]!==this.currentValue[1])&&(this.isValueNull&&this.range?this.currentValue=[0,0]:this.currentValue=r)},exportValue(r){t.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()});const o=this.range?r:r[0];this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",o),this.$emit("on-input",o)}},computed:{classes(){return[`${Ma}`,{[`${Ma}-input`]:this.showInput&&!this.range,[`${Ma}-range`]:this.range,[`${Ma}-disabled`]:this.itemDisabled}]},minButtonClasses(){return[`${Ma}-button`,{[`${Ma}-button-dragging`]:this.pointerDown==="min"}]},maxButtonClasses(){return[`${Ma}-button`,{[`${Ma}-button-dragging`]:this.pointerDown==="max"}]},exportValue(){const r=(String(this.step).split(".")[1]||"").length;return this.currentValue.map(o=>Number(o.toFixed(r)))},minPosition(){return(this.currentValue[0]-this.min)/this.valueRange*100},maxPosition:function(){return(this.currentValue[1]-this.min)/this.valueRange*100},barStyle(){const r={width:(this.currentValue[0]-this.min)/this.valueRange*100+"%"};return this.range&&(r.left=(this.currentValue[0]-this.min)/this.valueRange*100+"%",r.width=(this.currentValue[1]-this.currentValue[0])/this.valueRange*100+"%"),r},stops(){let r=this.valueRange/this.step,o=[],u=100*this.step/this.valueRange;for(let _=1;_<r;_++)o.push(_*u);return o},markList(){return this.marks?Object.keys(this.marks).map(parseFloat).sort((r,o)=>r-o).filter(r=>r<=this.max&&r>=this.min).map(r=>({point:r,position:(r-this.min)*100/(this.max-this.min),mark:this.marks[r]})):[]},tipDisabled(){return this.tipFormat(this.currentValue[0])===null||this.showTip==="never"},valueRange(){return this.max-this.min},firstPosition(){return this.currentValue[0]},secondPosition(){return this.currentValue[1]}},methods:{getPointerX(r){return r.type.indexOf("touch")!==-1?r.touches[0].clientX:r.clientX},checkLimits([r,o]){return r=Math.max(this.min,r),r=Math.min(this.max,r),o=Math.max(this.min,r,o),o=Math.min(this.max,o),[r,o]},getCurrentValue(r,o){if(this.itemDisabled)return;const u=this.valueIndex[o];if(typeof u<"u")return this.currentValue[u]},onKeyLeft(r,o){const u=this.getCurrentValue(r,o);Number.isFinite(u)&&this.changeButtonPosition(u-this.step,o)},onKeyRight(r,o){const u=this.getCurrentValue(r,o);Number.isFinite(u)&&this.changeButtonPosition(u+this.step,o)},onPointerDown(r,o){this.itemDisabled||(r.preventDefault(),this.pointerDown=o,this.onPointerDragStart(r),a(window,"mousemove",this.onPointerDrag),a(window,"touchmove",this.onPointerDrag),a(window,"mouseup",this.onPointerDragEnd),a(window,"touchend",this.onPointerDragEnd))},onPointerDragStart(r){this.dragging=!1,this.startX=this.getPointerX(r),this.startPos=this[`${this.pointerDown}Position`]*this.valueRange/100+this.min},onPointerDrag(r){this.dragging=!0,this.$refs[`${this.pointerDown}Tooltip`].visible=!0,this.currentX=this.getPointerX(r);const o=(this.currentX-this.startX)/this.sliderWidth*this.valueRange;this.changeButtonPosition(this.startPos+o)},onPointerDragEnd(){this.dragging&&(this.dragging=!1,this.$refs[`${this.pointerDown}Tooltip`].visible=!1,this.emitChange()),this.pointerDown="",l(window,"mousemove",this.onPointerDrag),l(window,"touchmove",this.onPointerDrag),l(window,"mouseup",this.onPointerDragEnd),l(window,"touchend",this.onPointerDragEnd)},changeButtonPosition(r,o){const u=o||this.pointerDown,_=u==="min"?0:1;u==="min"?r=this.checkLimits([r,this.max])[0]:r=this.checkLimits([this.min,r])[1];const g=this.handleDecimal(r,this.step),f=this.currentValue;f[_]=r-g,this.range&&(u==="min"&&f[0]>f[1]&&(f[1]=f[0]),u==="max"&&f[0]>f[1]&&(f[0]=f[1])),this.currentValue=[...f],this.dragging||this.currentValue[_]!==this.oldValue[_]&&(this.emitChange(),this.oldValue[_]=this.currentValue[_])},handleDecimal(r,o){if(o<1){let u=o.toString(),_=1,g;try{g=u.split(".")[1].length}catch{g=0}return _=Math.pow(10,g),r*_%(o*_)/_}else return r%o},emitChange(){const r=this.range?this.exportValue:this.exportValue[0];this.$emit("on-change",r),this.handleFormItemChange("change",r)},sliderClick(r){if(this.itemDisabled)return;const o=this.getPointerX(r),u=this.$refs.slider.getBoundingClientRect().left;let _=(o-u)/this.sliderWidth*this.valueRange+this.min,g=_/this.valueRange*100;!this.range||g<=this.minPosition?this.changeButtonPosition(_,"min"):g>=this.maxPosition?this.changeButtonPosition(_,"max"):this.changeButtonPosition(_,_-this.firstPosition<=this.secondPosition-_?"min":"max")},handleInputChange(r){this.currentValue=[r===0?0:r||this.min,this.currentValue[1]],this.emitChange()},handleFocus(r){this.$refs[`${r}Tooltip`].handleShowPopper()},handleBlur(r){this.$refs[`${r}Tooltip`].handleClosePopper()},handleSetSliderWidth(){this.sliderWidth=parseInt(N(this.$refs.slider,"width"),10)},handleOnVisibleChange(r){r&&this.showTip==="always"&&(this.$refs.minTooltip.doDestroy(),this.range&&this.$refs.maxTooltip.doDestroy(),t.nextTick(()=>{this.$refs.minTooltip.updatePopper(),this.range&&this.$refs.maxTooltip.updatePopper()}))},addSlider(r){const o=this[r];!o||(o.sliderList||(o.sliderList=[]),o.sliderList.push({id:this.id,slider:this}))},removeSlider(r){const o=this[r];if(!o||!o.sliderList)return;const u=o.sliderList.findIndex(_=>_.id===this.id);o.sliderList.splice(u,1)}},mounted(){this.addSlider("ModalInstance"),this.addSlider("DrawerInstance"),this.observer=Gc(),this.observer.listenTo(this.$refs.slider,this.handleSetSliderWidth)},beforeUnmount(){this.removeSlider("ModalInstance"),this.removeSlider("DrawerInstance"),this.observer.removeListener(this.$refs.slider,this.handleSetSliderWidth)}},yz=["name","value"],bz={class:"ivu-slider-marks"};function _z(r,o,u,_,g,f){const k=t.resolveComponent("Input-number"),O=t.resolveComponent("SliderMarker"),G=t.resolveComponent("Tooltip");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[!u.range&&u.showInput?(t.openBlock(),t.createBlock(k,{key:0,min:u.min,size:u.inputSize,max:u.max,step:u.step,modelValue:f.exportValue[0],disabled:r.itemDisabled,"active-change":u.activeChange,onOnChange:f.handleInputChange},null,8,["min","size","max","step","modelValue","disabled","active-change","onOnChange"])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-wrap"]),ref:"slider",onClick:o[19]||(o[19]=t.withModifiers((...z)=>f.sliderClick&&f.sliderClick(...z),["self"]))},[t.createElementVNode("input",{type:"hidden",name:u.name,value:f.exportValue},null,8,yz),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-bar"]),style:t.normalizeStyle(f.barStyle),onClick:o[0]||(o[0]=t.withModifiers((...z)=>f.sliderClick&&f.sliderClick(...z),["self"]))},null,6),u.showStops?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(f.stops,z=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls+"-stop"]),key:z,style:t.normalizeStyle({left:z+"%"}),onClick:o[1]||(o[1]=t.withModifiers((...j)=>f.sliderClick&&f.sliderClick(...j),["self"]))},null,6))),128)):t.createCommentVNode("",!0),f.markList.length>0?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.markList,(z,j)=>(t.openBlock(),t.createElementBlock("div",{key:j,class:t.normalizeClass([g.prefixCls+"-stop"]),style:t.normalizeStyle({left:z.position+"%"}),onClick:o[2]||(o[2]=t.withModifiers((...ae)=>f.sliderClick&&f.sliderClick(...ae),["self"]))},null,6))),128)),t.createElementVNode("div",bz,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.markList,(z,j)=>(t.openBlock(),t.createBlock(O,{key:j,mark:z.mark,style:t.normalizeStyle({left:z.position+"%"}),onClick:f.sliderClick},null,8,["mark","style","onClick"]))),128))])],64)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-button-wrap"]),style:t.normalizeStyle({left:f.minPosition+"%"}),onTouchstart:o[9]||(o[9]=z=>f.onPointerDown(z,"min")),onMousedown:o[10]||(o[10]=z=>f.onPointerDown(z,"min"))},[t.createVNode(G,{controlled:g.pointerDown==="min",placement:"top",content:u.tipFormat(f.exportValue[0]),disabled:f.tipDisabled,always:u.showTip==="always",ref:"minTooltip"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(f.minButtonClasses),tabindex:"0",onFocus:o[3]||(o[3]=z=>f.handleFocus("min")),onBlur:o[4]||(o[4]=z=>f.handleBlur("min")),onKeydown:[o[5]||(o[5]=t.withKeys(z=>f.onKeyLeft(z,"min"),["left"])),o[6]||(o[6]=t.withKeys(z=>f.onKeyLeft(z,"min"),["down"])),o[7]||(o[7]=t.withKeys(z=>f.onKeyRight(z,"min"),["right"])),o[8]||(o[8]=t.withKeys(z=>f.onKeyRight(z,"min"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38),u.range?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass([g.prefixCls+"-button-wrap"]),style:t.normalizeStyle({left:f.maxPosition+"%"}),onTouchstart:o[17]||(o[17]=z=>f.onPointerDown(z,"max")),onMousedown:o[18]||(o[18]=z=>f.onPointerDown(z,"max"))},[t.createVNode(G,{controlled:g.pointerDown==="max",placement:"top",content:u.tipFormat(f.exportValue[1]),disabled:f.tipDisabled,always:u.showTip==="always",ref:"maxTooltip"},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(f.maxButtonClasses),tabindex:"0",onFocus:o[11]||(o[11]=z=>f.handleFocus("max")),onBlur:o[12]||(o[12]=z=>f.handleBlur("max")),onKeydown:[o[13]||(o[13]=t.withKeys(z=>f.onKeyLeft(z,"max"),["left"])),o[14]||(o[14]=t.withKeys(z=>f.onKeyLeft(z,"max"),["down"])),o[15]||(o[15]=t.withKeys(z=>f.onKeyRight(z,"max"),["right"])),o[16]||(o[16]=t.withKeys(z=>f.onKeyRight(z,"max"),["up"]))]},null,34)]),_:1},8,["controlled","content","disabled","always"])],38)):t.createCommentVNode("",!0)],2)],2)}var xE=c(vz,[["render",_z]]);const xz={small:8,default:16,large:24},wE={name:"Space",props:{size:{type:[String,Number,Array],validator(r){const o=["small","large","default"];return typeof r=="string"?w(r,o):Array.isArray(r)?r.length>0&&r.every(u=>typeof u=="number"||w(u,o)):!0},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||!r.$VIEWUI.space||r.$VIEWUI.space.size===""?"small":r.$VIEWUI.space.size}},direction:{type:String,validator(r){return w(r,["horizontal","vertical"])},default:"horizontal"},align:{type:String,validator(r){return w(r,["start","end","center","baseline","stretch"])}},wrap:{type:Boolean,default:!1},split:{type:Boolean,default:!1},type:{type:String,validator(r){return w(r,["inline-flex","flex"])},default:"inline-flex"}},computed:{mergedAlign(){if(!this.align){if(this.direction==="horizontal")return"center";if(this.type==="flex")return"stretch"}return this.align},classes(){return["ivu-space",`ivu-space-${this.direction}`,{"ivu-space-flex":this.type==="flex","ivu-space-wrap":this.wrap,[`ivu-space-${this.mergedAlign}`]:this.mergedAlign}]},styles(){const r={};return["number","string"].includes(typeof this.size)&&(r.gap=this.getSize(this.size)),Array.isArray(this.size)&&(this.size.length===1?r.columnGap=this.getSize(this.size[0]):this.size.length>1&&(r.columnGap=this.getSize(this.size[0]),r.rowGap=this.getSize(this.size[1]))),r}},methods:{getSize(r){return`${typeof r=="string"?xz[r]:r||0}px`},filterEmpty(r=[]){const o=[];return r.forEach(u=>{Array.isArray(u)?o.push(...u):u.type===t.Fragment?o.push(...u.children):o.push(u)}),o.filter(u=>!this.isEmptyElement(u))},isEmptyElement(r){return r&&(r.type===t.Comment||r.type===t.Fragment&&r.children.length===0||r.type===t.Text&&r.children.trim()==="")}},render(){const r=this.filterEmpty(this.$slots.default?this.$slots.default():[]),o=r.length;if(o===0)return null;let u=null;return this.split&&!this.$slots.split?u=t.h(um,{type:"vertical"}):this.$slots.split&&(u=this.$slots.split()),t.h("div",{class:this.classes,style:this.styles},r.map((_,g)=>{const f=t.h("div",{class:"ivu-space-item"},[_]);return u&&g+1<o?[f,t.h("div",{class:"ivu-space-split"},[u])]:f}))}},wz={name:"Trigger",props:{mode:String},data(){return{prefix:"ivu-split-trigger",initOffset:0}},computed:{isVertical(){return this.mode==="vertical"},classes(){return[this.prefix,this.isVertical?`${this.prefix}-vertical`:`${this.prefix}-horizontal`]},barConClasses(){return[`${this.prefix}-bar-con`,this.isVertical?"vertical":"horizontal"]}}};function Cz(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.createElementVNode("div",{class:t.normalizeClass(f.barConClasses)},[o[0]||(t.setBlockTracking(-1),o[0]=(t.openBlock(),t.createElementBlock(t.Fragment,null,t.renderList(8,k=>t.createElementVNode("i",{class:t.normalizeClass(`${g.prefix}-bar`),key:`trigger-${k}`},null,2)),64)),t.setBlockTracking(1),o[0])],2)],2)}var Sz=c(wz,[["render",Cz]]);const Ez={name:"Split",components:{Trigger:Sz},emits:["update:modelValue","on-move-start","on-moving","on-move-end"],props:{modelValue:{type:[Number,String],default:.5},mode:{validator(r){return w(r,["horizontal","vertical"])},default:"horizontal"},min:{type:[Number,String],default:"40px"},max:{type:[Number,String],default:"40px"}},data(){return{prefix:"ivu-split",offset:0,oldOffset:0,isMoving:!1,computedMin:0,computedMax:0,currentValue:.5}},computed:{wrapperClasses(){return[`${this.prefix}-wrapper`,this.isMoving?"no-select":""]},paneClasses(){return[`${this.prefix}-pane`,{[`${this.prefix}-pane-moving`]:this.isMoving}]},isHorizontal(){return this.mode==="horizontal"},anotherOffset(){return 100-this.offset},valueIsPx(){return typeof this.modelValue=="string"},offsetSize(){return this.isHorizontal?"offsetWidth":"offsetHeight"}},methods:{px2percent(r,o){return parseFloat(r)/parseFloat(o)},getComputedThresholdValue(r){let o=this.$refs.outerWrapper[this.offsetSize];return this.valueIsPx?typeof this[r]=="string"?this[r]:o*this[r]:typeof this[r]=="string"?this.px2percent(this[r],o):this[r]},getMin(r,o){return this.valueIsPx?`${Math.min(parseFloat(r),parseFloat(o))}px`:Math.min(r,o)},getMax(r,o){return this.valueIsPx?`${Math.max(parseFloat(r),parseFloat(o))}px`:Math.max(r,o)},getAnotherOffset(r){let o=0;return this.valueIsPx?o=`${this.$refs.outerWrapper[this.offsetSize]-parseFloat(r)}px`:o=1-r,o},handleMove(r){let o=(this.isHorizontal?r.pageX:r.pageY)-this.initOffset,u=this.$refs.outerWrapper[this.offsetSize],_=this.valueIsPx?`${parseFloat(this.oldOffset)+o}px`:this.px2percent(u*this.oldOffset+o,u),g=this.getAnotherOffset(_);parseFloat(_)<=parseFloat(this.computedMin)&&(_=this.getMax(_,this.computedMin)),parseFloat(g)<=parseFloat(this.computedMax)&&(_=this.getAnotherOffset(this.getMax(g,this.computedMax))),r.atMin=this.modelValue===this.computedMin,r.atMax=this.valueIsPx?this.getAnotherOffset(this.modelValue)===this.computedMax:this.getAnotherOffset(this.modelValue).toFixed(5)===this.computedMax.toFixed(5),this.$emit("update:modelValue",_),this.$emit("on-moving",r)},handleUp(){this.isMoving=!1,l(document,"mousemove",this.handleMove),l(document,"mouseup",this.handleUp),this.$emit("on-move-end")},handleMousedown(r){this.initOffset=this.isHorizontal?r.pageX:r.pageY,this.oldOffset=this.modelValue,this.isMoving=!0,a(document,"mousemove",this.handleMove),a(document,"mouseup",this.handleUp),this.$emit("on-move-start")},computeOffset(){t.nextTick(()=>{this.computedMin=this.getComputedThresholdValue("min"),this.computedMax=this.getComputedThresholdValue("max"),this.offset=(this.valueIsPx?this.px2percent(this.modelValue,this.$refs.outerWrapper[this.offsetSize]):this.modelValue)*1e4/100})}},watch:{modelValue(r){r!==this.currentValue&&(this.currentValue=r,this.computeOffset())}},mounted(){t.nextTick(()=>{this.computeOffset()}),a(window,"resize",this.computeOffset)},beforeUnmount(){l(window,"resize",this.computeOffset)}};function Mz(r,o,u,_,g,f){const k=t.resolveComponent("trigger");return t.openBlock(),t.createElementBlock("div",{ref:"outerWrapper",class:t.normalizeClass(f.wrapperClasses)},[f.isHorizontal?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(`${g.prefix}-horizontal`)},[t.createElementVNode("div",{style:t.normalizeStyle({right:`${f.anotherOffset}%`}),class:t.normalizeClass(["left-pane",f.paneClasses])},[t.renderSlot(r.$slots,"left")],6),t.createElementVNode("div",{class:t.normalizeClass(`${g.prefix}-trigger-con`),style:t.normalizeStyle({left:`${g.offset}%`}),onMousedown:o[0]||(o[0]=(...O)=>f.handleMousedown&&f.handleMousedown(...O))},[t.renderSlot(r.$slots,"trigger",{},()=>[t.createVNode(k,{mode:"vertical"})])],38),t.createElementVNode("div",{style:t.normalizeStyle({left:`${g.offset}%`}),class:t.normalizeClass(["right-pane",f.paneClasses])},[t.renderSlot(r.$slots,"right")],6)],2)):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(`${g.prefix}-vertical`)},[t.createElementVNode("div",{style:t.normalizeStyle({bottom:`${f.anotherOffset}%`}),class:t.normalizeClass(["top-pane",f.paneClasses])},[t.renderSlot(r.$slots,"top")],6),t.createElementVNode("div",{class:t.normalizeClass(`${g.prefix}-trigger-con`),style:t.normalizeStyle({top:`${g.offset}%`}),onMousedown:o[1]||(o[1]=(...O)=>f.handleMousedown&&f.handleMousedown(...O))},[t.renderSlot(r.$slots,"trigger",{},()=>[t.createVNode(k,{mode:"horizontal"})])],38),t.createElementVNode("div",{style:t.normalizeStyle({top:`${g.offset}%`}),class:t.normalizeClass(["bottom-pane",f.paneClasses])},[t.renderSlot(r.$slots,"bottom")],6)],2))],2)}var CE=c(Ez,[["render",Mz]]);const Kc="ivu-steps",SE="ivu-icon",Tz={name:"Step",inject:["StepsInstance"],props:{status:{validator(r){return w(r,["wait","process","finish","error"])}},title:{type:String,default:""},content:{type:String},icon:{type:String}},data(){return{prefixCls:Kc,id:te(6)}},computed:{wrapClasses(){return[`${Kc}-item`,`${Kc}-status-${this.currentStatus}`,{[`${Kc}-custom`]:!!this.icon||!!this.$slots.icon,[`${Kc}-next-error`]:this.nextError}]},iconClasses(){let r="";return this.icon?r=this.icon:this.currentStatus==="finish"?r="ios-checkmark":this.currentStatus==="error"&&(r="ios-close"),[`${Kc}-icon`,`${SE}`,{[`${SE}-${r}`]:r!==""}]},stepNumber(){return this.StepsInstance.steps.findIndex(r=>r.id===this.id)+1},total(){return this.StepsInstance.direction==="horizontal"?this.StepsInstance.steps.length:1},currentStatus(){let r="";if(this.status)r=this.status;else{const o=this.StepsInstance,u=o.current,_=o.steps.findIndex(g=>g.id===this.id);_===u?o.status!=="error"?r="process":r="error":_<u?r="finish":r="wait"}return r},nextError(){let r=!1;const o=this.StepsInstance,u=o.steps.findIndex(_=>_.id===this.id);return u+1<o.steps.length&&o.steps[u+1].currentStatus==="error"&&(r=!0),r}},beforeMount(){this.StepsInstance.addStep(this.id,this)},beforeUnmount(){this.StepsInstance.removeStep(this.id)}},kz=[t.createElementVNode("i",null,null,-1)],Az={key:0},Pz={key:1,class:"ivu-steps-icon"};function Iz(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses)},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-tail"])},kz,2),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-head"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-head-inner"])},[!u.icon&&!r.$slots.icon&&f.currentStatus!=="finish"&&f.currentStatus!=="error"?(t.openBlock(),t.createElementBlock("span",Az,t.toDisplayString(f.stepNumber),1)):r.$slots.icon?(t.openBlock(),t.createElementBlock("span",Pz,[t.renderSlot(r.$slots,"icon")])):(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(f.iconClasses)},null,2))],2)],2),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-main"])},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-title"])},[t.renderSlot(r.$slots,"title",{},()=>[t.createTextVNode(t.toDisplayString(u.title),1)])],2),u.content||r.$slots.content?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-content"])},[t.renderSlot(r.$slots,"content",{},()=>[t.createTextVNode(t.toDisplayString(u.content),1)])],2)):t.createCommentVNode("",!0)],2)],2)}var EE=c(Tz,[["render",Iz]]);const Yy="ivu-steps",Nz={name:"Steps",provide(){return{StepsInstance:this}},props:{current:{type:Number,default:0},status:{validator(r){return w(r,["wait","process","finish","error"])},default:"process"},size:{validator(r){return w(r,["small"])}},direction:{validator(r){return w(r,["horizontal","vertical"])},default:"horizontal"}},data(){return{steps:[]}},computed:{classes(){return[`${Yy}`,`${Yy}-${this.direction}`,{[`${Yy}-${this.size}`]:!!this.size}]},children(){return this.steps.map(r=>r.step)}},methods:{addStep(r,o){this.steps.push({id:r,step:o})},removeStep(r){const o=this.steps.findIndex(u=>u.id===r);this.steps.splice(o,1)}}};function Rz(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes)},[t.renderSlot(r.$slots,"default")],2)}var ME=c(Nz,[["render",Rz]]);const Al="ivu-menu",Dz={name:"Submenu",mixins:[Fy,Ms],components:{Icon:E,Drop:je,CollapseTransition:Gy},provide(){return{SubmenuInstance:this}},props:{name:{type:[String,Number],required:!0},disabled:{type:Boolean,default:!1}},data(){return{prefixCls:Al,active:!1,opened:!1,dropWidth:parseFloat(N(this.$el,"width")),id:te(6),childSubmenuList:[]}},computed:{classes(){return[`${Al}-submenu`,{[`${Al}-item-active`]:this.active&&!this.hasParentSubmenu,[`${Al}-opened`]:this.opened,[`${Al}-submenu-disabled`]:this.disabled,[`${Al}-submenu-has-parent-submenu`]:this.hasParentSubmenu,[`${Al}-child-item-active`]:this.active}]},accordion(){return this.menu.accordion},dropStyle(){let r={};return this.dropWidth&&(r.minWidth=`${this.dropWidth}px`),r},titleStyle(){return this.hasParentSubmenu&&this.mode!=="horizontal"?{paddingLeft:43+(this.parentSubmenuNum-1)*24+"px"}:{}},arrowType(){const r=this.globalConfig;let o="ios-arrow-down";return r&&(r.menu.customArrow?o="":r.menu.arrow&&(o=r.menu.arrow)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.menu.customArrow&&(o=r.menu.customArrow),o},arrowSize(){const r=this.globalConfig;let o="";return r&&r.menu.arrowSize&&(o=r.menu.arrowSize),o}},methods:{handleMouseenter(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!0},250))},handleMouseleave(){this.disabled||this.mode!=="vertical"&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.menu.updateOpenKeys(this.name),this.opened=!1},150))},handleClick(){if(this.disabled||this.mode==="horizontal")return;const r=this.opened;this.opened=!r,this.menu.updateOpenKeys(this.name)},addSubmenu(){const r=this.MenuInstance;r.submenuList||(r.submenuList=[]),r.submenuList.push({id:this.id,submenu:this});const o=B(this,"Submenu");o&&(o.childSubmenuList||(o.childSubmenuList=[]),o.childSubmenuList.push({id:this.id,submenu:this}))},removeSubmenu(){const r=this.MenuInstance;if(r.submenuList&&r.submenuList.length){const u=r.submenuList.findIndex(_=>_.id===this.id);r.submenuList.splice(u,1)}const o=B(this,"Submenu");if(o&&o.childSubmenuList&&o.childSubmenuList.length){const u=o.childSubmenuList.findIndex(_=>_.id===this.id);o.childSubmenuList.splice(u,1)}},handleMenuItemSelect(r){this.mode==="horizontal"&&(this.opened=!1),this.MenuInstance.handleMenuItemSelect(r)},handleUpdateActiveName(r){B(this,"Submenu")&&this.SubmenuInstance.handleUpdateActiveName(r),this.childSubmenuList&&this.childSubmenuList.length&&this.childSubmenuList.map(o=>o.submenu).forEach(o=>{o.active=!1}),this.active=r}},watch:{mode(r){r==="horizontal"&&this.$refs.drop.update()},opened(r){this.mode!=="vertical"&&(r?(this.dropWidth=parseFloat(N(this.$el,"width")),this.$refs.drop.update()):this.$refs.drop.destroy())}},mounted(){this.addSubmenu()},beforeUnmount(){this.removeSubmenu()}};function Lz(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("collapse-transition"),G=t.resolveComponent("Drop");return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.classes),onMouseenter:o[1]||(o[1]=(...z)=>f.handleMouseenter&&f.handleMouseenter(...z)),onMouseleave:o[2]||(o[2]=(...z)=>f.handleMouseleave&&f.handleMouseleave(...z))},[t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-submenu-title"]),ref:"reference",onClick:o[0]||(o[0]=t.withModifiers((...z)=>f.handleClick&&f.handleClick(...z),["stop"])),style:t.normalizeStyle(f.titleStyle)},[t.renderSlot(r.$slots,"title"),t.createVNode(k,{type:f.arrowType,custom:f.customArrowType,size:f.arrowSize,class:t.normalizeClass([g.prefixCls+"-submenu-title-icon"])},null,8,["type","custom","size","class"])],6),r.mode==="vertical"?(t.openBlock(),t.createBlock(O,{key:0,ready:r.menu.ready},{default:t.withCtx(()=>[t.withDirectives(t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls])},[t.renderSlot(r.$slots,"default")],2),[[t.vShow,g.opened]])]),_:3},8,["ready"])):t.createCommentVNode("",!0),r.mode==="horizontal"?(t.openBlock(),t.createBlock(G,{key:1,ref:"drop",visible:g.opened,placement:"bottom","transition-name":"slide-up",styles:f.dropStyle},{default:t.withCtx(()=>[t.createElementVNode("ul",{class:t.normalizeClass([g.prefixCls+"-drop-list"])},[t.renderSlot(r.$slots,"default")],2)]),_:3},8,["visible","styles"])):t.createCommentVNode("",!0)],34)}var TE=c(Dz,[["render",Lz]]);const kE={name:"Submit",inject:["LoginInstance"],props:{},methods:{handleSubmit(){this.LoginInstance.handleSubmit()}},render(){const r=Object.assign({size:"large",type:"primary",long:!0},this.$attrs),o=t.h(ar,{...r,onClick:this.handleSubmit},this.$slots.default||(()=>""));return t.h("div",{class:"ivu-login-submit"},[o])}},qc="ivu-switch",Bz={name:"iSwitch",mixins:[tn],emits:["update:modelValue","on-change"],props:{modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},size:{validator(r){return w(r,["large","small","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},name:{type:String},loading:{type:Boolean,default:!1},trueColor:{type:String},falseColor:{type:String},beforeChange:Function},data(){return{currentValue:this.modelValue}},computed:{wrapClasses(){return[`${qc}`,{[`${qc}-checked`]:this.currentValue===this.trueValue,[`${qc}-disabled`]:this.itemDisabled,[`${qc}-${this.size}`]:!!this.size,[`${qc}-loading`]:this.loading}]},wrapStyles(){let r={};return this.trueColor&&this.currentValue===this.trueValue?(r["border-color"]=this.trueColor,r["background-color"]=this.trueColor):this.falseColor&&this.currentValue===this.falseValue&&(r["border-color"]=this.falseColor,r["background-color"]=this.falseColor),r},innerClasses(){return`${qc}-inner`}},methods:{handleToggle(){const r=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=r,this.$emit("update:modelValue",r),this.$emit("on-change",r),this.handleFormItemChange("change",r)},toggle(r){if(r.preventDefault(),this.itemDisabled||this.loading)return!1;if(!this.beforeChange)return this.handleToggle();const o=this.beforeChange();o&&o.then?o.then(()=>{this.handleToggle()}):this.handleToggle()}},watch:{modelValue(r){if(r!==this.trueValue&&r!==this.falseValue&&r!==null)throw"Value should be trueValue or falseValue.";this.currentValue=r}}},Oz=["name","value"];function Vz(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("span",{tabindex:"0",class:t.normalizeClass(f.wrapClasses),style:t.normalizeStyle(f.wrapStyles),onClick:o[0]||(o[0]=(...k)=>f.toggle&&f.toggle(...k)),onKeydown:o[1]||(o[1]=t.withKeys((...k)=>f.toggle&&f.toggle(...k),["space"]))},[t.createElementVNode("input",{type:"hidden",name:u.name,value:g.currentValue},null,8,Oz),t.createElementVNode("span",{class:t.normalizeClass(f.innerClasses)},[g.currentValue===u.trueValue?t.renderSlot(r.$slots,"open",{key:0}):t.createCommentVNode("",!0),g.currentValue===u.falseValue?t.renderSlot(r.$slots,"close",{key:1}):t.createCommentVNode("",!0)],2)],38)}var Jy=c(Bz,[["render",Vz]]),Fz={name:"TableRenderHeader",props:{render:Function,column:Object,index:Number},render(){const r={column:this.column,index:this.index};return this.render(t.h,r)}},Zy={methods:{alignCls(r,o={}){let u="";return o.cellClassName&&r.key&&o.cellClassName[r.key]&&(u=o.cellClassName[r.key]),[`${this.prefixCls}-column-${r.__id}`,{[`${u}`]:u,[`${r.className}`]:r.className,[`${this.prefixCls}-column-${r.align}`]:r.align,[`${this.prefixCls}-hidden`]:this.fixed==="left"&&r.fixed!=="left"||this.fixed==="right"&&r.fixed!=="right"||!this.fixed&&r.fixed&&(r.fixed==="left"||r.fixed==="right")}]},isPopperShow(r){return r.filters&&(!this.fixed&&!r.fixed||this.fixed==="left"&&r.fixed==="left"||this.fixed==="right"&&r.fixed==="right")},setCellWidth(r){let o="";return r.width?o=r.width:this.columnsWidth[r._index]&&(o=this.columnsWidth[r._index].width),o==="0"&&(o=""),o}}};const Uz={name:"TableHead",mixins:[Zy,Pn],components:{CheckboxGroup:uy,Checkbox:Oc,Poptip:Wy,iButton:ar,renderHeader:Fz},props:{prefixCls:String,styleObject:Object,columns:Array,objData:Object,data:Array,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},columnRows:Array,fixedColumnRows:Array},data(){return{draggingColumn:null,dragging:!1,dragState:{}}},computed:{styles(){const r=Object.assign({},this.styleObject),o=parseInt(this.styleObject.width);return r.width=`${o}px`,r},isSelectAll(){let r=!0;this.data.length||(r=!1);let o=!0;for(let u in this.objData){const _=this.objData[u];if(!_._isChecked&&!_._isDisabled){r=!1;break}else _.children&&_.children.length&&(r=this.isChildrenSelected(_,r));_._isDisabled&&!_._isChecked?_.children&&_.children.length&&(o=this.isChildrenAllDisabledAndUnSelected(_,o)):o=!1}return o&&(r=!1),r},headRows(){return this.columnRows.length>1?this.fixed?this.fixedColumnRows:this.columnRows:[this.columns]},isSelectDisabled(){let r=!0;if(this.data.length)for(let o in this.objData){const u=this.objData[o];u._isDisabled?u.children&&u.children.length&&(r=this.isChildrenDisabled(u,r)):r=!1}return r}},methods:{cellClasses(r){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&r.fixed&&(r.fixed==="left"||r.fixed==="right"),[`${this.prefixCls}-cell-with-selection`]:r.type==="selection"}]},scrollBarCellClass(){let r=!1;for(let o in this.headRows)for(let u in this.headRows[o]){if(this.headRows[o][u].fixed==="right"){r=!0;break}if(r)break}return[{[`${this.prefixCls}-hidden`]:r}]},itemClasses(r,o){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:r._filterChecked[0]===o.value}]},itemAllClasses(r){return[`${this.prefixCls}-filter-select-item`,{[`${this.prefixCls}-filter-select-item-selected`]:!r._filterChecked.length}]},selectAll(){const r=!this.isSelectAll;this.$parent.selectAll(r)},handleSort(r,o){const u=this.columns.find(g=>g._index===r),_=u._index;u._sortType===o&&(o="normal"),this.$parent.handleSort(_,o)},handleSortByHead(r){const o=this.columns.find(u=>u._index===r);if(o.sortable){const u=o._sortType;u==="normal"?this.handleSort(r,"asc"):u==="asc"?this.handleSort(r,"desc"):this.handleSort(r,"normal")}},handleFilter(r){this.$parent.handleFilter(r)},handleSelect(r,o){this.$parent.handleFilterSelect(r,o)},handleReset(r){this.$parent.handleFilterReset(r)},handleFilterHide(r){this.$parent.handleFilterHide(r)},getColumn(r,o){if(this.columnRows.length>1){const u=this.headRows[r][o].__id;return this.columns.filter(_=>_.__id===u)[0]}else return this.headRows[r][o]},handleMouseDown(r,o){if(!this.$isServer&&s&&this.draggingColumn){this.dragging=!0;const u=this.$parent,_=u.$el.getBoundingClientRect().left,g=this.$el.querySelector(`th.ivu-table-column-${r.__id}`).getBoundingClientRect(),f=g.left-_+30;u.showResizeLine=!0,this.dragState={startMouseLeft:o.clientX,startLeft:g.right-_,startColumnLeft:g.left-_,tableLeft:_};const k=u.$refs.resizeLine;k.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const O=z=>{const j=z.clientX-this.dragState.startMouseLeft,ae=this.dragState.startLeft+j;k.style.left=Math.max(f,ae)+"px"},G=()=>{if(this.dragging){const{startColumnLeft:z,startLeft:j}=this.dragState,ae=parseInt(k.style.left,10)-z,_e=u.allColumns.find(ye=>ye.__id===r.__id);_e&&(_e.width=ae,r.width=ae,u.handleResize()),u.$emit("on-column-width-resize",_e.width,j-z,r,o),s&&(document.body.style.cursor=""),this.dragging=!1,this.draggingColumn=null,this.dragState={},u.showResizeLine=!1}!s||(document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",G),document.onselectstart=null,document.ondragstart=null)};if(!s)return;document.addEventListener("mousemove",O),document.addEventListener("mouseup",G)}},handleMouseMove(r,o){let u=o.target;for(;u&&u.tagName!=="TH";)u=u.parentNode;if(!(!r||!r.resizable)&&s&&!this.dragging){let _=u.getBoundingClientRect();const g=document.body.style;_.width>12&&_.right-o.pageX<8?(g.cursor="col-resize",this.draggingColumn=r):this.dragging||(g.cursor="",this.draggingColumn=null)}},handleMouseOut(){this.$isServer||s&&(document.body.style.cursor="")},isChildrenSelected(r,o){let u=o;return r.children&&r.children.length&&r.children.forEach(_=>{!_._isChecked&&!_._isDisabled?u=!1:_.children&&_.children.length&&(u=this.isChildrenSelected(_,u))}),u},isChildrenAllDisabledAndUnSelected(r,o){let u=o;return r.children&&r.children.length&&r.children.forEach(_=>{_._isDisabled&&!_._isChecked?_.children&&_.children.length&&(u=this.isChildrenAllDisabledAndUnSelected(_,u)):u=!1}),u},isChildrenDisabled(r,o){let u=o;return r.children&&r.children.length&&r.children.forEach(_=>{_._isDisabled?_.children&&_.children.length&&(u=this.isChildrenDisabled(_,u)):u=!1}),u}}},zz=["width"],$z=["width"],Hz=["colspan","rowspan"],Gz={key:0},Wz=["onClick"],jz=["onClick"],Kz=["onClick"],qz=["onMousedown","onMousemove"],Xz=["rowspan"];function Yz(r,o,u,_,g,f){const k=t.resolveComponent("render-header"),O=t.resolveComponent("Checkbox"),G=t.resolveComponent("checkbox"),z=t.resolveComponent("checkbox-group"),j=t.resolveComponent("i-button"),ae=t.resolveComponent("Poptip");return t.openBlock(),t.createElementBlock("table",{cellspacing:"0",cellpadding:"0",border:"0",style:t.normalizeStyle(f.styles)},[t.createElementVNode("colgroup",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.columns,(_e,ye)=>(t.openBlock(),t.createElementBlock("col",{key:ye,width:r.setCellWidth(_e)},null,8,zz))),128)),r.$parent.showVerticalScrollBar?(t.openBlock(),t.createElementBlock("col",{key:0,width:r.$parent.scrollBarWidth},null,8,$z)):t.createCommentVNode("",!0)]),t.createElementVNode("thead",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.headRows,(_e,ye)=>(t.openBlock(),t.createElementBlock("tr",{key:ye},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(_e,(me,ie)=>(t.openBlock(),t.createElementBlock("th",{key:ie,colspan:me.colSpan,rowspan:me.rowSpan,class:t.normalizeClass(r.alignCls(me))},[t.createElementVNode("div",{class:t.normalizeClass(f.cellClasses(me))},[me.type==="expand"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[me.renderHeader?(t.openBlock(),t.createBlock(k,{key:1,render:me.renderHeader,column:me,index:ie},null,8,["render","column","index"])):(t.openBlock(),t.createElementBlock("span",Gz,t.toDisplayString(me.title||""),1))],64)):me.type==="selection"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[me.hideSelectAll?t.createCommentVNode("",!0):(t.openBlock(),t.createBlock(O,{key:0,"model-value":f.isSelectAll,disabled:f.isSelectDisabled,onOnChange:f.selectAll},null,8,["model-value","disabled","onOnChange"]))],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[me.renderHeader?(t.openBlock(),t.createBlock(k,{key:1,render:me.renderHeader,column:me,index:ie},null,8,["render","column","index"])):(t.openBlock(),t.createElementBlock("span",{key:0,class:t.normalizeClass({[u.prefixCls+"-cell-sort"]:me.sortable}),onClick:Pe=>me.sortable&&f.handleSortByHead(f.getColumn(ye,ie)._index)},t.toDisplayString(me.title||"#"),11,Wz)),me.sortable?(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass([u.prefixCls+"-sort"])},[t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropup",{on:f.getColumn(ye,ie)._sortType==="asc"}]),onClick:Pe=>f.handleSort(f.getColumn(ye,ie)._index,"asc")},null,10,jz),t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-md-arrow-dropdown",{on:f.getColumn(ye,ie)._sortType==="desc"}]),onClick:Pe=>f.handleSort(f.getColumn(ye,ie)._index,"desc")},null,10,Kz)],2)):t.createCommentVNode("",!0),r.isPopperShow(me)?(t.openBlock(),t.createBlock(ae,{key:3,modelValue:f.getColumn(ye,ie)._filterVisible,"onUpdate:modelValue":Pe=>f.getColumn(ye,ie)._filterVisible=Pe,placement:"bottom","popper-class":"ivu-table-popper",transfer:"",capture:!1,onOnPopperHide:Pe=>f.handleFilterHide(f.getColumn(ye,ie)._index)},t.createSlots({default:t.withCtx(()=>[t.createElementVNode("span",{class:t.normalizeClass([u.prefixCls+"-filter"])},[t.createElementVNode("i",{class:t.normalizeClass(["ivu-icon ivu-icon-ios-funnel",{on:f.getColumn(ye,ie)._isFiltered}])},null,2)],2)]),_:2},[f.getColumn(ye,ie)._filterMultiple?{name:"content",fn:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass([u.prefixCls+"-filter-list"])},[t.createElementVNode("div",{class:t.normalizeClass([u.prefixCls+"-filter-list-item"])},[t.createVNode(z,{modelValue:f.getColumn(ye,ie)._filterChecked,"onUpdate:modelValue":Pe=>f.getColumn(ye,ie)._filterChecked=Pe},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(me.filters,(Pe,At)=>(t.openBlock(),t.createBlock(G,{key:At,label:Pe.value},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(Pe.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],2),t.createElementVNode("div",{class:t.normalizeClass([u.prefixCls+"-filter-footer"])},[t.createVNode(j,{type:"text",size:"small",disabled:!f.getColumn(ye,ie)._filterChecked.length,onClick:Pe=>f.handleFilter(f.getColumn(ye,ie)._index)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(r.t("i.table.confirmFilter")),1)]),_:2},1032,["disabled","onClick"]),t.createVNode(j,{type:"text",size:"small",onClick:Pe=>f.handleReset(f.getColumn(ye,ie)._index)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(r.t("i.table.resetFilter")),1)]),_:2},1032,["onClick"])],2)],2)]),key:"0"}:{name:"content",fn:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass([u.prefixCls+"-filter-list"])},[t.createElementVNode("ul",{class:t.normalizeClass([u.prefixCls+"-filter-list-single"])},[t.createElementVNode("li",{class:t.normalizeClass(f.itemAllClasses(f.getColumn(ye,ie))),onClick:Pe=>f.handleReset(f.getColumn(ye,ie)._index)},t.toDisplayString(r.t("i.table.clearFilter")),11,["onClick"]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(me.filters,Pe=>(t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.itemClasses(f.getColumn(ye,ie),Pe)),key:Pe.value,onClick:At=>f.handleSelect(f.getColumn(ye,ie)._index,Pe.value)},t.toDisplayString(Pe.label),11,["onClick"]))),128))],2)],2)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","onOnPopperHide"])):t.createCommentVNode("",!0)],64))],2),me.resizable?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-table-header-resizable",onMousedown:Pe=>f.handleMouseDown(me,Pe),onMousemove:Pe=>f.handleMouseMove(me,Pe),onMouseout:o[0]||(o[0]=(...Pe)=>f.handleMouseOut&&f.handleMouseOut(...Pe))},null,40,qz)):t.createCommentVNode("",!0)],10,Hz))),128)),r.$parent.showVerticalScrollBar&&ye===0?(t.openBlock(),t.createElementBlock("th",{key:0,class:t.normalizeClass(f.scrollBarCellClass()),rowspan:f.headRows.length},null,10,Xz)):t.createCommentVNode("",!0)]))),128))])],4)}var Jz=c(Uz,[["render",Yz]]);const Zz={props:{row:Object,prefixCls:String,draggable:Boolean,isChildren:Boolean},computed:{objData(){return this.$parent.objData}},methods:{onDrag(r,o){r.dataTransfer.setData("index",o)},onDrop(r,o){const u=r.dataTransfer.getData("index");this.$parent.$parent.dragAndDrop(u,o),r.preventDefault()},allowDrop(r){r.preventDefault()},rowClasses(r){const o=this.isChildren?this.$parent.$parent.getDataByRowKey(this.row._rowKey):this.objData[r];return[`${this.prefixCls}-row`,this.rowClsName(r),{[`${this.prefixCls}-row-highlight`]:o&&o._isHighlight,[`${this.prefixCls}-row-hover`]:o&&o._isHover}]},rowClsName(r){return this.$parent.$parent.rowClassName(this.objData[r],r)}}},Qz=["draggable"];function e$(r,o,u,_,g,f){return u.draggable?(t.openBlock(),t.createElementBlock("tr",{key:0,class:t.normalizeClass(f.rowClasses(u.row._index)),draggable:u.draggable,onDragstart:o[0]||(o[0]=k=>f.onDrag(k,u.row._index)),onDrop:o[1]||(o[1]=k=>f.onDrop(k,u.row._index)),onDragover:o[2]||(o[2]=k=>f.allowDrop(k))},[t.renderSlot(r.$slots,"default")],42,Qz)):(t.openBlock(),t.createElementBlock("tr",{key:1,class:t.normalizeClass(f.rowClasses(u.row._index)),draggable:!1},[t.renderSlot(r.$slots,"default")],2))}var Qy=c(Zz,[["render",e$]]),e1={name:"TableExpand",props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render(){const r={row:this.row,index:this.index};return this.column&&(r.column=this.column),this.render(t.h,r)}},t$={name:"TableSlot",inject:["TableInstance"],props:{row:Object,index:Number,column:{type:Object,default:null},display:{type:String,default:"block"}},render(){return t.h("div",{class:{"ivu-table-cell-slot":!0,"ivu-table-cell-slot-inline":this.display==="inline","ivu-table-cell-slot-inline-block":this.display==="inline-block"}},this.TableInstance.$slots[this.column.slot]({row:this.row,column:this.column,index:this.index}))}};const n$={name:"TableCell",components:{Icon:E,Checkbox:Oc,TableExpand:e1,TableSlot:t$,Tooltip:_a},inject:["TableInstance"],props:{prefixCls:String,row:Object,column:Object,naturalIndex:Number,index:Number,checked:Boolean,disabled:Boolean,expanded:Boolean,fixed:{type:[Boolean,String],default:!1},treeNode:Boolean,treeLevel:{type:Number,default:0}},data(){return{renderType:"",uid:-1,context:this.$parent.$parent.$parent.currentContext,showTooltip:!1}},computed:{classes(){return[`${this.prefixCls}-cell`,{[`${this.prefixCls}-hidden`]:!this.fixed&&this.column.fixed&&(this.column.fixed==="left"||this.column.fixed==="right"),[`${this.prefixCls}-cell-ellipsis`]:this.column.ellipsis||!1,[`${this.prefixCls}-cell-with-expand`]:this.renderType==="expand",[`${this.prefixCls}-cell-with-selection`]:this.renderType==="selection"}]},expandCls(){return[`${this.prefixCls}-cell-expand`,{[`${this.prefixCls}-cell-expand-expanded`]:this.expanded}]},showChildren(){let r=!1;if(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot"){const o=this.row;(o.children&&o.children.length||"_loading"in o)&&this.column.tree&&(r=!0)}return r},showTreeNode(){let r=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(r=!0),r},showLevel(){let r=!1;return(this.renderType==="html"||this.renderType==="normal"||this.renderType==="render"||this.renderType==="slot")&&this.column.tree&&this.treeNode&&(r=!0),r},treeLevelStyle(){return{"padding-left":this.treeLevel*this.TableInstance.indentSize+"px"}},childrenExpand(){return this.TableInstance.getDataByRowKey(this.row._rowKey)._isShowChildren},childrenLoading(){const r=this.TableInstance.getDataByRowKey(this.row._rowKey);return"_loading"in r&&r._loading}},methods:{toggleSelect(){this.treeNode?this.$parent.$parent.$parent.toggleSelect(this.index,this.row._rowKey):this.$parent.$parent.$parent.toggleSelect(this.index)},toggleExpand(){this.$parent.$parent.$parent.toggleExpand(this.index)},handleClick(){},handleTooltipIn(){if(!s)return;const r=this.$refs.content;let o=document.createRange();o.setStart(r,0),o.setEnd(r,r.childNodes.length);const u=o.getBoundingClientRect().width;this.showTooltip=u>r.offsetWidth,o=null},handleToggleTree(){this.$parent.$parent.$parent.toggleTree(this.row._rowKey)}},created(){this.column.type==="index"?this.renderType="index":this.column.type==="selection"?this.renderType="selection":this.column.type==="html"?this.renderType="html":this.column.type==="expand"?this.renderType="expand":this.column.render?this.renderType="render":this.column.slot?this.renderType="slot":this.renderType="normal"}},i$={key:0},r$={key:4,class:"ivu-table-cell-tree ivu-table-cell-tree-empty"},s$=["innerHTML"],a$={key:1};function o$(r,o,u,_,g,f){const k=t.resolveComponent("Checkbox"),O=t.resolveComponent("Icon"),G=t.resolveComponent("Tooltip"),z=t.resolveComponent("table-expand"),j=t.resolveComponent("table-slot");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),ref:"cell"},[g.renderType==="index"?(t.openBlock(),t.createElementBlock("span",i$,t.toDisplayString(u.column.indexMethod?u.column.indexMethod(u.row,u.naturalIndex):u.naturalIndex+1),1)):t.createCommentVNode("",!0),g.renderType==="selection"?(t.openBlock(),t.createBlock(k,{key:1,"model-value":u.checked,onClick:t.withModifiers(f.handleClick,["stop"]),onOnChange:f.toggleSelect,disabled:u.disabled},null,8,["model-value","onClick","onOnChange","disabled"])):t.createCommentVNode("",!0),f.showLevel?(t.openBlock(),t.createElementBlock("div",{key:2,class:"ivu-table-cell-tree-level",style:t.normalizeStyle(f.treeLevelStyle)},null,4)):t.createCommentVNode("",!0),f.showChildren?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(["ivu-table-cell-tree",{"ivu-table-cell-tree-loading":f.childrenLoading}]),onClick:o[0]||(o[0]=t.withModifiers((...ae)=>f.handleToggleTree&&f.handleToggleTree(...ae),["prevent","stop"]))},[f.childrenLoading?(t.openBlock(),t.createBlock(O,{key:0,type:"ios-loading",class:"ivu-load-loop"})):f.childrenExpand?(t.openBlock(),t.createBlock(O,{key:2,type:"ios-remove"})):(t.openBlock(),t.createBlock(O,{key:1,type:"ios-add"}))],2)):f.showTreeNode?(t.openBlock(),t.createElementBlock("div",r$)):t.createCommentVNode("",!0),g.renderType==="html"?(t.openBlock(),t.createElementBlock("span",{key:5,innerHTML:u.row[u.column.key]},null,8,s$)):t.createCommentVNode("",!0),g.renderType==="normal"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:6},[u.column.tooltip?(t.openBlock(),t.createBlock(G,{key:0,transfer:"",content:u.row[u.column.key],theme:u.column.tooltipTheme?u.column.tooltipTheme:f.TableInstance.tooltipTheme,disabled:!g.showTooltip,"max-width":u.column.tooltipMaxWidth?u.column.tooltipMaxWidth:f.TableInstance.tooltipMaxWidth,class:"ivu-table-cell-tooltip"},{default:t.withCtx(()=>[t.createElementVNode("span",{ref:"content",onMouseenter:o[1]||(o[1]=(...ae)=>f.handleTooltipIn&&f.handleTooltipIn(...ae)),class:"ivu-table-cell-tooltip-content"},t.toDisplayString(u.row[u.column.key]),545)]),_:1},8,["content","theme","disabled","max-width"])):(t.openBlock(),t.createElementBlock("span",a$,t.toDisplayString(u.row[u.column.key]),1))],64)):t.createCommentVNode("",!0),g.renderType==="expand"&&!u.row._disableExpand?(t.openBlock(),t.createElementBlock("div",{key:7,class:t.normalizeClass(f.expandCls),onClick:o[2]||(o[2]=(...ae)=>f.toggleExpand&&f.toggleExpand(...ae))},[t.createVNode(O,{type:"ios-arrow-forward"})],2)):t.createCommentVNode("",!0),g.renderType==="render"?(t.openBlock(),t.createBlock(z,{key:8,row:u.row,column:u.column,index:u.index,render:u.column.render},null,8,["row","column","index","render"])):t.createCommentVNode("",!0),g.renderType==="slot"?(t.openBlock(),t.createBlock(j,{key:9,row:u.row,column:u.column,display:u.column.display||"block",index:u.index},null,8,["row","column","display","index"])):t.createCommentVNode("",!0)],2)}var t1=c(n$,[["render",o$]]);const l$={name:"TableBody",mixins:[Zy],components:{TableCell:t1,Expand:e1,TableTr:Qy},props:{prefixCls:String,styleObject:Object,columns:Array,data:Array,objData:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1},rowKey:{type:[Boolean,String],default:!1}},computed:{expandRender(){let r=function(){return""};for(let o=0;o<this.columns.length;o++){const u=this.columns[o];u.type&&u.type==="expand"&&u.render&&(r=u.render)}return r}},methods:{rowChecked(r){return this.objData[r]&&this.objData[r]._isChecked},rowDisabled(r){return this.objData[r]&&this.objData[r]._isDisabled},rowExpanded(r){return this.objData[r]&&this.objData[r]._isExpanded},rowStatusByRowKey(r,o){return this.$parent.getDataByRowKey(o)[r]},handleMouseIn(r,o,u){o.stopPropagation(),this.$parent.handleMouseIn(r,u)},handleMouseOut(r,o,u){o.stopPropagation(),this.$parent.handleMouseOut(r,u)},clickCurrentRow(r,o,u){this.$parent.clickCurrentRow(r,u)},dblclickCurrentRow(r,o,u){o.stopPropagation(),this.$parent.dblclickCurrentRow(r,u)},clickCell(r,o,u,_){this.$parent.$emit("on-cell-click",r,o,r[u],_)},contextmenuCurrentRow(r,o,u){o.stopPropagation(),this.$parent.contextMenu&&o.preventDefault(),this.$parent.contextmenuCurrentRow(r,u,o)},selectStartCurrentRow(){this.$parent.contextMenu},getSpan(r,o,u,_){const g=this.$parent.spanMethod;if(typeof g=="function"){const f=g({row:r,column:o,rowIndex:u,columnIndex:_});let k=1,O=1;return Array.isArray(f)?(k=f[0],O=f[1]):typeof f=="object"&&(k=f.rowspan,O=f.colspan),{rowspan:k,colspan:O}}else return{}},showWithSpan(r,o,u,_){const g=this.getSpan(r,o,u,_);return!("rowspan"in g&&g.rowspan===0||"colspan"in g&&g.colspan===0)},isTrShow(r){let o=!0,u;for(let _ in this.objData){const g=this.objData[_],f=g._isShowChildren;if(g._rowKey===r){o=o&&f;break}else if(g.children&&g.children.length&&(u=this.getTrStatus(r,g,o&&f),u[0]&&u[0]._rowKey===r))return u[1]}return o},getTrStatus(r,o,u){let _=u,g;if(o.children&&o.children.length)for(let f=0;f<o.children.length;f++){const k=o.children[f],O=k._isShowChildren;if(k._rowKey===r){g=k,_=_&&O;break}else if(k.children&&k.children.length){const G=this.getTrStatus(r,k,_&&O);if(G[0]&&G[0]._rowKey===r)return G}}return[g,_]},getLevel(r){let o,u;for(let _=0;_<this.data.length;_++){const g=this.data[_];if(g[this.rowKey]===r){o=0;break}else if(g.children&&g.children.length&&(u=this.getChildLevel(g,r,1),u[0]&&u[0][this.rowKey]===r))return u[1]}return o},getChildLevel(r,o,u){let _,g;if(r.children&&r.children.length)for(let f=0;f<r.children.length;f++){const k=r.children[f];if(k[this.rowKey]===o){g=k,_=u;break}else if(k.children&&k.children.length){const O=this.getChildLevel(k,o,u+1);if(O[0]&&O[0][this.rowKey]===o)return O}}return[g,_]},getChildNode(r,o,u){return o.children&&o.children.length&&o.children.forEach((_,g)=>{let f=[];this.columns.forEach((G,z)=>{if(this.showWithSpan(_,G,g,z)){const j=r(t1,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:_,column:G,"natural-index":g,index:_._index,checked:this.rowStatusByRowKey("_isChecked",_._rowKey),disabled:this.rowStatusByRowKey("_isDisabled",_._rowKey),expanded:this.rowStatusByRowKey("_isExpanded",_._rowKey),treeNode:!0,treeLevel:this.getLevel(_._rowKey),key:G._columnKey}),ae=r("td",{class:this.alignCls(G,_),...this.getSpan(_,G,g,z),onClick:_e=>this.clickCell(_,G,G.key,_e)},[j]);f.push(ae)}});const k={};this.isTrShow(o._rowKey)||(k.display="none");const O=r(Qy,{draggable:!1,row:_,"prefix-cls":this.prefixCls,isChildren:!0,style:k,key:this.rowKey?_._rowKey:g,onMouseenter:G=>this.handleMouseIn(_._index,G,_._rowKey),onMouseleave:G=>this.handleMouseOut(_._index,G,_._rowKey),onClick:G=>this.clickCurrentRow(_._index,G,_._rowKey),onDblclick:G=>this.dblclickCurrentRow(_._index,G,_._rowKey),onContextmenu:G=>this.contextmenuCurrentRow(_._index,G,_._rowKey),onSelectstart:G=>this.selectStartCurrentRow(_._index,G,_._rowKey)},()=>f);u.push(O),_.children&&_.children.length&&this.getChildNode(r,_,u)}),u}},render(){let r=[];this.columns.forEach(g=>{const f=t.h("col",{width:this.setCellWidth(g)});r.push(f)});const o=t.h("colgroup",{},r);let u=[];this.data.forEach((g,f)=>{let k=[];this.columns.forEach((G,z)=>{if(this.showWithSpan(g,G,f,z)){const j=t.h(t1,{fixed:this.fixed,"prefix-cls":this.prefixCls,row:g,column:G,"natural-index":f,index:g._index,checked:this.rowChecked(g._index),disabled:this.rowDisabled(g._index),expanded:this.rowExpanded(g._index),key:G._columnKey}),ae=t.h("td",{class:this.alignCls(G,g),...this.getSpan(g,G,f,z),onClick:_e=>this.clickCell(g,G,G.key,_e)},[j]);k.push(ae)}});const O=t.h(Qy,{draggable:this.draggable,row:g,"prefix-cls":this.prefixCls,key:this.rowKey?g._rowKey:f,onMouseenter:G=>this.handleMouseIn(g._index,G),onMouseleave:G=>this.handleMouseOut(g._index,G),onClick:G=>this.clickCurrentRow(g._index,G),onDblclick:G=>this.dblclickCurrentRow(g._index,G),onContextmenu:G=>this.contextmenuCurrentRow(g._index,G),onSelectstart:G=>this.selectStartCurrentRow(g._index,G)},()=>k);if(u.push(O),this.rowExpanded(g._index)){const G=t.h(e1,{row:g,render:this.expandRender,index:g._index,key:this.rowKey?g._rowKey:f}),z=t.h("td",{colspan:this.columns.length,class:this.prefixCls+"-expanded-cell"},[G]),j=t.h("tr",{class:{[this.prefixCls+"-expanded-hidden"]:this.fixed}},[z]);u.push(j)}g.children&&g.children.length&&this.getChildNode(t.h,g,[]).forEach(G=>{u.push(G)})});const _=t.h("tbody",{class:this.prefixCls+"-tbody"},[u]);return t.h("table",{cellspacing:"0",cellpadding:"0",border:"0",style:this.styleObject},[o,_])}},c$={name:"TableSummary",mixins:[Zy],props:{prefixCls:String,styleObject:Object,columns:Array,data:Object,columnsWidth:Object,fixed:{type:[Boolean,String],default:!1}},methods:{cellCls(r){return[{"ivu-table-hidden":this.fixed==="left"&&r.fixed!=="left"||this.fixed==="right"&&r.fixed!=="right"||!this.fixed&&r.fixed&&(r.fixed==="left"||r.fixed==="right")}]}}},u$={style:{overflow:"hidden"}},h$=["width"],d$={class:"ivu-table-row"};function f$(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("div",u$,[t.createElementVNode("table",{class:"ivu-table-summary",cellspacing:"0",cellpadding:"0",border:"0",style:t.normalizeStyle(u.styleObject)},[t.createElementVNode("colgroup",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.columns,(k,O)=>(t.openBlock(),t.createElementBlock("col",{key:O,width:r.setCellWidth(k)},null,8,h$))),128))]),t.createElementVNode("tbody",{class:t.normalizeClass([u.prefixCls+"-tbody"])},[t.createElementVNode("tr",d$,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.columns,(k,O)=>(t.openBlock(),t.createElementBlock("td",{key:O,class:t.normalizeClass(r.alignCls(k))},[t.createElementVNode("div",{class:t.normalizeClass(["ivu-table-cell",f.cellCls(k)])},[t.createElementVNode("span",null,t.toDisplayString(u.data[k.key].value),1)],2)],2))),128))])],2)],4)])}var p$=c(c$,[["render",f$]]);const m$=`\r
`,n1=(r,o,{separator:u,quoted:_})=>{const g=o.map(f=>_?(f=typeof f=="string"?f.replace(/"/g,'"'):f,`"${f}"`):f);r.push(g.join(u))},g$={separator:",",quoted:!1};function v$(r,o,u,_=!1){u=Object.assign({},g$,u);let g;const f=[],k=[];return r?(g=r.map(O=>typeof O=="string"?O:(_||k.push(typeof O.title<"u"?O.title:O.key),O.key)),k.length>0&&n1(f,k,u)):(g=[],o.forEach(O=>{Array.isArray(O)||(g=g.concat(Object.keys(O)))}),g.length>0&&(g=g.filter((O,G,z)=>z.indexOf(O)===G),_||n1(f,g,u))),Array.isArray(o)&&o.forEach(O=>{Array.isArray(O)||(O=g.map(G=>typeof O[G]<"u"?O[G]:"")),n1(f,O,u)}),f.join(m$)}function i1(r){const o=navigator.userAgent;return o.indexOf("compatible")>-1&&o.indexOf("MSIE")>-1?(new RegExp("MSIE (\\d+\\.\\d+);").test(o),parseFloat(RegExp.$1)):!1}const y$={_isIE11(){let r=0;const o=/MSIE (\d+\.\d+);/.test(navigator.userAgent),u=!!navigator.userAgent.match(/Trident\/7.0/),_=navigator.userAgent.indexOf("rv:11.0");return o&&(r=Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!==-1&&(r=10),u&&_!==-1&&(r=11),r===11},_isEdge(){return/Edge/.test(navigator.userAgent)},_getDownloadUrl(r){const o="\uFEFF";if(s&&window.Blob&&window.URL&&window.URL.createObjectURL){const u=new Blob([o+r],{type:"text/csv"});return URL.createObjectURL(u)}else return"data:attachment/csv;charset=utf-8,"+o+encodeURIComponent(r)},download(r,o){if(s)if(i1()&&i1()<10){const u=window.top.open("about:blank","_blank");u.document.charset="utf-8",u.document.write(o),u.document.close(),u.document.execCommand("SaveAs",r),u.close()}else if(i1()===10||this._isIE11()||this._isEdge()){const u="\uFEFF",_=new Blob([u+o],{type:"text/csv"});navigator.msSaveBlob(_,r)}else{const u=document.createElement("a");u.download=r,u.href=this._getDownloadUrl(o),document.body.appendChild(u),u.click(),document.body.removeChild(u)}}},km=(r,o)=>{let u=[],_=[];return r.forEach(g=>{g.fixed&&g.fixed===o?u.push(g):_.push(g)}),u.concat(_)},rd=(r,o=!1)=>{const u=V(r),_=[];return u.forEach(g=>{g.children?(o&&_.push(g),_.push.apply(_,rd(g.children,o))):_.push(g)}),_},b$=(r,o=!1)=>{const u=V(o?o==="left"?km(r,"left"):km(r,"right"):r);let _=1;const g=(k,O)=>{if(O&&(k.level=O.level+1,_<k.level&&(_=k.level)),k.children){let G=0;k.children.forEach(z=>{g(z,k),G+=z.colSpan}),k.colSpan=G}else k.colSpan=1};u.forEach(k=>{k.level=1,g(k)});const f=[];for(let k=0;k<_;k++)f.push([]);return rd(u,!0).forEach(k=>{k.children?k.rowSpan=1:k.rowSpan=_-k.level+1,f[k.level-1].push(k)}),f},_$=function(r=32){const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",u=o.length;let _="";for(let g=0;g<r;g++)_+=o.charAt(Math.floor(Math.random()*u));return _},Li="ivu-table";let AE=1,x$=1;const w$={name:"Table",mixins:[Pn],components:{tableHead:Jz,tableBody:l$,tableSummary:p$,Spin:qr,Dropdown:Cl,DropdownMenu:Sl},emits:["on-current-change","on-row-click","on-row-dblclick","on-contextmenu","on-select","on-select-cancel","on-selection-change","on-expand","on-expand-tree","on-select-all","on-select-all-cancel","on-sort-change","on-filter-change","on-drag-drop","on-cell-click","on-column-width-resize"],provide(){return{TableInstance:this}},inject:{TabsInstance:{default:null},ModalInstance:{default:null},DrawerInstance:{default:null}},props:{data:{type:Array,default(){return[]}},columns:{type:Array,default(){return[]}},size:{validator(r){return w(r,["small","large","default"])},default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.size===""?"default":r.$VIEWUI.size}},width:{type:[Number,String]},height:{type:[Number,String]},maxHeight:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tooltipTheme:{validator(r){return w(r,["dark","light"])},default:"dark"},tooltipMaxWidth:{type:Number,default:300},rowKey:{type:[Boolean,String],default:!1},spanMethod:{type:Function},showSummary:{type:Boolean,default:!1},summaryMethod:{type:Function},sumText:{type:String},indentSize:{type:Number,default:16},loadData:{type:Function},updateShowChildren:{type:Boolean,default:!1},contextMenu:{type:Boolean,default:!1},showContextMenu:{type:Boolean,default:!1},fixedShadow:{validator(r){return w(r,["auto","show","hide"])},default:"show"},autoCloseContextmenu:{type:Boolean,default:!0}},data(){const r=this.makeColumnsId(this.columns);return{ready:!1,tableWidth:0,columnsWidth:{},prefixCls:Li,compiledUids:[],objData:this.makeObjData(),rebuildData:[],cloneColumns:this.makeColumns(r),columnRows:this.makeColumnRows(!1,r),leftFixedColumnRows:this.makeColumnRows("left",r),rightFixedColumnRows:this.makeColumnRows("right",r),allColumns:rd(r),showSlotHeader:!0,showSlotFooter:!0,bodyHeight:0,scrollBarWidth:M(),currentContext:this.context,cloneData:V(this.data),showVerticalScrollBar:!1,showHorizontalScrollBar:!1,headerWidth:0,headerHeight:0,showResizeLine:!1,contextMenuVisible:!1,contextMenuStyles:{top:0,left:0},scrollOnTheLeft:!1,scrollOnTheRight:!1,id:te(6)}},computed:{localeNoDataText(){return this.noDataText===void 0?this.t("i.table.noDataText"):this.noDataText},localeNoFilteredDataText(){return this.noFilteredDataText===void 0?this.t("i.table.noFilteredDataText"):this.noFilteredDataText},localeSumText(){return this.sumText===void 0?this.t("i.table.sumText"):this.sumText},wrapClasses(){return[`${Li}-wrapper`,{[`${Li}-hide`]:!this.ready,[`${Li}-with-header`]:this.showSlotHeader,[`${Li}-with-footer`]:this.showSlotFooter,[`${Li}-with-summary`]:this.showSummary,[`${Li}-wrapper-with-border`]:this.border}]},classes(){return[`${Li}`,{[`${Li}-${this.size}`]:!!this.size,[`${Li}-border`]:this.border,[`${Li}-stripe`]:this.stripe,[`${Li}-with-fixed-top`]:!!this.height}]},fixedTableClasses(){return[`${Li}-fixed`,{[`${Li}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheLeft}]},fixedRightTableClasses(){return[`${Li}-fixed-right`,{[`${Li}-fixed-shadow`]:this.fixedShadow==="show"||this.fixedShadow==="auto"&&!this.scrollOnTheRight}]},fixedHeaderClasses(){return[`${Li}-fixed-header`,{[`${Li}-fixed-header-with-empty`]:!this.rebuildData.length}]},styles(){let r={},o=0;if(this.showSummary&&(this.size==="small"?o=40:this.size==="large"?o=60:o=48),this.height){let u=parseInt(this.height)+o;r.height=`${u}px`}if(this.maxHeight){const u=parseInt(this.maxHeight)+o;r.maxHeight=`${u}px`}return this.width&&(r.width=`${this.width}px`),r},tableStyle(){let r={};if(this.tableWidth!==0){let o="";this.bodyHeight===0?o=this.tableWidth:o=this.tableWidth-(this.showVerticalScrollBar?this.scrollBarWidth:0),r.width=`${o}px`}return r},tableHeaderStyle(){let r={};if(this.tableWidth!==0){let o="";o=this.tableWidth,r.width=`${o}px`}return r},fixedTableStyle(){let r={},o=0;return this.leftFixedColumns.forEach(u=>{u.fixed&&u.fixed==="left"&&(o+=u._width)}),r.width=`${o}px`,r},fixedRightTableStyle(){let r={},o=0;return this.rightFixedColumns.forEach(u=>{u.fixed&&u.fixed==="right"&&(o+=u._width)}),r.width=`${o}px`,r.right=`${this.showVerticalScrollBar?this.scrollBarWidth:0}px`,r},fixedRightHeaderStyle(){let r={},o=0,u=this.headerHeight+1;return this.showVerticalScrollBar&&(o=this.scrollBarWidth),r.width=`${o}px`,r.height=`${u}px`,r},bodyStyle(){let r={};if(this.bodyHeight!==0){const o=this.bodyHeight;this.height?r.height=`${o}px`:this.maxHeight&&(r.maxHeight=`${o}px`)}return r},fixedBodyStyle(){let r={};if(this.bodyHeight!==0){let o=this.bodyHeight-(this.showHorizontalScrollBar?this.scrollBarWidth:0);const u=this.showHorizontalScrollBar?`${o}px`:`${o-1}px`;this.height?r.height=u:this.maxHeight&&(r.maxHeight=u)}return r},leftFixedColumns(){return km(this.cloneColumns,"left")},rightFixedColumns(){return km(this.cloneColumns,"right")},isLeftFixed(){return this.columns.some(r=>r.fixed&&r.fixed==="left")},isRightFixed(){return this.columns.some(r=>r.fixed&&r.fixed==="right")},summaryData(){if(!this.showSummary)return{};let r={};return this.summaryMethod?r=this.summaryMethod({columns:this.cloneColumns,data:this.rebuildData}):this.cloneColumns.forEach((o,u)=>{const _=o.key;if(u===0){r[_]={key:o.key,value:this.localeSumText};return}const g=this.rebuildData.map(G=>Number(G[o.key])),f=[];let k=!0;g.forEach(G=>{if(!isNaN(G)){k=!1;let z=(""+G).split(".")[1];f.push(z?z.length:0)}});const O=Math.max.apply(null,f);if(k)r[_]={key:o.key,value:""};else{const G=g.reduce((z,j)=>{const ae=Number(j);return isNaN(ae)?z:parseFloat((z+j).toFixed(Math.min(O,20)))},0);r[_]={key:o.key,value:G}}}),r}},methods:{rowClsName(r){return this.rowClassName(this.data[r],r)},handleResize(){let r=this.$el.offsetWidth-1,o={},u=0,_=[],g=[],f=[];this.cloneColumns.forEach(j=>{j.width?_.push(j):(g.push(j),j.minWidth&&(u+=j.minWidth),j.maxWidth||f.push(j)),j._width=null});let k=_.map(j=>j.width).reduce((j,ae)=>j+ae,0),O=r-k-u-(this.showVerticalScrollBar?this.scrollBarWidth:0)-1,G=g.length,z=0;O>0&&G>0&&(z=parseInt(O/G));for(let j=0;j<this.cloneColumns.length;j++){const ae=this.cloneColumns[j];let _e=z+(ae.minWidth?ae.minWidth:0);ae.width?_e=ae.width:ae._width?_e=ae._width:(ae.minWidth>_e?_e=ae.minWidth:ae.maxWidth<_e&&(_e=ae.maxWidth),O>0?(O-=_e-(ae.minWidth?ae.minWidth:0),G--,G>0?z=parseInt(O/G):z=0):z=0),ae._width=_e,o[ae._index]={width:_e}}if(O>0){G=f.length,z=parseInt(O/G);for(let j=0;j<f.length;j++){const ae=f[j];let _e=ae._width+z;G>1?(G--,O-=z,z=parseInt(O/G)):z=0,ae._width=_e,o[ae._index]={width:_e}}}this.tableWidth=this.cloneColumns.map(j=>j._width).reduce((j,ae)=>j+ae,0)+(this.showVerticalScrollBar?this.scrollBarWidth:0)+1,this.columnsWidth=o,this.fixedHeader(),this.fixedShadow==="auto"&&t.nextTick(()=>{const j=this.$refs.body;this.scrollOnTheLeft=j.scrollLeft===0,this.scrollOnTheRight=j.scrollWidth===j.scrollLeft+j.clientWidth})},handleMouseIn(r,o){if(this.disabledHover)return;const u=o?this.getDataByRowKey(o):this.objData[r];u._isHover||(u._isHover=!0)},handleMouseOut(r,o){if(this.disabledHover)return;const u=o?this.getDataByRowKey(o):this.objData[r];u._isHover=!1},handleCurrentRow(r,o,u){const _=u?this.getDataByRowKey(u):this.objData[o];let g=null,f=-1;for(let O in this.objData)if(this.objData[O]._isHighlight){f=parseInt(O),this.objData[O]._isHighlight=!1;break}else if(this.objData[O].children&&this.objData[O].children.length){const G=this.handleResetChildrenRow(this.objData[O]);G&&(g=JSON.parse(JSON.stringify(G)))}r==="highlight"&&(_._isHighlight=!0),f>=0&&(g=JSON.parse(JSON.stringify(this.cloneData[f])));const k=r==="highlight"?JSON.parse(JSON.stringify(u?this.getBaseDataByRowKey(u):this.cloneData[o])):null;this.$emit("on-current-change",k,g)},handleResetChildrenRow(r){let o=null;if(r.children&&r.children.length)for(let u=0;u<r.children.length;u++){const _=r.children[u];if(_._isHighlight){_._isHighlight=!1,o=_;break}else _.children&&_.children.length&&(o=this.handleResetChildrenRow(_))}return o},highlightCurrentRow(r,o){const u=o?this.getDataByRowKey(o):this.objData[r];!this.highlightRow||u._isHighlight||this.handleCurrentRow("highlight",r,o)},clearCurrentRow(){!this.highlightRow||this.handleCurrentRow("clear")},clickCurrentRow(r,o){this.highlightCurrentRow(r,o),o?this.$emit("on-row-click",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(o)))):this.$emit("on-row-click",JSON.parse(JSON.stringify(this.cloneData[r])),r)},dblclickCurrentRow(r,o){this.highlightCurrentRow(r,o),o?this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(o)))):this.$emit("on-row-dblclick",JSON.parse(JSON.stringify(this.cloneData[r])),r)},contextmenuCurrentRow(r,o,u){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const _=this.$refs.tableWrap.getBoundingClientRect(),g={left:`${u.clientX-_.left}px`,top:`${u.clientY-_.top}px`};this.contextMenuStyles=g,this.contextMenuVisible=!0,o?this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.getBaseDataByRowKey(o))),u,g):this.$emit("on-contextmenu",JSON.parse(JSON.stringify(this.cloneData[r])),u,g)})},getSelection(){let r=[],o=[];for(let _ in this.objData){const g=this.objData[_];g._isChecked&&r.push(parseInt(_)),g.children&&g.children.length&&(o=o.concat(this.getSelectionChildrenRowKeys(g,o)))}o=[...new Set(o)];let u=[];return this.data.forEach((_,g)=>{r.indexOf(g)>-1&&(u=u.concat(_)),_.children&&_.children.length&&o.length&&(u=u.concat(this.getSelectionChildren(_,u,o)))}),u=[...new Set(u)],JSON.parse(JSON.stringify(u))},getSelectionChildrenRowKeys(r,o){return r.children&&r.children.length&&r.children.forEach(u=>{u._isChecked&&o.push(u._rowKey),u.children&&u.children.length&&(o=o.concat(this.getSelectionChildrenRowKeys(u,o)))}),o},getSelectionChildren(r,o,u){return r.children&&r.children.length&&r.children.forEach(_=>{u.indexOf(_[this.rowKey])>-1&&(o=o.concat(_)),_.children&&_.children.length&&(o=o.concat(this.getSelectionChildren(_,o,u)))}),o},toggleSelect(r,o){let u={};if(o)u=this.getDataByRowKey(o);else for(let k in this.objData)if(parseInt(k)===r){u=this.objData[k];break}const _=!u._isChecked;u._isChecked=_;const g=this.getSelection(),f=o?this.getBaseDataByRowKey(o,this.data):this.data[r];this.$emit(_?"on-select":"on-select-cancel",g,JSON.parse(JSON.stringify(f))),this.$emit("on-selection-change",g)},toggleExpand(r){let o={};for(let _ in this.objData)if(parseInt(_)===r){o=this.objData[_];break}const u=!o._isExpanded;this.objData[r]._isExpanded=u,this.$emit("on-expand",JSON.parse(JSON.stringify(this.cloneData[r])),u),(this.height||this.maxHeight)&&t.nextTick(()=>this.fixedBody())},toggleTree(r){const o=this.getDataByRowKey(r);if(!("_loading"in o&&o._loading)){if("_loading"in o&&!o._loading&&o.children.length===0){const u=this.getBaseDataByRowKey(r,this.data);u._loading=!0,this.loadData(u,_=>{u._loading=!1,_.length&&(u.children=_,t.nextTick(()=>{const g=this.getDataByRowKey(r);g._isShowChildren=!g._isShowChildren,this.updateDataStatus(r,"_showChildren",g._isShowChildren)}))});return}o._isShowChildren=!o._isShowChildren,this.updateShowChildren&&this.updateDataStatus(r,"_showChildren",o._isShowChildren),this.$emit("on-expand-tree",r,o._isShowChildren)}},updateDataStatus(r,o,u){const _=this.getBaseDataByRowKey(r,this.data);_[o]=u},getDataByRowKey(r,o=this.objData){let u=null;for(let _ in o){const g=o[_];if(g._rowKey===r){u=g;break}else if(g.children&&g.children.length&&(u=this.getChildrenByRowKey(r,g),u))break}return u},getChildrenByRowKey(r,o){let u=null;if(o.children&&o.children.length)for(let _=0;_<o.children.length;_++){const g=o.children[_];if(g._rowKey===r){u=g;break}else if(g.children&&g.children.length&&(u=this.getChildrenByRowKey(r,g),u))break}return u},getBaseDataByRowKey(r,o=this.cloneData){let u=null;for(let _=0;_<o.length;_++){const g=o[_];if(g[this.rowKey]===r){u=g;break}else if(g.children&&g.children.length&&(u=this.getChildrenDataByRowKey(r,g),u&&u[this.rowKey]===r))return u}return u},getChildrenDataByRowKey(r,o){let u=null;if(o.children&&o.children.length)for(let _=0;_<o.children.length;_++){const g=o.children[_];if(g[this.rowKey]===r){u=g;break}else if(g.children&&g.children.length&&(u=this.getChildrenDataByRowKey(r,g),u))break}return u},selectAll(r){for(const u of this.rebuildData){const _=this.objData[u._index];_._isDisabled||(_._isChecked=r),u.children&&u.children.length&&this.selectAllChildren(_,r)}const o=this.getSelection();r?this.$emit("on-select-all",o):this.$emit("on-select-all-cancel",o),this.$emit("on-selection-change",o)},selectAllChildren(r,o){r.children&&r.children.length&&r.children.map(u=>{u._isDisabled||(u._isChecked=o),u.children&&u.children.length&&this.selectAllChildren(u,o)})},fixedHeader(){this.height||this.maxHeight?t.nextTick(()=>{const r=parseInt(N(this.$refs.title,"height"))||0,o=parseInt(N(this.$refs.header,"height"))||0,u=parseInt(N(this.$refs.footer,"height"))||0;this.height?this.bodyHeight=this.height-r-o-u:this.maxHeight&&(this.bodyHeight=this.maxHeight-r-o-u),t.nextTick(()=>this.fixedBody())}):(this.bodyHeight=0,t.nextTick(()=>this.fixedBody()))},fixedBody(){if(this.$refs.header&&(this.headerWidth=this.$refs.header.children[0].offsetWidth,this.headerHeight=this.$refs.header.children[0].offsetHeight),!this.$refs.tbody||!this.data||this.data.length===0)this.showVerticalScrollBar=!1;else{let r=this.$refs.tbody.$el,o=r.parentElement,u=r.offsetHeight,_=o.offsetHeight;this.showHorizontalScrollBar=o.offsetWidth<r.offsetWidth+(this.showVerticalScrollBar?this.scrollBarWidth:0),this.showVerticalScrollBar=this.bodyHeight?_-(this.showHorizontalScrollBar?this.scrollBarWidth:0)<u:!1,this.showVerticalScrollBar?o.classList.add(this.prefixCls+"-overflowY"):o.classList.remove(this.prefixCls+"-overflowY"),this.showHorizontalScrollBar?o.classList.add(this.prefixCls+"-overflowX"):o.classList.remove(this.prefixCls+"-overflowX")}},hideColumnFilter(){this.cloneColumns.forEach(r=>r._filterVisible=!1)},handleBodyScroll(r){this.scrollOnTheLeft=r.target.scrollLeft===0,this.scrollOnTheRight=r.target.scrollWidth===r.target.scrollLeft+r.target.clientWidth,this.showHeader&&(this.$refs.header.scrollLeft=r.target.scrollLeft),this.isLeftFixed&&(this.$refs.fixedBody.scrollTop=r.target.scrollTop),this.isRightFixed&&(this.$refs.fixedRightBody.scrollTop=r.target.scrollTop),this.showSummary&&this.$refs.summary&&(this.$refs.summary.$el.scrollLeft=r.target.scrollLeft),this.hideColumnFilter()},handleFixedMousewheel(r){let o=r.deltaY;if(!o&&r.detail&&(o=r.detail*40),!o&&r.wheelDeltaY&&(o=-r.wheelDeltaY),!o&&r.wheelDelta&&(o=-r.wheelDelta),!o)return;const u=this.$refs.body,_=u.scrollTop;o<0&&_!==0&&r.preventDefault(),o>0&&u.scrollHeight-u.clientHeight>_&&r.preventDefault();let g=0,f=setInterval(()=>{g+=5,o>0?u.scrollTop+=2:u.scrollTop-=2,g>=Math.abs(o)&&clearInterval(f)},5)},handleMouseWheel(r){const o=r.deltaX,u=this.$refs.body;o>0?u.scrollLeft=u.scrollLeft+10:u.scrollLeft=u.scrollLeft-10},sortData(r,o,u){const _=this.cloneColumns[u].key;r.sort((g,f)=>{if(this.cloneColumns[u].sortMethod)return this.cloneColumns[u].sortMethod(g[_],f[_],o);if(o==="asc")return g[_]>f[_]?1:-1;if(o==="desc")return g[_]<f[_]?1:-1});for(let g=0;g<r.length;g++)r[g].children&&r[g].children.length&&(r[g].children=this.sortData(r[g].children,o,u));return r},handleSort(r,o){const u=this.GetOriginalIndex(r);this.cloneColumns.forEach(g=>g._sortType="normal");const _=this.cloneColumns[u].key;this.cloneColumns[u].sortable!=="custom"&&(o==="normal"?this.rebuildData=this.makeDataWithFilter():this.rebuildData=this.sortData(this.rebuildData,o,u)),this.cloneColumns[u]._sortType=o,this.$emit("on-sort-change",{column:JSON.parse(JSON.stringify(this.allColumns[this.cloneColumns[u]._index])),key:_,order:o})},handleFilterHide(r){this.cloneColumns[r]._isFiltered||(this.cloneColumns[r]._filterChecked=[])},filterData(r,o){return r.filter(u=>{if(typeof o.filterRemote=="function")return!0;let _=!o._filterChecked.length;for(let g=0;g<o._filterChecked.length&&(_=o.filterMethod(o._filterChecked[g],u),!_);g++);return _})},filterOtherData(r,o){let u=this.cloneColumns[o];return typeof u.filterRemote=="function"&&u.filterRemote.call(this.$parent,u._filterChecked,u.key,u),this.cloneColumns.forEach((_,g)=>{g!==o&&(r=this.filterData(r,_))}),r},handleFilter(r){const o=this.cloneColumns[r];let u=this.makeDataWithSort();u=this.filterOtherData(u,r),this.rebuildData=this.filterData(u,o),this.cloneColumns[r]._isFiltered=!0,this.cloneColumns[r]._filterVisible=!1,this.$emit("on-filter-change",o)},GetOriginalIndex(r){return this.cloneColumns.findIndex(o=>o._index===r)},handleFilterSelect(r,o){const u=this.GetOriginalIndex(r);this.cloneColumns[u]._filterChecked=[o],this.handleFilter(u)},handleFilterReset(r){const o=this.GetOriginalIndex(r);this.cloneColumns[o]._isFiltered=!1,this.cloneColumns[o]._filterVisible=!1,this.cloneColumns[o]._filterChecked=[];let u=this.makeDataWithSort();u=this.filterOtherData(u,o),this.rebuildData=u,this.$emit("on-filter-change",this.cloneColumns[o])},makeData(){let r=V(this.data);return r.forEach((o,u)=>{o._index=u,o._rowKey=typeof this.rowKey=="string"?o[this.rowKey]:AE++,o.children&&o.children.length&&(o.children=this.makeChildrenData(o))}),r},makeChildrenData(r){return r.children&&r.children.length?r.children.map((o,u)=>{const _=V(o);return _._index=u,_._rowKey=typeof this.rowKey=="string"?_[this.rowKey]:AE++,_.children&&_.children.length&&(_.children=this.makeChildrenData(_)),_}):r},makeDataWithSort(){let r=this.makeData(),o="normal",u=-1,_=!1;for(let g=0;g<this.cloneColumns.length;g++)if(this.cloneColumns[g]._sortType!=="normal"){o=this.cloneColumns[g]._sortType,u=g,_=this.cloneColumns[g].sortable==="custom";break}return o!=="normal"&&!_&&(r=this.sortData(r,o,u)),r},makeDataWithFilter(){let r=this.makeData();return this.cloneColumns.forEach(o=>r=this.filterData(r,o)),r},makeDataWithSortAndFilter(){let r=this.makeDataWithSort();return this.cloneColumns.forEach(o=>r=this.filterData(r,o)),r},makeObjBaseData(r){const o=V(r);return typeof this.rowKey=="string"&&(o._rowKey=o[this.rowKey]),o._isHover=!1,o._disabled?o._isDisabled=o._disabled:o._isDisabled=!1,o._checked?o._isChecked=o._checked:o._isChecked=!1,o._expanded?o._isExpanded=o._expanded:o._isExpanded=!1,o._highlight?o._isHighlight=o._highlight:o._isHighlight=!1,o},makeObjData(){let r={};return this.data.forEach((o,u)=>{const _=this.makeObjBaseData(o);_.children&&_.children.length&&(_._showChildren?_._isShowChildren=_._showChildren:_._isShowChildren=!1,_.children=this.makeChildrenObjData(_)),r[u]=_}),r},makeChildrenObjData(r){return r.children&&r.children.length?r.children.map(o=>{const u=this.makeObjBaseData(o);return u._showChildren?u._isShowChildren=u._showChildren:u._isShowChildren=!1,u.children&&u.children.length&&(u.children=this.makeChildrenObjData(u)),u}):r},makeColumnsId(r){return V(r).map(o=>("children"in o&&this.makeColumnsId(o.children),o.__id=_$(6),o))},makeColumns(r){let o=V(rd(r)),u=[],_=[],g=[];return o.forEach((f,k)=>{f._index=k,f._columnKey=x$++,f.width=parseInt(f.width),f._width=f.width?f.width:"",f._sortType="normal",f._filterVisible=!1,f._isFiltered=!1,f._filterChecked=[],"filterMultiple"in f?f._filterMultiple=f.filterMultiple:f._filterMultiple=!0,"filteredValue"in f&&(f._filterChecked=f.filteredValue,f._isFiltered=!0),"sortType"in f&&(f._sortType=f.sortType),f.fixed&&f.fixed==="left"?u.push(f):f.fixed&&f.fixed==="right"?_.push(f):g.push(f)}),u.concat(g).concat(_)},makeColumnRows(r,o){return b$(o,r)},exportCsv(r){r.filename?r.filename.indexOf(".csv")===-1&&(r.filename+=".csv"):r.filename="table.csv";let o=[],u=[];r.columns&&r.data?(o=r.columns,u=r.data):(o=this.allColumns,"original"in r||(r.original=!0),u=r.original?this.data:this.rebuildData);let _=!1;"noHeader"in r&&(_=r.noHeader);const g=v$(o,u,r,_);r.callback?r.callback(g):y$.download(r.filename,g)},dragAndDrop(r,o){this.$emit("on-drag-drop",r,o)},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnVisibleChange(r){r&&t.nextTick(()=>{this.handleResize()})},addTable(r){const o=this[r];!o||(o.tableList||(o.tableList=[]),o.tableList.push({id:this.id,table:this}))},removeTable(r){const o=this[r];if(!o||!o.tableList)return;const u=o.tableList.findIndex(_=>_.id===this.id);o.tableList.splice(u,1)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.context||(this.currentContext=this.$parent),this.showSlotHeader=this.$slots.header!==void 0,this.showSlotFooter=this.$slots.footer!==void 0,this.rebuildData=this.makeDataWithSortAndFilter()},mounted(){this.addTable("TabsInstance"),this.addTable("ModalInstance"),this.addTable("DrawerInstance"),this.handleResize(),t.nextTick(()=>this.ready=!0),a(window,"resize",this.handleResize),this.observer=Gc(),this.observer.listenTo(this.$el,this.handleResize)},beforeUnmount(){this.removeTable("TabsInstance"),this.removeTable("ModalInstance"),this.removeTable("DrawerInstance"),l(window,"resize",this.handleResize),this.observer.removeAllListeners(this.$el),this.observer.uninstall(this.$el),this.observer=null},watch:{data:{handler(){const r=this.rebuildData.length;this.objData=this.makeObjData(),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize(),r||this.fixedHeader(),setTimeout(()=>{this.cloneData=V(this.data)},0)},deep:!0},columns:{handler(){const r=this.makeColumnsId(this.columns);this.allColumns=rd(r),this.cloneColumns=this.makeColumns(r),this.columnRows=this.makeColumnRows(!1,r),this.leftFixedColumnRows=this.makeColumnRows("left",r),this.rightFixedColumnRows=this.makeColumnRows("right",r),this.rebuildData=this.makeDataWithSortAndFilter(),this.handleResize()},deep:!0},height(){this.handleResize()},maxHeight(){this.handleResize()},showHorizontalScrollBar(){this.handleResize()},showVerticalScrollBar(){this.handleResize()}}},C$={cellspacing:"0",cellpadding:"0",border:"0"},S$=["innerHTML"],E$=["innerHTML"],M$={class:"ivu-table-resize-line",ref:"resizeLine"};function T$(r,o,u,_,g,f){const k=t.resolveComponent("table-head"),O=t.resolveComponent("table-body"),G=t.resolveComponent("table-summary"),z=t.resolveComponent("DropdownMenu"),j=t.resolveComponent("Dropdown"),ae=t.resolveComponent("Spin");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.wrapClasses),style:t.normalizeStyle(f.styles),ref:"tableWrap"},[t.createElementVNode("div",{class:t.normalizeClass(f.classes)},[g.showSlotHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-title"]),ref:"title"},[t.renderSlot(r.$slots,"header")],2)):t.createCommentVNode("",!0),u.showHeader?(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass([g.prefixCls+"-header"]),ref:"header",onMousewheel:o[0]||(o[0]=(..._e)=>f.handleMouseWheel&&f.handleMouseWheel(..._e))},[t.createVNode(k,{"prefix-cls":g.prefixCls,styleObject:f.tableHeaderStyle,columns:g.cloneColumns,"column-rows":g.columnRows,"obj-data":g.objData,"columns-width":g.columnsWidth,data:g.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","obj-data","columns-width","data"])],34)):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-body"]),style:t.normalizeStyle(f.bodyStyle),ref:"body",onScroll:o[1]||(o[1]=(..._e)=>f.handleBodyScroll&&f.handleBodyScroll(..._e))},[t.createVNode(O,{ref:"tbody",draggable:u.draggable,"prefix-cls":g.prefixCls,styleObject:f.tableStyle,columns:g.cloneColumns,data:g.rebuildData,"row-key":u.rowKey,"columns-width":g.columnsWidth,"obj-data":g.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),[[t.vShow,!(f.localeNoDataText&&(!u.data||u.data.length===0)||f.localeNoFilteredDataText&&(!g.rebuildData||g.rebuildData.length===0))]]),u.showSummary&&u.data&&u.data.length?(t.openBlock(),t.createBlock(G,{key:2,ref:"summary","prefix-cls":g.prefixCls,styleObject:f.tableStyle,columns:g.cloneColumns,data:f.summaryData,"columns-width":g.columnsWidth},null,8,["prefix-cls","styleObject","columns","data","columns-width"])):t.createCommentVNode("",!0),t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-tip"]),style:t.normalizeStyle(f.bodyStyle),onScroll:o[2]||(o[2]=(..._e)=>f.handleBodyScroll&&f.handleBodyScroll(..._e))},[t.createElementVNode("table",C$,[t.createElementVNode("tbody",null,[t.createElementVNode("tr",null,[t.createElementVNode("td",{style:t.normalizeStyle({height:f.bodyStyle.height,width:`${g.headerWidth}px`})},[!u.data||u.data.length===0?(t.openBlock(),t.createElementBlock("span",{key:0,innerHTML:f.localeNoDataText},null,8,S$)):(t.openBlock(),t.createElementBlock("span",{key:1,innerHTML:f.localeNoFilteredDataText},null,8,E$))],4)])])])],38),[[t.vShow,!!f.localeNoDataText&&(!u.data||u.data.length===0)||!!f.localeNoFilteredDataText&&(!g.rebuildData||g.rebuildData.length===0)]]),f.isLeftFixed?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(f.fixedTableClasses),style:t.normalizeStyle(f.fixedTableStyle)},[u.showHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.fixedHeaderClasses)},[t.createVNode(k,{fixed:"left","prefix-cls":g.prefixCls,styleObject:f.fixedTableStyle,columns:f.leftFixedColumns,"column-rows":g.columnRows,"fixed-column-rows":g.leftFixedColumnRows,"obj-data":g.objData,"columns-width":g.columnsWidth,data:g.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-fixed-body"]),style:t.normalizeStyle(f.fixedBodyStyle),ref:"fixedBody",onMousewheel:o[3]||(o[3]=(..._e)=>f.handleFixedMousewheel&&f.handleFixedMousewheel(..._e)),"on:DOMMouseScroll":o[4]||(o[4]=(..._e)=>f.handleFixedMousewheel&&f.handleFixedMousewheel(..._e))},[t.createVNode(O,{fixed:"left",draggable:u.draggable,"prefix-cls":g.prefixCls,styleObject:f.fixedTableStyle,columns:f.leftFixedColumns,data:g.rebuildData,"row-key":u.rowKey,"columns-width":g.columnsWidth,"obj-data":g.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),u.showSummary&&u.data&&u.data.length?(t.openBlock(),t.createBlock(G,{key:1,fixed:"left","prefix-cls":g.prefixCls,styleObject:f.fixedTableStyle,columns:f.leftFixedColumns,data:f.summaryData,"columns-width":g.columnsWidth,style:t.normalizeStyle({"margin-top":g.showHorizontalScrollBar?g.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):t.createCommentVNode("",!0)],6)):t.createCommentVNode("",!0),f.isRightFixed?(t.openBlock(),t.createElementBlock("div",{key:4,class:t.normalizeClass(f.fixedRightTableClasses),style:t.normalizeStyle(f.fixedRightTableStyle)},[u.showHeader?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(f.fixedHeaderClasses)},[t.createVNode(k,{fixed:"right","prefix-cls":g.prefixCls,styleObject:f.fixedRightTableStyle,columns:f.rightFixedColumns,"column-rows":g.columnRows,"fixed-column-rows":g.rightFixedColumnRows,"obj-data":g.objData,"columns-width":g.columnsWidth,data:g.rebuildData},null,8,["prefix-cls","styleObject","columns","column-rows","fixed-column-rows","obj-data","columns-width","data"])],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass([g.prefixCls+"-fixed-body"]),style:t.normalizeStyle(f.fixedBodyStyle),ref:"fixedRightBody",onMousewheel:o[5]||(o[5]=(..._e)=>f.handleFixedMousewheel&&f.handleFixedMousewheel(..._e)),"on:DOMMouseScroll":o[6]||(o[6]=(..._e)=>f.handleFixedMousewheel&&f.handleFixedMousewheel(..._e))},[t.createVNode(O,{fixed:"right",draggable:u.draggable,"prefix-cls":g.prefixCls,styleObject:f.fixedRightTableStyle,columns:f.rightFixedColumns,data:g.rebuildData,"row-key":u.rowKey,"columns-width":g.columnsWidth,"obj-data":g.objData},null,8,["draggable","prefix-cls","styleObject","columns","data","row-key","columns-width","obj-data"])],38),u.showSummary&&u.data&&u.data.length?(t.openBlock(),t.createBlock(G,{key:1,fixed:"right","prefix-cls":g.prefixCls,styleObject:f.fixedRightTableStyle,columns:f.rightFixedColumns,data:f.summaryData,"columns-width":g.columnsWidth,style:t.normalizeStyle({"margin-top":g.showHorizontalScrollBar?g.scrollBarWidth+"px":0})},null,8,["prefix-cls","styleObject","columns","data","columns-width","style"])):t.createCommentVNode("",!0)],6)):t.createCommentVNode("",!0),f.isRightFixed?(t.openBlock(),t.createElementBlock("div",{key:5,class:t.normalizeClass([g.prefixCls+"-fixed-right-header"]),style:t.normalizeStyle(f.fixedRightHeaderStyle)},null,6)):t.createCommentVNode("",!0),g.showSlotFooter?(t.openBlock(),t.createElementBlock("div",{key:6,class:t.normalizeClass([g.prefixCls+"-footer"]),ref:"footer"},[t.renderSlot(r.$slots,"footer")],2)):t.createCommentVNode("",!0)],2),t.withDirectives(t.createElementVNode("div",M$,null,512),[[t.vShow,g.showResizeLine]]),u.showContextMenu?(t.openBlock(),t.createElementBlock("div",{key:0,class:"ivu-table-context-menu",style:t.normalizeStyle(g.contextMenuStyles)},[t.createVNode(j,{trigger:"custom",visible:g.contextMenuVisible,transfer:"",onOnClick:f.handleClickDropdownItem,onOnClickoutside:f.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(z,null,{default:t.withCtx(()=>[t.renderSlot(r.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)):t.createCommentVNode("",!0),t.createVNode(ae,{fix:"",size:"large",show:u.loading},{default:t.withCtx(()=>[t.renderSlot(r.$slots,"loading")]),_:3},8,["show"])],6)}var Am=c(w$,[["render",T$]]);const k$={name:"TablePaste",components:{Row:fo,Col:Js,Input:hs,Table:Am},emits:["on-change","on-error","on-success"],props:{value:{type:String},inputProps:{type:Object,default(){return{}}},tableProps:{type:Object,default(){return{}}},hideTable:{type:Boolean,default:!1}},data(){return{content:"",tableColumns:[],tableData:[]}},watch:{value:{handler(r){this.handleResolveContent(r)},immediate:!0}},methods:{handleContentChange(r){const o=r.target.value.trim();this.$emit("on-change",o),this.handleResolveContent(o)},handleResolveContent(r){let o=[];r!==""&&r!==void 0&&(o=r.split(/[\n\u0085\u2028\u2029]|\r\n?/g).map(g=>g.split("	")));const u=this.handleGetErrorIndex(o),_=this.contentToTable(o);this.tableColumns=_.columns,this.tableData=_.data,u.length?this.$emit("on-error",_,u):this.$emit("on-success",_)},handleGetErrorIndex(r){const o=V(r),u=[];if(o.length){const _=o[0].length;o.forEach((g,f)=>{g.length!==_&&u.push(f)})}return u},contentToTable(r){const o=V(r);let u=[],_=[];return o.length>1&&(u=o.shift().map((g,f)=>({title:g,key:`key${f}`})),_=o.map(g=>{const f={};return g.forEach((k,O)=>{f[`key${O}`]=k}),f})),{columns:u,data:_}}}},A$={class:"ivu-table-paste"},P$={key:0,class:"ivu-table-paste-input"},I$={key:0,class:"ivu-table-paste-input"};function N$(r,o,u,_,g,f){const k=t.resolveComponent("Input"),O=t.resolveComponent("Col"),G=t.resolveComponent("Table"),z=t.resolveComponent("Row");return t.openBlock(),t.createElementBlock("div",A$,[u.hideTable?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[u.value!==void 0||!r.$slots.default?(t.openBlock(),t.createElementBlock("div",I$,[t.renderSlot(r.$slots,"default",{},()=>[t.createVNode(k,t.mergeProps({modelValue:g.content,"onUpdate:modelValue":o[1]||(o[1]=j=>g.content=j),type:"textarea"},u.inputProps,{onOnChange:f.handleContentChange}),null,16,["modelValue","onOnChange"])])])):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createBlock(z,{key:0,gutter:32},{default:t.withCtx(()=>[t.createVNode(O,{span:"12"},{default:t.withCtx(()=>[u.value!==void 0||!r.$slots.default?(t.openBlock(),t.createElementBlock("div",P$,[t.renderSlot(r.$slots,"default",{},()=>[t.createVNode(k,t.mergeProps({modelValue:g.content,"onUpdate:modelValue":o[0]||(o[0]=j=>g.content=j),type:"textarea"},u.inputProps,{onOnChange:f.handleContentChange}),null,16,["modelValue","onOnChange"])])])):t.createCommentVNode("",!0)]),_:3}),t.createVNode(O,{span:"12"},{default:t.withCtx(()=>[t.createVNode(G,t.mergeProps({columns:g.tableColumns,data:g.tableData},u.tableProps),null,16,["columns","data"])]),_:1})]),_:3}))])}var PE=c(k$,[["render",N$]]);const R$={name:"TagSelect",mixins:[tn],components:{Tag:Vc,Icon:E},emits:["on-change","on-checked-all","update:modelValue"],provide(){return{TagSelectInstance:this}},props:{modelValue:{type:Array,default(){return[]}},expandable:{type:Boolean,default:!1},hideCheckAll:{type:Boolean,default:!1},locale:{type:Object,default(){return{collapseText:"",expandText:""}}}},data(){return{currentValue:this.modelValue,checkedAll:!1,expand:!1,tagSelectOptionList:[]}},computed:{classes(){return{"ivu-tag-select-with-expanded":this.expandable,"ivu-tag-select-expanded":this.expand}}},watch:{modelValue(r){this.currentValue=r,this.handleUpdateTags()}},methods:{handleUpdateTags(){let r=!0;this.tagSelectOptionList.map(o=>o.option).forEach(o=>{this.currentValue.indexOf(o.name)>=0?o.checked=!0:(o.checked=!1,r=!1)}),this.checkedAll=r},handleChangeTag(r){const o=[];let u=!0;this.tagSelectOptionList.map(_=>_.option).forEach(_=>{_.checked?o.push(_.name):u=!1}),this.currentValue=o,this.$emit("update:modelValue",o),this.$emit("on-change",[...o],r),this.handleFormItemChange("change",r),r&&(this.checkedAll=u)},handleCheckAll(r){this.checkedAll=r,this.tagSelectOptionList.map(o=>o.option).forEach(o=>{o.checked=r}),this.handleChangeTag(),this.$emit("on-checked-all",r)},handleToggleExpand(){this.expand=!this.expand}},mounted(){this.handleUpdateTags()}},D$={key:0,class:"ivu-tag-select-option"},L$={key:0},B$={key:1};function O$(r,o,u,_,g,f){const k=t.resolveComponent("Tag"),O=t.resolveComponent("Icon");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["ivu-tag-select",f.classes])},[u.hideCheckAll?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",D$,[t.createVNode(k,{checkable:"",checked:g.checkedAll,onOnChange:f.handleCheckAll,color:"primary"},{default:t.withCtx(()=>[t.createTextVNode("")]),_:1},8,["checked","onOnChange"])])),t.renderSlot(r.$slots,"default"),u.expandable?(t.openBlock(),t.createElementBlock("a",{key:1,class:"ivu-tag-select-expand-btn",onClick:o[0]||(o[0]=(...G)=>f.handleToggleExpand&&f.handleToggleExpand(...G))},[g.expand?(t.openBlock(),t.createElementBlock("span",L$,t.toDisplayString(u.locale.collapseText),1)):(t.openBlock(),t.createElementBlock("span",B$,t.toDisplayString(u.locale.expandText),1)),g.expand?(t.openBlock(),t.createBlock(O,{key:2,type:"ios-arrow-up"})):(t.openBlock(),t.createBlock(O,{key:3,type:"ios-arrow-down"}))])):t.createCommentVNode("",!0)],2)}var IE=c(R$,[["render",O$]]);const V$={name:"TagSelectOption",components:{Tag:Vc},inject:["TagSelectInstance"],props:{name:{type:[String,Number],required:!0},tagProps:{type:Object,default(){return{}}},color:{type:String,default:"primary"}},data(){return{checked:!1,id:te(6)}},methods:{handleChange(r){this.checked=r,this.TagSelectInstance.handleChangeTag(this.name)},addOption(){this.TagSelectInstance.tagSelectOptionList.push({id:this.id,option:this})},removeOption(){const r=this.TagSelectInstance,o=r.tagSelectOptionList.findIndex(u=>u.id===this.id);r.tagSelectOptionList.splice(o,1)}},mounted(){this.addOption()},beforeUnmount(){this.removeOption()}},F$={class:"ivu-tag-select-option"};function U$(r,o,u,_,g,f){const k=t.resolveComponent("Tag");return t.openBlock(),t.createElementBlock("div",F$,[t.createVNode(k,t.mergeProps({checkable:"",checked:g.checked,onOnChange:f.handleChange,color:u.color},u.tagProps),{default:t.withCtx(()=>[t.renderSlot(r.$slots,"default")]),_:3},16,["checked","onOnChange","color"])])}var NE=c(V$,[["render",U$]]);const RE={name:"Text",mixins:[Kh],render(){return t.h(_m,{...this.$props,component:"span",...this.commonEvents()},this.commonSlots())}},DE="ivu-timeline",z$={name:"Timeline",props:{pending:{type:Boolean,default:!1}},computed:{classes(){return[`${DE}`,{[`${DE}-pending`]:this.pending}]}}};function $$(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(f.classes)},[t.renderSlot(r.$slots,"default")],2)}var LE=c(z$,[["render",$$]]);const Xc="ivu-timeline",H$={name:"TimelineItem",props:{color:{type:String,default:"blue"}},data(){return{dot:!1}},mounted(){this.dot=!!this.$refs.dot.innerHTML.length},computed:{itemClasses(){return`${Xc}-item`},tailClasses(){return`${Xc}-item-tail`},headClasses(){return[`${Xc}-item-head`,{[`${Xc}-item-head-custom`]:this.dot,[`${Xc}-item-head-${this.color}`]:this.headColorShow}]},headColorShow(){return this.color==="blue"||this.color==="red"||this.color==="green"},customColor(){let r={};return this.color&&(this.headColorShow||(r={color:this.color,"border-color":this.color})),r},contentClasses(){return`${Xc}-item-content`}}};function G$(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass(f.itemClasses)},[t.createElementVNode("div",{class:t.normalizeClass(f.tailClasses)},null,2),t.createElementVNode("div",{class:t.normalizeClass(f.headClasses),style:t.normalizeStyle(f.customColor),ref:"dot"},[t.renderSlot(r.$slots,"dot")],6),t.createElementVNode("div",{class:t.normalizeClass(f.contentClasses)},[t.renderSlot(r.$slots,"default")],2)],2)}var BE=c(H$,[["render",G$]]),OE={mixins:[TS,om],components:{TimePickerPanel:zS,RangeTimePickerPanel:jS},props:{type:{validator(r){return w(r,["time","timerange"])},default:"time"}},computed:{panel(){return this.type==="timerange"?"RangeTimePickerPanel":"TimePickerPanel"},ownPickerProps(){return{disabledHours:this.disabledHours,disabledMinutes:this.disabledMinutes,disabledSeconds:this.disabledSeconds,hideDisabledOptions:this.hideDisabledOptions}}},watch:{visible(r){r&&t.nextTick(()=>{this.timeSpinnerList.map(o=>o.timeSpinner).forEach(o=>o.updateScroll())})}}};const VE={name:"Title",mixins:[Kh],props:{level:{type:Number,validator(r){return w(r,[1,2,3,4,5,6])},default:1}},render(){return t.h(_m,{...this.$props,component:`h${this.level}`,...this.commonEvents()},this.commonSlots())}},W$={name:"Search",components:{Input:hs},emits:["on-query-change","on-query-clear"],props:{prefixCls:String,placeholder:String,query:String},data(){return{currentQuery:this.query}},watch:{query(r){this.currentQuery=r},currentQuery(r){this.$emit("on-query-change",r)}},computed:{icon(){return this.query===""?"ios-search":"ios-close-circle"}},methods:{handleClick(){this.currentQuery!==""&&(this.currentQuery="",this.$emit("on-query-clear"))}}};function j$(r,o,u,_,g,f){const k=t.resolveComponent("Input");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(u.prefixCls)},[t.createVNode(k,{modelValue:g.currentQuery,"onUpdate:modelValue":o[0]||(o[0]=O=>g.currentQuery=O),size:"small",icon:f.icon,placeholder:u.placeholder,onOnClick:f.handleClick},null,8,["modelValue","icon","placeholder","onOnClick"])],2)}var K$=c(W$,[["render",j$]]);const q$={name:"TransferList",components:{Search:K$,Checkbox:Oc},inject:["TransferInstance"],emits:["on-checked-keys-change"],props:{prefixCls:String,data:Array,renderFormat:Function,checkedKeys:Array,listStyle:Object,title:[String,Number],filterable:Boolean,filterPlaceholder:String,filterMethod:Function,notFoundText:String,validKeysCount:Number},data(){return{showItems:[],query:"",showFooter:!0}},watch:{data(){this.updateFilteredData()}},computed:{classes(){return[`${this.prefixCls}`,{[`${this.prefixCls}-with-footer`]:this.showFooter}]},bodyClasses(){return[`${this.prefixCls}-body`,{[`${this.prefixCls}-body-with-search`]:this.filterable,[`${this.prefixCls}-body-with-footer`]:this.showFooter}]},count(){const r=this.validKeysCount;return(r>0?`${r}/`:"")+`${this.data.length}`},checkedAll(){return this.filterData.filter(r=>!r.disabled).length===this.validKeysCount&&this.validKeysCount!==0},checkedAllDisabled(){return this.filterData.filter(r=>!r.disabled).length<=0},filterData(){return this.showItems.filter(r=>this.filterMethod(r,this.query))}},methods:{itemClasses(r){return[`${this.prefixCls}-content-item`,{[`${this.prefixCls}-content-item-disabled`]:r.disabled}]},showLabel(r){return this.renderFormat(r)},isCheck(r){return this.checkedKeys.some(o=>o===r.key)},select(r){if(r.disabled)return;const o=this.checkedKeys.indexOf(r.key);o>-1?this.checkedKeys.splice(o,1):this.checkedKeys.push(r.key),this.TransferInstance.handleCheckedKeys()},updateFilteredData(){this.showItems=this.data},toggleSelectAll(r){const o=r?this.filterData.filter(u=>!u.disabled||this.checkedKeys.indexOf(u.key)>-1).map(u=>u.key):this.filterData.filter(u=>u.disabled&&this.checkedKeys.indexOf(u.key)>-1).map(u=>u.key);this.$emit("on-checked-keys-change",o)},handleQueryClear(){this.query=""},handleQueryChange(r){this.query=r}},created(){this.updateFilteredData()},mounted(){this.showFooter=this.$slots.default!==void 0}},X$=["onClick"],Y$=["innerHTML"];function J$(r,o,u,_,g,f){const k=t.resolveComponent("Checkbox"),O=t.resolveComponent("Search");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(f.classes),style:t.normalizeStyle(u.listStyle)},[t.createElementVNode("div",{class:t.normalizeClass(u.prefixCls+"-header")},[t.createVNode(k,{modelValue:f.checkedAll,disabled:f.checkedAllDisabled,"onUpdate:modelValue":f.toggleSelectAll},null,8,["modelValue","disabled","onUpdate:modelValue"]),t.createElementVNode("span",{class:t.normalizeClass(u.prefixCls+"-header-title"),onClick:o[0]||(o[0]=G=>f.toggleSelectAll(!f.checkedAll))},t.toDisplayString(u.title),3),t.createElementVNode("span",{class:t.normalizeClass(u.prefixCls+"-header-count")},t.toDisplayString(f.count),3)],2),t.createElementVNode("div",{class:t.normalizeClass(f.bodyClasses)},[u.filterable?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(u.prefixCls+"-body-search-wrapper")},[t.createVNode(O,{"prefix-cls":u.prefixCls+"-search",query:g.query,onOnQueryClear:f.handleQueryClear,onOnQueryChange:f.handleQueryChange,placeholder:u.filterPlaceholder},null,8,["prefix-cls","query","onOnQueryClear","onOnQueryChange","placeholder"])],2)):t.createCommentVNode("",!0),t.createElementVNode("ul",{class:t.normalizeClass(u.prefixCls+"-content")},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.filterData,(G,z)=>(t.openBlock(),t.createElementBlock("li",{key:z,class:t.normalizeClass(f.itemClasses(G)),onClick:t.withModifiers(j=>f.select(G),["prevent"])},[t.createVNode(k,{modelValue:f.isCheck(G),disabled:G.disabled},null,8,["modelValue","disabled"]),t.createElementVNode("span",{innerHTML:f.showLabel(G)},null,8,Y$)],10,X$))),128)),t.createElementVNode("li",{class:t.normalizeClass(u.prefixCls+"-content-not-found")},t.toDisplayString(u.notFoundText),3)],2)],2),g.showFooter?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(u.prefixCls+"-footer")},[t.renderSlot(r.$slots,"default")],2)):t.createCommentVNode("",!0)],6)}var FE=c(q$,[["render",J$]]);const Z$={name:"Operation",components:{Button:ar,Icon:E},inject:["TransferInstance"],props:{prefixCls:String,operations:Array,leftActive:Boolean,rightActive:Boolean,reverseOperation:Boolean},methods:{moveToLeft(){this.TransferInstance.moveTo("left")},moveToRight(){this.TransferInstance.moveTo("right")}}},Q$={key:0},eH={key:0},tH={key:0},nH={key:0};function iH(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Button");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(u.prefixCls+"-operation")},[u.reverseOperation?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(O,{type:"primary",size:"small",disabled:!u.leftActive,onClick:f.moveToRight},{default:t.withCtx(()=>[u.operations[1]?(t.openBlock(),t.createElementBlock("span",Q$,t.toDisplayString(u.operations[1]),1)):t.createCommentVNode("",!0),t.createVNode(k,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"]),t.createVNode(O,{type:"primary",size:"small",disabled:!u.rightActive,onClick:f.moveToLeft},{default:t.withCtx(()=>[t.createVNode(k,{type:"ios-arrow-back"}),u.operations[0]?(t.openBlock(),t.createElementBlock("span",eH,t.toDisplayString(u.operations[0]),1)):t.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"])],64)):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createVNode(O,{type:"primary",size:"small",disabled:!u.rightActive,onClick:f.moveToLeft},{default:t.withCtx(()=>[t.createVNode(k,{type:"ios-arrow-back"}),u.operations[0]?(t.openBlock(),t.createElementBlock("span",tH,t.toDisplayString(u.operations[0]),1)):t.createCommentVNode("",!0)]),_:1},8,["disabled","onClick"]),t.createVNode(O,{type:"primary",size:"small",disabled:!u.leftActive,onClick:f.moveToRight},{default:t.withCtx(()=>[u.operations[1]?(t.openBlock(),t.createElementBlock("span",nH,t.toDisplayString(u.operations[1]),1)):t.createCommentVNode("",!0),t.createVNode(k,{type:"ios-arrow-forward"})]),_:1},8,["disabled","onClick"])],64))],2)}var rH=c(Z$,[["render",iH]]);const UE="ivu-transfer",zE={name:"Transfer",mixins:[Pn,tn],emits:["on-change","on-selected-change"],provide(){return{TransferInstance:this}},render(){const r=this.$slots.default?this.$slots.default():"";return t.h("div",{class:this.classes},[t.h(FE,{ref:"left",prefixCls:this.prefixCls+"-list",data:this.leftData,renderFormat:this.renderFormat,checkedKeys:this.leftCheckedKeys,validKeysCount:this.leftValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[0],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleLeftCheckedKeysChange},()=>r),t.h(rH,{prefixCls:this.prefixCls,operations:this.operations,leftActive:this.leftValidKeysCount>0,rightActive:this.rightValidKeysCount>0,reverseOperation:this.reverseOperation}),t.h(FE,{ref:"right",prefixCls:this.prefixCls+"-list",data:this.rightData,renderFormat:this.renderFormat,checkedKeys:this.rightCheckedKeys,validKeysCount:this.rightValidKeysCount,listStyle:this.listStyle,title:this.localeTitles[1],filterable:this.filterable,filterPlaceholder:this.localeFilterPlaceholder,filterMethod:this.filterMethod,notFoundText:this.localeNotFoundText,"onOn-checked-keys-change":this.handleRightCheckedKeysChange},()=>r)])},props:{data:{type:Array,default(){return[]}},renderFormat:{type:Function,default(r){return r.label||r.key}},targetKeys:{type:Array,default(){return[]}},selectedKeys:{type:Array,default(){return[]}},listStyle:{type:Object,default(){return{}}},titles:{type:Array},operations:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!1},filterPlaceholder:{type:String},filterMethod:{type:Function,default(r,o){const u="label"in r?"label":"key";return r[u].indexOf(o)>-1}},notFoundText:{type:String},reverseOperation:{type:Boolean,default:!1}},data(){return{prefixCls:UE,leftData:[],rightData:[],leftCheckedKeys:[],rightCheckedKeys:[]}},computed:{classes(){return[`${UE}`]},leftValidKeysCount(){return this.getValidKeys("left").length},rightValidKeysCount(){return this.getValidKeys("right").length},localeFilterPlaceholder(){return this.filterPlaceholder===void 0?this.t("i.transfer.filterPlaceholder"):this.filterPlaceholder},localeNotFoundText(){return this.notFoundText===void 0?this.t("i.transfer.notFoundText"):this.notFoundText},localeTitles(){return this.titles===void 0?[this.t("i.transfer.titles.source"),this.t("i.transfer.titles.target")]:this.titles}},methods:{getValidKeys(r){return this[`${r}Data`].filter(o=>!o.disabled&&this[`${r}CheckedKeys`].indexOf(o.key)>-1).map(o=>o.key)},splitData(r=!1){this.leftData=[...this.data],this.rightData=[],this.targetKeys.length>0&&this.targetKeys.forEach(o=>{const u=this.leftData.filter((_,g)=>_.key===o?(this.leftData.splice(g,1),!0):!1);u&&u.length>0&&this.rightData.push(u[0])}),r&&this.splitSelectedKey()},splitSelectedKey(){const r=this.selectedKeys;r.length>0&&(this.leftCheckedKeys=this.leftData.filter(o=>r.indexOf(o.key)>-1).map(o=>o.key),this.rightCheckedKeys=this.rightData.filter(o=>r.indexOf(o.key)>-1).map(o=>o.key))},moveTo(r){const o=this.targetKeys,u=r==="left"?"right":"left",_=this.getValidKeys(u),g=r==="right"?_.concat(o):o.filter(f=>!_.some(k=>f===k));this.$refs[u].toggleSelectAll(!1),this.$emit("on-change",g,r,_),this.handleFormItemChange("change",{tarketKeys:g,direction:r,moveKeys:_})},handleLeftCheckedKeysChange(r){this.leftCheckedKeys=r},handleRightCheckedKeysChange(r){this.rightCheckedKeys=r},handleCheckedKeys(){const r=this.getValidKeys("left"),o=this.getValidKeys("right");this.$emit("on-selected-change",r,o)}},watch:{targetKeys(){this.splitData(!1)},data(){this.splitData(!1)}},mounted(){this.splitData(!0)}};var sH={name:"RenderCell",props:{render:Function,data:Object,node:Array},render(){const r={root:this.node[0],node:this.node[1],data:this.data};return this.render(t.h,r)}};const So="ivu-tree",aH={name:"TreeNode",inject:["TreeInstance"],components:{Checkbox:Oc,Icon:E,CollapseTransition:Gy,Render:sH},props:{data:{type:Object,default:()=>{}},multiple:{type:Boolean,default:!1},childrenKey:{type:String,default:"children"},showCheckbox:{type:Boolean,default:!1},appear:{type:Boolean,default:!1}},data(){return{prefixCls:So,appearByClickArrow:!1,globalConfig:{}}},computed:{classes(){return[`${So}-children`]},selectedCls(){return[{[`${So}-node-selected`]:this.data.selected}]},arrowClasses(){return[`${So}-arrow`,{[`${So}-arrow-disabled`]:this.data.disabled,[`${So}-arrow-open`]:this.data.expand}]},titleClasses(){return[`${So}-title`,{[`${So}-title-selected`]:this.data.selected}]},showArrow(){return this.data[this.childrenKey]&&this.data[this.childrenKey].length||"loading"in this.data&&!this.data.loading},showLoading(){return"loading"in this.data&&this.data.loading},isParentRender(){const r=B(this,"Tree");return r&&r.render},parentRender(){const r=B(this,"Tree");return r&&r.render?r.render:null},node(){const r=B(this,"Tree");return r?[r.flatState,r.flatState.find(o=>o.nodeKey===this.data.nodeKey)]:[]},children(){return this.data[this.childrenKey]},arrowType(){const r=this.globalConfig;let o="ios-arrow-forward";return r&&(r.tree.customArrow?o="":r.tree.arrow&&(o=r.tree.arrow)),o},customArrowType(){const r=this.globalConfig;let o="";return r&&r.tree.customArrow&&(o=r.tree.customArrow),o},arrowSize(){const r=this.globalConfig;let o="";return r&&r.tree.arrowSize&&(o=r.tree.arrowSize),o}},methods:{handleExpand(){const r=this.data;if(this.appearByClickArrow=!0,r[this.childrenKey].length===0){const o=B(this,"Tree");if(o&&o.loadData){this.data.loading=!0,o.loadData(r,u=>{this.data.loading=!1,u.length&&(this.data[this.childrenKey]=u,t.nextTick(()=>this.handleExpand()))});return}}r[this.childrenKey]&&r[this.childrenKey].length&&(this.data.expand=!this.data.expand,this.TreeInstance.handleToggleExpand(this.data))},handleClickNode(){this.TreeInstance.expandNode?this.showArrow&&this.handleExpand():this.TreeInstance.selectNode&&this.handleSelect()},handleSelect(){this.data.disabled||(this.TreeInstance.showCheckbox&&this.TreeInstance.checkDirectly?this.handleCheck():this.TreeInstance.handleOnSelected(this.data.nodeKey))},handleCheck(){if(this.data.disabled)return;const r={checked:!this.data.checked&&!this.data.indeterminate,nodeKey:this.data.nodeKey};this.TreeInstance.handleOnCheck(r)},handleContextmenu(r,o){r.contextmenu&&(o.preventDefault(),this.TreeInstance.handleOnContextmenu({data:r,event:o}))},handlePreventSelect(r,o){r.contextmenu&&o.preventDefault()}},created(){const r=t.getCurrentInstance();this.globalConfig=r.appContext.config.globalProperties.$VIEWUI}},oH={key:0,class:"ivu-tree-expand"};function lH(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("Checkbox"),G=t.resolveComponent("Render"),z=t.resolveComponent("TreeNode"),j=t.resolveComponent("collapse-transition");return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass(f.classes)},[t.createElementVNode("li",{onContextmenu:o[2]||(o[2]=t.withModifiers(ae=>f.handleContextmenu(u.data,ae),["stop"])),onSelectstart:o[3]||(o[3]=t.withModifiers(ae=>f.handlePreventSelect(u.data,ae),["stop"]))},[t.createElementVNode("span",{class:t.normalizeClass(f.arrowClasses),onClick:o[0]||(o[0]=(...ae)=>f.handleExpand&&f.handleExpand(...ae))},[f.showArrow?(t.openBlock(),t.createBlock(k,{key:0,type:f.arrowType,custom:f.customArrowType,size:f.arrowSize},null,8,["type","custom","size"])):t.createCommentVNode("",!0),f.showLoading?(t.openBlock(),t.createBlock(k,{key:1,type:"ios-loading",class:"ivu-load-loop"})):t.createCommentVNode("",!0)],2),u.showCheckbox?(t.openBlock(),t.createBlock(O,{key:0,"model-value":u.data.checked,indeterminate:u.data.indeterminate,disabled:u.data.disabled||u.data.disableCheckbox,onClick:t.withModifiers(f.handleCheck,["prevent"])},null,8,["model-value","indeterminate","disabled","onClick"])):t.createCommentVNode("",!0),t.createElementVNode("span",{class:t.normalizeClass(f.titleClasses),onClick:o[1]||(o[1]=(...ae)=>f.handleClickNode&&f.handleClickNode(...ae))},[u.data.render?(t.openBlock(),t.createBlock(G,{key:0,render:u.data.render,data:u.data,node:f.node},null,8,["render","data","node"])):f.isParentRender?(t.openBlock(),t.createBlock(G,{key:1,render:f.parentRender,data:u.data,node:f.node},null,8,["render","data","node"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[t.createTextVNode(t.toDisplayString(u.data.title),1)],64))],2),t.createVNode(j,{appear:u.appear},{default:t.withCtx(()=>[u.data.expand?(t.openBlock(),t.createElementBlock("div",oH,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(f.children,(ae,_e)=>(t.openBlock(),t.createBlock(z,{appear:g.appearByClickArrow,key:_e,data:ae,multiple:u.multiple,"show-checkbox":u.showCheckbox,"children-key":u.childrenKey},null,8,["appear","data","multiple","show-checkbox","children-key"]))),128))])):t.createCommentVNode("",!0)]),_:1},8,["appear"])],32)],2)}var cH=c(aH,[["render",lH]]);const uH="ivu-tree",hH={name:"Tree",mixins:[Pn],components:{TreeNode:cH,Dropdown:Cl,DropdownMenu:Sl},emits:["on-select-change","on-check-change","on-contextmenu","on-toggle-expand"],provide(){return{TreeInstance:this}},props:{data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!1},emptyText:{type:String},childrenKey:{type:String,default:"children"},loadData:{type:Function},render:{type:Function},selectNode:{type:Boolean,default:!0},expandNode:{type:Boolean,default:!1},autoCloseContextmenu:{type:Boolean,default:!0}},data(){return{prefixCls:uH,stateTree:this.data,flatState:[],contextMenuVisible:!1,contextMenuStyles:{top:0,left:0}}},watch:{data:{deep:!0,handler(){this.stateTree=this.data,this.flatState=this.compileFlatState(),this.rebuildTree()}}},computed:{localeEmptyText(){return typeof this.emptyText>"u"?this.t("i.tree.emptyText"):this.emptyText}},methods:{compileFlatState(){let r=0,o=this.childrenKey;const u=[];function _(g,f){g.nodeKey=r++,u[g.nodeKey]={node:g,nodeKey:g.nodeKey},typeof f<"u"&&(u[g.nodeKey].parent=f.nodeKey,u[f.nodeKey][o].push(g.nodeKey)),g[o]&&(u[g.nodeKey][o]=[],g[o].forEach(k=>_(k,g)))}return this.stateTree.forEach(g=>{_(g)}),u},updateTreeUp(r){const o=this.flatState[r].parent;if(typeof o>"u"||this.checkStrictly)return;const u=this.flatState[r].node,_=this.flatState[o].node;u.checked==_.checked&&u.indeterminate==_.indeterminate||(u.checked==!0?(_.checked=_[this.childrenKey].every(g=>g.checked),_.indeterminate=!_.checked):(_.checked=!1,_.indeterminate=_[this.childrenKey].some(g=>g.checked||g.indeterminate)),this.updateTreeUp(o))},rebuildTree(){this.getCheckedNodes().forEach(r=>{this.updateTreeDown(r,{checked:!0});const o=this.flatState[r.nodeKey].parent;if(!o&&o!==0)return;const u=this.flatState[o].node;typeof r.checked<"u"&&r.checked&&u.checked!=r.checked&&this.updateTreeUp(r.nodeKey)})},getSelectedNodes(){return this.flatState.filter(r=>r.node.selected).map(r=>r.node)},getCheckedNodes(){return this.flatState.filter(r=>r.node.checked).map(r=>r.node)},getCheckedAndIndeterminateNodes(){return this.flatState.filter(r=>r.node.checked||r.node.indeterminate).map(r=>r.node)},updateTreeDown(r,o={}){if(!this.checkStrictly){for(let u in o)r[u]=o[u];r[this.childrenKey]&&r[this.childrenKey].forEach(u=>{this.updateTreeDown(u,o)})}},handleSelect(r){if(!this.flatState[r])return;const o=this.flatState[r].node;if(!this.multiple){const u=this.flatState.findIndex(_=>_.node.selected);u>=0&&u!==r&&(this.flatState[u].node.selected=!1)}o.selected=!o.selected,this.$emit("on-select-change",this.getSelectedNodes(),o)},handleCheck({checked:r,nodeKey:o}){if(!this.flatState[o])return;const u=this.flatState[o].node;u.checked=r,u.indeterminate=!1,this.updateTreeUp(o),this.updateTreeDown(u,{checked:r,indeterminate:!1}),this.$emit("on-check-change",this.getCheckedNodes(),u)},handleContextmenu({data:r,event:o}){this.contextMenuVisible&&this.handleClickContextMenuOutside(),t.nextTick(()=>{const u=this.$refs.treeWrap.getBoundingClientRect(),_={left:`${o.clientX-u.left}px`,top:`${o.clientY-u.top}px`};this.contextMenuStyles=_,this.contextMenuVisible=!0,this.$emit("on-contextmenu",r,o,_)})},handleClickContextMenuOutside(){this.contextMenuVisible=!1},handleOnCheck(r){this.handleCheck(r)},handleOnSelected(r){this.handleSelect(r)},handleToggleExpand(r){this.$emit("on-toggle-expand",r)},handleOnContextmenu(r){this.handleContextmenu(r)},closeContextMenu(){this.handleClickContextMenuOutside()},handleClickDropdownItem(){this.autoCloseContextmenu&&this.closeContextMenu()}},created(){this.flatState=this.compileFlatState(),this.rebuildTree()}};function dH(r,o,u,_,g,f){const k=t.resolveComponent("TreeNode"),O=t.resolveComponent("DropdownMenu"),G=t.resolveComponent("Dropdown");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(g.prefixCls),ref:"treeWrap"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(g.stateTree,(z,j)=>(t.openBlock(),t.createBlock(k,{key:j,data:z,visible:"",multiple:u.multiple,"show-checkbox":u.showCheckbox,"children-key":u.childrenKey},null,8,["data","multiple","show-checkbox","children-key"]))),128)),g.stateTree.length?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass([g.prefixCls+"-empty"])},t.toDisplayString(f.localeEmptyText),3)),t.createElementVNode("div",{class:"ivu-tree-context-menu",style:t.normalizeStyle(g.contextMenuStyles)},[t.createVNode(G,{trigger:"custom",visible:g.contextMenuVisible,transfer:"",onOnClick:f.handleClickDropdownItem,onOnClickoutside:f.handleClickContextMenuOutside},{list:t.withCtx(()=>[t.createVNode(O,null,{default:t.withCtx(()=>[t.renderSlot(r.$slots,"contextMenu")]),_:3})]),_:3},8,["visible","onOnClick","onOnClickoutside"])],4)],2)}var r1=c(hH,[["render",dH]]);const fH={name:"TreeSelect",components:{Select:sr,Tree:r1},emits:["on-change","update:modelValue","on-open-change"],mixins:[tn],props:{modelValue:{type:[String,Number,Array]},data:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default(){const r=t.getCurrentInstance().appContext.config.globalProperties;return!r.$VIEWUI||r.$VIEWUI.transfer===""?!1:r.$VIEWUI.transfer}}},data(){let r=this.modelValue;return r===null&&(this.multiple?r=[]:r=""),{currentValue:r,isChangeValueInTree:!1,isValueChangeByTree:!1,isValueNull:!1}},watch:{modelValue(r){if(this.isChangeValueInTree)this.isChangeValueInTree=!1;else{let o=r;o===null&&(this.isValueNull=!0,this.multiple?o=[]:o=""),this.currentValue=o,this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0)}},data(){this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0))}},computed:{valueToArray(){return typeof this.currentValue=="object"?this.currentValue:[this.currentValue]},isCheckboxUsable(){return this.multiple&&this.showCheckbox},transferClassName(){return this.transfer?"ivu-tree-select-transfer":""},classes(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode(r,o){if(this.multiple)r.length?(this.currentValue=r.map(u=>u.value),this.handleUpdateSelectValue(o.value,o.title)):(this.currentValue=[],this.handleUpdateSelectValue("",""));else if(r.length){const u=r[0];this.currentValue=u.value,this.handleUpdateSelectValue(u.value,u.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("update:modelValue",this.currentValue),this.$emit("on-change",this.currentValue),this.handleFormItemChange("change",this.currentValue)},handleUpdateTreeNodes(r,o=!1){r.forEach(u=>{this.valueToArray.indexOf(u.value)>=0?(this.isCheckboxUsable?u.checked=!0:u.selected=!0,this.handleUpdateSelectValue(u.value,u.title)):this.isCheckboxUsable?u.checked=!1:u.selected=!1,u.children&&u.children.length&&this.handleUpdateTreeNodes(u.children)}),o&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue(r,o){r===""?this.$refs.select.reset():(this.isValueChangeByTree=!0,this.$refs.select.onOptionClick({value:r,label:o}))},handleChange(r){this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=r,this.isValueNull?(this.isValueNull=!1,this.$emit("update:modelValue",null)):this.$emit("update:modelValue",r),this.$emit("on-change",r),this.handleFormItemChange("change",r),this.$refs.select.reset(),this.handleUpdateTreeNodes(this.data,!0),t.nextTick(()=>{this.isValueChangeByTree=!1}))},handleOpenChange(r){this.$emit("on-open-change",r)}},mounted(){this.handleUpdateTreeNodes(this.data,!0)}};function pH(r,o,u,_,g,f){const k=t.resolveComponent("Tree"),O=t.resolveComponent("Select");return t.openBlock(),t.createBlock(O,t.mergeProps({ref:"select"},r.$attrs,{multiple:u.multiple,class:["ivu-tree-select",f.classes],"transfer-class-name":f.transferClassName,onOnChange:f.handleChange,onOnOpenChange:f.handleOpenChange,hideNotFound:"",transfer:u.transfer}),{default:t.withCtx(()=>[t.createVNode(k,{data:u.data,multiple:u.multiple,onOnSelectChange:f.handleSelectNode,onOnCheckChange:f.handleSelectNode,"check-strictly":"","show-checkbox":u.multiple&&u.showCheckbox,"check-directly":"","load-data":u.loadData},null,8,["data","multiple","onOnSelectChange","onOnCheckChange","show-checkbox","load-data"])]),_:1},16,["multiple","class","transfer-class-name","onOnChange","onOnOpenChange","transfer"])}var $E=c(fH,[["render",pH]]);const mH={name:"Typography"},gH={class:"ivu-typography"};function vH(r,o,u,_,g,f){return t.openBlock(),t.createElementBlock("article",gH,[t.renderSlot(r.$slots,"default")])}var HE=c(mH,[["render",vH]]);const s1="ivu-upload",yH={name:"UploadList",components:{Icon:E,iProgress:Tm},emits:["on-file-click","on-file-preview","on-file-remove"],props:{files:{type:Array,default(){return[]}}},data(){return{prefixCls:s1}},methods:{fileCls(r){return[`${s1}-list-file`,{[`${s1}-list-file-finish`]:r.status==="finished"}]},handleClick(r){this.$emit("on-file-click",r)},handlePreview(r){this.$emit("on-file-preview",r)},handleRemove(r){this.$emit("on-file-remove",r)},format(r){const o=r.name.split(".").pop().toLocaleLowerCase()||"";let u="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(o)>-1&&(u="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(o)>-1&&(u="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(o)>-1&&(u="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(o)>-1&&(u="md-document"),["numbers","csv","xls","xlsx"].indexOf(o)>-1&&(u="ios-stats"),["keynote","ppt","pptx"].indexOf(o)>-1&&(u="ios-videocam"),u},parsePercentage(r){return parseInt(r,10)}}},bH=["onClick"],_H=["onClick"];function xH(r,o,u,_,g,f){const k=t.resolveComponent("Icon"),O=t.resolveComponent("i-progress");return t.openBlock(),t.createElementBlock("ul",{class:t.normalizeClass([g.prefixCls+"-list"])},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.files,(G,z)=>(t.openBlock(),t.createElementBlock("li",{key:z,class:t.normalizeClass(f.fileCls(G)),onClick:j=>f.handleClick(G)},[t.createElementVNode("span",{onClick:j=>f.handlePreview(G)},[t.createVNode(k,{type:f.format(G)},null,8,["type"]),t.createTextVNode(" "+t.toDisplayString(G.name),1)],8,_H),t.withDirectives(t.createVNode(k,{type:"ios-close",class:t.normalizeClass([g.prefixCls+"-list-remove"]),onClick:j=>f.handleRemove(G)},null,8,["class","onClick"]),[[t.vShow,G.status==="finished"]]),t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[G.showProgress?(t.openBlock(),t.createBlock(O,{key:0,"stroke-width":2,percent:f.parsePercentage(G.percentage),status:G.status==="finished"&&G.showProgress?"success":"normal"},null,8,["percent","status"])):t.createCommentVNode("",!0)]),_:2},1024)],10,bH))),128))],2)}var wH=c(yH,[["render",xH]]);function CH(r,o,u){const _=`fail to post ${r} ${u.status}'`,g=new Error(_);return g.status=u.status,g.method="post",g.url=r,g}function GE(r){const o=r.responseText||r.response;if(!o)return o;try{return JSON.parse(o)}catch{return o}}function SH(r){if(typeof XMLHttpRequest>"u")return;const o=new XMLHttpRequest,u=r.action;o.upload&&(o.upload.onprogress=function(f){f.total>0&&(f.percent=f.loaded/f.total*100),r.onProgress(f)});const _=new FormData;r.data&&Object.keys(r.data).map(f=>{_.append(f,r.data[f])}),_.append(r.filename,r.file),o.onerror=function(f){r.onError(f)},o.onload=function(){if(o.status<200||o.status>=300)return r.onError(CH(u,r,o),GE(o));r.onSuccess(GE(o))},o.open("post",u,!0),r.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);const g=r.headers||{};for(let f in g)g.hasOwnProperty(f)&&g[f]!==null&&o.setRequestHeader(f,g[f]);o.send(_)}const sd="ivu-upload",EH={name:"Upload",mixins:[tn],components:{UploadList:wH},props:{action:{type:String,required:!0},headers:{type:Object,default(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator(r){return w(r,["select","drag"])},default:"select"},format:{type:Array,default(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default(){return{}}},onSuccess:{type:Function,default(){return{}}},onError:{type:Function,default(){return{}}},onRemove:{type:Function,default(){return{}}},onPreview:{type:Function,default(){return{}}},onExceededSize:{type:Function,default(){return{}}},onFormatError:{type:Function,default(){return{}}},defaultFileList:{type:Array,default(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},webkitdirectory:{type:Boolean,default:!1}},data(){return{prefixCls:sd,dragOver:!1,fileList:[],tempIndex:1}},computed:{classes(){return[`${sd}`,{[`${sd}-select`]:this.type==="select",[`${sd}-drag`]:this.type==="drag",[`${sd}-dragOver`]:this.type==="drag"&&this.dragOver}]}},methods:{handleClick(){this.itemDisabled||this.$refs.input.click()},handleChange(r){const o=r.target.files;!o||(this.uploadFiles(o),this.$refs.input.value=null)},onDrop(r){this.dragOver=!1,!this.itemDisabled&&this.uploadFiles(r.dataTransfer.files)},handlePaste(r){this.itemDisabled||this.paste&&this.uploadFiles(r.clipboardData.files)},uploadFiles(r){let o=Array.prototype.slice.call(r);this.multiple||(o=o.slice(0,1)),o.length!==0&&o.forEach(u=>{this.upload(u)})},upload(r){if(!this.beforeUpload)return this.post(r);const o=this.beforeUpload(r);o&&o.then?o.then(u=>{Object.prototype.toString.call(u)==="[object File]"?this.post(u):this.post(r)},()=>{}):o!==!1&&this.post(r)},post(r){if(this.format.length){const o=r.name.split(".").pop().toLocaleLowerCase();if(!this.format.some(u=>u.toLocaleLowerCase()===o))return this.onFormatError(r,this.fileList),!1}if(this.maxSize&&r.size>this.maxSize*1024)return this.onExceededSize(r,this.fileList),!1;this.handleStart(r),new FormData().append(this.name,r),SH({headers:this.headers,withCredentials:this.withCredentials,file:r,data:this.data,filename:this.name,action:this.action,onProgress:o=>{this.handleProgress(o,r)},onSuccess:o=>{this.handleSuccess(o,r)},onError:(o,u)=>{this.handleError(o,u,r)}})},handleStart(r){r.uid=Date.now()+this.tempIndex++;const o={status:"uploading",name:r.name,size:r.size,percentage:0,uid:r.uid,showProgress:!0};this.fileList.push(o)},getFile(r){const o=this.fileList;let u;return o.every(_=>(u=r.uid===_.uid?_:null,!u)),u},handleProgress(r,o){const u=this.getFile(o);this.onProgress(r,u,this.fileList),u.percentage=r.percent||0},handleSuccess(r,o){const u=this.getFile(o);u&&(u.status="finished",u.response=r,this.onSuccess(r,u,this.fileList),this.handleFormItemChange("change",u),setTimeout(()=>{u.showProgress=!1},1e3))},handleError(r,o,u){const _=this.getFile(u),g=this.fileList;_.status="fail",g.splice(g.indexOf(_),1),this.onError(r,o,u)},handleRemove(r){const o=this.fileList;o.splice(o.indexOf(r),1),this.onRemove(r,o)},handlePreview(r){r.status==="finished"&&this.onPreview(r)},clearFiles(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler(r){this.fileList=r.map(o=>(o.status="finished",o.percentage=100,o.uid=Date.now()+this.tempIndex++,o))}}}},MH=["multiple","webkitdirectory","accept"];function TH(r,o,u,_,g,f){const k=t.resolveComponent("upload-list");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass([g.prefixCls])},[t.createElementVNode("div",{class:t.normalizeClass(f.classes),onClick:o[1]||(o[1]=(...O)=>f.handleClick&&f.handleClick(...O)),onDrop:o[2]||(o[2]=t.withModifiers((...O)=>f.onDrop&&f.onDrop(...O),["prevent"])),onPaste:o[3]||(o[3]=(...O)=>f.handlePaste&&f.handlePaste(...O)),onDragover:o[4]||(o[4]=t.withModifiers(O=>g.dragOver=!0,["prevent"])),onDragleave:o[5]||(o[5]=t.withModifiers(O=>g.dragOver=!1,["prevent"]))},[t.createElementVNode("input",{ref:"input",type:"file",class:t.normalizeClass([g.prefixCls+"-input"]),onChange:o[0]||(o[0]=(...O)=>f.handleChange&&f.handleChange(...O)),multiple:u.multiple,webkitdirectory:u.webkitdirectory,accept:u.accept},null,42,MH),t.renderSlot(r.$slots,"default")],34),t.renderSlot(r.$slots,"tip"),u.showUploadList?(t.openBlock(),t.createBlock(k,{key:0,files:g.fileList,onOnFileRemove:f.handleRemove,onOnFilePreview:f.handlePreview},null,8,["files","onOnFileRemove","onOnFilePreview"])):t.createCommentVNode("",!0)],2)}var WE=c(EH,[["render",TH]]);const jE={name:"UserName",mixins:[Rh],data(){return{className:"ivu-login-username",prefix:"ios-contact-outline",placeholder:"",type:"text",validateMessage:""}}},kH={name:"WordCount",components:{Circle:Jp},props:{value:{type:[String,Number],default:""},total:{type:Number,default:0},hideTotal:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},circle:{type:Boolean,default:!1},size:{type:[String,Number],default:14}},computed:{isOverflow(){return this.value.length>this.total},percent(){let r=this.value.length/this.total*100;return r>100&&(r=100),r},strokeColor(){return this.isOverflow?"#ed4014":"#2d8cf0"}}},AH={class:"ivu-word-count"},PH={key:0,class:"ivu-word-count-prefix"},IH={key:1,class:"ivu-word-count-prefix ivu-word-count-overflow"},NH={key:3,class:"ivu-word-count-overflow"},RH={key:5,class:"ivu-word-count-suffix"},DH={key:6,class:"ivu-word-count-suffix ivu-word-count-overflow"};function LH(r,o,u,_,g,f){const k=t.resolveComponent("Circle");return t.openBlock(),t.createElementBlock("div",AH,[u.circle?(t.openBlock(),t.createBlock(k,{key:0,percent:f.percent,size:u.size,"stroke-color":f.strokeColor},null,8,["percent","size","stroke-color"])):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[f.isOverflow?(t.openBlock(),t.createElementBlock("span",IH,[t.renderSlot(r.$slots,"prefix-overflow")])):(t.openBlock(),t.createElementBlock("span",PH,[t.renderSlot(r.$slots,"prefix")])),!f.isOverflow||!u.overflow?(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass({"ivu-word-count-overflow":f.isOverflow})},[t.renderSlot(r.$slots,"length",{length:u.value.length},()=>[t.createTextVNode(t.toDisplayString(u.value.length),1)])],2)):(t.openBlock(),t.createElementBlock("span",NH,t.toDisplayString(u.value.length-u.total),1)),u.hideTotal?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock(t.Fragment,{key:4},[t.renderSlot(r.$slots,"separator",{},()=>[t.createTextVNode(" / ")]),t.renderSlot(r.$slots,"total",{total:u.total},()=>[t.createTextVNode(t.toDisplayString(u.total),1)])],64)),f.isOverflow?(t.openBlock(),t.createElementBlock("span",DH,[t.renderSlot(r.$slots,"suffix-overflow")])):(t.openBlock(),t.createElementBlock("span",RH,[t.renderSlot(r.$slots,"suffix")]))],64))])}var KE=c(kH,[["render",LH]]),qE=Object.freeze(Object.defineProperty({__proto__:null,Affix:y,Alert:ee,Anchor:$,AnchorLink:oe,Auth:ke,AutoComplete:gC,Avatar:Th,AvatarList:bC,BackTop:_C,Badge:Gp,Breadcrumb:Zv,BreadcrumbItem:Qv,Button:ar,ButtonGroup:ey,Calendar:PC,Captcha:OC,Card:FC,Carousel:UC,CarouselItem:zC,Cascader:$C,Cell:HC,CellGroup:GC,Checkbox:Oc,CheckboxGroup:uy,Circle:Jp,City:qC,Col:Js,Collapse:YC,ColorPicker:lS,Content:fy,Copy:im,CountDown:mS,CountUp:gS,DatePicker:qS,Description:XS,DescriptionList:YS,Divider:um,Drawer:JS,Dropdown:Cl,DropdownItem:ZS,DropdownMenu:Sl,Ellipsis:QS,Email:e2,Exception:t2,Footer:ky,FooterToolbar:n2,Form:pm,FormItem:Yp,GlobalFooter:i2,Grid:g2,GridItem:v2,Header:Ry,Icon:E,Image:y2,ImagePreview:_o,Input:hs,InputNumber:Dy,Layout:_2,Link:S2,List:k2,ListItem:A2,ListItemMeta:P2,LoadingBar:By,Login:O2,Menu:Vy,MenuGroup:V2,MenuItem:F2,Message:zh,Mobile:U2,Modal:fs,Notice:Uy,Notification:J2,NotificationItem:eE,NotificationTab:tE,NumberInfo:nE,Numeral:rE,Option:ii,OptionGroup:sE,Page:aE,PageHeader:oE,Panel:lE,Paragraph:cE,Password:uE,Poptip:Wy,Progress:Tm,Radio:Kp,RadioGroup:jp,Rate:hE,Result:dE,Row:fo,Scroll:pE,ScrollIntoView:Ky,ScrollTop:qy,Select:sr,Sider:bE,Skeleton:_E,SkeletonItem:Xy,Slider:xE,Space:wE,Spin:qr,Split:CE,Step:EE,Steps:ME,Submenu:TE,Submit:kE,Switch:Jy,Table:Am,TablePaste:PE,TabPane:Mm,Tabs:Sm,Tag:Vc,TagSelect:IE,TagSelectOption:NE,Text:RE,Time:Em,Timeline:LE,TimelineItem:BE,TimePicker:OE,Title:VE,Tooltip:_a,Transfer:zE,Tree:r1,TreeSelect:$E,Trend:$y,Typography:HE,Upload:WE,UserName:jE,WordCount:KE},Symbol.toStringTag,{value:"Module"})),BH={mounted(r,o){o.value&&(Y(r,"ivu-line-clamp"),r.style["-webkit-line-clamp"]=o.value)},updated(r,o){o.value&&(r.style["-webkit-line-clamp"]=o.value)},unmounted(r){ne(r,"ivu-line-clamp"),r.style["-webkit-line-clamp"]=null}},OH={mounted(r,o){function u(_){o.value(_)}r.__resizeHandler__=u,r.__observer__=Gc(),r.__observer__.listenTo(r,u)},updated(){},unmounted(r,o){r.__observer__.removeListener(r,r.__resizeHandler__),delete r.__resizeHandler__,delete r.__observer__}};function Eo(r){return String(r).endsWith("%")?"":"px"}var Mo={display:{mounted(r,o){o.value&&(r.style.display=o.value)},updated(r,o){o.value&&(r.style.display=o.value)},unmounted(r){r.style.display=null}},width:{mounted(r,o){o.value&&(r.style.width=o.value+Eo(o.value))},updated(r,o){o.value&&(r.style.width=o.value+Eo(o.value))},unmounted(r){r.style.width=null}},height:{mounted(r,o){o.value&&(r.style.height=o.value+Eo(o.value))},updated(r,o){o.value&&(r.style.height=o.value+Eo(o.value))},unmounted(r){r.style.height=null}},margin:{mounted(r,o){o.value&&(r.style.margin=o.value+Eo(o.value))},updated(r,o){o.value&&(r.style.margin=o.value+Eo(o.value))},unmounted(r){r.style.margin=null}},padding:{mounted(r,o){o.value&&(r.style.padding=o.value+Eo(o.value))},updated(r,o){o.value&&(r.style.padding=o.value+Eo(o.value))},unmounted(r){r.style.padding=null}},font:{mounted(r,o){o&&o.value&&(r.style.fontSize=`${o.value}px`)},updated(r,o){o&&o.value&&(r.style.fontSize=`${o.value}px`)},unmounted(r){r.style.fontSize=null}},color:{mounted(r,o){o.value&&(r.style.color=o.value)},updated(r,o){o.value&&(r.style.color=o.value)},unmounted(r){r.style.color=null}},bgColor:{mounted(r,o){o.value&&(r.style.backgroundColor=o.value)},updated(r,o){o.value&&(r.style.backgroundColor=o.value)},unmounted(r){r.style.backgroundColor=null}}},VH={name:"view-ui-plus",version:"1.3.17",title:"ViewUIPlus",description:"A high quality UI components Library with Vue.js 3",homepage:"http://www.iviewui.com",keywords:["iview","vue","viewui","viewuiplus","vue.js","component","components","ui","framework"],main:"dist/viewuiplus.min.js",typings:"types/index.d.ts",files:["dist","src","types"],scripts:{dev:"vue-cli-service serve",build:"npm run build:prod && npm run build:style && npm run build:lang","build:style":"gulp --gulpfile build/build-style.js","build:prod":"vite build","build:lang":"vite build --config build/vite.lang.config.js",lint:"vue-cli-service lint --fix"},repository:{type:"git",url:"https://github.com/view-design/ViewUIPlus"},author:"Aresn",license:"MIT",bugs:{url:"https://github.com/view-design/ViewUIPlus/issues"},dependencies:{"async-validator":"^3.3.0","countup.js":"^1.9.3",dayjs:"^1.11.0",deepmerge:"^2.2.1","element-resize-detector":"^1.2.0","js-calendar":"^1.2.3","lodash.chunk":"^4.2.0","lodash.throttle":"^4.1.1",numeral:"^2.0.6","popper.js":"^1.14.6",select:"^1.1.2",tinycolor2:"^1.4.1","v-click-outside-x":"^3.7.1"},devDependencies:{"@vitejs/plugin-vue":"^1.9.3","@vue/cli-plugin-babel":"~4.5.0","@vue/cli-plugin-eslint":"~4.5.0","@vue/cli-service":"~4.5.0","@vue/compiler-sfc":"^3.0.0","babel-eslint":"^10.1.0","babel-plugin-import":"^1.13.3",chai:"^4.2.0","copy-webpack-plugin":"^6.4.1","cross-env":"^5.2.0",eslint:"^6.7.2","eslint-plugin-vue":"^7.0.0-0",gulp:"^4.0.2","gulp-autoprefixer":"^8.0.0","gulp-clean-css":"^4.3.0","gulp-less":"^4.0.1","gulp-rename":"^2.0.0",karma:"^2.0.5","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-sinon-chai":"^1.3.3","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"^0.0.32","karma-webpack":"^2.0.13",less:"^2.7.3","less-loader":"^4.1.0","lint-staged":"^10.5.4",lolex:"^2.7.5",mocha:"^5.0.4",sinon:"^4.4.2","sinon-chai":"^3.3.0","style-loader":"^0.20.2",tslint:"^5.14.0",typescript:"^3.3.4000","uglifyjs-webpack-plugin":"^1.3.0","url-loader":"^1.1.2",vite:"^2.6.4",vue:"^3.2.47","vue-hot-reload-api":"^2.3.4","vue-html-loader":"^1.2.4","vue-loader":"^17.0.0","vue-router":"^4.0.14","vue-style-loader":"^4.1.3","vue-template-compiler":"^2.6.14"}};const XE={display:Mo.display,width:Mo.width,height:Mo.height,margin:Mo.margin,padding:Mo.padding,font:Mo.font,color:Mo.color,"bg-color":Mo.bgColor,resize:OH,"line-clamp":BH},YE={...qE,iButton:ar,iCircle:Jp,iCol:Js,iContent:fy,iForm:pm,iFooter:ky,iHeader:Ry,iInput:hs,iMenu:Vy,iOption:ii,iProgress:Tm,iSelect:sr,iSwitch:Jy,iTable:Am,iTime:Em},a1=function(r,o={}){a1.installed||(o.locale&&co.use(o.locale),o.i18n&&co.i18n(o.i18n),Object.keys(YE).forEach(u=>{r.component(u,YE[u])}),Object.keys(XE).forEach(u=>{r.directive(u,XE[u])}),r.config.globalProperties.$VIEWUI={size:o.size||"",capture:"capture"in o?o.capture:!0,transfer:"transfer"in o?o.transfer:"",cell:{arrow:o.cell&&o.cell.arrow?o.cell.arrow:"",customArrow:o.cell&&o.cell.customArrow?o.cell.customArrow:"",arrowSize:o.cell&&o.cell.arrowSize?o.cell.arrowSize:""},menu:{arrow:o.menu&&o.menu.arrow?o.menu.arrow:"",customArrow:o.menu&&o.menu.customArrow?o.menu.customArrow:"",arrowSize:o.menu&&o.menu.arrowSize?o.menu.arrowSize:""},modal:{maskClosable:o.modal&&"maskClosable"in o.modal?o.modal.maskClosable:""},tabs:{closeIcon:o.tabs&&o.tabs.closeIcon?o.tabs.closeIcon:"",customCloseIcon:o.tabs&&o.tabs.customCloseIcon?o.tabs.customCloseIcon:"",closeIconSize:o.tabs&&o.tabs.closeIconSize?o.tabs.closeIconSize:""},select:{arrow:o.select&&o.select.arrow?o.select.arrow:"",customArrow:o.select&&o.select.customArrow?o.select.customArrow:"",arrowSize:o.select&&o.select.arrowSize?o.select.arrowSize:""},colorPicker:{arrow:o.colorPicker&&o.colorPicker.arrow?o.colorPicker.arrow:"",customArrow:o.colorPicker&&o.colorPicker.customArrow?o.colorPicker.customArrow:"",arrowSize:o.colorPicker&&o.colorPicker.arrowSize?o.colorPicker.arrowSize:""},cascader:{arrow:o.cascader&&o.cascader.arrow?o.cascader.arrow:"",customArrow:o.cascader&&o.cascader.customArrow?o.cascader.customArrow:"",arrowSize:o.cascader&&o.cascader.arrowSize?o.cascader.arrowSize:"",itemArrow:o.cascader&&o.cascader.itemArrow?o.cascader.itemArrow:"",customItemArrow:o.cascader&&o.cascader.customItemArrow?o.cascader.customItemArrow:"",itemArrowSize:o.cascader&&o.cascader.itemArrowSize?o.cascader.itemArrowSize:""},tree:{arrow:o.tree&&o.tree.arrow?o.tree.arrow:"",customArrow:o.tree&&o.tree.customArrow?o.tree.customArrow:"",arrowSize:o.tree&&o.tree.arrowSize?o.tree.arrowSize:""},datePicker:{icon:o.datePicker&&o.datePicker.icon?o.datePicker.icon:"",customIcon:o.datePicker&&o.datePicker.customIcon?o.datePicker.customIcon:"",iconSize:o.datePicker&&o.datePicker.iconSize?o.datePicker.iconSize:""},timePicker:{icon:o.timePicker&&o.timePicker.icon?o.timePicker.icon:"",customIcon:o.timePicker&&o.timePicker.customIcon?o.timePicker.customIcon:"",iconSize:o.timePicker&&o.timePicker.iconSize?o.timePicker.iconSize:""},typography:{copyConfig:o.typography&&o.typography.copyConfig?o.typography.copyConfig:"",editConfig:o.typography&&o.typography.editConfig?o.typography.editConfig:"",ellipsisConfig:o.typography&&o.typography.ellipsisConfig?o.typography.ellipsisConfig:""},space:{size:o.space&&o.space.size?o.space.size:""},image:{toolbar:o.image&&o.image.toolbar?o.image.toolbar:""}},r.config.globalProperties.$Spin=qr,r.config.globalProperties.$Loading=By,r.config.globalProperties.$Message=zh,r.config.globalProperties.$Notice=Uy,r.config.globalProperties.$Modal=fs,r.config.globalProperties.$ImagePreview=_o,r.config.globalProperties.$Copy=im,r.config.globalProperties.$ScrollIntoView=Ky,r.config.globalProperties.$ScrollTop=qy,r.config.globalProperties.$Date=Gr)},JE=VH.version,ZE=co.use,QE=co.i18n,eM=r=>{const o=window["viewuiplus/locale"].default;r===o.i.locale?co.use(o):console.log(`The ${r} language pack is not loaded.`)},FH={version:JE,locale:ZE,i18n:QE,install:a1,lang:eM,...qE};n.Affix=y,n.Alert=ee,n.Anchor=$,n.AnchorLink=oe,n.Auth=ke,n.AutoComplete=gC,n.Avatar=Th,n.AvatarList=bC,n.BackTop=_C,n.Badge=Gp,n.Breadcrumb=Zv,n.BreadcrumbItem=Qv,n.Button=ar,n.ButtonGroup=ey,n.Calendar=PC,n.Captcha=OC,n.Card=FC,n.Carousel=UC,n.CarouselItem=zC,n.Cascader=$C,n.Cell=HC,n.CellGroup=GC,n.Checkbox=Oc,n.CheckboxGroup=uy,n.Circle=Jp,n.City=qC,n.Col=Js,n.Collapse=YC,n.ColorPicker=lS,n.Content=fy,n.Copy=im,n.CountDown=mS,n.CountUp=gS,n.DatePicker=qS,n.Description=XS,n.DescriptionList=YS,n.Divider=um,n.Drawer=JS,n.Dropdown=Cl,n.DropdownItem=ZS,n.DropdownMenu=Sl,n.Ellipsis=QS,n.Email=e2,n.Exception=t2,n.Footer=ky,n.FooterToolbar=n2,n.Form=pm,n.FormItem=Yp,n.GlobalFooter=i2,n.Grid=g2,n.GridItem=v2,n.Header=Ry,n.Icon=E,n.Image=y2,n.ImagePreview=_o,n.Input=hs,n.InputNumber=Dy,n.Layout=_2,n.Link=S2,n.List=k2,n.ListItem=A2,n.ListItemMeta=P2,n.LoadingBar=By,n.Login=O2,n.Menu=Vy,n.MenuGroup=V2,n.MenuItem=F2,n.Message=zh,n.Mobile=U2,n.Modal=fs,n.Notice=Uy,n.Notification=J2,n.NotificationItem=eE,n.NotificationTab=tE,n.NumberInfo=nE,n.Numeral=rE,n.Option=ii,n.OptionGroup=sE,n.Page=aE,n.PageHeader=oE,n.Panel=lE,n.Paragraph=cE,n.Password=uE,n.Poptip=Wy,n.Progress=Tm,n.Radio=Kp,n.RadioGroup=jp,n.Rate=hE,n.Result=dE,n.Row=fo,n.Scroll=pE,n.ScrollIntoView=Ky,n.ScrollTop=qy,n.Select=sr,n.Sider=bE,n.Skeleton=_E,n.SkeletonItem=Xy,n.Slider=xE,n.Space=wE,n.Spin=qr,n.Split=CE,n.Step=EE,n.Steps=ME,n.Submenu=TE,n.Submit=kE,n.Switch=Jy,n.TabPane=Mm,n.Table=Am,n.TablePaste=PE,n.Tabs=Sm,n.Tag=Vc,n.TagSelect=IE,n.TagSelectOption=NE,n.Text=RE,n.Time=Em,n.TimePicker=OE,n.Timeline=LE,n.TimelineItem=BE,n.Title=VE,n.Tooltip=_a,n.Transfer=zE,n.Tree=r1,n.TreeSelect=$E,n.Trend=$y,n.Typography=HE,n.Upload=WE,n.UserName=jE,n.WordCount=KE,n.default=FH,n.i18n=QE,n.install=a1,n.lang=eM,n.locale=ZE,n.version=JE,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(ix,ix.exports);var Pue=ix.exports;const Iue=sC(Pue);var jv=mP(Aue);jv.use(Iue);jv.use(Lne);jv.use(MN);jv.mount("#app");
