
export const TetrisShapeType = {
    I: 'I',
    J: 'J',
    L: 'L',
    O: 'O',
    S: 'S',
    T: 'T',
    Z: 'Z',
};

export function getRandomShapeType() {
    const shapeTypes = Object.values(TetrisShapeType);
    return shapeTypes[Math.floor(Math.random() * shapeTypes.length)];
}

export function getRandomColorIndex() {
    return Math.floor(Math.random() * 5);
}

export const colorIndexColors = [
    0xff6b6b,
    0x4ecdc4,
    0x45b7d1,
    0xf9ca24,
    0x6c5ce7
];

function rotateMatrix90(matrix) {
    const rows = matrix.length;
    const cols = matrix[0].length;
    const rotated = [];
    for (let c = 0; c < cols; c++) {
        rotated[c] = [];
        for (let r = rows - 1; r >= 0; r--) {
            rotated[c][rows - 1 - r] = matrix[r][c];
        }
    }
    return rotated;
}

export const TetrisShapeDef = {
    'I': {
        rotations: {
            0: [
                [1, 1, 1, 1],
            ],
            R: [
                [1],
                [1],
                [1],
                [1],
            ],
            2: [
                [1, 1, 1, 1],
            ],
            L: [
                [1],
                [1],
                [1],
                [1],
            ],
        },
        kickTable: {
            '0->R': [[0, 0], [-2, 0], [+1, 0], [-2, -1], [+1, +2]],
            'R->0': [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -2]],
            'R->2': [[0, 0], [-1, 0], [+2, 0], [-1, +2], [+2, -1]],
            '2->R': [[0, 0], [+1, 0], [-2, 0], [+1, -2], [-2, +1]],
            '2->L': [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -2]],
            'L->2': [[0, 0], [-2, 0], [+1, 0], [-2, -1], [+1, +2]],
            'L->0': [[0, 0], [+1, 0], [-2, 0], [+1, -2], [-2, +1]],
            '0->L': [[0, 0], [-1, 0], [+2, 0], [-1, +2], [+2, -1]],
        },
    },
    'J': {
        rotations: {
            0: [
                [1, 0, 0],
                [1, 1, 1],
            ],
            R: [
                [1, 1],
                [1, 0],
                [1, 0],
            ],
            2: [
                [1, 1, 1],
                [0, 0, 1],
            ],
            L: [
                [0, 1],
                [0, 1],
                [1, 1],
            ],
        },
        kickTable: {
            '0->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            'R->0': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            'R->2': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            '2->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            '2->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
            'L->2': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            'L->0': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            '0->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
        },
    },
    'L': {
        rotations: {
            0: [
                [0, 0, 1],
                [1, 1, 1],
            ],
            R: [
                [1, 0],
                [1, 0],
                [1, 1],
            ],
            2: [
                [1, 1, 1],
                [1, 0, 0],
            ],
            L: [
                [1, 1],
                [0, 1],
                [0, 1],
            ],
        },
        kickTable: {
            '0->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            'R->0': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            'R->2': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            '2->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            '2->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
            'L->2': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            'L->0': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            '0->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
        },
    },
    'O': {
        rotations: {
            0: [
                [1, 1],
                [1, 1],
            ],
            R: [
                [1, 1],
                [1, 1],
            ],
            2: [
                [1, 1],
                [1, 1],
            ],
            L: [
                [1, 1],
                [1, 1],
            ],
        },
        kickTable: {},
    },
    'S': {
        rotations: {
            0: [
                [0, 1, 1],
                [1, 1, 0],
            ],
            R: [
                [1, 0],
                [1, 1],
                [0, 1],
            ],
            2: [
                [0, 1, 1],
                [1, 1, 0],
            ],
            L: [
                [1, 0],
                [1, 1],
                [0, 1],
            ],
        },
        kickTable: {
            '0->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            'R->0': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            'R->2': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            '2->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            '2->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
            'L->2': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            'L->0': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            '0->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
        },
    },
    'T': {
        rotations: {
            0: [
                [0, 1, 0],
                [1, 1, 1],
            ],
            R: [
                [1, 0],
                [1, 1],
                [1, 0],
            ],
            2: [
                [1, 1, 1],
                [0, 1, 0],
            ],
            L: [
                [0, 1],
                [1, 1],
                [0, 1],
            ],
        },
        kickTable: {
            '0->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            'R->0': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            'R->2': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            '2->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            '2->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
            'L->2': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            'L->0': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            '0->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
        },
    },
    'Z': {
        rotations: {
            0: [
                [1, 1, 0],
                [0, 1, 1],
            ],
            R: [
                [0, 1],
                [1, 1],
                [1, 0],
            ],
            2: [
                [1, 1, 0],
                [0, 1, 1],
            ],
            L: [
                [0, 1],
                [1, 1],
                [1, 0],
            ],
        },
        kickTable: {
            '0->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            'R->0': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            'R->2': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
            '2->R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
            '2->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
            'L->2': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            'L->0': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
            '0->L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
        },
    },
}